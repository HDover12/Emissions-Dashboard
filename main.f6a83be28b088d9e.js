(self.webpackChunkEmissions_Dashboard=self.webpackChunkEmissions_Dashboard||[]).push([[179],{957:(Tp,_,oe)=>{"use strict";function se(a){return"function"==typeof a}let v=!1;const x={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else v&&console.log("RxJS: Back to a better error behavior. Thank you. <3");v=a},get useDeprecatedSynchronousErrorHandling(){return v}};function T(a){setTimeout(()=>{throw a},0)}const b={closed:!0,next(a){},error(a){if(x.useDeprecatedSynchronousErrorHandling)throw a;T(a)},complete(){}},e=Array.isArray||(a=>a&&"number"==typeof a.length);function o(a){return null!==a&&"object"==typeof a}const l=(()=>{function a(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,C)=>`${C+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return a.prototype=Object.create(Error.prototype),a})();class r{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:C,_unsubscribe:H,_subscriptions:ne}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(null!==n)for(let ge=0;ge<n.length;++ge)n[ge].remove(this);if(se(H)){C&&(this._unsubscribe=void 0);try{H.call(this)}catch(ge){t=ge instanceof l?y(ge.errors):[ge]}}if(e(ne)){let ge=-1,Me=ne.length;for(;++ge<Me;){const ze=ne[ge];if(o(ze))try{ze.unsubscribe()}catch(rt){t=t||[],rt instanceof l?t=t.concat(y(rt.errors)):t.push(rt)}}}if(t)throw new l(t)}add(t){let n=t;if(!t)return r.EMPTY;switch(typeof t){case"function":n=new r(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof r)){const ne=n;n=new r,n._subscriptions=[ne]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:C}=n;if(null===C)n._parentOrParents=this;else if(C instanceof r){if(C===this)return n;n._parentOrParents=[C,this]}else{if(-1!==C.indexOf(this))return n;C.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[n]:H.push(n),n}remove(t){const n=this._subscriptions;if(n){const C=n.indexOf(t);-1!==C&&n.splice(C,1)}}}var a;function y(a){return a.reduce((t,n)=>t.concat(n instanceof l?n.errors:n),[])}r.EMPTY=((a=new r).closed=!0,a);const h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class d extends r{constructor(t,n,C){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=b;break;case 1:if(!t){this.destination=b;break}if("object"==typeof t){t instanceof d?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,t,n,C)}}[h](){return this}static create(t,n,C){const H=new d(t,n,C);return H.syncErrorThrowable=!1,H}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class p extends d{constructor(t,n,C,H){super(),this._parentSubscriber=t;let ne,ge=this;se(n)?ne=n:n&&(ne=n.next,C=n.error,H=n.complete,n!==b&&(ge=Object.create(n),se(ge.unsubscribe)&&this.add(ge.unsubscribe.bind(ge)),ge.unsubscribe=this.unsubscribe.bind(this))),this._context=ge,this._next=ne,this._error=C,this._complete=H}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;x.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:C}=x;if(this._error)C&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)C?(n.syncErrorValue=t,n.syncErrorThrown=!0):T(t),this.unsubscribe();else{if(this.unsubscribe(),C)throw t;T(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);x.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(C){if(this.unsubscribe(),x.useDeprecatedSynchronousErrorHandling)throw C;T(C)}}__tryOrSetError(t,n,C){if(!x.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,C)}catch(H){return x.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=H,t.syncErrorThrown=!0,!0):(T(H),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m="function"==typeof Symbol&&Symbol.observable||"@@observable";function u(a){return a}let A=(()=>{class a{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const C=new a;return C.source=this,C.operator=n,C}subscribe(n,C,H){const{operator:ne}=this,ge=function g(a,t,n){if(a){if(a instanceof d)return a;if(a[h])return a[h]()}return a||t||n?new d(a,t,n):new d(b)}(n,C,H);if(ge.add(ne?ne.call(ge,this.source):this.source||x.useDeprecatedSynchronousErrorHandling&&!ge.syncErrorThrowable?this._subscribe(ge):this._trySubscribe(ge)),x.useDeprecatedSynchronousErrorHandling&&ge.syncErrorThrowable&&(ge.syncErrorThrowable=!1,ge.syncErrorThrown))throw ge.syncErrorValue;return ge}_trySubscribe(n){try{return this._subscribe(n)}catch(C){x.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=C),function c(a){for(;a;){const{closed:t,destination:n,isStopped:C}=a;if(t||C)return!1;a=n&&n instanceof d?n:null}return!0}(n)?n.error(C):console.warn(C)}}forEach(n,C){return new(C=M(C))((H,ne)=>{let ge;ge=this.subscribe(Me=>{try{n(Me)}catch(ze){ne(ze),ge&&ge.unsubscribe()}},ne,H)})}_subscribe(n){const{source:C}=this;return C&&C.subscribe(n)}[m](){return this}pipe(...n){return 0===n.length?this:function f(a){return 0===a.length?u:1===a.length?a[0]:function(n){return a.reduce((C,H)=>H(C),n)}}(n)(this)}toPromise(n){return new(n=M(n))((C,H)=>{let ne;this.subscribe(ge=>ne=ge,ge=>H(ge),()=>C(ne))})}}return a.create=t=>new a(t),a})();function M(a){if(a||(a=x.Promise||Promise),!a)throw new Error("no Promise impl found");return a}const E=(()=>{function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a})();class P extends r{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const C=n.indexOf(this.subscriber);-1!==C&&n.splice(C,1)}}class D extends d{constructor(t){super(t),this.destination=t}}let F=(()=>{class a extends A{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[h](){return new D(this)}lift(n){const C=new R(this,this);return C.operator=n,C}next(n){if(this.closed)throw new E;if(!this.isStopped){const{observers:C}=this,H=C.length,ne=C.slice();for(let ge=0;ge<H;ge++)ne[ge].next(n)}}error(n){if(this.closed)throw new E;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:C}=this,H=C.length,ne=C.slice();for(let ge=0;ge<H;ge++)ne[ge].error(n);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:n}=this,C=n.length,H=n.slice();for(let ne=0;ne<C;ne++)H[ne].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new E;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new E;return this.hasError?(n.error(this.thrownError),r.EMPTY):this.isStopped?(n.complete(),r.EMPTY):(this.observers.push(n),new P(this,n))}asObservable(){const n=new A;return n.source=this,n}}return a.create=(t,n)=>new R(t,n),a})();class R extends F{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):r.EMPTY}}function L(a){return a&&"function"==typeof a.schedule}function I(a,t){return function(C){if("function"!=typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return C.lift(new B(a,t))}}class B{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new V(t,this.project,this.thisArg))}}class V extends d{constructor(t,n,C){super(t),this.project=n,this.count=0,this.thisArg=C||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(C){return void this.destination.error(C)}this.destination.next(n)}}const Z=a=>t=>{for(let n=0,C=a.length;n<C&&!t.closed;n++)t.next(a[n]);t.complete()},re=function Q(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),j=a=>a&&"number"==typeof a.length&&"function"!=typeof a;function q(a){return!!a&&"function"!=typeof a.subscribe&&"function"==typeof a.then}const W=a=>{if(a&&"function"==typeof a[m])return(a=>t=>{const n=a[m]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(a);if(j(a))return Z(a);if(q(a))return(a=>t=>(a.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,T),t))(a);if(a&&"function"==typeof a[re])return(a=>t=>{const n=a[re]();for(;;){let C;try{C=n.next()}catch(H){return t.error(H),t}if(C.done){t.complete();break}if(t.next(C.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(a);{const n=`You provided ${o(a)?"an invalid object":`'${a}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function ee(a,t){return new A(n=>{const C=new r;let H=0;return C.add(t.schedule(function(){H!==a.length?(n.next(a[H++]),n.closed||C.add(this.schedule())):n.complete()})),C})}function he(a,t){return t?function de(a,t){if(null!=a){if(function le(a){return a&&"function"==typeof a[m]}(a))return function ae(a,t){return new A(n=>{const C=new r;return C.add(t.schedule(()=>{const H=a[m]();C.add(H.subscribe({next(ne){C.add(t.schedule(()=>n.next(ne)))},error(ne){C.add(t.schedule(()=>n.error(ne)))},complete(){C.add(t.schedule(()=>n.complete()))}}))})),C})}(a,t);if(q(a))return function G(a,t){return new A(n=>{const C=new r;return C.add(t.schedule(()=>a.then(H=>{C.add(t.schedule(()=>{n.next(H),C.add(t.schedule(()=>n.complete()))}))},H=>{C.add(t.schedule(()=>n.error(H)))}))),C})}(a,t);if(j(a))return ee(a,t);if(function ue(a){return a&&"function"==typeof a[re]}(a)||"string"==typeof a)return function te(a,t){if(!a)throw new Error("Iterable cannot be null");return new A(n=>{const C=new r;let H;return C.add(()=>{H&&"function"==typeof H.return&&H.return()}),C.add(t.schedule(()=>{H=a[re](),C.add(t.schedule(function(){if(n.closed)return;let ne,ge;try{const Me=H.next();ne=Me.value,ge=Me.done}catch(Me){return void n.error(Me)}ge?n.complete():(n.next(ne),this.schedule())}))})),C})}(a,t)}throw new TypeError((null!==a&&typeof a||a)+" is not observable")}(a,t):a instanceof A?a:new A(W(a))}class be extends d{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class _e extends d{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function De(a,t){if(t.closed)return;if(a instanceof A)return a.subscribe(t);let n;try{n=W(a)(t)}catch(C){t.error(C)}return n}function Se(a,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?C=>C.pipe(Se((H,ne)=>he(a(H,ne)).pipe(I((ge,Me)=>t(H,ge,ne,Me))),n)):("number"==typeof t&&(n=t),C=>C.lift(new Fe(a,n)))}class Fe{constructor(t,n=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=n}call(t,n){return n.subscribe(new ve(t,this.project,this.concurrent))}}class ve extends _e{constructor(t,n,C=Number.POSITIVE_INFINITY){super(t),this.project=n,this.concurrent=C,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let n;const C=this.index++;try{n=this.project(t,C)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(n)}_innerSub(t){const n=new be(this),C=this.destination;C.add(n);const H=De(t,n);H!==n&&C.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ie(a=Number.POSITIVE_INFINITY){return Se(u,a)}function Ce(a,t){return t?ee(a,t):new A(Z(a))}function Ue(){return function(t){return t.lift(new qe(t))}}class qe{constructor(t){this.connectable=t}call(t,n){const{connectable:C}=this;C._refCount++;const H=new Xe(t,C),ne=n.subscribe(H);return H.closed||(H.connection=C.connect()),ne}}class Xe extends d{constructor(t,n){super(t),this.connectable=n}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const n=t._refCount;if(n<=0)return void(this.connection=null);if(t._refCount=n-1,n>1)return void(this.connection=null);const{connection:C}=this,H=t._connection;this.connection=null,H&&(!C||H===C)&&H.unsubscribe()}}class st extends A{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new r,t.add(this.source.subscribe(new $e(this.getSubject(),this))),t.closed&&(this._connection=null,t=r.EMPTY)),t}refCount(){return Ue()(this)}}const He=(()=>{const a=st.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}})();class $e extends D{constructor(t,n){super(t),this.connectable=n}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}}}class bt{constructor(t,n){this.subjectFactory=t,this.selector=n}call(t,n){const{selector:C}=this,H=this.subjectFactory(),ne=C(H).subscribe(t);return ne.add(n.subscribe(H)),ne}}function At(){return new F}function Ct(a){for(let t in a)if(a[t]===Ct)return t;throw Error("Could not find renamed property on target object.")}function dt(a,t){for(const n in t)t.hasOwnProperty(n)&&!a.hasOwnProperty(n)&&(a[n]=t[n])}function at(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(at).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const t=a.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Nt(a,t){return null==a||""===a?null===t?"":t:null==t||""===t?a:a+" "+t}const rn=Ct({__forward_ref__:Ct});function en(a){return a.__forward_ref__=en,a.toString=function(){return at(this())},a}function Ge(a){return Qe(a)?a():a}function Qe(a){return"function"==typeof a&&a.hasOwnProperty(rn)&&a.__forward_ref__===en}class gt extends Error{constructor(t,n){super(function Be(a,t){return`NG0${Math.abs(a)}${t?": "+t:""}`}(t,n)),this.code=t}}function Ve(a){return"string"==typeof a?a:null==a?"":String(a)}function Le(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ve(a)}function mt(a,t){const n=t?` in ${t}`:"";throw new gt(-201,`No provider for ${Le(a)} found${n}`)}function It(a,t){null==a&&function Vt(a,t,n,C){throw new Error(`ASSERTION ERROR: ${a}`+(null==C?"":` [Expected=> ${n} ${C} ${t} <=Actual]`))}(t,a,null,"!=")}function wn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function An(a){return{providers:a.providers||[],imports:a.imports||[]}}function hn(a){return pn(a,Yn)||pn(a,sr)}function pn(a,t){return a.hasOwnProperty(t)?a[t]:null}function In(a){return a&&(a.hasOwnProperty(nr)||a.hasOwnProperty(Ar))?a[nr]:null}const Yn=Ct({\u0275prov:Ct}),nr=Ct({\u0275inj:Ct}),sr=Ct({ngInjectableDef:Ct}),Ar=Ct({ngInjectorDef:Ct});var yr=(()=>((yr=yr||{})[yr.Default=0]="Default",yr[yr.Host=1]="Host",yr[yr.Self=2]="Self",yr[yr.SkipSelf=4]="SkipSelf",yr[yr.Optional=8]="Optional",yr))();let Pr;function lr(a){const t=Pr;return Pr=a,t}function Hn(a,t,n){const C=hn(a);return C&&"root"==C.providedIn?void 0===C.value?C.value=C.factory():C.value:n&yr.Optional?null:void 0!==t?t:void mt(at(a),"Injector")}function ti(a){return{toString:a}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),Kn=(()=>(function(a){a[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom"}(Kn||(Kn={})),Kn))();const Qr="undefined"!=typeof globalThis&&globalThis,ci="undefined"!=typeof window&&window,Or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,di=Qr||"undefined"!=typeof global&&global||ci||Or,Zt={},yn=[],Cn=Ct({\u0275cmp:Ct}),rr=Ct({\u0275dir:Ct}),Qn=Ct({\u0275pipe:Ct}),Jn=Ct({\u0275mod:Ct}),Wn=Ct({\u0275fac:Ct}),On=Ct({__NG_ELEMENT_ID__:Ct});let zn=0;function Rn(a){return ti(()=>{const n={},C={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||yn,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Kn.Emulated,id:"c",styles:a.styles||yn,_:null,setInput:null,schemas:a.schemas||null,tView:null},H=a.directives,ne=a.features,ge=a.pipes;return C.id+=zn++,C.inputs=Br(a.inputs,n),C.outputs=Br(a.outputs),ne&&ne.forEach(Me=>Me(C)),C.directiveDefs=H?()=>("function"==typeof H?H():H).map(fr):null,C.pipeDefs=ge?()=>("function"==typeof ge?ge():ge).map(ur):null,C})}function fr(a){return Zr(a)||function mi(a){return a[rr]||null}(a)}function ur(a){return function Zi(a){return a[Qn]||null}(a)}const Mr={};function vr(a){return ti(()=>{const t={type:a.type,bootstrap:a.bootstrap||yn,declarations:a.declarations||yn,imports:a.imports||yn,exports:a.exports||yn,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Mr[a.id]=a.type),t})}function Br(a,t){if(null==a)return Zt;const n={};for(const C in a)if(a.hasOwnProperty(C)){let H=a[C],ne=H;Array.isArray(H)&&(ne=H[1],H=H[0]),n[H]=C,t&&(t[H]=ne)}return n}const or=Rn;function Zr(a){return a[Cn]||null}function Vi(a,t){const n=a[Jn]||null;if(!n&&!0===t)throw new Error(`Type ${at(a)} does not have '\u0275mod' property.`);return n}function Ro(a){return Array.isArray(a)&&"object"==typeof a[1]}function Ho(a){return Array.isArray(a)&&!0===a[1]}function js(a){return 0!=(8&a.flags)}function Ss(a){return 2==(2&a.flags)}function Ys(a){return 1==(1&a.flags)}function mo(a){return null!==a.template}function Pl(a){return 0!=(512&a[2])}function Xr(a,t){return a.hasOwnProperty(Wn)?a[Wn]:null}class ai{constructor(t,n,C){this.previousValue=t,this.currentValue=n,this.firstChange=C}isFirstChange(){return this.firstChange}}function ri(a){return a.type.prototype.ngOnChanges&&(a.setInput=ra),Hi}function Hi(){const a=Sa(this),t=null==a?void 0:a.current;if(t){const n=a.previous;if(n===Zt)a.previous=t;else for(let C in t)n[C]=t[C];a.current=null,this.ngOnChanges(t)}}function ra(a,t,n,C){const H=Sa(a)||function Oa(a,t){return a[La]=t}(a,{previous:Zt,current:null}),ne=H.current||(H.current={}),ge=H.previous,Me=this.declaredInputs[n],ze=ge[Me];ne[Me]=new ai(ze&&ze.currentValue,t,ge===Zt),a[C]=t}const La="__ngSimpleChanges__";function Sa(a){return a[La]||null}let $o;function qt(a){return!!a.listen}const _n={createRenderer:(a,t)=>function xa(){return void 0!==$o?$o:"undefined"!=typeof document?document:void 0}()};function dn(a){for(;Array.isArray(a);)a=a[0];return a}function cr(a,t){return dn(t[a])}function Tr(a,t){return dn(t[a.index])}function Rr(a,t){return a.data[t]}function _r(a,t){const n=t[a];return Ro(n)?n:n[0]}function Hr(a){return 4==(4&a[2])}function ii(a){return 128==(128&a[2])}function Ti(a,t){return null==t?null:a[t]}function dr(a){a[18]=0}function ki(a,t){a[5]+=t;let n=a,C=a[3];for(;null!==C&&(1===t&&1===n[5]||-1===t&&0===n[5]);)C[5]+=t,n=C,C=C[3]}const wr={lFrame:Ql(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yr(){return wr.bindingsEnabled}function pr(){return wr.lFrame.lView}function Di(){return wr.lFrame.tView}function Qi(a){return wr.lFrame.contextLView=a,a[8]}function aa(){let a=Si();for(;null!==a&&64===a.type;)a=a.parent;return a}function Si(){return wr.lFrame.currentTNode}function ao(a,t){const n=wr.lFrame;n.currentTNode=a,n.isParent=t}function Xs(){return wr.lFrame.isParent}function lo(){return wr.isInCheckNoChangesMode}function ns(a){wr.isInCheckNoChangesMode=a}function za(){return wr.lFrame.bindingIndex++}function Al(a,t){const n=wr.lFrame;n.bindingIndex=n.bindingRootIndex=a,Wl(t)}function Wl(a){wr.lFrame.currentDirectiveIndex=a}function Lo(a){const t=wr.lFrame.currentDirectiveIndex;return-1===t?null:a[t]}function Kl(){return wr.lFrame.currentQueryIndex}function Io(a){wr.lFrame.currentQueryIndex=a}function xl(a){const t=a[1];return 2===t.type?t.declTNode:1===t.type?a[6]:null}function Pi(a,t,n){if(n&yr.SkipSelf){let H=t,ne=a;for(;!(H=H.parent,null!==H||n&yr.Host||(H=xl(ne),null===H||(ne=ne[15],10&H.type))););if(null===H)return!1;t=H,a=ne}const C=wr.lFrame=Jl();return C.currentTNode=t,C.lView=a,!0}function Gi(a){const t=Jl(),n=a[1];wr.lFrame=t,t.currentTNode=n.firstChild,t.lView=a,t.tView=n,t.contextLView=a,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Jl(){const a=wr.lFrame,t=null===a?null:a.child;return null===t?Ql(a):t}function Ql(a){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=t),t}function hl(){const a=wr.lFrame;return wr.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Ls=hl;function Is(){const a=hl();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function ca(){return wr.lFrame.selectedIndex}function Pa(a){wr.lFrame.selectedIndex=a}function uo(){const a=wr.lFrame;return Rr(a.tView,a.selectedIndex)}function nl(a,t){for(let n=t.directiveStart,C=t.directiveEnd;n<C;n++){const ne=a.data[n].type.prototype,{ngAfterContentInit:ge,ngAfterContentChecked:Me,ngAfterViewInit:ze,ngAfterViewChecked:rt,ngOnDestroy:Et}=ne;ge&&(a.contentHooks||(a.contentHooks=[])).push(-n,ge),Me&&((a.contentHooks||(a.contentHooks=[])).push(n,Me),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(n,Me)),ze&&(a.viewHooks||(a.viewHooks=[])).push(-n,ze),rt&&((a.viewHooks||(a.viewHooks=[])).push(n,rt),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(n,rt)),null!=Et&&(a.destroyHooks||(a.destroyHooks=[])).push(n,Et)}}function ru(a,t,n){Xu(a,t,3,n)}function ku(a,t,n,C){(3&a[2])===n&&Xu(a,t,n,C)}function _l(a,t){let n=a[2];(3&n)===t&&(n&=2047,n+=1,a[2]=n)}function Xu(a,t,n,C){const ne=null!=C?C:-1,ge=t.length-1;let Me=0;for(let ze=void 0!==C?65535&a[18]:0;ze<ge;ze++)if("number"==typeof t[ze+1]){if(Me=t[ze],null!=C&&Me>=C)break}else t[ze]<0&&(a[18]+=65536),(Me<ne||-1==ne)&&(iu(a,n,t,ze),a[18]=(4294901760&a[18])+ze+2),ze++}function iu(a,t,n,C){const H=n[C]<0,ne=n[C+1],Me=a[H?-n[C]:n[C]];if(H){if(a[2]>>11<a[18]>>16&&(3&a[2])===t){a[2]+=2048;try{ne.call(Me)}finally{}}}else try{ne.call(Me)}finally{}}class au{constructor(t,n,C){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=C}}function we(a,t,n){const C=qt(a);let H=0;for(;H<n.length;){const ne=n[H];if("number"==typeof ne){if(0!==ne)break;H++;const ge=n[H++],Me=n[H++],ze=n[H++];C?a.setAttribute(t,Me,ze,ge):t.setAttributeNS(ge,Me,ze)}else{const ge=ne,Me=n[++H];Pe(ge)?C&&a.setProperty(t,ge,Me):C?a.setAttribute(t,ge,Me):t.setAttribute(ge,Me),H++}}return H}function ke(a){return 3===a||4===a||6===a}function Pe(a){return 64===a.charCodeAt(0)}function Ze(a,t){if(null!==t&&0!==t.length)if(null===a||0===a.length)a=t.slice();else{let n=-1;for(let C=0;C<t.length;C++){const H=t[C];"number"==typeof H?n=H:0===n||nt(a,n,H,null,-1===n||2===n?t[++C]:null)}}return a}function nt(a,t,n,C,H){let ne=0,ge=a.length;if(-1===t)ge=-1;else for(;ne<a.length;){const Me=a[ne++];if("number"==typeof Me){if(Me===t){ge=-1;break}if(Me>t){ge=ne-1;break}}}for(;ne<a.length;){const Me=a[ne];if("number"==typeof Me)break;if(Me===n){if(null===C)return void(null!==H&&(a[ne+1]=H));if(C===a[ne+1])return void(a[ne+2]=H)}ne++,null!==C&&ne++,null!==H&&ne++}-1!==ge&&(a.splice(ge,0,t),ne=ge+1),a.splice(ne++,0,n),null!==C&&a.splice(ne++,0,C),null!==H&&a.splice(ne++,0,H)}function ht(a){return-1!==a}function St(a){return 32767&a}function Lt(a,t){let n=function jt(a){return a>>16}(a),C=t;for(;n>0;)C=C[15],n--;return C}let Ft=!0;function kt(a){const t=Ft;return Ft=a,t}let gn=0;function jn(a,t){const n=mr(a,t);if(-1!==n)return n;const C=t[1];C.firstCreatePass&&(a.injectorIndex=t.length,Nn(C.data,a),Nn(t,null),Nn(C.blueprint,null));const H=gr(a,t),ne=a.injectorIndex;if(ht(H)){const ge=St(H),Me=Lt(H,t),ze=Me[1].data;for(let rt=0;rt<8;rt++)t[ne+rt]=Me[ge+rt]|ze[ge+rt]}return t[ne+8]=H,ne}function Nn(a,t){a.push(0,0,0,0,0,0,0,0,t)}function mr(a,t){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===t[a.injectorIndex+8]?-1:a.injectorIndex}function gr(a,t){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let n=0,C=null,H=t;for(;null!==H;){const ne=H[1],ge=ne.type;if(C=2===ge?ne.declTNode:1===ge?H[6]:null,null===C)return-1;if(n++,H=H[15],-1!==C.injectorIndex)return C.injectorIndex|n<<16}return-1}function Dr(a,t,n){!function kn(a,t,n){let C;"string"==typeof n?C=n.charCodeAt(0)||0:n.hasOwnProperty(On)&&(C=n[On]),null==C&&(C=n[On]=gn++);const H=255&C;t.data[a+(H>>5)]|=1<<H}(a,t,n)}function fi(a,t,n){if(n&yr.Optional)return a;mt(t,"NodeInjector")}function bi(a,t,n,C){if(n&yr.Optional&&void 0===C&&(C=null),0==(n&(yr.Self|yr.Host))){const H=a[9],ne=lr(void 0);try{return H?H.get(t,C,n&yr.Optional):Hn(t,C,n&yr.Optional)}finally{lr(ne)}}return fi(C,t,n)}function Oi(a,t,n,C=yr.Default,H){if(null!==a){const ne=function Bi(a){if("string"==typeof a)return a.charCodeAt(0)||0;const t=a.hasOwnProperty(On)?a[On]:void 0;return"number"==typeof t?t>=0?255&t:Gr:t}(n);if("function"==typeof ne){if(!Pi(t,a,C))return C&yr.Host?fi(H,n,C):bi(t,n,C,H);try{const ge=ne(C);if(null!=ge||C&yr.Optional)return ge;mt(n)}finally{Ls()}}else if("number"==typeof ne){let ge=null,Me=mr(a,t),ze=-1,rt=C&yr.Host?t[16][6]:null;for((-1===Me||C&yr.SkipSelf)&&(ze=-1===Me?gr(a,t):t[Me+8],-1!==ze&&Mi(C,!1)?(ge=t[1],Me=St(ze),t=Lt(ze,t)):Me=-1);-1!==Me;){const Et=t[1];if(oa(ne,Me,Et.data)){const Kt=_i(Me,t,n,ge,C,rt);if(Kt!==ar)return Kt}ze=t[Me+8],-1!==ze&&Mi(C,t[1].data[Me+8]===rt)&&oa(ne,Me,t)?(ge=Et,Me=St(ze),t=Lt(ze,t)):Me=-1}}}return bi(t,n,C,H)}const ar={};function Gr(){return new qi(aa(),pr())}function _i(a,t,n,C,H,ne){const ge=t[1],Me=ge.data[a+8],Et=gi(Me,ge,n,null==C?Ss(Me)&&Ft:C!=ge&&0!=(3&Me.type),H&yr.Host&&ne===Me);return null!==Et?Ai(t,ge,Et,Me):ar}function gi(a,t,n,C,H){const ne=a.providerIndexes,ge=t.data,Me=1048575&ne,ze=a.directiveStart,Et=ne>>20,bn=H?Me+Et:a.directiveEnd;for(let Sn=C?Me:Me+Et;Sn<bn;Sn++){const Xn=ge[Sn];if(Sn<ze&&n===Xn||Sn>=ze&&Xn.type===n)return Sn}if(H){const Sn=ge[ze];if(Sn&&mo(Sn)&&Sn.type===n)return ze}return null}function Ai(a,t,n,C){let H=a[n];const ne=t.data;if(function Hc(a){return a instanceof au}(H)){const ge=H;ge.resolving&&function je(a,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${a}`:"";throw new gt(-200,`Circular dependency in DI detected for ${a}${n}`)}(Le(ne[n]));const Me=kt(ge.canSeeViewProviders);ge.resolving=!0;const ze=ge.injectImpl?lr(ge.injectImpl):null;Pi(a,C,yr.Default);try{H=a[n]=ge.factory(void 0,ne,a,C),t.firstCreatePass&&n>=C.directiveStart&&function nu(a,t,n){const{ngOnChanges:C,ngOnInit:H,ngDoCheck:ne}=t.type.prototype;if(C){const ge=ri(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(a,ge),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a,ge)}H&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-a,H),ne&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a,ne),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a,ne))}(n,ne[n],t)}finally{null!==ze&&lr(ze),kt(Me),ge.resolving=!1,Ls()}}return H}function oa(a,t,n){return!!(n[t+(a>>5)]&1<<a)}function Mi(a,t){return!(a&yr.Self||a&yr.Host&&t)}class qi{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,C){return Oi(this._tNode,this._lView,t,C,n)}}function Ii(a){return ti(()=>{const t=a.prototype.constructor,n=t[Wn]||da(t),C=Object.prototype;let H=Object.getPrototypeOf(a.prototype).constructor;for(;H&&H!==C;){const ne=H[Wn]||da(H);if(ne&&ne!==n)return ne;H=Object.getPrototypeOf(H)}return ne=>new ne})}function da(a){return Qe(a)?()=>{const t=da(Ge(a));return t&&t()}:Xr(a)}const wa="__parameters__";function Wa(a,t,n){return ti(()=>{const C=function ko(a){return function(...n){if(a){const C=a(...n);for(const H in C)this[H]=C[H]}}}(t);function H(...ne){if(this instanceof H)return C.apply(this,ne),this;const ge=new H(...ne);return Me.annotation=ge,Me;function Me(ze,rt,Et){const Kt=ze.hasOwnProperty(wa)?ze[wa]:Object.defineProperty(ze,wa,{value:[]})[wa];for(;Kt.length<=Et;)Kt.push(null);return(Kt[Et]=Kt[Et]||[]).push(ge),ze}}return n&&(H.prototype=Object.create(n.prototype)),H.prototype.ngMetadataName=a,H.annotationCls=H,H})}class ea{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=wn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ko=new ea("AnalyzeForEntryComponents");function Eo(a,t){void 0===t&&(t=a);for(let n=0;n<a.length;n++){let C=a[n];Array.isArray(C)?(t===a&&(t=a.slice(0,n)),Eo(C,t)):t!==a&&t.push(C)}return t}function wl(a,t){a.forEach(n=>Array.isArray(n)?wl(n,t):t(n))}function Jh(a,t,n){t>=a.length?a.push(n):a.splice(t,0,n)}function Us(a,t){return t>=a.length-1?a.pop():a.splice(t,1)[0]}function Rl(a,t,n){let C=Wc(a,t);return C>=0?a[1|C]=n:(C=~C,function Eu(a,t,n,C){let H=a.length;if(H==t)a.push(n,C);else if(1===H)a.push(C,a[0]),a[0]=n;else{for(H--,a.push(a[H-1],a[H]);H>t;)a[H]=a[H-2],H--;a[t]=n,a[t+1]=C}}(a,C,t,n)),C}function Ap(a,t){const n=Wc(a,t);if(n>=0)return a[1|n]}function Wc(a,t){return function Qh(a,t,n){let C=0,H=a.length>>n;for(;H!==C;){const ne=C+(H-C>>1),ge=a[ne<<n];if(t===ge)return ne<<n;ge>t?H=ne:C=ne+1}return~(H<<n)}(a,t,1)}const wf={},ih="__NG_DI_FLAG__",td="ngTempTokenPath",mg=/\n/gm,Tf="__source",jy=Ct({provide:String,useValue:Ct});let ah;function yg(a){const t=ah;return ah=a,t}function Vy(a,t=yr.Default){if(void 0===ah)throw new gt(203,"");return null===ah?Hn(a,void 0,t):ah.get(a,t&yr.Optional?null:void 0,t)}function ta(a,t=yr.Default){return(function Wr(){return Pr}()||Vy)(Ge(a),t)}const Uy=ta;function oh(a){const t=[];for(let n=0;n<a.length;n++){const C=Ge(a[n]);if(Array.isArray(C)){if(0===C.length)throw new gt(900,"");let H,ne=yr.Default;for(let ge=0;ge<C.length;ge++){const Me=C[ge],ze=Mf(Me);"number"==typeof ze?-1===ze?H=Me.token:ne|=ze:H=Me}t.push(ta(H,ne))}else t.push(ta(C))}return t}function sh(a,t){return a[ih]=t,a.prototype[ih]=t,a}function Mf(a){return a[ih]}const Zc=sh(Wa("Inject",a=>({token:a})),-1),Qu=sh(Wa("Optional"),8),vc=sh(Wa("SkipSelf"),4);const jp="__ngContext__";function Ks(a,t){a[jp]=t}function Vp(a){const t=function $c(a){return a[jp]||null}(a);return t?Array.isArray(t)?t:t.lView:null}function md(a){return a.ngOriginalError}function yd(a,...t){a.error(...t)}class Sf{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),C=function Rg(a){return a&&a.ngErrorLogger||yd}(t);C(this._console,"ERROR",t),n&&C(this._console,"ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&md(t);for(;n&&md(n);)n=md(n);return n||null}}const Gp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(di))();function Lu(a){return a instanceof Function?a():a}var al=(()=>((al=al||{})[al.Important=1]="Important",al[al.DashCase=2]="DashCase",al))();function Yp(a,t){return undefined(a,t)}function xh(a){const t=a[3];return Ho(t)?t[3]:t}function Xp(a){return qg(a[13])}function $p(a){return qg(a[4])}function qg(a){for(;null!==a&&!Ho(a);)a=a[4];return a}function Jc(a,t,n,C,H){if(null!=C){let ne,ge=!1;Ho(C)?ne=C:Ro(C)&&(ge=!0,C=C[0]);const Me=dn(C);0===a&&null!==n?null==H?is(t,n,Me):Ac(t,n,Me,H||null,!0):1===a&&null!==n?Ac(t,n,Me,H||null,!0):2===a?function S(a,t,n){const C=ef(a,t);C&&function tc(a,t,n,C){qt(a)?a.removeChild(t,n,C):t.removeChild(n)}(a,C,t,n)}(t,Me,ge):3===a&&t.destroyNode(Me),null!=ne&&function Ae(a,t,n,C,H){const ne=n[7];ne!==dn(n)&&Jc(t,a,C,ne,H);for(let Me=10;Me<n.length;Me++){const ze=n[Me];K(ze[1],ze,a,t,C,ne)}}(t,a,ne,n,H)}}function If(a,t,n){if(qt(a))return a.createElement(t,n);{const C=null!==n?function hs(a){const t=a.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===C?a.createElement(t):a.createElementNS(C,t)}}function Qp(a,t){const n=a[9],C=n.indexOf(t),H=t[3];1024&t[2]&&(t[2]&=-1025,ki(H,-1)),n.splice(C,1)}function wd(a,t){if(a.length<=10)return;const n=10+t,C=a[n];if(C){const H=C[17];null!==H&&H!==a&&Qp(H,C),t>0&&(a[n-1][4]=C[4]);const ne=Us(a,10+t);!function Qc(a,t){K(a,t,t[11],2,null,null),t[0]=null,t[6]=null}(C[1],C);const ge=ne[19];null!==ge&&ge.detachView(ne[1]),C[3]=null,C[4]=null,C[2]&=-129}return C}function e0(a,t){if(!(256&t[2])){const n=t[11];qt(n)&&n.destroyNode&&K(a,t,n,3,null,null),function Wg(a){let t=a[13];if(!t)return Td(a[1],a);for(;t;){let n=null;if(Ro(t))n=t[13];else{const C=t[10];C&&(n=C)}if(!n){for(;t&&!t[4]&&t!==a;)Ro(t)&&Td(t[1],t),t=t[3];null===t&&(t=a),Ro(t)&&Td(t[1],t),n=t&&t[4]}t=n}}(t)}}function Td(a,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function t0(a,t){let n;if(null!=a&&null!=(n=a.destroyHooks))for(let C=0;C<n.length;C+=2){const H=t[n[C]];if(!(H instanceof au)){const ne=n[C+1];if(Array.isArray(ne))for(let ge=0;ge<ne.length;ge+=2){const Me=H[ne[ge]],ze=ne[ge+1];try{ze.call(Me)}finally{}}else try{ne.call(H)}finally{}}}}(a,t),function Yg(a,t){const n=a.cleanup,C=t[7];let H=-1;if(null!==n)for(let ne=0;ne<n.length-1;ne+=2)if("string"==typeof n[ne]){const ge=n[ne+1],Me="function"==typeof ge?ge(t):dn(t[ge]),ze=C[H=n[ne+2]],rt=n[ne+3];"boolean"==typeof rt?Me.removeEventListener(n[ne],ze,rt):rt>=0?C[H=rt]():C[H=-rt].unsubscribe(),ne+=2}else{const ge=C[H=n[ne+1]];n[ne].call(ge)}if(null!==C){for(let ne=H+1;ne<C.length;ne++)C[ne]();t[7]=null}}(a,t),1===t[1].type&&qt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Ho(t[3])){n!==t[3]&&Qp(n,t);const C=t[19];null!==C&&C.detachView(a)}}}function Tc(a,t,n){return function Mc(a,t,n){let C=t;for(;null!==C&&40&C.type;)C=(t=C).parent;if(null===C)return n[0];if(2&C.flags){const H=a.data[C.directiveStart].encapsulation;if(H===Kn.None||H===Kn.Emulated)return null}return Tr(C,n)}(a,t.parent,n)}function Ac(a,t,n,C,H){qt(a)?a.insertBefore(t,n,C,H):t.insertBefore(n,C,H)}function is(a,t,n){qt(a)?a.appendChild(t,n):t.appendChild(n)}function Of(a,t,n,C,H){null!==C?Ac(a,t,n,C,H):is(a,t,n)}function ef(a,t){return qt(a)?a.parentNode(t):t.parentNode}let Iu=function tf(a,t,n){return 40&a.type?Tr(a,n):null};function Ed(a,t,n,C){const H=Tc(a,C,t),ne=t[11],Me=function Ad(a,t,n){return Iu(a,t,n)}(C.parent||t[6],C,t);if(null!=H)if(Array.isArray(n))for(let ze=0;ze<n.length;ze++)Of(ne,H,n[ze],Me,!1);else Of(ne,H,n,Me,!1)}function as(a,t){if(null!==t){const n=t.type;if(3&n)return Tr(t,a);if(4&n)return Sd(-1,a[t.index]);if(8&n){const C=t.child;if(null!==C)return as(a,C);{const H=a[t.index];return Ho(H)?Sd(-1,H):dn(H)}}if(32&n)return Yp(t,a)()||dn(a[t.index]);{const C=nc(a,t);return null!==C?Array.isArray(C)?C[0]:as(xh(a[16]),C):as(a,t.next)}}return null}function nc(a,t){return null!==t?a[16][6].projection[t.projection]:null}function Sd(a,t){const n=10+a+1;if(n<t.length){const C=t[n],H=C[1].firstChild;if(null!==H)return as(C,H)}return t[7]}function N(a,t,n,C,H,ne,ge){for(;null!=n;){const Me=C[n.index],ze=n.type;if(ge&&0===t&&(Me&&Ks(dn(Me),C),n.flags|=4),64!=(64&n.flags))if(8&ze)N(a,t,n.child,C,H,ne,!1),Jc(t,a,H,Me,ne);else if(32&ze){const rt=Yp(n,C);let Et;for(;Et=rt();)Jc(t,a,H,Et,ne);Jc(t,a,H,Me,ne)}else 16&ze?xe(a,t,C,n,H,ne):Jc(t,a,H,Me,ne);n=ge?n.projectionNext:n.next}}function K(a,t,n,C,H,ne){N(n,C,a.firstChild,t,H,ne,!1)}function xe(a,t,n,C,H,ne){const ge=n[16],ze=ge[6].projection[C.projection];if(Array.isArray(ze))for(let rt=0;rt<ze.length;rt++)Jc(t,a,H,ze[rt],ne);else N(a,t,ze,ge[3],H,ne,!0)}function We(a,t,n){qt(a)?a.setAttribute(t,"style",n):t.style.cssText=n}function it(a,t,n){qt(a)?""===n?a.removeAttribute(t,"class"):a.setAttribute(t,"class",n):t.className=n}function xt(a,t,n){let C=a.length;for(;;){const H=a.indexOf(t,n);if(-1===H)return H;if(0===H||a.charCodeAt(H-1)<=32){const ne=t.length;if(H+ne===C||a.charCodeAt(H+ne)<=32)return H}n=H+1}}const Yt="ng-template";function sn(a,t,n){let C=0;for(;C<a.length;){let H=a[C++];if(n&&"class"===H){if(H=a[C],-1!==xt(H.toLowerCase(),t,0))return!0}else if(1===H){for(;C<a.length&&"string"==typeof(H=a[C++]);)if(H.toLowerCase()===t)return!0;return!1}}return!1}function tn(a){return 4===a.type&&a.value!==Yt}function mn(a,t,n){return t===(4!==a.type||n?a.value:Yt)}function Dn(a,t,n){let C=4;const H=a.attrs||[],ne=function hr(a){for(let t=0;t<a.length;t++)if(ke(a[t]))return t;return a.length}(H);let ge=!1;for(let Me=0;Me<t.length;Me++){const ze=t[Me];if("number"!=typeof ze){if(!ge)if(4&C){if(C=2|1&C,""!==ze&&!mn(a,ze,n)||""===ze&&1===t.length){if(Bn(C))return!1;ge=!0}}else{const rt=8&C?ze:t[++Me];if(8&C&&null!==a.attrs){if(!sn(a.attrs,rt,n)){if(Bn(C))return!1;ge=!0}continue}const Kt=Vn(8&C?"class":ze,H,tn(a),n);if(-1===Kt){if(Bn(C))return!1;ge=!0;continue}if(""!==rt){let bn;bn=Kt>ne?"":H[Kt+1].toLowerCase();const Sn=8&C?bn:null;if(Sn&&-1!==xt(Sn,rt,0)||2&C&&rt!==bn){if(Bn(C))return!1;ge=!0}}}}else{if(!ge&&!Bn(C)&&!Bn(ze))return!1;if(ge&&Bn(ze))continue;ge=!1,C=ze|1&C}}return Bn(C)||ge}function Bn(a){return 0==(1&a)}function Vn(a,t,n,C){if(null===t)return-1;let H=0;if(C||!n){let ne=!1;for(;H<t.length;){const ge=t[H];if(ge===a)return H;if(3===ge||6===ge)ne=!0;else{if(1===ge||2===ge){let Me=t[++H];for(;"string"==typeof Me;)Me=t[++H];continue}if(4===ge)break;if(0===ge){H+=4;continue}}H+=ne?1:2}return-1}return function Ir(a,t){let n=a.indexOf(4);if(n>-1)for(n++;n<a.length;){const C=a[n];if("number"==typeof C)return-1;if(C===t)return n;n++}return-1}(t,a)}function er(a,t,n=!1){for(let C=0;C<t.length;C++)if(Dn(a,t[C],n))return!0;return!1}function si(a,t){return a?":not("+t.trim()+")":t}function oi(a){let t=a[0],n=1,C=2,H="",ne=!1;for(;n<a.length;){let ge=a[n];if("string"==typeof ge)if(2&C){const Me=a[++n];H+="["+ge+(Me.length>0?'="'+Me+'"':"")+"]"}else 8&C?H+="."+ge:4&C&&(H+=" "+ge);else""!==H&&!Bn(ge)&&(t+=si(ne,H),H=""),C=ge,ne=ne||!Bn(C);n++}return""!==H&&(t+=si(ne,H)),t}const $r={};function ui(a){zi(Di(),pr(),ca()+a,lo())}function zi(a,t,n,C){if(!C)if(3==(3&t[2])){const ne=a.preOrderCheckHooks;null!==ne&&ru(t,ne,n)}else{const ne=a.preOrderHooks;null!==ne&&ku(t,ne,0,n)}Pa(n)}function Ci(a,t){return a<<17|t<<2}function va(a){return a>>17&32767}function Xi(a){return 2|a}function ba(a){return(131068&a)>>2}function ho(a,t){return-131069&a|t<<2}function xo(a){return 1|a}function Th(a,t){const n=a.contentQueries;if(null!==n)for(let C=0;C<n.length;C+=2){const H=n[C],ne=n[C+1];if(-1!==ne){const ge=a.data[ne];Io(H),ge.contentQueries(2,t[ne],ne)}}}function Sc(a,t,n,C,H,ne,ge,Me,ze,rt){const Et=t.blueprint.slice();return Et[0]=H,Et[2]=140|C,dr(Et),Et[3]=Et[15]=a,Et[8]=n,Et[10]=ge||a&&a[10],Et[11]=Me||a&&a[11],Et[12]=ze||a&&a[12]||null,Et[9]=rt||a&&a[9]||null,Et[6]=ne,Et[16]=2==t.type?a[16]:Et,Et}function zu(a,t,n,C,H){let ne=a.data[t];if(null===ne)ne=function Nf(a,t,n,C,H){const ne=Si(),ge=Xs(),ze=a.data[t]=function $g(a,t,n,C,H,ne){return{type:n,index:C,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:H,attrs:ne,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,ge?ne:ne&&ne.parent,n,t,C,H);return null===a.firstChild&&(a.firstChild=ze),null!==ne&&(ge?null==ne.child&&null!==ze.parent&&(ne.child=ze):null===ne.next&&(ne.next=ze)),ze}(a,t,n,C,H),function Qa(){return wr.lFrame.inI18n}()&&(ne.flags|=64);else if(64&ne.type){ne.type=n,ne.value=C,ne.attrs=H;const ge=function Ia(){const a=wr.lFrame,t=a.currentTNode;return a.isParent?t:t.parent}();ne.injectorIndex=null===ge?-1:ge.injectorIndex}return ao(ne,!0),ne}function Bu(a,t,n,C){if(0===n)return-1;const H=t.length;for(let ne=0;ne<n;ne++)t.push(C),a.blueprint.push(C),a.data.push(null);return H}function Cc(a,t,n){Gi(t);try{const C=a.viewQuery;null!==C&&Bd(1,C,n);const H=a.template;null!==H&&af(a,t,H,1,n),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Th(a,t),a.staticViewQueries&&Bd(2,a.viewQuery,n);const ne=a.components;null!==ne&&function Mh(a,t){for(let n=0;n<t.length;n++)tm(a,t[n])}(t,ne)}catch(C){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),C}finally{t[2]&=-5,Is()}}function du(a,t,n,C){const H=t[2];if(256==(256&H))return;Gi(t);const ne=lo();try{dr(t),function Wo(a){return wr.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==n&&af(a,t,n,2,C);const ge=3==(3&H);if(!ne)if(ge){const rt=a.preOrderCheckHooks;null!==rt&&ru(t,rt,null)}else{const rt=a.preOrderHooks;null!==rt&&ku(t,rt,0,null),_l(t,0)}if(function Uf(a){for(let t=Xp(a);null!==t;t=$p(t)){if(!t[2])continue;const n=t[9];for(let C=0;C<n.length;C++){const H=n[C],ne=H[3];0==(1024&H[2])&&ki(ne,1),H[2]|=1024}}}(t),function Vf(a){for(let t=Xp(a);null!==t;t=$p(t))for(let n=10;n<t.length;n++){const C=t[n],H=C[1];ii(C)&&du(H,C,H.template,C[8])}}(t),null!==a.contentQueries&&Th(a,t),!ne)if(ge){const rt=a.contentCheckHooks;null!==rt&&ru(t,rt)}else{const rt=a.contentHooks;null!==rt&&ku(t,rt,1),_l(t,1)}!function Dd(a,t){const n=a.hostBindingOpCodes;if(null!==n)try{for(let C=0;C<n.length;C++){const H=n[C];if(H<0)Pa(~H);else{const ne=H,ge=n[++C],Me=n[++C];Al(ge,ne),Me(2,t[ne])}}}finally{Pa(-1)}}(a,t);const Me=a.components;null!==Me&&function Ld(a,t){for(let n=0;n<t.length;n++)Hf(a,t[n])}(t,Me);const ze=a.viewQuery;if(null!==ze&&Bd(2,ze,C),!ne)if(ge){const rt=a.viewCheckHooks;null!==rt&&ru(t,rt)}else{const rt=a.viewHooks;null!==rt&&ku(t,rt,2),_l(t,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),ne||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,ki(t[3],-1))}finally{Is()}}function zf(a,t,n,C){const H=t[10],ne=!lo(),ge=Hr(t);try{ne&&!ge&&H.begin&&H.begin(),ge&&Cc(a,t,C),du(a,t,n,C)}finally{ne&&!ge&&H.end&&H.end()}}function af(a,t,n,C,H){const ne=ca(),ge=2&C;try{Pa(-1),ge&&t.length>20&&zi(a,t,20,lo()),n(C,H)}finally{Pa(ne)}}function Dc(a,t,n){!Yr()||(function Fd(a,t,n,C){const H=n.directiveStart,ne=n.directiveEnd;a.firstCreatePass||jn(n,t),Ks(C,t);const ge=n.initialInputs;for(let Me=H;Me<ne;Me++){const ze=a.data[Me],rt=mo(ze);rt&&Cl(t,n,ze);const Et=Ai(t,a,Me,n);Ks(Et,t),null!==ge&&Vu(0,Me-H,Et,ze,0,ge),rt&&(_r(n.index,t)[8]=Et)}}(a,t,n,Tr(n,t)),128==(128&n.flags)&&function s0(a,t,n){const C=n.directiveStart,H=n.directiveEnd,ge=n.index,Me=function vl(){return wr.lFrame.currentDirectiveIndex}();try{Pa(ge);for(let ze=C;ze<H;ze++){const rt=a.data[ze],Et=t[ze];Wl(ze),(null!==rt.hostBindings||0!==rt.hostVars||null!==rt.hostAttrs)&&l0(rt,Et)}}finally{Pa(-1),Wl(Me)}}(a,t,n))}function of(a,t,n=Tr){const C=t.localNames;if(null!==C){let H=t.index+1;for(let ne=0;ne<C.length;ne+=2){const ge=C[ne+1],Me=-1===ge?n(t,a):a[ge];a[H++]=Me}}}function sf(a){const t=a.tView;return null===t||t.incompleteFirstPass?a.tView=kh(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):t}function kh(a,t,n,C,H,ne,ge,Me,ze,rt){const Et=20+C,Kt=Et+H,bn=function r0(a,t){const n=[];for(let C=0;C<t;C++)n.push(C<a?null:$r);return n}(Et,Kt),Sn="function"==typeof rt?rt():rt;return bn[1]={type:a,blueprint:bn,template:n,queries:null,viewQuery:Me,declTNode:t,data:bn.slice().fill(null,Et),bindingStartIndex:Et,expandoStartIndex:Kt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof ne?ne():ne,pipeRegistry:"function"==typeof ge?ge():ge,firstChild:null,schemas:ze,consts:Sn,incompleteFirstPass:!1}}function Pd(a,t,n,C){const H=y0(t);null===n?H.push(C):(H.push(n),a.firstCreatePass&&v0(a).push(C,H.length-1))}function Od(a,t,n){for(let C in a)if(a.hasOwnProperty(C)){const H=a[C];(n=null===n?{}:n).hasOwnProperty(C)?n[C].push(t,H):n[C]=[t,H]}return n}function to(a,t,n,C,H,ne,ge,Me){const ze=Tr(t,n);let Et,rt=t.inputs;!Me&&null!=rt&&(Et=rt[C])?(qf(a,n,Et,C,H),Ss(t)&&function pu(a,t){const n=_r(t,a);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(C=function Eh(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(C),H=null!=ge?ge(H,t.value||"",C):H,qt(ne)?ne.setProperty(ze,C,H):Pe(C)||(ze.setProperty?ze.setProperty(C,H):ze[C]=H))}function Bf(a,t,n,C){let H=!1;if(Yr()){const ne=function Sh(a,t,n){const C=a.directiveRegistry;let H=null;if(C)for(let ne=0;ne<C.length;ne++){const ge=C[ne];er(n,ge.selectors,!1)&&(H||(H=[]),Dr(jn(n,t),a,ge.type),mo(ge)?(u0(a,n),H.unshift(ge)):H.push(ge))}return H}(a,t,n),ge=null===C?null:{"":-1};if(null!==ne){H=!0,c0(n,a.data.length,ne.length);for(let Et=0;Et<ne.length;Et++){const Kt=ne[Et];Kt.providersResolver&&Kt.providersResolver(Kt)}let Me=!1,ze=!1,rt=Bu(a,t,ne.length,null);for(let Et=0;Et<ne.length;Et++){const Kt=ne[Et];n.mergedAttrs=Ze(n.mergedAttrs,Kt.hostAttrs),f0(a,n,t,rt,Kt),Qg(rt,Kt,ge),null!==Kt.contentQueries&&(n.flags|=8),(null!==Kt.hostBindings||null!==Kt.hostAttrs||0!==Kt.hostVars)&&(n.flags|=128);const bn=Kt.type.prototype;!Me&&(bn.ngOnChanges||bn.ngOnInit||bn.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n.index),Me=!0),!ze&&(bn.ngOnChanges||bn.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n.index),ze=!0),rt++}!function vv(a,t){const C=t.directiveEnd,H=a.data,ne=t.attrs,ge=[];let Me=null,ze=null;for(let rt=t.directiveStart;rt<C;rt++){const Et=H[rt],Kt=Et.inputs,bn=null===ne||tn(t)?null:bv(Kt,ne);ge.push(bn),Me=Od(Kt,rt,Me),ze=Od(Et.outputs,rt,ze)}null!==Me&&(Me.hasOwnProperty("class")&&(t.flags|=16),Me.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=ge,t.inputs=Me,t.outputs=ze}(a,n)}ge&&function Jg(a,t,n){if(t){const C=a.localNames=[];for(let H=0;H<t.length;H+=2){const ne=n[t[H+1]];if(null==ne)throw new gt(-301,!1);C.push(t[H],ne)}}}(n,C,ge)}return n.mergedAttrs=Ze(n.mergedAttrs,n.attrs),H}function jf(a,t,n,C,H,ne){const ge=ne.hostBindings;if(ge){let Me=a.hostBindingOpCodes;null===Me&&(Me=a.hostBindingOpCodes=[]);const ze=~t.index;(function Rd(a){let t=a.length;for(;t>0;){const n=a[--t];if("number"==typeof n&&n<0)return n}return 0})(Me)!=ze&&Me.push(ze),Me.push(C,H,ge)}}function l0(a,t){null!==a.hostBindings&&a.hostBindings(1,t)}function u0(a,t){t.flags|=2,(a.components||(a.components=[])).push(t.index)}function Qg(a,t,n){if(n){if(t.exportAs)for(let C=0;C<t.exportAs.length;C++)n[t.exportAs[C]]=a;mo(t)&&(n[""]=a)}}function c0(a,t,n){a.flags|=1,a.directiveStart=t,a.directiveEnd=t+n,a.providerIndexes=t}function f0(a,t,n,C,H){a.data[C]=H;const ne=H.factory||(H.factory=Xr(H.type)),ge=new au(ne,mo(H),null);a.blueprint[C]=ge,n[C]=ge,jf(a,t,0,C,Bu(a,n,H.hostVars,$r),H)}function Cl(a,t,n){const C=Tr(t,a),H=sf(n),ne=a[10],ge=Ch(a,Sc(a,H,null,n.onPush?64:16,C,t,ne,ne.createRenderer(C,n),null,null));a[t.index]=ge}function Vu(a,t,n,C,H,ne){const ge=ne[t];if(null!==ge){const Me=C.setInput;for(let ze=0;ze<ge.length;){const rt=ge[ze++],Et=ge[ze++],Kt=ge[ze++];null!==Me?C.setInput(n,Kt,rt,Et):n[Et]=Kt}}}function bv(a,t){let n=null,C=0;for(;C<t.length;){const H=t[C];if(0!==H)if(5!==H){if("number"==typeof H)break;a.hasOwnProperty(H)&&(null===n&&(n=[]),n.push(H,a[H],t[C+1])),C+=2}else C+=2;else C+=4}return n}function Lc(a,t,n,C){return new Array(a,!0,!1,t,null,0,C,n,null,null)}function Hf(a,t){const n=_r(t,a);if(ii(n)){const C=n[1];80&n[2]?du(C,n,C.template,n[8]):n[5]>0&&Ic(n)}}function Ic(a){for(let C=Xp(a);null!==C;C=$p(C))for(let H=10;H<C.length;H++){const ne=C[H];if(1024&ne[2]){const ge=ne[1];du(ge,ne,ge.template,ne[8])}else ne[5]>0&&Ic(ne)}const n=a[1].components;if(null!==n)for(let C=0;C<n.length;C++){const H=_r(n[C],a);ii(H)&&H[5]>0&&Ic(H)}}function tm(a,t){const n=_r(t,a),C=n[1];(function nm(a,t){for(let n=t.length;n<a.blueprint.length;n++)t.push(a.blueprint[n])})(C,n),Cc(C,n,n[8])}function Ch(a,t){return a[13]?a[14][4]=t:a[13]=t,a[14]=t,t}function zd(a){for(;a;){a[2]|=64;const t=xh(a);if(Pl(a)&&!t)return a;a=t}return null}function gu(a,t,n){const C=t[10];C.begin&&C.begin();try{du(a,t,a.template,n)}catch(H){throw x0(t,H),H}finally{C.end&&C.end()}}function d0(a){!function Dh(a){for(let t=0;t<a.components.length;t++){const n=a.components[t],C=Vp(n),H=C[1];zf(H,C,H.template,n)}}(a[8])}function Bd(a,t,n){Io(0),t(a,n)}const m0=(()=>Promise.resolve(null))();function y0(a){return a[7]||(a[7]=[])}function v0(a){return a.cleanup||(a.cleanup=[])}function x0(a,t){const n=a[9],C=n?n.get(Sf,null):null;C&&C.handleError(t)}function qf(a,t,n,C,H){for(let ne=0;ne<n.length;){const ge=n[ne++],Me=n[ne++],ze=t[ge],rt=a.data[ge];null!==rt.setInput?rt.setInput(ze,H,C,Me):ze[Me]=H}}function Uu(a,t,n){const C=cr(t,a);!function Kp(a,t,n){qt(a)?a.setValue(t,n):t.textContent=n}(a[11],C,n)}function uf(a,t,n){let C=n?a.styles:null,H=n?a.classes:null,ne=0;if(null!==t)for(let ge=0;ge<t.length;ge++){const Me=t[ge];"number"==typeof Me?ne=Me:1==ne?H=Nt(H,Me):2==ne&&(C=Nt(C,Me+": "+t[++ge]+";"))}n?a.styles=C:a.stylesWithoutHost=C,n?a.classes=H:a.classesWithoutHost=H}const b0=new ea("INJECTOR",-1);class im{get(t,n=wf){if(n===wf){const C=new Error(`NullInjectorError: No provider for ${at(t)}!`);throw C.name="NullInjectorError",C}return n}}const _0=new ea("Set Injector scope."),Lh={},wv={};let w0;function am(){return void 0===w0&&(w0=new im),w0}function mu(a,t=null,n=null,C){const H=Ih(a,t,n,C);return H._resolveInjectorDefTypes(),H}function Ih(a,t=null,n=null,C){return new om(a,n,t||am(),C)}class om{constructor(t,n,C,H=null){this.parent=C,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const ne=[];n&&wl(n,Me=>this.processProvider(Me,t,n)),wl([t],Me=>this.processInjectorType(Me,[],ne)),this.records.set(b0,Vd(void 0,this));const ge=this.records.get(_0);this.scope=null!=ge?ge.value:null,this.source=H||("object"==typeof t?null:at(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=wf,C=yr.Default){this.assertNotDestroyed();const H=yg(this),ne=lr(void 0);try{if(!(C&yr.SkipSelf)){let Me=this.records.get(t);if(void 0===Me){const ze=function kM(a){return"function"==typeof a||"object"==typeof a&&a instanceof ea}(t)&&hn(t);Me=ze&&this.injectableDefInScope(ze)?Vd(cf(t),Lh):null,this.records.set(t,Me)}if(null!=Me)return this.hydrate(t,Me)}return(C&yr.Self?am():this.parent).get(t,n=C&yr.Optional&&n===wf?null:n)}catch(ge){if("NullInjectorError"===ge.name){if((ge[td]=ge[td]||[]).unshift(at(t)),H)throw ge;return function Hy(a,t,n,C){const H=a[td];throw t[Tf]&&H.unshift(t[Tf]),a.message=function ps(a,t,n,C=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let H=at(t);if(Array.isArray(t))H=t.map(at).join(" -> ");else if("object"==typeof t){let ne=[];for(let ge in t)if(t.hasOwnProperty(ge)){let Me=t[ge];ne.push(ge+":"+("string"==typeof Me?JSON.stringify(Me):at(Me)))}H=`{${ne.join(", ")}}`}return`${n}${C?"("+C+")":""}[${H}]: ${a.replace(mg,"\n  ")}`}("\n"+a.message,H,n,C),a.ngTokenPath=H,a[td]=null,a}(ge,t,"R3InjectorError",this.source)}throw ge}finally{lr(ne),yg(H)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((C,H)=>t.push(at(H))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gt(205,!1)}processInjectorType(t,n,C){if(!(t=Ge(t)))return!1;let H=In(t);const ne=null==H&&t.ngModule||void 0,ge=void 0===ne?t:ne,Me=-1!==C.indexOf(ge);if(void 0!==ne&&(H=In(ne)),null==H)return!1;if(null!=H.imports&&!Me){let Et;C.push(ge);try{wl(H.imports,Kt=>{this.processInjectorType(Kt,n,C)&&(void 0===Et&&(Et=[]),Et.push(Kt))})}finally{}if(void 0!==Et)for(let Kt=0;Kt<Et.length;Kt++){const{ngModule:bn,providers:Sn}=Et[Kt];wl(Sn,Xn=>this.processProvider(Xn,bn,Sn||yn))}}this.injectorDefTypes.add(ge);const ze=Xr(ge)||(()=>new ge);this.records.set(ge,Vd(ze,Lh));const rt=H.providers;if(null!=rt&&!Me){const Et=t;wl(rt,Kt=>this.processProvider(Kt,Et,rt))}return void 0!==ne&&void 0!==t.providers}processProvider(t,n,C){let H=Ud(t=Ge(t))?t:Ge(t&&t.provide);const ne=function bM(a,t,n){return Mb(a)?Vd(void 0,a.useValue):Vd(Tb(a),Lh)}(t);if(Ud(t)||!0!==t.multi)this.records.get(H);else{let ge=this.records.get(H);ge||(ge=Vd(void 0,Lh,!0),ge.factory=()=>oh(ge.multi),this.records.set(H,ge)),H=t,ge.multi.push(t)}this.records.set(H,ne)}hydrate(t,n){return n.value===Lh&&(n.value=wv,n.value=n.factory()),"object"==typeof n.value&&n.value&&function AM(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Ge(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function cf(a){const t=hn(a),n=null!==t?t.factory:Xr(a);if(null!==n)return n;if(a instanceof ea)throw new gt(204,!1);if(a instanceof Function)return function sm(a){const t=a.length;if(t>0)throw function Ku(a,t){const n=[];for(let C=0;C<a;C++)n.push(t);return n}(t,"?"),new gt(204,!1);const n=function xn(a){const t=a&&(a[Yn]||a[sr]);if(t){const n=function En(a){if(a.hasOwnProperty("name"))return a.name;const t=(""+a).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(a);return null!==n?()=>n.factory(a):()=>new a}(a);throw new gt(204,!1)}function Tb(a,t,n){let C;if(Ud(a)){const H=Ge(a);return Xr(H)||cf(H)}if(Mb(a))C=()=>Ge(a.useValue);else if(function wM(a){return!(!a||!a.useFactory)}(a))C=()=>a.useFactory(...oh(a.deps||[]));else if(function _M(a){return!(!a||!a.useExisting)}(a))C=()=>ta(Ge(a.useExisting));else{const H=Ge(a&&(a.useClass||a.provide));if(!function MM(a){return!!a.deps}(a))return Xr(H)||cf(H);C=()=>new H(...oh(a.deps))}return C}function Vd(a,t,n=!1){return{factory:a,value:t,multi:n?[]:void 0}}function Mb(a){return null!==a&&"object"==typeof a&&jy in a}function Ud(a){return"function"==typeof a}let Nl=(()=>{class a{static create(n,C){var H;if(Array.isArray(n))return mu({name:""},C,n,"");{const ne=null!==(H=n.name)&&void 0!==H?H:"";return mu({name:ne},n.parent,n.providers,ne)}}}return a.THROW_IF_NOT_FOUND=wf,a.NULL=new im,a.\u0275prov=wn({token:a,providedIn:"any",factory:()=>ta(b0)}),a.__NG_ELEMENT_ID__=-1,a})();function OM(a,t){nl(Vp(a)[1],aa())}function qo(a){let t=function Fb(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),n=!0;const C=[a];for(;t;){let H;if(mo(a))H=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new gt(903,"");H=t.\u0275dir}if(H){if(n){C.push(H);const ge=a;ge.inputs=Av(a.inputs),ge.declaredInputs=Av(a.declaredInputs),ge.outputs=Av(a.outputs);const Me=H.hostBindings;Me&&zM(a,Me);const ze=H.viewQuery,rt=H.contentQueries;if(ze&&FM(a,ze),rt&&NM(a,rt),dt(a.inputs,H.inputs),dt(a.declaredInputs,H.declaredInputs),dt(a.outputs,H.outputs),mo(H)&&H.data.animation){const Et=a.data;Et.animation=(Et.animation||[]).concat(H.data.animation)}}const ne=H.features;if(ne)for(let ge=0;ge<ne.length;ge++){const Me=ne[ge];Me&&Me.ngInherit&&Me(a),Me===qo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function RM(a){let t=0,n=null;for(let C=a.length-1;C>=0;C--){const H=a[C];H.hostVars=t+=H.hostVars,H.hostAttrs=Ze(H.hostAttrs,n=Ze(n,H.hostAttrs))}}(C)}function Av(a){return a===Zt?{}:a===yn?[]:a}function FM(a,t){const n=a.viewQuery;a.viewQuery=n?(C,H)=>{t(C,H),n(C,H)}:t}function NM(a,t){const n=a.contentQueries;a.contentQueries=n?(C,H,ne)=>{t(C,H,ne),n(C,H,ne)}:t}function zM(a,t){const n=a.hostBindings;a.hostBindings=n?(C,H)=>{t(C,H),n(C,H)}:t}let lm=null;function Hd(){if(!lm){const a=di.Symbol;if(a&&a.iterator)lm=a.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const C=t[n];"entries"!==C&&"size"!==C&&Map.prototype[C]===Map.prototype.entries&&(lm=C)}}}return lm}function T0(a){return!!function kv(a){return null!==a&&("function"==typeof a||"object"==typeof a)}(a)&&(Array.isArray(a)||!(a instanceof Map)&&Hd()in a)}function Dl(a,t,n){return!Object.is(a[t],n)&&(a[t]=n,!0)}function cm(a,t,n,C,H,ne,ge,Me){const ze=pr(),rt=Di(),Et=a+20,Kt=rt.firstCreatePass?function GM(a,t,n,C,H,ne,ge,Me,ze){const rt=t.consts,Et=zu(t,a,4,ge||null,Ti(rt,Me));Bf(t,n,Et,Ti(rt,ze)),nl(t,Et);const Kt=Et.tViews=kh(2,Et,C,H,ne,t.directiveRegistry,t.pipeRegistry,null,t.schemas,rt);return null!==t.queries&&(t.queries.template(t,Et),Kt.queries=t.queries.embeddedTView(Et)),Et}(Et,rt,ze,t,n,C,H,ne,ge):rt.data[Et];ao(Kt,!1);const bn=ze[11].createComment("");Ed(rt,ze,bn,Kt),Ks(bn,ze),Ch(ze,ze[Et]=Lc(bn,ze,bn,Kt)),Ys(Kt)&&Dc(rt,ze,Kt),null!=ge&&of(ze,Kt,Me)}function A0(a){return function jr(a,t){return a[t]}(function $i(){return wr.lFrame.contextLView}(),20+a)}function Jr(a,t=yr.Default){const n=pr();return null===n?ta(a,t):Oi(aa(),n,Ge(a),t)}function Lv(){throw new Error("invalid")}function ff(a,t,n){const C=pr();return Dl(C,za(),t)&&to(Di(),uo(),C,a,t,C[11],n,!1),ff}function Iv(a,t,n,C,H){const ge=H?"class":"style";qf(a,n,t.inputs[ge],ge,C)}function na(a,t,n,C){const H=pr(),ne=Di(),ge=20+a,Me=H[11],ze=H[ge]=If(Me,t,function Yl(){return wr.lFrame.currentNamespace}()),rt=ne.firstCreatePass?function hA(a,t,n,C,H,ne,ge){const Me=t.consts,rt=zu(t,a,2,H,Ti(Me,ne));return Bf(t,n,rt,Ti(Me,ge)),null!==rt.attrs&&uf(rt,rt.attrs,!1),null!==rt.mergedAttrs&&uf(rt,rt.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,rt),rt}(ge,ne,H,0,t,n,C):ne.data[ge];ao(rt,!0);const Et=rt.mergedAttrs;null!==Et&&we(Me,ze,Et);const Kt=rt.classes;null!==Kt&&it(Me,ze,Kt);const bn=rt.styles;return null!==bn&&We(Me,ze,bn),64!=(64&rt.flags)&&Ed(ne,H,ze,rt),0===function Ei(){return wr.lFrame.elementDepthCount}()&&Ks(ze,H),function Ji(){wr.lFrame.elementDepthCount++}(),Ys(rt)&&(Dc(ne,H,rt),function Ah(a,t,n){if(js(t)){const H=t.directiveEnd;for(let ne=t.directiveStart;ne<H;ne++){const ge=a.data[ne];ge.contentQueries&&ge.contentQueries(1,n[ne],ne)}}}(ne,rt,H)),null!==C&&of(H,rt),na}function fa(){let a=aa();Xs()?function Cs(){wr.lFrame.isParent=!1}():(a=a.parent,ao(a,!1));const t=a;!function ya(){wr.lFrame.elementDepthCount--}();const n=Di();return n.firstCreatePass&&(nl(n,a),js(a)&&n.queries.elementEnd(a)),null!=t.classesWithoutHost&&function U(a){return 0!=(16&a.flags)}(t)&&Iv(n,t,pr(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function X(a){return 0!=(32&a.flags)}(t)&&Iv(n,t,pr(),t.stylesWithoutHost,!1),fa}function ml(a,t,n,C){return na(a,t,n,C),fa(),ml}function hm(){return pr()}function k0(a){return!!a&&"function"==typeof a.then}const Rv=function r_(a){return!!a&&"function"==typeof a.subscribe};function ms(a,t,n,C){const H=pr(),ne=Di(),ge=aa();return function a_(a,t,n,C,H,ne,ge,Me){const ze=Ys(C),Et=a.firstCreatePass&&v0(a),Kt=t[8],bn=y0(t);let Sn=!0;if(3&C.type||Me){const Kr=Tr(C,t),xi=Me?Me(Kr):Kr,Nr=bn.length,Fi=Me?ia=>Me(dn(ia[C.index])):C.index;if(qt(n)){let ia=null;if(!Me&&ze&&(ia=function pA(a,t,n,C){const H=a.cleanup;if(null!=H)for(let ne=0;ne<H.length-1;ne+=2){const ge=H[ne];if(ge===n&&H[ne+1]===C){const Me=t[7],ze=H[ne+2];return Me.length>ze?Me[ze]:null}"string"==typeof ge&&(ne+=2)}return null}(a,t,H,C.index)),null!==ia)(ia.__ngLastListenerFn__||ia).__ngNextListenerFn__=ne,ia.__ngLastListenerFn__=ne,Sn=!1;else{ne=Fv(C,t,Kt,ne,!1);const Xa=n.listen(xi,H,ne);bn.push(ne,Xa),Et&&Et.push(H,Fi,Nr,Nr+1)}}else ne=Fv(C,t,Kt,ne,!0),xi.addEventListener(H,ne,ge),bn.push(ne),Et&&Et.push(H,Fi,Nr,ge)}else ne=Fv(C,t,Kt,ne,!1);const Xn=C.outputs;let Lr;if(Sn&&null!==Xn&&(Lr=Xn[H])){const Kr=Lr.length;if(Kr)for(let xi=0;xi<Kr;xi+=2){const ws=t[Lr[xi]][Lr[xi+1]].subscribe(ne),ks=bn.length;bn.push(ne,ws),Et&&Et.push(H,C.index,ks,-(ks+1))}}}(ne,H,H[11],ge,a,t,!!n,C),ms}function o_(a,t,n,C){try{return!1!==n(C)}catch(H){return x0(a,H),!1}}function Fv(a,t,n,C,H){return function ne(ge){if(ge===Function)return C;const Me=2&a.flags?_r(a.index,t):t;0==(32&t[2])&&zd(Me);let ze=o_(t,0,C,ge),rt=ne.__ngNextListenerFn__;for(;rt;)ze=o_(t,0,rt,ge)&&ze,rt=rt.__ngNextListenerFn__;return H&&!1===ze&&(ge.preventDefault(),ge.returnValue=!1),ze}}function v_(a,t,n,C,H){const ne=a[n+1],ge=null===t;let Me=C?va(ne):ba(ne),ze=!1;for(;0!==Me&&(!1===ze||ge);){const Et=a[Me+1];xA(a[Me],t)&&(ze=!0,a[Me+1]=C?xo(Et):Xi(Et)),Me=C?va(Et):ba(Et)}ze&&(a[n+1]=C?Xi(ne):xo(ne))}function xA(a,t){return null===a||null==t||(Array.isArray(a)?a[1]:a)===t||!(!Array.isArray(a)||"string"!=typeof t)&&Wc(a,t)>=0}function E0(a,t){return function oc(a,t,n,C){const H=pr(),ne=Di(),ge=function Mo(a){const t=wr.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+a,n}(2);ne.firstUpdatePass&&function E_(a,t,n,C){const H=a.data;if(null===H[n+1]){const ne=H[ca()],ge=function k_(a,t){return t>=a.expandoStartIndex}(a,n);(function L_(a,t){return 0!=(a.flags&(t?16:32))})(ne,C)&&null===t&&!ge&&(t=!1),t=function SA(a,t,n,C){const H=Lo(a);let ne=C?t.residualClasses:t.residualStyles;if(null===H)0===(C?t.classBindings:t.styleBindings)&&(n=S0(n=zv(null,a,t,n,C),t.attrs,C),ne=null);else{const ge=t.directiveStylingLast;if(-1===ge||a[ge]!==H)if(n=zv(H,a,t,n,C),null===ne){let ze=function CA(a,t,n){const C=n?t.classBindings:t.styleBindings;if(0!==ba(C))return a[va(C)]}(a,t,C);void 0!==ze&&Array.isArray(ze)&&(ze=zv(null,a,t,ze[1],C),ze=S0(ze,t.attrs,C),function DA(a,t,n,C){a[va(n?t.classBindings:t.styleBindings)]=C}(a,t,C,ze))}else ne=function LA(a,t,n){let C;const H=t.directiveEnd;for(let ne=1+t.directiveStylingLast;ne<H;ne++)C=S0(C,a[ne].hostAttrs,n);return S0(C,t.attrs,n)}(a,t,C)}return void 0!==ne&&(C?t.residualClasses=ne:t.residualStyles=ne),n}(H,ne,t,C),function yA(a,t,n,C,H,ne){let ge=ne?t.classBindings:t.styleBindings,Me=va(ge),ze=ba(ge);a[C]=n;let Et,rt=!1;if(Array.isArray(n)){const Kt=n;Et=Kt[1],(null===Et||Wc(Kt,Et)>0)&&(rt=!0)}else Et=n;if(H)if(0!==ze){const bn=va(a[Me+1]);a[C+1]=Ci(bn,Me),0!==bn&&(a[bn+1]=ho(a[bn+1],C)),a[Me+1]=function Ya(a,t){return 131071&a|t<<17}(a[Me+1],C)}else a[C+1]=Ci(Me,0),0!==Me&&(a[Me+1]=ho(a[Me+1],C)),Me=C;else a[C+1]=Ci(ze,0),0===Me?Me=C:a[ze+1]=ho(a[ze+1],C),ze=C;rt&&(a[C+1]=Xi(a[C+1])),v_(a,Et,C,!0),v_(a,Et,C,!1),function vA(a,t,n,C,H){const ne=H?a.residualClasses:a.residualStyles;null!=ne&&"string"==typeof t&&Wc(ne,t)>=0&&(n[C+1]=xo(n[C+1]))}(t,Et,a,C,ne),ge=Ci(Me,ze),ne?t.classBindings=ge:t.styleBindings=ge}(H,ne,t,n,ge,C)}}(ne,a,ge,C),t!==$r&&Dl(H,ge,t)&&function C_(a,t,n,C,H,ne,ge,Me){if(!(3&t.type))return;const ze=a.data,rt=ze[Me+1];dm(function po(a){return 1==(1&a)}(rt)?D_(ze,t,n,H,ba(rt),ge):void 0)||(dm(ne)||function Ra(a){return 2==(2&a)}(rt)&&(ne=D_(ze,null,n,H,Me,ge)),function Oe(a,t,n,C,H){const ne=qt(a);if(t)H?ne?a.addClass(n,C):n.classList.add(C):ne?a.removeClass(n,C):n.classList.remove(C);else{let ge=-1===C.indexOf("-")?void 0:al.DashCase;if(null==H)ne?a.removeStyle(n,C,ge):n.style.removeProperty(C);else{const Me="string"==typeof H&&H.endsWith("!important");Me&&(H=H.slice(0,-10),ge|=al.Important),ne?a.setStyle(n,C,H,ge):n.style.setProperty(C,H,Me?"important":"")}}}(C,ge,cr(ca(),n),H,ne))}(ne,ne.data[ca()],H,H[11],a,H[ge+1]=function OA(a,t){return null==a||("string"==typeof t?a+=t:"object"==typeof a&&(a=at(function bc(a){return a instanceof class sd{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?a.changingThisBreaksApplicationSecurity:a}(a)))),a}(t,n),C,ge)}(a,t,null,!0),E0}function zv(a,t,n,C,H){let ne=null;const ge=n.directiveEnd;let Me=n.directiveStylingLast;for(-1===Me?Me=n.directiveStart:Me++;Me<ge&&(ne=t[Me],C=S0(C,ne.hostAttrs,H),ne!==a);)Me++;return null!==a&&(n.directiveStylingLast=Me),C}function S0(a,t,n){const C=n?1:2;let H=-1;if(null!==t)for(let ne=0;ne<t.length;ne++){const ge=t[ne];"number"==typeof ge?H=ge:H===C&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Rl(a,ge,!!n||t[++ne]))}return void 0===a?null:a}function D_(a,t,n,C,H,ne){const ge=null===t;let Me;for(;H>0;){const ze=a[H],rt=Array.isArray(ze),Et=rt?ze[1]:ze,Kt=null===Et;let bn=n[H+1];bn===$r&&(bn=Kt?yn:void 0);let Sn=Kt?Ap(bn,C):Et===C?bn:void 0;if(rt&&!dm(Sn)&&(Sn=Ap(ze,C)),dm(Sn)&&(Me=Sn,ge))return Me;const Xn=a[H+1];H=ge?va(Xn):ba(Xn)}if(null!==t){let ze=ne?t.residualClasses:t.residualStyles;null!=ze&&(Me=Ap(ze,C))}return Me}function dm(a){return void 0!==a}function Ua(a,t=""){const n=pr(),C=Di(),H=a+20,ne=C.firstCreatePass?zu(C,H,1,t,null):C.data[H],ge=n[H]=function _d(a,t){return qt(a)?a.createText(t):a.createTextNode(t)}(n[11],t);Ed(C,n,ge,ne),ao(ne,!1)}function zl(a){return Bv("",a,""),zl}function Bv(a,t,n){const C=pr(),H=function Gd(a,t,n,C){return Dl(a,za(),n)?t+Ve(n)+C:$r}(C,a,t,n);return H!==$r&&Uu(C,ca(),H),Bv}function pm(a,t,n){const C=pr();if(Dl(C,za(),t)){const ne=Di(),ge=uo();to(ne,ge,C,a,t,function jd(a,t,n){return(null===a||mo(a))&&(n=function Un(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(n[t.index])),n[11]}(Lo(ne.data),ge,C),n,!0)}return pm}const gm="en-US";let J_=gm;function Uv(a,t,n,C,H){if(a=Ge(a),Array.isArray(a))for(let ne=0;ne<a.length;ne++)Uv(a[ne],t,n,C,H);else{const ne=Di(),ge=pr();let Me=Ud(a)?a:Ge(a.provide),ze=Tb(a);const rt=aa(),Et=1048575&rt.providerIndexes,Kt=rt.directiveStart,bn=rt.providerIndexes>>20;if(Ud(a)||!a.multi){const Sn=new au(ze,H,Jr),Xn=qv(Me,t,H?Et:Et+bn,Kt);-1===Xn?(Dr(jn(rt,ge),ne,Me),Hv(ne,a,t.length),t.push(Me),rt.directiveStart++,rt.directiveEnd++,H&&(rt.providerIndexes+=1048576),n.push(Sn),ge.push(Sn)):(n[Xn]=Sn,ge[Xn]=Sn)}else{const Sn=qv(Me,t,Et+bn,Kt),Xn=qv(Me,t,Et,Et+bn),Lr=Sn>=0&&n[Sn],Kr=Xn>=0&&n[Xn];if(H&&!Kr||!H&&!Lr){Dr(jn(rt,ge),ne,Me);const xi=function Qk(a,t,n,C,H){const ne=new au(a,n,Jr);return ne.multi=[],ne.index=t,ne.componentProviders=0,w2(ne,H,C&&!n),ne}(H?Jk:Kk,n.length,H,C,ze);!H&&Kr&&(n[Xn].providerFactory=xi),Hv(ne,a,t.length,0),t.push(Me),rt.directiveStart++,rt.directiveEnd++,H&&(rt.providerIndexes+=1048576),n.push(xi),ge.push(xi)}else Hv(ne,a,Sn>-1?Sn:Xn,w2(n[H?Xn:Sn],ze,!H&&C));!H&&C&&Kr&&n[Xn].componentProviders++}}}function Hv(a,t,n,C){const H=Ud(t),ne=function TM(a){return!!a.useClass}(t);if(H||ne){const ze=(ne?Ge(t.useClass):t).prototype.ngOnDestroy;if(ze){const rt=a.destroyHooks||(a.destroyHooks=[]);if(!H&&t.multi){const Et=rt.indexOf(n);-1===Et?rt.push(n,[C,ze]):rt[Et+1].push(C,ze)}else rt.push(n,ze)}}}function w2(a,t,n){return n&&a.componentProviders++,a.multi.push(t)-1}function qv(a,t,n,C){for(let H=n;H<C;H++)if(t[H]===a)return H;return-1}function Kk(a,t,n,C){return Gv(this.multi,[])}function Jk(a,t,n,C){const H=this.multi;let ne;if(this.providerFactory){const ge=this.providerFactory.componentProviders,Me=Ai(n,n[1],this.providerFactory.index,C);ne=Me.slice(0,ge),Gv(H,ne);for(let ze=ge;ze<Me.length;ze++)ne.push(Me[ze])}else ne=[],Gv(H,ne);return ne}function Gv(a,t){for(let n=0;n<a.length;n++)t.push((0,a[n])());return t}function us(a,t=[]){return n=>{n.providersResolver=(C,H)=>function $k(a,t,n){const C=Di();if(C.firstCreatePass){const H=mo(a);Uv(n,C.data,C.blueprint,H,!0),Uv(t,C.data,C.blueprint,H,!1)}}(C,H?H(a):a,t)}}class T2{}class n4{resolveComponentFactory(t){throw function t4(a){const t=Error(`No component factory found for ${at(a)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=a,t}(t)}}let P0=(()=>{class a{}return a.NULL=new n4,a})();function r4(){return rp(aa(),pr())}function rp(a,t){return new yu(Tr(a,t))}let yu=(()=>{class a{constructor(n){this.nativeElement=n}}return a.__NG_ELEMENT_ID__=r4,a})();function i4(a){return a instanceof yu?a.nativeElement:a}class O0{}let hf=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function o4(){const a=pr(),n=_r(aa().index,a);return function a4(a){return a[11]}(Ro(n)?n:a)}(),a})(),s4=(()=>{class a{}return a.\u0275prov=wn({token:a,providedIn:"root",factory:()=>null}),a})();class R0{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const l4=new R0("13.3.1"),Wv={};function bm(a,t,n,C,H=!1){for(;null!==n;){const ne=t[n.index];if(null!==ne&&C.push(dn(ne)),Ho(ne))for(let Me=10;Me<ne.length;Me++){const ze=ne[Me],rt=ze[1].firstChild;null!==rt&&bm(ze[1],ze,rt,C)}const ge=n.type;if(8&ge)bm(a,t,n.child,C);else if(32&ge){const Me=Yp(n,t);let ze;for(;ze=Me();)C.push(ze)}else if(16&ge){const Me=nc(t,n);if(Array.isArray(Me))C.push(...Me);else{const ze=xh(t[16]);bm(ze[1],ze,Me,C,!0)}}n=H?n.projectionNext:n.next}return C}class F0{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return bm(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ho(t)){const n=t[8],C=n?n.indexOf(this):-1;C>-1&&(wd(t,C),Us(n,C))}this._attachedToViewContainer=!1}e0(this._lView[1],this._lView)}onDestroy(t){Pd(this._lView[1],this._lView,null,t)}markForCheck(){zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function p0(a,t,n){ns(!0);try{gu(a,t,n)}finally{ns(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new gt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pf(a,t){K(a,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new gt(902,"");this._appRef=t}}class u4 extends F0{constructor(t){super(t),this._view=t}detectChanges(){d0(this._view)}checkNoChanges(){!function g0(a){ns(!0);try{d0(a)}finally{ns(!1)}}(this._view)}get context(){return null}}class A2 extends P0{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Zr(t);return new Yv(n,this.ngModule)}}function k2(a){const t=[];for(let n in a)a.hasOwnProperty(n)&&t.push({propName:a[n],templateName:n});return t}class Yv extends T2{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function yi(a){return a.map(oi).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return k2(this.componentDef.inputs)}get outputs(){return k2(this.componentDef.outputs)}create(t,n,C,H){const ne=(H=H||this.ngModule)?function f4(a,t){return{get:(n,C,H)=>{const ne=a.get(n,Wv,H);return ne!==Wv||C===Wv?ne:t.get(n,C,H)}}}(t,H.injector):t,ge=ne.get(O0,_n),Me=ne.get(s4,null),ze=ge.createRenderer(null,this.componentDef),rt=this.componentDef.selectors[0][0]||"div",Et=C?function Xg(a,t,n){if(qt(a))return a.selectRootElement(t,n===Kn.ShadowDom);let C="string"==typeof t?a.querySelector(t):t;return C.textContent="",C}(ze,C,this.componentDef.encapsulation):If(ge.createRenderer(null,this.componentDef),rt,function c4(a){const t=a.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(rt)),Kt=this.componentDef.onPush?576:528,bn=function Rb(a,t){return{components:[],scheduler:a||Gp,clean:m0,playerHandler:t||null,flags:0}}(),Sn=kh(0,null,null,1,0,null,null,null,null,null),Xn=Sc(null,Sn,bn,Kt,null,null,ge,ze,Me,ne);let Lr,Kr;Gi(Xn);try{const xi=function Pb(a,t,n,C,H,ne){const ge=n[1];n[20]=a;const ze=zu(ge,20,2,"#host",null),rt=ze.mergedAttrs=t.hostAttrs;null!==rt&&(uf(ze,rt,!0),null!==a&&(we(H,a,rt),null!==ze.classes&&it(H,a,ze.classes),null!==ze.styles&&We(H,a,ze.styles)));const Et=C.createRenderer(a,t),Kt=Sc(n,sf(t),null,t.onPush?64:16,n[20],ze,C,Et,ne||null,null);return ge.firstCreatePass&&(Dr(jn(ze,n),ge,t.type),u0(ge,ze),c0(ze,n.length,1)),Ch(n,Kt),n[20]=Kt}(Et,this.componentDef,Xn,ge,ze);if(Et)if(C)we(ze,Et,["ng-version",l4.full]);else{const{attrs:Nr,classes:Fi}=function Li(a){const t=[],n=[];let C=1,H=2;for(;C<a.length;){let ne=a[C];if("string"==typeof ne)2===H?""!==ne&&t.push(ne,a[++C]):8===H&&n.push(ne);else{if(!Bn(H))break;H=ne}C++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);Nr&&we(ze,Et,Nr),Fi&&Fi.length>0&&it(ze,Et,Fi.join(" "))}if(Kr=Rr(Sn,20),void 0!==n){const Nr=Kr.projection=[];for(let Fi=0;Fi<this.ngContentSelectors.length;Fi++){const ia=n[Fi];Nr.push(null!=ia?Array.from(ia):null)}}Lr=function Ob(a,t,n,C,H){const ne=n[1],ge=function ju(a,t,n){const C=aa();a.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),f0(a,C,t,Bu(a,t,1,null),n));const H=Ai(t,a,C.directiveStart,C);Ks(H,t);const ne=Tr(C,t);return ne&&Ks(ne,t),H}(ne,n,t);if(C.components.push(ge),a[8]=ge,H&&H.forEach(ze=>ze(ge,t)),t.contentQueries){const ze=aa();t.contentQueries(1,ge,ze.directiveStart)}const Me=aa();return!ne.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Pa(Me.index),jf(n[1],Me,0,Me.directiveStart,Me.directiveEnd,t),l0(t,ge)),ge}(xi,this.componentDef,Xn,bn,[OM]),Cc(Sn,Xn,null)}finally{Is()}return new d4(this.componentType,Lr,rp(Kr,Xn),Xn,Kr)}}class d4 extends class e4{}{constructor(t,n,C,H,ne){super(),this.location=C,this._rootLView=H,this._tNode=ne,this.instance=n,this.hostView=this.changeDetectorRef=new u4(H),this.componentType=t}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class df{}class E2{}const ip=new Map;class D2 extends df{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new A2(this);const C=Vi(t);this._bootstrapComponents=Lu(C.bootstrap),this._r3Injector=Ih(t,n,[{provide:df,useValue:this},{provide:P0,useValue:this.componentFactoryResolver}],at(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Nl.THROW_IF_NOT_FOUND,C=yr.Default){return t===Nl||t===df||t===b0?this:this._r3Injector.get(t,n,C)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zv extends E2{constructor(t){super(),this.moduleType=t,null!==Vi(t)&&function g4(a){const t=new Set;!function n(C){const H=Vi(C,!0),ne=H.id;null!==ne&&(function S2(a,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${a} - ${at(t)} vs ${at(t.name)}`)}(ne,ip.get(ne),C),ip.set(ne,C));const ge=Lu(H.imports);for(const Me of ge)t.has(Me)||(t.add(Me),n(Me))}(a)}(t)}create(t){return new D2(this.moduleType,t)}}function Xv(a){return t=>{setTimeout(a,void 0,t)}}const sa=class P4 extends F{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,C){var H,ne,ge;let Me=t,ze=n||(()=>null),rt=C;if(t&&"object"==typeof t){const Kt=t;Me=null===(H=Kt.next)||void 0===H?void 0:H.bind(Kt),ze=null===(ne=Kt.error)||void 0===ne?void 0:ne.bind(Kt),rt=null===(ge=Kt.complete)||void 0===ge?void 0:ge.bind(Kt)}this.__isAsync&&(ze=Xv(ze),Me&&(Me=Xv(Me)),rt&&(rt=Xv(rt)));const Et=super.subscribe({next:Me,error:ze,complete:rt});return t instanceof r&&t.add(Et),Et}};function O4(){return this._results[Hd()]()}class $v{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Hd(),C=$v.prototype;C[n]||(C[n]=O4)}get changes(){return this._changes||(this._changes=new sa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const C=this;C.dirty=!1;const H=Eo(t);(this._changesDetected=!function Vs(a,t,n){if(a.length!==t.length)return!1;for(let C=0;C<a.length;C++){let H=a[C],ne=t[C];if(n&&(H=n(H),ne=n(ne)),ne!==H)return!1}return!0}(C._results,H,n))&&(C._results=H,C.length=H.length,C.last=H[this.length-1],C.first=H[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let pf=(()=>{class a{}return a.__NG_ELEMENT_ID__=N4,a})();const R4=pf,F4=class extends R4{constructor(t,n,C){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=C}createEmbeddedView(t){const n=this._declarationTContainer.tViews,C=Sc(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);C[17]=this._declarationLView[this._declarationTContainer.index];const ne=this._declarationLView[19];return null!==ne&&(C[19]=ne.createEmbeddedView(n)),Cc(n,C,t),new F0(C)}};function N4(){return _m(aa(),pr())}function _m(a,t){return 4&a.type?new F4(t,a,rp(a,t)):null}let lc=(()=>{class a{}return a.__NG_ELEMENT_ID__=z4,a})();function z4(){return z2(aa(),pr())}const B4=lc,F2=class extends B4{constructor(t,n,C){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=C}get element(){return rp(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){const t=gr(this._hostTNode,this._hostLView);if(ht(t)){const n=Lt(t,this._hostLView),C=St(t);return new qi(n[1].data[C+8],n)}return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=N2(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,C){const H=t.createEmbeddedView(n||{});return this.insert(H,C),H}createComponent(t,n,C,H,ne){const ge=t&&!function su(a){return"function"==typeof a}(t);let Me;if(ge)Me=n;else{const Kt=n||{};Me=Kt.index,C=Kt.injector,H=Kt.projectableNodes,ne=Kt.ngModuleRef}const ze=ge?t:new Yv(Zr(t)),rt=C||this.parentInjector;if(!ne&&null==ze.ngModule){const bn=(ge?rt:this.parentInjector).get(df,null);bn&&(ne=bn)}const Et=ze.create(rt,H,void 0,ne);return this.insert(Et.hostView,Me),Et}insert(t,n){const C=t._lView,H=C[1];if(function pi(a){return Ho(a[3])}(C)){const Et=this.indexOf(t);if(-1!==Et)this.detach(Et);else{const Kt=C[3],bn=new F2(Kt,Kt[6],Kt[3]);bn.detach(bn.indexOf(t))}}const ne=this._adjustIndex(n),ge=this._lContainer;!function gs(a,t,n,C){const H=10+C,ne=n.length;C>0&&(n[H-1][4]=t),C<ne-10?(t[4]=n[H],Jh(n,10+C,t)):(n.push(t),t[4]=null),t[3]=n;const ge=t[17];null!==ge&&n!==ge&&function Oo(a,t){const n=a[9];t[16]!==t[3][3][16]&&(a[2]=!0),null===n?a[9]=[t]:n.push(t)}(ge,t);const Me=t[19];null!==Me&&Me.insertView(a),t[2]|=128}(H,C,ge,ne);const Me=Sd(ne,ge),ze=C[11],rt=ef(ze,ge[7]);return null!==rt&&function Jp(a,t,n,C,H,ne){C[0]=H,C[6]=t,K(a,C,n,1,H,ne)}(H,ge[6],ze,C,rt,Me),t.attachToViewContainerRef(),Jh(Kv(ge),ne,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=N2(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),C=wd(this._lContainer,n);C&&(Us(Kv(this._lContainer),n),e0(C[1],C))}detach(t){const n=this._adjustIndex(t,-1),C=wd(this._lContainer,n);return C&&null!=Us(Kv(this._lContainer),n)?new F0(C):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function N2(a){return a[8]}function Kv(a){return a[8]||(a[8]=[])}function z2(a,t){let n;const C=t[a.index];if(Ho(C))n=C;else{let H;if(8&a.type)H=dn(C);else{const ne=t[11];H=ne.createComment("");const ge=Tr(a,t);Ac(ne,ef(ne,ge),H,function Md(a,t){return qt(a)?a.nextSibling(t):t.nextSibling}(ne,ge),!1)}t[a.index]=n=Lc(C,t,H,a),Ch(t,n)}return new F2(n,a,t)}class Jv{constructor(t){this.queryList=t,this.matches=null}clone(){return new Jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qv{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const C=null!==t.contentQueries?t.contentQueries[0]:n.length,H=[];for(let ne=0;ne<C;ne++){const ge=n.getByIndex(ne);H.push(this.queries[ge.indexInDeclarationView].clone())}return new Qv(H)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==H2(t,n).matches&&this.queries[n].setDirty()}}class B2{constructor(t,n,C=null){this.predicate=t,this.flags=n,this.read=C}}class e1{constructor(t=[]){this.queries=t}elementStart(t,n){for(let C=0;C<this.queries.length;C++)this.queries[C].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let C=0;C<this.length;C++){const H=null!==n?n.length:0,ne=this.getByIndex(C).embeddedTView(t,H);ne&&(ne.indexInDeclarationView=C,null!==n?n.push(ne):n=[ne])}return null!==n?new e1(n):null}template(t,n){for(let C=0;C<this.queries.length;C++)this.queries[C].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class t1{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new t1(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let C=t.parent;for(;null!==C&&8&C.type&&C.index!==n;)C=C.parent;return n===(null!==C?C.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const C=this.metadata.predicate;if(Array.isArray(C))for(let H=0;H<C.length;H++){const ne=C[H];this.matchTNodeWithReadOption(t,n,U4(n,ne)),this.matchTNodeWithReadOption(t,n,gi(n,t,ne,!1,!1))}else C===pf?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,gi(n,t,C,!1,!1))}matchTNodeWithReadOption(t,n,C){if(null!==C){const H=this.metadata.read;if(null!==H)if(H===yu||H===lc||H===pf&&4&n.type)this.addMatch(n.index,-2);else{const ne=gi(n,t,H,!1,!1);null!==ne&&this.addMatch(n.index,ne)}else this.addMatch(n.index,C)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function U4(a,t){const n=a.localNames;if(null!==n)for(let C=0;C<n.length;C+=2)if(n[C]===t)return n[C+1];return null}function q4(a,t,n,C){return-1===n?function H4(a,t){return 11&a.type?rp(a,t):4&a.type?_m(a,t):null}(t,a):-2===n?function G4(a,t,n){return n===yu?rp(t,a):n===pf?_m(t,a):n===lc?z2(t,a):void 0}(a,t,C):Ai(a,a[1],n,t)}function j2(a,t,n,C){const H=t[19].queries[C];if(null===H.matches){const ne=a.data,ge=n.matches,Me=[];for(let ze=0;ze<ge.length;ze+=2){const rt=ge[ze];Me.push(rt<0?null:q4(t,ne[rt],ge[ze+1],n.metadata.read))}H.matches=Me}return H.matches}function n1(a,t,n,C){const H=a.queries.getByIndex(n),ne=H.matches;if(null!==ne){const ge=j2(a,t,H,n);for(let Me=0;Me<ne.length;Me+=2){const ze=ne[Me];if(ze>0)C.push(ge[Me/2]);else{const rt=ne[Me+1],Et=t[-ze];for(let Kt=10;Kt<Et.length;Kt++){const bn=Et[Kt];bn[17]===bn[3]&&n1(bn[1],bn,rt,C)}if(null!==Et[9]){const Kt=Et[9];for(let bn=0;bn<Kt.length;bn++){const Sn=Kt[bn];n1(Sn[1],Sn,rt,C)}}}}}return C}function jl(a){const t=pr(),n=Di(),C=Kl();Io(C+1);const H=H2(n,C);if(a.dirty&&Hr(t)===(2==(2&H.metadata.flags))){if(null===H.matches)a.reset([]);else{const ne=H.crossesNgTemplate?n1(n,t,C,[]):j2(n,t,H,C);a.reset(ne,i4),a.notifyOnChanges()}return!0}return!1}function vu(a,t,n){const C=Di();C.firstCreatePass&&(function U2(a,t,n){null===a.queries&&(a.queries=new e1),a.queries.track(new t1(t,n))}(C,new B2(a,t,n),-1),2==(2&t)&&(C.staticViewQueries=!0)),function V2(a,t,n){const C=new $v(4==(4&n));Pd(a,t,C,C.destroy),null===t[19]&&(t[19]=new Qv),t[19].queries.push(new Jv(C))}(C,pr(),t)}function Vl(){return function W4(a,t){return a[19].queries[t].queryList}(pr(),Kl())}function H2(a,t){return a.queries.getByIndex(t)}function Mm(...a){}const u1=new ea("Application Initializer");let c1=(()=>{class a{constructor(n){this.appInits=n,this.resolve=Mm,this.reject=Mm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((C,H)=>{this.resolve=C,this.reject=H})}runInitializers(){if(this.initialized)return;const n=[],C=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let H=0;H<this.appInits.length;H++){const ne=this.appInits[H]();if(k0(ne))n.push(ne);else if(Rv(ne)){const ge=new Promise((Me,ze)=>{ne.subscribe({complete:Me,error:ze})});n.push(ge)}}Promise.all(n).then(()=>{C()}).catch(H=>{this.reject(H)}),0===n.length&&C(),this.initialized=!0}}return a.\u0275fac=function(n){return new(n||a)(ta(u1,8))},a.\u0275prov=wn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const j0=new ea("AppId",{providedIn:"root",factory:function ow(){return`${f1()}${f1()}${f1()}`}});function f1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sw=new ea("Platform Initializer"),h1=new ea("Platform ID"),lw=new ea("appBootstrapListener");let uw=(()=>{class a{log(n){console.log(n)}warn(n){console.warn(n)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();const Gf=new ea("LocaleId",{providedIn:"root",factory:()=>Uy(Gf,yr.Optional|yr.SkipSelf)||function fE(){return"undefined"!=typeof $localize&&$localize.locale||gm}()});class dE{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let cw=(()=>{class a{compileModuleSync(n){return new Zv(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const C=this.compileModuleSync(n),ne=Lu(Vi(n).declarations).reduce((ge,Me)=>{const ze=Zr(Me);return ze&&ge.push(new Yv(ze)),ge},[]);return new dE(C,ne)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const gE=(()=>Promise.resolve(0))();function d1(a){"undefined"==typeof Zone?gE.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class ll{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:C=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sa(!1),this.onMicrotaskEmpty=new sa(!1),this.onStable=new sa(!1),this.onError=new sa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const H=this;H._nesting=0,H._outer=H._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(H._inner=H._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(H._inner=H._inner.fork(Zone.longStackTraceZoneSpec)),H.shouldCoalesceEventChangeDetection=!C&&n,H.shouldCoalesceRunChangeDetection=C,H.lastRequestAnimationFrameId=-1,H.nativeRequestAnimationFrame=function mE(){let a=di.requestAnimationFrame,t=di.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&t){const n=a[Zone.__symbol__("OriginalDelegate")];n&&(a=n);const C=t[Zone.__symbol__("OriginalDelegate")];C&&(t=C)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function xE(a){const t=()=>{!function vE(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(di,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,g1(a),a.isCheckStableRunning=!0,p1(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),g1(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,C,H,ne,ge,Me)=>{try{return fw(a),n.invokeTask(H,ne,ge,Me)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===ne.type||a.shouldCoalesceRunChangeDetection)&&t(),hw(a)}},onInvoke:(n,C,H,ne,ge,Me,ze)=>{try{return fw(a),n.invoke(H,ne,ge,Me,ze)}finally{a.shouldCoalesceRunChangeDetection&&t(),hw(a)}},onHasTask:(n,C,H,ne)=>{n.hasTask(H,ne),C===H&&("microTask"==ne.change?(a._hasPendingMicrotasks=ne.microTask,g1(a),p1(a)):"macroTask"==ne.change&&(a.hasPendingMacrotasks=ne.macroTask))},onHandleError:(n,C,H,ne)=>(n.handleError(H,ne),a.runOutsideAngular(()=>a.onError.emit(ne)),!1)})}(H)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ll.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ll.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,C){return this._inner.run(t,n,C)}runTask(t,n,C,H){const ne=this._inner,ge=ne.scheduleEventTask("NgZoneEvent: "+H,t,yE,Mm,Mm);try{return ne.runTask(ge,n,C)}finally{ne.cancelTask(ge)}}runGuarded(t,n,C){return this._inner.runGuarded(t,n,C)}runOutsideAngular(t){return this._outer.run(t)}}const yE={};function p1(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function g1(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function fw(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function hw(a){a._nesting--,p1(a)}class bE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sa,this.onMicrotaskEmpty=new sa,this.onStable=new sa,this.onError=new sa}run(t,n,C){return t.apply(n,C)}runGuarded(t,n,C){return t.apply(n,C)}runOutsideAngular(t){return t()}runTask(t,n,C,H){return t.apply(n,C)}}let m1=(()=>{class a{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ll.assertNotInAngularZone(),d1(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())d1(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(C=>!C.updateCb||!C.updateCb(n)||(clearTimeout(C.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,C,H){let ne=-1;C&&C>0&&(ne=setTimeout(()=>{this._callbacks=this._callbacks.filter(ge=>ge.timeoutId!==ne),n(this._didWork,this.getPendingTasks())},C)),this._callbacks.push({doneCb:n,timeoutId:ne,updateCb:H})}whenStable(n,C,H){if(H&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,C,H),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,C,H){return[]}}return a.\u0275fac=function(n){return new(n||a)(ta(ll))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})(),dw=(()=>{class a{constructor(){this._applications=new Map,y1.addToWindow(this)}registerApplication(n,C){this._applications.set(n,C)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,C=!0){return y1.findTestabilityInTree(this,n,C)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();class _E{addToWindow(t){}findTestabilityInTree(t,n,C){return null}}let uc,y1=new _E;const pw=new ea("AllowMultipleToken");class gw{constructor(t,n){this.name=t,this.token=n}}function mw(a,t,n=[]){const C=`Platform: ${t}`,H=new ea(C);return(ne=[])=>{let ge=yw();if(!ge||ge.injector.get(pw,!1))if(a)a(n.concat(ne).concat({provide:H,useValue:!0}));else{const Me=n.concat(ne).concat({provide:H,useValue:!0},{provide:_0,useValue:"platform"});!function AE(a){if(uc&&!uc.destroyed&&!uc.injector.get(pw,!1))throw new gt(400,"");uc=a.get(vw);const t=a.get(sw,null);t&&t.forEach(n=>n())}(Nl.create({providers:Me,name:C}))}return function kE(a){const t=yw();if(!t)throw new gt(401,"");return t}()}}function yw(){return uc&&!uc.destroyed?uc:null}let vw=(()=>{class a{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,C){const Me=function EE(a,t){let n;return n="noop"===a?new bE:("zone.js"===a?void 0:a)||new ll({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(C?C.ngZone:void 0,{ngZoneEventCoalescing:C&&C.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:C&&C.ngZoneRunCoalescing||!1}),ze=[{provide:ll,useValue:Me}];return Me.run(()=>{const rt=Nl.create({providers:ze,parent:this.injector,name:n.moduleType.name}),Et=n.create(rt),Kt=Et.injector.get(Sf,null);if(!Kt)throw new gt(402,"");return Me.runOutsideAngular(()=>{const bn=Me.onError.subscribe({next:Sn=>{Kt.handleError(Sn)}});Et.onDestroy(()=>{x1(this._modules,Et),bn.unsubscribe()})}),function SE(a,t,n){try{const C=n();return k0(C)?C.catch(H=>{throw t.runOutsideAngular(()=>a.handleError(H)),H}):C}catch(C){throw t.runOutsideAngular(()=>a.handleError(C)),C}}(Kt,Me,()=>{const bn=Et.injector.get(c1);return bn.runInitializers(),bn.donePromise.then(()=>(function ak(a){It(a,"Expected localeId to be defined"),"string"==typeof a&&(J_=a.toLowerCase().replace(/_/g,"-"))}(Et.injector.get(Gf,gm)||gm),this._moduleDoBootstrap(Et),Et))})})}bootstrapModule(n,C=[]){const H=xw({},C);return function TE(a,t,n){const C=new Zv(n);return Promise.resolve(C)}(0,0,n).then(ne=>this.bootstrapModuleFactory(ne,H))}_moduleDoBootstrap(n){const C=n.injector.get(v1);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(H=>C.bootstrap(H));else{if(!n.instance.ngDoBootstrap)throw new gt(403,"");n.instance.ngDoBootstrap(C)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new gt(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(n){return new(n||a)(ta(Nl))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();function xw(a,t){return Array.isArray(t)?t.reduce(xw,a):Object.assign(Object.assign({},a),t)}let v1=(()=>{class a{constructor(n,C,H,ne,ge){this._zone=n,this._injector=C,this._exceptionHandler=H,this._componentFactoryResolver=ne,this._initStatus=ge,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const Me=new A(rt=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{rt.next(this._stable),rt.complete()})}),ze=new A(rt=>{let Et;this._zone.runOutsideAngular(()=>{Et=this._zone.onStable.subscribe(()=>{ll.assertNotInAngularZone(),d1(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,rt.next(!0))})})});const Kt=this._zone.onUnstable.subscribe(()=>{ll.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{rt.next(!1)}))});return()=>{Et.unsubscribe(),Kt.unsubscribe()}});this.isStable=function Re(...a){let t=Number.POSITIVE_INFINITY,n=null,C=a[a.length-1];return L(C)?(n=a.pop(),a.length>1&&"number"==typeof a[a.length-1]&&(t=a.pop())):"number"==typeof C&&(t=a.pop()),null===n&&1===a.length&&a[0]instanceof A?a[0]:Ie(t)(Ce(a,n))}(Me,ze.pipe(function Ut(){return a=>Ue()(function ct(a,t){return function(C){let H;if(H="function"==typeof a?a:function(){return a},"function"==typeof t)return C.lift(new bt(H,t));const ne=Object.create(C,He);return ne.source=C,ne.subjectFactory=H,ne}}(At)(a))}()))}bootstrap(n,C){if(!this._initStatus.done)throw new gt(405,"");let H;H=n instanceof T2?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(H.componentType);const ne=function ME(a){return a.isBoundToModule}(H)?void 0:this._injector.get(df),Me=H.create(Nl.NULL,[],C||H.selector,ne),ze=Me.location.nativeElement,rt=Me.injector.get(m1,null),Et=rt&&Me.injector.get(dw);return rt&&Et&&Et.registerApplication(ze,rt),Me.onDestroy(()=>{this.detachView(Me.hostView),x1(this.components,Me),Et&&Et.unregisterApplication(ze)}),this._loadComponent(Me),Me}tick(){if(this._runningTick)throw new gt(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const C=n;this._views.push(C),C.attachToAppRef(this)}detachView(n){const C=n;x1(this._views,C),C.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(lw,[]).concat(this._bootstrapListeners).forEach(H=>H(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(n){return new(n||a)(ta(ll),ta(Nl),ta(Sf),ta(P0),ta(c1))},a.\u0275prov=wn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function x1(a,t){const n=a.indexOf(t);n>-1&&a.splice(n,1)}let _w=!0,Am=(()=>{class a{}return a.__NG_ELEMENT_ID__=LE,a})();function LE(a){return function IE(a,t,n){if(Ss(a)&&!n){const C=_r(a.index,t);return new F0(C,C)}return 47&a.type?new F0(t[16],t):null}(aa(),pr(),16==(16&a))}class kw{constructor(){}supports(t){return T0(t)}create(t){return new zE(t)}}const NE=(a,t)=>t;class zE{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||NE}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,C=this._removalsHead,H=0,ne=null;for(;n||C;){const ge=!C||n&&n.currentIndex<Sw(C,H,ne)?n:C,Me=Sw(ge,H,ne),ze=ge.currentIndex;if(ge===C)H--,C=C._nextRemoved;else if(n=n._next,null==ge.previousIndex)H++;else{ne||(ne=[]);const rt=Me-H,Et=ze-H;if(rt!=Et){for(let bn=0;bn<rt;bn++){const Sn=bn<ne.length?ne[bn]:ne[bn]=0,Xn=Sn+bn;Et<=Xn&&Xn<rt&&(ne[bn]=Sn+1)}ne[ge.previousIndex]=Et-rt}}Me!==ze&&t(ge,Me,ze)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!T0(t))throw new gt(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let H,ne,ge,n=this._itHead,C=!1;if(Array.isArray(t)){this.length=t.length;for(let Me=0;Me<this.length;Me++)ne=t[Me],ge=this._trackByFn(Me,ne),null!==n&&Object.is(n.trackById,ge)?(C&&(n=this._verifyReinsertion(n,ne,ge,Me)),Object.is(n.item,ne)||this._addIdentityChange(n,ne)):(n=this._mismatch(n,ne,ge,Me),C=!0),n=n._next}else H=0,function qM(a,t){if(Array.isArray(a))for(let n=0;n<a.length;n++)t(a[n]);else{const n=a[Hd()]();let C;for(;!(C=n.next()).done;)t(C.value)}}(t,Me=>{ge=this._trackByFn(H,Me),null!==n&&Object.is(n.trackById,ge)?(C&&(n=this._verifyReinsertion(n,Me,ge,H)),Object.is(n.item,Me)||this._addIdentityChange(n,Me)):(n=this._mismatch(n,Me,ge,H),C=!0),n=n._next,H++}),this.length=H;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,C,H){let ne;return null===t?ne=this._itTail:(ne=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,ne,H)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(C,H))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,ne,H)):t=this._addAfter(new BE(n,C),ne,H),t}_verifyReinsertion(t,n,C,H){let ne=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null);return null!==ne?t=this._reinsertAfter(ne,t._prev,H):t.currentIndex!=H&&(t.currentIndex=H,this._addToMoves(t,H)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,C){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const H=t._prevRemoved,ne=t._nextRemoved;return null===H?this._removalsHead=ne:H._nextRemoved=ne,null===ne?this._removalsTail=H:ne._prevRemoved=H,this._insertAfter(t,n,C),this._addToMoves(t,C),t}_moveAfter(t,n,C){return this._unlink(t),this._insertAfter(t,n,C),this._addToMoves(t,C),t}_addAfter(t,n,C){return this._insertAfter(t,n,C),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,C){const H=null===n?this._itHead:n._next;return t._next=H,t._prev=n,null===H?this._itTail=t:H._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ew),this._linkedRecords.put(t),t.currentIndex=C,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,C=t._next;return null===n?this._itHead=C:n._next=C,null===C?this._itTail=n:C._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ew),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class BE{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jE{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let C;for(C=this._head;null!==C;C=C._nextDup)if((null===n||n<=C.currentIndex)&&Object.is(C.trackById,t))return C;return null}remove(t){const n=t._prevDup,C=t._nextDup;return null===n?this._head=C:n._nextDup=C,null===C?this._tail=n:C._prevDup=n,null===this._head}}class Ew{constructor(){this.map=new Map}put(t){const n=t.trackById;let C=this.map.get(n);C||(C=new jE,this.map.set(n,C)),C.add(t)}get(t,n){const H=this.map.get(t);return H?H.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sw(a,t,n){const C=a.previousIndex;if(null===C)return C;let H=0;return n&&C<n.length&&(H=n[C]),C+t+H}function Dw(){return new V0([new kw])}let V0=(()=>{class a{constructor(n){this.factories=n}static create(n,C){if(null!=C){const H=C.factories.slice();n=n.concat(H)}return new a(n)}static extend(n){return{provide:a,useFactory:C=>a.create(n,C||Dw()),deps:[[a,new vc,new Qu]]}}find(n){const C=this.factories.find(H=>H.supports(n));if(null!=C)return C;throw new gt(901,"")}}return a.\u0275prov=wn({token:a,providedIn:"root",factory:Dw}),a})();const GE=mw(null,"core",[{provide:h1,useValue:"unknown"},{provide:vw,deps:[Nl]},{provide:dw,deps:[]},{provide:uw,deps:[]}]);let WE=(()=>{class a{constructor(n){}}return a.\u0275fac=function(n){return new(n||a)(ta(v1))},a.\u0275mod=vr({type:a}),a.\u0275inj=An({}),a})(),Sm=null;function Fc(){return Sm}const Zl=new ea("DocumentToken");let Fh=(()=>{class a{historyGo(n){throw new Error("Not implemented")}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:function(){return function $E(){return ta(Iw)}()},providedIn:"platform"}),a})();const KE=new ea("Location Initialized");let Iw=(()=>{class a extends Fh{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fc().getBaseHref(this._doc)}onPopState(n){const C=Fc().getGlobalEventTarget(this._doc,"window");return C.addEventListener("popstate",n,!1),()=>C.removeEventListener("popstate",n)}onHashChange(n){const C=Fc().getGlobalEventTarget(this._doc,"window");return C.addEventListener("hashchange",n,!1),()=>C.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,C,H){Pw()?this._history.pushState(n,C,H):this.location.hash=H}replaceState(n,C,H){Pw()?this._history.replaceState(n,C,H):this.location.hash=H}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return a.\u0275fac=function(n){return new(n||a)(ta(Zl))},a.\u0275prov=wn({token:a,factory:function(){return function JE(){return new Iw(ta(Zl))}()},providedIn:"platform"}),a})();function Pw(){return!!window.history.pushState}function M1(a,t){if(0==a.length)return t;if(0==t.length)return a;let n=0;return a.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?a+t.substring(1):1==n?a+t:a+"/"+t}function Ow(a){const t=a.match(/#|\?|$/),n=t&&t.index||a.length;return a.slice(0,n-("/"===a[n-1]?1:0))+a.slice(n)}function gf(a){return a&&"?"!==a[0]?"?"+a:a}let sp=(()=>{class a{historyGo(n){throw new Error("Not implemented")}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:function(){return function QE(a){const t=ta(Zl).location;return new Rw(ta(Fh),t&&t.origin||"")}()},providedIn:"root"}),a})();const A1=new ea("appBaseHref");let Rw=(()=>{class a extends sp{constructor(n,C){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==C&&(C=this._platformLocation.getBaseHrefFromDOM()),null==C)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=C}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return M1(this._baseHref,n)}path(n=!1){const C=this._platformLocation.pathname+gf(this._platformLocation.search),H=this._platformLocation.hash;return H&&n?`${C}${H}`:C}pushState(n,C,H,ne){const ge=this.prepareExternalUrl(H+gf(ne));this._platformLocation.pushState(n,C,ge)}replaceState(n,C,H,ne){const ge=this.prepareExternalUrl(H+gf(ne));this._platformLocation.replaceState(n,C,ge)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var C,H;null===(H=(C=this._platformLocation).historyGo)||void 0===H||H.call(C,n)}}return a.\u0275fac=function(n){return new(n||a)(ta(Fh),ta(A1,8))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})(),eS=(()=>{class a extends sp{constructor(n,C){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=C&&(this._baseHref=C)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let C=this._platformLocation.hash;return null==C&&(C="#"),C.length>0?C.substring(1):C}prepareExternalUrl(n){const C=M1(this._baseHref,n);return C.length>0?"#"+C:C}pushState(n,C,H,ne){let ge=this.prepareExternalUrl(H+gf(ne));0==ge.length&&(ge=this._platformLocation.pathname),this._platformLocation.pushState(n,C,ge)}replaceState(n,C,H,ne){let ge=this.prepareExternalUrl(H+gf(ne));0==ge.length&&(ge=this._platformLocation.pathname),this._platformLocation.replaceState(n,C,ge)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var C,H;null===(H=(C=this._platformLocation).historyGo)||void 0===H||H.call(C,n)}}return a.\u0275fac=function(n){return new(n||a)(ta(Fh),ta(A1,8))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})(),k1=(()=>{class a{constructor(n,C){this._subject=new sa,this._urlChangeListeners=[],this._platformStrategy=n;const H=this._platformStrategy.getBaseHref();this._platformLocation=C,this._baseHref=Ow(Fw(H)),this._platformStrategy.onPopState(ne=>{this._subject.emit({url:this.path(!0),pop:!0,state:ne.state,type:ne.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,C=""){return this.path()==this.normalize(n+gf(C))}normalize(n){return a.stripTrailingSlash(function nS(a,t){return a&&t.startsWith(a)?t.substring(a.length):t}(this._baseHref,Fw(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,C="",H=null){this._platformStrategy.pushState(H,"",n,C),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gf(C)),H)}replaceState(n,C="",H=null){this._platformStrategy.replaceState(H,"",n,C),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gf(C)),H)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var C,H;null===(H=(C=this._platformStrategy).historyGo)||void 0===H||H.call(C,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(C=>{this._notifyUrlChangeListeners(C.url,C.state)}))}_notifyUrlChangeListeners(n="",C){this._urlChangeListeners.forEach(H=>H(n,C))}subscribe(n,C,H){return this._subject.subscribe({next:n,error:C,complete:H})}}return a.normalizeQueryParams=gf,a.joinWithSlash=M1,a.stripTrailingSlash=Ow,a.\u0275fac=function(n){return new(n||a)(ta(sp),ta(Fh))},a.\u0275prov=wn({token:a,factory:function(){return function tS(){return new k1(ta(sp),ta(Fh))}()},providedIn:"root"}),a})();function Fw(a){return a.replace(/\/index.html$/,"")}class VS{constructor(t,n,C,H){this.$implicit=t,this.ngForOf=n,this.index=C,this.count=H}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zm=(()=>{class a{constructor(n,C,H){this._viewContainer=n,this._template=C,this._differs=H,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const C=this._viewContainer;n.forEachOperation((H,ne,ge)=>{if(null==H.previousIndex)C.createEmbeddedView(this._template,new VS(H.item,this._ngForOf,-1,-1),null===ge?void 0:ge);else if(null==ge)C.remove(null===ne?void 0:ne);else if(null!==ne){const Me=C.get(ne);C.move(Me,ge),Ww(Me,H)}});for(let H=0,ne=C.length;H<ne;H++){const Me=C.get(H).context;Me.index=H,Me.count=ne,Me.ngForOf=this._ngForOf}n.forEachIdentityChange(H=>{Ww(C.get(H.currentIndex),H)})}static ngTemplateContextGuard(n,C){return!0}}return a.\u0275fac=function(n){return new(n||a)(Jr(lc),Jr(pf),Jr(V0))},a.\u0275dir=or({type:a,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),a})();function Ww(a,t){a.context.$implicit=t.item}let q0=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({}),a})();let v6=(()=>{class a{}return a.\u0275prov=wn({token:a,providedIn:"root",factory:()=>new x6(ta(Zl),window)}),a})();class x6{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function b6(a,t){const n=a.getElementById(t)||a.getElementsByName(t)[0];if(n)return n;if("function"==typeof a.createTreeWalker&&a.body&&(a.body.createShadowRoot||a.body.attachShadow)){const C=a.createTreeWalker(a.body,NodeFilter.SHOW_ELEMENT);let H=C.currentNode;for(;H;){const ne=H.shadowRoot;if(ne){const ge=ne.getElementById(t)||ne.querySelector(`[name="${t}"]`);if(ge)return ge}H=C.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),C=n.left+this.window.pageXOffset,H=n.top+this.window.pageYOffset,ne=this.offset();this.window.scrollTo(C-ne[0],H-ne[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Jw(this.window.history)||Jw(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Jw(a){return Object.getOwnPropertyDescriptor(a,"scrollRestoration")}class j1 extends class w6 extends class XE{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ZE(a){Sm||(Sm=a)}(new j1)}onAndCancel(t,n,C){return t.addEventListener(n,C,!1),()=>{t.removeEventListener(n,C,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function T6(){return G0=G0||document.querySelector("base"),G0?G0.getAttribute("href"):null}();return null==n?null:function M6(a){Bm=Bm||document.createElement("a"),Bm.setAttribute("href",a);const t=Bm.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){G0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function BS(a,t){t=encodeURIComponent(t);for(const n of a.split(";")){const C=n.indexOf("="),[H,ne]=-1==C?[n,""]:[n.slice(0,C),n.slice(C+1)];if(H.trim()===t)return decodeURIComponent(ne)}return null}(document.cookie,t)}}let Bm,G0=null;const Qw=new ea("TRANSITION_ID"),k6=[{provide:u1,useFactory:function A6(a,t,n){return()=>{n.get(c1).donePromise.then(()=>{const C=Fc(),H=t.querySelectorAll(`style[ng-transition="${a}"]`);for(let ne=0;ne<H.length;ne++)C.remove(H[ne])})}},deps:[Qw,Zl,Nl],multi:!0}];class V1{static init(){!function wE(a){y1=a}(new V1)}addToWindow(t){di.getAngularTestability=(C,H=!0)=>{const ne=t.findTestabilityInTree(C,H);if(null==ne)throw new Error("Could not find testability for element.");return ne},di.getAllAngularTestabilities=()=>t.getAllTestabilities(),di.getAllAngularRootElements=()=>t.getAllRootElements(),di.frameworkStabilizers||(di.frameworkStabilizers=[]),di.frameworkStabilizers.push(C=>{const H=di.getAllAngularTestabilities();let ne=H.length,ge=!1;const Me=function(ze){ge=ge||ze,ne--,0==ne&&C(ge)};H.forEach(function(ze){ze.whenStable(Me)})})}findTestabilityInTree(t,n,C){if(null==n)return null;const H=t.getTestability(n);return null!=H?H:C?Fc().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let E6=(()=>{class a{build(){return new XMLHttpRequest}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();const jm=new ea("EventManagerPlugins");let Vm=(()=>{class a{constructor(n,C){this._zone=C,this._eventNameToPlugin=new Map,n.forEach(H=>H.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,C,H){return this._findPluginFor(C).addEventListener(n,C,H)}addGlobalEventListener(n,C,H){return this._findPluginFor(C).addGlobalEventListener(n,C,H)}getZone(){return this._zone}_findPluginFor(n){const C=this._eventNameToPlugin.get(n);if(C)return C;const H=this._plugins;for(let ne=0;ne<H.length;ne++){const ge=H[ne];if(ge.supports(n))return this._eventNameToPlugin.set(n,ge),ge}throw new Error(`No event manager plugin found for event ${n}`)}}return a.\u0275fac=function(n){return new(n||a)(ta(jm),ta(ll))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();class e3{constructor(t){this._doc=t}addGlobalEventListener(t,n,C){const H=Fc().getGlobalEventTarget(this._doc,t);if(!H)throw new Error(`Unsupported event target ${H} for event ${n}`);return this.addEventListener(H,n,C)}}let t3=(()=>{class a{constructor(){this._stylesSet=new Set}addStyles(n){const C=new Set;n.forEach(H=>{this._stylesSet.has(H)||(this._stylesSet.add(H),C.add(H))}),this.onStylesAdded(C)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})(),W0=(()=>{class a extends t3{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,C,H){n.forEach(ne=>{const ge=this._doc.createElement("style");ge.textContent=ne,H.push(C.appendChild(ge))})}addHost(n){const C=[];this._addStylesToHost(this._stylesSet,n,C),this._hostNodes.set(n,C)}removeHost(n){const C=this._hostNodes.get(n);C&&C.forEach(n3),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((C,H)=>{this._addStylesToHost(n,H,C)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(n3))}}return a.\u0275fac=function(n){return new(n||a)(ta(Zl))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();function n3(a){Fc().remove(a)}const U1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},H1=/%COMP%/g;function Um(a,t,n){for(let C=0;C<t.length;C++){let H=t[C];Array.isArray(H)?Um(a,H,n):(H=H.replace(H1,a),n.push(H))}return n}function a3(a){return t=>{if("__ngUnwrap__"===t)return a;!1===a(t)&&(t.preventDefault(),t.returnValue=!1)}}let Hm=(()=>{class a{constructor(n,C,H){this.eventManager=n,this.sharedStylesHost=C,this.appId=H,this.rendererByCompId=new Map,this.defaultRenderer=new q1(n)}createRenderer(n,C){if(!n||!C)return this.defaultRenderer;switch(C.encapsulation){case Kn.Emulated:{let H=this.rendererByCompId.get(C.id);return H||(H=new P6(this.eventManager,this.sharedStylesHost,C,this.appId),this.rendererByCompId.set(C.id,H)),H.applyToHost(n),H}case 1:case Kn.ShadowDom:return new O6(this.eventManager,this.sharedStylesHost,n,C);default:if(!this.rendererByCompId.has(C.id)){const H=Um(C.id,C.styles,[]);this.sharedStylesHost.addStyles(H),this.rendererByCompId.set(C.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return a.\u0275fac=function(n){return new(n||a)(ta(Vm),ta(W0),ta(j0))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();class q1{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(U1[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,C){t&&t.insertBefore(n,C)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let C="string"==typeof t?document.querySelector(t):t;if(!C)throw new Error(`The selector "${t}" did not match any elements`);return n||(C.textContent=""),C}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,C,H){if(H){n=H+":"+n;const ne=U1[H];ne?t.setAttributeNS(ne,n,C):t.setAttribute(n,C)}else t.setAttribute(n,C)}removeAttribute(t,n,C){if(C){const H=U1[C];H?t.removeAttributeNS(H,n):t.removeAttribute(`${C}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,C,H){H&(al.DashCase|al.Important)?t.style.setProperty(n,C,H&al.Important?"important":""):t.style[n]=C}removeStyle(t,n,C){C&al.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,C){t[n]=C}setValue(t,n){t.nodeValue=n}listen(t,n,C){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,a3(C)):this.eventManager.addEventListener(t,n,a3(C))}}class P6 extends q1{constructor(t,n,C,H){super(t),this.component=C;const ne=Um(H+"-"+C.id,C.styles,[]);n.addStyles(ne),this.contentAttr=function D6(a){return"_ngcontent-%COMP%".replace(H1,a)}(H+"-"+C.id),this.hostAttr=function L6(a){return"_nghost-%COMP%".replace(H1,a)}(H+"-"+C.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const C=super.createElement(t,n);return super.setAttribute(C,this.contentAttr,""),C}}class O6 extends q1{constructor(t,n,C,H){super(t),this.sharedStylesHost=n,this.hostEl=C,this.shadowRoot=C.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ne=Um(H.id,H.styles,[]);for(let ge=0;ge<ne.length;ge++){const Me=document.createElement("style");Me.textContent=ne[ge],this.shadowRoot.appendChild(Me)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,C){return super.insertBefore(this.nodeOrShadowRoot(t),n,C)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let R6=(()=>{class a extends e3{constructor(n){super(n)}supports(n){return!0}addEventListener(n,C,H){return n.addEventListener(C,H,!1),()=>this.removeEventListener(n,C,H)}removeEventListener(n,C,H){return n.removeEventListener(C,H)}}return a.\u0275fac=function(n){return new(n||a)(ta(Zl))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();const s3=["alt","control","meta","shift"],N6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},l3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},z6={alt:a=>a.altKey,control:a=>a.ctrlKey,meta:a=>a.metaKey,shift:a=>a.shiftKey};let B6=(()=>{class a extends e3{constructor(n){super(n)}supports(n){return null!=a.parseEventName(n)}addEventListener(n,C,H){const ne=a.parseEventName(C),ge=a.eventCallback(ne.fullKey,H,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fc().onAndCancel(n,ne.domEventName,ge))}static parseEventName(n){const C=n.toLowerCase().split("."),H=C.shift();if(0===C.length||"keydown"!==H&&"keyup"!==H)return null;const ne=a._normalizeKey(C.pop());let ge="";if(s3.forEach(ze=>{const rt=C.indexOf(ze);rt>-1&&(C.splice(rt,1),ge+=ze+".")}),ge+=ne,0!=C.length||0===ne.length)return null;const Me={};return Me.domEventName=H,Me.fullKey=ge,Me}static getEventFullKey(n){let C="",H=function j6(a){let t=a.key;if(null==t){if(t=a.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===a.location&&l3.hasOwnProperty(t)&&(t=l3[t]))}return N6[t]||t}(n);return H=H.toLowerCase()," "===H?H="space":"."===H&&(H="dot"),s3.forEach(ne=>{ne!=H&&z6[ne](n)&&(C+=ne+".")}),C+=H,C}static eventCallback(n,C,H){return ne=>{a.getEventFullKey(ne)===n&&H.runGuarded(()=>C(ne))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return a.\u0275fac=function(n){return new(n||a)(ta(Zl))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();const q6=mw(GE,"browser",[{provide:h1,useValue:"browser"},{provide:sw,useValue:function V6(){j1.makeCurrent(),V1.init()},multi:!0},{provide:Zl,useFactory:function H6(){return function ds(a){$o=a}(document),document},deps:[]}]),G6=[{provide:_0,useValue:"root"},{provide:Sf,useFactory:function U6(){return new Sf},deps:[]},{provide:jm,useClass:R6,multi:!0,deps:[Zl,ll,h1]},{provide:jm,useClass:B6,multi:!0,deps:[Zl]},{provide:Hm,useClass:Hm,deps:[Vm,W0,j0]},{provide:O0,useExisting:Hm},{provide:t3,useExisting:W0},{provide:W0,useClass:W0,deps:[Zl]},{provide:m1,useClass:m1,deps:[ll]},{provide:Vm,useClass:Vm,deps:[jm,ll]},{provide:class _6{},useClass:E6,deps:[]}];let u3=(()=>{class a{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:a,providers:[{provide:j0,useValue:n.appId},{provide:Qw,useExisting:j0},k6]}}}return a.\u0275fac=function(n){return new(n||a)(ta(a,12))},a.\u0275mod=vr({type:a}),a.\u0275inj=An({providers:G6,imports:[q0,WE]}),a})();function d3(a,t,n,C){return new(n||(n=Promise))(function(ne,ge){function Me(Et){try{rt(C.next(Et))}catch(Kt){ge(Kt)}}function ze(Et){try{rt(C.throw(Et))}catch(Kt){ge(Kt)}}function rt(Et){Et.done?ne(Et.value):function H(ne){return ne instanceof n?ne:new n(function(ge){ge(ne)})}(Et.value).then(Me,ze)}rt((C=C.apply(a,t||[])).next())})}"undefined"!=typeof window&&window;class no{static setModuleName(t){no.moduleName=t}static getModuleName(){return no.moduleName}static setPlotly(t){if("object"==typeof t&&"function"!=typeof t.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");no.plotly=t}static insert(t){return-1===no.instances.indexOf(t)&&no.instances.push(t),t}static remove(t){const n=no.instances.indexOf(t);n>=0&&(no.instances.splice(n,1),no.plotly.purge(t))}getInstanceByDivId(t){for(const n of no.instances)if(n&&n.id===t)return n}getPlotly(){return d3(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===no.plotly)throw new Error("ViaCDN"===no.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return no.plotly}waitFor(t){return new Promise(n=>{const C=()=>{t()?n():setTimeout(C,10)};C()})}newPlot(t,n,C,H,ne){return d3(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),ne){const ge={data:n,layout:C,config:H,frames:ne};return this._getPlotly().newPlot(t,ge).then(()=>no.insert(t))}return this._getPlotly().newPlot(t,n,C,H).then(()=>no.insert(t))})}plot(t,n,C,H,ne){if(ne){const ge={data:n,layout:C,config:H,frames:ne};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,ge):this._getPlotly().newPlot(t,ge)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,n,C,H):this._getPlotly().newPlot(t,n,C,H)}update(t,n,C,H,ne){if(ne){const ge={data:n,layout:C,config:H,frames:ne};return this._getPlotly().react(t,ge)}return this._getPlotly().react(t,n,C,H)}resize(t){return this._getPlotly().Plots.resize(t)}}no.\u0275fac=function(t){return new(t||no)},no.instances=[],no.plotly=void 0,no.moduleName=void 0,no.\u0275prov=wn({factory:function(){return new no},token:no,providedIn:"root"});let lp=(()=>{class a{constructor(){}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({providers:[no],imports:[[q0]]}),a})(),m3=(()=>{class a{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");no.setPlotly(a.plotlyjs)}isValid(){return void 0!==a.plotlyjs&&("function"==typeof a.plotlyjs.plot||"function"==typeof a.plotlyjs.newPlot)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({providers:[no],imports:[[q0,lp],lp]}),a.plotlyjs={},a})();class Y1{constructor(t,n,C,H){this.name=t,this.boilers=n,this.coalQuarters=C,this.ngQuarters=H}}class Nc{constructor(t,n,C,H,ne,ge,Me){this.name=t,this.fuel=n,this.NOx=C,this.SO2=H,this.CO=ne,this.CO2=ge,this.yearData=Me}}class Yf{constructor(){this.analyteSelected=new F,this.selectedPlant=new F,this.totalCoal=0,this.totalNG=0,this.noxNatGas=0,this.noxCoal=0,this.co2NatGas=0,this.co2Coal=0,this.coNatGas=0,this.coCoal=0,this.so2NatGas=0,this.so2Coal=0,this.selection="",this.displayArray=[],this.plants=[new Y1("Plant A",[new Nc("Boiler A","Coal",.457,2.591,.208,208,[.583,.588,.608,.433,.501,.542,.59,.5,.567,.513,.467,.455]),new Nc("Boiler B","Natural Gas",.09,0,.04,165,[.11,.08,.07,.09,.11,.13,.16,.17,.15,.09,.11,.09]),new Nc("Boiler C","Natural Gas",.07,0,.05,112,[.063,.09,.13,.11,.123,.14,.15,.18,.14,.11,.07,.08])],[2,3,4,5],[2,1,2,1]),new Y1("Plant B",[new Nc("Boiler 1","Coal",.477,3.591,.108,218,[.421,.441,.461,.481,.446,.523,.567,.587,.428,.441,.453,.433]),new Nc("Boiler 2","Natural Gas",.1,0,.04,115,[.082,.1,.13,.15,.18,.22,.21,.17,.17,.13,.11,.07]),new Nc("Boiler 3","Coal",.06,3.2,.02,109,[.496,.509,.482,.437,.444,.534,.561,.61,.522,.489,.421,.432])],[3,3,4,5],[2,4,6,2]),new Y1("Plant C",[new Nc("Boiler W","Natural Gas",.07,0,.05,112,[.064,.07,.12,.11,.13,.16,.15,.18,.14,.09,.07,.08]),new Nc("Boiler X","Coal",.45,3.91,.18,217,[.544,.52,.621,.589,.554,.561,.61,.627,.578,.588,.499,.478]),new Nc("Boiler Y","Natural Gas",.1,0,.045,114,[.123,.08,.12,.15,.15,.12,.19,.16,.13,.06,.1,.06]),new Nc("Boiler Z","Coal",.06,2.9,.02,109,[.51,.478,.488,.452,.564,.538,.527,.631,.62,.547,.51,.49])],[1,2,5,3],[3,1,4,2])]}selectedPlants(t){this.noxNatGas=0,this.noxCoal=0,this.co2NatGas=0,this.co2Coal=0,this.coNatGas=0,this.coCoal=0,this.so2NatGas=0,this.so2Coal=0,this.displayArray=[];for(let n of this.plants)t==n.name&&(this.displayArray=n.boilers);for(let n of this.displayArray)"Coal"==n.fuel?(this.noxCoal+=n.NOx,this.co2Coal+=n.CO2,this.coCoal+=n.CO,this.so2Coal+=n.SO2,this.totalCoal+=n.NOx+n.CO2+n.CO+n.SO2):"Natural Gas"==n.fuel&&(this.noxNatGas+=n.NOx,this.co2NatGas+=n.CO2,this.coNatGas+=n.CO,this.so2NatGas+=n.SO2,this.totalNG+=n.NOx+n.CO2+n.CO+n.SO2)}}let Fa=(()=>{class a{constructor(){this.colorSelected=new F}onColorSelect(n){"mainmode"==n?a.colormode={chartbgcolor:"#e8e8e8",coalcolor:"#1C4E80",naturalgascolor:"#0091D5",appbgcolor:"#1C4E80",componentbgcolor:"#e8e8e8",fontcolor:"black"}:"darkmode"==n?a.colormode={chartbgcolor:"#252A48",coalcolor:"#1C4E80",naturalgascolor:"#0091D5",appbgcolor:"#181b2d",componentbgcolor:"#252A48",fontcolor:"lightgray"}:"rainbowmode"==n&&(a.colormode={chartbgcolor:"#f8fe85",coalcolor:"#ff6464",naturalgascolor:"#ffbd67",appbgcolor:"#5be7a9",componentbgcolor:"#f8fe85",fontcolor:"black"})}}return a.colormode={chartbgcolor:"#e8e8e8",coalcolor:"#1C4E80",naturalgascolor:"#0091D5",appbgcolor:"#1C4E80",componentbgcolor:"#e8e8e8",fontcolor:"black"},a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Ha(...a){let t=a[a.length-1];return L(t)?(a.pop(),ee(a,t)):Ce(a)}class hc extends F{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}next(t){super.next(this._value=t)}}class oC extends d{notifyNext(t,n,C,H,ne){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class sC extends d{constructor(t,n,C){super(),this.parent=t,this.outerValue=n,this.outerIndex=C,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function lC(a,t,n,C,H=new sC(a,n,C)){if(!H.closed)return t instanceof A?t.subscribe(H):W(t)(H)}const y3={};class cC{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new fC(t,this.resultSelector))}}class fC extends oC{constructor(t,n){super(t),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(y3),this.observables.push(t)}_complete(){const t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let C=0;C<n;C++)this.add(lC(this,t[C],void 0,C))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,n,C){const H=this.values,ge=this.toRespond?H[C]===y3?--this.toRespond:this.toRespond:0;H[C]=n,0===ge&&(this.resultSelector?this._tryResultSelector(H):this.destination.next(H.slice()))}_tryResultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(C){return void this.destination.error(C)}this.destination.next(n)}}function Gm(a,t){return new A(t?n=>t.schedule(hC,0,{error:a,subscriber:n}):n=>n.error(a))}function hC({error:a,subscriber:t}){t.error(a)}const Wm=(()=>{function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a})();function Z1(...a){return function dC(){return Ie(1)}()(Ha(...a))}const up=new A(a=>a.complete());function X1(a){return a?function pC(a){return new A(t=>a.schedule(()=>t.complete()))}(a):up}function v3(a){return new A(t=>{let n;try{n=a()}catch(H){return void t.error(H)}return(n?he(n):X1()).subscribe(t)})}function Zf(a,t){return"function"==typeof t?n=>n.pipe(Zf((C,H)=>he(a(C,H)).pipe(I((ne,ge)=>t(C,ne,H,ge))))):n=>n.lift(new gC(a))}class gC{constructor(t){this.project=t}call(t,n){return n.subscribe(new mC(t,this.project))}}class mC extends _e{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const C=this.index++;try{n=this.project(t,C)}catch(H){return void this.destination.error(H)}this._innerSub(n)}_innerSub(t){const n=this.innerSubscription;n&&n.unsubscribe();const C=new be(this),H=this.destination;H.add(C),this.innerSubscription=De(t,C),this.innerSubscription!==C&&H.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const x3=(()=>{function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a})();function $1(a){return t=>0===a?X1():t.lift(new yC(a))}class yC{constructor(t){if(this.total=t,this.total<0)throw new x3}call(t,n){return n.subscribe(new vC(t,this.total))}}class vC extends d{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,C=++this.count;C<=n&&(this.destination.next(t),C===n&&(this.destination.complete(),this.unsubscribe()))}}function b3(a,t){let n=!1;return arguments.length>=2&&(n=!0),function(H){return H.lift(new bC(a,t,n))}}class bC{constructor(t,n,C=!1){this.accumulator=t,this.seed=n,this.hasSeed=C}call(t,n){return n.subscribe(new _C(t,this.accumulator,this.seed,this.hasSeed))}}class _C extends d{constructor(t,n,C,H){super(t),this.accumulator=n,this._seed=C,this.hasSeed=H,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const n=this.index++;let C;try{C=this.accumulator(this.seed,t,n)}catch(H){this.destination.error(H)}this.seed=C,this.destination.next(C)}}function cp(a,t){return function(C){return C.lift(new wC(a,t))}}class wC{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new TC(t,this.predicate,this.thisArg))}}class TC extends d{constructor(t,n,C){super(t),this.predicate=n,this.thisArg=C,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(C){return void this.destination.error(C)}n&&this.destination.next(t)}}function Nh(a){return function(n){const C=new MC(a),H=n.lift(C);return C.caught=H}}class MC{constructor(t){this.selector=t}call(t,n){return n.subscribe(new AC(t,this.selector,this.caught))}}class AC extends _e{constructor(t,n,C){super(t),this.selector=n,this.caught=C}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(ne){return void super.error(ne)}this._unsubscribeAndRecycle();const C=new be(this);this.add(C);const H=De(n,C);H!==C&&this.add(H)}}}function Y0(a,t){return Se(a,t,1)}function K1(a){return function(n){return 0===a?X1():n.lift(new kC(a))}}class kC{constructor(t){if(this.total=t,this.total<0)throw new x3}call(t,n){return n.subscribe(new EC(t,this.total))}}class EC extends d{constructor(t,n){super(t),this.total=n,this.ring=new Array,this.count=0}_next(t){const n=this.ring,C=this.total,H=this.count++;n.length<C?n.push(t):n[H%C]=t}_complete(){const t=this.destination;let n=this.count;if(n>0){const C=this.count>=this.total?this.total:this.count,H=this.ring;for(let ne=0;ne<C;ne++){const ge=n++%C;t.next(H[ge])}}t.complete()}}function _3(a=DC){return t=>t.lift(new SC(a))}class SC{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new CC(t,this.errorFactory))}}class CC extends d{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function DC(){return new Wm}function w3(a=null){return t=>t.lift(new LC(a))}class LC{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new IC(t,this.defaultValue))}}class IC extends d{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function fp(a,t){const n=arguments.length>=2;return C=>C.pipe(a?cp((H,ne)=>a(H,ne,C)):u,$1(1),n?w3(t):_3(()=>new Wm))}function Xf(){}function xu(a,t,n){return function(H){return H.lift(new OC(a,t,n))}}class OC{constructor(t,n,C){this.nextOrObserver=t,this.error=n,this.complete=C}call(t,n){return n.subscribe(new RC(t,this.nextOrObserver,this.error,this.complete))}}class RC extends d{constructor(t,n,C,H){super(t),this._tapNext=Xf,this._tapError=Xf,this._tapComplete=Xf,this._tapError=C||Xf,this._tapComplete=H||Xf,se(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||Xf,this._tapError=n.error||Xf,this._tapComplete=n.complete||Xf)}_next(t){try{this._tapNext.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class NC{constructor(t){this.callback=t}call(t,n){return n.subscribe(new zC(t,this.callback))}}class zC extends d{constructor(t,n){super(t),this.add(new r(n))}}class yf{constructor(t,n){this.id=t,this.url=n}}class J1 extends yf{constructor(t,n,C="imperative",H=null){super(t,n),this.navigationTrigger=C,this.restoredState=H}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Z0 extends yf{constructor(t,n,C){super(t,n),this.urlAfterRedirects=C}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class T3 extends yf{constructor(t,n,C){super(t,n),this.reason=C}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class BC extends yf{constructor(t,n,C){super(t,n),this.error=C}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jC extends yf{constructor(t,n,C,H){super(t,n),this.urlAfterRedirects=C,this.state=H}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VC extends yf{constructor(t,n,C,H){super(t,n),this.urlAfterRedirects=C,this.state=H}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UC extends yf{constructor(t,n,C,H,ne){super(t,n),this.urlAfterRedirects=C,this.state=H,this.shouldActivate=ne}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class HC extends yf{constructor(t,n,C,H){super(t,n),this.urlAfterRedirects=C,this.state=H}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qC extends yf{constructor(t,n,C,H){super(t,n),this.urlAfterRedirects=C,this.state=H}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M3{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class A3{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class GC{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WC{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YC{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZC{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k3{constructor(t,n,C){this.routerEvent=t,this.position=n,this.anchor=C}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const io="primary";class XC{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function hp(a){return new XC(a)}const E3="ngNavigationCancelingError";function Q1(a){const t=Error("NavigationCancelingError: "+a);return t[E3]=!0,t}function KC(a,t,n){const C=n.path.split("/");if(C.length>a.length||"full"===n.pathMatch&&(t.hasChildren()||C.length<a.length))return null;const H={};for(let ne=0;ne<C.length;ne++){const ge=C[ne],Me=a[ne];if(ge.startsWith(":"))H[ge.substring(1)]=Me;else if(ge!==Me.path)return null}return{consumed:a.slice(0,C.length),posParams:H}}function zc(a,t){const n=a?Object.keys(a):void 0,C=t?Object.keys(t):void 0;if(!n||!C||n.length!=C.length)return!1;let H;for(let ne=0;ne<n.length;ne++)if(H=n[ne],!S3(a[H],t[H]))return!1;return!0}function S3(a,t){if(Array.isArray(a)&&Array.isArray(t)){if(a.length!==t.length)return!1;const n=[...a].sort(),C=[...t].sort();return n.every((H,ne)=>C[ne]===H)}return a===t}function C3(a){return Array.prototype.concat.apply([],a)}function D3(a){return a.length>0?a[a.length-1]:null}function Ml(a,t){for(const n in a)a.hasOwnProperty(n)&&t(a[n],n)}function Bc(a){return Rv(a)?a:k0(a)?he(Promise.resolve(a)):Ha(a)}const eD={exact:function P3(a,t,n){if(!Bh(a.segments,t.segments)||!Ym(a.segments,t.segments,n)||a.numberOfChildren!==t.numberOfChildren)return!1;for(const C in t.children)if(!a.children[C]||!P3(a.children[C],t.children[C],n))return!1;return!0},subset:O3},L3={exact:function tD(a,t){return zc(a,t)},subset:function nD(a,t){return Object.keys(t).length<=Object.keys(a).length&&Object.keys(t).every(n=>S3(a[n],t[n]))},ignored:()=>!0};function I3(a,t,n){return eD[n.paths](a.root,t.root,n.matrixParams)&&L3[n.queryParams](a.queryParams,t.queryParams)&&!("exact"===n.fragment&&a.fragment!==t.fragment)}function O3(a,t,n){return R3(a,t,t.segments,n)}function R3(a,t,n,C){if(a.segments.length>n.length){const H=a.segments.slice(0,n.length);return!(!Bh(H,n)||t.hasChildren()||!Ym(H,n,C))}if(a.segments.length===n.length){if(!Bh(a.segments,n)||!Ym(a.segments,n,C))return!1;for(const H in t.children)if(!a.children[H]||!O3(a.children[H],t.children[H],C))return!1;return!0}{const H=n.slice(0,a.segments.length),ne=n.slice(a.segments.length);return!!(Bh(a.segments,H)&&Ym(a.segments,H,C)&&a.children[io])&&R3(a.children[io],t,ne,C)}}function Ym(a,t,n){return t.every((C,H)=>L3[n](a[H].parameters,C.parameters))}class zh{constructor(t,n,C){this.root=t,this.queryParams=n,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hp(this.queryParams)),this._queryParamMap}toString(){return aD.serialize(this)}}class co{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Ml(n,(C,H)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zm(this)}}class X0{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=hp(this.parameters)),this._parameterMap}toString(){return j3(this)}}function Bh(a,t){return a.length===t.length&&a.every((n,C)=>n.path===t[C].path)}class F3{}class N3{parse(t){const n=new pD(t);return new zh(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${$0(t.root,!0)}`,C=function lD(a){const t=Object.keys(a).map(n=>{const C=a[n];return Array.isArray(C)?C.map(H=>`${Xm(n)}=${Xm(H)}`).join("&"):`${Xm(n)}=${Xm(C)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams),H="string"==typeof t.fragment?`#${function oD(a){return encodeURI(a)}(t.fragment)}`:"";return`${n}${C}${H}`}}const aD=new N3;function Zm(a){return a.segments.map(t=>j3(t)).join("/")}function $0(a,t){if(!a.hasChildren())return Zm(a);if(t){const n=a.children[io]?$0(a.children[io],!1):"",C=[];return Ml(a.children,(H,ne)=>{ne!==io&&C.push(`${ne}:${$0(H,!1)}`)}),C.length>0?`${n}(${C.join("//")})`:n}{const n=function iD(a,t){let n=[];return Ml(a.children,(C,H)=>{H===io&&(n=n.concat(t(C,H)))}),Ml(a.children,(C,H)=>{H!==io&&(n=n.concat(t(C,H)))}),n}(a,(C,H)=>H===io?[$0(a.children[io],!1)]:[`${H}:${$0(C,!1)}`]);return 1===Object.keys(a.children).length&&null!=a.children[io]?`${Zm(a)}/${n[0]}`:`${Zm(a)}/(${n.join("//")})`}}function z3(a){return encodeURIComponent(a).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xm(a){return z3(a).replace(/%3B/gi,";")}function ex(a){return z3(a).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $m(a){return decodeURIComponent(a)}function B3(a){return $m(a.replace(/\+/g,"%20"))}function j3(a){return`${ex(a.path)}${function sD(a){return Object.keys(a).map(t=>`;${ex(t)}=${ex(a[t])}`).join("")}(a.parameters)}`}const uD=/^[^\/()?;=#]+/;function Km(a){const t=a.match(uD);return t?t[0]:""}const cD=/^[^=?&#]+/,hD=/^[^&#]+/;class pD{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new co([],{}):new co([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(C[io]=new co(t,n)),C}parseSegment(){const t=Km(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new X0($m(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Km(this.remaining);if(!n)return;this.capture(n);let C="";if(this.consumeOptional("=")){const H=Km(this.remaining);H&&(C=H,this.capture(C))}t[$m(n)]=$m(C)}parseQueryParam(t){const n=function fD(a){const t=a.match(cD);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let C="";if(this.consumeOptional("=")){const ge=function dD(a){const t=a.match(hD);return t?t[0]:""}(this.remaining);ge&&(C=ge,this.capture(C))}const H=B3(n),ne=B3(C);if(t.hasOwnProperty(H)){let ge=t[H];Array.isArray(ge)||(ge=[ge],t[H]=ge),ge.push(ne)}else t[H]=ne}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=Km(this.remaining),H=this.remaining[C.length];if("/"!==H&&")"!==H&&";"!==H)throw new Error(`Cannot parse url '${this.url}'`);let ne;C.indexOf(":")>-1?(ne=C.substr(0,C.indexOf(":")),this.capture(ne),this.capture(":")):t&&(ne=io);const ge=this.parseChildren();n[ne]=1===Object.keys(ge).length?ge[io]:new co([],ge),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class V3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=tx(t,this._root);return n?n.children.map(C=>C.value):[]}firstChild(t){const n=tx(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=nx(t,this._root);return n.length<2?[]:n[n.length-2].children.map(H=>H.value).filter(H=>H!==t)}pathFromRoot(t){return nx(t,this._root).map(n=>n.value)}}function tx(a,t){if(a===t.value)return t;for(const n of t.children){const C=tx(a,n);if(C)return C}return null}function nx(a,t){if(a===t.value)return[t];for(const n of t.children){const C=nx(a,n);if(C.length)return C.unshift(t),C}return[]}class vf{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function dp(a){const t={};return a&&a.children.forEach(n=>t[n.value.outlet]=n),t}class U3 extends V3{constructor(t,n){super(t),this.snapshot=n,rx(this,t)}toString(){return this.snapshot.toString()}}function H3(a,t){const n=function gD(a,t){const ge=new Jm([],{},{},"",{},io,t,null,a.root,-1,{});return new G3("",new vf(ge,[]))}(a,t),C=new hc([new X0("",{})]),H=new hc({}),ne=new hc({}),ge=new hc({}),Me=new hc(""),ze=new pp(C,H,ge,Me,ne,io,t,n.root);return ze.snapshot=n.root,new U3(new vf(ze,[]),n)}class pp{constructor(t,n,C,H,ne,ge,Me,ze){this.url=t,this.params=n,this.queryParams=C,this.fragment=H,this.data=ne,this.outlet=ge,this.component=Me,this._futureSnapshot=ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(I(t=>hp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(I(t=>hp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function q3(a,t="emptyOnly"){const n=a.pathFromRoot;let C=0;if("always"!==t)for(C=n.length-1;C>=1;){const H=n[C],ne=n[C-1];if(H.routeConfig&&""===H.routeConfig.path)C--;else{if(ne.component)break;C--}}return function mD(a){return a.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(C))}class Jm{constructor(t,n,C,H,ne,ge,Me,ze,rt,Et,Kt){this.url=t,this.params=n,this.queryParams=C,this.fragment=H,this.data=ne,this.outlet=ge,this.component=Me,this.routeConfig=ze,this._urlSegment=rt,this._lastPathIndex=Et,this._resolve=Kt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class G3 extends V3{constructor(t,n){super(n),this.url=t,rx(this,n)}toString(){return W3(this._root)}}function rx(a,t){t.value._routerState=a,t.children.forEach(n=>rx(a,n))}function W3(a){const t=a.children.length>0?` { ${a.children.map(W3).join(", ")} } `:"";return`${a.value}${t}`}function ix(a){if(a.snapshot){const t=a.snapshot,n=a._futureSnapshot;a.snapshot=n,zc(t.queryParams,n.queryParams)||a.queryParams.next(n.queryParams),t.fragment!==n.fragment&&a.fragment.next(n.fragment),zc(t.params,n.params)||a.params.next(n.params),function JC(a,t){if(a.length!==t.length)return!1;for(let n=0;n<a.length;++n)if(!zc(a[n],t[n]))return!1;return!0}(t.url,n.url)||a.url.next(n.url),zc(t.data,n.data)||a.data.next(n.data)}else a.snapshot=a._futureSnapshot,a.data.next(a._futureSnapshot.data)}function ax(a,t){const n=zc(a.params,t.params)&&function rD(a,t){return Bh(a,t)&&a.every((n,C)=>zc(n.parameters,t[C].parameters))}(a.url,t.url);return n&&!(!a.parent!=!t.parent)&&(!a.parent||ax(a.parent,t.parent))}function K0(a,t,n){if(n&&a.shouldReuseRoute(t.value,n.value.snapshot)){const C=n.value;C._futureSnapshot=t.value;const H=function vD(a,t,n){return t.children.map(C=>{for(const H of n.children)if(a.shouldReuseRoute(C.value,H.value.snapshot))return K0(a,C,H);return K0(a,C)})}(a,t,n);return new vf(C,H)}{if(a.shouldAttach(t.value)){const ne=a.retrieve(t.value);if(null!==ne){const ge=ne.route;return ge.value._futureSnapshot=t.value,ge.children=t.children.map(Me=>K0(a,Me)),ge}}const C=function xD(a){return new pp(new hc(a.url),new hc(a.params),new hc(a.queryParams),new hc(a.fragment),new hc(a.data),a.outlet,a.component,a)}(t.value),H=t.children.map(ne=>K0(a,ne));return new vf(C,H)}}function Qm(a){return"object"==typeof a&&null!=a&&!a.outlets&&!a.segmentPath}function J0(a){return"object"==typeof a&&null!=a&&a.outlets}function ox(a,t,n,C,H){let ne={};if(C&&Ml(C,(Me,ze)=>{ne[ze]=Array.isArray(Me)?Me.map(rt=>`${rt}`):`${Me}`}),a===t)return new zh(n,ne,H);const ge=Y3(a,t,n);return new zh(ge,ne,H)}function Y3(a,t,n){const C={};return Ml(a.children,(H,ne)=>{C[ne]=H===t?n:Y3(H,t,n)}),new co(a.segments,C)}class Z3{constructor(t,n,C){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=C,t&&C.length>0&&Qm(C[0]))throw new Error("Root segment cannot have matrix parameters");const H=C.find(J0);if(H&&H!==D3(C))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sx{constructor(t,n,C){this.segmentGroup=t,this.processChildren=n,this.index=C}}function X3(a,t,n){if(a||(a=new co([],{})),0===a.segments.length&&a.hasChildren())return ey(a,t,n);const C=function AD(a,t,n){let C=0,H=t;const ne={match:!1,pathIndex:0,commandIndex:0};for(;H<a.segments.length;){if(C>=n.length)return ne;const ge=a.segments[H],Me=n[C];if(J0(Me))break;const ze=`${Me}`,rt=C<n.length-1?n[C+1]:null;if(H>0&&void 0===ze)break;if(ze&&rt&&"object"==typeof rt&&void 0===rt.outlets){if(!K3(ze,rt,ge))return ne;C+=2}else{if(!K3(ze,{},ge))return ne;C++}H++}return{match:!0,pathIndex:H,commandIndex:C}}(a,t,n),H=n.slice(C.commandIndex);if(C.match&&C.pathIndex<a.segments.length){const ne=new co(a.segments.slice(0,C.pathIndex),{});return ne.children[io]=new co(a.segments.slice(C.pathIndex),a.children),ey(ne,0,H)}return C.match&&0===H.length?new co(a.segments,{}):C.match&&!a.hasChildren()?lx(a,t,n):C.match?ey(a,0,H):lx(a,t,n)}function ey(a,t,n){if(0===n.length)return new co(a.segments,{});{const C=function MD(a){return J0(a[0])?a[0].outlets:{[io]:a}}(n),H={};return Ml(C,(ne,ge)=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(H[ge]=X3(a.children[ge],t,ne))}),Ml(a.children,(ne,ge)=>{void 0===C[ge]&&(H[ge]=ne)}),new co(a.segments,H)}}function lx(a,t,n){const C=a.segments.slice(0,t);let H=0;for(;H<n.length;){const ne=n[H];if(J0(ne)){const ze=kD(ne.outlets);return new co(C,ze)}if(0===H&&Qm(n[0])){C.push(new X0(a.segments[t].path,$3(n[0]))),H++;continue}const ge=J0(ne)?ne.outlets[io]:`${ne}`,Me=H<n.length-1?n[H+1]:null;ge&&Me&&Qm(Me)?(C.push(new X0(ge,$3(Me))),H+=2):(C.push(new X0(ge,{})),H++)}return new co(C,{})}function kD(a){const t={};return Ml(a,(n,C)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[C]=lx(new co([],{}),0,n))}),t}function $3(a){const t={};return Ml(a,(n,C)=>t[C]=`${n}`),t}function K3(a,t,n){return a==n.path&&zc(t,n.parameters)}class SD{constructor(t,n,C,H){this.routeReuseStrategy=t,this.futureState=n,this.currState=C,this.forwardEvent=H}activate(t){const n=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,C,t),ix(this.futureState.root),this.activateChildRoutes(n,C,t)}deactivateChildRoutes(t,n,C){const H=dp(n);t.children.forEach(ne=>{const ge=ne.value.outlet;this.deactivateRoutes(ne,H[ge],C),delete H[ge]}),Ml(H,(ne,ge)=>{this.deactivateRouteAndItsChildren(ne,C)})}deactivateRoutes(t,n,C){const H=t.value,ne=n?n.value:null;if(H===ne)if(H.component){const ge=C.getContext(H.outlet);ge&&this.deactivateChildRoutes(t,n,ge.children)}else this.deactivateChildRoutes(t,n,C);else ne&&this.deactivateRouteAndItsChildren(n,C)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const C=n.getContext(t.value.outlet),H=C&&t.value.component?C.children:n,ne=dp(t);for(const ge of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[ge],H);if(C&&C.outlet){const ge=C.outlet.detach(),Me=C.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:ge,route:t,contexts:Me})}}deactivateRouteAndOutlet(t,n){const C=n.getContext(t.value.outlet),H=C&&t.value.component?C.children:n,ne=dp(t);for(const ge of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[ge],H);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(t,n,C){const H=dp(n);t.children.forEach(ne=>{this.activateRoutes(ne,H[ne.value.outlet],C),this.forwardEvent(new ZC(ne.value.snapshot))}),t.children.length&&this.forwardEvent(new WC(t.value.snapshot))}activateRoutes(t,n,C){const H=t.value,ne=n?n.value:null;if(ix(H),H===ne)if(H.component){const ge=C.getOrCreateContext(H.outlet);this.activateChildRoutes(t,n,ge.children)}else this.activateChildRoutes(t,n,C);else if(H.component){const ge=C.getOrCreateContext(H.outlet);if(this.routeReuseStrategy.shouldAttach(H.snapshot)){const Me=this.routeReuseStrategy.retrieve(H.snapshot);this.routeReuseStrategy.store(H.snapshot,null),ge.children.onOutletReAttached(Me.contexts),ge.attachRef=Me.componentRef,ge.route=Me.route.value,ge.outlet&&ge.outlet.attach(Me.componentRef,Me.route.value),ix(Me.route.value),this.activateChildRoutes(t,null,ge.children)}else{const Me=function CD(a){for(let t=a.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(H.snapshot),ze=Me?Me.module.componentFactoryResolver:null;ge.attachRef=null,ge.route=H,ge.resolver=ze,ge.outlet&&ge.outlet.activateWith(H,ze),this.activateChildRoutes(t,null,ge.children)}}else this.activateChildRoutes(t,null,C)}}class ux{constructor(t,n){this.routes=t,this.module=n}}function $f(a){return"function"==typeof a}function jh(a){return a instanceof zh}const Q0=Symbol("INITIAL_VALUE");function eg(){return Zf(a=>function uC(...a){let t,n;return L(a[a.length-1])&&(n=a.pop()),"function"==typeof a[a.length-1]&&(t=a.pop()),1===a.length&&e(a[0])&&(a=a[0]),Ce(a,n).lift(new cC(t))}(a.map(t=>t.pipe($1(1),function xC(...a){const t=a[a.length-1];return L(t)?(a.pop(),n=>Z1(a,n,t)):n=>Z1(a,n)}(Q0)))).pipe(b3((t,n)=>{let C=!1;return n.reduce((H,ne,ge)=>H!==Q0?H:(ne===Q0&&(C=!0),C||!1!==ne&&ge!==n.length-1&&!jh(ne)?H:ne),t)},Q0),cp(t=>t!==Q0),I(t=>jh(t)?t:!0===t),$1(1)))}class RD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tg,this.attachRef=null}}class tg{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const C=this.getOrCreateContext(t);C.outlet=n,this.contexts.set(t,C)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new RD,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let cx=(()=>{class a{constructor(n,C,H,ne,ge){this.parentContexts=n,this.location=C,this.resolver=H,this.changeDetector=ge,this.activated=null,this._activatedRoute=null,this.activateEvents=new sa,this.deactivateEvents=new sa,this.attachEvents=new sa,this.detachEvents=new sa,this.name=ne||io,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,C){this.activated=n,this._activatedRoute=C,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,C){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const ge=(C=C||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),Me=this.parentContexts.getOrCreateContext(this.name).children,ze=new FD(n,Me,this.location.injector);this.activated=this.location.createComponent(ge,this.location.length,ze),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return a.\u0275fac=function(n){return new(n||a)(Jr(tg),Jr(lc),Jr(P0),function Wi(a){return function Cr(a,t){if("class"===t)return a.classes;if("style"===t)return a.styles;const n=a.attrs;if(n){const C=n.length;let H=0;for(;H<C;){const ne=n[H];if(ke(ne))break;if(0===ne)H+=2;else if("number"==typeof ne)for(H++;H<C&&"string"==typeof n[H];)H++;else{if(ne===t)return n[H+1];H+=2}}}return null}(aa(),a)}("name"),Jr(Am))},a.\u0275dir=or({type:a,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),a})();class FD{constructor(t,n,C){this.route=t,this.childContexts=n,this.parent=C}get(t,n){return t===pp?this.route:t===tg?this.childContexts:this.parent.get(t,n)}}let J3=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=Rn({type:a,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,C){1&n&&ml(0,"router-outlet")},directives:[cx],encapsulation:2}),a})();function Q3(a,t=""){for(let n=0;n<a.length;n++){const C=a[n];ND(C,zD(t,C))}}function ND(a,t){a.children&&Q3(a.children,t)}function zD(a,t){return t?a||t.path?a&&!t.path?`${a}/`:!a&&t.path?t.path:`${a}/${t.path}`:"":a}function fx(a){const t=a.children&&a.children.map(fx),n=t?Object.assign(Object.assign({},a),{children:t}):Object.assign({},a);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==io&&(n.component=J3),n}function Wu(a){return a.outlet||io}function e5(a,t){const n=a.filter(C=>Wu(C)===t);return n.push(...a.filter(C=>Wu(C)!==t)),n}const t5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ty(a,t,n){var C;if(""===t.path)return"full"===t.pathMatch&&(a.hasChildren()||n.length>0)?Object.assign({},t5):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const ne=(t.matcher||KC)(n,a,t);if(!ne)return Object.assign({},t5);const ge={};Ml(ne.posParams,(ze,rt)=>{ge[rt]=ze.path});const Me=ne.consumed.length>0?Object.assign(Object.assign({},ge),ne.consumed[ne.consumed.length-1].parameters):ge;return{matched:!0,consumedSegments:ne.consumed,remainingSegments:n.slice(ne.consumed.length),parameters:Me,positionalParamSegments:null!==(C=ne.posParams)&&void 0!==C?C:{}}}function ny(a,t,n,C,H="corrected"){if(n.length>0&&function VD(a,t,n){return n.some(C=>ry(a,t,C)&&Wu(C)!==io)}(a,n,C)){const ge=new co(t,function jD(a,t,n,C){const H={};H[io]=C,C._sourceSegment=a,C._segmentIndexShift=t.length;for(const ne of n)if(""===ne.path&&Wu(ne)!==io){const ge=new co([],{});ge._sourceSegment=a,ge._segmentIndexShift=t.length,H[Wu(ne)]=ge}return H}(a,t,C,new co(n,a.children)));return ge._sourceSegment=a,ge._segmentIndexShift=t.length,{segmentGroup:ge,slicedSegments:[]}}if(0===n.length&&function UD(a,t,n){return n.some(C=>ry(a,t,C))}(a,n,C)){const ge=new co(a.segments,function BD(a,t,n,C,H,ne){const ge={};for(const Me of C)if(ry(a,n,Me)&&!H[Wu(Me)]){const ze=new co([],{});ze._sourceSegment=a,ze._segmentIndexShift="legacy"===ne?a.segments.length:t.length,ge[Wu(Me)]=ze}return Object.assign(Object.assign({},H),ge)}(a,t,n,C,a.children,H));return ge._sourceSegment=a,ge._segmentIndexShift=t.length,{segmentGroup:ge,slicedSegments:n}}const ne=new co(a.segments,a.children);return ne._sourceSegment=a,ne._segmentIndexShift=t.length,{segmentGroup:ne,slicedSegments:n}}function ry(a,t,n){return(!(a.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function n5(a,t,n,C){return!!(Wu(a)===C||C!==io&&ry(t,n,a))&&("**"===a.path||ty(t,a,n).matched)}function r5(a,t,n){return 0===t.length&&!a.children[n]}class iy{constructor(t){this.segmentGroup=t||null}}class i5{constructor(t){this.urlTree=t}}function ng(a){return Gm(new iy(a))}function a5(a){return Gm(new i5(a))}function HD(a){return Gm(new Error(`Only absolute redirects can have named outlets. redirectTo: '${a}'`))}class WD{constructor(t,n,C,H,ne){this.configLoader=n,this.urlSerializer=C,this.urlTree=H,this.config=ne,this.allowRedirects=!0,this.ngModule=t.get(df)}apply(){const t=ny(this.urlTree.root,[],[],this.config).segmentGroup,n=new co(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,io).pipe(I(ne=>this.createUrlTree(hx(ne),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nh(ne=>{if(ne instanceof i5)return this.allowRedirects=!1,this.match(ne.urlTree);throw ne instanceof iy?this.noMatchError(ne):ne}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,io).pipe(I(H=>this.createUrlTree(hx(H),t.queryParams,t.fragment))).pipe(Nh(H=>{throw H instanceof iy?this.noMatchError(H):H}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,C){const H=t.segments.length>0?new co([],{[io]:t}):t;return new zh(H,n,C)}expandSegmentGroup(t,n,C,H){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(t,n,C).pipe(I(ne=>new co([],ne))):this.expandSegment(t,C,n,C.segments,H,!0)}expandChildren(t,n,C){const H=[];for(const ne of Object.keys(C.children))"primary"===ne?H.unshift(ne):H.push(ne);return he(H).pipe(Y0(ne=>{const ge=C.children[ne],Me=e5(n,ne);return this.expandSegmentGroup(t,Me,ge,ne).pipe(I(ze=>({segment:ze,outlet:ne})))}),b3((ne,ge)=>(ne[ge.outlet]=ge.segment,ne),{}),function PC(a,t){const n=arguments.length>=2;return C=>C.pipe(a?cp((H,ne)=>a(H,ne,C)):u,K1(1),n?w3(t):_3(()=>new Wm))}())}expandSegment(t,n,C,H,ne,ge){return he(C).pipe(Y0(Me=>this.expandSegmentAgainstRoute(t,n,C,Me,H,ne,ge).pipe(Nh(rt=>{if(rt instanceof iy)return Ha(null);throw rt}))),fp(Me=>!!Me),Nh((Me,ze)=>{if(Me instanceof Wm||"EmptyError"===Me.name)return r5(n,H,ne)?Ha(new co([],{})):ng(n);throw Me}))}expandSegmentAgainstRoute(t,n,C,H,ne,ge,Me){return n5(H,n,ne,ge)?void 0===H.redirectTo?this.matchSegmentAgainstRoute(t,n,H,ne,ge):Me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,C,H,ne,ge):ng(n):ng(n)}expandSegmentAgainstRouteUsingRedirect(t,n,C,H,ne,ge){return"**"===H.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,C,H,ge):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,C,H,ne,ge)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,C,H){const ne=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?a5(ne):this.lineralizeSegments(C,ne).pipe(Se(ge=>{const Me=new co(ge,{});return this.expandSegment(t,Me,n,ge,H,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,C,H,ne,ge){const{matched:Me,consumedSegments:ze,remainingSegments:rt,positionalParamSegments:Et}=ty(n,H,ne);if(!Me)return ng(n);const Kt=this.applyRedirectCommands(ze,H.redirectTo,Et);return H.redirectTo.startsWith("/")?a5(Kt):this.lineralizeSegments(H,Kt).pipe(Se(bn=>this.expandSegment(t,n,C,bn.concat(rt),ge,!1)))}matchSegmentAgainstRoute(t,n,C,H,ne){if("**"===C.path)return C.loadChildren?(C._loadedConfig?Ha(C._loadedConfig):this.configLoader.load(t.injector,C)).pipe(I(Kt=>(C._loadedConfig=Kt,new co(H,{})))):Ha(new co(H,{}));const{matched:ge,consumedSegments:Me,remainingSegments:ze}=ty(n,C,H);return ge?this.getChildConfig(t,C,H).pipe(Se(Et=>{const Kt=Et.module,bn=Et.routes,{segmentGroup:Sn,slicedSegments:Xn}=ny(n,Me,ze,bn),Lr=new co(Sn.segments,Sn.children);if(0===Xn.length&&Lr.hasChildren())return this.expandChildren(Kt,bn,Lr).pipe(I(Fi=>new co(Me,Fi)));if(0===bn.length&&0===Xn.length)return Ha(new co(Me,{}));const Kr=Wu(C)===ne;return this.expandSegment(Kt,Lr,bn,Xn,Kr?io:ne,!0).pipe(I(Nr=>new co(Me.concat(Nr.segments),Nr.children)))})):ng(n)}getChildConfig(t,n,C){return n.children?Ha(new ux(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?Ha(n._loadedConfig):this.runCanLoadGuards(t.injector,n,C).pipe(Se(H=>H?this.configLoader.load(t.injector,n).pipe(I(ne=>(n._loadedConfig=ne,ne))):function qD(a){return Gm(Q1(`Cannot load children because the guard of the route "path: '${a.path}'" returned false`))}(n))):Ha(new ux([],t))}runCanLoadGuards(t,n,C){const H=n.canLoad;if(!H||0===H.length)return Ha(!0);const ne=H.map(ge=>{const Me=t.get(ge);let ze;if(function LD(a){return a&&$f(a.canLoad)}(Me))ze=Me.canLoad(n,C);else{if(!$f(Me))throw new Error("Invalid CanLoad guard");ze=Me(n,C)}return Bc(ze)});return Ha(ne).pipe(eg(),xu(ge=>{if(!jh(ge))return;const Me=Q1(`Redirecting to "${this.urlSerializer.serialize(ge)}"`);throw Me.url=ge,Me}),I(ge=>!0===ge))}lineralizeSegments(t,n){let C=[],H=n.root;for(;;){if(C=C.concat(H.segments),0===H.numberOfChildren)return Ha(C);if(H.numberOfChildren>1||!H.children[io])return HD(t.redirectTo);H=H.children[io]}}applyRedirectCommands(t,n,C){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,C)}applyRedirectCreatreUrlTree(t,n,C,H){const ne=this.createSegmentGroup(t,n.root,C,H);return new zh(ne,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const C={};return Ml(t,(H,ne)=>{if("string"==typeof H&&H.startsWith(":")){const Me=H.substring(1);C[ne]=n[Me]}else C[ne]=H}),C}createSegmentGroup(t,n,C,H){const ne=this.createSegments(t,n.segments,C,H);let ge={};return Ml(n.children,(Me,ze)=>{ge[ze]=this.createSegmentGroup(t,Me,C,H)}),new co(ne,ge)}createSegments(t,n,C,H){return n.map(ne=>ne.path.startsWith(":")?this.findPosParam(t,ne,H):this.findOrReturn(ne,C))}findPosParam(t,n,C){const H=C[n.path.substring(1)];if(!H)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return H}findOrReturn(t,n){let C=0;for(const H of n){if(H.path===t.path)return n.splice(C),H;C++}return t}}function hx(a){const t={};for(const C of Object.keys(a.children)){const ne=hx(a.children[C]);(ne.segments.length>0||ne.hasChildren())&&(t[C]=ne)}return function YD(a){if(1===a.numberOfChildren&&a.children[io]){const t=a.children[io];return new co(a.segments.concat(t.segments),t.children)}return a}(new co(a.segments,t))}class o5{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ay{constructor(t,n){this.component=t,this.route=n}}function XD(a,t,n){const C=a._root;return rg(C,t?t._root:null,n,[C.value])}function oy(a,t,n){const C=function KD(a){if(!a)return null;for(let t=a.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(C?C.module.injector:n).get(a)}function rg(a,t,n,C,H={canDeactivateChecks:[],canActivateChecks:[]}){const ne=dp(t);return a.children.forEach(ge=>{(function JD(a,t,n,C,H={canDeactivateChecks:[],canActivateChecks:[]}){const ne=a.value,ge=t?t.value:null,Me=n?n.getContext(a.value.outlet):null;if(ge&&ne.routeConfig===ge.routeConfig){const ze=function QD(a,t,n){if("function"==typeof n)return n(a,t);switch(n){case"pathParamsChange":return!Bh(a.url,t.url);case"pathParamsOrQueryParamsChange":return!Bh(a.url,t.url)||!zc(a.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ax(a,t)||!zc(a.queryParams,t.queryParams);default:return!ax(a,t)}}(ge,ne,ne.routeConfig.runGuardsAndResolvers);ze?H.canActivateChecks.push(new o5(C)):(ne.data=ge.data,ne._resolvedData=ge._resolvedData),rg(a,t,ne.component?Me?Me.children:null:n,C,H),ze&&Me&&Me.outlet&&Me.outlet.isActivated&&H.canDeactivateChecks.push(new ay(Me.outlet.component,ge))}else ge&&ig(t,Me,H),H.canActivateChecks.push(new o5(C)),rg(a,null,ne.component?Me?Me.children:null:n,C,H)})(ge,ne[ge.value.outlet],n,C.concat([ge.value]),H),delete ne[ge.value.outlet]}),Ml(ne,(ge,Me)=>ig(ge,n.getContext(Me),H)),H}function ig(a,t,n){const C=dp(a),H=a.value;Ml(C,(ne,ge)=>{ig(ne,H.component?t?t.children.getContext(ge):null:t,n)}),n.canDeactivateChecks.push(new ay(H.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,H))}class l8{}function s5(a){return new A(t=>t.error(a))}class c8{constructor(t,n,C,H,ne,ge){this.rootComponentType=t,this.config=n,this.urlTree=C,this.url=H,this.paramsInheritanceStrategy=ne,this.relativeLinkResolution=ge}recognize(){const t=ny(this.urlTree.root,[],[],this.config.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,io);if(null===n)return null;const C=new Jm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},io,this.rootComponentType,null,this.urlTree.root,-1,{}),H=new vf(C,n),ne=new G3(this.url,H);return this.inheritParamsAndData(ne._root),ne}inheritParamsAndData(t){const n=t.value,C=q3(n,this.paramsInheritanceStrategy);n.params=Object.freeze(C.params),n.data=Object.freeze(C.data),t.children.forEach(H=>this.inheritParamsAndData(H))}processSegmentGroup(t,n,C){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,C)}processChildren(t,n){const C=[];for(const ne of Object.keys(n.children)){const ge=n.children[ne],Me=e5(t,ne),ze=this.processSegmentGroup(Me,ge,ne);if(null===ze)return null;C.push(...ze)}const H=l5(C);return function f8(a){a.sort((t,n)=>t.value.outlet===io?-1:n.value.outlet===io?1:t.value.outlet.localeCompare(n.value.outlet))}(H),H}processSegment(t,n,C,H){for(const ne of t){const ge=this.processSegmentAgainstRoute(ne,n,C,H);if(null!==ge)return ge}return r5(n,C,H)?[]:null}processSegmentAgainstRoute(t,n,C,H){if(t.redirectTo||!n5(t,n,C,H))return null;let ne,ge=[],Me=[];if("**"===t.path){const Sn=C.length>0?D3(C).parameters:{};ne=new Jm(C,Sn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,f5(t),Wu(t),t.component,t,u5(n),c5(n)+C.length,h5(t))}else{const Sn=ty(n,t,C);if(!Sn.matched)return null;ge=Sn.consumedSegments,Me=Sn.remainingSegments,ne=new Jm(ge,Sn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,f5(t),Wu(t),t.component,t,u5(n),c5(n)+ge.length,h5(t))}const ze=function h8(a){return a.children?a.children:a.loadChildren?a._loadedConfig.routes:[]}(t),{segmentGroup:rt,slicedSegments:Et}=ny(n,ge,Me,ze.filter(Sn=>void 0===Sn.redirectTo),this.relativeLinkResolution);if(0===Et.length&&rt.hasChildren()){const Sn=this.processChildren(ze,rt);return null===Sn?null:[new vf(ne,Sn)]}if(0===ze.length&&0===Et.length)return[new vf(ne,[])];const Kt=Wu(t)===H,bn=this.processSegment(ze,rt,Et,Kt?io:H);return null===bn?null:[new vf(ne,bn)]}}function d8(a){const t=a.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function l5(a){const t=[],n=new Set;for(const C of a){if(!d8(C)){t.push(C);continue}const H=t.find(ne=>C.value.routeConfig===ne.value.routeConfig);void 0!==H?(H.children.push(...C.children),n.add(H)):t.push(C)}for(const C of n){const H=l5(C.children);t.push(new vf(C.value,H))}return t.filter(C=>!n.has(C))}function u5(a){let t=a;for(;t._sourceSegment;)t=t._sourceSegment;return t}function c5(a){let t=a,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function f5(a){return a.data||{}}function h5(a){return a.resolve||{}}function d5(a){return[...Object.keys(a),...Object.getOwnPropertySymbols(a)]}function dx(a){return Zf(t=>{const n=a(t);return n?he(n).pipe(I(()=>t)):Ha(t)})}class _8 extends class b8{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const px=new ea("ROUTES");class p5{constructor(t,n,C,H){this.injector=t,this.compiler=n,this.onLoadStartListener=C,this.onLoadEndListener=H}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const H=this.loadModuleFactory(n.loadChildren).pipe(I(ne=>{this.onLoadEndListener&&this.onLoadEndListener(n);const ge=ne.create(t);return new ux(C3(ge.injector.get(px,void 0,yr.Self|yr.Optional)).map(fx),ge)}),Nh(ne=>{throw n._loader$=void 0,ne}));return n._loader$=new st(H,()=>new F).pipe(Ue()),n._loader$}loadModuleFactory(t){return Bc(t()).pipe(Se(n=>n instanceof E2?Ha(n):he(this.compiler.compileModuleAsync(n))))}}class T8{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function M8(a){throw a}function A8(a,t,n){return t.parse("/")}function g5(a,t){return Ha(null)}const k8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hl=(()=>{class a{constructor(n,C,H,ne,ge,Me,ze){this.rootComponentType=n,this.urlSerializer=C,this.rootContexts=H,this.location=ne,this.config=ze,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new F,this.errorHandler=M8,this.malformedUriErrorHandler=A8,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:g5,afterPreactivation:g5},this.urlHandlingStrategy=new T8,this.routeReuseStrategy=new _8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ge.get(df),this.console=ge.get(uw);const Kt=ge.get(ll);this.isNgZoneEnabled=Kt instanceof ll&&ll.isInAngularZone(),this.resetConfig(ze),this.currentUrlTree=function QC(){return new zh(new co([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new p5(ge,Me,bn=>this.triggerEvent(new M3(bn)),bn=>this.triggerEvent(new A3(bn))),this.routerState=H3(this.currentUrlTree,this.rootComponentType),this.transitions=new hc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const C=this.events;return n.pipe(cp(H=>0!==H.id),I(H=>Object.assign(Object.assign({},H),{extractedUrl:this.urlHandlingStrategy.extract(H.rawUrl)})),Zf(H=>{let ne=!1,ge=!1;return Ha(H).pipe(xu(Me=>{this.currentNavigation={id:Me.id,initialUrl:Me.currentRawUrl,extractedUrl:Me.extractedUrl,trigger:Me.source,extras:Me.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Zf(Me=>{const ze=this.browserUrlTree.toString(),rt=!this.navigated||Me.extractedUrl.toString()!==ze||ze!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||rt)&&this.urlHandlingStrategy.shouldProcessUrl(Me.rawUrl))return m5(Me.source)&&(this.browserUrlTree=Me.extractedUrl),Ha(Me).pipe(Zf(Kt=>{const bn=this.transitions.getValue();return C.next(new J1(Kt.id,this.serializeUrl(Kt.extractedUrl),Kt.source,Kt.restoredState)),bn!==this.transitions.getValue()?up:Promise.resolve(Kt)}),function ZD(a,t,n,C){return Zf(H=>function GD(a,t,n,C,H){return new WD(a,t,n,C,H).apply()}(a,t,n,H.extractedUrl,C).pipe(I(ne=>Object.assign(Object.assign({},H),{urlAfterRedirects:ne}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),xu(Kt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Kt.urlAfterRedirects})}),function p8(a,t,n,C,H){return Se(ne=>function u8(a,t,n,C,H="emptyOnly",ne="legacy"){try{const ge=new c8(a,t,n,C,H,ne).recognize();return null===ge?s5(new l8):Ha(ge)}catch(ge){return s5(ge)}}(a,t,ne.urlAfterRedirects,n(ne.urlAfterRedirects),C,H).pipe(I(ge=>Object.assign(Object.assign({},ne),{targetSnapshot:ge}))))}(this.rootComponentType,this.config,Kt=>this.serializeUrl(Kt),this.paramsInheritanceStrategy,this.relativeLinkResolution),xu(Kt=>{if("eager"===this.urlUpdateStrategy){if(!Kt.extras.skipLocationChange){const Sn=this.urlHandlingStrategy.merge(Kt.urlAfterRedirects,Kt.rawUrl);this.setBrowserUrl(Sn,Kt)}this.browserUrlTree=Kt.urlAfterRedirects}const bn=new jC(Kt.id,this.serializeUrl(Kt.extractedUrl),this.serializeUrl(Kt.urlAfterRedirects),Kt.targetSnapshot);C.next(bn)}));if(rt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:bn,extractedUrl:Sn,source:Xn,restoredState:Lr,extras:Kr}=Me,xi=new J1(bn,this.serializeUrl(Sn),Xn,Lr);C.next(xi);const Nr=H3(Sn,this.rootComponentType).snapshot;return Ha(Object.assign(Object.assign({},Me),{targetSnapshot:Nr,urlAfterRedirects:Sn,extras:Object.assign(Object.assign({},Kr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Me.rawUrl,Me.resolve(null),up}),dx(Me=>{const{targetSnapshot:ze,id:rt,extractedUrl:Et,rawUrl:Kt,extras:{skipLocationChange:bn,replaceUrl:Sn}}=Me;return this.hooks.beforePreactivation(ze,{navigationId:rt,appliedUrlTree:Et,rawUrlTree:Kt,skipLocationChange:!!bn,replaceUrl:!!Sn})}),xu(Me=>{const ze=new VC(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(ze)}),I(Me=>Object.assign(Object.assign({},Me),{guards:XD(Me.targetSnapshot,Me.currentSnapshot,this.rootContexts)})),function e8(a,t){return Se(n=>{const{targetSnapshot:C,currentSnapshot:H,guards:{canActivateChecks:ne,canDeactivateChecks:ge}}=n;return 0===ge.length&&0===ne.length?Ha(Object.assign(Object.assign({},n),{guardsResult:!0})):function t8(a,t,n,C){return he(a).pipe(Se(H=>function s8(a,t,n,C,H){const ne=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return ne&&0!==ne.length?Ha(ne.map(Me=>{const ze=oy(Me,t,H);let rt;if(function OD(a){return a&&$f(a.canDeactivate)}(ze))rt=Bc(ze.canDeactivate(a,t,n,C));else{if(!$f(ze))throw new Error("Invalid CanDeactivate guard");rt=Bc(ze(a,t,n,C))}return rt.pipe(fp())})).pipe(eg()):Ha(!0)}(H.component,H.route,n,t,C)),fp(H=>!0!==H,!0))}(ge,C,H,a).pipe(Se(Me=>Me&&function DD(a){return"boolean"==typeof a}(Me)?function n8(a,t,n,C){return he(t).pipe(Y0(H=>Z1(function i8(a,t){return null!==a&&t&&t(new GC(a)),Ha(!0)}(H.route.parent,C),function r8(a,t){return null!==a&&t&&t(new YC(a)),Ha(!0)}(H.route,C),function o8(a,t,n){const C=t[t.length-1],ne=t.slice(0,t.length-1).reverse().map(ge=>function $D(a){const t=a.routeConfig?a.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:a,guards:t}:null}(ge)).filter(ge=>null!==ge).map(ge=>v3(()=>Ha(ge.guards.map(ze=>{const rt=oy(ze,ge.node,n);let Et;if(function PD(a){return a&&$f(a.canActivateChild)}(rt))Et=Bc(rt.canActivateChild(C,a));else{if(!$f(rt))throw new Error("Invalid CanActivateChild guard");Et=Bc(rt(C,a))}return Et.pipe(fp())})).pipe(eg())));return Ha(ne).pipe(eg())}(a,H.path,n),function a8(a,t,n){const C=t.routeConfig?t.routeConfig.canActivate:null;if(!C||0===C.length)return Ha(!0);const H=C.map(ne=>v3(()=>{const ge=oy(ne,t,n);let Me;if(function ID(a){return a&&$f(a.canActivate)}(ge))Me=Bc(ge.canActivate(t,a));else{if(!$f(ge))throw new Error("Invalid CanActivate guard");Me=Bc(ge(t,a))}return Me.pipe(fp())}));return Ha(H).pipe(eg())}(a,H.route,n))),fp(H=>!0!==H,!0))}(C,ne,a,t):Ha(Me)),I(Me=>Object.assign(Object.assign({},n),{guardsResult:Me})))})}(this.ngModule.injector,Me=>this.triggerEvent(Me)),xu(Me=>{if(jh(Me.guardsResult)){const rt=Q1(`Redirecting to "${this.serializeUrl(Me.guardsResult)}"`);throw rt.url=Me.guardsResult,rt}const ze=new UC(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot,!!Me.guardsResult);this.triggerEvent(ze)}),cp(Me=>!!Me.guardsResult||(this.restoreHistory(Me),this.cancelNavigationTransition(Me,""),!1)),dx(Me=>{if(Me.guards.canActivateChecks.length)return Ha(Me).pipe(xu(ze=>{const rt=new HC(ze.id,this.serializeUrl(ze.extractedUrl),this.serializeUrl(ze.urlAfterRedirects),ze.targetSnapshot);this.triggerEvent(rt)}),Zf(ze=>{let rt=!1;return Ha(ze).pipe(function g8(a,t){return Se(n=>{const{targetSnapshot:C,guards:{canActivateChecks:H}}=n;if(!H.length)return Ha(n);let ne=0;return he(H).pipe(Y0(ge=>function m8(a,t,n,C){return function y8(a,t,n,C){const H=d5(a);if(0===H.length)return Ha({});const ne={};return he(H).pipe(Se(ge=>function v8(a,t,n,C){const H=oy(a,t,C);return Bc(H.resolve?H.resolve(t,n):H(t,n))}(a[ge],t,n,C).pipe(xu(Me=>{ne[ge]=Me}))),K1(1),Se(()=>d5(ne).length===H.length?Ha(ne):up))}(a._resolve,a,t,C).pipe(I(ne=>(a._resolvedData=ne,a.data=Object.assign(Object.assign({},a.data),q3(a,n).resolve),null)))}(ge.route,C,a,t)),xu(()=>ne++),K1(1),Se(ge=>ne===H.length?Ha(n):up))})}(this.paramsInheritanceStrategy,this.ngModule.injector),xu({next:()=>rt=!0,complete:()=>{rt||(this.restoreHistory(ze),this.cancelNavigationTransition(ze,"At least one route resolver didn't emit any value."))}}))}),xu(ze=>{const rt=new qC(ze.id,this.serializeUrl(ze.extractedUrl),this.serializeUrl(ze.urlAfterRedirects),ze.targetSnapshot);this.triggerEvent(rt)}))}),dx(Me=>{const{targetSnapshot:ze,id:rt,extractedUrl:Et,rawUrl:Kt,extras:{skipLocationChange:bn,replaceUrl:Sn}}=Me;return this.hooks.afterPreactivation(ze,{navigationId:rt,appliedUrlTree:Et,rawUrlTree:Kt,skipLocationChange:!!bn,replaceUrl:!!Sn})}),I(Me=>{const ze=function yD(a,t,n){const C=K0(a,t._root,n?n._root:void 0);return new U3(C,t)}(this.routeReuseStrategy,Me.targetSnapshot,Me.currentRouterState);return Object.assign(Object.assign({},Me),{targetRouterState:ze})}),xu(Me=>{this.currentUrlTree=Me.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Me.urlAfterRedirects,Me.rawUrl),this.routerState=Me.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Me.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Me),this.browserUrlTree=Me.urlAfterRedirects)}),((a,t,n)=>I(C=>(new SD(t,C.targetRouterState,C.currentRouterState,n).activate(a),C)))(this.rootContexts,this.routeReuseStrategy,Me=>this.triggerEvent(Me)),xu({next(){ne=!0},complete(){ne=!0}}),function FC(a){return t=>t.lift(new NC(a))}(()=>{var Me;ne||ge||this.cancelNavigationTransition(H,`Navigation ID ${H.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Me=this.currentNavigation)||void 0===Me?void 0:Me.id)===H.id&&(this.currentNavigation=null)}),Nh(Me=>{if(ge=!0,function $C(a){return a&&a[E3]}(Me)){const ze=jh(Me.url);ze||(this.navigated=!0,this.restoreHistory(H,!0));const rt=new T3(H.id,this.serializeUrl(H.extractedUrl),Me.message);C.next(rt),ze?setTimeout(()=>{const Et=this.urlHandlingStrategy.merge(Me.url,this.rawUrlTree),Kt={skipLocationChange:H.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||m5(H.source)};this.scheduleNavigation(Et,"imperative",null,Kt,{resolve:H.resolve,reject:H.reject,promise:H.promise})},0):H.resolve(!1)}else{this.restoreHistory(H,!0);const ze=new BC(H.id,this.serializeUrl(H.extractedUrl),Me);C.next(ze);try{H.resolve(this.errorHandler(Me))}catch(rt){H.reject(rt)}}return up}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const C="popstate"===n.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{var H;const ne={replaceUrl:!0},ge=(null===(H=n.state)||void 0===H?void 0:H.navigationId)?n.state:null;if(ge){const ze=Object.assign({},ge);delete ze.navigationId,delete ze.\u0275routerPageId,0!==Object.keys(ze).length&&(ne.state=ze)}const Me=this.parseUrl(n.url);this.scheduleNavigation(Me,C,ge,ne)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){Q3(n),this.config=n.map(fx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,C={}){const{relativeTo:H,queryParams:ne,fragment:ge,queryParamsHandling:Me,preserveFragment:ze}=C,rt=H||this.routerState.root,Et=ze?this.currentUrlTree.fragment:ge;let Kt=null;switch(Me){case"merge":Kt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ne);break;case"preserve":Kt=this.currentUrlTree.queryParams;break;default:Kt=ne||null}return null!==Kt&&(Kt=this.removeEmptyProps(Kt)),function bD(a,t,n,C,H){if(0===n.length)return ox(t.root,t.root,t.root,C,H);const ne=function _D(a){if("string"==typeof a[0]&&1===a.length&&"/"===a[0])return new Z3(!0,0,a);let t=0,n=!1;const C=a.reduce((H,ne,ge)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const Me={};return Ml(ne.outlets,(ze,rt)=>{Me[rt]="string"==typeof ze?ze.split("/"):ze}),[...H,{outlets:Me}]}if(ne.segmentPath)return[...H,ne.segmentPath]}return"string"!=typeof ne?[...H,ne]:0===ge?(ne.split("/").forEach((Me,ze)=>{0==ze&&"."===Me||(0==ze&&""===Me?n=!0:".."===Me?t++:""!=Me&&H.push(Me))}),H):[...H,ne]},[]);return new Z3(n,t,C)}(n);if(ne.toRoot())return ox(t.root,t.root,new co([],{}),C,H);const ge=function wD(a,t,n){if(a.isAbsolute)return new sx(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const ne=n.snapshot._urlSegment;return new sx(ne,ne===t.root,0)}const C=Qm(a.commands[0])?0:1;return function TD(a,t,n){let C=a,H=t,ne=n;for(;ne>H;){if(ne-=H,C=C.parent,!C)throw new Error("Invalid number of '../'");H=C.segments.length}return new sx(C,!1,H-ne)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+C,a.numberOfDoubleDots)}(ne,t,a),Me=ge.processChildren?ey(ge.segmentGroup,ge.index,ne.commands):X3(ge.segmentGroup,ge.index,ne.commands);return ox(t.root,ge.segmentGroup,Me,C,H)}(rt,this.currentUrlTree,n,Kt,null!=Et?Et:null)}navigateByUrl(n,C={skipLocationChange:!1}){const H=jh(n)?n:this.parseUrl(n),ne=this.urlHandlingStrategy.merge(H,this.rawUrlTree);return this.scheduleNavigation(ne,"imperative",null,C)}navigate(n,C={skipLocationChange:!1}){return function S8(a){for(let t=0;t<a.length;t++){const n=a[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,C),C)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let C;try{C=this.urlSerializer.parse(n)}catch(H){C=this.malformedUriErrorHandler(H,this.urlSerializer,n)}return C}isActive(n,C){let H;if(H=!0===C?Object.assign({},k8):!1===C?Object.assign({},E8):C,jh(n))return I3(this.currentUrlTree,n,H);const ne=this.parseUrl(n);return I3(this.currentUrlTree,ne,H)}removeEmptyProps(n){return Object.keys(n).reduce((C,H)=>{const ne=n[H];return null!=ne&&(C[H]=ne),C},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Z0(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,C,H,ne,ge){var Me,ze;if(this.disposed)return Promise.resolve(!1);let rt,Et,Kt;ge?(rt=ge.resolve,Et=ge.reject,Kt=ge.promise):Kt=new Promise((Xn,Lr)=>{rt=Xn,Et=Lr});const bn=++this.navigationId;let Sn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(H=this.location.getState()),Sn=H&&H.\u0275routerPageId?H.\u0275routerPageId:ne.replaceUrl||ne.skipLocationChange?null!==(Me=this.browserPageId)&&void 0!==Me?Me:0:(null!==(ze=this.browserPageId)&&void 0!==ze?ze:0)+1):Sn=0,this.setTransition({id:bn,targetPageId:Sn,source:C,restoredState:H,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:ne,resolve:rt,reject:Et,promise:Kt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Kt.catch(Xn=>Promise.reject(Xn))}setBrowserUrl(n,C){const H=this.urlSerializer.serialize(n),ne=Object.assign(Object.assign({},C.extras.state),this.generateNgRouterState(C.id,C.targetPageId));this.location.isCurrentPathEqualTo(H)||C.extras.replaceUrl?this.location.replaceState(H,"",ne):this.location.go(H,"",ne)}restoreHistory(n,C=!1){var H,ne;if("computed"===this.canceledNavigationResolution){const ge=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(H=this.currentNavigation)||void 0===H?void 0:H.finalUrl)||0===ge?this.currentUrlTree===(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)&&0===ge&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ge)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,C){const H=new T3(n.id,this.serializeUrl(n.extractedUrl),C);this.triggerEvent(H),n.resolve(!1)}generateNgRouterState(n,C){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:C}:{navigationId:n}}}return a.\u0275fac=function(n){Lv()},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();function m5(a){return"imperative"!==a}class y5{}class v5{preload(t,n){return Ha(null)}}let x5=(()=>{class a{constructor(n,C,H,ne){this.router=n,this.injector=H,this.preloadingStrategy=ne,this.loader=new p5(H,C,ze=>n.triggerEvent(new M3(ze)),ze=>n.triggerEvent(new A3(ze)))}setUpPreloading(){this.subscription=this.router.events.pipe(cp(n=>n instanceof Z0),Y0(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(df);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,C){const H=[];for(const ne of C)if(ne.loadChildren&&!ne.canLoad&&ne._loadedConfig){const ge=ne._loadedConfig;H.push(this.processRoutes(ge.module,ge.routes))}else ne.loadChildren&&!ne.canLoad?H.push(this.preloadConfig(n,ne)):ne.children&&H.push(this.processRoutes(n,ne.children));return he(H).pipe(Ie(),I(ne=>{}))}preloadConfig(n,C){return this.preloadingStrategy.preload(C,()=>(C._loadedConfig?Ha(C._loadedConfig):this.loader.load(n.injector,C)).pipe(Se(ne=>(C._loadedConfig=ne,this.processRoutes(ne.module,ne.routes)))))}}return a.\u0275fac=function(n){return new(n||a)(ta(Hl),ta(cw),ta(Nl),ta(y5))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})(),yx=(()=>{class a{constructor(n,C,H={}){this.router=n,this.viewportScroller=C,this.options=H,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},H.scrollPositionRestoration=H.scrollPositionRestoration||"disabled",H.anchorScrolling=H.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof J1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Z0&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof k3&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,C){this.router.triggerEvent(new k3(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return a.\u0275fac=function(n){Lv()},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();const Vh=new ea("ROUTER_CONFIGURATION"),b5=new ea("ROUTER_FORROOT_GUARD"),I8=[k1,{provide:F3,useClass:N3},{provide:Hl,useFactory:function z8(a,t,n,C,H,ne,ge={},Me,ze){const rt=new Hl(null,a,t,n,C,H,C3(ne));return Me&&(rt.urlHandlingStrategy=Me),ze&&(rt.routeReuseStrategy=ze),function B8(a,t){a.errorHandler&&(t.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(t.malformedUriErrorHandler=a.malformedUriErrorHandler),a.onSameUrlNavigation&&(t.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.relativeLinkResolution&&(t.relativeLinkResolution=a.relativeLinkResolution),a.urlUpdateStrategy&&(t.urlUpdateStrategy=a.urlUpdateStrategy),a.canceledNavigationResolution&&(t.canceledNavigationResolution=a.canceledNavigationResolution)}(ge,rt),ge.enableTracing&&rt.events.subscribe(Et=>{var Kt,bn;null===(Kt=console.group)||void 0===Kt||Kt.call(console,`Router Event: ${Et.constructor.name}`),console.log(Et.toString()),console.log(Et),null===(bn=console.groupEnd)||void 0===bn||bn.call(console)}),rt},deps:[F3,tg,k1,Nl,cw,px,Vh,[class w8{},new Qu],[class x8{},new Qu]]},tg,{provide:pp,useFactory:function j8(a){return a.routerState.root},deps:[Hl]},x5,v5,class L8{preload(t,n){return n().pipe(Nh(()=>Ha(null)))}},{provide:Vh,useValue:{enableTracing:!1}}];function P8(){return new gw("Router",Hl)}let O8=(()=>{class a{constructor(n,C){}static forRoot(n,C){return{ngModule:a,providers:[I8,_5(n),{provide:b5,useFactory:N8,deps:[[Hl,new Qu,new vc]]},{provide:Vh,useValue:C||{}},{provide:sp,useFactory:F8,deps:[Fh,[new Zc(A1),new Qu],Vh]},{provide:yx,useFactory:R8,deps:[Hl,v6,Vh]},{provide:y5,useExisting:C&&C.preloadingStrategy?C.preloadingStrategy:v5},{provide:gw,multi:!0,useFactory:P8},[vx,{provide:u1,multi:!0,useFactory:V8,deps:[vx]},{provide:w5,useFactory:U8,deps:[vx]},{provide:lw,multi:!0,useExisting:w5}]]}}static forChild(n){return{ngModule:a,providers:[_5(n)]}}}return a.\u0275fac=function(n){return new(n||a)(ta(b5,8),ta(Hl,8))},a.\u0275mod=vr({type:a}),a.\u0275inj=An({}),a})();function R8(a,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new yx(a,t,n)}function F8(a,t,n={}){return n.useHash?new eS(a,t):new Rw(a,t)}function N8(a){return"guarded"}function _5(a){return[{provide:Ko,multi:!0,useValue:a},{provide:px,multi:!0,useValue:a}]}let vx=(()=>{class a{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new F}appInitializer(){return this.injector.get(KE,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let C=null;const H=new Promise(Me=>C=Me),ne=this.injector.get(Hl),ge=this.injector.get(Vh);return"disabled"===ge.initialNavigation?(ne.setUpLocationChangeListener(),C(!0)):"enabled"===ge.initialNavigation||"enabledBlocking"===ge.initialNavigation?(ne.hooks.afterPreactivation=()=>this.initNavigation?Ha(null):(this.initNavigation=!0,C(!0),this.resultOfPreactivationDone),ne.initialNavigation()):C(!0),H})}bootstrapListener(n){const C=this.injector.get(Vh),H=this.injector.get(x5),ne=this.injector.get(yx),ge=this.injector.get(Hl),Me=this.injector.get(v1);n===Me.components[0]&&(("enabledNonBlocking"===C.initialNavigation||void 0===C.initialNavigation)&&ge.initialNavigation(),H.setUpPreloading(),ne.init(),ge.resetRootComponentType(Me.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return a.\u0275fac=function(n){return new(n||a)(ta(Nl))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();function V8(a){return a.appInitializer.bind(a)}function U8(a){return a.bootstrapListener.bind(a)}const w5=new ea("Router Initializer");let T5=(()=>{class a{constructor(n,C){this._renderer=n,this._elementRef=C,this.onChange=H=>{},this.onTouched=()=>{}}setProperty(n,C){this._renderer.setProperty(this._elementRef.nativeElement,n,C)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return a.\u0275fac=function(n){return new(n||a)(Jr(hf),Jr(yu))},a.\u0275dir=or({type:a}),a})(),Uh=(()=>{class a extends T5{}return a.\u0275fac=function(){let t;return function(C){return(t||(t=Ii(a)))(C||a)}}(),a.\u0275dir=or({type:a,features:[qo]}),a})();const jc=new ea("NgValueAccessor");let fT=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({}),a})();const SL={provide:jc,useExisting:en(()=>Bx),multi:!0};function vT(a,t){return null==a?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${a}: ${t}`.slice(0,50))}let Bx=(()=>{class a extends Uh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const H=vT(this._getOptionId(n),n);this.setProperty("value",H)}registerOnChange(n){this.onChange=C=>{this.value=this._getOptionValue(C),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const C of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(C),n))return C;return null}_getOptionValue(n){const C=function CL(a){return a.split(":")[0]}(n);return this._optionMap.has(C)?this._optionMap.get(C):n}}return a.\u0275fac=function(){let t;return function(C){return(t||(t=Ii(a)))(C||a)}}(),a.\u0275dir=or({type:a,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,C){1&n&&ms("change",function(ne){return C.onChange(ne.target.value)})("blur",function(){return C.onTouched()})},inputs:{compareWith:"compareWith"},features:[us([SL]),qo]}),a})(),yy=(()=>{class a{constructor(n,C,H){this._element=n,this._renderer=C,this._select=H,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(vT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return a.\u0275fac=function(n){return new(n||a)(Jr(yu),Jr(hf),Jr(Bx,9))},a.\u0275dir=or({type:a,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),a})();const DL={provide:jc,useExisting:en(()=>jx),multi:!0};function xT(a,t){return null==a?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${a}: ${t}`.slice(0,50))}let jx=(()=>{class a extends Uh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let C;if(this.value=n,Array.isArray(n)){const H=n.map(ne=>this._getOptionId(ne));C=(ne,ge)=>{ne._setSelected(H.indexOf(ge.toString())>-1)}}else C=(H,ne)=>{H._setSelected(!1)};this._optionMap.forEach(C)}registerOnChange(n){this.onChange=C=>{const H=[],ne=C.selectedOptions;if(void 0!==ne){const ge=ne;for(let Me=0;Me<ge.length;Me++){const rt=this._getOptionValue(ge[Me].value);H.push(rt)}}else{const ge=C.options;for(let Me=0;Me<ge.length;Me++){const ze=ge[Me];if(ze.selected){const rt=this._getOptionValue(ze.value);H.push(rt)}}}this.value=H,n(H)}}_registerOption(n){const C=(this._idCounter++).toString();return this._optionMap.set(C,n),C}_getOptionId(n){for(const C of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(C)._value,n))return C;return null}_getOptionValue(n){const C=function LL(a){return a.split(":")[0]}(n);return this._optionMap.has(C)?this._optionMap.get(C)._value:n}}return a.\u0275fac=function(){let t;return function(C){return(t||(t=Ii(a)))(C||a)}}(),a.\u0275dir=or({type:a,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,C){1&n&&ms("change",function(ne){return C.onChange(ne.target)})("blur",function(){return C.onTouched()})},inputs:{compareWith:"compareWith"},features:[us([DL]),qo]}),a})(),vy=(()=>{class a{constructor(n,C,H){this._element=n,this._renderer=C,this._select=H,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(xT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(xT(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return a.\u0275fac=function(n){return new(n||a)(Jr(yu),Jr(hf),Jr(jx,9))},a.\u0275dir=or({type:a,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),a})(),VL=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({imports:[[fT]]}),a})(),UL=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({imports:[VL]}),a})(),HL=(()=>{class a{constructor(){this.isOpen=!1}toggleOpen(){this.isOpen=!this.isOpen}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275dir=or({type:a,selectors:[["","appDropdown",""]],hostVars:2,hostBindings:function(n,C){1&n&&ms("click",function(){return C.toggleOpen()}),2&n&&E0("open",C.isOpen)}}),a})();const qL=["plantSelect"];function GL(a,t){if(1&a&&(na(0,"option"),Ua(1),fa()),2&a){const n=t.$implicit;ui(1),zl(n.name)}}let WL=(()=>{class a{constructor(n,C,H){this.router=n,this.dataService=C,this.colorselect=H,this.plant=this.dataService.plants,this.selected=this.dataService.selection}onPlantSelected(n){this.dataService.selectedPlants(n),this.dataService.selectedPlant.next(n),this.dataService.analyteSelected.next("NOx")}onColorSelect(n){this.colorselect.colorSelected.next(n),this.colorselect.onColorSelect(n)}onNavigate(n){this.router.navigate(["/"])}ngOnInit(){this.plantSubscription=this.dataService.selectedPlant.subscribe(n=>{this.plantSelect.nativeElement.value=n,this.selected=n})}ngOnDestroy(){}}return a.\u0275fac=function(n){return new(n||a)(Jr(Hl),Jr(Yf),Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-header"]],viewQuery:function(n,C){if(1&n&&vu(qL,5),2&n){let H;jl(H=Vl())&&(C.plantSelect=H.first)}},decls:22,vars:2,consts:[[1,"nav"],[1,"nav-item","home",3,"click"],[1,"nav-item","color"],["name","colorSelect","id","colorSelect",3,"change"],["colorSelect",""],["value","mainmode"],["value","darkmode"],["value","rainbowmode"],[1,"nav-item","selected"],["appDropdown","",1,"nav-item","pull-right","info"],["name","plantSelect","id","plantSelect",3,"change"],["plantSelect",""],[4,"ngFor","ngForOf"]],template:function(n,C){if(1&n){const H=hm();na(0,"ul",0)(1,"li",1),ms("click",function(ge){return C.onNavigate(ge)}),Ua(2,"Home"),fa(),na(3,"li",2)(4,"h4"),Ua(5,"Select a color scheme:"),fa(),na(6,"select",3,4),ms("change",function(){Qi(H);const ge=A0(7);return C.onColorSelect(ge.value)}),na(8,"option",5),Ua(9,"Main"),fa(),na(10,"option",6),Ua(11,"Dark"),fa(),na(12,"option",7),Ua(13,"Rainbow"),fa()()(),na(14,"li",8),Ua(15),fa(),na(16,"li",9),Ua(17," Select Plant: "),ml(18,"br"),na(19,"select",10,11),ms("change",function(){Qi(H);const ge=A0(20);return C.onPlantSelected(ge.value)}),cm(21,GL,2,1,"option",12),fa()()()}2&n&&(ui(15),zl(C.selected),ui(6),ff("ngForOf",C.plant))},directives:[yy,vy,HL,zm],styles:[".btn[_ngcontent-%COMP%]{background-color:var(--bgcolor)}.selected[_ngcontent-%COMP%]{color:var(--bgcolor);margin:20px auto -30px;text-align:center;font-family:Nunito,sans-serif;font-size:42px;font-weight:bolder;height:46px}#plantSelect[_ngcontent-%COMP%]{margin:0 5px 5px 0;font-size:20px;padding:5px 10px;color:#000;background-color:var(--bgcolor);cursor:pointer}.info[_ngcontent-%COMP%]{color:var(--bgcolor)}.home[_ngcontent-%COMP%]{position:absolute;bottom:0%;z-index:3;left:10px;color:#fff;font-size:18px;text-decoration:underline;cursor:pointer}.color[_ngcontent-%COMP%]{position:absolute;z-index:3;left:10px;margin-bottom:20px}h4[_ngcontent-%COMP%]{margin-bottom:10px;color:#fff}ul[_ngcontent-%COMP%]{height:120px}#colorSelect[_ngcontent-%COMP%]{padding:5px 15px}"]}),a})();const YL=["container"];let ZL=(()=>{class a{constructor(n){this.colorSelect=n,this.title="Emissions-Dashboard",this.bgcolor=Fa.colormode.appbgcolor}ngAfterViewInit(){this.container.nativeElement.style.backgroundColor=Fa.colormode.appbgcolor,this.globalcolors=this.colorSelect.colorSelected.subscribe(()=>{setTimeout(()=>{this.container.nativeElement.style.backgroundColor=Fa.colormode.appbgcolor},0)})}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)(Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-root"]],viewQuery:function(n,C){if(1&n&&vu(YL,5),2&n){let H;jl(H=Vl())&&(C.container=H.first)}},features:[us([Yf,Fa])],decls:6,vars:0,consts:[[1,"container"],["container",""],["id","header",1,"row"],["id","display",1,"row"]],template:function(n,C){1&n&&(na(0,"div",0,1)(2,"div",2),ml(3,"app-header"),fa(),na(4,"div",3),ml(5,"router-outlet"),fa()())},directives:[WL,cx],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;width:90%;height:-moz-fit-content;height:fit-content;border:solid black 7px;padding-bottom:100px}#display[_ngcontent-%COMP%]{margin:20px 40px 0}#header[_ngcontent-%COMP%]{background-color:#20262c;border-bottom:solid 2px black;position:relative;box-shadow:1px 1px 5px 3px #000}"]}),a})();var XL=oe(102);class CT{}const xf="*";function ug(a,t){return{type:7,name:a,definitions:t,options:{}}}function qh(a,t=null){return{type:4,styles:t,timings:a}}function DT(a,t=null){return{type:2,steps:a,options:t}}function cl(a){return{type:6,styles:a,offset:null}}function yp(a,t,n){return{type:0,name:a,styles:t,options:n}}function LT(a){return{type:5,steps:a}}function Gh(a,t,n=null){return{type:1,expr:a,animation:t,options:n}}function IT(a){Promise.resolve(null).then(a)}class cg{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){IT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(C=>C()),n.length=0}}class PT{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,C=0,H=0;const ne=this.players.length;0==ne?IT(()=>this._onFinish()):this.players.forEach(ge=>{ge.onDone(()=>{++n==ne&&this._onFinish()}),ge.onDestroy(()=>{++C==ne&&this._onDestroy()}),ge.onStart(()=>{++H==ne&&this._onStart()})}),this.totalTime=this.players.reduce((ge,Me)=>Math.max(ge,Me.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(C=>{const H=C.totalTime?Math.min(1,n/C.totalTime):1;C.setPosition(H)})}getPosition(){const t=this.players.reduce((n,C)=>null===n||C.totalTime>n.totalTime?C:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(C=>C()),n.length=0}}const fo=!1;function OT(a){return new gt(3e3,fo)}function DI(){return"undefined"!=typeof window&&void 0!==window.document}function Hx(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function eh(a){switch(a.length){case 0:return new cg;case 1:return a[0];default:return new PT(a)}}function RT(a,t,n,C,H={},ne={}){const ge=[],Me=[];let ze=-1,rt=null;if(C.forEach(Et=>{const Kt=Et.offset,bn=Kt==ze,Sn=bn&&rt||{};Object.keys(Et).forEach(Xn=>{let Lr=Xn,Kr=Et[Xn];if("offset"!==Xn)switch(Lr=t.normalizePropertyName(Lr,ge),Kr){case"!":Kr=H[Xn];break;case xf:Kr=ne[Xn];break;default:Kr=t.normalizeStyleValue(Xn,Lr,Kr,ge)}Sn[Lr]=Kr}),bn||Me.push(Sn),rt=Sn,ze=Kt}),ge.length)throw function xI(a){return new gt(3502,fo)}();return Me}function qx(a,t,n,C){switch(t){case"start":a.onStart(()=>C(n&&Gx(n,"start",a)));break;case"done":a.onDone(()=>C(n&&Gx(n,"done",a)));break;case"destroy":a.onDestroy(()=>C(n&&Gx(n,"destroy",a)))}}function Gx(a,t,n){const C=n.totalTime,ne=Wx(a.element,a.triggerName,a.fromState,a.toState,t||a.phaseName,null==C?a.totalTime:C,!!n.disabled),ge=a._data;return null!=ge&&(ne._data=ge),ne}function Wx(a,t,n,C,H="",ne=0,ge){return{element:a,triggerName:t,fromState:n,toState:C,phaseName:H,totalTime:ne,disabled:!!ge}}function bu(a,t,n){let C;return a instanceof Map?(C=a.get(t),C||a.set(t,C=n)):(C=a[t],C||(C=a[t]=n)),C}function FT(a){const t=a.indexOf(":");return[a.substring(1,t),a.substr(t+1)]}let Yx=(a,t)=>!1,NT=(a,t,n)=>[],zT=null;function Zx(a){const t=a.parentNode||a.host;return t===zT?null:t}(Hx()||"undefined"!=typeof Element)&&(DI()?(zT=(()=>document.documentElement)(),Yx=(a,t)=>{for(;t;){if(t===a)return!0;t=Zx(t)}return!1}):Yx=(a,t)=>a.contains(t),NT=(a,t,n)=>{if(n)return Array.from(a.querySelectorAll(t));const C=a.querySelector(t);return C?[C]:[]});let Wh=null,BT=!1;function jT(a){Wh||(Wh=function II(){return"undefined"!=typeof document?document.body:null}()||{},BT=!!Wh.style&&"WebkitAppearance"in Wh.style);let t=!0;return Wh.style&&!function LI(a){return"ebkit"==a.substring(1,6)}(a)&&(t=a in Wh.style,!t&&BT&&(t="Webkit"+a.charAt(0).toUpperCase()+a.substr(1)in Wh.style)),t}const VT=Yx,UT=NT;let HT=(()=>{class a{validateStyleProperty(n){return jT(n)}matchesElement(n,C){return!1}containsElement(n,C){return VT(n,C)}getParentElement(n){return Zx(n)}query(n,C,H){return UT(n,C,H)}computeStyle(n,C,H){return H||""}animate(n,C,H,ne,ge,Me=[],ze){return new cg(H,ne)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})(),Xx=(()=>{class a{}return a.NOOP=new HT,a})();const $x="ng-enter",by="ng-leave",_y="ng-trigger",wy=".ng-trigger",GT="ng-animating",Kx=".ng-animating";function Yh(a){if("number"==typeof a)return a;const t=a.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Jx(parseFloat(t[1]),t[2])}function Jx(a,t){return"s"===t?1e3*a:a}function Ty(a,t,n){return a.hasOwnProperty("duration")?a:function RI(a,t,n){let H,ne=0,ge="";if("string"==typeof a){const Me=a.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Me)return t.push(OT()),{duration:0,delay:0,easing:""};H=Jx(parseFloat(Me[1]),Me[2]);const ze=Me[3];null!=ze&&(ne=Jx(parseFloat(ze),Me[4]));const rt=Me[5];rt&&(ge=rt)}else H=a;if(!n){let Me=!1,ze=t.length;H<0&&(t.push(function KL(){return new gt(3100,fo)}()),Me=!0),ne<0&&(t.push(function JL(){return new gt(3101,fo)}()),Me=!0),Me&&t.splice(ze,0,OT())}return{duration:H,delay:ne,easing:ge}}(a,t,n)}function vp(a,t={}){return Object.keys(a).forEach(n=>{t[n]=a[n]}),t}function th(a,t,n={}){if(t)for(let C in a)n[C]=a[C];else vp(a,n);return n}function YT(a,t,n){return n?t+":"+n+";":""}function ZT(a){let t="";for(let n=0;n<a.style.length;n++){const C=a.style.item(n);t+=YT(0,C,a.style.getPropertyValue(C))}for(const n in a.style)a.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=YT(0,zI(n),a.style[n]));a.setAttribute("style",t)}function Vc(a,t,n){a.style&&(Object.keys(t).forEach(C=>{const H=eb(C);n&&!n.hasOwnProperty(C)&&(n[C]=a.style[H]),a.style[H]=t[C]}),Hx()&&ZT(a))}function Zh(a,t){a.style&&(Object.keys(t).forEach(n=>{const C=eb(n);a.style[C]=""}),Hx()&&ZT(a))}function fg(a){return Array.isArray(a)?1==a.length?a[0]:DT(a):a}const Qx=new RegExp("{{\\s*(.+?)\\s*}}","g");function XT(a){let t=[];if("string"==typeof a){let n;for(;n=Qx.exec(a);)t.push(n[1]);Qx.lastIndex=0}return t}function My(a,t,n){const C=a.toString(),H=C.replace(Qx,(ne,ge)=>{let Me=t[ge];return t.hasOwnProperty(ge)||(n.push(function eI(a){return new gt(3003,fo)}()),Me=""),Me.toString()});return H==C?a:H}function Ay(a){const t=[];let n=a.next();for(;!n.done;)t.push(n.value),n=a.next();return t}const NI=/-+([a-z0-9])/g;function eb(a){return a.replace(NI,(...t)=>t[1].toUpperCase())}function zI(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _u(a,t,n){switch(t.type){case 7:return a.visitTrigger(t,n);case 0:return a.visitState(t,n);case 1:return a.visitTransition(t,n);case 2:return a.visitSequence(t,n);case 3:return a.visitGroup(t,n);case 4:return a.visitAnimate(t,n);case 5:return a.visitKeyframes(t,n);case 6:return a.visitStyle(t,n);case 8:return a.visitReference(t,n);case 9:return a.visitAnimateChild(t,n);case 10:return a.visitAnimateRef(t,n);case 11:return a.visitQuery(t,n);case 12:return a.visitStagger(t,n);default:throw function tI(a){return new gt(3004,fo)}()}}function $T(a,t){return window.getComputedStyle(a)[t]}function qI(a,t){const n=[];return"string"==typeof a?a.split(/\s*,\s*/).forEach(C=>function GI(a,t,n){if(":"==a[0]){const ze=function WI(a,t){switch(a){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,C)=>parseFloat(C)>parseFloat(n);case":decrement":return(n,C)=>parseFloat(C)<parseFloat(n);default:return t.push(function gI(a){return new gt(3016,fo)}()),"* => *"}}(a,n);if("function"==typeof ze)return void t.push(ze);a=ze}const C=a.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==C||C.length<4)return n.push(function pI(a){return new gt(3015,fo)}()),t;const H=C[1],ne=C[2],ge=C[3];t.push(KT(H,ge));"<"==ne[0]&&!("*"==H&&"*"==ge)&&t.push(KT(ge,H))}(C,n,t)):n.push(a),n}const Cy=new Set(["true","1"]),Dy=new Set(["false","0"]);function KT(a,t){const n=Cy.has(a)||Dy.has(a),C=Cy.has(t)||Dy.has(t);return(H,ne)=>{let ge="*"==a||a==H,Me="*"==t||t==ne;return!ge&&n&&"boolean"==typeof H&&(ge=H?Cy.has(a):Dy.has(a)),!Me&&C&&"boolean"==typeof ne&&(Me=ne?Cy.has(t):Dy.has(t)),ge&&Me}}const YI=new RegExp("s*:selfs*,?","g");function tb(a,t,n,C){return new ZI(a).build(t,n,C)}class ZI{constructor(t){this._driver=t}build(t,n,C){const H=new KI(n);this._resetContextStyleTimingState(H);const ne=_u(this,fg(t),H);return H.unsupportedCSSPropertiesFound.size&&H.unsupportedCSSPropertiesFound.keys(),ne}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let C=n.queryCount=0,H=n.depCount=0;const ne=[],ge=[];return"@"==t.name.charAt(0)&&n.errors.push(function rI(){return new gt(3006,fo)}()),t.definitions.forEach(Me=>{if(this._resetContextStyleTimingState(n),0==Me.type){const ze=Me,rt=ze.name;rt.toString().split(/\s*,\s*/).forEach(Et=>{ze.name=Et,ne.push(this.visitState(ze,n))}),ze.name=rt}else if(1==Me.type){const ze=this.visitTransition(Me,n);C+=ze.queryCount,H+=ze.depCount,ge.push(ze)}else n.errors.push(function iI(){return new gt(3007,fo)}())}),{type:7,name:t.name,states:ne,transitions:ge,queryCount:C,depCount:H,options:null}}visitState(t,n){const C=this.visitStyle(t.styles,n),H=t.options&&t.options.params||null;if(C.containsDynamicStyles){const ne=new Set,ge=H||{};C.styles.forEach(Me=>{if(Ly(Me)){const ze=Me;Object.keys(ze).forEach(rt=>{XT(ze[rt]).forEach(Et=>{ge.hasOwnProperty(Et)||ne.add(Et)})})}}),ne.size&&(Ay(ne.values()),n.errors.push(function aI(a,t){return new gt(3008,fo)}()))}return{type:0,name:t.name,style:C,options:H?{params:H}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const C=_u(this,fg(t.animation),n);return{type:1,matchers:qI(t.expr,n.errors),animation:C,queryCount:n.queryCount,depCount:n.depCount,options:Xh(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(C=>_u(this,C,n)),options:Xh(t.options)}}visitGroup(t,n){const C=n.currentTime;let H=0;const ne=t.steps.map(ge=>{n.currentTime=C;const Me=_u(this,ge,n);return H=Math.max(H,n.currentTime),Me});return n.currentTime=H,{type:3,steps:ne,options:Xh(t.options)}}visitAnimate(t,n){const C=function QI(a,t){let n=null;if(a.hasOwnProperty("duration"))n=a;else if("number"==typeof a)return nb(Ty(a,t).duration,0,"");const C=a;if(C.split(/\s+/).some(ne=>"{"==ne.charAt(0)&&"{"==ne.charAt(1))){const ne=nb(0,0,"");return ne.dynamic=!0,ne.strValue=C,ne}return n=n||Ty(C,t),nb(n.duration,n.delay,n.easing)}(t.timings,n.errors);n.currentAnimateTimings=C;let H,ne=t.styles?t.styles:cl({});if(5==ne.type)H=this.visitKeyframes(ne,n);else{let ge=t.styles,Me=!1;if(!ge){Me=!0;const rt={};C.easing&&(rt.easing=C.easing),ge=cl(rt)}n.currentTime+=C.duration+C.delay;const ze=this.visitStyle(ge,n);ze.isEmptyStep=Me,H=ze}return n.currentAnimateTimings=null,{type:4,timings:C,style:H,options:null}}visitStyle(t,n){const C=this._makeStyleAst(t,n);return this._validateStyleAst(C,n),C}_makeStyleAst(t,n){const C=[];Array.isArray(t.styles)?t.styles.forEach(ge=>{"string"==typeof ge?ge==xf?C.push(ge):n.errors.push(function oI(a){return new gt(3002,fo)}()):C.push(ge)}):C.push(t.styles);let H=!1,ne=null;return C.forEach(ge=>{if(Ly(ge)){const Me=ge,ze=Me.easing;if(ze&&(ne=ze,delete Me.easing),!H)for(let rt in Me)if(Me[rt].toString().indexOf("{{")>=0){H=!0;break}}}),{type:6,styles:C,easing:ne,offset:t.offset,containsDynamicStyles:H,options:null}}_validateStyleAst(t,n){const C=n.currentAnimateTimings;let H=n.currentTime,ne=n.currentTime;C&&ne>0&&(ne-=C.duration+C.delay),t.styles.forEach(ge=>{"string"!=typeof ge&&Object.keys(ge).forEach(Me=>{if(!this._driver.validateStyleProperty(Me))return delete ge[Me],void n.unsupportedCSSPropertiesFound.add(Me);const ze=n.collectedStyles[n.currentQuerySelector],rt=ze[Me];let Et=!0;rt&&(ne!=H&&ne>=rt.startTime&&H<=rt.endTime&&(n.errors.push(function sI(a,t,n,C,H){return new gt(3010,fo)}()),Et=!1),ne=rt.startTime),Et&&(ze[Me]={startTime:ne,endTime:H}),n.options&&function FI(a,t,n){const C=t.params||{},H=XT(a);H.length&&H.forEach(ne=>{C.hasOwnProperty(ne)||n.push(function QL(a){return new gt(3001,fo)}())})}(ge[Me],n.options,n.errors)})})}visitKeyframes(t,n){const C={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function lI(){return new gt(3011,fo)}()),C;let ne=0;const ge=[];let Me=!1,ze=!1,rt=0;const Et=t.steps.map(xi=>{const Nr=this._makeStyleAst(xi,n);let Fi=null!=Nr.offset?Nr.offset:function JI(a){if("string"==typeof a)return null;let t=null;if(Array.isArray(a))a.forEach(n=>{if(Ly(n)&&n.hasOwnProperty("offset")){const C=n;t=parseFloat(C.offset),delete C.offset}});else if(Ly(a)&&a.hasOwnProperty("offset")){const n=a;t=parseFloat(n.offset),delete n.offset}return t}(Nr.styles),ia=0;return null!=Fi&&(ne++,ia=Nr.offset=Fi),ze=ze||ia<0||ia>1,Me=Me||ia<rt,rt=ia,ge.push(ia),Nr});ze&&n.errors.push(function uI(){return new gt(3012,fo)}()),Me&&n.errors.push(function cI(){return new gt(3200,fo)}());const Kt=t.steps.length;let bn=0;ne>0&&ne<Kt?n.errors.push(function fI(){return new gt(3202,fo)}()):0==ne&&(bn=1/(Kt-1));const Sn=Kt-1,Xn=n.currentTime,Lr=n.currentAnimateTimings,Kr=Lr.duration;return Et.forEach((xi,Nr)=>{const Fi=bn>0?Nr==Sn?1:bn*Nr:ge[Nr],ia=Fi*Kr;n.currentTime=Xn+Lr.delay+ia,Lr.duration=ia,this._validateStyleAst(xi,n),xi.offset=Fi,C.styles.push(xi)}),C}visitReference(t,n){return{type:8,animation:_u(this,fg(t.animation),n),options:Xh(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:Xh(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:Xh(t.options)}}visitQuery(t,n){const C=n.currentQuerySelector,H=t.options||{};n.queryCount++,n.currentQuery=t;const[ne,ge]=function XI(a){const t=!!a.split(/\s*,\s*/).find(n=>":self"==n);return t&&(a=a.replace(YI,"")),a=a.replace(/@\*/g,wy).replace(/@\w+/g,n=>wy+"-"+n.substr(1)).replace(/:animating/g,Kx),[a,t]}(t.selector);n.currentQuerySelector=C.length?C+" "+ne:ne,bu(n.collectedStyles,n.currentQuerySelector,{});const Me=_u(this,fg(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=C,{type:11,selector:ne,limit:H.limit||0,optional:!!H.optional,includeSelf:ge,animation:Me,originalSelector:t.selector,options:Xh(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function hI(){return new gt(3013,fo)}());const C="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ty(t.timings,n.errors,!0);return{type:12,animation:_u(this,fg(t.animation),n),timings:C,options:null}}}class KI{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ly(a){return!Array.isArray(a)&&"object"==typeof a}function Xh(a){return a?(a=vp(a)).params&&(a.params=function $I(a){return a?vp(a):null}(a.params)):a={},a}function nb(a,t,n){return{duration:a,delay:t,easing:n}}function rb(a,t,n,C,H,ne,ge=null,Me=!1){return{type:1,element:a,keyframes:t,preStyleProps:n,postStyleProps:C,duration:H,delay:ne,totalTime:H+ne,easing:ge,subTimeline:Me}}class Iy{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let C=this._map.get(t);C||this._map.set(t,C=[]),C.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const nP=new RegExp(":enter","g"),iP=new RegExp(":leave","g");function ib(a,t,n,C,H,ne={},ge={},Me,ze,rt=[]){return(new aP).buildKeyframes(a,t,n,C,H,ne,ge,Me,ze,rt)}class aP{buildKeyframes(t,n,C,H,ne,ge,Me,ze,rt,Et=[]){rt=rt||new Iy;const Kt=new ab(t,n,rt,H,ne,Et,[]);Kt.options=ze,Kt.currentTimeline.setStyles([ge],null,Kt.errors,ze),_u(this,C,Kt);const bn=Kt.timelines.filter(Sn=>Sn.containsAnimation());if(Object.keys(Me).length){let Sn;for(let Xn=bn.length-1;Xn>=0;Xn--){const Lr=bn[Xn];if(Lr.element===n){Sn=Lr;break}}Sn&&!Sn.allowOnlyTimelineStyles()&&Sn.setStyles([Me],null,Kt.errors,ze)}return bn.length?bn.map(Sn=>Sn.buildKeyframes()):[rb(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const C=n.subInstructions.get(n.element);if(C){const H=n.createSubContext(t.options),ne=n.currentTimeline.currentTime,ge=this._visitSubInstructions(C,H,H.options);ne!=ge&&n.transformIntoNewTimeline(ge)}n.previousNode=t}visitAnimateRef(t,n){const C=n.createSubContext(t.options);C.transformIntoNewTimeline(),this.visitReference(t.animation,C),n.transformIntoNewTimeline(C.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,C){let ne=n.currentTimeline.currentTime;const ge=null!=C.duration?Yh(C.duration):null,Me=null!=C.delay?Yh(C.delay):null;return 0!==ge&&t.forEach(ze=>{const rt=n.appendInstructionToTimeline(ze,ge,Me);ne=Math.max(ne,rt.duration+rt.delay)}),ne}visitReference(t,n){n.updateOptions(t.options,!0),_u(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const C=n.subContextCount;let H=n;const ne=t.options;if(ne&&(ne.params||ne.delay)&&(H=n.createSubContext(ne),H.transformIntoNewTimeline(),null!=ne.delay)){6==H.previousNode.type&&(H.currentTimeline.snapshotCurrentStyles(),H.previousNode=Py);const ge=Yh(ne.delay);H.delayNextStep(ge)}t.steps.length&&(t.steps.forEach(ge=>_u(this,ge,H)),H.currentTimeline.applyStylesToKeyframe(),H.subContextCount>C&&H.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const C=[];let H=n.currentTimeline.currentTime;const ne=t.options&&t.options.delay?Yh(t.options.delay):0;t.steps.forEach(ge=>{const Me=n.createSubContext(t.options);ne&&Me.delayNextStep(ne),_u(this,ge,Me),H=Math.max(H,Me.currentTimeline.currentTime),C.push(Me.currentTimeline)}),C.forEach(ge=>n.currentTimeline.mergeTimelineCollectedStyles(ge)),n.transformIntoNewTimeline(H),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const C=t.strValue;return Ty(n.params?My(C,n.params,n.errors):C,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const C=n.currentAnimateTimings=this._visitTiming(t.timings,n),H=n.currentTimeline;C.delay&&(n.incrementTime(C.delay),H.snapshotCurrentStyles());const ne=t.style;5==ne.type?this.visitKeyframes(ne,n):(n.incrementTime(C.duration),this.visitStyle(ne,n),H.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const C=n.currentTimeline,H=n.currentAnimateTimings;!H&&C.getCurrentStyleProperties().length&&C.forwardFrame();const ne=H&&H.easing||t.easing;t.isEmptyStep?C.applyEmptyStep(ne):C.setStyles(t.styles,ne,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const C=n.currentAnimateTimings,H=n.currentTimeline.duration,ne=C.duration,Me=n.createSubContext().currentTimeline;Me.easing=C.easing,t.styles.forEach(ze=>{Me.forwardTime((ze.offset||0)*ne),Me.setStyles(ze.styles,ze.easing,n.errors,n.options),Me.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(Me),n.transformIntoNewTimeline(H+ne),n.previousNode=t}visitQuery(t,n){const C=n.currentTimeline.currentTime,H=t.options||{},ne=H.delay?Yh(H.delay):0;ne&&(6===n.previousNode.type||0==C&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Py);let ge=C;const Me=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!H.optional,n.errors);n.currentQueryTotal=Me.length;let ze=null;Me.forEach((rt,Et)=>{n.currentQueryIndex=Et;const Kt=n.createSubContext(t.options,rt);ne&&Kt.delayNextStep(ne),rt===n.element&&(ze=Kt.currentTimeline),_u(this,t.animation,Kt),Kt.currentTimeline.applyStylesToKeyframe(),ge=Math.max(ge,Kt.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(ge),ze&&(n.currentTimeline.mergeTimelineCollectedStyles(ze),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const C=n.parentContext,H=n.currentTimeline,ne=t.timings,ge=Math.abs(ne.duration),Me=ge*(n.currentQueryTotal-1);let ze=ge*n.currentQueryIndex;switch(ne.duration<0?"reverse":ne.easing){case"reverse":ze=Me-ze;break;case"full":ze=C.currentStaggerTime}const Et=n.currentTimeline;ze&&Et.delayNextStep(ze);const Kt=Et.currentTime;_u(this,t.animation,n),n.previousNode=t,C.currentStaggerTime=H.currentTime-Kt+(H.startTime-C.currentTimeline.startTime)}}const Py={};class ab{constructor(t,n,C,H,ne,ge,Me,ze){this._driver=t,this.element=n,this.subInstructions=C,this._enterClassName=H,this._leaveClassName=ne,this.errors=ge,this.timelines=Me,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Py,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ze||new Oy(this._driver,n,0),Me.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const C=t;let H=this.options;null!=C.duration&&(H.duration=Yh(C.duration)),null!=C.delay&&(H.delay=Yh(C.delay));const ne=C.params;if(ne){let ge=H.params;ge||(ge=this.options.params={}),Object.keys(ne).forEach(Me=>{(!n||!ge.hasOwnProperty(Me))&&(ge[Me]=My(ne[Me],ge,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const C=t.params={};Object.keys(n).forEach(H=>{C[H]=n[H]})}}return t}createSubContext(t=null,n,C){const H=n||this.element,ne=new ab(this._driver,H,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(H,C||0));return ne.previousNode=this.previousNode,ne.currentAnimateTimings=this.currentAnimateTimings,ne.options=this._copyOptions(),ne.updateOptions(t),ne.currentQueryIndex=this.currentQueryIndex,ne.currentQueryTotal=this.currentQueryTotal,ne.parentContext=this,this.subContextCount++,ne}transformIntoNewTimeline(t){return this.previousNode=Py,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,C){const H={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=C?C:0)+t.delay,easing:""},ne=new oP(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,H,t.stretchStartingKeyframe);return this.timelines.push(ne),H}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,C,H,ne,ge){let Me=[];if(H&&Me.push(this.element),t.length>0){t=(t=t.replace(nP,"."+this._enterClassName)).replace(iP,"."+this._leaveClassName);let rt=this._driver.query(this.element,t,1!=C);0!==C&&(rt=C<0?rt.slice(rt.length+C,rt.length):rt.slice(0,C)),Me.push(...rt)}return!ne&&0==Me.length&&ge.push(function dI(a){return new gt(3014,fo)}()),Me}}class Oy{constructor(t,n,C,H){this._driver=t,this.element=n,this.startTime=C,this._elementTimelineStylesLookup=H,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new Oy(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||xf,this._currentKeyframe[n]=xf}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,C,H){n&&(this._previousKeyframe.easing=n);const ne=H&&H.params||{},ge=function sP(a,t){const n={};let C;return a.forEach(H=>{"*"===H?(C=C||Object.keys(t),C.forEach(ne=>{n[ne]=xf})):th(H,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(ge).forEach(Me=>{const ze=My(ge[Me],ne,C);this._pendingStyles[Me]=ze,this._localTimelineStyles.hasOwnProperty(Me)||(this._backFill[Me]=this._globalTimelineStyles.hasOwnProperty(Me)?this._globalTimelineStyles[Me]:xf),this._updateStyle(Me,ze)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(C=>{this._currentKeyframe[C]=t[C]}),Object.keys(this._localTimelineStyles).forEach(C=>{this._currentKeyframe.hasOwnProperty(C)||(this._currentKeyframe[C]=this._localTimelineStyles[C])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const C=this._styleSummary[n],H=t._styleSummary[n];(!C||H.time>C.time)&&this._updateStyle(n,H.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,C=1===this._keyframes.size&&0===this.duration;let H=[];this._keyframes.forEach((Me,ze)=>{const rt=th(Me,!0);Object.keys(rt).forEach(Et=>{const Kt=rt[Et];"!"==Kt?t.add(Et):Kt==xf&&n.add(Et)}),C||(rt.offset=ze/this.duration),H.push(rt)});const ne=t.size?Ay(t.values()):[],ge=n.size?Ay(n.values()):[];if(C){const Me=H[0],ze=vp(Me);Me.offset=0,ze.offset=1,H=[Me,ze]}return rb(this.element,H,ne,ge,this.duration,this.startTime,this.easing,!1)}}class oP extends Oy{constructor(t,n,C,H,ne,ge,Me=!1){super(t,n,ge.delay),this.keyframes=C,this.preStyleProps=H,this.postStyleProps=ne,this._stretchStartingKeyframe=Me,this.timings={duration:ge.duration,delay:ge.delay,easing:ge.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:C,easing:H}=this.timings;if(this._stretchStartingKeyframe&&n){const ne=[],ge=C+n,Me=n/ge,ze=th(t[0],!1);ze.offset=0,ne.push(ze);const rt=th(t[0],!1);rt.offset=eM(Me),ne.push(rt);const Et=t.length-1;for(let Kt=1;Kt<=Et;Kt++){let bn=th(t[Kt],!1);bn.offset=eM((n+bn.offset*C)/ge),ne.push(bn)}C=ge,n=0,H="",t=ne}return rb(this.element,t,this.preStyleProps,this.postStyleProps,C,n,H,!0)}}function eM(a,t=3){const n=Math.pow(10,t-1);return Math.round(a*n)/n}class ob{}class lP extends ob{normalizePropertyName(t,n){return eb(t)}normalizeStyleValue(t,n,C,H){let ne="";const ge=C.toString().trim();if(uP[n]&&0!==C&&"0"!==C)if("number"==typeof C)ne="px";else{const Me=C.match(/^[+-]?[\d\.]+([a-z]*)$/);Me&&0==Me[1].length&&H.push(function nI(a,t){return new gt(3005,fo)}())}return ge+ne}}const uP=(()=>function cP(a){const t={};return a.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function tM(a,t,n,C,H,ne,ge,Me,ze,rt,Et,Kt,bn){return{type:0,element:a,triggerName:t,isRemovalTransition:H,fromState:n,fromStyles:ne,toState:C,toStyles:ge,timelines:Me,queriedElements:ze,preStyleProps:rt,postStyleProps:Et,totalTime:Kt,errors:bn}}const sb={};class nM{constructor(t,n,C){this._triggerName=t,this.ast=n,this._stateStyles=C}match(t,n,C,H){return function fP(a,t,n,C,H){return a.some(ne=>ne(t,n,C,H))}(this.ast.matchers,t,n,C,H)}buildStyles(t,n,C){const H=this._stateStyles["*"],ne=this._stateStyles[t],ge=H?H.buildStyles(n,C):{};return ne?ne.buildStyles(n,C):ge}build(t,n,C,H,ne,ge,Me,ze,rt,Et){const Kt=[],bn=this.ast.options&&this.ast.options.params||sb,Xn=this.buildStyles(C,Me&&Me.params||sb,Kt),Lr=ze&&ze.params||sb,Kr=this.buildStyles(H,Lr,Kt),xi=new Set,Nr=new Map,Fi=new Map,ia="void"===H,Xa={params:Object.assign(Object.assign({},bn),Lr)},ws=Et?[]:ib(t,n,this.ast.animation,ne,ge,Xn,Kr,Xa,rt,Kt);let ks=0;if(ws.forEach(Tu=>{ks=Math.max(Tu.duration+Tu.delay,ks)}),Kt.length)return tM(n,this._triggerName,C,H,ia,Xn,Kr,[],[],Nr,Fi,ks,Kt);ws.forEach(Tu=>{const Mu=Tu.element,bp=bu(Nr,Mu,{});Tu.preStyleProps.forEach(dc=>bp[dc]=!0);const bf=bu(Fi,Mu,{});Tu.postStyleProps.forEach(dc=>bf[dc]=!0),Mu!==n&&xi.add(Mu)});const wu=Ay(xi.values());return tM(n,this._triggerName,C,H,ia,Xn,Kr,ws,wu,Nr,Fi,ks)}}class hP{constructor(t,n,C){this.styles=t,this.defaultParams=n,this.normalizer=C}buildStyles(t,n){const C={},H=vp(this.defaultParams);return Object.keys(t).forEach(ne=>{const ge=t[ne];null!=ge&&(H[ne]=ge)}),this.styles.styles.forEach(ne=>{if("string"!=typeof ne){const ge=ne;Object.keys(ge).forEach(Me=>{let ze=ge[Me];ze.length>1&&(ze=My(ze,H,n));const rt=this.normalizer.normalizePropertyName(Me,n);ze=this.normalizer.normalizeStyleValue(Me,rt,ze,n),C[rt]=ze})}}),C}}class pP{constructor(t,n,C){this.name=t,this.ast=n,this._normalizer=C,this.transitionFactories=[],this.states={},n.states.forEach(H=>{this.states[H.name]=new hP(H.style,H.options&&H.options.params||{},C)}),rM(this.states,"true","1"),rM(this.states,"false","0"),n.transitions.forEach(H=>{this.transitionFactories.push(new nM(t,H,this.states))}),this.fallbackTransition=function gP(a,t,n){return new nM(a,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ge,Me)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,C,H){return this.transitionFactories.find(ge=>ge.match(t,n,C,H))||null}matchStyles(t,n,C){return this.fallbackTransition.buildStyles(t,n,C)}}function rM(a,t,n){a.hasOwnProperty(t)?a.hasOwnProperty(n)||(a[n]=a[t]):a.hasOwnProperty(n)&&(a[t]=a[n])}const mP=new Iy;class yP{constructor(t,n,C){this.bodyNode=t,this._driver=n,this._normalizer=C,this._animations={},this._playersById={},this.players=[]}register(t,n){const C=[],ne=tb(this._driver,n,C,[]);if(C.length)throw function bI(a){return new gt(3503,fo)}();this._animations[t]=ne}_buildPlayer(t,n,C){const H=t.element,ne=RT(0,this._normalizer,0,t.keyframes,n,C);return this._driver.animate(H,ne,t.duration,t.delay,t.easing,[],!0)}create(t,n,C={}){const H=[],ne=this._animations[t];let ge;const Me=new Map;if(ne?(ge=ib(this._driver,n,ne,$x,by,{},{},C,mP,H),ge.forEach(Et=>{const Kt=bu(Me,Et.element,{});Et.postStyleProps.forEach(bn=>Kt[bn]=null)})):(H.push(function _I(){return new gt(3300,fo)}()),ge=[]),H.length)throw function wI(a){return new gt(3504,fo)}();Me.forEach((Et,Kt)=>{Object.keys(Et).forEach(bn=>{Et[bn]=this._driver.computeStyle(Kt,bn,xf)})});const rt=eh(ge.map(Et=>{const Kt=Me.get(Et.element);return this._buildPlayer(Et,{},Kt)}));return this._playersById[t]=rt,rt.onDestroy(()=>this.destroy(t)),this.players.push(rt),rt}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const C=this.players.indexOf(n);C>=0&&this.players.splice(C,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw function TI(a){return new gt(3301,fo)}();return n}listen(t,n,C,H){const ne=Wx(n,"","","");return qx(this._getPlayer(t),C,ne,H),()=>{}}command(t,n,C,H){if("register"==C)return void this.register(t,H[0]);if("create"==C)return void this.create(t,n,H[0]||{});const ne=this._getPlayer(t);switch(C){case"play":ne.play();break;case"pause":ne.pause();break;case"reset":ne.reset();break;case"restart":ne.restart();break;case"finish":ne.finish();break;case"init":ne.init();break;case"setPosition":ne.setPosition(parseFloat(H[0]));break;case"destroy":this.destroy(t)}}}const iM="ng-animate-queued",lb="ng-animate-disabled",wP=[],aM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},TP={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yu="__ng_removed";class ub{constructor(t,n=""){this.namespaceId=n;const C=t&&t.hasOwnProperty("value");if(this.value=function EP(a){return null!=a?a:null}(C?t.value:t),C){const ne=vp(t);delete ne.value,this.options=ne}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const C=this.options.params;Object.keys(n).forEach(H=>{null==C[H]&&(C[H]=n[H])})}}}const hg="void",cb=new ub(hg);class MP{constructor(t,n,C){this.id=t,this.hostElement=n,this._engine=C,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Zu(n,this._hostClassName)}listen(t,n,C,H){if(!this._triggers.hasOwnProperty(n))throw function MI(a,t){return new gt(3302,fo)}();if(null==C||0==C.length)throw function AI(a){return new gt(3303,fo)}();if(!function SP(a){return"start"==a||"done"==a}(C))throw function kI(a,t){return new gt(3400,fo)}();const ne=bu(this._elementListeners,t,[]),ge={name:n,phase:C,callback:H};ne.push(ge);const Me=bu(this._engine.statesByElement,t,{});return Me.hasOwnProperty(n)||(Zu(t,_y),Zu(t,_y+"-"+n),Me[n]=cb),()=>{this._engine.afterFlush(()=>{const ze=ne.indexOf(ge);ze>=0&&ne.splice(ze,1),this._triggers[n]||delete Me[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw function EI(a){return new gt(3401,fo)}();return n}trigger(t,n,C,H=!0){const ne=this._getTrigger(n),ge=new fb(this.id,n,t);let Me=this._engine.statesByElement.get(t);Me||(Zu(t,_y),Zu(t,_y+"-"+n),this._engine.statesByElement.set(t,Me={}));let ze=Me[n];const rt=new ub(C,this.id);if(!(C&&C.hasOwnProperty("value"))&&ze&&rt.absorbOptions(ze.options),Me[n]=rt,ze||(ze=cb),rt.value!==hg&&ze.value===rt.value){if(!function LP(a,t){const n=Object.keys(a),C=Object.keys(t);if(n.length!=C.length)return!1;for(let H=0;H<n.length;H++){const ne=n[H];if(!t.hasOwnProperty(ne)||a[ne]!==t[ne])return!1}return!0}(ze.params,rt.params)){const Lr=[],Kr=ne.matchStyles(ze.value,ze.params,Lr),xi=ne.matchStyles(rt.value,rt.params,Lr);Lr.length?this._engine.reportError(Lr):this._engine.afterFlush(()=>{Zh(t,Kr),Vc(t,xi)})}return}const bn=bu(this._engine.playersByElement,t,[]);bn.forEach(Lr=>{Lr.namespaceId==this.id&&Lr.triggerName==n&&Lr.queued&&Lr.destroy()});let Sn=ne.matchTransition(ze.value,rt.value,t,rt.params),Xn=!1;if(!Sn){if(!H)return;Sn=ne.fallbackTransition,Xn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:Sn,fromState:ze,toState:rt,player:ge,isFallbackTransition:Xn}),Xn||(Zu(t,iM),ge.onStart(()=>{xp(t,iM)})),ge.onDone(()=>{let Lr=this.players.indexOf(ge);Lr>=0&&this.players.splice(Lr,1);const Kr=this._engine.playersByElement.get(t);if(Kr){let xi=Kr.indexOf(ge);xi>=0&&Kr.splice(xi,1)}}),this.players.push(ge),bn.push(ge),ge}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,C)=>{delete n[t]}),this._elementListeners.forEach((n,C)=>{this._elementListeners.set(C,n.filter(H=>H.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(C=>C.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const C=this._engine.driver.query(t,wy,!0);C.forEach(H=>{if(H[Yu])return;const ne=this._engine.fetchNamespacesByElement(H);ne.size?ne.forEach(ge=>ge.triggerLeaveAnimation(H,n,!1,!0)):this.clearElementCache(H)}),this._engine.afterFlushAnimationsDone(()=>C.forEach(H=>this.clearElementCache(H)))}triggerLeaveAnimation(t,n,C,H){const ne=this._engine.statesByElement.get(t),ge=new Map;if(ne){const Me=[];if(Object.keys(ne).forEach(ze=>{if(ge.set(ze,ne[ze].value),this._triggers[ze]){const rt=this.trigger(t,ze,hg,H);rt&&Me.push(rt)}}),Me.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,ge),C&&eh(Me).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),C=this._engine.statesByElement.get(t);if(n&&C){const H=new Set;n.forEach(ne=>{const ge=ne.name;if(H.has(ge))return;H.add(ge);const ze=this._triggers[ge].fallbackTransition,rt=C[ge]||cb,Et=new ub(hg),Kt=new fb(this.id,ge,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:ge,transition:ze,fromState:rt,toState:Et,player:Kt,isFallbackTransition:!0})})}}removeNode(t,n){const C=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let H=!1;if(C.totalAnimations){const ne=C.players.length?C.playersByQueriedElement.get(t):[];if(ne&&ne.length)H=!0;else{let ge=t;for(;ge=ge.parentNode;)if(C.statesByElement.get(ge)){H=!0;break}}}if(this.prepareLeaveAnimationListeners(t),H)C.markElementAsRemoved(this.id,t,!1,n);else{const ne=t[Yu];(!ne||ne===aM)&&(C.afterFlush(()=>this.clearElementCache(t)),C.destroyInnerAnimations(t),C._onRemovalComplete(t,n))}}insertNode(t,n){Zu(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(C=>{const H=C.player;if(H.destroyed)return;const ne=C.element,ge=this._elementListeners.get(ne);ge&&ge.forEach(Me=>{if(Me.name==C.triggerName){const ze=Wx(ne,C.triggerName,C.fromState.value,C.toState.value);ze._data=t,qx(C.player,Me.phase,ze,Me.callback)}}),H.markedForDestroy?this._engine.afterFlush(()=>{H.destroy()}):n.push(C)}),this._queue=[],n.sort((C,H)=>{const ne=C.transition.ast.depCount,ge=H.transition.ast.depCount;return 0==ne||0==ge?ne-ge:this._engine.driver.containsElement(C.element,H.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(C=>C.element===t)||n,n}}class AP{constructor(t,n,C){this.bodyNode=t,this.driver=n,this._normalizer=C,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(H,ne)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(C=>{C.queued&&t.push(C)})}),t}createNamespace(t,n){const C=new MP(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(C,n):(this.newHostElements.set(n,C),this.collectEnterElement(n)),this._namespaceLookup[t]=C}_balanceNamespaceList(t,n){const C=this._namespaceList,H=this.namespacesByHostElement,ne=C.length-1;if(ne>=0){let ge=!1;if(void 0!==this.driver.getParentElement){let Me=this.driver.getParentElement(n);for(;Me;){const ze=H.get(Me);if(ze){const rt=C.indexOf(ze);C.splice(rt+1,0,t),ge=!0;break}Me=this.driver.getParentElement(Me)}}else for(let Me=ne;Me>=0;Me--)if(this.driver.containsElement(C[Me].hostElement,n)){C.splice(Me+1,0,t),ge=!0;break}ge||C.unshift(t)}else C.push(t);return H.set(n,t),t}register(t,n){let C=this._namespaceLookup[t];return C||(C=this.createNamespace(t,n)),C}registerTrigger(t,n,C){let H=this._namespaceLookup[t];H&&H.register(n,C)&&this.totalAnimations++}destroy(t,n){if(!t)return;const C=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(C.hostElement),delete this._namespaceLookup[t];const H=this._namespaceList.indexOf(C);H>=0&&this._namespaceList.splice(H,1)}),this.afterFlushAnimationsDone(()=>C.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,C=this.statesByElement.get(t);if(C){const H=Object.keys(C);for(let ne=0;ne<H.length;ne++){const ge=C[H[ne]].namespaceId;if(ge){const Me=this._fetchNamespace(ge);Me&&n.add(Me)}}}return n}trigger(t,n,C,H){if(Ry(n)){const ne=this._fetchNamespace(t);if(ne)return ne.trigger(n,C,H),!0}return!1}insertNode(t,n,C,H){if(!Ry(n))return;const ne=n[Yu];if(ne&&ne.setForRemoval){ne.setForRemoval=!1,ne.setForMove=!0;const ge=this.collectedLeaveElements.indexOf(n);ge>=0&&this.collectedLeaveElements.splice(ge,1)}if(t){const ge=this._fetchNamespace(t);ge&&ge.insertNode(n,C)}H&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Zu(t,lb)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),xp(t,lb))}removeNode(t,n,C,H){if(Ry(n)){const ne=t?this._fetchNamespace(t):null;if(ne?ne.removeNode(n,H):this.markElementAsRemoved(t,n,!1,H),C){const ge=this.namespacesByHostElement.get(n);ge&&ge.id!==t&&ge.removeNode(n,H)}}else this._onRemovalComplete(n,H)}markElementAsRemoved(t,n,C,H,ne){this.collectedLeaveElements.push(n),n[Yu]={namespaceId:t,setForRemoval:H,hasAnimation:C,removedBeforeQueried:!1,previousTriggersValues:ne}}listen(t,n,C,H,ne){return Ry(n)?this._fetchNamespace(t).listen(n,C,H,ne):()=>{}}_buildInstruction(t,n,C,H,ne){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,C,H,t.fromState.options,t.toState.options,n,ne)}destroyInnerAnimations(t){let n=this.driver.query(t,wy,!0);n.forEach(C=>this.destroyActiveAnimationsForElement(C)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,Kx,!0),n.forEach(C=>this.finishActiveQueriedAnimationOnElement(C)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(C=>{C.queued?C.markedForDestroy=!0:C.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(C=>C.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return eh(this.players).onDone(()=>t());t()})}processLeaveNode(t){var n;const C=t[Yu];if(C&&C.setForRemoval){if(t[Yu]=aM,C.namespaceId){this.destroyInnerAnimations(t);const H=this._fetchNamespace(C.namespaceId);H&&H.clearElementCache(t)}this._onRemovalComplete(t,C.setForRemoval)}(null===(n=t.classList)||void 0===n?void 0:n.contains(lb))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(H=>{this.markElementAsDisabled(H,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((C,H)=>this._balanceNamespaceList(C,H)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let C=0;C<this.collectedEnterElements.length;C++)Zu(this.collectedEnterElements[C],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const C=[];try{n=this._flushAnimations(C,t)}finally{for(let H=0;H<C.length;H++)C[H]()}}else for(let C=0;C<this.collectedLeaveElements.length;C++)this.processLeaveNode(this.collectedLeaveElements[C]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(C=>C()),this._flushFns=[],this._whenQuietFns.length){const C=this._whenQuietFns;this._whenQuietFns=[],n.length?eh(n).onDone(()=>{C.forEach(H=>H())}):C.forEach(H=>H())}}reportError(t){throw function SI(a){return new gt(3402,fo)}()}_flushAnimations(t,n){const C=new Iy,H=[],ne=new Map,ge=[],Me=new Map,ze=new Map,rt=new Map,Et=new Set;this.disabledNodes.forEach(Yi=>{Et.add(Yi);const ga=this.driver.query(Yi,".ng-animate-queued",!0);for(let Ca=0;Ca<ga.length;Ca++)Et.add(ga[Ca])});const Kt=this.bodyNode,bn=Array.from(this.statesByElement.keys()),Sn=lM(bn,this.collectedEnterElements),Xn=new Map;let Lr=0;Sn.forEach((Yi,ga)=>{const Ca=$x+Lr++;Xn.set(ga,Ca),Yi.forEach(_o=>Zu(_o,Ca))});const Kr=[],xi=new Set,Nr=new Set;for(let Yi=0;Yi<this.collectedLeaveElements.length;Yi++){const ga=this.collectedLeaveElements[Yi],Ca=ga[Yu];Ca&&Ca.setForRemoval&&(Kr.push(ga),xi.add(ga),Ca.hasAnimation?this.driver.query(ga,".ng-star-inserted",!0).forEach(_o=>xi.add(_o)):Nr.add(ga))}const Fi=new Map,ia=lM(bn,Array.from(xi));ia.forEach((Yi,ga)=>{const Ca=by+Lr++;Fi.set(ga,Ca),Yi.forEach(_o=>Zu(_o,Ca))}),t.push(()=>{Sn.forEach((Yi,ga)=>{const Ca=Xn.get(ga);Yi.forEach(_o=>xp(_o,Ca))}),ia.forEach((Yi,ga)=>{const Ca=Fi.get(ga);Yi.forEach(_o=>xp(_o,Ca))}),Kr.forEach(Yi=>{this.processLeaveNode(Yi)})});const Xa=[],ws=[];for(let Yi=this._namespaceList.length-1;Yi>=0;Yi--)this._namespaceList[Yi].drainQueuedTransitions(n).forEach(Ca=>{const _o=Ca.player,yl=Ca.element;if(Xa.push(_o),this.collectedEnterElements.length){const Gl=yl[Yu];if(Gl&&Gl.setForMove){if(Gl.previousTriggersValues&&Gl.previousTriggersValues.has(Ca.triggerName)){const $h=Gl.previousTriggersValues.get(Ca.triggerName),rh=this.statesByElement.get(Ca.element);rh&&rh[Ca.triggerName]&&(rh[Ca.triggerName].value=$h)}return void _o.destroy()}}const Uc=!Kt||!this.driver.containsElement(Kt,yl),Au=Fi.get(yl),nh=Xn.get(yl),Es=this._buildInstruction(Ca,C,nh,Au,Uc);if(Es.errors&&Es.errors.length)return void ws.push(Es);if(Uc)return _o.onStart(()=>Zh(yl,Es.fromStyles)),_o.onDestroy(()=>Vc(yl,Es.toStyles)),void H.push(_o);if(Ca.isFallbackTransition)return _o.onStart(()=>Zh(yl,Es.fromStyles)),_o.onDestroy(()=>Vc(yl,Es.toStyles)),void H.push(_o);const xM=[];Es.timelines.forEach(Gl=>{Gl.stretchStartingKeyframe=!0,this.disabledNodes.has(Gl.element)||xM.push(Gl)}),Es.timelines=xM,C.append(yl,Es.timelines),ge.push({instruction:Es,player:_o,element:yl}),Es.queriedElements.forEach(Gl=>bu(Me,Gl,[]).push(_o)),Es.preStyleProps.forEach((Gl,$h)=>{const rh=Object.keys(Gl);if(rh.length){let Kh=ze.get($h);Kh||ze.set($h,Kh=new Set),rh.forEach(db=>Kh.add(db))}}),Es.postStyleProps.forEach((Gl,$h)=>{const rh=Object.keys(Gl);let Kh=rt.get($h);Kh||rt.set($h,Kh=new Set),rh.forEach(db=>Kh.add(db))})});if(ws.length){const Yi=[];ws.forEach(ga=>{Yi.push(function CI(a,t){return new gt(3505,fo)}())}),Xa.forEach(ga=>ga.destroy()),this.reportError(Yi)}const ks=new Map,wu=new Map;ge.forEach(Yi=>{const ga=Yi.element;C.has(ga)&&(wu.set(ga,ga),this._beforeAnimationBuild(Yi.player.namespaceId,Yi.instruction,ks))}),H.forEach(Yi=>{const ga=Yi.element;this._getPreviousPlayers(ga,!1,Yi.namespaceId,Yi.triggerName,null).forEach(_o=>{bu(ks,ga,[]).push(_o),_o.destroy()})});const Tu=Kr.filter(Yi=>cM(Yi,ze,rt)),Mu=new Map;sM(Mu,this.driver,Nr,rt,xf).forEach(Yi=>{cM(Yi,ze,rt)&&Tu.push(Yi)});const bf=new Map;Sn.forEach((Yi,ga)=>{sM(bf,this.driver,new Set(Yi),ze,"!")}),Tu.forEach(Yi=>{const ga=Mu.get(Yi),Ca=bf.get(Yi);Mu.set(Yi,Object.assign(Object.assign({},ga),Ca))});const dc=[],_p=[],wp={};ge.forEach(Yi=>{const{element:ga,player:Ca,instruction:_o}=Yi;if(C.has(ga)){if(Et.has(ga))return Ca.onDestroy(()=>Vc(ga,_o.toStyles)),Ca.disabled=!0,Ca.overrideTotalTime(_o.totalTime),void H.push(Ca);let yl=wp;if(wu.size>1){let Au=ga;const nh=[];for(;Au=Au.parentNode;){const Es=wu.get(Au);if(Es){yl=Es;break}nh.push(Au)}nh.forEach(Es=>wu.set(Es,yl))}const Uc=this._buildAnimation(Ca.namespaceId,_o,ks,ne,bf,Mu);if(Ca.setRealPlayer(Uc),yl===wp)dc.push(Ca);else{const Au=this.playersByElement.get(yl);Au&&Au.length&&(Ca.parentPlayer=eh(Au)),H.push(Ca)}}else Zh(ga,_o.fromStyles),Ca.onDestroy(()=>Vc(ga,_o.toStyles)),_p.push(Ca),Et.has(ga)&&H.push(Ca)}),_p.forEach(Yi=>{const ga=ne.get(Yi.element);if(ga&&ga.length){const Ca=eh(ga);Yi.setRealPlayer(Ca)}}),H.forEach(Yi=>{Yi.parentPlayer?Yi.syncPlayerEvents(Yi.parentPlayer):Yi.destroy()});for(let Yi=0;Yi<Kr.length;Yi++){const ga=Kr[Yi],Ca=ga[Yu];if(xp(ga,by),Ca&&Ca.hasAnimation)continue;let _o=[];if(Me.size){let Uc=Me.get(ga);Uc&&Uc.length&&_o.push(...Uc);let Au=this.driver.query(ga,Kx,!0);for(let nh=0;nh<Au.length;nh++){let Es=Me.get(Au[nh]);Es&&Es.length&&_o.push(...Es)}}const yl=_o.filter(Uc=>!Uc.destroyed);yl.length?CP(this,ga,yl):this.processLeaveNode(ga)}return Kr.length=0,dc.forEach(Yi=>{this.players.push(Yi),Yi.onDone(()=>{Yi.destroy();const ga=this.players.indexOf(Yi);this.players.splice(ga,1)}),Yi.play()}),dc}elementContainsData(t,n){let C=!1;const H=n[Yu];return H&&H.setForRemoval&&(C=!0),this.playersByElement.has(n)&&(C=!0),this.playersByQueriedElement.has(n)&&(C=!0),this.statesByElement.has(n)&&(C=!0),this._fetchNamespace(t).elementContainsData(n)||C}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,C,H,ne){let ge=[];if(n){const Me=this.playersByQueriedElement.get(t);Me&&(ge=Me)}else{const Me=this.playersByElement.get(t);if(Me){const ze=!ne||ne==hg;Me.forEach(rt=>{rt.queued||!ze&&rt.triggerName!=H||ge.push(rt)})}}return(C||H)&&(ge=ge.filter(Me=>!(C&&C!=Me.namespaceId||H&&H!=Me.triggerName))),ge}_beforeAnimationBuild(t,n,C){const ne=n.element,ge=n.isRemovalTransition?void 0:t,Me=n.isRemovalTransition?void 0:n.triggerName;for(const ze of n.timelines){const rt=ze.element,Et=rt!==ne,Kt=bu(C,rt,[]);this._getPreviousPlayers(rt,Et,ge,Me,n.toState).forEach(Sn=>{const Xn=Sn.getRealPlayer();Xn.beforeDestroy&&Xn.beforeDestroy(),Sn.destroy(),Kt.push(Sn)})}Zh(ne,n.fromStyles)}_buildAnimation(t,n,C,H,ne,ge){const Me=n.triggerName,ze=n.element,rt=[],Et=new Set,Kt=new Set,bn=n.timelines.map(Xn=>{const Lr=Xn.element;Et.add(Lr);const Kr=Lr[Yu];if(Kr&&Kr.removedBeforeQueried)return new cg(Xn.duration,Xn.delay);const xi=Lr!==ze,Nr=function DP(a){const t=[];return uM(a,t),t}((C.get(Lr)||wP).map(ks=>ks.getRealPlayer())).filter(ks=>!!ks.element&&ks.element===Lr),Fi=ne.get(Lr),ia=ge.get(Lr),Xa=RT(0,this._normalizer,0,Xn.keyframes,Fi,ia),ws=this._buildPlayer(Xn,Xa,Nr);if(Xn.subTimeline&&H&&Kt.add(Lr),xi){const ks=new fb(t,Me,Lr);ks.setRealPlayer(ws),rt.push(ks)}return ws});rt.forEach(Xn=>{bu(this.playersByQueriedElement,Xn.element,[]).push(Xn),Xn.onDone(()=>function kP(a,t,n){let C;if(a instanceof Map){if(C=a.get(t),C){if(C.length){const H=C.indexOf(n);C.splice(H,1)}0==C.length&&a.delete(t)}}else if(C=a[t],C){if(C.length){const H=C.indexOf(n);C.splice(H,1)}0==C.length&&delete a[t]}return C}(this.playersByQueriedElement,Xn.element,Xn))}),Et.forEach(Xn=>Zu(Xn,GT));const Sn=eh(bn);return Sn.onDestroy(()=>{Et.forEach(Xn=>xp(Xn,GT)),Vc(ze,n.toStyles)}),Kt.forEach(Xn=>{bu(H,Xn,[]).push(Sn)}),Sn}_buildPlayer(t,n,C){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,C):new cg(t.duration,t.delay)}}class fb{constructor(t,n,C){this.namespaceId=t,this.triggerName=n,this.element=C,this._player=new cg,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(C=>qx(t,n,void 0,C))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){bu(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function Ry(a){return a&&1===a.nodeType}function oM(a,t){const n=a.style.display;return a.style.display=null!=t?t:"none",n}function sM(a,t,n,C,H){const ne=[];n.forEach(ze=>ne.push(oM(ze)));const ge=[];C.forEach((ze,rt)=>{const Et={};ze.forEach(Kt=>{const bn=Et[Kt]=t.computeStyle(rt,Kt,H);(!bn||0==bn.length)&&(rt[Yu]=TP,ge.push(rt))}),a.set(rt,Et)});let Me=0;return n.forEach(ze=>oM(ze,ne[Me++])),ge}function lM(a,t){const n=new Map;if(a.forEach(Me=>n.set(Me,[])),0==t.length)return n;const H=new Set(t),ne=new Map;function ge(Me){if(!Me)return 1;let ze=ne.get(Me);if(ze)return ze;const rt=Me.parentNode;return ze=n.has(rt)?rt:H.has(rt)?1:ge(rt),ne.set(Me,ze),ze}return t.forEach(Me=>{const ze=ge(Me);1!==ze&&n.get(ze).push(Me)}),n}function Zu(a,t){var n;null===(n=a.classList)||void 0===n||n.add(t)}function xp(a,t){var n;null===(n=a.classList)||void 0===n||n.remove(t)}function CP(a,t,n){eh(n).onDone(()=>a.processLeaveNode(t))}function uM(a,t){for(let n=0;n<a.length;n++){const C=a[n];C instanceof PT?uM(C.players,t):t.push(C)}}function cM(a,t,n){const C=n.get(a);if(!C)return!1;let H=t.get(a);return H?C.forEach(ne=>H.add(ne)):t.set(a,C),n.delete(a),!0}class Fy{constructor(t,n,C){this.bodyNode=t,this._driver=n,this._normalizer=C,this._triggerCache={},this.onRemovalComplete=(H,ne)=>{},this._transitionEngine=new AP(t,n,C),this._timelineEngine=new yP(t,n,C),this._transitionEngine.onRemovalComplete=(H,ne)=>this.onRemovalComplete(H,ne)}registerTrigger(t,n,C,H,ne){const ge=t+"-"+H;let Me=this._triggerCache[ge];if(!Me){const ze=[],Et=tb(this._driver,ne,ze,[]);if(ze.length)throw function vI(a,t){return new gt(3404,fo)}();Me=function dP(a,t,n){return new pP(a,t,n)}(H,Et,this._normalizer),this._triggerCache[ge]=Me}this._transitionEngine.registerTrigger(n,H,Me)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,C,H){this._transitionEngine.insertNode(t,n,C,H)}onRemove(t,n,C,H){this._transitionEngine.removeNode(t,n,H||!1,C)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,C,H){if("@"==C.charAt(0)){const[ne,ge]=FT(C);this._timelineEngine.command(ne,n,ge,H)}else this._transitionEngine.trigger(t,n,C,H)}listen(t,n,C,H,ne){if("@"==C.charAt(0)){const[ge,Me]=FT(C);return this._timelineEngine.listen(ge,n,Me,ne)}return this._transitionEngine.listen(t,n,C,H,ne)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let PP=(()=>{class a{constructor(n,C,H){this._element=n,this._startStyles=C,this._endStyles=H,this._state=0;let ne=a.initialStylesByElement.get(n);ne||a.initialStylesByElement.set(n,ne={}),this._initialStyles=ne}start(){this._state<1&&(this._startStyles&&Vc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vc(this._element,this._initialStyles),this._endStyles&&(Vc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(a.initialStylesByElement.delete(this._element),this._startStyles&&(Zh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zh(this._element,this._endStyles),this._endStyles=null),Vc(this._element,this._initialStyles),this._state=3)}}return a.initialStylesByElement=new WeakMap,a})();function hb(a){let t=null;const n=Object.keys(a);for(let C=0;C<n.length;C++){const H=n[C];OP(H)&&(t=t||{},t[H]=a[H])}return t}function OP(a){return"display"===a||"position"===a}class fM{constructor(t,n,C,H){this.element=t,this.keyframes=n,this.options=C,this._specialStyles=H,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=C.duration,this._delay=C.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,C){return t.animate(n,C)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const n=this._finalKeyframe;Object.keys(n).forEach(C=>{"offset"!=C&&(t[C]=this._finished?n[C]:$T(this.element,C))})}this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(C=>C()),n.length=0}}class RP{validateStyleProperty(t){return jT(t)}matchesElement(t,n){return!1}containsElement(t,n){return VT(t,n)}getParentElement(t){return Zx(t)}query(t,n,C){return UT(t,n,C)}computeStyle(t,n,C){return window.getComputedStyle(t)[n]}animate(t,n,C,H,ne,ge=[]){const ze={duration:C,delay:H,fill:0==H?"both":"forwards"};ne&&(ze.easing=ne);const rt={},Et=ge.filter(bn=>bn instanceof fM);(function BI(a,t){return 0===a||0===t})(C,H)&&Et.forEach(bn=>{let Sn=bn.currentSnapshot;Object.keys(Sn).forEach(Xn=>rt[Xn]=Sn[Xn])}),n=function jI(a,t,n){const C=Object.keys(n);if(C.length&&t.length){let ne=t[0],ge=[];if(C.forEach(Me=>{ne.hasOwnProperty(Me)||ge.push(Me),ne[Me]=n[Me]}),ge.length)for(var H=1;H<t.length;H++){let Me=t[H];ge.forEach(function(ze){Me[ze]=$T(a,ze)})}}return t}(t,n=n.map(bn=>th(bn,!1)),rt);const Kt=function IP(a,t){let n=null,C=null;return Array.isArray(t)&&t.length?(n=hb(t[0]),t.length>1&&(C=hb(t[t.length-1]))):t&&(n=hb(t)),n||C?new PP(a,n,C):null}(t,n);return new fM(t,n,ze,Kt)}}let FP=(()=>{class a extends CT{constructor(n,C){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(C.body,{id:"0",encapsulation:Kn.None,styles:[],data:{animation:[]}})}build(n){const C=this._nextAnimationId.toString();this._nextAnimationId++;const H=Array.isArray(n)?DT(n):n;return hM(this._renderer,null,C,"register",[H]),new NP(C,this._renderer)}}return a.\u0275fac=function(n){return new(n||a)(ta(O0),ta(Zl))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();class NP extends class $L{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new zP(this._id,t,n||{},this._renderer)}}class zP{constructor(t,n,C,H){this.id=t,this.element=n,this._renderer=H,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",C)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return hM(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function hM(a,t,n,C,H){return a.setProperty(t,`@@${n}:${C}`,H)}const dM="@.disabled";let BP=(()=>{class a{constructor(n,C,H){this.delegate=n,this.engine=C,this._zone=H,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),C.onRemovalComplete=(ne,ge)=>{const Me=null==ge?void 0:ge.parentNode(ne);Me&&ge.removeChild(Me,ne)}}createRenderer(n,C){const ne=this.delegate.createRenderer(n,C);if(!(n&&C&&C.data&&C.data.animation)){let Et=this._rendererCache.get(ne);return Et||(Et=new pM("",ne,this.engine),this._rendererCache.set(ne,Et)),Et}const ge=C.id,Me=C.id+"-"+this._currentId;this._currentId++,this.engine.register(Me,n);const ze=Et=>{Array.isArray(Et)?Et.forEach(ze):this.engine.registerTrigger(ge,Me,n,Et.name,Et)};return C.data.animation.forEach(ze),new jP(this,Me,ne,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,C,H){n>=0&&n<this._microtaskId?this._zone.run(()=>C(H)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ne=>{const[ge,Me]=ne;ge(Me)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([C,H]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return a.\u0275fac=function(n){return new(n||a)(ta(O0),ta(Fy),ta(ll))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();class pM{constructor(t,n,C){this.namespaceId=t,this.delegate=n,this.engine=C,this.destroyNode=this.delegate.destroyNode?H=>n.destroyNode(H):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,C,H=!0){this.delegate.insertBefore(t,n,C),this.engine.onInsert(this.namespaceId,n,t,H)}removeChild(t,n,C){this.engine.onRemove(this.namespaceId,n,this.delegate,C)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,C,H){this.delegate.setAttribute(t,n,C,H)}removeAttribute(t,n,C){this.delegate.removeAttribute(t,n,C)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,C,H){this.delegate.setStyle(t,n,C,H)}removeStyle(t,n,C){this.delegate.removeStyle(t,n,C)}setProperty(t,n,C){"@"==n.charAt(0)&&n==dM?this.disableAnimations(t,!!C):this.delegate.setProperty(t,n,C)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,C){return this.delegate.listen(t,n,C)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class jP extends pM{constructor(t,n,C,H){super(n,C,H),this.factory=t,this.namespaceId=n}setProperty(t,n,C){"@"==n.charAt(0)?"."==n.charAt(1)&&n==dM?this.disableAnimations(t,C=void 0===C||!!C):this.engine.process(this.namespaceId,t,n.substr(1),C):this.delegate.setProperty(t,n,C)}listen(t,n,C){if("@"==n.charAt(0)){const H=function VP(a){switch(a){case"body":return document.body;case"document":return document;case"window":return window;default:return a}}(t);let ne=n.substr(1),ge="";return"@"!=ne.charAt(0)&&([ne,ge]=function UP(a){const t=a.indexOf(".");return[a.substring(0,t),a.substr(t+1)]}(ne)),this.engine.listen(this.namespaceId,H,ne,ge,Me=>{this.factory.scheduleListenerCallback(Me._data||-1,C,Me)})}return this.delegate.listen(t,n,C)}}let HP=(()=>{class a extends Fy{constructor(n,C,H){super(n.body,C,H)}ngOnDestroy(){this.flush()}}return a.\u0275fac=function(n){return new(n||a)(ta(Zl),ta(Xx),ta(ob))},a.\u0275prov=wn({token:a,factory:a.\u0275fac}),a})();const gM=new ea("AnimationModuleType"),mM=[{provide:CT,useClass:FP},{provide:ob,useFactory:function qP(){return new lP}},{provide:Fy,useClass:HP},{provide:O0,useFactory:function GP(a,t,n){return new BP(a,t,n)},deps:[Hm,Fy,ll]}],yM=[{provide:Xx,useFactory:()=>new RP},{provide:gM,useValue:"BrowserAnimations"},...mM],WP=[{provide:Xx,useClass:HT},{provide:gM,useValue:"NoopAnimations"},...mM];let YP=(()=>{class a{static withConfig(n){return{ngModule:a,providers:n.disableAnimations?WP:yM}}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a}),a.\u0275inj=An({providers:yM,imports:[u3]}),a})();const vM=ug("fadeInAnimation",[Gh(":enter",[cl({opacity:0}),qh("2s ease-in",cl({opacity:1}))])]);let ZP=(()=>{class a{constructor(n,C){this.router=n,this.dataservice=C}onNavigate(n){"none"!==n&&(this.router.navigate(["/display"]),setTimeout(()=>{this.dataservice.selectedPlants(n),this.dataservice.analyteSelected.next("NOx"),this.dataservice.selectedPlant.next(n)},0))}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)(Jr(Hl),Jr(Yf))},a.\u0275cmp=Rn({type:a,selectors:[["app-home"]],hostVars:1,hostBindings:function(n,C){2&n&&pm("@fadeInAnimation",void 0)},decls:17,vars:0,consts:[[1,"welcome"],[1,"info"],["for","plantSelect"],["name","plantSelect","id","plantSelect",3,"change"],["plantSelect",""],["value","none"],["value","Plant A"],["value","Plant B"],["value","Plant C"]],template:function(n,C){if(1&n){const H=hm();na(0,"h1",0),Ua(1,"Welcome to my sample dashboard!"),fa(),na(2,"h4",1),Ua(3,"All data presented herein is for demonstration purposes only and does not reflect real emission values"),fa(),na(4,"label",2),Ua(5,"Please choose an example Plant:"),fa(),ml(6,"br"),na(7,"select",3,4),ms("change",function(){Qi(H);const ge=A0(8);return C.onNavigate(ge.value)}),na(9,"option",5),Ua(10,"--Please Select a Plant--"),fa(),na(11,"option",6),Ua(12,"Plant A"),fa(),na(13,"option",7),Ua(14,"Plant B"),fa(),na(15,"option",8),Ua(16,"Plant C"),fa()()}},directives:[yy,vy],styles:[".welcome[_ngcontent-%COMP%], .info[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}"],data:{animation:[vM]}}),a})();const XP=["container"];function $P(a,t){if(1&a&&(na(0,"tr")(1,"th",8),Ua(2),fa(),na(3,"td"),Ua(4),fa(),na(5,"td"),Ua(6),fa(),na(7,"td"),Ua(8),fa(),na(9,"td"),Ua(10),fa(),na(11,"td"),Ua(12),fa()()),2&a){const n=t.$implicit;ff("@listAnimation",void 0),ui(2),zl(n.name),ui(2),zl(n.NOx.toFixed(3)),ui(2),zl(n.CO2.toFixed(0)),ui(2),zl(n.CO.toFixed(3)),ui(2),zl(n.SO2.toFixed(3)),ui(2),zl(n.fuel)}}let KP=(()=>{class a{constructor(n,C){this.dataService=n,this.globalColors=C,this.state="hidden",this.plant=this.dataService.plants,this.boilers=this.plant,this.selectedPlant=this.dataService.selection,this.noxTotal=0,this.co2Total=0,this.coTotal=0,this.so2Total=0,this.displayArray=[],this.totalState="show"}ngOnInit(){setTimeout(()=>{this.container.nativeElement.style.backgroundColor=Fa.colormode.componentbgcolor,this.container.nativeElement.style.color=Fa.colormode.fontcolor},0),this.colorSelected=this.globalColors.colorSelected.subscribe(()=>{setTimeout(()=>{this.container.nativeElement.style.backgroundColor=Fa.colormode.componentbgcolor,this.container.nativeElement.style.color=Fa.colormode.fontcolor},0)}),this.dataService.selectedPlant.subscribe(n=>{this.totalState="show"==this.totalState?"hide":"show",setTimeout(()=>{this.displayArray=this.dataService.displayArray,this.noxTotal=0,this.co2Total=0,this.coTotal=0,this.so2Total=0,this.selectedPlant=n;for(let C of this.displayArray)this.noxTotal+=C.NOx,this.co2Total+=C.CO2,this.coTotal+=C.CO,this.so2Total+=C.SO2},200)})}ngOnDestroy(){this.colorSelected.unsubscribe()}}return a.\u0275fac=function(n){return new(n||a)(Jr(Yf),Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-data-table"]],viewQuery:function(n,C){if(1&n&&vu(XP,5),2&n){let H;jl(H=Vl())&&(C.container=H.first)}},decls:33,vars:6,consts:[[1,"container"],["container",""],[1,"heading"],[1,"table","table-responsive"],["scope","col"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"total"],["scope","row"]],template:function(n,C){1&n&&(na(0,"div",0,1)(2,"div")(3,"div",2),Ua(4,"2021 Emissions Averages"),fa(),na(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),Ua(9,"Source"),fa(),na(10,"th",4),Ua(11,"NOx (lb/MMBtu)"),fa(),na(12,"th",4),Ua(13,"CO2 (lb/MMBtu)"),fa(),na(14,"th",4),Ua(15,"CO (lb/MMBtu)"),fa(),na(16,"th",4),Ua(17,"SO2 (lb/MMBtu)"),fa(),na(18,"th",4),Ua(19,"Fuel"),fa()()(),na(20,"tbody",5),cm(21,$P,13,7,"tr",6),na(22,"tr",7)(23,"th",8),Ua(24,"Total"),fa(),na(25,"td"),Ua(26),fa(),na(27,"td"),Ua(28),fa(),na(29,"td"),Ua(30),fa(),na(31,"td"),Ua(32),fa()()()()()()),2&n&&(ui(21),ff("ngForOf",C.displayArray),ui(1),ff("@fade",C.totalState),ui(4),zl(C.noxTotal.toFixed(3)),ui(2),zl(C.co2Total.toFixed(0)),ui(2),zl(C.coTotal.toFixed(3)),ui(2),zl(C.so2Total.toFixed(3)))},directives:[zm],styles:[".container[_ngcontent-%COMP%]{background-color:var(--bgcolor);width:80%;height:384px;text-align:center;padding:18px 0 0;border-radius:10px;border:5px double #113A63;box-shadow:0 0 7px 5px #0e3155;position:relative;overflow-x:auto;overflow-y:hidden}.heading[_ngcontent-%COMP%]{font-weight:bolder;font-size:24px;margin-bottom:10px}table[_ngcontent-%COMP%]{padding:10px 20px 0;min-width:690px;margin:0 auto;table-layout:fixed;text-align:center;width:-moz-fit-content;width:fit-content;overflow:hidden;font-size:18px}th[_ngcontent-%COMP%]{text-align:center}td[_ngcontent-%COMP%]{text-align:center;position:relative}tbody[_ngcontent-%COMP%]{position:relative;height:125px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-top:none}thead[_ngcontent-%COMP%]{position:relative}.total[_ngcontent-%COMP%]{font-weight:bolder;font-size:20px;border:ridge 4px lightgray;box-shadow:1px 0 1px 1px #d3d3d3;margin-top:10px}tfoot[_ngcontent-%COMP%]{width:100%;font-weight:bolder;position:sticky}"],data:{animation:[ug("listAnimation",[Gh(":enter",[cl({opacity:0,transform:"translateY(-10px)"}),qh("600ms 700ms",cl({opacity:1,transform:"translateY(0)"}))]),Gh(":leave",[qh("600ms",cl({opacity:0,transform:"translateY(10px)"}))])]),ug("fade",[yp("show",cl({opacity:1})),yp("hide",cl({opacity:1})),Gh("*=>*",[qh("3000ms",LT([cl({opacity:1,offset:0}),cl({opacity:0,offset:.1}),cl({opacity:0,offset:.4}),cl({opacity:1,offset:1})]))])])]}}),a})();const JP=["h4"];let QP=(()=>{class a{constructor(n,C){this.dataService=n,this.globalcolors=C}selectedAnalyte(n){this.dataService.analyteSelected.next(n.target.textContent)}ngAfterViewInit(){this.header.nativeElement.style.color=Fa.colormode.fontcolor}ngOnInit(){this.colorSelected=this.globalcolors.colorSelected.subscribe(()=>{setTimeout(()=>{this.header.nativeElement.style.color=Fa.colormode.fontcolor},0)})}}return a.\u0275fac=function(n){return new(n||a)(Jr(Yf),Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-visual-list"]],viewQuery:function(n,C){if(1&n&&vu(JP,5),2&n){let H;jl(H=Vl())&&(C.header=H.first)}},decls:20,vars:0,consts:[[1,"container"],["h4",""],[1,"nav"],[3,"click"]],template:function(n,C){1&n&&(na(0,"div",0)(1,"h4",null,1),Ua(3,"Select a pollutant:"),fa(),na(4,"ul",2)(5,"li")(6,"a",3),ms("click",function(ne){return C.selectedAnalyte(ne)}),Ua(7,"NOx"),fa()(),na(8,"li")(9,"a",3),ms("click",function(ne){return C.selectedAnalyte(ne)}),Ua(10,"CO2"),fa()(),na(11,"li")(12,"a",3),ms("click",function(ne){return C.selectedAnalyte(ne)}),Ua(13,"CO"),fa()(),na(14,"li")(15,"a",3),ms("click",function(ne){return C.selectedAnalyte(ne)}),Ua(16,"SO2"),fa()(),na(17,"li")(18,"a",3),ms("click",function(ne){return C.selectedAnalyte(ne)}),Ua(19,"Total"),fa()()()())},styles:["a[_ngcontent-%COMP%]{z-index:2;cursor:pointer}.container[_ngcontent-%COMP%]{width:100%;margin:0;position:relative;z-index:2;text-align:center}ul[_ngcontent-%COMP%]{margin:0 auto;font-size:18px;width:-moz-fit-content;width:fit-content}li[_ngcontent-%COMP%]{border:#113A63 2px solid;margin:6px;box-shadow:0 0 3px 1px #a9a9a9;border-radius:4px;text-align:center}h4[_ngcontent-%COMP%]{font-weight:bolder}"]}),a})();const e9=["pieChart"],t9=["circle"],n9=["container"];let r9=(()=>{class a{constructor(n,C,H){this.dataService=n,this.plotlyService=C,this.globaleColors=H,this.natGas=0,this.coal=0,this.state="hidden",this.chartState="start",this.bgcolor=Fa.colormode.componentbgcolor,this.coalcolor=Fa.colormode.coalcolor,this.naturalgascolor=Fa.colormode.naturalgascolor,this.fontcolor=Fa.colormode.fontcolor,this.selectedAnalyte=""}animationEnded(n){}ngOnInit(){this.colorSelected=this.globaleColors.colorSelected.subscribe(()=>{setTimeout(()=>{this.bgcolor=Fa.colormode.chartbgcolor,this.coalcolor=Fa.colormode.coalcolor,this.naturalgascolor=Fa.colormode.naturalgascolor,this.fontcolor=Fa.colormode.fontcolor,this.drawChart(this.bgcolor,this.coalcolor,this.naturalgascolor,this.fontcolor)},0)}),this.analyteSelected=this.dataService.analyteSelected.subscribe(n=>{this.onBoilerSelected(n)})}onBoilerSelected(n){this.selectedAnalyte=n,"NOx"==n?(this.natGas=this.dataService.noxNatGas,this.coal=this.dataService.noxCoal):"CO"==n?(this.natGas=this.dataService.coNatGas,this.coal=this.dataService.coCoal):"CO2"==n?(this.natGas=this.dataService.co2NatGas,this.coal=this.dataService.co2Coal):"SO2"==n?(this.natGas=this.dataService.so2NatGas,this.coal=this.dataService.so2Coal):"Total"==n&&(this.natGas=this.dataService.totalNG,this.coal=this.dataService.totalCoal),this.state="hidden"==this.state?"show":"hidden",this.chartState="start"==this.chartState?"stop":"start",this.drawChart(this.bgcolor,this.coalcolor,this.naturalgascolor,this.fontcolor)}drawChart(n,C,H,ne){var ge=[{values:[this.coal,this.natGas],labels:["Coal","Natural Gas"],name:"Energy Consumption Profile",hole:.6,type:"pie",textposition:"outside",textinfo:"label+percent",marker:{colors:[C,H],line:{color:"#113A63",width:"2"}},sort:!1}],Me={font:{color:ne},plot_bgcolor:"transparent",autosize:!0,title:{x:.1,y:.1},annotations:[{font:{size:14},showarrow:!1,text:`<b>2021<br>${this.selectedAnalyte} Emissions <br>by Fuel</b>`}],showlegend:!1,paper_bgcolor:n};setTimeout(()=>{this.plotlyService.newPlot(this.pieChart.nativeElement,ge,Me),this.container.nativeElement.style.backgroundColor=Fa.colormode.componentbgcolor,this.circle.nativeElement.style.stroke=Fa.colormode.componentbgcolor},0)}ngOnDestroy(){this.analyteSelected.unsubscribe(),this.colorSelected.unsubscribe()}}return a.\u0275fac=function(n){return new(n||a)(Jr(Yf),Jr(no),Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-visuals"]],viewQuery:function(n,C){if(1&n&&(vu(e9,5),vu(t9,5),vu(n9,5)),2&n){let H;jl(H=Vl())&&(C.pieChart=H.first),jl(H=Vl())&&(C.circle=H.first),jl(H=Vl())&&(C.container=H.first)}},decls:12,vars:1,consts:[[1,"container"],["container",""],[1,"col-md-4"],[1,"col-md-8"],[1,"chartcontain"],["width","400","height","400",1,"circle"],["circle",""],["cx","200","cy","200","r","102"],["id","pieChart"],["pieChart",""]],template:function(n,C){1&n&&(na(0,"div",0,1)(2,"div",2),ml(3,"app-visual-list"),fa(),na(4,"div",3)(5,"div",4),function bl(){wr.lFrame.currentNamespace="svg"}(),na(6,"svg",5,6),ms("@chartAnimation.done",function(ne){return C.animationEnded(ne)}),ml(8,"circle",7),Ua(9,"> "),fa(),function kl(){!function tu(){wr.lFrame.currentNamespace=null}()}(),ml(10,"div",8,9),fa()()()),2&n&&(ui(6),ff("@chartAnimation",C.state))},directives:[QP],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;width:80%;height:384px;background-color:var(--bgcolor);border-radius:10px;border:5px double #113A63;box-shadow:0 0 7px 5px #0e3155;position:relative;overflow:hidden;z-index:1}.chartcontain[_ngcontent-%COMP%]{width:450px;left:43%;overflow:hidden;position:absolute;transform:translate(-50%);height:450px;top:-48px;background-color:transparent;z-index:1}.circle[_ngcontent-%COMP%]{position:absolute;stroke:var(--bgcolor);stroke-width:70px;stroke-dasharray:641;fill:none;transform-origin:50px 50px;transform:rotate(-90deg) translate(-335px,25px);z-index:2}.main-svg[_ngcontent-%COMP%]{top:-70px}"],data:{animation:[ug("chartAnimation",[yp("hidden",cl({strokeDashoffset:-641})),yp("show",cl({strokeDashoffset:-641})),Gh("*=>*",qh("1500ms",LT([cl({strokeDashoffset:0}),cl({strokeDashoffset:-641})])))]),ug("chartFade",[yp("start",cl({opacity:0})),yp("stop",cl({opacity:1})),Gh("start=>stop",qh("3000ms")),Gh("stop=>start",qh("2000ms"))])]}}),a})();const i9=["barChart"],a9=["container"];let o9=(()=>{class a{constructor(n,C,H){this.plotlyService=n,this.dataService=C,this.globalColors=H,this.bgcolor=Fa.colormode.chartbgcolor,this.coalcolor=Fa.colormode.coalcolor,this.naturalgascolor=Fa.colormode.naturalgascolor,this.fontcolor=Fa.colormode.fontcolor,this.ngArray=[],this.coalArray=[]}ngOnInit(){this.colorSelected=this.globalColors.colorSelected.subscribe(()=>{setTimeout(()=>{this.bgcolor=Fa.colormode.chartbgcolor,this.coalcolor=Fa.colormode.coalcolor,this.naturalgascolor=Fa.colormode.naturalgascolor,this.fontcolor=Fa.colormode.fontcolor,this.drawChart(this.bgcolor,this.coalcolor,this.naturalgascolor,this.fontcolor)},0)}),this.plantSelected=this.dataService.selectedPlant.subscribe(n=>{this.ngArray=[],this.coalArray=[];for(let C of this.dataService.plants)C.name==n&&(this.ngArray=C.ngQuarters,this.coalArray=C.coalQuarters);this.drawChart(this.bgcolor,this.coalcolor,this.naturalgascolor,this.fontcolor)})}drawChart(n,C,H,ne){var ze=[{x:["Q1","Q2","Q3","Q4"],y:this.ngArray,name:"Natural Gas",type:"bar",marker:{color:H}},{x:["Q1","Q2","Q3","Q4"],y:this.coalArray,name:"Coal",type:"bar",marker:{color:C}}],rt={title:{text:"<b>Cost per Fuel</b>",font:{size:22,color:ne}},yaxis:{title:"<b>USD (millions)<b>",titlefont:{size:16,color:ne},tickfont:{size:14,color:ne}},xaxis:{title:"<b>2021 Quarters<b>",titlefont:{size:16,color:ne},tickfont:{size:14,color:ne}},barmode:"stack",autosize:!0,margin:{autoexpand:!0,b:"50"},height:"400",font:{fontcolor:ne},paper_bgcolor:n,plot_bgcolor:n,legend:{font:{color:ne}}};setTimeout(()=>{this.plotlyService.newPlot(this.barChart.nativeElement,ze,rt,{responsive:!0}),this.container.nativeElement.style.backgroundColor=Fa.colormode.componentbgcolor},0)}ngOnDestroy(){this.plantSelected.unsubscribe(),this.colorSelected.unsubscribe()}}return a.\u0275fac=function(n){return new(n||a)(Jr(no),Jr(Yf),Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-bar-chart"]],viewQuery:function(n,C){if(1&n&&(vu(i9,5),vu(a9,5)),2&n){let H;jl(H=Vl())&&(C.barChart=H.first),jl(H=Vl())&&(C.container=H.first)}},decls:5,vars:0,consts:[[1,"container"],["container",""],[1,"chartContain"],["id","barChart"],["barChart",""]],template:function(n,C){1&n&&(na(0,"div",0,1)(2,"div",2),ml(3,"div",3,4),fa()())},styles:[".container[_ngcontent-%COMP%]{height:465px;width:95%;text-align:center;padding:10px;border-radius:10px;border:5px double #113A63;box-shadow:0 0 7px 5px #0e3155;position:relative;overflow:hidden}.chartContain[_ngcontent-%COMP%]{width:80%;left:50%;overflow:hidden;position:absolute;transform:translate(-50%);background-color:transparent}"]}),a})();const s9=["lineChart"],l9=["container"];function u9(a,t){if(1&a&&(na(0,"option"),Ua(1),fa()),2&a){const n=t.$implicit;ui(1),zl(n.name)}}let c9=(()=>{class a{constructor(n,C,H){this.plotlyService=n,this.dataService=C,this.globalColors=H,this.bgcolor=Fa.colormode.componentbgcolor,this.coalcolor=Fa.colormode.coalcolor,this.naturalgascolor=Fa.colormode.naturalgascolor,this.fontcolor=Fa.colormode.fontcolor,this.boilerSelection="",this.boilerArray=[],this.dataArray=[]}onBoilerSelect(n){for(let C of this.boilerArray)n==C.name&&(this.dataArray=C.yearData,this.boilerSelection=n);this.drawChart(this.dataArray,this.bgcolor,this.coalcolor,this.naturalgascolor,this.fontcolor)}ngOnInit(){this.colorSelected=this.globalColors.colorSelected.subscribe(()=>{setTimeout(()=>{this.bgcolor=Fa.colormode.chartbgcolor,this.coalcolor=Fa.colormode.coalcolor,this.naturalgascolor=Fa.colormode.naturalgascolor,this.fontcolor=Fa.colormode.fontcolor,this.drawChart(this.dataArray,this.bgcolor,this.coalcolor,this.naturalgascolor,this.fontcolor)},0)}),this.plantSelected=this.dataService.selectedPlant.subscribe(n=>{this.boilerArray=this.dataService.displayArray,this.dataArray=this.boilerArray[0].yearData,this.onBoilerSelect(this.boilerArray[0].name)})}ngOnDestroy(){this.plantSelected.unsubscribe(),this.colorSelected.unsubscribe()}drawChart(n,C,H,ne,ge){var ze=[{x:["January","February","March","April","May","June","July","August","September","October","November","December"],y:n,type:"scatter",name:"Coal",line:{color:H}}],rt={font:{color:ge},paper_bgcolor:C,plot_bgcolor:C,title:{text:`<b>Annual NOx Emissions for ${this.boilerSelection}<b>`,font:{size:22}},margin:{autoexpand:!0,l:"100"},autosize:!0,yaxis:{title:"<b>Emission Rate (lb/MMBtu)<b>",titlefont:{size:16,color:ge},tickfont:{size:14,color:ge}},xaxis:{title:"<b>2021<b>",titlefont:{size:16,color:ge},tickfont:{size:14,color:ge}}};setTimeout(()=>{this.plotlyService.newPlot(this.lineChart.nativeElement,ze,rt,{responsive:!0}),this.container.nativeElement.style.backgroundColor=Fa.colormode.componentbgcolor},0)}}return a.\u0275fac=function(n){return new(n||a)(Jr(no),Jr(Yf),Jr(Fa))},a.\u0275cmp=Rn({type:a,selectors:[["app-line-chart"]],viewQuery:function(n,C){if(1&n&&(vu(s9,5),vu(l9,5)),2&n){let H;jl(H=Vl())&&(C.lineChart=H.first),jl(H=Vl())&&(C.container=H.first)}},decls:7,vars:1,consts:[[1,"container"],["container",""],["name","boilerSelect","id","boilerSelect",3,"change"],["boilerSelect",""],[4,"ngFor","ngForOf"],["id","lineChart"],["lineChart",""]],template:function(n,C){if(1&n){const H=hm();na(0,"div",0,1)(2,"select",2,3),ms("change",function(){Qi(H);const ge=A0(3);return C.onBoilerSelect(ge.value)}),cm(4,u9,2,1,"option",4),fa(),ml(5,"div",5,6),fa()}2&n&&(ui(4),ff("ngForOf",C.boilerArray))},directives:[zm,yy,vy],styles:[".container[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:465px;background-color:var(--bgcolor);border-radius:10px;border:5px double #113A63;box-shadow:0 0 7px 5px #0e3155;position:relative;overflow:hidden;padding:10px}select[_ngcontent-%COMP%]{position:absolute;top:50px;right:70px;z-index:2;padding:5px}"]}),a})(),f9=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=Rn({type:a,selectors:[["app-display"]],hostVars:1,hostBindings:function(n,C){2&n&&pm("@fadeInAnimation",void 0)},decls:15,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-6"]],template:function(n,C){1&n&&(na(0,"div",0),ml(1,"h1"),na(2,"div",1)(3,"div",2),ml(4,"app-data-table"),fa(),na(5,"div",2),ml(6,"app-visuals"),fa()(),ml(7,"br")(8,"br")(9,"br"),na(10,"div",1)(11,"div",2),ml(12,"app-bar-chart"),fa(),na(13,"div",2),ml(14,"app-line-chart"),fa()()())},directives:[KP,r9,o9,c9],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%}"],data:{animation:[vM]}}),a})();m3.plotlyjs=XL;const h9=[{path:"",component:ZP},{path:"display",component:f9}];let d9=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=vr({type:a,bootstrap:[ZL]}),a.\u0275inj=An({providers:[],imports:[[u3,UL,m3,YP,O8.forRoot(h9)]]}),a})();(function DE(){_w=!1})(),q6().bootstrapModule(d9).catch(a=>console.error(a))},102:Tp=>{Tp.exports=function _(oe,se,v){function x(e,o){if(!se[e]){if(!oe[e]){if(T)return T(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var r=se[e]={exports:{}};oe[e][0].call(r.exports,function(y){return x(oe[e][1][y]||y)},r,r.exports,_,oe,se,v)}return se[e].exports}for(var T=void 0,b=0;b<v.length;b++)x(v[b]);return x}({1:[function(_,oe,se){"use strict";var v=_("../src/lib"),x={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var T in x){var b=T.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");v.addStyleRule(b,x[T])}},{"../src/lib":503}],2:[function(_,oe,se){"use strict";oe.exports=_("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/box")},{"../src/traces/box":679}],6:[function(_,oe,se){"use strict";oe.exports=_("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(_,oe,se){"use strict";oe.exports=_("../src/core")},{"../src/core":481}],15:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(_,oe,se){"use strict";oe.exports=_("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(_,oe,se){"use strict";oe.exports=_("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/image")},{"../src/traces/image":852}],27:[function(_,oe,se){"use strict";var v=_("./core");v.register([_("./bar"),_("./box"),_("./heatmap"),_("./histogram"),_("./histogram2d"),_("./histogram2dcontour"),_("./contour"),_("./scatterternary"),_("./violin"),_("./funnel"),_("./waterfall"),_("./image"),_("./pie"),_("./sunburst"),_("./treemap"),_("./icicle"),_("./funnelarea"),_("./scatter3d"),_("./surface"),_("./isosurface"),_("./volume"),_("./mesh3d"),_("./cone"),_("./streamtube"),_("./scattergeo"),_("./choropleth"),_("./scattergl"),_("./splom"),_("./pointcloud"),_("./heatmapgl"),_("./parcoords"),_("./parcats"),_("./scattermapbox"),_("./choroplethmapbox"),_("./densitymapbox"),_("./sankey"),_("./indicator"),_("./table"),_("./carpet"),_("./scattercarpet"),_("./contourcarpet"),_("./ohlc"),_("./candlestick"),_("./scatterpolar"),_("./scatterpolargl"),_("./barpolar"),_("./scattersmith"),_("./aggregate"),_("./filter"),_("./groupby"),_("./sort"),_("./calendars")]),oe.exports=v},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(_,oe,se){"use strict";oe.exports=_("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/table")},{"../src/traces/table":1073}],52:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(_,oe,se){"use strict";oe.exports=_("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(_,oe,se){var v,x;v=this,x=function(v,x,T,b,e){"use strict";function o(le){return le.target.depth}function i(le,ue){return le.sourceLinks.length?le.depth:ue-1}function l(le){return function(){return le}}e=e&&e.hasOwnProperty("default")?e.default:e;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function y(le,ue){return s(le.source,ue.source)||le.index-ue.index}function h(le,ue){return s(le.target,ue.target)||le.index-ue.index}function s(le,ue){return le.partOfCycle===ue.partOfCycle?le.y0-ue.y0:"top"===le.circularLinkType||"bottom"===ue.circularLinkType?-1:1}function d(le){return le.value}function p(le){return(le.y0+le.y1)/2}function c(le){return p(le.source)}function g(le){return p(le.target)}function m(le){return le.index}function u(le){return le.nodes}function w(le){return le.links}function f(le,ue){var de=le.get(ue);if(!de)throw new Error("missing: "+ue);return de}function A(le,ue){return ue(le)}function M(le,ue,de){var he=0;if(null===de){for(var be=[],me=0;me<le.links.length;me++){var _e=le.links[me],Ee=_e.source.index,De=_e.target.index;be[Ee]||(be[Ee]=[]),be[De]||(be[De]=[]),-1===be[Ee].indexOf(De)&&be[Ee].push(De)}var Se=e(be);Se.sort(function(Te,Ie){return Te.length-Ie.length});var Fe={};for(me=0;me<Se.length;me++){var ve=Se[me].slice(-2);Fe[ve[0]]||(Fe[ve[0]]={}),Fe[ve[0]][ve[1]]=!0}le.links.forEach(function(Te){var Ie=Te.target.index,Ce=Te.source.index;Ie===Ce||Fe[Ce]&&Fe[Ce][Ie]?(Te.circular=!0,Te.circularLinkID=he,he+=1):Te.circular=!1})}else le.links.forEach(function(Te){Te.source[de]<Te.target[de]?Te.circular=!1:(Te.circular=!0,Te.circularLinkID=he,he+=1)})}function k(le,ue){var de=0,he=0;le.links.forEach(function(be){be.circular&&(be.circularLinkType=be.source.circularLinkType||be.target.circularLinkType?be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:de<he?"top":"bottom","top"==be.circularLinkType?de+=1:he+=1,le.nodes.forEach(function(me){A(me,ue)!=A(be.source,ue)&&A(me,ue)!=A(be.target,ue)||(me.circularLinkType=be.circularLinkType)}))}),le.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),ee(be,ue)&&(be.circularLinkType=be.source.circularLinkType))})}function E(le){var ue=Math.abs(le.y1-le.y0),de=Math.abs(le.target.x0-le.source.x1);return Math.atan(de/ue)}function P(le,ue){var de=0;le.sourceLinks.forEach(function(be){de=be.circular&&!ee(be,ue)?de+1:de});var he=0;return le.targetLinks.forEach(function(be){he=be.circular&&!ee(be,ue)?he+1:he}),de+he}function D(le){var de=0;le.source.sourceLinks.forEach(function(me){de=me.circular?de+1:de});var be=0;return le.target.targetLinks.forEach(function(me){be=me.circular?be+1:be}),!(de>1||be>1)}function F(le,ue,de){return le.sort(L),le.forEach(function(he,be){var me,_e,Ee=0;if(ee(he,de)&&D(he))he.circularPathData.verticalBuffer=Ee+he.width/2;else{for(var De=0;De<be;De++)if(!((me=le[be]).source.column<(_e=le[De]).target.column||me.target.column>_e.source.column)){var Se=le[De].circularPathData.verticalBuffer+le[De].width/2+ue;Ee=Se>Ee?Se:Ee}he.circularPathData.verticalBuffer=Ee+he.width/2}}),le}function R(le,ue,de,he){var be=x.min(le.links,function(me){return me.source.y0});le.links.forEach(function(me){me.circular&&(me.circularPathData={})}),F(le.links.filter(function(me){return"top"==me.circularLinkType}),ue,he),F(le.links.filter(function(me){return"bottom"==me.circularLinkType}),ue,he),le.links.forEach(function(me){if(me.circular){if(me.circularPathData.arcRadius=me.width+10,me.circularPathData.leftNodeBuffer=5,me.circularPathData.rightNodeBuffer=5,me.circularPathData.sourceWidth=me.source.x1-me.source.x0,me.circularPathData.sourceX=me.source.x0+me.circularPathData.sourceWidth,me.circularPathData.targetX=me.target.x0,me.circularPathData.sourceY=me.y0,me.circularPathData.targetY=me.y1,ee(me,he)&&D(me))me.circularPathData.leftSmallArcRadius=10+me.width/2,me.circularPathData.leftLargeArcRadius=10+me.width/2,me.circularPathData.rightSmallArcRadius=10+me.width/2,me.circularPathData.rightLargeArcRadius=10+me.width/2,"bottom"==me.circularLinkType?(me.circularPathData.verticalFullExtent=me.source.y1+25+me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.rightLargeArcRadius):(me.circularPathData.verticalFullExtent=me.source.y0-25-me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.rightLargeArcRadius);else{var _e=me.source.column,Ee=me.circularLinkType,De=le.links.filter(function(ve){return ve.source.column==_e&&ve.circularLinkType==Ee});De.sort("bottom"==me.circularLinkType?B:I);var Se=0;De.forEach(function(ve,Te){ve.circularLinkID==me.circularLinkID&&(me.circularPathData.leftSmallArcRadius=10+me.width/2+Se,me.circularPathData.leftLargeArcRadius=10+me.width/2+Te*ue+Se),Se+=ve.width}),_e=me.target.column,(De=le.links.filter(function(ve){return ve.target.column==_e&&ve.circularLinkType==Ee})).sort("bottom"==me.circularLinkType?Z:V),Se=0,De.forEach(function(ve,Te){ve.circularLinkID==me.circularLinkID&&(me.circularPathData.rightSmallArcRadius=10+me.width/2+Se,me.circularPathData.rightLargeArcRadius=10+me.width/2+Te*ue+Se),Se+=ve.width}),"bottom"==me.circularLinkType?(me.circularPathData.verticalFullExtent=Math.max(de,me.source.y1,me.target.y1)+25+me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.rightLargeArcRadius):(me.circularPathData.verticalFullExtent=be-25-me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.rightLargeArcRadius)}me.circularPathData.leftInnerExtent=me.circularPathData.sourceX+me.circularPathData.leftNodeBuffer,me.circularPathData.rightInnerExtent=me.circularPathData.targetX-me.circularPathData.rightNodeBuffer,me.circularPathData.leftFullExtent=me.circularPathData.sourceX+me.circularPathData.leftLargeArcRadius+me.circularPathData.leftNodeBuffer,me.circularPathData.rightFullExtent=me.circularPathData.targetX-me.circularPathData.rightLargeArcRadius-me.circularPathData.rightNodeBuffer}if(me.circular)me.path="top"==(ve=me).circularLinkType?"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 0 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY-ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 0 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 0 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY-ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 0 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY:"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 1 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY+ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 1 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 1 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY+ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 1 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY;else{var Fe=b.linkHorizontal().source(function(ve){return[ve.source.x0+(ve.source.x1-ve.source.x0),ve.y0]}).target(function(ve){return[ve.target.x0,ve.y1]});me.path=Fe(me)}var ve})}function L(le,ue){return Y(le)==Y(ue)?"bottom"==le.circularLinkType?B(le,ue):I(le,ue):Y(ue)-Y(le)}function I(le,ue){return le.y0-ue.y0}function B(le,ue){return ue.y0-le.y0}function V(le,ue){return le.y1-ue.y1}function Z(le,ue){return ue.y1-le.y1}function Y(le){return le.target.column-le.source.column}function Q(le){return le.target.x0-le.source.x1}function re(le,ue){var de=E(le),he=Q(ue)/Math.tan(de);return"up"==G(le)?le.y1+he:le.y1-he}function $(le,ue){var de=E(le),he=Q(ue)/Math.tan(de);return"up"==G(le)?le.y1-he:le.y1+he}function J(le,ue,de,he){le.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var me=be.source.column+1,_e=be.target.column-1,Ee=1,De=_e-me+1;for(Ee=1;me<=_e;me++,Ee++)le.nodes.forEach(function(Se){if(Se.column==me){var Fe,ve=Ee/(De+1),Te=Math.pow(1-ve,3),Ie=3*ve*Math.pow(1-ve,2),Ce=3*Math.pow(ve,2)*(1-ve),Re=Math.pow(ve,3),Ue=Te*be.y0+Ie*be.y0+Ce*be.y1+Re*be.y1,qe=Ue-be.width/2,Xe=Ue+be.width/2;qe>Se.y0&&qe<Se.y1?(Fe=Se.y1-qe+10,Se=j(Se,Fe="bottom"==Se.circularLinkType?Fe:-Fe,ue,de),le.nodes.forEach(function(st){A(st,he)!=A(Se,he)&&st.column==Se.column&&ie(Se,st)&&j(st,Fe,ue,de)})):(Xe>Se.y0&&Xe<Se.y1||qe<Se.y0&&Xe>Se.y1)&&(Se=j(Se,Fe=Xe-Se.y0+10,ue,de),le.nodes.forEach(function(st){A(st,he)!=A(Se,he)&&st.column==Se.column&&st.y0<Se.y1&&st.y1>Se.y1&&j(st,Fe,ue,de)}))}})}})}function ie(le,ue){return le.y0>ue.y0&&le.y0<ue.y1||le.y1>ue.y0&&le.y1<ue.y1||le.y0<ue.y0&&le.y1>ue.y1}function j(le,ue,de,he){return le.y0+ue>=de&&le.y1+ue<=he&&(le.y0=le.y0+ue,le.y1=le.y1+ue,le.targetLinks.forEach(function(be){be.y1=be.y1+ue}),le.sourceLinks.forEach(function(be){be.y0=be.y0+ue})),le}function q(le,ue,de,he){le.nodes.forEach(function(be){he&&be.y+(be.y1-be.y0)>ue&&(be.y=be.y-(be.y+(be.y1-be.y0)-ue));var me=le.links.filter(function(De){return A(De.source,de)==A(be,de)}),_e=me.length;_e>1&&me.sort(function(De,Se){if(!De.circular&&!Se.circular){if(De.target.column==Se.target.column||!ae(De,Se))return De.y1-Se.y1;if(De.target.column>Se.target.column){var Fe=$(Se,De);return De.y1-Fe}if(Se.target.column>De.target.column)return $(De,Se)-Se.y1}return De.circular&&!Se.circular?"top"==De.circularLinkType?-1:1:Se.circular&&!De.circular?"top"==Se.circularLinkType?1:-1:De.circular&&Se.circular?De.circularLinkType===Se.circularLinkType&&"top"==De.circularLinkType?De.target.column===Se.target.column?De.target.y1-Se.target.y1:Se.target.column-De.target.column:De.circularLinkType===Se.circularLinkType&&"bottom"==De.circularLinkType?De.target.column===Se.target.column?Se.target.y1-De.target.y1:De.target.column-Se.target.column:"top"==De.circularLinkType?-1:1:void 0});var Ee=be.y0;me.forEach(function(De){De.y0=Ee+De.width/2,Ee+=De.width}),me.forEach(function(De,Se){if("bottom"==De.circularLinkType){for(var Fe=Se+1,ve=0;Fe<_e;Fe++)ve+=me[Fe].width;De.y0=be.y1-ve-De.width/2}})})}function W(le,ue,de){le.nodes.forEach(function(he){var be=le.links.filter(function(Ee){return A(Ee.target,de)==A(he,de)}),me=be.length;me>1&&be.sort(function(Ee,De){if(!Ee.circular&&!De.circular){if(Ee.source.column==De.source.column||!ae(Ee,De))return Ee.y0-De.y0;if(De.source.column<Ee.source.column){var Se=re(De,Ee);return Ee.y0-Se}if(Ee.source.column<De.source.column)return re(Ee,De)-De.y0}return Ee.circular&&!De.circular?"top"==Ee.circularLinkType?-1:1:De.circular&&!Ee.circular?"top"==De.circularLinkType?1:-1:Ee.circular&&De.circular?Ee.circularLinkType===De.circularLinkType&&"top"==Ee.circularLinkType?Ee.source.column===De.source.column?Ee.source.y1-De.source.y1:Ee.source.column-De.source.column:Ee.circularLinkType===De.circularLinkType&&"bottom"==Ee.circularLinkType?Ee.source.column===De.source.column?Ee.source.y1-De.source.y1:De.source.column-Ee.source.column:"top"==Ee.circularLinkType?-1:1:void 0});var _e=he.y0;be.forEach(function(Ee){Ee.y1=_e+Ee.width/2,_e+=Ee.width}),be.forEach(function(Ee,De){if("bottom"==Ee.circularLinkType){for(var Se=De+1,Fe=0;Se<me;Se++)Fe+=be[Se].width;Ee.y1=he.y1-Fe-Ee.width/2}})})}function ae(le,ue){return G(le)==G(ue)}function G(le){return le.y0-le.y1>0?"up":"down"}function ee(le,ue){return A(le.source,ue)==A(le.target,ue)}function te(le,ue,de){var he=le.nodes,be=le.links,me=!1,_e=!1;if(be.forEach(function(Se){"top"==Se.circularLinkType?me=!0:"bottom"==Se.circularLinkType&&(_e=!0)}),0==me||0==_e){var Ee=x.min(he,function(Se){return Se.y0}),De=(de-ue)/(x.max(he,function(Se){return Se.y1})-Ee);he.forEach(function(Se){var Fe=(Se.y1-Se.y0)*De;Se.y0=(Se.y0-Ee)*De,Se.y1=Se.y0+Fe}),be.forEach(function(Se){Se.y0=(Se.y0-Ee)*De,Se.y1=(Se.y1-Ee)*De,Se.width=Se.width*De})}}v.sankeyCircular=function(){var le,ue,de=0,he=0,be=1,me=1,_e=24,Ee=m,De=i,Se=u,Fe=w,ve=32,Te=2,Ie=null;function Ce(){var He={nodes:Se.apply(null,arguments),links:Fe.apply(null,arguments)};Re(He),M(He,0,Ie),Ue(He),qe(He),k(He,Ee),Xe(He,ve,Ee),st(He);for(var $e=4,et=0;et<$e;et++)q(He,me,Ee),W(He,0,Ee),J(He,he,me,Ee),q(He,me,Ee),W(He,0,Ee);return te(He,he,me),R(He,Te,me,Ee),He}function Re(He){He.nodes.forEach(function(et,tt){et.index=tt,et.sourceLinks=[],et.targetLinks=[]});var $e=T.map(He.nodes,Ee);return He.links.forEach(function(et,tt){et.index=tt;var ct=et.source,bt=et.target;"object"!==(void 0===ct?"undefined":r(ct))&&(ct=et.source=f($e,ct)),"object"!==(void 0===bt?"undefined":r(bt))&&(bt=et.target=f($e,bt)),ct.sourceLinks.push(et),bt.targetLinks.push(et)}),He}function Ue(He){He.nodes.forEach(function($e){$e.partOfCycle=!1,$e.value=Math.max(x.sum($e.sourceLinks,d),x.sum($e.targetLinks,d)),$e.sourceLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)}),$e.targetLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)})})}function qe(He){var $e,et,tt;for($e=He.nodes,et=[],tt=0;$e.length;++tt,$e=et,et=[])$e.forEach(function(ct){ct.depth=tt,ct.sourceLinks.forEach(function(bt){et.indexOf(bt.target)<0&&!bt.circular&&et.push(bt.target)})});for($e=He.nodes,et=[],tt=0;$e.length;++tt,$e=et,et=[])$e.forEach(function(ct){ct.height=tt,ct.targetLinks.forEach(function(bt){et.indexOf(bt.source)<0&&!bt.circular&&et.push(bt.source)})});He.nodes.forEach(function(ct){ct.column=Math.floor(De.call(null,ct,tt))})}function Xe(He,$e,et){var tt=T.nest().key(function(Ct){return Ct.column}).sortKeys(x.ascending).entries(He.nodes).map(function(Ct){return Ct.values});(function(Ct){if(ue){var dt=1/0;tt.forEach(function(en){var Ge=me*ue/(en.length+1);dt=Ge<dt?Ge:dt}),le=dt}var at=x.min(tt,function(en){return(me-he-(en.length-1)*le)/x.sum(en,d)});at*=.3,He.links.forEach(function(en){en.width=en.value*at});var en,Ge,Qe,Rt,gt,Be,Nt=(Ge=0,Qe=0,Rt=0,gt=0,Be=x.max((en=He).nodes,function(Ve){return Ve.column}),en.links.forEach(function(Ve){Ve.circular&&("top"==Ve.circularLinkType?Ge+=Ve.width:Qe+=Ve.width,0==Ve.target.column&&(gt+=Ve.width),Ve.source.column==Be&&(Rt+=Ve.width))}),{top:Ge=Ge>0?Ge+25+10:Ge,bottom:Qe=Qe>0?Qe+25+10:Qe,left:gt=gt>0?gt+25+10:gt,right:Rt=Rt>0?Rt+25+10:Rt}),rn=function(en,Ge){var Qe=x.max(en.nodes,function(Le){return Le.column}),Rt=be-de,gt=me-he,Be=Rt/(Rt+Ge.right+Ge.left),Ve=gt/(gt+Ge.top+Ge.bottom);return de=de*Be+Ge.left,be=0==Ge.right?be:be*Be,he=he*Ve+Ge.top,me*=Ve,en.nodes.forEach(function(Le){Le.x0=de+Le.column*((be-de-_e)/Qe),Le.x1=Le.x0+_e}),Ve}(He,Nt);at*=rn,He.links.forEach(function(en){en.width=en.value*at}),tt.forEach(function(en){var Ge=en.length;en.forEach(function(Qe,Rt){Qe.depth==tt.length-1&&1==Ge||0==Qe.depth&&1==Ge?(Qe.y0=me/2-Qe.value*at,Qe.y1=Qe.y0+Qe.value*at):Qe.partOfCycle?0==P(Qe,Ct)?(Qe.y0=me/2+Rt,Qe.y1=Qe.y0+Qe.value*at):"top"==Qe.circularLinkType?(Qe.y0=he+Rt,Qe.y1=Qe.y0+Qe.value*at):(Qe.y0=me-Qe.value*at-Rt,Qe.y1=Qe.y0+Qe.value*at):0==Nt.top||0==Nt.bottom?(Qe.y0=(me-he)/Ge*Rt,Qe.y1=Qe.y0+Qe.value*at):(Qe.y0=(me-he)/2-Ge/2+Rt,Qe.y1=Qe.y0+Qe.value*at)})})})(et),Ut();for(var ct=1,bt=$e;bt>0;--bt)At(ct*=.99,et),Ut();function At(Ct,dt){var at=tt.length;tt.forEach(function(Nt){var rn=Nt.length,en=Nt[0].depth;Nt.forEach(function(Ge){var Qe;if((Ge.sourceLinks.length||Ge.targetLinks.length)&&!(Ge.partOfCycle&&P(Ge,dt)>0))if(0==en&&1==rn)Ge.y0=me/2-(Qe=Ge.y1-Ge.y0)/2,Ge.y1=me/2+Qe/2;else if(en==at-1&&1==rn)Ge.y0=me/2-(Qe=Ge.y1-Ge.y0)/2,Ge.y1=me/2+Qe/2;else{var Rt=x.mean(Ge.sourceLinks,g),gt=x.mean(Ge.targetLinks,c),Be=((Rt&&gt?(Rt+gt)/2:Rt||gt)-p(Ge))*Ct;Ge.y0+=Be,Ge.y1+=Be}})})}function Ut(){tt.forEach(function(Ct){var dt,at,Nt,rn=he,en=Ct.length;for(Ct.sort(s),Nt=0;Nt<en;++Nt)(at=rn-(dt=Ct[Nt]).y0)>0&&(dt.y0+=at,dt.y1+=at),rn=dt.y1+le;if((at=rn-le-me)>0)for(rn=dt.y0-=at,dt.y1-=at,Nt=en-2;Nt>=0;--Nt)(at=(dt=Ct[Nt]).y1+le-rn)>0&&(dt.y0-=at,dt.y1-=at),rn=dt.y0})}}function st(He){He.nodes.forEach(function($e){$e.sourceLinks.sort(h),$e.targetLinks.sort(y)}),He.nodes.forEach(function($e){var et=$e.y0,tt=et,ct=$e.y1,bt=ct;$e.sourceLinks.forEach(function(At){At.circular?(At.y0=ct-At.width/2,ct-=At.width):(At.y0=et+At.width/2,et+=At.width)}),$e.targetLinks.forEach(function(At){At.circular?(At.y1=bt-At.width/2,bt-=At.width):(At.y1=tt+At.width/2,tt+=At.width)})})}return Ce.nodeId=function(He){return arguments.length?(Ee="function"==typeof He?He:l(He),Ce):Ee},Ce.nodeAlign=function(He){return arguments.length?(De="function"==typeof He?He:l(He),Ce):De},Ce.nodeWidth=function(He){return arguments.length?(_e=+He,Ce):_e},Ce.nodePadding=function(He){return arguments.length?(le=+He,Ce):le},Ce.nodes=function(He){return arguments.length?(Se="function"==typeof He?He:l(He),Ce):Se},Ce.links=function(He){return arguments.length?(Fe="function"==typeof He?He:l(He),Ce):Fe},Ce.size=function(He){return arguments.length?(de=he=0,be=+He[0],me=+He[1],Ce):[be-de,me-he]},Ce.extent=function(He){return arguments.length?(de=+He[0][0],be=+He[1][0],he=+He[0][1],me=+He[1][1],Ce):[[de,he],[be,me]]},Ce.iterations=function(He){return arguments.length?(ve=+He,Ce):ve},Ce.circularLinkGap=function(He){return arguments.length?(Te=+He,Ce):Te},Ce.nodePaddingRatio=function(He){return arguments.length?(ue=+He,Ce):ue},Ce.sortNodes=function(He){return arguments.length?(Ie=He,Ce):Ie},Ce.update=function(He){return k(He,Ee),st(He),He.links.forEach(function($e){$e.circular&&($e.circularLinkType=$e.y0+$e.y1<me?"top":"bottom",$e.source.circularLinkType=$e.circularLinkType,$e.target.circularLinkType=$e.circularLinkType)}),q(He,me,Ee,!1),W(He,0,Ee),R(He,Te,me,Ee),He},Ce},v.sankeyCenter=function(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?x.min(le.sourceLinks,o)-1:0},v.sankeyLeft=function(le){return le.depth},v.sankeyRight=function(le,ue){return ue-1-le.height},v.sankeyJustify=i,Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-array"),_("d3-collection"),_("d3-shape"),_("elementary-circuits-directed-graph")):x(v.d3=v.d3||{},v.d3,v.d3,v.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(_,oe,se){var v,x;v=this,x=function(v,x,T,b){"use strict";function e(A){return A.target.depth}function o(A,M){return A.sourceLinks.length?A.depth:M-1}function i(A){return function(){return A}}function l(A,M){return y(A.source,M.source)||A.index-M.index}function r(A,M){return y(A.target,M.target)||A.index-M.index}function y(A,M){return A.y0-M.y0}function h(A){return A.value}function s(A){return(A.y0+A.y1)/2}function d(A){return s(A.source)*A.value}function p(A){return s(A.target)*A.value}function c(A){return A.index}function g(A){return A.nodes}function m(A){return A.links}function u(A,M){var k=A.get(M);if(!k)throw new Error("missing: "+M);return k}function w(A){return[A.source.x1,A.y0]}function f(A){return[A.target.x0,A.y1]}v.sankey=function(){var A=0,M=0,k=1,E=1,P=24,D=8,F=c,R=o,L=g,I=m,B=32;function V(){var J={nodes:L.apply(null,arguments),links:I.apply(null,arguments)};return Z(J),Y(J),Q(J),re(J),$(J),J}function Z(J){J.nodes.forEach(function(j,q){j.index=q,j.sourceLinks=[],j.targetLinks=[]});var ie=T.map(J.nodes,F);J.links.forEach(function(j,q){j.index=q;var W=j.source,ae=j.target;"object"!=typeof W&&(W=j.source=u(ie,W)),"object"!=typeof ae&&(ae=j.target=u(ie,ae)),W.sourceLinks.push(j),ae.targetLinks.push(j)})}function Y(J){J.nodes.forEach(function(ie){ie.value=Math.max(x.sum(ie.sourceLinks,h),x.sum(ie.targetLinks,h))})}function Q(J){var ie,j,q;for(ie=J.nodes,j=[],q=0;ie.length;++q,ie=j,j=[])ie.forEach(function(ae){ae.depth=q,ae.sourceLinks.forEach(function(G){j.indexOf(G.target)<0&&j.push(G.target)})});for(ie=J.nodes,j=[],q=0;ie.length;++q,ie=j,j=[])ie.forEach(function(ae){ae.height=q,ae.targetLinks.forEach(function(G){j.indexOf(G.source)<0&&j.push(G.source)})});var W=(k-A-P)/(q-1);J.nodes.forEach(function(ae){ae.x1=(ae.x0=A+Math.max(0,Math.min(q-1,Math.floor(R.call(null,ae,q))))*W)+P})}function re(J){var ie=T.nest().key(function(ee){return ee.x0}).sortKeys(x.ascending).entries(J.nodes).map(function(ee){return ee.values});(function(){var ee=x.max(ie,function(ue){return ue.length}),te=2/3*(E-M)/(ee-1);D>te&&(D=te);var le=x.min(ie,function(ue){return(E-M-(ue.length-1)*D)/x.sum(ue,h)});ie.forEach(function(ue){ue.forEach(function(de,he){de.y1=(de.y0=he)+de.value*le})}),J.links.forEach(function(ue){ue.width=ue.value*le})})(),G();for(var j=1,q=B;q>0;--q)ae(j*=.99),G(),W(j),G();function W(ee){ie.forEach(function(te){te.forEach(function(le){if(le.targetLinks.length){var ue=(x.sum(le.targetLinks,d)/x.sum(le.targetLinks,h)-s(le))*ee;le.y0+=ue,le.y1+=ue}})})}function ae(ee){ie.slice().reverse().forEach(function(te){te.forEach(function(le){if(le.sourceLinks.length){var ue=(x.sum(le.sourceLinks,p)/x.sum(le.sourceLinks,h)-s(le))*ee;le.y0+=ue,le.y1+=ue}})})}function G(){ie.forEach(function(ee){var te,le,ue,de=M,he=ee.length;for(ee.sort(y),ue=0;ue<he;++ue)(le=de-(te=ee[ue]).y0)>0&&(te.y0+=le,te.y1+=le),de=te.y1+D;if((le=de-D-E)>0)for(de=te.y0-=le,te.y1-=le,ue=he-2;ue>=0;--ue)(le=(te=ee[ue]).y1+D-de)>0&&(te.y0-=le,te.y1-=le),de=te.y0})}}function $(J){J.nodes.forEach(function(ie){ie.sourceLinks.sort(r),ie.targetLinks.sort(l)}),J.nodes.forEach(function(ie){var j=ie.y0,q=j;ie.sourceLinks.forEach(function(W){W.y0=j+W.width/2,j+=W.width}),ie.targetLinks.forEach(function(W){W.y1=q+W.width/2,q+=W.width})})}return V.update=function(J){return $(J),J},V.nodeId=function(J){return arguments.length?(F="function"==typeof J?J:i(J),V):F},V.nodeAlign=function(J){return arguments.length?(R="function"==typeof J?J:i(J),V):R},V.nodeWidth=function(J){return arguments.length?(P=+J,V):P},V.nodePadding=function(J){return arguments.length?(D=+J,V):D},V.nodes=function(J){return arguments.length?(L="function"==typeof J?J:i(J),V):L},V.links=function(J){return arguments.length?(I="function"==typeof J?J:i(J),V):I},V.size=function(J){return arguments.length?(A=M=0,k=+J[0],E=+J[1],V):[k-A,E-M]},V.extent=function(J){return arguments.length?(A=+J[0][0],k=+J[1][0],M=+J[0][1],E=+J[1][1],V):[[A,M],[k,E]]},V.iterations=function(J){return arguments.length?(B=+J,V):B},V},v.sankeyCenter=function(A){return A.targetLinks.length?A.depth:A.sourceLinks.length?x.min(A.sourceLinks,e)-1:0},v.sankeyLeft=function(A){return A.depth},v.sankeyRight=function(A,M){return M-1-A.height},v.sankeyJustify=o,v.sankeyLinkHorizontal=function(){return b.linkHorizontal().source(w).target(f)},Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-array"),_("d3-collection"),_("d3-shape")):x(v.d3=v.d3||{},v.d3,v.d3,v.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(_,oe,se){(function(){var v={version:"3.8.0"},x=[].slice,T=function(pe){return x.call(pe)},b=self.document;function e(pe){return pe&&(pe.ownerDocument||pe.document||pe).documentElement}function o(pe){return pe&&(pe.ownerDocument&&pe.ownerDocument.defaultView||pe.document&&pe||pe.defaultView)}if(b)try{T(b.documentElement.childNodes)}catch(pe){T=function(O){for(var z=O.length,U=new Array(z);z--;)U[z]=O[z];return U}}if(Date.now||(Date.now=function(){return+new Date}),b)try{b.createElement("DIV").style.setProperty("opacity",0,"")}catch(pe){var i=this.Element.prototype,l=i.setAttribute,r=i.setAttributeNS,y=this.CSSStyleDeclaration.prototype,h=y.setProperty;i.setAttribute=function(O,z){l.call(this,O,z+"")},i.setAttributeNS=function(O,z,U){r.call(this,O,z,U+"")},y.setProperty=function(O,z,U){h.call(this,O,z+"",U)}}function s(pe,O){return pe<O?-1:pe>O?1:pe>=O?0:NaN}function d(pe){return null===pe?NaN:+pe}function p(pe){return!isNaN(pe)}function c(pe){return{left:function(O,z,U,X){for(arguments.length<3&&(U=0),arguments.length<4&&(X=O.length);U<X;){var fe=U+X>>>1;pe(O[fe],z)<0?U=fe+1:X=fe}return U},right:function(O,z,U,X){for(arguments.length<3&&(U=0),arguments.length<4&&(X=O.length);U<X;){var fe=U+X>>>1;pe(O[fe],z)>0?X=fe:U=fe+1}return U}}}v.ascending=s,v.descending=function(pe,O){return O<pe?-1:O>pe?1:O>=pe?0:NaN},v.min=function(pe,O){var z,U,X=-1,fe=pe.length;if(1===arguments.length){for(;++X<fe;)if(null!=(U=pe[X])&&U>=U){z=U;break}for(;++X<fe;)null!=(U=pe[X])&&z>U&&(z=U)}else{for(;++X<fe;)if(null!=(U=O.call(pe,pe[X],X))&&U>=U){z=U;break}for(;++X<fe;)null!=(U=O.call(pe,pe[X],X))&&z>U&&(z=U)}return z},v.max=function(pe,O){var z,U,X=-1,fe=pe.length;if(1===arguments.length){for(;++X<fe;)if(null!=(U=pe[X])&&U>=U){z=U;break}for(;++X<fe;)null!=(U=pe[X])&&U>z&&(z=U)}else{for(;++X<fe;)if(null!=(U=O.call(pe,pe[X],X))&&U>=U){z=U;break}for(;++X<fe;)null!=(U=O.call(pe,pe[X],X))&&U>z&&(z=U)}return z},v.extent=function(pe,O){var z,U,X,fe=-1,ye=pe.length;if(1===arguments.length){for(;++fe<ye;)if(null!=(U=pe[fe])&&U>=U){z=X=U;break}for(;++fe<ye;)null!=(U=pe[fe])&&(z>U&&(z=U),X<U&&(X=U))}else{for(;++fe<ye;)if(null!=(U=O.call(pe,pe[fe],fe))&&U>=U){z=X=U;break}for(;++fe<ye;)null!=(U=O.call(pe,pe[fe],fe))&&(z>U&&(z=U),X<U&&(X=U))}return[z,X]},v.sum=function(pe,O){var z,U=0,X=pe.length,fe=-1;if(1===arguments.length)for(;++fe<X;)p(z=+pe[fe])&&(U+=z);else for(;++fe<X;)p(z=+O.call(pe,pe[fe],fe))&&(U+=z);return U},v.mean=function(pe,O){var z,U=0,X=pe.length,fe=-1,ye=X;if(1===arguments.length)for(;++fe<X;)p(z=d(pe[fe]))?U+=z:--ye;else for(;++fe<X;)p(z=d(O.call(pe,pe[fe],fe)))?U+=z:--ye;if(ye)return U/ye},v.quantile=function(pe,O){var z=(pe.length-1)*O+1,U=Math.floor(z),X=+pe[U-1],fe=z-U;return fe?X+fe*(pe[U]-X):X},v.median=function(pe,O){var z,U=[],X=pe.length,fe=-1;if(1===arguments.length)for(;++fe<X;)p(z=d(pe[fe]))&&U.push(z);else for(;++fe<X;)p(z=d(O.call(pe,pe[fe],fe)))&&U.push(z);if(U.length)return v.quantile(U.sort(s),.5)},v.variance=function(pe,O){var z,U,X=pe.length,fe=0,ye=0,we=-1,ke=0;if(1===arguments.length)for(;++we<X;)p(z=d(pe[we]))&&(ye+=(U=z-fe)*(z-(fe+=U/++ke)));else for(;++we<X;)p(z=d(O.call(pe,pe[we],we)))&&(ye+=(U=z-fe)*(z-(fe+=U/++ke)));if(ke>1)return ye/(ke-1)},v.deviation=function(){var pe=v.variance.apply(this,arguments);return pe&&Math.sqrt(pe)};var g=c(s);function m(pe){return pe.length}v.bisectLeft=g.left,v.bisect=v.bisectRight=g.right,v.bisector=function(pe){return c(1===pe.length?function(O,z){return s(pe(O),z)}:pe)},v.shuffle=function(pe,O,z){(fe=arguments.length)<3&&(z=pe.length,fe<2&&(O=0));for(var U,X,fe=z-O;fe;)X=Math.random()*fe--|0,U=pe[fe+O],pe[fe+O]=pe[X+O],pe[X+O]=U;return pe},v.permute=function(pe,O){for(var z=O.length,U=new Array(z);z--;)U[z]=pe[O[z]];return U},v.pairs=function(pe){for(var O=0,z=pe.length-1,U=pe[0],X=new Array(z<0?0:z);O<z;)X[O]=[U,U=pe[++O]];return X},v.transpose=function(pe){if(!(X=pe.length))return[];for(var O=-1,z=v.min(pe,m),U=new Array(z);++O<z;)for(var X,fe=-1,ye=U[O]=new Array(X);++fe<X;)ye[fe]=pe[fe][O];return U},v.zip=function(){return v.transpose(arguments)},v.keys=function(pe){var O=[];for(var z in pe)O.push(z);return O},v.values=function(pe){var O=[];for(var z in pe)O.push(pe[z]);return O},v.entries=function(pe){var O=[];for(var z in pe)O.push({key:z,value:pe[z]});return O},v.merge=function(pe){for(var O,z,U,X=pe.length,fe=-1,ye=0;++fe<X;)ye+=pe[fe].length;for(z=new Array(ye);--X>=0;)for(O=(U=pe[X]).length;--O>=0;)z[--ye]=U[O];return z};var u=Math.abs;function w(pe){for(var O=1;pe*O%1;)O*=10;return O}function f(pe,O){for(var z in O)Object.defineProperty(pe.prototype,z,{value:O[z],enumerable:!1})}function A(){this._=Object.create(null)}function M(pe){return"__proto__"==(pe+="")||"\0"===pe[0]?"\0"+pe:pe}function k(pe){return"\0"===(pe+="")[0]?pe.slice(1):pe}function E(pe){return M(pe)in this._}function P(pe){return(pe=M(pe))in this._&&delete this._[pe]}function D(){var pe=[];for(var O in this._)pe.push(k(O));return pe}function F(){var pe=0;for(var O in this._)++pe;return pe}function R(){for(var pe in this._)return!1;return!0}function L(){this._=Object.create(null)}function I(pe){return pe}function B(pe,O,z){return function(){var U=z.apply(O,arguments);return U===O?pe:U}}function V(pe,O){if(O in pe)return O;O=O.charAt(0).toUpperCase()+O.slice(1);for(var z=0,U=Z.length;z<U;++z){var X=Z[z]+O;if(X in pe)return X}}v.range=function(pe,O,z){if(arguments.length<3&&(z=1,arguments.length<2&&(O=pe,pe=0)),(O-pe)/z==1/0)throw new Error("infinite range");var U,X=[],fe=w(u(z)),ye=-1;if(pe*=fe,O*=fe,(z*=fe)<0)for(;(U=pe+z*++ye)>O;)X.push(U/fe);else for(;(U=pe+z*++ye)<O;)X.push(U/fe);return X},v.map=function(pe,O){var z=new A;if(pe instanceof A)pe.forEach(function(we,ke){z.set(we,ke)});else if(Array.isArray(pe)){var U,X=-1,fe=pe.length;if(1===arguments.length)for(;++X<fe;)z.set(X,pe[X]);else for(;++X<fe;)z.set(O.call(pe,U=pe[X],X),U)}else for(var ye in pe)z.set(ye,pe[ye]);return z},f(A,{has:E,get:function(pe){return this._[M(pe)]},set:function(pe,O){return this._[M(pe)]=O},remove:P,keys:D,values:function(){var pe=[];for(var O in this._)pe.push(this._[O]);return pe},entries:function(){var pe=[];for(var O in this._)pe.push({key:k(O),value:this._[O]});return pe},size:F,empty:R,forEach:function(pe){for(var O in this._)pe.call(this,k(O),this._[O])}}),v.nest=function(){var pe,O,z={},U=[],X=[];function fe(ye,we,ke){if(ke>=U.length)return O?O.call(z,we):pe?we.sort(pe):we;for(var Pe,Ze,nt,ht,St=-1,jt=we.length,Lt=U[ke++],Ft=new A;++St<jt;)(ht=Ft.get(Pe=Lt(Ze=we[St])))?ht.push(Ze):Ft.set(Pe,[Ze]);return ye?(Ze=ye(),nt=function(kt,Xt){Ze.set(kt,fe(ye,Xt,ke))}):(Ze={},nt=function(kt,Xt){Ze[kt]=fe(ye,Xt,ke)}),Ft.forEach(nt),Ze}return z.map=function(ye,we){return fe(we,ye,0)},z.entries=function(ye){return function we(ke,Pe){if(Pe>=U.length)return ke;var Ze=[],nt=X[Pe++];return ke.forEach(function(ht,St){Ze.push({key:ht,values:we(St,Pe)})}),nt?Ze.sort(function(ht,St){return nt(ht.key,St.key)}):Ze}(fe(v.map,ye,0),0)},z.key=function(ye){return U.push(ye),z},z.sortKeys=function(ye){return X[U.length-1]=ye,z},z.sortValues=function(ye){return pe=ye,z},z.rollup=function(ye){return O=ye,z},z},v.set=function(pe){var O=new L;if(pe)for(var z=0,U=pe.length;z<U;++z)O.add(pe[z]);return O},f(L,{has:E,add:function(pe){return this._[M(pe+="")]=!0,pe},remove:P,values:D,size:F,empty:R,forEach:function(pe){for(var O in this._)pe.call(this,k(O))}}),v.behavior={},v.rebind=function(pe,O){for(var z,U=1,X=arguments.length;++U<X;)pe[z=arguments[U]]=B(pe,O,O[z]);return pe};var Z=["webkit","ms","moz","Moz","o","O"];function Y(){}function Q(){}function re(pe){var O=[],z=new A;function U(){for(var X,fe=O,ye=-1,we=fe.length;++ye<we;)(X=fe[ye].on)&&X.apply(this,arguments);return pe}return U.on=function(X,fe){var ye,we=z.get(X);return arguments.length<2?we&&we.on:(we&&(we.on=null,O=O.slice(0,ye=O.indexOf(we)).concat(O.slice(ye+1)),z.remove(X)),fe&&O.push(z.set(X,{on:fe})),pe)},U}function $(){v.event.preventDefault()}function J(){for(var pe,O=v.event;pe=O.sourceEvent;)O=pe;return O}function ie(pe){for(var O=new Q,z=0,U=arguments.length;++z<U;)O[arguments[z]]=re(O);return O.of=function(X,fe){return function(ye){try{var we=ye.sourceEvent=v.event;ye.target=pe,v.event=ye,O[ye.type].apply(X,fe)}finally{v.event=we}}},O}v.dispatch=function(){for(var pe=new Q,O=-1,z=arguments.length;++O<z;)pe[arguments[O]]=re(pe);return pe},Q.prototype.on=function(pe,O){var z=pe.indexOf("."),U="";if(z>=0&&(U=pe.slice(z+1),pe=pe.slice(0,z)),pe)return arguments.length<2?this[pe].on(U):this[pe].on(U,O);if(2===arguments.length){if(null==O)for(pe in this)this.hasOwnProperty(pe)&&this[pe].on(U,null);return this}},v.event=null,v.requote=function(pe){return pe.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,q={}.__proto__?function(pe,O){pe.__proto__=O}:function(pe,O){for(var z in O)pe[z]=O[z]};function W(pe){return q(pe,te),pe}var ae=function(pe,O){return O.querySelector(pe)},G=function(pe,O){return O.querySelectorAll(pe)},ee=function(pe,O){var z=pe.matches||pe[V(pe,"matchesSelector")];return(ee=function(U,X){return z.call(U,X)})(pe,O)};"function"==typeof Sizzle&&(ae=function(pe,O){return Sizzle(pe,O)[0]||null},G=Sizzle,ee=Sizzle.matchesSelector),v.selection=function(){return v.select(b.documentElement)};var te=v.selection.prototype=[];function le(pe){return"function"==typeof pe?pe:function(){return ae(pe,this)}}function ue(pe){return"function"==typeof pe?pe:function(){return G(pe,this)}}te.select=function(pe){var O,z,U,X,fe=[];pe=le(pe);for(var ye=-1,we=this.length;++ye<we;){fe.push(O=[]),O.parentNode=(U=this[ye]).parentNode;for(var ke=-1,Pe=U.length;++ke<Pe;)(X=U[ke])?(O.push(z=pe.call(X,X.__data__,ke,ye)),z&&"__data__"in X&&(z.__data__=X.__data__)):O.push(null)}return W(fe)},te.selectAll=function(pe){var O,z,U=[];pe=ue(pe);for(var X=-1,fe=this.length;++X<fe;)for(var ye=this[X],we=-1,ke=ye.length;++we<ke;)(z=ye[we])&&(U.push(O=T(pe.call(z,z.__data__,we,X))),O.parentNode=z);return W(U)};var de="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function be(pe,O){return pe=v.ns.qualify(pe),null==O?pe.local?function(){this.removeAttributeNS(pe.space,pe.local)}:function(){this.removeAttribute(pe)}:"function"==typeof O?pe.local?function(){var z=O.apply(this,arguments);null==z?this.removeAttributeNS(pe.space,pe.local):this.setAttributeNS(pe.space,pe.local,z)}:function(){var z=O.apply(this,arguments);null==z?this.removeAttribute(pe):this.setAttribute(pe,z)}:pe.local?function(){this.setAttributeNS(pe.space,pe.local,O)}:function(){this.setAttribute(pe,O)}}function me(pe){return pe.trim().replace(/\s+/g," ")}function _e(pe){return new RegExp("(?:^|\\s+)"+v.requote(pe)+"(?:\\s+|$)","g")}function Ee(pe){return(pe+"").trim().split(/^|\s+/)}function De(pe,O){var z=(pe=Ee(pe).map(Se)).length;return"function"==typeof O?function(){for(var U=-1,X=O.apply(this,arguments);++U<z;)pe[U](this,X)}:function(){for(var U=-1;++U<z;)pe[U](this,O)}}function Se(pe){var O=_e(pe);return function(z,U){if(X=z.classList)return U?X.add(pe):X.remove(pe);var X=z.getAttribute("class")||"";U?(O.lastIndex=0,O.test(X)||z.setAttribute("class",me(X+" "+pe))):z.setAttribute("class",me(X.replace(O," ")))}}function Fe(pe,O,z){return null==O?function(){this.style.removeProperty(pe)}:"function"==typeof O?function(){var U=O.apply(this,arguments);null==U?this.style.removeProperty(pe):this.style.setProperty(pe,U,z)}:function(){this.style.setProperty(pe,O,z)}}function ve(pe,O){return null==O?function(){delete this[pe]}:"function"==typeof O?function(){var z=O.apply(this,arguments);null==z?delete this[pe]:this[pe]=z}:function(){this[pe]=O}}function Te(pe){return"function"==typeof pe?pe:(pe=v.ns.qualify(pe)).local?function(){return this.ownerDocument.createElementNS(pe.space,pe.local)}:function(){var O=this.ownerDocument,z=this.namespaceURI;return z===de&&O.documentElement.namespaceURI===de?O.createElement(pe):O.createElementNS(z,pe)}}function Ie(){var pe=this.parentNode;pe&&pe.removeChild(this)}function Ce(pe){return{__data__:pe}}function Re(pe){return function(){return ee(this,pe)}}function Ue(pe){return arguments.length||(pe=s),function(O,z){return O&&z?pe(O.__data__,z.__data__):!O-!z}}function qe(pe,O){for(var z=0,U=pe.length;z<U;z++)for(var X,fe=pe[z],ye=0,we=fe.length;ye<we;ye++)(X=fe[ye])&&O(X,ye,z);return pe}function Xe(pe){return q(pe,st),pe}v.ns={prefix:he,qualify:function(pe){var O=pe.indexOf(":"),z=pe;return O>=0&&"xmlns"!==(z=pe.slice(0,O))&&(pe=pe.slice(O+1)),he.hasOwnProperty(z)?{space:he[z],local:pe}:pe}},te.attr=function(pe,O){if(arguments.length<2){if("string"==typeof pe){var z=this.node();return(pe=v.ns.qualify(pe)).local?z.getAttributeNS(pe.space,pe.local):z.getAttribute(pe)}for(O in pe)this.each(be(O,pe[O]));return this}return this.each(be(pe,O))},te.classed=function(pe,O){if(arguments.length<2){if("string"==typeof pe){var z=this.node(),U=(pe=Ee(pe)).length,X=-1;if(O=z.classList){for(;++X<U;)if(!O.contains(pe[X]))return!1}else for(O=z.getAttribute("class");++X<U;)if(!_e(pe[X]).test(O))return!1;return!0}for(O in pe)this.each(De(O,pe[O]));return this}return this.each(De(pe,O))},te.style=function(pe,O,z){var U=arguments.length;if(U<3){if("string"!=typeof pe){for(z in U<2&&(O=""),pe)this.each(Fe(z,pe[z],O));return this}if(U<2){var X=this.node();return o(X).getComputedStyle(X,null).getPropertyValue(pe)}z=""}return this.each(Fe(pe,O,z))},te.property=function(pe,O){if(arguments.length<2){if("string"==typeof pe)return this.node()[pe];for(O in pe)this.each(ve(O,pe[O]));return this}return this.each(ve(pe,O))},te.text=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var O=pe.apply(this,arguments);this.textContent=null==O?"":O}:null==pe?function(){this.textContent=""}:function(){this.textContent=pe}):this.node().textContent},te.html=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var O=pe.apply(this,arguments);this.innerHTML=null==O?"":O}:null==pe?function(){this.innerHTML=""}:function(){this.innerHTML=pe}):this.node().innerHTML},te.append=function(pe){return pe=Te(pe),this.select(function(){return this.appendChild(pe.apply(this,arguments))})},te.insert=function(pe,O){return pe=Te(pe),O=le(O),this.select(function(){return this.insertBefore(pe.apply(this,arguments),O.apply(this,arguments)||null)})},te.remove=function(){return this.each(Ie)},te.data=function(pe,O){var z,U,X=-1,fe=this.length;if(!arguments.length){for(pe=new Array(fe=(z=this[0]).length);++X<fe;)(U=z[X])&&(pe[X]=U.__data__);return pe}function ye(Ze,nt){var ht,St,jt,Lt=Ze.length,Ft=nt.length,kt=Math.min(Lt,Ft),Xt=new Array(Ft),Gt=new Array(Ft),Qt=new Array(Lt);if(O){var gn,kn=new A,jn=new Array(Lt);for(ht=-1;++ht<Lt;)(St=Ze[ht])&&(kn.has(gn=O.call(St,St.__data__,ht))?Qt[ht]=St:kn.set(gn,St),jn[ht]=gn);for(ht=-1;++ht<Ft;)(St=kn.get(gn=O.call(nt,jt=nt[ht],ht)))?!0!==St&&(Xt[ht]=St,St.__data__=jt):Gt[ht]=Ce(jt),kn.set(gn,!0);for(ht=-1;++ht<Lt;)ht in jn&&!0!==kn.get(jn[ht])&&(Qt[ht]=Ze[ht])}else{for(ht=-1;++ht<kt;)jt=nt[ht],(St=Ze[ht])?(St.__data__=jt,Xt[ht]=St):Gt[ht]=Ce(jt);for(;ht<Ft;++ht)Gt[ht]=Ce(nt[ht]);for(;ht<Lt;++ht)Qt[ht]=Ze[ht]}Gt.update=Xt,Gt.parentNode=Xt.parentNode=Qt.parentNode=Ze.parentNode,we.push(Gt),ke.push(Xt),Pe.push(Qt)}var we=Xe([]),ke=W([]),Pe=W([]);if("function"==typeof pe)for(;++X<fe;)ye(z=this[X],pe.call(z,z.parentNode.__data__,X));else for(;++X<fe;)ye(z=this[X],pe);return ke.enter=function(){return we},ke.exit=function(){return Pe},ke},te.datum=function(pe){return arguments.length?this.property("__data__",pe):this.property("__data__")},te.filter=function(pe){var O,z,U,X=[];"function"!=typeof pe&&(pe=Re(pe));for(var fe=0,ye=this.length;fe<ye;fe++){X.push(O=[]),O.parentNode=(z=this[fe]).parentNode;for(var we=0,ke=z.length;we<ke;we++)(U=z[we])&&pe.call(U,U.__data__,we,fe)&&O.push(U)}return W(X)},te.order=function(){for(var pe=-1,O=this.length;++pe<O;)for(var z,U=this[pe],X=U.length-1,fe=U[X];--X>=0;)(z=U[X])&&(fe&&fe!==z.nextSibling&&fe.parentNode.insertBefore(z,fe),fe=z);return this},te.sort=function(pe){pe=Ue.apply(this,arguments);for(var O=-1,z=this.length;++O<z;)this[O].sort(pe);return this.order()},te.each=function(pe){return qe(this,function(O,z,U){pe.call(O,O.__data__,z,U)})},te.call=function(pe){var O=T(arguments);return pe.apply(O[0]=this,O),this},te.empty=function(){return!this.node()},te.node=function(){for(var pe=0,O=this.length;pe<O;pe++)for(var z=this[pe],U=0,X=z.length;U<X;U++){var fe=z[U];if(fe)return fe}return null},te.size=function(){var pe=0;return qe(this,function(){++pe}),pe};var st=[];function He(pe){var O,z;return function(U,X,fe){var ye,we=pe[fe].update,ke=we.length;for(fe!=z&&(z=fe,O=0),X>=O&&(O=X+1);!(ye=we[O])&&++O<ke;);return ye}}function $e(pe,O,z){var U="__on"+pe,X=pe.indexOf("."),fe=tt;X>0&&(pe=pe.slice(0,X));var ye=et.get(pe);function we(){var ke=this[U];ke&&(this.removeEventListener(pe,ke,ke.$),delete this[U])}return ye&&(pe=ye,fe=ct),X?O?function(){var ke=fe(O,T(arguments));we.call(this),this.addEventListener(pe,this[U]=ke,ke.$=z),ke._=O}:we:O?Y:function(){var ke,Pe=new RegExp("^__on([^.]+)"+v.requote(pe)+"$");for(var Ze in this)if(ke=Ze.match(Pe)){var nt=this[Ze];this.removeEventListener(ke[1],nt,nt.$),delete this[Ze]}}}v.selection.enter=Xe,v.selection.enter.prototype=st,st.append=te.append,st.empty=te.empty,st.node=te.node,st.call=te.call,st.size=te.size,st.select=function(pe){for(var O,z,U,X,fe,ye=[],we=-1,ke=this.length;++we<ke;){U=(X=this[we]).update,ye.push(O=[]),O.parentNode=X.parentNode;for(var Pe=-1,Ze=X.length;++Pe<Ze;)(fe=X[Pe])?(O.push(U[Pe]=z=pe.call(X.parentNode,fe.__data__,Pe,we)),z.__data__=fe.__data__):O.push(null)}return W(ye)},st.insert=function(pe,O){return arguments.length<2&&(O=He(this)),te.insert.call(this,pe,O)},v.select=function(pe){var O;return"string"==typeof pe?(O=[ae(pe,b)]).parentNode=b.documentElement:(O=[pe]).parentNode=e(pe),W([O])},v.selectAll=function(pe){var O;return"string"==typeof pe?(O=T(G(pe,b))).parentNode=b.documentElement:(O=T(pe)).parentNode=null,W([O])},te.on=function(pe,O,z){var U=arguments.length;if(U<3){if("string"!=typeof pe){for(z in U<2&&(O=!1),pe)this.each($e(z,pe[z],O));return this}if(U<2)return(U=this.node()["__on"+pe])&&U._;z=!1}return this.each($e(pe,O,z))};var et=v.map({mouseenter:"mouseover",mouseleave:"mouseout"});function tt(pe,O){return function(z){var U=v.event;v.event=z,O[0]=this.__data__;try{pe.apply(this,O)}finally{v.event=U}}}function ct(pe,O){var z=tt(pe,O);return function(U){var X=U.relatedTarget;X&&(X===this||8&X.compareDocumentPosition(this))||z.call(this,U)}}b&&et.forEach(function(pe){"on"+pe in b&&et.remove(pe)});var bt,At=0;function Ut(pe){var O=".dragsuppress-"+ ++At,z="click"+O,U=v.select(o(pe)).on("touchmove"+O,$).on("dragstart"+O,$).on("selectstart"+O,$);if(null==bt&&(bt=!("onselectstart"in pe)&&V(pe.style,"userSelect")),bt){var X=e(pe).style,fe=X[bt];X[bt]="none"}return function(ye){if(U.on(O,null),bt&&(X[bt]=fe),ye){var we=function(){U.on(z,null)};U.on(z,function(){$(),we()},!0),setTimeout(we,0)}}}v.mouse=function(pe){return dt(pe,J())};var Ct=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function dt(pe,O){O.changedTouches&&(O=O.changedTouches[0]);var z=pe.ownerSVGElement||pe;if(z.createSVGPoint){var U=z.createSVGPoint();if(Ct<0){var X=o(pe);if(X.scrollX||X.scrollY){var fe=(z=v.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ct=!(fe.f||fe.e),z.remove()}}return Ct?(U.x=O.pageX,U.y=O.pageY):(U.x=O.clientX,U.y=O.clientY),[(U=U.matrixTransform(pe.getScreenCTM().inverse())).x,U.y]}var ye=pe.getBoundingClientRect();return[O.clientX-ye.left-pe.clientLeft,O.clientY-ye.top-pe.clientTop]}function at(){return v.event.changedTouches[0].identifier}v.touch=function(pe,O,z){if(arguments.length<3&&(z=O,O=J().changedTouches),O)for(var U,X=0,fe=O.length;X<fe;++X)if((U=O[X]).identifier===z)return dt(pe,U)},v.behavior.drag=function(){var pe=ie(X,"drag","dragstart","dragend"),O=null,z=fe(Y,v.mouse,o,"mousemove","mouseup"),U=fe(at,v.touch,I,"touchmove","touchend");function X(){this.on("mousedown.drag",z).on("touchstart.drag",U)}function fe(ye,we,ke,Pe,Ze){return function(){var nt,ht=this,St=v.event.target.correspondingElement||v.event.target,jt=ht.parentNode,Lt=pe.of(ht,arguments),Ft=0,kt=ye(),Xt=".drag"+(null==kt?"":"-"+kt),Gt=v.select(ke(St)).on(Pe+Xt,kn).on(Ze+Xt,jn),Qt=Ut(St),gn=we(jt,kt);function kn(){var Nn,mr,gr=we(jt,kt);gr&&(Ft|=(Nn=gr[0]-gn[0])|(mr=gr[1]-gn[1]),gn=gr,Lt({type:"drag",x:gr[0]+nt[0],y:gr[1]+nt[1],dx:Nn,dy:mr}))}function jn(){we(jt,kt)&&(Gt.on(Pe+Xt,null).on(Ze+Xt,null),Qt(Ft),Lt({type:"dragend"}))}nt=O?[(nt=O.apply(ht,arguments)).x-gn[0],nt.y-gn[1]]:[0,0],Lt({type:"dragstart"})}}return X.origin=function(ye){return arguments.length?(O=ye,X):O},v.rebind(X,pe,"on")},v.touches=function(pe,O){return arguments.length<2&&(O=J().touches),O?T(O).map(function(z){var U=dt(pe,z);return U.identifier=z.identifier,U}):[]};var Nt=1e-6,rn=Math.PI,en=2*rn,Ge=en-Nt,Qe=rn/2,Rt=rn/180,gt=180/rn;function Be(pe){return pe>1?Qe:pe<-1?-Qe:Math.asin(pe)}function Ve(pe){return((pe=Math.exp(pe))+1/pe)/2}var Le=Math.SQRT2;v.interpolateZoom=function(pe,O){var z,U,X=pe[0],fe=pe[1],ye=pe[2],Pe=O[2],Ze=O[0]-X,nt=O[1]-fe,ht=Ze*Ze+nt*nt;if(ht<1e-12)U=Math.log(Pe/ye)/Le,z=function(Xt){return[X+Xt*Ze,fe+Xt*nt,ye*Math.exp(Le*Xt*U)]};else{var St=Math.sqrt(ht),jt=(Pe*Pe-ye*ye+4*ht)/(2*ye*2*St),Lt=(Pe*Pe-ye*ye-4*ht)/(2*Pe*2*St),Ft=Math.log(Math.sqrt(jt*jt+1)-jt),kt=Math.log(Math.sqrt(Lt*Lt+1)-Lt);U=(kt-Ft)/Le,z=function(Xt){var Gt,jn,Qt=Xt*U,gn=Ve(Ft),kn=ye/(2*St)*(gn*(Gt=Le*Qt+Ft,((Gt=Math.exp(2*Gt))-1)/(Gt+1))-(jn=Ft,((jn=Math.exp(jn))-1/jn)/2));return[X+kn*Ze,fe+kn*nt,ye*gn/Ve(Le*Qt+Ft)]}}return z.duration=1e3*U,z},v.behavior.zoom=function(){var pe,O,z,U,X,fe,ye,we,ke,Pe={x:0,y:0,k:1},Ze=[960,500],nt=ft,ht=250,St=0,jt="mousedown.zoom",Lt="mousemove.zoom",Ft="mouseup.zoom",kt="touchstart.zoom",Xt=ie(Gt,"zoomstart","zoom","zoomend");function Gt(ar){ar.on(jt,Cr).on(Ke+".zoom",bi).on("dblclick.zoom",Oi).on(kt,fi)}function Qt(ar){return[(ar[0]-Pe.x)/Pe.k,(ar[1]-Pe.y)/Pe.k]}function gn(ar){Pe.k=Math.max(nt[0],Math.min(nt[1],ar))}function kn(ar,Gr){var _i;Pe.x+=ar[0]-(Gr=[(_i=Gr)[0]*Pe.k+Pe.x,_i[1]*Pe.k+Pe.y])[0],Pe.y+=ar[1]-Gr[1]}function jn(ar,Gr,_i,gi){ar.__chart__={x:Pe.x,y:Pe.y,k:Pe.k},gn(Math.pow(2,gi)),kn(O=Gr,_i),ar=v.select(ar),ht>0&&(ar=ar.transition().duration(ht)),ar.call(Gt.event)}function Nn(){ye&&ye.domain(fe.range().map(function(ar){return(ar-Pe.x)/Pe.k}).map(fe.invert)),ke&&ke.domain(we.range().map(function(ar){return(ar-Pe.y)/Pe.k}).map(we.invert))}function mr(ar){St++||ar({type:"zoomstart"})}function gr(ar){Nn(),ar({type:"zoom",scale:Pe.k,translate:[Pe.x,Pe.y]})}function Dr(ar){--St||(ar({type:"zoomend"}),O=null)}function Cr(){var ar=this,Gr=Xt.of(ar,arguments),_i=0,gi=v.select(o(ar)).on(Lt,oa).on(Ft,Mi),Ai=Qt(v.mouse(ar)),Bi=Ut(ar);function oa(){_i=1,kn(v.mouse(ar),Ai),gr(Gr)}function Mi(){gi.on(Lt,null).on(Ft,null),Bi(_i),Dr(Gr)}eu.call(ar),mr(Gr)}function fi(){var ar,Gr=this,_i=Xt.of(Gr,arguments),gi={},Ai=0,Bi=".zoom-"+v.event.changedTouches[0].identifier,oa="touchmove"+Bi,Mi="touchend"+Bi,qi=[],Ii=v.select(Gr),da=Ut(Gr);function Wi(){var Po=v.touches(Gr);return ar=Pe.k,Po.forEach(function(ko){ko.identifier in gi&&(gi[ko.identifier]=Qt(ko))}),Po}function la(){var Po=v.event.target;v.select(Po).on(oa,wa).on(Mi,eo),qi.push(Po);for(var ko=v.event.changedTouches,Wa=0,zo=ko.length;Wa<zo;++Wa)gi[ko[Wa].identifier]=null;var vo=Wi(),ea=Date.now();if(1===vo.length){if(ea-X<500){var Ko=vo[0];jn(Gr,Ko,gi[Ko.identifier],Math.floor(Math.log(Pe.k)/Math.LN2)+1),$()}X=ea}else if(vo.length>1){var rl=vo[1],ou=(Ko=vo[0])[0]-rl[0],$u=Ko[1]-rl[1];Ai=ou*ou+$u*$u}}function wa(){var Po,ko,Wa,zo,vo=v.touches(Gr);eu.call(Gr);for(var ea=0,Ko=vo.length;ea<Ko;++ea,zo=null)if(zo=gi[(Wa=vo[ea]).identifier]){if(ko)break;Po=Wa,ko=zo}if(zo){var rl=(rl=Wa[0]-Po[0])*rl+(rl=Wa[1]-Po[1])*rl,ou=Ai&&Math.sqrt(rl/Ai);Po=[(Po[0]+Wa[0])/2,(Po[1]+Wa[1])/2],ko=[(ko[0]+zo[0])/2,(ko[1]+zo[1])/2],gn(ou*ar)}X=null,kn(Po,ko),gr(_i)}function eo(){if(v.event.touches.length){for(var Po=v.event.changedTouches,ko=0,Wa=Po.length;ko<Wa;++ko)delete gi[Po[ko].identifier];for(var zo in gi)return void Wi()}v.selectAll(qi).on(Bi,null),Ii.on(jt,Cr).on(kt,fi),da(),Dr(_i)}la(),mr(_i),Ii.on(jt,null).on(kt,la)}function bi(){var ar=Xt.of(this,arguments);U?clearTimeout(U):(eu.call(this),pe=Qt(O=z||v.mouse(this)),mr(ar)),U=setTimeout(function(){U=null,Dr(ar)},50),$(),gn(Math.pow(2,.002*je())*Pe.k),kn(O,pe),gr(ar)}function Oi(){var ar=v.mouse(this),Gr=Math.log(Pe.k)/Math.LN2;jn(this,ar,Qt(ar),v.event.shiftKey?Math.ceil(Gr)-1:Math.floor(Gr)+1)}return Ke||(Ke="onwheel"in b?(je=function(){return-v.event.deltaY*(v.event.deltaMode?120:1)},"wheel"):"onmousewheel"in b?(je=function(){return v.event.wheelDelta},"mousewheel"):(je=function(){return-v.event.detail},"MozMousePixelScroll")),Gt.event=function(ar){ar.each(function(){var Gr=Xt.of(this,arguments),_i=Pe;uo?v.select(this).transition().each("start.zoom",function(){Pe=this.__chart__||{x:0,y:0,k:1},mr(Gr)}).tween("zoom:zoom",function(){var gi=Ze[0],Bi=O?O[0]:gi/2,oa=O?O[1]:Ze[1]/2,Mi=v.interpolateZoom([(Bi-Pe.x)/Pe.k,(oa-Pe.y)/Pe.k,gi/Pe.k],[(Bi-_i.x)/_i.k,(oa-_i.y)/_i.k,gi/_i.k]);return function(qi){var Ii=Mi(qi),da=gi/Ii[2];this.__chart__=Pe={x:Bi-Ii[0]*da,y:oa-Ii[1]*da,k:da},gr(Gr)}}).each("interrupt.zoom",function(){Dr(Gr)}).each("end.zoom",function(){Dr(Gr)}):(this.__chart__=Pe,mr(Gr),gr(Gr),Dr(Gr))})},Gt.translate=function(ar){return arguments.length?(Pe={x:+ar[0],y:+ar[1],k:Pe.k},Nn(),Gt):[Pe.x,Pe.y]},Gt.scale=function(ar){return arguments.length?(Pe={x:Pe.x,y:Pe.y,k:null},gn(+ar),Nn(),Gt):Pe.k},Gt.scaleExtent=function(ar){return arguments.length?(nt=null==ar?ft:[+ar[0],+ar[1]],Gt):nt},Gt.center=function(ar){return arguments.length?(z=ar&&[+ar[0],+ar[1]],Gt):z},Gt.size=function(ar){return arguments.length?(Ze=ar&&[+ar[0],+ar[1]],Gt):Ze},Gt.duration=function(ar){return arguments.length?(ht=+ar,Gt):ht},Gt.x=function(ar){return arguments.length?(ye=ar,fe=ar.copy(),Pe={x:0,y:0,k:1},Gt):ye},Gt.y=function(ar){return arguments.length?(ke=ar,we=ar.copy(),Pe={x:0,y:0,k:1},Gt):ke},v.rebind(Gt,Xt,"on")};var je,Ke,ft=[0,1/0];function mt(){}function pt(pe,O,z){return this instanceof pt?(this.h=+pe,this.s=+O,void(this.l=+z)):arguments.length<2?pe instanceof pt?new pt(pe.h,pe.s,pe.l):Zn(""+pe,An,pt):new pt(pe,O,z)}v.color=mt,mt.prototype.toString=function(){return this.rgb()+""},v.hsl=pt;var Ot=pt.prototype=new mt;function Pt(pe,O,z){var U,X;function fe(ye){return Math.round(255*((we=ye)>360?we-=360:we<0&&(we+=360),we<60?U+(X-U)*we/60:we<180?X:we<240?U+(X-U)*(240-we)/60:U));var we}return pe=isNaN(pe)?0:(pe%=360)<0?pe+360:pe,O=isNaN(O)||O<0?0:O>1?1:O,U=2*(z=z<0?0:z>1?1:z)-(X=z<=.5?z*(1+O):z+O-z*O),new Vt(fe(pe+120),fe(pe),fe(pe-120))}function Jt(pe,O,z){return this instanceof Jt?(this.h=+pe,this.c=+O,void(this.l=+z)):arguments.length<2?pe instanceof Jt?new Jt(pe.h,pe.c,pe.l):Ne(pe instanceof Dt?pe.l:(pe=hn((pe=v.rgb(pe)).r,pe.g,pe.b)).l,pe.a,pe.b):new Jt(pe,O,z)}Ot.brighter=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new pt(this.h,this.s,this.l/pe)},Ot.darker=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new pt(this.h,this.s,pe*this.l)},Ot.rgb=function(){return Pt(this.h,this.s,this.l)},v.hcl=Jt;var $t=Jt.prototype=new mt;function ut(pe,O,z){return isNaN(pe)&&(pe=0),isNaN(O)&&(O=0),new Dt(z,Math.cos(pe*=Rt)*O,Math.sin(pe)*O)}function Dt(pe,O,z){return this instanceof Dt?(this.l=+pe,this.a=+O,void(this.b=+z)):arguments.length<2?pe instanceof Dt?new Dt(pe.l,pe.a,pe.b):pe instanceof Jt?ut(pe.h,pe.c,pe.l):hn((pe=Vt(pe)).r,pe.g,pe.b):new Dt(pe,O,z)}$t.brighter=function(pe){return new Jt(this.h,this.c,Math.min(100,this.l+Wt*(arguments.length?pe:1)))},$t.darker=function(pe){return new Jt(this.h,this.c,Math.max(0,this.l-Wt*(arguments.length?pe:1)))},$t.rgb=function(){return ut(this.h,this.c,this.l).rgb()},v.lab=Dt;var Wt=18,zt=Dt.prototype=new mt;function Ht(pe,O,z){var U=(pe+16)/116,X=U+O/500,fe=U-z/200;return new Vt(It(3.2404542*(X=.95047*ot(X))-1.5371385*(U=1*ot(U))-.4985314*(fe=1.08883*ot(fe))),It(-.969266*X+1.8760108*U+.041556*fe),It(.0556434*X-.2040259*U+1.0572252*fe))}function Ne(pe,O,z){return pe>0?new Jt(Math.atan2(z,O)*gt,Math.sqrt(O*O+z*z),pe):new Jt(NaN,NaN,pe)}function ot(pe){return pe>.206893034?pe*pe*pe:(pe-4/29)/7.787037}function yt(pe){return pe>.008856?Math.pow(pe,1/3):7.787037*pe+4/29}function It(pe){return Math.round(255*(pe<=.00304?12.92*pe:1.055*Math.pow(pe,1/2.4)-.055))}function Vt(pe,O,z){return this instanceof Vt?(this.r=~~pe,this.g=~~O,void(this.b=~~z)):arguments.length<2?pe instanceof Vt?new Vt(pe.r,pe.g,pe.b):Zn(""+pe,Vt,Pt):new Vt(pe,O,z)}function ln(pe){return new Vt(pe>>16,pe>>8&255,255&pe)}function un(pe){return ln(pe)+""}zt.brighter=function(pe){return new Dt(Math.min(100,this.l+Wt*(arguments.length?pe:1)),this.a,this.b)},zt.darker=function(pe){return new Dt(Math.max(0,this.l-Wt*(arguments.length?pe:1)),this.a,this.b)},zt.rgb=function(){return Ht(this.l,this.a,this.b)},v.rgb=Vt;var an=Vt.prototype=new mt;function wn(pe){return pe<16?"0"+Math.max(0,pe).toString(16):Math.min(255,pe).toString(16)}function Zn(pe,O,z){var U,X,fe,ye=0,we=0,ke=0;if(U=/([a-z]+)\((.*)\)/.exec(pe=pe.toLowerCase()))switch(X=U[2].split(","),U[1]){case"hsl":return z(parseFloat(X[0]),parseFloat(X[1])/100,parseFloat(X[2])/100);case"rgb":return O(xn(X[0]),xn(X[1]),xn(X[2]))}return(fe=En.get(pe))?O(fe.r,fe.g,fe.b):(null==pe||"#"!==pe.charAt(0)||isNaN(fe=parseInt(pe.slice(1),16))||(4===pe.length?(ye=(3840&fe)>>4,ye|=ye>>4,we=240&fe,we|=we>>4,ke=15&fe,ke|=ke<<4):7===pe.length&&(ye=(16711680&fe)>>16,we=(65280&fe)>>8,ke=255&fe)),O(ye,we,ke))}function An(pe,O,z){var U,X,fe=Math.min(pe/=255,O/=255,z/=255),ye=Math.max(pe,O,z),we=ye-fe,ke=(ye+fe)/2;return we?(X=ke<.5?we/(ye+fe):we/(2-ye-fe),U=pe==ye?(O-z)/we+(O<z?6:0):O==ye?(z-pe)/we+2:(pe-O)/we+4,U*=60):(U=NaN,X=ke>0&&ke<1?0:U),new pt(U,X,ke)}function hn(pe,O,z){var U=yt((.4124564*(pe=pn(pe))+.3575761*(O=pn(O))+.1804375*(z=pn(z)))/.95047),X=yt((.2126729*pe+.7151522*O+.072175*z)/1);return Dt(116*X-16,500*(U-X),200*(X-yt((.0193339*pe+.119192*O+.9503041*z)/1.08883)))}function pn(pe){return(pe/=255)<=.04045?pe/12.92:Math.pow((pe+.055)/1.055,2.4)}function xn(pe){var O=parseFloat(pe);return"%"===pe.charAt(pe.length-1)?Math.round(2.55*O):O}an.brighter=function(pe){pe=Math.pow(.7,arguments.length?pe:1);var O=this.r,z=this.g,U=this.b,X=30;return O||z||U?(O&&O<X&&(O=X),z&&z<X&&(z=X),U&&U<X&&(U=X),new Vt(Math.min(255,O/pe),Math.min(255,z/pe),Math.min(255,U/pe))):new Vt(X,X,X)},an.darker=function(pe){return new Vt((pe=Math.pow(.7,arguments.length?pe:1))*this.r,pe*this.g,pe*this.b)},an.hsl=function(){return An(this.r,this.g,this.b)},an.toString=function(){return"#"+wn(this.r)+wn(this.g)+wn(this.b)};var En=v.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function In(pe){return"function"==typeof pe?pe:function(){return pe}}function Yn(pe){return function(O,z,U){return 2===arguments.length&&"function"==typeof z&&(U=z,z=null),nr(O,z,pe,U)}}function nr(pe,O,z,U){var Ze,X={},fe=v.dispatch("beforesend","progress","load","error"),ye={},we=new XMLHttpRequest,ke=null;function Pe(){var Ze,ht,St,nt=we.status;if(!nt&&((St=(ht=we).responseType)&&"text"!==St?ht.response:ht.responseText)||nt>=200&&nt<300||304===nt){try{Ze=z.call(X,we)}catch(ht){return void fe.error.call(X,ht)}fe.load.call(X,Ze)}else fe.error.call(X,we)}return self.XDomainRequest&&!("withCredentials"in we)&&/^(http(s)?:)?\/\//.test(pe)&&(we=new XDomainRequest),"onload"in we?we.onload=we.onerror=Pe:we.onreadystatechange=function(){we.readyState>3&&Pe()},we.onprogress=function(Ze){var nt=v.event;v.event=Ze;try{fe.progress.call(X,we)}finally{v.event=nt}},X.header=function(Ze,nt){return Ze=(Ze+"").toLowerCase(),arguments.length<2?ye[Ze]:(null==nt?delete ye[Ze]:ye[Ze]=nt+"",X)},X.mimeType=function(Ze){return arguments.length?(O=null==Ze?null:Ze+"",X):O},X.responseType=function(Ze){return arguments.length?(ke=Ze,X):ke},X.response=function(Ze){return z=Ze,X},["get","post"].forEach(function(Ze){X[Ze]=function(){return X.send.apply(X,[Ze].concat(T(arguments)))}}),X.send=function(Ze,nt,ht){if(2===arguments.length&&"function"==typeof nt&&(ht=nt,nt=null),we.open(Ze,pe,!0),null==O||"accept"in ye||(ye.accept=O+",*/*"),we.setRequestHeader)for(var St in ye)we.setRequestHeader(St,ye[St]);return null!=O&&we.overrideMimeType&&we.overrideMimeType(O),null!=ke&&(we.responseType=ke),null!=ht&&X.on("error",ht).on("load",function(jt){ht(null,jt)}),fe.beforesend.call(X,we),we.send(null==nt?null:nt),X},X.abort=function(){return we.abort(),X},v.rebind(X,fe,"on"),null==U?X:X.get(1===(Ze=U).length?function(nt,ht){Ze(null==nt?ht:null)}:Ze)}En.forEach(function(pe,O){En.set(pe,ln(O))}),v.functor=In,v.xhr=Yn(I),v.dsv=function(pe,O){var z=new RegExp('["'+pe+"\n]"),U=pe.charCodeAt(0);function X(Pe,Ze,nt){arguments.length<3&&(nt=Ze,Ze=null);var ht=nr(Pe,O,null==Ze?fe:ye(Ze),nt);return ht.row=function(St){return arguments.length?ht.response(null==(Ze=St)?fe:ye(St)):Ze},ht}function fe(Pe){return X.parse(Pe.responseText)}function ye(Pe){return function(Ze){return X.parse(Ze.responseText,Pe)}}function we(Pe){return Pe.map(ke).join(pe)}function ke(Pe){return z.test(Pe)?'"'+Pe.replace(/\"/g,'""')+'"':Pe}return X.parse=function(Pe,Ze){var nt;return X.parseRows(Pe,function(ht,St){if(nt)return nt(ht,St-1);var jt=function(Lt){for(var Ft={},kt=ht.length,Xt=0;Xt<kt;++Xt)Ft[ht[Xt]]=Lt[Xt];return Ft};nt=Ze?function(Lt,Ft){return Ze(jt(Lt),Ft)}:jt})},X.parseRows=function(Pe,Ze){var nt,ht,St={},jt={},Lt=[],Ft=Pe.length,kt=0,Xt=0;function Gt(){if(kt>=Ft)return jt;if(ht)return ht=!1,St;var gn=kt;if(34===Pe.charCodeAt(gn)){for(var kn=gn;kn++<Ft;)if(34===Pe.charCodeAt(kn)){if(34!==Pe.charCodeAt(kn+1))break;++kn}return kt=kn+2,13===(jn=Pe.charCodeAt(kn+1))?(ht=!0,10===Pe.charCodeAt(kn+2)&&++kt):10===jn&&(ht=!0),Pe.slice(gn+1,kn).replace(/""/g,'"')}for(;kt<Ft;){var jn,Nn=1;if(10===(jn=Pe.charCodeAt(kt++)))ht=!0;else if(13===jn)ht=!0,10===Pe.charCodeAt(kt)&&(++kt,++Nn);else if(jn!==U)continue;return Pe.slice(gn,kt-Nn)}return Pe.slice(gn)}for(;(nt=Gt())!==jt;){for(var Qt=[];nt!==St&&nt!==jt;)Qt.push(nt),nt=Gt();Ze&&null==(Qt=Ze(Qt,Xt++))||Lt.push(Qt)}return Lt},X.format=function(Pe){if(Array.isArray(Pe[0]))return X.formatRows(Pe);var Ze=new L,nt=[];return Pe.forEach(function(ht){for(var St in ht)Ze.has(St)||nt.push(Ze.add(St))}),[nt.map(ke).join(pe)].concat(Pe.map(function(ht){return nt.map(function(St){return ke(ht[St])}).join(pe)})).join("\n")},X.formatRows=function(Pe){return Pe.map(we).join("\n")},X},v.csv=v.dsv(",","text/csv"),v.tsv=v.dsv("\t","text/tab-separated-values");var sr,Ar,yr,Pr,Wr=this[V(this,"requestAnimationFrame")]||function(pe){setTimeout(pe,17)};function lr(pe,O,z){var U=arguments.length;U<2&&(O=0),U<3&&(z=Date.now());var fe={c:pe,t:z+O,n:null};return Ar?Ar.n=fe:sr=fe,Ar=fe,yr||(Pr=clearTimeout(Pr),yr=1,Wr(Hn)),fe}function Hn(){var pe=Sr(),O=ti()-pe;O>24?(isFinite(O)&&(clearTimeout(Pr),Pr=setTimeout(Hn,O)),yr=0):(yr=1,Wr(Hn))}function Sr(){for(var pe=Date.now(),O=sr;O;)pe>=O.t&&O.c(pe-O.t)&&(O.c=null),O=O.n;return pe}function ti(){for(var pe,O=sr,z=1/0;O;)O.c?(O.t<z&&(z=O.t),O=(pe=O).n):O=pe?pe.n=O.n:sr=O.n;return Ar=pe,z}function Fn(pe){return pe[0]}function br(pe){return pe[1]}function xr(pe){for(var O,z,U,X=pe.length,fe=[0,1],ye=2,we=2;we<X;we++){for(;ye>1&&((z=pe[fe[ye-1]])[0]-(O=pe[fe[ye-2]])[0])*((U=pe[we])[1]-O[1])-(z[1]-O[1])*(U[0]-O[0])<=0;)--ye;fe[ye++]=we}return fe.slice(0,ye)}function Kn(pe,O){return pe[0]-O[0]||pe[1]-O[1]}v.timer=function(){lr.apply(this,arguments)},v.timer.flush=function(){Sr(),ti()},v.round=function(pe,O){return O?Math.round(pe*(O=Math.pow(10,O)))/O:Math.round(pe)},v.geom={},v.geom.hull=function(pe){var O=Fn,z=br;if(arguments.length)return U(pe);function U(X){if(X.length<3)return[];var fe,ye=In(O),we=In(z),ke=X.length,Pe=[],Ze=[];for(fe=0;fe<ke;fe++)Pe.push([+ye.call(this,X[fe],fe),+we.call(this,X[fe],fe),fe]);for(Pe.sort(Kn),fe=0;fe<ke;fe++)Ze.push([Pe[fe][0],-Pe[fe][1]]);var nt=xr(Pe),ht=xr(Ze),St=ht[0]===nt[0],jt=ht[ht.length-1]===nt[nt.length-1],Lt=[];for(fe=nt.length-1;fe>=0;--fe)Lt.push(X[Pe[nt[fe]][2]]);for(fe=+St;fe<ht.length-jt;++fe)Lt.push(X[Pe[ht[fe]][2]]);return Lt}return U.x=function(X){return arguments.length?(O=X,U):O},U.y=function(X){return arguments.length?(z=X,U):z},U},v.geom.polygon=function(pe){return q(pe,Qr),pe};var Qr=v.geom.polygon.prototype=[];function ci(pe,O,z){return(z[0]-O[0])*(pe[1]-O[1])<(z[1]-O[1])*(pe[0]-O[0])}function Or(pe,O,z,U){var X=pe[0],fe=z[0],ye=O[0]-X,we=U[0]-fe,ke=pe[1],Pe=z[1],Ze=O[1]-ke,nt=U[1]-Pe,ht=(we*(ke-Pe)-nt*(X-fe))/(nt*ye-we*Ze);return[X+ht*ye,ke+ht*Ze]}function li(pe){var O=pe[0],z=pe[pe.length-1];return!(O[0]-z[0]||O[1]-z[1])}Qr.area=function(){for(var pe,O=-1,z=this.length,U=this[z-1],X=0;++O<z;)X+=(pe=U)[1]*(U=this[O])[0]-pe[0]*U[1];return.5*X},Qr.centroid=function(pe){var O,z,U=-1,X=this.length,fe=0,ye=0,we=this[X-1];for(arguments.length||(pe=-1/(6*this.area()));++U<X;)fe+=((O=we)[0]+(we=this[U])[0])*(z=O[0]*we[1]-we[0]*O[1]),ye+=(O[1]+we[1])*z;return[fe*pe,ye*pe]},Qr.clip=function(pe){for(var O,z,U,X,fe,ye,we=li(pe),ke=-1,Pe=this.length-li(this),Ze=this[Pe-1];++ke<Pe;){for(O=pe.slice(),pe.length=0,X=this[ke],fe=O[(U=O.length-we)-1],z=-1;++z<U;)ci(ye=O[z],Ze,X)?(ci(fe,Ze,X)||pe.push(Or(fe,ye,Ze,X)),pe.push(ye)):ci(fe,Ze,X)&&pe.push(Or(fe,ye,Ze,X)),fe=ye;we&&pe.push(pe[0]),Ze=X}return pe};var di,Tn,tr,Zt,yn,Cn=[],rr=[];function Qn(){qr(this),this.edge=this.site=this.circle=null}function Jn(pe){var O=Cn.pop()||new Qn;return O.site=pe,O}function Wn(pe){zr(pe),tr.remove(pe),Cn.push(pe),qr(pe)}function On(pe){var O=pe.circle,z=O.x,U=O.cy,X={x:z,y:U},fe=pe.P,ye=pe.N,we=[pe];Wn(pe);for(var ke=fe;ke.circle&&u(z-ke.circle.x)<Nt&&u(U-ke.circle.cy)<Nt;)fe=ke.P,we.unshift(ke),Wn(ke),ke=fe;we.unshift(ke),zr(ke);for(var Pe=ye;Pe.circle&&u(z-Pe.circle.x)<Nt&&u(U-Pe.circle.cy)<Nt;)ye=Pe.N,we.push(Pe),Wn(Pe),Pe=ye;we.push(Pe),zr(Pe);var Ze,nt=we.length;for(Ze=1;Ze<nt;++Ze)mi((Pe=we[Ze]).edge,(ke=we[Ze-1]).site,Pe.site,X);(Pe=we[nt-1]).edge=Ur((ke=we[0]).site,Pe.site,null,X),vr(ke),vr(Pe)}function zn(pe){for(var O,z,U,X,fe=pe.x,ye=pe.y,we=tr._;we;)if((U=Rn(we,ye)-fe)>Nt)we=we.L;else{if(!((X=fe-Gn(we,ye))>Nt)){U>-Nt?(O=we.P,z=we):X>-Nt?(O=we,z=we.N):O=z=we;break}if(!we.R){O=we;break}we=we.R}var ke=Jn(pe);if(tr.insert(O,ke),O||z){if(O===z)return zr(O),z=Jn(O.site),tr.insert(ke,z),ke.edge=z.edge=Ur(O.site,ke.site),vr(O),void vr(z);if(z){zr(O),zr(z);var Pe=O.site,Ze=Pe.x,nt=Pe.y,ht=pe.x-Ze,St=pe.y-nt,jt=z.site,Lt=jt.x-Ze,Ft=jt.y-nt,kt=2*(ht*Ft-St*Lt),Xt=ht*ht+St*St,Gt=Lt*Lt+Ft*Ft,Qt={x:(Ft*Xt-St*Gt)/kt+Ze,y:(ht*Gt-Lt*Xt)/kt+nt};mi(z.edge,Pe,jt,Qt),ke.edge=Ur(Pe,pe,null,Qt),z.edge=Ur(pe,jt,null,Qt),vr(O),vr(z)}else ke.edge=Ur(O.site,ke.site)}}function Rn(pe,O){var z=pe.site,U=z.x,X=z.y,fe=X-O;if(!fe)return U;var ye=pe.P;if(!ye)return-1/0;var we=(z=ye.site).x,ke=z.y,Pe=ke-O;if(!Pe)return we;var Ze=we-U,nt=1/fe-1/Pe,ht=Ze/Pe;return nt?(-ht+Math.sqrt(ht*ht-2*nt*(Ze*Ze/(-2*Pe)-ke+Pe/2+X-fe/2)))/nt+U:(U+we)/2}function Gn(pe,O){var z=pe.N;if(z)return Rn(z,O);var U=pe.site;return U.y===O?U.x:1/0}function fr(pe){this.site=pe,this.edges=[]}function ur(pe,O){return O.angle-pe.angle}function Mr(){qr(this),this.x=this.y=this.arc=this.site=this.cy=null}function vr(pe){var O=pe.P,z=pe.N;if(O&&z){var U=O.site,X=pe.site,fe=z.site;if(U!==fe){var ye=X.x,we=X.y,ke=U.x-ye,Pe=U.y-we,Ze=fe.x-ye,nt=2*(ke*(Ft=fe.y-we)-Pe*Ze);if(!(nt>=-1e-12)){var ht=ke*ke+Pe*Pe,St=Ze*Ze+Ft*Ft,jt=(Ft*ht-Pe*St)/nt,Lt=(ke*St-Ze*ht)/nt,Ft=Lt+we,kt=rr.pop()||new Mr;kt.arc=pe,kt.site=X,kt.x=jt+ye,kt.y=Ft+Math.sqrt(jt*jt+Lt*Lt),kt.cy=Ft,pe.circle=kt;for(var Xt=null,Gt=yn._;Gt;)if(kt.y<Gt.y||kt.y===Gt.y&&kt.x<=Gt.x){if(!Gt.L){Xt=Gt.P;break}Gt=Gt.L}else{if(!Gt.R){Xt=Gt;break}Gt=Gt.R}yn.insert(Xt,kt),Xt||(Zt=kt)}}}}function zr(pe){var O=pe.circle;O&&(O.P||(Zt=O.N),yn.remove(O),rr.push(O),qr(O),pe.circle=null)}function Br(pe,O){var z=pe.b;if(z)return!0;var U,X,fe=pe.a,ye=O[0][0],we=O[1][0],ke=O[0][1],Pe=O[1][1],Ze=pe.l,nt=pe.r,ht=Ze.x,St=Ze.y,jt=nt.x,Lt=nt.y,Ft=(ht+jt)/2;if(Lt===St){if(Ft<ye||Ft>=we)return;if(ht>jt){if(fe){if(fe.y>=Pe)return}else fe={x:Ft,y:ke};z={x:Ft,y:Pe}}else{if(fe){if(fe.y<ke)return}else fe={x:Ft,y:Pe};z={x:Ft,y:ke}}}else if(X=(St+Lt)/2-(U=(ht-jt)/(Lt-St))*Ft,U<-1||U>1)if(ht>jt){if(fe){if(fe.y>=Pe)return}else fe={x:(ke-X)/U,y:ke};z={x:(Pe-X)/U,y:Pe}}else{if(fe){if(fe.y<ke)return}else fe={x:(Pe-X)/U,y:Pe};z={x:(ke-X)/U,y:ke}}else if(St<Lt){if(fe){if(fe.x>=we)return}else fe={x:ye,y:U*ye+X};z={x:we,y:U*we+X}}else{if(fe){if(fe.x<ye)return}else fe={x:we,y:U*we+X};z={x:ye,y:U*ye+X}}return pe.a=fe,pe.b=z,!0}function or(pe,O){this.l=pe,this.r=O,this.a=this.b=null}function Ur(pe,O,z,U){var X=new or(pe,O);return di.push(X),z&&mi(X,pe,O,z),U&&mi(X,O,pe,U),Tn[pe.i].edges.push(new Zi(X,pe,O)),Tn[O.i].edges.push(new Zi(X,O,pe)),X}function Zr(pe,O,z){var U=new or(pe,null);return U.a=O,U.b=z,di.push(U),U}function mi(pe,O,z,U){pe.a||pe.b?pe.l===z?pe.b=U:pe.a=U:(pe.a=U,pe.l=O,pe.r=z)}function Zi(pe,O,z){var U=pe.a,X=pe.b;this.edge=pe,this.site=O,this.angle=z?Math.atan2(z.y-O.y,z.x-O.x):pe.l===O?Math.atan2(X.x-U.x,U.y-X.y):Math.atan2(U.x-X.x,X.y-U.y)}function Vi(){this._=null}function qr(pe){pe.U=pe.C=pe.L=pe.R=pe.P=pe.N=null}function wi(pe,O){var z=O,U=O.R,X=z.U;X?X.L===z?X.L=U:X.R=U:pe._=U,U.U=X,z.U=U,z.R=U.L,z.R&&(z.R.U=z),U.L=z}function vi(pe,O){var z=O,U=O.L,X=z.U;X?X.L===z?X.L=U:X.R=U:pe._=U,U.U=X,z.U=U,z.L=U.R,z.L&&(z.L.U=z),U.R=z}function ma(pe){for(;pe.L;)pe=pe.L;return pe}function $a(pe,O){var z,U,X,fe=pe.sort(Na).pop();for(di=[],Tn=new Array(pe.length),tr=new Vi,yn=new Vi;;)if(X=Zt,fe&&(!X||fe.y<X.y||fe.y===X.y&&fe.x<X.x))fe.x===z&&fe.y===U||(Tn[fe.i]=new fr(fe),zn(fe),z=fe.x,U=fe.y),fe=pe.pop();else{if(!X)break;On(X.arc)}O&&(function(we){for(var ke,Pe,Ze,nt,ht,St=di,jt=(Pe=we[0][0],Ze=we[0][1],nt=we[1][0],ht=we[1][1],function(Ft){var kt,Xt=Ft.a,Gt=Ft.b,Qt=Xt.x,gn=Xt.y,kn=0,jn=1,Nn=Gt.x-Qt,mr=Gt.y-gn;if(kt=Pe-Qt,Nn||!(kt>0)){if(kt/=Nn,Nn<0){if(kt<kn)return;kt<jn&&(jn=kt)}else if(Nn>0){if(kt>jn)return;kt>kn&&(kn=kt)}if(kt=nt-Qt,Nn||!(kt<0)){if(kt/=Nn,Nn<0){if(kt>jn)return;kt>kn&&(kn=kt)}else if(Nn>0){if(kt<kn)return;kt<jn&&(jn=kt)}if(kt=Ze-gn,mr||!(kt>0)){if(kt/=mr,mr<0){if(kt<kn)return;kt<jn&&(jn=kt)}else if(mr>0){if(kt>jn)return;kt>kn&&(kn=kt)}if(kt=ht-gn,mr||!(kt<0)){if(kt/=mr,mr<0){if(kt>jn)return;kt>kn&&(kn=kt)}else if(mr>0){if(kt<kn)return;kt<jn&&(jn=kt)}return kn>0&&(Ft.a={x:Qt+kn*Nn,y:gn+kn*mr}),jn<1&&(Ft.b={x:Qt+jn*Nn,y:gn+jn*mr}),Ft}}}}}),Lt=St.length;Lt--;)(!Br(ke=St[Lt],we)||!jt(ke)||u(ke.a.x-ke.b.x)<Nt&&u(ke.a.y-ke.b.y)<Nt)&&(ke.a=ke.b=null,St.splice(Lt,1))}(O),function(we){for(var ke,Pe,Ze,nt,ht,St,jt,Lt,Ft,kt,Xt=we[0][0],Gt=we[1][0],Qt=we[0][1],gn=we[1][1],kn=Tn,jn=kn.length;jn--;)if((ht=kn[jn])&&ht.prepare())for(Lt=(jt=ht.edges).length,St=0;St<Lt;)Ze=(kt=jt[St].end()).x,nt=kt.y,ke=(Ft=jt[++St%Lt].start()).x,Pe=Ft.y,(u(Ze-ke)>Nt||u(nt-Pe)>Nt)&&(jt.splice(St,0,new Zi(Zr(ht.site,kt,u(Ze-Xt)<Nt&&gn-nt>Nt?{x:Xt,y:u(ke-Xt)<Nt?Pe:gn}:u(nt-gn)<Nt&&Gt-Ze>Nt?{x:u(Pe-gn)<Nt?ke:Gt,y:gn}:u(Ze-Gt)<Nt&&nt-Qt>Nt?{x:Gt,y:u(ke-Gt)<Nt?Pe:Qt}:u(nt-Qt)<Nt&&Ze-Xt>Nt?{x:u(Pe-Qt)<Nt?ke:Xt,y:Qt}:null),ht.site,null)),++Lt)}(O));var ye={cells:Tn,edges:di};return tr=yn=di=Tn=null,ye}function Na(pe,O){return O.y-pe.y||O.x-pe.x}fr.prototype.prepare=function(){for(var pe,O=this.edges,z=O.length;z--;)(pe=O[z].edge).b&&pe.a||O.splice(z,1);return O.sort(ur),O.length},Zi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Vi.prototype={insert:function(pe,O){var z,U,X;if(pe){if(O.P=pe,O.N=pe.N,pe.N&&(pe.N.P=O),pe.N=O,pe.R){for(pe=pe.R;pe.L;)pe=pe.L;pe.L=O}else pe.R=O;z=pe}else this._?(pe=ma(this._),O.P=null,O.N=pe,pe.P=pe.L=O,z=pe):(O.P=O.N=null,this._=O,z=null);for(O.L=O.R=null,O.U=z,O.C=!0,pe=O;z&&z.C;)z===(U=z.U).L?(X=U.R)&&X.C?(z.C=X.C=!1,U.C=!0,pe=U):(pe===z.R&&(wi(this,z),z=(pe=z).U),z.C=!1,U.C=!0,vi(this,U)):(X=U.L)&&X.C?(z.C=X.C=!1,U.C=!0,pe=U):(pe===z.L&&(vi(this,z),z=(pe=z).U),z.C=!1,U.C=!0,wi(this,U)),z=pe.U;this._.C=!1},remove:function(pe){pe.N&&(pe.N.P=pe.P),pe.P&&(pe.P.N=pe.N),pe.N=pe.P=null;var O,z,U,X=pe.U,fe=pe.L,ye=pe.R;if(z=fe?ye?ma(ye):fe:ye,X?X.L===pe?X.L=z:X.R=z:this._=z,fe&&ye?(U=z.C,z.C=pe.C,z.L=fe,fe.U=z,z!==ye?(X=z.U,z.U=pe.U,X.L=pe=z.R,z.R=ye,ye.U=z):(z.U=X,X=z,pe=z.R)):(U=pe.C,pe=z),pe&&(pe.U=X),!U)if(pe&&pe.C)pe.C=!1;else{do{if(pe===this._)break;if(pe===X.L){if((O=X.R).C&&(O.C=!1,X.C=!0,wi(this,X),O=X.R),O.L&&O.L.C||O.R&&O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,vi(this,O),O=X.R),O.C=X.C,X.C=O.R.C=!1,wi(this,X),pe=this._;break}}else if((O=X.L).C&&(O.C=!1,X.C=!0,vi(this,X),O=X.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,wi(this,O),O=X.L),O.C=X.C,X.C=O.L.C=!1,vi(this,X),pe=this._;break}O.C=!0,pe=X,X=X.U}while(!pe.C);pe&&(pe.C=!1)}}},v.geom.voronoi=function(pe){var O=Fn,z=br,U=O,X=z,fe=ys;if(pe)return ye(pe);function ye(ke){var Pe=new Array(ke.length),Ze=fe[0][0],nt=fe[0][1],ht=fe[1][0],St=fe[1][1];return $a(we(ke),fe).cells.forEach(function(jt,Lt){var Ft=jt.edges,kt=jt.site;(Pe[Lt]=Ft.length?Ft.map(function(Xt){var Gt=Xt.start();return[Gt.x,Gt.y]}):kt.x>=Ze&&kt.x<=ht&&kt.y>=nt&&kt.y<=St?[[Ze,St],[ht,St],[ht,nt],[Ze,nt]]:[]).point=ke[Lt]}),Pe}function we(ke){return ke.map(function(Pe,Ze){return{x:Math.round(U(Pe,Ze)/Nt)*Nt,y:Math.round(X(Pe,Ze)/Nt)*Nt,i:Ze}})}return ye.links=function(ke){return $a(we(ke)).edges.filter(function(Pe){return Pe.l&&Pe.r}).map(function(Pe){return{source:ke[Pe.l.i],target:ke[Pe.r.i]}})},ye.triangles=function(ke){var Pe=[];return $a(we(ke)).cells.forEach(function(Ze,nt){for(var ht,St,jt,Lt,Ft=Ze.site,kt=Ze.edges.sort(ur),Xt=-1,Gt=kt.length,Qt=kt[Gt-1].edge,gn=Qt.l===Ft?Qt.r:Qt.l;++Xt<Gt;)ht=gn,gn=(Qt=kt[Xt].edge).l===Ft?Qt.r:Qt.l,nt<ht.i&&nt<gn.i&&((St=Ft).x-(Lt=gn).x)*((jt=ht).y-St.y)-(St.x-jt.x)*(Lt.y-St.y)<0&&Pe.push([ke[nt],ke[ht.i],ke[gn.i]])}),Pe},ye.x=function(ke){return arguments.length?(U=In(O=ke),ye):O},ye.y=function(ke){return arguments.length?(X=In(z=ke),ye):z},ye.clipExtent=function(ke){return arguments.length?(fe=null==ke?ys:ke,ye):fe===ys?null:fe},ye.size=function(ke){return arguments.length?ye.clipExtent(ke&&[[0,0],ke]):fe===ys?null:fe&&fe[1]},ye};var ys=[[-1e6,-1e6],[1e6,1e6]];function pa(pe){return pe.x}function ei(pe){return pe.y}function Ki(pe,O,z,U,X,fe){if(!pe(O,z,U,X,fe)){var ye=.5*(z+X),we=.5*(U+fe),ke=O.nodes;ke[0]&&Ki(pe,ke[0],z,U,ye,we),ke[1]&&Ki(pe,ke[1],ye,U,X,we),ke[2]&&Ki(pe,ke[2],z,we,ye,fe),ke[3]&&Ki(pe,ke[3],ye,we,X,fe)}}function Ui(pe,O,z,U,X,fe,ye){var we,ke=1/0;return function Pe(Ze,nt,ht,St,jt){if(!(nt>fe||ht>ye||St<U||jt<X)){if(Lt=Ze.point){var Lt,Ft=O-Ze.x,kt=z-Ze.y,Xt=Ft*Ft+kt*kt;if(Xt<ke){var Gt=Math.sqrt(ke=Xt);U=O-Gt,X=z-Gt,fe=O+Gt,ye=z+Gt,we=Lt}}for(var Qt=Ze.nodes,gn=.5*(nt+St),kn=.5*(ht+jt),jn=(z>=kn)<<1|O>=gn,Nn=jn+4;jn<Nn;++jn)if(Ze=Qt[3&jn])switch(3&jn){case 0:Pe(Ze,nt,ht,gn,kn);break;case 1:Pe(Ze,gn,ht,St,kn);break;case 2:Pe(Ze,nt,kn,gn,jt);break;case 3:Pe(Ze,gn,kn,St,jt)}}}(pe,U,X,fe,ye),we}function so(pe,O){pe=v.rgb(pe),O=v.rgb(O);var z=pe.r,U=pe.g,X=pe.b,fe=O.r-z,ye=O.g-U,we=O.b-X;return function(ke){return"#"+wn(Math.round(z+fe*ke))+wn(Math.round(U+ye*ke))+wn(Math.round(X+we*ke))}}function Vo(pe,O){var z,U={},X={};for(z in pe)z in O?U[z]=go(pe[z],O[z]):X[z]=pe[z];for(z in O)z in pe||(X[z]=O[z]);return function(fe){for(z in U)X[z]=U[z](fe);return X}}function Ea(pe,O){return pe=+pe,O=+O,function(z){return pe*(1-z)+O*z}}function Do(pe,O){var z,U,X,fe=Ba.lastIndex=ts.lastIndex=0,ye=-1,we=[],ke=[];for(pe+="",O+="";(z=Ba.exec(pe))&&(U=ts.exec(O));)(X=U.index)>fe&&(X=O.slice(fe,X),we[ye]?we[ye]+=X:we[++ye]=X),(z=z[0])===(U=U[0])?we[ye]?we[ye]+=U:we[++ye]=U:(we[++ye]=null,ke.push({i:ye,x:Ea(z,U)})),fe=ts.lastIndex;return fe<O.length&&(X=O.slice(fe),we[ye]?we[ye]+=X:we[++ye]=X),we.length<2?ke[0]?(O=ke[0].x,function(Pe){return O(Pe)+""}):function(){return O}:(O=ke.length,function(Pe){for(var Ze,nt=0;nt<O;++nt)we[(Ze=ke[nt]).i]=Ze.x(Pe);return we.join("")})}v.geom.delaunay=function(pe){return v.geom.voronoi().triangles(pe)},v.geom.quadtree=function(pe,O,z,U,X){var fe,ye=Fn,we=br;if(fe=arguments.length)return ye=pa,we=ei,3===fe&&(X=z,U=O,z=O=0),ke(pe);function ke(Pe){var Ze,nt,ht,St,jt,Lt,Ft,kt,Xt,Gt=In(ye),Qt=In(we);if(null!=O)Lt=O,Ft=z,kt=U,Xt=X;else if(kt=Xt=-(Lt=Ft=1/0),nt=[],ht=[],jt=Pe.length,fe)for(St=0;St<jt;++St)(Ze=Pe[St]).x<Lt&&(Lt=Ze.x),Ze.y<Ft&&(Ft=Ze.y),Ze.x>kt&&(kt=Ze.x),Ze.y>Xt&&(Xt=Ze.y),nt.push(Ze.x),ht.push(Ze.y);else for(St=0;St<jt;++St){var gn=+Gt(Ze=Pe[St],St),kn=+Qt(Ze,St);gn<Lt&&(Lt=gn),kn<Ft&&(Ft=kn),gn>kt&&(kt=gn),kn>Xt&&(Xt=kn),nt.push(gn),ht.push(kn)}var jn=kt-Lt,Nn=Xt-Ft;function mr(Cr,fi,bi,Oi,ar,Gr,_i,gi){if(!isNaN(bi)&&!isNaN(Oi))if(Cr.leaf){var Ai=Cr.x,Bi=Cr.y;if(null!=Ai)if(u(Ai-bi)+u(Bi-Oi)<.01)gr(Cr,fi,bi,Oi,ar,Gr,_i,gi);else{var oa=Cr.point;Cr.x=Cr.y=Cr.point=null,gr(Cr,oa,Ai,Bi,ar,Gr,_i,gi),gr(Cr,fi,bi,Oi,ar,Gr,_i,gi)}else Cr.x=bi,Cr.y=Oi,Cr.point=fi}else gr(Cr,fi,bi,Oi,ar,Gr,_i,gi)}function gr(Cr,fi,bi,Oi,ar,Gr,_i,gi){var Ai=.5*(ar+_i),Bi=.5*(Gr+gi),oa=bi>=Ai,Mi=Oi>=Bi,qi=Mi<<1|oa;Cr.leaf=!1,oa?ar=Ai:_i=Ai,Mi?Gr=Bi:gi=Bi,mr(Cr=Cr.nodes[qi]||(Cr.nodes[qi]={leaf:!0,nodes:[],point:null,x:null,y:null}),fi,bi,Oi,ar,Gr,_i,gi)}jn>Nn?Xt=Ft+jn:kt=Lt+Nn;var Dr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Cr){mr(Dr,Cr,+Gt(Cr,++St),+Qt(Cr,St),Lt,Ft,kt,Xt)},visit:function(Cr){Ki(Cr,Dr,Lt,Ft,kt,Xt)},find:function(Cr){return Ui(Dr,Cr[0],Cr[1],Lt,Ft,kt,Xt)}};if(St=-1,null==O){for(;++St<jt;)mr(Dr,Pe[St],nt[St],ht[St],Lt,Ft,kt,Xt);--St}else Pe.forEach(Dr.add);return nt=ht=Pe=Ze=null,Dr}return ke.x=function(Pe){return arguments.length?(ye=Pe,ke):ye},ke.y=function(Pe){return arguments.length?(we=Pe,ke):we},ke.extent=function(Pe){return arguments.length?(null==Pe?O=z=U=X=null:(O=+Pe[0][0],z=+Pe[0][1],U=+Pe[1][0],X=+Pe[1][1]),ke):null==O?null:[[O,z],[U,X]]},ke.size=function(Pe){return arguments.length?(null==Pe?O=z=U=X=null:(O=z=0,U=+Pe[0],X=+Pe[1]),ke):null==O?null:[U-O,X-z]},ke},v.interpolateRgb=so,v.interpolateObject=Vo,v.interpolateNumber=Ea,v.interpolateString=Do;var Ba=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ts=new RegExp(Ba.source,"g");function go(pe,O){for(var z,U=v.interpolators.length;--U>=0&&!(z=v.interpolators[U](pe,O)););return z}function Ni(pe,O){var z,U=[],X=[],fe=pe.length,ye=O.length,we=Math.min(pe.length,O.length);for(z=0;z<we;++z)U.push(go(pe[z],O[z]));for(;z<fe;++z)X[z]=pe[z];for(;z<ye;++z)X[z]=O[z];return function(ke){for(z=0;z<we;++z)X[z]=U[z](ke);return X}}v.interpolate=go,v.interpolators=[function(pe,O){var z=typeof O;return("string"===z?En.has(O.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(O)?so:Do:O instanceof mt?so:Array.isArray(O)?Ni:"object"===z&&isNaN(O)?Vo:Ea)(pe,O)}],v.interpolateArray=Ni;var Uo=function(){return I},el=v.map({linear:Uo,poly:function(pe){return function(O){return Math.pow(O,pe)}},quad:function(){return fl},cubic:function(){return Ts},sin:function(){return $l},exp:function(){return Bs},circle:function(){return Ro},elastic:function(pe,O){var z;return arguments.length<2&&(O=.45),arguments.length?z=O/en*Math.asin(1/pe):(pe=1,z=O/4),function(U){return 1+pe*Math.pow(2,-10*U)*Math.sin((U-z)*en/O)}},back:function(pe){return pe||(pe=1.70158),function(O){return O*O*((pe+1)*O-pe)}},bounce:function(){return Ho}}),Il=v.map({in:I,out:Go,"in-out":zs,"out-in":function(pe){return zs(Go(pe))}});function Da(pe){return function(O){return O<=0?0:O>=1?1:pe(O)}}function Go(pe){return function(O){return 1-pe(1-O)}}function zs(pe){return function(O){return.5*(O<.5?pe(2*O):2-pe(2-2*O))}}function fl(pe){return pe*pe}function Ts(pe){return pe*pe*pe}function Ka(pe){if(pe<=0)return 0;if(pe>=1)return 1;var O=pe*pe,z=O*pe;return 4*(pe<.5?z:3*(pe-O)+z-.75)}function $l(pe){return 1-Math.cos(pe*Qe)}function Bs(pe){return Math.pow(2,10*(pe-1))}function Ro(pe){return 1-Math.sqrt(1-pe*pe)}function Ho(pe){return pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+.9375:7.5625*(pe-=2.625/2.75)*pe+.984375}function js(pe,O){return O-=pe,function(z){return Math.round(pe+O*z)}}function Ss(pe){var O,z,U,X=[pe.a,pe.b],fe=[pe.c,pe.d],ye=mo(X),we=Ys(X,fe),ke=mo(((O=fe)[0]+=(U=-we)*(z=X)[0],O[1]+=U*z[1],O))||0;X[0]*fe[1]<fe[0]*X[1]&&(X[0]*=-1,X[1]*=-1,ye*=-1,we*=-1),this.rotate=(ye?Math.atan2(X[1],X[0]):Math.atan2(-fe[0],fe[1]))*gt,this.translate=[pe.e,pe.f],this.scale=[ye,ke],this.skew=ke?Math.atan2(we,ke)*gt:0}function Ys(pe,O){return pe[0]*O[0]+pe[1]*O[1]}function mo(pe){var O=Math.sqrt(Ys(pe,pe));return O&&(pe[0]/=O,pe[1]/=O),O}v.ease=function(pe){var O=pe.indexOf("-"),z=O>=0?pe.slice(0,O):pe,U=O>=0?pe.slice(O+1):"in";return z=el.get(z)||Uo,Da((U=Il.get(U)||I)(z.apply(null,x.call(arguments,1))))},v.interpolateHcl=function(pe,O){pe=v.hcl(pe),O=v.hcl(O);var z=pe.h,U=pe.c,X=pe.l,fe=O.h-z,ye=O.c-U,we=O.l-X;return isNaN(ye)&&(ye=0,U=isNaN(U)?O.c:U),isNaN(fe)?(fe=0,z=isNaN(z)?O.h:z):fe>180?fe-=360:fe<-180&&(fe+=360),function(ke){return ut(z+fe*ke,U+ye*ke,X+we*ke)+""}},v.interpolateHsl=function(pe,O){pe=v.hsl(pe),O=v.hsl(O);var z=pe.h,U=pe.s,X=pe.l,fe=O.h-z,ye=O.s-U,we=O.l-X;return isNaN(ye)&&(ye=0,U=isNaN(U)?O.s:U),isNaN(fe)?(fe=0,z=isNaN(z)?O.h:z):fe>180?fe-=360:fe<-180&&(fe+=360),function(ke){return Pt(z+fe*ke,U+ye*ke,X+we*ke)+""}},v.interpolateLab=function(pe,O){pe=v.lab(pe),O=v.lab(O);var z=pe.l,U=pe.a,X=pe.b,fe=O.l-z,ye=O.a-U,we=O.b-X;return function(ke){return Ht(z+fe*ke,U+ye*ke,X+we*ke)+""}},v.interpolateRound=js,v.transform=function(pe){var O=b.createElementNS(v.ns.prefix.svg,"g");return(v.transform=function(z){if(null!=z){O.setAttribute("transform",z);var U=O.transform.baseVal.consolidate()}return new Ss(U?U.matrix:Pl)})(pe)},Ss.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Pl={a:1,b:0,c:0,d:1,e:0,f:0};function Ms(pe){return pe.length?pe.pop()+",":""}function tl(pe,O){var X,fe,ye,z=[],U=[];return pe=v.transform(pe),O=v.transform(O),function(X,fe,ye,we){if(X[0]!==fe[0]||X[1]!==fe[1]){var ke=ye.push("translate(",null,",",null,")");we.push({i:ke-4,x:Ea(X[0],fe[0])},{i:ke-2,x:Ea(X[1],fe[1])})}else(fe[0]||fe[1])&&ye.push("translate("+fe+")")}(pe.translate,O.translate,z,U),ye=z,(X=pe.rotate)!==(fe=O.rotate)?(X-fe>180?fe+=360:fe-X>180&&(X+=360),U.push({i:ye.push(Ms(ye)+"rotate(",null,")")-2,x:Ea(X,fe)})):fe&&ye.push(Ms(ye)+"rotate("+fe+")"),function(X,fe,ye,we){X!==fe?we.push({i:ye.push(Ms(ye)+"skewX(",null,")")-2,x:Ea(X,fe)}):fe&&ye.push(Ms(ye)+"skewX("+fe+")")}(pe.skew,O.skew,z,U),function(X,fe,ye,we){if(X[0]!==fe[0]||X[1]!==fe[1]){var ke=ye.push(Ms(ye)+"scale(",null,",",null,")");we.push({i:ke-4,x:Ea(X[0],fe[0])},{i:ke-2,x:Ea(X[1],fe[1])})}else 1===fe[0]&&1===fe[1]||ye.push(Ms(ye)+"scale("+fe+")")}(pe.scale,O.scale,z,U),pe=O=null,function(X){for(var fe,ye=-1,we=U.length;++ye<we;)z[(fe=U[ye]).i]=fe.x(X);return z.join("")}}function Ol(pe,O){return O=(O-=pe=+pe)||1/O,function(z){return(z-pe)/O}}function Zs(pe,O){return O=(O-=pe=+pe)||1/O,function(z){return Math.max(0,Math.min(1,(z-pe)/O))}}function ja(pe){for(var O=pe.source,z=pe.target,U=function(ye,we){if(ye===we)return ye;for(var ke=Ye(ye),Pe=Ye(we),Ze=ke.pop(),nt=Pe.pop(),ht=null;Ze===nt;)ht=Ze,Ze=ke.pop(),nt=Pe.pop();return ht}(O,z),X=[O];O!==U;)X.push(O=O.parent);for(var fe=X.length;z!==U;)X.splice(fe,0,z),z=z.parent;return X}function Ye(pe){for(var O=[],z=pe.parent;null!=z;)O.push(pe),pe=z,z=z.parent;return O.push(pe),O}function Je(pe){pe.fixed|=2}function lt(pe){pe.fixed&=-7}function vt(pe){pe.fixed|=4,pe.px=pe.x,pe.py=pe.y}function Mt(pe){pe.fixed&=-5}v.interpolateTransform=tl,v.layout={},v.layout.bundle=function(){return function(pe){for(var O=[],z=-1,U=pe.length;++z<U;)O.push(ja(pe[z]));return O}},v.layout.chord=function(){var pe,O,z,U,X,fe,ye,we={},ke=0;function Pe(){var nt,ht,St,jt,Lt,Ft={},kt=[],Xt=v.range(U),Gt=[];for(pe=[],O=[],nt=0,jt=-1;++jt<U;){for(ht=0,Lt=-1;++Lt<U;)ht+=z[jt][Lt];kt.push(ht),Gt.push(v.range(U)),nt+=ht}for(X&&Xt.sort(function(Dr,Cr){return X(kt[Dr],kt[Cr])}),fe&&Gt.forEach(function(Dr,Cr){Dr.sort(function(fi,bi){return fe(z[Cr][fi],z[Cr][bi])})}),nt=(en-ke*U)/nt,ht=0,jt=-1;++jt<U;){for(St=ht,Lt=-1;++Lt<U;){var Qt=Xt[jt],gn=Gt[Qt][Lt],kn=z[Qt][gn],jn=ht,Nn=ht+=kn*nt;Ft[Qt+"-"+gn]={index:Qt,subindex:gn,startAngle:jn,endAngle:Nn,value:kn}}O[Qt]={index:Qt,startAngle:St,endAngle:ht,value:kt[Qt]},ht+=ke}for(jt=-1;++jt<U;)for(Lt=jt-1;++Lt<U;){var mr=Ft[jt+"-"+Lt],gr=Ft[Lt+"-"+jt];(mr.value||gr.value)&&pe.push(mr.value<gr.value?{source:gr,target:mr}:{source:mr,target:gr})}ye&&Ze()}function Ze(){pe.sort(function(nt,ht){return ye((nt.source.value+nt.target.value)/2,(ht.source.value+ht.target.value)/2)})}return we.matrix=function(nt){return arguments.length?(U=(z=nt)&&z.length,pe=O=null,we):z},we.padding=function(nt){return arguments.length?(ke=nt,pe=O=null,we):ke},we.sortGroups=function(nt){return arguments.length?(X=nt,pe=O=null,we):X},we.sortSubgroups=function(nt){return arguments.length?(fe=nt,pe=null,we):fe},we.sortChords=function(nt){return arguments.length?(ye=nt,pe&&Ze(),we):ye},we.chords=function(){return pe||Pe(),pe},we.groups=function(){return O||Pe(),O},we},v.layout.force=function(){var pe,O,z,U,X,fe,ye={},we=v.dispatch("start","tick","end"),ke=[1,1],Pe=.9,Ze=wt,nt=Bt,ht=-30,St=cn,jt=.1,Lt=.64,Ft=[],kt=[];function Xt(Qt){return function(gn,kn,jn,Nn){if(gn.point!==Qt){var mr=gn.cx-Qt.x,gr=gn.cy-Qt.y,Dr=Nn-kn,Cr=mr*mr+gr*gr;if(Dr*Dr/Lt<Cr){if(Cr<St){var fi=gn.charge/Cr;Qt.px-=mr*fi,Qt.py-=gr*fi}return!0}gn.point&&Cr&&Cr<St&&(Qt.px-=mr*(fi=gn.pointCharge/Cr),Qt.py-=gr*fi)}return!gn.charge}}function Gt(Qt){Qt.px=v.event.x,Qt.py=v.event.y,ye.resume()}return ye.tick=function(){if((z*=.99)<.005)return pe=null,we.end({type:"end",alpha:z=0}),!0;var Qt,gn,kn,jn,Nn,mr,gr,Dr,Cr,fi=Ft.length,bi=kt.length;for(gn=0;gn<bi;++gn)jn=(kn=kt[gn]).source,(mr=(Dr=(Nn=kn.target).x-jn.x)*Dr+(Cr=Nn.y-jn.y)*Cr)&&(Dr*=mr=z*X[gn]*((mr=Math.sqrt(mr))-U[gn])/mr,Cr*=mr,Nn.x-=Dr*(gr=jn.weight+Nn.weight?jn.weight/(jn.weight+Nn.weight):.5),Nn.y-=Cr*gr,jn.x+=Dr*(gr=1-gr),jn.y+=Cr*gr);if((gr=z*jt)&&(Dr=ke[0]/2,Cr=ke[1]/2,gn=-1,gr))for(;++gn<fi;)(kn=Ft[gn]).x+=(Dr-kn.x)*gr,kn.y+=(Cr-kn.y)*gr;if(ht)for(function Oi(ar,Gr,_i){var gi=0,Ai=0;if(ar.charge=0,!ar.leaf)for(var Bi,oa=ar.nodes,Mi=oa.length,qi=-1;++qi<Mi;)null!=(Bi=oa[qi])&&(Oi(Bi,Gr,_i),ar.charge+=Bi.charge,gi+=Bi.charge*Bi.cx,Ai+=Bi.charge*Bi.cy);if(ar.point){ar.leaf||(ar.point.x+=Math.random()-.5,ar.point.y+=Math.random()-.5);var Ii=Gr*_i[ar.point.index];ar.charge+=ar.pointCharge=Ii,gi+=Ii*ar.point.x,Ai+=Ii*ar.point.y}ar.cx=gi/ar.charge,ar.cy=Ai/ar.charge}(Qt=v.geom.quadtree(Ft),z,fe),gn=-1;++gn<fi;)(kn=Ft[gn]).fixed||Qt.visit(Xt(kn));for(gn=-1;++gn<fi;)(kn=Ft[gn]).fixed?(kn.x=kn.px,kn.y=kn.py):(kn.x-=(kn.px-(kn.px=kn.x))*Pe,kn.y-=(kn.py-(kn.py=kn.y))*Pe);we.tick({type:"tick",alpha:z})},ye.nodes=function(Qt){return arguments.length?(Ft=Qt,ye):Ft},ye.links=function(Qt){return arguments.length?(kt=Qt,ye):kt},ye.size=function(Qt){return arguments.length?(ke=Qt,ye):ke},ye.linkDistance=function(Qt){return arguments.length?(Ze="function"==typeof Qt?Qt:+Qt,ye):Ze},ye.distance=ye.linkDistance,ye.linkStrength=function(Qt){return arguments.length?(nt="function"==typeof Qt?Qt:+Qt,ye):nt},ye.friction=function(Qt){return arguments.length?(Pe=+Qt,ye):Pe},ye.charge=function(Qt){return arguments.length?(ht="function"==typeof Qt?Qt:+Qt,ye):ht},ye.chargeDistance=function(Qt){return arguments.length?(St=Qt*Qt,ye):Math.sqrt(St)},ye.gravity=function(Qt){return arguments.length?(jt=+Qt,ye):jt},ye.theta=function(Qt){return arguments.length?(Lt=Qt*Qt,ye):Math.sqrt(Lt)},ye.alpha=function(Qt){return arguments.length?(Qt=+Qt,z?Qt>0?z=Qt:(pe.c=null,pe.t=NaN,pe=null,we.end({type:"end",alpha:z=0})):Qt>0&&(we.start({type:"start",alpha:z=Qt}),pe=lr(ye.tick)),ye):z},ye.start=function(){var Qt,gn,kn,jn=Ft.length,Nn=kt.length,mr=ke[0],gr=ke[1];for(Qt=0;Qt<jn;++Qt)(kn=Ft[Qt]).index=Qt,kn.weight=0;for(Qt=0;Qt<Nn;++Qt)"number"==typeof(kn=kt[Qt]).source&&(kn.source=Ft[kn.source]),"number"==typeof kn.target&&(kn.target=Ft[kn.target]),++kn.source.weight,++kn.target.weight;for(Qt=0;Qt<jn;++Qt)kn=Ft[Qt],isNaN(kn.x)&&(kn.x=Dr("x",mr)),isNaN(kn.y)&&(kn.y=Dr("y",gr)),isNaN(kn.px)&&(kn.px=kn.x),isNaN(kn.py)&&(kn.py=kn.y);if(U=[],"function"==typeof Ze)for(Qt=0;Qt<Nn;++Qt)U[Qt]=+Ze.call(this,kt[Qt],Qt);else for(Qt=0;Qt<Nn;++Qt)U[Qt]=Ze;if(X=[],"function"==typeof nt)for(Qt=0;Qt<Nn;++Qt)X[Qt]=+nt.call(this,kt[Qt],Qt);else for(Qt=0;Qt<Nn;++Qt)X[Qt]=nt;if(fe=[],"function"==typeof ht)for(Qt=0;Qt<jn;++Qt)fe[Qt]=+ht.call(this,Ft[Qt],Qt);else for(Qt=0;Qt<jn;++Qt)fe[Qt]=ht;function Dr(Cr,fi){if(!gn){for(gn=new Array(jn),Gr=0;Gr<jn;++Gr)gn[Gr]=[];for(Gr=0;Gr<Nn;++Gr){var bi=kt[Gr];gn[bi.source.index].push(bi.target),gn[bi.target.index].push(bi.source)}}for(var Oi,ar=gn[Qt],Gr=-1,_i=ar.length;++Gr<_i;)if(!isNaN(Oi=ar[Gr][Cr]))return Oi;return Math.random()*fi}return ye.resume()},ye.resume=function(){return ye.alpha(.1)},ye.stop=function(){return ye.alpha(0)},ye.drag=function(){if(O||(O=v.behavior.drag().origin(I).on("dragstart.force",Je).on("drag.force",Gt).on("dragend.force",lt)),!arguments.length)return O;this.on("mouseover.force",vt).on("mouseout.force",Mt).call(O)},v.rebind(ye,we,"on")};var wt=20,Bt=1,cn=1/0;function fn(pe,O){return v.rebind(pe,O,"sort","children","value"),pe.nodes=pe,pe.links=qn,pe}function on(pe,O){for(var z=[pe];null!=(pe=z.pop());)if(O(pe),(X=pe.children)&&(U=X.length))for(var U,X;--U>=0;)z.push(X[U])}function vn(pe,O){for(var z=[pe],U=[];null!=(pe=z.pop());)if(U.push(pe),(fe=pe.children)&&(X=fe.length))for(var X,fe,ye=-1;++ye<X;)z.push(fe[ye]);for(;null!=(pe=U.pop());)O(pe)}function Mn(pe){return pe.children}function Ln(pe){return pe.value}function Pn(pe,O){return O.value-pe.value}function qn(pe){return v.merge(pe.map(function(O){return(O.children||[]).map(function(z){return{source:O,target:z}})}))}v.layout.hierarchy=function(){var pe=Pn,O=Mn,z=Ln;function U(X){var fe,ye=[X],we=[];for(X.depth=0;null!=(fe=ye.pop());)if(we.push(fe),(Pe=O.call(U,fe,fe.depth))&&(ke=Pe.length)){for(var ke,Pe,Ze;--ke>=0;)ye.push(Ze=Pe[ke]),Ze.parent=fe,Ze.depth=fe.depth+1;z&&(fe.value=0),fe.children=Pe}else z&&(fe.value=+z.call(U,fe,fe.depth)||0),delete fe.children;return vn(X,function(nt){var ht,St;pe&&(ht=nt.children)&&ht.sort(pe),z&&(St=nt.parent)&&(St.value+=nt.value)}),we}return U.sort=function(X){return arguments.length?(pe=X,U):pe},U.children=function(X){return arguments.length?(O=X,U):O},U.value=function(X){return arguments.length?(z=X,U):z},U.revalue=function(X){return z&&(on(X,function(fe){fe.children&&(fe.value=0)}),vn(X,function(fe){var ye;fe.children||(fe.value=+z.call(U,fe,fe.depth)||0),(ye=fe.parent)&&(ye.value+=fe.value)})),X},U},v.layout.partition=function(){var pe=v.layout.hierarchy(),O=[1,1];function z(U,X){var fe=pe.call(this,U,X);return function ye(we,ke,Pe,Ze){var nt=we.children;if(we.x=ke,we.y=we.depth*Ze,we.dx=Pe,we.dy=Ze,nt&&(ht=nt.length)){var ht,St,jt,Lt=-1;for(Pe=we.value?Pe/we.value:0;++Lt<ht;)ye(St=nt[Lt],ke,jt=St.value*Pe,Ze),ke+=jt}}(fe[0],0,O[0],O[1]/function ye(we){var ke=we.children,Pe=0;if(ke&&(Ze=ke.length))for(var Ze,nt=-1;++nt<Ze;)Pe=Math.max(Pe,ye(ke[nt]));return 1+Pe}(fe[0])),fe}return z.size=function(U){return arguments.length?(O=U,z):O},fn(z,pe)},v.layout.pie=function(){var pe=Number,O=kr,z=0,U=en,X=0;function fe(ye){var we,ke=ye.length,Pe=ye.map(function(Xt,Gt){return+pe.call(fe,Xt,Gt)}),Ze=+("function"==typeof z?z.apply(this,arguments):z),nt=("function"==typeof U?U.apply(this,arguments):U)-Ze,ht=Math.min(Math.abs(nt)/ke,+("function"==typeof X?X.apply(this,arguments):X)),St=ht*(nt<0?-1:1),jt=v.sum(Pe),Lt=jt?(nt-ke*St)/jt:0,Ft=v.range(ke),kt=[];return null!=O&&Ft.sort(O===kr?function(Xt,Gt){return Pe[Gt]-Pe[Xt]}:function(Xt,Gt){return O(ye[Xt],ye[Gt])}),Ft.forEach(function(Xt){kt[Xt]={data:ye[Xt],value:we=Pe[Xt],startAngle:Ze,endAngle:Ze+=we*Lt+St,padAngle:ht}}),kt}return fe.value=function(ye){return arguments.length?(pe=ye,fe):pe},fe.sort=function(ye){return arguments.length?(O=ye,fe):O},fe.startAngle=function(ye){return arguments.length?(z=ye,fe):z},fe.endAngle=function(ye){return arguments.length?(U=ye,fe):U},fe.padAngle=function(ye){return arguments.length?(X=ye,fe):X},fe};var kr={};function Fr(pe){return pe.x}function Xr(pe){return pe.y}function ai(pe,O,z){pe.y0=O,pe.y=z}v.layout.stack=function(){var pe=I,O=Hi,z=ra,U=ai,X=Fr,fe=Xr;function ye(we,ke){if(!(ht=we.length))return we;var Pe=we.map(function(Xt,Gt){return pe.call(ye,Xt,Gt)}),Ze=Pe.map(function(Xt){return Xt.map(function(Gt,Qt){return[X.call(ye,Gt,Qt),fe.call(ye,Gt,Qt)]})}),nt=O.call(ye,Ze,ke);Pe=v.permute(Pe,nt),Ze=v.permute(Ze,nt);var ht,St,jt,Lt,Ft=z.call(ye,Ze,ke),kt=Pe[0].length;for(jt=0;jt<kt;++jt)for(U.call(ye,Pe[0][jt],Lt=Ft[jt],Ze[0][jt][1]),St=1;St<ht;++St)U.call(ye,Pe[St][jt],Lt+=Ze[St-1][jt][1],Ze[St][jt][1]);return we}return ye.values=function(we){return arguments.length?(pe=we,ye):pe},ye.order=function(we){return arguments.length?(O="function"==typeof we?we:ni.get(we)||Hi,ye):O},ye.offset=function(we){return arguments.length?(z="function"==typeof we?we:ri.get(we)||ra,ye):z},ye.x=function(we){return arguments.length?(X=we,ye):X},ye.y=function(we){return arguments.length?(fe=we,ye):fe},ye.out=function(we){return arguments.length?(U=we,ye):U},ye};var ni=v.map({"inside-out":function(pe){var O,z,U=pe.length,X=pe.map(La),fe=pe.map(Sa),ye=v.range(U).sort(function(nt,ht){return X[nt]-X[ht]}),we=0,ke=0,Pe=[],Ze=[];for(O=0;O<U;++O)z=ye[O],we<ke?(we+=fe[z],Pe.push(z)):(ke+=fe[z],Ze.push(z));return Ze.reverse().concat(Pe)},reverse:function(pe){return v.range(pe.length).reverse()},default:Hi}),ri=v.map({silhouette:function(pe){var O,z,U,X=pe.length,fe=pe[0].length,ye=[],we=0,ke=[];for(z=0;z<fe;++z){for(O=0,U=0;O<X;O++)U+=pe[O][z][1];U>we&&(we=U),ye.push(U)}for(z=0;z<fe;++z)ke[z]=(we-ye[z])/2;return ke},wiggle:function(pe){var O,z,U,X,fe,ye,we,ke,Pe,Ze=pe.length,nt=pe[0],ht=nt.length,St=[];for(St[0]=ke=Pe=0,z=1;z<ht;++z){for(O=0,X=0;O<Ze;++O)X+=pe[O][z][1];for(O=0,fe=0,we=nt[z][0]-nt[z-1][0];O<Ze;++O){for(U=0,ye=(pe[O][z][1]-pe[O][z-1][1])/(2*we);U<O;++U)ye+=(pe[U][z][1]-pe[U][z-1][1])/we;fe+=ye*pe[O][z][1]}St[z]=ke-=X?fe/X*we:0,ke<Pe&&(Pe=ke)}for(z=0;z<ht;++z)St[z]-=Pe;return St},expand:function(pe){var O,z,U,X=pe.length,fe=pe[0].length,ye=1/X,we=[];for(z=0;z<fe;++z){for(O=0,U=0;O<X;O++)U+=pe[O][z][1];if(U)for(O=0;O<X;O++)pe[O][z][1]/=U;else for(O=0;O<X;O++)pe[O][z][1]=ye}for(z=0;z<fe;++z)we[z]=0;return we},zero:ra});function Hi(pe){return v.range(pe.length)}function ra(pe){for(var O=-1,z=pe[0].length,U=[];++O<z;)U[O]=0;return U}function La(pe){for(var O,z=1,U=0,X=pe[0][1],fe=pe.length;z<fe;++z)(O=pe[z][1])>X&&(U=z,X=O);return U}function Sa(pe){return pe.reduce(Oa,0)}function Oa(pe,O){return pe+O[1]}function yo(pe,O){return wo(pe,Math.ceil(Math.log(O.length)/Math.LN2+1))}function wo(pe,O){for(var z=-1,U=+pe[0],X=(pe[1]-U)/O,fe=[];++z<=O;)fe[z]=X*z+U;return fe}function Ta(pe){return[v.min(pe),v.max(pe)]}function Ga(pe,O){return pe.value-O.value}function To(pe,O){var z=pe._pack_next;pe._pack_next=O,O._pack_prev=pe,O._pack_next=z,z._pack_prev=O}function Fo(pe,O){pe._pack_next=O,O._pack_prev=pe}function fs(pe,O){var z=O.x-pe.x,U=O.y-pe.y,X=pe.r+O.r;return.999*X*X>z*z+U*U}function hs(pe){if((O=pe.children)&&(ke=O.length)){var O,z,U,X,fe,ye,we,ke,Pe=1/0,Ze=-1/0,nt=1/0,ht=-1/0;if(O.forEach($o),(z=O[0]).x=-z.r,z.y=0,Gt(z),ke>1&&((U=O[1]).x=U.r,U.y=0,Gt(U),ke>2))for(xa(z,U,X=O[2]),Gt(X),To(z,X),z._pack_prev=X,To(X,U),U=z._pack_next,fe=3;fe<ke;fe++){xa(z,U,X=O[fe]);var St=0,jt=1,Lt=1;for(ye=U._pack_next;ye!==U;ye=ye._pack_next,jt++)if(fs(ye,X)){St=1;break}if(1==St)for(we=z._pack_prev;we!==ye._pack_prev&&!fs(we,X);we=we._pack_prev,Lt++);St?(jt<Lt||jt==Lt&&U.r<z.r?Fo(z,U=ye):Fo(z=we,U),fe--):(To(z,X),U=X,Gt(X))}var Ft=(Pe+Ze)/2,kt=(nt+ht)/2,Xt=0;for(fe=0;fe<ke;fe++)(X=O[fe]).x-=Ft,X.y-=kt,Xt=Math.max(Xt,X.r+Math.sqrt(X.x*X.x+X.y*X.y));pe.r=Xt,O.forEach(ds)}function Gt(Qt){Pe=Math.min(Qt.x-Qt.r,Pe),Ze=Math.max(Qt.x+Qt.r,Ze),nt=Math.min(Qt.y-Qt.r,nt),ht=Math.max(Qt.y+Qt.r,ht)}}function $o(pe){pe._pack_next=pe._pack_prev=pe}function ds(pe){delete pe._pack_next,delete pe._pack_prev}function xa(pe,O,z){var U=pe.r+z.r,X=O.x-pe.x,fe=O.y-pe.y;if(U&&(X||fe)){var ye=O.r+z.r,we=X*X+fe*fe,ke=.5+((U*=U)-(ye*=ye))/(2*we),Pe=Math.sqrt(Math.max(0,2*ye*(U+we)-(U-=we)*U-ye*ye))/(2*we);z.x=pe.x+ke*X+Pe*fe,z.y=pe.y+ke*fe-Pe*X}else z.x=pe.x+U,z.y=pe.y}function _t(pe,O){return pe.parent==O.parent?1:2}function qt(pe){var O=pe.children;return O.length?O[0]:pe.t}function _n(pe){var O,z=pe.children;return(O=z.length)?z[O-1]:pe.t}function nn(pe,O,z){var U=z/(O.i-pe.i);O.c-=U,O.s+=z,pe.c+=U,O.z+=z,O.m+=z}function dn(pe,O,z){return pe.a.parent===O.parent?pe.a:z}function Un(pe){return{x:pe.x,y:pe.y,dx:pe.dx,dy:pe.dy}}function $n(pe,O){var z=pe.x+O[3],U=pe.y+O[0],X=pe.dx-O[1]-O[3],fe=pe.dy-O[0]-O[2];return X<0&&(z+=X/2,X=0),fe<0&&(U+=fe/2,fe=0),{x:z,y:U,dx:X,dy:fe}}function cr(pe){var O=pe[0],z=pe[pe.length-1];return O<z?[O,z]:[z,O]}function Tr(pe){return pe.rangeExtent?pe.rangeExtent():cr(pe.range())}function Er(pe,O,z,U){var X=z(pe[0],pe[1]),fe=U(O[0],O[1]);return function(ye){return fe(X(ye))}}function Rr(pe,O){var z,U=0,X=pe.length-1,fe=pe[U],ye=pe[X];return ye<fe&&(z=U,U=X,X=z,z=fe,fe=ye,ye=z),pe[U]=O.floor(fe),pe[X]=O.ceil(ye),pe}function jr(pe){return pe?{floor:function(O){return Math.floor(O/pe)*pe},ceil:function(O){return Math.ceil(O/pe)*pe}}:_r}v.layout.histogram=function(){var pe=!0,O=Number,z=Ta,U=yo;function X(fe,ye){for(var we,ke,Pe=[],Ze=fe.map(O,this),nt=z.call(this,Ze,ye),ht=U.call(this,nt,Ze,ye),St=(ye=-1,Ze.length),jt=ht.length-1,Lt=pe?1:1/St;++ye<jt;)(we=Pe[ye]=[]).dx=ht[ye+1]-(we.x=ht[ye]),we.y=0;if(jt>0)for(ye=-1;++ye<St;)(ke=Ze[ye])>=nt[0]&&ke<=nt[1]&&((we=Pe[v.bisect(ht,ke,1,jt)-1]).y+=Lt,we.push(fe[ye]));return Pe}return X.value=function(fe){return arguments.length?(O=fe,X):O},X.range=function(fe){return arguments.length?(z=In(fe),X):z},X.bins=function(fe){return arguments.length?(U="number"==typeof fe?function(ye){return wo(ye,fe)}:In(fe),X):U},X.frequency=function(fe){return arguments.length?(pe=!!fe,X):pe},X},v.layout.pack=function(){var pe,O=v.layout.hierarchy().sort(Ga),z=0,U=[1,1];function X(fe,ye){var we=O.call(this,fe,ye),ke=we[0],Pe=U[0],Ze=U[1],nt=null==pe?Math.sqrt:"function"==typeof pe?pe:function(){return pe};if(ke.x=ke.y=0,vn(ke,function(St){St.r=+nt(St.value)}),vn(ke,hs),z){var ht=z*(pe?1:Math.max(2*ke.r/Pe,2*ke.r/Ze))/2;vn(ke,function(St){St.r+=ht}),vn(ke,hs),vn(ke,function(St){St.r-=ht})}return function St(jt,Lt,Ft,kt){var Xt=jt.children;if(jt.x=Lt+=kt*jt.x,jt.y=Ft+=kt*jt.y,jt.r*=kt,Xt)for(var Gt=-1,Qt=Xt.length;++Gt<Qt;)St(Xt[Gt],Lt,Ft,kt)}(ke,Pe/2,Ze/2,pe?1:1/Math.max(2*ke.r/Pe,2*ke.r/Ze)),we}return X.size=function(fe){return arguments.length?(U=fe,X):U},X.radius=function(fe){return arguments.length?(pe=null==fe||"function"==typeof fe?fe:+fe,X):pe},X.padding=function(fe){return arguments.length?(z=+fe,X):z},fn(X,O)},v.layout.tree=function(){var pe=v.layout.hierarchy().sort(null).value(null),O=_t,z=[1,1],U=null;function X(ke,Pe){var Ze=pe.call(this,ke,Pe),nt=Ze[0],ht=function(Gt){for(var Qt,gn={A:null,children:[Gt]},kn=[gn];null!=(Qt=kn.pop());)for(var jn,Nn=Qt.children,mr=0,gr=Nn.length;mr<gr;++mr)kn.push((Nn[mr]=jn={_:Nn[mr],parent:Qt,children:(jn=Nn[mr].children)&&jn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:mr}).a=jn);return gn.children[0]}(nt);if(vn(ht,fe),ht.parent.m=-ht.z,on(ht,ye),U)on(nt,we);else{var St=nt,jt=nt,Lt=nt;on(nt,function(Gt){Gt.x<St.x&&(St=Gt),Gt.x>jt.x&&(jt=Gt),Gt.depth>Lt.depth&&(Lt=Gt)});var Ft=O(St,jt)/2-St.x,kt=z[0]/(jt.x+O(jt,St)/2+Ft),Xt=z[1]/(Lt.depth||1);on(nt,function(Gt){Gt.x=(Gt.x+Ft)*kt,Gt.y=Gt.depth*Xt})}return Ze}function fe(ke){var Pe=ke.children,Ze=ke.parent.children,nt=ke.i?Ze[ke.i-1]:null;if(Pe.length){!function(St){for(var jt,Lt=0,Ft=0,kt=St.children,Xt=kt.length;--Xt>=0;)(jt=kt[Xt]).z+=Lt,jt.m+=Lt,Lt+=jt.s+(Ft+=jt.c)}(ke);var ht=(Pe[0].z+Pe[Pe.length-1].z)/2;nt?(ke.z=nt.z+O(ke._,nt._),ke.m=ke.z-ht):ke.z=ht}else nt&&(ke.z=nt.z+O(ke._,nt._));ke.parent.A=function(St,jt,Lt){if(jt){for(var Ft,kt=St,Xt=St,Gt=jt,Qt=kt.parent.children[0],gn=kt.m,kn=Xt.m,jn=Gt.m,Nn=Qt.m;Gt=_n(Gt),kt=qt(kt),Gt&&kt;)Qt=qt(Qt),(Xt=_n(Xt)).a=St,(Ft=Gt.z+jn-kt.z-gn+O(Gt._,kt._))>0&&(nn(dn(Gt,St,Lt),St,Ft),gn+=Ft,kn+=Ft),jn+=Gt.m,gn+=kt.m,Nn+=Qt.m,kn+=Xt.m;Gt&&!_n(Xt)&&(Xt.t=Gt,Xt.m+=jn-kn),kt&&!qt(Qt)&&(Qt.t=kt,Qt.m+=gn-Nn,Lt=St)}return Lt}(ke,nt,ke.parent.A||Ze[0])}function ye(ke){ke._.x=ke.z+ke.parent.m,ke.m+=ke.parent.m}function we(ke){ke.x*=z[0],ke.y=ke.depth*z[1]}return X.separation=function(ke){return arguments.length?(O=ke,X):O},X.size=function(ke){return arguments.length?(U=null==(z=ke)?we:null,X):U?null:z},X.nodeSize=function(ke){return arguments.length?(U=null==(z=ke)?null:we,X):U?z:null},fn(X,pe)},v.layout.cluster=function(){var pe=v.layout.hierarchy().sort(null).value(null),O=_t,z=[1,1],U=!1;function X(fe,ye){var we,ke=pe.call(this,fe,ye),Pe=ke[0],Ze=0;vn(Pe,function(Lt){var kt,Ft=Lt.children;Ft&&Ft.length?(Lt.x=(kt=Ft).reduce(function(Xt,Gt){return Xt+Gt.x},0)/kt.length,Lt.y=function(kt){return 1+v.max(kt,function(Xt){return Xt.y})}(Ft)):(Lt.x=we?Ze+=O(Lt,we):0,Lt.y=0,we=Lt)});var nt=function Lt(Ft){var kt=Ft.children;return kt&&kt.length?Lt(kt[0]):Ft}(Pe),ht=function Lt(Ft){var kt,Xt=Ft.children;return Xt&&(kt=Xt.length)?Lt(Xt[kt-1]):Ft}(Pe),St=nt.x-O(nt,ht)/2,jt=ht.x+O(ht,nt)/2;return vn(Pe,U?function(Lt){Lt.x=(Lt.x-Pe.x)*z[0],Lt.y=(Pe.y-Lt.y)*z[1]}:function(Lt){Lt.x=(Lt.x-St)/(jt-St)*z[0],Lt.y=(1-(Pe.y?Lt.y/Pe.y:1))*z[1]}),ke}return X.separation=function(fe){return arguments.length?(O=fe,X):O},X.size=function(fe){return arguments.length?(U=null==(z=fe),X):U?null:z},X.nodeSize=function(fe){return arguments.length?(U=null!=(z=fe),X):U?z:null},fn(X,pe)},v.layout.treemap=function(){var pe,O=v.layout.hierarchy(),z=Math.round,U=[1,1],X=null,fe=Un,ye=!1,we="squarify",ke=.5*(1+Math.sqrt(5));function Pe(Lt,Ft){for(var kt,Xt,Gt=-1,Qt=Lt.length;++Gt<Qt;)Xt=(kt=Lt[Gt]).value*(Ft<0?0:Ft),kt.area=isNaN(Xt)||Xt<=0?0:Xt}function Ze(Lt){var Ft=Lt.children;if(Ft&&Ft.length){var kt,Xt,Gt,Qt=fe(Lt),gn=[],kn=Ft.slice(),jn=1/0,Nn="slice"===we?Qt.dx:"dice"===we?Qt.dy:"slice-dice"===we?1&Lt.depth?Qt.dy:Qt.dx:Math.min(Qt.dx,Qt.dy);for(Pe(kn,Qt.dx*Qt.dy/Lt.value),gn.area=0;(Gt=kn.length)>0;)gn.push(kt=kn[Gt-1]),gn.area+=kt.area,"squarify"!==we||(Xt=ht(gn,Nn))<=jn?(kn.pop(),jn=Xt):(gn.area-=gn.pop().area,St(gn,Nn,Qt,!1),Nn=Math.min(Qt.dx,Qt.dy),gn.length=gn.area=0,jn=1/0);gn.length&&(St(gn,Nn,Qt,!0),gn.length=gn.area=0),Ft.forEach(Ze)}}function nt(Lt){var Ft=Lt.children;if(Ft&&Ft.length){var kt,Xt=fe(Lt),Gt=Ft.slice(),Qt=[];for(Pe(Gt,Xt.dx*Xt.dy/Lt.value),Qt.area=0;kt=Gt.pop();)Qt.push(kt),Qt.area+=kt.area,null!=kt.z&&(St(Qt,kt.z?Xt.dx:Xt.dy,Xt,!Gt.length),Qt.length=Qt.area=0);Ft.forEach(nt)}}function ht(Lt,Ft){for(var kt,Xt=Lt.area,Gt=0,Qt=1/0,gn=-1,kn=Lt.length;++gn<kn;)(kt=Lt[gn].area)&&(kt<Qt&&(Qt=kt),kt>Gt&&(Gt=kt));return Ft*=Ft,(Xt*=Xt)?Math.max(Ft*Gt*ke/Xt,Xt/(Ft*Qt*ke)):1/0}function St(Lt,Ft,kt,Xt){var Gt,Qt=-1,gn=Lt.length,kn=kt.x,jn=kt.y,Nn=Ft?z(Lt.area/Ft):0;if(Ft==kt.dx){for((Xt||Nn>kt.dy)&&(Nn=kt.dy);++Qt<gn;)(Gt=Lt[Qt]).x=kn,Gt.y=jn,Gt.dy=Nn,kn+=Gt.dx=Math.min(kt.x+kt.dx-kn,Nn?z(Gt.area/Nn):0);Gt.z=!0,Gt.dx+=kt.x+kt.dx-kn,kt.y+=Nn,kt.dy-=Nn}else{for((Xt||Nn>kt.dx)&&(Nn=kt.dx);++Qt<gn;)(Gt=Lt[Qt]).x=kn,Gt.y=jn,Gt.dx=Nn,jn+=Gt.dy=Math.min(kt.y+kt.dy-jn,Nn?z(Gt.area/Nn):0);Gt.z=!1,Gt.dy+=kt.y+kt.dy-jn,kt.x+=Nn,kt.dx-=Nn}}function jt(Lt){var Ft=pe||O(Lt),kt=Ft[0];return kt.x=kt.y=0,kt.value?(kt.dx=U[0],kt.dy=U[1]):kt.dx=kt.dy=0,pe&&O.revalue(kt),Pe([kt],kt.dx*kt.dy/kt.value),(pe?nt:Ze)(kt),ye&&(pe=Ft),Ft}return jt.size=function(Lt){return arguments.length?(U=Lt,jt):U},jt.padding=function(Lt){if(!arguments.length)return X;function Ft(Gt){var Qt=Lt.call(jt,Gt,Gt.depth);return null==Qt?Un(Gt):$n(Gt,"number"==typeof Qt?[Qt,Qt,Qt,Qt]:Qt)}function kt(Gt){return $n(Gt,Lt)}var Xt;return fe=null==(X=Lt)?Un:"function"==(Xt=typeof Lt)?Ft:("number"===Xt&&(Lt=[Lt,Lt,Lt,Lt]),kt),jt},jt.round=function(Lt){return arguments.length?(z=Lt?Math.round:Number,jt):z!=Number},jt.sticky=function(Lt){return arguments.length?(ye=Lt,pe=null,jt):ye},jt.ratio=function(Lt){return arguments.length?(ke=Lt,jt):ke},jt.mode=function(Lt){return arguments.length?(we=Lt+"",jt):we},fn(jt,O)},v.random={normal:function(pe,O){var z=arguments.length;return z<2&&(O=1),z<1&&(pe=0),function(){var U,X,fe;do{fe=(U=2*Math.random()-1)*U+(X=2*Math.random()-1)*X}while(!fe||fe>1);return pe+O*U*Math.sqrt(-2*Math.log(fe)/fe)}},logNormal:function(){var pe=v.random.normal.apply(v,arguments);return function(){return Math.exp(pe())}},bates:function(pe){var O=v.random.irwinHall(pe);return function(){return O()/pe}},irwinHall:function(pe){return function(){for(var O=0,z=0;z<pe;z++)O+=Math.random();return O}}},v.scale={};var _r={floor:I,ceil:I};function Hr(pe,O,z,U){var X=[],fe=[],ye=0,we=Math.min(pe.length,O.length)-1;for(pe[we]<pe[0]&&(pe=pe.slice().reverse(),O=O.slice().reverse());++ye<=we;)X.push(z(pe[ye-1],pe[ye])),fe.push(U(O[ye-1],O[ye]));return function(ke){var Pe=v.bisect(pe,ke,1,we)-1;return fe[Pe](X[Pe](ke))}}function ii(pe,O){return v.rebind(pe,O,"range","rangeRound","interpolate","clamp")}function pi(pe,O){return Rr(pe,jr(Ti(pe,O)[2])),Rr(pe,jr(Ti(pe,O)[2])),pe}function Ti(pe,O){null==O&&(O=10);var z=cr(pe),U=z[1]-z[0],X=Math.pow(10,Math.floor(Math.log(U/O)/Math.LN10)),fe=O/U*X;return fe<=.15?X*=10:fe<=.35?X*=5:fe<=.75&&(X*=2),z[0]=Math.ceil(z[0]/X)*X,z[1]=Math.floor(z[1]/X)*X+.5*X,z[2]=X,z}function dr(pe,O){return v.range.apply(v,Ti(pe,O))}v.scale.linear=function(){return function pe(O,z,U,X){var fe,ye;function we(){var Pe=Math.min(O.length,z.length)>2?Hr:Er,Ze=X?Zs:Ol;return fe=Pe(O,z,Ze,U),ye=Pe(z,O,Ze,go),ke}function ke(Pe){return fe(Pe)}return ke.invert=function(Pe){return ye(Pe)},ke.domain=function(Pe){return arguments.length?(O=Pe.map(Number),we()):O},ke.range=function(Pe){return arguments.length?(z=Pe,we()):z},ke.rangeRound=function(Pe){return ke.range(Pe).interpolate(js)},ke.clamp=function(Pe){return arguments.length?(X=Pe,we()):X},ke.interpolate=function(Pe){return arguments.length?(U=Pe,we()):U},ke.ticks=function(Pe){return dr(O,Pe)},ke.tickFormat=function(Pe,Ze){return d3_scale_linearTickFormat(O,Pe,Ze)},ke.nice=function(Pe){return pi(O,Pe),we()},ke.copy=function(){return pe(O,z,U,X)},we()}([0,1],[0,1],go,!1)},v.scale.log=function(){return function pe(O,z,U,X){function fe(ke){return(U?Math.log(ke<0?0:ke):-Math.log(ke>0?0:-ke))/Math.log(z)}function ye(ke){return U?Math.pow(z,ke):-Math.pow(z,-ke)}function we(ke){return O(fe(ke))}return we.invert=function(ke){return ye(O.invert(ke))},we.domain=function(ke){return arguments.length?(U=ke[0]>=0,O.domain((X=ke.map(Number)).map(fe)),we):X},we.base=function(ke){return arguments.length?(z=+ke,O.domain(X.map(fe)),we):z},we.nice=function(){var ke=Rr(X.map(fe),U?Math:ki);return O.domain(ke),X=ke.map(ye),we},we.ticks=function(){var ke=cr(X),Pe=[],Ze=ke[0],nt=ke[1],ht=Math.floor(fe(Ze)),St=Math.ceil(fe(nt)),jt=z%1?2:z;if(isFinite(St-ht)){if(U){for(;ht<St;ht++)for(var Lt=1;Lt<jt;Lt++)Pe.push(ye(ht)*Lt);Pe.push(ye(ht))}else for(Pe.push(ye(ht));ht++<St;)for(Lt=jt-1;Lt>0;Lt--)Pe.push(ye(ht)*Lt);for(ht=0;Pe[ht]<Ze;ht++);for(St=Pe.length;Pe[St-1]>nt;St--);Pe=Pe.slice(ht,St)}return Pe},we.copy=function(){return pe(O.copy(),z,U,X)},ii(we,O)}(v.scale.linear().domain([0,1]),10,!0,[1,10])};var ki={floor:function(pe){return-Math.ceil(-pe)},ceil:function(pe){return-Math.floor(-pe)}};function wr(pe){return function(O){return O<0?-Math.pow(-O,pe):Math.pow(O,pe)}}v.scale.pow=function(){return function pe(O,z,U){var X=wr(z),fe=wr(1/z);function ye(we){return O(X(we))}return ye.invert=function(we){return fe(O.invert(we))},ye.domain=function(we){return arguments.length?(O.domain((U=we.map(Number)).map(X)),ye):U},ye.ticks=function(we){return dr(U,we)},ye.tickFormat=function(we,ke){return d3_scale_linearTickFormat(U,we,ke)},ye.nice=function(we){return ye.domain(pi(U,we))},ye.exponent=function(we){return arguments.length?(X=wr(z=we),fe=wr(1/z),O.domain(U.map(X)),ye):z},ye.copy=function(){return pe(O.copy(),z,U)},ii(ye,O)}(v.scale.linear(),1,[0,1])},v.scale.sqrt=function(){return v.scale.pow().exponent(.5)},v.scale.ordinal=function(){return function pe(O,z){var U,X,fe;function ye(ke){return X[((U.get(ke)||("range"===z.t?U.set(ke,O.push(ke)):NaN))-1)%X.length]}function we(ke,Pe){return v.range(O.length).map(function(Ze){return ke+Pe*Ze})}return ye.domain=function(ke){if(!arguments.length)return O;O=[],U=new A;for(var Pe,Ze=-1,nt=ke.length;++Ze<nt;)U.has(Pe=ke[Ze])||U.set(Pe,O.push(Pe));return ye[z.t].apply(ye,z.a)},ye.range=function(ke){return arguments.length?(X=ke,fe=0,z={t:"range",a:arguments},ye):X},ye.rangePoints=function(ke,Pe){arguments.length<2&&(Pe=0);var Ze=ke[0],nt=ke[1],ht=O.length<2?(Ze=(Ze+nt)/2,0):(nt-Ze)/(O.length-1+Pe);return X=we(Ze+ht*Pe/2,ht),fe=0,z={t:"rangePoints",a:arguments},ye},ye.rangeRoundPoints=function(ke,Pe){arguments.length<2&&(Pe=0);var Ze=ke[0],nt=ke[1],ht=O.length<2?(Ze=nt=Math.round((Ze+nt)/2),0):(nt-Ze)/(O.length-1+Pe)|0;return X=we(Ze+Math.round(ht*Pe/2+(nt-Ze-(O.length-1+Pe)*ht)/2),ht),fe=0,z={t:"rangeRoundPoints",a:arguments},ye},ye.rangeBands=function(ke,Pe,Ze){arguments.length<2&&(Pe=0),arguments.length<3&&(Ze=Pe);var nt=ke[1]<ke[0],ht=ke[nt-0],jt=(ke[1-nt]-ht)/(O.length-Pe+2*Ze);return X=we(ht+jt*Ze,jt),nt&&X.reverse(),fe=jt*(1-Pe),z={t:"rangeBands",a:arguments},ye},ye.rangeRoundBands=function(ke,Pe,Ze){arguments.length<2&&(Pe=0),arguments.length<3&&(Ze=Pe);var nt=ke[1]<ke[0],ht=ke[nt-0],St=ke[1-nt],jt=Math.floor((St-ht)/(O.length-Pe+2*Ze));return X=we(ht+Math.round((St-ht-(O.length-Pe)*jt)/2),jt),nt&&X.reverse(),fe=Math.round(jt*(1-Pe)),z={t:"rangeRoundBands",a:arguments},ye},ye.rangeBand=function(){return fe},ye.rangeExtent=function(){return cr(z.a[0])},ye.copy=function(){return pe(O,z)},ye.domain(O)}([],{t:"range",a:[[]]})},v.scale.category10=function(){return v.scale.ordinal().range(hi)},v.scale.category20=function(){return v.scale.ordinal().range(Ei)},v.scale.category20b=function(){return v.scale.ordinal().range(Ji)},v.scale.category20c=function(){return v.scale.ordinal().range(ya)};var hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(un),Ei=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(un),Ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(un),ya=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(un);function Yr(){return 0}v.scale.quantile=function(){return function pe(O,z){var U;function X(){var ye=0,we=z.length;for(U=[];++ye<we;)U[ye-1]=v.quantile(O,ye/we);return fe}function fe(ye){if(!isNaN(ye=+ye))return z[v.bisect(U,ye)]}return fe.domain=function(ye){return arguments.length?(O=ye.map(d).filter(p).sort(s),X()):O},fe.range=function(ye){return arguments.length?(z=ye,X()):z},fe.quantiles=function(){return U},fe.invertExtent=function(ye){return(ye=z.indexOf(ye))<0?[NaN,NaN]:[ye>0?U[ye-1]:O[0],ye<U.length?U[ye]:O[O.length-1]]},fe.copy=function(){return pe(O,z)},X()}([],[])},v.scale.quantize=function(){return function pe(O,z,U){var X,fe;function ye(ke){return U[Math.max(0,Math.min(fe,Math.floor(X*(ke-O))))]}function we(){return X=U.length/(z-O),fe=U.length-1,ye}return ye.domain=function(ke){return arguments.length?(O=+ke[0],z=+ke[ke.length-1],we()):[O,z]},ye.range=function(ke){return arguments.length?(U=ke,we()):U},ye.invertExtent=function(ke){return[ke=(ke=U.indexOf(ke))<0?NaN:ke/X+O,ke+1/X]},ye.copy=function(){return pe(O,z,U)},we()}(0,1,[0,1])},v.scale.threshold=function(){return function pe(O,z){function U(X){if(X<=X)return z[v.bisect(O,X)]}return U.domain=function(X){return arguments.length?(O=X,U):O},U.range=function(X){return arguments.length?(z=X,U):z},U.invertExtent=function(X){return X=z.indexOf(X),[O[X-1],O[X]]},U.copy=function(){return pe(O,z)},U}([.5],[0,1])},v.scale.identity=function(){return function pe(O){function z(U){return+U}return z.invert=z,z.domain=z.range=function(U){return arguments.length?(O=U.map(z),z):O},z.ticks=function(U){return dr(O,U)},z.tickFormat=function(U,X){return d3_scale_linearTickFormat(O,U,X)},z.copy=function(){return pe(O)},z}([0,1])},v.svg={},v.svg.arc=function(){var pe=ha,O=pr,z=Yr,U=Ma,X=Di,fe=Qi,ye=aa;function we(){var Pe=Math.max(0,+pe.apply(this,arguments)),Ze=Math.max(0,+O.apply(this,arguments)),nt=X.apply(this,arguments)-Qe,ht=fe.apply(this,arguments)-Qe,St=Math.abs(ht-nt),jt=nt>ht?0:1;if(Ze<Pe&&(Lt=Ze,Ze=Pe,Pe=Lt),St>=Ge)return ke(Ze,jt)+(Pe?ke(Pe,1-jt):"")+"Z";var Lt,Ft,kt,Xt,Gt,Qt,gn,kn,jn,Nn,mr,gr,Dr=0,Cr=0,fi=[];if((Xt=(+ye.apply(this,arguments)||0)/2)&&(kt=U===Ma?Math.sqrt(Pe*Pe+Ze*Ze):+U.apply(this,arguments),jt||(Cr*=-1),Ze&&(Cr=Be(kt/Ze*Math.sin(Xt))),Pe&&(Dr=Be(kt/Pe*Math.sin(Xt)))),Ze){Gt=Ze*Math.cos(nt+Cr),Qt=Ze*Math.sin(nt+Cr),gn=Ze*Math.cos(ht-Cr),kn=Ze*Math.sin(ht-Cr);var bi=Math.abs(ht-nt-2*Cr)<=rn?0:1;if(Cr&&Si(Gt,Qt,gn,kn)===jt^bi){var Oi=(nt+ht)/2;Gt=Ze*Math.cos(Oi),Qt=Ze*Math.sin(Oi),gn=kn=null}}else Gt=Qt=0;if(Pe){jn=Pe*Math.cos(ht-Dr),Nn=Pe*Math.sin(ht-Dr),mr=Pe*Math.cos(nt+Dr),gr=Pe*Math.sin(nt+Dr);var ar=Math.abs(nt-ht+2*Dr)<=rn?0:1;if(Dr&&Si(jn,Nn,mr,gr)===1-jt^ar){var Gr=(nt+ht)/2;jn=Pe*Math.cos(Gr),Nn=Pe*Math.sin(Gr),mr=gr=null}}else jn=Nn=0;if(St>Nt&&(Lt=Math.min(Math.abs(Ze-Pe)/2,+z.apply(this,arguments)))>.001){Ft=Pe<Ze^jt?0:1;var _i=Lt,gi=Lt;if(St<rn){var Ai=null==mr?[jn,Nn]:null==gn?[Gt,Qt]:Or([Gt,Qt],[mr,gr],[gn,kn],[jn,Nn]),Bi=Gt-Ai[0],oa=Qt-Ai[1],Mi=gn-Ai[0],qi=kn-Ai[1],Ii=1/Math.sin(Math.acos((Bi*Mi+oa*qi)/(Math.sqrt(Bi*Bi+oa*oa)*Math.sqrt(Mi*Mi+qi*qi)))/2),da=Math.sqrt(Ai[0]*Ai[0]+Ai[1]*Ai[1]);gi=Math.min(Lt,(Pe-da)/(Ii-1)),_i=Math.min(Lt,(Ze-da)/(Ii+1))}if(null!=gn){var Wi=Ia(null==mr?[jn,Nn]:[mr,gr],[Gt,Qt],Ze,_i,jt),la=Ia([gn,kn],[jn,Nn],Ze,_i,jt);Lt===_i?fi.push("M",Wi[0],"A",_i,",",_i," 0 0,",Ft," ",Wi[1],"A",Ze,",",Ze," 0 ",1-jt^Si(Wi[1][0],Wi[1][1],la[1][0],la[1][1]),",",jt," ",la[1],"A",_i,",",_i," 0 0,",Ft," ",la[0]):fi.push("M",Wi[0],"A",_i,",",_i," 0 1,",Ft," ",la[0])}else fi.push("M",Gt,",",Qt);if(null!=mr){var wa=Ia([Gt,Qt],[mr,gr],Pe,-gi,jt),eo=Ia([jn,Nn],null==gn?[Gt,Qt]:[gn,kn],Pe,-gi,jt);Lt===gi?fi.push("L",eo[0],"A",gi,",",gi," 0 0,",Ft," ",eo[1],"A",Pe,",",Pe," 0 ",jt^Si(eo[1][0],eo[1][1],wa[1][0],wa[1][1]),",",1-jt," ",wa[1],"A",gi,",",gi," 0 0,",Ft," ",wa[0]):fi.push("L",eo[0],"A",gi,",",gi," 0 0,",Ft," ",wa[0])}else fi.push("L",jn,",",Nn)}else fi.push("M",Gt,",",Qt),null!=gn&&fi.push("A",Ze,",",Ze," 0 ",bi,",",jt," ",gn,",",kn),fi.push("L",jn,",",Nn),null!=mr&&fi.push("A",Pe,",",Pe," 0 ",ar,",",1-jt," ",mr,",",gr);return fi.push("Z"),fi.join("")}function ke(Pe,Ze){return"M0,"+Pe+"A"+Pe+","+Pe+" 0 1,"+Ze+" 0,"+-Pe+"A"+Pe+","+Pe+" 0 1,"+Ze+" 0,"+Pe}return we.innerRadius=function(Pe){return arguments.length?(pe=In(Pe),we):pe},we.outerRadius=function(Pe){return arguments.length?(O=In(Pe),we):O},we.cornerRadius=function(Pe){return arguments.length?(z=In(Pe),we):z},we.padRadius=function(Pe){return arguments.length?(U=Pe==Ma?Ma:In(Pe),we):U},we.startAngle=function(Pe){return arguments.length?(X=In(Pe),we):X},we.endAngle=function(Pe){return arguments.length?(fe=In(Pe),we):fe},we.padAngle=function(Pe){return arguments.length?(ye=In(Pe),we):ye},we.centroid=function(){var Pe=(+pe.apply(this,arguments)+ +O.apply(this,arguments))/2,Ze=(+X.apply(this,arguments)+ +fe.apply(this,arguments))/2-Qe;return[Math.cos(Ze)*Pe,Math.sin(Ze)*Pe]},we};var Ma="auto";function ha(pe){return pe.innerRadius}function pr(pe){return pe.outerRadius}function Di(pe){return pe.startAngle}function Qi(pe){return pe.endAngle}function aa(pe){return pe&&pe.padAngle}function Si(pe,O,z,U){return(pe-z)*O-(O-U)*pe>0?0:1}function Ia(pe,O,z,U,X){var fe=pe[0]-O[0],ye=pe[1]-O[1],we=(X?U:-U)/Math.sqrt(fe*fe+ye*ye),ke=we*ye,Pe=-we*fe,Ze=pe[0]+ke,nt=pe[1]+Pe,ht=O[0]+ke,St=O[1]+Pe,jt=(Ze+ht)/2,Lt=(nt+St)/2,Ft=ht-Ze,kt=St-nt,Xt=Ft*Ft+kt*kt,Gt=z-U,Qt=Ze*St-ht*nt,gn=(kt<0?-1:1)*Math.sqrt(Math.max(0,Gt*Gt*Xt-Qt*Qt)),kn=(Qt*kt-Ft*gn)/Xt,jn=(-Qt*Ft-kt*gn)/Xt,Nn=(Qt*kt+Ft*gn)/Xt,mr=(-Qt*Ft+kt*gn)/Xt,gr=kn-jt,Dr=jn-Lt,Cr=Nn-jt,fi=mr-Lt;return gr*gr+Dr*Dr>Cr*Cr+fi*fi&&(kn=Nn,jn=mr),[[kn-ke,jn-Pe],[kn*z/Gt,jn*z/Gt]]}function ao(){return!0}function Xs(pe){var O=Fn,z=br,U=ao,X=Ds,fe=X.key,ye=.7;function we(ke){var Pe,Ze=[],nt=[],ht=-1,St=ke.length,jt=In(O),Lt=In(z);function Ft(){Ze.push("M",X(pe(nt),ye))}for(;++ht<St;)U.call(this,Pe=ke[ht],ht)?nt.push([+jt.call(this,Pe,ht),+Lt.call(this,Pe,ht)]):nt.length&&(Ft(),nt=[]);return nt.length&&Ft(),Ze.length?Ze.join(""):null}return we.x=function(ke){return arguments.length?(O=ke,we):O},we.y=function(ke){return arguments.length?(z=ke,we):z},we.defined=function(ke){return arguments.length?(U=ke,we):U},we.interpolate=function(ke){return arguments.length?(fe="function"==typeof ke?X=ke:(X=Cs.get(ke)||Ds).key,we):fe},we.tension=function(ke){return arguments.length?(ye=ke,we):ye},we}v.svg.line=function(){return Xs(I)};var Cs=v.map({linear:Ds,"linear-closed":$i,step:function(pe){for(var O=0,z=pe.length,U=pe[0],X=[U[0],",",U[1]];++O<z;)X.push("H",(U[0]+(U=pe[O])[0])/2,"V",U[1]);return z>1&&X.push("H",U[0]),X.join("")},"step-before":lo,"step-after":ns,basis:Wo,"basis-open":function(pe){if(pe.length<4)return Ds(pe);for(var O,z=[],U=-1,X=pe.length,fe=[0],ye=[0];++U<3;)fe.push((O=pe[U])[0]),ye.push(O[1]);for(z.push(za(rs,fe)+","+za(rs,ye)),--U;++U<X;)O=pe[U],fe.shift(),fe.push(O[0]),ye.shift(),ye.push(O[1]),Al(z,fe,ye);return z.join("")},"basis-closed":function(pe){for(var O,z,U=-1,X=pe.length,fe=X+4,ye=[],we=[];++U<4;)ye.push((z=pe[U%X])[0]),we.push(z[1]);for(O=[za(rs,ye),",",za(rs,we)],--U;++U<fe;)z=pe[U%X],ye.shift(),ye.push(z[0]),we.shift(),we.push(z[1]),Al(O,ye,we);return O.join("")},bundle:function(pe,O){var z=pe.length-1;if(z)for(var U,X,fe=pe[0][0],ye=pe[0][1],we=pe[z][0]-fe,ke=pe[z][1]-ye,Pe=-1;++Pe<=z;)(U=pe[Pe])[0]=O*U[0]+(1-O)*(fe+(X=Pe/z)*we),U[1]=O*U[1]+(1-O)*(ye+X*ke);return Wo(pe)},cardinal:function(pe,O){return pe.length<3?Ds(pe):pe[0]+ua(pe,Ja(pe,O))},"cardinal-open":function(pe,O){return pe.length<4?Ds(pe):pe[1]+ua(pe.slice(1,-1),Ja(pe,O))},"cardinal-closed":function(pe,O){return pe.length<3?$i(pe):pe[0]+ua((pe.push(pe[0]),pe),Ja([pe[pe.length-2]].concat(pe,[pe[1]]),O))},monotone:function(pe){return pe.length<3?Ds(pe):pe[0]+ua(pe,function(O){for(var z,U,X,fe,ye=[],we=function(Ze){for(var nt=0,ht=Ze.length-1,St=[],jt=Ze[0],Lt=Ze[1],Ft=St[0]=vl(jt,Lt);++nt<ht;)St[nt]=(Ft+(Ft=vl(jt=Lt,Lt=Ze[nt+1])))/2;return St[nt]=Ft,St}(O),ke=-1,Pe=O.length-1;++ke<Pe;)z=vl(O[ke],O[ke+1]),u(z)<Nt?we[ke]=we[ke+1]=0:(fe=(U=we[ke]/z)*U+(X=we[ke+1]/z)*X)>9&&(fe=3*z/Math.sqrt(fe),we[ke]=fe*U,we[ke+1]=fe*X);for(ke=-1;++ke<=Pe;)fe=(O[Math.min(Pe,ke+1)][0]-O[Math.max(0,ke-1)][0])/(6*(1+we[ke]*we[ke])),ye.push([fe||0,we[ke]*fe||0]);return ye}(pe))}});function Ds(pe){return pe.length>1?pe.join("L"):pe+"Z"}function $i(pe){return pe.join("L")+"Z"}function lo(pe){for(var O=0,z=pe.length,U=pe[0],X=[U[0],",",U[1]];++O<z;)X.push("V",(U=pe[O])[1],"H",U[0]);return X.join("")}function ns(pe){for(var O=0,z=pe.length,U=pe[0],X=[U[0],",",U[1]];++O<z;)X.push("H",(U=pe[O])[0],"V",U[1]);return X.join("")}function ua(pe,O){if(O.length<1||pe.length!=O.length&&pe.length!=O.length+2)return Ds(pe);var z=pe.length!=O.length,U="",X=pe[0],fe=pe[1],ye=O[0],we=ye,ke=1;if(z&&(U+="Q"+(fe[0]-2*ye[0]/3)+","+(fe[1]-2*ye[1]/3)+","+fe[0]+","+fe[1],X=pe[1],ke=2),O.length>1){fe=pe[ke],ke++,U+="C"+(X[0]+ye[0])+","+(X[1]+ye[1])+","+(fe[0]-(we=O[1])[0])+","+(fe[1]-we[1])+","+fe[0]+","+fe[1];for(var Pe=2;Pe<O.length;Pe++,ke++)U+="S"+((fe=pe[ke])[0]-(we=O[Pe])[0])+","+(fe[1]-we[1])+","+fe[0]+","+fe[1]}if(z){var Ze=pe[ke];U+="Q"+(fe[0]+2*we[0]/3)+","+(fe[1]+2*we[1]/3)+","+Ze[0]+","+Ze[1]}return U}function Ja(pe,O){for(var z,U=[],X=(1-O)/2,fe=pe[0],ye=pe[1],we=1,ke=pe.length;++we<ke;)z=fe,fe=ye,U.push([X*((ye=pe[we])[0]-z[0]),X*(ye[1]-z[1])]);return U}function Wo(pe){if(pe.length<3)return Ds(pe);var O=1,z=pe.length,U=pe[0],X=U[0],fe=U[1],ye=[X,X,X,(U=pe[1])[0]],we=[fe,fe,fe,U[1]],ke=[X,",",fe,"L",za(rs,ye),",",za(rs,we)];for(pe.push(pe[z-1]);++O<=z;)U=pe[O],ye.shift(),ye.push(U[0]),we.shift(),we.push(U[1]),Al(ke,ye,we);return pe.pop(),ke.push("L",U),ke.join("")}function za(pe,O){return pe[0]*O[0]+pe[1]*O[1]+pe[2]*O[2]+pe[3]*O[3]}Cs.forEach(function(pe,O){O.key=pe,O.closed=/-closed$/.test(pe)});var Mo=[0,2/3,1/3,0],Qa=[0,1/3,2/3,0],rs=[0,1/6,2/3,1/6];function Al(pe,O,z){pe.push("C",za(Mo,O),",",za(Mo,z),",",za(Qa,O),",",za(Qa,z),",",za(rs,O),",",za(rs,z))}function vl(pe,O){return(O[1]-pe[1])/(O[0]-pe[0])}function Wl(pe){for(var O,z,U,X=-1,fe=pe.length;++X<fe;)z=(O=pe[X])[0],U=O[1]-Qe,O[0]=z*Math.cos(U),O[1]=z*Math.sin(U);return pe}function Lo(pe){var O=Fn,z=Fn,U=0,X=br,fe=ao,ye=Ds,we=ye.key,ke=ye,Pe="L",Ze=.7;function nt(ht){var St,jt,Lt,Ft=[],kt=[],Xt=[],Gt=-1,Qt=ht.length,gn=In(O),kn=In(U),jn=O===z?function(){return jt}:In(z),Nn=U===X?function(){return Lt}:In(X);function mr(){Ft.push("M",ye(pe(Xt),Ze),Pe,ke(pe(kt.reverse()),Ze),"Z")}for(;++Gt<Qt;)fe.call(this,St=ht[Gt],Gt)?(kt.push([jt=+gn.call(this,St,Gt),Lt=+kn.call(this,St,Gt)]),Xt.push([+jn.call(this,St,Gt),+Nn.call(this,St,Gt)])):kt.length&&(mr(),kt=[],Xt=[]);return kt.length&&mr(),Ft.length?Ft.join(""):null}return nt.x=function(ht){return arguments.length?(O=z=ht,nt):z},nt.x0=function(ht){return arguments.length?(O=ht,nt):O},nt.x1=function(ht){return arguments.length?(z=ht,nt):z},nt.y=function(ht){return arguments.length?(U=X=ht,nt):X},nt.y0=function(ht){return arguments.length?(U=ht,nt):U},nt.y1=function(ht){return arguments.length?(X=ht,nt):X},nt.defined=function(ht){return arguments.length?(fe=ht,nt):fe},nt.interpolate=function(ht){return arguments.length?(we="function"==typeof ht?ye=ht:(ye=Cs.get(ht)||Ds).key,ke=ye.reverse||ye,Pe=ye.closed?"M":"L",nt):we},nt.tension=function(ht){return arguments.length?(Ze=ht,nt):Ze},nt}function Kl(pe){return pe.source}function Io(pe){return pe.target}function xl(pe){return pe.radius}function Pi(pe){return[pe.x,pe.y]}function Gi(pe){return function(){var O=pe.apply(this,arguments),z=O[0],U=O[1]-Qe;return[z*Math.cos(U),z*Math.sin(U)]}}function Jl(){return 64}function Ql(){return"circle"}function hl(pe){var O=Math.sqrt(pe/rn);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}v.svg.line.radial=function(){var pe=Xs(Wl);return pe.radius=pe.x,delete pe.x,pe.angle=pe.y,delete pe.y,pe},lo.reverse=ns,ns.reverse=lo,v.svg.area=function(){return Lo(I)},v.svg.area.radial=function(){var pe=Lo(Wl);return pe.radius=pe.x,delete pe.x,pe.innerRadius=pe.x0,delete pe.x0,pe.outerRadius=pe.x1,delete pe.x1,pe.angle=pe.y,delete pe.y,pe.startAngle=pe.y0,delete pe.y0,pe.endAngle=pe.y1,delete pe.y1,pe},v.svg.chord=function(){var pe=Kl,O=Io,z=xl,U=Di,X=Qi;function fe(Pe,Ze){var nt,ht,St=ye(this,pe,Pe,Ze),jt=ye(this,O,Pe,Ze);return"M"+St.p0+we(St.r,St.p1,St.a1-St.a0)+((nt=St).a0==(ht=jt).a0&&nt.a1==ht.a1?ke(0,0,0,St.p0):ke(0,0,0,jt.p0)+we(jt.r,jt.p1,jt.a1-jt.a0)+ke(0,0,0,St.p0))+"Z"}function ye(Pe,Ze,nt,ht){var St=Ze.call(Pe,nt,ht),jt=z.call(Pe,St,ht),Lt=U.call(Pe,St,ht)-Qe,Ft=X.call(Pe,St,ht)-Qe;return{r:jt,a0:Lt,a1:Ft,p0:[jt*Math.cos(Lt),jt*Math.sin(Lt)],p1:[jt*Math.cos(Ft),jt*Math.sin(Ft)]}}function we(Pe,Ze,nt){return"A"+Pe+","+Pe+" 0 "+ +(nt>rn)+",1 "+Ze}function ke(Pe,Ze,nt,ht){return"Q 0,0 "+ht}return fe.radius=function(Pe){return arguments.length?(z=In(Pe),fe):z},fe.source=function(Pe){return arguments.length?(pe=In(Pe),fe):pe},fe.target=function(Pe){return arguments.length?(O=In(Pe),fe):O},fe.startAngle=function(Pe){return arguments.length?(U=In(Pe),fe):U},fe.endAngle=function(Pe){return arguments.length?(X=In(Pe),fe):X},fe},v.svg.diagonal=function(){var pe=Kl,O=Io,z=Pi;function U(X,fe){var ye=pe.call(this,X,fe),we=O.call(this,X,fe),ke=(ye.y+we.y)/2,Pe=[ye,{x:ye.x,y:ke},{x:we.x,y:ke},we];return"M"+(Pe=Pe.map(z))[0]+"C"+Pe[1]+" "+Pe[2]+" "+Pe[3]}return U.source=function(X){return arguments.length?(pe=In(X),U):pe},U.target=function(X){return arguments.length?(O=In(X),U):O},U.projection=function(X){return arguments.length?(z=X,U):z},U},v.svg.diagonal.radial=function(){var pe=v.svg.diagonal(),O=Pi,z=pe.projection;return pe.projection=function(U){return arguments.length?z(Gi(O=U)):O},pe},v.svg.symbol=function(){var pe=Ql,O=Jl;function z(U,X){return(Ls.get(pe.call(this,U,X))||hl)(O.call(this,U,X))}return z.type=function(U){return arguments.length?(pe=In(U),z):pe},z.size=function(U){return arguments.length?(O=In(U),z):O},z};var Ls=v.map({circle:hl,cross:function(pe){var O=Math.sqrt(pe/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(pe){var O=Math.sqrt(pe/(2*pc)),z=O*pc;return"M0,"+-O+"L"+z+",0 0,"+O+" "+-z+",0Z"},square:function(pe){var O=Math.sqrt(pe)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(pe){var O=Math.sqrt(pe/Is),z=O*Is/2;return"M0,"+z+"L"+O+","+-z+" "+-O+","+-z+"Z"},"triangle-up":function(pe){var O=Math.sqrt(pe/Is),z=O*Is/2;return"M0,"+-z+"L"+O+","+z+" "+-O+","+z+"Z"}});v.svg.symbolTypes=Ls.keys();var Is=Math.sqrt(3),pc=Math.tan(30*Rt);te.transition=function(pe){for(var O,z,U=uo||++kl,X=nu(pe),fe=[],ye=bl||{time:Date.now(),ease:Ka,delay:0,duration:250},we=-1,ke=this.length;++we<ke;){fe.push(O=[]);for(var Pe=this[we],Ze=-1,nt=Pe.length;++Ze<nt;)(z=Pe[Ze])&&nl(z,Ze,X,U,ye),O.push(z)}return Pa(fe,X,U)},te.interrupt=function(pe){return this.each(null==pe?eu:ca(nu(pe)))};var eu=ca(nu());function ca(pe){return function(){var O,z,U;(O=this[pe])&&(U=O[z=O.active])&&(U.timer.c=null,U.timer.t=NaN,--O.count?delete O[z]:delete this[pe],O.active+=.5,U.event&&U.event.interrupt.call(this,this.__data__,U.index))}}function Pa(pe,O,z){return q(pe,No),pe.namespace=O,pe.id=z,pe}var uo,bl,No=[],kl=0;function tu(pe,O,z,U){var X=pe.id,fe=pe.namespace;return qe(pe,"function"==typeof z?function(ye,we,ke){ye[fe][X].tween.set(O,U(z.call(ye,ye.__data__,we,ke)))}:(z=U(z),function(ye){ye[fe][X].tween.set(O,z)}))}function Yl(pe){return null==pe&&(pe=""),function(){this.textContent=pe}}function nu(pe){return null==pe?"__transition__":"__transition_"+pe+"__"}function nl(pe,O,z,U,X){var fe,ye,we,ke,Pe,Ze=pe[z]||(pe[z]={active:0,count:0}),nt=Ze[U];function ht(jt){var Lt=Ze.active,Ft=Ze[Lt];for(var kt in Ft&&(Ft.timer.c=null,Ft.timer.t=NaN,--Ze.count,delete Ze[Lt],Ft.event&&Ft.event.interrupt.call(pe,pe.__data__,Ft.index)),Ze)if(+kt<U){var Xt=Ze[kt];Xt.timer.c=null,Xt.timer.t=NaN,--Ze.count,delete Ze[kt]}ye.c=St,lr(function(){return ye.c&&St(jt||1)&&(ye.c=null,ye.t=NaN),1},0,fe),Ze.active=U,nt.event&&nt.event.start.call(pe,pe.__data__,O),Pe=[],nt.tween.forEach(function(Gt,Qt){(Qt=Qt.call(pe,pe.__data__,O))&&Pe.push(Qt)}),ke=nt.ease,we=nt.duration}function St(jt){for(var Lt=jt/we,Ft=ke(Lt),kt=Pe.length;kt>0;)Pe[--kt].call(pe,Ft);if(Lt>=1)return nt.event&&nt.event.end.call(pe,pe.__data__,O),--Ze.count?delete Ze[U]:delete pe[z],1}nt||(ye=lr(function(jt){var Lt=nt.delay;if(ye.t=Lt+fe,Lt<=jt)return ht(jt-Lt);ye.c=ht},0,fe=X.time),nt=Ze[U]={tween:new A,time:fe,timer:ye,delay:X.delay,duration:X.duration,ease:X.ease,index:O},X=null,++Ze.count)}No.call=te.call,No.empty=te.empty,No.node=te.node,No.size=te.size,v.transition=function(pe,O){return pe&&pe.transition?uo?pe.transition(O):pe:v.selection().transition(pe)},v.transition.prototype=No,No.select=function(pe){var O,z,U,X=this.id,fe=this.namespace,ye=[];pe=le(pe);for(var we=-1,ke=this.length;++we<ke;){ye.push(O=[]);for(var Pe=this[we],Ze=-1,nt=Pe.length;++Ze<nt;)(U=Pe[Ze])&&(z=pe.call(U,U.__data__,Ze,we))?("__data__"in U&&(z.__data__=U.__data__),nl(z,Ze,fe,X,U[fe][X]),O.push(z)):O.push(null)}return Pa(ye,fe,X)},No.selectAll=function(pe){var O,z,U,X,fe,ye=this.id,we=this.namespace,ke=[];pe=ue(pe);for(var Pe=-1,Ze=this.length;++Pe<Ze;)for(var nt=this[Pe],ht=-1,St=nt.length;++ht<St;)if(U=nt[ht]){fe=U[we][ye],z=pe.call(U,U.__data__,ht,Pe),ke.push(O=[]);for(var jt=-1,Lt=z.length;++jt<Lt;)(X=z[jt])&&nl(X,jt,we,ye,fe),O.push(X)}return Pa(ke,we,ye)},No.filter=function(pe){var O,z,U=[];"function"!=typeof pe&&(pe=Re(pe));for(var X=0,fe=this.length;X<fe;X++){U.push(O=[]);for(var ye,we=0,ke=(ye=this[X]).length;we<ke;we++)(z=ye[we])&&pe.call(z,z.__data__,we,X)&&O.push(z)}return Pa(U,this.namespace,this.id)},No.tween=function(pe,O){var z=this.id,U=this.namespace;return arguments.length<2?this.node()[U][z].tween.get(pe):qe(this,null==O?function(X){X[U][z].tween.remove(pe)}:function(X){X[U][z].tween.set(pe,O)})},No.attr=function(pe,O){if(arguments.length<2){for(O in pe)this.attr(O,pe[O]);return this}var z="transform"==pe?tl:go,U=v.ns.qualify(pe);function X(){this.removeAttribute(U)}function fe(){this.removeAttributeNS(U.space,U.local)}function ye(ke){return null==ke?X:(ke+="",function(){var Pe,Ze=this.getAttribute(U);return Ze!==ke&&(Pe=z(Ze,ke),function(nt){this.setAttribute(U,Pe(nt))})})}function we(ke){return null==ke?fe:(ke+="",function(){var Pe,Ze=this.getAttributeNS(U.space,U.local);return Ze!==ke&&(Pe=z(Ze,ke),function(nt){this.setAttributeNS(U.space,U.local,Pe(nt))})})}return tu(this,"attr."+pe,O,U.local?we:ye)},No.attrTween=function(pe,O){var z=v.ns.qualify(pe);return this.tween("attr."+pe,z.local?function(U,X){var fe=O.call(this,U,X,this.getAttributeNS(z.space,z.local));return fe&&function(ye){this.setAttributeNS(z.space,z.local,fe(ye))}}:function(U,X){var fe=O.call(this,U,X,this.getAttribute(z));return fe&&function(ye){this.setAttribute(z,fe(ye))}})},No.style=function(pe,O,z){var U=arguments.length;if(U<3){if("string"!=typeof pe){for(z in U<2&&(O=""),pe)this.style(z,pe[z],O);return this}z=""}function X(){this.style.removeProperty(pe)}function fe(ye){return null==ye?X:(ye+="",function(){var we,ke=o(this).getComputedStyle(this,null).getPropertyValue(pe);return ke!==ye&&(we=go(ke,ye),function(Pe){this.style.setProperty(pe,we(Pe),z)})})}return tu(this,"style."+pe,O,fe)},No.styleTween=function(pe,O,z){function U(X,fe){var ye=O.call(this,X,fe,o(this).getComputedStyle(this,null).getPropertyValue(pe));return ye&&function(we){this.style.setProperty(pe,ye(we),z)}}return arguments.length<3&&(z=""),this.tween("style."+pe,U)},No.text=function(pe){return tu(this,"text",pe,Yl)},No.remove=function(){var pe=this.namespace;return this.each("end.transition",function(){var O;this[pe].count<2&&(O=this.parentNode)&&O.removeChild(this)})},No.ease=function(pe){var O=this.id,z=this.namespace;return arguments.length<1?this.node()[z][O].ease:("function"!=typeof pe&&(pe=v.ease.apply(v,arguments)),qe(this,function(U){U[z][O].ease=pe}))},No.delay=function(pe){var O=this.id,z=this.namespace;return arguments.length<1?this.node()[z][O].delay:qe(this,"function"==typeof pe?function(U,X,fe){U[z][O].delay=+pe.call(U,U.__data__,X,fe)}:(pe=+pe,function(U){U[z][O].delay=pe}))},No.duration=function(pe){var O=this.id,z=this.namespace;return arguments.length<1?this.node()[z][O].duration:qe(this,"function"==typeof pe?function(U,X,fe){U[z][O].duration=Math.max(1,pe.call(U,U.__data__,X,fe))}:(pe=Math.max(1,pe),function(U){U[z][O].duration=pe}))},No.each=function(pe,O){var z=this.id,U=this.namespace;if(arguments.length<2){var X=bl,fe=uo;try{uo=z,qe(this,function(ye,we,ke){bl=ye[U][z],pe.call(ye,ye.__data__,we,ke)})}finally{bl=X,uo=fe}}else qe(this,function(ye){var we=ye[U][z];(we.event||(we.event=v.dispatch("start","end","interrupt"))).on(pe,O)});return this},No.transition=function(){for(var pe,O,z,U=this.id,X=++kl,fe=this.namespace,ye=[],we=0,ke=this.length;we<ke;we++){ye.push(pe=[]);for(var Pe,Ze=0,nt=(Pe=this[we]).length;Ze<nt;Ze++)(O=Pe[Ze])&&nl(O,Ze,fe,X,{time:(z=O[fe][U]).time,ease:z.ease,delay:z.delay+z.duration,duration:z.duration}),pe.push(O)}return Pa(ye,fe,X)},v.svg.axis=function(){var pe,O=v.scale.linear(),z=ru,U=6,X=6,fe=3,ye=[10],we=null;function ke(Pe){Pe.each(function(){var Ze,nt=v.select(this),ht=this.__chart__||O,St=this.__chart__=O.copy(),jt=null==we?St.ticks?St.ticks.apply(St,ye):St.domain():we,Lt=null==pe?St.tickFormat?St.tickFormat.apply(St,ye):I:pe,Ft=nt.selectAll(".tick").data(jt,St),kt=Ft.enter().insert("g",".domain").attr("class","tick").style("opacity",Nt),Xt=v.transition(Ft.exit()).style("opacity",Nt).remove(),Gt=v.transition(Ft.order()).style("opacity",1),Qt=Math.max(U,0)+fe,gn=Tr(St),kn=nt.selectAll(".domain").data([0]),jn=(kn.enter().append("path").attr("class","domain"),v.transition(kn));kt.append("line"),kt.append("text");var Nn,mr,gr,Dr,Cr=kt.select("line"),fi=Gt.select("line"),bi=Ft.select("text").text(Lt),Oi=kt.select("text"),ar=Gt.select("text"),Gr="top"===z||"left"===z?-1:1;if("bottom"===z||"top"===z?(Ze=_l,Nn="x",gr="y",mr="x2",Dr="y2",bi.attr("dy",Gr<0?"0em":".71em").style("text-anchor","middle"),jn.attr("d","M"+gn[0]+","+Gr*X+"V0H"+gn[1]+"V"+Gr*X)):(Ze=Xu,Nn="y",gr="x",mr="y2",Dr="x2",bi.attr("dy",".32em").style("text-anchor",Gr<0?"end":"start"),jn.attr("d","M"+Gr*X+","+gn[0]+"H0V"+gn[1]+"H"+Gr*X)),Cr.attr(Dr,Gr*U),Oi.attr(gr,Gr*Qt),fi.attr(mr,0).attr(Dr,Gr*U),ar.attr(Nn,0).attr(gr,Gr*Qt),St.rangeBand){var _i=St,gi=_i.rangeBand()/2;ht=St=function(Ai){return _i(Ai)+gi}}else ht.rangeBand?ht=St:Xt.call(Ze,St,ht);kt.call(Ze,ht,St),Gt.call(Ze,St,St)})}return ke.scale=function(Pe){return arguments.length?(O=Pe,ke):O},ke.orient=function(Pe){return arguments.length?(z=Pe in ku?Pe+"":ru,ke):z},ke.ticks=function(){return arguments.length?(ye=T(arguments),ke):ye},ke.tickValues=function(Pe){return arguments.length?(we=Pe,ke):we},ke.tickFormat=function(Pe){return arguments.length?(pe=Pe,ke):pe},ke.tickSize=function(Pe){var Ze=arguments.length;return Ze?(U=+Pe,X=+arguments[Ze-1],ke):U},ke.innerTickSize=function(Pe){return arguments.length?(U=+Pe,ke):U},ke.outerTickSize=function(Pe){return arguments.length?(X=+Pe,ke):X},ke.tickPadding=function(Pe){return arguments.length?(fe=+Pe,ke):fe},ke.tickSubdivide=function(){return arguments.length&&ke},ke};var ru="bottom",ku={top:1,right:1,bottom:1,left:1};function _l(pe,O,z){pe.attr("transform",function(U){var X=O(U);return"translate("+(isFinite(X)?X:z(U))+",0)"})}function Xu(pe,O,z){pe.attr("transform",function(U){var X=O(U);return"translate(0,"+(isFinite(X)?X:z(U))+")"})}v.svg.brush=function(){var pe,O,z=ie(Ze,"brushstart","brush","brushend"),U=null,X=null,fe=[0,0],ye=[0,0],we=!0,ke=!0,Pe=Ao[0];function Ze(Lt){Lt.each(function(){var Ft=v.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",jt).on("touchstart.brush",jt),kt=Ft.selectAll(".background").data([0]);kt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ft.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Xt=Ft.selectAll(".resize").data(Pe,I);Xt.exit().remove(),Xt.enter().append("g").attr("class",function(kn){return"resize "+kn}).style("cursor",function(kn){return iu[kn]}).append("rect").attr("x",function(kn){return/[ew]$/.test(kn)?-3:null}).attr("y",function(kn){return/^[ns]/.test(kn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Xt.style("display",Ze.empty()?"none":null);var Gt,Qt=v.transition(Ft),gn=v.transition(kt);U&&(Gt=Tr(U),gn.attr("x",Gt[0]).attr("width",Gt[1]-Gt[0]),ht(Qt)),X&&(Gt=Tr(X),gn.attr("y",Gt[0]).attr("height",Gt[1]-Gt[0]),St(Qt)),nt(Qt)})}function nt(Lt){Lt.selectAll(".resize").attr("transform",function(Ft){return"translate("+fe[+/e$/.test(Ft)]+","+ye[+/^s/.test(Ft)]+")"})}function ht(Lt){Lt.select(".extent").attr("x",fe[0]),Lt.selectAll(".extent,.n>rect,.s>rect").attr("width",fe[1]-fe[0])}function St(Lt){Lt.select(".extent").attr("y",ye[0]),Lt.selectAll(".extent,.e>rect,.w>rect").attr("height",ye[1]-ye[0])}function jt(){var Lt,Ft,kt=this,Xt=v.select(v.event.target),Gt=z.of(kt,arguments),Qt=v.select(kt),gn=Xt.datum(),kn=!/^(n|s)$/.test(gn)&&U,jn=!/^(e|w)$/.test(gn)&&X,Nn=Xt.classed("extent"),mr=Ut(kt),gr=v.mouse(kt),Dr=v.select(o(kt)).on("keydown.brush",bi).on("keyup.brush",Oi);if(v.event.changedTouches?Dr.on("touchmove.brush",ar).on("touchend.brush",_i):Dr.on("mousemove.brush",ar).on("mouseup.brush",_i),Qt.interrupt().selectAll("*").interrupt(),Nn)gr[0]=fe[0]-gr[0],gr[1]=ye[0]-gr[1];else if(gn){var Cr=+/w$/.test(gn),fi=+/^n/.test(gn);Ft=[fe[1-Cr]-gr[0],ye[1-fi]-gr[1]],gr[0]=fe[Cr],gr[1]=ye[fi]}else v.event.altKey&&(Lt=gr.slice());function bi(){32==v.event.keyCode&&(Nn||(Lt=null,gr[0]-=fe[1],gr[1]-=ye[1],Nn=2),$())}function Oi(){32==v.event.keyCode&&2==Nn&&(gr[0]+=fe[1],gr[1]+=ye[1],Nn=0,$())}function ar(){var gi=v.mouse(kt),Ai=!1;Ft&&(gi[0]+=Ft[0],gi[1]+=Ft[1]),Nn||(v.event.altKey?(Lt||(Lt=[(fe[0]+fe[1])/2,(ye[0]+ye[1])/2]),gr[0]=fe[+(gi[0]<Lt[0])],gr[1]=ye[+(gi[1]<Lt[1])]):Lt=null),kn&&Gr(gi,U,0)&&(ht(Qt),Ai=!0),jn&&Gr(gi,X,1)&&(St(Qt),Ai=!0),Ai&&(nt(Qt),Gt({type:"brush",mode:Nn?"move":"resize"}))}function Gr(gi,Ai,Bi){var oa,Mi,qi=Tr(Ai),Ii=qi[0],da=qi[1],Wi=gr[Bi],la=Bi?ye:fe,wa=la[1]-la[0];if(Nn&&(Ii-=Wi,da-=wa+Wi),oa=(Bi?ke:we)?Math.max(Ii,Math.min(da,gi[Bi])):gi[Bi],Nn?Mi=(oa+=Wi)+wa:(Lt&&(Wi=Math.max(Ii,Math.min(da,2*Lt[Bi]-oa))),Wi<oa?(Mi=oa,oa=Wi):Mi=Wi),la[0]!=oa||la[1]!=Mi)return Bi?O=null:pe=null,la[0]=oa,la[1]=Mi,!0}function _i(){ar(),Qt.style("pointer-events","all").selectAll(".resize").style("display",Ze.empty()?"none":null),v.select("body").style("cursor",null),Dr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),mr(),Gt({type:"brushend"})}Qt.style("pointer-events","none").selectAll(".resize").style("display",null),v.select("body").style("cursor",Xt.style("cursor")),Gt({type:"brushstart"}),ar()}return Ze.event=function(Lt){Lt.each(function(){var Ft=z.of(this,arguments),kt={x:fe,y:ye,i:pe,j:O},Xt=this.__chart__||kt;this.__chart__=kt,uo?v.select(this).transition().each("start.brush",function(){pe=Xt.i,O=Xt.j,fe=Xt.x,ye=Xt.y,Ft({type:"brushstart"})}).tween("brush:brush",function(){var Gt=Ni(fe,kt.x),Qt=Ni(ye,kt.y);return pe=O=null,function(gn){fe=kt.x=Gt(gn),ye=kt.y=Qt(gn),Ft({type:"brush",mode:"resize"})}}).each("end.brush",function(){pe=kt.i,O=kt.j,Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"})}):(Ft({type:"brushstart"}),Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"}))})},Ze.x=function(Lt){return arguments.length?(Pe=Ao[!(U=Lt)<<1|!X],Ze):U},Ze.y=function(Lt){return arguments.length?(Pe=Ao[!U<<1|!(X=Lt)],Ze):X},Ze.clamp=function(Lt){return arguments.length?(U&&X?(we=!!Lt[0],ke=!!Lt[1]):U?we=!!Lt:X&&(ke=!!Lt),Ze):U&&X?[we,ke]:U?we:X?ke:null},Ze.extent=function(Lt){var Ft,kt,Xt,Gt,Qt;return arguments.length?(U&&(Ft=Lt[0],kt=Lt[1],X&&(Ft=Ft[0],kt=kt[0]),pe=[Ft,kt],U.invert&&(Ft=U(Ft),kt=U(kt)),kt<Ft&&(Qt=Ft,Ft=kt,kt=Qt),Ft==fe[0]&&kt==fe[1]||(fe=[Ft,kt])),X&&(Xt=Lt[0],Gt=Lt[1],U&&(Xt=Xt[1],Gt=Gt[1]),O=[Xt,Gt],X.invert&&(Xt=X(Xt),Gt=X(Gt)),Gt<Xt&&(Qt=Xt,Xt=Gt,Gt=Qt),Xt==ye[0]&&Gt==ye[1]||(ye=[Xt,Gt])),Ze):(U&&(pe?(Ft=pe[0],kt=pe[1]):(Ft=fe[0],kt=fe[1],U.invert&&(Ft=U.invert(Ft),kt=U.invert(kt)),kt<Ft&&(Qt=Ft,Ft=kt,kt=Qt))),X&&(O?(Xt=O[0],Gt=O[1]):(Xt=ye[0],Gt=ye[1],X.invert&&(Xt=X.invert(Xt),Gt=X.invert(Gt)),Gt<Xt&&(Qt=Xt,Xt=Gt,Gt=Qt))),U&&X?[[Ft,Xt],[kt,Gt]]:U?[Ft,kt]:X&&[Xt,Gt])},Ze.clear=function(){return Ze.empty()||(fe=[0,0],ye=[0,0],pe=O=null),Ze},Ze.empty=function(){return!!U&&fe[0]==fe[1]||!!X&&ye[0]==ye[1]},v.rebind(Ze,z,"on")};var iu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ao=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function au(pe){return JSON.parse(pe.responseText)}function Hc(pe){var O=b.createRange();return O.selectNode(b.body),O.createContextualFragment(pe.responseText)}v.text=Yn(function(pe){return pe.responseText}),v.json=function(pe,O){return nr(pe,"application/json",au,O)},v.html=function(pe,O){return nr(pe,"text/html",Hc,O)},v.xml=Yn(function(pe){return pe.responseXML}),"object"==typeof oe&&oe.exports?oe.exports=v:this.d3=v}).apply(self)},{}],59:[function(_,oe,se){"use strict";oe.exports=_("./quad")},{"./quad":60}],60:[function(_,oe,se){"use strict";var v=_("binary-search-bounds"),x=_("clamp"),T=_("parse-rect"),b=_("array-bounds"),e=_("pick-by-alias"),o=_("defined"),i=_("flatten-vertex-data"),l=_("is-obj"),r=_("dtype"),y=_("math-log2");function h(s,d){for(var p=d[0],c=d[1],g=1/(d[2]-p),m=1/(d[3]-c),u=new Array(s.length),w=0,f=s.length/2;w<f;w++)u[2*w]=x((s[2*w]-p)*g,0,1),u[2*w+1]=x((s[2*w+1]-c)*m,0,1);return u}oe.exports=function(s,d){d||(d={}),s=i(s,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var p=o(d.maxDepth,255),c=o(d.bounds,b(s,2));c[0]===c[2]&&c[2]++,c[1]===c[3]&&c[3]++;var g,m=h(s,c),u=s.length>>>1;d.dtype||(d.dtype="array"),"string"==typeof d.dtype?g=new(r(d.dtype))(u):d.dtype&&(g=d.dtype,Array.isArray(g)&&(g.length=u));for(var w=0;w<u;++w)g[w]=w;var f=[],A=[],M=[],k=[];!function V(Z,Y,Q,re,$,J){if(!re.length)return null;var ie=f[$]||(f[$]=[]),j=M[$]||(M[$]=[]),q=A[$]||(A[$]=[]),W=ie.length;if(++$>p||J>1073741824){for(var ae=0;ae<re.length;ae++)ie.push(re[ae]),j.push(J),q.push(null,null,null,null);return W}if(ie.push(re[0]),j.push(J),re.length<=1)return q.push(null,null,null,null),W;for(var G=.5*Q,ee=Z+G,te=Y+G,le=[],ue=[],de=[],he=[],be=1,me=re.length;be<me;be++){var _e=re[be],De=m[2*_e+1];m[2*_e]<ee?De<te?le.push(_e):ue.push(_e):De<te?de.push(_e):he.push(_e)}return q.push(V(Z,Y,G,le,$,J<<=2),V(Z,te,G,ue,$,J+1),V(ee,Y,G,de,$,J+2),V(ee,te,G,he,$,J+3)),W}(0,0,1,g,0,1);for(var E=0,P=0;P<f.length;P++){var D=f[P];if(g.set)g.set(D,E);else for(var F=0,R=D.length;F<R;F++)g[F+E]=D[F];var L=E+f[P].length;k[P]=[E,L],E=L}return g.range=function(){for(var V,Z=[],Y=arguments.length;Y--;)Z[Y]=arguments[Y];if(l(Z[Z.length-1])){var Q=Z.pop();Z.length||null==Q.x&&null==Q.l&&null==Q.left||(Z=[Q],V={}),V=e(Q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else V={};Z.length||(Z=c);var ue,re=T.apply(void 0,Z),$=[Math.min(re.x,re.x+re.width),Math.min(re.y,re.y+re.height),Math.max(re.x,re.x+re.width),Math.max(re.y,re.y+re.height)],J=$[0],ie=$[1],j=$[2],q=$[3],W=h([J,ie,j,q],c),ae=W[0],G=W[1],ee=W[2],te=W[3],le=o(V.level,f.length);if(null!=V.d&&("number"==typeof V.d?ue=[V.d,V.d]:V.d.length&&(ue=V.d),le=Math.min(Math.max(Math.ceil(-y(Math.abs(ue[0])/(c[2]-c[0]))),Math.ceil(-y(Math.abs(ue[1])/(c[3]-c[1])))),le)),le=Math.min(le,f.length),V.lod)return I(ae,G,ee,te,le);var de=[];function he(me,_e,Ee,De,Se,Fe){if(null!==Se&&null!==Fe&&!(ae>me+Ee||G>_e+Ee||ee<me||te<_e||De>=le||Se===Fe)){var ve=f[De];void 0===Fe&&(Fe=ve.length);for(var Te=Se;Te<Fe;Te++){var Ie=ve[Te],Ce=s[2*Ie],Re=s[2*Ie+1];Ce>=J&&Ce<=j&&Re>=ie&&Re<=q&&de.push(Ie)}var Ue=A[De],qe=Ue[4*Se+0],Xe=Ue[4*Se+1],st=Ue[4*Se+2],He=Ue[4*Se+3],$e=be(Ue,Se+1),et=.5*Ee,tt=De+1;he(me,_e,et,tt,qe,Xe||st||He||$e),he(me,_e+et,et,tt,Xe,st||He||$e),he(me+et,_e,et,tt,st,He||$e),he(me+et,_e+et,et,tt,He,$e)}}function be(me,_e){for(var Ee=null,De=0;null===Ee;)if(Ee=me[4*_e+De],++De>me.length)return null;return Ee}return he(0,0,1,0,0,1),de},g;function I(V,Z,Y,Q,re){for(var $=[],J=0;J<re;J++){var ie=M[J],j=k[J][0],q=B(V,Z,J),W=B(Y,Q,J),ae=v.ge(ie,q),G=v.gt(ie,W,ae,ie.length-1);$[J]=[ae+j,G+j]}return $}function B(V,Z,Y){for(var Q=1,re=.5,$=.5,J=.5,ie=0;ie<Y;ie++)Q<<=2,Q+=V<re?Z<$?0:1:Z<$?2:3,J*=.5,re+=V<re?-J:J,$+=Z<$?-J:J;return Q}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(_,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var v=_("@turf/meta");function x(e){var o=0;if(e&&e.length>0){o+=Math.abs(T(e[0]));for(var i=1;i<e.length;i++)o-=Math.abs(T(e[i]))}return o}function T(e){var o,i,l,r,y,h,s=0,d=e.length;if(d>2){for(h=0;h<d;h++)h===d-2?(l=d-2,r=d-1,y=0):h===d-1?(l=d-1,r=0,y=1):(l=h,r=h+1,y=h+2),o=e[l],i=e[r],s+=(b(e[y][0])-b(o[0]))*Math.sin(b(i[1]));s=6378137*s*6378137/2}return s}function b(e){return e*Math.PI/180}se.default=function(e){return v.geomReduce(e,function(o,i){return o+function(l){var r,y=0;switch(l.type){case"Polygon":return x(l.coordinates);case"MultiPolygon":for(r=0;r<l.coordinates.length;r++)y+=x(l.coordinates[r]);return y;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(i)},0)}},{"@turf/meta":63}],62:[function(_,oe,se){"use strict";function v(d,p,c){void 0===c&&(c={});var g={type:"Feature"};return(0===c.id||c.id)&&(g.id=c.id),c.bbox&&(g.bbox=c.bbox),g.properties=p||{},g.geometry=d,g}function x(d,p,c){if(void 0===c&&(c={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(d[0])||!s(d[1]))throw new Error("coordinates must contain numbers");return v({type:"Point",coordinates:d},p,c)}function T(d,p,c){void 0===c&&(c={});for(var g=0,m=d;g<m.length;g++){var u=m[g];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<u[u.length-1].length;w++)if(u[u.length-1][w]!==u[0][w])throw new Error("First and last Position are not equivalent.")}return v({type:"Polygon",coordinates:d},p,c)}function b(d,p,c){if(void 0===c&&(c={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return v({type:"LineString",coordinates:d},p,c)}function e(d,p){void 0===p&&(p={});var c={type:"FeatureCollection"};return p.id&&(c.id=p.id),p.bbox&&(c.bbox=p.bbox),c.features=d,c}function o(d,p,c){return void 0===c&&(c={}),v({type:"MultiLineString",coordinates:d},p,c)}function i(d,p,c){return void 0===c&&(c={}),v({type:"MultiPoint",coordinates:d},p,c)}function l(d,p,c){return void 0===c&&(c={}),v({type:"MultiPolygon",coordinates:d},p,c)}function r(d,p){void 0===p&&(p="kilometers");var c=se.factors[p];if(!c)throw new Error(p+" units is invalid");return d*c}function y(d,p){void 0===p&&(p="kilometers");var c=se.factors[p];if(!c)throw new Error(p+" units is invalid");return d/c}function h(d){return d%(2*Math.PI)*180/Math.PI}function s(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)}Object.defineProperty(se,"__esModule",{value:!0}),se.earthRadius=6371008.8,se.factors={centimeters:100*se.earthRadius,centimetres:100*se.earthRadius,degrees:se.earthRadius/111325,feet:3.28084*se.earthRadius,inches:39.37*se.earthRadius,kilometers:se.earthRadius/1e3,kilometres:se.earthRadius/1e3,meters:se.earthRadius,metres:se.earthRadius,miles:se.earthRadius/1609.344,millimeters:1e3*se.earthRadius,millimetres:1e3*se.earthRadius,nauticalmiles:se.earthRadius/1852,radians:1,yards:1.0936*se.earthRadius},se.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/se.earthRadius,yards:1.0936133},se.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},se.feature=v,se.geometry=function(d,p,c){switch(void 0===c&&(c={}),d){case"Point":return x(p).geometry;case"LineString":return b(p).geometry;case"Polygon":return T(p).geometry;case"MultiPoint":return i(p).geometry;case"MultiLineString":return o(p).geometry;case"MultiPolygon":return l(p).geometry;default:throw new Error(d+" is invalid")}},se.point=x,se.points=function(d,p,c){return void 0===c&&(c={}),e(d.map(function(g){return x(g,p)}),c)},se.polygon=T,se.polygons=function(d,p,c){return void 0===c&&(c={}),e(d.map(function(g){return T(g,p)}),c)},se.lineString=b,se.lineStrings=function(d,p,c){return void 0===c&&(c={}),e(d.map(function(g){return b(g,p)}),c)},se.featureCollection=e,se.multiLineString=o,se.multiPoint=i,se.multiPolygon=l,se.geometryCollection=function(d,p,c){return void 0===c&&(c={}),v({type:"GeometryCollection",geometries:d},p,c)},se.round=function(d,p){if(void 0===p&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,p||0);return Math.round(d*c)/c},se.radiansToLength=r,se.lengthToRadians=y,se.lengthToDegrees=function(d,p){return h(y(d,p))},se.bearingToAzimuth=function(d){var p=d%360;return p<0&&(p+=360),p},se.radiansToDegrees=h,se.degreesToRadians=function(d){return d%360*Math.PI/180},se.convertLength=function(d,p,c){if(void 0===p&&(p="kilometers"),void 0===c&&(c="kilometers"),!(d>=0))throw new Error("length must be a positive number");return r(y(d,p),c)},se.convertArea=function(d,p,c){if(void 0===p&&(p="meters"),void 0===c&&(c="kilometers"),!(d>=0))throw new Error("area must be a positive number");var g=se.areaFactors[p];if(!g)throw new Error("invalid original units");var m=se.areaFactors[c];if(!m)throw new Error("invalid final units");return d/g*m},se.isNumber=s,se.isObject=function(d){return!!d&&d.constructor===Object},se.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(p){if(!s(p))throw new Error("bbox must only contain numbers")})},se.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")}},{}],63:[function(_,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var v=_("@turf/helpers");function x(r,y,h){if(null!==r)for(var s,d,p,c,g,m,u,w,f=0,A=0,M=r.type,k="FeatureCollection"===M,E="Feature"===M,P=k?r.features.length:1,D=0;D<P;D++){g=(w=!!(u=k?r.features[D].geometry:E?r.geometry:r)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var F=0;F<g;F++){var R=0,L=0;if(null!==(c=w?u.geometries[F]:u)){m=c.coordinates;var I=c.type;switch(f=!h||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===y(m,A,D,R,L))return!1;A++,R++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(!1===y(m[s],A,D,R,L))return!1;A++,"MultiPoint"===I&&R++}"LineString"===I&&R++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(d=0;d<m[s].length-f;d++){if(!1===y(m[s][d],A,D,R,L))return!1;A++}"MultiLineString"===I&&R++,"Polygon"===I&&L++}"Polygon"===I&&R++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(L=0,d=0;d<m[s].length;d++){for(p=0;p<m[s][d].length-f;p++){if(!1===y(m[s][d][p],A,D,R,L))return!1;A++}L++}R++}break;case"GeometryCollection":for(s=0;s<c.geometries.length;s++)if(!1===x(c.geometries[s],y,h))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(r,y){var h;switch(r.type){case"FeatureCollection":for(h=0;h<r.features.length&&!1!==y(r.features[h].properties,h);h++);break;case"Feature":y(r.properties,0)}}function b(r,y){if("Feature"===r.type)y(r,0);else if("FeatureCollection"===r.type)for(var h=0;h<r.features.length&&!1!==y(r.features[h],h);h++);}function e(r,y){var h,s,d,p,c,g,m,u,w,f,A=0,M="FeatureCollection"===r.type,k="Feature"===r.type,E=M?r.features.length:1;for(h=0;h<E;h++){for(u=M?r.features[h].properties:k?r.properties:{},w=M?r.features[h].bbox:k?r.bbox:void 0,f=M?r.features[h].id:k?r.id:void 0,c=(m=!!(g=M?r.features[h].geometry:k?r.geometry:r)&&"GeometryCollection"===g.type)?g.geometries.length:1,d=0;d<c;d++)if(null!==(p=m?g.geometries[d]:g))switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===y(p,A,u,w,f))return!1;break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===y(p.geometries[s],A,u,w,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===y(null,A,u,w,f))return!1;A++}}function o(r,y){e(r,function(h,s,d,p,c){var g,m=null===h?null:h.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==y(v.feature(h,d,{bbox:p,id:c}),s,0)&&void 0}switch(m){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var u=0;u<h.coordinates.length;u++)if(!1===y(v.feature({type:g,coordinates:h.coordinates[u]},d),s,u))return!1})}function i(r,y){o(r,function(h,s,d){var p=0;if(h.geometry){var c=h.geometry.type;if("Point"!==c&&"MultiPoint"!==c){var g,m=0,u=0,w=0;return!1!==x(h,function(f,A,M,k,E){if(void 0===g||s>m||k>u||E>w)return g=f,m=s,u=k,w=E,void(p=0);var P=v.lineString([g,f],h.properties);if(!1===y(P,s,d,E,p))return!1;p++,g=f})&&void 0}}})}function l(r,y){if(!r)throw new Error("geojson is required");o(r,function(h,s,d){if(null!==h.geometry){var c=h.geometry.coordinates;switch(h.geometry.type){case"LineString":if(!1===y(h,s,d,0,0))return!1;break;case"Polygon":for(var g=0;g<c.length;g++)if(!1===y(v.lineString(c[g],h.properties),s,d,g))return!1}}})}se.coordEach=x,se.coordReduce=function(r,y,h,s){var d=h;return x(r,function(p,c,g,m,u){d=0===c&&void 0===h?p:y(d,p,c,g,m,u)},s),d},se.propEach=T,se.propReduce=function(r,y,h){var s=h;return T(r,function(d,p){s=0===p&&void 0===h?d:y(s,d,p)}),s},se.featureEach=b,se.featureReduce=function(r,y,h){var s=h;return b(r,function(d,p){s=0===p&&void 0===h?d:y(s,d,p)}),s},se.coordAll=function(r){var y=[];return x(r,function(h){y.push(h)}),y},se.geomEach=e,se.geomReduce=function(r,y,h){var s=h;return e(r,function(d,p,c,g,m){s=0===p&&void 0===h?d:y(s,d,p,c,g,m)}),s},se.flattenEach=o,se.flattenReduce=function(r,y,h){var s=h;return o(r,function(d,p,c){s=0===p&&0===c&&void 0===h?d:y(s,d,p,c)}),s},se.segmentEach=i,se.segmentReduce=function(r,y,h){var s=h,d=!1;return i(r,function(p,c,g,m,u){s=!1===d&&void 0===h?p:y(s,p,c,g,m,u),d=!0}),s},se.lineEach=l,se.lineReduce=function(r,y,h){var s=h;return l(r,function(d,p,c,g){s=0===p&&void 0===h?d:y(s,d,p,c,g)}),s},se.findSegment=function(r,y){if(!v.isObject(y=y||{}))throw new Error("options is invalid");var h,s=y.featureIndex||0,d=y.multiFeatureIndex||0,p=y.geometryIndex||0,c=y.segmentIndex||0,g=y.properties;switch(r.type){case"FeatureCollection":s<0&&(s=r.features.length+s),g=g||r.features[s].properties,h=r.features[s].geometry;break;case"Feature":g=g||r.properties,h=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=r;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=m.length+c-1),v.lineString([m[c],m[c+1]],g,y);case"Polygon":return p<0&&(p=m.length+p),c<0&&(c=m[p].length+c-1),v.lineString([m[p][c],m[p][c+1]],g,y);case"MultiLineString":return d<0&&(d=m.length+d),c<0&&(c=m[d].length+c-1),v.lineString([m[d][c],m[d][c+1]],g,y);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),c<0&&(c=m[d][p].length-c-1),v.lineString([m[d][p][c],m[d][p][c+1]],g,y)}throw new Error("geojson is invalid")},se.findPoint=function(r,y){if(!v.isObject(y=y||{}))throw new Error("options is invalid");var h,s=y.featureIndex||0,d=y.multiFeatureIndex||0,p=y.geometryIndex||0,c=y.coordIndex||0,g=y.properties;switch(r.type){case"FeatureCollection":s<0&&(s=r.features.length+s),g=g||r.features[s].properties,h=r.features[s].geometry;break;case"Feature":g=g||r.properties,h=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=r;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":return v.point(m,g,y);case"MultiPoint":return d<0&&(d=m.length+d),v.point(m[d],g,y);case"LineString":return c<0&&(c=m.length+c),v.point(m[c],g,y);case"Polygon":return p<0&&(p=m.length+p),c<0&&(c=m[p].length+c),v.point(m[p][c],g,y);case"MultiLineString":return d<0&&(d=m.length+d),c<0&&(c=m[d].length+c),v.point(m[d][c],g,y);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),c<0&&(c=m[d][p].length-c),v.point(m[d][p][c],g,y)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(_,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var v=_("@turf/meta");function x(T){var b=[1/0,1/0,-1/0,-1/0];return v.coordEach(T,function(e){b[0]>e[0]&&(b[0]=e[0]),b[1]>e[1]&&(b[1]=e[1]),b[2]<e[0]&&(b[2]=e[0]),b[3]<e[1]&&(b[3]=e[1])}),b}x.default=x,se.default=x},{"@turf/meta":66}],65:[function(_,oe,se){arguments[4][62][0].apply(se,arguments)},{dup:62}],66:[function(_,oe,se){arguments[4][63][0].apply(se,arguments)},{"@turf/helpers":65,dup:63}],67:[function(_,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var v=_("@turf/meta"),x=_("@turf/helpers");se.default=function(T,b){void 0===b&&(b={});var e=0,o=0,i=0;return v.coordEach(T,function(l){e+=l[0],o+=l[1],i++}),x.point([e/i,o/i],b.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(_,oe,se){"use strict";function v(d,p,c){void 0===c&&(c={});var g={type:"Feature"};return(0===c.id||c.id)&&(g.id=c.id),c.bbox&&(g.bbox=c.bbox),g.properties=p||{},g.geometry=d,g}function x(d,p,c){return void 0===c&&(c={}),v({type:"Point",coordinates:d},p,c)}function T(d,p,c){void 0===c&&(c={});for(var g=0,m=d;g<m.length;g++){var u=m[g];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<u[u.length-1].length;w++)if(u[u.length-1][w]!==u[0][w])throw new Error("First and last Position are not equivalent.")}return v({type:"Polygon",coordinates:d},p,c)}function b(d,p,c){if(void 0===c&&(c={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return v({type:"LineString",coordinates:d},p,c)}function e(d,p){void 0===p&&(p={});var c={type:"FeatureCollection"};return p.id&&(c.id=p.id),p.bbox&&(c.bbox=p.bbox),c.features=d,c}function o(d,p,c){return void 0===c&&(c={}),v({type:"MultiLineString",coordinates:d},p,c)}function i(d,p,c){return void 0===c&&(c={}),v({type:"MultiPoint",coordinates:d},p,c)}function l(d,p,c){return void 0===c&&(c={}),v({type:"MultiPolygon",coordinates:d},p,c)}function r(d,p){void 0===p&&(p="kilometers");var c=se.factors[p];if(!c)throw new Error(p+" units is invalid");return d*c}function y(d,p){void 0===p&&(p="kilometers");var c=se.factors[p];if(!c)throw new Error(p+" units is invalid");return d/c}function h(d){return d%(2*Math.PI)*180/Math.PI}function s(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)&&!/^\s*$/.test(d)}Object.defineProperty(se,"__esModule",{value:!0}),se.earthRadius=6371008.8,se.factors={centimeters:100*se.earthRadius,centimetres:100*se.earthRadius,degrees:se.earthRadius/111325,feet:3.28084*se.earthRadius,inches:39.37*se.earthRadius,kilometers:se.earthRadius/1e3,kilometres:se.earthRadius/1e3,meters:se.earthRadius,metres:se.earthRadius,miles:se.earthRadius/1609.344,millimeters:1e3*se.earthRadius,millimetres:1e3*se.earthRadius,nauticalmiles:se.earthRadius/1852,radians:1,yards:se.earthRadius/1.0936},se.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/se.earthRadius,yards:1/1.0936},se.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},se.feature=v,se.geometry=function(d,p,c){switch(void 0===c&&(c={}),d){case"Point":return x(p).geometry;case"LineString":return b(p).geometry;case"Polygon":return T(p).geometry;case"MultiPoint":return i(p).geometry;case"MultiLineString":return o(p).geometry;case"MultiPolygon":return l(p).geometry;default:throw new Error(d+" is invalid")}},se.point=x,se.points=function(d,p,c){return void 0===c&&(c={}),e(d.map(function(g){return x(g,p)}),c)},se.polygon=T,se.polygons=function(d,p,c){return void 0===c&&(c={}),e(d.map(function(g){return T(g,p)}),c)},se.lineString=b,se.lineStrings=function(d,p,c){return void 0===c&&(c={}),e(d.map(function(g){return b(g,p)}),c)},se.featureCollection=e,se.multiLineString=o,se.multiPoint=i,se.multiPolygon=l,se.geometryCollection=function(d,p,c){return void 0===c&&(c={}),v({type:"GeometryCollection",geometries:d},p,c)},se.round=function(d,p){if(void 0===p&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,p||0);return Math.round(d*c)/c},se.radiansToLength=r,se.lengthToRadians=y,se.lengthToDegrees=function(d,p){return h(y(d,p))},se.bearingToAzimuth=function(d){var p=d%360;return p<0&&(p+=360),p},se.radiansToDegrees=h,se.degreesToRadians=function(d){return d%360*Math.PI/180},se.convertLength=function(d,p,c){if(void 0===p&&(p="kilometers"),void 0===c&&(c="kilometers"),!(d>=0))throw new Error("length must be a positive number");return r(y(d,p),c)},se.convertArea=function(d,p,c){if(void 0===p&&(p="meters"),void 0===c&&(c="kilometers"),!(d>=0))throw new Error("area must be a positive number");var g=se.areaFactors[p];if(!g)throw new Error("invalid original units");var m=se.areaFactors[c];if(!m)throw new Error("invalid final units");return d/g*m},se.isNumber=s,se.isObject=function(d){return!!d&&d.constructor===Object},se.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(p){if(!s(p))throw new Error("bbox must only contain numbers")})},se.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")},se.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},se.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},se.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},se.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},se.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},se.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},se.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(_,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var v=_("@turf/helpers");function x(r,y,h){if(null!==r)for(var s,d,p,c,g,m,u,w,f=0,A=0,M=r.type,k="FeatureCollection"===M,E="Feature"===M,P=k?r.features.length:1,D=0;D<P;D++){g=(w=!!(u=k?r.features[D].geometry:E?r.geometry:r)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var F=0;F<g;F++){var R=0,L=0;if(null!==(c=w?u.geometries[F]:u)){m=c.coordinates;var I=c.type;switch(f=!h||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===y(m,A,D,R,L))return!1;A++,R++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(!1===y(m[s],A,D,R,L))return!1;A++,"MultiPoint"===I&&R++}"LineString"===I&&R++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(d=0;d<m[s].length-f;d++){if(!1===y(m[s][d],A,D,R,L))return!1;A++}"MultiLineString"===I&&R++,"Polygon"===I&&L++}"Polygon"===I&&R++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(L=0,d=0;d<m[s].length;d++){for(p=0;p<m[s][d].length-f;p++){if(!1===y(m[s][d][p],A,D,R,L))return!1;A++}L++}R++}break;case"GeometryCollection":for(s=0;s<c.geometries.length;s++)if(!1===x(c.geometries[s],y,h))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(r,y){var h;switch(r.type){case"FeatureCollection":for(h=0;h<r.features.length&&!1!==y(r.features[h].properties,h);h++);break;case"Feature":y(r.properties,0)}}function b(r,y){if("Feature"===r.type)y(r,0);else if("FeatureCollection"===r.type)for(var h=0;h<r.features.length&&!1!==y(r.features[h],h);h++);}function e(r,y){var h,s,d,p,c,g,m,u,w,f,A=0,M="FeatureCollection"===r.type,k="Feature"===r.type,E=M?r.features.length:1;for(h=0;h<E;h++){for(u=M?r.features[h].properties:k?r.properties:{},w=M?r.features[h].bbox:k?r.bbox:void 0,f=M?r.features[h].id:k?r.id:void 0,c=(m=!!(g=M?r.features[h].geometry:k?r.geometry:r)&&"GeometryCollection"===g.type)?g.geometries.length:1,d=0;d<c;d++)if(null!==(p=m?g.geometries[d]:g))switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===y(p,A,u,w,f))return!1;break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===y(p.geometries[s],A,u,w,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===y(null,A,u,w,f))return!1;A++}}function o(r,y){e(r,function(h,s,d,p,c){var g,m=null===h?null:h.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==y(v.feature(h,d,{bbox:p,id:c}),s,0)&&void 0}switch(m){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var u=0;u<h.coordinates.length;u++)if(!1===y(v.feature({type:g,coordinates:h.coordinates[u]},d),s,u))return!1})}function i(r,y){o(r,function(h,s,d){var p=0;if(h.geometry){var c=h.geometry.type;if("Point"!==c&&"MultiPoint"!==c){var g,m=0,u=0,w=0;return!1!==x(h,function(f,A,M,k,E){if(void 0===g||s>m||k>u||E>w)return g=f,m=s,u=k,w=E,void(p=0);var P=v.lineString([g,f],h.properties);if(!1===y(P,s,d,E,p))return!1;p++,g=f})&&void 0}}})}function l(r,y){if(!r)throw new Error("geojson is required");o(r,function(h,s,d){if(null!==h.geometry){var c=h.geometry.coordinates;switch(h.geometry.type){case"LineString":if(!1===y(h,s,d,0,0))return!1;break;case"Polygon":for(var g=0;g<c.length;g++)if(!1===y(v.lineString(c[g],h.properties),s,d,g))return!1}}})}se.coordEach=x,se.coordReduce=function(r,y,h,s){var d=h;return x(r,function(p,c,g,m,u){d=0===c&&void 0===h?p:y(d,p,c,g,m,u)},s),d},se.propEach=T,se.propReduce=function(r,y,h){var s=h;return T(r,function(d,p){s=0===p&&void 0===h?d:y(s,d,p)}),s},se.featureEach=b,se.featureReduce=function(r,y,h){var s=h;return b(r,function(d,p){s=0===p&&void 0===h?d:y(s,d,p)}),s},se.coordAll=function(r){var y=[];return x(r,function(h){y.push(h)}),y},se.geomEach=e,se.geomReduce=function(r,y,h){var s=h;return e(r,function(d,p,c,g,m){s=0===p&&void 0===h?d:y(s,d,p,c,g,m)}),s},se.flattenEach=o,se.flattenReduce=function(r,y,h){var s=h;return o(r,function(d,p,c){s=0===p&&0===c&&void 0===h?d:y(s,d,p,c)}),s},se.segmentEach=i,se.segmentReduce=function(r,y,h){var s=h,d=!1;return i(r,function(p,c,g,m,u){s=!1===d&&void 0===h?p:y(s,p,c,g,m,u),d=!0}),s},se.lineEach=l,se.lineReduce=function(r,y,h){var s=h;return l(r,function(d,p,c,g){s=0===p&&void 0===h?d:y(s,d,p,c,g)}),s},se.findSegment=function(r,y){if(!v.isObject(y=y||{}))throw new Error("options is invalid");var h,s=y.featureIndex||0,d=y.multiFeatureIndex||0,p=y.geometryIndex||0,c=y.segmentIndex||0,g=y.properties;switch(r.type){case"FeatureCollection":s<0&&(s=r.features.length+s),g=g||r.features[s].properties,h=r.features[s].geometry;break;case"Feature":g=g||r.properties,h=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=r;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=m.length+c-1),v.lineString([m[c],m[c+1]],g,y);case"Polygon":return p<0&&(p=m.length+p),c<0&&(c=m[p].length+c-1),v.lineString([m[p][c],m[p][c+1]],g,y);case"MultiLineString":return d<0&&(d=m.length+d),c<0&&(c=m[d].length+c-1),v.lineString([m[d][c],m[d][c+1]],g,y);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),c<0&&(c=m[d][p].length-c-1),v.lineString([m[d][p][c],m[d][p][c+1]],g,y)}throw new Error("geojson is invalid")},se.findPoint=function(r,y){if(!v.isObject(y=y||{}))throw new Error("options is invalid");var h,s=y.featureIndex||0,d=y.multiFeatureIndex||0,p=y.geometryIndex||0,c=y.coordIndex||0,g=y.properties;switch(r.type){case"FeatureCollection":s<0&&(s=r.features.length+s),g=g||r.features[s].properties,h=r.features[s].geometry;break;case"Feature":g=g||r.properties,h=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=r;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":return v.point(m,g,y);case"MultiPoint":return d<0&&(d=m.length+d),v.point(m[d],g,y);case"LineString":return c<0&&(c=m.length+c),v.point(m[c],g,y);case"Polygon":return p<0&&(p=m.length+p),c<0&&(c=m[p].length+c),v.point(m[p][c],g,y);case"MultiLineString":return d<0&&(d=m.length+d),c<0&&(c=m[d].length+c),v.point(m[d][c],g,y);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),c<0&&(c=m[d][p].length-c),v.point(m[d][p][c],g,y)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(_,oe,se){oe.exports=function(v){var x=0,T=0,b=0,e=0;return v.map(function(o){var i=(o=o.slice())[0],l=i.toUpperCase();if(i!=l)switch(o[0]=l,i){case"a":o[6]+=b,o[7]+=e;break;case"v":o[1]+=e;break;case"h":o[1]+=b;break;default:for(var r=1;r<o.length;)o[r++]+=b,o[r++]+=e}switch(l){case"Z":b=x,e=T;break;case"H":b=o[1];break;case"V":e=o[1];break;case"M":b=x=o[1],e=T=o[2];break;default:b=o[o.length-2],e=o[o.length-1]}return o})}},{}],71:[function(_,oe,se){"use strict";oe.exports=function(v,x){if(!v||null==v.length)throw Error("Argument should be an array");x=null==x?1:Math.floor(x);for(var T=Array(2*x),b=0;b<x;b++){for(var e=-1/0,o=1/0,i=b,l=v.length;i<l;i+=x)v[i]>e&&(e=v[i]),v[i]<o&&(o=v[i]);T[b]=o,T[x+b]=e}return T}},{}],72:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){if("function"==typeof Array.prototype.findIndex)return v.findIndex(x,T);if("function"!=typeof x)throw new TypeError("predicate must be a function");var b=Object(v),e=b.length;if(0===e)return-1;for(var o=0;o<e;o++)if(x.call(T,b[o],o,b))return o;return-1}},{}],73:[function(_,oe,se){"use strict";var v=_("array-bounds");oe.exports=function(x,T,b){if(!x||null==x.length)throw Error("Argument should be an array");null==T&&(T=1),null==b&&(b=v(x,T));for(var e=0;e<T;e++){var o=b[T+e],i=b[e],l=e,r=x.length;if(o===1/0&&i===-1/0)for(l=e;l<r;l+=T)x[l]=x[l]===o?1:x[l]===i?0:.5;else if(o===1/0)for(l=e;l<r;l+=T)x[l]=x[l]===o?1:0;else if(i===-1/0)for(l=e;l<r;l+=T)x[l]=x[l]===i?0:1;else{var y=o-i;for(l=e;l<r;l+=T)isNaN(x[l])||(x[l]=0===y?.5:(x[l]-i)/y)}}return x}},{"array-bounds":71}],74:[function(_,oe,se){oe.exports=function(v,x){var T="number"==typeof v,b="number"==typeof x;T&&!b?(x=v,v=0):T||b||(v=0,x=0);var e=(x|=0)-(v|=0);if(e<0)throw new Error("array length must be positive");for(var o=new Array(e),i=0,l=v;i<e;i++,l++)o[i]=l;return o}},{}],75:[function(_,oe,se){(function(v){(function(){"use strict";var x=_("object-assign");function T(k,E){if(k===E)return 0;for(var P=k.length,D=E.length,F=0,R=Math.min(P,D);F<R;++F)if(k[F]!==E[F]){P=k[F],D=E[F];break}return P<D?-1:D<P?1:0}function b(k){return v.Buffer&&"function"==typeof v.Buffer.isBuffer?v.Buffer.isBuffer(k):!(null==k||!k._isBuffer)}var e=_("util/"),o=Object.prototype.hasOwnProperty,i=Array.prototype.slice,l="foo"===function(){}.name;function r(k){return Object.prototype.toString.call(k)}function y(k){return!b(k)&&"function"==typeof v.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(k):!!k&&(k instanceof DataView||!!(k.buffer&&k.buffer instanceof ArrayBuffer)))}var h=oe.exports=m,s=/\s*function\s+([^\(\s]*)\s*/;function d(k){if(e.isFunction(k)){if(l)return k.name;var E=k.toString().match(s);return E&&E[1]}}function p(k,E){return"string"==typeof k?k.length<E?k:k.slice(0,E):k}function c(k){if(l||!e.isFunction(k))return e.inspect(k);var E=d(k);return"[Function"+(E?": "+E:"")+"]"}function g(k,E,P,D,F){throw new h.AssertionError({message:P,actual:k,expected:E,operator:D,stackStartFunction:F})}function m(k,E){k||g(k,!0,E,"==",h.ok)}function u(k,E,P,D){if(k===E)return!0;if(b(k)&&b(E))return 0===T(k,E);if(e.isDate(k)&&e.isDate(E))return k.getTime()===E.getTime();if(e.isRegExp(k)&&e.isRegExp(E))return k.source===E.source&&k.global===E.global&&k.multiline===E.multiline&&k.lastIndex===E.lastIndex&&k.ignoreCase===E.ignoreCase;if(null!==k&&"object"==typeof k||null!==E&&"object"==typeof E){if(y(k)&&y(E)&&r(k)===r(E)&&!(k instanceof Float32Array||k instanceof Float64Array))return 0===T(new Uint8Array(k.buffer),new Uint8Array(E.buffer));if(b(k)!==b(E))return!1;var F=(D=D||{actual:[],expected:[]}).actual.indexOf(k);return-1!==F&&F===D.expected.indexOf(E)||(D.actual.push(k),D.expected.push(E),function(R,L,I,B){if(null==R||null==L)return!1;if(e.isPrimitive(R)||e.isPrimitive(L))return R===L;if(I&&Object.getPrototypeOf(R)!==Object.getPrototypeOf(L))return!1;var V=w(R),Z=w(L);if(V&&!Z||!V&&Z)return!1;if(V)return u(R=i.call(R),L=i.call(L),I);var Y,Q,re=M(R),$=M(L);if(re.length!==$.length)return!1;for(re.sort(),$.sort(),Q=re.length-1;Q>=0;Q--)if(re[Q]!==$[Q])return!1;for(Q=re.length-1;Q>=0;Q--)if(!u(R[Y=re[Q]],L[Y],I,B))return!1;return!0}(k,E,P,D))}return P?k===E:k==E}function w(k){return"[object Arguments]"==Object.prototype.toString.call(k)}function f(k,E){if(!k||!E)return!1;if("[object RegExp]"==Object.prototype.toString.call(E))return E.test(k);try{if(k instanceof E)return!0}catch(P){}return!Error.isPrototypeOf(E)&&!0===E.call({},k)}function A(k,E,P,D){var F;if("function"!=typeof E)throw new TypeError('"block" argument must be a function');"string"==typeof P&&(D=P,P=null),F=function(I){var B;try{I()}catch(V){B=V}return B}(E),D=(P&&P.name?" ("+P.name+").":".")+(D?" "+D:"."),k&&!F&&g(F,P,"Missing expected exception"+D);var R="string"==typeof D,L=!k&&F&&!P;if((!k&&e.isError(F)&&R&&f(F,P)||L)&&g(F,P,"Got unwanted exception"+D),k&&F&&P&&!f(F,P)||!k&&F)throw F}h.AssertionError=function(k){this.name="AssertionError",this.actual=k.actual,this.expected=k.expected,this.operator=k.operator,k.message?(this.message=k.message,this.generatedMessage=!1):(this.message=p(c(this.actual),128)+" "+this.operator+" "+p(c(this.expected),128),this.generatedMessage=!0);var E=k.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var P=new Error;if(P.stack){var D=P.stack,F=d(E),R=D.indexOf("\n"+F);if(R>=0){var L=D.indexOf("\n",R+1);D=D.substring(L+1)}this.stack=D}}},e.inherits(h.AssertionError,Error),h.fail=g,h.ok=m,h.equal=function(k,E,P){k!=E&&g(k,E,P,"==",h.equal)},h.notEqual=function(k,E,P){k==E&&g(k,E,P,"!=",h.notEqual)},h.deepEqual=function(k,E,P){u(k,E,!1)||g(k,E,P,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(k,E,P){u(k,E,!0)||g(k,E,P,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(k,E,P){u(k,E,!1)&&g(k,E,P,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function k(E,P,D){u(E,P,!0)&&g(E,P,D,"notDeepStrictEqual",k)},h.strictEqual=function(k,E,P){k!==E&&g(k,E,P,"===",h.strictEqual)},h.notStrictEqual=function(k,E,P){k===E&&g(k,E,P,"!==",h.notStrictEqual)},h.throws=function(k,E,P){A(!0,k,E,P)},h.doesNotThrow=function(k,E,P){A(!1,k,E,P)},h.ifError=function(k){if(k)throw k},h.strict=x(function k(E,P){E||g(E,!0,P,"==",k)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var M=Object.keys||function(k){var E=[];for(var P in k)o.call(k,P)&&E.push(P);return E}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(_,oe,se){oe.exports="function"==typeof Object.create?function(v,x){v.super_=x,v.prototype=Object.create(x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}})}:function(v,x){v.super_=x;var T=function(){};T.prototype=x.prototype,v.prototype=new T,v.prototype.constructor=v}},{}],77:[function(_,oe,se){oe.exports=function(v){return v&&"object"==typeof v&&"function"==typeof v.copy&&"function"==typeof v.fill&&"function"==typeof v.readUInt8}},{}],78:[function(_,oe,se){(function(v,x){(function(){var T=/%[sdj%]/g;se.format=function(R){if(!g(R)){for(var L=[],I=0;I<arguments.length;I++)L.push(o(arguments[I]));return L.join(" ")}I=1;for(var B=arguments,V=B.length,Z=String(R).replace(T,function(Q){if("%%"===Q)return"%";if(I>=V)return Q;switch(Q){case"%s":return String(B[I++]);case"%d":return Number(B[I++]);case"%j":try{return JSON.stringify(B[I++])}catch(re){return"[Circular]"}default:return Q}}),Y=B[I];I<V;Y=B[++I])p(Y)||!w(Y)?Z+=" "+Y:Z+=" "+o(Y);return Z},se.deprecate=function(R,L){if(m(x.process))return function(){return se.deprecate(R,L).apply(this,arguments)};if(!0===v.noDeprecation)return R;var I=!1;return function(){if(!I){if(v.throwDeprecation)throw new Error(L);v.traceDeprecation?console.trace(L):console.error(L),I=!0}return R.apply(this,arguments)}};var b,e={};function o(R,L){var I={seen:[],stylize:l};return arguments.length>=3&&(I.depth=arguments[2]),arguments.length>=4&&(I.colors=arguments[3]),d(L)?I.showHidden=L:L&&se._extend(I,L),m(I.showHidden)&&(I.showHidden=!1),m(I.depth)&&(I.depth=2),m(I.colors)&&(I.colors=!1),m(I.customInspect)&&(I.customInspect=!0),I.colors&&(I.stylize=i),r(I,R,I.depth)}function i(R,L){var I=o.styles[L];return I?"\x1b["+o.colors[I][0]+"m"+R+"\x1b["+o.colors[I][1]+"m":R}function l(R,L){return R}function r(R,L,I){if(R.customInspect&&L&&M(L.inspect)&&L.inspect!==se.inspect&&(!L.constructor||L.constructor.prototype!==L)){var B=L.inspect(I,R);return g(B)||(B=r(R,B,I)),B}var V=function(j,q){if(m(q))return j.stylize("undefined","undefined");if(g(q)){var W="'"+JSON.stringify(q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(W,"string")}return c(q)?j.stylize(""+q,"number"):d(q)?j.stylize(""+q,"boolean"):p(q)?j.stylize("null","null"):void 0}(R,L);if(V)return V;var q,Z=Object.keys(L),Y=(q={},Z.forEach(function(W,ae){q[W]=!0}),q);if(R.showHidden&&(Z=Object.getOwnPropertyNames(L)),A(L)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return y(L);if(0===Z.length){if(M(L))return R.stylize("[Function"+(L.name?": "+L.name:"")+"]","special");if(u(L))return R.stylize(RegExp.prototype.toString.call(L),"regexp");if(f(L))return R.stylize(Date.prototype.toString.call(L),"date");if(A(L))return y(L)}var re,$="",J=!1,ie=["{","}"];return s(L)&&(J=!0,ie=["[","]"]),M(L)&&($=" [Function"+(L.name?": "+L.name:"")+"]"),u(L)&&($=" "+RegExp.prototype.toString.call(L)),f(L)&&($=" "+Date.prototype.toUTCString.call(L)),A(L)&&($=" "+y(L)),0!==Z.length||J&&0!=L.length?I<0?u(L)?R.stylize(RegExp.prototype.toString.call(L),"regexp"):R.stylize("[Object]","special"):(R.seen.push(L),re=J?function(j,q,W,ae,G){for(var ee=[],te=0,le=q.length;te<le;++te)F(q,String(te))?ee.push(h(j,q,W,ae,String(te),!0)):ee.push("");return G.forEach(function(ue){ue.match(/^\d+$/)||ee.push(h(j,q,W,ae,ue,!0))}),ee}(R,L,I,Y,Z):Z.map(function(j){return h(R,L,I,Y,j,J)}),R.seen.pop(),function(j,q,W){return j.reduce(function(ae,G){return G.indexOf("\n"),ae+G.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?W[0]+(""===q?"":q+"\n ")+" "+j.join(",\n  ")+" "+W[1]:W[0]+q+" "+j.join(", ")+" "+W[1]}(re,$,ie)):ie[0]+$+ie[1]}function y(R){return"["+Error.prototype.toString.call(R)+"]"}function h(R,L,I,B,V,Z){var Y,Q,re;if((re=Object.getOwnPropertyDescriptor(L,V)||{value:L[V]}).get?Q=R.stylize(re.set?"[Getter/Setter]":"[Getter]","special"):re.set&&(Q=R.stylize("[Setter]","special")),F(B,V)||(Y="["+V+"]"),Q||(R.seen.indexOf(re.value)<0?(Q=p(I)?r(R,re.value,null):r(R,re.value,I-1)).indexOf("\n")>-1&&(Q=Z?Q.split("\n").map(function($){return"  "+$}).join("\n").substr(2):"\n"+Q.split("\n").map(function($){return"   "+$}).join("\n")):Q=R.stylize("[Circular]","special")),m(Y)){if(Z&&V.match(/^\d+$/))return Q;(Y=JSON.stringify(""+V)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.substr(1,Y.length-2),Y=R.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=R.stylize(Y,"string"))}return Y+": "+Q}function s(R){return Array.isArray(R)}function d(R){return"boolean"==typeof R}function p(R){return null===R}function c(R){return"number"==typeof R}function g(R){return"string"==typeof R}function m(R){return void 0===R}function u(R){return w(R)&&"[object RegExp]"===k(R)}function w(R){return"object"==typeof R&&null!==R}function f(R){return w(R)&&"[object Date]"===k(R)}function A(R){return w(R)&&("[object Error]"===k(R)||R instanceof Error)}function M(R){return"function"==typeof R}function k(R){return Object.prototype.toString.call(R)}function E(R){return R<10?"0"+R.toString(10):R.toString(10)}se.debuglog=function(R){if(m(b)&&(b=v.env.NODE_DEBUG||""),R=R.toUpperCase(),!e[R])if(new RegExp("\\b"+R+"\\b","i").test(b)){var L=v.pid;e[R]=function(){var I=se.format.apply(se,arguments);console.error("%s %d: %s",R,L,I)}}else e[R]=function(){};return e[R]},se.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},se.isArray=s,se.isBoolean=d,se.isNull=p,se.isNullOrUndefined=function(R){return null==R},se.isNumber=c,se.isString=g,se.isSymbol=function(R){return"symbol"==typeof R},se.isUndefined=m,se.isRegExp=u,se.isObject=w,se.isDate=f,se.isError=A,se.isFunction=M,se.isPrimitive=function(R){return null===R||"boolean"==typeof R||"number"==typeof R||"string"==typeof R||"symbol"==typeof R||void 0===R},se.isBuffer=_("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var R=new Date,L=[E(R.getHours()),E(R.getMinutes()),E(R.getSeconds())].join(":");return[R.getDate(),P[R.getMonth()],L].join(" ")}function F(R,L){return Object.prototype.hasOwnProperty.call(R,L)}se.log=function(){console.log("%s - %s",D(),se.format.apply(se,arguments))},se.inherits=_("inherits"),se._extend=function(R,L){if(!L||!w(L))return R;for(var I=Object.keys(L),B=I.length;B--;)R[I[B]]=L[I[B]];return R}}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(_,oe,se){"use strict";se.byteLength=function(r){var y=i(r),s=y[1];return 3*(y[0]+s)/4-s},se.toByteArray=function(r){var y,h,f,s=i(r),d=s[0],p=s[1],c=new T(3*(d+(f=p))/4-f),g=0,m=p>0?d-4:d;for(h=0;h<m;h+=4)y=x[r.charCodeAt(h)]<<18|x[r.charCodeAt(h+1)]<<12|x[r.charCodeAt(h+2)]<<6|x[r.charCodeAt(h+3)],c[g++]=y>>16&255,c[g++]=y>>8&255,c[g++]=255&y;return 2===p&&(y=x[r.charCodeAt(h)]<<2|x[r.charCodeAt(h+1)]>>4,c[g++]=255&y),1===p&&(y=x[r.charCodeAt(h)]<<10|x[r.charCodeAt(h+1)]<<4|x[r.charCodeAt(h+2)]>>2,c[g++]=y>>8&255,c[g++]=255&y),c},se.fromByteArray=function(r){for(var y,h=r.length,s=h%3,d=[],p=0,c=h-s;p<c;p+=16383)d.push(l(r,p,p+16383>c?c:p+16383));return 1===s?d.push(v[(y=r[h-1])>>2]+v[y<<4&63]+"=="):2===s&&d.push(v[(y=(r[h-2]<<8)+r[h-1])>>10]+v[y>>4&63]+v[y<<2&63]+"="),d.join("")};for(var v=[],x=[],T="undefined"!=typeof Uint8Array?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=b.length;e<o;++e)v[e]=b[e],x[b.charCodeAt(e)]=e;function i(r){var y=r.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=r.indexOf("=");return-1===h&&(h=y),[h,h===y?0:4-h%4]}function l(r,y,h){for(var d,p=[],c=y;c<h;c+=3)p.push(v[(d=(r[c]<<16&16711680)+(r[c+1]<<8&65280)+(255&r[c+2]))>>18&63]+v[d>>12&63]+v[d>>6&63]+v[63&d]);return p.join("")}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},{}],80:[function(_,oe,se){"use strict";function v(i,l,r,y,h){for(var s=h+1;y<=h;){var d=y+h>>>1,p=i[d];(void 0!==r?r(p,l):p-l)>=0?(s=d,h=d-1):y=d+1}return s}function x(i,l,r,y,h){for(var s=h+1;y<=h;){var d=y+h>>>1,p=i[d];(void 0!==r?r(p,l):p-l)>0?(s=d,h=d-1):y=d+1}return s}function T(i,l,r,y,h){for(var s=y-1;y<=h;){var d=y+h>>>1,p=i[d];(void 0!==r?r(p,l):p-l)<0?(s=d,y=d+1):h=d-1}return s}function b(i,l,r,y,h){for(var s=y-1;y<=h;){var d=y+h>>>1,p=i[d];(void 0!==r?r(p,l):p-l)<=0?(s=d,y=d+1):h=d-1}return s}function e(i,l,r,y,h){for(;y<=h;){var s=y+h>>>1,d=i[s],p=void 0!==r?r(d,l):d-l;if(0===p)return s;p<=0?y=s+1:h=s-1}return-1}function o(i,l,r,y,h,s){return"function"==typeof r?s(i,l,r,void 0===y?0:0|y,void 0===h?i.length-1:0|h):s(i,l,void 0,void 0===r?0:0|r,void 0===y?i.length-1:0|y)}oe.exports={ge:function(i,l,r,y,h){return o(i,l,r,y,h,v)},gt:function(i,l,r,y,h){return o(i,l,r,y,h,x)},lt:function(i,l,r,y,h){return o(i,l,r,y,h,T)},le:function(i,l,r,y,h){return o(i,l,r,y,h,b)},eq:function(i,l,r,y,h){return o(i,l,r,y,h,e)}}},{}],81:[function(_,oe,se){"use strict";function v(T){var b=32;return(T&=-T)&&b--,65535&T&&(b-=16),16711935&T&&(b-=8),252645135&T&&(b-=4),858993459&T&&(b-=2),1431655765&T&&(b-=1),b}se.INT_BITS=32,se.INT_MAX=2147483647,se.INT_MIN=-1<<31,se.sign=function(T){return(T>0)-(T<0)},se.abs=function(T){var b=T>>31;return(T^b)-b},se.min=function(T,b){return b^(T^b)&-(T<b)},se.max=function(T,b){return T^(T^b)&-(T<b)},se.isPow2=function(T){return!(T&T-1||!T)},se.log2=function(T){var b,e;return b=(T>65535)<<4,b|=e=((T>>>=b)>255)<<3,b|=e=((T>>>=e)>15)<<2,(b|=e=((T>>>=e)>3)<<1)|(T>>>=e)>>1},se.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},se.popCount=function(T){return 16843009*((T=(858993459&(T-=T>>>1&1431655765))+(T>>>2&858993459))+(T>>>4)&252645135)>>>24},se.countTrailingZeros=v,se.nextPow2=function(T){return T+=0===T,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,1+((T|=T>>>8)|T>>>16)},se.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,(T|=T>>>16)-(T>>>1)},se.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,27030>>>(T&=15)&1};var x=new Array(256);(function(T){for(var b=0;b<256;++b){var e=b,o=b,i=7;for(e>>>=1;e;e>>>=1)o<<=1,o|=1&e,--i;T[b]=o<<i&255}})(x),se.reverse=function(T){return x[255&T]<<24|x[T>>>8&255]<<16|x[T>>>16&255]<<8|x[T>>>24&255]},se.interleave2=function(T,b){return(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T&=65535)|T<<8))|T<<4))|T<<2))|T<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))<<1},se.deinterleave2=function(T,b){return(T=65535&((T=16711935&((T=252645135&((T=858993459&((T=T>>>b&1431655765)|T>>>1))|T>>>2))|T>>>4))|T>>>16))<<16>>16},se.interleave3=function(T,b,e){return T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2),(T|=(b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},se.deinterleave3=function(T,b){return(T=1023&((T=4278190335&((T=251719695&((T=3272356035&((T=T>>>b&1227133513)|T>>>2))|T>>>4))|T>>>8))|T>>>16))<<22>>22},se.nextCombination=function(T){var b=T|T-1;return b+1|(~b&-~b)-1>>>v(T)+1}},{}],82:[function(_,oe,se){"use strict";var v=_("clamp");oe.exports=function(e,o){o||(o={});var i,l,r,y,h,s,p,g,m,u=null==o.cutoff?.25:o.cutoff,w=null==o.radius?8:o.radius,f=o.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");i=o.width,l=o.height,y=e,s=o.stride?o.stride:Math.floor(e.length/i/l)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(y=(p=e).getContext("2d").getImageData(0,0,i=p.width,l=p.height).data,s=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(y=e.getImageData(0,0,i=(p=e.canvas).width,l=p.height).data,s=4):window.ImageData&&e instanceof window.ImageData&&(i=e.width,l=e.height,y=e.data,s=4);if(r=Math.max(i,l),window.Uint8ClampedArray&&y instanceof window.Uint8ClampedArray||window.Uint8Array&&y instanceof window.Uint8Array)for(h=y,y=Array(i*l),g=0,m=h.length;g<m;g++)y[g]=h[g*s+f]/255;else if(1!==s)throw Error("Raw data can have only 1 value per pixel");var A=Array(i*l),M=Array(i*l),k=Array(r),E=Array(r),P=Array(r+1),D=Array(r);for(g=0,m=i*l;g<m;g++){var F=y[g];A[g]=1===F?0:0===F?x:Math.pow(Math.max(0,.5-F),2),M[g]=1===F?x:0===F?0:Math.pow(Math.max(0,F-.5),2)}T(A,i,l,k,E,D,P),T(M,i,l,k,E,D,P);var R=window.Float32Array?new Float32Array(i*l):new Array(i*l);for(g=0,m=i*l;g<m;g++)R[g]=v(1-((A[g]-M[g])/w+u),0,1);return R};var x=1e20;function T(e,o,i,l,r,y,h){for(var s=0;s<o;s++){for(var d=0;d<i;d++)l[d]=e[d*o+s];for(b(l,r,y,h,i),d=0;d<i;d++)e[d*o+s]=r[d]}for(d=0;d<i;d++){for(s=0;s<o;s++)l[s]=e[d*o+s];for(b(l,r,y,h,o),s=0;s<o;s++)e[d*o+s]=Math.sqrt(r[s])}}function b(e,o,i,l,r){i[0]=0,l[0]=-x,l[1]=+x;for(var y=1,h=0;y<r;y++){for(var s=(e[y]+y*y-(e[i[h]]+i[h]*i[h]))/(2*y-2*i[h]);s<=l[h];)h--,s=(e[y]+y*y-(e[i[h]]+i[h]*i[h]))/(2*y-2*i[h]);i[++h]=y,l[h]=s,l[h+1]=+x}for(y=0,h=0;y<r;y++){for(;l[h+1]<y;)h++;o[y]=(y-i[h])*(y-i[h])+e[i[h]]}}},{clamp:86}],83:[function(_,oe,se){},{}],84:[function(_,oe,se){"use strict";var v,x="object"==typeof Reflect?Reflect:null,T=x&&"function"==typeof x.apply?x.apply:function(c,g,m){return Function.prototype.apply.call(c,g,m)};v=x&&"function"==typeof x.ownKeys?x.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var b=Number.isNaN||function(c){return c!=c};function e(){e.init.call(this)}oe.exports=e,oe.exports.once=function(c,g){return new Promise(function(m,u){function w(){void 0!==f&&c.removeListener("error",f),m([].slice.call(arguments))}var f;"error"!==g&&(f=function(A){c.removeListener(g,w),u(A)},c.once("error",f)),c.once(g,w)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function i(c){if("function"!=typeof c)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function l(c){return void 0===c._maxListeners?e.defaultMaxListeners:c._maxListeners}function r(c,g,m,u){var w,f,A;if(i(m),void 0===(f=c._events)?(f=c._events=Object.create(null),c._eventsCount=0):(void 0!==f.newListener&&(c.emit("newListener",g,m.listener?m.listener:m),f=c._events),A=f[g]),void 0===A)A=f[g]=m,++c._eventsCount;else if("function"==typeof A?A=f[g]=u?[m,A]:[A,m]:u?A.unshift(m):A.push(m),(w=l(c))>0&&A.length>w&&!A.warned){A.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=c,k.type=g,k.count=A.length,console&&console.warn&&console.warn(k)}return c}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(c,g,m){var u={fired:!1,wrapFn:void 0,target:c,type:g,listener:m},w=y.bind(u);return w.listener=m,u.wrapFn=w,w}function s(c,g,m){var u=c._events;if(void 0===u)return[];var w=u[g];return void 0===w?[]:"function"==typeof w?m?[w.listener||w]:[w]:m?function(f){for(var A=new Array(f.length),M=0;M<A.length;++M)A[M]=f[M].listener||f[M];return A}(w):p(w,w.length)}function d(c){var g=this._events;if(void 0!==g){var m=g[c];if("function"==typeof m)return 1;if(void 0!==m)return m.length}return 0}function p(c,g){for(var m=new Array(g),u=0;u<g;++u)m[u]=c[u];return m}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(c){if("number"!=typeof c||c<0||b(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");o=c}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(c){if("number"!=typeof c||c<0||b(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(c){for(var g=[],m=1;m<arguments.length;m++)g.push(arguments[m]);var u="error"===c,w=this._events;if(void 0!==w)u=u&&void 0===w.error;else if(!u)return!1;if(u){var f;if(g.length>0&&(f=g[0]),f instanceof Error)throw f;var A=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw A.context=f,A}var M=w[c];if(void 0===M)return!1;if("function"==typeof M)T(M,this,g);else{var k=M.length,E=p(M,k);for(m=0;m<k;++m)T(E[m],this,g)}return!0},e.prototype.on=e.prototype.addListener=function(c,g){return r(this,c,g,!1)},e.prototype.prependListener=function(c,g){return r(this,c,g,!0)},e.prototype.once=function(c,g){return i(g),this.on(c,h(this,c,g)),this},e.prototype.prependOnceListener=function(c,g){return i(g),this.prependListener(c,h(this,c,g)),this},e.prototype.off=e.prototype.removeListener=function(c,g){var m,u,w,f,A;if(i(g),void 0===(u=this._events))return this;if(void 0===(m=u[c]))return this;if(m===g||m.listener===g)0==--this._eventsCount?this._events=Object.create(null):(delete u[c],u.removeListener&&this.emit("removeListener",c,m.listener||g));else if("function"!=typeof m){for(w=-1,f=m.length-1;f>=0;f--)if(m[f]===g||m[f].listener===g){A=m[f].listener,w=f;break}if(w<0)return this;0===w?m.shift():function(M,k){for(;k+1<M.length;k++)M[k]=M[k+1];M.pop()}(m,w),1===m.length&&(u[c]=m[0]),void 0!==u.removeListener&&this.emit("removeListener",c,A||g)}return this},e.prototype.removeAllListeners=function(c){var g,m,u;if(void 0===(m=this._events))return this;if(void 0===m.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==m[c]&&(0==--this._eventsCount?this._events=Object.create(null):delete m[c]),this;if(0===arguments.length){var w,f=Object.keys(m);for(u=0;u<f.length;++u)"removeListener"!==(w=f[u])&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(g=m[c]))this.removeListener(c,g);else if(void 0!==g)for(u=g.length-1;u>=0;u--)this.removeListener(c,g[u]);return this},e.prototype.listeners=function(c){return s(this,c,!0)},e.prototype.rawListeners=function(c){return s(this,c,!1)},e.listenerCount=function(c,g){return"function"==typeof c.listenerCount?c.listenerCount(g):d.call(c,g)},e.prototype.listenerCount=d,e.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},{}],85:[function(_,oe,se){(function(v){(function(){"use strict";var x=_("base64-js"),T=_("ieee754");function b(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var q=new Uint8Array(j);return q.__proto__=e.prototype,q}function e(j,q,W){if("number"==typeof j){if("string"==typeof q)throw new TypeError('The "string" argument must be of type string. Received type number');return l(j)}return o(j,q,W)}function o(j,q,W){if("string"==typeof j)return function(ee,te){if("string"==typeof te&&""!==te||(te="utf8"),!e.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var le=0|h(ee,te),ue=b(le),de=ue.write(ee,te);return de!==le&&(ue=ue.slice(0,de)),ue}(j,q);if(ArrayBuffer.isView(j))return r(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(J(j,ArrayBuffer)||j&&J(j.buffer,ArrayBuffer))return function(ee,te,le){if(te<0||ee.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(ee.byteLength<te+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===te&&void 0===le?new Uint8Array(ee):void 0===le?new Uint8Array(ee,te):new Uint8Array(ee,te,le)).__proto__=e.prototype,ue}(j,q,W);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var ae=j.valueOf&&j.valueOf();if(null!=ae&&ae!==j)return e.from(ae,q,W);var G=function(ee){if(e.isBuffer(ee)){var te=0|y(ee.length),le=b(te);return 0===le.length||ee.copy(le,0,0,te),le}return void 0!==ee.length?"number"!=typeof ee.length||ie(ee.length)?b(0):r(ee):"Buffer"===ee.type&&Array.isArray(ee.data)?r(ee.data):void 0}(j);if(G)return G;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return e.from(j[Symbol.toPrimitive]("string"),q,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function i(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function l(j){return i(j),b(j<0?0:0|y(j))}function r(j){for(var q=j.length<0?0:0|y(j.length),W=b(q),ae=0;ae<q;ae+=1)W[ae]=255&j[ae];return W}function y(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function h(j,q){if(e.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||J(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var W=j.length,ae=arguments.length>2&&!0===arguments[2];if(!ae&&0===W)return 0;for(var G=!1;;)switch(q){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return Q(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return re(j).length;default:if(G)return ae?-1:Q(j).length;q=(""+q).toLowerCase(),G=!0}}function s(j,q,W){var ae=!1;if((void 0===q||q<0)&&(q=0),q>this.length||((void 0===W||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(q>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return D(this,q,W);case"utf8":case"utf-8":return k(this,q,W);case"ascii":return E(this,q,W);case"latin1":case"binary":return P(this,q,W);case"base64":return M(this,q,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,q,W);default:if(ae)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),ae=!0}}function d(j,q,W){var ae=j[q];j[q]=j[W],j[W]=ae}function p(j,q,W,ae,G){if(0===j.length)return-1;if("string"==typeof W?(ae=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),ie(W=+W)&&(W=G?0:j.length-1),W<0&&(W=j.length+W),W>=j.length){if(G)return-1;W=j.length-1}else if(W<0){if(!G)return-1;W=0}if("string"==typeof q&&(q=e.from(q,ae)),e.isBuffer(q))return 0===q.length?-1:c(j,q,W,ae,G);if("number"==typeof q)return q&=255,"function"==typeof Uint8Array.prototype.indexOf?G?Uint8Array.prototype.indexOf.call(j,q,W):Uint8Array.prototype.lastIndexOf.call(j,q,W):c(j,[q],W,ae,G);throw new TypeError("val must be string, number or Buffer")}function c(j,q,W,ae,G){var ee,te=1,le=j.length,ue=q.length;if(void 0!==ae&&("ucs2"===(ae=String(ae).toLowerCase())||"ucs-2"===ae||"utf16le"===ae||"utf-16le"===ae)){if(j.length<2||q.length<2)return-1;te=2,le/=2,ue/=2,W/=2}function de(_e,Ee){return 1===te?_e[Ee]:_e.readUInt16BE(Ee*te)}if(G){var he=-1;for(ee=W;ee<le;ee++)if(de(j,ee)===de(q,-1===he?0:ee-he)){if(-1===he&&(he=ee),ee-he+1===ue)return he*te}else-1!==he&&(ee-=ee-he),he=-1}else for(W+ue>le&&(W=le-ue),ee=W;ee>=0;ee--){for(var be=!0,me=0;me<ue;me++)if(de(j,ee+me)!==de(q,me)){be=!1;break}if(be)return ee}return-1}function g(j,q,W,ae){W=Number(W)||0;var G=j.length-W;ae?(ae=Number(ae))>G&&(ae=G):ae=G;var ee=q.length;ae>ee/2&&(ae=ee/2);for(var te=0;te<ae;++te){var le=parseInt(q.substr(2*te,2),16);if(ie(le))return te;j[W+te]=le}return te}function m(j,q,W,ae){return $(Q(q,j.length-W),j,W,ae)}function u(j,q,W,ae){return $(function(G){for(var ee=[],te=0;te<G.length;++te)ee.push(255&G.charCodeAt(te));return ee}(q),j,W,ae)}function w(j,q,W,ae){return u(j,q,W,ae)}function f(j,q,W,ae){return $(re(q),j,W,ae)}function A(j,q,W,ae){return $(function(G,ee){for(var te,le,de=[],he=0;he<G.length&&!((ee-=2)<0);++he)le=(te=G.charCodeAt(he))>>8,de.push(te%256),de.push(le);return de}(q,j.length-W),j,W,ae)}function M(j,q,W){return x.fromByteArray(0===q&&W===j.length?j:j.slice(q,W))}function k(j,q,W){W=Math.min(j.length,W);for(var ae=[],G=q;G<W;){var ee,te,le,ue,de=j[G],he=null,be=de>239?4:de>223?3:de>191?2:1;if(G+be<=W)switch(be){case 1:de<128&&(he=de);break;case 2:128==(192&(ee=j[G+1]))&&(ue=(31&de)<<6|63&ee)>127&&(he=ue);break;case 3:te=j[G+2],128==(192&(ee=j[G+1]))&&128==(192&te)&&(ue=(15&de)<<12|(63&ee)<<6|63&te)>2047&&(ue<55296||ue>57343)&&(he=ue);break;case 4:te=j[G+2],le=j[G+3],128==(192&(ee=j[G+1]))&&128==(192&te)&&128==(192&le)&&(ue=(15&de)<<18|(63&ee)<<12|(63&te)<<6|63&le)>65535&&ue<1114112&&(he=ue)}null===he?(he=65533,be=1):he>65535&&(ae.push((he-=65536)>>>10&1023|55296),he=56320|1023&he),ae.push(he),G+=be}return function(me){var _e=me.length;if(_e<=4096)return String.fromCharCode.apply(String,me);for(var Ee="",De=0;De<_e;)Ee+=String.fromCharCode.apply(String,me.slice(De,De+=4096));return Ee}(ae)}function E(j,q,W){var ae="";W=Math.min(j.length,W);for(var G=q;G<W;++G)ae+=String.fromCharCode(127&j[G]);return ae}function P(j,q,W){var ae="";W=Math.min(j.length,W);for(var G=q;G<W;++G)ae+=String.fromCharCode(j[G]);return ae}function D(j,q,W){var ae=j.length;(!q||q<0)&&(q=0),(!W||W<0||W>ae)&&(W=ae);for(var G="",ee=q;ee<W;++ee)G+=Y(j[ee]);return G}function F(j,q,W){for(var ae=j.slice(q,W),G="",ee=0;ee<ae.length;ee+=2)G+=String.fromCharCode(ae[ee]+256*ae[ee+1]);return G}function R(j,q,W){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+q>W)throw new RangeError("Trying to access beyond buffer length")}function L(j,q,W,ae,G,ee){if(!e.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>G||q<ee)throw new RangeError('"value" argument is out of bounds');if(W+ae>j.length)throw new RangeError("Index out of range")}function I(j,q,W,ae,G,ee){if(W+ae>j.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function B(j,q,W,ae,G){return q=+q,W>>>=0,G||I(j,0,W,4),T.write(j,q,W,ae,23,4),W+4}function V(j,q,W,ae,G){return q=+q,W>>>=0,G||I(j,0,W,8),T.write(j,q,W,ae,52,8),W+8}se.Buffer=e,se.SlowBuffer=function(j){return+j!=j&&(j=0),e.alloc(+j)},se.INSPECT_MAX_BYTES=50,se.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(q){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(j,q,W){return o(j,q,W)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(j,q,W){return G=q,ee=W,i(ae=j),ae<=0?b(ae):void 0!==G?"string"==typeof ee?b(ae).fill(G,ee):b(ae).fill(G):b(ae);var ae,G,ee},e.allocUnsafe=function(j){return l(j)},e.allocUnsafeSlow=function(j){return l(j)},e.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==e.prototype},e.compare=function(j,q){if(J(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),J(q,Uint8Array)&&(q=e.from(q,q.offset,q.byteLength)),!e.isBuffer(j)||!e.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===q)return 0;for(var W=j.length,ae=q.length,G=0,ee=Math.min(W,ae);G<ee;++G)if(j[G]!==q[G]){W=j[G],ae=q[G];break}return W<ae?-1:ae<W?1:0},e.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(j,q){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return e.alloc(0);var W;if(void 0===q)for(q=0,W=0;W<j.length;++W)q+=j[W].length;var ae=e.allocUnsafe(q),G=0;for(W=0;W<j.length;++W){var ee=j[W];if(J(ee,Uint8Array)&&(ee=e.from(ee)),!e.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(ae,G),G+=ee.length}return ae},e.byteLength=h,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<j;q+=2)d(this,q,q+1);return this},e.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<j;q+=4)d(this,q,q+3),d(this,q+1,q+2);return this},e.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<j;q+=8)d(this,q,q+7),d(this,q+1,q+6),d(this,q+2,q+5),d(this,q+3,q+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?k(this,0,j):s.apply(this,arguments)},e.prototype.equals=function(j){if(!e.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===e.compare(this,j)},e.prototype.inspect=function(){var j="",q=se.INSPECT_MAX_BYTES;return j=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(j+=" ... "),"<Buffer "+j+">"},e.prototype.compare=function(j,q,W,ae,G){if(J(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),!e.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===q&&(q=0),void 0===W&&(W=j?j.length:0),void 0===ae&&(ae=0),void 0===G&&(G=this.length),q<0||W>j.length||ae<0||G>this.length)throw new RangeError("out of range index");if(ae>=G&&q>=W)return 0;if(ae>=G)return-1;if(q>=W)return 1;if(this===j)return 0;for(var ee=(G>>>=0)-(ae>>>=0),te=(W>>>=0)-(q>>>=0),le=Math.min(ee,te),ue=this.slice(ae,G),de=j.slice(q,W),he=0;he<le;++he)if(ue[he]!==de[he]){ee=ue[he],te=de[he];break}return ee<te?-1:te<ee?1:0},e.prototype.includes=function(j,q,W){return-1!==this.indexOf(j,q,W)},e.prototype.indexOf=function(j,q,W){return p(this,j,q,W,!0)},e.prototype.lastIndexOf=function(j,q,W){return p(this,j,q,W,!1)},e.prototype.write=function(j,q,W,ae){if(void 0===q)ae="utf8",W=this.length,q=0;else if(void 0===W&&"string"==typeof q)ae=q,W=this.length,q=0;else{if(!isFinite(q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");q>>>=0,isFinite(W)?(W>>>=0,void 0===ae&&(ae="utf8")):(ae=W,W=void 0)}var G=this.length-q;if((void 0===W||W>G)&&(W=G),j.length>0&&(W<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");ae||(ae="utf8");for(var ee=!1;;)switch(ae){case"hex":return g(this,j,q,W);case"utf8":case"utf-8":return m(this,j,q,W);case"ascii":return u(this,j,q,W);case"latin1":case"binary":return w(this,j,q,W);case"base64":return f(this,j,q,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,j,q,W);default:if(ee)throw new TypeError("Unknown encoding: "+ae);ae=(""+ae).toLowerCase(),ee=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(j,q){var W=this.length;(j=~~j)<0?(j+=W)<0&&(j=0):j>W&&(j=W),(q=void 0===q?W:~~q)<0?(q+=W)<0&&(q=0):q>W&&(q=W),q<j&&(q=j);var ae=this.subarray(j,q);return ae.__proto__=e.prototype,ae},e.prototype.readUIntLE=function(j,q,W){j>>>=0,q>>>=0,W||R(j,q,this.length);for(var ae=this[j],G=1,ee=0;++ee<q&&(G*=256);)ae+=this[j+ee]*G;return ae},e.prototype.readUIntBE=function(j,q,W){j>>>=0,q>>>=0,W||R(j,q,this.length);for(var ae=this[j+--q],G=1;q>0&&(G*=256);)ae+=this[j+--q]*G;return ae},e.prototype.readUInt8=function(j,q){return j>>>=0,q||R(j,1,this.length),this[j]},e.prototype.readUInt16LE=function(j,q){return j>>>=0,q||R(j,2,this.length),this[j]|this[j+1]<<8},e.prototype.readUInt16BE=function(j,q){return j>>>=0,q||R(j,2,this.length),this[j]<<8|this[j+1]},e.prototype.readUInt32LE=function(j,q){return j>>>=0,q||R(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},e.prototype.readUInt32BE=function(j,q){return j>>>=0,q||R(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},e.prototype.readIntLE=function(j,q,W){j>>>=0,q>>>=0,W||R(j,q,this.length);for(var ae=this[j],G=1,ee=0;++ee<q&&(G*=256);)ae+=this[j+ee]*G;return ae>=(G*=128)&&(ae-=Math.pow(2,8*q)),ae},e.prototype.readIntBE=function(j,q,W){j>>>=0,q>>>=0,W||R(j,q,this.length);for(var ae=q,G=1,ee=this[j+--ae];ae>0&&(G*=256);)ee+=this[j+--ae]*G;return ee>=(G*=128)&&(ee-=Math.pow(2,8*q)),ee},e.prototype.readInt8=function(j,q){return j>>>=0,q||R(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},e.prototype.readInt16LE=function(j,q){j>>>=0,q||R(j,2,this.length);var W=this[j]|this[j+1]<<8;return 32768&W?4294901760|W:W},e.prototype.readInt16BE=function(j,q){j>>>=0,q||R(j,2,this.length);var W=this[j+1]|this[j]<<8;return 32768&W?4294901760|W:W},e.prototype.readInt32LE=function(j,q){return j>>>=0,q||R(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},e.prototype.readInt32BE=function(j,q){return j>>>=0,q||R(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},e.prototype.readFloatLE=function(j,q){return j>>>=0,q||R(j,4,this.length),T.read(this,j,!0,23,4)},e.prototype.readFloatBE=function(j,q){return j>>>=0,q||R(j,4,this.length),T.read(this,j,!1,23,4)},e.prototype.readDoubleLE=function(j,q){return j>>>=0,q||R(j,8,this.length),T.read(this,j,!0,52,8)},e.prototype.readDoubleBE=function(j,q){return j>>>=0,q||R(j,8,this.length),T.read(this,j,!1,52,8)},e.prototype.writeUIntLE=function(j,q,W,ae){j=+j,q>>>=0,W>>>=0,ae||L(this,j,q,W,Math.pow(2,8*W)-1,0);var G=1,ee=0;for(this[q]=255&j;++ee<W&&(G*=256);)this[q+ee]=j/G&255;return q+W},e.prototype.writeUIntBE=function(j,q,W,ae){j=+j,q>>>=0,W>>>=0,ae||L(this,j,q,W,Math.pow(2,8*W)-1,0);var G=W-1,ee=1;for(this[q+G]=255&j;--G>=0&&(ee*=256);)this[q+G]=j/ee&255;return q+W},e.prototype.writeUInt8=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,1,255,0),this[q]=255&j,q+1},e.prototype.writeUInt16LE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,2,65535,0),this[q]=255&j,this[q+1]=j>>>8,q+2},e.prototype.writeUInt16BE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,2,65535,0),this[q]=j>>>8,this[q+1]=255&j,q+2},e.prototype.writeUInt32LE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,4,4294967295,0),this[q+3]=j>>>24,this[q+2]=j>>>16,this[q+1]=j>>>8,this[q]=255&j,q+4},e.prototype.writeUInt32BE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,4,4294967295,0),this[q]=j>>>24,this[q+1]=j>>>16,this[q+2]=j>>>8,this[q+3]=255&j,q+4},e.prototype.writeIntLE=function(j,q,W,ae){if(j=+j,q>>>=0,!ae){var G=Math.pow(2,8*W-1);L(this,j,q,W,G-1,-G)}var ee=0,te=1,le=0;for(this[q]=255&j;++ee<W&&(te*=256);)j<0&&0===le&&0!==this[q+ee-1]&&(le=1),this[q+ee]=(j/te>>0)-le&255;return q+W},e.prototype.writeIntBE=function(j,q,W,ae){if(j=+j,q>>>=0,!ae){var G=Math.pow(2,8*W-1);L(this,j,q,W,G-1,-G)}var ee=W-1,te=1,le=0;for(this[q+ee]=255&j;--ee>=0&&(te*=256);)j<0&&0===le&&0!==this[q+ee+1]&&(le=1),this[q+ee]=(j/te>>0)-le&255;return q+W},e.prototype.writeInt8=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,1,127,-128),j<0&&(j=255+j+1),this[q]=255&j,q+1},e.prototype.writeInt16LE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,2,32767,-32768),this[q]=255&j,this[q+1]=j>>>8,q+2},e.prototype.writeInt16BE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,2,32767,-32768),this[q]=j>>>8,this[q+1]=255&j,q+2},e.prototype.writeInt32LE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,4,2147483647,-2147483648),this[q]=255&j,this[q+1]=j>>>8,this[q+2]=j>>>16,this[q+3]=j>>>24,q+4},e.prototype.writeInt32BE=function(j,q,W){return j=+j,q>>>=0,W||L(this,j,q,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[q]=j>>>24,this[q+1]=j>>>16,this[q+2]=j>>>8,this[q+3]=255&j,q+4},e.prototype.writeFloatLE=function(j,q,W){return B(this,j,q,!0,W)},e.prototype.writeFloatBE=function(j,q,W){return B(this,j,q,!1,W)},e.prototype.writeDoubleLE=function(j,q,W){return V(this,j,q,!0,W)},e.prototype.writeDoubleBE=function(j,q,W){return V(this,j,q,!1,W)},e.prototype.copy=function(j,q,W,ae){if(!e.isBuffer(j))throw new TypeError("argument should be a Buffer");if(W||(W=0),ae||0===ae||(ae=this.length),q>=j.length&&(q=j.length),q||(q=0),ae>0&&ae<W&&(ae=W),ae===W||0===j.length||0===this.length)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("sourceEnd out of bounds");ae>this.length&&(ae=this.length),j.length-q<ae-W&&(ae=j.length-q+W);var G=ae-W;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(q,W,ae);else if(this===j&&W<q&&q<ae)for(var ee=G-1;ee>=0;--ee)j[ee+q]=this[ee+W];else Uint8Array.prototype.set.call(j,this.subarray(W,ae),q);return G},e.prototype.fill=function(j,q,W,ae){if("string"==typeof j){if("string"==typeof q?(ae=q,q=0,W=this.length):"string"==typeof W&&(ae=W,W=this.length),void 0!==ae&&"string"!=typeof ae)throw new TypeError("encoding must be a string");if("string"==typeof ae&&!e.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);if(1===j.length){var G=j.charCodeAt(0);("utf8"===ae&&G<128||"latin1"===ae)&&(j=G)}}else"number"==typeof j&&(j&=255);if(q<0||this.length<q||this.length<W)throw new RangeError("Out of range index");if(W<=q)return this;var ee;if(q>>>=0,W=void 0===W?this.length:W>>>0,j||(j=0),"number"==typeof j)for(ee=q;ee<W;++ee)this[ee]=j;else{var te=e.isBuffer(j)?j:e.from(j,ae),le=te.length;if(0===le)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(ee=0;ee<W-q;++ee)this[ee+q]=te[ee%le]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function Y(j){return j<16?"0"+j.toString(16):j.toString(16)}function Q(j,q){var W;q=q||1/0;for(var ae=j.length,G=null,ee=[],te=0;te<ae;++te){if((W=j.charCodeAt(te))>55295&&W<57344){if(!G){if(W>56319){(q-=3)>-1&&ee.push(239,191,189);continue}if(te+1===ae){(q-=3)>-1&&ee.push(239,191,189);continue}G=W;continue}if(W<56320){(q-=3)>-1&&ee.push(239,191,189),G=W;continue}W=65536+(G-55296<<10|W-56320)}else G&&(q-=3)>-1&&ee.push(239,191,189);if(G=null,W<128){if((q-=1)<0)break;ee.push(W)}else if(W<2048){if((q-=2)<0)break;ee.push(W>>6|192,63&W|128)}else if(W<65536){if((q-=3)<0)break;ee.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;ee.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return ee}function re(j){return x.toByteArray(function(q){if((q=(q=q.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q}(j))}function $(j,q,W,ae){for(var G=0;G<ae&&!(G+W>=q.length||G>=j.length);++G)q[G+W]=j[G];return G}function J(j,q){return j instanceof q||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===q.name}function ie(j){return j!=j}}).call(this)}).call(this,_("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(_,oe,se){oe.exports=function(v,x,T){return x<T?v<x?x:v>T?T:v:v<T?T:v>x?x:v}},{}],87:[function(_,oe,se){"use strict";var v=_("clamp");function x(T,b){null==b&&(b=!0);var e=T[0],o=T[1],i=T[2],l=T[3];return null==l&&(l=b?1:255),b&&(e*=255,o*=255,i*=255,l*=255),16777216*(e=255&v(e,0,255))+((o=255&v(o,0,255))<<16)+((i=255&v(i,0,255))<<8)+(255&v(l,0,255))}oe.exports=x,oe.exports.to=x,oe.exports.from=function(T,b){var e=(T=+T)>>>24,o=(16711680&T)>>>16,i=(65280&T)>>>8,l=255&T;return!1===b?[e,o,i,l]:[e/255,o/255,i/255,l/255]}},{clamp:86}],88:[function(_,oe,se){"use strict";oe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(_,oe,se){"use strict";var v=_("color-rgba"),x=_("clamp"),T=_("dtype");oe.exports=function(b,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var l,o=new(T(e))(4),i="uint8"!==e&&"uint8_clamped"!==e;return b.length&&"string"!=typeof b||((b=v(b))[0]/=255,b[1]/=255,b[2]/=255),(l=b)instanceof Uint8Array||l instanceof Uint8ClampedArray||Array.isArray(l)&&(l[0]>1||0===l[0])&&(l[1]>1||0===l[1])&&(l[2]>1||0===l[2])&&(!l[3]||l[3]>1)?(o[0]=b[0],o[1]=b[1],o[2]=b[2],o[3]=null!=b[3]?b[3]:255,i&&(o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255),o):(i?(o[0]=b[0],o[1]=b[1],o[2]=b[2],o[3]=null!=b[3]?b[3]:1):(o[0]=x(Math.floor(255*b[0]),0,255),o[1]=x(Math.floor(255*b[1]),0,255),o[2]=x(Math.floor(255*b[2]),0,255),o[3]=null==b[3]?255:x(Math.floor(255*b[3]),0,255)),o)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(_,oe,se){(function(v){(function(){"use strict";var x=_("color-name"),T=_("is-plain-obj"),b=_("defined");oe.exports=function(o){var i,l,r=[],y=1;if("string"==typeof o)if(x[o])r=x[o].slice(),l="rgb";else if("transparent"===o)y=0,l="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var h=(p=o.slice(1)).length;y=1,h<=4?(r=[parseInt(p[0]+p[0],16),parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16)],4===h&&(y=parseInt(p[3]+p[3],16)/255)):(r=[parseInt(p[0]+p[1],16),parseInt(p[2]+p[3],16),parseInt(p[4]+p[5],16)],8===h&&(y=parseInt(p[6]+p[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),l="rgb"}else if(i=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var s=i[1],d="rgb"===s,p=s.replace(/a$/,"");l=p,h="cmyk"===p?4:"gray"===p?1:3,r=i[2].trim().split(/\s*,\s*/).map(function(g,m){if(/%$/.test(g))return m===h?parseFloat(g)/100:"rgb"===p?255*parseFloat(g)/100:parseFloat(g);if("h"===p[m]){if(/deg$/.test(g))return parseFloat(g);if(void 0!==e[g])return e[g]}return parseFloat(g)}),s===p&&r.push(1),y=d||void 0===r[h]?1:r[h],r=r.slice(0,h)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(r=o.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),l=o.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(o))if(T(o)){var c=b(o.r,o.red,o.R,null);null!==c?(l="rgb",r=[c,b(o.g,o.green,o.G),b(o.b,o.blue,o.B)]):(l="hsl",r=[b(o.h,o.hue,o.H),b(o.s,o.saturation,o.S),b(o.l,o.lightness,o.L,o.b,o.brightness)]),y=b(o.a,o.alpha,o.opacity,1),null!=o.opacity&&(y/=100)}else(Array.isArray(o)||v.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o))&&(r=[o[0],o[1],o[2]],l="rgb",y=4===o.length?o[3]:1);else l="rgb",r=[o>>>16,(65280&o)>>>8,255&o];return{space:l,values:r,alpha:y}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(_,oe,se){"use strict";var v=_("color-parse"),x=_("color-space/hsl"),T=_("clamp");oe.exports=function(b){var e,o=v(b);return o.space?((e=Array(3))[0]=T(o.values[0],0,255),e[1]=T(o.values[1],0,255),e[2]=T(o.values[2],0,255),"h"===o.space[0]&&(e=x.rgb(e)),e.push(T(o.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(_,oe,se){"use strict";var v=_("./rgb");oe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(x){var T,b,e,o,i,l=x[0]/360,r=x[1]/100,y=x[2]/100;if(0===r)return[i=255*y,i,i];T=2*y-(b=y<.5?y*(1+r):y+r-y*r),o=[0,0,0];for(var h=0;h<3;h++)(e=l+1/3*-(h-1))<0?e++:e>1&&e--,o[h]=255*(i=6*e<1?T+6*(b-T)*e:2*e<1?b:3*e<2?T+(b-T)*(2/3-e)*6:T);return o}},v.hsl=function(x){var T,b,e=x[0]/255,o=x[1]/255,i=x[2]/255,l=Math.min(e,o,i),r=Math.max(e,o,i),y=r-l;return r===l?T=0:e===r?T=(o-i)/y:o===r?T=2+(i-e)/y:i===r&&(T=4+(e-o)/y),(T=Math.min(60*T,360))<0&&(T+=360),b=(l+r)/2,[T,100*(r===l?0:b<=.5?y/(r+l):y/(2-r-l)),100*b]}},{"./rgb":93}],93:[function(_,oe,se){"use strict";oe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(_,oe,se){oe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(_,oe,se){oe.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(_,oe,se){oe.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(_,oe,se){oe.exports=["normal","italic","oblique"]},{}],98:[function(_,oe,se){oe.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(_,oe,se){"use strict";oe.exports={parse:_("./parse"),stringify:_("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(_,oe,se){"use strict";var v=_("css-font-size-keywords");oe.exports={isSize:function(x){return/^[\d\.]/.test(x)||-1!==x.indexOf("/")||-1!==v.indexOf(x)}}},{"css-font-size-keywords":95}],101:[function(_,oe,se){"use strict";var v=_("unquote"),x=_("css-global-keywords"),T=_("css-system-font-keywords"),b=_("css-font-weight-keywords"),e=_("css-font-style-keywords"),o=_("css-font-stretch-keywords"),i=_("string-split-by"),l=_("./lib/util").isSize;oe.exports=y;var r=y.cache={};function y(s){if("string"!=typeof s)throw new Error("Font argument must be a string.");if(r[s])return r[s];if(""===s)throw new Error("Cannot parse an empty string.");if(-1!==T.indexOf(s))return r[s]={system:s};for(var d,p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},c=i(s,/\s+/);d=c.shift();){if(-1!==x.indexOf(d))return["style","variant","weight","stretch"].forEach(function(m){p[m]=d}),r[s]=p;if(-1===e.indexOf(d))if("normal"!==d&&"small-caps"!==d)if(-1===o.indexOf(d)){if(-1===b.indexOf(d)){if(l(d)){var g=i(d,"/");if(p.size=g[0],null!=g[1]?p.lineHeight=h(g[1]):"/"===c[0]&&(c.shift(),p.lineHeight=h(c.shift())),!c.length)throw new Error("Missing required font-family.");return p.family=i(c.join(" "),/\s*,\s*/).map(v),r[s]=p}throw new Error("Unknown or unsupported font token: "+d)}p.weight=d}else p.stretch=d;else p.variant=d;else p.style=d}throw new Error("Missing required font-size.")}function h(s){var d=parseFloat(s);return d.toString()===s?d:s}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(_,oe,se){"use strict";var v=_("pick-by-alias"),x=_("./lib/util").isSize,T=d(_("css-global-keywords")),b=d(_("css-system-font-keywords")),e=d(_("css-font-weight-keywords")),o=d(_("css-font-style-keywords")),i=d(_("css-font-stretch-keywords")),l={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h="serif";function s(p,c){if(p&&!c[p]&&!T[p])throw Error("Unknown keyword `"+p+"`");return p}function d(p){for(var c={},g=0;g<p.length;g++)c[p[g]]=1;return c}oe.exports=function(p){if((p=v(p,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return p.system&&s(p.system,b),p.system;if(s(p.style,o),s(p.variant,l),s(p.weight,e),s(p.stretch,i),null==p.size&&(p.size="1rem"),"number"==typeof p.size&&(p.size+="px"),!x)throw Error("Bad size value `"+p.size+"`");p.family||(p.family=h),Array.isArray(p.family)&&(p.family.length||(p.family=[h]),p.family=p.family.map(function(g){return r[g]?g:'"'+g+'"'}).join(", "));var c=[];return c.push(p.style),p.variant!==p.style&&c.push(p.variant),p.weight!==p.variant&&p.weight!==p.style&&c.push(p.weight),p.stretch!==p.weight&&p.stretch!==p.variant&&p.stretch!==p.style&&c.push(p.stretch),c.push(p.size+(null==p.lineHeight||"normal"===p.lineHeight||p.lineHeight+""=="1"?"":"/"+p.lineHeight)),c.push(p.family),c.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(_,oe,se){oe.exports=["inherit","initial","unset"]},{}],104:[function(_,oe,se){oe.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(_,oe,se){"use strict";var v,x=_("type/value/is"),T=_("type/value/ensure"),b=_("type/plain-function/ensure"),e=_("es5-ext/object/copy"),o=_("es5-ext/object/normalize-options"),i=_("es5-ext/object/map"),l=Function.prototype.bind,r=Object.defineProperty,y=Object.prototype.hasOwnProperty;v=function(h,s,d){var p,c=T(s)&&b(s.value);return delete(p=e(s)).writable,delete p.value,p.get=function(){return!d.overwriteDefinition&&y.call(this,h)?c:(s.value=l.call(c,d.resolveContext?d.resolveContext(this):this),r(this,h,s),this[h])},p},oe.exports=function(h){var s=o(arguments[1]);return x(s.resolveContext)&&b(s.resolveContext),i(h,function(d,p){return v(p,d,s)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(_,oe,se){"use strict";var v=_("type/value/is"),x=_("type/plain-function/is"),T=_("es5-ext/object/assign"),b=_("es5-ext/object/normalize-options"),e=_("es5-ext/string/#/contains");(oe.exports=function(o,i){var l,r,y,h,s;return arguments.length<2||"string"!=typeof o?(h=i,i=o,o=null):h=arguments[2],v(o)?(l=e.call(o,"c"),r=e.call(o,"e"),y=e.call(o,"w")):(l=y=!0,r=!1),s={value:i,configurable:l,enumerable:r,writable:y},h?T(b(h),s):s}).gs=function(o,i,l){var r,y,h,s;return"string"!=typeof o?(h=l,l=i,i=o,o=null):h=arguments[3],v(i)?x(i)?v(l)?x(l)||(h=l,l=void 0):l=void 0:(h=i,i=l=void 0):i=void 0,v(o)?(r=e.call(o,"c"),y=e.call(o,"e")):(r=!0,y=!1),s={get:i,set:l,configurable:r,enumerable:y},h?T(b(h),s):s}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(_,oe,se){var x;x=function(v){"use strict";function x(R,L){return R<L?-1:R>L?1:R>=L?0:NaN}function T(R){var L;return 1===R.length&&(L=R,R=function(I,B){return x(L(I),B)}),{left:function(I,B,V,Z){for(null==V&&(V=0),null==Z&&(Z=I.length);V<Z;){var Y=V+Z>>>1;R(I[Y],B)<0?V=Y+1:Z=Y}return V},right:function(I,B,V,Z){for(null==V&&(V=0),null==Z&&(Z=I.length);V<Z;){var Y=V+Z>>>1;R(I[Y],B)>0?Z=Y:V=Y+1}return V}}}var b=T(x),e=b.right,o=b.left;function i(R,L){return[R,L]}function l(R){return null===R?NaN:+R}function r(R,L){var I,B,V=R.length,Z=0,Y=-1,Q=0,re=0;if(null==L)for(;++Y<V;)isNaN(I=l(R[Y]))||(re+=(B=I-Q)*(I-(Q+=B/++Z)));else for(;++Y<V;)isNaN(I=l(L(R[Y],Y,R)))||(re+=(B=I-Q)*(I-(Q+=B/++Z)));if(Z>1)return re/(Z-1)}function y(R,L){var I=r(R,L);return I&&Math.sqrt(I)}function h(R,L){var I,B,V,Z=R.length,Y=-1;if(null==L){for(;++Y<Z;)if(null!=(I=R[Y])&&I>=I)for(B=V=I;++Y<Z;)null!=(I=R[Y])&&(B>I&&(B=I),V<I&&(V=I))}else for(;++Y<Z;)if(null!=(I=L(R[Y],Y,R))&&I>=I)for(B=V=I;++Y<Z;)null!=(I=L(R[Y],Y,R))&&(B>I&&(B=I),V<I&&(V=I));return[B,V]}var s=Array.prototype,d=s.slice,p=s.map;function c(R){return function(){return R}}function g(R){return R}function m(R,L,I){R=+R,L=+L,I=(V=arguments.length)<2?(L=R,R=0,1):V<3?1:+I;for(var B=-1,V=0|Math.max(0,Math.ceil((L-R)/I)),Z=new Array(V);++B<V;)Z[B]=R+B*I;return Z}var u=Math.sqrt(50),w=Math.sqrt(10),f=Math.sqrt(2);function A(R,L,I){var B=(L-R)/Math.max(0,I),V=Math.floor(Math.log(B)/Math.LN10),Z=B/Math.pow(10,V);return V>=0?(Z>=u?10:Z>=w?5:Z>=f?2:1)*Math.pow(10,V):-Math.pow(10,-V)/(Z>=u?10:Z>=w?5:Z>=f?2:1)}function M(R,L,I){var B=Math.abs(L-R)/Math.max(0,I),V=Math.pow(10,Math.floor(Math.log(B)/Math.LN10)),Z=B/V;return Z>=u?V*=10:Z>=w?V*=5:Z>=f&&(V*=2),L<R?-V:V}function k(R){return Math.ceil(Math.log(R.length)/Math.LN2)+1}function E(R,L,I){if(null==I&&(I=l),B=R.length){if((L=+L)<=0||B<2)return+I(R[0],0,R);if(L>=1)return+I(R[B-1],B-1,R);var B,V=(B-1)*L,Z=Math.floor(V),Y=+I(R[Z],Z,R);return Y+(+I(R[Z+1],Z+1,R)-Y)*(V-Z)}}function P(R,L){var I,B,V=R.length,Z=-1;if(null==L){for(;++Z<V;)if(null!=(I=R[Z])&&I>=I)for(B=I;++Z<V;)null!=(I=R[Z])&&B>I&&(B=I)}else for(;++Z<V;)if(null!=(I=L(R[Z],Z,R))&&I>=I)for(B=I;++Z<V;)null!=(I=L(R[Z],Z,R))&&B>I&&(B=I);return B}function D(R){if(!(V=R.length))return[];for(var L=-1,I=P(R,F),B=new Array(I);++L<I;)for(var V,Z=-1,Y=B[L]=new Array(V);++Z<V;)Y[Z]=R[Z][L];return B}function F(R){return R.length}v.bisect=e,v.bisectRight=e,v.bisectLeft=o,v.ascending=x,v.bisector=T,v.cross=function(R,L,I){var B,V,Z,Y,Q=R.length,re=L.length,$=new Array(Q*re);for(null==I&&(I=i),B=Z=0;B<Q;++B)for(Y=R[B],V=0;V<re;++V,++Z)$[Z]=I(Y,L[V]);return $},v.descending=function(R,L){return L<R?-1:L>R?1:L>=R?0:NaN},v.deviation=y,v.extent=h,v.histogram=function(){var R=g,L=h,I=k;function B(V){var Z,Y,Q=V.length,re=new Array(Q);for(Z=0;Z<Q;++Z)re[Z]=R(V[Z],Z,V);var $=L(re),J=$[0],ie=$[1],j=I(re,J,ie);Array.isArray(j)||(j=M(J,ie,j),j=m(Math.ceil(J/j)*j,ie,j));for(var q=j.length;j[0]<=J;)j.shift(),--q;for(;j[q-1]>ie;)j.pop(),--q;var W,ae=new Array(q+1);for(Z=0;Z<=q;++Z)(W=ae[Z]=[]).x0=Z>0?j[Z-1]:J,W.x1=Z<q?j[Z]:ie;for(Z=0;Z<Q;++Z)J<=(Y=re[Z])&&Y<=ie&&ae[e(j,Y,0,q)].push(V[Z]);return ae}return B.value=function(V){return arguments.length?(R="function"==typeof V?V:c(V),B):R},B.domain=function(V){return arguments.length?(L="function"==typeof V?V:c([V[0],V[1]]),B):L},B.thresholds=function(V){return arguments.length?(I="function"==typeof V?V:Array.isArray(V)?c(d.call(V)):c(V),B):I},B},v.thresholdFreedmanDiaconis=function(R,L,I){return R=p.call(R,l).sort(x),Math.ceil((I-L)/(2*(E(R,.75)-E(R,.25))*Math.pow(R.length,-1/3)))},v.thresholdScott=function(R,L,I){return Math.ceil((I-L)/(3.5*y(R)*Math.pow(R.length,-1/3)))},v.thresholdSturges=k,v.max=function(R,L){var I,B,V=R.length,Z=-1;if(null==L){for(;++Z<V;)if(null!=(I=R[Z])&&I>=I)for(B=I;++Z<V;)null!=(I=R[Z])&&I>B&&(B=I)}else for(;++Z<V;)if(null!=(I=L(R[Z],Z,R))&&I>=I)for(B=I;++Z<V;)null!=(I=L(R[Z],Z,R))&&I>B&&(B=I);return B},v.mean=function(R,L){var I,B=R.length,V=B,Z=-1,Y=0;if(null==L)for(;++Z<B;)isNaN(I=l(R[Z]))?--V:Y+=I;else for(;++Z<B;)isNaN(I=l(L(R[Z],Z,R)))?--V:Y+=I;if(V)return Y/V},v.median=function(R,L){var I,B=R.length,V=-1,Z=[];if(null==L)for(;++V<B;)isNaN(I=l(R[V]))||Z.push(I);else for(;++V<B;)isNaN(I=l(L(R[V],V,R)))||Z.push(I);return E(Z.sort(x),.5)},v.merge=function(R){for(var L,I,B,V=R.length,Z=-1,Y=0;++Z<V;)Y+=R[Z].length;for(I=new Array(Y);--V>=0;)for(L=(B=R[V]).length;--L>=0;)I[--Y]=B[L];return I},v.min=P,v.pairs=function(R,L){null==L&&(L=i);for(var I=0,B=R.length-1,V=R[0],Z=new Array(B<0?0:B);I<B;)Z[I]=L(V,V=R[++I]);return Z},v.permute=function(R,L){for(var I=L.length,B=new Array(I);I--;)B[I]=R[L[I]];return B},v.quantile=E,v.range=m,v.scan=function(R,L){if(I=R.length){var I,B,V=0,Z=0,Y=R[Z];for(null==L&&(L=x);++V<I;)(L(B=R[V],Y)<0||0!==L(Y,Y))&&(Y=B,Z=V);return 0===L(Y,Y)?Z:void 0}},v.shuffle=function(R,L,I){for(var B,V,Z=(null==I?R.length:I)-(L=null==L?0:+L);Z;)V=Math.random()*Z--|0,B=R[Z+L],R[Z+L]=R[V+L],R[V+L]=B;return R},v.sum=function(R,L){var I,B=R.length,V=-1,Z=0;if(null==L)for(;++V<B;)(I=+R[V])&&(Z+=I);else for(;++V<B;)(I=+L(R[V],V,R))&&(Z+=I);return Z},v.ticks=function(R,L,I){var B,V,Z,Y,Q=-1;if(I=+I,(R=+R)==(L=+L)&&I>0)return[R];if((B=L<R)&&(V=R,R=L,L=V),0===(Y=A(R,L,I))||!isFinite(Y))return[];if(Y>0)for(R=Math.ceil(R/Y),L=Math.floor(L/Y),Z=new Array(V=Math.ceil(L-R+1));++Q<V;)Z[Q]=(R+Q)*Y;else for(R=Math.floor(R*Y),L=Math.ceil(L*Y),Z=new Array(V=Math.ceil(R-L+1));++Q<V;)Z[Q]=(R-Q)/Y;return B&&Z.reverse(),Z},v.tickIncrement=A,v.tickStep=M,v.transpose=D,v.variance=r,v.zip=function(){return D(arguments)},Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:this.d3=this.d3||{})},{}],108:[function(_,oe,se){var x;x=function(v){"use strict";function x(){}function T(h,s){var d=new x;if(h instanceof x)h.each(function(u,w){d.set(w,u)});else if(Array.isArray(h)){var p,c=-1,g=h.length;if(null==s)for(;++c<g;)d.set(c,h[c]);else for(;++c<g;)d.set(s(p=h[c],c,h),p)}else if(h)for(var m in h)d.set(m,h[m]);return d}function b(){return{}}function e(h,s,d){h[s]=d}function o(){return T()}function i(h,s,d){h.set(s,d)}function l(){}x.prototype=T.prototype={constructor:x,has:function(h){return"$"+h in this},get:function(h){return this["$"+h]},set:function(h,s){return this["$"+h]=s,this},remove:function(h){var s="$"+h;return s in this&&delete this[s]},clear:function(){for(var h in this)"$"===h[0]&&delete this[h]},keys:function(){var h=[];for(var s in this)"$"===s[0]&&h.push(s.slice(1));return h},values:function(){var h=[];for(var s in this)"$"===s[0]&&h.push(this[s]);return h},entries:function(){var h=[];for(var s in this)"$"===s[0]&&h.push({key:s.slice(1),value:this[s]});return h},size:function(){var h=0;for(var s in this)"$"===s[0]&&++h;return h},empty:function(){for(var h in this)if("$"===h[0])return!1;return!0},each:function(h){for(var s in this)"$"===s[0]&&h(this[s],s.slice(1),this)}};var r=T.prototype;function y(h,s){var d=new l;if(h instanceof l)h.each(function(g){d.add(g)});else if(h){var p=-1,c=h.length;if(null==s)for(;++p<c;)d.add(h[p]);else for(;++p<c;)d.add(s(h[p],p,h))}return d}l.prototype=y.prototype={constructor:l,has:r.has,add:function(h){return this["$"+(h+="")]=h,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each},v.nest=function(){var h,s,d,p=[],c=[];function g(m,u,w,f){if(u>=p.length)return null!=h&&m.sort(h),null!=s?s(m):m;for(var A,M,k,E=-1,P=m.length,D=p[u++],F=T(),R=w();++E<P;)(k=F.get(A=D(M=m[E])+""))?k.push(M):F.set(A,[M]);return F.each(function(L,I){f(R,I,g(L,u,w,f))}),R}return d={object:function(m){return g(m,0,b,e)},map:function(m){return g(m,0,o,i)},entries:function(m){return function u(w,f){if(++f>p.length)return w;var A,M=c[f-1];return null!=s&&f>=p.length?A=w.entries():(A=[],w.each(function(k,E){A.push({key:E,values:u(k,f)})})),null!=M?A.sort(function(k,E){return M(k.key,E.key)}):A}(g(m,0,o,i),0)},key:function(m){return p.push(m),d},sortKeys:function(m){return c[p.length-1]=m,d},sortValues:function(m){return h=m,d},rollup:function(m){return s=m,d}}},v.set=y,v.map=T,v.keys=function(h){var s=[];for(var d in h)s.push(d);return s},v.values=function(h){var s=[];for(var d in h)s.push(h[d]);return s},v.entries=function(h){var s=[];for(var d in h)s.push({key:d,value:h[d]});return s},Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:this.d3=this.d3||{})},{}],109:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";function x(ve,Te,Ie){ve.prototype=Te.prototype=Ie,Ie.constructor=ve}function T(ve,Te){var Ie=Object.create(ve.prototype);for(var Ce in Te)Ie[Ce]=Te[Ce];return Ie}function b(){}var e="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",i="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),y=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),h=new RegExp("^rgba\\("+[e,e,e,o]+"\\)$"),s=new RegExp("^rgba\\("+[i,i,i,o]+"\\)$"),d=new RegExp("^hsl\\("+[o,i,i]+"\\)$"),p=new RegExp("^hsla\\("+[o,i,i,o]+"\\)$"),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function u(ve){var Te,Ie;return ve=(ve+"").trim().toLowerCase(),(Te=l.exec(ve))?(Ie=Te[1].length,Te=parseInt(Te[1],16),6===Ie?w(Te):3===Ie?new k(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===Ie?f(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===Ie?f(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=r.exec(ve))?new k(Te[1],Te[2],Te[3],1):(Te=y.exec(ve))?new k(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=h.exec(ve))?f(Te[1],Te[2],Te[3],Te[4]):(Te=s.exec(ve))?f(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=d.exec(ve))?F(Te[1],Te[2]/100,Te[3]/100,1):(Te=p.exec(ve))?F(Te[1],Te[2]/100,Te[3]/100,Te[4]):c.hasOwnProperty(ve)?w(c[ve]):"transparent"===ve?new k(NaN,NaN,NaN,0):null}function w(ve){return new k(ve>>16&255,ve>>8&255,255&ve,1)}function f(ve,Te,Ie,Ce){return Ce<=0&&(ve=Te=Ie=NaN),new k(ve,Te,Ie,Ce)}function A(ve){return ve instanceof b||(ve=u(ve)),ve?new k((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new k}function M(ve,Te,Ie,Ce){return 1===arguments.length?A(ve):new k(ve,Te,Ie,null==Ce?1:Ce)}function k(ve,Te,Ie,Ce){this.r=+ve,this.g=+Te,this.b=+Ie,this.opacity=+Ce}function E(){return"#"+D(this.r)+D(this.g)+D(this.b)}function P(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ve?")":", "+ve+")")}function D(ve){return((ve=Math.max(0,Math.min(255,Math.round(ve)||0)))<16?"0":"")+ve.toString(16)}function F(ve,Te,Ie,Ce){return Ce<=0?ve=Te=Ie=NaN:Ie<=0||Ie>=1?ve=Te=NaN:Te<=0&&(ve=NaN),new I(ve,Te,Ie,Ce)}function R(ve){if(ve instanceof I)return new I(ve.h,ve.s,ve.l,ve.opacity);if(ve instanceof b||(ve=u(ve)),!ve)return new I;if(ve instanceof I)return ve;var Te=(ve=ve.rgb()).r/255,Ie=ve.g/255,Ce=ve.b/255,Re=Math.min(Te,Ie,Ce),Ue=Math.max(Te,Ie,Ce),qe=NaN,Xe=Ue-Re,st=(Ue+Re)/2;return Xe?(qe=Te===Ue?(Ie-Ce)/Xe+6*(Ie<Ce):Ie===Ue?(Ce-Te)/Xe+2:(Te-Ie)/Xe+4,Xe/=st<.5?Ue+Re:2-Ue-Re,qe*=60):Xe=st>0&&st<1?0:qe,new I(qe,Xe,st,ve.opacity)}function L(ve,Te,Ie,Ce){return 1===arguments.length?R(ve):new I(ve,Te,Ie,null==Ce?1:Ce)}function I(ve,Te,Ie,Ce){this.h=+ve,this.s=+Te,this.l=+Ie,this.opacity=+Ce}function B(ve,Te,Ie){return 255*(ve<60?Te+(Ie-Te)*ve/60:ve<180?Ie:ve<240?Te+(Ie-Te)*(240-ve)/60:Te)}x(b,u,{copy:function(ve){return Object.assign(new this.constructor,this,ve)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return R(this).formatHsl()},formatRgb:m,toString:m}),x(k,M,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new k(this.r*ve,this.g*ve,this.b*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new k(this.r*ve,this.g*ve,this.b*ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:P,toString:P})),x(I,L,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new I(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new I(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=this.h%360+360*(this.h<0),Te=isNaN(ve)||isNaN(this.s)?0:this.s,Ie=this.l,Ce=Ie+(Ie<.5?Ie:1-Ie)*Te,Re=2*Ie-Ce;return new k(B(ve>=240?ve-240:ve+120,Re,Ce),B(ve,Re,Ce),B(ve<120?ve+240:ve-120,Re,Ce),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ve?")":", "+ve+")")}}));var V=Math.PI/180,Z=180/Math.PI,Y=6/29,Q=3*Y*Y;function re(ve){if(ve instanceof J)return new J(ve.l,ve.a,ve.b,ve.opacity);if(ve instanceof ee)return te(ve);ve instanceof k||(ve=A(ve));var Te,Ie,Ce=W(ve.r),Re=W(ve.g),Ue=W(ve.b),qe=ie((.2225045*Ce+.7168786*Re+.0606169*Ue)/1);return Ce===Re&&Re===Ue?Te=Ie=qe:(Te=ie((.4360747*Ce+.3850649*Re+.1430804*Ue)/.96422),Ie=ie((.0139322*Ce+.0971045*Re+.7141733*Ue)/.82521)),new J(116*qe-16,500*(Te-qe),200*(qe-Ie),ve.opacity)}function $(ve,Te,Ie,Ce){return 1===arguments.length?re(ve):new J(ve,Te,Ie,null==Ce?1:Ce)}function J(ve,Te,Ie,Ce){this.l=+ve,this.a=+Te,this.b=+Ie,this.opacity=+Ce}function ie(ve){return ve>.008856451679035631?Math.pow(ve,1/3):ve/Q+4/29}function j(ve){return ve>Y?ve*ve*ve:Q*(ve-4/29)}function q(ve){return 255*(ve<=.0031308?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055)}function W(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function ae(ve){if(ve instanceof ee)return new ee(ve.h,ve.c,ve.l,ve.opacity);if(ve instanceof J||(ve=re(ve)),0===ve.a&&0===ve.b)return new ee(NaN,0<ve.l&&ve.l<100?0:NaN,ve.l,ve.opacity);var Te=Math.atan2(ve.b,ve.a)*Z;return new ee(Te<0?Te+360:Te,Math.sqrt(ve.a*ve.a+ve.b*ve.b),ve.l,ve.opacity)}function G(ve,Te,Ie,Ce){return 1===arguments.length?ae(ve):new ee(ve,Te,Ie,null==Ce?1:Ce)}function ee(ve,Te,Ie,Ce){this.h=+ve,this.c=+Te,this.l=+Ie,this.opacity=+Ce}function te(ve){if(isNaN(ve.h))return new J(ve.l,0,0,ve.opacity);var Te=ve.h*V;return new J(ve.l,Math.cos(Te)*ve.c,Math.sin(Te)*ve.c,ve.opacity)}x(J,$,T(b,{brighter:function(ve){return new J(this.l+18*(null==ve?1:ve),this.a,this.b,this.opacity)},darker:function(ve){return new J(this.l-18*(null==ve?1:ve),this.a,this.b,this.opacity)},rgb:function(){var ve=(this.l+16)/116,Te=isNaN(this.a)?ve:ve+this.a/500,Ie=isNaN(this.b)?ve:ve-this.b/200;return new k(q(3.1338561*(Te=.96422*j(Te))-1.6168667*(ve=1*j(ve))-.4906146*(Ie=.82521*j(Ie))),q(-.9787684*Te+1.9161415*ve+.033454*Ie),q(.0719453*Te-.2289914*ve+1.4052427*Ie),this.opacity)}})),x(ee,G,T(b,{brighter:function(ve){return new ee(this.h,this.c,this.l+18*(null==ve?1:ve),this.opacity)},darker:function(ve){return new ee(this.h,this.c,this.l-18*(null==ve?1:ve),this.opacity)},rgb:function(){return te(this).rgb()}}));var ue=1.78277,de=-.29227,he=-.90649,be=1.97294,me=be*he,_e=be*ue,Ee=ue*de- -.14861*he;function De(ve){if(ve instanceof Fe)return new Fe(ve.h,ve.s,ve.l,ve.opacity);ve instanceof k||(ve=A(ve));var Ie=ve.g/255,Ce=ve.b/255,Re=(Ee*Ce+me*(ve.r/255)-_e*Ie)/(Ee+me-_e),Ue=Ce-Re,qe=(be*(Ie-Re)-de*Ue)/he,Xe=Math.sqrt(qe*qe+Ue*Ue)/(be*Re*(1-Re)),st=Xe?Math.atan2(qe,Ue)*Z-120:NaN;return new Fe(st<0?st+360:st,Xe,Re,ve.opacity)}function Se(ve,Te,Ie,Ce){return 1===arguments.length?De(ve):new Fe(ve,Te,Ie,null==Ce?1:Ce)}function Fe(ve,Te,Ie,Ce){this.h=+ve,this.s=+Te,this.l=+Ie,this.opacity=+Ce}x(Fe,Se,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new Fe(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new Fe(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=isNaN(this.h)?0:(this.h+120)*V,Te=+this.l,Ie=isNaN(this.s)?0:this.s*Te*(1-Te),Ce=Math.cos(ve),Re=Math.sin(ve);return new k(255*(Te+Ie*(-.14861*Ce+ue*Re)),255*(Te+Ie*(de*Ce+he*Re)),255*(Te+Ie*(be*Ce)),this.opacity)}})),v.color=u,v.cubehelix=Se,v.gray=function(ve,Te){return new J(ve,0,0,null==Te?1:Te)},v.hcl=G,v.hsl=L,v.lab=$,v.lch=function(ve,Te,Ie,Ce){return 1===arguments.length?ae(ve):new ee(Ie,Te,ve,null==Ce?1:Ce)},v.rgb=M,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],110:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";var x={value:function(){}};function T(){for(var l,r=0,y=arguments.length,h={};r<y;++r){if(!(l=arguments[r]+"")||l in h||/[\s.]/.test(l))throw new Error("illegal type: "+l);h[l]=[]}return new b(h)}function b(l){this._=l}function e(l,r){return l.trim().split(/^|\s+/).map(function(y){var h="",s=y.indexOf(".");if(s>=0&&(h=y.slice(s+1),y=y.slice(0,s)),y&&!r.hasOwnProperty(y))throw new Error("unknown type: "+y);return{type:y,name:h}})}function o(l,r){for(var y,h=0,s=l.length;h<s;++h)if((y=l[h]).name===r)return y.value}function i(l,r,y){for(var h=0,s=l.length;h<s;++h)if(l[h].name===r){l[h]=x,l=l.slice(0,h).concat(l.slice(h+1));break}return null!=y&&l.push({name:r,value:y}),l}b.prototype=T.prototype={constructor:b,on:function(l,r){var y,h=this._,s=e(l+"",h),d=-1,p=s.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++d<p;)if(y=(l=s[d]).type)h[y]=i(h[y],l.name,r);else if(null==r)for(y in h)h[y]=i(h[y],l.name,null);return this}for(;++d<p;)if((y=(l=s[d]).type)&&(y=o(h[y],l.name)))return y},copy:function(){var l={},r=this._;for(var y in r)l[y]=r[y].slice();return new b(l)},call:function(l,r){if((y=arguments.length-2)>0)for(var y,h,s=new Array(y),d=0;d<y;++d)s[d]=arguments[d+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(d=0,y=(h=this._[l]).length;d<y;++d)h[d].value.apply(r,s)},apply:function(l,r,y){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var h=this._[l],s=0,d=h.length;s<d;++s)h[s].value.apply(r,y)}},v.dispatch=T,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],111:[function(_,oe,se){var v,x;v=this,x=function(v,x,T,b,e){"use strict";function o(c){return function(){return c}}function i(){return 1e-6*(Math.random()-.5)}function l(c){return c.x+c.vx}function r(c){return c.y+c.vy}function y(c){return c.index}function h(c,g){var m=c.get(g);if(!m)throw new Error("missing: "+g);return m}function s(c){return c.x}function d(c){return c.y}var p=Math.PI*(3-Math.sqrt(5));v.forceCenter=function(c,g){var m;function u(){var w,f,A=m.length,M=0,k=0;for(w=0;w<A;++w)M+=(f=m[w]).x,k+=f.y;for(M=M/A-c,k=k/A-g,w=0;w<A;++w)(f=m[w]).x-=M,f.y-=k}return null==c&&(c=0),null==g&&(g=0),u.initialize=function(w){m=w},u.x=function(w){return arguments.length?(c=+w,u):c},u.y=function(w){return arguments.length?(g=+w,u):g},u},v.forceCollide=function(c){var g,m,u=1,w=1;function f(){for(var k,E,P,D,F,R,L,I=g.length,B=0;B<w;++B)for(E=x.quadtree(g,l,r).visitAfter(A),k=0;k<I;++k)L=(R=m[(P=g[k]).index])*R,D=P.x+P.vx,F=P.y+P.vy,E.visit(V);function V(Z,Y,Q,re,$){var J=Z.data,ie=Z.r,j=R+ie;if(!J)return Y>D+j||re<D-j||Q>F+j||$<F-j;if(J.index>P.index){var q=D-J.x-J.vx,W=F-J.y-J.vy,ae=q*q+W*W;ae<j*j&&(0===q&&(ae+=(q=i())*q),0===W&&(ae+=(W=i())*W),ae=(j-(ae=Math.sqrt(ae)))/ae*u,P.vx+=(q*=ae)*(j=(ie*=ie)/(L+ie)),P.vy+=(W*=ae)*j,J.vx-=q*(j=1-j),J.vy-=W*j)}}}function A(k){if(k.data)return k.r=m[k.data.index];for(var E=k.r=0;E<4;++E)k[E]&&k[E].r>k.r&&(k.r=k[E].r)}function M(){if(g){var k,E,P=g.length;for(m=new Array(P),k=0;k<P;++k)m[(E=g[k]).index]=+c(E,k,g)}}return"function"!=typeof c&&(c=o(null==c?1:+c)),f.initialize=function(k){g=k,M()},f.iterations=function(k){return arguments.length?(w=+k,f):w},f.strength=function(k){return arguments.length?(u=+k,f):u},f.radius=function(k){return arguments.length?(c="function"==typeof k?k:o(+k),M(),f):c},f},v.forceLink=function(c){var g,m,u,w,f,A=y,M=function(L){return 1/Math.min(w[L.source.index],w[L.target.index])},k=o(30),E=1;function P(L){for(var I=0,B=c.length;I<E;++I)for(var V,Z,Y,Q,re,$,J,ie=0;ie<B;++ie)Z=(V=c[ie]).source,Q=(Y=V.target).x+Y.vx-Z.x-Z.vx||i(),re=Y.y+Y.vy-Z.y-Z.vy||i(),Q*=$=(($=Math.sqrt(Q*Q+re*re))-m[ie])/$*L*g[ie],re*=$,Y.vx-=Q*(J=f[ie]),Y.vy-=re*J,Z.vx+=Q*(J=1-J),Z.vy+=re*J}function D(){if(u){var L,I,B=u.length,V=c.length,Z=T.map(u,A);for(L=0,w=new Array(B);L<V;++L)(I=c[L]).index=L,"object"!=typeof I.source&&(I.source=h(Z,I.source)),"object"!=typeof I.target&&(I.target=h(Z,I.target)),w[I.source.index]=(w[I.source.index]||0)+1,w[I.target.index]=(w[I.target.index]||0)+1;for(L=0,f=new Array(V);L<V;++L)f[L]=w[(I=c[L]).source.index]/(w[I.source.index]+w[I.target.index]);g=new Array(V),F(),m=new Array(V),R()}}function F(){if(u)for(var L=0,I=c.length;L<I;++L)g[L]=+M(c[L],L,c)}function R(){if(u)for(var L=0,I=c.length;L<I;++L)m[L]=+k(c[L],L,c)}return null==c&&(c=[]),P.initialize=function(L){u=L,D()},P.links=function(L){return arguments.length?(c=L,D(),P):c},P.id=function(L){return arguments.length?(A=L,P):A},P.iterations=function(L){return arguments.length?(E=+L,P):E},P.strength=function(L){return arguments.length?(M="function"==typeof L?L:o(+L),F(),P):M},P.distance=function(L){return arguments.length?(k="function"==typeof L?L:o(+L),R(),P):k},P},v.forceManyBody=function(){var c,g,m,u,w=o(-30),f=1,A=1/0,M=.81;function k(F){var R,L=c.length,I=x.quadtree(c,s,d).visitAfter(P);for(m=F,R=0;R<L;++R)g=c[R],I.visit(D)}function E(){if(c){var F,R,L=c.length;for(u=new Array(L),F=0;F<L;++F)u[(R=c[F]).index]=+w(R,F,c)}}function P(F){var R,L,I,B,V,Z=0,Y=0;if(F.length){for(I=B=V=0;V<4;++V)(R=F[V])&&(L=Math.abs(R.value))&&(Z+=R.value,Y+=L,I+=L*R.x,B+=L*R.y);F.x=I/Y,F.y=B/Y}else{(R=F).x=R.data.x,R.y=R.data.y;do{Z+=u[R.data.index]}while(R=R.next)}F.value=Z}function D(F,R,L,I){if(!F.value)return!0;var B=F.x-g.x,V=F.y-g.y,Z=I-R,Y=B*B+V*V;if(Z*Z/M<Y)return Y<A&&(0===B&&(Y+=(B=i())*B),0===V&&(Y+=(V=i())*V),Y<f&&(Y=Math.sqrt(f*Y)),g.vx+=B*F.value*m/Y,g.vy+=V*F.value*m/Y),!0;if(!(F.length||Y>=A)){(F.data!==g||F.next)&&(0===B&&(Y+=(B=i())*B),0===V&&(Y+=(V=i())*V),Y<f&&(Y=Math.sqrt(f*Y)));do{F.data!==g&&(g.vx+=B*(Z=u[F.data.index]*m/Y),g.vy+=V*Z)}while(F=F.next)}}return k.initialize=function(F){c=F,E()},k.strength=function(F){return arguments.length?(w="function"==typeof F?F:o(+F),E(),k):w},k.distanceMin=function(F){return arguments.length?(f=F*F,k):Math.sqrt(f)},k.distanceMax=function(F){return arguments.length?(A=F*F,k):Math.sqrt(A)},k.theta=function(F){return arguments.length?(M=F*F,k):Math.sqrt(M)},k},v.forceRadial=function(c,g,m){var u,w,f,A=o(.1);function M(E){for(var P=0,D=u.length;P<D;++P){var F=u[P],R=F.x-g||1e-6,L=F.y-m||1e-6,I=Math.sqrt(R*R+L*L),B=(f[P]-I)*w[P]*E/I;F.vx+=R*B,F.vy+=L*B}}function k(){if(u){var E,P=u.length;for(w=new Array(P),f=new Array(P),E=0;E<P;++E)f[E]=+c(u[E],E,u),w[E]=isNaN(f[E])?0:+A(u[E],E,u)}}return"function"!=typeof c&&(c=o(+c)),null==g&&(g=0),null==m&&(m=0),M.initialize=function(E){u=E,k()},M.strength=function(E){return arguments.length?(A="function"==typeof E?E:o(+E),k(),M):A},M.radius=function(E){return arguments.length?(c="function"==typeof E?E:o(+E),k(),M):c},M.x=function(E){return arguments.length?(g=+E,M):g},M.y=function(E){return arguments.length?(m=+E,M):m},M},v.forceSimulation=function(c){var g,m=1,u=.001,w=1-Math.pow(u,1/300),f=0,A=.6,M=T.map(),k=e.timer(P),E=b.dispatch("tick","end");function P(){D(),E.call("tick",g),m<u&&(k.stop(),E.call("end",g))}function D(L){var I,B,V=c.length;void 0===L&&(L=1);for(var Z=0;Z<L;++Z)for(m+=(f-m)*w,M.each(function(Y){Y(m)}),I=0;I<V;++I)null==(B=c[I]).fx?B.x+=B.vx*=A:(B.x=B.fx,B.vx=0),null==B.fy?B.y+=B.vy*=A:(B.y=B.fy,B.vy=0);return g}function F(){for(var L,I=0,B=c.length;I<B;++I){if((L=c[I]).index=I,null!=L.fx&&(L.x=L.fx),null!=L.fy&&(L.y=L.fy),isNaN(L.x)||isNaN(L.y)){var V=10*Math.sqrt(I),Z=I*p;L.x=V*Math.cos(Z),L.y=V*Math.sin(Z)}(isNaN(L.vx)||isNaN(L.vy))&&(L.vx=L.vy=0)}}function R(L){return L.initialize&&L.initialize(c),L}return null==c&&(c=[]),F(),g={tick:D,restart:function(){return k.restart(P),g},stop:function(){return k.stop(),g},nodes:function(L){return arguments.length?(c=L,F(),M.each(R),g):c},alpha:function(L){return arguments.length?(m=+L,g):m},alphaMin:function(L){return arguments.length?(u=+L,g):u},alphaDecay:function(L){return arguments.length?(w=+L,g):+w},alphaTarget:function(L){return arguments.length?(f=+L,g):f},velocityDecay:function(L){return arguments.length?(A=1-L,g):1-A},force:function(L,I){return arguments.length>1?(null==I?M.remove(L):M.set(L,R(I)),g):M.get(L)},find:function(L,I,B){var V,Z,Y,Q,re,$=0,J=c.length;for(null==B?B=1/0:B*=B,$=0;$<J;++$)(Y=(V=L-(Q=c[$]).x)*V+(Z=I-Q.y)*Z)<B&&(re=Q,B=Y);return re},on:function(L,I){return arguments.length>1?(E.on(L,I),g):E.on(L)}}},v.forceX=function(c){var g,m,u,w=o(.1);function f(M){for(var k,E=0,P=g.length;E<P;++E)(k=g[E]).vx+=(u[E]-k.x)*m[E]*M}function A(){if(g){var M,k=g.length;for(m=new Array(k),u=new Array(k),M=0;M<k;++M)m[M]=isNaN(u[M]=+c(g[M],M,g))?0:+w(g[M],M,g)}}return"function"!=typeof c&&(c=o(null==c?0:+c)),f.initialize=function(M){g=M,A()},f.strength=function(M){return arguments.length?(w="function"==typeof M?M:o(+M),A(),f):w},f.x=function(M){return arguments.length?(c="function"==typeof M?M:o(+M),A(),f):c},f},v.forceY=function(c){var g,m,u,w=o(.1);function f(M){for(var k,E=0,P=g.length;E<P;++E)(k=g[E]).vy+=(u[E]-k.y)*m[E]*M}function A(){if(g){var M,k=g.length;for(m=new Array(k),u=new Array(k),M=0;M<k;++M)m[M]=isNaN(u[M]=+c(g[M],M,g))?0:+w(g[M],M,g)}}return"function"!=typeof c&&(c=o(null==c?0:+c)),f.initialize=function(M){g=M,A()},f.strength=function(M){return arguments.length?(w="function"==typeof M?M:o(+M),A(),f):w},f.y=function(M){return arguments.length?(c="function"==typeof M?M:o(+M),A(),f):c},f},Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-quadtree"),_("d3-collection"),_("d3-dispatch"),_("d3-timer")):x(v.d3=v.d3||{},v.d3,v.d3,v.d3,v.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";function x(g,m){if((u=(g=m?g.toExponential(m-1):g.toExponential()).indexOf("e"))<0)return null;var u,w=g.slice(0,u);return[w.length>1?w[0]+w.slice(2):w,+g.slice(u+1)]}function T(g){return(g=x(Math.abs(g)))?g[1]:NaN}var b,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(g){if(!(m=e.exec(g)))throw new Error("invalid format: "+g);var m;return new i({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function i(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}function l(g,m){var u=x(g,m);if(!u)return g+"";var w=u[0],f=u[1];return f<0?"0."+new Array(-f).join("0")+w:w.length>f+1?w.slice(0,f+1)+"."+w.slice(f+1):w+new Array(f-w.length+2).join("0")}o.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var r={"%":function(g,m){return(100*g).toFixed(m)},b:function(g){return Math.round(g).toString(2)},c:function(g){return g+""},d:function(g){return Math.abs(g=Math.round(g))>=1e21?g.toLocaleString("en").replace(/,/g,""):g.toString(10)},e:function(g,m){return g.toExponential(m)},f:function(g,m){return g.toFixed(m)},g:function(g,m){return g.toPrecision(m)},o:function(g){return Math.round(g).toString(8)},p:function(g,m){return l(100*g,m)},r:l,s:function(g,m){var u=x(g,m);if(!u)return g+"";var w=u[0],f=u[1],A=f-(b=3*Math.max(-8,Math.min(8,Math.floor(f/3))))+1,M=w.length;return A===M?w:A>M?w+new Array(A-M+1).join("0"):A>0?w.slice(0,A)+"."+w.slice(A):"0."+new Array(1-A).join("0")+x(g,Math.max(0,m+A-1))[0]},X:function(g){return Math.round(g).toString(16).toUpperCase()},x:function(g){return Math.round(g).toString(16)}};function y(g){return g}var h,s=Array.prototype.map,d=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function p(g){var m,u,R,w=void 0===g.grouping||void 0===g.thousands?y:(m=s.call(g.grouping,Number),u=g.thousands+"",function(R,L){for(var I=R.length,B=[],V=0,Z=m[0],Y=0;I>0&&Z>0&&(Y+Z+1>L&&(Z=Math.max(1,L-Y)),B.push(R.substring(I-=Z,I+Z)),!((Y+=Z+1)>L));)Z=m[V=(V+1)%m.length];return B.reverse().join(u)}),f=void 0===g.currency?"":g.currency[0]+"",A=void 0===g.currency?"":g.currency[1]+"",M=void 0===g.decimal?".":g.decimal+"",k=void 0===g.numerals?y:(R=s.call(g.numerals,String),function(L){return L.replace(/[0-9]/g,function(I){return R[+I]})}),E=void 0===g.percent?"%":g.percent+"",P=void 0===g.minus?"-":g.minus+"",D=void 0===g.nan?"NaN":g.nan+"";function F(R){var L=(R=o(R)).fill,I=R.align,B=R.sign,V=R.symbol,Z=R.zero,Y=R.width,Q=R.comma,re=R.precision,$=R.trim,J=R.type;"n"===J?(Q=!0,J="g"):r[J]||(void 0===re&&(re=12),$=!0,J="g"),(Z||"0"===L&&"="===I)&&(Z=!0,L="0",I="=");var ie="$"===V?f:"#"===V&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",j="$"===V?A:/[%p]/.test(J)?E:"",q=r[J],W=/[defgprs%]/.test(J);function ae(G){var ee,te,le,ue=ie,de=j;if("c"===J)de=q(G)+de,G="";else{var he=(G=+G)<0||1/G<0;if(G=isNaN(G)?D:q(Math.abs(G),re),$&&(G=function(_e){e:for(var Ee,De=_e.length,Se=1,Fe=-1;Se<De;++Se)switch(_e[Se]){case".":Fe=Ee=Se;break;case"0":0===Fe&&(Fe=Se),Ee=Se;break;default:if(!+_e[Se])break e;Fe>0&&(Fe=0)}return Fe>0?_e.slice(0,Fe)+_e.slice(Ee+1):_e}(G)),he&&0==+G&&"+"!==B&&(he=!1),ue=(he?"("===B?B:P:"-"===B||"("===B?"":B)+ue,de=("s"===J?d[8+b/3]:"")+de+(he&&"("===B?")":""),W)for(ee=-1,te=G.length;++ee<te;)if(48>(le=G.charCodeAt(ee))||le>57){de=(46===le?M+G.slice(ee+1):G.slice(ee))+de,G=G.slice(0,ee);break}}Q&&!Z&&(G=w(G,1/0));var be=ue.length+G.length+de.length,me=be<Y?new Array(Y-be+1).join(L):"";switch(Q&&Z&&(G=w(me+G,me.length?Y-de.length:1/0),me=""),I){case"<":G=ue+G+de+me;break;case"=":G=ue+me+G+de;break;case"^":G=me.slice(0,be=me.length>>1)+ue+G+de+me.slice(be);break;default:G=me+ue+G+de}return k(G)}return re=void 0===re?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,re)):Math.max(0,Math.min(20,re)),ae.toString=function(){return R+""},ae}return{format:F,formatPrefix:function(R,L){var I=F(((R=o(R)).type="f",R)),B=3*Math.max(-8,Math.min(8,Math.floor(T(L)/3))),V=Math.pow(10,-B),Z=d[8+B/3];return function(Y){return I(V*Y)+Z}}}}function c(g){return h=p(g),v.format=h.format,v.formatPrefix=h.formatPrefix,h}c({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),v.FormatSpecifier=i,v.formatDefaultLocale=c,v.formatLocale=p,v.formatSpecifier=o,v.precisionFixed=function(g){return Math.max(0,-T(Math.abs(g)))},v.precisionPrefix=function(g,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(T(m)/3)))-T(Math.abs(g)))},v.precisionRound=function(g,m){return g=Math.abs(g),m=Math.abs(m)-g,Math.max(0,T(m)-T(g))+1},Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v="undefined"!=typeof globalThis?globalThis:v||self).d3=v.d3||{})},{}],113:[function(_,oe,se){var v,x;v=this,x=function(v,x,T){"use strict";var b=Math.abs,e=Math.atan,o=Math.atan2,i=Math.cos,l=Math.exp,r=Math.floor,y=Math.log,h=Math.max,s=Math.min,d=Math.pow,p=Math.round,c=Math.sign||function(Ye){return Ye>0?1:Ye<0?-1:0},g=Math.sin,m=Math.tan,u=1e-6,w=Math.PI,f=w/2,A=w/4,M=Math.SQRT1_2,k=I(2),E=I(w),P=2*w,D=180/w,F=w/180;function R(Ye){return Ye>1?f:Ye<-1?-f:Math.asin(Ye)}function L(Ye){return Ye>1?0:Ye<-1?w:Math.acos(Ye)}function I(Ye){return Ye>0?Math.sqrt(Ye):0}function B(Ye){return(l(Ye)-l(-Ye))/2}function V(Ye){return(l(Ye)+l(-Ye))/2}function Z(Ye){var Je=m(Ye/2),lt=2*y(i(Ye/2))/(Je*Je);function vt(Mt,wt){var Bt=i(Mt),cn=i(wt),fn=g(wt),on=cn*Bt,vn=-((1-on?y((1+on)/2)/(1-on):-.5)+lt/(1+on));return[vn*cn*g(Mt),vn*fn]}return vt.invert=function(Mt,wt){var Bt,cn=I(Mt*Mt+wt*wt),fn=-Ye/2,on=50;if(!cn)return[0,0];do{var vn=fn/2,Mn=i(vn),Ln=g(vn),Pn=Ln/Mn,qn=-y(b(Mn));fn-=Bt=(2/Pn*qn-lt*Pn-cn)/(-qn/(Ln*Ln)+1-lt/(2*Mn*Mn))*(Mn<0?.7:1)}while(b(Bt)>u&&--on>0);var kr=g(fn);return[o(Mt*kr,cn*i(fn)),R(wt*kr/cn)]},vt}function Y(Ye,Je){var Mt,lt=i(Je),vt=(Mt=L(lt*i(Ye/=2)))?Mt/Math.sin(Mt):1;return[2*lt*g(Ye)*vt,g(Je)*vt]}function Q(Ye){var Je=g(Ye),lt=i(Ye),vt=Ye>=0?1:-1,Mt=m(vt*Ye),wt=(1+Je-lt)/2;function Bt(cn,fn){var on=i(fn),vn=i(cn/=2);return[(1+on)*g(cn),(vt*fn>-o(vn,Mt)-.001?0:10*-vt)+wt+g(fn)*lt-(1+on)*Je*vn]}return Bt.invert=function(cn,fn){var on=0,vn=0,Mn=50;do{var Ln=i(on),Pn=g(on),qn=i(vn),kr=g(vn),Fr=1+qn,Xr=Fr*Pn-cn,ai=wt+kr*lt-Fr*Je*Ln-fn,ni=Fr*Ln/2,ri=-Pn*kr,Hi=Je*Fr*Pn/2,ra=lt*qn+Je*Ln*kr,La=ri*Hi-ra*ni,Sa=(ai*ri-Xr*ra)/La/2,Oa=(Xr*Hi-ai*ni)/La;b(Oa)>2&&(Oa/=2),on-=Sa,vn-=Oa}while((b(Sa)>u||b(Oa)>u)&&--Mn>0);return vt*vn>-o(i(on),Mt)-.001?[2*on,vn]:null},Bt}function re(Ye,Je){var lt=m(Je/2),vt=I(1-lt*lt),Mt=1+vt*i(Ye/=2),wt=g(Ye)*vt/Mt,Bt=lt/Mt,cn=wt*wt,fn=Bt*Bt;return[4/3*wt*(3+cn-3*fn),4/3*Bt*(3+3*cn-fn)]}Y.invert=function(Ye,Je){if(!(Ye*Ye+4*Je*Je>w*w+u)){var lt=Ye,vt=Je,Mt=25;do{var wt,Bt=g(lt),cn=g(lt/2),fn=i(lt/2),on=g(vt),vn=i(vt),Mn=g(2*vt),Ln=on*on,Pn=vn*vn,qn=cn*cn,kr=1-Pn*fn*fn,Fr=kr?L(vn*fn)*I(wt=1/kr):wt=0,Xr=2*Fr*vn*cn-Ye,ai=Fr*on-Je,ni=wt*(Pn*qn+Fr*vn*fn*Ln),ri=wt*(.5*Bt*Mn-2*Fr*on*cn),Hi=.25*wt*(Mn*cn-Fr*on*Pn*Bt),ra=wt*(Ln*fn+Fr*qn*vn),La=ri*Hi-ra*ni;if(!La)break;var Sa=(ai*ri-Xr*ra)/La,Oa=(Xr*Hi-ai*ni)/La;lt-=Sa,vt-=Oa}while((b(Sa)>u||b(Oa)>u)&&--Mt>0);return[lt,vt]}},re.invert=function(Ye,Je){if(Je*=3/8,!(Ye*=3/8)&&b(Je)>1)return null;var on,lt=1+Ye*Ye+Je*Je,vt=I((lt-I(lt*lt-4*Je*Je))/2),Mt=R(vt)/3,wt=vt?(on=b(Je/vt),y(on+I(on*on-1))/3):function(on){return y(on+I(on*on+1))}(b(Ye))/3,Bt=i(Mt),cn=V(wt),fn=cn*cn-Bt*Bt;return[2*c(Ye)*o(B(wt)*Bt,.25-fn),2*c(Je)*o(cn*g(Mt),.25+fn)]};var $=I(8),J=y(1+k);function ie(Ye,Je){var lt=b(Je);return lt<A?[Ye,y(m(A+Je/2))]:[Ye*i(lt)*(2*k-1/g(lt)),c(Je)*(2*k*(lt-A)-y(m(lt/2)))]}function j(Ye){var Je=2*w/Ye;function lt(vt,Mt){var wt=x.geoAzimuthalEquidistantRaw(vt,Mt);if(b(vt)>f){var Bt=o(wt[1],wt[0]),cn=I(wt[0]*wt[0]+wt[1]*wt[1]),fn=Je*p((Bt-f)/Je)+f,on=o(g(Bt-=fn),2-i(Bt));Bt=fn+R(w/cn*g(on))-on,wt[0]=cn*i(Bt),wt[1]=cn*g(Bt)}return wt}return lt.invert=function(vt,Mt){var wt=I(vt*vt+Mt*Mt);if(wt>f){var Bt=o(Mt,vt),cn=Je*p((Bt-f)/Je)+f,fn=Bt>cn?-1:1,on=wt*i(cn-Bt),vn=1/m(fn*L((on-w)/I(w*(w-2*on)+wt*wt)));Bt=cn+2*e((vn+fn*I(vn*vn-3))/3),vt=wt*i(Bt),Mt=wt*g(Bt)}return x.geoAzimuthalEquidistantRaw.invert(vt,Mt)},lt}function q(Ye,Je){if(arguments.length<2&&(Je=Ye),1===Je)return x.geoAzimuthalEqualAreaRaw;if(Je===1/0)return W;function lt(vt,Mt){var wt=x.geoAzimuthalEqualAreaRaw(vt/Je,Mt);return wt[0]*=Ye,wt}return lt.invert=function(vt,Mt){var wt=x.geoAzimuthalEqualAreaRaw.invert(vt/Ye,Mt);return wt[0]*=Je,wt},lt}function W(Ye,Je){return[Ye*i(Je)/i(Je/=2),2*g(Je)]}function ae(Ye,Je,lt){var vt,Mt,wt,Bt=100;lt=void 0===lt?0:+lt,Je=+Je;do{(Mt=Ye(lt))===(wt=Ye(lt+u))&&(wt=Mt+u),lt-=vt=-1*u*(Mt-Je)/(Mt-wt)}while(Bt-- >0&&b(vt)>u);return Bt<0?NaN:lt}function G(Ye,Je,lt){return void 0===Je&&(Je=40),void 0===lt&&(lt=1e-12),function(vt,Mt,wt,Bt){var cn,fn,on;wt=void 0===wt?0:+wt,Bt=void 0===Bt?0:+Bt;for(var vn=0;vn<Je;vn++){var Mn=Ye(wt,Bt),Ln=Mn[0]-vt,Pn=Mn[1]-Mt;if(b(Ln)<lt&&b(Pn)<lt)break;var qn=Ln*Ln+Pn*Pn;if(qn>cn)wt-=fn/=2,Bt-=on/=2;else{cn=qn;var kr=(wt>0?-1:1)*lt,Fr=(Bt>0?-1:1)*lt,Xr=Ye(wt+kr,Bt),ai=Ye(wt,Bt+Fr),ni=(Xr[0]-Mn[0])/kr,ri=(Xr[1]-Mn[1])/kr,Hi=(ai[0]-Mn[0])/Fr,ra=(ai[1]-Mn[1])/Fr,La=ra*ni-ri*Hi,Sa=(b(La)<.5?.5:1)/La;if(wt+=fn=(Pn*Hi-Ln*ra)*Sa,Bt+=on=(Ln*ri-Pn*ni)*Sa,b(fn)<lt&&b(on)<lt)break}}return[wt,Bt]}}function ee(){var Ye=q(1.68,2);function Je(lt,vt){if(lt+vt<-1.4){var Mt=(lt-vt+1.6)*(lt+vt+1.4)/8;lt+=Mt,vt-=.8*Mt*g(vt+w/2)}var wt=Ye(lt,vt),Bt=(1-i(lt*vt))/12;return wt[1]<0&&(wt[0]*=1+Bt),wt[1]>0&&(wt[1]*=1+Bt/1.5*wt[0]*wt[0]),wt}return Je.invert=G(Je),Je}function te(Ye,Je){var lt,vt=Ye*g(Je),Mt=30;do{Je-=lt=(Je+g(Je)-vt)/(1+i(Je))}while(b(lt)>u&&--Mt>0);return Je/2}function le(Ye,Je,lt){function vt(Mt,wt){return[Ye*Mt*i(wt=te(lt,wt)),Je*g(wt)]}return vt.invert=function(Mt,wt){return wt=R(wt/Je),[Mt/(Ye*i(wt)),R((2*wt+g(2*wt))/lt)]},vt}ie.invert=function(Ye,Je){if((vt=b(Je))<J)return[Ye,2*e(l(Je))-f];var lt,vt,Mt=A,wt=25;do{var Bt=i(Mt/2),cn=m(Mt/2);Mt-=lt=($*(Mt-A)-y(cn)-vt)/($-Bt*Bt/(2*cn))}while(b(lt)>1e-12&&--wt>0);return[Ye/(i(Mt)*($-1/g(Mt))),c(Je)*Mt]},W.invert=function(Ye,Je){var lt=2*R(Je/2);return[Ye*i(lt/2)/i(lt),lt]};var ue=le(k/f,k,w),de=2.00276;function be(Ye,Je){var lt=te(w,Je);return[de*Ye/(1/i(Je)+1.11072/i(lt)),(Je+k*g(lt))/de]}function me(Ye){var Je=0,lt=x.geoProjectionMutator(Ye),vt=lt(Je);return vt.parallel=function(Mt){return arguments.length?lt(Je=Mt*F):Je*D},vt}function _e(Ye,Je){return[Ye*i(Je),Je]}function Ee(Ye){if(!Ye)return _e;var Je=1/m(Ye);function lt(vt,Mt){var wt=Je+Ye-Mt,Bt=wt&&vt*i(Mt)/wt;return[wt*g(Bt),Je-wt*i(Bt)]}return lt.invert=function(vt,Mt){var wt=I(vt*vt+(Mt=Je-Mt)*Mt),Bt=Je+Ye-wt;return[wt/i(Bt)*o(vt,Mt),Bt]},lt}function De(Ye){function Je(lt,vt){var Mt=f-vt,wt=Mt&&lt*Ye*g(Mt)/Mt;return[Mt*g(wt)/Ye,f-Mt*i(wt)]}return Je.invert=function(lt,vt){var Mt=lt*Ye,wt=f-vt,Bt=I(Mt*Mt+wt*wt),cn=o(Mt,wt);return[(Bt?Bt/g(Bt):1)*cn/Ye,f-Bt]},Je}be.invert=function(Ye,Je){var lt,vt,Mt=de*Je,wt=Je<0?-A:A,Bt=25;do{vt=Mt-k*g(wt),wt-=lt=(g(2*wt)+2*wt-w*g(vt))/(2*i(2*wt)+2+w*i(vt)*k*i(wt))}while(b(lt)>u&&--Bt>0);return vt=Mt-k*g(wt),[Ye*(1/i(vt)+1.11072/i(wt))/de,vt]},_e.invert=function(Ye,Je){return[Ye/i(Je),Je]};var Se=le(1,4/w,w);function Fe(Ye,Je,lt,vt,Mt,wt){var Bt,cn=i(wt);if(b(Ye)>1||b(wt)>1)Bt=L(lt*Mt+Je*vt*cn);else{var fn=g(Ye/2),on=g(wt/2);Bt=2*R(I(fn*fn+Je*vt*on*on))}return b(Bt)>u?[Bt,o(vt*g(wt),Je*Mt-lt*vt*cn)]:[0,0]}function ve(Ye,Je,lt){return L((Ye*Ye+Je*Je-lt*lt)/(2*Ye*Je))}function Te(Ye){return Ye-2*w*r((Ye+w)/(2*w))}function Ie(Ye,Je,lt){for(var vt,Mt=[[Ye[0],Ye[1],g(Ye[1]),i(Ye[1])],[Je[0],Je[1],g(Je[1]),i(Je[1])],[lt[0],lt[1],g(lt[1]),i(lt[1])]],wt=Mt[2],Bt=0;Bt<3;++Bt,wt=vt)wt.v=Fe((vt=Mt[Bt])[1]-wt[1],wt[3],wt[2],vt[3],vt[2],vt[0]-wt[0]),wt.point=[0,0];var cn=ve(Mt[0].v[0],Mt[2].v[0],Mt[1].v[0]),fn=ve(Mt[0].v[0],Mt[1].v[0],Mt[2].v[0]),on=w-cn;Mt[2].point[1]=0,Mt[0].point[0]=-(Mt[1].point[0]=Mt[0].v[0]/2);var vn=[Mt[2].point[0]=Mt[0].point[0]+Mt[2].v[0]*i(cn),2*(Mt[0].point[1]=Mt[1].point[1]=Mt[2].v[0]*g(cn))];return function(Mn,Ln){var Pn,qn=g(Ln),kr=i(Ln),Fr=new Array(3);for(Pn=0;Pn<3;++Pn){var Xr=Mt[Pn];if(Fr[Pn]=Fe(Ln-Xr[1],Xr[3],Xr[2],kr,qn,Mn-Xr[0]),!Fr[Pn][0])return Xr.point;Fr[Pn][1]=Te(Fr[Pn][1]-Xr.v[1])}var ai=vn.slice();for(Pn=0;Pn<3;++Pn){var ri=ve(Mt[Pn].v[0],Fr[Pn][0],Fr[2==Pn?0:Pn+1][0]);Fr[Pn][1]<0&&(ri=-ri),Pn?1==Pn?(ai[0]-=Fr[Pn][0]*i(ri=fn-ri),ai[1]-=Fr[Pn][0]*g(ri)):(ai[0]+=Fr[Pn][0]*i(ri=on-ri),ai[1]+=Fr[Pn][0]*g(ri)):(ai[0]+=Fr[Pn][0]*i(ri),ai[1]-=Fr[Pn][0]*g(ri))}return ai[0]/=3,ai[1]/=3,ai}}function Ce(Ye){return Ye[0]*=F,Ye[1]*=F,Ye}function Re(Ye,Je,lt){var vt=x.geoCentroid({type:"MultiPoint",coordinates:[Ye,Je,lt]}),Mt=[-vt[0],-vt[1]],wt=x.geoRotation(Mt),Bt=Ie(Ce(wt(Ye)),Ce(wt(Je)),Ce(wt(lt)));Bt.invert=G(Bt);var cn=x.geoProjection(Bt).rotate(Mt),fn=cn.center;return delete cn.rotate,cn.center=function(on){return arguments.length?fn(wt(on)):wt.invert(fn())},cn.clipAngle(90)}function Ue(Ye,Je){var lt=I(1-g(Je));return[2/E*Ye*lt,E*(1-lt)]}function qe(Ye){var Je=m(Ye);function lt(vt,Mt){return[vt,(vt?vt/g(vt):1)*(g(Mt)*i(vt)-Je*i(Mt))]}return lt.invert=Je?function(vt,Mt){vt&&(Mt*=g(vt)/vt);var wt=i(vt);return[vt,2*o(I(wt*wt+Je*Je-Mt*Mt)-wt,Je-Mt)]}:function(vt,Mt){return[vt,R(vt?Mt*m(vt)/vt:Mt)]},lt}Ue.invert=function(Ye,Je){var lt=(lt=Je/E-1)*lt;return[lt>0?Ye*I(w/lt)/2:0,R(1-lt)]};var Xe=I(3);function st(Ye,Je){return[Xe*Ye*(2*i(2*Je/3)-1)/E,Xe*E*g(Je/3)]}function He(Ye){var Je=i(Ye);function lt(vt,Mt){return[vt*Je,g(Mt)/Je]}return lt.invert=function(vt,Mt){return[vt/Je,R(Mt*Je)]},lt}function $e(Ye){var Je=i(Ye);function lt(vt,Mt){return[vt*Je,(1+Je)*m(Mt/2)]}return lt.invert=function(vt,Mt){return[vt/Je,2*e(Mt/(1+Je))]},lt}function et(Ye,Je){var lt=I(8/(3*w));return[lt*Ye*(1-b(Je)/w),lt*Je]}function tt(Ye,Je){var lt=I(4-3*g(b(Je)));return[2/I(6*w)*Ye*lt,c(Je)*I(2*w/3)*(2-lt)]}function ct(Ye,Je){var lt=I(w*(4+w));return[2/lt*Ye*(1+I(1-4*Je*Je/(w*w))),4/lt*Je]}function bt(Ye,Je){var lt=(2+f)*g(Je);Je/=2;for(var vt=0,Mt=1/0;vt<10&&b(Mt)>u;vt++){var wt=i(Je);Je-=Mt=(Je+g(Je)*(wt+2)-lt)/(2*wt*(1+wt))}return[2/I(w*(4+w))*Ye*(1+i(Je)),2*I(w/(4+w))*g(Je)]}function At(Ye,Je){return[Ye*(1+i(Je))/I(2+w),2*Je/I(2+w)]}function Ut(Ye,Je){for(var lt=(1+f)*g(Je),vt=0,Mt=1/0;vt<10&&b(Mt)>u;vt++)Je-=Mt=(Je+g(Je)-lt)/(1+i(Je));return lt=I(2+w),[Ye*(1+i(Je))/lt,2*Je/lt]}st.invert=function(Ye,Je){var lt=3*R(Je/(Xe*E));return[E*Ye/(Xe*(2*i(2*lt/3)-1)),lt]},et.invert=function(Ye,Je){var lt=I(8/(3*w)),vt=Je/lt;return[Ye/(lt*(1-b(vt)/w)),vt]},tt.invert=function(Ye,Je){var lt=2-b(Je)/I(2*w/3);return[Ye*I(6*w)/(2*lt),c(Je)*R((4-lt*lt)/3)]},ct.invert=function(Ye,Je){var lt=I(w*(4+w))/2;return[Ye*lt/(1+I(1-Je*Je*(4+w)/(4*w))),Je*lt/2]},bt.invert=function(Ye,Je){var lt=Je*I((4+w)/w)/2,vt=R(lt),Mt=i(vt);return[Ye/(2/I(w*(4+w))*(1+Mt)),R((vt+lt*(Mt+2))/(2+f))]},At.invert=function(Ye,Je){var lt=I(2+w),vt=Je*lt/2;return[lt*Ye/(1+i(vt)),vt]},Ut.invert=function(Ye,Je){var lt=1+f,vt=I(lt/2);return[2*Ye*vt/(1+i(Je*=vt)),R((Je+g(Je))/lt)]};var Ct=3+2*k;function dt(Ye,Je){var lt=g(Ye/=2),vt=i(Ye),Mt=I(i(Je)),wt=i(Je/=2),Bt=g(Je)/(wt+k*vt*Mt),cn=I(2/(1+Bt*Bt)),fn=I((k*wt+(vt+lt)*Mt)/(k*wt+(vt-lt)*Mt));return[Ct*(cn*(fn-1/fn)-2*y(fn)),Ct*(cn*Bt*(fn+1/fn)-2*e(Bt))]}dt.invert=function(Ye,Je){if(!(lt=re.invert(Ye/1.2,1.065*Je)))return null;var lt,vt=lt[0],Mt=lt[1],wt=20;Ye/=Ct,Je/=Ct;do{var Bt=vt/2,cn=Mt/2,fn=g(Bt),on=i(Bt),vn=g(cn),Mn=i(cn),Ln=i(Mt),Pn=I(Ln),qn=vn/(Mn+k*on*Pn),kr=qn*qn,Fr=I(2/(1+kr)),Xr=(k*Mn+(on+fn)*Pn)/(k*Mn+(on-fn)*Pn),ai=I(Xr),ni=ai-1/ai,ri=ai+1/ai,Hi=Fr*ni-2*y(ai)-Ye,ra=Fr*qn*ri-2*e(qn)-Je,La=vn&&M*Pn*fn*kr/vn,Sa=(k*on*Mn+Pn)/(2*(Mn+k*on*Pn)*(Mn+k*on*Pn)*Pn),Oa=-.5*qn*Fr*Fr*Fr,yo=Oa*La,wo=Oa*Sa,Ta=(Ta=2*Mn+k*Pn*(on-fn))*Ta*ai,Ga=(k*on*Mn*Pn+Ln)/Ta,To=-k*fn*vn/(Pn*Ta),Fo=ni*yo-2*Ga/ai+Fr*(Ga+Ga/Xr),fs=ni*wo-2*To/ai+Fr*(To+To/Xr),hs=qn*ri*yo-2*La/(1+kr)+Fr*ri*La+Fr*qn*(Ga-Ga/Xr),$o=qn*ri*wo-2*Sa/(1+kr)+Fr*ri*Sa+Fr*qn*(To-To/Xr),ds=fs*hs-$o*Fo;if(!ds)break;var xa=(ra*fs-Hi*$o)/ds,_t=(Hi*hs-ra*Fo)/ds;vt-=xa,Mt=h(-f,s(f,Mt-_t))}while((b(xa)>u||b(_t)>u)&&--wt>0);return b(b(Mt)-f)<u?[0,Mt]:wt&&[vt,Mt]};var at=i(35*F);function Nt(Ye,Je){var lt=m(Je/2);return[Ye*at*I(1-lt*lt),(1+at)*lt]}function rn(Ye,Je){var lt=Je/2,vt=i(lt);return[2*Ye/E*i(Je)*vt*vt,E*m(lt)]}function en(Ye){var Je=1-Ye,lt=Mt(w,0)[0]-Mt(-w,0)[0],vt=I(2*(Mt(0,f)[1]-Mt(0,-f)[1])/lt);function Mt(cn,fn){var on=i(fn),vn=g(fn);return[on/(Je+Ye*on)*cn,Je*fn+Ye*vn]}function wt(cn,fn){var on=Mt(cn,fn);return[on[0]*vt,on[1]/vt]}function Bt(cn){return wt(0,cn)[1]}return wt.invert=function(cn,fn){var on=ae(Bt,fn);return[cn/vt*(Ye+Je/i(on)),on]},wt}function Ge(Ye){return[Ye[0]/2,R(m(Ye[1]/2*F))*D]}function Qe(Ye){return[2*Ye[0],2*e(g(Ye[1]*F))*D]}function Rt(Ye,Je){var lt=2*w/Je,vt=Ye*Ye;function Mt(wt,Bt){var cn=x.geoAzimuthalEquidistantRaw(wt,Bt),fn=cn[0],on=cn[1],vn=fn*fn+on*on;if(vn>vt){var Mn=I(vn),Ln=o(on,fn),Pn=lt*p(Ln/lt),qn=Ln-Pn,kr=Ye*i(qn),Fr=(Ye*g(qn)-qn*g(kr))/(f-kr),Xr=gt(qn,Fr),ai=(w-Ye)/Be(Xr,kr,w);fn=Mn;var ni,ri=50;do{fn-=ni=(Ye+Be(Xr,kr,fn)*ai-Mn)/(Xr(fn)*ai)}while(b(ni)>u&&--ri>0);on=qn*g(fn),fn<f&&(on-=Fr*(fn-f));var Hi=g(Pn),ra=i(Pn);cn[0]=fn*ra-on*Hi,cn[1]=fn*Hi+on*ra}return cn}return Mt.invert=function(wt,Bt){var cn=wt*wt+Bt*Bt;if(cn>vt){var fn=I(cn),on=o(Bt,wt),vn=lt*p(on/lt),Mn=on-vn;wt=fn*i(Mn),Bt=fn*g(Mn);for(var Ln=wt-f,Pn=g(wt),qn=Bt/Pn,kr=wt<f?1/0:0,Fr=10;;){var Xr=Ye*g(qn),ai=Ye*i(qn),ni=g(ai),ri=f-ai,Hi=(Xr-qn*ni)/ri,ra=gt(qn,Hi);if(b(kr)<1e-12||!--Fr)break;qn-=kr=(qn*Pn-Hi*Ln-Bt)/(Pn-2*Ln*(ri*(ai+qn*Xr*i(ai)-ni)-Xr*(Xr-qn*ni))/(ri*ri))}wt=(fn=Ye+Be(ra,ai,wt)*(w-Ye)/Be(ra,ai,w))*i(on=vn+qn),Bt=fn*g(on)}return x.geoAzimuthalEquidistantRaw.invert(wt,Bt)},Mt}function gt(Ye,Je){return function(lt){var vt=Ye*i(lt);return lt<f&&(vt-=Je),I(1+vt*vt)}}function Be(Ye,Je,lt){for(var vt=(lt-Je)/50,Mt=Ye(Je)+Ye(lt),wt=1,Bt=Je;wt<50;++wt)Mt+=2*Ye(Bt+=vt);return.5*Mt*vt}function Ve(Ye,Je,lt,vt,Mt,wt,Bt,cn){function fn(on,vn){if(!vn)return[Ye*on/w,0];var Mn=vn*vn,Ln=Ye+Mn*(Je+Mn*(lt+Mn*vt)),Pn=vn*(Mt-1+Mn*(wt-cn+Mn*Bt)),qn=(Ln*Ln+Pn*Pn)/(2*Pn),kr=on*R(Ln/qn)/w;return[qn*g(kr),vn*(1+Mn*cn)+qn*(1-i(kr))]}return arguments.length<8&&(cn=0),fn.invert=function(on,vn){var Mn,Ln,Pn=w*on/Ye,qn=vn,kr=50;do{var Fr=qn*qn,Xr=Ye+Fr*(Je+Fr*(lt+Fr*vt)),ai=qn*(Mt-1+Fr*(wt-cn+Fr*Bt)),ni=Xr*Xr+ai*ai,ri=2*ai,Hi=ni/ri,ra=Hi*Hi,La=R(Xr/Hi)/w,Sa=Pn*La,Oa=Xr*Xr,yo=(2*Je+Fr*(4*lt+6*Fr*vt))*qn,wo=Mt+Fr*(3*wt+5*Fr*Bt),Ta=(2*(Xr*yo+ai*(wo-1))*ri-ni*(2*(wo-1)))/(ri*ri),Ga=i(Sa),To=g(Sa),Fo=Hi*Ga,fs=Hi*To,hs=Pn/w*(1/I(1-Oa/ra))*(yo*Hi-Xr*Ta)/ra,$o=fs-on,ds=qn*(1+Fr*cn)+Hi-Fo-vn,xa=Ta*To+Fo*hs,_t=Fo*La,qt=1+Ta-(Ta*Ga-fs*hs),_n=fs*La,nn=xa*_n-qt*_t;if(!nn)break;Pn-=Mn=(ds*xa-$o*qt)/nn,qn-=Ln=($o*_n-ds*_t)/nn}while((b(Mn)>u||b(Ln)>u)&&--kr>0);return[Pn,qn]},fn}Nt.invert=function(Ye,Je){var lt=Je/(1+at);return[Ye&&Ye/(at*I(1-lt*lt)),2*e(lt)]},rn.invert=function(Ye,Je){var lt=e(Je/E),vt=i(lt),Mt=2*lt;return[Ye*E/2/(i(Mt)*vt*vt),Mt]};var Le=Ve(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),je=Ve(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ke=Ve(5/6*w,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ft(Ye,Je){var lt=Ye*Ye,vt=Je*Je;return[Ye*(1-.162388*vt)*(.87-952426e-9*lt*lt),Je*(1+vt/12)]}ft.invert=function(Ye,Je){var lt,vt=Ye,Mt=Je,wt=50;do{var Bt=Mt*Mt;Mt-=lt=(Mt*(1+Bt/12)-Je)/(1+Bt/4)}while(b(lt)>u&&--wt>0);wt=50,Ye/=1-.162388*Bt;do{var cn=(cn=vt*vt)*cn;vt-=lt=(vt*(.87-952426e-9*cn)-Ye)/(.87-.00476213*cn)}while(b(lt)>u&&--wt>0);return[vt,Mt]};var mt=Ve(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function pt(Ye){var Je=Ye(f,0)[0]-Ye(-f,0)[0];function lt(vt,Mt){var wt=vt>0?-.5:.5,Bt=Ye(vt+wt*w,Mt);return Bt[0]-=wt*Je,Bt}return Ye.invert&&(lt.invert=function(vt,Mt){var wt=vt>0?-.5:.5,Bt=Ye.invert(vt+wt*Je,Mt),cn=Bt[0]-wt*w;return cn<-w?cn+=2*w:cn>w&&(cn-=2*w),Bt[0]=cn,Bt}),lt}function Ot(Ye,Je){var lt=c(Ye),vt=c(Je),Mt=i(Je),wt=i(Ye)*Mt,Bt=g(Ye)*Mt,cn=g(vt*Je);Ye=b(o(Bt,cn)),Je=R(wt),b(Ye-f)>u&&(Ye%=f);var fn=function(on,vn){if(vn===f)return[0,0];var Mn,Ln,Pn=g(vn),qn=Pn*Pn,kr=qn*qn,Fr=1+kr,Xr=1+3*kr,ai=1-kr,ni=R(1/I(Fr)),ri=ai+qn*Fr*ni,Hi=(1-Pn)/ri,ra=I(Hi),La=Hi*Fr,Sa=I(La),Oa=ra*ai;if(0===on)return[0,-(Oa+qn*Sa)];var yo,wo=i(vn),Ta=1/wo,Ga=2*Pn*wo,To=(-ri*wo-(-3*qn+ni*Xr)*Ga*(1-Pn))/(ri*ri),Fo=-Ta*Ga,fs=-Ta*(qn*Fr*To+Hi*Xr*Ga),hs=-2*Ta*(ai*(.5*To/ra)-2*qn*ra*Ga),$o=4*on/w;if(on>.222*w||vn<w/4&&on>.175*w){if(Mn=(Oa+qn*I(La*(1+kr)-Oa*Oa))/(1+kr),on>w/4)return[Mn,Mn];var ds=Mn,xa=.5*Mn;Mn=.5*(xa+ds),Ln=50;do{var qt=Mn*(hs+Fo*I(La-Mn*Mn))+fs*R(Mn/Sa)-$o;if(!qt)break;qt<0?xa=Mn:ds=Mn,Mn=.5*(xa+ds)}while(b(ds-xa)>u&&--Ln>0)}else{Mn=u,Ln=25;do{var _n=Mn*Mn,nn=I(La-_n),dn=hs+Fo*nn,Un=Mn*dn+fs*R(Mn/Sa)-$o;Mn-=yo=nn?Un/(dn+(fs-Fo*_n)/nn):0}while(b(yo)>u&&--Ln>0)}return[Mn,-Oa-qn*I(La-Mn*Mn)]}(Ye>w/4?f-Ye:Ye,Je);return Ye>w/4&&(cn=fn[0],fn[0]=-fn[1],fn[1]=-cn),fn[0]*=lt,fn[1]*=-vt,fn}function Pt(Ye,Je){var lt,vt,Mt,wt,Bt,cn;if(Je<u)return[(wt=g(Ye))-(lt=Je*(Ye-wt*(vt=i(Ye)))/4)*vt,vt+lt*wt,1-Je*wt*wt/2,Ye-lt];if(Je>=1-u)return lt=(1-Je)/4,Mt=1/(vt=V(Ye)),[(wt=((cn=l(2*(cn=Ye)))-1)/(cn+1))+lt*((Bt=vt*B(Ye))-Ye)/(vt*vt),Mt-lt*wt*Mt*(Bt-Ye),Mt+lt*wt*Mt*(Bt+Ye),2*e(l(Ye))-f+lt*(Bt-Ye)/vt];var fn=[1,0,0,0,0,0,0,0,0],on=[I(Je),0,0,0,0,0,0,0,0],vn=0;for(vt=I(1-Je),Bt=1;b(on[vn]/fn[vn])>u&&vn<8;)lt=fn[vn++],on[vn]=(lt-vt)/2,fn[vn]=(lt+vt)/2,vt=I(lt*vt),Bt*=2;Mt=Bt*fn[vn]*Ye;do{Mt=(R(wt=on[vn]*g(vt=Mt)/fn[vn])+Mt)/2}while(--vn);return[g(Mt),wt=i(Mt),wt/i(Mt-vt),Mt]}function Jt(Ye,Je){if(!Je)return Ye;if(1===Je)return y(m(Ye/2+A));for(var lt=1,vt=I(1-Je),Mt=I(Je),wt=0;b(Mt)>u;wt++){if(Ye%w){var Bt=e(vt*m(Ye)/lt);Bt<0&&(Bt+=w),Ye+=Bt+~~(Ye/w)*w}else Ye+=Ye;Mt=(lt+vt)/2,vt=I(lt*vt),Mt=((lt=Mt)-vt)/2}return Ye/(d(2,wt)*lt)}function $t(Ye,Je){var on,vn,Mn,Ln,Pn,lt=(k-1)/(k+1),vt=I(1-lt*lt),Mt=Jt(f,vt*vt),wt=y(m(w/4+b(Je)/2)),Bt=l(-1*wt)/I(lt),cn=(on=Bt*i(-1*Ye),Ln=(vn=Bt*g(-1*Ye))+1,[.5*((on>=0?f:-f)-o(Pn=1-(Mn=on*on)-vn*vn,2*on)),-.25*y(Pn*Pn+4*Mn)+.5*y(Ln*Ln+Mn)]),fn=function(on,vn,Mn){var Ln=b(on),Pn=B(b(vn));if(Ln){var qn=1/g(Ln),kr=1/(m(Ln)*m(Ln)),Fr=-(kr+Mn*(Pn*Pn*qn*qn)-1+Mn),Xr=(-Fr+I(Fr*Fr-(Mn-1)*kr*4))/2;return[Jt(e(1/I(Xr)),Mn)*c(on),Jt(e(I((Xr/kr-1)/Mn)),1-Mn)*c(vn)]}return[0,Jt(e(Pn),1-Mn)*c(vn)]}(cn[0],cn[1],vt*vt);return[-fn[1],(Je>=0?1:-1)*(.5*Mt-fn[0])]}function ut(Ye){var Je=g(Ye),lt=i(Ye),vt=Dt(Ye);function Mt(wt,Bt){var cn=vt(wt,Bt);wt=cn[0];var fn=g(Bt=cn[1]),on=i(Bt),vn=i(wt),Mn=L(Je*fn+lt*on*vn),Ln=g(Mn),Pn=b(Ln)>u?Mn/Ln:1;return[Pn*lt*g(wt),(b(wt)>f?Pn:-Pn)*(Je*on-lt*fn*vn)]}return vt.invert=Dt(-Ye),Mt.invert=function(wt,Bt){var cn=I(wt*wt+Bt*Bt),fn=-g(cn),on=i(cn),vn=cn*on,Mn=-Bt*fn,Ln=cn*Je,Pn=I(vn*vn+Mn*Mn-Ln*Ln),qn=o(vn*Ln+Mn*Pn,Mn*Ln-vn*Pn),kr=(cn>f?-1:1)*o(wt*fn,cn*i(qn)*on+Bt*g(qn)*fn);return vt.invert(kr,qn)},Mt}function Dt(Ye){var Je=g(Ye),lt=i(Ye);return function(vt,Mt){var wt=i(Mt),Bt=i(vt)*wt,cn=g(vt)*wt,fn=g(Mt);return[o(cn,Bt*lt-fn*Je),R(fn*lt+Bt*Je)]}}Ot.invert=function(Ye,Je){b(Ye)>1&&(Ye=2*c(Ye)-Ye),b(Je)>1&&(Je=2*c(Je)-Je);var lt=c(Ye),vt=c(Je),Mt=-lt*Ye,wt=-vt*Je,Bt=wt/Mt<1,cn=function(Mn,Ln){for(var Pn=0,qn=1,kr=.5,Fr=50;;){var Xr=kr*kr,ai=I(kr),ni=R(1/I(1+Xr)),ri=1-Xr+kr*(1+Xr)*ni,Hi=(1-ai)/ri,ra=I(Hi),La=Hi*(1+Xr),Sa=ra*(1-Xr),Oa=I(La-Mn*Mn),yo=Ln+Sa+kr*Oa;if(b(qn-Pn)<1e-12||0==--Fr||0===yo)break;yo>0?Pn=kr:qn=kr,kr=.5*(Pn+qn)}if(!Fr)return null;var wo=R(ai),Ta=i(wo),Ga=1/Ta,To=2*ai*Ta,Fo=(-ri*Ta-(-3*kr+ni*(1+3*Xr))*To*(1-ai))/(ri*ri);return[w/4*(Mn*(-2*Ga*(.5*Fo/ra*(1-Xr)-2*kr*ra*To)+-Ga*To*Oa)+-Ga*(kr*(1+Xr)*Fo+Hi*(1+3*Xr)*To)*R(Mn/I(La))),wo]}(Bt?wt:Mt,Bt?Mt:wt),fn=cn[0],on=cn[1],vn=i(on);return Bt&&(fn=-f-fn),[lt*(o(g(fn)*vn,-g(on))+w),vt*R(i(fn)*vn)]},$t.invert=function(Ye,Je){var lt,vt,Mt,wt,Bt,cn,Pn,qn,kr,fn=(k-1)/(k+1),on=I(1-fn*fn),Mn=(vt=-Ye,Mt=on*on,(lt=.5*Jt(f,on*on)-Je)?(wt=Pt(lt,Mt),vt?(cn=(Bt=Pt(vt,1-Mt))[1]*Bt[1]+Mt*wt[0]*wt[0]*Bt[0]*Bt[0],[[wt[0]*Bt[2]/cn,wt[1]*wt[2]*Bt[0]*Bt[1]/cn],[wt[1]*Bt[1]/cn,-wt[0]*wt[2]*Bt[0]*Bt[2]/cn],[wt[2]*Bt[1]*Bt[2]/cn,-Mt*wt[0]*wt[1]*Bt[0]/cn]]):[[wt[0],0],[wt[1],0],[wt[2],0]]):[[0,(Bt=Pt(vt,1-Mt))[0]/Bt[1]],[1/Bt[1],0],[Bt[2]/Bt[1],0]]),Ln=[((Pn=Mn[0])[0]*(qn=Mn[1])[0]+Pn[1]*qn[1])/(kr=qn[0]*qn[0]+qn[1]*qn[1]),(Pn[1]*qn[0]-Pn[0]*qn[1])/kr];return[o(Ln[1],Ln[0])/-1,2*e(l(-.5*y(fn*Ln[0]*Ln[0]+fn*Ln[1]*Ln[1])))-f]};var Wt=R(1-1/3)*D,zt=He(0);function Ht(Ye){var Je=Wt*F,lt=Ue(w,Je)[0]-Ue(-w,Je)[0],vt=zt(0,Je)[1],Mt=Ue(0,Je)[1],wt=E-Mt,Bt=P/Ye,cn=4/P,fn=vt+wt*wt*4/P;function on(vn,Mn){var Ln,Pn=b(Mn);if(Pn>Je){var qn=s(Ye-1,h(0,r((vn+w)/Bt)));(Ln=Ue(vn+=w*(Ye-1)/Ye-qn*Bt,Pn))[0]=Ln[0]*P/lt-P*(Ye-1)/(2*Ye)+qn*P/Ye,Ln[1]=vt+4*(Ln[1]-Mt)*wt/P,Mn<0&&(Ln[1]=-Ln[1])}else Ln=zt(vn,Mn);return Ln[0]*=cn,Ln[1]/=fn,Ln}return on.invert=function(vn,Mn){vn/=cn;var Ln=b(Mn*=fn);if(Ln>vt){var Pn=s(Ye-1,h(0,r((vn+w)/Bt))),qn=Ue.invert(vn=(vn+w*(Ye-1)/Ye-Pn*Bt)*lt/P,.25*(Ln-vt)*P/wt+Mt);return qn[0]-=w*(Ye-1)/Ye-Pn*Bt,Mn<0&&(qn[1]=-qn[1]),qn}return zt.invert(vn,Mn)},on}function Ne(Ye,Je){return[Ye,1&Je?90-u:Wt]}function ot(Ye,Je){return[Ye,1&Je?-90+u:-Wt]}function yt(Ye){return[Ye[0]*(1-u),Ye[1]]}function It(Ye){var Je,lt=1+Ye,vt=R(g(1/lt)),Mt=2*I(w/(Je=w+4*vt*lt)),wt=.5*Mt*(lt+I(Ye*(2+Ye))),Bt=Ye*Ye,cn=lt*lt;function fn(on,vn){var Mn,Ln,Pn=1-g(vn);if(Pn&&Pn<2){var qn,kr=f-vn,Fr=25;do{var Xr=g(kr),ai=i(kr),ni=vt+o(Xr,lt-ai),ri=1+cn-2*lt*ai;kr-=qn=(kr-Bt*vt-lt*Xr+ri*ni-.5*Pn*Je)/(2*lt*Xr*ni)}while(b(qn)>1e-12&&--Fr>0);Mn=Mt*I(ri),Ln=on*ni/w}else Mn=Mt*(Ye+Pn),Ln=on*vt/w;return[Mn*g(Ln),wt-Mn*i(Ln)]}return fn.invert=function(on,vn){var Mn=on*on+(vn-=wt)*vn,Ln=(1+cn-Mn/(Mt*Mt))/(2*lt),Pn=L(Ln),qn=g(Pn),kr=vt+o(qn,lt-Ln);return[R(on/I(Mn))*w/kr,R(1-2*(Pn-Bt*vt-lt*qn+(1+cn-2*lt*Ln)*kr)/Je)]},fn}function Vt(Ye,Je){return Je>-.7109889596207567?((Ye=ue(Ye,Je))[1]+=.0528035274542,Ye):_e(Ye,Je)}function ln(Ye,Je){return b(Je)>.7109889596207567?((Ye=ue(Ye,Je))[1]-=Je>0?.0528035274542:-.0528035274542,Ye):_e(Ye,Je)}function un(Ye,Je,lt,vt){var Mt=I(4*w/(2*lt+(1+Ye-Je/2)*g(2*lt)+(Ye+Je)/2*g(4*lt)+Je/2*g(6*lt))),wt=I(vt*g(lt)*I((1+Ye*i(2*lt)+Je*i(4*lt))/(1+Ye+Je))),Bt=lt*fn(1);function cn(Mn){return I(1+Ye*i(2*Mn)+Je*i(4*Mn))}function fn(Mn){var Ln=Mn*lt;return(2*Ln+(1+Ye-Je/2)*g(2*Ln)+(Ye+Je)/2*g(4*Ln)+Je/2*g(6*Ln))/lt}function on(Mn){return cn(Mn)*g(Mn)}var vn=function(Mn,Ln){var Pn=lt*ae(fn,Bt*g(Ln)/lt,Ln/w);isNaN(Pn)&&(Pn=lt*c(Ln));var qn=Mt*cn(Pn);return[qn*wt*Mn/w*i(Pn),qn/wt*g(Pn)]};return vn.invert=function(Mn,Ln){var Pn=ae(on,Ln*wt/Mt);return[Mn*w/(i(Pn)*Mt*wt*cn(Pn)),R(lt*fn(Pn/lt)/Bt)]},0===lt&&(Mt=I(vt/w),(vn=function(Mn,Ln){return[Mn*Mt,g(Ln)/Mt]}).invert=function(Mn,Ln){return[Mn/Mt,R(Ln*Mt)]}),vn}function wn(Ye,Je,lt){function vt(Pn){return Ye+(1-Ye)*d(1-d(Pn,Je),1/Je)}function Mt(Pn){return function an(Ye,Je,lt,vt,Mt){void 0===vt&&(vt=1e-8),void 0===Mt&&(Mt=20);var wt=Ye(Je),Bt=Ye(.5*(Je+lt)),cn=Ye(lt);return function fn(on,vn,Mn,Ln,Pn,qn,kr,Fr,Xr,ai,ni){if(ni.nanEncountered)return NaN;var ri,Hi,ra,La,Sa,Oa,yo,wo,Ta,Ga;if(Hi=on(vn+.25*(ri=Mn-vn)),ra=on(Mn-.25*ri),isNaN(Hi))ni.nanEncountered=!0;else{if(!isNaN(ra))return Ga=((Oa=(La=ri*(Ln+4*Hi+Pn)/12)+(Sa=ri*(Pn+4*ra+qn)/12))-kr)/15,ai>Xr?(ni.maxDepthCount++,Oa+Ga):Math.abs(Ga)<Fr?Oa+Ga:(wo=fn(on,vn,yo=vn+.5*ri,Ln,Hi,Pn,La,.5*Fr,Xr,ai+1,ni),isNaN(wo)?(ni.nanEncountered=!0,NaN):(Ta=fn(on,yo,Mn,Pn,ra,qn,Sa,.5*Fr,Xr,ai+1,ni),isNaN(Ta)?(ni.nanEncountered=!0,NaN):wo+Ta));ni.nanEncountered=!0}}(Ye,Je,lt,wt,Bt,cn,(wt+4*Bt+cn)*(lt-Je)/6,vt,Mt,1,{maxDepthCount:0,nanEncountered:!1})}(vt,0,Pn,1e-4)}for(var wt=1/Mt(1),cn=(1+1e-8)*wt,fn=[],on=0;on<=1e3;on++)fn.push(Mt(on/1e3)*cn);function vn(Pn){var qn=0,kr=1e3,Fr=500;do{fn[Fr]>Pn?kr=Fr:qn=Fr,Fr=qn+kr>>1}while(Fr>qn);var Xr=fn[Fr+1]-fn[Fr];return Xr&&(Xr=(Pn-fn[Fr+1])/Xr),(Fr+1+Xr)/1e3}var Mn=2*vn(1)/w*wt/lt,Ln=function(Pn,qn){var kr=vn(b(g(qn))),Fr=vt(kr)*Pn;return kr/=Mn,[Fr,qn>=0?kr:-kr]};return Ln.invert=function(Pn,qn){var kr;return b(qn*=Mn)<1&&(kr=c(qn)*R(Mt(b(qn))*wt)),[Pn/vt(b(qn)),kr]},Ln}function Zn(Ye,Je){return b(Ye[0]-Je[0])<u&&b(Ye[1]-Je[1])<u}function An(Ye,Je){for(var lt,vt,Mt,wt=-1,Bt=Ye.length,cn=Ye[0],fn=[];++wt<Bt;){vt=((lt=Ye[wt])[0]-cn[0])/Je,Mt=(lt[1]-cn[1])/Je;for(var on=0;on<Je;++on)fn.push([cn[0]+on*vt,cn[1]+on*Mt]);cn=lt}return fn.push(lt),fn}function hn(Ye){var Je,lt,Mt,wt,cn,fn=[],on=Ye[0].length;for(cn=0;cn<on;++cn)lt=(Je=Ye[0][cn])[0][0],fn.push(An([[lt+u,Je[0][1]+u],[lt+u,(Mt=Je[1][1])-u],[(wt=Je[2][0])-u,Mt-u],[wt-u,Je[2][1]+u]],30));for(cn=Ye[1].length-1;cn>=0;--cn)lt=(Je=Ye[1][cn])[0][0],fn.push(An([[(wt=Je[2][0])-u,Je[2][1]-u],[wt-u,(Mt=Je[1][1])+u],[lt+u,Mt+u],[lt+u,Je[0][1]-u]],30));return{type:"Polygon",coordinates:[T.merge(fn)]}}function pn(Ye,Je,lt){var vt,Mt;function wt(fn,on){for(var vn=on<0?-1:1,Mn=Je[+(on<0)],Ln=0,Pn=Mn.length-1;Ln<Pn&&fn>Mn[Ln][2][0];++Ln);var qn=Ye(fn-Mn[Ln][1][0],on);return qn[0]+=Ye(Mn[Ln][1][0],vn*on>vn*Mn[Ln][0][1]?Mn[Ln][0][1]:on)[0],qn}lt?wt.invert=lt(wt):Ye.invert&&(wt.invert=function(fn,on){for(var vn=Mt[+(on<0)],Mn=Je[+(on<0)],Ln=0,Pn=vn.length;Ln<Pn;++Ln){var qn=vn[Ln];if(qn[0][0]<=fn&&fn<qn[1][0]&&qn[0][1]<=on&&on<qn[1][1]){var kr=Ye.invert(fn-Ye(Mn[Ln][1][0],0)[0],on);return kr[0]+=Mn[Ln][1][0],Zn(wt(kr[0],kr[1]),[fn,on])?kr:null}}});var Bt=x.geoProjection(wt),cn=Bt.stream;return Bt.stream=function(fn){var on=Bt.rotate(),vn=cn(fn),Mn=(Bt.rotate([0,0]),cn(fn));return Bt.rotate(on),vn.sphere=function(){x.geoStream(vt,Mn)},vn},Bt.lobes=function(fn){return arguments.length?(vt=hn(fn),Je=fn.map(function(on){return on.map(function(vn){return[[vn[0][0]*F,vn[0][1]*F],[vn[1][0]*F,vn[1][1]*F],[vn[2][0]*F,vn[2][1]*F]]})}),Mt=Je.map(function(on){return on.map(function(vn){var Mn,Ln=Ye(vn[0][0],vn[0][1])[0],Pn=Ye(vn[2][0],vn[2][1])[0],qn=Ye(vn[1][0],vn[0][1])[1],kr=Ye(vn[1][0],vn[1][1])[1];return qn>kr&&(Mn=qn,qn=kr,kr=Mn),[[Ln,qn],[Pn,kr]]})}),Bt):Je.map(function(on){return on.map(function(vn){return[[vn[0][0]*D,vn[0][1]*D],[vn[1][0]*D,vn[1][1]*D],[vn[2][0]*D,vn[2][1]*D]]})})},null!=Je&&Bt.lobes(Je),Bt}Vt.invert=function(Ye,Je){return Je>-.7109889596207567?ue.invert(Ye,Je-.0528035274542):_e.invert(Ye,Je)},ln.invert=function(Ye,Je){return b(Je)>.7109889596207567?ue.invert(Ye,Je+(Je>0?.0528035274542:-.0528035274542)):_e.invert(Ye,Je)};var xn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],En=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],In=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Yn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],nr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],sr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ar(Ye,Je){return[3/P*Ye*I(w*w/3-Je*Je),Je]}function yr(Ye){function Je(lt,vt){if(b(b(vt)-f)<u)return[0,vt<0?-2:2];var Mt=g(vt),wt=d((1+Mt)/(1-Mt),Ye/2),Bt=.5*(wt+1/wt)+i(lt*=Ye);return[2*g(lt)/Bt,(wt-1/wt)/Bt]}return Je.invert=function(lt,vt){var Mt=b(vt);if(b(Mt-2)<u)return lt?null:[0,c(vt)*f];if(Mt>2)return null;var wt=(lt/=2)*lt,Bt=(vt/=2)*vt,cn=2*vt/(1+wt+Bt);return cn=d((1+cn)/(1-cn),1/Ye),[o(2*lt,1-wt-Bt)/Ye,R((cn-1)/(cn+1))]},Je}Ar.invert=function(Ye,Je){return[P/3*Ye/I(w*w/3-Je*Je),Je]};var Pr=w/k;function Wr(Ye,Je){return[Ye*(1+I(i(Je)))/2,Je/(i(Je/2)*i(Ye/6))]}function lr(Ye,Je){var lt=Ye*Ye,vt=Je*Je;return[Ye*(.975534+vt*(-.0143059*lt-.119161+-.0547009*vt)),Je*(1.00384+lt*(.0802894+-.02855*vt+199025e-9*lt)+vt*(.0998909+-.0491032*vt))]}function Hn(Ye,Je){return[g(Ye)/i(Je),m(Je)*i(Ye)]}function Sr(Ye){var Je=i(Ye),lt=m(A+Ye/2);function vt(Mt,wt){var Bt=wt-Ye,cn=b(Bt)<u?Mt*Je:b(cn=A+wt/2)<u||b(b(cn)-f)<u?0:Mt*Bt/y(m(cn)/lt);return[cn,Bt]}return vt.invert=function(Mt,wt){var Bt,cn=wt+Ye;return[b(wt)<u?Mt/Je:b(Bt=A+cn/2)<u||b(b(Bt)-f)<u?0:Mt*y(m(Bt)/lt)/wt,cn]},vt}function ti(Ye,Je){return[Ye,1.25*y(m(A+.4*Je))]}function Fn(Ye){var Je=Ye.length-1;function lt(vt,Mt){for(var wt,Bt=i(Mt),cn=2/(1+Bt*i(vt)),fn=cn*Bt*g(vt),on=cn*g(Mt),vn=Je,Mn=Ye[vn],Ln=Mn[0],Pn=Mn[1];--vn>=0;)Ln=(Mn=Ye[vn])[0]+fn*(wt=Ln)-on*Pn,Pn=Mn[1]+fn*Pn+on*wt;return[Ln=fn*(wt=Ln)-on*Pn,Pn=fn*Pn+on*wt]}return lt.invert=function(vt,Mt){var wt=20,Bt=vt,cn=Mt;do{for(var fn,on=Je,vn=Ye[on],Mn=vn[0],Ln=vn[1],Pn=0,qn=0;--on>=0;)Pn=Mn+Bt*(fn=Pn)-cn*qn,qn=Ln+Bt*qn+cn*fn,Mn=(vn=Ye[on])[0]+Bt*(fn=Mn)-cn*Ln,Ln=vn[1]+Bt*Ln+cn*fn;var kr,Fr,Xr=(Pn=Mn+Bt*(fn=Pn)-cn*qn)*Pn+(qn=Ln+Bt*qn+cn*fn)*qn;Bt-=kr=((Mn=Bt*(fn=Mn)-cn*Ln-vt)*Pn+(Ln=Bt*Ln+cn*fn-Mt)*qn)/Xr,cn-=Fr=(Ln*Pn-Mn*qn)/Xr}while(b(kr)+b(Fr)>1e-12&&--wt>0);if(wt){var ai=I(Bt*Bt+cn*cn),ni=2*e(.5*ai),ri=g(ni);return[o(Bt*ri,ai*i(ni)),ai?R(cn*ri/ai):0]}},lt}Wr.invert=function(Ye,Je){var lt=b(Ye),vt=b(Je),Mt=u,wt=f;vt<Pr?wt*=vt/Pr:Mt+=6*L(Pr/vt);for(var Bt=0;Bt<25;Bt++){var cn=g(wt),fn=I(i(wt)),on=g(wt/2),vn=i(wt/2),Mn=g(Mt/6),Ln=i(Mt/6),Pn=.5*Mt*(1+fn)-lt,qn=wt/(vn*Ln)-vt,kr=fn?-.25*Mt*cn/fn:0,Fr=.5*(1+fn),Xr=(1+.5*wt*on/vn)/(vn*Ln),ai=wt/vn*(Mn/6)/(Ln*Ln),ni=kr*ai-Xr*Fr,ri=(Pn*ai-qn*Fr)/ni,Hi=(qn*kr-Pn*Xr)/ni;if(wt-=ri,Mt-=Hi,b(ri)<u&&b(Hi)<u)break}return[Ye<0?-Mt:Mt,Je<0?-wt:wt]},lr.invert=function(Ye,Je){var lt=c(Ye)*w,vt=Je/2,Mt=50;do{var wt=lt*lt,Bt=vt*vt,cn=lt*vt,fn=lt*(.975534+Bt*(-.0143059*wt-.119161+-.0547009*Bt))-Ye,on=vt*(1.00384+wt*(.0802894+-.02855*Bt+199025e-9*wt)+Bt*(.0998909+-.0491032*Bt))-Je,vn=.975534-Bt*(.119161+3*wt*.0143059+.0547009*Bt),Mn=-cn*(.238322+.2188036*Bt+.0286118*wt),Ln=cn*(.1605788+7961e-7*wt+-.0571*Bt),Pn=1.00384+wt*(.0802894+199025e-9*wt)+Bt*(3*(.0998909-.02855*wt)-.245516*Bt),qn=Mn*Ln-Pn*vn,kr=(on*Mn-fn*Pn)/qn,Fr=(fn*Ln-on*vn)/qn;lt-=kr,vt-=Fr}while((b(kr)>u||b(Fr)>u)&&--Mt>0);return Mt&&[lt,vt]},Hn.invert=function(Ye,Je){var lt=Ye*Ye,vt=Je*Je+1,Mt=lt+vt,wt=Ye?M*I((Mt-I(Mt*Mt-4*lt))/lt):1/I(vt);return[R(Ye*wt),c(Je)*L(wt)]},ti.invert=function(Ye,Je){return[Ye,2.5*e(l(.8*Je))-.625*w]};var br=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],xr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Kn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Qr=[[.9245,0],[0,0],[.01943,0]],ci=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Or(Ye,Je){var lt=x.geoProjection(Fn(Ye)).rotate(Je).clipAngle(90),vt=x.geoRotation(Je),Mt=lt.center;return delete lt.rotate,lt.center=function(wt){return arguments.length?Mt(vt(wt)):vt.invert(Mt())},lt}var li=I(6),di=I(7);function Tn(Ye,Je){var lt=R(7*g(Je)/(3*li));return[li*Ye*(2*i(2*lt/3)-1)/di,9*g(lt/3)/di]}function tr(Ye,Je){for(var lt,vt=(1+M)*g(Je),Mt=Je,wt=0;wt<25&&(Mt-=lt=(g(Mt/2)+g(Mt)-vt)/(.5*i(Mt/2)+i(Mt)),!(b(lt)<u));wt++);return[Ye*(1+2*i(Mt)/i(Mt/2))/(3*k),2*I(3)*g(Mt/2)/I(2+k)]}function Zt(Ye,Je){for(var lt,vt=I(6/(4+w)),Mt=(1+w/4)*g(Je),wt=Je/2,Bt=0;Bt<25&&(wt-=lt=(wt/2+g(wt)-Mt)/(.5+i(wt)),!(b(lt)<u));Bt++);return[vt*(.5+i(wt))*Ye/1.5,vt*wt]}function yn(Ye,Je){var lt=Je*Je,vt=lt*lt,Mt=lt*vt;return[Ye*(.84719-.13063*lt+Mt*Mt*(.05494*lt-.04515-.02326*vt+.00331*Mt)),Je*(1.01183+vt*vt*(.01926*lt-.02625-.00396*vt))]}function Cn(Ye,Je){return[Ye*(1+i(Je))/2,2*(Je-m(Je/2))]}Tn.invert=function(Ye,Je){var lt=3*R(Je*di/9);return[Ye*di/(li*(2*i(2*lt/3)-1)),R(3*g(lt)*li/7)]},tr.invert=function(Ye,Je){var lt=Je*I(2+k)/(2*I(3)),vt=2*R(lt);return[3*k*Ye/(1+2*i(vt)/i(vt/2)),R((lt+g(vt))/(1+M))]},Zt.invert=function(Ye,Je){var lt=I(6/(4+w)),vt=Je/lt;return b(b(vt)-f)<u&&(vt=vt<0?-f:f),[1.5*Ye/(lt*(.5+i(vt))),R((vt/2+g(vt))/(1+w/4))]},yn.invert=function(Ye,Je){var lt,vt,Mt,wt,Bt=Je,cn=25;do{Bt-=lt=(Bt*(1.01183+(Mt=(vt=Bt*Bt)*vt)*Mt*(.01926*vt-.02625-.00396*Mt))-Je)/(1.01183+Mt*Mt*(.21186*vt-.23625+-.05148*Mt))}while(b(lt)>1e-12&&--cn>0);return[Ye/(.84719-.13063*(vt=Bt*Bt)+(wt=vt*(Mt=vt*vt))*wt*(.05494*vt-.04515-.02326*Mt+.00331*wt)),Bt]},Cn.invert=function(Ye,Je){for(var lt=Je/2,vt=0,Mt=1/0;vt<10&&b(Mt)>u;++vt){var wt=i(Je/2);Je-=Mt=(Je-m(Je/2)-lt)/(1-.5/(wt*wt))}return[2*Ye/(1+i(Je)),Je]};var rr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Qn(Ye,Je){var lt=g(Je),vt=i(Je),Mt=c(Ye);if(0===Ye||b(Je)===f)return[0,Je];if(0===Je)return[Ye,0];if(b(Ye)===f)return[Ye*vt,f*lt];var wt=w/(2*Ye)-2*Ye/w,Bt=2*Je/w,cn=(1-Bt*Bt)/(lt-Bt),fn=wt*wt,on=cn*cn,vn=1+fn/on,Mn=1+on/fn,Ln=(wt*lt/cn-wt/2)/vn,Pn=(on*lt/fn+cn/2)/Mn,qn=Pn*Pn-(on*lt*lt/fn+cn*lt-1)/Mn;return[f*(Ln+I(Ln*Ln+vt*vt/vn)*Mt),f*(Pn+I(qn<0?0:qn)*c(-Je*wt)*Mt)]}function Jn(Ye,Je){var lt=Je*Je;return[Ye,Je*(1.0148+lt*lt*(.23185+lt*(.02406*lt-.14499)))]}function Wn(Ye,Je){if(b(Je)<u)return[Ye,0];var lt=m(Je),vt=Ye*g(Je);return[g(vt)/lt,Je+(1-i(vt))/lt]}function zn(Ye,Je){return[Ye[0]*Je[0]+Ye[1]*Je[3],Ye[0]*Je[1]+Ye[1]*Je[4],Ye[0]*Je[2]+Ye[1]*Je[5]+Ye[2],Ye[3]*Je[0]+Ye[4]*Je[3],Ye[3]*Je[1]+Ye[4]*Je[4],Ye[3]*Je[2]+Ye[4]*Je[5]+Ye[5]]}function Rn(Ye,Je){return[Ye[0]-Je[0],Ye[1]-Je[1]]}function Gn(Ye){return I(Ye[0]*Ye[0]+Ye[1]*Ye[1])}function fr(Ye,Je,lt){function vt(Bt,cn){var fn,on=Je(Bt,cn),vn=on.project([Bt*D,cn*D]);return(fn=on.transform)?[fn[0]*vn[0]+fn[1]*vn[1]+fn[2],-(fn[3]*vn[0]+fn[4]*vn[1]+fn[5])]:(vn[1]=-vn[1],vn)}(function Bt(cn,fn){if(cn.edges=function(qn){for(var kr=qn.length,Fr=[],Xr=qn[kr-1],ai=0;ai<kr;++ai)Fr.push([Xr,Xr=qn[ai]]);return Fr}(cn.face),fn.face){var on=cn.shared=function(qn,kr){for(var Fr,Xr,ai=qn.length,ni=null,ri=0;ri<ai;++ri){Fr=qn[ri];for(var Hi=kr.length;--Hi>=0;)if(Fr[0]===(Xr=kr[Hi])[0]&&Fr[1]===Xr[1]){if(ni)return[ni,Fr];ni=Fr}}}(cn.face,fn.face),vn=function On(Ye,Je){var Bt,cn,lt=Rn(Ye[1],Ye[0]),vt=Rn(Je[1],Je[0]),Mt=o((Bt=lt)[0]*(cn=vt)[1]-Bt[1]*cn[0],Bt[0]*cn[0]+Bt[1]*cn[1]),wt=Gn(lt)/Gn(vt);return zn([1,0,Ye[0][0],0,1,Ye[0][1]],zn([wt,0,0,0,wt,0],zn([i(Mt),g(Mt),0,-g(Mt),i(Mt),0],[1,0,-Je[0][0],0,1,-Je[0][1]])))}(on.map(fn.project),on.map(cn.project));cn.transform=fn.transform?zn(fn.transform,vn):vn;for(var Mn=fn.edges,Ln=0,Pn=Mn.length;Ln<Pn;++Ln)ur(on[0],Mn[Ln][1])&&ur(on[1],Mn[Ln][0])&&(Mn[Ln]=cn),ur(on[0],Mn[Ln][0])&&ur(on[1],Mn[Ln][1])&&(Mn[Ln]=cn);for(Ln=0,Pn=(Mn=cn.edges).length;Ln<Pn;++Ln)ur(on[0],Mn[Ln][0])&&ur(on[1],Mn[Ln][1])&&(Mn[Ln]=fn),ur(on[0],Mn[Ln][1])&&ur(on[1],Mn[Ln][0])&&(Mn[Ln]=fn)}else cn.transform=fn.transform;return cn.children&&cn.children.forEach(function(qn){Bt(qn,cn)}),cn})(Ye,{transform:null}),Mr(Ye)&&(vt.invert=function(Bt,cn){var fn=function on(vn,Mn){var ni,ri,Ln=vn.project.invert,Pn=vn.transform,qn=Mn;if(Pn&&(qn=[(Pn=[(ri=1/((ni=Pn)[0]*ni[4]-ni[1]*ni[3]))*ni[4],-ri*ni[1],ri*(ni[1]*ni[5]-ni[2]*ni[4]),-ri*ni[3],ri*ni[0],ri*(ni[2]*ni[3]-ni[0]*ni[5])])[0]*qn[0]+Pn[1]*qn[1]+Pn[2],Pn[3]*qn[0]+Pn[4]*qn[1]+Pn[5]]),Ln&&vn===function(ni){return Je(ni[0]*F,ni[1]*F)}(kr=Ln(qn)))return kr;for(var kr,Fr=vn.children,Xr=0,ai=Fr&&Fr.length;Xr<ai;++Xr)if(kr=on(Fr[Xr],Mn))return kr}(Ye,[Bt,-cn]);return fn&&(fn[0]*=F,fn[1]*=F,fn)});var Mt=x.geoProjection(vt),wt=Mt.stream;return Mt.stream=function(Bt){var cn=Mt.rotate(),fn=wt(Bt),on=(Mt.rotate([0,0]),wt(Bt));return Mt.rotate(cn),fn.sphere=function(){on.polygonStart(),on.lineStart(),function vn(Mn,Ln,Pn){var qn,kr,Fr=Ln.edges,Xr=Fr.length,ai={type:"MultiPoint",coordinates:Ln.face},ni=Ln.face.filter(function(yo){return 90!==b(yo[1])}),ri=x.geoBounds({type:"MultiPoint",coordinates:ni}),Hi=!1,ra=-1,La=ri[1][0]-ri[0][0],Sa=180===La||360===La?[(ri[0][0]+ri[1][0])/2,(ri[0][1]+ri[1][1])/2]:x.geoCentroid(ai);if(Pn)for(;++ra<Xr&&Fr[ra]!==Pn;);++ra;for(var Oa=0;Oa<Xr;++Oa)kr=Fr[(Oa+ra)%Xr],Array.isArray(kr)?(Hi||(Mn.point((qn=x.geoInterpolate(kr[0],Sa)(u))[0],qn[1]),Hi=!0),Mn.point((qn=x.geoInterpolate(kr[1],Sa)(u))[0],qn[1])):(Hi=!1,kr!==Pn&&vn(Mn,kr,Ln))}(on,Ye),on.lineEnd(),on.polygonEnd()},fn},Mt.angle(null==lt?-30:lt*D)}function ur(Ye,Je){return Ye&&Je&&Ye[0]===Je[0]&&Ye[1]===Je[1]}function Mr(Ye){return Ye.project.invert||Ye.children&&Ye.children.some(Mr)}Qn.invert=function(Ye,Je){var lt=(Ye/=f)*Ye,vt=lt+(Je/=f)*Je,Mt=w*w;return[Ye?(vt-1+I((1-vt)*(1-vt)+4*lt))/(2*Ye)*f:0,ae(function(wt){return vt*(w*g(wt)-2*wt)*w+4*wt*wt*(Je-g(wt))+2*w*wt-Mt*Je},0)]},Jn.invert=function(Ye,Je){Je>1.790857183?Je=1.790857183:Je<-1.790857183&&(Je=-1.790857183);var lt,vt=Je;do{var Mt=vt*vt;vt-=lt=(vt*(1.0148+Mt*Mt*(.23185+Mt*(.02406*Mt-.14499)))-Je)/(1.0148+Mt*Mt*(5*.23185+Mt*(.21654*Mt-1.01493)))}while(b(lt)>u);return[Ye,vt]},Wn.invert=function(Ye,Je){if(b(Je)<u)return[Ye,0];var lt,vt=Ye*Ye+Je*Je,Mt=.5*Je,wt=10;do{var Bt=m(Mt),cn=1/i(Mt),fn=vt-2*Je*Mt+Mt*Mt;Mt-=lt=(Bt*fn+2*(Mt-Je))/(2+fn*cn*cn+2*(Mt-Je)*Bt)}while(b(lt)>u&&--wt>0);return Bt=m(Mt),[(b(Je)<b(Mt+1/Bt)?R(Ye*Bt):c(Je)*c(Ye)*(L(b(Ye*Bt))+f))/g(Mt),Mt]};var vr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],zr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ye){return Ye.map(function(Je){return vr[Je]})}),Br=2/I(3);function or(Ye,Je){var lt=Ue(Ye,Je);return[lt[0]*Br,lt[1]]}function Ur(Ye,Je){for(var lt=0,vt=Ye.length,Mt=0;lt<vt;++lt)Mt+=Ye[lt]*Je[lt];return Mt}function Zr(Ye){return[o(Ye[1],Ye[0])*D,R(h(-1,s(1,Ye[2])))*D]}function mi(Ye){var Je=Ye[0]*F,lt=Ye[1]*F,vt=i(lt);return[vt*i(Je),vt*g(Je),g(lt)]}function Zi(){}function Vi(Ye,Je){return{type:"FeatureCollection",features:Ye.features.map(function(lt){return qr(lt,Je)})}}function qr(Ye,Je){return{type:"Feature",id:Ye.id,properties:Ye.properties,geometry:wi(Ye.geometry,Je)}}function wi(Ye,Je){if(!Ye)return null;if("GeometryCollection"===Ye.type)return Mt=Je,{type:"GeometryCollection",geometries:Ye.geometries.map(function(wt){return wi(wt,Mt)})};var Mt,lt;switch(Ye.type){case"Point":case"MultiPoint":lt=$a;break;case"LineString":case"MultiLineString":lt=Na;break;case"Polygon":case"MultiPolygon":case"Sphere":lt=ys;break;default:return null}return x.geoStream(Ye,Je(lt)),lt.result()}or.invert=function(Ye,Je){return Ue.invert(Ye/Br,Je)};var vi=[],ma=[],$a={point:function(Ye,Je){vi.push([Ye,Je])},result:function(){var Ye=vi.length?vi.length<2?{type:"Point",coordinates:vi[0]}:{type:"MultiPoint",coordinates:vi}:null;return vi=[],Ye}},Na={lineStart:Zi,point:function(Ye,Je){vi.push([Ye,Je])},lineEnd:function(){vi.length&&(ma.push(vi),vi=[])},result:function(){var Ye=ma.length?ma.length<2?{type:"LineString",coordinates:ma[0]}:{type:"MultiLineString",coordinates:ma}:null;return ma=[],Ye}},ys={polygonStart:Zi,lineStart:Zi,point:function(Ye,Je){vi.push([Ye,Je])},lineEnd:function(){var Ye=vi.length;if(Ye){do{vi.push(vi[0].slice())}while(++Ye<4);ma.push(vi),vi=[]}},polygonEnd:Zi,result:function(){if(!ma.length)return null;var Ye=[],Je=[];return ma.forEach(function(lt){!function(vt){if((Mt=vt.length)<4)return!1;for(var Mt,wt=0,Bt=vt[Mt-1][1]*vt[0][0]-vt[Mt-1][0]*vt[0][1];++wt<Mt;)Bt+=vt[wt-1][1]*vt[wt][0]-vt[wt-1][0]*vt[wt][1];return Bt<=0}(lt)?Je.push(lt):Ye.push([lt])}),Je.forEach(function(lt){var vt=lt[0];Ye.some(function(Mt){if(function(wt,Bt){for(var cn=Bt[0],fn=Bt[1],on=!1,vn=0,Mn=wt.length,Ln=Mn-1;vn<Mn;Ln=vn++){var Pn=wt[vn],qn=Pn[0],kr=Pn[1],Fr=wt[Ln],ai=Fr[1];kr>fn^ai>fn&&cn<(Fr[0]-qn)*(fn-kr)/(ai-kr)+qn&&(on=!on)}return on}(Mt[0],vt))return Mt.push(lt),!0})||Ye.push([lt])}),ma=[],Ye.length?Ye.length>1?{type:"MultiPolygon",coordinates:Ye}:{type:"Polygon",coordinates:Ye[0]}:null}};function pa(Ye){var Je=Ye(f,0)[0]-Ye(-f,0)[0];function lt(vt,Mt){var wt=b(vt)<f,Bt=Ye(wt?vt:vt>0?vt-w:vt+w,Mt),cn=(Bt[0]-Bt[1])*M,fn=(Bt[0]+Bt[1])*M;if(wt)return[cn,fn];var on=Je*M,vn=cn>0^fn>0?-1:1;return[vn*cn-c(fn)*on,vn*fn-c(cn)*on]}return Ye.invert&&(lt.invert=function(vt,Mt){var wt=(vt+Mt)*M,Bt=(Mt-vt)*M,cn=b(wt)<.5*Je&&b(Bt)<.5*Je;if(!cn){var fn=Je*M,on=wt>0^Bt>0?-1:1,vn=-on*vt+(Bt>0?1:-1)*fn,Mn=-on*Mt+(wt>0?1:-1)*fn;wt=(-vn-Mn)*M,Bt=(vn-Mn)*M}var Ln=Ye.invert(wt,Bt);return cn||(Ln[0]+=wt>0?w:-w),Ln}),x.geoProjection(lt).rotate([-90,-90,45]).clipAngle(179.999)}function ei(){return pa($t).scale(111.48)}function Ki(Ye){var Je=g(Ye);function lt(vt,Mt){var wt=Je?m(vt*Je/2)/Je:vt/2;if(!Mt)return[2*wt,-Ye];var Bt=2*e(wt*g(Mt)),cn=1/m(Mt);return[g(Bt)*cn,Mt+(1-i(Bt))*cn-Ye]}return lt.invert=function(vt,Mt){if(b(Mt+=Ye)<u)return[Je?2*e(Je*vt/2)/Je:vt,0];var wt,Bt=vt*vt+Mt*Mt,cn=0,fn=10;do{var on=m(cn),vn=1/i(cn),Mn=Bt-2*Mt*cn+cn*cn;cn-=wt=(on*Mn+2*(cn-Mt))/(2+Mn*vn*vn+2*(cn-Mt)*on)}while(b(wt)>u&&--fn>0);var Ln=vt*(on=m(cn)),Pn=m(b(Mt)<b(cn+1/on)?.5*R(Ln):.5*L(Ln)+w/4)/g(cn);return[Je?2*e(Je*Pn)/Je:2*Pn,cn]},lt}var Ui=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function so(Ye,Je){var lt,vt=s(18,36*b(Je)/w),Mt=r(vt),wt=vt-Mt,Bt=(lt=Ui[Mt])[0],cn=lt[1],fn=(lt=Ui[++Mt])[0],on=lt[1],vn=(lt=Ui[s(19,++Mt)])[0],Mn=lt[1];return[Ye*(fn+wt*(vn-Bt)/2+wt*wt*(vn-2*fn+Bt)/2),(Je>0?f:-f)*(on+wt*(Mn-cn)/2+wt*wt*(Mn-2*on+cn)/2)]}function Vo(Ye,Je){var lt=function(Bt){function cn(fn,on){var vn=i(on),Mn=(Bt-1)/(Bt-vn*i(fn));return[Mn*vn*g(fn),Mn*g(on)]}return cn.invert=function(fn,on){var vn=fn*fn+on*on,Mn=I(vn),Ln=(Bt-I(1-vn*(Bt+1)/(Bt-1)))/((Bt-1)/Mn+Mn/(Bt-1));return[o(fn*Ln,Mn*I(1-Ln*Ln)),Mn?R(on*Ln/Mn):0]},cn}(Ye);if(!Je)return lt;var vt=i(Je),Mt=g(Je);function wt(Bt,cn){var fn=lt(Bt,cn),on=fn[1],vn=on*Mt/(Ye-1)+vt;return[fn[0]*vt/vn,on/vn]}return wt.invert=function(Bt,cn){var fn=(Ye-1)/(Ye-1-cn*Mt);return lt.invert(fn*Bt,fn*cn*vt)},wt}Ui.forEach(function(Ye){Ye[1]*=1.0144}),so.invert=function(Ye,Je){var lt=Je/f,vt=90*lt,Mt=s(18,b(vt/5)),wt=h(0,r(Mt));do{var Bt=Ui[wt][1],cn=Ui[wt+1][1],fn=Ui[s(19,wt+2)][1],on=fn-Bt,vn=fn-2*cn+Bt,Mn=2*(b(lt)-cn)/on,Ln=vn/on,Pn=Mn*(1-Ln*Mn*(1-2*Ln*Mn));if(Pn>=0||1===wt){vt=(Je>=0?5:-5)*(Pn+Mt);var qn,kr=50;do{Pn=(Mt=s(18,b(vt)/5))-(wt=r(Mt)),Bt=Ui[wt][1],cn=Ui[wt+1][1],fn=Ui[s(19,wt+2)][1],vt-=(qn=(Je>=0?f:-f)*(cn+Pn*(fn-Bt)/2+Pn*Pn*(fn-2*cn+Bt)/2)-Je)*D}while(b(qn)>1e-12&&--kr>0);break}}while(--wt>=0);var Fr=Ui[wt][0],Xr=Ui[wt+1][0],ai=Ui[s(19,wt+2)][0];return[Ye/(Xr+Pn*(ai-Fr)/2+Pn*Pn*(ai-2*Xr+Fr)/2),vt*F]};var Ea=-179.9999,Do=179.9999,Ba=-89.9999;function ts(Ye){return Ye.length>0}function go(Ye){return-90===Ye||90===Ye?[0,Ye]:[-180,(Je=Ye,Math.floor(1e4*Je)/1e4)];var Je}function Ni(Ye){var Je=Ye[0],lt=Ye[1],vt=!1;return Je<=Ea?(Je=-180,vt=!0):Je>=Do&&(Je=180,vt=!0),lt<=Ba?(lt=-90,vt=!0):lt>=89.9999&&(lt=90,vt=!0),vt?[Je,lt]:Ye}function Uo(Ye){return Ye.map(Ni)}function el(Ye,Je,lt){for(var vt=0,Mt=Ye.length;vt<Mt;++vt){var wt=Ye[vt].slice();lt.push({index:-1,polygon:Je,ring:wt});for(var Bt=0,cn=wt.length;Bt<cn;++Bt){var fn=wt[Bt],on=fn[0],vn=fn[1];if(on<=Ea||on>=Do||vn<=Ba||vn>=89.9999){wt[Bt]=Ni(fn);for(var Mn=Bt+1;Mn<cn;++Mn){var Ln=wt[Mn],Pn=Ln[0],qn=Ln[1];if(Pn>Ea&&Pn<Do&&qn>Ba&&qn<89.9999)break}if(Mn===Bt+1)continue;if(Bt){var kr={index:-1,polygon:Je,ring:wt.slice(0,Bt+1)};kr.ring[kr.ring.length-1]=go(vn),lt[lt.length-1]=kr}else lt.pop();if(Mn>=cn)break;lt.push({index:-1,polygon:Je,ring:wt=wt.slice(Mn-1)}),wt[0]=go(wt[0][1]),Bt=-1,cn=wt.length}}}}function Il(Ye){var Je,lt,vt,Mt,wt,Bt,cn=Ye.length,fn={},on={};for(Je=0;Je<cn;++Je)(vt=(lt=Ye[Je]).ring[0])[0]!==(wt=lt.ring[lt.ring.length-1])[0]||vt[1]!==wt[1]?(lt.index=Je,fn[vt]=on[wt]=lt):(lt.polygon.push(lt.ring),Ye[Je]=null);for(Je=0;Je<cn;++Je)if(lt=Ye[Je]){if(Mt=on[vt=lt.ring[0]],Bt=fn[wt=lt.ring[lt.ring.length-1]],delete fn[vt],delete on[wt],vt[0]===wt[0]&&vt[1]===wt[1]){lt.polygon.push(lt.ring);continue}Mt?(delete on[vt],delete fn[Mt.ring[0]],Mt.ring.pop(),Ye[Mt.index]=null,lt={index:-1,polygon:Mt.polygon,ring:Mt.ring.concat(lt.ring)},Mt===Bt?lt.polygon.push(lt.ring):(lt.index=cn++,Ye.push(fn[lt.ring[0]]=on[lt.ring[lt.ring.length-1]]=lt))):Bt?(delete fn[wt],delete on[Bt.ring[Bt.ring.length-1]],lt.ring.pop(),lt={index:cn++,polygon:Bt.polygon,ring:lt.ring.concat(Bt.ring)},Ye[Bt.index]=null,Ye.push(fn[lt.ring[0]]=on[lt.ring[lt.ring.length-1]]=lt)):(lt.ring.push(lt.ring[0]),lt.polygon.push(lt.ring))}}function Da(Ye){var Je={type:"Feature",geometry:Go(Ye.geometry)};return null!=Ye.id&&(Je.id=Ye.id),null!=Ye.bbox&&(Je.bbox=Ye.bbox),null!=Ye.properties&&(Je.properties=Ye.properties),Je}function Go(Ye){if(null==Ye)return Ye;var Je,lt,vt,Mt;switch(Ye.type){case"GeometryCollection":Je={type:"GeometryCollection",geometries:Ye.geometries.map(Go)};break;case"Point":Je={type:"Point",coordinates:Ni(Ye.coordinates)};break;case"MultiPoint":case"LineString":Je={type:Ye.type,coordinates:Uo(Ye.coordinates)};break;case"MultiLineString":Je={type:"MultiLineString",coordinates:Ye.coordinates.map(Uo)};break;case"Polygon":var wt=[];el(Ye.coordinates,wt,lt=[]),Il(lt),Je={type:"Polygon",coordinates:wt};break;case"MultiPolygon":lt=[],vt=-1,Mt=Ye.coordinates.length;for(var Bt=new Array(Mt);++vt<Mt;)el(Ye.coordinates[vt],Bt[vt]=[],lt);Il(lt),Je={type:"MultiPolygon",coordinates:Bt.filter(ts)};break;default:return Ye}return null!=Ye.bbox&&(Je.bbox=Ye.bbox),Je}function zs(Ye,Je){var lt=m(Je/2),vt=g(A*lt);return[Ye*(.74482-.34588*vt*vt),1.70711*lt]}function fl(Ye,Je,lt){var vt=x.geoInterpolate(Je,lt),Mt=vt(.5),wt=x.geoRotation([-Mt[0],-Mt[1]])(Je),Bt=vt.distance/2,cn=-R(g(wt[1]*F)/g(Bt)),fn=[-Mt[0],-Mt[1],-(wt[0]>0?w-cn:cn)*D],on=x.geoProjection(Ye(Bt)).rotate(fn),vn=x.geoRotation(fn),Mn=on.center;return delete on.rotate,on.center=function(Ln){return arguments.length?Mn(vn(Ln)):vn.invert(Mn())},on.clipAngle(90)}function Ts(Ye){var Je=i(Ye);function lt(vt,Mt){var wt=x.geoGnomonicRaw(vt,Mt);return wt[0]*=Je,wt}return lt.invert=function(vt,Mt){return x.geoGnomonicRaw.invert(vt/Je,Mt)},lt}function Ka(Ye,Je){return fl(Ts,Ye,Je)}function $l(Ye){if(!(Ye*=2))return x.geoAzimuthalEquidistantRaw;var Je=-Ye/2,lt=-Je,vt=Ye*Ye,Mt=m(lt),wt=.5/g(lt);function Bt(cn,fn){var on=L(i(fn)*i(cn-Je)),vn=L(i(fn)*i(cn-lt));return[((on*=on)-(vn*=vn))/(2*Ye),(fn<0?-1:1)*I(4*vt*vn-(vt-on+vn)*(vt-on+vn))/(2*Ye)]}return Bt.invert=function(cn,fn){var on,vn,Mn=fn*fn,Ln=i(I(Mn+(on=cn+Je)*on)),Pn=i(I(Mn+(on=cn+lt)*on));return[o(vn=Ln-Pn,on=(Ln+Pn)*Mt),(fn<0?-1:1)*L(I(on*on+vn*vn)*wt)]},Bt}function Bs(Ye,Je){return fl($l,Ye,Je)}function Ro(Ye,Je){if(b(Je)<u)return[Ye,0];var lt=b(Je/f),vt=R(lt);if(b(Ye)<u||b(b(Je)-f)<u)return[0,c(Je)*w*m(vt/2)];var Mt=i(vt),wt=b(w/Ye-Ye/w)/2,Bt=wt*wt,cn=Mt/(lt+Mt-1),fn=cn*(2/lt-1),on=fn*fn,vn=on+Bt,Mn=cn-on,Ln=Bt+cn;return[c(Ye)*w*(wt*Mn+I(Bt*Mn*Mn-vn*(cn*cn-on)))/vn,c(Je)*w*(fn*Ln-wt*I((Bt+1)*vn-Ln*Ln))/vn]}function Ho(Ye,Je){if(b(Je)<u)return[Ye,0];var lt=b(Je/f),vt=R(lt);if(b(Ye)<u||b(b(Je)-f)<u)return[0,c(Je)*w*m(vt/2)];var Mt=i(vt),wt=b(w/Ye-Ye/w)/2,Bt=wt*wt,cn=Mt*(I(1+Bt)-wt*Mt)/(1+Bt*lt*lt);return[c(Ye)*w*cn,c(Je)*w*I(1-cn*(2*wt+cn))]}function js(Ye,Je){if(b(Je)<u)return[Ye,0];var lt=Je/f,vt=R(lt);if(b(Ye)<u||b(b(Je)-f)<u)return[0,w*m(vt/2)];var Mt=(w/Ye-Ye/w)/2,wt=lt/(1+i(vt));return[w*(c(Ye)*I(Mt*Mt+1-wt*wt)-Mt),w*wt]}function Ss(Ye,Je){if(!Je)return[Ye,0];var lt=b(Je);if(!Ye||lt===f)return[0,Je];var vt=lt/f,Mt=vt*vt,wt=(8*vt-Mt*(Mt+2)-5)/(2*Mt*(vt-1)),Bt=wt*wt,cn=vt*wt,fn=Mt+Bt+2*cn,on=vt+3*wt,vn=Ye/f,Mn=vn+1/vn,Ln=c(b(Ye)-f)*I(Mn*Mn-4),Pn=Ln*Ln,qn=(Ln*(fn+Bt-1)+2*I(fn*(Mt+Bt*Pn-1)+(1-Mt)*(Mt*(on*on+4*Bt)+12*cn*Bt+4*Bt*Bt)))/(4*fn+Pn);return[c(Ye)*f*qn,c(Je)*f*I(1+Ln*b(qn)-qn*qn)]}function Ys(Ye,Je,lt,vt){var Mt=w/3;Ye=h(Ye,u),Je=h(Je,u),Ye=s(Ye,f),Je=s(Je,w-u),lt=h(lt,0),lt=s(lt,100-u);var wt=(vt=h(vt,u))/100,Bt=L((lt/100+1)*i(Mt))/Mt,cn=g(Ye)/g(Bt*f),fn=Je/w,on=I(wt*g(Ye/2)/g(Je/2));return function(vn,Mn,Ln,Pn,qn){function kr(Fr,Xr){var ai=Ln*g(Pn*Xr),ni=I(1-ai*ai),ri=I(2/(1+ni*i(Fr*=qn)));return[vn*ni*ri*g(Fr),Mn*ai*ri]}return kr.invert=function(Fr,Xr){var ai=Fr/vn,ni=Xr/Mn,ri=I(ai*ai+ni*ni),Hi=2*R(ri/2);return[o(Fr*m(Hi),vn*ri)/qn,ri&&R(Xr*g(Hi)/(Mn*Ln*ri))/Pn]},kr}(on/I(fn*cn*Bt),1/(on*I(fn*cn*Bt)),cn,Bt,fn)}function mo(){var Ye=65*F,Je=60*F,lt=20,vt=200,Mt=x.geoProjectionMutator(Ys),wt=Mt(Ye,Je,lt,vt);return wt.poleline=function(Bt){return arguments.length?Mt(Ye=+Bt*F,Je,lt,vt):Ye*D},wt.parallels=function(Bt){return arguments.length?Mt(Ye,Je=+Bt*F,lt,vt):Je*D},wt.inflation=function(Bt){return arguments.length?Mt(Ye,Je,lt=+Bt,vt):lt},wt.ratio=function(Bt){return arguments.length?Mt(Ye,Je,lt,vt=+Bt):vt},wt.scale(163.775)}zs.invert=function(Ye,Je){var lt=Je/1.70711,vt=g(A*lt);return[Ye/(.74482-.34588*vt*vt),2*e(lt)]},Ro.invert=function(Ye,Je){if(b(Je)<u)return[Ye,0];if(b(Ye)<u)return[0,f*g(2*e(Je/w))];var lt=(Ye/=w)*Ye,vt=(Je/=w)*Je,Mt=lt+vt,wt=Mt*Mt,Bt=-b(Je)*(1+Mt),cn=Bt-2*vt+lt,fn=-2*Bt+1+2*vt+wt,on=vt/fn+(2*cn*cn*cn/(fn*fn*fn)-9*Bt*cn/(fn*fn))/27,vn=(Bt-cn*cn/(3*fn))/fn,Mn=2*I(-vn/3),Ln=L(3*on/(vn*Mn))/3;return[w*(Mt-1+I(1+2*(lt-vt)+wt))/(2*Ye),c(Je)*w*(-Mn*i(Ln+w/3)-cn/(3*fn))]},Ho.invert=function(Ye,Je){if(!Ye)return[0,f*g(2*e(Je/w))];var lt=b(Ye/w),vt=(1-lt*lt-(Je/=w)*Je)/(2*lt),Mt=I(vt*vt+1);return[c(Ye)*w*(Mt-vt),c(Je)*f*g(2*o(I((1-2*vt*lt)*(vt+Mt)-lt),I(Mt+vt+lt)))]},js.invert=function(Ye,Je){if(!Je)return[Ye,0];var lt=Je/w,vt=(w*w*(1-lt*lt)-Ye*Ye)/(2*w*Ye);return[Ye?w*(c(Ye)*I(vt*vt+1)-vt):0,f*g(2*e(lt))]},Ss.invert=function(Ye,Je){var lt;if(!Ye||!Je)return[Ye,Je];Je/=w;var vt=c(Ye)*Ye/f,Mt=(vt*vt-1+4*Je*Je)/b(vt),wt=Mt*Mt,Bt=2*Je,cn=50;do{var fn=Bt*Bt,on=(8*Bt-fn*(fn+2)-5)/(2*fn*(Bt-1)),vn=(3*Bt-fn*Bt-10)/(2*fn*Bt),Mn=on*on,Ln=Bt*on,Pn=Bt+on,qn=Pn*Pn,kr=Bt+3*on,Fr=-2*Pn*(4*Ln*Mn+(1-4*fn+3*fn*fn)*(1+vn)+Mn*(14*fn-6-wt+(8*fn-8-2*wt)*vn)+Ln*(12*fn-8+(10*fn-10-wt)*vn)),Xr=I(qn*(fn+Mn*wt-1)+(1-fn)*(fn*(kr*kr+4*Mn)+Mn*(12*Ln+4*Mn)));Bt-=lt=(Mt*(qn+Mn-1)+2*Xr-vt*(4*qn+wt))/(Mt*(2*on*vn+2*Pn*(1+vn))+Fr/Xr-8*Pn*(Mt*(-1+Mn+qn)+2*Xr)*(1+vn)/(wt+4*qn))}while(lt>u&&--cn>0);return[c(Ye)*(I(Mt*Mt+4)+Mt)*w/4,f*Bt]};var Pl=4*w+3*I(3),Ms=2*I(2*w*I(3)/Pl),tl=le(Ms*I(3)/w,Ms,Pl/6);function Ol(Ye,Je){return[Ye*I(1-3*Je*Je/(w*w)),Je]}function Zs(Ye,Je){var lt=i(Je),vt=i(Ye)*lt,Mt=1-vt,wt=i(Ye=o(g(Ye)*lt,-g(Je))),Bt=g(Ye);return[Bt*(lt=I(1-vt*vt))-wt*Mt,-wt*lt-Bt*Mt]}function ja(Ye,Je){var lt=Y(Ye,Je);return[(lt[0]+Ye/f)/2,(lt[1]+Je)/2]}Ol.invert=function(Ye,Je){return[Ye/I(1-3*Je*Je/(w*w)),Je]},Zs.invert=function(Ye,Je){var lt=(Ye*Ye+Je*Je)/-2,vt=I(-lt*(2+lt)),Mt=Je*lt+Ye*vt,wt=Ye*lt-Je*vt,Bt=I(wt*wt+Mt*Mt);return[o(vt*Mt,Bt*(1+lt)),Bt?-R(vt*wt/Bt):0]},ja.invert=function(Ye,Je){var lt=Ye,vt=Je,Mt=25;do{var wt,Bt=i(vt),cn=g(vt),fn=g(2*vt),on=cn*cn,vn=Bt*Bt,Mn=g(lt),Ln=i(lt/2),Pn=g(lt/2),qn=Pn*Pn,kr=1-vn*Ln*Ln,Fr=kr?L(Bt*Ln)*I(wt=1/kr):wt=0,Xr=.5*(2*Fr*Bt*Pn+lt/f)-Ye,ai=.5*(Fr*cn+vt)-Je,ni=.5*wt*(vn*qn+Fr*Bt*Ln*on)+.5/f,ri=wt*(Mn*fn/4-Fr*cn*Pn),Hi=.125*wt*(fn*Pn-Fr*cn*vn*Mn),ra=.5*wt*(on*Ln+Fr*qn*Bt)+.5,La=ri*Hi-ra*ni,Sa=(ai*ri-Xr*ra)/La,Oa=(Xr*Hi-ai*ni)/La;lt-=Sa,vt-=Oa}while((b(Sa)>u||b(Oa)>u)&&--Mt>0);return[lt,vt]},v.geoNaturalEarth=x.geoNaturalEarth1,v.geoNaturalEarthRaw=x.geoNaturalEarth1Raw,v.geoAiry=function(){var Ye=f,Je=x.geoProjectionMutator(Z),lt=Je(Ye);return lt.radius=function(vt){return arguments.length?Je(Ye=vt*F):Ye*D},lt.scale(179.976).clipAngle(147)},v.geoAiryRaw=Z,v.geoAitoff=function(){return x.geoProjection(Y).scale(152.63)},v.geoAitoffRaw=Y,v.geoArmadillo=function(){var Ye=20*F,Je=Ye>=0?1:-1,lt=m(Je*Ye),vt=x.geoProjectionMutator(Q),Mt=vt(Ye),wt=Mt.stream;return Mt.parallel=function(Bt){return arguments.length?(lt=m((Je=(Ye=Bt*F)>=0?1:-1)*Ye),vt(Ye)):Ye*D},Mt.stream=function(Bt){var cn=Mt.rotate(),fn=wt(Bt),on=(Mt.rotate([0,0]),wt(Bt)),vn=Mt.precision();return Mt.rotate(cn),fn.sphere=function(){on.polygonStart(),on.lineStart();for(var Mn=-180*Je;Je*Mn<180;Mn+=90*Je)on.point(Mn,90*Je);if(Ye)for(;Je*(Mn-=3*Je*vn)>=-180;)on.point(Mn,Je*-o(i(Mn*F/2),lt)*D);on.lineEnd(),on.polygonEnd()},fn},Mt.scale(218.695).center([0,28.0974])},v.geoArmadilloRaw=Q,v.geoAugust=function(){return x.geoProjection(re).scale(66.1603)},v.geoAugustRaw=re,v.geoBaker=function(){return x.geoProjection(ie).scale(112.314)},v.geoBakerRaw=ie,v.geoBerghaus=function(){var Ye=5,Je=x.geoProjectionMutator(j),lt=Je(Ye),vt=lt.stream,Mt=-i(.01*F),wt=g(.01*F);return lt.lobes=function(Bt){return arguments.length?Je(Ye=+Bt):Ye},lt.stream=function(Bt){var cn=lt.rotate(),fn=vt(Bt),on=(lt.rotate([0,0]),vt(Bt));return lt.rotate(cn),fn.sphere=function(){on.polygonStart(),on.lineStart();for(var vn=0,Mn=360/Ye,Ln=2*w/Ye,Pn=90-180/Ye,qn=f;vn<Ye;++vn,Pn-=Mn,qn-=Ln)on.point(o(wt*i(qn),Mt)*D,R(wt*g(qn))*D),Pn<-90?(on.point(-90,-180-Pn-.01),on.point(-90,-180-Pn+.01)):(on.point(90,Pn+.01),on.point(90,Pn-.01));on.lineEnd(),on.polygonEnd()},fn},lt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},v.geoBerghausRaw=j,v.geoBertin1953=function(){return x.geoProjection(ee()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},v.geoBertin1953Raw=ee,v.geoBoggs=function(){return x.geoProjection(be).scale(160.857)},v.geoBoggsRaw=be,v.geoBonne=function(){return me(Ee).scale(123.082).center([0,26.1441]).parallel(45)},v.geoBonneRaw=Ee,v.geoBottomley=function(){var Ye=.5,Je=x.geoProjectionMutator(De),lt=Je(Ye);return lt.fraction=function(vt){return arguments.length?Je(Ye=+vt):Ye},lt.scale(158.837)},v.geoBottomleyRaw=De,v.geoBromley=function(){return x.geoProjection(Se).scale(152.63)},v.geoBromleyRaw=Se,v.geoChamberlin=Re,v.geoChamberlinRaw=Ie,v.geoChamberlinAfrica=function(){return Re([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},v.geoCollignon=function(){return x.geoProjection(Ue).scale(95.6464).center([0,30])},v.geoCollignonRaw=Ue,v.geoCraig=function(){return me(qe).scale(249.828).clipAngle(90)},v.geoCraigRaw=qe,v.geoCraster=function(){return x.geoProjection(st).scale(156.19)},v.geoCrasterRaw=st,v.geoCylindricalEqualArea=function(){return me(He).parallel(38.58).scale(195.044)},v.geoCylindricalEqualAreaRaw=He,v.geoCylindricalStereographic=function(){return me($e).scale(124.75)},v.geoCylindricalStereographicRaw=$e,v.geoEckert1=function(){return x.geoProjection(et).scale(165.664)},v.geoEckert1Raw=et,v.geoEckert2=function(){return x.geoProjection(tt).scale(165.664)},v.geoEckert2Raw=tt,v.geoEckert3=function(){return x.geoProjection(ct).scale(180.739)},v.geoEckert3Raw=ct,v.geoEckert4=function(){return x.geoProjection(bt).scale(180.739)},v.geoEckert4Raw=bt,v.geoEckert5=function(){return x.geoProjection(At).scale(173.044)},v.geoEckert5Raw=At,v.geoEckert6=function(){return x.geoProjection(Ut).scale(173.044)},v.geoEckert6Raw=Ut,v.geoEisenlohr=function(){return x.geoProjection(dt).scale(62.5271)},v.geoEisenlohrRaw=dt,v.geoFahey=function(){return x.geoProjection(Nt).scale(137.152)},v.geoFaheyRaw=Nt,v.geoFoucaut=function(){return x.geoProjection(rn).scale(135.264)},v.geoFoucautRaw=rn,v.geoFoucautSinusoidal=function(){var Ye=.5,Je=x.geoProjectionMutator(en),lt=Je(Ye);return lt.alpha=function(vt){return arguments.length?Je(Ye=+vt):Ye},lt.scale(168.725)},v.geoFoucautSinusoidalRaw=en,v.geoGilbert=function(Ye){null==Ye&&(Ye=x.geoOrthographic);var Je=Ye(),lt=x.geoEquirectangular().scale(D).precision(0).clipAngle(null).translate([0,0]);function vt(wt){return Je(Ge(wt))}function Mt(wt){vt[wt]=function(){return arguments.length?(Je[wt].apply(Je,arguments),vt):Je[wt]()}}return Je.invert&&(vt.invert=function(wt){return Qe(Je.invert(wt))}),vt.stream=function(wt){var Bt=Je.stream(wt),cn=lt.stream({point:function(fn,on){Bt.point(fn/2,R(m(-on/2*F))*D)},lineStart:function(){Bt.lineStart()},lineEnd:function(){Bt.lineEnd()},polygonStart:function(){Bt.polygonStart()},polygonEnd:function(){Bt.polygonEnd()}});return cn.sphere=Bt.sphere,cn},vt.rotate=function(wt){return arguments.length?(lt.rotate(wt),vt):lt.rotate()},vt.center=function(wt){return arguments.length?(Je.center(Ge(wt)),vt):Qe(Je.center())},Mt("angle"),Mt("clipAngle"),Mt("clipExtent"),Mt("fitExtent"),Mt("fitHeight"),Mt("fitSize"),Mt("fitWidth"),Mt("scale"),Mt("translate"),Mt("precision"),vt.scale(249.5)},v.geoGingery=function(){var Ye=6,Je=30*F,lt=i(Je),vt=g(Je),Mt=x.geoProjectionMutator(Rt),wt=Mt(Je,Ye),Bt=wt.stream,cn=-i(.01*F),fn=g(.01*F);return wt.radius=function(on){return arguments.length?(lt=i(Je=on*F),vt=g(Je),Mt(Je,Ye)):Je*D},wt.lobes=function(on){return arguments.length?Mt(Je,Ye=+on):Ye},wt.stream=function(on){var vn=wt.rotate(),Mn=Bt(on),Ln=(wt.rotate([0,0]),Bt(on));return wt.rotate(vn),Mn.sphere=function(){Ln.polygonStart(),Ln.lineStart();for(var Pn=0,qn=2*w/Ye,kr=0;Pn<Ye;++Pn,kr-=qn)Ln.point(o(fn*i(kr),cn)*D,R(fn*g(kr))*D),Ln.point(o(vt*i(kr-qn/2),lt)*D,R(vt*g(kr-qn/2))*D);Ln.lineEnd(),Ln.polygonEnd()},Mn},wt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},v.geoGingeryRaw=Rt,v.geoGinzburg4=function(){return x.geoProjection(Le).scale(149.995)},v.geoGinzburg4Raw=Le,v.geoGinzburg5=function(){return x.geoProjection(je).scale(153.93)},v.geoGinzburg5Raw=je,v.geoGinzburg6=function(){return x.geoProjection(Ke).scale(130.945)},v.geoGinzburg6Raw=Ke,v.geoGinzburg8=function(){return x.geoProjection(ft).scale(131.747)},v.geoGinzburg8Raw=ft,v.geoGinzburg9=function(){return x.geoProjection(mt).scale(131.087)},v.geoGinzburg9Raw=mt,v.geoGringorten=function(){return x.geoProjection(pt(Ot)).scale(239.75)},v.geoGringortenRaw=Ot,v.geoGuyou=function(){return x.geoProjection(pt($t)).scale(151.496)},v.geoGuyouRaw=$t,v.geoHammer=function(){var Ye=2,Je=x.geoProjectionMutator(q),lt=Je(Ye);return lt.coefficient=function(vt){return arguments.length?Je(Ye=+vt):Ye},lt.scale(169.529)},v.geoHammerRaw=q,v.geoHammerRetroazimuthal=function(){var Ye=0,Je=x.geoProjectionMutator(ut),lt=Je(Ye),vt=lt.rotate,Mt=lt.stream,wt=x.geoCircle();return lt.parallel=function(Bt){if(!arguments.length)return Ye*D;var cn=lt.rotate();return Je(Ye=Bt*F).rotate(cn)},lt.rotate=function(Bt){return arguments.length?(vt.call(lt,[Bt[0],Bt[1]-Ye*D]),wt.center([-Bt[0],-Bt[1]]),lt):((Bt=vt.call(lt))[1]+=Ye*D,Bt)},lt.stream=function(Bt){return(Bt=Mt(Bt)).sphere=function(){Bt.polygonStart();var cn,fn=wt.radius(89.99)().coordinates[0],on=fn.length-1,vn=-1;for(Bt.lineStart();++vn<on;)Bt.point((cn=fn[vn])[0],cn[1]);for(Bt.lineEnd(),on=(fn=wt.radius(90.01)().coordinates[0]).length-1,Bt.lineStart();--vn>=0;)Bt.point((cn=fn[vn])[0],cn[1]);Bt.lineEnd(),Bt.polygonEnd()},Bt},lt.scale(79.4187).parallel(45).clipAngle(179.999)},v.geoHammerRetroazimuthalRaw=ut,v.geoHealpix=function(){var Ye=4,Je=x.geoProjectionMutator(Ht),lt=Je(Ye),vt=lt.stream;return lt.lobes=function(Mt){return arguments.length?Je(Ye=+Mt):Ye},lt.stream=function(Mt){var wt=lt.rotate(),Bt=vt(Mt),cn=(lt.rotate([0,0]),vt(Mt));return lt.rotate(wt),Bt.sphere=function(){var fn,on;x.geoStream((on=[].concat(T.range(-180,180+(fn=180/Ye)/2,fn).map(Ne),T.range(180,-180-fn/2,-fn).map(ot)),{type:"Polygon",coordinates:[180===fn?on.map(yt):on]}),cn)},Bt},lt.scale(239.75)},v.geoHealpixRaw=Ht,v.geoHill=function(){var Ye=1,Je=x.geoProjectionMutator(It),lt=Je(Ye);return lt.ratio=function(vt){return arguments.length?Je(Ye=+vt):Ye},lt.scale(167.774).center([0,18.67])},v.geoHillRaw=It,v.geoHomolosine=function(){return x.geoProjection(ln).scale(152.63)},v.geoHomolosineRaw=ln,v.geoHufnagel=function(){var Ye=1,Je=0,lt=45*F,vt=2,Mt=x.geoProjectionMutator(un),wt=Mt(Ye,Je,lt,vt);return wt.a=function(Bt){return arguments.length?Mt(Ye=+Bt,Je,lt,vt):Ye},wt.b=function(Bt){return arguments.length?Mt(Ye,Je=+Bt,lt,vt):Je},wt.psiMax=function(Bt){return arguments.length?Mt(Ye,Je,lt=+Bt*F,vt):lt*D},wt.ratio=function(Bt){return arguments.length?Mt(Ye,Je,lt,vt=+Bt):vt},wt.scale(180.739)},v.geoHufnagelRaw=un,v.geoHyperelliptical=function(){var Ye=0,Je=2.5,lt=1.183136,vt=x.geoProjectionMutator(wn),Mt=vt(Ye,Je,lt);return Mt.alpha=function(wt){return arguments.length?vt(Ye=+wt,Je,lt):Ye},Mt.k=function(wt){return arguments.length?vt(Ye,Je=+wt,lt):Je},Mt.gamma=function(wt){return arguments.length?vt(Ye,Je,lt=+wt):lt},Mt.scale(152.63)},v.geoHyperellipticalRaw=wn,v.geoInterrupt=pn,v.geoInterruptedBoggs=function(){return pn(be,xn).scale(160.857)},v.geoInterruptedHomolosine=function(){return pn(ln,En).scale(152.63)},v.geoInterruptedMollweide=function(){return pn(ue,In).scale(169.529)},v.geoInterruptedMollweideHemispheres=function(){return pn(ue,Yn).scale(169.529).rotate([20,0])},v.geoInterruptedSinuMollweide=function(){return pn(Vt,nr,G).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},v.geoInterruptedSinusoidal=function(){return pn(_e,sr).scale(152.63).rotate([-20,0])},v.geoKavrayskiy7=function(){return x.geoProjection(Ar).scale(158.837)},v.geoKavrayskiy7Raw=Ar,v.geoLagrange=function(){var Ye=.5,Je=x.geoProjectionMutator(yr),lt=Je(Ye);return lt.spacing=function(vt){return arguments.length?Je(Ye=+vt):Ye},lt.scale(124.75)},v.geoLagrangeRaw=yr,v.geoLarrivee=function(){return x.geoProjection(Wr).scale(97.2672)},v.geoLarriveeRaw=Wr,v.geoLaskowski=function(){return x.geoProjection(lr).scale(139.98)},v.geoLaskowskiRaw=lr,v.geoLittrow=function(){return x.geoProjection(Hn).scale(144.049).clipAngle(89.999)},v.geoLittrowRaw=Hn,v.geoLoximuthal=function(){return me(Sr).parallel(40).scale(158.837)},v.geoLoximuthalRaw=Sr,v.geoMiller=function(){return x.geoProjection(ti).scale(108.318)},v.geoMillerRaw=ti,v.geoModifiedStereographic=Or,v.geoModifiedStereographicRaw=Fn,v.geoModifiedStereographicAlaska=function(){return Or(br,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},v.geoModifiedStereographicGs48=function(){return Or(xr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},v.geoModifiedStereographicGs50=function(){return Or(Kn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},v.geoModifiedStereographicMiller=function(){return Or(Qr,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},v.geoModifiedStereographicLee=function(){return Or(ci,[165,10]).scale(250).clipAngle(130).center([-165,-10])},v.geoMollweide=function(){return x.geoProjection(ue).scale(169.529)},v.geoMollweideRaw=ue,v.geoMtFlatPolarParabolic=function(){return x.geoProjection(Tn).scale(164.859)},v.geoMtFlatPolarParabolicRaw=Tn,v.geoMtFlatPolarQuartic=function(){return x.geoProjection(tr).scale(188.209)},v.geoMtFlatPolarQuarticRaw=tr,v.geoMtFlatPolarSinusoidal=function(){return x.geoProjection(Zt).scale(166.518)},v.geoMtFlatPolarSinusoidalRaw=Zt,v.geoNaturalEarth2=function(){return x.geoProjection(yn).scale(175.295)},v.geoNaturalEarth2Raw=yn,v.geoNellHammer=function(){return x.geoProjection(Cn).scale(152.63)},v.geoNellHammerRaw=Cn,v.geoInterruptedQuarticAuthalic=function(){return pn(q(1/0),rr).rotate([20,0]).scale(152.63)},v.geoNicolosi=function(){return x.geoProjection(Qn).scale(127.267)},v.geoNicolosiRaw=Qn,v.geoPatterson=function(){return x.geoProjection(Jn).scale(139.319)},v.geoPattersonRaw=Jn,v.geoPolyconic=function(){return x.geoProjection(Wn).scale(103.74)},v.geoPolyconicRaw=Wn,v.geoPolyhedral=fr,v.geoPolyhedralButterfly=function(Ye){Ye=Ye||function(lt){var vt=x.geoCentroid({type:"MultiPoint",coordinates:lt});return x.geoGnomonic().scale(1).translate([0,0]).rotate([-vt[0],-vt[1]])};var Je=zr.map(function(lt){return{face:lt,project:Ye(lt)}});return[-1,0,0,1,0,1,4,5].forEach(function(lt,vt){var Mt=Je[lt];Mt&&(Mt.children||(Mt.children=[])).push(Je[vt])}),fr(Je[0],function(lt,vt){return Je[lt<-w/2?vt<0?6:4:lt<0?vt<0?2:0:lt<w/2?vt<0?3:1:vt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},v.geoPolyhedralCollignon=function(Ye){Ye=Ye||function(lt){var vt=x.geoCentroid({type:"MultiPoint",coordinates:lt});return x.geoProjection(or).translate([0,0]).scale(1).rotate(vt[1]>0?[-vt[0],0]:[180-vt[0],180])};var Je=zr.map(function(lt){return{face:lt,project:Ye(lt)}});return[-1,0,0,1,0,1,4,5].forEach(function(lt,vt){var Mt=Je[lt];Mt&&(Mt.children||(Mt.children=[])).push(Je[vt])}),fr(Je[0],function(lt,vt){return Je[lt<-w/2?vt<0?6:4:lt<0?vt<0?2:0:lt<w/2?vt<0?3:1:vt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},v.geoPolyhedralWaterman=function(Ye){Ye=Ye||function(wt){var Bt=6===wt.length?x.geoCentroid({type:"MultiPoint",coordinates:wt}):wt[0];return x.geoGnomonic().scale(1).translate([0,0]).rotate([-Bt[0],-Bt[1]])};var Je=zr.map(function(wt){for(var Bt,cn=wt.map(mi),fn=cn.length,on=cn[fn-1],vn=[],Mn=0;Mn<fn;++Mn)vn.push(Zr([.9486832980505138*on[0]+.31622776601683794*(Bt=cn[Mn])[0],.9486832980505138*on[1]+.31622776601683794*Bt[1],.9486832980505138*on[2]+.31622776601683794*Bt[2]]),Zr([.9486832980505138*Bt[0]+.31622776601683794*on[0],.9486832980505138*Bt[1]+.31622776601683794*on[1],.9486832980505138*Bt[2]+.31622776601683794*on[2]])),on=Bt;return vn}),lt=[],vt=[-1,0,0,1,0,1,4,5];Je.forEach(function(wt,Bt){for(var cn,fn,on=zr[Bt],vn=on.length,Mn=lt[Bt]=[],Ln=0;Ln<vn;++Ln)Je.push([on[Ln],wt[(2*Ln+2)%(2*vn)],wt[(2*Ln+1)%(2*vn)]]),vt.push(Bt),Mn.push((cn=mi(wt[(2*Ln+2)%(2*vn)]),fn=mi(wt[(2*Ln+1)%(2*vn)]),[cn[1]*fn[2]-cn[2]*fn[1],cn[2]*fn[0]-cn[0]*fn[2],cn[0]*fn[1]-cn[1]*fn[0]]))});var Mt=Je.map(function(wt){return{project:Ye(wt),face:wt}});return vt.forEach(function(wt,Bt){var cn=Mt[wt];cn&&(cn.children||(cn.children=[])).push(Mt[Bt])}),fr(Mt[0],function(wt,Bt){var cn=i(Bt),fn=[cn*i(wt),cn*g(wt),g(Bt)],on=wt<-w/2?Bt<0?6:4:wt<0?Bt<0?2:0:wt<w/2?Bt<0?3:1:Bt<0?7:5,vn=lt[on];return Mt[Ur(vn[0],fn)<0?8+3*on:Ur(vn[1],fn)<0?8+3*on+1:Ur(vn[2],fn)<0?8+3*on+2:on]}).angle(-30).scale(110.625).center([0,45])},v.geoProject=function(Ye,Je){var lt,vt=Je.stream;if(!vt)throw new Error("invalid projection");switch(Ye&&Ye.type){case"Feature":lt=qr;break;case"FeatureCollection":lt=Vi;break;default:lt=wi}return lt(Ye,vt)},v.geoGringortenQuincuncial=function(){return pa(Ot).scale(176.423)},v.geoPeirceQuincuncial=ei,v.geoPierceQuincuncial=ei,v.geoQuantize=function(Ye,Je){if(!(0<=(Je=+Je)&&Je<=20))throw new Error("invalid digits");function lt(on){var vn=on.length,Mn=2,Ln=new Array(vn);for(Ln[0]=+on[0].toFixed(Je),Ln[1]=+on[1].toFixed(Je);Mn<vn;)Ln[Mn]=on[Mn],++Mn;return Ln}function vt(on){return on.map(lt)}function Mt(on){for(var vn=lt(on[0]),Mn=[vn],Ln=1;Ln<on.length;Ln++){var Pn=lt(on[Ln]);(Pn.length>2||Pn[0]!=vn[0]||Pn[1]!=vn[1])&&(Mn.push(Pn),vn=Pn)}return 1===Mn.length&&on.length>1&&Mn.push(lt(on[on.length-1])),Mn}function wt(on){return on.map(Mt)}function Bt(on){if(null==on)return on;var vn;switch(on.type){case"GeometryCollection":vn={type:"GeometryCollection",geometries:on.geometries.map(Bt)};break;case"Point":vn={type:"Point",coordinates:lt(on.coordinates)};break;case"MultiPoint":vn={type:on.type,coordinates:vt(on.coordinates)};break;case"LineString":vn={type:on.type,coordinates:Mt(on.coordinates)};break;case"MultiLineString":case"Polygon":vn={type:on.type,coordinates:wt(on.coordinates)};break;case"MultiPolygon":vn={type:"MultiPolygon",coordinates:on.coordinates.map(wt)};break;default:return on}return null!=on.bbox&&(vn.bbox=on.bbox),vn}function cn(on){var vn={type:"Feature",properties:on.properties,geometry:Bt(on.geometry)};return null!=on.id&&(vn.id=on.id),null!=on.bbox&&(vn.bbox=on.bbox),vn}if(null!=Ye)switch(Ye.type){case"Feature":return cn(Ye);case"FeatureCollection":var fn={type:"FeatureCollection",features:Ye.features.map(cn)};return null!=Ye.bbox&&(fn.bbox=Ye.bbox),fn;default:return Bt(Ye)}return Ye},v.geoQuincuncial=pa,v.geoRectangularPolyconic=function(){return me(Ki).scale(131.215)},v.geoRectangularPolyconicRaw=Ki,v.geoRobinson=function(){return x.geoProjection(so).scale(152.63)},v.geoRobinsonRaw=so,v.geoSatellite=function(){var Ye=2,Je=0,lt=x.geoProjectionMutator(Vo),vt=lt(Ye,Je);return vt.distance=function(Mt){return arguments.length?lt(Ye=+Mt,Je):Ye},vt.tilt=function(Mt){return arguments.length?lt(Ye,Je=Mt*F):Je*D},vt.scale(432.147).clipAngle(L(1/Ye)*D-1e-6)},v.geoSatelliteRaw=Vo,v.geoSinuMollweide=function(){return x.geoProjection(Vt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},v.geoSinuMollweideRaw=Vt,v.geoSinusoidal=function(){return x.geoProjection(_e).scale(152.63)},v.geoSinusoidalRaw=_e,v.geoStitch=function(Ye){if(null==Ye)return Ye;switch(Ye.type){case"Feature":return Da(Ye);case"FeatureCollection":var Je={type:"FeatureCollection",features:Ye.features.map(Da)};return null!=Ye.bbox&&(Je.bbox=Ye.bbox),Je;default:return Go(Ye)}},v.geoTimes=function(){return x.geoProjection(zs).scale(146.153)},v.geoTimesRaw=zs,v.geoTwoPointAzimuthal=Ka,v.geoTwoPointAzimuthalRaw=Ts,v.geoTwoPointAzimuthalUsa=function(){return Ka([-158,21.5],[-77,39]).clipAngle(60).scale(400)},v.geoTwoPointEquidistant=Bs,v.geoTwoPointEquidistantRaw=$l,v.geoTwoPointEquidistantUsa=function(){return Bs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},v.geoVanDerGrinten=function(){return x.geoProjection(Ro).scale(79.4183)},v.geoVanDerGrintenRaw=Ro,v.geoVanDerGrinten2=function(){return x.geoProjection(Ho).scale(79.4183)},v.geoVanDerGrinten2Raw=Ho,v.geoVanDerGrinten3=function(){return x.geoProjection(js).scale(79.4183)},v.geoVanDerGrinten3Raw=js,v.geoVanDerGrinten4=function(){return x.geoProjection(Ss).scale(127.16)},v.geoVanDerGrinten4Raw=Ss,v.geoWagner=mo,v.geoWagner7=function(){return mo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},v.geoWagnerRaw=Ys,v.geoWagner4=function(){return x.geoProjection(tl).scale(176.84)},v.geoWagner4Raw=tl,v.geoWagner6=function(){return x.geoProjection(Ol).scale(152.63)},v.geoWagner6Raw=Ol,v.geoWiechel=function(){return x.geoProjection(Zs).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},v.geoWiechelRaw=Zs,v.geoWinkel3=function(){return x.geoProjection(ja).scale(158.837)},v.geoWinkel3Raw=ja,Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-geo"),_("d3-array")):x(v.d3=v.d3||{},v.d3,v.d3)},{"d3-array":107,"d3-geo":114}],114:[function(_,oe,se){var v,x;v=this,x=function(v,x){"use strict";function T(){return new b}function b(){this.reset()}b.prototype={constructor:b,reset:function(){this.s=this.t=0},add:function(_t){o(e,_t,this.t),o(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new b;function o(_t,qt,_n){var nn=_t.s=qt+_n,dn=nn-qt;_t.t=qt-(nn-dn)+(_n-dn)}var i=1e-6,l=Math.PI,r=l/2,y=l/4,h=2*l,s=180/l,d=l/180,p=Math.abs,c=Math.atan,g=Math.atan2,m=Math.cos,u=Math.ceil,w=Math.exp,f=Math.log,A=Math.pow,M=Math.sin,k=Math.sign||function(_t){return _t>0?1:_t<0?-1:0},E=Math.sqrt,P=Math.tan;function D(_t){return _t>1?0:_t<-1?l:Math.acos(_t)}function F(_t){return _t>1?r:_t<-1?-r:Math.asin(_t)}function R(_t){return(_t=M(_t/2))*_t}function L(){}function I(_t,qt){_t&&V.hasOwnProperty(_t.type)&&V[_t.type](_t,qt)}var B={Feature:function(_t,qt){I(_t.geometry,qt)},FeatureCollection:function(_t,qt){for(var _n=_t.features,nn=-1,dn=_n.length;++nn<dn;)I(_n[nn].geometry,qt)}},V={Sphere:function(_t,qt){qt.sphere()},Point:function(_t,qt){qt.point((_t=_t.coordinates)[0],_t[1],_t[2])},MultiPoint:function(_t,qt){for(var _n=_t.coordinates,nn=-1,dn=_n.length;++nn<dn;)qt.point((_t=_n[nn])[0],_t[1],_t[2])},LineString:function(_t,qt){Z(_t.coordinates,qt,0)},MultiLineString:function(_t,qt){for(var _n=_t.coordinates,nn=-1,dn=_n.length;++nn<dn;)Z(_n[nn],qt,0)},Polygon:function(_t,qt){Y(_t.coordinates,qt)},MultiPolygon:function(_t,qt){for(var _n=_t.coordinates,nn=-1,dn=_n.length;++nn<dn;)Y(_n[nn],qt)},GeometryCollection:function(_t,qt){for(var _n=_t.geometries,nn=-1,dn=_n.length;++nn<dn;)I(_n[nn],qt)}};function Z(_t,qt,_n){var nn,dn=-1,Un=_t.length-_n;for(qt.lineStart();++dn<Un;)qt.point((nn=_t[dn])[0],nn[1],nn[2]);qt.lineEnd()}function Y(_t,qt){var _n=-1,nn=_t.length;for(qt.polygonStart();++_n<nn;)Z(_t[_n],qt,1);qt.polygonEnd()}function Q(_t,qt){_t&&B.hasOwnProperty(_t.type)?B[_t.type](_t,qt):I(_t,qt)}var re,$,J,ie,j,q=T(),W=T(),ae={point:L,lineStart:L,lineEnd:L,polygonStart:function(){q.reset(),ae.lineStart=G,ae.lineEnd=ee},polygonEnd:function(){var _t=+q;W.add(_t<0?h+_t:_t),this.lineStart=this.lineEnd=this.point=L},sphere:function(){W.add(h)}};function G(){ae.point=te}function ee(){le(re,$)}function te(_t,qt){ae.point=le,re=_t,$=qt,J=_t*=d,ie=m(qt=(qt*=d)/2+y),j=M(qt)}function le(_t,qt){var _n=(_t*=d)-J,nn=_n>=0?1:-1,dn=nn*_n,Un=m(qt=(qt*=d)/2+y),$n=M(qt),cr=j*$n,Tr=ie*Un+cr*m(dn),Er=cr*nn*M(dn);q.add(g(Er,Tr)),J=_t,ie=Un,j=$n}function ue(_t){return[g(_t[1],_t[0]),F(_t[2])]}function de(_t){var qt=_t[0],_n=_t[1],nn=m(_n);return[nn*m(qt),nn*M(qt),M(_n)]}function he(_t,qt){return _t[0]*qt[0]+_t[1]*qt[1]+_t[2]*qt[2]}function be(_t,qt){return[_t[1]*qt[2]-_t[2]*qt[1],_t[2]*qt[0]-_t[0]*qt[2],_t[0]*qt[1]-_t[1]*qt[0]]}function me(_t,qt){_t[0]+=qt[0],_t[1]+=qt[1],_t[2]+=qt[2]}function _e(_t,qt){return[_t[0]*qt,_t[1]*qt,_t[2]*qt]}function Ee(_t){var qt=E(_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2]);_t[0]/=qt,_t[1]/=qt,_t[2]/=qt}var De,Se,Fe,ve,Te,Ie,Ce,Re,Ue,qe,Xe,st,He,$e,et,tt,ct,bt,At,Ut,Ct,dt,at,Nt,rn,en,Ge=T(),Qe={point:Rt,lineStart:Be,lineEnd:Ve,polygonStart:function(){Qe.point=Le,Qe.lineStart=je,Qe.lineEnd=Ke,Ge.reset(),ae.polygonStart()},polygonEnd:function(){ae.polygonEnd(),Qe.point=Rt,Qe.lineStart=Be,Qe.lineEnd=Ve,q<0?(De=-(Fe=180),Se=-(ve=90)):Ge>i?ve=90:Ge<-i&&(Se=-90),qe[0]=De,qe[1]=Fe},sphere:function(){De=-(Fe=180),Se=-(ve=90)}};function Rt(_t,qt){Ue.push(qe=[De=_t,Fe=_t]),qt<Se&&(Se=qt),qt>ve&&(ve=qt)}function gt(_t,qt){var _n=de([_t*d,qt*d]);if(Re){var nn=be(Re,_n),dn=be([nn[1],-nn[0],0],nn);Ee(dn),dn=ue(dn);var Un,$n=_t-Te,cr=$n>0?1:-1,Tr=dn[0]*s*cr,Er=p($n)>180;Er^(cr*Te<Tr&&Tr<cr*_t)?(Un=dn[1]*s)>ve&&(ve=Un):Er^(cr*Te<(Tr=(Tr+360)%360-180)&&Tr<cr*_t)?(Un=-dn[1]*s)<Se&&(Se=Un):(qt<Se&&(Se=qt),qt>ve&&(ve=qt)),Er?_t<Te?ft(De,_t)>ft(De,Fe)&&(Fe=_t):ft(_t,Fe)>ft(De,Fe)&&(De=_t):Fe>=De?(_t<De&&(De=_t),_t>Fe&&(Fe=_t)):_t>Te?ft(De,_t)>ft(De,Fe)&&(Fe=_t):ft(_t,Fe)>ft(De,Fe)&&(De=_t)}else Ue.push(qe=[De=_t,Fe=_t]);qt<Se&&(Se=qt),qt>ve&&(ve=qt),Re=_n,Te=_t}function Be(){Qe.point=gt}function Ve(){qe[0]=De,qe[1]=Fe,Qe.point=Rt,Re=null}function Le(_t,qt){if(Re){var _n=_t-Te;Ge.add(p(_n)>180?_n+(_n>0?360:-360):_n)}else Ie=_t,Ce=qt;ae.point(_t,qt),gt(_t,qt)}function je(){ae.lineStart()}function Ke(){Le(Ie,Ce),ae.lineEnd(),p(Ge)>i&&(De=-(Fe=180)),qe[0]=De,qe[1]=Fe,Re=null}function ft(_t,qt){return(qt-=_t)<0?qt+360:qt}function mt(_t,qt){return _t[0]-qt[0]}function pt(_t,qt){return _t[0]<=_t[1]?_t[0]<=qt&&qt<=_t[1]:qt<_t[0]||_t[1]<qt}var Ot={sphere:L,point:Pt,lineStart:$t,lineEnd:Wt,polygonStart:function(){Ot.lineStart=zt,Ot.lineEnd=Ht},polygonEnd:function(){Ot.lineStart=$t,Ot.lineEnd=Wt}};function Pt(_t,qt){_t*=d;var _n=m(qt*=d);Jt(_n*m(_t),_n*M(_t),M(qt))}function Jt(_t,qt,_n){++Xe,He+=(_t-He)/Xe,$e+=(qt-$e)/Xe,et+=(_n-et)/Xe}function $t(){Ot.point=ut}function ut(_t,qt){_t*=d;var _n=m(qt*=d);Nt=_n*m(_t),rn=_n*M(_t),en=M(qt),Ot.point=Dt,Jt(Nt,rn,en)}function Dt(_t,qt){_t*=d;var _n=m(qt*=d),nn=_n*m(_t),dn=_n*M(_t),Un=M(qt),$n=g(E(($n=rn*Un-en*dn)*$n+($n=en*nn-Nt*Un)*$n+($n=Nt*dn-rn*nn)*$n),Nt*nn+rn*dn+en*Un);st+=$n,tt+=$n*(Nt+(Nt=nn)),ct+=$n*(rn+(rn=dn)),bt+=$n*(en+(en=Un)),Jt(Nt,rn,en)}function Wt(){Ot.point=Pt}function zt(){Ot.point=Ne}function Ht(){ot(dt,at),Ot.point=Pt}function Ne(_t,qt){dt=_t,at=qt,_t*=d,qt*=d,Ot.point=ot;var _n=m(qt);Nt=_n*m(_t),rn=_n*M(_t),en=M(qt),Jt(Nt,rn,en)}function ot(_t,qt){_t*=d;var _n=m(qt*=d),nn=_n*m(_t),dn=_n*M(_t),Un=M(qt),$n=rn*Un-en*dn,cr=en*nn-Nt*Un,Tr=Nt*dn-rn*nn,Er=E($n*$n+cr*cr+Tr*Tr),Rr=F(Er),jr=Er&&-Rr/Er;At+=jr*$n,Ut+=jr*cr,Ct+=jr*Tr,st+=Rr,tt+=Rr*(Nt+(Nt=nn)),ct+=Rr*(rn+(rn=dn)),bt+=Rr*(en+(en=Un)),Jt(Nt,rn,en)}function yt(_t){return function(){return _t}}function It(_t,qt){function _n(nn,dn){return nn=_t(nn,dn),qt(nn[0],nn[1])}return _t.invert&&qt.invert&&(_n.invert=function(nn,dn){return(nn=qt.invert(nn,dn))&&_t.invert(nn[0],nn[1])}),_n}function Vt(_t,qt){return[p(_t)>l?_t+Math.round(-_t/h)*h:_t,qt]}function ln(_t,qt,_n){return(_t%=h)?qt||_n?It(an(_t),wn(qt,_n)):an(_t):qt||_n?wn(qt,_n):Vt}function un(_t){return function(qt,_n){return[(qt+=_t)>l?qt-h:qt<-l?qt+h:qt,_n]}}function an(_t){var qt=un(_t);return qt.invert=un(-_t),qt}function wn(_t,qt){var _n=m(_t),nn=M(_t),dn=m(qt),Un=M(qt);function $n(cr,Tr){var Er=m(Tr),Rr=m(cr)*Er,jr=M(cr)*Er,_r=M(Tr),Hr=_r*_n+Rr*nn;return[g(jr*dn-Hr*Un,Rr*_n-_r*nn),F(Hr*dn+jr*Un)]}return $n.invert=function(cr,Tr){var Er=m(Tr),Rr=m(cr)*Er,jr=M(cr)*Er,_r=M(Tr),Hr=_r*dn-jr*Un;return[g(jr*dn+_r*Un,Rr*_n+Hr*nn),F(Hr*_n-Rr*nn)]},$n}function Zn(_t){function qt(_n){return(_n=_t(_n[0]*d,_n[1]*d))[0]*=s,_n[1]*=s,_n}return _t=ln(_t[0]*d,_t[1]*d,_t.length>2?_t[2]*d:0),qt.invert=function(_n){return(_n=_t.invert(_n[0]*d,_n[1]*d))[0]*=s,_n[1]*=s,_n},qt}function An(_t,qt,_n,nn,dn,Un){if(_n){var $n=m(qt),cr=M(qt),Tr=nn*_n;null==dn?(dn=qt+nn*h,Un=qt-Tr/2):(dn=hn($n,dn),Un=hn($n,Un),(nn>0?dn<Un:dn>Un)&&(dn+=nn*h));for(var Er,Rr=dn;nn>0?Rr>Un:Rr<Un;Rr-=Tr)Er=ue([$n,-cr*m(Rr),-cr*M(Rr)]),_t.point(Er[0],Er[1])}}function hn(_t,qt){(qt=de(qt))[0]-=_t,Ee(qt);var _n=D(-qt[1]);return((-qt[2]<0?-_n:_n)+h-i)%h}function pn(){var _t,qt=[];return{point:function(_n,nn,dn){_t.push([_n,nn,dn])},lineStart:function(){qt.push(_t=[])},lineEnd:L,rejoin:function(){qt.length>1&&qt.push(qt.pop().concat(qt.shift()))},result:function(){var _n=qt;return qt=[],_t=null,_n}}}function xn(_t,qt){return p(_t[0]-qt[0])<i&&p(_t[1]-qt[1])<i}function En(_t,qt,_n,nn){this.x=_t,this.z=qt,this.o=_n,this.e=nn,this.v=!1,this.n=this.p=null}function In(_t,qt,_n,nn,dn){var Un,$n,cr=[],Tr=[];if(_t.forEach(function(ii){if(!((pi=ii.length-1)<=0)){var pi,Ti,dr=ii[0],ki=ii[pi];if(xn(dr,ki)){if(!dr[2]&&!ki[2]){for(dn.lineStart(),Un=0;Un<pi;++Un)dn.point((dr=ii[Un])[0],dr[1]);return void dn.lineEnd()}ki[0]+=2*i}cr.push(Ti=new En(dr,ii,null,!0)),Tr.push(Ti.o=new En(dr,null,Ti,!1)),cr.push(Ti=new En(ki,ii,null,!1)),Tr.push(Ti.o=new En(ki,null,Ti,!0))}}),cr.length){for(Tr.sort(qt),Yn(cr),Yn(Tr),Un=0,$n=Tr.length;Un<$n;++Un)Tr[Un].e=_n=!_n;for(var Er,Rr,jr=cr[0];;){for(var _r=jr,Hr=!0;_r.v;)if((_r=_r.n)===jr)return;Er=_r.z,dn.lineStart();do{if(_r.v=_r.o.v=!0,_r.e){if(Hr)for(Un=0,$n=Er.length;Un<$n;++Un)dn.point((Rr=Er[Un])[0],Rr[1]);else nn(_r.x,_r.n.x,1,dn);_r=_r.n}else{if(Hr)for(Un=(Er=_r.p.z).length-1;Un>=0;--Un)dn.point((Rr=Er[Un])[0],Rr[1]);else nn(_r.x,_r.p.x,-1,dn);_r=_r.p}Er=(_r=_r.o).z,Hr=!Hr}while(!_r.v);dn.lineEnd()}}}function Yn(_t){if(qt=_t.length){for(var qt,_n,nn=0,dn=_t[0];++nn<qt;)dn.n=_n=_t[nn],_n.p=dn,dn=_n;dn.n=_n=_t[0],_n.p=dn}}Vt.invert=Vt;var nr=T();function sr(_t){return p(_t[0])<=l?_t[0]:k(_t[0])*((p(_t[0])+l)%h-l)}function Ar(_t,qt){var _n=sr(qt),nn=qt[1],dn=M(nn),Un=[M(_n),-m(_n),0],$n=0,cr=0;nr.reset(),1===dn?nn=r+i:-1===dn&&(nn=-r-i);for(var Tr=0,Er=_t.length;Tr<Er;++Tr)if(jr=(Rr=_t[Tr]).length)for(var Rr,jr,_r=Rr[jr-1],Hr=sr(_r),ii=_r[1]/2+y,pi=M(ii),Ti=m(ii),dr=0;dr<jr;++dr,Hr=wr,pi=Ei,Ti=Ji,_r=ki){var ki=Rr[dr],wr=sr(ki),hi=ki[1]/2+y,Ei=M(hi),Ji=m(hi),ya=wr-Hr,Yr=ya>=0?1:-1,Ma=Yr*ya,ha=Ma>l,pr=pi*Ei;if(nr.add(g(pr*Yr*M(Ma),Ti*Ji+pr*m(Ma))),$n+=ha?ya+Yr*h:ya,ha^Hr>=_n^wr>=_n){var Di=be(de(_r),de(ki));Ee(Di);var Qi=be(Un,Di);Ee(Qi);var aa=(ha^ya>=0?-1:1)*F(Qi[2]);(nn>aa||nn===aa&&(Di[0]||Di[1]))&&(cr+=ha^ya>=0?1:-1)}}return($n<-i||$n<i&&nr<-i)^1&cr}function yr(_t,qt,_n,nn){return function(dn){var Un,$n,cr,Tr=qt(dn),Er=pn(),Rr=qt(Er),jr=!1,_r={point:Hr,lineStart:pi,lineEnd:Ti,polygonStart:function(){_r.point=dr,_r.lineStart=ki,_r.lineEnd=wr,$n=[],Un=[]},polygonEnd:function(){_r.point=Hr,_r.lineStart=pi,_r.lineEnd=Ti,$n=x.merge($n);var hi=Ar(Un,nn);$n.length?(jr||(dn.polygonStart(),jr=!0),In($n,Wr,hi,_n,dn)):hi&&(jr||(dn.polygonStart(),jr=!0),dn.lineStart(),_n(null,null,1,dn),dn.lineEnd()),jr&&(dn.polygonEnd(),jr=!1),$n=Un=null},sphere:function(){dn.polygonStart(),dn.lineStart(),_n(null,null,1,dn),dn.lineEnd(),dn.polygonEnd()}};function Hr(hi,Ei){_t(hi,Ei)&&dn.point(hi,Ei)}function ii(hi,Ei){Tr.point(hi,Ei)}function pi(){_r.point=ii,Tr.lineStart()}function Ti(){_r.point=Hr,Tr.lineEnd()}function dr(hi,Ei){cr.push([hi,Ei]),Rr.point(hi,Ei)}function ki(){Rr.lineStart(),cr=[]}function wr(){dr(cr[0][0],cr[0][1]),Rr.lineEnd();var hi,Ei,Ji,ya,Yr=Rr.clean(),Ma=Er.result(),ha=Ma.length;if(cr.pop(),Un.push(cr),cr=null,ha)if(1&Yr){if((Ei=(Ji=Ma[0]).length-1)>0){for(jr||(dn.polygonStart(),jr=!0),dn.lineStart(),hi=0;hi<Ei;++hi)dn.point((ya=Ji[hi])[0],ya[1]);dn.lineEnd()}}else ha>1&&2&Yr&&Ma.push(Ma.pop().concat(Ma.shift())),$n.push(Ma.filter(Pr))}return _r}}function Pr(_t){return _t.length>1}function Wr(_t,qt){return((_t=_t.x)[0]<0?_t[1]-r-i:r-_t[1])-((qt=qt.x)[0]<0?qt[1]-r-i:r-qt[1])}var lr=yr(function(){return!0},function(_t){var qt,_n=NaN,nn=NaN,dn=NaN;return{lineStart:function(){_t.lineStart(),qt=1},point:function(Un,$n){var Er,Rr,jr,_r,Hr,ii,pi,cr=Un>0?l:-l,Tr=p(Un-_n);p(Tr-l)<i?(_t.point(_n,nn=(nn+$n)/2>0?r:-r),_t.point(dn,nn),_t.lineEnd(),_t.lineStart(),_t.point(cr,nn),_t.point(Un,nn),qt=0):dn!==cr&&Tr>=l&&(p(_n-dn)<i&&(_n-=dn*i),p(Un-cr)<i&&(Un-=cr*i),Rr=nn,_r=$n,pi=M((Er=_n)-(jr=Un)),nn=p(pi)>i?c((M(Rr)*(ii=m(_r))*M(jr)-M(_r)*(Hr=m(Rr))*M(Er))/(Hr*ii*pi)):(Rr+_r)/2,_t.point(dn,nn),_t.lineEnd(),_t.lineStart(),_t.point(cr,nn),qt=0),_t.point(_n=Un,nn=$n),dn=cr},lineEnd:function(){_t.lineEnd(),_n=nn=NaN},clean:function(){return 2-qt}}},function(_t,qt,_n,nn){var dn;if(null==_t)nn.point(-l,dn=_n*r),nn.point(0,dn),nn.point(l,dn),nn.point(l,0),nn.point(l,-dn),nn.point(0,-dn),nn.point(-l,-dn),nn.point(-l,0),nn.point(-l,dn);else if(p(_t[0]-qt[0])>i){var Un=_t[0]<qt[0]?l:-l;nn.point(-Un,dn=_n*Un/2),nn.point(0,dn),nn.point(Un,dn)}else nn.point(qt[0],qt[1])},[-l,-r]);function Hn(_t){var qt=m(_t),_n=6*d,nn=qt>0,dn=p(qt)>i;function Un(Tr,Er){return m(Tr)*m(Er)>qt}function $n(Tr,Er,Rr){var jr=[1,0,0],_r=be(de(Tr),de(Er)),Hr=he(_r,_r),ii=_r[0],pi=Hr-ii*ii;if(!pi)return!Rr&&Tr;var Ti=qt*Hr/pi,dr=-qt*ii/pi,ki=be(jr,_r),wr=_e(jr,Ti);me(wr,_e(_r,dr));var hi=ki,Ei=he(wr,hi),Ji=he(hi,hi),ya=Ei*Ei-Ji*(he(wr,wr)-1);if(!(ya<0)){var Yr=E(ya),Ma=_e(hi,(-Ei-Yr)/Ji);if(me(Ma,wr),Ma=ue(Ma),!Rr)return Ma;var ha,pr=Tr[0],Di=Er[0],Qi=Tr[1],aa=Er[1];Di<pr&&(ha=pr,pr=Di,Di=ha);var Si=Di-pr,Ia=p(Si-l)<i;if(!Ia&&aa<Qi&&(ha=Qi,Qi=aa,aa=ha),Ia||Si<i?Ia?Qi+aa>0^Ma[1]<(p(Ma[0]-pr)<i?Qi:aa):Qi<=Ma[1]&&Ma[1]<=aa:Si>l^(pr<=Ma[0]&&Ma[0]<=Di)){var ao=_e(hi,(-Ei+Yr)/Ji);return me(ao,wr),[Ma,ue(ao)]}}}function cr(Tr,Er){var Rr=nn?_t:l-_t,jr=0;return Tr<-Rr?jr|=1:Tr>Rr&&(jr|=2),Er<-Rr?jr|=4:Er>Rr&&(jr|=8),jr}return yr(Un,function(Tr){var Er,Rr,jr,_r,Hr;return{lineStart:function(){_r=jr=!1,Hr=1},point:function(ii,pi){var Ti,dr=[ii,pi],ki=Un(ii,pi),wr=nn?ki?0:cr(ii,pi):ki?cr(ii+(ii<0?l:-l),pi):0;if(!Er&&(_r=jr=ki)&&Tr.lineStart(),ki!==jr&&(!(Ti=$n(Er,dr))||xn(Er,Ti)||xn(dr,Ti))&&(dr[2]=1),ki!==jr)Hr=0,ki?(Tr.lineStart(),Ti=$n(dr,Er),Tr.point(Ti[0],Ti[1])):(Ti=$n(Er,dr),Tr.point(Ti[0],Ti[1],2),Tr.lineEnd()),Er=Ti;else if(dn&&Er&&nn^ki){var hi;wr&Rr||!(hi=$n(dr,Er,!0))||(Hr=0,nn?(Tr.lineStart(),Tr.point(hi[0][0],hi[0][1]),Tr.point(hi[1][0],hi[1][1]),Tr.lineEnd()):(Tr.point(hi[1][0],hi[1][1]),Tr.lineEnd(),Tr.lineStart(),Tr.point(hi[0][0],hi[0][1],3)))}!ki||Er&&xn(Er,dr)||Tr.point(dr[0],dr[1]),Er=dr,jr=ki,Rr=wr},lineEnd:function(){jr&&Tr.lineEnd(),Er=null},clean:function(){return Hr|(_r&&jr)<<1}}},function(Tr,Er,Rr,jr){An(jr,_t,_n,Rr,Tr,Er)},nn?[0,-_t]:[-l,_t-l])}function Sr(_t,qt,_n,nn){function dn(Er,Rr){return _t<=Er&&Er<=_n&&qt<=Rr&&Rr<=nn}function Un(Er,Rr,jr,_r){var Hr=0,ii=0;if(null==Er||(Hr=$n(Er,jr))!==(ii=$n(Rr,jr))||Tr(Er,Rr)<0^jr>0)do{_r.point(0===Hr||3===Hr?_t:_n,Hr>1?nn:qt)}while((Hr=(Hr+jr+4)%4)!==ii);else _r.point(Rr[0],Rr[1])}function $n(Er,Rr){return p(Er[0]-_t)<i?Rr>0?0:3:p(Er[0]-_n)<i?Rr>0?2:1:p(Er[1]-qt)<i?Rr>0?1:0:Rr>0?3:2}function cr(Er,Rr){return Tr(Er.x,Rr.x)}function Tr(Er,Rr){var jr=$n(Er,1),_r=$n(Rr,1);return jr!==_r?jr-_r:0===jr?Rr[1]-Er[1]:1===jr?Er[0]-Rr[0]:2===jr?Er[1]-Rr[1]:Rr[0]-Er[0]}return function(Er){var Rr,jr,_r,Hr,ii,pi,Ti,dr,ki,wr,hi,Ei=Er,Ji=pn(),ya={point:Yr,lineStart:function(){ya.point=Ma,jr&&jr.push(_r=[]),wr=!0,ki=!1,Ti=dr=NaN},lineEnd:function(){Rr&&(Ma(Hr,ii),pi&&ki&&Ji.rejoin(),Rr.push(Ji.result())),ya.point=Yr,ki&&Ei.lineEnd()},polygonStart:function(){Ei=Ji,Rr=[],jr=[],hi=!0},polygonEnd:function(){var ha=function(){for(var Qi=0,aa=0,Si=jr.length;aa<Si;++aa)for(var Ia,ao,Xs=jr[aa],Cs=1,Ds=Xs.length,$i=Xs[0],lo=$i[0],ns=$i[1];Cs<Ds;++Cs)Ia=lo,ao=ns,lo=($i=Xs[Cs])[0],ns=$i[1],ao<=nn?ns>nn&&(lo-Ia)*(nn-ao)>(ns-ao)*(_t-Ia)&&++Qi:ns<=nn&&(lo-Ia)*(nn-ao)<(ns-ao)*(_t-Ia)&&--Qi;return Qi}(),pr=hi&&ha,Di=(Rr=x.merge(Rr)).length;(pr||Di)&&(Er.polygonStart(),pr&&(Er.lineStart(),Un(null,null,1,Er),Er.lineEnd()),Di&&In(Rr,cr,ha,Un,Er),Er.polygonEnd()),Ei=Er,Rr=jr=_r=null}};function Yr(ha,pr){dn(ha,pr)&&Ei.point(ha,pr)}function Ma(ha,pr){var Di=dn(ha,pr);if(jr&&_r.push([ha,pr]),wr)Hr=ha,ii=pr,pi=Di,wr=!1,Di&&(Ei.lineStart(),Ei.point(ha,pr));else if(Di&&ki)Ei.point(ha,pr);else{var Qi=[Ti=Math.max(-1e9,Math.min(1e9,Ti)),dr=Math.max(-1e9,Math.min(1e9,dr))],aa=[ha=Math.max(-1e9,Math.min(1e9,ha)),pr=Math.max(-1e9,Math.min(1e9,pr))];!function(Si,Ia,ao,Xs,Cs,Ds){var $i,lo=Si[0],ns=Si[1],ua=0,Ja=1,Wo=Ia[0]-lo,za=Ia[1]-ns;if($i=ao-lo,Wo||!($i>0)){if($i/=Wo,Wo<0){if($i<ua)return;$i<Ja&&(Ja=$i)}else if(Wo>0){if($i>Ja)return;$i>ua&&(ua=$i)}if($i=Cs-lo,Wo||!($i<0)){if($i/=Wo,Wo<0){if($i>Ja)return;$i>ua&&(ua=$i)}else if(Wo>0){if($i<ua)return;$i<Ja&&(Ja=$i)}if($i=Xs-ns,za||!($i>0)){if($i/=za,za<0){if($i<ua)return;$i<Ja&&(Ja=$i)}else if(za>0){if($i>Ja)return;$i>ua&&(ua=$i)}if($i=Ds-ns,za||!($i<0)){if($i/=za,za<0){if($i>Ja)return;$i>ua&&(ua=$i)}else if(za>0){if($i<ua)return;$i<Ja&&(Ja=$i)}return ua>0&&(Si[0]=lo+ua*Wo,Si[1]=ns+ua*za),Ja<1&&(Ia[0]=lo+Ja*Wo,Ia[1]=ns+Ja*za),!0}}}}}(Qi,aa,_t,qt,_n,nn)?Di&&(Ei.lineStart(),Ei.point(ha,pr),hi=!1):(ki||(Ei.lineStart(),Ei.point(Qi[0],Qi[1])),Ei.point(aa[0],aa[1]),Di||Ei.lineEnd(),hi=!1)}Ti=ha,dr=pr,ki=Di}return ya}}var ti,Fn,br,xr=T(),Kn={sphere:L,point:L,lineStart:function(){Kn.point=ci,Kn.lineEnd=Qr},lineEnd:L,polygonStart:L,polygonEnd:L};function Qr(){Kn.point=Kn.lineEnd=L}function ci(_t,qt){ti=_t*=d,Fn=M(qt*=d),br=m(qt),Kn.point=Or}function Or(_t,qt){_t*=d;var _n=M(qt*=d),nn=m(qt),dn=p(_t-ti),Un=m(dn),$n=nn*M(dn),cr=br*_n-Fn*nn*Un,Tr=Fn*_n+br*nn*Un;xr.add(g(E($n*$n+cr*cr),Tr)),ti=_t,Fn=_n,br=nn}function li(_t){return xr.reset(),Q(_t,Kn),+xr}var di=[null,null],Tn={type:"LineString",coordinates:di};function tr(_t,qt){return di[0]=_t,di[1]=qt,li(Tn)}var Zt={Feature:function(_t,qt){return Cn(_t.geometry,qt)},FeatureCollection:function(_t,qt){for(var _n=_t.features,nn=-1,dn=_n.length;++nn<dn;)if(Cn(_n[nn].geometry,qt))return!0;return!1}},yn={Sphere:function(){return!0},Point:function(_t,qt){return rr(_t.coordinates,qt)},MultiPoint:function(_t,qt){for(var _n=_t.coordinates,nn=-1,dn=_n.length;++nn<dn;)if(rr(_n[nn],qt))return!0;return!1},LineString:function(_t,qt){return Qn(_t.coordinates,qt)},MultiLineString:function(_t,qt){for(var _n=_t.coordinates,nn=-1,dn=_n.length;++nn<dn;)if(Qn(_n[nn],qt))return!0;return!1},Polygon:function(_t,qt){return Jn(_t.coordinates,qt)},MultiPolygon:function(_t,qt){for(var _n=_t.coordinates,nn=-1,dn=_n.length;++nn<dn;)if(Jn(_n[nn],qt))return!0;return!1},GeometryCollection:function(_t,qt){for(var _n=_t.geometries,nn=-1,dn=_n.length;++nn<dn;)if(Cn(_n[nn],qt))return!0;return!1}};function Cn(_t,qt){return!(!_t||!yn.hasOwnProperty(_t.type))&&yn[_t.type](_t,qt)}function rr(_t,qt){return 0===tr(_t,qt)}function Qn(_t,qt){for(var _n,nn,dn,Un=0,$n=_t.length;Un<$n;Un++){if(0===(nn=tr(_t[Un],qt))||Un>0&&(dn=tr(_t[Un],_t[Un-1]))>0&&_n<=dn&&nn<=dn&&(_n+nn-dn)*(1-Math.pow((_n-nn)/dn,2))<1e-12*dn)return!0;_n=nn}return!1}function Jn(_t,qt){return!!Ar(_t.map(Wn),On(qt))}function Wn(_t){return(_t=_t.map(On)).pop(),_t}function On(_t){return[_t[0]*d,_t[1]*d]}function zn(_t,qt,_n){var nn=x.range(_t,qt-i,_n).concat(qt);return function(dn){return nn.map(function(Un){return[dn,Un]})}}function Rn(_t,qt,_n){var nn=x.range(_t,qt-i,_n).concat(qt);return function(dn){return nn.map(function(Un){return[Un,dn]})}}function Gn(){var _t,qt,_n,nn,dn,Un,$n,cr,Tr,Er,Rr,jr,_r=10,Hr=_r,ii=90,pi=360,Ti=2.5;function dr(){return{type:"MultiLineString",coordinates:ki()}}function ki(){return x.range(u(nn/ii)*ii,_n,ii).map(Rr).concat(x.range(u(cr/pi)*pi,$n,pi).map(jr)).concat(x.range(u(qt/_r)*_r,_t,_r).filter(function(wr){return p(wr%ii)>i}).map(Tr)).concat(x.range(u(Un/Hr)*Hr,dn,Hr).filter(function(wr){return p(wr%pi)>i}).map(Er))}return dr.lines=function(){return ki().map(function(wr){return{type:"LineString",coordinates:wr}})},dr.outline=function(){return{type:"Polygon",coordinates:[Rr(nn).concat(jr($n).slice(1),Rr(_n).reverse().slice(1),jr(cr).reverse().slice(1))]}},dr.extent=function(wr){return arguments.length?dr.extentMajor(wr).extentMinor(wr):dr.extentMinor()},dr.extentMajor=function(wr){return arguments.length?(cr=+wr[0][1],$n=+wr[1][1],(nn=+wr[0][0])>(_n=+wr[1][0])&&(wr=nn,nn=_n,_n=wr),cr>$n&&(wr=cr,cr=$n,$n=wr),dr.precision(Ti)):[[nn,cr],[_n,$n]]},dr.extentMinor=function(wr){return arguments.length?(Un=+wr[0][1],dn=+wr[1][1],(qt=+wr[0][0])>(_t=+wr[1][0])&&(wr=qt,qt=_t,_t=wr),Un>dn&&(wr=Un,Un=dn,dn=wr),dr.precision(Ti)):[[qt,Un],[_t,dn]]},dr.step=function(wr){return arguments.length?dr.stepMajor(wr).stepMinor(wr):dr.stepMinor()},dr.stepMajor=function(wr){return arguments.length?(ii=+wr[0],pi=+wr[1],dr):[ii,pi]},dr.stepMinor=function(wr){return arguments.length?(_r=+wr[0],Hr=+wr[1],dr):[_r,Hr]},dr.precision=function(wr){return arguments.length?(Ti=+wr,Tr=zn(Un,dn,90),Er=Rn(qt,_t,Ti),Rr=zn(cr,$n,90),jr=Rn(nn,_n,Ti),dr):Ti},dr.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function fr(_t){return _t}var ur,Mr,vr,zr,Br=T(),or=T(),Ur={point:L,lineStart:L,lineEnd:L,polygonStart:function(){Ur.lineStart=Zr,Ur.lineEnd=Vi},polygonEnd:function(){Ur.lineStart=Ur.lineEnd=Ur.point=L,Br.add(p(or)),or.reset()},result:function(){var _t=Br/2;return Br.reset(),_t}};function Zr(){Ur.point=mi}function mi(_t,qt){Ur.point=Zi,ur=vr=_t,Mr=zr=qt}function Zi(_t,qt){or.add(zr*_t-vr*qt),vr=_t,zr=qt}function Vi(){Zi(ur,Mr)}var Na,ys,pa,ei,qr=1/0,wi=qr,vi=-qr,ma=vi,$a={point:function(_t,qt){_t<qr&&(qr=_t),_t>vi&&(vi=_t),qt<wi&&(wi=qt),qt>ma&&(ma=qt)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L,result:function(){var _t=[[qr,wi],[vi,ma]];return vi=ma=-(wi=qr=1/0),_t}},Ki=0,Ui=0,so=0,Vo=0,Ea=0,Do=0,Ba=0,ts=0,go=0,Ni={point:Uo,lineStart:el,lineEnd:Go,polygonStart:function(){Ni.lineStart=zs,Ni.lineEnd=fl},polygonEnd:function(){Ni.point=Uo,Ni.lineStart=el,Ni.lineEnd=Go},result:function(){var _t=go?[Ba/go,ts/go]:Do?[Vo/Do,Ea/Do]:so?[Ki/so,Ui/so]:[NaN,NaN];return Ki=Ui=so=Vo=Ea=Do=Ba=ts=go=0,_t}};function Uo(_t,qt){Ki+=_t,Ui+=qt,++so}function el(){Ni.point=Il}function Il(_t,qt){Ni.point=Da,Uo(pa=_t,ei=qt)}function Da(_t,qt){var _n=_t-pa,nn=qt-ei,dn=E(_n*_n+nn*nn);Vo+=dn*(pa+_t)/2,Ea+=dn*(ei+qt)/2,Do+=dn,Uo(pa=_t,ei=qt)}function Go(){Ni.point=Uo}function zs(){Ni.point=Ts}function fl(){Ka(Na,ys)}function Ts(_t,qt){Ni.point=Ka,Uo(Na=pa=_t,ys=ei=qt)}function Ka(_t,qt){var _n=_t-pa,nn=qt-ei,dn=E(_n*_n+nn*nn);Vo+=dn*(pa+_t)/2,Ea+=dn*(ei+qt)/2,Do+=dn,Ba+=(dn=ei*_t-pa*qt)*(pa+_t),ts+=dn*(ei+qt),go+=3*dn,Uo(pa=_t,ei=qt)}function $l(_t){this._context=_t}$l.prototype={_radius:4.5,pointRadius:function(_t){return this._radius=_t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(_t,qt){switch(this._point){case 0:this._context.moveTo(_t,qt),this._point=1;break;case 1:this._context.lineTo(_t,qt);break;default:this._context.moveTo(_t+this._radius,qt),this._context.arc(_t,qt,this._radius,0,h)}},result:L};var Bs,Ro,Ho,js,Ss,Ys=T(),mo={point:L,lineStart:function(){mo.point=Pl},lineEnd:function(){Bs&&Ms(Ro,Ho),mo.point=L},polygonStart:function(){Bs=!0},polygonEnd:function(){Bs=null},result:function(){var _t=+Ys;return Ys.reset(),_t}};function Pl(_t,qt){mo.point=Ms,Ro=js=_t,Ho=Ss=qt}function Ms(_t,qt){Ys.add(E((js-=_t)*js+(Ss-=qt)*Ss)),js=_t,Ss=qt}function tl(){this._string=[]}function Ol(_t){return"m0,"+_t+"a"+_t+","+_t+" 0 1,1 0,"+-2*_t+"a"+_t+","+_t+" 0 1,1 0,"+2*_t+"z"}function Zs(_t){return function(qt){var _n=new ja;for(var nn in _t)_n[nn]=_t[nn];return _n.stream=qt,_n}}function ja(){}function Ye(_t,qt,_n){var nn=_t.clipExtent&&_t.clipExtent();return _t.scale(150).translate([0,0]),null!=nn&&_t.clipExtent(null),Q(_n,_t.stream($a)),qt($a.result()),null!=nn&&_t.clipExtent(nn),_t}function Je(_t,qt,_n){return Ye(_t,function(nn){var dn=qt[1][0]-qt[0][0],Un=qt[1][1]-qt[0][1],$n=Math.min(dn/(nn[1][0]-nn[0][0]),Un/(nn[1][1]-nn[0][1])),cr=+qt[0][0]+(dn-$n*(nn[1][0]+nn[0][0]))/2,Tr=+qt[0][1]+(Un-$n*(nn[1][1]+nn[0][1]))/2;_t.scale(150*$n).translate([cr,Tr])},_n)}function lt(_t,qt,_n){return Je(_t,[[0,0],qt],_n)}function vt(_t,qt,_n){return Ye(_t,function(nn){var dn=+qt,Un=dn/(nn[1][0]-nn[0][0]),$n=(dn-Un*(nn[1][0]+nn[0][0]))/2,cr=-Un*nn[0][1];_t.scale(150*Un).translate([$n,cr])},_n)}function Mt(_t,qt,_n){return Ye(_t,function(nn){var dn=+qt,Un=dn/(nn[1][1]-nn[0][1]),$n=-Un*nn[0][0],cr=(dn-Un*(nn[1][1]+nn[0][1]))/2;_t.scale(150*Un).translate([$n,cr])},_n)}tl.prototype={_radius:4.5,_circle:Ol(4.5),pointRadius:function(_t){return(_t=+_t)!==this._radius&&(this._radius=_t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(_t,qt){switch(this._point){case 0:this._string.push("M",_t,",",qt),this._point=1;break;case 1:this._string.push("L",_t,",",qt);break;default:null==this._circle&&(this._circle=Ol(this._radius)),this._string.push("M",_t,",",qt,this._circle)}},result:function(){if(this._string.length){var _t=this._string.join("");return this._string=[],_t}return null}},ja.prototype={constructor:ja,point:function(_t,qt){this.stream.point(_t,qt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wt=m(30*d);function Bt(_t,qt){return+qt?function(_n,nn){function dn(Un,$n,cr,Tr,Er,Rr,jr,_r,Hr,ii,pi,Ti,dr,ki){var wr=jr-Un,hi=_r-$n,Ei=wr*wr+hi*hi;if(Ei>4*nn&&dr--){var Ji=Tr+ii,ya=Er+pi,Yr=Rr+Ti,Ma=E(Ji*Ji+ya*ya+Yr*Yr),ha=F(Yr/=Ma),pr=p(p(Yr)-1)<i||p(cr-Hr)<i?(cr+Hr)/2:g(ya,Ji),Di=_n(pr,ha),Qi=Di[0],aa=Di[1],Si=Qi-Un,Ia=aa-$n,ao=hi*Si-wr*Ia;(ao*ao/Ei>nn||p((wr*Si+hi*Ia)/Ei-.5)>.3||Tr*ii+Er*pi+Rr*Ti<wt)&&(dn(Un,$n,cr,Tr,Er,Rr,Qi,aa,pr,Ji/=Ma,ya/=Ma,Yr,dr,ki),ki.point(Qi,aa),dn(Qi,aa,pr,Ji,ya,Yr,jr,_r,Hr,ii,pi,Ti,dr,ki))}}return function(Un){var $n,cr,Tr,Er,Rr,jr,_r,Hr,ii,pi,Ti,dr,ki={point:wr,lineStart:hi,lineEnd:Ji,polygonStart:function(){Un.polygonStart(),ki.lineStart=ya},polygonEnd:function(){Un.polygonEnd(),ki.lineStart=hi}};function wr(ha,pr){ha=_n(ha,pr),Un.point(ha[0],ha[1])}function hi(){Hr=NaN,ki.point=Ei,Un.lineStart()}function Ei(ha,pr){var Di=de([ha,pr]),Qi=_n(ha,pr);dn(Hr,ii,_r,pi,Ti,dr,Hr=Qi[0],ii=Qi[1],_r=ha,pi=Di[0],Ti=Di[1],dr=Di[2],16,Un),Un.point(Hr,ii)}function Ji(){ki.point=wr,Un.lineEnd()}function ya(){hi(),ki.point=Yr,ki.lineEnd=Ma}function Yr(ha,pr){Ei($n=ha,pr),cr=Hr,Tr=ii,Er=pi,Rr=Ti,jr=dr,ki.point=Ei}function Ma(){dn(Hr,ii,_r,pi,Ti,dr,cr,Tr,$n,Er,Rr,jr,16,Un),ki.lineEnd=Ji,Ji()}return ki}}(_t,qt):(_n=_t,Zs({point:function(nn,dn){nn=_n(nn,dn),this.stream.point(nn[0],nn[1])}}));var _n}var cn=Zs({point:function(_t,qt){this.stream.point(_t*d,qt*d)}});function fn(_t,qt,_n,nn,dn){function Un($n,cr){return[qt+_t*($n*=nn),_n-_t*(cr*=dn)]}return Un.invert=function($n,cr){return[($n-qt)/_t*nn,(_n-cr)/_t*dn]},Un}function on(_t,qt,_n,nn,dn,Un){var $n=m(Un),cr=M(Un),Tr=$n*_t,Er=cr*_t,Rr=$n/_t,jr=cr/_t,_r=(cr*_n-$n*qt)/_t,Hr=(cr*qt+$n*_n)/_t;function ii(pi,Ti){return[Tr*(pi*=nn)-Er*(Ti*=dn)+qt,_n-Er*pi-Tr*Ti]}return ii.invert=function(pi,Ti){return[nn*(Rr*pi-jr*Ti+_r),dn*(Hr-jr*pi-Rr*Ti)]},ii}function vn(_t){return Mn(function(){return _t})()}function Mn(_t){var qt,_n,nn,dn,Un,$n,cr,Tr,Er,Rr,jr=150,_r=480,Hr=250,ii=0,pi=0,Ti=0,dr=0,ki=0,wr=0,hi=1,Ei=1,Ji=null,ya=lr,Yr=null,Ma=fr,ha=.5;function pr(Si){return Tr(Si[0]*d,Si[1]*d)}function Di(Si){return(Si=Tr.invert(Si[0],Si[1]))&&[Si[0]*s,Si[1]*s]}function Qi(){var Si=on(jr,0,0,hi,Ei,wr).apply(null,qt(ii,pi)),Ia=(wr?on:fn)(jr,_r-Si[0],Hr-Si[1],hi,Ei,wr);return _n=ln(Ti,dr,ki),cr=It(qt,Ia),Tr=It(_n,cr),$n=Bt(cr,ha),aa()}function aa(){return Er=Rr=null,pr}return pr.stream=function(Si){return Er&&Rr===Si?Er:Er=cn((Ia=_n,Zs({point:function(ao,Xs){var Cs=Ia(ao,Xs);return this.stream.point(Cs[0],Cs[1])}}))(ya($n(Ma(Rr=Si)))));var Ia},pr.preclip=function(Si){return arguments.length?(ya=Si,Ji=void 0,aa()):ya},pr.postclip=function(Si){return arguments.length?(Ma=Si,Yr=nn=dn=Un=null,aa()):Ma},pr.clipAngle=function(Si){return arguments.length?(ya=+Si?Hn(Ji=Si*d):(Ji=null,lr),aa()):Ji*s},pr.clipExtent=function(Si){return arguments.length?(Ma=null==Si?(Yr=nn=dn=Un=null,fr):Sr(Yr=+Si[0][0],nn=+Si[0][1],dn=+Si[1][0],Un=+Si[1][1]),aa()):null==Yr?null:[[Yr,nn],[dn,Un]]},pr.scale=function(Si){return arguments.length?(jr=+Si,Qi()):jr},pr.translate=function(Si){return arguments.length?(_r=+Si[0],Hr=+Si[1],Qi()):[_r,Hr]},pr.center=function(Si){return arguments.length?(ii=Si[0]%360*d,pi=Si[1]%360*d,Qi()):[ii*s,pi*s]},pr.rotate=function(Si){return arguments.length?(Ti=Si[0]%360*d,dr=Si[1]%360*d,ki=Si.length>2?Si[2]%360*d:0,Qi()):[Ti*s,dr*s,ki*s]},pr.angle=function(Si){return arguments.length?(wr=Si%360*d,Qi()):wr*s},pr.reflectX=function(Si){return arguments.length?(hi=Si?-1:1,Qi()):hi<0},pr.reflectY=function(Si){return arguments.length?(Ei=Si?-1:1,Qi()):Ei<0},pr.precision=function(Si){return arguments.length?($n=Bt(cr,ha=Si*Si),aa()):E(ha)},pr.fitExtent=function(Si,Ia){return Je(pr,Si,Ia)},pr.fitSize=function(Si,Ia){return lt(pr,Si,Ia)},pr.fitWidth=function(Si,Ia){return vt(pr,Si,Ia)},pr.fitHeight=function(Si,Ia){return Mt(pr,Si,Ia)},function(){return qt=_t.apply(this,arguments),pr.invert=qt.invert&&Di,Qi()}}function Ln(_t){var qt=0,_n=l/3,nn=Mn(_t),dn=nn(qt,_n);return dn.parallels=function(Un){return arguments.length?nn(qt=Un[0]*d,_n=Un[1]*d):[qt*s,_n*s]},dn}function Pn(_t,qt){var _n=M(_t),nn=(_n+M(qt))/2;if(p(nn)<i)return function(cr){var Tr=m(cr);function Er(Rr,jr){return[Rr*Tr,M(jr)/Tr]}return Er.invert=function(Rr,jr){return[Rr/Tr,F(jr*Tr)]},Er}(_t);var dn=1+_n*(2*nn-_n),Un=E(dn)/nn;function $n(cr,Tr){var Er=E(dn-2*nn*M(Tr))/nn;return[Er*M(cr*=nn),Un-Er*m(cr)]}return $n.invert=function(cr,Tr){var Er=Un-Tr,Rr=g(cr,p(Er))*k(Er);return Er*nn<0&&(Rr-=l*k(cr)*k(Er)),[Rr/nn,F((dn-(cr*cr+Er*Er)*nn*nn)/(2*nn))]},$n}function qn(){return Ln(Pn).scale(155.424).center([0,33.6442])}function kr(){return qn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Fr(_t){return function(qt,_n){var nn=m(qt),dn=m(_n),Un=_t(nn*dn);return[Un*dn*M(qt),Un*M(_n)]}}function Xr(_t){return function(qt,_n){var nn=E(qt*qt+_n*_n),dn=_t(nn),Un=M(dn),$n=m(dn);return[g(qt*Un,nn*$n),F(nn&&_n*Un/nn)]}}var ai=Fr(function(_t){return E(2/(1+_t))});ai.invert=Xr(function(_t){return 2*F(_t/2)});var ni=Fr(function(_t){return(_t=D(_t))&&_t/M(_t)});function ri(_t,qt){return[_t,f(P((r+qt)/2))]}function Hi(_t){var qt,_n,nn,dn=vn(_t),Un=dn.center,$n=dn.scale,cr=dn.translate,Tr=dn.clipExtent,Er=null;function Rr(){var jr=l*$n(),_r=dn(Zn(dn.rotate()).invert([0,0]));return Tr(null==Er?[[_r[0]-jr,_r[1]-jr],[_r[0]+jr,_r[1]+jr]]:_t===ri?[[Math.max(_r[0]-jr,Er),qt],[Math.min(_r[0]+jr,_n),nn]]:[[Er,Math.max(_r[1]-jr,qt)],[_n,Math.min(_r[1]+jr,nn)]])}return dn.scale=function(jr){return arguments.length?($n(jr),Rr()):$n()},dn.translate=function(jr){return arguments.length?(cr(jr),Rr()):cr()},dn.center=function(jr){return arguments.length?(Un(jr),Rr()):Un()},dn.clipExtent=function(jr){return arguments.length?(null==jr?Er=qt=_n=nn=null:(Er=+jr[0][0],qt=+jr[0][1],_n=+jr[1][0],nn=+jr[1][1]),Rr()):null==Er?null:[[Er,qt],[_n,nn]]},Rr()}function ra(_t){return P((r+_t)/2)}function La(_t,qt){var _n=m(_t),nn=_t===qt?M(_t):f(_n/m(qt))/f(ra(qt)/ra(_t)),dn=_n*A(ra(_t),nn)/nn;if(!nn)return ri;function Un($n,cr){dn>0?cr<-r+i&&(cr=-r+i):cr>r-i&&(cr=r-i);var Tr=dn/A(ra(cr),nn);return[Tr*M(nn*$n),dn-Tr*m(nn*$n)]}return Un.invert=function($n,cr){var Tr=dn-cr,Er=k(nn)*E($n*$n+Tr*Tr),Rr=g($n,p(Tr))*k(Tr);return Tr*nn<0&&(Rr-=l*k($n)*k(Tr)),[Rr/nn,2*c(A(dn/Er,1/nn))-r]},Un}function Sa(_t,qt){return[_t,qt]}function Oa(_t,qt){var _n=m(_t),nn=_t===qt?M(_t):(_n-m(qt))/(qt-_t),dn=_n/nn+_t;if(p(nn)<i)return Sa;function Un($n,cr){var Tr=dn-cr,Er=nn*$n;return[Tr*M(Er),dn-Tr*m(Er)]}return Un.invert=function($n,cr){var Tr=dn-cr,Er=g($n,p(Tr))*k(Tr);return Tr*nn<0&&(Er-=l*k($n)*k(Tr)),[Er/nn,dn-k(nn)*E($n*$n+Tr*Tr)]},Un}ni.invert=Xr(function(_t){return _t}),ri.invert=function(_t,qt){return[_t,2*c(w(qt))-r]},Sa.invert=Sa;var yo=1.340264,wo=-.081106,Ta=893e-6,Ga=.003796,To=E(3)/2;function Fo(_t,qt){var _n=F(To*M(qt)),nn=_n*_n,dn=nn*nn*nn;return[_t*m(_n)/(To*(yo+3*wo*nn+dn*(7*Ta+9*Ga*nn))),_n*(yo+wo*nn+dn*(Ta+Ga*nn))]}function fs(_t,qt){var _n=m(qt),nn=m(_t)*_n;return[_n*M(_t)/nn,M(qt)/nn]}function hs(_t,qt){var _n=qt*qt,nn=_n*_n;return[_t*(.8707-.131979*_n+nn*(nn*(.003971*_n-.001529*nn)-.013791)),qt*(1.007226+_n*(.015085+nn*(.028874*_n-.044475-.005916*nn)))]}function $o(_t,qt){return[m(qt)*M(_t),M(qt)]}function ds(_t,qt){var _n=m(qt),nn=1+m(_t)*_n;return[_n*M(_t)/nn,M(qt)/nn]}function xa(_t,qt){return[f(P((r+qt)/2)),-_t]}Fo.invert=function(_t,qt){for(var _n,nn=qt,dn=nn*nn,Un=dn*dn*dn,$n=0;$n<12&&(Un=(dn=(nn-=_n=(nn*(yo+wo*dn+Un*(Ta+Ga*dn))-qt)/(yo+3*wo*dn+Un*(7*Ta+9*Ga*dn)))*nn)*dn*dn,!(p(_n)<1e-12));++$n);return[To*_t*(yo+3*wo*dn+Un*(7*Ta+9*Ga*dn))/m(nn),F(M(nn)/To)]},fs.invert=Xr(c),hs.invert=function(_t,qt){var _n,nn=qt,dn=25;do{var Un=nn*nn,$n=Un*Un;nn-=_n=(nn*(1.007226+Un*(.015085+$n*(.028874*Un-.044475-.005916*$n)))-qt)/(1.007226+Un*(.045255+$n*(.259866*Un-.311325-.005916*11*$n)))}while(p(_n)>i&&--dn>0);return[_t/(.8707+(Un=nn*nn)*(Un*(Un*Un*Un*(.003971-.001529*Un)-.013791)-.131979)),nn]},$o.invert=Xr(F),ds.invert=Xr(function(_t){return 2*c(_t)}),xa.invert=function(_t,qt){return[-qt,2*c(w(_t))-r]},v.geoAlbers=kr,v.geoAlbersUsa=function(){var _t,qt,_n,nn,dn,Un,$n=kr(),cr=qn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Tr=qn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Er={point:function(_r,Hr){Un=[_r,Hr]}};function Rr(_r){var Hr=_r[0],ii=_r[1];return Un=null,_n.point(Hr,ii),Un||(nn.point(Hr,ii),Un)||(dn.point(Hr,ii),Un)}function jr(){return _t=qt=null,Rr}return Rr.invert=function(_r){var Hr=$n.scale(),ii=$n.translate(),pi=(_r[0]-ii[0])/Hr,Ti=(_r[1]-ii[1])/Hr;return(Ti>=.12&&Ti<.234&&pi>=-.425&&pi<-.214?cr:Ti>=.166&&Ti<.234&&pi>=-.214&&pi<-.115?Tr:$n).invert(_r)},Rr.stream=function(_r){return _t&&qt===_r?_t:(Hr=[$n.stream(qt=_r),cr.stream(_r),Tr.stream(_r)],ii=Hr.length,_t={point:function(pi,Ti){for(var dr=-1;++dr<ii;)Hr[dr].point(pi,Ti)},sphere:function(){for(var pi=-1;++pi<ii;)Hr[pi].sphere()},lineStart:function(){for(var pi=-1;++pi<ii;)Hr[pi].lineStart()},lineEnd:function(){for(var pi=-1;++pi<ii;)Hr[pi].lineEnd()},polygonStart:function(){for(var pi=-1;++pi<ii;)Hr[pi].polygonStart()},polygonEnd:function(){for(var pi=-1;++pi<ii;)Hr[pi].polygonEnd()}});var Hr,ii},Rr.precision=function(_r){return arguments.length?($n.precision(_r),cr.precision(_r),Tr.precision(_r),jr()):$n.precision()},Rr.scale=function(_r){return arguments.length?($n.scale(_r),cr.scale(.35*_r),Tr.scale(_r),Rr.translate($n.translate())):$n.scale()},Rr.translate=function(_r){if(!arguments.length)return $n.translate();var Hr=$n.scale(),ii=+_r[0],pi=+_r[1];return _n=$n.translate(_r).clipExtent([[ii-.455*Hr,pi-.238*Hr],[ii+.455*Hr,pi+.238*Hr]]).stream(Er),nn=cr.translate([ii-.307*Hr,pi+.201*Hr]).clipExtent([[ii-.425*Hr+i,pi+.12*Hr+i],[ii-.214*Hr-i,pi+.234*Hr-i]]).stream(Er),dn=Tr.translate([ii-.205*Hr,pi+.212*Hr]).clipExtent([[ii-.214*Hr+i,pi+.166*Hr+i],[ii-.115*Hr-i,pi+.234*Hr-i]]).stream(Er),jr()},Rr.fitExtent=function(_r,Hr){return Je(Rr,_r,Hr)},Rr.fitSize=function(_r,Hr){return lt(Rr,_r,Hr)},Rr.fitWidth=function(_r,Hr){return vt(Rr,_r,Hr)},Rr.fitHeight=function(_r,Hr){return Mt(Rr,_r,Hr)},Rr.scale(1070)},v.geoArea=function(_t){return W.reset(),Q(_t,ae),2*W},v.geoAzimuthalEqualArea=function(){return vn(ai).scale(124.75).clipAngle(179.999)},v.geoAzimuthalEqualAreaRaw=ai,v.geoAzimuthalEquidistant=function(){return vn(ni).scale(79.4188).clipAngle(179.999)},v.geoAzimuthalEquidistantRaw=ni,v.geoBounds=function(_t){var qt,_n,nn,dn,Un,$n,cr;if(ve=Fe=-(De=Se=1/0),Ue=[],Q(_t,Qe),_n=Ue.length){for(Ue.sort(mt),qt=1,Un=[nn=Ue[0]];qt<_n;++qt)pt(nn,(dn=Ue[qt])[0])||pt(nn,dn[1])?(ft(nn[0],dn[1])>ft(nn[0],nn[1])&&(nn[1]=dn[1]),ft(dn[0],nn[1])>ft(nn[0],nn[1])&&(nn[0]=dn[0])):Un.push(nn=dn);for($n=-1/0,qt=0,nn=Un[_n=Un.length-1];qt<=_n;nn=dn,++qt)(cr=ft(nn[1],(dn=Un[qt])[0]))>$n&&($n=cr,De=dn[0],Fe=nn[1])}return Ue=qe=null,De===1/0||Se===1/0?[[NaN,NaN],[NaN,NaN]]:[[De,Se],[Fe,ve]]},v.geoCentroid=function(_t){Xe=st=He=$e=et=tt=ct=bt=At=Ut=Ct=0,Q(_t,Ot);var qt=At,_n=Ut,nn=Ct,dn=qt*qt+_n*_n+nn*nn;return dn<1e-12&&(qt=tt,_n=ct,nn=bt,st<i&&(qt=He,_n=$e,nn=et),(dn=qt*qt+_n*_n+nn*nn)<1e-12)?[NaN,NaN]:[g(_n,qt)*s,F(nn/E(dn))*s]},v.geoCircle=function(){var _t,qt,_n=yt([0,0]),nn=yt(90),dn=yt(6),Un={point:function(cr,Tr){_t.push(cr=qt(cr,Tr)),cr[0]*=s,cr[1]*=s}};function $n(){var cr=_n.apply(this,arguments),Tr=nn.apply(this,arguments)*d,Er=dn.apply(this,arguments)*d;return _t=[],qt=ln(-cr[0]*d,-cr[1]*d,0).invert,An(Un,Tr,Er,1),cr={type:"Polygon",coordinates:[_t]},_t=qt=null,cr}return $n.center=function(cr){return arguments.length?(_n="function"==typeof cr?cr:yt([+cr[0],+cr[1]]),$n):_n},$n.radius=function(cr){return arguments.length?(nn="function"==typeof cr?cr:yt(+cr),$n):nn},$n.precision=function(cr){return arguments.length?(dn="function"==typeof cr?cr:yt(+cr),$n):dn},$n},v.geoClipAntimeridian=lr,v.geoClipCircle=Hn,v.geoClipExtent=function(){var _t,qt,_n,nn=0,dn=0,Un=960,$n=500;return _n={stream:function(cr){return _t&&qt===cr?_t:_t=Sr(nn,dn,Un,$n)(qt=cr)},extent:function(cr){return arguments.length?(nn=+cr[0][0],dn=+cr[0][1],Un=+cr[1][0],$n=+cr[1][1],_t=qt=null,_n):[[nn,dn],[Un,$n]]}}},v.geoClipRectangle=Sr,v.geoConicConformal=function(){return Ln(La).scale(109.5).parallels([30,30])},v.geoConicConformalRaw=La,v.geoConicEqualArea=qn,v.geoConicEqualAreaRaw=Pn,v.geoConicEquidistant=function(){return Ln(Oa).scale(131.154).center([0,13.9389])},v.geoConicEquidistantRaw=Oa,v.geoContains=function(_t,qt){return(_t&&Zt.hasOwnProperty(_t.type)?Zt[_t.type]:Cn)(_t,qt)},v.geoDistance=tr,v.geoEqualEarth=function(){return vn(Fo).scale(177.158)},v.geoEqualEarthRaw=Fo,v.geoEquirectangular=function(){return vn(Sa).scale(152.63)},v.geoEquirectangularRaw=Sa,v.geoGnomonic=function(){return vn(fs).scale(144.049).clipAngle(60)},v.geoGnomonicRaw=fs,v.geoGraticule=Gn,v.geoGraticule10=function(){return Gn()()},v.geoIdentity=function(){var _t,qt,_n,nn,dn,Un,$n,cr=1,Tr=0,Er=0,Rr=1,jr=1,_r=0,Hr=null,ii=1,pi=1,Ti=Zs({point:function(hi,Ei){var Ji=wr([hi,Ei]);this.stream.point(Ji[0],Ji[1])}}),dr=fr;function ki(){return ii=cr*Rr,pi=cr*jr,Un=$n=null,wr}function wr(hi){var Ei=hi[0]*ii,Ji=hi[1]*pi;if(_r){var ya=Ji*_t-Ei*qt;Ei=Ei*_t+Ji*qt,Ji=ya}return[Ei+Tr,Ji+Er]}return wr.invert=function(hi){var Ei=hi[0]-Tr,Ji=hi[1]-Er;if(_r){var ya=Ji*_t+Ei*qt;Ei=Ei*_t-Ji*qt,Ji=ya}return[Ei/ii,Ji/pi]},wr.stream=function(hi){return Un&&$n===hi?Un:Un=Ti(dr($n=hi))},wr.postclip=function(hi){return arguments.length?(dr=hi,Hr=_n=nn=dn=null,ki()):dr},wr.clipExtent=function(hi){return arguments.length?(dr=null==hi?(Hr=_n=nn=dn=null,fr):Sr(Hr=+hi[0][0],_n=+hi[0][1],nn=+hi[1][0],dn=+hi[1][1]),ki()):null==Hr?null:[[Hr,_n],[nn,dn]]},wr.scale=function(hi){return arguments.length?(cr=+hi,ki()):cr},wr.translate=function(hi){return arguments.length?(Tr=+hi[0],Er=+hi[1],ki()):[Tr,Er]},wr.angle=function(hi){return arguments.length?(qt=M(_r=hi%360*d),_t=m(_r),ki()):_r*s},wr.reflectX=function(hi){return arguments.length?(Rr=hi?-1:1,ki()):Rr<0},wr.reflectY=function(hi){return arguments.length?(jr=hi?-1:1,ki()):jr<0},wr.fitExtent=function(hi,Ei){return Je(wr,hi,Ei)},wr.fitSize=function(hi,Ei){return lt(wr,hi,Ei)},wr.fitWidth=function(hi,Ei){return vt(wr,hi,Ei)},wr.fitHeight=function(hi,Ei){return Mt(wr,hi,Ei)},wr},v.geoInterpolate=function(_t,qt){var _n=_t[0]*d,nn=_t[1]*d,dn=qt[0]*d,Un=qt[1]*d,$n=m(nn),cr=M(nn),Tr=m(Un),Er=M(Un),Rr=$n*m(_n),jr=$n*M(_n),_r=Tr*m(dn),Hr=Tr*M(dn),ii=2*F(E(R(Un-nn)+$n*Tr*R(dn-_n))),pi=M(ii),Ti=ii?function(dr){var ki=M(dr*=ii)/pi,wr=M(ii-dr)/pi,hi=wr*Rr+ki*_r,Ei=wr*jr+ki*Hr,Ji=wr*cr+ki*Er;return[g(Ei,hi)*s,g(Ji,E(hi*hi+Ei*Ei))*s]}:function(){return[_n*s,nn*s]};return Ti.distance=ii,Ti},v.geoLength=li,v.geoMercator=function(){return Hi(ri).scale(961/h)},v.geoMercatorRaw=ri,v.geoNaturalEarth1=function(){return vn(hs).scale(175.295)},v.geoNaturalEarth1Raw=hs,v.geoOrthographic=function(){return vn($o).scale(249.5).clipAngle(90+i)},v.geoOrthographicRaw=$o,v.geoPath=function(_t,qt){var _n,nn,dn=4.5;function Un($n){return $n&&("function"==typeof dn&&nn.pointRadius(+dn.apply(this,arguments)),Q($n,_n(nn))),nn.result()}return Un.area=function($n){return Q($n,_n(Ur)),Ur.result()},Un.measure=function($n){return Q($n,_n(mo)),mo.result()},Un.bounds=function($n){return Q($n,_n($a)),$a.result()},Un.centroid=function($n){return Q($n,_n(Ni)),Ni.result()},Un.projection=function($n){return arguments.length?(_n=null==$n?(_t=null,fr):(_t=$n).stream,Un):_t},Un.context=function($n){return arguments.length?(nn=null==$n?(qt=null,new tl):new $l(qt=$n),"function"!=typeof dn&&nn.pointRadius(dn),Un):qt},Un.pointRadius=function($n){return arguments.length?(dn="function"==typeof $n?$n:(nn.pointRadius(+$n),+$n),Un):dn},Un.projection(_t).context(qt)},v.geoProjection=vn,v.geoProjectionMutator=Mn,v.geoRotation=Zn,v.geoStereographic=function(){return vn(ds).scale(250).clipAngle(142)},v.geoStereographicRaw=ds,v.geoStream=Q,v.geoTransform=function(_t){return{stream:Zs(_t)}},v.geoTransverseMercator=function(){var _t=Hi(xa),qt=_t.center,_n=_t.rotate;return _t.center=function(nn){return arguments.length?qt([-nn[1],nn[0]]):[(nn=qt())[1],-nn[0]]},_t.rotate=function(nn){return arguments.length?_n([nn[0],nn[1],nn.length>2?nn[2]+90:90]):[(nn=_n())[0],nn[1],nn[2]-90]},_n([0,0,90]).scale(159.155)},v.geoTransverseMercatorRaw=xa,Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-array")):x((v=v||self).d3=v.d3||{},v.d3)},{"d3-array":107}],115:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";function x(he,be){return he.parent===be.parent?1:2}function T(he,be){return he+be.x}function b(he,be){return Math.max(he,be.y)}function e(he){var be=0,me=he.children,_e=me&&me.length;if(_e)for(;--_e>=0;)be+=me[_e].value;else be=1;he.value=be}function o(he,be){var me,_e,Ee,De,Se,Fe=new y(he),ve=+he.value&&(Fe.value=he.value),Te=[Fe];for(null==be&&(be=i);me=Te.pop();)if(ve&&(me.value=+me.data.value),(Ee=be(me.data))&&(Se=Ee.length))for(me.children=new Array(Se),De=Se-1;De>=0;--De)Te.push(_e=me.children[De]=new y(Ee[De])),_e.parent=me,_e.depth=me.depth+1;return Fe.eachBefore(r)}function i(he){return he.children}function l(he){he.data=he.data.data}function r(he){var be=0;do{he.height=be}while((he=he.parent)&&he.height<++be)}function y(he){this.data=he,this.depth=this.height=0,this.parent=null}y.prototype=o.prototype={constructor:y,count:function(){return this.eachAfter(e)},each:function(he){var be,me,_e,Ee,De=this,Se=[De];do{for(be=Se.reverse(),Se=[];De=be.pop();)if(he(De),me=De.children)for(_e=0,Ee=me.length;_e<Ee;++_e)Se.push(me[_e])}while(Se.length);return this},eachAfter:function(he){for(var be,me,_e,Ee=this,De=[Ee],Se=[];Ee=De.pop();)if(Se.push(Ee),be=Ee.children)for(me=0,_e=be.length;me<_e;++me)De.push(be[me]);for(;Ee=Se.pop();)he(Ee);return this},eachBefore:function(he){for(var be,me,_e=this,Ee=[_e];_e=Ee.pop();)if(he(_e),be=_e.children)for(me=be.length-1;me>=0;--me)Ee.push(be[me]);return this},sum:function(he){return this.eachAfter(function(be){for(var me=+he(be.data)||0,_e=be.children,Ee=_e&&_e.length;--Ee>=0;)me+=_e[Ee].value;be.value=me})},sort:function(he){return this.eachBefore(function(be){be.children&&be.children.sort(he)})},path:function(he){for(var be=this,me=function(De,Se){if(De===Se)return De;var Fe=De.ancestors(),ve=Se.ancestors(),Te=null;for(De=Fe.pop(),Se=ve.pop();De===Se;)Te=De,De=Fe.pop(),Se=ve.pop();return Te}(be,he),_e=[be];be!==me;)_e.push(be=be.parent);for(var Ee=_e.length;he!==me;)_e.splice(Ee,0,he),he=he.parent;return _e},ancestors:function(){for(var he=this,be=[he];he=he.parent;)be.push(he);return be},descendants:function(){var he=[];return this.each(function(be){he.push(be)}),he},leaves:function(){var he=[];return this.eachBefore(function(be){be.children||he.push(be)}),he},links:function(){var he=this,be=[];return he.each(function(me){me!==he&&be.push({source:me.parent,target:me})}),be},copy:function(){return o(this).eachBefore(l)}};var h=Array.prototype.slice;function s(he){for(var be,me,_e=0,Ee=(he=function(Se){for(var Fe,ve,Te=Se.length;Te;)ve=Math.random()*Te--|0,Fe=Se[Te],Se[Te]=Se[ve],Se[ve]=Fe;return Se}(h.call(he))).length,De=[];_e<Ee;)be=he[_e],me&&c(me,be)?++_e:(me=m(De=d(De,be)),_e=0);return me}function d(he,be){var me,_e;if(g(be,he))return[be];for(me=0;me<he.length;++me)if(p(be,he[me])&&g(u(he[me],be),he))return[he[me],be];for(me=0;me<he.length-1;++me)for(_e=me+1;_e<he.length;++_e)if(p(u(he[me],he[_e]),be)&&p(u(he[me],be),he[_e])&&p(u(he[_e],be),he[me])&&g(w(he[me],he[_e],be),he))return[he[me],he[_e],be];throw new Error}function p(he,be){var me=he.r-be.r,_e=be.x-he.x,Ee=be.y-he.y;return me<0||me*me<_e*_e+Ee*Ee}function c(he,be){var me=he.r-be.r+1e-6,_e=be.x-he.x,Ee=be.y-he.y;return me>0&&me*me>_e*_e+Ee*Ee}function g(he,be){for(var me=0;me<be.length;++me)if(!c(he,be[me]))return!1;return!0}function m(he){switch(he.length){case 1:return{x:(be=he[0]).x,y:be.y,r:be.r};case 2:return u(he[0],he[1]);case 3:return w(he[0],he[1],he[2])}var be}function u(he,be){var me=he.x,_e=he.y,Ee=he.r,De=be.x,Se=be.y,Fe=be.r,ve=De-me,Te=Se-_e,Ie=Fe-Ee,Ce=Math.sqrt(ve*ve+Te*Te);return{x:(me+De+ve/Ce*Ie)/2,y:(_e+Se+Te/Ce*Ie)/2,r:(Ce+Ee+Fe)/2}}function w(he,be,me){var _e=he.x,Ee=he.y,De=he.r,Se=be.x,Fe=be.y,ve=be.r,Te=me.x,Ie=me.y,Ce=me.r,Re=_e-Se,Ue=_e-Te,qe=Ee-Fe,Xe=Ee-Ie,st=ve-De,He=Ce-De,$e=_e*_e+Ee*Ee-De*De,et=$e-Se*Se-Fe*Fe+ve*ve,tt=$e-Te*Te-Ie*Ie+Ce*Ce,ct=Ue*qe-Re*Xe,bt=(qe*tt-Xe*et)/(2*ct)-_e,At=(Xe*st-qe*He)/ct,Ut=(Ue*et-Re*tt)/(2*ct)-Ee,Ct=(Re*He-Ue*st)/ct,dt=At*At+Ct*Ct-1,at=2*(De+bt*At+Ut*Ct),Nt=bt*bt+Ut*Ut-De*De,rn=-(dt?(at+Math.sqrt(at*at-4*dt*Nt))/(2*dt):Nt/at);return{x:_e+bt+At*rn,y:Ee+Ut+Ct*rn,r:rn}}function f(he,be,me){var _e,Ee,De,Se,Fe=he.x-be.x,ve=he.y-be.y,Te=Fe*Fe+ve*ve;Te?(Ee=be.r+me.r,Se=he.r+me.r,(Ee*=Ee)>(Se*=Se)?(_e=(Te+Se-Ee)/(2*Te),De=Math.sqrt(Math.max(0,Se/Te-_e*_e)),me.x=he.x-_e*Fe-De*ve,me.y=he.y-_e*ve+De*Fe):(_e=(Te+Ee-Se)/(2*Te),De=Math.sqrt(Math.max(0,Ee/Te-_e*_e)),me.x=be.x+_e*Fe-De*ve,me.y=be.y+_e*ve+De*Fe)):(me.x=be.x+me.r,me.y=be.y)}function A(he,be){var me=he.r+be.r-1e-6,_e=be.x-he.x,Ee=be.y-he.y;return me>0&&me*me>_e*_e+Ee*Ee}function M(he){var be=he._,me=he.next._,_e=be.r+me.r,Ee=(be.x*me.r+me.x*be.r)/_e,De=(be.y*me.r+me.y*be.r)/_e;return Ee*Ee+De*De}function k(he){this._=he,this.next=null,this.previous=null}function E(he){if(!(Ee=he.length))return 0;var be,me,_e,Ee,De,Se,Fe,ve,Te,Ie,Ce;if((be=he[0]).x=0,be.y=0,!(Ee>1))return be.r;if(be.x=-(me=he[1]).r,me.x=be.r,me.y=0,!(Ee>2))return be.r+me.r;f(me,be,_e=he[2]),be=new k(be),me=new k(me),_e=new k(_e),be.next=_e.previous=me,me.next=be.previous=_e,_e.next=me.previous=be;e:for(Fe=3;Fe<Ee;++Fe){f(be._,me._,_e=he[Fe]),_e=new k(_e),ve=me.next,Te=be.previous,Ie=me._.r,Ce=be._.r;do{if(Ie<=Ce){if(A(ve._,_e._)){be.next=me=ve,me.previous=be,--Fe;continue e}Ie+=ve._.r,ve=ve.next}else{if(A(Te._,_e._)){(be=Te).next=me,me.previous=be,--Fe;continue e}Ce+=Te._.r,Te=Te.previous}}while(ve!==Te.next);for(_e.previous=be,_e.next=me,be.next=me.previous=me=_e,De=M(be);(_e=_e.next)!==me;)(Se=M(_e))<De&&(be=_e,De=Se);me=be.next}for(be=[me._],_e=me;(_e=_e.next)!==me;)be.push(_e._);for(_e=s(be),Fe=0;Fe<Ee;++Fe)(be=he[Fe]).x-=_e.x,be.y-=_e.y;return _e.r}function P(he){return null==he?null:D(he)}function D(he){if("function"!=typeof he)throw new Error;return he}function F(){return 0}function R(he){return function(){return he}}function L(he){return Math.sqrt(he.value)}function I(he){return function(be){be.children||(be.r=Math.max(0,+he(be)||0))}}function B(he,be){return function(me){if(_e=me.children){var _e,Ee,De,Se=_e.length,Fe=he(me)*be||0;if(Fe)for(Ee=0;Ee<Se;++Ee)_e[Ee].r+=Fe;if(De=E(_e),Fe)for(Ee=0;Ee<Se;++Ee)_e[Ee].r-=Fe;me.r=De+Fe}}}function V(he){return function(be){var me=be.parent;be.r*=he,me&&(be.x=me.x+he*be.x,be.y=me.y+he*be.y)}}function Z(he){he.x0=Math.round(he.x0),he.y0=Math.round(he.y0),he.x1=Math.round(he.x1),he.y1=Math.round(he.y1)}function Y(he,be,me,_e,Ee){for(var De,Se=he.children,Fe=-1,ve=Se.length,Te=he.value&&(_e-be)/he.value;++Fe<ve;)(De=Se[Fe]).y0=me,De.y1=Ee,De.x0=be,De.x1=be+=De.value*Te}var Q={depth:-1},re={};function $(he){return he.id}function J(he){return he.parentId}function ie(he,be){return he.parent===be.parent?1:2}function j(he){var be=he.children;return be?be[0]:he.t}function q(he){var be=he.children;return be?be[be.length-1]:he.t}function W(he,be,me){var _e=me/(be.i-he.i);be.c-=_e,be.s+=me,he.c+=_e,be.z+=me,be.m+=me}function ae(he,be,me){return he.a.parent===be.parent?he.a:me}function G(he,be){this._=he,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=be}function ee(he,be,me,_e,Ee){for(var De,Se=he.children,Fe=-1,ve=Se.length,Te=he.value&&(Ee-me)/he.value;++Fe<ve;)(De=Se[Fe]).x0=be,De.x1=_e,De.y0=me,De.y1=me+=De.value*Te}G.prototype=Object.create(y.prototype);var te=(1+Math.sqrt(5))/2;function le(he,be,me,_e,Ee,De){for(var Se,Fe,ve,Te,Ie,Ce,Re,Ue,qe,Xe,st,He=[],$e=be.children,et=0,tt=0,ct=$e.length,bt=be.value;et<ct;){ve=Ee-me,Te=De-_e;do{Ie=$e[tt++].value}while(!Ie&&tt<ct);for(Ce=Re=Ie,st=Ie*Ie*(Xe=Math.max(Te/ve,ve/Te)/(bt*he)),qe=Math.max(Re/st,st/Ce);tt<ct;++tt){if(Ie+=Fe=$e[tt].value,Fe<Ce&&(Ce=Fe),Fe>Re&&(Re=Fe),st=Ie*Ie*Xe,(Ue=Math.max(Re/st,st/Ce))>qe){Ie-=Fe;break}qe=Ue}He.push(Se={value:Ie,dice:ve<Te,children:$e.slice(et,tt)}),Se.dice?Y(Se,me,_e,Ee,bt?_e+=Te*Ie/bt:De):ee(Se,me,_e,bt?me+=ve*Ie/bt:Ee,De),bt-=Ie,et=tt}return He}var ue=function he(be){function me(_e,Ee,De,Se,Fe){le(be,_e,Ee,De,Se,Fe)}return me.ratio=function(_e){return he((_e=+_e)>1?_e:1)},me}(te),de=function he(be){function me(_e,Ee,De,Se,Fe){if((ve=_e._squarify)&&ve.ratio===be)for(var ve,Te,Ie,Ce,Re,Ue=-1,qe=ve.length,Xe=_e.value;++Ue<qe;){for(Ie=(Te=ve[Ue]).children,Ce=Te.value=0,Re=Ie.length;Ce<Re;++Ce)Te.value+=Ie[Ce].value;Te.dice?Y(Te,Ee,De,Se,De+=(Fe-De)*Te.value/Xe):ee(Te,Ee,De,Ee+=(Se-Ee)*Te.value/Xe,Fe),Xe-=Te.value}else _e._squarify=ve=le(be,_e,Ee,De,Se,Fe),ve.ratio=be}return me.ratio=function(_e){return he((_e=+_e)>1?_e:1)},me}(te);v.cluster=function(){var he=x,be=1,me=1,_e=!1;function Ee(De){var Se,Fe=0;De.eachAfter(function(Re){var qe,Ue=Re.children;Ue?(Re.x=(qe=Ue).reduce(T,0)/qe.length,Re.y=function(qe){return 1+qe.reduce(b,0)}(Ue)):(Re.x=Se?Fe+=he(Re,Se):0,Re.y=0,Se=Re)});var ve=function(Re){for(var Ue;Ue=Re.children;)Re=Ue[0];return Re}(De),Te=function(Re){for(var Ue;Ue=Re.children;)Re=Ue[Ue.length-1];return Re}(De),Ie=ve.x-he(ve,Te)/2,Ce=Te.x+he(Te,ve)/2;return De.eachAfter(_e?function(Re){Re.x=(Re.x-De.x)*be,Re.y=(De.y-Re.y)*me}:function(Re){Re.x=(Re.x-Ie)/(Ce-Ie)*be,Re.y=(1-(De.y?Re.y/De.y:1))*me})}return Ee.separation=function(De){return arguments.length?(he=De,Ee):he},Ee.size=function(De){return arguments.length?(_e=!1,be=+De[0],me=+De[1],Ee):_e?null:[be,me]},Ee.nodeSize=function(De){return arguments.length?(_e=!0,be=+De[0],me=+De[1],Ee):_e?[be,me]:null},Ee},v.hierarchy=o,v.pack=function(){var he=null,be=1,me=1,_e=F;function Ee(De){return De.x=be/2,De.y=me/2,he?De.eachBefore(I(he)).eachAfter(B(_e,.5)).eachBefore(V(1)):De.eachBefore(I(L)).eachAfter(B(F,1)).eachAfter(B(_e,De.r/Math.min(be,me))).eachBefore(V(Math.min(be,me)/(2*De.r))),De}return Ee.radius=function(De){return arguments.length?(he=P(De),Ee):he},Ee.size=function(De){return arguments.length?(be=+De[0],me=+De[1],Ee):[be,me]},Ee.padding=function(De){return arguments.length?(_e="function"==typeof De?De:R(+De),Ee):_e},Ee},v.packEnclose=s,v.packSiblings=function(he){return E(he),he},v.partition=function(){var he=1,be=1,me=0,_e=!1;function Ee(De){var Fe,ve,Se=De.height+1;return De.x0=De.y0=me,De.x1=he,De.y1=be/Se,De.eachBefore((Fe=be,ve=Se,function(Te){Te.children&&Y(Te,Te.x0,Fe*(Te.depth+1)/ve,Te.x1,Fe*(Te.depth+2)/ve);var Ie=Te.x0,Ce=Te.y0,Re=Te.x1-me,Ue=Te.y1-me;Re<Ie&&(Ie=Re=(Ie+Re)/2),Ue<Ce&&(Ce=Ue=(Ce+Ue)/2),Te.x0=Ie,Te.y0=Ce,Te.x1=Re,Te.y1=Ue})),_e&&De.eachBefore(Z),De}return Ee.round=function(De){return arguments.length?(_e=!!De,Ee):_e},Ee.size=function(De){return arguments.length?(he=+De[0],be=+De[1],Ee):[he,be]},Ee.padding=function(De){return arguments.length?(me=+De,Ee):me},Ee},v.stratify=function(){var he=$,be=J;function me(_e){var Ee,De,Se,Fe,ve,Te,Ie,Ce=_e.length,Re=new Array(Ce),Ue={};for(De=0;De<Ce;++De)ve=Re[De]=new y(Ee=_e[De]),null!=(Te=he(Ee,De,_e))&&(Te+="")&&(Ue[Ie="$"+(ve.id=Te)]=Ie in Ue?re:ve);for(De=0;De<Ce;++De)if(ve=Re[De],null!=(Te=be(_e[De],De,_e))&&(Te+="")){if(!(Fe=Ue["$"+Te]))throw new Error("missing: "+Te);if(Fe===re)throw new Error("ambiguous: "+Te);Fe.children?Fe.children.push(ve):Fe.children=[ve],ve.parent=Fe}else{if(Se)throw new Error("multiple roots");Se=ve}if(!Se)throw new Error("no root");if(Se.parent=Q,Se.eachBefore(function(qe){qe.depth=qe.parent.depth+1,--Ce}).eachBefore(r),Se.parent=null,Ce>0)throw new Error("cycle");return Se}return me.id=function(_e){return arguments.length?(he=D(_e),me):he},me.parentId=function(_e){return arguments.length?(be=D(_e),me):be},me},v.tree=function(){var he=ie,be=1,me=1,_e=null;function Ee(ve){var Te=function(He){for(var $e,et,tt,ct,bt,At=new G(He,0),Ut=[At];$e=Ut.pop();)if(tt=$e._.children)for($e.children=new Array(bt=tt.length),ct=bt-1;ct>=0;--ct)Ut.push(et=$e.children[ct]=new G(tt[ct],ct)),et.parent=$e;return(At.parent=new G(null,0)).children=[At],At}(ve);if(Te.eachAfter(De),Te.parent.m=-Te.z,Te.eachBefore(Se),_e)ve.eachBefore(Fe);else{var Ie=ve,Ce=ve,Re=ve;ve.eachBefore(function(He){He.x<Ie.x&&(Ie=He),He.x>Ce.x&&(Ce=He),He.depth>Re.depth&&(Re=He)});var Ue=Ie===Ce?1:he(Ie,Ce)/2,qe=Ue-Ie.x,Xe=be/(Ce.x+Ue+qe),st=me/(Re.depth||1);ve.eachBefore(function(He){He.x=(He.x+qe)*Xe,He.y=He.depth*st})}return ve}function De(ve){var Te=ve.children,Ie=ve.parent.children,Ce=ve.i?Ie[ve.i-1]:null;if(Te){!function(Ue){for(var qe,Xe=0,st=0,He=Ue.children,$e=He.length;--$e>=0;)(qe=He[$e]).z+=Xe,qe.m+=Xe,Xe+=qe.s+(st+=qe.c)}(ve);var Re=(Te[0].z+Te[Te.length-1].z)/2;Ce?(ve.z=Ce.z+he(ve._,Ce._),ve.m=ve.z-Re):ve.z=Re}else Ce&&(ve.z=Ce.z+he(ve._,Ce._));ve.parent.A=function(Ue,qe,Xe){if(qe){for(var st,He=Ue,$e=Ue,et=qe,tt=He.parent.children[0],ct=He.m,bt=$e.m,At=et.m,Ut=tt.m;et=q(et),He=j(He),et&&He;)tt=j(tt),($e=q($e)).a=Ue,(st=et.z+At-He.z-ct+he(et._,He._))>0&&(W(ae(et,Ue,Xe),Ue,st),ct+=st,bt+=st),At+=et.m,ct+=He.m,Ut+=tt.m,bt+=$e.m;et&&!q($e)&&($e.t=et,$e.m+=At-bt),He&&!j(tt)&&(tt.t=He,tt.m+=ct-Ut,Xe=Ue)}return Xe}(ve,Ce,ve.parent.A||Ie[0])}function Se(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function Fe(ve){ve.x*=be,ve.y=ve.depth*me}return Ee.separation=function(ve){return arguments.length?(he=ve,Ee):he},Ee.size=function(ve){return arguments.length?(_e=!1,be=+ve[0],me=+ve[1],Ee):_e?null:[be,me]},Ee.nodeSize=function(ve){return arguments.length?(_e=!0,be=+ve[0],me=+ve[1],Ee):_e?[be,me]:null},Ee},v.treemap=function(){var he=ue,be=!1,me=1,_e=1,Ee=[0],De=F,Se=F,Fe=F,ve=F,Te=F;function Ie(Re){return Re.x0=Re.y0=0,Re.x1=me,Re.y1=_e,Re.eachBefore(Ce),Ee=[0],be&&Re.eachBefore(Z),Re}function Ce(Re){var Ue=Ee[Re.depth],qe=Re.x0+Ue,Xe=Re.y0+Ue,st=Re.x1-Ue,He=Re.y1-Ue;st<qe&&(qe=st=(qe+st)/2),He<Xe&&(Xe=He=(Xe+He)/2),Re.x0=qe,Re.y0=Xe,Re.x1=st,Re.y1=He,Re.children&&(Ue=Ee[Re.depth+1]=De(Re)/2,qe+=Te(Re)-Ue,Xe+=Se(Re)-Ue,(st-=Fe(Re)-Ue)<qe&&(qe=st=(qe+st)/2),(He-=ve(Re)-Ue)<Xe&&(Xe=He=(Xe+He)/2),he(Re,qe,Xe,st,He))}return Ie.round=function(Re){return arguments.length?(be=!!Re,Ie):be},Ie.size=function(Re){return arguments.length?(me=+Re[0],_e=+Re[1],Ie):[me,_e]},Ie.tile=function(Re){return arguments.length?(he=D(Re),Ie):he},Ie.padding=function(Re){return arguments.length?Ie.paddingInner(Re).paddingOuter(Re):Ie.paddingInner()},Ie.paddingInner=function(Re){return arguments.length?(De="function"==typeof Re?Re:R(+Re),Ie):De},Ie.paddingOuter=function(Re){return arguments.length?Ie.paddingTop(Re).paddingRight(Re).paddingBottom(Re).paddingLeft(Re):Ie.paddingTop()},Ie.paddingTop=function(Re){return arguments.length?(Se="function"==typeof Re?Re:R(+Re),Ie):Se},Ie.paddingRight=function(Re){return arguments.length?(Fe="function"==typeof Re?Re:R(+Re),Ie):Fe},Ie.paddingBottom=function(Re){return arguments.length?(ve="function"==typeof Re?Re:R(+Re),Ie):ve},Ie.paddingLeft=function(Re){return arguments.length?(Te="function"==typeof Re?Re:R(+Re),Ie):Te},Ie},v.treemapBinary=function(he,be,me,_e,Ee){var De,Se,Fe=he.children,ve=Fe.length,Te=new Array(ve+1);for(Te[0]=Se=De=0;De<ve;++De)Te[De+1]=Se+=Fe[De].value;!function Ie(Ce,Re,Ue,qe,Xe,st,He){if(Ce>=Re-1){var $e=Fe[Ce];return $e.x0=qe,$e.y0=Xe,$e.x1=st,void($e.y1=He)}for(var et=Te[Ce],tt=Ue/2+et,ct=Ce+1,bt=Re-1;ct<bt;){var At=ct+bt>>>1;Te[At]<tt?ct=At+1:bt=At}tt-Te[ct-1]<Te[ct]-tt&&Ce+1<ct&&--ct;var Ut=Te[ct]-et,Ct=Ue-Ut;if(st-qe>He-Xe){var dt=(qe*Ct+st*Ut)/Ue;Ie(Ce,ct,Ut,qe,Xe,dt,He),Ie(ct,Re,Ct,dt,Xe,st,He)}else{var at=(Xe*Ct+He*Ut)/Ue;Ie(Ce,ct,Ut,qe,Xe,st,at),Ie(ct,Re,Ct,qe,at,st,He)}}(0,ve,he.value,be,me,_e,Ee)},v.treemapDice=Y,v.treemapResquarify=de,v.treemapSlice=ee,v.treemapSliceDice=function(he,be,me,_e,Ee){(1&he.depth?ee:Y)(he,be,me,_e,Ee)},v.treemapSquarify=ue,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],116:[function(_,oe,se){var v,x;v=this,x=function(v,x){"use strict";function T(te,le,ue,de,he){var be=te*te,me=be*te;return((1-3*te+3*be-me)*le+(4-6*be+3*me)*ue+(1+3*te+3*be-3*me)*de+me*he)/6}function b(te){var le=te.length-1;return function(ue){var de=ue<=0?ue=0:ue>=1?(ue=1,le-1):Math.floor(ue*le),he=te[de],be=te[de+1];return T((ue-de/le)*le,de>0?te[de-1]:2*he-be,he,be,de<le-1?te[de+2]:2*be-he)}}function e(te){var le=te.length;return function(ue){var de=Math.floor(((ue%=1)<0?++ue:ue)*le);return T((ue-de/le)*le,te[(de+le-1)%le],te[de%le],te[(de+1)%le],te[(de+2)%le])}}function o(te){return function(){return te}}function i(te,le){return function(ue){return te+ue*le}}function l(te,le){var ue=le-te;return ue?i(te,ue>180||ue<-180?ue-360*Math.round(ue/360):ue):o(isNaN(te)?le:te)}function y(te,le){var ue=le-te;return ue?i(te,ue):o(isNaN(te)?le:te)}var h=function te(le){var ue=function r(te){return 1==(te=+te)?y:function(le,ue){return ue-le?(de=le,he=ue,be=te,de=Math.pow(de,be),he=Math.pow(he,be)-de,be=1/be,function(me){return Math.pow(de+me*he,be)}):o(isNaN(le)?ue:le);var de,he,be}}(le);function de(he,be){var me=ue((he=x.rgb(he)).r,(be=x.rgb(be)).r),_e=ue(he.g,be.g),Ee=ue(he.b,be.b),De=y(he.opacity,be.opacity);return function(Se){return he.r=me(Se),he.g=_e(Se),he.b=Ee(Se),he.opacity=De(Se),he+""}}return de.gamma=te,de}(1);function s(te){return function(le){var ue,de,he=le.length,be=new Array(he),me=new Array(he),_e=new Array(he);for(ue=0;ue<he;++ue)de=x.rgb(le[ue]),be[ue]=de.r||0,me[ue]=de.g||0,_e[ue]=de.b||0;return be=te(be),me=te(me),_e=te(_e),de.opacity=1,function(Ee){return de.r=be(Ee),de.g=me(Ee),de.b=_e(Ee),de+""}}}var d=s(b),p=s(e);function c(te,le){le||(le=[]);var ue,de=te?Math.min(le.length,te.length):0,he=le.slice();return function(be){for(ue=0;ue<de;++ue)he[ue]=te[ue]*(1-be)+le[ue]*be;return he}}function g(te){return ArrayBuffer.isView(te)&&!(te instanceof DataView)}function m(te,le){var ue,de=le?le.length:0,he=te?Math.min(de,te.length):0,be=new Array(he),me=new Array(de);for(ue=0;ue<he;++ue)be[ue]=E(te[ue],le[ue]);for(;ue<de;++ue)me[ue]=le[ue];return function(_e){for(ue=0;ue<he;++ue)me[ue]=be[ue](_e);return me}}function u(te,le){var ue=new Date;return te=+te,le=+le,function(de){return ue.setTime(te*(1-de)+le*de),ue}}function w(te,le){return te=+te,le=+le,function(ue){return te*(1-ue)+le*ue}}function f(te,le){var ue,de={},he={};for(ue in null!==te&&"object"==typeof te||(te={}),null!==le&&"object"==typeof le||(le={}),le)ue in te?de[ue]=E(te[ue],le[ue]):he[ue]=le[ue];return function(be){for(ue in de)he[ue]=de[ue](be);return he}}var A=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(A.source,"g");function k(te,le){var ue,de,he,De,be=A.lastIndex=M.lastIndex=0,me=-1,_e=[],Ee=[];for(te+="",le+="";(ue=A.exec(te))&&(de=M.exec(le));)(he=de.index)>be&&(he=le.slice(be,he),_e[me]?_e[me]+=he:_e[++me]=he),(ue=ue[0])===(de=de[0])?_e[me]?_e[me]+=de:_e[++me]=de:(_e[++me]=null,Ee.push({i:me,x:w(ue,de)})),be=M.lastIndex;return be<le.length&&(he=le.slice(be),_e[me]?_e[me]+=he:_e[++me]=he),_e.length<2?Ee[0]?(De=Ee[0].x,function(Se){return De(Se)+""}):function(De){return function(){return De}}(le):(le=Ee.length,function(De){for(var Se,Fe=0;Fe<le;++Fe)_e[(Se=Ee[Fe]).i]=Se.x(De);return _e.join("")})}function E(te,le){var ue,de=typeof le;return null==le||"boolean"===de?o(le):("number"===de?w:"string"===de?(ue=x.color(le))?(le=ue,h):k:le instanceof x.color?h:le instanceof Date?u:g(le)?c:Array.isArray(le)?m:"function"!=typeof le.valueOf&&"function"!=typeof le.toString||isNaN(le)?f:w)(te,le)}var P,D,F,R,L=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B(te,le,ue,de,he,be){var me,_e,Ee;return(me=Math.sqrt(te*te+le*le))&&(te/=me,le/=me),(Ee=te*ue+le*de)&&(ue-=te*Ee,de-=le*Ee),(_e=Math.sqrt(ue*ue+de*de))&&(ue/=_e,de/=_e,Ee/=_e),te*de<le*ue&&(te=-te,le=-le,Ee=-Ee,me=-me),{translateX:he,translateY:be,rotate:Math.atan2(le,te)*L,skewX:Math.atan(Ee)*L,scaleX:me,scaleY:_e}}function V(te,le,ue,de){function he(be){return be.length?be.pop()+" ":""}return function(be,me){var De,Se,Fe,_e=[],Ee=[];return be=te(be),me=te(me),function(De,Se,Fe,ve,Te,Ie){if(De!==Fe||Se!==ve){var Ce=Te.push("translate(",null,le,null,ue);Ie.push({i:Ce-4,x:w(De,Fe)},{i:Ce-2,x:w(Se,ve)})}else(Fe||ve)&&Te.push("translate("+Fe+le+ve+ue)}(be.translateX,be.translateY,me.translateX,me.translateY,_e,Ee),Fe=_e,(De=be.rotate)!==(Se=me.rotate)?(De-Se>180?Se+=360:Se-De>180&&(De+=360),Ee.push({i:Fe.push(he(Fe)+"rotate(",null,de)-2,x:w(De,Se)})):Se&&Fe.push(he(Fe)+"rotate("+Se+de),function(De,Se,Fe,ve){De!==Se?ve.push({i:Fe.push(he(Fe)+"skewX(",null,de)-2,x:w(De,Se)}):Se&&Fe.push(he(Fe)+"skewX("+Se+de)}(be.skewX,me.skewX,_e,Ee),function(De,Se,Fe,ve,Te,Ie){if(De!==Fe||Se!==ve){var Ce=Te.push(he(Te)+"scale(",null,",",null,")");Ie.push({i:Ce-4,x:w(De,Fe)},{i:Ce-2,x:w(Se,ve)})}else 1===Fe&&1===ve||Te.push(he(Te)+"scale("+Fe+","+ve+")")}(be.scaleX,be.scaleY,me.scaleX,me.scaleY,_e,Ee),be=me=null,function(De){for(var Se,Fe=-1,ve=Ee.length;++Fe<ve;)_e[(Se=Ee[Fe]).i]=Se.x(De);return _e.join("")}}}var Z=V(function(te){return"none"===te?I:(P||(P=document.createElement("DIV"),D=document.documentElement,F=document.defaultView),P.style.transform=te,te=F.getComputedStyle(D.appendChild(P),null).getPropertyValue("transform"),D.removeChild(P),B(+(te=te.slice(7,-1).split(","))[0],+te[1],+te[2],+te[3],+te[4],+te[5]))},"px, ","px)","deg)"),Y=V(function(te){return null==te?I:(R||(R=document.createElementNS("http://www.w3.org/2000/svg","g")),R.setAttribute("transform",te),(te=R.transform.baseVal.consolidate())?B((te=te.matrix).a,te.b,te.c,te.d,te.e,te.f):I)},", ",")",")"),Q=Math.SQRT2;function re(te){return((te=Math.exp(te))+1/te)/2}function $(te){return function(le,ue){var de=te((le=x.hsl(le)).h,(ue=x.hsl(ue)).h),he=y(le.s,ue.s),be=y(le.l,ue.l),me=y(le.opacity,ue.opacity);return function(_e){return le.h=de(_e),le.s=he(_e),le.l=be(_e),le.opacity=me(_e),le+""}}}var J=$(l),ie=$(y);function j(te){return function(le,ue){var de=te((le=x.hcl(le)).h,(ue=x.hcl(ue)).h),he=y(le.c,ue.c),be=y(le.l,ue.l),me=y(le.opacity,ue.opacity);return function(_e){return le.h=de(_e),le.c=he(_e),le.l=be(_e),le.opacity=me(_e),le+""}}}var q=j(l),W=j(y);function ae(te){return function le(ue){function de(he,be){var me=te((he=x.cubehelix(he)).h,(be=x.cubehelix(be)).h),_e=y(he.s,be.s),Ee=y(he.l,be.l),De=y(he.opacity,be.opacity);return function(Se){return he.h=me(Se),he.s=_e(Se),he.l=Ee(Math.pow(Se,ue)),he.opacity=De(Se),he+""}}return ue=+ue,de.gamma=le,de}(1)}var G=ae(l),ee=ae(y);v.interpolate=E,v.interpolateArray=function(te,le){return(g(le)?c:m)(te,le)},v.interpolateBasis=b,v.interpolateBasisClosed=e,v.interpolateCubehelix=G,v.interpolateCubehelixLong=ee,v.interpolateDate=u,v.interpolateDiscrete=function(te){var le=te.length;return function(ue){return te[Math.max(0,Math.min(le-1,Math.floor(ue*le)))]}},v.interpolateHcl=q,v.interpolateHclLong=W,v.interpolateHsl=J,v.interpolateHslLong=ie,v.interpolateHue=function(te,le){var ue=l(+te,+le);return function(de){var he=ue(de);return he-360*Math.floor(he/360)}},v.interpolateLab=function(te,le){var ue=y((te=x.lab(te)).l,(le=x.lab(le)).l),de=y(te.a,le.a),he=y(te.b,le.b),be=y(te.opacity,le.opacity);return function(me){return te.l=ue(me),te.a=de(me),te.b=he(me),te.opacity=be(me),te+""}},v.interpolateNumber=w,v.interpolateNumberArray=c,v.interpolateObject=f,v.interpolateRgb=h,v.interpolateRgbBasis=d,v.interpolateRgbBasisClosed=p,v.interpolateRound=function(te,le){return te=+te,le=+le,function(ue){return Math.round(te*(1-ue)+le*ue)}},v.interpolateString=k,v.interpolateTransformCss=Z,v.interpolateTransformSvg=Y,v.interpolateZoom=function(te,le){var ue,de,he=te[0],be=te[1],me=te[2],De=le[2],Se=le[0]-he,Fe=le[1]-be,ve=Se*Se+Fe*Fe;if(ve<1e-12)de=Math.log(De/me)/Q,ue=function(qe){return[he+qe*Se,be+qe*Fe,me*Math.exp(Q*qe*de)]};else{var Te=Math.sqrt(ve),Ie=(De*De-me*me+4*ve)/(2*me*2*Te),Ce=(De*De-me*me-4*ve)/(2*De*2*Te),Re=Math.log(Math.sqrt(Ie*Ie+1)-Ie),Ue=Math.log(Math.sqrt(Ce*Ce+1)-Ce);de=(Ue-Re)/Q,ue=function(qe){var Xe,et,st=qe*de,He=re(Re),$e=me/(2*Te)*(He*(Xe=Q*st+Re,((Xe=Math.exp(2*Xe))-1)/(Xe+1))-(et=Re,((et=Math.exp(et))-1/et)/2));return[he+$e*Se,be+$e*Fe,me*He/re(Q*st+Re)]}}return ue.duration=1e3*de,ue},v.piecewise=function(te,le){for(var ue=0,de=le.length-1,he=le[0],be=new Array(de<0?0:de);ue<de;)be[ue]=te(he,he=le[++ue]);return function(me){var _e=Math.max(0,Math.min(de-1,Math.floor(me*=de)));return be[_e](me-_e)}},v.quantize=function(te,le){for(var ue=new Array(le),de=0;de<le;++de)ue[de]=te(de/(le-1));return ue},Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-color")):x((v=v||self).d3=v.d3||{},v.d3)},{"d3-color":109}],117:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";var x=Math.PI,T=2*x,b=T-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new e}e.prototype=o.prototype={constructor:e,moveTo:function(i,l){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,l){this._+="L"+(this._x1=+i)+","+(this._y1=+l)},quadraticCurveTo:function(i,l,r,y){this._+="Q"+ +i+","+ +l+","+(this._x1=+r)+","+(this._y1=+y)},bezierCurveTo:function(i,l,r,y,h,s){this._+="C"+ +i+","+ +l+","+ +r+","+ +y+","+(this._x1=+h)+","+(this._y1=+s)},arcTo:function(i,l,r,y,h){var s=this._x1,d=this._y1,p=(r=+r)-(i=+i),c=(y=+y)-(l=+l),g=s-i,m=d-l,u=g*g+m*m;if((h=+h)<0)throw new Error("negative radius: "+h);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=l);else if(u>1e-6)if(Math.abs(m*p-c*g)>1e-6&&h){var w=r-s,f=y-d,A=p*p+c*c,M=w*w+f*f,k=Math.sqrt(A),E=Math.sqrt(u),P=h*Math.tan((x-Math.acos((A+u-M)/(2*k*E)))/2),D=P/E,F=P/k;Math.abs(D-1)>1e-6&&(this._+="L"+(i+D*g)+","+(l+D*m)),this._+="A"+h+","+h+",0,0,"+ +(m*w>g*f)+","+(this._x1=i+F*p)+","+(this._y1=l+F*c)}else this._+="L"+(this._x1=i)+","+(this._y1=l)},arc:function(i,l,r,y,h,s){i=+i,l=+l,s=!!s;var d=(r=+r)*Math.cos(y),p=r*Math.sin(y),c=i+d,g=l+p,m=1^s,u=s?y-h:h-y;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+c+","+g:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-g)>1e-6)&&(this._+="L"+c+","+g),r&&(u<0&&(u=u%T+T),u>b?this._+="A"+r+","+r+",0,1,"+m+","+(i-d)+","+(l-p)+"A"+r+","+r+",0,1,"+m+","+(this._x1=c)+","+(this._y1=g):u>1e-6&&(this._+="A"+r+","+r+",0,"+ +(u>=x)+","+m+","+(this._x1=i+r*Math.cos(h))+","+(this._y1=l+r*Math.sin(h))))},rect:function(i,l,r,y){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+l)+"h"+ +r+"v"+ +y+"h"+-r+"Z"},toString:function(){return this._}},v.path=o,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],118:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";function x(y,h,s,d){if(isNaN(h)||isNaN(s))return y;var p,c,g,m,u,w,f,A,M,k=y._root,E={data:d},P=y._x0,D=y._y0,F=y._x1,R=y._y1;if(!k)return y._root=E,y;for(;k.length;)if((w=h>=(c=(P+F)/2))?P=c:F=c,(f=s>=(g=(D+R)/2))?D=g:R=g,p=k,!(k=k[A=f<<1|w]))return p[A]=E,y;if(m=+y._x.call(null,k.data),u=+y._y.call(null,k.data),h===m&&s===u)return E.next=k,p?p[A]=E:y._root=E,y;do{p=p?p[A]=new Array(4):y._root=new Array(4),(w=h>=(c=(P+F)/2))?P=c:F=c,(f=s>=(g=(D+R)/2))?D=g:R=g}while((A=f<<1|w)==(M=(u>=g)<<1|m>=c));return p[M]=k,p[A]=E,y}function T(y,h,s,d,p){this.node=y,this.x0=h,this.y0=s,this.x1=d,this.y1=p}function b(y){return y[0]}function e(y){return y[1]}function o(y,h,s){var d=new i(null==h?b:h,null==s?e:s,NaN,NaN,NaN,NaN);return null==y?d:d.addAll(y)}function i(y,h,s,d,p,c){this._x=y,this._y=h,this._x0=s,this._y0=d,this._x1=p,this._y1=c,this._root=void 0}function l(y){for(var h={data:y.data},s=h;y=y.next;)s=s.next={data:y.data};return h}var r=o.prototype=i.prototype;r.copy=function(){var y,h,s=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return s;if(!d.length)return s._root=l(d),s;for(y=[{source:d,target:s._root=new Array(4)}];d=y.pop();)for(var p=0;p<4;++p)(h=d.source[p])&&(h.length?y.push({source:h,target:d.target[p]=new Array(4)}):d.target[p]=l(h));return s},r.add=function(y){var h=+this._x.call(null,y),s=+this._y.call(null,y);return x(this.cover(h,s),h,s,y)},r.addAll=function(y){var h,s,d,p,c=y.length,g=new Array(c),m=new Array(c),u=1/0,w=1/0,f=-1/0,A=-1/0;for(s=0;s<c;++s)isNaN(d=+this._x.call(null,h=y[s]))||isNaN(p=+this._y.call(null,h))||(g[s]=d,m[s]=p,d<u&&(u=d),d>f&&(f=d),p<w&&(w=p),p>A&&(A=p));if(u>f||w>A)return this;for(this.cover(u,w).cover(f,A),s=0;s<c;++s)x(this,g[s],m[s],y[s]);return this},r.cover=function(y,h){if(isNaN(y=+y)||isNaN(h=+h))return this;var s=this._x0,d=this._y0,p=this._x1,c=this._y1;if(isNaN(s))p=(s=Math.floor(y))+1,c=(d=Math.floor(h))+1;else{for(var g,m,u=p-s,w=this._root;s>y||y>=p||d>h||h>=c;)switch(m=(h<d)<<1|y<s,(g=new Array(4))[m]=w,w=g,u*=2,m){case 0:p=s+u,c=d+u;break;case 1:s=p-u,c=d+u;break;case 2:p=s+u,d=c-u;break;case 3:s=p-u,d=c-u}this._root&&this._root.length&&(this._root=w)}return this._x0=s,this._y0=d,this._x1=p,this._y1=c,this},r.data=function(){var y=[];return this.visit(function(h){if(!h.length)do{y.push(h.data)}while(h=h.next)}),y},r.extent=function(y){return arguments.length?this.cover(+y[0][0],+y[0][1]).cover(+y[1][0],+y[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(y,h,s){var d,p,c,g,m,u,w,f=this._x0,A=this._y0,M=this._x1,k=this._y1,E=[],P=this._root;for(P&&E.push(new T(P,f,A,M,k)),null==s?s=1/0:(f=y-s,A=h-s,M=y+s,k=h+s,s*=s);u=E.pop();)if(!(!(P=u.node)||(p=u.x0)>M||(c=u.y0)>k||(g=u.x1)<f||(m=u.y1)<A))if(P.length){var D=(p+g)/2,F=(c+m)/2;E.push(new T(P[3],D,F,g,m),new T(P[2],p,F,D,m),new T(P[1],D,c,g,F),new T(P[0],p,c,D,F)),(w=(h>=F)<<1|y>=D)&&(u=E[E.length-1],E[E.length-1]=E[E.length-1-w],E[E.length-1-w]=u)}else{var R=y-+this._x.call(null,P.data),L=h-+this._y.call(null,P.data),I=R*R+L*L;if(I<s){var B=Math.sqrt(s=I);f=y-B,A=h-B,M=y+B,k=h+B,d=P.data}}return d},r.remove=function(y){if(isNaN(c=+this._x.call(null,y))||isNaN(g=+this._y.call(null,y)))return this;var h,s,d,p,c,g,m,u,w,f,A,M,k=this._root,E=this._x0,P=this._y0,D=this._x1,F=this._y1;if(!k)return this;if(k.length)for(;;){if((w=c>=(m=(E+D)/2))?E=m:D=m,(f=g>=(u=(P+F)/2))?P=u:F=u,h=k,!(k=k[A=f<<1|w]))return this;if(!k.length)break;(h[A+1&3]||h[A+2&3]||h[A+3&3])&&(s=h,M=A)}for(;k.data!==y;)if(d=k,!(k=k.next))return this;return(p=k.next)&&delete k.next,d?(p?d.next=p:delete d.next,this):h?(p?h[A]=p:delete h[A],(k=h[0]||h[1]||h[2]||h[3])&&k===(h[3]||h[2]||h[1]||h[0])&&!k.length&&(s?s[M]=k:this._root=k),this):(this._root=p,this)},r.removeAll=function(y){for(var h=0,s=y.length;h<s;++h)this.remove(y[h]);return this},r.root=function(){return this._root},r.size=function(){var y=0;return this.visit(function(h){if(!h.length)do{++y}while(h=h.next)}),y},r.visit=function(y){var h,s,d,p,c,g,m=[],u=this._root;for(u&&m.push(new T(u,this._x0,this._y0,this._x1,this._y1));h=m.pop();)if(!y(u=h.node,d=h.x0,p=h.y0,c=h.x1,g=h.y1)&&u.length){var w=(d+c)/2,f=(p+g)/2;(s=u[3])&&m.push(new T(s,w,f,c,g)),(s=u[2])&&m.push(new T(s,d,f,w,g)),(s=u[1])&&m.push(new T(s,w,p,c,f)),(s=u[0])&&m.push(new T(s,d,p,w,f))}return this},r.visitAfter=function(y){var h,s=[],d=[];for(this._root&&s.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));h=s.pop();){var p=h.node;if(p.length){var c,g=h.x0,m=h.y0,u=h.x1,w=h.y1,f=(g+u)/2,A=(m+w)/2;(c=p[0])&&s.push(new T(c,g,m,f,A)),(c=p[1])&&s.push(new T(c,f,m,u,A)),(c=p[2])&&s.push(new T(c,g,A,f,w)),(c=p[3])&&s.push(new T(c,f,A,u,w))}d.push(h)}for(;h=d.pop();)y(h.node,h.x0,h.y0,h.x1,h.y1);return this},r.x=function(y){return arguments.length?(this._x=y,this):this._x},r.y=function(y){return arguments.length?(this._y=y,this):this._y},v.quadtree=o,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],119:[function(_,oe,se){var v,x;v=this,x=function(v,x){"use strict";function T(Ne){return function(){return Ne}}var b=Math.abs,e=Math.atan2,o=Math.cos,i=Math.max,l=Math.min,r=Math.sin,y=Math.sqrt,h=Math.PI,s=h/2,d=2*h;function p(Ne){return Ne>1?0:Ne<-1?h:Math.acos(Ne)}function c(Ne){return Ne>=1?s:Ne<=-1?-s:Math.asin(Ne)}function g(Ne){return Ne.innerRadius}function m(Ne){return Ne.outerRadius}function u(Ne){return Ne.startAngle}function w(Ne){return Ne.endAngle}function f(Ne){return Ne&&Ne.padAngle}function A(Ne,ot,yt,It,Vt,ln,un,an){var wn=yt-Ne,Zn=It-ot,An=un-Vt,hn=an-ln,pn=hn*wn-An*Zn;if(!(pn*pn<1e-12))return[Ne+(pn=(An*(ot-ln)-hn*(Ne-Vt))/pn)*wn,ot+pn*Zn]}function M(Ne,ot,yt,It,Vt,ln,un){var an=Ne-yt,wn=ot-It,Zn=(un?ln:-ln)/y(an*an+wn*wn),An=Zn*wn,hn=-Zn*an,pn=Ne+An,xn=ot+hn,En=yt+An,In=It+hn,Yn=(pn+En)/2,nr=(xn+In)/2,sr=En-pn,Ar=In-xn,yr=sr*sr+Ar*Ar,Pr=Vt-ln,Wr=pn*In-En*xn,lr=(Ar<0?-1:1)*y(i(0,Pr*Pr*yr-Wr*Wr)),Hn=(Wr*Ar-sr*lr)/yr,Sr=(-Wr*sr-Ar*lr)/yr,ti=(Wr*Ar+sr*lr)/yr,Fn=(-Wr*sr+Ar*lr)/yr,br=Hn-Yn,xr=Sr-nr,Kn=ti-Yn,Qr=Fn-nr;return br*br+xr*xr>Kn*Kn+Qr*Qr&&(Hn=ti,Sr=Fn),{cx:Hn,cy:Sr,x01:-An,y01:-hn,x11:Hn*(Vt/Pr-1),y11:Sr*(Vt/Pr-1)}}function k(Ne){this._context=Ne}function E(Ne){return new k(Ne)}function P(Ne){return Ne[0]}function D(Ne){return Ne[1]}function F(){var Ne=P,ot=D,yt=T(!0),It=null,Vt=E,ln=null;function un(an){var wn,Zn,An,hn=an.length,pn=!1;for(null==It&&(ln=Vt(An=x.path())),wn=0;wn<=hn;++wn)!(wn<hn&&yt(Zn=an[wn],wn,an))===pn&&((pn=!pn)?ln.lineStart():ln.lineEnd()),pn&&ln.point(+Ne(Zn,wn,an),+ot(Zn,wn,an));if(An)return ln=null,An+""||null}return un.x=function(an){return arguments.length?(Ne="function"==typeof an?an:T(+an),un):Ne},un.y=function(an){return arguments.length?(ot="function"==typeof an?an:T(+an),un):ot},un.defined=function(an){return arguments.length?(yt="function"==typeof an?an:T(!!an),un):yt},un.curve=function(an){return arguments.length?(Vt=an,null!=It&&(ln=Vt(It)),un):Vt},un.context=function(an){return arguments.length?(null==an?It=ln=null:ln=Vt(It=an),un):It},un}function R(){var Ne=P,ot=null,yt=T(0),It=D,Vt=T(!0),ln=null,un=E,an=null;function wn(An){var hn,pn,xn,En,In,Yn=An.length,nr=!1,sr=new Array(Yn),Ar=new Array(Yn);for(null==ln&&(an=un(In=x.path())),hn=0;hn<=Yn;++hn){if(!(hn<Yn&&Vt(En=An[hn],hn,An))===nr)if(nr=!nr)pn=hn,an.areaStart(),an.lineStart();else{for(an.lineEnd(),an.lineStart(),xn=hn-1;xn>=pn;--xn)an.point(sr[xn],Ar[xn]);an.lineEnd(),an.areaEnd()}nr&&(sr[hn]=+Ne(En,hn,An),Ar[hn]=+yt(En,hn,An),an.point(ot?+ot(En,hn,An):sr[hn],It?+It(En,hn,An):Ar[hn]))}if(In)return an=null,In+""||null}function Zn(){return F().defined(Vt).curve(un).context(ln)}return wn.x=function(An){return arguments.length?(Ne="function"==typeof An?An:T(+An),ot=null,wn):Ne},wn.x0=function(An){return arguments.length?(Ne="function"==typeof An?An:T(+An),wn):Ne},wn.x1=function(An){return arguments.length?(ot=null==An?null:"function"==typeof An?An:T(+An),wn):ot},wn.y=function(An){return arguments.length?(yt="function"==typeof An?An:T(+An),It=null,wn):yt},wn.y0=function(An){return arguments.length?(yt="function"==typeof An?An:T(+An),wn):yt},wn.y1=function(An){return arguments.length?(It=null==An?null:"function"==typeof An?An:T(+An),wn):It},wn.lineX0=wn.lineY0=function(){return Zn().x(Ne).y(yt)},wn.lineY1=function(){return Zn().x(Ne).y(It)},wn.lineX1=function(){return Zn().x(ot).y(yt)},wn.defined=function(An){return arguments.length?(Vt="function"==typeof An?An:T(!!An),wn):Vt},wn.curve=function(An){return arguments.length?(un=An,null!=ln&&(an=un(ln)),wn):un},wn.context=function(An){return arguments.length?(null==An?ln=an=null:an=un(ln=An),wn):ln},wn}function L(Ne,ot){return ot<Ne?-1:ot>Ne?1:ot>=Ne?0:NaN}function I(Ne){return Ne}k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,ot):this._context.moveTo(Ne,ot);break;case 1:this._point=2;default:this._context.lineTo(Ne,ot)}}};var B=Z(E);function V(Ne){this._curve=Ne}function Z(Ne){function ot(yt){return new V(Ne(yt))}return ot._curve=Ne,ot}function Y(Ne){var ot=Ne.curve;return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne.curve=function(yt){return arguments.length?ot(Z(yt)):ot()._curve},Ne}function Q(){return Y(F().curve(B))}function re(){var Ne=R().curve(B),ot=Ne.curve,yt=Ne.lineX0,It=Ne.lineX1,Vt=Ne.lineY0,ln=Ne.lineY1;return Ne.angle=Ne.x,delete Ne.x,Ne.startAngle=Ne.x0,delete Ne.x0,Ne.endAngle=Ne.x1,delete Ne.x1,Ne.radius=Ne.y,delete Ne.y,Ne.innerRadius=Ne.y0,delete Ne.y0,Ne.outerRadius=Ne.y1,delete Ne.y1,Ne.lineStartAngle=function(){return Y(yt())},delete Ne.lineX0,Ne.lineEndAngle=function(){return Y(It())},delete Ne.lineX1,Ne.lineInnerRadius=function(){return Y(Vt())},delete Ne.lineY0,Ne.lineOuterRadius=function(){return Y(ln())},delete Ne.lineY1,Ne.curve=function(un){return arguments.length?ot(Z(un)):ot()._curve},Ne}function $(Ne,ot){return[(ot=+ot)*Math.cos(Ne-=Math.PI/2),ot*Math.sin(Ne)]}V.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Ne,ot){this._curve.point(ot*Math.sin(Ne),ot*-Math.cos(Ne))}};var J=Array.prototype.slice;function ie(Ne){return Ne.source}function j(Ne){return Ne.target}function q(Ne){var ot=ie,yt=j,It=P,Vt=D,ln=null;function un(){var an,wn=J.call(arguments),Zn=ot.apply(this,wn),An=yt.apply(this,wn);if(ln||(ln=an=x.path()),Ne(ln,+It.apply(this,(wn[0]=Zn,wn)),+Vt.apply(this,wn),+It.apply(this,(wn[0]=An,wn)),+Vt.apply(this,wn)),an)return ln=null,an+""||null}return un.source=function(an){return arguments.length?(ot=an,un):ot},un.target=function(an){return arguments.length?(yt=an,un):yt},un.x=function(an){return arguments.length?(It="function"==typeof an?an:T(+an),un):It},un.y=function(an){return arguments.length?(Vt="function"==typeof an?an:T(+an),un):Vt},un.context=function(an){return arguments.length?(ln=null==an?null:an,un):ln},un}function W(Ne,ot,yt,It,Vt){Ne.moveTo(ot,yt),Ne.bezierCurveTo(ot=(ot+It)/2,yt,ot,Vt,It,Vt)}function ae(Ne,ot,yt,It,Vt){Ne.moveTo(ot,yt),Ne.bezierCurveTo(ot,yt=(yt+Vt)/2,It,yt,It,Vt)}function G(Ne,ot,yt,It,Vt){var ln=$(ot,yt),un=$(ot,yt=(yt+Vt)/2),an=$(It,yt),wn=$(It,Vt);Ne.moveTo(ln[0],ln[1]),Ne.bezierCurveTo(un[0],un[1],an[0],an[1],wn[0],wn[1])}var ee={draw:function(Ne,ot){var yt=Math.sqrt(ot/h);Ne.moveTo(yt,0),Ne.arc(0,0,yt,0,d)}},te={draw:function(Ne,ot){var yt=Math.sqrt(ot/5)/2;Ne.moveTo(-3*yt,-yt),Ne.lineTo(-yt,-yt),Ne.lineTo(-yt,-3*yt),Ne.lineTo(yt,-3*yt),Ne.lineTo(yt,-yt),Ne.lineTo(3*yt,-yt),Ne.lineTo(3*yt,yt),Ne.lineTo(yt,yt),Ne.lineTo(yt,3*yt),Ne.lineTo(-yt,3*yt),Ne.lineTo(-yt,yt),Ne.lineTo(-3*yt,yt),Ne.closePath()}},le=Math.sqrt(1/3),ue=2*le,de={draw:function(Ne,ot){var yt=Math.sqrt(ot/ue),It=yt*le;Ne.moveTo(0,-yt),Ne.lineTo(It,0),Ne.lineTo(0,yt),Ne.lineTo(-It,0),Ne.closePath()}},he=Math.sin(h/10)/Math.sin(7*h/10),be=Math.sin(d/10)*he,me=-Math.cos(d/10)*he,_e={draw:function(Ne,ot){var yt=Math.sqrt(.8908130915292852*ot),It=be*yt,Vt=me*yt;Ne.moveTo(0,-yt),Ne.lineTo(It,Vt);for(var ln=1;ln<5;++ln){var un=d*ln/5,an=Math.cos(un),wn=Math.sin(un);Ne.lineTo(wn*yt,-an*yt),Ne.lineTo(an*It-wn*Vt,wn*It+an*Vt)}Ne.closePath()}},Ee={draw:function(Ne,ot){var yt=Math.sqrt(ot),It=-yt/2;Ne.rect(It,It,yt,yt)}},De=Math.sqrt(3),Se={draw:function(Ne,ot){var yt=-Math.sqrt(ot/(3*De));Ne.moveTo(0,2*yt),Ne.lineTo(-De*yt,-yt),Ne.lineTo(De*yt,-yt),Ne.closePath()}},Fe=-.5,ve=Math.sqrt(3)/2,Te=1/Math.sqrt(12),Ie=3*(Te/2+1),Ce={draw:function(Ne,ot){var yt=Math.sqrt(ot/Ie),It=yt/2,Vt=yt*Te,ln=It,un=yt*Te+yt,an=-ln,wn=un;Ne.moveTo(It,Vt),Ne.lineTo(ln,un),Ne.lineTo(an,wn),Ne.lineTo(Fe*It-ve*Vt,ve*It+Fe*Vt),Ne.lineTo(Fe*ln-ve*un,ve*ln+Fe*un),Ne.lineTo(Fe*an-ve*wn,ve*an+Fe*wn),Ne.lineTo(Fe*It+ve*Vt,Fe*Vt-ve*It),Ne.lineTo(Fe*ln+ve*un,Fe*un-ve*ln),Ne.lineTo(Fe*an+ve*wn,Fe*wn-ve*an),Ne.closePath()}},Re=[ee,te,de,Ee,_e,Se,Ce];function Ue(){}function qe(Ne,ot,yt){Ne._context.bezierCurveTo((2*Ne._x0+Ne._x1)/3,(2*Ne._y0+Ne._y1)/3,(Ne._x0+2*Ne._x1)/3,(Ne._y0+2*Ne._y1)/3,(Ne._x0+4*Ne._x1+ot)/6,(Ne._y0+4*Ne._y1+yt)/6)}function Xe(Ne){this._context=Ne}function st(Ne){this._context=Ne}function He(Ne){this._context=Ne}function $e(Ne,ot){this._basis=new Xe(Ne),this._beta=ot}Xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,ot):this._context.moveTo(Ne,ot);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qe(this,Ne,ot)}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=ot}},st.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1,this._x2=Ne,this._y2=ot;break;case 1:this._point=2,this._x3=Ne,this._y3=ot;break;case 2:this._point=3,this._x4=Ne,this._y4=ot,this._context.moveTo((this._x0+4*this._x1+Ne)/6,(this._y0+4*this._y1+ot)/6);break;default:qe(this,Ne,ot)}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=ot}},He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var yt=(this._x0+4*this._x1+Ne)/6,It=(this._y0+4*this._y1+ot)/6;this._line?this._context.lineTo(yt,It):this._context.moveTo(yt,It);break;case 3:this._point=4;default:qe(this,Ne,ot)}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=ot}},$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Ne=this._x,ot=this._y,yt=Ne.length-1;if(yt>0)for(var It,Vt=Ne[0],ln=ot[0],un=Ne[yt]-Vt,an=ot[yt]-ln,wn=-1;++wn<=yt;)this._basis.point(this._beta*Ne[wn]+(1-this._beta)*(Vt+(It=wn/yt)*un),this._beta*ot[wn]+(1-this._beta)*(ln+It*an));this._x=this._y=null,this._basis.lineEnd()},point:function(Ne,ot){this._x.push(+Ne),this._y.push(+ot)}};var et=function Ne(ot){function yt(It){return 1===ot?new Xe(It):new $e(It,ot)}return yt.beta=function(It){return Ne(+It)},yt}(.85);function tt(Ne,ot,yt){Ne._context.bezierCurveTo(Ne._x1+Ne._k*(Ne._x2-Ne._x0),Ne._y1+Ne._k*(Ne._y2-Ne._y0),Ne._x2+Ne._k*(Ne._x1-ot),Ne._y2+Ne._k*(Ne._y1-yt),Ne._x2,Ne._y2)}function ct(Ne,ot){this._context=Ne,this._k=(1-ot)/6}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,ot):this._context.moveTo(Ne,ot);break;case 1:this._point=2,this._x1=Ne,this._y1=ot;break;case 2:this._point=3;default:tt(this,Ne,ot)}this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=ot}};var bt=function Ne(ot){function yt(It){return new ct(It,ot)}return yt.tension=function(It){return Ne(+It)},yt}(0);function At(Ne,ot){this._context=Ne,this._k=(1-ot)/6}At.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1,this._x3=Ne,this._y3=ot;break;case 1:this._point=2,this._context.moveTo(this._x4=Ne,this._y4=ot);break;case 2:this._point=3,this._x5=Ne,this._y5=ot;break;default:tt(this,Ne,ot)}this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=ot}};var Ut=function Ne(ot){function yt(It){return new At(It,ot)}return yt.tension=function(It){return Ne(+It)},yt}(0);function Ct(Ne,ot){this._context=Ne,this._k=(1-ot)/6}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tt(this,Ne,ot)}this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=ot}};var dt=function Ne(ot){function yt(It){return new Ct(It,ot)}return yt.tension=function(It){return Ne(+It)},yt}(0);function at(Ne,ot,yt){var It=Ne._x1,Vt=Ne._y1,ln=Ne._x2,un=Ne._y2;if(Ne._l01_a>1e-12){var an=2*Ne._l01_2a+3*Ne._l01_a*Ne._l12_a+Ne._l12_2a,wn=3*Ne._l01_a*(Ne._l01_a+Ne._l12_a);It=(It*an-Ne._x0*Ne._l12_2a+Ne._x2*Ne._l01_2a)/wn,Vt=(Vt*an-Ne._y0*Ne._l12_2a+Ne._y2*Ne._l01_2a)/wn}if(Ne._l23_a>1e-12){var Zn=2*Ne._l23_2a+3*Ne._l23_a*Ne._l12_a+Ne._l12_2a,An=3*Ne._l23_a*(Ne._l23_a+Ne._l12_a);ln=(ln*Zn+Ne._x1*Ne._l23_2a-ot*Ne._l12_2a)/An,un=(un*Zn+Ne._y1*Ne._l23_2a-yt*Ne._l12_2a)/An}Ne._context.bezierCurveTo(It,Vt,ln,un,Ne._x2,Ne._y2)}function Nt(Ne,ot){this._context=Ne,this._alpha=ot}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){if(Ne=+Ne,ot=+ot,this._point){var yt=this._x2-Ne,It=this._y2-ot;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yt*yt+It*It,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,ot):this._context.moveTo(Ne,ot);break;case 1:this._point=2;break;case 2:this._point=3;default:at(this,Ne,ot)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=ot}};var rn=function Ne(ot){function yt(It){return ot?new Nt(It,ot):new ct(It,0)}return yt.alpha=function(It){return Ne(+It)},yt}(.5);function en(Ne,ot){this._context=Ne,this._alpha=ot}en.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ne,ot){if(Ne=+Ne,ot=+ot,this._point){var yt=this._x2-Ne,It=this._y2-ot;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yt*yt+It*It,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Ne,this._y3=ot;break;case 1:this._point=2,this._context.moveTo(this._x4=Ne,this._y4=ot);break;case 2:this._point=3,this._x5=Ne,this._y5=ot;break;default:at(this,Ne,ot)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=ot}};var Ge=function Ne(ot){function yt(It){return ot?new en(It,ot):new At(It,0)}return yt.alpha=function(It){return Ne(+It)},yt}(.5);function Qe(Ne,ot){this._context=Ne,this._alpha=ot}Qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){if(Ne=+Ne,ot=+ot,this._point){var yt=this._x2-Ne,It=this._y2-ot;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yt*yt+It*It,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:at(this,Ne,ot)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=ot}};var Rt=function Ne(ot){function yt(It){return ot?new Qe(It,ot):new Ct(It,0)}return yt.alpha=function(It){return Ne(+It)},yt}(.5);function gt(Ne){this._context=Ne}function Be(Ne){return Ne<0?-1:1}function Ve(Ne,ot,yt){var It=Ne._x1-Ne._x0,Vt=ot-Ne._x1,ln=(Ne._y1-Ne._y0)/(It||Vt<0&&-0),un=(yt-Ne._y1)/(Vt||It<0&&-0),an=(ln*Vt+un*It)/(It+Vt);return(Be(ln)+Be(un))*Math.min(Math.abs(ln),Math.abs(un),.5*Math.abs(an))||0}function Le(Ne,ot){var yt=Ne._x1-Ne._x0;return yt?(3*(Ne._y1-Ne._y0)/yt-ot)/2:ot}function je(Ne,ot,yt){var It=Ne._x0,ln=Ne._x1,un=Ne._y1,an=(ln-It)/3;Ne._context.bezierCurveTo(It+an,Ne._y0+an*ot,ln-an,un-an*yt,ln,un)}function Ke(Ne){this._context=Ne}function ft(Ne){this._context=new mt(Ne)}function mt(Ne){this._context=Ne}function pt(Ne){this._context=Ne}function Ot(Ne){var ot,yt,It=Ne.length-1,Vt=new Array(It),ln=new Array(It),un=new Array(It);for(Vt[0]=0,ln[0]=2,un[0]=Ne[0]+2*Ne[1],ot=1;ot<It-1;++ot)Vt[ot]=1,ln[ot]=4,un[ot]=4*Ne[ot]+2*Ne[ot+1];for(Vt[It-1]=2,ln[It-1]=7,un[It-1]=8*Ne[It-1]+Ne[It],ot=1;ot<It;++ot)ln[ot]-=yt=Vt[ot]/ln[ot-1],un[ot]-=yt*un[ot-1];for(Vt[It-1]=un[It-1]/ln[It-1],ot=It-2;ot>=0;--ot)Vt[ot]=(un[ot]-Vt[ot+1])/ln[ot];for(ln[It-1]=(Ne[It]+Vt[It-1])/2,ot=0;ot<It-1;++ot)ln[ot]=2*Ne[ot+1]-Vt[ot+1];return[Vt,ln]}function Pt(Ne,ot){this._context=Ne,this._t=ot}function Jt(Ne,ot){if((Vt=Ne.length)>1)for(var yt,It,Vt,ln=1,un=Ne[ot[0]],an=un.length;ln<Vt;++ln)for(It=un,un=Ne[ot[ln]],yt=0;yt<an;++yt)un[yt][1]+=un[yt][0]=isNaN(It[yt][1])?It[yt][0]:It[yt][1]}function $t(Ne){for(var ot=Ne.length,yt=new Array(ot);--ot>=0;)yt[ot]=ot;return yt}function ut(Ne,ot){return Ne[ot]}function Dt(Ne){var ot=Ne.map(Wt);return $t(Ne).sort(function(yt,It){return ot[yt]-ot[It]})}function Wt(Ne){for(var ot,yt=-1,It=0,Vt=Ne.length,ln=-1/0;++yt<Vt;)(ot=+Ne[yt][1])>ln&&(ln=ot,It=yt);return It}function zt(Ne){var ot=Ne.map(Ht);return $t(Ne).sort(function(yt,It){return ot[yt]-ot[It]})}function Ht(Ne){for(var ot,yt=0,It=-1,Vt=Ne.length;++It<Vt;)(ot=+Ne[It][1])&&(yt+=ot);return yt}gt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Ne,ot){Ne=+Ne,ot=+ot,this._point?this._context.lineTo(Ne,ot):(this._point=1,this._context.moveTo(Ne,ot))}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:je(this,this._t0,Le(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,ot){var yt=NaN;if(ot=+ot,(Ne=+Ne)!==this._x1||ot!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,ot):this._context.moveTo(Ne,ot);break;case 1:this._point=2;break;case 2:this._point=3,je(this,Le(this,yt=Ve(this,Ne,ot)),yt);break;default:je(this,this._t0,yt=Ve(this,Ne,ot))}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=ot,this._t0=yt}}},(ft.prototype=Object.create(Ke.prototype)).point=function(Ne,ot){Ke.prototype.point.call(this,ot,Ne)},mt.prototype={moveTo:function(Ne,ot){this._context.moveTo(ot,Ne)},closePath:function(){this._context.closePath()},lineTo:function(Ne,ot){this._context.lineTo(ot,Ne)},bezierCurveTo:function(Ne,ot,yt,It,Vt,ln){this._context.bezierCurveTo(ot,Ne,It,yt,ln,Vt)}},pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Ne=this._x,ot=this._y,yt=Ne.length;if(yt)if(this._line?this._context.lineTo(Ne[0],ot[0]):this._context.moveTo(Ne[0],ot[0]),2===yt)this._context.lineTo(Ne[1],ot[1]);else for(var It=Ot(Ne),Vt=Ot(ot),ln=0,un=1;un<yt;++ln,++un)this._context.bezierCurveTo(It[0][ln],Vt[0][ln],It[1][ln],Vt[1][ln],Ne[un],ot[un]);(this._line||0!==this._line&&1===yt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Ne,ot){this._x.push(+Ne),this._y.push(+ot)}},Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Ne,ot){switch(Ne=+Ne,ot=+ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,ot):this._context.moveTo(Ne,ot);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,ot),this._context.lineTo(Ne,ot);else{var yt=this._x*(1-this._t)+Ne*this._t;this._context.lineTo(yt,this._y),this._context.lineTo(yt,ot)}}this._x=Ne,this._y=ot}},v.arc=function(){var Ne=g,ot=m,yt=T(0),It=null,Vt=u,ln=w,un=f,an=null;function wn(){var Zn,An,hn=+Ne.apply(this,arguments),pn=+ot.apply(this,arguments),xn=Vt.apply(this,arguments)-s,En=ln.apply(this,arguments)-s,In=b(En-xn),Yn=En>xn;if(an||(an=Zn=x.path()),pn<hn&&(An=pn,pn=hn,hn=An),pn>1e-12)if(In>d-1e-12)an.moveTo(pn*o(xn),pn*r(xn)),an.arc(0,0,pn,xn,En,!Yn),hn>1e-12&&(an.moveTo(hn*o(En),hn*r(En)),an.arc(0,0,hn,En,xn,Yn));else{var nr,sr,Ar=xn,yr=En,Pr=xn,Wr=En,lr=In,Hn=In,Sr=un.apply(this,arguments)/2,ti=Sr>1e-12&&(It?+It.apply(this,arguments):y(hn*hn+pn*pn)),Fn=l(b(pn-hn)/2,+yt.apply(this,arguments)),br=Fn,xr=Fn;if(ti>1e-12){var Kn=c(ti/hn*r(Sr)),Qr=c(ti/pn*r(Sr));(lr-=2*Kn)>1e-12?(Pr+=Kn*=Yn?1:-1,Wr-=Kn):(lr=0,Pr=Wr=(xn+En)/2),(Hn-=2*Qr)>1e-12?(Ar+=Qr*=Yn?1:-1,yr-=Qr):(Hn=0,Ar=yr=(xn+En)/2)}var ci=pn*o(Ar),Or=pn*r(Ar),li=hn*o(Wr),di=hn*r(Wr);if(Fn>1e-12){var Tn,tr=pn*o(yr),Zt=pn*r(yr),yn=hn*o(Pr),Cn=hn*r(Pr);if(In<h&&(Tn=A(ci,Or,yn,Cn,tr,Zt,li,di))){var rr=ci-Tn[0],Qn=Or-Tn[1],Jn=tr-Tn[0],Wn=Zt-Tn[1],On=1/r(p((rr*Jn+Qn*Wn)/(y(rr*rr+Qn*Qn)*y(Jn*Jn+Wn*Wn)))/2),zn=y(Tn[0]*Tn[0]+Tn[1]*Tn[1]);br=l(Fn,(hn-zn)/(On-1)),xr=l(Fn,(pn-zn)/(On+1))}}Hn>1e-12?xr>1e-12?(nr=M(yn,Cn,ci,Or,pn,xr,Yn),sr=M(tr,Zt,li,di,pn,xr,Yn),an.moveTo(nr.cx+nr.x01,nr.cy+nr.y01),xr<Fn?an.arc(nr.cx,nr.cy,xr,e(nr.y01,nr.x01),e(sr.y01,sr.x01),!Yn):(an.arc(nr.cx,nr.cy,xr,e(nr.y01,nr.x01),e(nr.y11,nr.x11),!Yn),an.arc(0,0,pn,e(nr.cy+nr.y11,nr.cx+nr.x11),e(sr.cy+sr.y11,sr.cx+sr.x11),!Yn),an.arc(sr.cx,sr.cy,xr,e(sr.y11,sr.x11),e(sr.y01,sr.x01),!Yn))):(an.moveTo(ci,Or),an.arc(0,0,pn,Ar,yr,!Yn)):an.moveTo(ci,Or),hn>1e-12&&lr>1e-12?br>1e-12?(nr=M(li,di,tr,Zt,hn,-br,Yn),sr=M(ci,Or,yn,Cn,hn,-br,Yn),an.lineTo(nr.cx+nr.x01,nr.cy+nr.y01),br<Fn?an.arc(nr.cx,nr.cy,br,e(nr.y01,nr.x01),e(sr.y01,sr.x01),!Yn):(an.arc(nr.cx,nr.cy,br,e(nr.y01,nr.x01),e(nr.y11,nr.x11),!Yn),an.arc(0,0,hn,e(nr.cy+nr.y11,nr.cx+nr.x11),e(sr.cy+sr.y11,sr.cx+sr.x11),Yn),an.arc(sr.cx,sr.cy,br,e(sr.y11,sr.x11),e(sr.y01,sr.x01),!Yn))):an.arc(0,0,hn,Wr,Pr,Yn):an.lineTo(li,di)}else an.moveTo(0,0);if(an.closePath(),Zn)return an=null,Zn+""||null}return wn.centroid=function(){var Zn=(+Ne.apply(this,arguments)+ +ot.apply(this,arguments))/2,An=(+Vt.apply(this,arguments)+ +ln.apply(this,arguments))/2-h/2;return[o(An)*Zn,r(An)*Zn]},wn.innerRadius=function(Zn){return arguments.length?(Ne="function"==typeof Zn?Zn:T(+Zn),wn):Ne},wn.outerRadius=function(Zn){return arguments.length?(ot="function"==typeof Zn?Zn:T(+Zn),wn):ot},wn.cornerRadius=function(Zn){return arguments.length?(yt="function"==typeof Zn?Zn:T(+Zn),wn):yt},wn.padRadius=function(Zn){return arguments.length?(It=null==Zn?null:"function"==typeof Zn?Zn:T(+Zn),wn):It},wn.startAngle=function(Zn){return arguments.length?(Vt="function"==typeof Zn?Zn:T(+Zn),wn):Vt},wn.endAngle=function(Zn){return arguments.length?(ln="function"==typeof Zn?Zn:T(+Zn),wn):ln},wn.padAngle=function(Zn){return arguments.length?(un="function"==typeof Zn?Zn:T(+Zn),wn):un},wn.context=function(Zn){return arguments.length?(an=null==Zn?null:Zn,wn):an},wn},v.area=R,v.areaRadial=re,v.curveBasis=function(Ne){return new Xe(Ne)},v.curveBasisClosed=function(Ne){return new st(Ne)},v.curveBasisOpen=function(Ne){return new He(Ne)},v.curveBundle=et,v.curveCardinal=bt,v.curveCardinalClosed=Ut,v.curveCardinalOpen=dt,v.curveCatmullRom=rn,v.curveCatmullRomClosed=Ge,v.curveCatmullRomOpen=Rt,v.curveLinear=E,v.curveLinearClosed=function(Ne){return new gt(Ne)},v.curveMonotoneX=function(Ne){return new Ke(Ne)},v.curveMonotoneY=function(Ne){return new ft(Ne)},v.curveNatural=function(Ne){return new pt(Ne)},v.curveStep=function(Ne){return new Pt(Ne,.5)},v.curveStepAfter=function(Ne){return new Pt(Ne,1)},v.curveStepBefore=function(Ne){return new Pt(Ne,0)},v.line=F,v.lineRadial=Q,v.linkHorizontal=function(){return q(W)},v.linkRadial=function(){var Ne=q(G);return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne},v.linkVertical=function(){return q(ae)},v.pie=function(){var Ne=I,ot=L,yt=null,It=T(0),Vt=T(d),ln=T(0);function un(an){var wn,Zn,An,hn,pn,xn=an.length,En=0,In=new Array(xn),Yn=new Array(xn),nr=+It.apply(this,arguments),sr=Math.min(d,Math.max(-d,Vt.apply(this,arguments)-nr)),Ar=Math.min(Math.abs(sr)/xn,ln.apply(this,arguments)),yr=Ar*(sr<0?-1:1);for(wn=0;wn<xn;++wn)(pn=Yn[In[wn]=wn]=+Ne(an[wn],wn,an))>0&&(En+=pn);for(null!=ot?In.sort(function(Pr,Wr){return ot(Yn[Pr],Yn[Wr])}):null!=yt&&In.sort(function(Pr,Wr){return yt(an[Pr],an[Wr])}),wn=0,An=En?(sr-xn*yr)/En:0;wn<xn;++wn,nr=hn)hn=nr+((pn=Yn[Zn=In[wn]])>0?pn*An:0)+yr,Yn[Zn]={data:an[Zn],index:wn,value:pn,startAngle:nr,endAngle:hn,padAngle:Ar};return Yn}return un.value=function(an){return arguments.length?(Ne="function"==typeof an?an:T(+an),un):Ne},un.sortValues=function(an){return arguments.length?(ot=an,yt=null,un):ot},un.sort=function(an){return arguments.length?(yt=an,ot=null,un):yt},un.startAngle=function(an){return arguments.length?(It="function"==typeof an?an:T(+an),un):It},un.endAngle=function(an){return arguments.length?(Vt="function"==typeof an?an:T(+an),un):Vt},un.padAngle=function(an){return arguments.length?(ln="function"==typeof an?an:T(+an),un):ln},un},v.pointRadial=$,v.radialArea=re,v.radialLine=Q,v.stack=function(){var Ne=T([]),ot=$t,yt=Jt,It=ut;function Vt(ln){var un,an,wn=Ne.apply(this,arguments),Zn=ln.length,An=wn.length,hn=new Array(An);for(un=0;un<An;++un){for(var pn,xn=wn[un],En=hn[un]=new Array(Zn),In=0;In<Zn;++In)En[In]=pn=[0,+It(ln[In],xn,In,ln)],pn.data=ln[In];En.key=xn}for(un=0,an=ot(hn);un<An;++un)hn[an[un]].index=un;return yt(hn,an),hn}return Vt.keys=function(ln){return arguments.length?(Ne="function"==typeof ln?ln:T(J.call(ln)),Vt):Ne},Vt.value=function(ln){return arguments.length?(It="function"==typeof ln?ln:T(+ln),Vt):It},Vt.order=function(ln){return arguments.length?(ot=null==ln?$t:"function"==typeof ln?ln:T(J.call(ln)),Vt):ot},Vt.offset=function(ln){return arguments.length?(yt=null==ln?Jt:ln,Vt):yt},Vt},v.stackOffsetDiverging=function(Ne,ot){if((an=Ne.length)>0)for(var yt,It,Vt,ln,un,an,wn=0,Zn=Ne[ot[0]].length;wn<Zn;++wn)for(ln=un=0,yt=0;yt<an;++yt)(Vt=(It=Ne[ot[yt]][wn])[1]-It[0])>0?(It[0]=ln,It[1]=ln+=Vt):Vt<0?(It[1]=un,It[0]=un+=Vt):(It[0]=0,It[1]=Vt)},v.stackOffsetExpand=function(Ne,ot){if((It=Ne.length)>0){for(var yt,It,Vt,ln=0,un=Ne[0].length;ln<un;++ln){for(Vt=yt=0;yt<It;++yt)Vt+=Ne[yt][ln][1]||0;if(Vt)for(yt=0;yt<It;++yt)Ne[yt][ln][1]/=Vt}Jt(Ne,ot)}},v.stackOffsetNone=Jt,v.stackOffsetSilhouette=function(Ne,ot){if((yt=Ne.length)>0){for(var yt,It=0,Vt=Ne[ot[0]],ln=Vt.length;It<ln;++It){for(var un=0,an=0;un<yt;++un)an+=Ne[un][It][1]||0;Vt[It][1]+=Vt[It][0]=-an/2}Jt(Ne,ot)}},v.stackOffsetWiggle=function(Ne,ot){if((Vt=Ne.length)>0&&(It=(yt=Ne[ot[0]]).length)>0){for(var yt,It,Vt,ln=0,un=1;un<It;++un){for(var an=0,wn=0,Zn=0;an<Vt;++an){for(var An=Ne[ot[an]],hn=An[un][1]||0,pn=(hn-(An[un-1][1]||0))/2,xn=0;xn<an;++xn){var En=Ne[ot[xn]];pn+=(En[un][1]||0)-(En[un-1][1]||0)}wn+=hn,Zn+=pn*hn}yt[un-1][1]+=yt[un-1][0]=ln,wn&&(ln-=Zn/wn)}yt[un-1][1]+=yt[un-1][0]=ln,Jt(Ne,ot)}},v.stackOrderAppearance=Dt,v.stackOrderAscending=zt,v.stackOrderDescending=function(Ne){return zt(Ne).reverse()},v.stackOrderInsideOut=function(Ne){var ot,yt,It=Ne.length,Vt=Ne.map(Ht),ln=Dt(Ne),un=0,an=0,wn=[],Zn=[];for(ot=0;ot<It;++ot)yt=ln[ot],un<an?(un+=Vt[yt],wn.push(yt)):(an+=Vt[yt],Zn.push(yt));return Zn.reverse().concat(wn)},v.stackOrderNone=$t,v.stackOrderReverse=function(Ne){return $t(Ne).reverse()},v.symbol=function(){var Ne=T(ee),ot=T(64),yt=null;function It(){var Vt;if(yt||(yt=Vt=x.path()),Ne.apply(this,arguments).draw(yt,+ot.apply(this,arguments)),Vt)return yt=null,Vt+""||null}return It.type=function(Vt){return arguments.length?(Ne="function"==typeof Vt?Vt:T(Vt),It):Ne},It.size=function(Vt){return arguments.length?(ot="function"==typeof Vt?Vt:T(+Vt),It):ot},It.context=function(Vt){return arguments.length?(yt=null==Vt?null:Vt,It):yt},It},v.symbolCircle=ee,v.symbolCross=te,v.symbolDiamond=de,v.symbolSquare=Ee,v.symbolStar=_e,v.symbolTriangle=Se,v.symbolWye=Ce,v.symbols=Re,Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-path")):x((v=v||self).d3=v.d3||{},v.d3)},{"d3-path":117}],120:[function(_,oe,se){var v,x;v=this,x=function(v,x){"use strict";function T(dt){if(0<=dt.y&&dt.y<100){var at=new Date(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L);return at.setFullYear(dt.y),at}return new Date(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L)}function b(dt){if(0<=dt.y&&dt.y<100){var at=new Date(Date.UTC(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L));return at.setUTCFullYear(dt.y),at}return new Date(Date.UTC(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L))}function e(dt,at,Nt){return{y:dt,m:at,d:Nt,H:0,M:0,S:0,L:0}}function o(dt){var at=dt.dateTime,Nt=dt.date,rn=dt.time,en=dt.periods,Ge=dt.days,Qe=dt.shortDays,Rt=dt.months,gt=dt.shortMonths,Be=p(en),Ve=c(en),Le=p(Ge),je=c(Ge),Ke=p(Qe),ft=c(Qe),mt=p(Rt),pt=c(Rt),Ot=p(gt),Pt=c(gt),Jt={a:function(Ht){return Qe[Ht.getDay()]},A:function(Ht){return Ge[Ht.getDay()]},b:function(Ht){return gt[Ht.getMonth()]},B:function(Ht){return Rt[Ht.getMonth()]},c:null,d:re,e:re,f:q,H:$,I:J,j:ie,L:j,m:W,M:ae,p:function(Ht){return en[+(Ht.getHours()>=12)]},q:function(Ht){return 1+~~(Ht.getMonth()/3)},Q:ct,s:bt,S:G,u:ee,U:te,V:le,w:ue,W:de,x:null,X:null,y:he,Y:be,Z:me,"%":tt},$t={a:function(Ht){return Qe[Ht.getUTCDay()]},A:function(Ht){return Ge[Ht.getUTCDay()]},b:function(Ht){return gt[Ht.getUTCMonth()]},B:function(Ht){return Rt[Ht.getUTCMonth()]},c:null,d:_e,e:_e,f:ve,H:Ee,I:De,j:Se,L:Fe,m:Te,M:Ie,p:function(Ht){return en[+(Ht.getUTCHours()>=12)]},q:function(Ht){return 1+~~(Ht.getUTCMonth()/3)},Q:ct,s:bt,S:Ce,u:Re,U:Ue,V:qe,w:Xe,W:st,x:null,X:null,y:He,Y:$e,Z:et,"%":tt},ut={a:function(Ht,Ne,ot){var yt=Ke.exec(Ne.slice(ot));return yt?(Ht.w=ft[yt[0].toLowerCase()],ot+yt[0].length):-1},A:function(Ht,Ne,ot){var yt=Le.exec(Ne.slice(ot));return yt?(Ht.w=je[yt[0].toLowerCase()],ot+yt[0].length):-1},b:function(Ht,Ne,ot){var yt=Ot.exec(Ne.slice(ot));return yt?(Ht.m=Pt[yt[0].toLowerCase()],ot+yt[0].length):-1},B:function(Ht,Ne,ot){var yt=mt.exec(Ne.slice(ot));return yt?(Ht.m=pt[yt[0].toLowerCase()],ot+yt[0].length):-1},c:function(Ht,Ne,ot){return zt(Ht,at,Ne,ot)},d:D,e:D,f:V,H:R,I:R,j:F,L:B,m:P,M:L,p:function(Ht,Ne,ot){var yt=Be.exec(Ne.slice(ot));return yt?(Ht.p=Ve[yt[0].toLowerCase()],ot+yt[0].length):-1},q:E,Q:Y,s:Q,S:I,u:m,U:u,V:w,w:g,W:f,x:function(Ht,Ne,ot){return zt(Ht,Nt,Ne,ot)},X:function(Ht,Ne,ot){return zt(Ht,rn,Ne,ot)},y:M,Y:A,Z:k,"%":Z};function Dt(Ht,Ne){return function(ot){var yt,It,Vt,ln=[],un=-1,an=0,wn=Ht.length;for(ot instanceof Date||(ot=new Date(+ot));++un<wn;)37===Ht.charCodeAt(un)&&(ln.push(Ht.slice(an,un)),null!=(It=l[yt=Ht.charAt(++un)])?yt=Ht.charAt(++un):It="e"===yt?" ":"0",(Vt=Ne[yt])&&(yt=Vt(ot,It)),ln.push(yt),an=un+1);return ln.push(Ht.slice(an,un)),ln.join("")}}function Wt(Ht,Ne){return function(ot){var yt,It,Vt=e(1900,void 0,1);if(zt(Vt,Ht,ot+="",0)!=ot.length)return null;if("Q"in Vt)return new Date(Vt.Q);if("s"in Vt)return new Date(1e3*Vt.s+("L"in Vt?Vt.L:0));if(Ne&&!("Z"in Vt)&&(Vt.Z=0),"p"in Vt&&(Vt.H=Vt.H%12+12*Vt.p),void 0===Vt.m&&(Vt.m="q"in Vt?Vt.q:0),"V"in Vt){if(Vt.V<1||Vt.V>53)return null;"w"in Vt||(Vt.w=1),"Z"in Vt?(It=(yt=b(e(Vt.y,0,1))).getUTCDay(),yt=It>4||0===It?x.utcMonday.ceil(yt):x.utcMonday(yt),yt=x.utcDay.offset(yt,7*(Vt.V-1)),Vt.y=yt.getUTCFullYear(),Vt.m=yt.getUTCMonth(),Vt.d=yt.getUTCDate()+(Vt.w+6)%7):(It=(yt=T(e(Vt.y,0,1))).getDay(),yt=It>4||0===It?x.timeMonday.ceil(yt):x.timeMonday(yt),yt=x.timeDay.offset(yt,7*(Vt.V-1)),Vt.y=yt.getFullYear(),Vt.m=yt.getMonth(),Vt.d=yt.getDate()+(Vt.w+6)%7)}else("W"in Vt||"U"in Vt)&&("w"in Vt||(Vt.w="u"in Vt?Vt.u%7:"W"in Vt?1:0),It="Z"in Vt?b(e(Vt.y,0,1)).getUTCDay():T(e(Vt.y,0,1)).getDay(),Vt.m=0,Vt.d="W"in Vt?(Vt.w+6)%7+7*Vt.W-(It+5)%7:Vt.w+7*Vt.U-(It+6)%7);return"Z"in Vt?(Vt.H+=Vt.Z/100|0,Vt.M+=Vt.Z%100,b(Vt)):T(Vt)}}function zt(Ht,Ne,ot,yt){for(var It,Vt,ln=0,un=Ne.length,an=ot.length;ln<un;){if(yt>=an)return-1;if(37===(It=Ne.charCodeAt(ln++))){if(It=Ne.charAt(ln++),!(Vt=ut[It in l?Ne.charAt(ln++):It])||(yt=Vt(Ht,ot,yt))<0)return-1}else if(It!=ot.charCodeAt(yt++))return-1}return yt}return Jt.x=Dt(Nt,Jt),Jt.X=Dt(rn,Jt),Jt.c=Dt(at,Jt),$t.x=Dt(Nt,$t),$t.X=Dt(rn,$t),$t.c=Dt(at,$t),{format:function(Ht){var Ne=Dt(Ht+="",Jt);return Ne.toString=function(){return Ht},Ne},parse:function(Ht){var Ne=Wt(Ht+="",!1);return Ne.toString=function(){return Ht},Ne},utcFormat:function(Ht){var Ne=Dt(Ht+="",$t);return Ne.toString=function(){return Ht},Ne},utcParse:function(Ht){var Ne=Wt(Ht+="",!0);return Ne.toString=function(){return Ht},Ne}}}var i,l={"-":"",_:" ",0:"0"},r=/^\s*\d+/,y=/^%/,h=/[\\^$*+?|[\]().{}]/g;function s(dt,at,Nt){var rn=dt<0?"-":"",en=(rn?-dt:dt)+"",Ge=en.length;return rn+(Ge<Nt?new Array(Nt-Ge+1).join(at)+en:en)}function d(dt){return dt.replace(h,"\\$&")}function p(dt){return new RegExp("^(?:"+dt.map(d).join("|")+")","i")}function c(dt){for(var at={},Nt=-1,rn=dt.length;++Nt<rn;)at[dt[Nt].toLowerCase()]=Nt;return at}function g(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+1));return rn?(dt.w=+rn[0],Nt+rn[0].length):-1}function m(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+1));return rn?(dt.u=+rn[0],Nt+rn[0].length):-1}function u(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.U=+rn[0],Nt+rn[0].length):-1}function w(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.V=+rn[0],Nt+rn[0].length):-1}function f(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.W=+rn[0],Nt+rn[0].length):-1}function A(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+4));return rn?(dt.y=+rn[0],Nt+rn[0].length):-1}function M(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.y=+rn[0]+(+rn[0]>68?1900:2e3),Nt+rn[0].length):-1}function k(dt,at,Nt){var rn=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(at.slice(Nt,Nt+6));return rn?(dt.Z=rn[1]?0:-(rn[2]+(rn[3]||"00")),Nt+rn[0].length):-1}function E(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+1));return rn?(dt.q=3*rn[0]-3,Nt+rn[0].length):-1}function P(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.m=rn[0]-1,Nt+rn[0].length):-1}function D(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.d=+rn[0],Nt+rn[0].length):-1}function F(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+3));return rn?(dt.m=0,dt.d=+rn[0],Nt+rn[0].length):-1}function R(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.H=+rn[0],Nt+rn[0].length):-1}function L(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.M=+rn[0],Nt+rn[0].length):-1}function I(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+2));return rn?(dt.S=+rn[0],Nt+rn[0].length):-1}function B(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+3));return rn?(dt.L=+rn[0],Nt+rn[0].length):-1}function V(dt,at,Nt){var rn=r.exec(at.slice(Nt,Nt+6));return rn?(dt.L=Math.floor(rn[0]/1e3),Nt+rn[0].length):-1}function Z(dt,at,Nt){var rn=y.exec(at.slice(Nt,Nt+1));return rn?Nt+rn[0].length:-1}function Y(dt,at,Nt){var rn=r.exec(at.slice(Nt));return rn?(dt.Q=+rn[0],Nt+rn[0].length):-1}function Q(dt,at,Nt){var rn=r.exec(at.slice(Nt));return rn?(dt.s=+rn[0],Nt+rn[0].length):-1}function re(dt,at){return s(dt.getDate(),at,2)}function $(dt,at){return s(dt.getHours(),at,2)}function J(dt,at){return s(dt.getHours()%12||12,at,2)}function ie(dt,at){return s(1+x.timeDay.count(x.timeYear(dt),dt),at,3)}function j(dt,at){return s(dt.getMilliseconds(),at,3)}function q(dt,at){return j(dt,at)+"000"}function W(dt,at){return s(dt.getMonth()+1,at,2)}function ae(dt,at){return s(dt.getMinutes(),at,2)}function G(dt,at){return s(dt.getSeconds(),at,2)}function ee(dt){var at=dt.getDay();return 0===at?7:at}function te(dt,at){return s(x.timeSunday.count(x.timeYear(dt)-1,dt),at,2)}function le(dt,at){var Nt=dt.getDay();return dt=Nt>=4||0===Nt?x.timeThursday(dt):x.timeThursday.ceil(dt),s(x.timeThursday.count(x.timeYear(dt),dt)+(4===x.timeYear(dt).getDay()),at,2)}function ue(dt){return dt.getDay()}function de(dt,at){return s(x.timeMonday.count(x.timeYear(dt)-1,dt),at,2)}function he(dt,at){return s(dt.getFullYear()%100,at,2)}function be(dt,at){return s(dt.getFullYear()%1e4,at,4)}function me(dt){var at=dt.getTimezoneOffset();return(at>0?"-":(at*=-1,"+"))+s(at/60|0,"0",2)+s(at%60,"0",2)}function _e(dt,at){return s(dt.getUTCDate(),at,2)}function Ee(dt,at){return s(dt.getUTCHours(),at,2)}function De(dt,at){return s(dt.getUTCHours()%12||12,at,2)}function Se(dt,at){return s(1+x.utcDay.count(x.utcYear(dt),dt),at,3)}function Fe(dt,at){return s(dt.getUTCMilliseconds(),at,3)}function ve(dt,at){return Fe(dt,at)+"000"}function Te(dt,at){return s(dt.getUTCMonth()+1,at,2)}function Ie(dt,at){return s(dt.getUTCMinutes(),at,2)}function Ce(dt,at){return s(dt.getUTCSeconds(),at,2)}function Re(dt){var at=dt.getUTCDay();return 0===at?7:at}function Ue(dt,at){return s(x.utcSunday.count(x.utcYear(dt)-1,dt),at,2)}function qe(dt,at){var Nt=dt.getUTCDay();return dt=Nt>=4||0===Nt?x.utcThursday(dt):x.utcThursday.ceil(dt),s(x.utcThursday.count(x.utcYear(dt),dt)+(4===x.utcYear(dt).getUTCDay()),at,2)}function Xe(dt){return dt.getUTCDay()}function st(dt,at){return s(x.utcMonday.count(x.utcYear(dt)-1,dt),at,2)}function He(dt,at){return s(dt.getUTCFullYear()%100,at,2)}function $e(dt,at){return s(dt.getUTCFullYear()%1e4,at,4)}function et(){return"+0000"}function tt(){return"%"}function ct(dt){return+dt}function bt(dt){return Math.floor(+dt/1e3)}function At(dt){return i=o(dt),v.timeFormat=i.format,v.timeParse=i.parse,v.utcFormat=i.utcFormat,v.utcParse=i.utcParse,i}At({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ut=Date.prototype.toISOString?function(dt){return dt.toISOString()}:v.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Ct=+new Date("2000-01-01T00:00:00.000Z")?function(dt){var at=new Date(dt);return isNaN(at)?null:at}:v.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");v.isoFormat=Ut,v.isoParse=Ct,v.timeFormatDefaultLocale=At,v.timeFormatLocale=o,Object.defineProperty(v,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,_("d3-time")):x((v=v||self).d3=v.d3||{},v.d3)},{"d3-time":121}],121:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";var x=new Date,T=new Date;function b(Te,Ie,Ce,Re){function Ue(qe){return Te(qe=0===arguments.length?new Date:new Date(+qe)),qe}return Ue.floor=function(qe){return Te(qe=new Date(+qe)),qe},Ue.ceil=function(qe){return Te(qe=new Date(qe-1)),Ie(qe,1),Te(qe),qe},Ue.round=function(qe){var Xe=Ue(qe),st=Ue.ceil(qe);return qe-Xe<st-qe?Xe:st},Ue.offset=function(qe,Xe){return Ie(qe=new Date(+qe),null==Xe?1:Math.floor(Xe)),qe},Ue.range=function(qe,Xe,st){var He,$e=[];if(qe=Ue.ceil(qe),st=null==st?1:Math.floor(st),!(qe<Xe&&st>0))return $e;do{$e.push(He=new Date(+qe)),Ie(qe,st),Te(qe)}while(He<qe&&qe<Xe);return $e},Ue.filter=function(qe){return b(function(Xe){if(Xe>=Xe)for(;Te(Xe),!qe(Xe);)Xe.setTime(Xe-1)},function(Xe,st){if(Xe>=Xe)if(st<0)for(;++st<=0;)for(;Ie(Xe,-1),!qe(Xe););else for(;--st>=0;)for(;Ie(Xe,1),!qe(Xe););})},Ce&&(Ue.count=function(qe,Xe){return x.setTime(+qe),T.setTime(+Xe),Te(x),Te(T),Math.floor(Ce(x,T))},Ue.every=function(qe){return qe=Math.floor(qe),isFinite(qe)&&qe>0?qe>1?Ue.filter(Re?function(Xe){return Re(Xe)%qe==0}:function(Xe){return Ue.count(0,Xe)%qe==0}):Ue:null}),Ue}var e=b(function(){},function(Te,Ie){Te.setTime(+Te+Ie)},function(Te,Ie){return Ie-Te});e.every=function(Te){return Te=Math.floor(Te),isFinite(Te)&&Te>0?Te>1?b(function(Ie){Ie.setTime(Math.floor(Ie/Te)*Te)},function(Ie,Ce){Ie.setTime(+Ie+Ce*Te)},function(Ie,Ce){return(Ce-Ie)/Te}):e:null};var o=e.range,i=b(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Ie){Te.setTime(+Te+1e3*Ie)},function(Te,Ie){return(Ie-Te)/1e3},function(Te){return Te.getUTCSeconds()}),l=i.range,r=b(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds())},function(Te,Ie){Te.setTime(+Te+6e4*Ie)},function(Te,Ie){return(Ie-Te)/6e4},function(Te){return Te.getMinutes()}),y=r.range,h=b(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds()-6e4*Te.getMinutes())},function(Te,Ie){Te.setTime(+Te+36e5*Ie)},function(Te,Ie){return(Ie-Te)/36e5},function(Te){return Te.getHours()}),s=h.range,d=b(function(Te){Te.setHours(0,0,0,0)},function(Te,Ie){Te.setDate(Te.getDate()+Ie)},function(Te,Ie){return(Ie-Te-6e4*(Ie.getTimezoneOffset()-Te.getTimezoneOffset()))/864e5},function(Te){return Te.getDate()-1}),p=d.range;function c(Te){return b(function(Ie){Ie.setDate(Ie.getDate()-(Ie.getDay()+7-Te)%7),Ie.setHours(0,0,0,0)},function(Ie,Ce){Ie.setDate(Ie.getDate()+7*Ce)},function(Ie,Ce){return(Ce-Ie-6e4*(Ce.getTimezoneOffset()-Ie.getTimezoneOffset()))/6048e5})}var g=c(0),m=c(1),u=c(2),w=c(3),f=c(4),A=c(5),M=c(6),k=g.range,E=m.range,P=u.range,D=w.range,F=f.range,R=A.range,L=M.range,I=b(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setMonth(Te.getMonth()+Ie)},function(Te,Ie){return Ie.getMonth()-Te.getMonth()+12*(Ie.getFullYear()-Te.getFullYear())},function(Te){return Te.getMonth()}),B=I.range,V=b(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setFullYear(Te.getFullYear()+Ie)},function(Te,Ie){return Ie.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});V.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?b(function(Ie){Ie.setFullYear(Math.floor(Ie.getFullYear()/Te)*Te),Ie.setMonth(0,1),Ie.setHours(0,0,0,0)},function(Ie,Ce){Ie.setFullYear(Ie.getFullYear()+Ce*Te)}):null};var Z=V.range,Y=b(function(Te){Te.setUTCSeconds(0,0)},function(Te,Ie){Te.setTime(+Te+6e4*Ie)},function(Te,Ie){return(Ie-Te)/6e4},function(Te){return Te.getUTCMinutes()}),Q=Y.range,re=b(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Ie){Te.setTime(+Te+36e5*Ie)},function(Te,Ie){return(Ie-Te)/36e5},function(Te){return Te.getUTCHours()}),$=re.range,J=b(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCDate(Te.getUTCDate()+Ie)},function(Te,Ie){return(Ie-Te)/864e5},function(Te){return Te.getUTCDate()-1}),ie=J.range;function j(Te){return b(function(Ie){Ie.setUTCDate(Ie.getUTCDate()-(Ie.getUTCDay()+7-Te)%7),Ie.setUTCHours(0,0,0,0)},function(Ie,Ce){Ie.setUTCDate(Ie.getUTCDate()+7*Ce)},function(Ie,Ce){return(Ce-Ie)/6048e5})}var q=j(0),W=j(1),ae=j(2),G=j(3),ee=j(4),te=j(5),le=j(6),ue=q.range,de=W.range,he=ae.range,be=G.range,me=ee.range,_e=te.range,Ee=le.range,De=b(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCMonth(Te.getUTCMonth()+Ie)},function(Te,Ie){return Ie.getUTCMonth()-Te.getUTCMonth()+12*(Ie.getUTCFullYear()-Te.getUTCFullYear())},function(Te){return Te.getUTCMonth()}),Se=De.range,Fe=b(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCFullYear(Te.getUTCFullYear()+Ie)},function(Te,Ie){return Ie.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});Fe.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?b(function(Ie){Ie.setUTCFullYear(Math.floor(Ie.getUTCFullYear()/Te)*Te),Ie.setUTCMonth(0,1),Ie.setUTCHours(0,0,0,0)},function(Ie,Ce){Ie.setUTCFullYear(Ie.getUTCFullYear()+Ce*Te)}):null};var ve=Fe.range;v.timeDay=d,v.timeDays=p,v.timeFriday=A,v.timeFridays=R,v.timeHour=h,v.timeHours=s,v.timeInterval=b,v.timeMillisecond=e,v.timeMilliseconds=o,v.timeMinute=r,v.timeMinutes=y,v.timeMonday=m,v.timeMondays=E,v.timeMonth=I,v.timeMonths=B,v.timeSaturday=M,v.timeSaturdays=L,v.timeSecond=i,v.timeSeconds=l,v.timeSunday=g,v.timeSundays=k,v.timeThursday=f,v.timeThursdays=F,v.timeTuesday=u,v.timeTuesdays=P,v.timeWednesday=w,v.timeWednesdays=D,v.timeWeek=g,v.timeWeeks=k,v.timeYear=V,v.timeYears=Z,v.utcDay=J,v.utcDays=ie,v.utcFriday=te,v.utcFridays=_e,v.utcHour=re,v.utcHours=$,v.utcMillisecond=e,v.utcMilliseconds=o,v.utcMinute=Y,v.utcMinutes=Q,v.utcMonday=W,v.utcMondays=de,v.utcMonth=De,v.utcMonths=Se,v.utcSaturday=le,v.utcSaturdays=Ee,v.utcSecond=i,v.utcSeconds=l,v.utcSunday=q,v.utcSundays=ue,v.utcThursday=ee,v.utcThursdays=me,v.utcTuesday=ae,v.utcTuesdays=he,v.utcWednesday=G,v.utcWednesdays=be,v.utcWeek=q,v.utcWeeks=ue,v.utcYear=Fe,v.utcYears=ve,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],122:[function(_,oe,se){arguments[4][121][0].apply(se,arguments)},{dup:121}],123:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";var x,T,b=0,e=0,o=0,i=0,l=0,r=0,y="object"==typeof performance&&performance.now?performance:Date,h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function s(){return l||(h(d),l=y.now()+r)}function d(){l=0}function p(){this._call=this._time=this._next=null}function c(f,A,M){var k=new p;return k.restart(f,A,M),k}function g(){s(),++b;for(var f,A=x;A;)(f=l-A._time)>=0&&A._call.call(null,f),A=A._next;--b}function m(){l=(i=y.now())+r,b=e=0;try{g()}finally{b=0,function(){for(var f,A,M=x,k=1/0;M;)M._call?(k>M._time&&(k=M._time),f=M,M=M._next):(A=M._next,M._next=null,M=f?f._next=A:x=A);T=f,w(k)}(),l=0}}function u(){var f=y.now(),A=f-i;A>1e3&&(r-=A,i=f)}function w(f){b||(e&&(e=clearTimeout(e)),f-l>24?(f<1/0&&(e=setTimeout(m,f-y.now()-r)),o&&(o=clearInterval(o))):(o||(i=y.now(),o=setInterval(u,1e3)),b=1,h(m)))}p.prototype=c.prototype={constructor:p,restart:function(f,A,M){if("function"!=typeof f)throw new TypeError("callback is not a function");M=(null==M?s():+M)+(null==A?0:+A),this._next||T===this||(T?T._next=this:x=this,T=this),this._call=f,this._time=M,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}},v.interval=function(f,A,M){var k=new p,E=A;return null==A?(k.restart(f,A,M),k):(A=+A,M=null==M?s():+M,k.restart(function P(D){D+=E,k.restart(P,E+=A,M),f(D)},A,M),k)},v.now=s,v.timeout=function(f,A,M){var k=new p;return k.restart(function(E){k.stop(),f(E+A)},A=null==A?0:+A,M),k},v.timer=c,v.timerFlush=g,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).d3=v.d3||{})},{}],124:[function(_,oe,se){oe.exports=function(){for(var v=0;v<arguments.length;v++)if(void 0!==arguments[v])return arguments[v]}},{}],125:[function(_,oe,se){"use strict";oe.exports=T;var v=(T.canvas=document.createElement("canvas")).getContext("2d"),x=b([32,126]);function T(e,o){Array.isArray(e)&&(e=e.join(", "));var i,l={},r=16,y=.05;o&&(2===o.length&&"number"==typeof o[0]?i=b(o):Array.isArray(o)?i=o:(o.o?i=b(o.o):o.pairs&&(i=o.pairs),o.fontSize&&(r=o.fontSize),null!=o.threshold&&(y=o.threshold))),i||(i=x),v.font=r+"px "+e;for(var h=0;h<i.length;h++){var s=i[h],d=v.measureText(s[0]).width+v.measureText(s[1]).width,p=v.measureText(s).width;Math.abs(d-p)>r*y&&(l[s]=(p-d)/r*1e3)}return l}function b(e){for(var o=[],i=e[0];i<=e[1];i++)for(var l=String.fromCharCode(i),r=e[0];r<e[1];r++){var y=l+String.fromCharCode(r);o.push(y)}return o}T.createPairs=b,T.ascii=x},{}],126:[function(_,oe,se){var v=_("abs-svg-path"),x=_("normalize-svg-path"),T={M:"moveTo",C:"bezierCurveTo"};oe.exports=function(b,e){b.beginPath(),x(v(e)).forEach(function(o){var i=o[0],l=o.slice(1);b[T[i]].apply(b,l)}),b.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(_,oe,se){oe.exports=function(v){switch(v){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(_,oe,se){"use strict";oe.exports=function(v,x){switch(void 0===x&&(x=0),typeof v){case"number":if(v>0)return function(T,b){var e,o;for(e=new Array(T),o=0;o<T;++o)e[o]=b;return e}(0|v,x);break;case"object":if("number"==typeof v.length)return function T(b,e,o){var i=0|b[o];if(i<=0)return[];var l,r=new Array(i);if(o===b.length-1)for(l=0;l<i;++l)r[l]=e;else for(l=0;l<i;++l)r[l]=T(b,e,o+1);return r}(v,x,0)}return[]}},{}],129:[function(_,oe,se){"use strict";function v(F,R,L){L=L||2;var I,B,V,Z,Y,Q,re,$=R&&R.length,J=$?R[0]*L:F.length,ie=x(F,0,J,L,!0),j=[];if(!ie||ie.next===ie.prev)return j;if($&&(ie=function(W,ae,G,ee){var te,le,he,be=[];for(te=0,le=ae.length;te<le;te++)(he=x(W,ae[te]*ee,te<le-1?ae[te+1]*ee:W.length,ee,!1))===he.next&&(he.steiner=!0),be.push(d(he));for(be.sort(r),te=0;te<be.length;te++)y(be[te],G),G=T(G,G.next);return G}(F,R,ie,L)),F.length>80*L){I=V=F[0],B=Z=F[1];for(var q=L;q<J;q+=L)(Y=F[q])<I&&(I=Y),(Q=F[q+1])<B&&(B=Q),Y>V&&(V=Y),Q>Z&&(Z=Q);re=0!==(re=Math.max(V-I,Z-B))?1/re:0}return b(ie,j,L,I,B,re),j}function x(F,R,L,I,B){var V,Z;if(B===D(F,R,L,I)>0)for(V=R;V<L;V+=I)Z=k(V,F[V],F[V+1],Z);else for(V=L-I;V>=R;V-=I)Z=k(V,F[V],F[V+1],Z);return Z&&m(Z,Z.next)&&(E(Z),Z=Z.next),Z}function T(F,R){if(!F)return F;R||(R=F);var L,I=F;do{if(L=!1,I.steiner||!m(I,I.next)&&0!==g(I.prev,I,I.next))I=I.next;else{if(E(I),(I=R=I.prev)===I.next)break;L=!0}}while(L||I!==R);return R}function b(F,R,L,I,B,V,Z){if(F){!Z&&V&&function($,J,ie,j){var q=$;do{null===q.z&&(q.z=s(q.x,q.y,J,ie,j)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next}while(q!==$);q.prevZ.nextZ=null,q.prevZ=null,function(W){var ae,G,ee,te,le,ue,de,he,be=1;do{for(G=W,W=null,le=null,ue=0;G;){for(ue++,ee=G,de=0,ae=0;ae<be&&(de++,ee=ee.nextZ);ae++);for(he=be;de>0||he>0&&ee;)0!==de&&(0===he||!ee||G.z<=ee.z)?(te=G,G=G.nextZ,de--):(te=ee,ee=ee.nextZ,he--),le?le.nextZ=te:W=te,te.prevZ=le,le=te;G=ee}le.nextZ=null,be*=2}while(ue>1)}(q)}(F,I,B,V);for(var Y,Q,re=F;F.prev!==F.next;)if(Y=F.prev,Q=F.next,V?o(F,I,B,V):e(F))R.push(Y.i/L),R.push(F.i/L),R.push(Q.i/L),E(F),F=Q.next,re=Q.next;else if((F=Q)===re){Z?1===Z?b(F=i(T(F),R,L),R,L,I,B,V,2):2===Z&&l(F,R,L,I,B,V):b(T(F),R,L,I,B,V,1);break}}}function e(F){var R=F.prev,L=F,I=F.next;if(g(R,L,I)>=0)return!1;for(var B=F.next.next;B!==F.prev;){if(p(R.x,R.y,L.x,L.y,I.x,I.y,B.x,B.y)&&g(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function o(F,R,L,I){var B=F.prev,V=F,Z=F.next;if(g(B,V,Z)>=0)return!1;for(var re=B.x>V.x?B.x>Z.x?B.x:Z.x:V.x>Z.x?V.x:Z.x,$=B.y>V.y?B.y>Z.y?B.y:Z.y:V.y>Z.y?V.y:Z.y,J=s(B.x<V.x?B.x<Z.x?B.x:Z.x:V.x<Z.x?V.x:Z.x,B.y<V.y?B.y<Z.y?B.y:Z.y:V.y<Z.y?V.y:Z.y,R,L,I),ie=s(re,$,R,L,I),j=F.prevZ,q=F.nextZ;j&&j.z>=J&&q&&q.z<=ie;){if(j!==F.prev&&j!==F.next&&p(B.x,B.y,V.x,V.y,Z.x,Z.y,j.x,j.y)&&g(j.prev,j,j.next)>=0||(j=j.prevZ,q!==F.prev&&q!==F.next&&p(B.x,B.y,V.x,V.y,Z.x,Z.y,q.x,q.y)&&g(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;j&&j.z>=J;){if(j!==F.prev&&j!==F.next&&p(B.x,B.y,V.x,V.y,Z.x,Z.y,j.x,j.y)&&g(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;q&&q.z<=ie;){if(q!==F.prev&&q!==F.next&&p(B.x,B.y,V.x,V.y,Z.x,Z.y,q.x,q.y)&&g(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function i(F,R,L){var I=F;do{var B=I.prev,V=I.next.next;!m(B,V)&&u(B,I,I.next,V)&&A(B,V)&&A(V,B)&&(R.push(B.i/L),R.push(I.i/L),R.push(V.i/L),E(I),E(I.next),I=F=V),I=I.next}while(I!==F);return T(I)}function l(F,R,L,I,B,V){var Z=F;do{for(var Y=Z.next.next;Y!==Z.prev;){if(Z.i!==Y.i&&c(Z,Y)){var Q=M(Z,Y);return Z=T(Z,Z.next),Q=T(Q,Q.next),b(Z,R,L,I,B,V),void b(Q,R,L,I,B,V)}Y=Y.next}Z=Z.next}while(Z!==F)}function r(F,R){return F.x-R.x}function y(F,R){if(R=function(I,B){var V,Z=B,Y=I.x,Q=I.y,re=-1/0;do{if(Q<=Z.y&&Q>=Z.next.y&&Z.next.y!==Z.y){var $=Z.x+(Q-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if($<=Y&&$>re){if(re=$,$===Y){if(Q===Z.y)return Z;if(Q===Z.next.y)return Z.next}V=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==B);if(!V)return null;if(Y===re)return V;var J,ie=V,j=V.x,q=V.y,W=1/0;Z=V;do{Y>=Z.x&&Z.x>=j&&Y!==Z.x&&p(Q<q?Y:re,Q,j,q,Q<q?re:Y,Q,Z.x,Z.y)&&(J=Math.abs(Q-Z.y)/(Y-Z.x),A(Z,I)&&(J<W||J===W&&(Z.x>V.x||Z.x===V.x&&h(V,Z)))&&(V=Z,W=J)),Z=Z.next}while(Z!==ie);return V}(F,R)){var L=M(R,F);T(R,R.next),T(L,L.next)}}function h(F,R){return g(F.prev,F,R.prev)<0&&g(R.next,F,F.next)<0}function s(F,R,L,I,B){return(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-L)*B)|F<<8))|F<<4))|F<<2))|F<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-I)*B)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function d(F){var R=F,L=F;do{(R.x<L.x||R.x===L.x&&R.y<L.y)&&(L=R),R=R.next}while(R!==F);return L}function p(F,R,L,I,B,V,Z,Y){return(B-Z)*(R-Y)-(F-Z)*(V-Y)>=0&&(F-Z)*(I-Y)-(L-Z)*(R-Y)>=0&&(L-Z)*(V-Y)-(B-Z)*(I-Y)>=0}function c(F,R){return F.next.i!==R.i&&F.prev.i!==R.i&&!function(L,I){var B=L;do{if(B.i!==L.i&&B.next.i!==L.i&&B.i!==I.i&&B.next.i!==I.i&&u(B,B.next,L,I))return!0;B=B.next}while(B!==L);return!1}(F,R)&&(A(F,R)&&A(R,F)&&function(L,I){var B=L,V=!1,Z=(L.x+I.x)/2,Y=(L.y+I.y)/2;do{B.y>Y!=B.next.y>Y&&B.next.y!==B.y&&Z<(B.next.x-B.x)*(Y-B.y)/(B.next.y-B.y)+B.x&&(V=!V),B=B.next}while(B!==L);return V}(F,R)&&(g(F.prev,F,R.prev)||g(F,R.prev,R))||m(F,R)&&g(F.prev,F,F.next)>0&&g(R.prev,R,R.next)>0)}function g(F,R,L){return(R.y-F.y)*(L.x-R.x)-(R.x-F.x)*(L.y-R.y)}function m(F,R){return F.x===R.x&&F.y===R.y}function u(F,R,L,I){var B=f(g(F,R,L)),V=f(g(F,R,I)),Z=f(g(L,I,F)),Y=f(g(L,I,R));return B!==V&&Z!==Y||!(0!==B||!w(F,L,R))||!(0!==V||!w(F,I,R))||!(0!==Z||!w(L,F,I))||!(0!==Y||!w(L,R,I))}function w(F,R,L){return R.x<=Math.max(F.x,L.x)&&R.x>=Math.min(F.x,L.x)&&R.y<=Math.max(F.y,L.y)&&R.y>=Math.min(F.y,L.y)}function f(F){return F>0?1:F<0?-1:0}function A(F,R){return g(F.prev,F,F.next)<0?g(F,R,F.next)>=0&&g(F,F.prev,R)>=0:g(F,R,F.prev)<0||g(F,F.next,R)<0}function M(F,R){var L=new P(F.i,F.x,F.y),I=new P(R.i,R.x,R.y),B=F.next,V=R.prev;return F.next=R,R.prev=F,L.next=B,B.prev=L,I.next=L,L.prev=I,V.next=I,I.prev=V,I}function k(F,R,L,I){var B=new P(F,R,L);return I?(B.next=I.next,B.prev=I,I.next.prev=B,I.next=B):(B.prev=B,B.next=B),B}function E(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function P(F,R,L){this.i=F,this.x=R,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(F,R,L,I){for(var B=0,V=R,Z=L-I;V<L;V+=I)B+=(F[Z]-F[V])*(F[V+1]+F[Z+1]),Z=V;return B}oe.exports=v,oe.exports.default=v,v.deviation=function(F,R,L,I){var B=R&&R.length,Z=Math.abs(D(F,0,B?R[0]*L:F.length,L));if(B)for(var Y=0,Q=R.length;Y<Q;Y++)Z-=Math.abs(D(F,R[Y]*L,Y<Q-1?R[Y+1]*L:F.length,L));var J=0;for(Y=0;Y<I.length;Y+=3){var ie=I[Y]*L,j=I[Y+1]*L,q=I[Y+2]*L;J+=Math.abs((F[ie]-F[q])*(F[j+1]-F[ie+1])-(F[ie]-F[j])*(F[q+1]-F[ie+1]))}return 0===Z&&0===J?0:Math.abs((J-Z)/Z)},v.flatten=function(F){for(var R=F[0][0].length,L={vertices:[],holes:[],dimensions:R},I=0,B=0;B<F.length;B++){for(var V=0;V<F[B].length;V++)for(var Z=0;Z<R;Z++)L.vertices.push(F[B][V][Z]);B>0&&L.holes.push(I+=F[B-1].length)}return L}},{}],130:[function(_,oe,se){var v=_("strongly-connected-components");oe.exports=function(x,T){var b,e=[],o=[],i=[],l={},r=[];function y(u){var w,f,A=!1;for(o.push(u),i[u]=!0,w=0;w<r[u].length;w++)(f=r[u][w])===b?(h(b,o),A=!0):i[f]||(A=y(f));if(A)!function k(E){i[E]=!1,l.hasOwnProperty(E)&&Object.keys(l[E]).forEach(function(P){delete l[E][P],i[P]&&k(P)})}(u);else for(w=0;w<r[u].length;w++){var M=l[f=r[u][w]];M||(l[f]=M={}),M[f]=!0}return o.pop(),A}function h(u,w){var f=[].concat(w).concat(u);T?T(y):e.push(f)}function s(u){!function(P){for(var D=0;D<x.length;D++)D<P&&(x[D]=[]),x[D]=x[D].filter(function(F){return F>=P})}(u);for(var w,f=v(x).components.filter(function(P){return P.length>1}),A=1/0,M=0;M<f.length;M++)for(var k=0;k<f[M].length;k++)f[M][k]<A&&(A=f[M][k],w=M);var E=f[w];return!!E&&{leastVertex:A,adjList:x.map(function(P,D){return-1===E.indexOf(D)?[]:P.filter(function(F){return-1!==E.indexOf(F)})})}}b=0;for(var d=x.length;b<d;){var p=s(b);if(b=p.leastVertex,r=p.adjList){for(var c=0;c<r.length;c++)for(var g=0;g<r[c].length;g++){var m=r[c][g];i[+m]=!1,l[m]={}}y(b),b+=1}else b=d}return T?void 0:e}},{"strongly-connected-components":306}],131:[function(_,oe,se){"use strict";var v=_("../../object/valid-value");oe.exports=function(){return v(this).length=0,this}},{"../../object/valid-value":162}],132:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?Array.from:_("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(_,oe,se){"use strict";oe.exports=function(){var v,x,T=Array.from;return"function"==typeof T&&(x=T(v=["raz","dwa"]),Boolean(x&&x!==v&&"dwa"===x[1]))}},{}],134:[function(_,oe,se){"use strict";var v=_("es6-symbol").iterator,x=_("../../function/is-arguments"),T=_("../../function/is-function"),b=_("../../number/to-pos-integer"),e=_("../../object/valid-callable"),o=_("../../object/valid-value"),i=_("../../object/is-value"),l=_("../../string/is-string"),r=Array.isArray,y=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;oe.exports=function(d){var p,c,g,m,u,w,f,A,M,k,E=arguments[1],P=arguments[2];if(d=Object(o(d)),i(E)&&e(E),this&&this!==Array&&T(this))p=this;else{if(!E){if(x(d))return 1!==(u=d.length)?Array.apply(null,d):((m=new Array(1))[0]=d[0],m);if(r(d)){for(m=new Array(u=d.length),c=0;c<u;++c)m[c]=d[c];return m}}m=[]}if(!r(d))if(void 0!==(M=d[v])){for(f=e(M).call(d),p&&(m=new p),A=f.next(),c=0;!A.done;)k=E?y.call(E,P,A.value,c):A.value,p?(h.value=k,s(m,c,h)):m[c]=k,A=f.next(),++c;u=c}else if(l(d)){for(u=d.length,p&&(m=new p),c=0,g=0;c<u;++c)k=d[c],c+1<u&&(w=k.charCodeAt(0))>=55296&&w<=56319&&(k+=d[++c]),k=E?y.call(E,P,k,g):k,p?(h.value=k,s(m,g,h)):m[g]=k,++g;u=g}if(void 0===u)for(u=b(d.length),p&&(m=new p(u)),c=0;c<u;++c)k=E?y.call(E,P,d[c],c):d[c],p?(h.value=k,s(m,c,h)):m[c]=k;return p&&(h.value=null,m.length=u),m}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(_,oe,se){"use strict";var v=Object.prototype.toString,x=v.call(function(){return arguments}());oe.exports=function(T){return v.call(T)===x}},{}],136:[function(_,oe,se){"use strict";var v=Object.prototype.toString,x=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);oe.exports=function(T){return"function"==typeof T&&x(v.call(T))}},{}],137:[function(_,oe,se){"use strict";oe.exports=function(){}},{}],138:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?Math.sign:_("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(_,oe,se){"use strict";oe.exports=function(){var v=Math.sign;return"function"==typeof v&&1===v(10)&&-1===v(-20)}},{}],140:[function(_,oe,se){"use strict";oe.exports=function(v){return v=Number(v),isNaN(v)||0===v?v:v>0?1:-1}},{}],141:[function(_,oe,se){"use strict";var v=_("../math/sign"),x=Math.abs,T=Math.floor;oe.exports=function(b){return isNaN(b)?0:0!==(b=Number(b))&&isFinite(b)?v(b)*T(x(b)):b}},{"../math/sign":138}],142:[function(_,oe,se){"use strict";var v=_("./to-integer"),x=Math.max;oe.exports=function(T){return x(0,v(T))}},{"./to-integer":141}],143:[function(_,oe,se){"use strict";var v=_("./valid-callable"),x=_("./valid-value"),T=Function.prototype.bind,b=Function.prototype.call,e=Object.keys,o=Object.prototype.propertyIsEnumerable;oe.exports=function(i,l){return function(r,y){var h,s=arguments[2],d=arguments[3];return r=Object(x(r)),v(y),h=e(r),d&&h.sort("function"==typeof d?T.call(d,r):void 0),"function"!=typeof i&&(i=h[i]),b.call(i,h,function(p,c){return o.call(r,p)?b.call(y,s,r[p],p,r,c):l})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?Object.assign:_("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(_,oe,se){"use strict";oe.exports=function(){var v,x=Object.assign;return"function"==typeof x&&(x(v={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),v.foo+v.bar+v.trzy==="razdwatrzy")}},{}],146:[function(_,oe,se){"use strict";var v=_("../keys"),x=_("../valid-value"),T=Math.max;oe.exports=function(b,e){var o,i,l,r=T(arguments.length,2);for(b=Object(x(b)),l=function(y){try{b[y]=e[y]}catch(h){o||(o=h)}},i=1;i<r;++i)v(e=arguments[i]).forEach(l);if(void 0!==o)throw o;return b}},{"../keys":152,"../valid-value":162}],147:[function(_,oe,se){"use strict";var v=_("../array/from"),x=_("./assign"),T=_("./valid-value");oe.exports=function(b){var e=Object(T(b)),o=arguments[1],i=Object(arguments[2]);if(e!==b&&!o)return e;var l={};return o?v(o,function(r){(i.ensure||r in b)&&(l[r]=b[r])}):x(l,b),l}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(_,oe,se){"use strict";var v,x,T,b,e=Object.create;_("./set-prototype-of/is-implemented")()||(v=_("./set-prototype-of/shim")),oe.exports=v?1!==v.level?e:(x={},T={},b={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){T[o]="__proto__"!==o?b:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(x,T),Object.defineProperty(v,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:x}),function(o,i){return e(null===o?x:o,i)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(_,oe,se){"use strict";oe.exports=_("./_iterate")("forEach")},{"./_iterate":143}],150:[function(_,oe,se){"use strict";var v=_("./is-value"),x={function:!0,object:!0};oe.exports=function(T){return v(T)&&x[typeof T]||!1}},{"./is-value":151}],151:[function(_,oe,se){"use strict";var v=_("../function/noop")();oe.exports=function(x){return x!==v&&null!==x}},{"../function/noop":137}],152:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?Object.keys:_("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(_,oe,se){"use strict";oe.exports=function(){try{return Object.keys("primitive"),!0}catch(v){return!1}}},{}],154:[function(_,oe,se){"use strict";var v=_("../is-value"),x=Object.keys;oe.exports=function(T){return x(v(T)?Object(T):T)}},{"../is-value":151}],155:[function(_,oe,se){"use strict";var v=_("./valid-callable"),x=_("./for-each"),T=Function.prototype.call;oe.exports=function(b,e){var o={},i=arguments[2];return v(e),x(b,function(l,r,y,h){o[r]=T.call(e,i,l,r,y,h)}),o}},{"./for-each":149,"./valid-callable":160}],156:[function(_,oe,se){"use strict";var v=_("./is-value"),x=Array.prototype.forEach,T=Object.create,b=function(e,o){var i;for(i in e)o[i]=e[i]};oe.exports=function(e){var o=T(null);return x.call(arguments,function(i){v(i)&&b(Object(i),o)}),o}},{"./is-value":151}],157:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?Object.setPrototypeOf:_("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(_,oe,se){"use strict";var v=Object.create,x=Object.getPrototypeOf,T={};oe.exports=function(){var b=Object.setPrototypeOf;return"function"==typeof b&&x(b((arguments[0]||v)(null),T))===T}},{}],159:[function(_,oe,se){"use strict";var v,i,l,r,x=_("../is-object"),T=_("../valid-value"),b=Object.prototype.isPrototypeOf,e=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};v=function(i,l){if(T(i),null===l||x(l))return i;throw new TypeError("Prototype must be null or an object")},oe.exports=(i=function(){var i,l=Object.create(null),r={},y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(y){try{(i=y.set).call(l,r)}catch(h){}if(Object.getPrototypeOf(l)===r)return{set:i,level:2}}return l.__proto__=r,Object.getPrototypeOf(l)===r?{level:2}:((l={}).__proto__=r,Object.getPrototypeOf(l)===r&&{level:1})}(),i?(2===i.level?i.set?(r=i.set,l=function(y,h){return r.call(v(y,h),h),y}):l=function(y,h){return v(y,h).__proto__=h,y}:l=function y(h,s){var d;return v(h,s),(d=b.call(y.nullPolyfill,h))&&delete y.nullPolyfill.__proto__,null===s&&(s=y.nullPolyfill),h.__proto__=s,d&&e(y.nullPolyfill,"__proto__",o),h},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null),_("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(_,oe,se){"use strict";oe.exports=function(v){if("function"!=typeof v)throw new TypeError(v+" is not a function");return v}},{}],161:[function(_,oe,se){"use strict";var v=_("./is-object");oe.exports=function(x){if(!v(x))throw new TypeError(x+" is not an Object");return x}},{"./is-object":150}],162:[function(_,oe,se){"use strict";var v=_("./is-value");oe.exports=function(x){if(!v(x))throw new TypeError("Cannot use null or undefined");return x}},{"./is-value":151}],163:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?String.prototype.contains:_("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(_,oe,se){"use strict";var v="razdwatrzy";oe.exports=function(){return"function"==typeof v.contains&&!0===v.contains("dwa")&&!1===v.contains("foo")}},{}],165:[function(_,oe,se){"use strict";var v=String.prototype.indexOf;oe.exports=function(x){return v.call(this,x,arguments[1])>-1}},{}],166:[function(_,oe,se){"use strict";var v=Object.prototype.toString,x=v.call("");oe.exports=function(T){return"string"==typeof T||T&&"object"==typeof T&&(T instanceof String||v.call(T)===x)||!1}},{}],167:[function(_,oe,se){"use strict";var v=Object.create(null),x=Math.random;oe.exports=function(){var T;do{T=x().toString(36).slice(2)}while(v[T]);return T}},{}],168:[function(_,oe,se){"use strict";var v,x=_("es5-ext/object/set-prototype-of"),T=_("es5-ext/string/#/contains"),b=_("d"),e=_("es6-symbol"),o=_("./"),i=Object.defineProperty;v=oe.exports=function(l,r){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");o.call(this,l),r=r?T.call(r,"key+value")?"key+value":T.call(r,"key")?"key":"value":"value",i(this,"__kind__",b("",r))},x&&x(v,o),delete v.prototype.constructor,v.prototype=Object.create(o.prototype,{_resolve:b(function(l){return"value"===this.__kind__?this.__list__[l]:"key+value"===this.__kind__?[l,this.__list__[l]]:l})}),i(v.prototype,e.toStringTag,b("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(_,oe,se){"use strict";var v=_("es5-ext/function/is-arguments"),x=_("es5-ext/object/valid-callable"),T=_("es5-ext/string/is-string"),b=_("./get"),e=Array.isArray,o=Function.prototype.call,i=Array.prototype.some;oe.exports=function(l,r){var y,h,s,d,p,c,g,m,u=arguments[2];if(e(l)||v(l)?y="array":T(l)?y="string":l=b(l),x(r),s=function(){d=!0},"array"!==y)if("string"!==y)for(h=l.next();!h.done;){if(o.call(r,u,h.value,s),d)return;h=l.next()}else for(c=l.length,p=0;p<c&&(g=l[p],p+1<c&&(m=g.charCodeAt(0))>=55296&&m<=56319&&(g+=l[++p]),o.call(r,u,g,s),!d);++p);else i.call(l,function(w){return o.call(r,u,w,s),d})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(_,oe,se){"use strict";var v=_("es5-ext/function/is-arguments"),x=_("es5-ext/string/is-string"),T=_("./array"),b=_("./string"),e=_("./valid-iterable"),o=_("es6-symbol").iterator;oe.exports=function(i){return"function"==typeof e(i)[o]?i[o]():v(i)?new T(i):x(i)?new b(i):new T(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(_,oe,se){"use strict";var v,x=_("es5-ext/array/#/clear"),T=_("es5-ext/object/assign"),b=_("es5-ext/object/valid-callable"),e=_("es5-ext/object/valid-value"),o=_("d"),i=_("d/auto-bind"),l=_("es6-symbol"),r=Object.defineProperty,y=Object.defineProperties;oe.exports=v=function(h,s){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");y(this,{__list__:o("w",e(h)),__context__:o("w",s),__nextIndex__:o("w",0)}),s&&(b(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete v.prototype.constructor,y(v.prototype,T({_next:o(function(){var h;if(this.__list__)return this.__redo__&&void 0!==(h=this.__redo__.shift())?h:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:o(function(){return this._createResult(this._next())}),_createResult:o(function(h){return void 0===h?{done:!0,value:void 0}:{done:!1,value:this._resolve(h)}}),_resolve:o(function(h){return this.__list__[h]}),_unBind:o(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:o(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},i({_onAdd:o(function(h){h>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,d){s>=h&&(this.__redo__[d]=++s)},this),this.__redo__.push(h)):r(this,"__redo__",o("c",[h])))}),_onDelete:o(function(h){var s;h>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(s=this.__redo__.indexOf(h))&&this.__redo__.splice(s,1),this.__redo__.forEach(function(d,p){d>h&&(this.__redo__[p]=--d)},this)))}),_onClear:o(function(){this.__redo__&&x.call(this.__redo__),this.__nextIndex__=0})}))),r(v.prototype,l.iterator,o(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(_,oe,se){"use strict";var v=_("es5-ext/function/is-arguments"),x=_("es5-ext/object/is-value"),T=_("es5-ext/string/is-string"),b=_("es6-symbol").iterator,e=Array.isArray;oe.exports=function(o){return!(!x(o)||!e(o)&&!T(o)&&!v(o)&&"function"!=typeof o[b])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(_,oe,se){"use strict";var v,x=_("es5-ext/object/set-prototype-of"),T=_("d"),b=_("es6-symbol"),e=_("./"),o=Object.defineProperty;v=oe.exports=function(i){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");i=String(i),e.call(this,i),o(this,"__length__",T("",i.length))},x&&x(v,e),delete v.prototype.constructor,v.prototype=Object.create(e.prototype,{_next:T(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:T(function(i){var l,r=this.__list__[i];return this.__nextIndex__===this.__length__?r:(l=r.charCodeAt(0))>=55296&&l<=56319?r+this.__list__[this.__nextIndex__++]:r})}),o(v.prototype,b.toStringTag,T("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(_,oe,se){"use strict";var v=_("./is-iterable");oe.exports=function(x){if(!v(x))throw new TypeError(x+" is not iterable");return x}},{"./is-iterable":172}],175:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?_("ext/global-this").Symbol:_("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(_,oe,se){"use strict";var v=_("ext/global-this"),x={object:!0,symbol:!0};oe.exports=function(){var T,b=v.Symbol;if("function"!=typeof b)return!1;T=b("test symbol");try{String(T)}catch(e){return!1}return!!x[typeof b.iterator]&&!!x[typeof b.toPrimitive]&&!!x[typeof b.toStringTag]}},{"ext/global-this":188}],177:[function(_,oe,se){"use strict";oe.exports=function(v){return!!v&&("symbol"==typeof v||!!v.constructor&&"Symbol"===v.constructor.name&&"Symbol"===v[v.constructor.toStringTag])}},{}],178:[function(_,oe,se){"use strict";var v=_("d"),T=Object.defineProperty,b=Object.prototype,e=(0,Object.create)(null);oe.exports=function(o){for(var i,l,r=0;e[o+(r||"")];)++r;return e[o+=r||""]=!0,T(b,i="@@"+o,v.gs(null,function(y){l||(l=!0,T(this,i,v(y)),l=!1)})),i}},{d:106}],179:[function(_,oe,se){"use strict";var v=_("d"),x=_("ext/global-this").Symbol;oe.exports=function(T){return Object.defineProperties(T,{hasInstance:v("",x&&x.hasInstance||T("hasInstance")),isConcatSpreadable:v("",x&&x.isConcatSpreadable||T("isConcatSpreadable")),iterator:v("",x&&x.iterator||T("iterator")),match:v("",x&&x.match||T("match")),replace:v("",x&&x.replace||T("replace")),search:v("",x&&x.search||T("search")),species:v("",x&&x.species||T("species")),split:v("",x&&x.split||T("split")),toPrimitive:v("",x&&x.toPrimitive||T("toPrimitive")),toStringTag:v("",x&&x.toStringTag||T("toStringTag")),unscopables:v("",x&&x.unscopables||T("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(_,oe,se){"use strict";var v=_("d"),x=_("../../../validate-symbol"),T=Object.create(null);oe.exports=function(b){return Object.defineProperties(b,{for:v(function(e){return T[e]?T[e]:T[e]=b(String(e))}),keyFor:v(function(e){var o;for(o in x(e),T)if(T[o]===e)return o})})}},{"../../../validate-symbol":182,d:106}],181:[function(_,oe,se){"use strict";var v,x,T,b=_("d"),e=_("./validate-symbol"),o=_("ext/global-this").Symbol,i=_("./lib/private/generate-name"),l=_("./lib/private/setup/standard-symbols"),r=_("./lib/private/setup/symbol-registry"),y=Object.create,h=Object.defineProperties,s=Object.defineProperty;if("function"==typeof o)try{String(o()),T=!0}catch(d){}else o=null;x=function(d){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return v(d)},oe.exports=v=function d(p){var c;if(this instanceof d)throw new TypeError("Symbol is not a constructor");return T?o(p):(c=y(x.prototype),p=void 0===p?"":String(p),h(c,{__description__:b("",p),__name__:b("",i(p))}))},l(v),r(v),h(x.prototype,{constructor:b(v),toString:b("",function(){return this.__name__})}),h(v.prototype,{toString:b(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:b(function(){return e(this)})}),s(v.prototype,v.toPrimitive,b("",function(){var d=e(this);return"symbol"==typeof d?d:d.toString()})),s(v.prototype,v.toStringTag,b("c","Symbol")),s(x.prototype,v.toStringTag,b("c",v.prototype[v.toStringTag])),s(x.prototype,v.toPrimitive,b("c",v.prototype[v.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(_,oe,se){"use strict";var v=_("./is-symbol");oe.exports=function(x){if(!v(x))throw new TypeError(x+" is not a symbol");return x}},{"./is-symbol":177}],183:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?WeakMap:_("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(_,oe,se){"use strict";oe.exports=function(){var v,x;if("function"!=typeof WeakMap)return!1;try{v=new WeakMap([[x={},"one"],[{},"two"],[{},"three"]])}catch(T){return!1}return"[object WeakMap]"===String(v)&&"function"==typeof v.set&&v.set({},1)===v&&"function"==typeof v.delete&&"function"==typeof v.has&&"one"===v.get(x)}},{}],185:[function(_,oe,se){"use strict";oe.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(_,oe,se){"use strict";var v,x=_("es5-ext/object/is-value"),T=_("es5-ext/object/set-prototype-of"),b=_("es5-ext/object/valid-object"),e=_("es5-ext/object/valid-value"),o=_("es5-ext/string/random-uniq"),i=_("d"),l=_("es6-iterator/get"),r=_("es6-iterator/for-of"),y=_("es6-symbol").toStringTag,h=_("./is-native-implemented"),s=Array.isArray,d=Object.defineProperty,p=Object.prototype.hasOwnProperty,c=Object.getPrototypeOf;oe.exports=v=function(){var g,m=arguments[0];if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");return g=h&&T&&WeakMap!==v?T(new WeakMap,c(this)):this,x(m)&&(s(m)||(m=l(m))),d(g,"__weakMapData__",i("c","$weakMap$"+o())),m&&r(m,function(u){e(u),g.set(u[0],u[1])}),g},h&&(T&&T(v,WeakMap),v.prototype=Object.create(WeakMap.prototype,{constructor:i(v)})),Object.defineProperties(v.prototype,{delete:i(function(g){return!!p.call(b(g),this.__weakMapData__)&&(delete g[this.__weakMapData__],!0)}),get:i(function(g){if(p.call(b(g),this.__weakMapData__))return g[this.__weakMapData__]}),has:i(function(g){return p.call(b(g),this.__weakMapData__)}),set:i(function(g,m){return d(b(g),this.__weakMapData__,i("c",m)),this}),toString:i(function(){return"[object WeakMap]"})}),d(v.prototype,y,i("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(_,oe,se){var v=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};oe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(x){return v()}try{return __global__||v()}finally{delete Object.prototype.__global__}}()},{}],188:[function(_,oe,se){"use strict";oe.exports=_("./is-implemented")()?globalThis:_("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(_,oe,se){"use strict";oe.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(_,oe,se){"use strict";var v=_("is-string-blank");oe.exports=function(x){var T=typeof x;if("string"===T){var b=x;if(0==(x=+x)&&v(b))return!1}else if("number"!==T)return!1;return x-x<1}},{"is-string-blank":237}],191:[function(_,oe,se){var v=_("dtype");oe.exports=function(x,T,b){if(!x)throw new TypeError("must specify data as first parameter");if(b=0|+(b||0),Array.isArray(x)&&x[0]&&"number"==typeof x[0][0]){var e,o,i,l,r=x[0].length,y=x.length*r;T&&"string"!=typeof T||(T=new(v(T||"float32"))(y+b));var h=T.length-b;if(y!==h)throw new Error("source length "+y+" ("+r+"x"+x.length+") does not match destination length "+h);for(e=0,i=b;e<x.length;e++)for(o=0;o<r;o++)T[i++]=null===x[e][o]?NaN:x[e][o]}else if(T&&"string"!=typeof T)T.set(x,b);else{var s=v(T||"float32");if(Array.isArray(x)||"array"===T)for(e=0,i=b,l=(T=new s(x.length+b)).length;i<l;i++,e++)T[i]=null===x[e]?NaN:x[e];else 0===b?T=new s(x):(T=new s(x.length+b)).set(x,b)}return T}},{dtype:127}],192:[function(_,oe,se){"use strict";var v=_("css-font/stringify"),x=[32,126];oe.exports=function(T){var b=(T=T||{}).shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],e=T.canvas||document.createElement("canvas"),o=T.font,i="number"==typeof T.step?[T.step,T.step]:T.step||[32,32],l=T.chars||x;if(o&&"string"!=typeof o&&(o=v(o)),Array.isArray(l)){if(2===l.length&&"number"==typeof l[0]&&"number"==typeof l[1]){for(var r=[],y=l[0],h=0;y<=l[1];y++)r[h++]=String.fromCharCode(y);l=r}}else l=String(l).split("");b=b.slice(),e.width=b[0],e.height=b[1];var s=e.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,e.width,e.height),s.font=o,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var d=i[0]/2,p=i[1]/2;for(y=0;y<l.length;y++)s.fillText(l[y],d,p),(d+=i[0])>b[0]-i[0]/2&&(d=i[0]/2,p+=i[1]);return e}},{"css-font/stringify":102}],193:[function(_,oe,se){"use strict";function v(e,o){o||(o={}),("string"==typeof e||Array.isArray(e))&&(o.family=e);var i=Array.isArray(o.family)?o.family.join(", "):o.family;if(!i)throw Error("`family` must be defined");var l=o.size||o.fontSize||o.em||48,y=(e=[o.style||o.fontStyle||"",o.weight||o.fontWeight||"",l].join(" ")+"px "+i,o.origin||"top");if(v.cache[i]&&l<=v.cache[i].em)return x(v.cache[i],y);var h=o.canvas||v.canvas,s=h.getContext("2d"),d={upper:void 0!==o.upper?o.upper:"H",lower:void 0!==o.lower?o.lower:"x",descent:void 0!==o.descent?o.descent:"p",ascent:void 0!==o.ascent?o.ascent:"h",tittle:void 0!==o.tittle?o.tittle:"i",overshoot:void 0!==o.overshoot?o.overshoot:"O"},p=Math.ceil(1.5*l);h.height=p,h.width=.5*p,s.font=e;var c={top:0};s.clearRect(0,0,p,p),s.textBaseline="top",s.fillStyle="black",s.fillText("H",0,0);var g=T(s.getImageData(0,0,p,p));s.clearRect(0,0,p,p),s.textBaseline="bottom",s.fillText("H",0,p);var m=T(s.getImageData(0,0,p,p));c.lineHeight=c.bottom=p-m+g,s.clearRect(0,0,p,p),s.textBaseline="alphabetic",s.fillText("H",0,p);var u=p-T(s.getImageData(0,0,p,p))-1+g;c.baseline=c.alphabetic=u,s.clearRect(0,0,p,p),s.textBaseline="middle",s.fillText("H",0,.5*p);var w=T(s.getImageData(0,0,p,p));c.median=c.middle=p-w-1+g-.5*p,s.clearRect(0,0,p,p),s.textBaseline="hanging",s.fillText("H",0,.5*p);var f=T(s.getImageData(0,0,p,p));c.hanging=p-f-1+g-.5*p,s.clearRect(0,0,p,p),s.textBaseline="ideographic",s.fillText("H",0,p);var A=T(s.getImageData(0,0,p,p));if(c.ideographic=p-A-1+g,d.upper&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.upper,0,0),c.upper=T(s.getImageData(0,0,p,p)),c.capHeight=c.baseline-c.upper),d.lower&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.lower,0,0),c.lower=T(s.getImageData(0,0,p,p)),c.xHeight=c.baseline-c.lower),d.tittle&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.tittle,0,0),c.tittle=T(s.getImageData(0,0,p,p))),d.ascent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.ascent,0,0),c.ascent=T(s.getImageData(0,0,p,p))),d.descent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.descent,0,0),c.descent=b(s.getImageData(0,0,p,p))),d.overshoot){s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.overshoot,0,0);var M=b(s.getImageData(0,0,p,p));c.overshoot=M-u}for(var k in c)c[k]/=l;return c.em=l,v.cache[i]=c,x(c,y)}function x(e,o){var i={};for(var l in"string"==typeof o&&(o=e[o]),e)"em"!==l&&(i[l]=e[l]-o);return i}function T(e){for(var o=e.height,i=e.data,l=3;l<i.length;l+=4)if(0!==i[l])return Math.floor(.25*(l-3)/o)}function b(e){for(var o=e.height,i=e.data,l=i.length-1;l>0;l-=4)if(0!==i[l])return Math.floor(.25*(l-3)/o)}oe.exports=v,v.canvas=document.createElement("canvas"),v.cache={}},{}],194:[function(_,oe,se){oe.exports=function(v,x){if("string"!=typeof v)throw new TypeError("must specify type string");if(x=x||{},"undefined"==typeof document&&!x.canvas)return null;var T=x.canvas||document.createElement("canvas");"number"==typeof x.width&&(T.width=x.width),"number"==typeof x.height&&(T.height=x.height);var b,e=x;try{var o=[v];0===v.indexOf("webgl")&&o.push("experimental-"+v);for(var i=0;i<o.length;i++)if(b=T.getContext(o[i],e))return b}catch(l){b=null}return b||null}},{}],195:[function(_,oe,se){oe.exports=function(v,x){var T=x[0],b=x[1],e=x[2],o=x[3],i=x[4],l=x[5],r=x[6],y=x[7],h=x[8],s=x[9],d=x[10],p=x[11],c=x[12],g=x[13],m=x[14],u=x[15];return v[0]=l*(d*u-p*m)-s*(r*u-y*m)+g*(r*p-y*d),v[1]=-(b*(d*u-p*m)-s*(e*u-o*m)+g*(e*p-o*d)),v[2]=b*(r*u-y*m)-l*(e*u-o*m)+g*(e*y-o*r),v[3]=-(b*(r*p-y*d)-l*(e*p-o*d)+s*(e*y-o*r)),v[4]=-(i*(d*u-p*m)-h*(r*u-y*m)+c*(r*p-y*d)),v[5]=T*(d*u-p*m)-h*(e*u-o*m)+c*(e*p-o*d),v[6]=-(T*(r*u-y*m)-i*(e*u-o*m)+c*(e*y-o*r)),v[7]=T*(r*p-y*d)-i*(e*p-o*d)+h*(e*y-o*r),v[8]=i*(s*u-p*g)-h*(l*u-y*g)+c*(l*p-y*s),v[9]=-(T*(s*u-p*g)-h*(b*u-o*g)+c*(b*p-o*s)),v[10]=T*(l*u-y*g)-i*(b*u-o*g)+c*(b*y-o*l),v[11]=-(T*(l*p-y*s)-i*(b*p-o*s)+h*(b*y-o*l)),v[12]=-(i*(s*m-d*g)-h*(l*m-r*g)+c*(l*d-r*s)),v[13]=T*(s*m-d*g)-h*(b*m-e*g)+c*(b*d-e*s),v[14]=-(T*(l*m-r*g)-i*(b*m-e*g)+c*(b*r-e*l)),v[15]=T*(l*d-r*s)-i*(b*d-e*s)+h*(b*r-e*l),v}},{}],196:[function(_,oe,se){oe.exports=function(v){var x=new Float32Array(16);return x[0]=v[0],x[1]=v[1],x[2]=v[2],x[3]=v[3],x[4]=v[4],x[5]=v[5],x[6]=v[6],x[7]=v[7],x[8]=v[8],x[9]=v[9],x[10]=v[10],x[11]=v[11],x[12]=v[12],x[13]=v[13],x[14]=v[14],x[15]=v[15],x}},{}],197:[function(_,oe,se){oe.exports=function(v,x){return v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3],v[4]=x[4],v[5]=x[5],v[6]=x[6],v[7]=x[7],v[8]=x[8],v[9]=x[9],v[10]=x[10],v[11]=x[11],v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15],v}},{}],198:[function(_,oe,se){oe.exports=function(){var v=new Float32Array(16);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],199:[function(_,oe,se){oe.exports=function(v){var x=v[0],T=v[1],b=v[2],e=v[3],o=v[4],i=v[5],l=v[6],r=v[7],y=v[8],h=v[9],s=v[10],d=v[11],p=v[12],c=v[13],g=v[14],m=v[15];return(x*i-T*o)*(s*m-d*g)-(x*l-b*o)*(h*m-d*c)+(x*r-e*o)*(h*g-s*c)+(T*l-b*i)*(y*m-d*p)-(T*r-e*i)*(y*g-s*p)+(b*r-e*l)*(y*c-h*p)}},{}],200:[function(_,oe,se){oe.exports=function(v,x){var T=x[0],b=x[1],e=x[2],o=x[3],i=T+T,l=b+b,r=e+e,y=T*i,h=b*i,s=b*l,d=e*i,p=e*l,c=e*r,g=o*i,m=o*l,u=o*r;return v[0]=1-s-c,v[1]=h+u,v[2]=d-m,v[3]=0,v[4]=h-u,v[5]=1-y-c,v[6]=p+g,v[7]=0,v[8]=d+m,v[9]=p-g,v[10]=1-y-s,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],201:[function(_,oe,se){oe.exports=function(v,x,T){var b,e,o,i=T[0],l=T[1],r=T[2],y=Math.sqrt(i*i+l*l+r*r);return Math.abs(y)<1e-6?null:(i*=y=1/y,l*=y,r*=y,b=Math.sin(x),e=Math.cos(x),v[0]=i*i*(o=1-e)+e,v[1]=l*i*o+r*b,v[2]=r*i*o-l*b,v[3]=0,v[4]=i*l*o-r*b,v[5]=l*l*o+e,v[6]=r*l*o+i*b,v[7]=0,v[8]=i*r*o+l*b,v[9]=l*r*o-i*b,v[10]=r*r*o+e,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v)}},{}],202:[function(_,oe,se){oe.exports=function(v,x,T){var b=x[0],e=x[1],o=x[2],i=x[3],l=b+b,r=e+e,y=o+o,h=b*l,s=b*r,d=b*y,p=e*r,c=e*y,g=o*y,m=i*l,u=i*r,w=i*y;return v[0]=1-(p+g),v[1]=s+w,v[2]=d-u,v[3]=0,v[4]=s-w,v[5]=1-(h+g),v[6]=c+m,v[7]=0,v[8]=d+u,v[9]=c-m,v[10]=1-(h+p),v[11]=0,v[12]=T[0],v[13]=T[1],v[14]=T[2],v[15]=1,v}},{}],203:[function(_,oe,se){oe.exports=function(v,x){return v[0]=x[0],v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=x[1],v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=x[2],v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],204:[function(_,oe,se){oe.exports=function(v,x){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=x[0],v[13]=x[1],v[14]=x[2],v[15]=1,v}},{}],205:[function(_,oe,se){oe.exports=function(v,x){var T=Math.sin(x),b=Math.cos(x);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=b,v[6]=T,v[7]=0,v[8]=0,v[9]=-T,v[10]=b,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],206:[function(_,oe,se){oe.exports=function(v,x){var T=Math.sin(x),b=Math.cos(x);return v[0]=b,v[1]=0,v[2]=-T,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=T,v[9]=0,v[10]=b,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],207:[function(_,oe,se){oe.exports=function(v,x){var T=Math.sin(x),b=Math.cos(x);return v[0]=b,v[1]=T,v[2]=0,v[3]=0,v[4]=-T,v[5]=b,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],208:[function(_,oe,se){oe.exports=function(v,x,T,b,e,o,i){var l=1/(T-x),r=1/(e-b),y=1/(o-i);return v[0]=2*o*l,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=2*o*r,v[6]=0,v[7]=0,v[8]=(T+x)*l,v[9]=(e+b)*r,v[10]=(i+o)*y,v[11]=-1,v[12]=0,v[13]=0,v[14]=i*o*2*y,v[15]=0,v}},{}],209:[function(_,oe,se){oe.exports=function(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],210:[function(_,oe,se){oe.exports={create:_("./create"),clone:_("./clone"),copy:_("./copy"),identity:_("./identity"),transpose:_("./transpose"),invert:_("./invert"),adjoint:_("./adjoint"),determinant:_("./determinant"),multiply:_("./multiply"),translate:_("./translate"),scale:_("./scale"),rotate:_("./rotate"),rotateX:_("./rotateX"),rotateY:_("./rotateY"),rotateZ:_("./rotateZ"),fromRotation:_("./fromRotation"),fromRotationTranslation:_("./fromRotationTranslation"),fromScaling:_("./fromScaling"),fromTranslation:_("./fromTranslation"),fromXRotation:_("./fromXRotation"),fromYRotation:_("./fromYRotation"),fromZRotation:_("./fromZRotation"),fromQuat:_("./fromQuat"),frustum:_("./frustum"),perspective:_("./perspective"),perspectiveFromFieldOfView:_("./perspectiveFromFieldOfView"),ortho:_("./ortho"),lookAt:_("./lookAt"),str:_("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(_,oe,se){oe.exports=function(v,x){var T=x[0],b=x[1],e=x[2],o=x[3],i=x[4],l=x[5],r=x[6],y=x[7],h=x[8],s=x[9],d=x[10],p=x[11],c=x[12],g=x[13],m=x[14],u=x[15],w=T*l-b*i,f=T*r-e*i,A=T*y-o*i,M=b*r-e*l,k=b*y-o*l,E=e*y-o*r,P=h*g-s*c,D=h*m-d*c,F=h*u-p*c,R=s*m-d*g,L=s*u-p*g,I=d*u-p*m,B=w*I-f*L+A*R+M*F-k*D+E*P;return B?(v[0]=(l*I-r*L+y*R)*(B=1/B),v[1]=(e*L-b*I-o*R)*B,v[2]=(g*E-m*k+u*M)*B,v[3]=(d*k-s*E-p*M)*B,v[4]=(r*F-i*I-y*D)*B,v[5]=(T*I-e*F+o*D)*B,v[6]=(m*A-c*E-u*f)*B,v[7]=(h*E-d*A+p*f)*B,v[8]=(i*L-l*F+y*P)*B,v[9]=(b*F-T*L-o*P)*B,v[10]=(c*k-g*A+u*w)*B,v[11]=(s*A-h*k-p*w)*B,v[12]=(l*D-i*R-r*P)*B,v[13]=(T*R-b*D+e*P)*B,v[14]=(g*f-c*M-m*w)*B,v[15]=(h*M-s*f+d*w)*B,v):null}},{}],212:[function(_,oe,se){var v=_("./identity");oe.exports=function(x,T,b,e){var o,i,l,r,y,h,s,d,p,c,g=T[0],m=T[1],u=T[2],w=e[0],f=e[1],A=e[2],M=b[0],k=b[1],E=b[2];return Math.abs(g-M)<1e-6&&Math.abs(m-k)<1e-6&&Math.abs(u-E)<1e-6?v(x):(s=g-M,d=m-k,p=u-E,o=f*(p*=c=1/Math.sqrt(s*s+d*d+p*p))-A*(d*=c),i=A*(s*=c)-w*p,l=w*d-f*s,(c=Math.sqrt(o*o+i*i+l*l))?(o*=c=1/c,i*=c,l*=c):(o=0,i=0,l=0),r=d*l-p*i,y=p*o-s*l,h=s*i-d*o,(c=Math.sqrt(r*r+y*y+h*h))?(r*=c=1/c,y*=c,h*=c):(r=0,y=0,h=0),x[0]=o,x[1]=r,x[2]=s,x[3]=0,x[4]=i,x[5]=y,x[6]=d,x[7]=0,x[8]=l,x[9]=h,x[10]=p,x[11]=0,x[12]=-(o*g+i*m+l*u),x[13]=-(r*g+y*m+h*u),x[14]=-(s*g+d*m+p*u),x[15]=1,x)}},{"./identity":209}],213:[function(_,oe,se){oe.exports=function(v,x,T){var b=x[0],e=x[1],o=x[2],i=x[3],l=x[4],r=x[5],y=x[6],h=x[7],s=x[8],d=x[9],p=x[10],c=x[11],g=x[12],m=x[13],u=x[14],w=x[15],f=T[0],A=T[1],M=T[2],k=T[3];return v[0]=f*b+A*l+M*s+k*g,v[1]=f*e+A*r+M*d+k*m,v[2]=f*o+A*y+M*p+k*u,v[3]=f*i+A*h+M*c+k*w,v[4]=(f=T[4])*b+(A=T[5])*l+(M=T[6])*s+(k=T[7])*g,v[5]=f*e+A*r+M*d+k*m,v[6]=f*o+A*y+M*p+k*u,v[7]=f*i+A*h+M*c+k*w,v[8]=(f=T[8])*b+(A=T[9])*l+(M=T[10])*s+(k=T[11])*g,v[9]=f*e+A*r+M*d+k*m,v[10]=f*o+A*y+M*p+k*u,v[11]=f*i+A*h+M*c+k*w,v[12]=(f=T[12])*b+(A=T[13])*l+(M=T[14])*s+(k=T[15])*g,v[13]=f*e+A*r+M*d+k*m,v[14]=f*o+A*y+M*p+k*u,v[15]=f*i+A*h+M*c+k*w,v}},{}],214:[function(_,oe,se){oe.exports=function(v,x,T,b,e,o,i){var l=1/(x-T),r=1/(b-e),y=1/(o-i);return v[0]=-2*l,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*r,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*y,v[11]=0,v[12]=(x+T)*l,v[13]=(e+b)*r,v[14]=(i+o)*y,v[15]=1,v}},{}],215:[function(_,oe,se){oe.exports=function(v,x,T,b,e){var o=1/Math.tan(x/2),i=1/(b-e);return v[0]=o/T,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=o,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=(e+b)*i,v[11]=-1,v[12]=0,v[13]=0,v[14]=2*e*b*i,v[15]=0,v}},{}],216:[function(_,oe,se){oe.exports=function(v,x,T,b){var e=Math.tan(x.upDegrees*Math.PI/180),o=Math.tan(x.downDegrees*Math.PI/180),i=Math.tan(x.leftDegrees*Math.PI/180),l=Math.tan(x.rightDegrees*Math.PI/180),r=2/(i+l),y=2/(e+o);return v[0]=r,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=y,v[6]=0,v[7]=0,v[8]=-(i-l)*r*.5,v[9]=(e-o)*y*.5,v[10]=b/(T-b),v[11]=-1,v[12]=0,v[13]=0,v[14]=b*T/(T-b),v[15]=0,v}},{}],217:[function(_,oe,se){oe.exports=function(v,x,T,b){var e,o,i,l,r,y,h,s,d,p,c,g,m,u,w,f,A,M,k,E,P,D,F,R,L=b[0],I=b[1],B=b[2],V=Math.sqrt(L*L+I*I+B*B);return Math.abs(V)<1e-6?null:(L*=V=1/V,I*=V,B*=V,e=Math.sin(T),o=Math.cos(T),r=x[1],y=x[2],h=x[3],d=x[5],p=x[6],c=x[7],m=x[9],u=x[10],w=x[11],k=L*I*(i=1-o)-B*e,E=I*I*i+o,P=B*I*i+L*e,D=L*B*i+I*e,F=I*B*i-L*e,R=B*B*i+o,v[0]=(l=x[0])*(f=L*L*i+o)+(s=x[4])*(A=I*L*i+B*e)+(g=x[8])*(M=B*L*i-I*e),v[1]=r*f+d*A+m*M,v[2]=y*f+p*A+u*M,v[3]=h*f+c*A+w*M,v[4]=l*k+s*E+g*P,v[5]=r*k+d*E+m*P,v[6]=y*k+p*E+u*P,v[7]=h*k+c*E+w*P,v[8]=l*D+s*F+g*R,v[9]=r*D+d*F+m*R,v[10]=y*D+p*F+u*R,v[11]=h*D+c*F+w*R,x!==v&&(v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15]),v)}},{}],218:[function(_,oe,se){oe.exports=function(v,x,T){var b=Math.sin(T),e=Math.cos(T),o=x[4],i=x[5],l=x[6],r=x[7],y=x[8],h=x[9],s=x[10],d=x[11];return x!==v&&(v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3],v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15]),v[4]=o*e+y*b,v[5]=i*e+h*b,v[6]=l*e+s*b,v[7]=r*e+d*b,v[8]=y*e-o*b,v[9]=h*e-i*b,v[10]=s*e-l*b,v[11]=d*e-r*b,v}},{}],219:[function(_,oe,se){oe.exports=function(v,x,T){var b=Math.sin(T),e=Math.cos(T),o=x[0],i=x[1],l=x[2],r=x[3],y=x[8],h=x[9],s=x[10],d=x[11];return x!==v&&(v[4]=x[4],v[5]=x[5],v[6]=x[6],v[7]=x[7],v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15]),v[0]=o*e-y*b,v[1]=i*e-h*b,v[2]=l*e-s*b,v[3]=r*e-d*b,v[8]=o*b+y*e,v[9]=i*b+h*e,v[10]=l*b+s*e,v[11]=r*b+d*e,v}},{}],220:[function(_,oe,se){oe.exports=function(v,x,T){var b=Math.sin(T),e=Math.cos(T),o=x[0],i=x[1],l=x[2],r=x[3],y=x[4],h=x[5],s=x[6],d=x[7];return x!==v&&(v[8]=x[8],v[9]=x[9],v[10]=x[10],v[11]=x[11],v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15]),v[0]=o*e+y*b,v[1]=i*e+h*b,v[2]=l*e+s*b,v[3]=r*e+d*b,v[4]=y*e-o*b,v[5]=h*e-i*b,v[6]=s*e-l*b,v[7]=d*e-r*b,v}},{}],221:[function(_,oe,se){oe.exports=function(v,x,T){var b=T[0],e=T[1],o=T[2];return v[0]=x[0]*b,v[1]=x[1]*b,v[2]=x[2]*b,v[3]=x[3]*b,v[4]=x[4]*e,v[5]=x[5]*e,v[6]=x[6]*e,v[7]=x[7]*e,v[8]=x[8]*o,v[9]=x[9]*o,v[10]=x[10]*o,v[11]=x[11]*o,v[12]=x[12],v[13]=x[13],v[14]=x[14],v[15]=x[15],v}},{}],222:[function(_,oe,se){oe.exports=function(v){return"mat4("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+", "+v[6]+", "+v[7]+", "+v[8]+", "+v[9]+", "+v[10]+", "+v[11]+", "+v[12]+", "+v[13]+", "+v[14]+", "+v[15]+")"}},{}],223:[function(_,oe,se){oe.exports=function(v,x,T){var b,e,o,i,l,r,y,h,s,d,p,c,g=T[0],m=T[1],u=T[2];return x===v?(v[12]=x[0]*g+x[4]*m+x[8]*u+x[12],v[13]=x[1]*g+x[5]*m+x[9]*u+x[13],v[14]=x[2]*g+x[6]*m+x[10]*u+x[14],v[15]=x[3]*g+x[7]*m+x[11]*u+x[15]):(e=x[1],o=x[2],i=x[3],l=x[4],r=x[5],y=x[6],h=x[7],s=x[8],d=x[9],p=x[10],c=x[11],v[0]=b=x[0],v[1]=e,v[2]=o,v[3]=i,v[4]=l,v[5]=r,v[6]=y,v[7]=h,v[8]=s,v[9]=d,v[10]=p,v[11]=c,v[12]=b*g+l*m+s*u+x[12],v[13]=e*g+r*m+d*u+x[13],v[14]=o*g+y*m+p*u+x[14],v[15]=i*g+h*m+c*u+x[15]),v}},{}],224:[function(_,oe,se){oe.exports=function(v,x){if(v===x){var T=x[1],b=x[2],e=x[3],o=x[6],i=x[7],l=x[11];v[1]=x[4],v[2]=x[8],v[3]=x[12],v[4]=T,v[6]=x[9],v[7]=x[13],v[8]=b,v[9]=o,v[11]=x[14],v[12]=e,v[13]=i,v[14]=l}else v[0]=x[0],v[1]=x[4],v[2]=x[8],v[3]=x[12],v[4]=x[1],v[5]=x[5],v[6]=x[9],v[7]=x[13],v[8]=x[2],v[9]=x[6],v[10]=x[10],v[11]=x[14],v[12]=x[3],v[13]=x[7],v[14]=x[11],v[15]=x[15];return v}},{}],225:[function(_,oe,se){"use strict";var v=_("css-font"),x=_("pick-by-alias"),T=_("regl"),b=_("gl-util/context"),e=_("es6-weak-map"),o=_("color-normalize"),i=_("font-atlas"),l=_("typedarray-pool"),r=_("parse-rect"),y=_("is-plain-obj"),h=_("parse-unit"),s=_("to-px"),d=_("detect-kerning"),p=_("object-assign"),c=_("font-measure"),g=_("flatten-vertex-data"),m=_("bit-twiddle").nextPow2,u=new e,w=!1;if(document.body){var f=document.body.appendChild(document.createElement("div"));f.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(f).fontStretch&&(w=!0),document.body.removeChild(f)}var A=function(M){var k;this.gl="function"==typeof(k=M)&&k._gl&&k.prop&&k.texture&&k.buffer?(M={regl:M}).regl._gl:b(M),this.shader=u.get(this.gl),this.regl=this.shader?this.shader.regl:M.regl||T({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),u.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(y(M)?M:{})};A.prototype.createShader=function(){var M=this.regl,k=M({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:M.prop("count"),offset:M.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:M.this("sizeBuffer")},width:{offset:0,stride:8,buffer:M.this("sizeBuffer")},char:M.this("charBuffer"),position:M.this("position")},uniforms:{atlasSize:function(E,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(E,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(E,P){return P.atlas.texture},charStep:function(E,P){return P.atlas.step},em:function(E,P){return P.atlas.em},color:M.prop("color"),opacity:M.prop("opacity"),viewport:M.this("viewportArray"),scale:M.this("scale"),align:M.prop("align"),baseline:M.prop("baseline"),translate:M.this("translate"),positionOffset:M.prop("positionOffset")},primitive:"points",viewport:M.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:M,draw:k,atlas:{}}},A.prototype.update=function(M){var k=this;if("string"==typeof M)M={text:M};else if(!M)return;null!=(M=x(M,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(M.opacity)?M.opacity.map(function(Te){return parseFloat(Te)}):parseFloat(M.opacity)),null!=M.viewport&&(this.viewport=r(M.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=M.kerning&&(this.kerning=M.kerning),null!=M.offset&&("number"==typeof M.offset&&(M.offset=[M.offset,0]),this.positionOffset=g(M.offset)),M.direction&&(this.direction=M.direction),M.range&&(this.range=M.range,this.scale=[1/(M.range[2]-M.range[0]),1/(M.range[3]-M.range[1])],this.translate=[-M.range[0],-M.range[1]]),M.scale&&(this.scale=M.scale),M.translate&&(this.translate=M.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||M.font||(M.font=A.baseFontSize+"px sans-serif");var E,P=!1,D=!1;if(M.font&&(Array.isArray(M.font)?M.font:[M.font]).forEach(function(Te,Ie){if("string"==typeof Te)try{Te=v.parse(Te)}catch(st){Te=v.parse(A.baseFontSize+"px "+Te)}else Te=v.parse(v.stringify(Te));var Ce=v.stringify({size:A.baseFontSize,family:Te.family,stretch:w?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),Re=h(Te.size),Ue=Math.round(Re[0]*s(Re[1]));if(Ue!==k.fontSize[Ie]&&(D=!0,k.fontSize[Ie]=Ue),!(k.font[Ie]&&Ce==k.font[Ie].baseString||(P=!0,k.font[Ie]=A.fonts[Ce],k.font[Ie]))){var qe=Te.family.join(", "),Xe=[Te.style];Te.style!=Te.variant&&Xe.push(Te.variant),Te.variant!=Te.weight&&Xe.push(Te.weight),w&&Te.weight!=Te.stretch&&Xe.push(Te.stretch),k.font[Ie]={baseString:Ce,family:qe,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:c(qe,{origin:"top",fontSize:A.baseFontSize,fontStyle:Xe.join(" ")})},A.fonts[Ce]=k.font[Ie]}}),(P||D)&&this.font.forEach(function(Te,Ie){var Ce=v.stringify({size:k.fontSize[Ie],family:Te.family,stretch:w?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});k.fontAtlas[Ie]=k.shader.atlas[Ce],k.fontAtlas[Ie]||(k.shader.atlas[Ce]=k.fontAtlas[Ie]={fontString:Ce,step:2*Math.ceil(k.fontSize[Ie]*Te.metrics.bottom*.5),em:k.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}),null==M.text&&(M.text=k.text)}),"string"==typeof M.text&&M.position&&M.position.length>2){for(var F=Array(.5*M.position.length),R=0;R<F.length;R++)F[R]=M.text;M.text=F}if(null!=M.text||P){if(this.textOffsets=[0],Array.isArray(M.text)){this.count=M.text[0].length,this.counts=[this.count];for(var L=1;L<M.text.length;L++)this.textOffsets[L]=this.textOffsets[L-1]+M.text[L-1].length,this.count+=M.text[L].length,this.counts.push(M.text[L].length);this.text=M.text.join("")}else this.text=M.text,this.count=this.text.length,this.counts=[this.count];E=[],this.font.forEach(function(Te,Ie){A.atlasContext.font=Te.baseString;for(var Ce=k.fontAtlas[Ie],Re=0;Re<k.text.length;Re++){var Ue=k.text.charAt(Re);if(null==Ce.ids[Ue]&&(Ce.ids[Ue]=Ce.chars.length,Ce.chars.push(Ue),E.push(Ue)),null==Te.width[Ue]&&(Te.width[Ue]=A.atlasContext.measureText(Ue).width/A.baseFontSize,k.kerning)){var qe=[];for(var Xe in Te.width)qe.push(Xe+Ue,Ue+Xe);p(Te.kerning,d(Te.family,{pairs:qe}))}}})}if(M.position)if(M.position.length>2){for(var I=!M.position[0].length,B=l.mallocFloat(2*this.count),V=0,Z=0;V<this.counts.length;V++){var Y=this.counts[V];if(I)for(var Q=0;Q<Y;Q++)B[Z++]=M.position[2*V],B[Z++]=M.position[2*V+1];else for(var re=0;re<Y;re++)B[Z++]=M.position[V][0],B[Z++]=M.position[V][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),l.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:M.position};if(M.text||P){var $=l.mallocUint8(this.count),J=l.mallocFloat(2*this.count);this.textWidth=[];for(var ie=0,j=0;ie<this.counts.length;ie++){for(var q=this.counts[ie],W=this.font[ie]||this.font[0],ae=this.fontAtlas[ie]||this.fontAtlas[0],G=0;G<q;G++){var ee=this.text.charAt(j),te=this.text.charAt(j-1);if($[j]=ae.ids[ee],J[2*j]=W.width[ee],G){var de=J[2*j-1]+.5*J[2*j-2]+.5*J[2*j];if(this.kerning){var he=W.kerning[te+ee];he&&(de+=.001*he)}J[2*j+1]=de}else J[2*j+1]=.5*J[2*j];j++}this.textWidth.push(J.length?.5*J[2*j-2]+J[2*j-1]:0)}M.align||(M.align=this.align),this.charBuffer({data:$,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),l.freeUint8($),l.freeFloat(J),E.length&&this.font.forEach(function(Te,Ie){var Ce=k.fontAtlas[Ie],Re=Ce.step,Ue=Math.floor(A.maxAtlasSize/Re),qe=Math.min(Ue,Ce.chars.length),Xe=Math.ceil(Ce.chars.length/qe),st=m(qe*Re),He=m(Xe*Re);Ce.width=st,Ce.height=He,Ce.rows=Xe,Ce.cols=qe,Ce.em&&Ce.texture({data:i({canvas:A.atlasCanvas,font:Ce.fontString,chars:Ce.chars,shape:[st,He],step:[Re,Re]})})})}if(M.align&&(this.align=M.align,this.alignOffset=this.textWidth.map(function(Te,Ie){var Ce=Array.isArray(k.align)?k.align.length>1?k.align[Ie]:k.align[0]:k.align;if("number"==typeof Ce)return Ce;switch(Ce){case"right":case"end":return-Te;case"center":case"centre":case"middle":return.5*-Te}return 0})),null==this.baseline&&null==M.baseline&&(M.baseline=0),null!=M.baseline&&(this.baseline=M.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Ie){var Ce=(k.font[Ie]||k.font[0]).metrics,Re=0;return-1*((Re+=.5*Ce.bottom)+("number"==typeof Te?Te-Ce.baseline:-Ce[Te]))})),null!=M.color)if(M.color||(M.color="transparent"),"string"!=typeof M.color&&isNaN(M.color)){var be;if("number"==typeof M.color[0]&&M.color.length>this.counts.length){var me=M.color.length;be=l.mallocUint8(me);for(var _e=(M.color.subarray||M.color.slice).bind(M.color),Ee=0;Ee<me;Ee+=4)be.set(o(_e(Ee,Ee+4),"uint8"),Ee)}else{var De=M.color.length;be=l.mallocUint8(4*De);for(var Se=0;Se<De;Se++)be.set(o(M.color[Se]||0,"uint8"),4*Se)}this.color=be}else this.color=o(M.color,"uint8");if(M.position||M.text||M.color||M.baseline||M.align||M.font||M.offset||M.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Fe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Fe);for(var ve=0;ve<this.batch.length;ve++)this.batch[ve]={count:this.counts.length>1?this.counts[ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ve,4*ve+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ve]:this.opacity,baseline:null!=this.baselineOffset[ve]?this.baselineOffset[ve]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ve]?this.alignOffset[ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ve,2*ve+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},oe.exports=A},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(_,oe,se){(function(v){(function(){"use strict";var x=_("pick-by-alias");function T(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*v.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*v.innerHeight);else{var i=o.container.getBoundingClientRect();o.canvas.width=o.width||i.right-i.left,o.canvas.height=o.height||i.bottom-i.top}}function b(o){return"function"==typeof o.getContext&&"width"in o&&"height"in o}function e(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}oe.exports=function(o){var i,r;if(o?"string"==typeof o&&(o={container:o}):o={},(o=b(o)||"string"==typeof(i=o).nodeName&&"function"==typeof i.appendChild&&"function"==typeof i.getBoundingClientRect?{container:o}:"function"==typeof(r=o).drawArrays||"function"==typeof r.drawElements?{gl:o}:x(o,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(o.pixelRatio=v.pixelRatio||1),o.gl)return o.gl;if(o.canvas&&(o.container=o.canvas.parentNode),o.container){if("string"==typeof o.container){var l=document.querySelector(o.container);if(!l)throw Error("Element "+o.container+" is not found");o.container=l}b(o.container)?(o.canvas=o.container,o.container=o.canvas.parentNode):o.canvas||(o.canvas=e(),o.container.appendChild(o.canvas),T(o))}else if(!o.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");o.container=document.body||document.documentElement,o.canvas=e(),o.container.appendChild(o.canvas),T(o)}return o.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(r){try{o.gl=o.canvas.getContext(r,o.attrs)}catch(y){}return o.gl}),o.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(_,oe,se){oe.exports=function(v){"string"==typeof v&&(v=[v]);for(var x=[].slice.call(arguments,1),T=[],b=0;b<v.length-1;b++)T.push(v[b],x[b]||"");return T.push(v[b]),T.join("")}},{}],228:[function(_,oe,se){(function(v){(function(){"use strict";var x,T=_("is-browser");x="function"==typeof v.matchMedia?!v.matchMedia("(hover: none)").matches:T,oe.exports=x}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(_,oe,se){"use strict";var v=_("is-browser");oe.exports=v&&function(){var x=!1;try{var T=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch(b){x=!1}return x}()},{"is-browser":232}],230:[function(_,oe,se){se.read=function(v,x,T,b,e){var o,i,l=8*e-b-1,r=(1<<l)-1,y=r>>1,h=-7,s=T?e-1:0,d=T?-1:1,p=v[x+s];for(s+=d,o=p&(1<<-h)-1,p>>=-h,h+=l;h>0;o=256*o+v[x+s],s+=d,h-=8);for(i=o&(1<<-h)-1,o>>=-h,h+=b;h>0;i=256*i+v[x+s],s+=d,h-=8);if(0===o)o=1-y;else{if(o===r)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,b),o-=y}return(p?-1:1)*i*Math.pow(2,o-b)},se.write=function(v,x,T,b,e,o){var i,l,r,y=8*o-e-1,h=(1<<y)-1,s=h>>1,d=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,p=b?0:o-1,c=b?1:-1,g=x<0||0===x&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(l=isNaN(x)?1:0,i=h):(i=Math.floor(Math.log(x)/Math.LN2),x*(r=Math.pow(2,-i))<1&&(i--,r*=2),(x+=i+s>=1?d/r:d*Math.pow(2,1-s))*r>=2&&(i++,r/=2),i+s>=h?(l=0,i=h):i+s>=1?(l=(x*r-1)*Math.pow(2,e),i+=s):(l=x*Math.pow(2,s-1)*Math.pow(2,e),i=0));e>=8;v[T+p]=255&l,p+=c,l/=256,e-=8);for(i=i<<e|l,y+=e;y>0;v[T+p]=255&i,p+=c,i/=256,y-=8);v[T+p-c]|=128*g}},{}],231:[function(_,oe,se){oe.exports="function"==typeof Object.create?function(v,x){x&&(v.super_=x,v.prototype=Object.create(x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}))}:function(v,x){if(x){v.super_=x;var T=function(){};T.prototype=x.prototype,v.prototype=new T,v.prototype.constructor=v}}},{}],232:[function(_,oe,se){oe.exports=!0},{}],233:[function(_,oe,se){"use strict";oe.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(_,oe,se){"use strict";oe.exports=T,oe.exports.isMobile=T,oe.exports.default=T;var v=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,x=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function T(b){b||(b={});var e=b.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var o=b.tablet?x.test(e):v.test(e);return!o&&b.tablet&&b.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(o=!0),o}},{}],235:[function(_,oe,se){"use strict";oe.exports=function(v){var x=typeof v;return null!==v&&("object"===x||"function"===x)}},{}],236:[function(_,oe,se){"use strict";var v=Object.prototype.toString;oe.exports=function(x){var T;return"[object Object]"===v.call(x)&&(null===(T=Object.getPrototypeOf(x))||T===Object.getPrototypeOf({}))}},{}],237:[function(_,oe,se){"use strict";oe.exports=function(v){for(var x,T=v.length,b=0;b<T;b++)if(((x=v.charCodeAt(b))<9||x>13)&&32!==x&&133!==x&&160!==x&&5760!==x&&6158!==x&&(x<8192||x>8205)&&8232!==x&&8233!==x&&8239!==x&&8287!==x&&8288!==x&&12288!==x&&65279!==x)return!1;return!0}},{}],238:[function(_,oe,se){"use strict";oe.exports=function(v){return"string"==typeof v&&(v=v.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(v)&&/[\dz]$/i.test(v)&&v.length>4))}},{}],239:[function(_,oe,se){var v,x;v=this,x=function(){"use strict";var v,x,T;function b(e,o){if(v)if(x){var i="var sharedChunk = {}; ("+v+")(sharedChunk); ("+x+")(sharedChunk);",l={};v(l),(T=o(l)).workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}else x=o;else v=o}return b(0,function(e){function o(S,N){return S(N={exports:{}},N.exports),N.exports}var i=l;function l(S,N,K,ce){this.cx=3*S,this.bx=3*(K-S)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*N,this.by=3*(ce-N)-this.cy,this.ay=1-this.cy-this.by,this.p1x=S,this.p1y=ce,this.p2x=K,this.p2y=ce}l.prototype.sampleCurveX=function(S){return((this.ax*S+this.bx)*S+this.cx)*S},l.prototype.sampleCurveY=function(S){return((this.ay*S+this.by)*S+this.cy)*S},l.prototype.sampleCurveDerivativeX=function(S){return(3*this.ax*S+2*this.bx)*S+this.cx},l.prototype.solveCurveX=function(S,N){var K,ce,xe,Ae,Oe;for(void 0===N&&(N=1e-6),xe=S,Oe=0;Oe<8;Oe++){if(Ae=this.sampleCurveX(xe)-S,Math.abs(Ae)<N)return xe;var We=this.sampleCurveDerivativeX(xe);if(Math.abs(We)<1e-6)break;xe-=Ae/We}if((xe=S)<(K=0))return K;if(xe>(ce=1))return ce;for(;K<ce;){if(Ae=this.sampleCurveX(xe),Math.abs(Ae-S)<N)return xe;S>Ae?K=xe:ce=xe,xe=.5*(ce-K)+K}return xe},l.prototype.solve=function(S,N){return this.sampleCurveY(this.solveCurveX(S,N))};var r=y;function y(S,N){this.x=S,this.y=N}function h(S,N,K,ce){var xe=new i(S,N,K,ce);return function(Ae){return xe.solve(Ae)}}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,N){return this.clone()._rotateAround(S,N)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var N=S.x-this.x,K=S.y-this.y;return N*N+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,N){return Math.atan2(this.x*N-this.y*S,this.x*S+this.y*N)},_matMult:function(S){var K=S[2]*this.x+S[3]*this.y;return this.x=S[0]*this.x+S[1]*this.y,this.y=K,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var N=Math.cos(S),K=Math.sin(S),xe=K*this.x+N*this.y;return this.x=N*this.x-K*this.y,this.y=xe,this},_rotateAround:function(S,N){var K=Math.cos(S),ce=Math.sin(S),Ae=N.y+ce*(this.x-N.x)+K*(this.y-N.y);return this.x=N.x+K*(this.x-N.x)-ce*(this.y-N.y),this.y=Ae,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(S){return S instanceof y?S:Array.isArray(S)?new y(S[0],S[1]):S};var s=h(.25,.1,.25,1);function d(S,N,K){return Math.min(K,Math.max(N,S))}function p(S,N,K){var ce=K-N,xe=((S-N)%ce+ce)%ce+N;return xe===N?K:xe}function c(S){for(var N=[],K=arguments.length-1;K-- >0;)N[K]=arguments[K+1];for(var ce=0,xe=N;ce<xe.length;ce+=1){var Ae=xe[ce];for(var Oe in Ae)S[Oe]=Ae[Oe]}return S}var g=1;function m(){return g++}function u(){return function S(N){return N?(N^16*Math.random()>>N/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,S)}()}function w(S){return!!S&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(S)}function f(S,N){S.forEach(function(K){N[K]&&(N[K]=N[K].bind(N))})}function A(S,N){return-1!==S.indexOf(N,S.length-N.length)}function M(S,N,K){var ce={};for(var xe in S)ce[xe]=N.call(K||this,S[xe],xe,S);return ce}function k(S,N,K){var ce={};for(var xe in S)N.call(K||this,S[xe],xe,S)&&(ce[xe]=S[xe]);return ce}function E(S){return Array.isArray(S)?S.map(E):"object"==typeof S&&S?M(S,E):S}var P={};function D(S){P[S]||("undefined"!=typeof console&&console.warn(S),P[S]=!0)}function F(S,N,K){return(K.y-S.y)*(N.x-S.x)>(N.y-S.y)*(K.x-S.x)}function R(S){for(var N=0,K=0,ce=S.length,xe=ce-1,Ae=void 0,Oe=void 0;K<ce;xe=K++)N+=((Oe=S[xe]).x-(Ae=S[K]).x)*(Ae.y+Oe.y);return N}function L(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(S){var N={};if(S.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,xe,Ae,Oe){var We=Ae||Oe;return N[xe]=!We||We.toLowerCase(),""}),N["max-age"]){var K=parseInt(N["max-age"],10);isNaN(K)?delete N["max-age"]:N["max-age"]=K}return N}var B=null;function V(S){if(null==B){var N=S.navigator?S.navigator.userAgent:null;B=!!S.safari||!(!N||!(/\b(iPad|iPhone|iPod)\b/.test(N)||N.match("Safari")&&!N.match("Chrome")))}return B}function Z(S){try{var N=self[S];return N.setItem("_mapbox_test_",1),N.removeItem("_mapbox_test_"),!0}catch(K){return!1}}var Y,Q,re,$,J=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),ie=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,j=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,q={now:J,frame:function(S){var N=ie(S);return{cancel:function(){return j(N)}}},getImageData:function(S,N){void 0===N&&(N=0);var K=self.document.createElement("canvas"),ce=K.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return K.width=S.width,K.height=S.height,ce.drawImage(S,0,0,S.width,S.height),ce.getImageData(-N,-N,S.width+2*N,S.height+2*N)},resolveURL:function(S){return Y||(Y=self.document.createElement("a")),Y.href=S,Y.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Q&&(Q=self.matchMedia("(prefers-reduced-motion: reduce)")),Q.matches)}},W={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ae={supported:!1,testSupport:function(S){G||!$||(ee?te(S):re=S)}},G=!1,ee=!1;function te(S){var N=S.createTexture();S.bindTexture(S.TEXTURE_2D,N);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,$),S.isContextLost())return;ae.supported=!0}catch(K){}S.deleteTexture(N),G=!0}self.document&&(($=self.document.createElement("img")).onload=function(){re&&te(re),re=null,ee=!0},$.onerror=function(){G=!0,re=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var le="01",ue=function(S,N){this._transformRequestFn=S,this._customAccessToken=N,this._createSkuToken()};function de(S){return 0===S.indexOf("mapbox:")}ue.prototype._createSkuToken=function(){var S=function(){for(var N="",K=0;K<10;K++)N+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",le,N].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=S.token,this._skuTokenExpiresAt=S.tokenExpiresAt},ue.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ue.prototype.transformRequest=function(S,N){return this._transformRequestFn&&this._transformRequestFn(S,N)||{url:S}},ue.prototype.normalizeStyleURL=function(S,N){if(!de(S))return S;var K=_e(S);return K.path="/styles/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||N)},ue.prototype.normalizeGlyphsURL=function(S,N){if(!de(S))return S;var K=_e(S);return K.path="/fonts/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||N)},ue.prototype.normalizeSourceURL=function(S,N){if(!de(S))return S;var K=_e(S);return K.path="/v4/"+K.authority+".json",K.params.push("secure"),this._makeAPIURL(K,this._customAccessToken||N)},ue.prototype.normalizeSpriteURL=function(S,N,K,ce){var xe=_e(S);return de(S)?(xe.path="/styles/v1"+xe.path+"/sprite"+N+K,this._makeAPIURL(xe,this._customAccessToken||ce)):(xe.path+=""+N+K,Ee(xe))},ue.prototype.normalizeTileURL=function(S,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),S&&!de(S))return S;var K=_e(S);K.path=K.path.replace(/(\.(png|jpg)\d*)(?=$)/,(q.devicePixelRatio>=2||512===N?"@2x":"")+(ae.supported?".webp":"$1")),K.path=K.path.replace(/^.+\/v4\//,"/"),K.path="/v4"+K.path;var Ae=this._customAccessToken||function(Oe){for(var We=0,it=Oe;We<it.length;We+=1){var xt=it[We].match(/^access_token=(.*)$/);if(xt)return xt[1]}return null}(K.params)||W.ACCESS_TOKEN;return W.REQUIRE_ACCESS_TOKEN&&Ae&&this._skuToken&&K.params.push("sku="+this._skuToken),this._makeAPIURL(K,Ae)},ue.prototype.canonicalizeTileURL=function(S,N){var K=_e(S);if(!K.path.match(/(^\/v4\/)/)||!K.path.match(/\.[\w]+$/))return S;var ce="mapbox://tiles/";ce+=K.path.replace("/v4/","");var xe=K.params;return N&&(xe=xe.filter(function(Ae){return!Ae.match(/^access_token=/)})),xe.length&&(ce+="?"+xe.join("&")),ce},ue.prototype.canonicalizeTileset=function(S,N){for(var K=!!N&&de(N),ce=[],xe=0,Ae=S.tiles||[];xe<Ae.length;xe+=1){var Oe=Ae[xe];be(Oe)?ce.push(this.canonicalizeTileURL(Oe,K)):ce.push(Oe)}return ce},ue.prototype._makeAPIURL=function(S,N){var K="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=_e(W.API_URL);if(S.protocol=ce.protocol,S.authority=ce.authority,"/"!==ce.path&&(S.path=""+ce.path+S.path),!W.REQUIRE_ACCESS_TOKEN)return Ee(S);if(!(N=N||W.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+K);if("s"===N[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+K);return S.params=S.params.filter(function(xe){return-1===xe.indexOf("access_token")}),S.params.push("access_token="+N),Ee(S)};var he=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(S){return he.test(S)}var me=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _e(S){var N=S.match(me);if(!N)throw new Error("Unable to parse URL object");return{protocol:N[1],authority:N[2],path:N[3]||"/",params:N[4]?N[4].split("&"):[]}}function Ee(S){var N=S.params.length?"?"+S.params.join("&"):"";return S.protocol+"://"+S.authority+S.path+N}function De(S){if(!S)return null;var K=S.split(".");if(!K||3!==K.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(K[1]).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ce){return null}}var Se=function(S){this.type=S,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Se.prototype.getStorageKey=function(S){var ce,K=De(W.ACCESS_TOKEN);return ce=K&&K.u?self.btoa(encodeURIComponent(K.u).replace(/%([0-9A-F]{2})/g,function(xe,Ae){return String.fromCharCode(Number("0x"+Ae))})):W.ACCESS_TOKEN||"",S?"mapbox.eventData."+S+":"+ce:"mapbox.eventData:"+ce},Se.prototype.fetchEventData=function(){var S=Z("localStorage"),N=this.getStorageKey(),K=this.getStorageKey("uuid");if(S)try{var ce=self.localStorage.getItem(N);ce&&(this.eventData=JSON.parse(ce));var xe=self.localStorage.getItem(K);xe&&(this.anonId=xe)}catch(Ae){D("Unable to read from LocalStorage")}},Se.prototype.saveEventData=function(){var S=Z("localStorage"),N=this.getStorageKey(),K=this.getStorageKey("uuid");if(S)try{self.localStorage.setItem(K,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch(ce){D("Unable to write to LocalStorage")}},Se.prototype.processRequests=function(S){},Se.prototype.postEvent=function(S,N,K,ce){var xe=this;if(W.EVENTS_URL){var Ae=_e(W.EVENTS_URL);Ae.params.push("access_token="+(ce||W.ACCESS_TOKEN||""));var Oe={event:this.type,created:new Date(S).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:le,userId:this.anonId},We=N?c(Oe,N):Oe,it={url:Ee(Ae),headers:{"Content-Type":"text/plain"},body:JSON.stringify([We])};this.pendingRequest=rn(it,function(xt){xe.pendingRequest=null,K(xt),xe.saveEventData(),xe.processRequests(ce)})}},Se.prototype.queueRequest=function(S,N){this.queue.push(S),this.processRequests(N)};var Fe,ve,Te=function(S){function N(){S.call(this,"map.load"),this.success={},this.skuToken=""}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.postMapLoadEvent=function(K,ce,xe,Ae){this.skuToken=xe,(W.EVENTS_URL&&Ae||W.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(Oe){return de(Oe)||be(Oe)}))&&this.queueRequest({id:ce,timestamp:Date.now()},Ae)},N.prototype.processRequests=function(K){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){var xe=this.queue.shift(),Ae=xe.id,Oe=xe.timestamp;Ae&&this.success[Ae]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=u()),this.postEvent(Oe,{skuToken:this.skuToken},function(We){We||Ae&&(ce.success[Ae]=!0)},K))}},N}(Se),Ie=new(function(S){function N(K){S.call(this,"appUserTurnstile"),this._customAccessToken=K}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.postTurnstileEvent=function(K,ce){W.EVENTS_URL&&W.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(xe){return de(xe)||be(xe)})&&this.queueRequest(Date.now(),ce)},N.prototype.processRequests=function(K){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xe=De(W.ACCESS_TOKEN),Ae=xe?xe.u:W.ACCESS_TOKEN,Oe=Ae!==this.eventData.tokenU;w(this.anonId)||(this.anonId=u(),Oe=!0);var We=this.queue.shift();if(this.eventData.lastSuccess){var it=new Date(this.eventData.lastSuccess),xt=new Date(We),Tt=(We-this.eventData.lastSuccess)/864e5;Oe=Oe||Tt>=1||Tt<-1||it.getDate()!==xt.getDate()}else Oe=!0;if(!Oe)return this.processRequests();this.postEvent(We,{"enabled.telemetry":!1},function(Yt){Yt||(ce.eventData.lastSuccess=We,ce.eventData.tokenU=Ae)},K)}},N}(Se)),Ce=Ie.postTurnstileEvent.bind(Ie),Re=new Te,Ue=Re.postMapLoadEvent.bind(Re),qe=500,Xe=50;function st(){self.caches&&!Fe&&(Fe=self.caches.open("mapbox-tiles"))}function $e(S){var N=S.indexOf("?");return N<0?S:S.slice(0,N)}var tt,ct=1/0;function bt(){return null==tt&&(tt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),tt}var At={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(At);var Ut=function(S){function N(K,ce,xe){401===ce&&be(xe)&&(K+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),S.call(this,K),this.status=ce,this.url=xe,this.name=this.constructor.name,this.message=K}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},N}(Error),Ct=L()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function dt(S,N){var K,ce=new self.AbortController,xe=new self.Request(S.url,{method:S.method||"GET",body:S.body,credentials:S.credentials,headers:S.headers,referrer:Ct(),signal:ce.signal}),Ae=!1,Oe=!1,We=(K=xe.url).indexOf("sku=")>0&&be(K);"json"===S.type&&xe.headers.set("Accept","application/json");var it=function(Tt,Yt,sn){if(!Oe){if(Tt&&"SecurityError"!==Tt.message&&D(Tt),Yt&&sn)return xt(Yt);var tn=Date.now();self.fetch(xe).then(function(mn){if(mn.ok){var Dn=We?mn.clone():null;return xt(mn,Dn,tn)}return N(new Ut(mn.statusText,mn.status,S.url))}).catch(function(mn){20!==mn.code&&N(new Error(mn.message))})}},xt=function(Tt,Yt,sn){("arrayBuffer"===S.type?Tt.arrayBuffer():"json"===S.type?Tt.json():Tt.text()).then(function(tn){Oe||(Yt&&sn&&function He(S,N,K){if(st(),Fe){var ce={status:N.status,statusText:N.statusText,headers:new self.Headers};N.headers.forEach(function(Ae,Oe){return ce.headers.set(Oe,Ae)});var xe=I(N.headers.get("Cache-Control")||"");xe["no-store"]||(xe["max-age"]&&ce.headers.set("Expires",new Date(K+1e3*xe["max-age"]).toUTCString()),new Date(ce.headers.get("Expires")).getTime()-K<42e4||function(Ae,Oe){if(void 0===ve)try{new Response(new ReadableStream),ve=!0}catch(We){ve=!1}ve?Oe(Ae.body):Ae.blob().then(Oe)}(N,function(Ae){var Oe=new self.Response(Ae,ce);st(),Fe&&Fe.then(function(We){return We.put($e(S.url),Oe)}).catch(function(We){return D(We.message)})}))}}(xe,Yt,sn),Ae=!0,N(null,tn,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(tn){Oe||N(new Error(tn.message))})};return We?function et(S,N){if(st(),!Fe)return N(null);var K=$e(S.url);Fe.then(function(ce){ce.match(K).then(function(xe){var Ae=function(Oe){if(!Oe)return!1;var We=new Date(Oe.headers.get("Expires")||0),it=I(Oe.headers.get("Cache-Control")||"");return We>Date.now()&&!it["no-cache"]}(xe);ce.delete(K),Ae&&ce.put(K,xe.clone()),N(null,xe,Ae)}).catch(N)}).catch(N)}(xe,it):it(null,null),{cancel:function(){Oe=!0,Ae||ce.abort()}}}var en,Ge,at=function(S,N){if(!(/^file:/.test(K=S.url)||/^file:/.test(Ct())&&!/^\w+:/.test(K))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return dt(S,N);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",S,N,void 0,!0)}var K;return function(ce,xe){var Ae=new self.XMLHttpRequest;for(var Oe in Ae.open(ce.method||"GET",ce.url,!0),"arrayBuffer"===ce.type&&(Ae.responseType="arraybuffer"),ce.headers)Ae.setRequestHeader(Oe,ce.headers[Oe]);return"json"===ce.type&&(Ae.responseType="text",Ae.setRequestHeader("Accept","application/json")),Ae.withCredentials="include"===ce.credentials,Ae.onerror=function(){xe(new Error(Ae.statusText))},Ae.onload=function(){if((Ae.status>=200&&Ae.status<300||0===Ae.status)&&null!==Ae.response){var We=Ae.response;if("json"===ce.type)try{We=JSON.parse(Ae.response)}catch(it){return xe(it)}xe(null,We,Ae.getResponseHeader("Cache-Control"),Ae.getResponseHeader("Expires"))}else xe(new Ut(Ae.statusText,Ae.status,ce.url))},Ae.send(ce.body),{cancel:function(){return Ae.abort()}}}(S,N)},Nt=function(S,N){return at(c(S,{type:"arrayBuffer"}),N)},rn=function(S,N){return at(c(S,{method:"POST"}),N)};en=[],Ge=0;var Qe=function(S,N){if(ae.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),Ge>=W.MAX_PARALLEL_IMAGE_REQUESTS){var K={requestParameters:S,callback:N,cancelled:!1,cancel:function(){this.cancelled=!0}};return en.push(K),K}Ge++;var ce=!1,xe=function(){if(!ce)for(ce=!0,Ge--;en.length&&Ge<W.MAX_PARALLEL_IMAGE_REQUESTS;){var Oe=en.shift();Oe.cancelled||(Oe.cancel=Qe(Oe.requestParameters,Oe.callback).cancel)}},Ae=Nt(S,function(Oe,We,it,xt){var Yt,sn;xe(),Oe?N(Oe):We&&(bt()?(Yt=N,sn=new self.Blob([new Uint8Array(We)],{type:"image/png"}),self.createImageBitmap(sn).then(function(tn){Yt(null,tn)}).catch(function(tn){Yt(new Error("Could not load image because of "+tn.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Tt,Yt,sn,tn){var mn=new self.Image,Dn=self.URL;mn.onload=function(){Yt(null,mn),Dn.revokeObjectURL(mn.src)},mn.onerror=function(){return Yt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Bn=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});mn.cacheControl=sn,mn.expires=tn,mn.src=Tt.byteLength?Dn.createObjectURL(Bn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(We,N,it,xt))});return{cancel:function(){Ae.cancel(),xe()}}};function Rt(S,N,K){K[S]&&-1!==K[S].indexOf(N)||(K[S]=K[S]||[],K[S].push(N))}function gt(S,N,K){if(K&&K[S]){var ce=K[S].indexOf(N);-1!==ce&&K[S].splice(ce,1)}}var Be=function(S,N){void 0===N&&(N={}),c(this,N),this.type=S},Ve=function(S){function N(K,ce){void 0===ce&&(ce={}),S.call(this,"error",c({error:K},ce))}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N}(Be),Le=function(){};Le.prototype.on=function(S,N){return this._listeners=this._listeners||{},Rt(S,N,this._listeners),this},Le.prototype.off=function(S,N){return gt(S,N,this._listeners),gt(S,N,this._oneTimeListeners),this},Le.prototype.once=function(S,N){return this._oneTimeListeners=this._oneTimeListeners||{},Rt(S,N,this._oneTimeListeners),this},Le.prototype.fire=function(S,N){"string"==typeof S&&(S=new Be(S,N||{}));var K=S.type;if(this.listens(K)){S.target=this;for(var ce=0,xe=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];ce<xe.length;ce+=1)xe[ce].call(this,S);for(var Ae=0,Oe=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];Ae<Oe.length;Ae+=1){var We=Oe[Ae];gt(K,We,this._oneTimeListeners),We.call(this,S)}var it=this._eventedParent;it&&(c(S,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),it.fire(S))}else S instanceof Ve&&console.error(S.error);return this},Le.prototype.listens=function(S){return this._listeners&&this._listeners[S]&&this._listeners[S].length>0||this._oneTimeListeners&&this._oneTimeListeners[S]&&this._oneTimeListeners[S].length>0||this._eventedParent&&this._eventedParent.listens(S)},Le.prototype.setEventedParent=function(S,N){return this._eventedParent=S,this._eventedParentData=N,this};var je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ke=function(S,N,K,ce){this.message=(S?S+": ":"")+K,ce&&(this.identifier=ce),null!=N&&N.__line__&&(this.line=N.__line__)};function ft(S){var K=S.value;return K?[new Ke(S.key,K,"constants have been deprecated as of v8")]:[]}function mt(S){for(var N=[],K=arguments.length-1;K-- >0;)N[K]=arguments[K+1];for(var ce=0,xe=N;ce<xe.length;ce+=1){var Ae=xe[ce];for(var Oe in Ae)S[Oe]=Ae[Oe]}return S}function pt(S){return S instanceof Number||S instanceof String||S instanceof Boolean?S.valueOf():S}function Ot(S){if(Array.isArray(S))return S.map(Ot);if(S instanceof Object&&!(S instanceof Number||S instanceof String||S instanceof Boolean)){var N={};for(var K in S)N[K]=Ot(S[K]);return N}return pt(S)}var Pt=function(S){function N(K,ce){S.call(this,ce),this.message=ce,this.key=K}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N}(Error),Jt=function(S,N){void 0===N&&(N=[]),this.parent=S,this.bindings={};for(var K=0,ce=N;K<ce.length;K+=1){var xe=ce[K];this.bindings[xe[0]]=xe[1]}};Jt.prototype.concat=function(S){return new Jt(this,S)},Jt.prototype.get=function(S){if(this.bindings[S])return this.bindings[S];if(this.parent)return this.parent.get(S);throw new Error(S+" not found in scope.")},Jt.prototype.has=function(S){return!!this.bindings[S]||!!this.parent&&this.parent.has(S)};var $t={kind:"null"},ut={kind:"number"},Dt={kind:"string"},Wt={kind:"boolean"},zt={kind:"color"},Ht={kind:"object"},Ne={kind:"value"},ot={kind:"collator"},yt={kind:"formatted"},It={kind:"resolvedImage"};function Vt(S,N){return{kind:"array",itemType:S,N}}function ln(S){if("array"===S.kind){var N=ln(S.itemType);return"number"==typeof S.N?"array<"+N+", "+S.N+">":"value"===S.itemType.kind?"array":"array<"+N+">"}return S.kind}var un=[$t,ut,Dt,Wt,zt,yt,Ht,Vt(Ne),It];function an(S,N){if("error"===N.kind)return null;if("array"===S.kind){if("array"===N.kind&&(0===N.N&&"value"===N.itemType.kind||!an(S.itemType,N.itemType))&&("number"!=typeof S.N||S.N===N.N))return null}else{if(S.kind===N.kind)return null;if("value"===S.kind)for(var K=0,ce=un;K<ce.length;K+=1)if(!an(ce[K],N))return null}return"Expected "+ln(S)+" but found "+ln(N)+" instead."}function wn(S,N){return N.some(function(K){return K.kind===S.kind})}function Zn(S,N){return N.some(function(K){return"null"===K?null===S:"array"===K?Array.isArray(S):"object"===K?S&&!Array.isArray(S)&&"object"==typeof S:K===typeof S})}var An=o(function(S,N){var K={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(it){return(it=Math.round(it))<0?0:it>255?255:it}function Ae(it){return ce("%"===it[it.length-1]?parseFloat(it)/100*255:parseInt(it))}function Oe(it){return function xe(it){return it<0?0:it>1?1:it}("%"===it[it.length-1]?parseFloat(it)/100:parseFloat(it))}function We(it,xt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?it+(xt-it)*Tt*6:2*Tt<1?xt:3*Tt<2?it+(xt-it)*(2/3-Tt)*6:it}try{N.parseCSSColor=function(it){var xt,Tt=it.replace(/ /g,"").toLowerCase();if(Tt in K)return K[Tt].slice();if("#"===Tt[0])return 4===Tt.length?(xt=parseInt(Tt.substr(1),16))>=0&&xt<=4095?[(3840&xt)>>4|(3840&xt)>>8,240&xt|(240&xt)>>4,15&xt|(15&xt)<<4,1]:null:7===Tt.length&&(xt=parseInt(Tt.substr(1),16))>=0&&xt<=16777215?[(16711680&xt)>>16,(65280&xt)>>8,255&xt,1]:null;var Yt=Tt.indexOf("("),sn=Tt.indexOf(")");if(-1!==Yt&&sn+1===Tt.length){var tn=Tt.substr(0,Yt),mn=Tt.substr(Yt+1,sn-(Yt+1)).split(","),Dn=1;switch(tn){case"rgba":if(4!==mn.length)return null;Dn=Oe(mn.pop());case"rgb":return 3!==mn.length?null:[Ae(mn[0]),Ae(mn[1]),Ae(mn[2]),Dn];case"hsla":if(4!==mn.length)return null;Dn=Oe(mn.pop());case"hsl":if(3!==mn.length)return null;var Bn=(parseFloat(mn[0])%360+360)%360/360,Vn=Oe(mn[1]),er=Oe(mn[2]),ir=er<=.5?er*(Vn+1):er+Vn-er*Vn,hr=2*er-ir;return[ce(255*We(hr,ir,Bn+1/3)),ce(255*We(hr,ir,Bn)),ce(255*We(hr,ir,Bn-1/3)),Dn];default:return null}}return null}}catch(it){}}).parseCSSColor,hn=function(S,N,K,ce){void 0===ce&&(ce=1),this.r=S,this.g=N,this.b=K,this.a=ce};hn.parse=function(S){if(S){if(S instanceof hn)return S;if("string"==typeof S){var N=An(S);if(N)return new hn(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},hn.prototype.toString=function(){var S=this.toArray(),K=S[1],ce=S[2],xe=S[3];return"rgba("+Math.round(S[0])+","+Math.round(K)+","+Math.round(ce)+","+xe+")"},hn.prototype.toArray=function(){var ce=this.a;return 0===ce?[0,0,0,0]:[255*this.r/ce,255*this.g/ce,255*this.b/ce,ce]},hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1);var pn=function(S,N,K){this.sensitivity=S?N?"variant":"case":N?"accent":"base",this.locale=K,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};pn.prototype.compare=function(S,N){return this.collator.compare(S,N)},pn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var xn=function(S,N,K,ce,xe){this.text=S,this.image=N,this.scale=K,this.fontStack=ce,this.textColor=xe},En=function(S){this.sections=S};En.fromString=function(S){return new En([new xn(S,null,null,null,null)])},En.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(S){return 0!==S.text.length||S.image&&0!==S.image.name.length})},En.factory=function(S){return S instanceof En?S:En.fromString(S)},En.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(S){return S.text}).join("")},En.prototype.serialize=function(){for(var S=["format"],N=0,K=this.sections;N<K.length;N+=1){var ce=K[N];if(ce.image)S.push(["image",ce.image.name]);else{S.push(ce.text);var xe={};ce.fontStack&&(xe["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(xe["font-scale"]=ce.scale),ce.textColor&&(xe["text-color"]=["rgba"].concat(ce.textColor.toArray())),S.push(xe)}}return S};var In=function(S){this.name=S.name,this.available=S.available};function Yn(S,N,K,ce){return"number"==typeof S&&S>=0&&S<=255&&"number"==typeof N&&N>=0&&N<=255&&"number"==typeof K&&K>=0&&K<=255?void 0===ce||"number"==typeof ce&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[S,N,K,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ce?[S,N,K,ce]:[S,N,K]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function nr(S){if(null===S||"string"==typeof S||"boolean"==typeof S||"number"==typeof S||S instanceof hn||S instanceof pn||S instanceof En||S instanceof In)return!0;if(Array.isArray(S)){for(var N=0,K=S;N<K.length;N+=1)if(!nr(K[N]))return!1;return!0}if("object"==typeof S){for(var ce in S)if(!nr(S[ce]))return!1;return!0}return!1}function sr(S){if(null===S)return $t;if("string"==typeof S)return Dt;if("boolean"==typeof S)return Wt;if("number"==typeof S)return ut;if(S instanceof hn)return zt;if(S instanceof pn)return ot;if(S instanceof En)return yt;if(S instanceof In)return It;if(Array.isArray(S)){for(var N,K=S.length,ce=0,xe=S;ce<xe.length;ce+=1){var Ae=sr(xe[ce]);if(N){if(N===Ae)continue;N=Ne;break}N=Ae}return Vt(N||Ne,K)}return Ht}function Ar(S){var N=typeof S;return null===S?"":"string"===N||"number"===N||"boolean"===N?String(S):S instanceof hn||S instanceof En||S instanceof In?S.toString():JSON.stringify(S)}In.prototype.toString=function(){return this.name},In.fromString=function(S){return S?new In({name:S,available:!1}):null},In.prototype.serialize=function(){return["image",this.name]};var yr=function(S,N){this.type=S,this.value=N};yr.parse=function(S,N){if(2!==S.length)return N.error("'literal' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(!nr(S[1]))return N.error("invalid value");var K=S[1],ce=sr(K),xe=N.expectedType;return"array"!==ce.kind||0!==ce.N||!xe||"array"!==xe.kind||"number"==typeof xe.N&&0!==xe.N||(ce=xe),new yr(ce,K)},yr.prototype.evaluate=function(){return this.value},yr.prototype.eachChild=function(){},yr.prototype.outputDefined=function(){return!0},yr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof En?this.value.serialize():this.value};var Pr=function(S){this.name="ExpressionEvaluationError",this.message=S};Pr.prototype.toJSON=function(){return this.message};var Wr={string:Dt,number:ut,boolean:Wt,object:Ht},lr=function(S,N){this.type=S,this.args=N};lr.parse=function(S,N){if(S.length<2)return N.error("Expected at least one argument.");var K,ce=1,xe=S[0];if("array"===xe){var Ae,Oe;if(S.length>2){var We=S[1];if("string"!=typeof We||!(We in Wr)||"object"===We)return N.error('The item type argument of "array" must be one of string, number, boolean',1);Ae=Wr[We],ce++}else Ae=Ne;if(S.length>3){if(null!==S[2]&&("number"!=typeof S[2]||S[2]<0||S[2]!==Math.floor(S[2])))return N.error('The length argument to "array" must be a positive integer literal',2);Oe=S[2],ce++}K=Vt(Ae,Oe)}else K=Wr[xe];for(var it=[];ce<S.length;ce++){var xt=N.parse(S[ce],ce,Ne);if(!xt)return null;it.push(xt)}return new lr(K,it)},lr.prototype.evaluate=function(S){for(var N=0;N<this.args.length;N++){var K=this.args[N].evaluate(S);if(!an(this.type,sr(K)))return K;if(N===this.args.length-1)throw new Pr("Expected value to be of type "+ln(this.type)+", but found "+ln(sr(K))+" instead.")}return null},lr.prototype.eachChild=function(S){this.args.forEach(S)},lr.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},lr.prototype.serialize=function(){var S=this.type,N=[S.kind];if("array"===S.kind){var K=S.itemType;if("string"===K.kind||"number"===K.kind||"boolean"===K.kind){N.push(K.kind);var ce=S.N;("number"==typeof ce||this.args.length>1)&&N.push(ce)}}return N.concat(this.args.map(function(xe){return xe.serialize()}))};var Hn=function(S){this.type=yt,this.sections=S};Hn.parse=function(S,N){if(S.length<2)return N.error("Expected at least one argument.");var K=S[1];if(!Array.isArray(K)&&"object"==typeof K)return N.error("First argument must be an image or text section.");for(var ce=[],xe=!1,Ae=1;Ae<=S.length-1;++Ae){var Oe=S[Ae];if(xe&&"object"==typeof Oe&&!Array.isArray(Oe)){xe=!1;var We=null;if(Oe["font-scale"]&&!(We=N.parse(Oe["font-scale"],1,ut)))return null;var it=null;if(Oe["text-font"]&&!(it=N.parse(Oe["text-font"],1,Vt(Dt))))return null;var xt=null;if(Oe["text-color"]&&!(xt=N.parse(Oe["text-color"],1,zt)))return null;var Tt=ce[ce.length-1];Tt.scale=We,Tt.font=it,Tt.textColor=xt}else{var Yt=N.parse(S[Ae],1,Ne);if(!Yt)return null;var sn=Yt.type.kind;if("string"!==sn&&"value"!==sn&&"null"!==sn&&"resolvedImage"!==sn)return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,ce.push({content:Yt,scale:null,font:null,textColor:null})}}return new Hn(ce)},Hn.prototype.evaluate=function(S){return new En(this.sections.map(function(N){var K=N.content.evaluate(S);return sr(K)===It?new xn("",K,null,null,null):new xn(Ar(K),null,N.scale?N.scale.evaluate(S):null,N.font?N.font.evaluate(S).join(","):null,N.textColor?N.textColor.evaluate(S):null)}))},Hn.prototype.eachChild=function(S){for(var N=0,K=this.sections;N<K.length;N+=1){var ce=K[N];S(ce.content),ce.scale&&S(ce.scale),ce.font&&S(ce.font),ce.textColor&&S(ce.textColor)}},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){for(var S=["format"],N=0,K=this.sections;N<K.length;N+=1){var ce=K[N];S.push(ce.content.serialize());var xe={};ce.scale&&(xe["font-scale"]=ce.scale.serialize()),ce.font&&(xe["text-font"]=ce.font.serialize()),ce.textColor&&(xe["text-color"]=ce.textColor.serialize()),S.push(xe)}return S};var Sr=function(S){this.type=It,this.input=S};Sr.parse=function(S,N){if(2!==S.length)return N.error("Expected two arguments.");var K=N.parse(S[1],1,Dt);return K?new Sr(K):N.error("No image name provided.")},Sr.prototype.evaluate=function(S){var N=this.input.evaluate(S),K=In.fromString(N);return K&&S.availableImages&&(K.available=S.availableImages.indexOf(N)>-1),K},Sr.prototype.eachChild=function(S){S(this.input)},Sr.prototype.outputDefined=function(){return!1},Sr.prototype.serialize=function(){return["image",this.input.serialize()]};var ti={"to-boolean":Wt,"to-color":zt,"to-number":ut,"to-string":Dt},Fn=function(S,N){this.type=S,this.args=N};Fn.parse=function(S,N){if(S.length<2)return N.error("Expected at least one argument.");var K=S[0];if(("to-boolean"===K||"to-string"===K)&&2!==S.length)return N.error("Expected one argument.");for(var ce=ti[K],xe=[],Ae=1;Ae<S.length;Ae++){var Oe=N.parse(S[Ae],Ae,Ne);if(!Oe)return null;xe.push(Oe)}return new Fn(ce,xe)},Fn.prototype.evaluate=function(S){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(S));if("color"===this.type.kind){for(var N,K,ce=0,xe=this.args;ce<xe.length;ce+=1){if(K=null,(N=xe[ce].evaluate(S))instanceof hn)return N;if("string"==typeof N){var Ae=S.parseColor(N);if(Ae)return Ae}else if(Array.isArray(N)&&!(K=N.length<3||N.length>4?"Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":Yn(N[0],N[1],N[2],N[3])))return new hn(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Pr(K||"Could not parse color from value '"+("string"==typeof N?N:String(JSON.stringify(N)))+"'")}if("number"===this.type.kind){for(var Oe=null,We=0,it=this.args;We<it.length;We+=1){if(null===(Oe=it[We].evaluate(S)))return 0;var xt=Number(Oe);if(!isNaN(xt))return xt}throw new Pr("Could not convert "+JSON.stringify(Oe)+" to number.")}return"formatted"===this.type.kind?En.fromString(Ar(this.args[0].evaluate(S))):"resolvedImage"===this.type.kind?In.fromString(Ar(this.args[0].evaluate(S))):Ar(this.args[0].evaluate(S))},Fn.prototype.eachChild=function(S){this.args.forEach(S)},Fn.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Fn.prototype.serialize=function(){if("formatted"===this.type.kind)return new Hn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Sr(this.args[0]).serialize();var S=["to-"+this.type.kind];return this.eachChild(function(N){S.push(N.serialize())}),S};var br=["Unknown","Point","LineString","Polygon"],xr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};xr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},xr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?br[this.feature.type]:this.feature.type:null},xr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},xr.prototype.canonicalID=function(){return this.canonical},xr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},xr.prototype.parseColor=function(S){var N=this._parseColorCache[S];return N||(N=this._parseColorCache[S]=hn.parse(S)),N};var Kn=function(S,N,K,ce){this.name=S,this.type=N,this._evaluate=K,this.args=ce};Kn.prototype.evaluate=function(S){return this._evaluate(S,this.args)},Kn.prototype.eachChild=function(S){this.args.forEach(S)},Kn.prototype.outputDefined=function(){return!1},Kn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(S){return S.serialize()}))},Kn.parse=function(S,N){var K,ce=S[0],xe=Kn.definitions[ce];if(!xe)return N.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ae=Array.isArray(xe)?xe[0]:xe.type,Oe=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,We=Oe.filter(function($r){var ui=$r[0];return!Array.isArray(ui)||ui.length===S.length-1}),it=null,xt=0,Tt=We;xt<Tt.length;xt+=1){var Yt=Tt[xt],sn=Yt[0],tn=Yt[1];it=new vr(N.registry,N.path,null,N.scope);for(var mn=[],Dn=!1,Bn=1;Bn<S.length;Bn++){var Vn=S[Bn],er=Array.isArray(sn)?sn[Bn-1]:sn.type,ir=it.parse(Vn,1+mn.length,er);if(!ir){Dn=!0;break}mn.push(ir)}if(!Dn)if(Array.isArray(sn)&&sn.length!==mn.length)it.error("Expected "+sn.length+" arguments, but found "+mn.length+" instead.");else{for(var hr=0;hr<mn.length;hr++){var Ir=Array.isArray(sn)?sn[hr]:sn.type,Vr=mn[hr];it.concat(hr+1).checkSubtype(Ir,Vr.type)}if(0===it.errors.length)return new Kn(ce,Ae,tn,mn)}}if(1===We.length)(K=N.errors).push.apply(K,it.errors);else{for(var si=(We.length?We:Oe).map(function($r){var ui;return ui=$r[0],Array.isArray(ui)?"("+ui.map(ln).join(", ")+")":"("+ln(ui.type)+"...)"}).join(" | "),oi=[],yi=1;yi<S.length;yi++){var Li=N.parse(S[yi],1+oi.length);if(!Li)return null;oi.push(ln(Li.type))}N.error("Expected arguments of type "+si+", but found ("+oi.join(", ")+") instead.")}return null},Kn.register=function(S,N){for(var K in Kn.definitions=N,N)S[K]=Kn};var Qr=function(S,N,K){this.type=ot,this.locale=K,this.caseSensitive=S,this.diacriticSensitive=N};function ci(S,N){S[0]=Math.min(S[0],N[0]),S[1]=Math.min(S[1],N[1]),S[2]=Math.max(S[2],N[0]),S[3]=Math.max(S[3],N[1])}function Or(S,N){return!(S[0]<=N[0]||S[2]>=N[2]||S[1]<=N[1]||S[3]>=N[3])}function li(S,N){var ce=(180+S[0])/360,xe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S[1]*Math.PI/360)))/360,Ae=Math.pow(2,N.z);return[Math.round(ce*Ae*8192),Math.round(xe*Ae*8192)]}function di(S,N,K){return N[1]>S[1]!=K[1]>S[1]&&S[0]<(K[0]-N[0])*(S[1]-N[1])/(K[1]-N[1])+N[0]}function Tn(S,N){for(var K,ce,xe,Ae,Oe,We,it,xt=!1,Tt=0,Yt=N.length;Tt<Yt;Tt++)for(var sn=N[Tt],tn=0,mn=sn.length;tn<mn-1;tn++){if(void 0,void 0,void 0,void 0,(Ae=(K=S)[0]-(ce=sn[tn])[0])*(it=K[1]-(xe=sn[tn+1])[1])-(We=K[0]-xe[0])*(Oe=K[1]-ce[1])==0&&Ae*We<=0&&Oe*it<=0)return!1;di(S,sn[tn],sn[tn+1])&&(xt=!xt)}return xt}function tr(S,N){for(var K=0;K<N.length;K++)if(Tn(S,N[K]))return!0;return!1}function Zt(S,N,K,ce){var it=ce[0]-K[0],xt=ce[1]-K[1],Tt=(S[0]-K[0])*xt-it*(S[1]-K[1]),Yt=(N[0]-K[0])*xt-it*(N[1]-K[1]);return Tt>0&&Yt<0||Tt<0&&Yt>0}function yn(S,N,K){for(var ce=0,xe=K;ce<xe.length;ce+=1)for(var Ae=xe[ce],Oe=0;Oe<Ae.length-1;++Oe)if(void 0,void 0,(Yt=[(Tt=Ae[Oe+1])[0]-(xt=Ae[Oe])[0],Tt[1]-xt[1]])[0]*(sn=[(it=N)[0]-(We=S)[0],it[1]-We[1]])[1]-Yt[1]*sn[0]!=0&&Zt(We,it,xt,Tt)&&Zt(xt,Tt,We,it))return!0;var We,it,xt,Tt,Yt,sn;return!1}function Cn(S,N){for(var K=0;K<S.length;++K)if(!Tn(S[K],N))return!1;for(var ce=0;ce<S.length-1;++ce)if(yn(S[ce],S[ce+1],N))return!1;return!0}function rr(S,N){for(var K=0;K<N.length;K++)if(Cn(S,N[K]))return!0;return!1}function Qn(S,N,K){for(var ce=[],xe=0;xe<S.length;xe++){for(var Ae=[],Oe=0;Oe<S[xe].length;Oe++){var We=li(S[xe][Oe],K);ci(N,We),Ae.push(We)}ce.push(Ae)}return ce}function Jn(S,N,K){for(var ce=[],xe=0;xe<S.length;xe++){var Ae=Qn(S[xe],N,K);ce.push(Ae)}return ce}function Wn(S,N,K,ce){if(S[0]<K[0]||S[0]>K[2]){var xe=.5*ce,Ae=S[0]-K[0]>xe?-ce:K[0]-S[0]>xe?ce:0;0===Ae&&(Ae=S[0]-K[2]>xe?-ce:K[2]-S[0]>xe?ce:0),S[0]+=Ae}ci(N,S)}function On(S,N,K,ce){for(var xe=8192*Math.pow(2,ce.z),Ae=[8192*ce.x,8192*ce.y],Oe=[],We=0,it=S;We<it.length;We+=1)for(var xt=0,Tt=it[We];xt<Tt.length;xt+=1){var Yt=Tt[xt],sn=[Yt.x+Ae[0],Yt.y+Ae[1]];Wn(sn,N,K,xe),Oe.push(sn)}return Oe}function zn(S,N,K,ce){for(var xe,Ae=8192*Math.pow(2,ce.z),Oe=[8192*ce.x,8192*ce.y],We=[],it=0,xt=S;it<xt.length;it+=1){for(var Tt=[],Yt=0,sn=xt[it];Yt<sn.length;Yt+=1){var tn=sn[Yt],mn=[tn.x+Oe[0],tn.y+Oe[1]];ci(N,mn),Tt.push(mn)}We.push(Tt)}if(N[2]-N[0]<=Ae/2){(xe=N)[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0;for(var Dn=0,Bn=We;Dn<Bn.length;Dn+=1)for(var Vn=0,er=Bn[Dn];Vn<er.length;Vn+=1)Wn(er[Vn],N,K,Ae)}return We}Qr.parse=function(S,N){if(2!==S.length)return N.error("Expected one argument.");var K=S[1];if("object"!=typeof K||Array.isArray(K))return N.error("Collator options argument must be an object.");var ce=N.parse(void 0!==K["case-sensitive"]&&K["case-sensitive"],1,Wt);if(!ce)return null;var xe=N.parse(void 0!==K["diacritic-sensitive"]&&K["diacritic-sensitive"],1,Wt);if(!xe)return null;var Ae=null;return K.locale&&!(Ae=N.parse(K.locale,1,Dt))?null:new Qr(ce,xe,Ae)},Qr.prototype.evaluate=function(S){return new pn(this.caseSensitive.evaluate(S),this.diacriticSensitive.evaluate(S),this.locale?this.locale.evaluate(S):null)},Qr.prototype.eachChild=function(S){S(this.caseSensitive),S(this.diacriticSensitive),this.locale&&S(this.locale)},Qr.prototype.outputDefined=function(){return!1},Qr.prototype.serialize=function(){var S={};return S["case-sensitive"]=this.caseSensitive.serialize(),S["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(S.locale=this.locale.serialize()),["collator",S]};var Rn=function(S,N){this.type=Wt,this.geojson=S,this.geometries=N};function Gn(S){if(S instanceof Kn&&("get"===S.name&&1===S.args.length||"feature-state"===S.name||"has"===S.name&&1===S.args.length||"properties"===S.name||"geometry-type"===S.name||"id"===S.name||/^filter-/.test(S.name))||S instanceof Rn)return!1;var N=!0;return S.eachChild(function(K){N&&!Gn(K)&&(N=!1)}),N}function fr(S){if(S instanceof Kn&&"feature-state"===S.name)return!1;var N=!0;return S.eachChild(function(K){N&&!fr(K)&&(N=!1)}),N}function ur(S,N){if(S instanceof Kn&&N.indexOf(S.name)>=0)return!1;var K=!0;return S.eachChild(function(ce){K&&!ur(ce,N)&&(K=!1)}),K}Rn.parse=function(S,N){if(2!==S.length)return N.error("'within' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(nr(S[1])){var K=S[1];if("FeatureCollection"===K.type)for(var ce=0;ce<K.features.length;++ce){var xe=K.features[ce].geometry.type;if("Polygon"===xe||"MultiPolygon"===xe)return new Rn(K,K.features[ce].geometry)}else if("Feature"===K.type){var Ae=K.geometry.type;if("Polygon"===Ae||"MultiPolygon"===Ae)return new Rn(K,K.geometry)}else if("Polygon"===K.type||"MultiPolygon"===K.type)return new Rn(K,K)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Rn.prototype.evaluate=function(S){if(null!=S.geometry()&&null!=S.canonicalID()){if("Point"===S.geometryType())return function(N,K){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Ae=N.canonicalID();if("Polygon"===K.type){var Oe=Qn(K.coordinates,xe,Ae),We=On(N.geometry(),ce,xe,Ae);if(!Or(ce,xe))return!1;for(var it=0,xt=We;it<xt.length;it+=1)if(!Tn(xt[it],Oe))return!1}if("MultiPolygon"===K.type){var Tt=Jn(K.coordinates,xe,Ae),Yt=On(N.geometry(),ce,xe,Ae);if(!Or(ce,xe))return!1;for(var sn=0,tn=Yt;sn<tn.length;sn+=1)if(!tr(tn[sn],Tt))return!1}return!0}(S,this.geometries);if("LineString"===S.geometryType())return function(N,K){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Ae=N.canonicalID();if("Polygon"===K.type){var Oe=Qn(K.coordinates,xe,Ae),We=zn(N.geometry(),ce,xe,Ae);if(!Or(ce,xe))return!1;for(var it=0,xt=We;it<xt.length;it+=1)if(!Cn(xt[it],Oe))return!1}if("MultiPolygon"===K.type){var Tt=Jn(K.coordinates,xe,Ae),Yt=zn(N.geometry(),ce,xe,Ae);if(!Or(ce,xe))return!1;for(var sn=0,tn=Yt;sn<tn.length;sn+=1)if(!rr(tn[sn],Tt))return!1}return!0}(S,this.geometries)}return!1},Rn.prototype.eachChild=function(){},Rn.prototype.outputDefined=function(){return!0},Rn.prototype.serialize=function(){return["within",this.geojson]};var Mr=function(S,N){this.type=N.type,this.name=S,this.boundExpression=N};Mr.parse=function(S,N){if(2!==S.length||"string"!=typeof S[1])return N.error("'var' expression requires exactly one string literal argument.");var K=S[1];return N.scope.has(K)?new Mr(K,N.scope.get(K)):N.error('Unknown variable "'+K+'". Make sure "'+K+'" has been bound in an enclosing "let" expression before using it.',1)},Mr.prototype.evaluate=function(S){return this.boundExpression.evaluate(S)},Mr.prototype.eachChild=function(){},Mr.prototype.outputDefined=function(){return!1},Mr.prototype.serialize=function(){return["var",this.name]};var vr=function(S,N,K,ce,xe){void 0===N&&(N=[]),void 0===ce&&(ce=new Jt),void 0===xe&&(xe=[]),this.registry=S,this.path=N,this.key=N.map(function(Ae){return"["+Ae+"]"}).join(""),this.scope=ce,this.errors=xe,this.expectedType=K};function zr(S,N){for(var K,xe=S.length-1,Ae=0,Oe=xe,We=0;Ae<=Oe;)if((K=S[We=Math.floor((Ae+Oe)/2)])<=N){if(We===xe||N<S[We+1])return We;Ae=We+1}else{if(!(K>N))throw new Pr("Input is not a number.");Oe=We-1}return 0}vr.prototype.parse=function(S,N,K,ce,xe){return void 0===xe&&(xe={}),N?this.concat(N,K,ce)._parse(S,xe):this._parse(S,xe)},vr.prototype._parse=function(S,N){function K(xt,Tt,Yt){return"assert"===Yt?new lr(Tt,[xt]):"coerce"===Yt?new Fn(Tt,[xt]):xt}if(null!==S&&"string"!=typeof S&&"boolean"!=typeof S&&"number"!=typeof S||(S=["literal",S]),Array.isArray(S)){if(0===S.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=S[0];if("string"!=typeof ce)return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[ce];if(xe){var Ae=xe.parse(S,this);if(!Ae)return null;if(this.expectedType){var Oe=this.expectedType,We=Ae.type;if("string"!==Oe.kind&&"number"!==Oe.kind&&"boolean"!==Oe.kind&&"object"!==Oe.kind&&"array"!==Oe.kind||"value"!==We.kind)if("color"!==Oe.kind&&"formatted"!==Oe.kind&&"resolvedImage"!==Oe.kind||"value"!==We.kind&&"string"!==We.kind){if(this.checkSubtype(Oe,We))return null}else Ae=K(Ae,Oe,N.typeAnnotation||"coerce");else Ae=K(Ae,Oe,N.typeAnnotation||"assert")}if(!(Ae instanceof yr)&&"resolvedImage"!==Ae.type.kind&&function xt(Tt){if(Tt instanceof Mr)return xt(Tt.boundExpression);if(Tt instanceof Kn&&"error"===Tt.name||Tt instanceof Qr||Tt instanceof Rn)return!1;var Yt=Tt instanceof Fn||Tt instanceof lr,sn=!0;return Tt.eachChild(function(tn){sn=Yt?sn&&xt(tn):sn&&tn instanceof yr}),!!sn&&Gn(Tt)&&ur(Tt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Ae)){var it=new xr;try{Ae=new yr(Ae.type,Ae.evaluate(it))}catch(xt){return this.error(xt.message),null}}return Ae}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===S?"'undefined' value invalid. Use null instead.":"object"==typeof S?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof S+" instead.")},vr.prototype.concat=function(S,N,K){var ce="number"==typeof S?this.path.concat(S):this.path,xe=K?this.scope.concat(K):this.scope;return new vr(this.registry,ce,N||null,xe,this.errors)},vr.prototype.error=function(S){for(var N=[],K=arguments.length-1;K-- >0;)N[K]=arguments[K+1];var ce=""+this.key+N.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new Pt(ce,S))},vr.prototype.checkSubtype=function(S,N){var K=an(S,N);return K&&this.error(K),K};var Br=function(S,N,K){this.type=S,this.input=N,this.labels=[],this.outputs=[];for(var ce=0,xe=K;ce<xe.length;ce+=1){var Ae=xe[ce],We=Ae[1];this.labels.push(Ae[0]),this.outputs.push(We)}};function or(S,N,K){return S*(1-K)+N*K}Br.parse=function(S,N){if(S.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return N.error("Expected an even number of arguments.");var K=N.parse(S[1],1,ut);if(!K)return null;var ce=[],xe=null;N.expectedType&&"value"!==N.expectedType.kind&&(xe=N.expectedType);for(var Ae=1;Ae<S.length;Ae+=2){var Oe=1===Ae?-1/0:S[Ae],We=S[Ae+1],it=Ae,xt=Ae+1;if("number"!=typeof Oe)return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',it);if(ce.length&&ce[ce.length-1][0]>=Oe)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',it);var Tt=N.parse(We,xt,xe);if(!Tt)return null;xe=xe||Tt.type,ce.push([Oe,Tt])}return new Br(xe,K,ce)},Br.prototype.evaluate=function(S){var N=this.labels,K=this.outputs;if(1===N.length)return K[0].evaluate(S);var ce=this.input.evaluate(S);if(ce<=N[0])return K[0].evaluate(S);var xe=N.length;return ce>=N[xe-1]?K[xe-1].evaluate(S):K[zr(N,ce)].evaluate(S)},Br.prototype.eachChild=function(S){S(this.input);for(var N=0,K=this.outputs;N<K.length;N+=1)S(K[N])},Br.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},Br.prototype.serialize=function(){for(var S=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&S.push(this.labels[N]),S.push(this.outputs[N].serialize());return S};var Ur=Object.freeze({__proto__:null,number:or,color:function(S,N,K){return new hn(or(S.r,N.r,K),or(S.g,N.g,K),or(S.b,N.b,K),or(S.a,N.a,K))},array:function(S,N,K){return S.map(function(ce,xe){return or(ce,N[xe],K)})}}),Zr=6/29,mi=3*Zr*Zr,Zi=Math.PI/180,Vi=180/Math.PI;function qr(S){return S>.008856451679035631?Math.pow(S,1/3):S/mi+4/29}function wi(S){return S>Zr?S*S*S:mi*(S-4/29)}function vi(S){return 255*(S<=.0031308?12.92*S:1.055*Math.pow(S,1/2.4)-.055)}function ma(S){return(S/=255)<=.04045?S/12.92:Math.pow((S+.055)/1.055,2.4)}function $a(S){var N=ma(S.r),K=ma(S.g),ce=ma(S.b),xe=qr((.4124564*N+.3575761*K+.1804375*ce)/.95047),Ae=qr((.2126729*N+.7151522*K+.072175*ce)/1);return{l:116*Ae-16,a:500*(xe-Ae),b:200*(Ae-qr((.0193339*N+.119192*K+.9503041*ce)/1.08883)),alpha:S.a}}function Na(S){var N=(S.l+16)/116,K=isNaN(S.a)?N:N+S.a/500,ce=isNaN(S.b)?N:N-S.b/200;return N=1*wi(N),K=.95047*wi(K),ce=1.08883*wi(ce),new hn(vi(3.2404542*K-1.5371385*N-.4985314*ce),vi(-.969266*K+1.8760108*N+.041556*ce),vi(.0556434*K-.2040259*N+1.0572252*ce),S.alpha)}function ys(S,N,K){var ce=N-S;return S+K*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var pa={forward:$a,reverse:Na,interpolate:function(S,N,K){return{l:or(S.l,N.l,K),a:or(S.a,N.a,K),b:or(S.b,N.b,K),alpha:or(S.alpha,N.alpha,K)}}},ei={forward:function(S){var N=$a(S),K=N.l,ce=N.a,xe=N.b,Ae=Math.atan2(xe,ce)*Vi;return{h:Ae<0?Ae+360:Ae,c:Math.sqrt(ce*ce+xe*xe),l:K,alpha:S.a}},reverse:function(S){var N=S.h*Zi,K=S.c;return Na({l:S.l,a:Math.cos(N)*K,b:Math.sin(N)*K,alpha:S.alpha})},interpolate:function(S,N,K){return{h:ys(S.h,N.h,K),c:or(S.c,N.c,K),l:or(S.l,N.l,K),alpha:or(S.alpha,N.alpha,K)}}},Ki=Object.freeze({__proto__:null,lab:pa,hcl:ei}),Ui=function(S,N,K,ce,xe){this.type=S,this.operator=N,this.interpolation=K,this.input=ce,this.labels=[],this.outputs=[];for(var Ae=0,Oe=xe;Ae<Oe.length;Ae+=1){var We=Oe[Ae],xt=We[1];this.labels.push(We[0]),this.outputs.push(xt)}};function so(S,N,K,ce){var xe=ce-K,Ae=S-K;return 0===xe?0:1===N?Ae/xe:(Math.pow(N,Ae)-1)/(Math.pow(N,xe)-1)}Ui.interpolationFactor=function(S,N,K,ce){var xe=0;if("exponential"===S.name)xe=so(N,S.base,K,ce);else if("linear"===S.name)xe=so(N,1,K,ce);else if("cubic-bezier"===S.name){var Ae=S.controlPoints;xe=new i(Ae[0],Ae[1],Ae[2],Ae[3]).solve(so(N,1,K,ce))}return xe},Ui.parse=function(S,N){var K=S[0],ce=S[1],xe=S[2],Ae=S.slice(3);if(!Array.isArray(ce)||0===ce.length)return N.error("Expected an interpolation type expression.",1);if("linear"===ce[0])ce={name:"linear"};else if("exponential"===ce[0]){var Oe=ce[1];if("number"!=typeof Oe)return N.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:Oe}}else{if("cubic-bezier"!==ce[0])return N.error("Unknown interpolation type "+String(ce[0]),1,0);var We=ce.slice(1);if(4!==We.length||We.some(function(Bn){return"number"!=typeof Bn||Bn<0||Bn>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:We}}if(S.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return N.error("Expected an even number of arguments.");if(!(xe=N.parse(xe,2,ut)))return null;var it=[],xt=null;"interpolate-hcl"===K||"interpolate-lab"===K?xt=zt:N.expectedType&&"value"!==N.expectedType.kind&&(xt=N.expectedType);for(var Tt=0;Tt<Ae.length;Tt+=2){var Yt=Ae[Tt],sn=Ae[Tt+1],tn=Tt+3,mn=Tt+4;if("number"!=typeof Yt)return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tn);if(it.length&&it[it.length-1][0]>=Yt)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',tn);var Dn=N.parse(sn,mn,xt);if(!Dn)return null;xt=xt||Dn.type,it.push([Yt,Dn])}return"number"===xt.kind||"color"===xt.kind||"array"===xt.kind&&"number"===xt.itemType.kind&&"number"==typeof xt.N?new Ui(xt,K,ce,xe,it):N.error("Type "+ln(xt)+" is not interpolatable.")},Ui.prototype.evaluate=function(S){var N=this.labels,K=this.outputs;if(1===N.length)return K[0].evaluate(S);var ce=this.input.evaluate(S);if(ce<=N[0])return K[0].evaluate(S);var xe=N.length;if(ce>=N[xe-1])return K[xe-1].evaluate(S);var Ae=zr(N,ce),it=Ui.interpolationFactor(this.interpolation,ce,N[Ae],N[Ae+1]),xt=K[Ae].evaluate(S),Tt=K[Ae+1].evaluate(S);return"interpolate"===this.operator?Ur[this.type.kind.toLowerCase()](xt,Tt,it):"interpolate-hcl"===this.operator?ei.reverse(ei.interpolate(ei.forward(xt),ei.forward(Tt),it)):pa.reverse(pa.interpolate(pa.forward(xt),pa.forward(Tt),it))},Ui.prototype.eachChild=function(S){S(this.input);for(var N=0,K=this.outputs;N<K.length;N+=1)S(K[N])},Ui.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},Ui.prototype.serialize=function(){var S;S="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,S,this.input.serialize()],K=0;K<this.labels.length;K++)N.push(this.labels[K],this.outputs[K].serialize());return N};var Vo=function(S,N){this.type=S,this.args=N};Vo.parse=function(S,N){if(S.length<2)return N.error("Expectected at least one argument.");var K=null,ce=N.expectedType;ce&&"value"!==ce.kind&&(K=ce);for(var xe=[],Ae=0,Oe=S.slice(1);Ae<Oe.length;Ae+=1){var it=N.parse(Oe[Ae],1+xe.length,K,void 0,{typeAnnotation:"omit"});if(!it)return null;K=K||it.type,xe.push(it)}var xt=ce&&xe.some(function(Tt){return an(ce,Tt.type)});return new Vo(xt?Ne:K,xe)},Vo.prototype.evaluate=function(S){for(var N,K=null,ce=0,xe=0,Ae=this.args;xe<Ae.length&&(ce++,(K=Ae[xe].evaluate(S))&&K instanceof In&&!K.available&&(N||(N=K.name),K=null,ce===this.args.length&&(K=N)),null===K);xe+=1);return K},Vo.prototype.eachChild=function(S){this.args.forEach(S)},Vo.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Vo.prototype.serialize=function(){var S=["coalesce"];return this.eachChild(function(N){S.push(N.serialize())}),S};var Ea=function(S,N){this.type=N.type,this.bindings=[].concat(S),this.result=N};Ea.prototype.evaluate=function(S){return this.result.evaluate(S)},Ea.prototype.eachChild=function(S){for(var N=0,K=this.bindings;N<K.length;N+=1)S(K[N][1]);S(this.result)},Ea.parse=function(S,N){if(S.length<4)return N.error("Expected at least 3 arguments, but found "+(S.length-1)+" instead.");for(var K=[],ce=1;ce<S.length-1;ce+=2){var xe=S[ce];if("string"!=typeof xe)return N.error("Expected string, but found "+typeof xe+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(xe))return N.error("Variable names must contain only alphanumeric characters or '_'.",ce);var Ae=N.parse(S[ce+1],ce+1);if(!Ae)return null;K.push([xe,Ae])}var Oe=N.parse(S[S.length-1],S.length-1,N.expectedType,K);return Oe?new Ea(K,Oe):null},Ea.prototype.outputDefined=function(){return this.result.outputDefined()},Ea.prototype.serialize=function(){for(var S=["let"],N=0,K=this.bindings;N<K.length;N+=1){var ce=K[N];S.push(ce[0],ce[1].serialize())}return S.push(this.result.serialize()),S};var Do=function(S,N,K){this.type=S,this.index=N,this.input=K};Do.parse=function(S,N){if(3!==S.length)return N.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var K=N.parse(S[1],1,ut),ce=N.parse(S[2],2,Vt(N.expectedType||Ne));return K&&ce?new Do(ce.type.itemType,K,ce):null},Do.prototype.evaluate=function(S){var N=this.index.evaluate(S),K=this.input.evaluate(S);if(N<0)throw new Pr("Array index out of bounds: "+N+" < 0.");if(N>=K.length)throw new Pr("Array index out of bounds: "+N+" > "+(K.length-1)+".");if(N!==Math.floor(N))throw new Pr("Array index must be an integer, but found "+N+" instead.");return K[N]},Do.prototype.eachChild=function(S){S(this.index),S(this.input)},Do.prototype.outputDefined=function(){return!1},Do.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ba=function(S,N){this.type=Wt,this.needle=S,this.haystack=N};Ba.parse=function(S,N){if(3!==S.length)return N.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var K=N.parse(S[1],1,Ne),ce=N.parse(S[2],2,Ne);return K&&ce?wn(K.type,[Wt,Dt,ut,$t,Ne])?new Ba(K,ce):N.error("Expected first argument to be of type boolean, string, number or null, but found "+ln(K.type)+" instead"):null},Ba.prototype.evaluate=function(S){var N=this.needle.evaluate(S),K=this.haystack.evaluate(S);if(!K)return!1;if(!Zn(N,["boolean","string","number","null"]))throw new Pr("Expected first argument to be of type boolean, string, number or null, but found "+ln(sr(N))+" instead.");if(!Zn(K,["string","array"]))throw new Pr("Expected second argument to be of type array or string, but found "+ln(sr(K))+" instead.");return K.indexOf(N)>=0},Ba.prototype.eachChild=function(S){S(this.needle),S(this.haystack)},Ba.prototype.outputDefined=function(){return!0},Ba.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ts=function(S,N,K){this.type=ut,this.needle=S,this.haystack=N,this.fromIndex=K};ts.parse=function(S,N){if(S.length<=2||S.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var K=N.parse(S[1],1,Ne),ce=N.parse(S[2],2,Ne);if(!K||!ce)return null;if(!wn(K.type,[Wt,Dt,ut,$t,Ne]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+ln(K.type)+" instead");if(4===S.length){var xe=N.parse(S[3],3,ut);return xe?new ts(K,ce,xe):null}return new ts(K,ce)},ts.prototype.evaluate=function(S){var N=this.needle.evaluate(S),K=this.haystack.evaluate(S);if(!Zn(N,["boolean","string","number","null"]))throw new Pr("Expected first argument to be of type boolean, string, number or null, but found "+ln(sr(N))+" instead.");if(!Zn(K,["string","array"]))throw new Pr("Expected second argument to be of type array or string, but found "+ln(sr(K))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(S);return K.indexOf(N,ce)}return K.indexOf(N)},ts.prototype.eachChild=function(S){S(this.needle),S(this.haystack),this.fromIndex&&S(this.fromIndex)},ts.prototype.outputDefined=function(){return!1},ts.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var S=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),S]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var go=function(S,N,K,ce,xe,Ae){this.inputType=S,this.type=N,this.input=K,this.cases=ce,this.outputs=xe,this.otherwise=Ae};go.parse=function(S,N){if(S.length<5)return N.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if(S.length%2!=1)return N.error("Expected an even number of arguments.");var K,ce;N.expectedType&&"value"!==N.expectedType.kind&&(ce=N.expectedType);for(var xe={},Ae=[],Oe=2;Oe<S.length-1;Oe+=2){var We=S[Oe],it=S[Oe+1];Array.isArray(We)||(We=[We]);var xt=N.concat(Oe);if(0===We.length)return xt.error("Expected at least one branch label.");for(var Tt=0,Yt=We;Tt<Yt.length;Tt+=1){var sn=Yt[Tt];if("number"!=typeof sn&&"string"!=typeof sn)return xt.error("Branch labels must be numbers or strings.");if("number"==typeof sn&&Math.abs(sn)>Number.MAX_SAFE_INTEGER)return xt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof sn&&Math.floor(sn)!==sn)return xt.error("Numeric branch labels must be integer values.");if(K){if(xt.checkSubtype(K,sr(sn)))return null}else K=sr(sn);if(void 0!==xe[String(sn)])return xt.error("Branch labels must be unique.");xe[String(sn)]=Ae.length}var tn=N.parse(it,Oe,ce);if(!tn)return null;ce=ce||tn.type,Ae.push(tn)}var mn=N.parse(S[1],1,Ne);if(!mn)return null;var Dn=N.parse(S[S.length-1],S.length-1,ce);return Dn?"value"!==mn.type.kind&&N.concat(1).checkSubtype(K,mn.type)?null:new go(K,ce,mn,xe,Ae,Dn):null},go.prototype.evaluate=function(S){var N=this.input.evaluate(S);return(sr(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise).evaluate(S)},go.prototype.eachChild=function(S){S(this.input),this.outputs.forEach(S),S(this.otherwise)},go.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})&&this.otherwise.outputDefined()},go.prototype.serialize=function(){for(var S=this,N=["match",this.input.serialize()],K=[],ce={},xe=0,Ae=Object.keys(this.cases).sort();xe<Ae.length;xe+=1){var Oe=Ae[xe];void 0===(Yt=ce[this.cases[Oe]])?(ce[this.cases[Oe]]=K.length,K.push([this.cases[Oe],[Oe]])):K[Yt][1].push(Oe)}for(var We=function(tn){return"number"===S.inputType.kind?Number(tn):tn},it=0,xt=K;it<xt.length;it+=1){var Tt=xt[it],Yt=Tt[0],sn=Tt[1];N.push(1===sn.length?We(sn[0]):sn.map(We)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Ni=function(S,N,K){this.type=S,this.branches=N,this.otherwise=K};Ni.parse=function(S,N){if(S.length<4)return N.error("Expected at least 3 arguments, but found only "+(S.length-1)+".");if(S.length%2!=0)return N.error("Expected an odd number of arguments.");var K;N.expectedType&&"value"!==N.expectedType.kind&&(K=N.expectedType);for(var ce=[],xe=1;xe<S.length-1;xe+=2){var Ae=N.parse(S[xe],xe,Wt);if(!Ae)return null;var Oe=N.parse(S[xe+1],xe+1,K);if(!Oe)return null;ce.push([Ae,Oe]),K=K||Oe.type}var We=N.parse(S[S.length-1],S.length-1,K);return We?new Ni(K,ce,We):null},Ni.prototype.evaluate=function(S){for(var N=0,K=this.branches;N<K.length;N+=1){var ce=K[N],Ae=ce[1];if(ce[0].evaluate(S))return Ae.evaluate(S)}return this.otherwise.evaluate(S)},Ni.prototype.eachChild=function(S){for(var N=0,K=this.branches;N<K.length;N+=1){var ce=K[N],Ae=ce[1];S(ce[0]),S(Ae)}S(this.otherwise)},Ni.prototype.outputDefined=function(){return this.branches.every(function(S){return S[1].outputDefined()})&&this.otherwise.outputDefined()},Ni.prototype.serialize=function(){var S=["case"];return this.eachChild(function(N){S.push(N.serialize())}),S};var Uo=function(S,N,K,ce){this.type=S,this.input=N,this.beginIndex=K,this.endIndex=ce};function el(S,N){return"=="===S||"!="===S?"boolean"===N.kind||"string"===N.kind||"number"===N.kind||"null"===N.kind||"value"===N.kind:"string"===N.kind||"number"===N.kind||"value"===N.kind}function Il(S,N,K,ce){return 0===ce.compare(N,K)}function Da(S,N,K){var ce="=="!==S&&"!="!==S;return function(){function xe(Ae,Oe,We){this.type=Wt,this.lhs=Ae,this.rhs=Oe,this.collator=We,this.hasUntypedArgument="value"===Ae.type.kind||"value"===Oe.type.kind}return xe.parse=function(Ae,Oe){if(3!==Ae.length&&4!==Ae.length)return Oe.error("Expected two or three arguments.");var We=Ae[0],it=Oe.parse(Ae[1],1,Ne);if(!it)return null;if(!el(We,it.type))return Oe.concat(1).error('"'+We+"\" comparisons are not supported for type '"+ln(it.type)+"'.");var xt=Oe.parse(Ae[2],2,Ne);if(!xt)return null;if(!el(We,xt.type))return Oe.concat(2).error('"'+We+"\" comparisons are not supported for type '"+ln(xt.type)+"'.");if(it.type.kind!==xt.type.kind&&"value"!==it.type.kind&&"value"!==xt.type.kind)return Oe.error("Cannot compare types '"+ln(it.type)+"' and '"+ln(xt.type)+"'.");ce&&("value"===it.type.kind&&"value"!==xt.type.kind?it=new lr(xt.type,[it]):"value"!==it.type.kind&&"value"===xt.type.kind&&(xt=new lr(it.type,[xt])));var Tt=null;if(4===Ae.length){if("string"!==it.type.kind&&"string"!==xt.type.kind&&"value"!==it.type.kind&&"value"!==xt.type.kind)return Oe.error("Cannot use collator to compare non-string types.");if(!(Tt=Oe.parse(Ae[3],3,ot)))return null}return new xe(it,xt,Tt)},xe.prototype.evaluate=function(Ae){var Oe=this.lhs.evaluate(Ae),We=this.rhs.evaluate(Ae);if(ce&&this.hasUntypedArgument){var it=sr(Oe),xt=sr(We);if(it.kind!==xt.kind||"string"!==it.kind&&"number"!==it.kind)throw new Pr('Expected arguments for "'+S+'" to be (string, string) or (number, number), but found ('+it.kind+", "+xt.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var Tt=sr(Oe),Yt=sr(We);if("string"!==Tt.kind||"string"!==Yt.kind)return N(Ae,Oe,We)}return this.collator?K(Ae,Oe,We,this.collator.evaluate(Ae)):N(Ae,Oe,We)},xe.prototype.eachChild=function(Ae){Ae(this.lhs),Ae(this.rhs),this.collator&&Ae(this.collator)},xe.prototype.outputDefined=function(){return!0},xe.prototype.serialize=function(){var Ae=[S];return this.eachChild(function(Oe){Ae.push(Oe.serialize())}),Ae},xe}()}Uo.parse=function(S,N){if(S.length<=2||S.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var K=N.parse(S[1],1,Ne),ce=N.parse(S[2],2,ut);if(!K||!ce)return null;if(!wn(K.type,[Vt(Ne),Dt,Ne]))return N.error("Expected first argument to be of type array or string, but found "+ln(K.type)+" instead");if(4===S.length){var xe=N.parse(S[3],3,ut);return xe?new Uo(K.type,K,ce,xe):null}return new Uo(K.type,K,ce)},Uo.prototype.evaluate=function(S){var N=this.input.evaluate(S),K=this.beginIndex.evaluate(S);if(!Zn(N,["string","array"]))throw new Pr("Expected first argument to be of type array or string, but found "+ln(sr(N))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(S);return N.slice(K,ce)}return N.slice(K)},Uo.prototype.eachChild=function(S){S(this.input),S(this.beginIndex),this.endIndex&&S(this.endIndex)},Uo.prototype.outputDefined=function(){return!1},Uo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var S=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),S]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Go=Da("==",function(S,N,K){return N===K},Il),zs=Da("!=",function(S,N,K){return N!==K},function(S,N,K,ce){return!Il(0,N,K,ce)}),fl=Da("<",function(S,N,K){return N<K},function(S,N,K,ce){return ce.compare(N,K)<0}),Ts=Da(">",function(S,N,K){return N>K},function(S,N,K,ce){return ce.compare(N,K)>0}),Ka=Da("<=",function(S,N,K){return N<=K},function(S,N,K,ce){return ce.compare(N,K)<=0}),$l=Da(">=",function(S,N,K){return N>=K},function(S,N,K,ce){return ce.compare(N,K)>=0}),Bs=function(S,N,K,ce,xe){this.type=Dt,this.number=S,this.locale=N,this.currency=K,this.minFractionDigits=ce,this.maxFractionDigits=xe};Bs.parse=function(S,N){if(3!==S.length)return N.error("Expected two arguments.");var K=N.parse(S[1],1,ut);if(!K)return null;var ce=S[2];if("object"!=typeof ce||Array.isArray(ce))return N.error("NumberFormat options argument must be an object.");var xe=null;if(ce.locale&&!(xe=N.parse(ce.locale,1,Dt)))return null;var Ae=null;if(ce.currency&&!(Ae=N.parse(ce.currency,1,Dt)))return null;var Oe=null;if(ce["min-fraction-digits"]&&!(Oe=N.parse(ce["min-fraction-digits"],1,ut)))return null;var We=null;return ce["max-fraction-digits"]&&!(We=N.parse(ce["max-fraction-digits"],1,ut))?null:new Bs(K,xe,Ae,Oe,We)},Bs.prototype.evaluate=function(S){return new Intl.NumberFormat(this.locale?this.locale.evaluate(S):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(S):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(S):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(S):void 0}).format(this.number.evaluate(S))},Bs.prototype.eachChild=function(S){S(this.number),this.locale&&S(this.locale),this.currency&&S(this.currency),this.minFractionDigits&&S(this.minFractionDigits),this.maxFractionDigits&&S(this.maxFractionDigits)},Bs.prototype.outputDefined=function(){return!1},Bs.prototype.serialize=function(){var S={};return this.locale&&(S.locale=this.locale.serialize()),this.currency&&(S.currency=this.currency.serialize()),this.minFractionDigits&&(S["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(S["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),S]};var Ro=function(S){this.type=ut,this.input=S};Ro.parse=function(S,N){if(2!==S.length)return N.error("Expected 1 argument, but found "+(S.length-1)+" instead.");var K=N.parse(S[1],1);return K?"array"!==K.type.kind&&"string"!==K.type.kind&&"value"!==K.type.kind?N.error("Expected argument of type string or array, but found "+ln(K.type)+" instead."):new Ro(K):null},Ro.prototype.evaluate=function(S){var N=this.input.evaluate(S);if("string"==typeof N||Array.isArray(N))return N.length;throw new Pr("Expected value to be of type string or array, but found "+ln(sr(N))+" instead.")},Ro.prototype.eachChild=function(S){S(this.input)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){var S=["length"];return this.eachChild(function(N){S.push(N.serialize())}),S};var Ho={"==":Go,"!=":zs,">":Ts,"<":fl,">=":$l,"<=":Ka,array:lr,at:Do,boolean:lr,case:Ni,coalesce:Vo,collator:Qr,format:Hn,image:Sr,in:Ba,"index-of":ts,interpolate:Ui,"interpolate-hcl":Ui,"interpolate-lab":Ui,length:Ro,let:Ea,literal:yr,match:go,number:lr,"number-format":Bs,object:lr,slice:Uo,step:Br,string:lr,"to-boolean":Fn,"to-color":Fn,"to-number":Fn,"to-string":Fn,var:Mr,within:Rn};function js(S,N){var K=N[0],ce=N[1],xe=N[2],Ae=N[3];K=K.evaluate(S),ce=ce.evaluate(S),xe=xe.evaluate(S);var Oe=Ae?Ae.evaluate(S):1,We=Yn(K,ce,xe,Oe);if(We)throw new Pr(We);return new hn(K/255*Oe,ce/255*Oe,xe/255*Oe,Oe)}function Ss(S,N){return S in N}function Ys(S,N){var K=N[S];return void 0===K?null:K}function mo(S){return{type:S}}function Pl(S){return{result:"success",value:S}}function Ms(S){return{result:"error",value:S}}function tl(S){return"data-driven"===S["property-type"]||"cross-faded-data-driven"===S["property-type"]}function Ol(S){return!!S.expression&&S.expression.parameters.indexOf("zoom")>-1}function Zs(S){return!!S.expression&&S.expression.interpolated}function ja(S){return S instanceof Number?"number":S instanceof String?"string":S instanceof Boolean?"boolean":Array.isArray(S)?"array":null===S?"null":typeof S}function Ye(S){return"object"==typeof S&&null!==S&&!Array.isArray(S)}function Je(S){return S}function lt(S,N,K){return void 0!==S?S:void 0!==N?N:void 0!==K?K:void 0}function vt(S,N,K,ce,xe){return lt(typeof K===xe?ce[K]:void 0,S.default,N.default)}function Mt(S,N,K){if("number"!==ja(K))return lt(S.default,N.default);var ce=S.stops.length;if(1===ce||K<=S.stops[0][0])return S.stops[0][1];if(K>=S.stops[ce-1][0])return S.stops[ce-1][1];var xe=zr(S.stops.map(function(Ae){return Ae[0]}),K);return S.stops[xe][1]}function wt(S,N,K){var ce=void 0!==S.base?S.base:1;if("number"!==ja(K))return lt(S.default,N.default);var xe=S.stops.length;if(1===xe||K<=S.stops[0][0])return S.stops[0][1];if(K>=S.stops[xe-1][0])return S.stops[xe-1][1];var sn,tn,Dn,Bn,Ae=zr(S.stops.map(function(Yt){return Yt[0]}),K),Oe=(sn=ce,Bn=K-(tn=S.stops[Ae][0]),0==(Dn=S.stops[Ae+1][0]-tn)?0:1===sn?Bn/Dn:(Math.pow(sn,Bn)-1)/(Math.pow(sn,Dn)-1)),We=S.stops[Ae][1],it=S.stops[Ae+1][1],xt=Ur[N.type]||Je;if(S.colorSpace&&"rgb"!==S.colorSpace){var Tt=Ki[S.colorSpace];xt=function(Yt,sn){return Tt.reverse(Tt.interpolate(Tt.forward(Yt),Tt.forward(sn),Oe))}}return"function"==typeof We.evaluate?{evaluate:function(){for(var Yt=[],sn=arguments.length;sn--;)Yt[sn]=arguments[sn];var tn=We.evaluate.apply(void 0,Yt),mn=it.evaluate.apply(void 0,Yt);if(void 0!==tn&&void 0!==mn)return xt(tn,mn,Oe)}}:xt(We,it,Oe)}function Bt(S,N,K){return"color"===N.type?K=hn.parse(K):"formatted"===N.type?K=En.fromString(K.toString()):"resolvedImage"===N.type?K=In.fromString(K.toString()):ja(K)===N.type||"enum"===N.type&&N.values[K]||(K=void 0),lt(K,S.default,N.default)}Kn.register(Ho,{error:[{kind:"error"},[Dt],function(S,N){throw new Pr(N[0].evaluate(S))}],typeof:[Dt,[Ne],function(S,N){return ln(sr(N[0].evaluate(S)))}],"to-rgba":[Vt(ut,4),[zt],function(S,N){return N[0].evaluate(S).toArray()}],rgb:[zt,[ut,ut,ut],js],rgba:[zt,[ut,ut,ut,ut],js],has:{type:Wt,overloads:[[[Dt],function(S,N){return Ss(N[0].evaluate(S),S.properties())}],[[Dt,Ht],function(S,N){var ce=N[1];return Ss(N[0].evaluate(S),ce.evaluate(S))}]]},get:{type:Ne,overloads:[[[Dt],function(S,N){return Ys(N[0].evaluate(S),S.properties())}],[[Dt,Ht],function(S,N){var ce=N[1];return Ys(N[0].evaluate(S),ce.evaluate(S))}]]},"feature-state":[Ne,[Dt],function(S,N){return Ys(N[0].evaluate(S),S.featureState||{})}],properties:[Ht,[],function(S){return S.properties()}],"geometry-type":[Dt,[],function(S){return S.geometryType()}],id:[Ne,[],function(S){return S.id()}],zoom:[ut,[],function(S){return S.globals.zoom}],"heatmap-density":[ut,[],function(S){return S.globals.heatmapDensity||0}],"line-progress":[ut,[],function(S){return S.globals.lineProgress||0}],accumulated:[Ne,[],function(S){return void 0===S.globals.accumulated?null:S.globals.accumulated}],"+":[ut,mo(ut),function(S,N){for(var K=0,ce=0,xe=N;ce<xe.length;ce+=1)K+=xe[ce].evaluate(S);return K}],"*":[ut,mo(ut),function(S,N){for(var K=1,ce=0,xe=N;ce<xe.length;ce+=1)K*=xe[ce].evaluate(S);return K}],"-":{type:ut,overloads:[[[ut,ut],function(S,N){var ce=N[1];return N[0].evaluate(S)-ce.evaluate(S)}],[[ut],function(S,N){return-N[0].evaluate(S)}]]},"/":[ut,[ut,ut],function(S,N){var ce=N[1];return N[0].evaluate(S)/ce.evaluate(S)}],"%":[ut,[ut,ut],function(S,N){var ce=N[1];return N[0].evaluate(S)%ce.evaluate(S)}],ln2:[ut,[],function(){return Math.LN2}],pi:[ut,[],function(){return Math.PI}],e:[ut,[],function(){return Math.E}],"^":[ut,[ut,ut],function(S,N){var ce=N[1];return Math.pow(N[0].evaluate(S),ce.evaluate(S))}],sqrt:[ut,[ut],function(S,N){return Math.sqrt(N[0].evaluate(S))}],log10:[ut,[ut],function(S,N){return Math.log(N[0].evaluate(S))/Math.LN10}],ln:[ut,[ut],function(S,N){return Math.log(N[0].evaluate(S))}],log2:[ut,[ut],function(S,N){return Math.log(N[0].evaluate(S))/Math.LN2}],sin:[ut,[ut],function(S,N){return Math.sin(N[0].evaluate(S))}],cos:[ut,[ut],function(S,N){return Math.cos(N[0].evaluate(S))}],tan:[ut,[ut],function(S,N){return Math.tan(N[0].evaluate(S))}],asin:[ut,[ut],function(S,N){return Math.asin(N[0].evaluate(S))}],acos:[ut,[ut],function(S,N){return Math.acos(N[0].evaluate(S))}],atan:[ut,[ut],function(S,N){return Math.atan(N[0].evaluate(S))}],min:[ut,mo(ut),function(S,N){return Math.min.apply(Math,N.map(function(K){return K.evaluate(S)}))}],max:[ut,mo(ut),function(S,N){return Math.max.apply(Math,N.map(function(K){return K.evaluate(S)}))}],abs:[ut,[ut],function(S,N){return Math.abs(N[0].evaluate(S))}],round:[ut,[ut],function(S,N){var K=N[0].evaluate(S);return K<0?-Math.round(-K):Math.round(K)}],floor:[ut,[ut],function(S,N){return Math.floor(N[0].evaluate(S))}],ceil:[ut,[ut],function(S,N){return Math.ceil(N[0].evaluate(S))}],"filter-==":[Wt,[Dt,Ne],function(S,N){var K=N[0],ce=N[1];return S.properties()[K.value]===ce.value}],"filter-id-==":[Wt,[Ne],function(S,N){var K=N[0];return S.id()===K.value}],"filter-type-==":[Wt,[Dt],function(S,N){var K=N[0];return S.geometryType()===K.value}],"filter-<":[Wt,[Dt,Ne],function(S,N){var K=N[0],ce=N[1],xe=S.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe<Ae}],"filter-id-<":[Wt,[Ne],function(S,N){var K=N[0],ce=S.id(),xe=K.value;return typeof ce==typeof xe&&ce<xe}],"filter->":[Wt,[Dt,Ne],function(S,N){var K=N[0],ce=N[1],xe=S.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe>Ae}],"filter-id->":[Wt,[Ne],function(S,N){var K=N[0],ce=S.id(),xe=K.value;return typeof ce==typeof xe&&ce>xe}],"filter-<=":[Wt,[Dt,Ne],function(S,N){var K=N[0],ce=N[1],xe=S.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe<=Ae}],"filter-id-<=":[Wt,[Ne],function(S,N){var K=N[0],ce=S.id(),xe=K.value;return typeof ce==typeof xe&&ce<=xe}],"filter->=":[Wt,[Dt,Ne],function(S,N){var K=N[0],ce=N[1],xe=S.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe>=Ae}],"filter-id->=":[Wt,[Ne],function(S,N){var K=N[0],ce=S.id(),xe=K.value;return typeof ce==typeof xe&&ce>=xe}],"filter-has":[Wt,[Ne],function(S,N){return N[0].value in S.properties()}],"filter-has-id":[Wt,[],function(S){return null!==S.id()&&void 0!==S.id()}],"filter-type-in":[Wt,[Vt(Dt)],function(S,N){return N[0].value.indexOf(S.geometryType())>=0}],"filter-id-in":[Wt,[Vt(Ne)],function(S,N){return N[0].value.indexOf(S.id())>=0}],"filter-in-small":[Wt,[Dt,Vt(Ne)],function(S,N){var K=N[0];return N[1].value.indexOf(S.properties()[K.value])>=0}],"filter-in-large":[Wt,[Dt,Vt(Ne)],function(S,N){var K=N[0],ce=N[1];return function(xe,Ae,Oe,We){for(;Oe<=We;){var it=Oe+We>>1;if(Ae[it]===xe)return!0;Ae[it]>xe?We=it-1:Oe=it+1}return!1}(S.properties()[K.value],ce.value,0,ce.value.length-1)}],all:{type:Wt,overloads:[[[Wt,Wt],function(S,N){var ce=N[1];return N[0].evaluate(S)&&ce.evaluate(S)}],[mo(Wt),function(S,N){for(var K=0,ce=N;K<ce.length;K+=1)if(!ce[K].evaluate(S))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],function(S,N){var ce=N[1];return N[0].evaluate(S)||ce.evaluate(S)}],[mo(Wt),function(S,N){for(var K=0,ce=N;K<ce.length;K+=1)if(ce[K].evaluate(S))return!0;return!1}]]},"!":[Wt,[Wt],function(S,N){return!N[0].evaluate(S)}],"is-supported-script":[Wt,[Dt],function(S,N){var ce=S.globals&&S.globals.isSupportedScript;return!ce||ce(N[0].evaluate(S))}],upcase:[Dt,[Dt],function(S,N){return N[0].evaluate(S).toUpperCase()}],downcase:[Dt,[Dt],function(S,N){return N[0].evaluate(S).toLowerCase()}],concat:[Dt,mo(Ne),function(S,N){return N.map(function(K){return Ar(K.evaluate(S))}).join("")}],"resolved-locale":[Dt,[ot],function(S,N){return N[0].evaluate(S).resolvedLocale()}]});var cn=function(S,N){var K;this.expression=S,this._warningHistory={},this._evaluator=new xr,this._defaultValue=N?"color"===(K=N).type&&Ye(K.default)?new hn(0,0,0,0):"color"===K.type?hn.parse(K.default)||null:void 0===K.default?null:K.default:null,this._enumValues=N&&"enum"===N.type?N.values:null};function fn(S){return Array.isArray(S)&&S.length>0&&"string"==typeof S[0]&&S[0]in Ho}function on(S,N){var xe,Ae,K=new vr(Ho,[],N?(Ae={color:zt,string:Dt,number:ut,enum:Dt,boolean:Wt,formatted:yt,resolvedImage:It},"array"===(xe=N).type?Vt(Ae[xe.value]||Ne,xe.length):Ae[xe.type]):void 0),ce=K.parse(S,void 0,void 0,void 0,N&&"string"===N.type?{typeAnnotation:"coerce"}:void 0);return ce?Pl(new cn(ce,N)):Ms(K.errors)}cn.prototype.evaluateWithoutErrorHandling=function(S,N,K,ce,xe,Ae){return this._evaluator.globals=S,this._evaluator.feature=N,this._evaluator.featureState=K,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Ae,this.expression.evaluate(this._evaluator)},cn.prototype.evaluate=function(S,N,K,ce,xe,Ae){this._evaluator.globals=S,this._evaluator.feature=N||null,this._evaluator.featureState=K||null,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Ae||null;try{var Oe=this.expression.evaluate(this._evaluator);if(null==Oe||"number"==typeof Oe&&Oe!=Oe)return this._defaultValue;if(this._enumValues&&!(Oe in this._enumValues))throw new Pr("Expected value to be one of "+Object.keys(this._enumValues).map(function(We){return JSON.stringify(We)}).join(", ")+", but found "+JSON.stringify(Oe)+" instead.");return Oe}catch(We){return this._warningHistory[We.message]||(this._warningHistory[We.message]=!0,"undefined"!=typeof console&&console.warn(We.message)),this._defaultValue}};var vn=function(S,N){this.kind=S,this._styleExpression=N,this.isStateDependent="constant"!==S&&!fr(N.expression)};vn.prototype.evaluateWithoutErrorHandling=function(S,N,K,ce,xe,Ae){return this._styleExpression.evaluateWithoutErrorHandling(S,N,K,ce,xe,Ae)},vn.prototype.evaluate=function(S,N,K,ce,xe,Ae){return this._styleExpression.evaluate(S,N,K,ce,xe,Ae)};var Mn=function(S,N,K,ce){this.kind=S,this.zoomStops=K,this._styleExpression=N,this.isStateDependent="camera"!==S&&!fr(N.expression),this.interpolationType=ce};function Ln(S,N){if("error"===(S=on(S,N)).result)return S;var K=S.value.expression,ce=Gn(K);if(!ce&&!tl(N))return Ms([new Pt("","data expressions not supported")]);var xe=ur(K,["zoom"]);if(!xe&&!Ol(N))return Ms([new Pt("","zoom expressions not supported")]);var Ae=function We(it){var xt=null;if(it instanceof Ea)xt=We(it.result);else if(it instanceof Vo)for(var Tt=0,Yt=it.args;Tt<Yt.length&&!(xt=We(Yt[Tt]));Tt+=1);else(it instanceof Br||it instanceof Ui)&&it.input instanceof Kn&&"zoom"===it.input.name&&(xt=it);return xt instanceof Pt||it.eachChild(function(tn){var mn=We(tn);mn instanceof Pt?xt=mn:!xt&&mn?xt=new Pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):xt&&mn&&xt!==mn&&(xt=new Pt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),xt}(K);return Ae||xe?Ae instanceof Pt?Ms([Ae]):Ae instanceof Ui&&!Zs(N)?Ms([new Pt("",'"interpolate" expressions cannot be used with this property')]):Pl(Ae?new Mn(ce?"camera":"composite",S.value,Ae.labels,Ae instanceof Ui?Ae.interpolation:void 0):new vn(ce?"constant":"source",S.value)):Ms([new Pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Mn.prototype.evaluateWithoutErrorHandling=function(S,N,K,ce,xe,Ae){return this._styleExpression.evaluateWithoutErrorHandling(S,N,K,ce,xe,Ae)},Mn.prototype.evaluate=function(S,N,K,ce,xe,Ae){return this._styleExpression.evaluate(S,N,K,ce,xe,Ae)},Mn.prototype.interpolationFactor=function(S,N,K){return this.interpolationType?Ui.interpolationFactor(this.interpolationType,S,N,K):0};var Pn=function(S,N){this._parameters=S,this._specification=N,mt(this,function K(ce,xe){var Ae,Oe,We,it="color"===xe.type,xt=ce.stops&&"object"==typeof ce.stops[0][0],Yt=xt||!(xt||void 0!==ce.property),sn=ce.type||(Zs(xe)?"exponential":"interval");if(it&&((ce=mt({},ce)).stops&&(ce.stops=ce.stops.map(function($r){return[$r[0],hn.parse($r[1])]})),ce.default=hn.parse(ce.default?ce.default:xe.default)),ce.colorSpace&&"rgb"!==ce.colorSpace&&!Ki[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if("exponential"===sn)Ae=wt;else if("interval"===sn)Ae=Mt;else if("categorical"===sn){Ae=vt,Oe=Object.create(null);for(var tn=0,mn=ce.stops;tn<mn.length;tn+=1){var Dn=mn[tn];Oe[Dn[0]]=Dn[1]}We=typeof ce.stops[0][0]}else{if("identity"!==sn)throw new Error('Unknown function type "'+sn+'"');Ae=Bt}if(xt){for(var Bn={},Vn=[],er=0;er<ce.stops.length;er++){var ir=ce.stops[er],hr=ir[0].zoom;void 0===Bn[hr]&&(Bn[hr]={zoom:hr,type:ce.type,property:ce.property,default:ce.default,stops:[]},Vn.push(hr)),Bn[hr].stops.push([ir[0].value,ir[1]])}for(var Ir=[],Vr=0,si=Vn;Vr<si.length;Vr+=1){var oi=si[Vr];Ir.push([Bn[oi].zoom,K(Bn[oi],xe)])}var yi={name:"linear"};return{kind:"composite",interpolationType:yi,interpolationFactor:Ui.interpolationFactor.bind(void 0,yi),zoomStops:Ir.map(function($r){return $r[0]}),evaluate:function($r,ui){var zi=$r.zoom;return wt({stops:Ir,base:ce.base},xe,zi).evaluate(zi,ui)}}}if(Yt){var Li="exponential"===sn?{name:"exponential",base:void 0!==ce.base?ce.base:1}:null;return{kind:"camera",interpolationType:Li,interpolationFactor:Ui.interpolationFactor.bind(void 0,Li),zoomStops:ce.stops.map(function($r){return $r[0]}),evaluate:function($r){return Ae(ce,xe,$r.zoom,Oe,We)}}}return{kind:"source",evaluate:function($r,ui){var zi=ui&&ui.properties?ui.properties[ce.property]:void 0;return void 0===zi?lt(ce.default,xe.default):Ae(ce,xe,zi,Oe,We)}}}(this._parameters,this._specification))};function qn(S){var N=S.key,K=S.value,ce=S.valueSpec||{},xe=S.objectElementValidators||{},Ae=S.style,Oe=S.styleSpec,We=[],it=ja(K);if("object"!==it)return[new Ke(N,K,"object expected, "+it+" found")];for(var xt in K){var Tt=xt.split(".")[0],Yt=ce[Tt]||ce["*"],sn=void 0;if(xe[Tt])sn=xe[Tt];else if(ce[Tt])sn=_n;else if(xe["*"])sn=xe["*"];else{if(!ce["*"]){We.push(new Ke(N,K[xt],'unknown property "'+xt+'"'));continue}sn=_n}We=We.concat(sn({key:(N&&N+".")+xt,value:K[xt],valueSpec:Yt,style:Ae,styleSpec:Oe,object:K,objectKey:xt},K))}for(var tn in ce)xe[tn]||ce[tn].required&&void 0===ce[tn].default&&void 0===K[tn]&&We.push(new Ke(N,K,'missing required property "'+tn+'"'));return We}function kr(S){var N=S.value,K=S.valueSpec,ce=S.style,xe=S.styleSpec,Ae=S.key,Oe=S.arrayElementValidator||_n;if("array"!==ja(N))return[new Ke(Ae,N,"array expected, "+ja(N)+" found")];if(K.length&&N.length!==K.length)return[new Ke(Ae,N,"array length "+K.length+" expected, length "+N.length+" found")];if(K["min-length"]&&N.length<K["min-length"])return[new Ke(Ae,N,"array length at least "+K["min-length"]+" expected, length "+N.length+" found")];var We={type:K.value,values:K.values};xe.$version<7&&(We.function=K.function),"object"===ja(K.value)&&(We=K.value);for(var it=[],xt=0;xt<N.length;xt++)it=it.concat(Oe({array:N,arrayIndex:xt,value:N[xt],valueSpec:We,style:ce,styleSpec:xe,key:Ae+"["+xt+"]"}));return it}function Fr(S){var N=S.key,K=S.value,ce=S.valueSpec,xe=ja(K);return"number"===xe&&K!=K&&(xe="NaN"),"number"!==xe?[new Ke(N,K,"number expected, "+xe+" found")]:"minimum"in ce&&K<ce.minimum?[new Ke(N,K,K+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&K>ce.maximum?[new Ke(N,K,K+" is greater than the maximum value "+ce.maximum)]:[]}function Xr(S){var N,K,ce,xe=S.valueSpec,Ae=pt(S.value.type),Oe={},We="categorical"!==Ae&&void 0===S.value.property,it=!We,xt="array"===ja(S.value.stops)&&"array"===ja(S.value.stops[0])&&"object"===ja(S.value.stops[0][0]),Tt=qn({key:S.key,value:S.value,valueSpec:S.styleSpec.function,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{stops:function(tn){if("identity"===Ae)return[new Ke(tn.key,tn.value,'identity function may not have a "stops" property')];var mn=[],Dn=tn.value;return mn=mn.concat(kr({key:tn.key,value:Dn,valueSpec:tn.valueSpec,style:tn.style,styleSpec:tn.styleSpec,arrayElementValidator:Yt})),"array"===ja(Dn)&&0===Dn.length&&mn.push(new Ke(tn.key,Dn,"array must have at least one stop")),mn},default:function(tn){return _n({key:tn.key,value:tn.value,valueSpec:xe,style:tn.style,styleSpec:tn.styleSpec})}}});return"identity"===Ae&&We&&Tt.push(new Ke(S.key,S.value,'missing required property "property"')),"identity"===Ae||S.value.stops||Tt.push(new Ke(S.key,S.value,'missing required property "stops"')),"exponential"===Ae&&S.valueSpec.expression&&!Zs(S.valueSpec)&&Tt.push(new Ke(S.key,S.value,"exponential functions not supported")),S.styleSpec.$version>=8&&(it&&!tl(S.valueSpec)?Tt.push(new Ke(S.key,S.value,"property functions not supported")):We&&!Ol(S.valueSpec)&&Tt.push(new Ke(S.key,S.value,"zoom functions not supported"))),"categorical"!==Ae&&!xt||void 0!==S.value.property||Tt.push(new Ke(S.key,S.value,'"property" property is required')),Tt;function Yt(tn){var mn=[],Dn=tn.value,Bn=tn.key;if("array"!==ja(Dn))return[new Ke(Bn,Dn,"array expected, "+ja(Dn)+" found")];if(2!==Dn.length)return[new Ke(Bn,Dn,"array length 2 expected, length "+Dn.length+" found")];if(xt){if("object"!==ja(Dn[0]))return[new Ke(Bn,Dn,"object expected, "+ja(Dn[0])+" found")];if(void 0===Dn[0].zoom)return[new Ke(Bn,Dn,"object stop key must have zoom")];if(void 0===Dn[0].value)return[new Ke(Bn,Dn,"object stop key must have value")];if(ce&&ce>pt(Dn[0].zoom))return[new Ke(Bn,Dn[0].zoom,"stop zoom values must appear in ascending order")];pt(Dn[0].zoom)!==ce&&(ce=pt(Dn[0].zoom),K=void 0,Oe={}),mn=mn.concat(qn({key:Bn+"[0]",value:Dn[0],valueSpec:{zoom:{}},style:tn.style,styleSpec:tn.styleSpec,objectElementValidators:{zoom:Fr,value:sn}}))}else mn=mn.concat(sn({key:Bn+"[0]",value:Dn[0],valueSpec:{},style:tn.style,styleSpec:tn.styleSpec},Dn));return fn(Ot(Dn[1]))?mn.concat([new Ke(Bn+"[1]",Dn[1],"expressions are not allowed in function stops.")]):mn.concat(_n({key:Bn+"[1]",value:Dn[1],valueSpec:xe,style:tn.style,styleSpec:tn.styleSpec}))}function sn(tn,mn){var Dn=ja(tn.value),Bn=pt(tn.value),Vn=null!==tn.value?tn.value:mn;if(N){if(Dn!==N)return[new Ke(tn.key,Vn,Dn+" stop domain type must match previous stop domain type "+N)]}else N=Dn;if("number"!==Dn&&"string"!==Dn&&"boolean"!==Dn)return[new Ke(tn.key,Vn,"stop domain value must be a number, string, or boolean")];if("number"!==Dn&&"categorical"!==Ae){var er="number expected, "+Dn+" found";return tl(xe)&&void 0===Ae&&(er+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(tn.key,Vn,er)]}return"categorical"!==Ae||"number"!==Dn||isFinite(Bn)&&Math.floor(Bn)===Bn?"categorical"!==Ae&&"number"===Dn&&void 0!==K&&Bn<K?[new Ke(tn.key,Vn,"stop domain values must appear in ascending order")]:(K=Bn,"categorical"===Ae&&Bn in Oe?[new Ke(tn.key,Vn,"stop domain values must be unique")]:(Oe[Bn]=!0,[])):[new Ke(tn.key,Vn,"integer expected, found "+Bn)]}}function ai(S){var N=("property"===S.expressionContext?Ln:on)(Ot(S.value),S.valueSpec);if("error"===N.result)return N.value.map(function(ce){return new Ke(""+S.key+ce.key,S.value,ce.message)});var K=N.value.expression||N.value._styleExpression.expression;if("property"===S.expressionContext&&"text-font"===S.propertyKey&&!K.outputDefined())return[new Ke(S.key,S.value,'Invalid data expression for "'+S.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===S.expressionContext&&"layout"===S.propertyType&&!fr(K))return[new Ke(S.key,S.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===S.expressionContext&&!fr(K))return[new Ke(S.key,S.value,'"feature-state" data expressions are not supported with filters.')];if(S.expressionContext&&0===S.expressionContext.indexOf("cluster")){if(!ur(K,["zoom","feature-state"]))return[new Ke(S.key,S.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===S.expressionContext&&!Gn(K))return[new Ke(S.key,S.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ni(S){var N=S.key,K=S.value,ce=S.valueSpec,xe=[];return Array.isArray(ce.values)?-1===ce.values.indexOf(pt(K))&&xe.push(new Ke(N,K,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(K)+" found")):-1===Object.keys(ce.values).indexOf(pt(K))&&xe.push(new Ke(N,K,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(K)+" found")),xe}function ri(S){if(!0===S||!1===S)return!0;if(!Array.isArray(S)||0===S.length)return!1;switch(S[0]){case"has":return S.length>=2&&"$id"!==S[1]&&"$type"!==S[1];case"in":return S.length>=3&&("string"!=typeof S[1]||Array.isArray(S[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==S.length||Array.isArray(S[1])||Array.isArray(S[2]);case"any":case"all":for(var N=0,K=S.slice(1);N<K.length;N+=1){var ce=K[N];if(!ri(ce)&&"boolean"!=typeof ce)return!1}return!0;default:return!0}}Pn.deserialize=function(S){return new Pn(S._parameters,S._specification)},Pn.serialize=function(S){return{_parameters:S._parameters,_specification:S._specification}};var Hi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ra(S){if(null==S)return{filter:function(){return!0},needGeometry:!1};ri(S)||(S=Sa(S));var N=on(S,Hi);if("error"===N.result)throw new Error(N.value.map(function(K){return K.key+": "+K.message}).join(", "));return{filter:function(K,ce,xe){return N.value.evaluate(K,ce,{},xe)},needGeometry:function K(ce){if(!Array.isArray(ce))return!1;if("within"===ce[0])return!0;for(var xe=1;xe<ce.length;xe++)if(K(ce[xe]))return!0;return!1}(S)}}function La(S,N){return S<N?-1:S>N?1:0}function Sa(S){if(!S)return!0;var N,K=S[0];return S.length<=1?"any"!==K:"=="===K?Oa(S[1],S[2],"=="):"!="===K?Ta(Oa(S[1],S[2],"==")):"<"===K||">"===K||"<="===K||">="===K?Oa(S[1],S[2],K):"any"===K?(N=S.slice(1),["any"].concat(N.map(Sa))):"all"===K?["all"].concat(S.slice(1).map(Sa)):"none"===K?["all"].concat(S.slice(1).map(Sa).map(Ta)):"in"===K?yo(S[1],S.slice(2)):"!in"===K?Ta(yo(S[1],S.slice(2))):"has"===K?wo(S[1]):"!has"===K?Ta(wo(S[1])):"within"!==K||S}function Oa(S,N,K){switch(S){case"$type":return["filter-type-"+K,N];case"$id":return["filter-id-"+K,N];default:return["filter-"+K,S,N]}}function yo(S,N){if(0===N.length)return!1;switch(S){case"$type":return["filter-type-in",["literal",N]];case"$id":return["filter-id-in",["literal",N]];default:return N.length>200&&!N.some(function(K){return typeof K!=typeof N[0]})?["filter-in-large",S,["literal",N.sort(La)]]:["filter-in-small",S,["literal",N]]}}function wo(S){switch(S){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",S]}}function Ta(S){return["!",S]}function Ga(S){return ri(Ot(S.value))?ai(mt({},S,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function N(K){var ce=K.value,xe=K.key;if("array"!==ja(ce))return[new Ke(xe,ce,"array expected, "+ja(ce)+" found")];var Ae,Oe=K.styleSpec,We=[];if(ce.length<1)return[new Ke(xe,ce,"filter array must have at least 1 element")];switch(We=We.concat(ni({key:xe+"[0]",value:ce[0],valueSpec:Oe.filter_operator,style:K.style,styleSpec:K.styleSpec})),pt(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&"$type"===pt(ce[1])&&We.push(new Ke(xe,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":3!==ce.length&&We.push(new Ke(xe,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&"string"!==(Ae=ja(ce[1]))&&We.push(new Ke(xe+"[1]",ce[1],"string expected, "+Ae+" found"));for(var it=2;it<ce.length;it++)Ae=ja(ce[it]),"$type"===pt(ce[1])?We=We.concat(ni({key:xe+"["+it+"]",value:ce[it],valueSpec:Oe.geometry_type,style:K.style,styleSpec:K.styleSpec})):"string"!==Ae&&"number"!==Ae&&"boolean"!==Ae&&We.push(new Ke(xe+"["+it+"]",ce[it],"string, number, or boolean expected, "+Ae+" found"));break;case"any":case"all":case"none":for(var xt=1;xt<ce.length;xt++)We=We.concat(N({key:xe+"["+xt+"]",value:ce[xt],style:K.style,styleSpec:K.styleSpec}));break;case"has":case"!has":Ae=ja(ce[1]),2!==ce.length?We.push(new Ke(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"string"!==Ae&&We.push(new Ke(xe+"[1]",ce[1],"string expected, "+Ae+" found"));break;case"within":Ae=ja(ce[1]),2!==ce.length?We.push(new Ke(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"object"!==Ae&&We.push(new Ke(xe+"[1]",ce[1],"object expected, "+Ae+" found"))}return We}(S)}function To(S,N){var K=S.key,ce=S.style,xe=S.styleSpec,Ae=S.value,Oe=S.objectKey,We=xe[N+"_"+S.layerType];if(!We)return[];var it=Oe.match(/^(.*)-transition$/);if("paint"===N&&it&&We[it[1]]&&We[it[1]].transition)return _n({key:K,value:Ae,valueSpec:xe.transition,style:ce,styleSpec:xe});var xt,Tt=S.valueSpec||We[Oe];if(!Tt)return[new Ke(K,Ae,'unknown property "'+Oe+'"')];if("string"===ja(Ae)&&tl(Tt)&&!Tt.tokens&&(xt=/^{([^}]+)}$/.exec(Ae)))return[new Ke(K,Ae,'"'+Oe+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(xt[1])+" }`.")];var Yt=[];return"symbol"===S.layerType&&("text-field"===Oe&&ce&&!ce.glyphs&&Yt.push(new Ke(K,Ae,'use of "text-field" requires a style "glyphs" property')),"text-font"===Oe&&Ye(Ot(Ae))&&"identity"===pt(Ae.type)&&Yt.push(new Ke(K,Ae,'"text-font" does not support identity functions'))),Yt.concat(_n({key:S.key,value:Ae,valueSpec:Tt,style:ce,styleSpec:xe,expressionContext:"property",propertyType:N,propertyKey:Oe}))}function Fo(S){return To(S,"paint")}function fs(S){return To(S,"layout")}function hs(S){var N=[],K=S.value,ce=S.key,xe=S.style,Ae=S.styleSpec;K.type||K.ref||N.push(new Ke(ce,K,'either "type" or "ref" is required'));var Oe,We=pt(K.type),it=pt(K.ref);if(K.id)for(var xt=pt(K.id),Tt=0;Tt<S.arrayIndex;Tt++){var Yt=xe.layers[Tt];pt(Yt.id)===xt&&N.push(new Ke(ce,K.id,'duplicate layer id "'+K.id+'", previously used at line '+Yt.id.__line__))}if("ref"in K)["type","source","source-layer","filter","layout"].forEach(function(mn){mn in K&&N.push(new Ke(ce,K[mn],'"'+mn+'" is prohibited for ref layers'))}),xe.layers.forEach(function(mn){pt(mn.id)===it&&(Oe=mn)}),Oe?Oe.ref?N.push(new Ke(ce,K.ref,"ref cannot reference another ref layer")):We=pt(Oe.type):N.push(new Ke(ce,K.ref,'ref layer "'+it+'" not found'));else if("background"!==We)if(K.source){var sn=xe.sources&&xe.sources[K.source],tn=sn&&pt(sn.type);sn?"vector"===tn&&"raster"===We?N.push(new Ke(ce,K.source,'layer "'+K.id+'" requires a raster source')):"raster"===tn&&"raster"!==We?N.push(new Ke(ce,K.source,'layer "'+K.id+'" requires a vector source')):"vector"!==tn||K["source-layer"]?"raster-dem"===tn&&"hillshade"!==We?N.push(new Ke(ce,K.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==We||!K.paint||!K.paint["line-gradient"]||"geojson"===tn&&sn.lineMetrics||N.push(new Ke(ce,K,'layer "'+K.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):N.push(new Ke(ce,K,'layer "'+K.id+'" must specify a "source-layer"')):N.push(new Ke(ce,K.source,'source "'+K.source+'" not found'))}else N.push(new Ke(ce,K,'missing required property "source"'));return N=N.concat(qn({key:ce,value:K,valueSpec:Ae.layer,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _n({key:ce+".type",value:K.type,valueSpec:Ae.layer.type,style:S.style,styleSpec:S.styleSpec,object:K,objectKey:"type"})},filter:Ga,layout:function(mn){return qn({layer:K,key:mn.key,value:mn.value,style:mn.style,styleSpec:mn.styleSpec,objectElementValidators:{"*":function(Dn){return fs(mt({layerType:We},Dn))}}})},paint:function(mn){return qn({layer:K,key:mn.key,value:mn.value,style:mn.style,styleSpec:mn.styleSpec,objectElementValidators:{"*":function(Dn){return Fo(mt({layerType:We},Dn))}}})}}}))}function $o(S){var N=S.value,K=S.key,ce=ja(N);return"string"!==ce?[new Ke(K,N,"string expected, "+ce+" found")]:[]}var ds={promoteId:function(S){var N=S.key,K=S.value;if("string"===ja(K))return $o({key:N,value:K});var ce=[];for(var xe in K)ce.push.apply(ce,$o({key:N+"."+xe,value:K[xe]}));return ce}};function xa(S){var N=S.value,K=S.key,ce=S.styleSpec,xe=S.style;if(!N.type)return[new Ke(K,N,'"type" is required')];var Ae,Oe=pt(N.type);switch(Oe){case"vector":case"raster":case"raster-dem":return qn({key:K,value:N,valueSpec:ce["source_"+Oe.replace("-","_")],style:S.style,styleSpec:ce,objectElementValidators:ds});case"geojson":if(Ae=qn({key:K,value:N,valueSpec:ce.source_geojson,style:xe,styleSpec:ce,objectElementValidators:ds}),N.cluster)for(var We in N.clusterProperties){var it=N.clusterProperties[We],xt=it[0],Yt="string"==typeof xt?[xt,["accumulated"],["get",We]]:xt;Ae.push.apply(Ae,ai({key:K+"."+We+".map",value:it[1],expressionContext:"cluster-map"})),Ae.push.apply(Ae,ai({key:K+"."+We+".reduce",value:Yt,expressionContext:"cluster-reduce"}))}return Ae;case"video":return qn({key:K,value:N,valueSpec:ce.source_video,style:xe,styleSpec:ce});case"image":return qn({key:K,value:N,valueSpec:ce.source_image,style:xe,styleSpec:ce});case"canvas":return[new Ke(K,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ni({key:K+".type",value:N.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:xe,styleSpec:ce})}}function _t(S){var N=S.value,K=S.styleSpec,ce=K.light,xe=S.style,Ae=[],Oe=ja(N);if(void 0===N)return Ae;if("object"!==Oe)return Ae.concat([new Ke("light",N,"object expected, "+Oe+" found")]);for(var We in N){var it=We.match(/^(.*)-transition$/);Ae=Ae.concat(it&&ce[it[1]]&&ce[it[1]].transition?_n({key:We,value:N[We],valueSpec:K.transition,style:xe,styleSpec:K}):ce[We]?_n({key:We,value:N[We],valueSpec:ce[We],style:xe,styleSpec:K}):[new Ke(We,N[We],'unknown property "'+We+'"')])}return Ae}var qt={"*":function(){return[]},array:kr,boolean:function(S){var N=S.value,K=S.key,ce=ja(N);return"boolean"!==ce?[new Ke(K,N,"boolean expected, "+ce+" found")]:[]},number:Fr,color:function(S){var N=S.key,K=S.value,ce=ja(K);return"string"!==ce?[new Ke(N,K,"color expected, "+ce+" found")]:null===An(K)?[new Ke(N,K,'color expected, "'+K+'" found')]:[]},constants:ft,enum:ni,filter:Ga,function:Xr,layer:hs,object:qn,source:xa,light:_t,string:$o,formatted:function(S){return 0===$o(S).length?[]:ai(S)},resolvedImage:function(S){return 0===$o(S).length?[]:ai(S)}};function _n(S){var N=S.value,K=S.valueSpec,ce=S.styleSpec;return K.expression&&Ye(pt(N))?Xr(S):K.expression&&fn(Ot(N))?ai(S):K.type&&qt[K.type]?qt[K.type](S):qn(mt({},S,{valueSpec:K.type?ce[K.type]:K}))}function nn(S){var N=S.value,K=S.key,ce=$o(S);return ce.length||(-1===N.indexOf("{fontstack}")&&ce.push(new Ke(K,N,'"glyphs" url must include a "{fontstack}" token')),-1===N.indexOf("{range}")&&ce.push(new Ke(K,N,'"glyphs" url must include a "{range}" token'))),ce}function dn(S,N){void 0===N&&(N=je);var K=[];return K=K.concat(_n({key:"",value:S,valueSpec:N.$root,styleSpec:N,style:S,objectElementValidators:{glyphs:nn,"*":function(){return[]}}})),S.constants&&(K=K.concat(ft({key:"constants",value:S.constants,style:S,styleSpec:N}))),Un(K)}function Un(S){return[].concat(S).sort(function(N,K){return N.line-K.line})}function $n(S){return function(){for(var N=[],K=arguments.length;K--;)N[K]=arguments[K];return Un(S.apply(this,N))}}dn.source=$n(xa),dn.light=$n(_t),dn.layer=$n(hs),dn.filter=$n(Ga),dn.paintProperty=$n(Fo),dn.layoutProperty=$n(fs);var cr=dn,Tr=cr.light,Er=cr.paintProperty,Rr=cr.layoutProperty;function jr(S,N){var K=!1;if(N&&N.length)for(var ce=0,xe=N;ce<xe.length;ce+=1)S.fire(new Ve(new Error(xe[ce].message))),K=!0;return K}var _r=Hr;function Hr(S,N,K){var ce=this.cells=[];if(S instanceof ArrayBuffer){this.arrayBuffer=S;var xe=new Int32Array(this.arrayBuffer);S=xe[0],this.d=(N=xe[1])+2*(K=xe[2]);for(var Ae=0;Ae<this.d*this.d;Ae++){var Oe=xe[3+Ae],We=xe[3+Ae+1];ce.push(Oe===We?null:xe.subarray(Oe,We))}var xt=xe[3+ce.length+1];this.keys=xe.subarray(xe[3+ce.length],xt),this.bboxes=xe.subarray(xt),this.insert=this._insertReadonly}else{this.d=N+2*K;for(var Tt=0;Tt<this.d*this.d;Tt++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=N,this.extent=S,this.padding=K,this.scale=N/S,this.uid=0;var Yt=K/N*S;this.min=-Yt,this.max=S+Yt}Hr.prototype.insert=function(S,N,K,ce,xe){this._forEachCell(N,K,ce,xe,this._insertCell,this.uid++),this.keys.push(S),this.bboxes.push(N),this.bboxes.push(K),this.bboxes.push(ce),this.bboxes.push(xe)},Hr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hr.prototype._insertCell=function(S,N,K,ce,xe,Ae){this.cells[xe].push(Ae)},Hr.prototype.query=function(S,N,K,ce,xe){var Ae=this.min,Oe=this.max;if(S<=Ae&&N<=Ae&&Oe<=K&&Oe<=ce&&!xe)return Array.prototype.slice.call(this.keys);var We=[];return this._forEachCell(S,N,K,ce,this._queryCell,We,{},xe),We},Hr.prototype._queryCell=function(S,N,K,ce,xe,Ae,Oe,We){var it=this.cells[xe];if(null!==it)for(var xt=this.keys,Tt=this.bboxes,Yt=0;Yt<it.length;Yt++){var sn=it[Yt];if(void 0===Oe[sn]){var tn=4*sn;(We?We(Tt[tn+0],Tt[tn+1],Tt[tn+2],Tt[tn+3]):S<=Tt[tn+2]&&N<=Tt[tn+3]&&K>=Tt[tn+0]&&ce>=Tt[tn+1])?(Oe[sn]=!0,Ae.push(xt[sn])):Oe[sn]=!1}}},Hr.prototype._forEachCell=function(S,N,K,ce,xe,Ae,Oe,We){for(var it=this._convertToCellCoord(S),xt=this._convertToCellCoord(N),Tt=this._convertToCellCoord(K),Yt=this._convertToCellCoord(ce),sn=it;sn<=Tt;sn++)for(var tn=xt;tn<=Yt;tn++){var mn=this.d*tn+sn;if((!We||We(this._convertFromCellCoord(sn),this._convertFromCellCoord(tn),this._convertFromCellCoord(sn+1),this._convertFromCellCoord(tn+1)))&&xe.call(this,S,N,K,ce,mn,Ae,Oe,We))return}},Hr.prototype._convertFromCellCoord=function(S){return(S-this.padding)/this.scale},Hr.prototype._convertToCellCoord=function(S){return Math.max(0,Math.min(this.d-1,Math.floor(S*this.scale)+this.padding))},Hr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var S=this.cells,N=3+this.cells.length+1+1,K=0,ce=0;ce<this.cells.length;ce++)K+=this.cells[ce].length;var xe=new Int32Array(N+K+this.keys.length+this.bboxes.length);xe[0]=this.extent,xe[1]=this.n,xe[2]=this.padding;for(var Ae=N,Oe=0;Oe<S.length;Oe++){var We=S[Oe];xe[3+Oe]=Ae,xe.set(We,Ae),Ae+=We.length}return xe[3+S.length]=Ae,xe.set(this.keys,Ae),xe[3+S.length+1]=Ae+=this.keys.length,xe.set(this.bboxes,Ae),Ae+=this.bboxes.length,xe.buffer};var ii=self.ImageData,pi=self.ImageBitmap,Ti={};function dr(S,N,K){void 0===K&&(K={}),Object.defineProperty(N,"_classRegistryKey",{value:S,writeable:!1}),Ti[S]={klass:N,omit:K.omit||[],shallow:K.shallow||[]}}for(var ki in dr("Object",Object),_r.serialize=function(S,N){var K=S.toArrayBuffer();return N&&N.push(K),{buffer:K}},_r.deserialize=function(S){return new _r(S.buffer)},dr("Grid",_r),dr("Color",hn),dr("Error",Error),dr("ResolvedImage",In),dr("StylePropertyFunction",Pn),dr("StyleExpression",cn,{omit:["_evaluator"]}),dr("ZoomDependentExpression",Mn),dr("ZoomConstantExpression",vn),dr("CompoundExpression",Kn,{omit:["_evaluate"]}),Ho)Ho[ki]._classRegistryKey||dr("Expression_"+ki,Ho[ki]);function wr(S){return S&&"undefined"!=typeof ArrayBuffer&&(S instanceof ArrayBuffer||S.constructor&&"ArrayBuffer"===S.constructor.name)}function hi(S){return pi&&S instanceof pi}function Ei(S,N){if(null==S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp)return S;if(wr(S)||hi(S))return N&&N.push(S),S;if(ArrayBuffer.isView(S)){var K=S;return N&&N.push(K.buffer),K}if(S instanceof ii)return N&&N.push(S.data.buffer),S;if(Array.isArray(S)){for(var ce=[],xe=0,Ae=S;xe<Ae.length;xe+=1)ce.push(Ei(Ae[xe],N));return ce}if("object"==typeof S){var We=S.constructor,it=We._classRegistryKey;if(!it)throw new Error("can't serialize object of unregistered class");var xt=We.serialize?We.serialize(S,N):{};if(!We.serialize){for(var Tt in S)if(S.hasOwnProperty(Tt)&&!(Ti[it].omit.indexOf(Tt)>=0)){var Yt=S[Tt];xt[Tt]=Ti[it].shallow.indexOf(Tt)>=0?Yt:Ei(Yt,N)}S instanceof Error&&(xt.message=S.message)}if(xt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==it&&(xt.$name=it),xt}throw new Error("can't serialize object of type "+typeof S)}function Ji(S){if(null==S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp||wr(S)||hi(S)||ArrayBuffer.isView(S)||S instanceof ii)return S;if(Array.isArray(S))return S.map(Ji);if("object"==typeof S){var N=S.$name||"Object",K=Ti[N].klass;if(!K)throw new Error("can't deserialize unregistered class "+N);if(K.deserialize)return K.deserialize(S);for(var ce=Object.create(K.prototype),xe=0,Ae=Object.keys(S);xe<Ae.length;xe+=1){var Oe=Ae[xe];if("$name"!==Oe){var We=S[Oe];ce[Oe]=Ti[N].shallow.indexOf(Oe)>=0?We:Ji(We)}}return ce}throw new Error("can't deserialize object of type "+typeof S)}var ya=function(){this.first=!0};ya.prototype.update=function(S,N){var K=Math.floor(S);return this.first?(this.first=!1,this.lastIntegerZoom=K,this.lastIntegerZoomTime=0,this.lastZoom=S,this.lastFloorZoom=K,!0):(this.lastFloorZoom>K?(this.lastIntegerZoom=K+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<K&&(this.lastIntegerZoom=K,this.lastIntegerZoomTime=N),S!==this.lastZoom&&(this.lastZoom=S,this.lastFloorZoom=K,!0))};var Yr={"Latin-1 Supplement":function(S){return S>=128&&S<=255},Arabic:function(S){return S>=1536&&S<=1791},"Arabic Supplement":function(S){return S>=1872&&S<=1919},"Arabic Extended-A":function(S){return S>=2208&&S<=2303},"Hangul Jamo":function(S){return S>=4352&&S<=4607},"Unified Canadian Aboriginal Syllabics":function(S){return S>=5120&&S<=5759},Khmer:function(S){return S>=6016&&S<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(S){return S>=6320&&S<=6399},"General Punctuation":function(S){return S>=8192&&S<=8303},"Letterlike Symbols":function(S){return S>=8448&&S<=8527},"Number Forms":function(S){return S>=8528&&S<=8591},"Miscellaneous Technical":function(S){return S>=8960&&S<=9215},"Control Pictures":function(S){return S>=9216&&S<=9279},"Optical Character Recognition":function(S){return S>=9280&&S<=9311},"Enclosed Alphanumerics":function(S){return S>=9312&&S<=9471},"Geometric Shapes":function(S){return S>=9632&&S<=9727},"Miscellaneous Symbols":function(S){return S>=9728&&S<=9983},"Miscellaneous Symbols and Arrows":function(S){return S>=11008&&S<=11263},"CJK Radicals Supplement":function(S){return S>=11904&&S<=12031},"Kangxi Radicals":function(S){return S>=12032&&S<=12255},"Ideographic Description Characters":function(S){return S>=12272&&S<=12287},"CJK Symbols and Punctuation":function(S){return S>=12288&&S<=12351},Hiragana:function(S){return S>=12352&&S<=12447},Katakana:function(S){return S>=12448&&S<=12543},Bopomofo:function(S){return S>=12544&&S<=12591},"Hangul Compatibility Jamo":function(S){return S>=12592&&S<=12687},Kanbun:function(S){return S>=12688&&S<=12703},"Bopomofo Extended":function(S){return S>=12704&&S<=12735},"CJK Strokes":function(S){return S>=12736&&S<=12783},"Katakana Phonetic Extensions":function(S){return S>=12784&&S<=12799},"Enclosed CJK Letters and Months":function(S){return S>=12800&&S<=13055},"CJK Compatibility":function(S){return S>=13056&&S<=13311},"CJK Unified Ideographs Extension A":function(S){return S>=13312&&S<=19903},"Yijing Hexagram Symbols":function(S){return S>=19904&&S<=19967},"CJK Unified Ideographs":function(S){return S>=19968&&S<=40959},"Yi Syllables":function(S){return S>=40960&&S<=42127},"Yi Radicals":function(S){return S>=42128&&S<=42191},"Hangul Jamo Extended-A":function(S){return S>=43360&&S<=43391},"Hangul Syllables":function(S){return S>=44032&&S<=55215},"Hangul Jamo Extended-B":function(S){return S>=55216&&S<=55295},"Private Use Area":function(S){return S>=57344&&S<=63743},"CJK Compatibility Ideographs":function(S){return S>=63744&&S<=64255},"Arabic Presentation Forms-A":function(S){return S>=64336&&S<=65023},"Vertical Forms":function(S){return S>=65040&&S<=65055},"CJK Compatibility Forms":function(S){return S>=65072&&S<=65103},"Small Form Variants":function(S){return S>=65104&&S<=65135},"Arabic Presentation Forms-B":function(S){return S>=65136&&S<=65279},"Halfwidth and Fullwidth Forms":function(S){return S>=65280&&S<=65519}};function Ma(S){for(var N=0,K=S;N<K.length;N+=1)if(pr(K[N].charCodeAt(0)))return!0;return!1}function ha(S){return!(Yr.Arabic(S)||Yr["Arabic Supplement"](S)||Yr["Arabic Extended-A"](S)||Yr["Arabic Presentation Forms-A"](S)||Yr["Arabic Presentation Forms-B"](S))}function pr(S){return!(746!==S&&747!==S&&(S<4352||!(Yr["Bopomofo Extended"](S)||Yr.Bopomofo(S)||Yr["CJK Compatibility Forms"](S)&&!(S>=65097&&S<=65103)||Yr["CJK Compatibility Ideographs"](S)||Yr["CJK Compatibility"](S)||Yr["CJK Radicals Supplement"](S)||Yr["CJK Strokes"](S)||!(!Yr["CJK Symbols and Punctuation"](S)||S>=12296&&S<=12305||S>=12308&&S<=12319||12336===S)||Yr["CJK Unified Ideographs Extension A"](S)||Yr["CJK Unified Ideographs"](S)||Yr["Enclosed CJK Letters and Months"](S)||Yr["Hangul Compatibility Jamo"](S)||Yr["Hangul Jamo Extended-A"](S)||Yr["Hangul Jamo Extended-B"](S)||Yr["Hangul Jamo"](S)||Yr["Hangul Syllables"](S)||Yr.Hiragana(S)||Yr["Ideographic Description Characters"](S)||Yr.Kanbun(S)||Yr["Kangxi Radicals"](S)||Yr["Katakana Phonetic Extensions"](S)||Yr.Katakana(S)&&12540!==S||!(!Yr["Halfwidth and Fullwidth Forms"](S)||65288===S||65289===S||65293===S||S>=65306&&S<=65310||65339===S||65341===S||65343===S||S>=65371&&S<=65503||65507===S||S>=65512&&S<=65519)||!(!Yr["Small Form Variants"](S)||S>=65112&&S<=65118||S>=65123&&S<=65126)||Yr["Unified Canadian Aboriginal Syllabics"](S)||Yr["Unified Canadian Aboriginal Syllabics Extended"](S)||Yr["Vertical Forms"](S)||Yr["Yijing Hexagram Symbols"](S)||Yr["Yi Syllables"](S)||Yr["Yi Radicals"](S))))}function Di(S){return!(pr(S)||(N=S,Yr["Latin-1 Supplement"](N)&&(167===N||169===N||174===N||177===N||188===N||189===N||190===N||215===N||247===N)||Yr["General Punctuation"](N)&&(8214===N||8224===N||8225===N||8240===N||8241===N||8251===N||8252===N||8258===N||8263===N||8264===N||8265===N||8273===N)||Yr["Letterlike Symbols"](N)||Yr["Number Forms"](N)||Yr["Miscellaneous Technical"](N)&&(N>=8960&&N<=8967||N>=8972&&N<=8991||N>=8996&&N<=9e3||9003===N||N>=9085&&N<=9114||N>=9150&&N<=9165||9167===N||N>=9169&&N<=9179||N>=9186&&N<=9215)||Yr["Control Pictures"](N)&&9251!==N||Yr["Optical Character Recognition"](N)||Yr["Enclosed Alphanumerics"](N)||Yr["Geometric Shapes"](N)||Yr["Miscellaneous Symbols"](N)&&!(N>=9754&&N<=9759)||Yr["Miscellaneous Symbols and Arrows"](N)&&(N>=11026&&N<=11055||N>=11088&&N<=11097||N>=11192&&N<=11243)||Yr["CJK Symbols and Punctuation"](N)||Yr.Katakana(N)||Yr["Private Use Area"](N)||Yr["CJK Compatibility Forms"](N)||Yr["Small Form Variants"](N)||Yr["Halfwidth and Fullwidth Forms"](N)||8734===N||8756===N||8757===N||N>=9984&&N<=10087||N>=10102&&N<=10131||65532===N||65533===N));var N}function Qi(S){return S>=1424&&S<=2303||Yr["Arabic Presentation Forms-A"](S)||Yr["Arabic Presentation Forms-B"](S)}function aa(S,N){return!(!N&&Qi(S)||S>=2304&&S<=3583||S>=3840&&S<=4255||Yr.Khmer(S))}function Si(S){for(var N=0,K=S;N<K.length;N+=1)if(Qi(K[N].charCodeAt(0)))return!0;return!1}var Ia="deferred",ao="loading",Xs="loaded",Ds=null,$i="unavailable",lo=null,ns=function(S){S&&"string"==typeof S&&S.indexOf("NetworkError")>-1&&($i="error"),Ds&&Ds(S)};function ua(){Ja.fire(new Be("pluginStateChange",{pluginStatus:$i,pluginURL:lo}))}var Ja=new Le,Wo=function(){return $i},za=function(){if($i!==Ia||!lo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$i=ao,ua(),lo&&Nt({url:lo},function(S){S?ns(S):($i=Xs,ua())})},Mo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return $i===Xs||null!=Mo.applyArabicShaping},isLoading:function(){return $i===ao},setState:function(S){$i=S.pluginStatus,lo=S.pluginURL},isParsed:function(){return null!=Mo.applyArabicShaping&&null!=Mo.processBidirectionalText&&null!=Mo.processStyledBidirectionalText},getPluginURL:function(){return lo}},Qa=function(S,N){this.zoom=S,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ya,this.transition={})};Qa.prototype.isSupportedScript=function(S){return function(N,K){for(var ce=0,xe=N;ce<xe.length;ce+=1)if(!aa(xe[ce].charCodeAt(0),K))return!1;return!0}(S,Mo.isLoaded())},Qa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Qa.prototype.getCrossfadeParameters=function(){var S=this.zoom,N=S-Math.floor(S),K=this.crossFadingFactor();return S>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*K}:{fromScale:.5,toScale:1,t:1-(1-K)*N}};var rs=function(S,N){this.property=S,this.value=N,this.expression=function(K,ce){if(Ye(K))return new Pn(K,ce);if(fn(K)){var xe=Ln(K,ce);if("error"===xe.result)throw new Error(xe.value.map(function(Oe){return Oe.key+": "+Oe.message}).join(", "));return xe.value}var Ae=K;return"string"==typeof K&&"color"===ce.type&&(Ae=hn.parse(K)),{kind:"constant",evaluate:function(){return Ae}}}(void 0===N?S.specification.default:N,S.specification)};rs.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},rs.prototype.possiblyEvaluate=function(S,N,K){return this.property.possiblyEvaluate(this,S,N,K)};var Al=function(S){this.property=S,this.value=new rs(S,void 0)};Al.prototype.transitioned=function(S,N){return new Wl(this.property,this.value,N,c({},S.transition,this.transition),S.now)},Al.prototype.untransitioned=function(){return new Wl(this.property,this.value,null,{},0)};var vl=function(S){this._properties=S,this._values=Object.create(S.defaultTransitionablePropertyValues)};vl.prototype.getValue=function(S){return E(this._values[S].value.value)},vl.prototype.setValue=function(S,N){this._values.hasOwnProperty(S)||(this._values[S]=new Al(this._values[S].property)),this._values[S].value=new rs(this._values[S].property,null===N?void 0:E(N))},vl.prototype.getTransition=function(S){return E(this._values[S].transition)},vl.prototype.setTransition=function(S,N){this._values.hasOwnProperty(S)||(this._values[S]=new Al(this._values[S].property)),this._values[S].transition=E(N)||void 0},vl.prototype.serialize=function(){for(var S={},N=0,K=Object.keys(this._values);N<K.length;N+=1){var ce=K[N],xe=this.getValue(ce);void 0!==xe&&(S[ce]=xe);var Ae=this.getTransition(ce);void 0!==Ae&&(S[ce+"-transition"]=Ae)}return S},vl.prototype.transitioned=function(S,N){for(var K=new Lo(this._properties),ce=0,xe=Object.keys(this._values);ce<xe.length;ce+=1){var Ae=xe[ce];K._values[Ae]=this._values[Ae].transitioned(S,N._values[Ae])}return K},vl.prototype.untransitioned=function(){for(var S=new Lo(this._properties),N=0,K=Object.keys(this._values);N<K.length;N+=1){var ce=K[N];S._values[ce]=this._values[ce].untransitioned()}return S};var Wl=function(S,N,K,ce,xe){this.property=S,this.value=N,this.begin=xe+ce.delay||0,this.end=this.begin+ce.duration||0,S.specification.transition&&(ce.delay||ce.duration)&&(this.prior=K)};Wl.prototype.possiblyEvaluate=function(S,N,K){var ce=S.now||0,xe=this.value.possiblyEvaluate(S,N,K),Ae=this.prior;if(Ae){if(ce>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(ce<this.begin)return Ae.possiblyEvaluate(S,N,K);var Oe=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(Ae.possiblyEvaluate(S,N,K),xe,function(We){if(We<=0)return 0;if(We>=1)return 1;var it=We*We,xt=it*We;return 4*(We<.5?xt:3*(We-it)+xt-.75)}(Oe))}return xe};var Lo=function(S){this._properties=S,this._values=Object.create(S.defaultTransitioningPropertyValues)};Lo.prototype.possiblyEvaluate=function(S,N,K){for(var ce=new xl(this._properties),xe=0,Ae=Object.keys(this._values);xe<Ae.length;xe+=1){var Oe=Ae[xe];ce._values[Oe]=this._values[Oe].possiblyEvaluate(S,N,K)}return ce},Lo.prototype.hasTransition=function(){for(var S=0,N=Object.keys(this._values);S<N.length;S+=1)if(this._values[N[S]].prior)return!0;return!1};var Kl=function(S){this._properties=S,this._values=Object.create(S.defaultPropertyValues)};Kl.prototype.getValue=function(S){return E(this._values[S].value)},Kl.prototype.setValue=function(S,N){this._values[S]=new rs(this._values[S].property,null===N?void 0:E(N))},Kl.prototype.serialize=function(){for(var S={},N=0,K=Object.keys(this._values);N<K.length;N+=1){var ce=K[N],xe=this.getValue(ce);void 0!==xe&&(S[ce]=xe)}return S},Kl.prototype.possiblyEvaluate=function(S,N,K){for(var ce=new xl(this._properties),xe=0,Ae=Object.keys(this._values);xe<Ae.length;xe+=1){var Oe=Ae[xe];ce._values[Oe]=this._values[Oe].possiblyEvaluate(S,N,K)}return ce};var Io=function(S,N,K){this.property=S,this.value=N,this.parameters=K};Io.prototype.isConstant=function(){return"constant"===this.value.kind},Io.prototype.constantOr=function(S){return"constant"===this.value.kind?this.value.value:S},Io.prototype.evaluate=function(S,N,K,ce){return this.property.evaluate(this.value,this.parameters,S,N,K,ce)};var xl=function(S){this._properties=S,this._values=Object.create(S.defaultPossiblyEvaluatedValues)};xl.prototype.get=function(S){return this._values[S]};var Pi=function(S){this.specification=S};Pi.prototype.possiblyEvaluate=function(S,N){return S.expression.evaluate(N)},Pi.prototype.interpolate=function(S,N,K){var ce=Ur[this.specification.type];return ce?ce(S,N,K):S};var Gi=function(S,N){this.specification=S,this.overrides=N};Gi.prototype.possiblyEvaluate=function(S,N,K,ce){return new Io(this,"constant"===S.expression.kind||"camera"===S.expression.kind?{kind:"constant",value:S.expression.evaluate(N,null,{},K,ce)}:S.expression,N)},Gi.prototype.interpolate=function(S,N,K){if("constant"!==S.value.kind||"constant"!==N.value.kind)return S;if(void 0===S.value.value||void 0===N.value.value)return new Io(this,{kind:"constant",value:void 0},S.parameters);var ce=Ur[this.specification.type];return ce?new Io(this,{kind:"constant",value:ce(S.value.value,N.value.value,K)},S.parameters):S},Gi.prototype.evaluate=function(S,N,K,ce,xe,Ae){return"constant"===S.kind?S.value:S.evaluate(N,K,ce,xe,Ae)};var Jl=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.possiblyEvaluate=function(K,ce,xe,Ae){if(void 0===K.value)return new Io(this,{kind:"constant",value:void 0},ce);if("constant"===K.expression.kind){var Oe=K.expression.evaluate(ce,null,{},xe,Ae),We="resolvedImage"===K.property.specification.type&&"string"!=typeof Oe?Oe.name:Oe,it=this._calculate(We,We,We,ce);return new Io(this,{kind:"constant",value:it},ce)}if("camera"===K.expression.kind){var xt=this._calculate(K.expression.evaluate({zoom:ce.zoom-1}),K.expression.evaluate({zoom:ce.zoom}),K.expression.evaluate({zoom:ce.zoom+1}),ce);return new Io(this,{kind:"constant",value:xt},ce)}return new Io(this,K.expression,ce)},N.prototype.evaluate=function(K,ce,xe,Ae,Oe,We){if("source"===K.kind){var it=K.evaluate(ce,xe,Ae,Oe,We);return this._calculate(it,it,it,ce)}return"composite"===K.kind?this._calculate(K.evaluate({zoom:Math.floor(ce.zoom)-1},xe,Ae),K.evaluate({zoom:Math.floor(ce.zoom)},xe,Ae),K.evaluate({zoom:Math.floor(ce.zoom)+1},xe,Ae),ce):K.value},N.prototype._calculate=function(K,ce,xe,Ae){return Ae.zoom>Ae.zoomHistory.lastIntegerZoom?{from:K,to:ce}:{from:xe,to:ce}},N.prototype.interpolate=function(K){return K},N}(Gi),Ql=function(S){this.specification=S};Ql.prototype.possiblyEvaluate=function(S,N,K,ce){if(void 0!==S.value){if("constant"===S.expression.kind){var xe=S.expression.evaluate(N,null,{},K,ce);return this._calculate(xe,xe,xe,N)}return this._calculate(S.expression.evaluate(new Qa(Math.floor(N.zoom-1),N)),S.expression.evaluate(new Qa(Math.floor(N.zoom),N)),S.expression.evaluate(new Qa(Math.floor(N.zoom+1),N)),N)}},Ql.prototype._calculate=function(S,N,K,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:S,to:N}:{from:K,to:N}},Ql.prototype.interpolate=function(S){return S};var hl=function(S){this.specification=S};hl.prototype.possiblyEvaluate=function(S,N,K,ce){return!!S.expression.evaluate(N,null,{},K,ce)},hl.prototype.interpolate=function(){return!1};var Ls=function(S){for(var N in this.properties=S,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],S){var K=S[N];K.specification.overridable&&this.overridableProperties.push(N);var ce=this.defaultPropertyValues[N]=new rs(K,void 0),xe=this.defaultTransitionablePropertyValues[N]=new Al(K);this.defaultTransitioningPropertyValues[N]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=ce.possiblyEvaluate({})}};dr("DataDrivenProperty",Gi),dr("DataConstantProperty",Pi),dr("CrossFadedDataDrivenProperty",Jl),dr("CrossFadedProperty",Ql),dr("ColorRampProperty",hl);var Is=function(S){function N(K,ce){if(S.call(this),this.id=K.id,this.type=K.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==K.type&&(this.metadata=(K=K).metadata,this.minzoom=K.minzoom,this.maxzoom=K.maxzoom,"background"!==K.type&&(this.source=K.source,this.sourceLayer=K["source-layer"],this.filter=K.filter),ce.layout&&(this._unevaluatedLayout=new Kl(ce.layout)),ce.paint)){for(var xe in this._transitionablePaint=new vl(ce.paint),K.paint)this.setPaintProperty(xe,K.paint[xe],{validate:!1});for(var Ae in K.layout)this.setLayoutProperty(Ae,K.layout[Ae],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xl(ce.paint)}}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},N.prototype.getLayoutProperty=function(K){return"visibility"===K?this.visibility:this._unevaluatedLayout.getValue(K)},N.prototype.setLayoutProperty=function(K,ce,xe){void 0===xe&&(xe={}),null!=ce&&this._validate(Rr,"layers."+this.id+".layout."+K,K,ce,xe)||("visibility"!==K?this._unevaluatedLayout.setValue(K,ce):this.visibility=ce)},N.prototype.getPaintProperty=function(K){return A(K,"-transition")?this._transitionablePaint.getTransition(K.slice(0,-11)):this._transitionablePaint.getValue(K)},N.prototype.setPaintProperty=function(K,ce,xe){if(void 0===xe&&(xe={}),null!=ce&&this._validate(Er,"layers."+this.id+".paint."+K,K,ce,xe))return!1;if(A(K,"-transition"))return this._transitionablePaint.setTransition(K.slice(0,-11),ce||void 0),!1;var Oe=this._transitionablePaint._values[K],We="cross-faded-data-driven"===Oe.property.specification["property-type"],it=Oe.value.isDataDriven(),xt=Oe.value;this._transitionablePaint.setValue(K,ce),this._handleSpecialPaintPropertyUpdate(K);var Tt=this._transitionablePaint._values[K].value;return Tt.isDataDriven()||it||We||this._handleOverridablePaintPropertyUpdate(K,xt,Tt)},N.prototype._handleSpecialPaintPropertyUpdate=function(K){},N.prototype._handleOverridablePaintPropertyUpdate=function(K,ce,xe){return!1},N.prototype.isHidden=function(K){return!!(this.minzoom&&K<this.minzoom)||!!(this.maxzoom&&K>=this.maxzoom)||"none"===this.visibility},N.prototype.updateTransitions=function(K){this._transitioningPaint=this._transitionablePaint.transitioned(K,this._transitioningPaint)},N.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},N.prototype.recalculate=function(K,ce){K.getCrossfadeParameters&&(this._crossfadeParameters=K.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(K,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(K,void 0,ce)},N.prototype.serialize=function(){var K={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(K.layout=K.layout||{},K.layout.visibility=this.visibility),k(K,function(ce,xe){return!(void 0===ce||"layout"===xe&&!Object.keys(ce).length||"paint"===xe&&!Object.keys(ce).length)})},N.prototype._validate=function(K,ce,xe,Ae,Oe){return void 0===Oe&&(Oe={}),(!Oe||!1!==Oe.validate)&&jr(this,K.call(cr,{key:ce,layerType:this.type,objectKey:xe,value:Ae,styleSpec:je,style:{glyphs:!0,sprite:!0}}))},N.prototype.is3D=function(){return!1},N.prototype.isTileClipped=function(){return!1},N.prototype.hasOffscreenPass=function(){return!1},N.prototype.resize=function(){},N.prototype.isStateDependent=function(){for(var K in this.paint._values){var ce=this.paint.get(K);if(ce instanceof Io&&tl(ce.property.specification)&&("source"===ce.value.kind||"composite"===ce.value.kind)&&ce.value.isStateDependent)return!0}return!1},N}(Le),pc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},eu=function(S,N){this._structArray=S,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ca=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Pa(S,N){void 0===N&&(N=1);var K=0,ce=0;return{members:S.map(function(xe){var Oe=pc[xe.type].BYTES_PER_ELEMENT,We=K=uo(K,Math.max(N,Oe)),it=xe.components||1;return ce=Math.max(ce,Oe),K+=Oe*it,{name:xe.name,type:xe.type,components:it,offset:We}}),size:uo(K,Math.max(ce,N)),alignment:N}}function uo(S,N){return Math.ceil(S/N)*N}ca.serialize=function(S,N){return S._trim(),N&&(S.isTransferred=!0,N.push(S.arrayBuffer)),{length:S.length,arrayBuffer:S.arrayBuffer}},ca.deserialize=function(S){var N=Object.create(this.prototype);return N.arrayBuffer=S.arrayBuffer,N.length=S.length,N.capacity=S.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},ca.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ca.prototype.clear=function(){this.length=0},ca.prototype.resize=function(S){this.reserve(S),this.length=S},ca.prototype.reserve=function(S){if(S>this.capacity){this.capacity=Math.max(S,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},ca.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var bl=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,K,ce)},N.prototype.emplace=function(K,ce,xe){var Ae=2*K;return this.int16[Ae+0]=ce,this.int16[Ae+1]=xe,K},N}(ca);bl.prototype.bytesPerElement=4,dr("StructArrayLayout2i4",bl);var No=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,K,ce,xe,Ae)},N.prototype.emplace=function(K,ce,xe,Ae,Oe){var We=4*K;return this.int16[We+0]=ce,this.int16[We+1]=xe,this.int16[We+2]=Ae,this.int16[We+3]=Oe,K},N}(ca);No.prototype.bytesPerElement=8,dr("StructArrayLayout4i8",No);var kl=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We){var it=this.length;return this.resize(it+1),this.emplace(it,K,ce,xe,Ae,Oe,We)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it){var xt=6*K;return this.int16[xt+0]=ce,this.int16[xt+1]=xe,this.int16[xt+2]=Ae,this.int16[xt+3]=Oe,this.int16[xt+4]=We,this.int16[xt+5]=it,K},N}(ca);kl.prototype.bytesPerElement=12,dr("StructArrayLayout2i4i12",kl);var tu=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We){var it=this.length;return this.resize(it+1),this.emplace(it,K,ce,xe,Ae,Oe,We)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it){var xt=4*K,Tt=8*K;return this.int16[xt+0]=ce,this.int16[xt+1]=xe,this.uint8[Tt+4]=Ae,this.uint8[Tt+5]=Oe,this.uint8[Tt+6]=We,this.uint8[Tt+7]=it,K},N}(ca);tu.prototype.bytesPerElement=8,dr("StructArrayLayout2i4ub8",tu);var Yl=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt){var sn=this.length;return this.resize(sn+1),this.emplace(sn,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn){var tn=9*K,mn=18*K;return this.uint16[tn+0]=ce,this.uint16[tn+1]=xe,this.uint16[tn+2]=Ae,this.uint16[tn+3]=Oe,this.uint16[tn+4]=We,this.uint16[tn+5]=it,this.uint16[tn+6]=xt,this.uint16[tn+7]=Tt,this.uint8[mn+16]=Yt,this.uint8[mn+17]=sn,K},N}(ca);Yl.prototype.bytesPerElement=18,dr("StructArrayLayout8ui2ub18",Yl);var nu=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn){var mn=this.length;return this.resize(mn+1),this.emplace(mn,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn){var Dn=12*K;return this.int16[Dn+0]=ce,this.int16[Dn+1]=xe,this.int16[Dn+2]=Ae,this.int16[Dn+3]=Oe,this.uint16[Dn+4]=We,this.uint16[Dn+5]=it,this.uint16[Dn+6]=xt,this.uint16[Dn+7]=Tt,this.int16[Dn+8]=Yt,this.int16[Dn+9]=sn,this.int16[Dn+10]=tn,this.int16[Dn+11]=mn,K},N}(ca);nu.prototype.bytesPerElement=24,dr("StructArrayLayout4i4ui4i24",nu);var nl=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},N.prototype.emplace=function(K,ce,xe,Ae){var Oe=3*K;return this.float32[Oe+0]=ce,this.float32[Oe+1]=xe,this.float32[Oe+2]=Ae,K},N}(ca);nl.prototype.bytesPerElement=12,dr("StructArrayLayout3f12",nl);var ru=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},N.prototype.emplace=function(K,ce){return this.uint32[1*K+0]=ce,K},N}(ca);ru.prototype.bytesPerElement=4,dr("StructArrayLayout1ul4",ru);var ku=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We,it,xt,Tt){var Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,K,ce,xe,Ae,Oe,We,it,xt,Tt)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt){var sn=10*K,tn=5*K;return this.int16[sn+0]=ce,this.int16[sn+1]=xe,this.int16[sn+2]=Ae,this.int16[sn+3]=Oe,this.int16[sn+4]=We,this.int16[sn+5]=it,this.uint32[tn+3]=xt,this.uint16[sn+8]=Tt,this.uint16[sn+9]=Yt,K},N}(ca);ku.prototype.bytesPerElement=20,dr("StructArrayLayout6i1ul2ui20",ku);var _l=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We){var it=this.length;return this.resize(it+1),this.emplace(it,K,ce,xe,Ae,Oe,We)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it){var xt=6*K;return this.int16[xt+0]=ce,this.int16[xt+1]=xe,this.int16[xt+2]=Ae,this.int16[xt+3]=Oe,this.int16[xt+4]=We,this.int16[xt+5]=it,K},N}(ca);_l.prototype.bytesPerElement=12,dr("StructArrayLayout2i2i2i12",_l);var Xu=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe){var We=this.length;return this.resize(We+1),this.emplace(We,K,ce,xe,Ae,Oe)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We){var it=4*K,xt=8*K;return this.float32[it+0]=ce,this.float32[it+1]=xe,this.float32[it+2]=Ae,this.int16[xt+6]=Oe,this.int16[xt+7]=We,K},N}(ca);Xu.prototype.bytesPerElement=16,dr("StructArrayLayout2f1f2i16",Xu);var iu=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,K,ce,xe,Ae)},N.prototype.emplace=function(K,ce,xe,Ae,Oe){var We=12*K,it=3*K;return this.uint8[We+0]=ce,this.uint8[We+1]=xe,this.float32[it+1]=Ae,this.float32[it+2]=Oe,K},N}(ca);iu.prototype.bytesPerElement=12,dr("StructArrayLayout2ub2f12",iu);var Ao=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},N.prototype.emplace=function(K,ce,xe,Ae){var Oe=3*K;return this.uint16[Oe+0]=ce,this.uint16[Oe+1]=xe,this.uint16[Oe+2]=Ae,K},N}(ca);Ao.prototype.bytesPerElement=6,dr("StructArrayLayout3ui6",Ao);var au=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn,Bn,Vn,er){var ir=this.length;return this.resize(ir+1),this.emplace(ir,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn,Bn,Vn,er)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn,Bn,Vn,er,ir){var hr=24*K,Ir=12*K,Vr=48*K;return this.int16[hr+0]=ce,this.int16[hr+1]=xe,this.uint16[hr+2]=Ae,this.uint16[hr+3]=Oe,this.uint32[Ir+2]=We,this.uint32[Ir+3]=it,this.uint32[Ir+4]=xt,this.uint16[hr+10]=Tt,this.uint16[hr+11]=Yt,this.uint16[hr+12]=sn,this.float32[Ir+7]=tn,this.float32[Ir+8]=mn,this.uint8[Vr+36]=Dn,this.uint8[Vr+37]=Bn,this.uint8[Vr+38]=Vn,this.uint32[Ir+10]=er,this.int16[hr+22]=ir,K},N}(ca);au.prototype.bytesPerElement=48,dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",au);var Hc=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn,Bn,Vn,er,ir,hr,Ir,Vr,si,oi,yi,Li,$r,ui,zi){var Ri=this.length;return this.resize(Ri+1),this.emplace(Ri,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn,Bn,Vn,er,ir,hr,Ir,Vr,si,oi,yi,Li,$r,ui,zi)},N.prototype.emplace=function(K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn,Bn,Vn,er,ir,hr,Ir,Vr,si,oi,yi,Li,$r,ui,zi,Ri){var Ci=34*K,va=17*K;return this.int16[Ci+0]=ce,this.int16[Ci+1]=xe,this.int16[Ci+2]=Ae,this.int16[Ci+3]=Oe,this.int16[Ci+4]=We,this.int16[Ci+5]=it,this.int16[Ci+6]=xt,this.int16[Ci+7]=Tt,this.uint16[Ci+8]=Yt,this.uint16[Ci+9]=sn,this.uint16[Ci+10]=tn,this.uint16[Ci+11]=mn,this.uint16[Ci+12]=Dn,this.uint16[Ci+13]=Bn,this.uint16[Ci+14]=Vn,this.uint16[Ci+15]=er,this.uint16[Ci+16]=ir,this.uint16[Ci+17]=hr,this.uint16[Ci+18]=Ir,this.uint16[Ci+19]=Vr,this.uint16[Ci+20]=si,this.uint16[Ci+21]=oi,this.uint16[Ci+22]=yi,this.uint32[va+12]=Li,this.float32[va+13]=$r,this.float32[va+14]=ui,this.float32[va+15]=zi,this.float32[va+16]=Ri,K},N}(ca);Hc.prototype.bytesPerElement=68,dr("StructArrayLayout8i15ui1ul4f68",Hc);var pe=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},N.prototype.emplace=function(K,ce){return this.float32[1*K+0]=ce,K},N}(ca);pe.prototype.bytesPerElement=4,dr("StructArrayLayout1f4",pe);var O=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},N.prototype.emplace=function(K,ce,xe,Ae){var Oe=3*K;return this.int16[Oe+0]=ce,this.int16[Oe+1]=xe,this.int16[Oe+2]=Ae,K},N}(ca);O.prototype.bytesPerElement=6,dr("StructArrayLayout3i6",O);var z=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},N.prototype.emplace=function(K,ce,xe,Ae){var We=4*K;return this.uint32[2*K+0]=ce,this.uint16[We+2]=xe,this.uint16[We+3]=Ae,K},N}(ca);z.prototype.bytesPerElement=8,dr("StructArrayLayout1ul2ui8",z);var U=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,K,ce)},N.prototype.emplace=function(K,ce,xe){var Ae=2*K;return this.uint16[Ae+0]=ce,this.uint16[Ae+1]=xe,K},N}(ca);U.prototype.bytesPerElement=4,dr("StructArrayLayout2ui4",U);var X=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},N.prototype.emplace=function(K,ce){return this.uint16[1*K+0]=ce,K},N}(ca);X.prototype.bytesPerElement=2,dr("StructArrayLayout1ui2",X);var fe=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,K,ce)},N.prototype.emplace=function(K,ce,xe){var Ae=2*K;return this.float32[Ae+0]=ce,this.float32[Ae+1]=xe,K},N}(ca);fe.prototype.bytesPerElement=8,dr("StructArrayLayout2f8",fe);var ye=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(K,ce,xe,Ae){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,K,ce,xe,Ae)},N.prototype.emplace=function(K,ce,xe,Ae,Oe){var We=4*K;return this.float32[We+0]=ce,this.float32[We+1]=xe,this.float32[We+2]=Ae,this.float32[We+3]=Oe,K},N}(ca);ye.prototype.bytesPerElement=16,dr("StructArrayLayout4f16",ye);var we=function(S){function N(){S.apply(this,arguments)}S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N;var K={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return K.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},K.x1.get=function(){return this._structArray.int16[this._pos2+2]},K.y1.get=function(){return this._structArray.int16[this._pos2+3]},K.x2.get=function(){return this._structArray.int16[this._pos2+4]},K.y2.get=function(){return this._structArray.int16[this._pos2+5]},K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(N.prototype,K),N}(eu);we.prototype.size=20;var ke=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.get=function(K){return new we(this,K)},N}(ku);dr("CollisionBoxArray",ke);var Pe=function(S){function N(){S.apply(this,arguments)}S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},K.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},K.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},K.segment.get=function(){return this._structArray.uint16[this._pos2+10]},K.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},K.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},K.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},K.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},K.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},K.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},K.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},K.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},K.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},K.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},K.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(N.prototype,K),N}(eu);Pe.prototype.size=48;var Ze=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.get=function(K){return new Pe(this,K)},N}(au);dr("PlacedSymbolArray",Ze);var nt=function(S){function N(){S.apply(this,arguments)}S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},K.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},K.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},K.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},K.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},K.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},K.key.get=function(){return this._structArray.uint16[this._pos2+8]},K.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},K.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},K.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},K.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},K.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},K.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},K.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},K.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},K.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},K.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},K.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},K.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},K.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},K.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},K.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},K.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},K.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},K.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(N.prototype,K),N}(eu);nt.prototype.size=68;var ht=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.get=function(K){return new nt(this,K)},N}(Hc);dr("SymbolInstanceArray",ht);var St=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.getoffsetX=function(K){return this.float32[1*K+0]},N}(pe);dr("GlyphOffsetArray",St);var jt=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.getx=function(K){return this.int16[3*K+0]},N.prototype.gety=function(K){return this.int16[3*K+1]},N.prototype.gettileUnitDistanceFromAnchor=function(K){return this.int16[3*K+2]},N}(O);dr("SymbolLineVertexArray",jt);var Lt=function(S){function N(){S.apply(this,arguments)}S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N;var K={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(N.prototype,K),N}(eu);Lt.prototype.size=8;var Ft=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.get=function(K){return new Lt(this,K)},N}(z);dr("FeatureIndexArray",Ft);var kt=Pa([{name:"a_pos",components:2,type:"Int16"}],4).members,Xt=function(S){void 0===S&&(S=[]),this.segments=S};function Gt(S,N){return 256*(S=d(Math.floor(S),0,255))+d(Math.floor(N),0,255)}Xt.prototype.prepareSegment=function(S,N,K,ce){var xe=this.segments[this.segments.length-1];return S>Xt.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Xt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+S),(!xe||xe.vertexLength+S>Xt.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==ce)&&(xe={vertexOffset:N.length,primitiveOffset:K.length,vertexLength:0,primitiveLength:0},void 0!==ce&&(xe.sortKey=ce),this.segments.push(xe)),xe},Xt.prototype.get=function(){return this.segments},Xt.prototype.destroy=function(){for(var S=0,N=this.segments;S<N.length;S+=1){var K=N[S];for(var ce in K.vaos)K.vaos[ce].destroy()}},Xt.simpleSegment=function(S,N,K,ce){return new Xt([{vertexOffset:S,primitiveOffset:N,vertexLength:K,primitiveLength:ce,vaos:{},sortKey:0}])},Xt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dr("SegmentVector",Xt);var Qt=Pa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),gn=o(function(S){S.exports=function(N,K){var ce,xe,Ae,Oe,We,it,xt,Tt;for(xe=N.length-(ce=3&N.length),Ae=K,We=3432918353,it=461845907,Tt=0;Tt<xe;)xt=255&N.charCodeAt(Tt)|(255&N.charCodeAt(++Tt))<<8|(255&N.charCodeAt(++Tt))<<16|(255&N.charCodeAt(++Tt))<<24,++Tt,Ae=27492+(65535&(Oe=5*(65535&(Ae=(Ae^=xt=(65535&(xt=(xt=(65535&xt)*We+(((xt>>>16)*We&65535)<<16)&4294967295)<<15|xt>>>17))*it+(((xt>>>16)*it&65535)<<16)&4294967295)<<13|Ae>>>19))+((5*(Ae>>>16)&65535)<<16)&4294967295))+((58964+(Oe>>>16)&65535)<<16);switch(xt=0,ce){case 3:xt^=(255&N.charCodeAt(Tt+2))<<16;case 2:xt^=(255&N.charCodeAt(Tt+1))<<8;case 1:Ae^=xt=(65535&(xt=(xt=(65535&(xt^=255&N.charCodeAt(Tt)))*We+(((xt>>>16)*We&65535)<<16)&4294967295)<<15|xt>>>17))*it+(((xt>>>16)*it&65535)<<16)&4294967295}return Ae^=N.length,Ae=2246822507*(65535&(Ae^=Ae>>>16))+((2246822507*(Ae>>>16)&65535)<<16)&4294967295,Ae=3266489909*(65535&(Ae^=Ae>>>13))+((3266489909*(Ae>>>16)&65535)<<16)&4294967295,(Ae^=Ae>>>16)>>>0}}),kn=o(function(S){S.exports=function(N,K){for(var ce,xe=N.length,Ae=K^xe,Oe=0;xe>=4;)ce=1540483477*(65535&(ce=255&N.charCodeAt(Oe)|(255&N.charCodeAt(++Oe))<<8|(255&N.charCodeAt(++Oe))<<16|(255&N.charCodeAt(++Oe))<<24))+((1540483477*(ce>>>16)&65535)<<16),Ae=1540483477*(65535&Ae)+((1540483477*(Ae>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),xe-=4,++Oe;switch(xe){case 3:Ae^=(255&N.charCodeAt(Oe+2))<<16;case 2:Ae^=(255&N.charCodeAt(Oe+1))<<8;case 1:Ae=1540483477*(65535&(Ae^=255&N.charCodeAt(Oe)))+((1540483477*(Ae>>>16)&65535)<<16)}return Ae=1540483477*(65535&(Ae^=Ae>>>13))+((1540483477*(Ae>>>16)&65535)<<16),(Ae^=Ae>>>15)>>>0}}),jn=gn,mr=kn;jn.murmur3=gn,jn.murmur2=mr;var gr=function(){this.ids=[],this.positions=[],this.indexed=!1};gr.prototype.add=function(S,N,K,ce){this.ids.push(Cr(S)),this.positions.push(N,K,ce)},gr.prototype.getPositions=function(S){for(var N=Cr(S),K=0,ce=this.ids.length-1;K<ce;){var xe=K+ce>>1;this.ids[xe]>=N?ce=xe:K=xe+1}for(var Ae=[];this.ids[K]===N;)Ae.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return Ae},gr.serialize=function(S,N){var K=new Float64Array(S.ids),ce=new Uint32Array(S.positions);return function xe(Ae,Oe,We,it){for(;We<it;){for(var xt=Ae[We+it>>1],Tt=We-1,Yt=it+1;;){do{Tt++}while(Ae[Tt]<xt);do{Yt--}while(Ae[Yt]>xt);if(Tt>=Yt)break;fi(Ae,Tt,Yt),fi(Oe,3*Tt,3*Yt),fi(Oe,3*Tt+1,3*Yt+1),fi(Oe,3*Tt+2,3*Yt+2)}Yt-We<it-Yt?(xe(Ae,Oe,We,Yt),We=Yt+1):(xe(Ae,Oe,Yt+1,it),it=Yt)}}(K,ce,0,K.length-1),N&&N.push(K.buffer,ce.buffer),{ids:K,positions:ce}},gr.deserialize=function(S){var N=new gr;return N.ids=S.ids,N.positions=S.positions,N.indexed=!0,N};var Dr=Math.pow(2,53)-1;function Cr(S){var N=+S;return!isNaN(N)&&N<=Dr?N:jn(String(S))}function fi(S,N,K){var ce=S[N];S[N]=S[K],S[K]=ce}dr("FeaturePositionMap",gr);var bi=function(S,N){this.gl=S.gl,this.location=N},Oi=function(S){function N(K,ce){S.call(this,K,ce),this.current=0}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1i(this.location,K))},N}(bi),ar=function(S){function N(K,ce){S.call(this,K,ce),this.current=0}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1f(this.location,K))},N}(bi),Gr=function(S){function N(K,ce){S.call(this,K,ce),this.current=[0,0]}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]||(this.current=K,this.gl.uniform2f(this.location,K[0],K[1]))},N}(bi),_i=function(S){function N(K,ce){S.call(this,K,ce),this.current=[0,0,0]}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]||(this.current=K,this.gl.uniform3f(this.location,K[0],K[1],K[2]))},N}(bi),gi=function(S){function N(K,ce){S.call(this,K,ce),this.current=[0,0,0,0]}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]&&K[3]===this.current[3]||(this.current=K,this.gl.uniform4f(this.location,K[0],K[1],K[2],K[3]))},N}(bi),Ai=function(S){function N(K,ce){S.call(this,K,ce),this.current=hn.transparent}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){K.r===this.current.r&&K.g===this.current.g&&K.b===this.current.b&&K.a===this.current.a||(this.current=K,this.gl.uniform4f(this.location,K.r,K.g,K.b,K.a))},N}(bi),Bi=new Float32Array(16),oa=function(S){function N(K,ce){S.call(this,K,ce),this.current=Bi}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.set=function(K){if(K[12]!==this.current[12]||K[0]!==this.current[0])return this.current=K,void this.gl.uniformMatrix4fv(this.location,!1,K);for(var ce=1;ce<16;ce++)if(K[ce]!==this.current[ce]){this.current=K,this.gl.uniformMatrix4fv(this.location,!1,K);break}},N}(bi);function Mi(S){return[Gt(255*S.r,255*S.g),Gt(255*S.b,255*S.a)]}var qi=function(S,N,K){this.value=S,this.uniformNames=N.map(function(ce){return"u_"+ce}),this.type=K};qi.prototype.setUniform=function(S,N,K){S.set(K.constantOr(this.value))},qi.prototype.getBinding=function(S,N,K){return"color"===this.type?new Ai(S,N):new ar(S,N)};var Ii=function(S,N){this.uniformNames=N.map(function(K){return"u_"+K}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ii.prototype.setConstantPatternPositions=function(S,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=S.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=S.tlbr},Ii.prototype.setUniform=function(S,N,K,ce){var xe="u_pattern_to"===ce?this.patternTo:"u_pattern_from"===ce?this.patternFrom:"u_pixel_ratio_to"===ce?this.pixelRatioTo:"u_pixel_ratio_from"===ce?this.pixelRatioFrom:null;xe&&S.set(xe)},Ii.prototype.getBinding=function(S,N,K){return"u_pattern"===K.substr(0,9)?new gi(S,N):new ar(S,N)};var da=function(S,N,K,ce){this.expression=S,this.type=K,this.maxValue=0,this.paintVertexAttributes=N.map(function(xe){return{name:"a_"+xe,type:"Float32",components:"color"===K?2:1,offset:0}}),this.paintVertexArray=new ce};da.prototype.populatePaintArray=function(S,N,K,ce,xe){var Ae=this.paintVertexArray.length,Oe=this.expression.evaluate(new Qa(0),N,{},ce,[],xe);this.paintVertexArray.resize(S),this._setPaintValue(Ae,S,Oe)},da.prototype.updatePaintArray=function(S,N,K,ce){var xe=this.expression.evaluate({zoom:0},K,ce);this._setPaintValue(S,N,xe)},da.prototype._setPaintValue=function(S,N,K){if("color"===this.type)for(var ce=Mi(K),xe=S;xe<N;xe++)this.paintVertexArray.emplace(xe,ce[0],ce[1]);else{for(var Ae=S;Ae<N;Ae++)this.paintVertexArray.emplace(Ae,K);this.maxValue=Math.max(this.maxValue,Math.abs(K))}},da.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},da.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Wi=function(S,N,K,ce,xe,Ae){this.expression=S,this.uniformNames=N.map(function(Oe){return"u_"+Oe+"_t"}),this.type=K,this.useIntegerZoom=ce,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=N.map(function(Oe){return{name:"a_"+Oe,type:"Float32",components:"color"===K?4:2,offset:0}}),this.paintVertexArray=new Ae};Wi.prototype.populatePaintArray=function(S,N,K,ce,xe){var Ae=this.expression.evaluate(new Qa(this.zoom),N,{},ce,[],xe),Oe=this.expression.evaluate(new Qa(this.zoom+1),N,{},ce,[],xe),We=this.paintVertexArray.length;this.paintVertexArray.resize(S),this._setPaintValue(We,S,Ae,Oe)},Wi.prototype.updatePaintArray=function(S,N,K,ce){var xe=this.expression.evaluate({zoom:this.zoom},K,ce),Ae=this.expression.evaluate({zoom:this.zoom+1},K,ce);this._setPaintValue(S,N,xe,Ae)},Wi.prototype._setPaintValue=function(S,N,K,ce){if("color"===this.type)for(var xe=Mi(K),Ae=Mi(ce),Oe=S;Oe<N;Oe++)this.paintVertexArray.emplace(Oe,xe[0],xe[1],Ae[0],Ae[1]);else{for(var We=S;We<N;We++)this.paintVertexArray.emplace(We,K,ce);this.maxValue=Math.max(this.maxValue,Math.abs(K),Math.abs(ce))}},Wi.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Wi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Wi.prototype.setUniform=function(S,N){var K=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,ce=d(this.expression.interpolationFactor(K,this.zoom,this.zoom+1),0,1);S.set(ce)},Wi.prototype.getBinding=function(S,N,K){return new ar(S,N)};var la=function(S,N,K,ce,xe,Ae){this.expression=S,this.type=N,this.useIntegerZoom=K,this.zoom=ce,this.layerId=Ae,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};la.prototype.populatePaintArray=function(S,N,K){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(S),this.zoomOutPaintVertexArray.resize(S),this._setPaintValues(ce,S,N.patterns&&N.patterns[this.layerId],K)},la.prototype.updatePaintArray=function(S,N,K,ce,xe){this._setPaintValues(S,N,K.patterns&&K.patterns[this.layerId],xe)},la.prototype._setPaintValues=function(S,N,K,ce){if(ce&&K){var We=ce[K.min],it=ce[K.mid],xt=ce[K.max];if(We&&it&&xt)for(var Tt=S;Tt<N;Tt++)this.zoomInPaintVertexArray.emplace(Tt,it.tl[0],it.tl[1],it.br[0],it.br[1],We.tl[0],We.tl[1],We.br[0],We.br[1],it.pixelRatio,We.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,it.tl[0],it.tl[1],it.br[0],it.br[1],xt.tl[0],xt.tl[1],xt.br[0],xt.br[1],it.pixelRatio,xt.pixelRatio)}},la.prototype.upload=function(S){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=S.createVertexBuffer(this.zoomInPaintVertexArray,Qt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=S.createVertexBuffer(this.zoomOutPaintVertexArray,Qt.members,this.expression.isStateDependent))},la.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var wa=function(S,N,K,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var xe=[];for(var Ae in S.paint._values)if(K(Ae)){var Oe=S.paint.get(Ae);if(Oe instanceof Io&&tl(Oe.property.specification)){var We=Po(Ae,S.type),it=Oe.value,xt=Oe.property.specification.type,Tt=Oe.property.useIntegerZoom,Yt=Oe.property.specification["property-type"],sn="cross-faded"===Yt||"cross-faded-data-driven"===Yt;if("constant"===it.kind)this.binders[Ae]=sn?new Ii(it.value,We):new qi(it.value,We,xt),xe.push("/u_"+Ae);else if("source"===it.kind||sn){var tn=ko(Ae,xt,"source");this.binders[Ae]=sn?new la(it,xt,Tt,N,tn,S.id):new da(it,We,xt,tn),xe.push("/a_"+Ae)}else{var mn=ko(Ae,xt,"composite");this.binders[Ae]=new Wi(it,We,xt,Tt,N,mn),xe.push("/z_"+Ae)}}}this.cacheKey=xe.sort().join("")};wa.prototype.getMaxValue=function(S){var N=this.binders[S];return N instanceof da||N instanceof Wi?N.maxValue:0},wa.prototype.populatePaintArrays=function(S,N,K,ce,xe){for(var Ae in this.binders){var Oe=this.binders[Ae];(Oe instanceof da||Oe instanceof Wi||Oe instanceof la)&&Oe.populatePaintArray(S,N,K,ce,xe)}},wa.prototype.setConstantPatternPositions=function(S,N){for(var K in this.binders){var ce=this.binders[K];ce instanceof Ii&&ce.setConstantPatternPositions(S,N)}},wa.prototype.updatePaintArrays=function(S,N,K,ce,xe){var Ae=!1;for(var Oe in S)for(var We=0,it=N.getPositions(Oe);We<it.length;We+=1){var xt=it[We],Tt=K.feature(xt.index);for(var Yt in this.binders){var sn=this.binders[Yt];if((sn instanceof da||sn instanceof Wi||sn instanceof la)&&!0===sn.expression.isStateDependent){var tn=ce.paint.get(Yt);sn.expression=tn.value,sn.updatePaintArray(xt.start,xt.end,Tt,S[Oe],xe),Ae=!0}}}return Ae},wa.prototype.defines=function(){var S=[];for(var N in this.binders){var K=this.binders[N];(K instanceof qi||K instanceof Ii)&&S.push.apply(S,K.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return S},wa.prototype.getPaintVertexBuffers=function(){return this._buffers},wa.prototype.getUniforms=function(S,N){var K=[];for(var ce in this.binders){var xe=this.binders[ce];if(xe instanceof qi||xe instanceof Ii||xe instanceof Wi)for(var Ae=0,Oe=xe.uniformNames;Ae<Oe.length;Ae+=1){var We=Oe[Ae];if(N[We]){var it=xe.getBinding(S,N[We],We);K.push({name:We,property:ce,binding:it})}}}return K},wa.prototype.setUniforms=function(S,N,K,ce){for(var xe=0,Ae=N;xe<Ae.length;xe+=1){var Oe=Ae[xe],We=Oe.name,it=Oe.property;this.binders[it].setUniform(Oe.binding,ce,K.get(it),We)}},wa.prototype.updatePaintBuffers=function(S){for(var N in this._buffers=[],this.binders){var K=this.binders[N];if(S&&K instanceof la){var ce=2===S.fromScale?K.zoomInPaintVertexBuffer:K.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(K instanceof da||K instanceof Wi)&&K.paintVertexBuffer&&this._buffers.push(K.paintVertexBuffer)}},wa.prototype.upload=function(S){for(var N in this.binders){var K=this.binders[N];(K instanceof da||K instanceof Wi||K instanceof la)&&K.upload(S)}this.updatePaintBuffers()},wa.prototype.destroy=function(){for(var S in this.binders){var N=this.binders[S];(N instanceof da||N instanceof Wi||N instanceof la)&&N.destroy()}};var eo=function(S,N,K,ce){void 0===ce&&(ce=function(){return!0}),this.programConfigurations={};for(var xe=0,Ae=N;xe<Ae.length;xe+=1){var Oe=Ae[xe];this.programConfigurations[Oe.id]=new wa(Oe,K,ce,S)}this.needsUpload=!1,this._featureMap=new gr,this._bufferOffset=0};function Po(S,N){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[S]||[S.replace(N+"-","").replace(/-/g,"_")]}function ko(S,N,K){var xe={"line-pattern":{source:Yl,composite:Yl},"fill-pattern":{source:Yl,composite:Yl},"fill-extrusion-pattern":{source:Yl,composite:Yl}}[S];return xe&&xe[K]||{color:{source:fe,composite:ye},number:{source:pe,composite:fe}}[N][K]}eo.prototype.populatePaintArrays=function(S,N,K,ce,xe,Ae){for(var Oe in this.programConfigurations)this.programConfigurations[Oe].populatePaintArrays(S,N,ce,xe,Ae);void 0!==N.id&&this._featureMap.add(N.id,K,this._bufferOffset,S),this._bufferOffset=S,this.needsUpload=!0},eo.prototype.updatePaintArrays=function(S,N,K,ce){for(var xe=0,Ae=K;xe<Ae.length;xe+=1){var Oe=Ae[xe];this.needsUpload=this.programConfigurations[Oe.id].updatePaintArrays(S,this._featureMap,N,Oe,ce)||this.needsUpload}},eo.prototype.get=function(S){return this.programConfigurations[S]},eo.prototype.upload=function(S){if(this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(S);this.needsUpload=!1}},eo.prototype.destroy=function(){for(var S in this.programConfigurations)this.programConfigurations[S].destroy()},dr("ConstantBinder",qi),dr("CrossFadedConstantBinder",Ii),dr("SourceExpressionBinder",da),dr("CrossFadedCompositeBinder",la),dr("CompositeExpressionBinder",Wi),dr("ProgramConfiguration",wa,{omit:["_buffers"]}),dr("ProgramConfigurationSet",eo);var zo=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function vo(S){for(var N=8192/S.extent,K=S.loadGeometry(),ce=0;ce<K.length;ce++)for(var xe=K[ce],Ae=0;Ae<xe.length;Ae++){var Oe=xe[Ae];Oe.x=Math.round(Oe.x*N),Oe.y=Math.round(Oe.y*N),(Oe.x<zo.min||Oe.x>zo.max||Oe.y<zo.min||Oe.y>zo.max)&&(D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Oe.x=d(Oe.x,zo.min,zo.max),Oe.y=d(Oe.y,zo.min,zo.max))}return K}function ea(S,N,K,ce,xe){S.emplaceBack(2*N+(ce+1)/2,2*K+(xe+1)/2)}var Ko=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new bl,this.indexArray=new Ao,this.segments=new Xt,this.programConfigurations=new eo(kt,S.layers,S.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};function rl(S,N){for(var K=0;K<S.length;K++)if(il(N,S[K]))return!0;for(var ce=0;ce<N.length;ce++)if(il(S,N[ce]))return!0;return!!qc(S,N)}function ou(S,N,K){return!!il(S,N)||!!Jo(N,S,K)}function $u(S,N){if(1===S.length)return Qo(N,S[0]);for(var K=0;K<N.length;K++)for(var ce=N[K],xe=0;xe<ce.length;xe++)if(il(S,ce[xe]))return!0;for(var Ae=0;Ae<S.length;Ae++)if(Qo(N,S[Ae]))return!0;for(var Oe=0;Oe<N.length;Oe++)if(qc(S,N[Oe]))return!0;return!1}function _f(S,N,K){if(S.length>1){if(qc(S,N))return!0;for(var ce=0;ce<N.length;ce++)if(Jo(N[ce],S,K))return!0}for(var xe=0;xe<S.length;xe++)if(Jo(S[xe],N,K))return!0;return!1}function qc(S,N){if(0===S.length||0===N.length)return!1;for(var K=0;K<S.length-1;K++)for(var ce=S[K],xe=S[K+1],Ae=0;Ae<N.length-1;Ae++)if(Gc(ce,xe,N[Ae],N[Ae+1]))return!0;return!1}function Gc(S,N,K,ce){return F(S,K,ce)!==F(N,K,ce)&&F(S,N,K)!==F(S,N,ce)}function Jo(S,N,K){var ce=K*K;if(1===N.length)return S.distSqr(N[0])<ce;for(var xe=1;xe<N.length;xe++)if(gc(S,N[xe-1],N[xe])<ce)return!0;return!1}function gc(S,N,K){var ce=N.distSqr(K);if(0===ce)return S.distSqr(N);var xe=((S.x-N.x)*(K.x-N.x)+(S.y-N.y)*(K.y-N.y))/ce;return S.distSqr(xe<0?N:xe>1?K:K.sub(N)._mult(xe)._add(N))}function Qo(S,N){for(var K,ce,xe,Ae=!1,Oe=0;Oe<S.length;Oe++)for(var We=0,it=(K=S[Oe]).length-1;We<K.length;it=We++)(ce=K[We]).y>N.y!=(xe=K[it]).y>N.y&&N.x<(xe.x-ce.x)*(N.y-ce.y)/(xe.y-ce.y)+ce.x&&(Ae=!Ae);return Ae}function il(S,N){for(var K=!1,ce=0,xe=S.length-1;ce<S.length;xe=ce++){var Ae=S[ce],Oe=S[xe];Ae.y>N.y!=Oe.y>N.y&&N.x<(Oe.x-Ae.x)*(N.y-Ae.y)/(Oe.y-Ae.y)+Ae.x&&(K=!K)}return K}function su(S,N,K){var ce=K[0],xe=K[2];if(S.x<ce.x&&N.x<ce.x||S.x>xe.x&&N.x>xe.x||S.y<ce.y&&N.y<ce.y||S.y>xe.y&&N.y>xe.y)return!1;var Ae=F(S,N,K[0]);return Ae!==F(S,N,K[1])||Ae!==F(S,N,K[2])||Ae!==F(S,N,K[3])}function Bo(S,N,K){var ce=N.paint.get(S).value;return"constant"===ce.kind?ce.value:K.programConfigurations.get(N.id).getMaxValue(S)}function Vs(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])}function Eo(S,N,K,ce,xe){if(!N[0]&&!N[1])return S;var Ae=r.convert(N)._mult(xe);"viewport"===K&&Ae._rotate(-ce);for(var Oe=[],We=0;We<S.length;We++)Oe.push(S[We].sub(Ae));return Oe}Ko.prototype.populate=function(S,N,K){var ce=this.layers[0],xe=[],Ae=null;"circle"===ce.type&&(Ae=ce.layout.get("circle-sort-key"));for(var Oe=0,We=S;Oe<We.length;Oe+=1){var it=We[Oe],xt=it.feature,Tt=it.id,Yt=it.index,sn=it.sourceLayerIndex,tn=this.layers[0]._featureFilter.needGeometry,mn={type:xt.type,id:Tt,properties:xt.properties,geometry:tn?vo(xt):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),mn,K)){tn||(mn.geometry=vo(xt));var Dn=Ae?Ae.evaluate(mn,{},K):void 0;xe.push({id:Tt,properties:xt.properties,type:xt.type,sourceLayerIndex:sn,index:Yt,geometry:mn.geometry,patterns:{},sortKey:Dn})}}Ae&&xe.sort(function(yi,Li){return yi.sortKey-Li.sortKey});for(var Vn=0,er=xe;Vn<er.length;Vn+=1){var ir=er[Vn],Ir=ir.geometry,Vr=ir.index,si=ir.sourceLayerIndex,oi=S[Vr].feature;this.addFeature(ir,Ir,Vr,K),N.featureIndex.insert(oi,Ir,Vr,si,this.index)}},Ko.prototype.update=function(S,N,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,N,this.stateDependentLayers,K)},Ko.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ko.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ko.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,kt),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Ko.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ko.prototype.addFeature=function(S,N,K,ce){for(var xe=0,Ae=N;xe<Ae.length;xe+=1)for(var Oe=0,We=Ae[xe];Oe<We.length;Oe+=1){var it=We[Oe],xt=it.x,Tt=it.y;if(!(xt<0||xt>=8192||Tt<0||Tt>=8192)){var Yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,S.sortKey),sn=Yt.vertexLength;ea(this.layoutVertexArray,xt,Tt,-1,-1),ea(this.layoutVertexArray,xt,Tt,1,-1),ea(this.layoutVertexArray,xt,Tt,1,1),ea(this.layoutVertexArray,xt,Tt,-1,1),this.indexArray.emplaceBack(sn,sn+1,sn+2),this.indexArray.emplaceBack(sn,sn+3,sn+2),Yt.vertexLength+=4,Yt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,{},ce)},dr("CircleBucket",Ko,{omit:["layers"]});var wl=new Ls({"circle-sort-key":new Gi(je.layout_circle["circle-sort-key"])}),Jh={paint:new Ls({"circle-radius":new Gi(je.paint_circle["circle-radius"]),"circle-color":new Gi(je.paint_circle["circle-color"]),"circle-blur":new Gi(je.paint_circle["circle-blur"]),"circle-opacity":new Gi(je.paint_circle["circle-opacity"]),"circle-translate":new Pi(je.paint_circle["circle-translate"]),"circle-translate-anchor":new Pi(je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pi(je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pi(je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gi(je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gi(je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gi(je.paint_circle["circle-stroke-opacity"])}),layout:wl},Us="undefined"!=typeof Float32Array?Float32Array:Array;function Ku(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function mc(S,N,K){var ce=N[0],xe=N[1],Ae=N[2],Oe=N[3],We=N[4],it=N[5],xt=N[6],Tt=N[7],Yt=N[8],sn=N[9],tn=N[10],mn=N[11],Dn=N[12],Bn=N[13],Vn=N[14],er=N[15],ir=K[0],hr=K[1],Ir=K[2],Vr=K[3];return S[0]=ir*ce+hr*We+Ir*Yt+Vr*Dn,S[1]=ir*xe+hr*it+Ir*sn+Vr*Bn,S[2]=ir*Ae+hr*xt+Ir*tn+Vr*Vn,S[3]=ir*Oe+hr*Tt+Ir*mn+Vr*er,S[4]=(ir=K[4])*ce+(hr=K[5])*We+(Ir=K[6])*Yt+(Vr=K[7])*Dn,S[5]=ir*xe+hr*it+Ir*sn+Vr*Bn,S[6]=ir*Ae+hr*xt+Ir*tn+Vr*Vn,S[7]=ir*Oe+hr*Tt+Ir*mn+Vr*er,S[8]=(ir=K[8])*ce+(hr=K[9])*We+(Ir=K[10])*Yt+(Vr=K[11])*Dn,S[9]=ir*xe+hr*it+Ir*sn+Vr*Bn,S[10]=ir*Ae+hr*xt+Ir*tn+Vr*Vn,S[11]=ir*Oe+hr*Tt+Ir*mn+Vr*er,S[12]=(ir=K[12])*ce+(hr=K[13])*We+(Ir=K[14])*Yt+(Vr=K[15])*Dn,S[13]=ir*xe+hr*it+Ir*sn+Vr*Bn,S[14]=ir*Ae+hr*xt+Ir*tn+Vr*Vn,S[15]=ir*Oe+hr*Tt+Ir*mn+Vr*er,S}Math.hypot||(Math.hypot=function(){for(var S=arguments,N=0,K=arguments.length;K--;)N+=S[K]*S[K];return Math.sqrt(N)});var Eu,N,Mp=mc;function Ju(S,N,K){var ce=N[0],xe=N[1],Ae=N[2],Oe=N[3];return S[0]=K[0]*ce+K[4]*xe+K[8]*Ae+K[12]*Oe,S[1]=K[1]*ce+K[5]*xe+K[9]*Ae+K[13]*Oe,S[2]=K[2]*ce+K[6]*xe+K[10]*Ae+K[14]*Oe,S[3]=K[3]*ce+K[7]*xe+K[11]*Ae+K[15]*Oe,S}Eu=new Us(3),Us!=Float32Array&&(Eu[0]=0,Eu[1]=0,Eu[2]=0),N=new Us(4),Us!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0,N[3]=0);var Ap=(function(){var N=new Us(2);Us!=Float32Array&&(N[0]=0,N[1]=0)}(),function(S){function N(K){S.call(this,K,Jh)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.createBucket=function(K){return new Ko(K)},N.prototype.queryRadius=function(K){var ce=K;return Bo("circle-radius",this,ce)+Bo("circle-stroke-width",this,ce)+Vs(this.paint.get("circle-translate"))},N.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Oe,We,it,xt){for(var Tt=Eo(K,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),We.angle,it),Yt=this.paint.get("circle-radius").evaluate(ce,xe)+this.paint.get("circle-stroke-width").evaluate(ce,xe),sn="map"===this.paint.get("circle-pitch-alignment"),tn=sn?Tt:function(si,oi){return si.map(function(yi){return Wc(yi,oi)})}(Tt,xt),mn=sn?Yt*it:Yt,Dn=0,Bn=Ae;Dn<Bn.length;Dn+=1)for(var Vn=0,er=Bn[Dn];Vn<er.length;Vn+=1){var ir=er[Vn],hr=sn?ir:Wc(ir,xt),Ir=mn,Vr=Ju([],[ir.x,ir.y,0,1],xt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Ir*=Vr[3]/We.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Ir*=We.cameraToCenterDistance/Vr[3]),ou(tn,hr,Ir))return!0}return!1},N}(Is));function Wc(S,N){var K=Ju([],[S.x,S.y,0,1],N);return new r(K[0]/K[3],K[1]/K[3])}var zy=function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N}(Ko);function Qh(S,N,K,ce){var xe=N.width,Ae=N.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==xe*Ae*K)throw new RangeError("mismatched image size")}else ce=new Uint8Array(xe*Ae*K);return S.width=xe,S.height=Ae,S.data=ce,S}function gg(S,N,K){var ce=N.width,xe=N.height;if(ce!==S.width||xe!==S.height){var Ae=Qh({},{width:ce,height:xe},K);kp(S,Ae,{x:0,y:0},{x:0,y:0},{width:Math.min(S.width,ce),height:Math.min(S.height,xe)},K),S.width=ce,S.height=xe,S.data=Ae.data}}function kp(S,N,K,ce,xe,Ae){if(0===xe.width||0===xe.height)return N;if(xe.width>S.width||xe.height>S.height||K.x>S.width-xe.width||K.y>S.height-xe.height)throw new RangeError("out of range source coordinates for image copy");if(xe.width>N.width||xe.height>N.height||ce.x>N.width-xe.width||ce.y>N.height-xe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Oe=S.data,We=N.data,it=0;it<xe.height;it++)for(var xt=((K.y+it)*S.width+K.x)*Ae,Tt=((ce.y+it)*N.width+ce.x)*Ae,Yt=0;Yt<xe.width*Ae;Yt++)We[Tt+Yt]=Oe[xt+Yt];return N}dr("HeatmapBucket",zy,{omit:["layers"]});var Yc=function(S,N){Qh(this,S,1,N)};Yc.prototype.resize=function(S){gg(this,S,1)},Yc.prototype.clone=function(){return new Yc({width:this.width,height:this.height},new Uint8Array(this.data))},Yc.copy=function(S,N,K,ce,xe){kp(S,N,K,ce,xe,1)};var dl=function(S,N){Qh(this,S,4,N)};dl.prototype.resize=function(S){gg(this,S,4)},dl.prototype.replace=function(S,N){N?this.data.set(S):this.data=S instanceof Uint8ClampedArray?new Uint8Array(S.buffer):S},dl.prototype.clone=function(){return new dl({width:this.width,height:this.height},new Uint8Array(this.data))},dl.copy=function(S,N,K,ce,xe){kp(S,N,K,ce,xe,4)},dr("AlphaImage",Yc),dr("RGBAImage",dl);var By={paint:new Ls({"heatmap-radius":new Gi(je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gi(je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pi(je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hl(je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pi(je.paint_heatmap["heatmap-opacity"])})};function Ep(S,N){for(var K=new Uint8Array(1024),ce={},xe=0,Ae=0;xe<256;xe++,Ae+=4){ce[N]=xe/255;var Oe=S.evaluate(ce);K[Ae+0]=Math.floor(255*Oe.r/Oe.a),K[Ae+1]=Math.floor(255*Oe.g/Oe.a),K[Ae+2]=Math.floor(255*Oe.b/Oe.a),K[Ae+3]=Math.floor(255*Oe.a)}return new dl({width:256,height:1},K)}var Sp=function(S){function N(K){S.call(this,K,By),this._updateColorRamp()}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.createBucket=function(K){return new zy(K)},N.prototype._handleSpecialPaintPropertyUpdate=function(K){"heatmap-color"===K&&this._updateColorRamp()},N.prototype._updateColorRamp=function(){this.colorRamp=Ep(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},N.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},N.prototype.queryRadius=function(){return 0},N.prototype.queryIntersectsFeature=function(){return!1},N.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},N}(Is),ed={paint:new Ls({"hillshade-illumination-direction":new Pi(je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pi(je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pi(je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pi(je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pi(je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pi(je.paint_hillshade["hillshade-accent-color"])})},pb=function(S){function N(K){S.call(this,K,ed)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},N}(Is),wf=Pa([{name:"a_pos",components:2,type:"Int16"}],4).members,ih=nd,td=nd;function nd(S,N,K){K=K||2;var ce,xe,Ae,Oe,We,it,xt,Tt=N&&N.length,Yt=Tt?N[0]*K:S.length,sn=mg(S,0,Yt,K,!0),tn=[];if(!sn||sn.next===sn.prev)return tn;if(Tt&&(sn=function(Dn,Bn,Vn,er){var ir,hr,si,oi=[];for(ir=0,hr=Bn.length;ir<hr;ir++)(si=mg(Dn,Bn[ir]*er,ir<hr-1?Bn[ir+1]*er:Dn.length,er,!1))===si.next&&(si.steiner=!0),oi.push(sh(si));for(oi.sort(ta),ir=0;ir<oi.length;ir++)vg(oi[ir],Vn),Vn=yc(Vn,Vn.next);return Vn}(S,N,sn,K)),S.length>80*K){ce=Ae=S[0],xe=Oe=S[1];for(var mn=K;mn<Yt;mn+=K)(We=S[mn])<ce&&(ce=We),(it=S[mn+1])<xe&&(xe=it),We>Ae&&(Ae=We),it>Oe&&(Oe=it);xt=0!==(xt=Math.max(Ae-ce,Oe-xe))?1/xt:0}return Tf(sn,tn,K,ce,xe,xt),tn}function mg(S,N,K,ce,xe){var Ae,Oe;if(xe===Dp(S,N,K,ce)>0)for(Ae=N;Ae<K;Ae+=ce)Oe=rd(Ae,S[Ae],S[Ae+1],Oe);else for(Ae=K-ce;Ae>=N;Ae-=ce)Oe=rd(Ae,S[Ae],S[Ae+1],Oe);return Oe&&Zc(Oe,Oe.next)&&(xc(Oe),Oe=Oe.next),Oe}function yc(S,N){if(!S)return S;N||(N=S);var K,ce=S;do{if(K=!1,ce.steiner||!Zc(ce,ce.next)&&0!==ps(ce.prev,ce,ce.next))ce=ce.next;else{if(xc(ce),(ce=N=ce.prev)===ce.next)break;K=!0}}while(K||ce!==N);return N}function Tf(S,N,K,ce,xe,Ae,Oe){if(S){!Oe&&Ae&&function(Tt,Yt,sn,tn){var mn=Tt;do{null===mn.z&&(mn.z=oh(mn.x,mn.y,Yt,sn,tn)),mn.prevZ=mn.prev,mn.nextZ=mn.next,mn=mn.next}while(mn!==Tt);mn.prevZ.nextZ=null,mn.prevZ=null,function(Dn){var Bn,Vn,er,ir,hr,Ir,Vr,si,oi=1;do{for(Vn=Dn,Dn=null,hr=null,Ir=0;Vn;){for(Ir++,er=Vn,Vr=0,Bn=0;Bn<oi&&(Vr++,er=er.nextZ);Bn++);for(si=oi;Vr>0||si>0&&er;)0!==Vr&&(0===si||!er||Vn.z<=er.z)?(ir=Vn,Vn=Vn.nextZ,Vr--):(ir=er,er=er.nextZ,si--),hr?hr.nextZ=ir:Dn=ir,ir.prevZ=hr,hr=ir;Vn=er}hr.nextZ=null,oi*=2}while(Ir>1)}(mn)}(S,ce,xe,Ae);for(var We,it,xt=S;S.prev!==S.next;)if(We=S.prev,it=S.next,Ae?ah(S,ce,xe,Ae):jy(S))N.push(We.i/K),N.push(S.i/K),N.push(it.i/K),xc(S),S=it.next,xt=it.next;else if((S=it)===xt){Oe?1===Oe?Tf(S=yg(yc(S),N,K),N,K,ce,xe,Ae,2):2===Oe&&Vy(S,N,K,ce,xe,Ae):Tf(yc(S),N,K,ce,xe,Ae,1);break}}}function jy(S){var N=S.prev,K=S,ce=S.next;if(ps(N,K,ce)>=0)return!1;for(var xe=S.next.next;xe!==S.prev;){if(Mf(N.x,N.y,K.x,K.y,ce.x,ce.y,xe.x,xe.y)&&ps(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function ah(S,N,K,ce){var xe=S.prev,Ae=S,Oe=S.next;if(ps(xe,Ae,Oe)>=0)return!1;for(var xt=xe.x>Ae.x?xe.x>Oe.x?xe.x:Oe.x:Ae.x>Oe.x?Ae.x:Oe.x,Tt=xe.y>Ae.y?xe.y>Oe.y?xe.y:Oe.y:Ae.y>Oe.y?Ae.y:Oe.y,Yt=oh(xe.x<Ae.x?xe.x<Oe.x?xe.x:Oe.x:Ae.x<Oe.x?Ae.x:Oe.x,xe.y<Ae.y?xe.y<Oe.y?xe.y:Oe.y:Ae.y<Oe.y?Ae.y:Oe.y,N,K,ce),sn=oh(xt,Tt,N,K,ce),tn=S.prevZ,mn=S.nextZ;tn&&tn.z>=Yt&&mn&&mn.z<=sn;){if(tn!==S.prev&&tn!==S.next&&Mf(xe.x,xe.y,Ae.x,Ae.y,Oe.x,Oe.y,tn.x,tn.y)&&ps(tn.prev,tn,tn.next)>=0||(tn=tn.prevZ,mn!==S.prev&&mn!==S.next&&Mf(xe.x,xe.y,Ae.x,Ae.y,Oe.x,Oe.y,mn.x,mn.y)&&ps(mn.prev,mn,mn.next)>=0))return!1;mn=mn.nextZ}for(;tn&&tn.z>=Yt;){if(tn!==S.prev&&tn!==S.next&&Mf(xe.x,xe.y,Ae.x,Ae.y,Oe.x,Oe.y,tn.x,tn.y)&&ps(tn.prev,tn,tn.next)>=0)return!1;tn=tn.prevZ}for(;mn&&mn.z<=sn;){if(mn!==S.prev&&mn!==S.next&&Mf(xe.x,xe.y,Ae.x,Ae.y,Oe.x,Oe.y,mn.x,mn.y)&&ps(mn.prev,mn,mn.next)>=0)return!1;mn=mn.nextZ}return!0}function yg(S,N,K){var ce=S;do{var xe=ce.prev,Ae=ce.next.next;!Zc(xe,Ae)&&Qu(xe,ce,ce.next,Ae)&&uh(xe,Ae)&&uh(Ae,xe)&&(N.push(xe.i/K),N.push(ce.i/K),N.push(Ae.i/K),xc(ce),xc(ce.next),ce=S=Ae),ce=ce.next}while(ce!==S);return yc(ce)}function Vy(S,N,K,ce,xe,Ae){var Oe=S;do{for(var We=Oe.next.next;We!==Oe.prev;){if(Oe.i!==We.i&&Hy(Oe,We)){var it=Cp(Oe,We);return Oe=yc(Oe,Oe.next),it=yc(it,it.next),Tf(Oe,N,K,ce,xe,Ae),void Tf(it,N,K,ce,xe,Ae)}We=We.next}Oe=Oe.next}while(Oe!==S)}function ta(S,N){return S.x-N.x}function vg(S,N){if(N=function(ce,xe){var Ae,Oe=xe,We=ce.x,it=ce.y,xt=-1/0;do{if(it<=Oe.y&&it>=Oe.next.y&&Oe.next.y!==Oe.y){var Tt=Oe.x+(it-Oe.y)*(Oe.next.x-Oe.x)/(Oe.next.y-Oe.y);if(Tt<=We&&Tt>xt){if(xt=Tt,Tt===We){if(it===Oe.y)return Oe;if(it===Oe.next.y)return Oe.next}Ae=Oe.x<Oe.next.x?Oe:Oe.next}}Oe=Oe.next}while(Oe!==xe);if(!Ae)return null;if(We===xt)return Ae;var Yt,sn=Ae,tn=Ae.x,mn=Ae.y,Dn=1/0;Oe=Ae;do{We>=Oe.x&&Oe.x>=tn&&We!==Oe.x&&Mf(it<mn?We:xt,it,tn,mn,it<mn?xt:We,it,Oe.x,Oe.y)&&(Yt=Math.abs(it-Oe.y)/(We-Oe.x),uh(Oe,ce)&&(Yt<Dn||Yt===Dn&&(Oe.x>Ae.x||Oe.x===Ae.x&&Uy(Ae,Oe)))&&(Ae=Oe,Dn=Yt)),Oe=Oe.next}while(Oe!==sn);return Ae}(S,N)){var K=Cp(N,S);yc(N,N.next),yc(K,K.next)}}function Uy(S,N){return ps(S.prev,S,N.prev)<0&&ps(N.next,S,S.next)<0}function oh(S,N,K,ce,xe){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-K)*xe)|S<<8))|S<<4))|S<<2))|S<<1))|(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=32767*(N-ce)*xe)|N<<8))|N<<4))|N<<2))|N<<1))<<1}function sh(S){var N=S,K=S;do{(N.x<K.x||N.x===K.x&&N.y<K.y)&&(K=N),N=N.next}while(N!==S);return K}function Mf(S,N,K,ce,xe,Ae,Oe,We){return(xe-Oe)*(N-We)-(S-Oe)*(Ae-We)>=0&&(S-Oe)*(ce-We)-(K-Oe)*(N-We)>=0&&(K-Oe)*(Ae-We)-(xe-Oe)*(ce-We)>=0}function Hy(S,N){return S.next.i!==N.i&&S.prev.i!==N.i&&!function(K,ce){var xe=K;do{if(xe.i!==K.i&&xe.next.i!==K.i&&xe.i!==ce.i&&xe.next.i!==ce.i&&Qu(xe,xe.next,K,ce))return!0;xe=xe.next}while(xe!==K);return!1}(S,N)&&(uh(S,N)&&uh(N,S)&&function(K,ce){var xe=K,Ae=!1,Oe=(K.x+ce.x)/2,We=(K.y+ce.y)/2;do{xe.y>We!=xe.next.y>We&&xe.next.y!==xe.y&&Oe<(xe.next.x-xe.x)*(We-xe.y)/(xe.next.y-xe.y)+xe.x&&(Ae=!Ae),xe=xe.next}while(xe!==K);return Ae}(S,N)&&(ps(S.prev,S,N.prev)||ps(S,N.prev,N))||Zc(S,N)&&ps(S.prev,S,S.next)>0&&ps(N.prev,N,N.next)>0)}function ps(S,N,K){return(N.y-S.y)*(K.x-N.x)-(N.x-S.x)*(K.y-N.y)}function Zc(S,N){return S.x===N.x&&S.y===N.y}function Qu(S,N,K,ce){var xe=vc(ps(S,N,K)),Ae=vc(ps(S,N,ce)),Oe=vc(ps(K,ce,S)),We=vc(ps(K,ce,N));return xe!==Ae&&Oe!==We||!(0!==xe||!lh(S,K,N))||!(0!==Ae||!lh(S,ce,N))||!(0!==Oe||!lh(K,S,ce))||!(0!==We||!lh(K,N,ce))}function lh(S,N,K){return N.x<=Math.max(S.x,K.x)&&N.x>=Math.min(S.x,K.x)&&N.y<=Math.max(S.y,K.y)&&N.y>=Math.min(S.y,K.y)}function vc(S){return S>0?1:S<0?-1:0}function uh(S,N){return ps(S.prev,S,S.next)<0?ps(S,N,S.next)>=0&&ps(S,S.prev,N)>=0:ps(S,N,S.prev)<0||ps(S,S.next,N)<0}function Cp(S,N){var K=new id(S.i,S.x,S.y),ce=new id(N.i,N.x,N.y),xe=S.next,Ae=N.prev;return S.next=N,N.prev=S,K.next=xe,xe.prev=K,ce.next=K,K.prev=ce,Ae.next=ce,ce.prev=Ae,ce}function rd(S,N,K,ce){var xe=new id(S,N,K);return ce?(xe.next=ce.next,xe.prev=ce,ce.next.prev=xe,ce.next=xe):(xe.prev=xe,xe.next=xe),xe}function xc(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function id(S,N,K){this.i=S,this.x=N,this.y=K,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dp(S,N,K,ce){for(var xe=0,Ae=N,Oe=K-ce;Ae<K;Ae+=ce)xe+=(S[Oe]-S[Ae])*(S[Ae+1]+S[Oe+1]),Oe=Ae;return xe}function qy(S,N,K,ce,xe){!function Ae(Oe,We,it,xt,Tt){for(;xt>it;){if(xt-it>600){var Yt=xt-it+1,sn=We-it+1,tn=Math.log(Yt),mn=.5*Math.exp(2*tn/3),Dn=.5*Math.sqrt(tn*mn*(Yt-mn)/Yt)*(sn-Yt/2<0?-1:1);Ae(Oe,We,Math.max(it,Math.floor(We-sn*mn/Yt+Dn)),Math.min(xt,Math.floor(We+(Yt-sn)*mn/Yt+Dn)),Tt)}var er=Oe[We],ir=it,hr=xt;for(Su(Oe,it,We),Tt(Oe[xt],er)>0&&Su(Oe,it,xt);ir<hr;){for(Su(Oe,ir,hr),ir++,hr--;Tt(Oe[ir],er)<0;)ir++;for(;Tt(Oe[hr],er)>0;)hr--}0===Tt(Oe[it],er)?Su(Oe,it,hr):Su(Oe,++hr,xt),hr<=We&&(it=hr+1),We<=hr&&(xt=hr-1)}}(S,N,K||0,ce||S.length-1,xe||ch)}function Su(S,N,K){var ce=S[N];S[N]=S[K],S[K]=ce}function ch(S,N){return S<N?-1:S>N?1:0}function Lp(S,N){var K=S.length;if(K<=1)return[S];for(var ce,xe,Ae=[],Oe=0;Oe<K;Oe++){var We=R(S[Oe]);0!==We&&(S[Oe].area=Math.abs(We),void 0===xe&&(xe=We<0),xe===We<0?(ce&&Ae.push(ce),ce=[S[Oe]]):ce.push(S[Oe]))}if(ce&&Ae.push(ce),N>1)for(var it=0;it<Ae.length;it++)Ae[it].length<=N||(qy(Ae[it],N,1,Ae[it].length-1,gb),Ae[it]=Ae[it].slice(0,N));return Ae}function gb(S,N){return N.area-S.area}function ad(S,N,K){for(var ce=K.patternDependencies,xe=!1,Ae=0,Oe=N;Ae<Oe.length;Ae+=1){var We=Oe[Ae].paint.get(S+"-pattern");We.isConstant()||(xe=!0);var it=We.constantOr(null);it&&(xe=!0,ce[it.to]=!0,ce[it.from]=!0)}return xe}function Ip(S,N,K,ce,xe){for(var Ae=xe.patternDependencies,Oe=0,We=N;Oe<We.length;Oe+=1){var it=We[Oe],xt=it.paint.get(S+"-pattern").value;if("constant"!==xt.kind){var Tt=xt.evaluate({zoom:ce-1},K,{},xe.availableImages),Yt=xt.evaluate({zoom:ce},K,{},xe.availableImages),sn=xt.evaluate({zoom:ce+1},K,{},xe.availableImages);Yt=Yt&&Yt.name?Yt.name:Yt,sn=sn&&sn.name?sn.name:sn,Ae[Tt=Tt&&Tt.name?Tt.name:Tt]=!0,Ae[Yt]=!0,Ae[sn]=!0,K.patterns[it.id]={min:Tt,mid:Yt,max:sn}}}return K}nd.deviation=function(S,N,K,ce){var xe=N&&N.length,Oe=Math.abs(Dp(S,0,xe?N[0]*K:S.length,K));if(xe)for(var We=0,it=N.length;We<it;We++)Oe-=Math.abs(Dp(S,N[We]*K,We<it-1?N[We+1]*K:S.length,K));var Yt=0;for(We=0;We<ce.length;We+=3){var sn=ce[We]*K,tn=ce[We+1]*K,mn=ce[We+2]*K;Yt+=Math.abs((S[sn]-S[mn])*(S[tn+1]-S[sn+1])-(S[sn]-S[tn])*(S[mn+1]-S[sn+1]))}return 0===Oe&&0===Yt?0:Math.abs((Yt-Oe)/Oe)},nd.flatten=function(S){for(var N=S[0][0].length,K={vertices:[],holes:[],dimensions:N},ce=0,xe=0;xe<S.length;xe++){for(var Ae=0;Ae<S[xe].length;Ae++)for(var Oe=0;Oe<N;Oe++)K.vertices.push(S[xe][Ae][Oe]);xe>0&&K.holes.push(ce+=S[xe-1].length)}return K},ih.default=td;var Cu=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bl,this.indexArray=new Ao,this.indexArray2=new U,this.programConfigurations=new eo(wf,S.layers,S.zoom),this.segments=new Xt,this.segments2=new Xt,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Cu.prototype.populate=function(S,N,K){this.hasPattern=ad("fill",this.layers,N);for(var ce=this.layers[0].layout.get("fill-sort-key"),xe=[],Ae=0,Oe=S;Ae<Oe.length;Ae+=1){var We=Oe[Ae],it=We.feature,xt=We.id,Tt=We.index,Yt=We.sourceLayerIndex,sn=this.layers[0]._featureFilter.needGeometry,tn={type:it.type,id:xt,properties:it.properties,geometry:sn?vo(it):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),tn,K)){sn||(tn.geometry=vo(it));var mn=ce?ce.evaluate(tn,{},K,N.availableImages):void 0;xe.push({id:xt,properties:it.properties,type:it.type,sourceLayerIndex:Yt,index:Tt,geometry:tn.geometry,patterns:{},sortKey:mn})}}ce&&xe.sort(function(yi,Li){return yi.sortKey-Li.sortKey});for(var Bn=0,Vn=xe;Bn<Vn.length;Bn+=1){var er=Vn[Bn],hr=er.geometry,Ir=er.index,Vr=er.sourceLayerIndex;if(this.hasPattern){var si=Ip("fill",this.layers,er,this.zoom,N);this.patternFeatures.push(si)}else this.addFeature(er,hr,Ir,K,{});N.featureIndex.insert(S[Ir].feature,hr,Ir,Vr,this.index)}},Cu.prototype.update=function(S,N,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,N,this.stateDependentLayers,K)},Cu.prototype.addFeatures=function(S,N,K){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var Ae=xe[ce];this.addFeature(Ae,Ae.geometry,Ae.index,N,K)}},Cu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Cu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cu.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,wf),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.indexBuffer2=S.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(S),this.uploaded=!0},Cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Cu.prototype.addFeature=function(S,N,K,ce,xe){for(var Ae=0,Oe=Lp(N,500);Ae<Oe.length;Ae+=1){for(var We=Oe[Ae],it=0,xt=0,Tt=We;xt<Tt.length;xt+=1)it+=Tt[xt].length;for(var Yt=this.segments.prepareSegment(it,this.layoutVertexArray,this.indexArray),sn=Yt.vertexLength,tn=[],mn=[],Dn=0,Bn=We;Dn<Bn.length;Dn+=1){var Vn=Bn[Dn];if(0!==Vn.length){Vn!==We[0]&&mn.push(tn.length/2);var er=this.segments2.prepareSegment(Vn.length,this.layoutVertexArray,this.indexArray2),ir=er.vertexLength;this.layoutVertexArray.emplaceBack(Vn[0].x,Vn[0].y),this.indexArray2.emplaceBack(ir+Vn.length-1,ir),tn.push(Vn[0].x),tn.push(Vn[0].y);for(var hr=1;hr<Vn.length;hr++)this.layoutVertexArray.emplaceBack(Vn[hr].x,Vn[hr].y),this.indexArray2.emplaceBack(ir+hr-1,ir+hr),tn.push(Vn[hr].x),tn.push(Vn[hr].y);er.vertexLength+=Vn.length,er.primitiveLength+=Vn.length}}for(var Ir=ih(tn,mn),Vr=0;Vr<Ir.length;Vr+=3)this.indexArray.emplaceBack(sn+Ir[Vr],sn+Ir[Vr+1],sn+Ir[Vr+2]);Yt.vertexLength+=it,Yt.primitiveLength+=Ir.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,xe,ce)},dr("FillBucket",Cu,{omit:["layers","patternFeatures"]});var Gy=new Ls({"fill-sort-key":new Gi(je.layout_fill["fill-sort-key"])}),Wy={paint:new Ls({"fill-antialias":new Pi(je.paint_fill["fill-antialias"]),"fill-opacity":new Gi(je.paint_fill["fill-opacity"]),"fill-color":new Gi(je.paint_fill["fill-color"]),"fill-outline-color":new Gi(je.paint_fill["fill-outline-color"]),"fill-translate":new Pi(je.paint_fill["fill-translate"]),"fill-translate-anchor":new Pi(je.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jl(je.paint_fill["fill-pattern"])}),layout:Gy},Yy=function(S){function N(K){S.call(this,K,Wy)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.recalculate=function(K,ce){S.prototype.recalculate.call(this,K,ce);var xe=this.paint._values["fill-outline-color"];"constant"===xe.value.kind&&void 0===xe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},N.prototype.createBucket=function(K){return new Cu(K)},N.prototype.queryRadius=function(){return Vs(this.paint.get("fill-translate"))},N.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Oe,We,it){return $u(Eo(K,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),We.angle,it),Ae)},N.prototype.isTileClipped=function(){return!0},N}(Is),fh=Pa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,od=lu;function lu(S,N,K,ce,xe){this.properties={},this.extent=K,this.type=0,this._pbf=S,this._geometry=-1,this._keys=ce,this._values=xe,S.readFields(Zy,this,N)}function Zy(S,N,K){1==S?N.id=K.readVarint():2==S?function(ce,xe){for(var Ae=ce.readVarint()+ce.pos;ce.pos<Ae;){var Oe=xe._keys[ce.readVarint()],We=xe._values[ce.readVarint()];xe.properties[Oe]=We}}(K,N):3==S?N.type=K.readVarint():4==S&&(N._geometry=K.pos)}function Xy(S){for(var N,K,ce=0,xe=0,Ae=S.length,Oe=Ae-1;xe<Ae;Oe=xe++)ce+=((K=S[Oe]).x-(N=S[xe]).x)*(N.y+K.y);return ce}lu.types=["Unknown","Point","LineString","Polygon"],lu.prototype.loadGeometry=function(){var S=this._pbf;S.pos=this._geometry;for(var N,K=S.readVarint()+S.pos,ce=1,xe=0,Ae=0,Oe=0,We=[];S.pos<K;){if(xe<=0){var it=S.readVarint();ce=7&it,xe=it>>3}if(xe--,1===ce||2===ce)Ae+=S.readSVarint(),Oe+=S.readSVarint(),1===ce&&(N&&We.push(N),N=[]),N.push(new r(Ae,Oe));else{if(7!==ce)throw new Error("unknown command "+ce);N&&N.push(N[0].clone())}}return N&&We.push(N),We},lu.prototype.bbox=function(){var S=this._pbf;S.pos=this._geometry;for(var N=S.readVarint()+S.pos,K=1,ce=0,xe=0,Ae=0,Oe=1/0,We=-1/0,it=1/0,xt=-1/0;S.pos<N;){if(ce<=0){var Tt=S.readVarint();K=7&Tt,ce=Tt>>3}if(ce--,1===K||2===K)(xe+=S.readSVarint())<Oe&&(Oe=xe),xe>We&&(We=xe),(Ae+=S.readSVarint())<it&&(it=Ae),Ae>xt&&(xt=Ae);else if(7!==K)throw new Error("unknown command "+K)}return[Oe,it,We,xt]},lu.prototype.toGeoJSON=function(S,N,K){var ce,xe,Ae=this.extent*Math.pow(2,K),Oe=this.extent*S,We=this.extent*N,it=this.loadGeometry(),xt=lu.types[this.type];function Tt(tn){for(var mn=0;mn<tn.length;mn++){var Dn=tn[mn];tn[mn]=[360*(Dn.x+Oe)/Ae-180,360/Math.PI*Math.atan(Math.exp((180-360*(Dn.y+We)/Ae)*Math.PI/180))-90]}}switch(this.type){case 1:var Yt=[];for(ce=0;ce<it.length;ce++)Yt[ce]=it[ce][0];Tt(it=Yt);break;case 2:for(ce=0;ce<it.length;ce++)Tt(it[ce]);break;case 3:for(it=function(tn){var mn=tn.length;if(mn<=1)return[tn];for(var Dn,Bn,Vn=[],er=0;er<mn;er++){var ir=Xy(tn[er]);0!==ir&&(void 0===Bn&&(Bn=ir<0),Bn===ir<0?(Dn&&Vn.push(Dn),Dn=[tn[er]]):Dn.push(tn[er]))}return Dn&&Vn.push(Dn),Vn}(it),ce=0;ce<it.length;ce++)for(xe=0;xe<it[ce].length;xe++)Tt(it[ce][xe])}1===it.length?it=it[0]:xt="Multi"+xt;var sn={type:"Feature",geometry:{type:xt,coordinates:it},properties:this.properties};return"id"in this&&(sn.id=this.id),sn};var $y=hh;function hh(S,N){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=S,this._keys=[],this._values=[],this._features=[],S.readFields(Pp,this,N),this.length=this._features.length}function Pp(S,N,K){15===S?N.version=K.readVarint():1===S?N.name=K.readString():5===S?N.extent=K.readVarint():2===S?N._features.push(K.pos):3===S?N._keys.push(K.readString()):4===S&&N._values.push(function(ce){for(var xe=null,Ae=ce.readVarint()+ce.pos;ce.pos<Ae;){var Oe=ce.readVarint()>>3;xe=1===Oe?ce.readString():2===Oe?ce.readFloat():3===Oe?ce.readDouble():4===Oe?ce.readVarint64():5===Oe?ce.readVarint():6===Oe?ce.readSVarint():7===Oe?ce.readBoolean():null}return xe}(K))}function xg(S,N,K){if(3===S){var ce=new $y(K,K.readVarint()+K.pos);ce.length&&(N[ce.name]=ce)}}hh.prototype.feature=function(S){if(S<0||S>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[S];var N=this._pbf.readVarint()+this._pbf.pos;return new od(this._pbf,N,this.extent,this._keys,this._values)};var Xc={VectorTile:function(S,N){this.layers=S.readFields(xg,{},N)},VectorTileFeature:od,VectorTileLayer:$y},bg=Xc.VectorTileFeature.types,sd=Math.pow(2,13);function dh(S,N,K,ce,xe,Ae,Oe,We){S.emplaceBack(N,K,2*Math.floor(ce*sd)+Oe,xe*sd*2,Ae*sd*2,Math.round(We))}var uu=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new kl,this.indexArray=new Ao,this.programConfigurations=new eo(fh,S.layers,S.zoom),this.segments=new Xt,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};function Ky(S,N){return S.x===N.x&&(S.x<0||S.x>8192)||S.y===N.y&&(S.y<0||S.y>8192)}function Jy(S){return S.every(function(N){return N.x<0})||S.every(function(N){return N.x>8192})||S.every(function(N){return N.y<0})||S.every(function(N){return N.y>8192})}uu.prototype.populate=function(S,N,K){this.features=[],this.hasPattern=ad("fill-extrusion",this.layers,N);for(var ce=0,xe=S;ce<xe.length;ce+=1){var Ae=xe[ce],Oe=Ae.feature,We=Ae.id,it=Ae.index,xt=Ae.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Yt={type:Oe.type,id:We,properties:Oe.properties,geometry:Tt?vo(Oe):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),Yt,K)){var sn={id:We,sourceLayerIndex:xt,index:it,geometry:Tt?Yt.geometry:vo(Oe),properties:Oe.properties,type:Oe.type,patterns:{}};void 0!==Oe.id&&(sn.id=Oe.id),this.hasPattern?this.features.push(Ip("fill-extrusion",this.layers,sn,this.zoom,N)):this.addFeature(sn,sn.geometry,it,K,{}),N.featureIndex.insert(Oe,sn.geometry,it,xt,this.index,!0)}}},uu.prototype.addFeatures=function(S,N,K){for(var ce=0,xe=this.features;ce<xe.length;ce+=1){var Ae=xe[ce];this.addFeature(Ae,Ae.geometry,Ae.index,N,K)}},uu.prototype.update=function(S,N,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,N,this.stateDependentLayers,K)},uu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},uu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},uu.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,fh),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},uu.prototype.addFeature=function(S,N,K,ce,xe){for(var Ae=0,Oe=Lp(N,500);Ae<Oe.length;Ae+=1){for(var We=Oe[Ae],it=0,xt=0,Tt=We;xt<Tt.length;xt+=1)it+=Tt[xt].length;for(var Yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),sn=0,tn=We;sn<tn.length;sn+=1){var mn=tn[sn];if(0!==mn.length&&!Jy(mn))for(var Dn=0,Bn=0;Bn<mn.length;Bn++){var Vn=mn[Bn];if(Bn>=1){var er=mn[Bn-1];if(!Ky(Vn,er)){Yt.vertexLength+4>Xt.MAX_VERTEX_ARRAY_LENGTH&&(Yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ir=Vn.sub(er)._perp()._unit(),hr=er.dist(Vn);Dn+hr>32768&&(Dn=0),dh(this.layoutVertexArray,Vn.x,Vn.y,ir.x,ir.y,0,0,Dn),dh(this.layoutVertexArray,Vn.x,Vn.y,ir.x,ir.y,0,1,Dn),dh(this.layoutVertexArray,er.x,er.y,ir.x,ir.y,0,0,Dn+=hr),dh(this.layoutVertexArray,er.x,er.y,ir.x,ir.y,0,1,Dn);var Ir=Yt.vertexLength;this.indexArray.emplaceBack(Ir,Ir+2,Ir+1),this.indexArray.emplaceBack(Ir+1,Ir+2,Ir+3),Yt.vertexLength+=4,Yt.primitiveLength+=2}}}}if(Yt.vertexLength+it>Xt.MAX_VERTEX_ARRAY_LENGTH&&(Yt=this.segments.prepareSegment(it,this.layoutVertexArray,this.indexArray)),"Polygon"===bg[S.type]){for(var Vr=[],si=[],oi=Yt.vertexLength,yi=0,Li=We;yi<Li.length;yi+=1){var $r=Li[yi];if(0!==$r.length){$r!==We[0]&&si.push(Vr.length/2);for(var ui=0;ui<$r.length;ui++){var zi=$r[ui];dh(this.layoutVertexArray,zi.x,zi.y,0,0,1,1,0),Vr.push(zi.x),Vr.push(zi.y)}}}for(var Ri=ih(Vr,si),Ci=0;Ci<Ri.length;Ci+=3)this.indexArray.emplaceBack(oi+Ri[Ci],oi+Ri[Ci+2],oi+Ri[Ci+1]);Yt.primitiveLength+=Ri.length/3,Yt.vertexLength+=it}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,xe,ce)},dr("FillExtrusionBucket",uu,{omit:["layers","features"]});var Qy={paint:new Ls({"fill-extrusion-opacity":new Pi(je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gi(je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pi(je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pi(je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jl(je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gi(je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gi(je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pi(je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bc=function(S){function N(K){S.call(this,K,Qy)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.createBucket=function(K){return new uu(K)},N.prototype.queryRadius=function(){return Vs(this.paint.get("fill-extrusion-translate"))},N.prototype.is3D=function(){return!0},N.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Oe,We,it,xt){var Tt=Eo(K,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),We.angle,it),Yt=this.paint.get("fill-extrusion-height").evaluate(ce,xe),sn=this.paint.get("fill-extrusion-base").evaluate(ce,xe),tn=function(Dn,Bn,Vn,er){for(var ir=[],hr=0,Ir=Dn;hr<Ir.length;hr+=1){var Vr=Ir[hr],si=[Vr.x,Vr.y,0,1];Ju(si,si,Bn),ir.push(new r(si[0]/si[3],si[1]/si[3]))}return ir}(Tt,xt),mn=function(Dn,Bn,Vn,er){for(var ir=[],hr=[],Ir=er[8]*Bn,Vr=er[9]*Bn,si=er[10]*Bn,oi=er[11]*Bn,yi=er[8]*Vn,Li=er[9]*Vn,$r=er[10]*Vn,ui=er[11]*Vn,zi=0,Ri=Dn;zi<Ri.length;zi+=1){for(var va=[],Ra=[],Ya=0,Xi=Ri[zi];Ya<Xi.length;Ya+=1){var ba=Xi[Ya],ho=ba.x,po=ba.y,xo=er[0]*ho+er[4]*po+er[12],bo=er[1]*ho+er[5]*po+er[13],os=er[2]*ho+er[6]*po+er[14],jo=er[3]*ho+er[7]*po+er[15],vs=os+si,ss=jo+oi,xs=xo+yi,qs=bo+Li,Os=os+$r,bs=jo+ui,Rs=new r((xo+Ir)/ss,(bo+Vr)/ss);Rs.z=vs/ss,va.push(Rs);var ls=new r(xs/bs,qs/bs);ls.z=Os/bs,Ra.push(ls)}ir.push(va),hr.push(Ra)}return[ir,hr]}(Ae,sn,Yt,xt);return function(Dn,Bn,Vn){var er=1/0;$u(Vn,Bn)&&(er=_g(Vn,Bn[0]));for(var ir=0;ir<Bn.length;ir++)for(var hr=Bn[ir],Ir=Dn[ir],Vr=0;Vr<hr.length-1;Vr++){var si=hr[Vr],$r=[si,hr[Vr+1],Ir[Vr+1],Ir[Vr],si];rl(Vn,$r)&&(er=Math.min(er,_g(Vn,$r)))}return er!==1/0&&er}(mn[0],mn[1],tn)},N}(Is);function ec(S,N){return S.x*N.x+S.y*N.y}function _g(S,N){if(1===S.length){for(var K,ce=0,xe=N[ce++];!K||xe.equals(K);)if(!(K=N[ce++]))return 1/0;for(;ce<N.length;ce++){var Ae=N[ce],Oe=S[0],We=K.sub(xe),it=Ae.sub(xe),xt=Oe.sub(xe),Tt=ec(We,We),Yt=ec(We,it),sn=ec(it,it),tn=ec(xt,We),mn=ec(xt,it),Dn=Tt*sn-Yt*Yt,Bn=(sn*tn-Yt*mn)/Dn,Vn=(Tt*mn-Yt*tn)/Dn,ir=xe.z*(1-Bn-Vn)+K.z*Bn+Ae.z*Vn;if(isFinite(ir))return ir}return 1/0}for(var hr=1/0,Ir=0,Vr=N;Ir<Vr.length;Ir+=1)hr=Math.min(hr,Vr[Ir].z);return hr}var ev=Pa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,mb=Xc.VectorTileFeature.types,yb=Math.cos(Math.PI/180*37.5),tv=Math.pow(2,14)/.5,Tl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tu,this.indexArray=new Ao,this.programConfigurations=new eo(ev,S.layers,S.zoom),this.segments=new Xt,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Tl.prototype.populate=function(S,N,K){this.hasPattern=ad("line",this.layers,N);for(var ce=this.layers[0].layout.get("line-sort-key"),xe=[],Ae=0,Oe=S;Ae<Oe.length;Ae+=1){var We=Oe[Ae],it=We.feature,xt=We.id,Tt=We.index,Yt=We.sourceLayerIndex,sn=this.layers[0]._featureFilter.needGeometry,tn={type:it.type,id:xt,properties:it.properties,geometry:sn?vo(it):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),tn,K)){sn||(tn.geometry=vo(it));var mn=ce?ce.evaluate(tn,{},K):void 0;xe.push({id:xt,properties:it.properties,type:it.type,sourceLayerIndex:Yt,index:Tt,geometry:tn.geometry,patterns:{},sortKey:mn})}}ce&&xe.sort(function(yi,Li){return yi.sortKey-Li.sortKey});for(var Bn=0,Vn=xe;Bn<Vn.length;Bn+=1){var er=Vn[Bn],hr=er.geometry,Ir=er.index,Vr=er.sourceLayerIndex;if(this.hasPattern){var si=Ip("line",this.layers,er,this.zoom,N);this.patternFeatures.push(si)}else this.addFeature(er,hr,Ir,K,{});N.featureIndex.insert(S[Ir].feature,hr,Ir,Vr,this.index)}},Tl.prototype.update=function(S,N,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,N,this.stateDependentLayers,K)},Tl.prototype.addFeatures=function(S,N,K){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var Ae=xe[ce];this.addFeature(Ae,Ae.geometry,Ae.index,N,K)}},Tl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Tl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Tl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,ev),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Tl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Tl.prototype.addFeature=function(S,N,K,ce,xe){for(var Ae=this.layers[0].layout,Oe=Ae.get("line-join").evaluate(S,{}),We=Ae.get("line-cap"),it=Ae.get("line-miter-limit"),xt=Ae.get("line-round-limit"),Tt=0,Yt=N;Tt<Yt.length;Tt+=1)this.addLine(Yt[Tt],S,Oe,We,it,xt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,xe,ce)},Tl.prototype.addLine=function(S,N,K,ce,xe,Ae){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Oe=0;Oe<S.length-1;Oe++)this.totalDistance+=S[Oe].dist(S[Oe+1]);this.updateScaledDistance()}for(var We="Polygon"===mb[N.type],it=S.length;it>=2&&S[it-1].equals(S[it-2]);)it--;for(var xt=0;xt<it-1&&S[xt].equals(S[xt+1]);)xt++;if(!(it<(We?3:2))){"bevel"===K&&(xe=1.05);var Tt,Yt=this.overscaling<=16?122880/(512*this.overscaling):0,sn=this.segments.prepareSegment(10*it,this.layoutVertexArray,this.indexArray),tn=void 0,mn=void 0,Dn=void 0,Bn=void 0;this.e1=this.e2=-1,We&&(Bn=S[xt].sub(Tt=S[it-2])._unit()._perp());for(var Vn=xt;Vn<it;Vn++)if(!(mn=Vn===it-1?We?S[xt+1]:void 0:S[Vn+1])||!S[Vn].equals(mn)){Bn&&(Dn=Bn),Tt&&(tn=Tt),Tt=S[Vn],Bn=mn?mn.sub(Tt)._unit()._perp():Dn;var er=(Dn=Dn||Bn).add(Bn);0===er.x&&0===er.y||er._unit();var ir=Dn.x*Bn.x+Dn.y*Bn.y,hr=er.x*Bn.x+er.y*Bn.y,Ir=0!==hr?1/hr:1/0,Vr=2*Math.sqrt(2-2*hr),si=hr<yb&&tn&&mn,oi=Dn.x*Bn.y-Dn.y*Bn.x>0;if(si&&Vn>xt){var yi=Tt.dist(tn);if(yi>2*Yt){var Li=Tt.sub(Tt.sub(tn)._mult(Yt/yi)._round());this.updateDistance(tn,Li),this.addCurrentVertex(Li,Dn,0,0,sn),tn=Li}}var $r=tn&&mn,ui=$r?K:We?"butt":ce;if($r&&"round"===ui&&(Ir<Ae?ui="miter":Ir<=2&&(ui="fakeround")),"miter"===ui&&Ir>xe&&(ui="bevel"),"bevel"===ui&&(Ir>2&&(ui="flipbevel"),Ir<xe&&(ui="miter")),tn&&this.updateDistance(tn,Tt),"miter"===ui)er._mult(Ir),this.addCurrentVertex(Tt,er,0,0,sn);else if("flipbevel"===ui){if(Ir>100)er=Bn.mult(-1);else{var zi=Ir*Dn.add(Bn).mag()/Dn.sub(Bn).mag();er._perp()._mult(zi*(oi?-1:1))}this.addCurrentVertex(Tt,er,0,0,sn),this.addCurrentVertex(Tt,er.mult(-1),0,0,sn)}else if("bevel"===ui||"fakeround"===ui){var Ri=-Math.sqrt(Ir*Ir-1),Ci=oi?Ri:0,va=oi?0:Ri;if(tn&&this.addCurrentVertex(Tt,Dn,Ci,va,sn),"fakeround"===ui)for(var Ra=Math.round(180*Vr/Math.PI/20),Ya=1;Ya<Ra;Ya++){var Xi=Ya/Ra;if(.5!==Xi){var ba=Xi-.5;Xi+=Xi*ba*(Xi-1)*((1.0904+ir*(ir*(3.55645-1.43519*ir)-3.2452))*ba*ba+(.848013+ir*(.215638*ir-1.06021)))}var ho=Bn.sub(Dn)._mult(Xi)._add(Dn)._unit()._mult(oi?-1:1);this.addHalfVertex(Tt,ho.x,ho.y,!1,oi,0,sn)}mn&&this.addCurrentVertex(Tt,Bn,-Ci,-va,sn)}else if("butt"===ui)this.addCurrentVertex(Tt,er,0,0,sn);else if("square"===ui){var po=tn?1:-1;this.addCurrentVertex(Tt,er,po,po,sn)}else"round"===ui&&(tn&&(this.addCurrentVertex(Tt,Dn,0,0,sn),this.addCurrentVertex(Tt,Dn,1,1,sn,!0)),mn&&(this.addCurrentVertex(Tt,Bn,-1,-1,sn,!0),this.addCurrentVertex(Tt,Bn,0,0,sn)));if(si&&Vn<it-1){var xo=Tt.dist(mn);if(xo>2*Yt){var bo=Tt.add(mn.sub(Tt)._mult(Yt/xo)._round());this.updateDistance(Tt,bo),this.addCurrentVertex(bo,Bn,0,0,sn),Tt=bo}}}}},Tl.prototype.addCurrentVertex=function(S,N,K,ce,xe,Ae){void 0===Ae&&(Ae=!1);var it=N.y*ce-N.x,xt=-N.y-N.x*ce;this.addHalfVertex(S,N.x+N.y*K,N.y-N.x*K,Ae,!1,K,xe),this.addHalfVertex(S,it,xt,Ae,!0,-ce,xe),this.distance>tv/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(S,N,K,ce,xe,Ae))},Tl.prototype.addHalfVertex=function(S,N,K,ce,xe,Ae,Oe){var xt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((S.x<<1)+(ce?1:0),(S.y<<1)+(xe?1:0),Math.round(63*N)+128,Math.round(63*K)+128,1+(0===Ae?0:Ae<0?-1:1)|(63&xt)<<2,xt>>6);var Tt=Oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Tt),Oe.primitiveLength++),xe?this.e2=Tt:this.e1=Tt},Tl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(tv-1):this.distance},Tl.prototype.updateDistance=function(S,N){this.distance+=S.dist(N),this.updateScaledDistance()},dr("LineBucket",Tl,{omit:["layers","patternFeatures"]});var wg=new Ls({"line-cap":new Pi(je.layout_line["line-cap"]),"line-join":new Gi(je.layout_line["line-join"]),"line-miter-limit":new Pi(je.layout_line["line-miter-limit"]),"line-round-limit":new Pi(je.layout_line["line-round-limit"]),"line-sort-key":new Gi(je.layout_line["line-sort-key"])}),Tg={paint:new Ls({"line-opacity":new Gi(je.paint_line["line-opacity"]),"line-color":new Gi(je.paint_line["line-color"]),"line-translate":new Pi(je.paint_line["line-translate"]),"line-translate-anchor":new Pi(je.paint_line["line-translate-anchor"]),"line-width":new Gi(je.paint_line["line-width"]),"line-gap-width":new Gi(je.paint_line["line-gap-width"]),"line-offset":new Gi(je.paint_line["line-offset"]),"line-blur":new Gi(je.paint_line["line-blur"]),"line-dasharray":new Ql(je.paint_line["line-dasharray"]),"line-pattern":new Jl(je.paint_line["line-pattern"]),"line-gradient":new hl(je.paint_line["line-gradient"])}),layout:wg},Mg=new(function(S){function N(){S.apply(this,arguments)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.possiblyEvaluate=function(K,ce){return ce=new Qa(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),S.prototype.possiblyEvaluate.call(this,K,ce)},N.prototype.evaluate=function(K,ce,xe,Ae){return ce=c({},ce,{zoom:Math.floor(ce.zoom)}),S.prototype.evaluate.call(this,K,ce,xe,Ae)},N}(Gi))(Tg.paint.properties["line-width"].specification);Mg.useIntegerZoom=!0;var nv=function(S){function N(K){S.call(this,K,Tg)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype._handleSpecialPaintPropertyUpdate=function(K){"line-gradient"===K&&this._updateGradient()},N.prototype._updateGradient=function(){this.gradient=Ep(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},N.prototype.recalculate=function(K,ce){S.prototype.recalculate.call(this,K,ce),this.paint._values["line-floorwidth"]=Mg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,K)},N.prototype.createBucket=function(K){return new Tl(K)},N.prototype.queryRadius=function(K){var ce=K,xe=Ag(Bo("line-width",this,ce),Bo("line-gap-width",this,ce)),Ae=Bo("line-offset",this,ce);return xe/2+Math.abs(Ae)+Vs(this.paint.get("line-translate"))},N.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Oe,We,it){var xt=Eo(K,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),We.angle,it),Tt=it/2*Ag(this.paint.get("line-width").evaluate(ce,xe),this.paint.get("line-gap-width").evaluate(ce,xe)),Yt=this.paint.get("line-offset").evaluate(ce,xe);return Yt&&(Ae=function(sn,tn){for(var mn=[],Dn=new r(0,0),Bn=0;Bn<sn.length;Bn++){for(var Vn=sn[Bn],er=[],ir=0;ir<Vn.length;ir++){var Ir=Vn[ir],Vr=Vn[ir+1],si=0===ir?Dn:Ir.sub(Vn[ir-1])._unit()._perp(),oi=ir===Vn.length-1?Dn:Vr.sub(Ir)._unit()._perp(),yi=si._add(oi)._unit();yi._mult(1/(yi.x*oi.x+yi.y*oi.y)),er.push(yi._mult(tn)._add(Ir))}mn.push(er)}return mn}(Ae,Yt*it)),function(sn,tn,mn){for(var Dn=0;Dn<tn.length;Dn++){var Bn=tn[Dn];if(sn.length>=3)for(var Vn=0;Vn<Bn.length;Vn++)if(il(sn,Bn[Vn]))return!0;if(_f(sn,Bn,mn))return!0}return!1}(xt,Ae,Tt)},N.prototype.isTileClipped=function(){return!0},N}(Is);function Ag(S,N){return N>0?N+2*S:S}var kg=Pa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rv=Pa([{name:"a_projected_pos",components:3,type:"Float32"}],4),ld=(Pa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Pa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Op=(Pa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Pa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Du=Pa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ph(S,N,K){return S.sections.forEach(function(ce){var xe,Oe,We;ce.text=(xe=ce.text,Oe=K,"uppercase"===(We=N.layout.get("text-transform").evaluate(Oe,{}))?xe=xe.toLocaleUpperCase():"lowercase"===We&&(xe=xe.toLocaleLowerCase()),Mo.applyArabicShaping&&(xe=Mo.applyArabicShaping(xe)),xe)}),S}Pa([{name:"triangle",components:3,type:"Uint16"}]),Pa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Pa([{type:"Float32",name:"offsetX"}]),Pa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Af={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Rp=function(S,N,K,ce,xe){var Ae,Oe,We=8*xe-ce-1,it=(1<<We)-1,xt=it>>1,Tt=-7,Yt=K?xe-1:0,sn=K?-1:1,tn=S[N+Yt];for(Yt+=sn,Ae=tn&(1<<-Tt)-1,tn>>=-Tt,Tt+=We;Tt>0;Ae=256*Ae+S[N+Yt],Yt+=sn,Tt-=8);for(Oe=Ae&(1<<-Tt)-1,Ae>>=-Tt,Tt+=ce;Tt>0;Oe=256*Oe+S[N+Yt],Yt+=sn,Tt-=8);if(0===Ae)Ae=1-xt;else{if(Ae===it)return Oe?NaN:1/0*(tn?-1:1);Oe+=Math.pow(2,ce),Ae-=xt}return(tn?-1:1)*Oe*Math.pow(2,Ae-ce)},Fp=function(S,N,K,ce,xe,Ae){var Oe,We,it,xt=8*Ae-xe-1,Tt=(1<<xt)-1,Yt=Tt>>1,sn=23===xe?Math.pow(2,-24)-Math.pow(2,-77):0,tn=ce?0:Ae-1,mn=ce?1:-1,Dn=N<0||0===N&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(We=isNaN(N)?1:0,Oe=Tt):(Oe=Math.floor(Math.log(N)/Math.LN2),N*(it=Math.pow(2,-Oe))<1&&(Oe--,it*=2),(N+=Oe+Yt>=1?sn/it:sn*Math.pow(2,1-Yt))*it>=2&&(Oe++,it/=2),Oe+Yt>=Tt?(We=0,Oe=Tt):Oe+Yt>=1?(We=(N*it-1)*Math.pow(2,xe),Oe+=Yt):(We=N*Math.pow(2,Yt-1)*Math.pow(2,xe),Oe=0));xe>=8;S[K+tn]=255&We,tn+=mn,We/=256,xe-=8);for(Oe=Oe<<xe|We,xt+=xe;xt>0;S[K+tn]=255&Oe,tn+=mn,Oe/=256,xt-=8);S[K+tn-mn]|=128*Dn},Np=So;function So(S){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(S)?S:new Uint8Array(S||0),this.pos=0,this.type=0,this.length=this.buf.length}So.Varint=0,So.Fixed64=1,So.Bytes=2,So.Fixed32=5;var iv="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function cu(S){return S.type===So.Bytes?S.readVarint()+S.pos:S.pos+1}function ud(S,N,K){var ce=N<=16383?1:N<=2097151?2:N<=268435455?3:Math.floor(Math.log(N)/(7*Math.LN2));K.realloc(ce);for(var xe=K.pos-1;xe>=S;xe--)K.buf[xe+ce]=K.buf[xe]}function vb(S,N){for(var K=0;K<S.length;K++)N.writeVarint(S[K])}function xb(S,N){for(var K=0;K<S.length;K++)N.writeSVarint(S[K])}function Eg(S,N){for(var K=0;K<S.length;K++)N.writeFloat(S[K])}function av(S,N){for(var K=0;K<S.length;K++)N.writeDouble(S[K])}function ov(S,N){for(var K=0;K<S.length;K++)N.writeBoolean(S[K])}function sv(S,N){for(var K=0;K<S.length;K++)N.writeFixed32(S[K])}function lv(S,N){for(var K=0;K<S.length;K++)N.writeSFixed32(S[K])}function Sg(S,N){for(var K=0;K<S.length;K++)N.writeFixed64(S[K])}function cd(S,N){for(var K=0;K<S.length;K++)N.writeSFixed64(S[K])}function fd(S,N){return(S[N]|S[N+1]<<8|S[N+2]<<16)+16777216*S[N+3]}function wc(S,N,K){S[K]=N,S[K+1]=N>>>8,S[K+2]=N>>>16,S[K+3]=N>>>24}function Cg(S,N){return(S[N]|S[N+1]<<8|S[N+2]<<16)+(S[N+3]<<24)}function Ps(S,N,K){1===S&&K.readMessage(uv,N)}function uv(S,N,K){if(3===S){var ce=K.readMessage(cv,{}),Oe=ce.width,We=ce.height,it=ce.left,xt=ce.top,Tt=ce.advance;N.push({id:ce.id,bitmap:new Yc({width:Oe+6,height:We+6},ce.bitmap),metrics:{width:Oe,height:We,left:it,top:xt,advance:Tt}})}}function cv(S,N,K){1===S?N.id=K.readVarint():2===S?N.bitmap=K.readBytes():3===S?N.width=K.readVarint():4===S?N.height=K.readVarint():5===S?N.left=K.readSVarint():6===S?N.top=K.readSVarint():7===S&&(N.advance=K.readVarint())}function hd(S){for(var N=0,K=0,ce=0,xe=S;ce<xe.length;ce+=1){var Ae=xe[ce];N+=Ae.w*Ae.h,K=Math.max(K,Ae.w)}S.sort(function(Dn,Bn){return Bn.h-Dn.h});for(var Oe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(N/.95)),K),h:1/0}],We=0,it=0,xt=0,Tt=S;xt<Tt.length;xt+=1)for(var Yt=Tt[xt],sn=Oe.length-1;sn>=0;sn--){var tn=Oe[sn];if(!(Yt.w>tn.w||Yt.h>tn.h)){if(Yt.x=tn.x,Yt.y=tn.y,it=Math.max(it,Yt.y+Yt.h),We=Math.max(We,Yt.x+Yt.w),Yt.w===tn.w&&Yt.h===tn.h){var mn=Oe.pop();sn<Oe.length&&(Oe[sn]=mn)}else Yt.h===tn.h?(tn.x+=Yt.w,tn.w-=Yt.w):Yt.w===tn.w?(tn.y+=Yt.h,tn.h-=Yt.h):(Oe.push({x:tn.x+Yt.w,y:tn.y,w:tn.w-Yt.w,h:Yt.h}),tn.y+=Yt.h,tn.h-=Yt.h);break}}return{w:We,h:it,fill:N/(We*it)||0}}So.prototype={destroy:function(){this.buf=null},readFields:function(S,N,K){for(K=K||this.length;this.pos<K;){var ce=this.readVarint(),xe=ce>>3,Ae=this.pos;this.type=7&ce,S(xe,N,this),this.pos===Ae&&this.skip(ce)}return N},readMessage:function(S,N){return this.readFields(S,N,this.readVarint()+this.pos)},readFixed32:function(){var S=fd(this.buf,this.pos);return this.pos+=4,S},readSFixed32:function(){var S=Cg(this.buf,this.pos);return this.pos+=4,S},readFixed64:function(){var S=fd(this.buf,this.pos)+4294967296*fd(this.buf,this.pos+4);return this.pos+=8,S},readSFixed64:function(){var S=fd(this.buf,this.pos)+4294967296*Cg(this.buf,this.pos+4);return this.pos+=8,S},readFloat:function(){var S=Rp(this.buf,this.pos,!0,23,4);return this.pos+=4,S},readDouble:function(){var S=Rp(this.buf,this.pos,!0,52,8);return this.pos+=8,S},readVarint:function(S){var N,K,ce=this.buf;return N=127&(K=ce[this.pos++]),K<128?N:(N|=(127&(K=ce[this.pos++]))<<7,K<128?N:(N|=(127&(K=ce[this.pos++]))<<14,K<128?N:(N|=(127&(K=ce[this.pos++]))<<21,K<128?N:function(xe,Ae,Oe){var We,it,xt=Oe.buf;if(We=(112&(it=xt[Oe.pos++]))>>4,it<128||(We|=(127&(it=xt[Oe.pos++]))<<3,it<128)||(We|=(127&(it=xt[Oe.pos++]))<<10,it<128)||(We|=(127&(it=xt[Oe.pos++]))<<17,it<128)||(We|=(127&(it=xt[Oe.pos++]))<<24,it<128)||(We|=(1&(it=xt[Oe.pos++]))<<31,it<128))return function _c(S,N,K){return K?4294967296*N+(S>>>0):4294967296*(N>>>0)+(S>>>0)}(xe,We,Ae);throw new Error("Expected varint not more than 10 bytes")}(N|=(15&(K=ce[this.pos]))<<28,S,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var S=this.readVarint();return S%2==1?(S+1)/-2:S/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var S=this.readVarint()+this.pos,N=this.pos;return this.pos=S,S-N>=12&&iv?iv.decode(this.buf.subarray(N,S)):function(K,ce,xe){for(var Ae="",Oe=ce;Oe<xe;){var We,it,xt,Tt=K[Oe],Yt=null,sn=Tt>239?4:Tt>223?3:Tt>191?2:1;if(Oe+sn>xe)break;1===sn?Tt<128&&(Yt=Tt):2===sn?128==(192&(We=K[Oe+1]))&&(Yt=(31&Tt)<<6|63&We)<=127&&(Yt=null):3===sn?(it=K[Oe+2],128==(192&(We=K[Oe+1]))&&128==(192&it)&&((Yt=(15&Tt)<<12|(63&We)<<6|63&it)<=2047||Yt>=55296&&Yt<=57343)&&(Yt=null)):4===sn&&(it=K[Oe+2],xt=K[Oe+3],128==(192&(We=K[Oe+1]))&&128==(192&it)&&128==(192&xt)&&((Yt=(15&Tt)<<18|(63&We)<<12|(63&it)<<6|63&xt)<=65535||Yt>=1114112)&&(Yt=null)),null===Yt?(Yt=65533,sn=1):Yt>65535&&(Yt-=65536,Ae+=String.fromCharCode(Yt>>>10&1023|55296),Yt=56320|1023&Yt),Ae+=String.fromCharCode(Yt),Oe+=sn}return Ae}(this.buf,N,S)},readBytes:function(){var S=this.readVarint()+this.pos,N=this.buf.subarray(this.pos,S);return this.pos=S,N},readPackedVarint:function(S,N){if(this.type!==So.Bytes)return S.push(this.readVarint(N));var K=cu(this);for(S=S||[];this.pos<K;)S.push(this.readVarint(N));return S},readPackedSVarint:function(S){if(this.type!==So.Bytes)return S.push(this.readSVarint());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readSVarint());return S},readPackedBoolean:function(S){if(this.type!==So.Bytes)return S.push(this.readBoolean());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readBoolean());return S},readPackedFloat:function(S){if(this.type!==So.Bytes)return S.push(this.readFloat());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readFloat());return S},readPackedDouble:function(S){if(this.type!==So.Bytes)return S.push(this.readDouble());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readDouble());return S},readPackedFixed32:function(S){if(this.type!==So.Bytes)return S.push(this.readFixed32());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readFixed32());return S},readPackedSFixed32:function(S){if(this.type!==So.Bytes)return S.push(this.readSFixed32());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readSFixed32());return S},readPackedFixed64:function(S){if(this.type!==So.Bytes)return S.push(this.readFixed64());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readFixed64());return S},readPackedSFixed64:function(S){if(this.type!==So.Bytes)return S.push(this.readSFixed64());var N=cu(this);for(S=S||[];this.pos<N;)S.push(this.readSFixed64());return S},skip:function(S){var N=7&S;if(N===So.Varint)for(;this.buf[this.pos++]>127;);else if(N===So.Bytes)this.pos=this.readVarint()+this.pos;else if(N===So.Fixed32)this.pos+=4;else{if(N!==So.Fixed64)throw new Error("Unimplemented type: "+N);this.pos+=8}},writeTag:function(S,N){this.writeVarint(S<<3|N)},realloc:function(S){for(var N=this.length||16;N<this.pos+S;)N*=2;if(N!==this.length){var K=new Uint8Array(N);K.set(this.buf),this.buf=K,this.length=N}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(S){this.realloc(4),wc(this.buf,S,this.pos),this.pos+=4},writeSFixed32:function(S){this.realloc(4),wc(this.buf,S,this.pos),this.pos+=4},writeFixed64:function(S){this.realloc(8),wc(this.buf,-1&S,this.pos),wc(this.buf,Math.floor(S*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(S){this.realloc(8),wc(this.buf,-1&S,this.pos),wc(this.buf,Math.floor(S*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(S){(S=+S||0)>268435455||S<0?function(N,K){var ce,xe,Ae,We;if(N>=0?(ce=N%4294967296|0,xe=N/4294967296|0):(xe=~(-N/4294967296),4294967295^(ce=~(-N%4294967296))?ce=ce+1|0:(ce=0,xe=xe+1|0)),N>=0x10000000000000000||N<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");K.realloc(10),Ae=ce,(We=K).buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,We.buf[We.pos]=127&(Ae>>>=7),function(Ae,Oe){var We=(7&Ae)<<4;Oe.buf[Oe.pos++]|=We|((Ae>>>=3)?128:0),Ae&&(Oe.buf[Oe.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Oe.buf[Oe.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Oe.buf[Oe.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Oe.buf[Oe.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Oe.buf[Oe.pos++]=127&Ae)))))}(xe,K)}(S,this):(this.realloc(4),this.buf[this.pos++]=127&S|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=S>>>7&127))))},writeSVarint:function(S){this.writeVarint(S<0?2*-S-1:2*S)},writeBoolean:function(S){this.writeVarint(Boolean(S))},writeString:function(S){S=String(S),this.realloc(4*S.length),this.pos++;var N=this.pos;this.pos=function(ce,xe,Ae){for(var Oe,We,it=0;it<xe.length;it++){if((Oe=xe.charCodeAt(it))>55295&&Oe<57344){if(!We){Oe>56319||it+1===xe.length?(ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189):We=Oe;continue}if(Oe<56320){ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189,We=Oe;continue}Oe=We-55296<<10|Oe-56320|65536,We=null}else We&&(ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189,We=null);Oe<128?ce[Ae++]=Oe:(Oe<2048?ce[Ae++]=Oe>>6|192:(Oe<65536?ce[Ae++]=Oe>>12|224:(ce[Ae++]=Oe>>18|240,ce[Ae++]=Oe>>12&63|128),ce[Ae++]=Oe>>6&63|128),ce[Ae++]=63&Oe|128)}return Ae}(this.buf,S,this.pos);var K=this.pos-N;K>=128&&ud(N,K,this),this.pos=N-1,this.writeVarint(K),this.pos+=K},writeFloat:function(S){this.realloc(4),Fp(this.buf,S,this.pos,!0,23,4),this.pos+=4},writeDouble:function(S){this.realloc(8),Fp(this.buf,S,this.pos,!0,52,8),this.pos+=8},writeBytes:function(S){var N=S.length;this.writeVarint(N),this.realloc(N);for(var K=0;K<N;K++)this.buf[this.pos++]=S[K]},writeRawMessage:function(S,N){this.pos++;var K=this.pos;S(N,this);var ce=this.pos-K;ce>=128&&ud(K,ce,this),this.pos=K-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(S,N,K){this.writeTag(S,So.Bytes),this.writeRawMessage(N,K)},writePackedVarint:function(S,N){N.length&&this.writeMessage(S,vb,N)},writePackedSVarint:function(S,N){N.length&&this.writeMessage(S,xb,N)},writePackedBoolean:function(S,N){N.length&&this.writeMessage(S,ov,N)},writePackedFloat:function(S,N){N.length&&this.writeMessage(S,Eg,N)},writePackedDouble:function(S,N){N.length&&this.writeMessage(S,av,N)},writePackedFixed32:function(S,N){N.length&&this.writeMessage(S,sv,N)},writePackedSFixed32:function(S,N){N.length&&this.writeMessage(S,lv,N)},writePackedFixed64:function(S,N){N.length&&this.writeMessage(S,Sg,N)},writePackedSFixed64:function(S,N){N.length&&this.writeMessage(S,cd,N)},writeBytesField:function(S,N){this.writeTag(S,So.Bytes),this.writeBytes(N)},writeFixed32Field:function(S,N){this.writeTag(S,So.Fixed32),this.writeFixed32(N)},writeSFixed32Field:function(S,N){this.writeTag(S,So.Fixed32),this.writeSFixed32(N)},writeFixed64Field:function(S,N){this.writeTag(S,So.Fixed64),this.writeFixed64(N)},writeSFixed64Field:function(S,N){this.writeTag(S,So.Fixed64),this.writeSFixed64(N)},writeVarintField:function(S,N){this.writeTag(S,So.Varint),this.writeVarint(N)},writeSVarintField:function(S,N){this.writeTag(S,So.Varint),this.writeSVarint(N)},writeStringField:function(S,N){this.writeTag(S,So.Bytes),this.writeString(N)},writeFloatField:function(S,N){this.writeTag(S,So.Fixed32),this.writeFloat(N)},writeDoubleField:function(S,N){this.writeTag(S,So.Fixed64),this.writeDouble(N)},writeBooleanField:function(S,N){this.writeVarintField(S,Boolean(N))}};var gh=function(S,N){var K=N.pixelRatio,ce=N.version,xe=N.stretchX,Ae=N.stretchY,Oe=N.content;this.paddedRect=S,this.pixelRatio=K,this.stretchX=xe,this.stretchY=Ae,this.content=Oe,this.version=ce},mh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};mh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mh.tlbr.get=function(){return this.tl.concat(this.br)},mh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gh.prototype,mh);var yh=function(S,N){var K={},ce={};this.haveRenderCallbacks=[];var xe=[];this.addImages(S,K,xe),this.addImages(N,ce,xe);var Ae=hd(xe),it=new dl({width:Ae.w||1,height:Ae.h||1});for(var xt in S){var Tt=S[xt],Yt=K[xt].paddedRect;dl.copy(Tt.data,it,{x:0,y:0},{x:Yt.x+1,y:Yt.y+1},Tt.data)}for(var sn in N){var tn=N[sn],mn=ce[sn].paddedRect,Dn=mn.x+1,Bn=mn.y+1,Vn=tn.data.width,er=tn.data.height;dl.copy(tn.data,it,{x:0,y:0},{x:Dn,y:Bn},tn.data),dl.copy(tn.data,it,{x:0,y:er-1},{x:Dn,y:Bn-1},{width:Vn,height:1}),dl.copy(tn.data,it,{x:0,y:0},{x:Dn,y:Bn+er},{width:Vn,height:1}),dl.copy(tn.data,it,{x:Vn-1,y:0},{x:Dn-1,y:Bn},{width:1,height:er}),dl.copy(tn.data,it,{x:0,y:0},{x:Dn+Vn,y:Bn},{width:1,height:er})}this.image=it,this.iconPositions=K,this.patternPositions=ce};yh.prototype.addImages=function(S,N,K){for(var ce in S){var xe=S[ce],Ae={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};K.push(Ae),N[ce]=new gh(Ae,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},yh.prototype.patchUpdatedImages=function(S,N){for(var K in S.dispatchRenderCallbacks(this.haveRenderCallbacks),S.updatedImages)this.patchUpdatedImage(this.iconPositions[K],S.getImage(K),N),this.patchUpdatedImage(this.patternPositions[K],S.getImage(K),N)},yh.prototype.patchUpdatedImage=function(S,N,K){if(S&&N&&S.version!==N.version){S.version=N.version;var ce=S.tl;K.update(N.data,void 0,{x:ce[0],y:ce[1]})}},dr("ImagePosition",gh),dr("ImageAtlas",yh);var El={horizontal:1,vertical:2,horizontalOnly:3},kf=function(){this.scale=1,this.fontStack="",this.imageName=null};kf.forText=function(S,N){var K=new kf;return K.scale=S||1,K.fontStack=N,K},kf.forImage=function(S){var N=new kf;return N.imageName=S,N};var $s=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function zp(S,N,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn){var Bn,Vn=$s.fromFeature(S,xe);Yt===El.vertical&&Vn.verticalizePunctuation();var er=Mo.processBidirectionalText,ir=Mo.processStyledBidirectionalText;if(er&&1===Vn.sections.length){Bn=[];for(var hr=0,Ir=er(Vn.toString(),Ks(Vn,xt,Ae,N,ce,tn,mn));hr<Ir.length;hr+=1){var Vr=Ir[hr],si=new $s;si.text=Vr,si.sections=Vn.sections;for(var oi=0;oi<Vr.length;oi++)si.sectionIndex.push(0);Bn.push(si)}}else if(ir){Bn=[];for(var yi=0,Li=ir(Vn.text,Vn.sectionIndex,Ks(Vn,xt,Ae,N,ce,tn,mn));yi<Li.length;yi+=1){var $r=Li[yi],ui=new $s;ui.text=$r[0],ui.sectionIndex=$r[1],ui.sections=Vn.sections,Bn.push(ui)}}else Bn=function(Ci,va){for(var Ra=[],Ya=Ci.text,Xi=0,ba=0,ho=va;ba<ho.length;ba+=1){var po=ho[ba];Ra.push(Ci.substring(Xi,po)),Xi=po}return Xi<Ya.length&&Ra.push(Ci.substring(Xi,Ya.length)),Ra}(Vn,Ks(Vn,xt,Ae,N,ce,tn,mn));var zi=[],Ri={positionedLines:zi,text:Vn.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:Yt,iconsInText:!1,verticalizable:!1};return function(Ci,va,Ra,Ya,Xi,ba,ho,po,xo,bo,os,jo){for(var vs=0,ss=-17,xs=0,qs=0,Os="right"===po?1:"left"===po?0:.5,bs=0,Rs=0,ls=Xi;Rs<ls.length;Rs+=1){var _s=ls[Rs];_s.trim();var Aa=_s.getMaxScale(),Va=24*(Aa-1),es={positionedGlyphs:[],lineOffset:0};Ci.positionedLines[bs]=es;var Yo=es.positionedGlyphs,Zo=0;if(_s.length()){for(var Co=0;Co<_s.length();Co++){var Za=_s.getSection(Co),Xo=_s.getSectionIndex(Co),Gs=_s.getCharCode(Co),Sl=0,ol=null,Pu=null,kc=null,Fs=24,Ou=!(xo===El.horizontal||!os&&!pr(Gs)||os&&(Bp[Gs]||(Nu=Gs,Yr.Arabic(Nu)||Yr["Arabic Supplement"](Nu)||Yr["Arabic Extended-A"](Nu)||Yr["Arabic Presentation Forms-A"](Nu)||Yr["Arabic Presentation Forms-B"](Nu))));if(Za.imageName){var Ru=Ya[Za.imageName];if(!Ru)continue;kc=Za.imageName,Ci.iconsInText=Ci.iconsInText||!0,Pu=Ru.paddedRect;var Fu=Ru.displaySize;Za.scale=24*Za.scale/jo,Sl=Va+(24-Fu[1]*Za.scale),Fs=(ol={width:Fu[0],height:Fu[1],left:1,top:-3,advance:Ou?Fu[1]:Fu[0]}).advance;var bh=Ou?Fu[0]*Za.scale-24*Aa:Fu[1]*Za.scale-24*Aa;bh>0&&bh>Zo&&(Zo=bh)}else{var fu=Ra[Za.fontStack],rc=fu&&fu[Gs];if(rc&&rc.rect)Pu=rc.rect,ol=rc.metrics;else{var Cd=va[Za.fontStack],_h=Cd&&Cd[Gs];if(!_h)continue;ol=_h.metrics}Sl=24*(Aa-Za.scale)}Ou?(Ci.verticalizable=!0,Yo.push({glyph:Gs,imageName:kc,x:vs,y:ss+Sl,vertical:Ou,scale:Za.scale,fontStack:Za.fontStack,sectionIndex:Xo,metrics:ol,rect:Pu}),vs+=Fs*Za.scale+bo):(Yo.push({glyph:Gs,imageName:kc,x:vs,y:ss+Sl,vertical:Ou,scale:Za.scale,fontStack:Za.fontStack,sectionIndex:Xo,metrics:ol,rect:Pu}),vs+=ol.advance*Za.scale+bo)}0!==Yo.length&&(xs=Math.max(vs-bo,xs),Vp(Yo,0,Yo.length-1,Os,Zo)),vs=0;var wh=ba*Aa+Zo;es.lineOffset=Math.max(Zo,Va),ss+=wh,qs=Math.max(wh,qs),++bs}else ss+=ba,++bs}var Nu,Ff=ss- -17,hu=$c(ho),nf=hu.horizontalAlign,Ec=hu.verticalAlign;(function(rf,Dd,Th,Ld,Mh,Sc,zu,Nf,Bu){var du,Cc=(Dd-Th)*Mh;du=Sc!==zu?-Nf*Ld- -17:(-Ld*Bu+.5)*zu;for(var zf=0,af=rf;zf<af.length;zf+=1)for(var Dc=0,of=af[zf].positionedGlyphs;Dc<of.length;Dc+=1){var sf=of[Dc];sf.x+=Cc,sf.y+=du}})(Ci.positionedLines,Os,nf,Ec,xs,qs,ba,Ff,Xi.length),Ci.top+=-Ec*Ff,Ci.bottom=Ci.top+Ff,Ci.left+=-nf*xs,Ci.right=Ci.left+xs}(Ri,N,K,ce,Bn,Oe,We,it,Yt,xt,sn,Dn),!function(Ci){for(var va=0,Ra=Ci;va<Ra.length;va+=1)if(0!==Ra[va].positionedGlyphs.length)return!1;return!0}(zi)&&Ri}$s.fromFeature=function(S,N){for(var K=new $s,ce=0;ce<S.sections.length;ce++){var xe=S.sections[ce];xe.image?K.addImageSection(xe):K.addTextSection(xe,N)}return K},$s.prototype.length=function(){return this.text.length},$s.prototype.getSection=function(S){return this.sections[this.sectionIndex[S]]},$s.prototype.getSectionIndex=function(S){return this.sectionIndex[S]},$s.prototype.getCharCode=function(S){return this.text.charCodeAt(S)},$s.prototype.verticalizePunctuation=function(){this.text=function(S){for(var N="",K=0;K<S.length;K++){var ce=S.charCodeAt(K+1)||null,xe=S.charCodeAt(K-1)||null;ce&&Di(ce)&&!Af[S[K+1]]||xe&&Di(xe)&&!Af[S[K-1]]||!Af[S[K]]?N+=S[K]:N+=Af[S[K]]}return N}(this.text)},$s.prototype.trim=function(){for(var S=0,N=0;N<this.text.length&&Bp[this.text.charCodeAt(N)];N++)S++;for(var K=this.text.length,ce=this.text.length-1;ce>=0&&ce>=S&&Bp[this.text.charCodeAt(ce)];ce--)K--;this.text=this.text.substring(S,K),this.sectionIndex=this.sectionIndex.slice(S,K)},$s.prototype.substring=function(S,N){var K=new $s;return K.text=this.text.substring(S,N),K.sectionIndex=this.sectionIndex.slice(S,N),K.sections=this.sections,K},$s.prototype.toString=function(){return this.text},$s.prototype.getMaxScale=function(){var S=this;return this.sectionIndex.reduce(function(N,K){return Math.max(N,S.sections[K].scale)},0)},$s.prototype.addTextSection=function(S,N){this.text+=S.text,this.sections.push(kf.forText(S.scale,S.fontStack||N));for(var K=this.sections.length-1,ce=0;ce<S.text.length;++ce)this.sectionIndex.push(K)},$s.prototype.addImageSection=function(S){var N=S.image?S.image.name:"";if(0!==N.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(kf.forImage(N)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},$s.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Bp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hs={};function pl(S,N,K,ce,xe,Ae){if(N.imageName){var Oe=ce[N.imageName];return Oe?Oe.displaySize[0]*N.scale*24/Ae+xe:0}var We=K[N.fontStack],it=We&&We[S];return it?it.metrics.advance*N.scale+xe:0}function dd(S,N,K,ce){var xe=Math.pow(S-N,2);return ce?S<N?xe/2:2*xe:xe+Math.abs(K)*K}function Dg(S,N,K){var ce=0;return 10===S&&(ce-=1e4),K&&(ce+=150),40!==S&&65288!==S||(ce+=50),41!==N&&65289!==N||(ce+=50),ce}function jp(S,N,K,ce,xe,Ae){for(var Oe=null,We=dd(N,K,xe,Ae),it=0,xt=ce;it<xt.length;it+=1){var Tt=xt[it],Yt=dd(N-Tt.x,K,xe,Ae)+Tt.badness;Yt<=We&&(Oe=Tt,We=Yt)}return{index:S,x:N,priorBreak:Oe,badness:We}}function Ks(S,N,K,ce,xe,Ae,Oe){if("point"!==Ae)return[];if(!S)return[];for(var We,it=[],xt=function(Bn,Vn,er,ir,hr,Ir){for(var Vr=0,si=0;si<Bn.length();si++){var oi=Bn.getSection(si);Vr+=pl(Bn.getCharCode(si),oi,ir,hr,Vn,Ir)}return Vr/Math.max(1,Math.ceil(Vr/er))}(S,N,K,ce,xe,Oe),Tt=S.text.indexOf("\u200b")>=0,Yt=0,sn=0;sn<S.length();sn++){var tn=S.getSection(sn),mn=S.getCharCode(sn);if(Bp[mn]||(Yt+=pl(mn,tn,ce,xe,N,Oe)),sn<S.length()-1){var Dn=!((We=mn)<11904||!(Yr["Bopomofo Extended"](We)||Yr.Bopomofo(We)||Yr["CJK Compatibility Forms"](We)||Yr["CJK Compatibility Ideographs"](We)||Yr["CJK Compatibility"](We)||Yr["CJK Radicals Supplement"](We)||Yr["CJK Strokes"](We)||Yr["CJK Symbols and Punctuation"](We)||Yr["CJK Unified Ideographs Extension A"](We)||Yr["CJK Unified Ideographs"](We)||Yr["Enclosed CJK Letters and Months"](We)||Yr["Halfwidth and Fullwidth Forms"](We)||Yr.Hiragana(We)||Yr["Ideographic Description Characters"](We)||Yr["Kangxi Radicals"](We)||Yr["Katakana Phonetic Extensions"](We)||Yr.Katakana(We)||Yr["Vertical Forms"](We)||Yr["Yi Radicals"](We)||Yr["Yi Syllables"](We)));(Hs[mn]||Dn||tn.imageName)&&it.push(jp(sn+1,Yt,xt,it,Dg(mn,S.getCharCode(sn+1),Dn&&Tt),!1))}}return function Bn(Vn){return Vn?Bn(Vn.priorBreak).concat(Vn.index):[]}(jp(S.length(),Yt,xt,it,0,!0))}function $c(S){var N=.5,K=.5;switch(S){case"right":case"top-right":case"bottom-right":N=1;break;case"left":case"top-left":case"bottom-left":N=0}switch(S){case"bottom":case"bottom-right":case"bottom-left":K=1;break;case"top":case"top-right":case"top-left":K=0}return{horizontalAlign:N,verticalAlign:K}}function Vp(S,N,K,ce,xe){if(ce||xe)for(var Ae=S[K],We=(S[K].x+Ae.metrics.advance*Ae.scale)*ce,it=N;it<=K;it++)S[it].x-=We,S[it].y+=xe}function Lg(S,N,K,ce,xe,Ae){var Oe,We=S.image;if(We.content){var it=We.content,xt=We.pixelRatio||1;Oe=[it[0]/xt,it[1]/xt,We.displaySize[0]-it[2]/xt,We.displaySize[1]-it[3]/xt]}var Tt,Yt,sn,tn,mn=N.left*Ae,Dn=N.right*Ae;"width"===K||"both"===K?(tn=xe[0]+mn-ce[3],Yt=xe[0]+Dn+ce[1]):Yt=(tn=xe[0]+(mn+Dn-We.displaySize[0])/2)+We.displaySize[0];var Bn=N.top*Ae,Vn=N.bottom*Ae;return"height"===K||"both"===K?(Tt=xe[1]+Bn-ce[0],sn=xe[1]+Vn+ce[2]):sn=(Tt=xe[1]+(Bn+Vn-We.displaySize[1])/2)+We.displaySize[1],{image:We,top:Tt,right:Yt,bottom:sn,left:tn,collisionPadding:Oe}}Hs[10]=!0,Hs[32]=!0,Hs[38]=!0,Hs[40]=!0,Hs[41]=!0,Hs[43]=!0,Hs[45]=!0,Hs[47]=!0,Hs[173]=!0,Hs[183]=!0,Hs[8203]=!0,Hs[8208]=!0,Hs[8211]=!0,Hs[8231]=!0;var Ef=function(S){function N(K,ce,xe,Ae){S.call(this,K,ce),this.angle=xe,void 0!==Ae&&(this.segment=Ae)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.clone=function(){return new N(this.x,this.y,this.angle,this.segment)},N}(r);function pd(S,N){var K=N.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new Qa(S+1))};if("source"===K.kind)return{kind:"source"};for(var ce=K.zoomStops,xe=K.interpolationType,Ae=0;Ae<ce.length&&ce[Ae]<=S;)Ae++;for(var Oe=Ae=Math.max(0,Ae-1);Oe<ce.length&&ce[Oe]<S+1;)Oe++;Oe=Math.min(ce.length-1,Oe);var We=ce[Ae],it=ce[Oe];return"composite"===K.kind?{kind:"composite",minZoom:We,maxZoom:it,interpolationType:xe}:{kind:"camera",minZoom:We,maxZoom:it,minSize:K.evaluate(new Qa(We)),maxSize:K.evaluate(new Qa(it)),interpolationType:xe}}function Ig(S,N,K){var ce=N.uSize,Ae=K.lowerSize;return"source"===S.kind?Ae/128:"composite"===S.kind?or(Ae/128,K.upperSize/128,N.uSizeT):ce}function Up(S,N){var K=0,ce=0;if("constant"===S.kind)ce=S.layoutSize;else if("source"!==S.kind){var xe=S.interpolationType,We=xe?d(Ui.interpolationFactor(xe,N,S.minZoom,S.maxZoom),0,1):0;"camera"===S.kind?ce=or(S.minSize,S.maxSize,We):K=We}return{uSizeT:K,uSize:ce}}dr("Anchor",Ef);var fv=Object.freeze({__proto__:null,getSizeData:pd,evaluateSizeForFeature:Ig,evaluateSizeForZoom:Up,SIZE_PACK_FACTOR:128});function Hp(S,N,K,ce,xe){if(void 0===N.segment)return!0;for(var Ae=N,Oe=N.segment+1,We=0;We>-K/2;){if(--Oe<0)return!1;We-=S[Oe].dist(Ae),Ae=S[Oe]}We+=S[Oe].dist(S[Oe+1]),Oe++;for(var it=[],xt=0;We<K/2;){var Yt=S[Oe],sn=S[Oe+1];if(!sn)return!1;var tn=S[Oe-1].angleTo(Yt)-Yt.angleTo(sn);for(tn=Math.abs((tn+3*Math.PI)%(2*Math.PI)-Math.PI),it.push({distance:We,angleDelta:tn}),xt+=tn;We-it[0].distance>ce;)xt-=it.shift().angleDelta;if(xt>xe)return!1;Oe++,We+=Yt.dist(sn)}return!0}function Pg(S){for(var N=0,K=0;K<S.length-1;K++)N+=S[K].dist(S[K+1]);return N}function Og(S,N,K){return S?.6*N*K:0}function gd(S,N){return Math.max(S?S.right-S.left:0,N?N.right-N.left:0)}function hv(S,N,K,ce,xe,Ae){for(var Oe=Og(K,xe,Ae),We=gd(K,ce)*Ae,it=0,xt=Pg(S)/2,Tt=0;Tt<S.length-1;Tt++){var Yt=S[Tt],sn=S[Tt+1],tn=Yt.dist(sn);if(it+tn>xt){var mn=(xt-it)/tn,Dn=or(Yt.x,sn.x,mn),Bn=or(Yt.y,sn.y,mn),Vn=new Ef(Dn,Bn,sn.angleTo(Yt),Tt);return Vn._round(),!Oe||Hp(S,Vn,We,Oe,N)?Vn:void 0}it+=tn}}function dv(S,N,K,ce,xe,Ae,Oe,We,it){var xt=Og(ce,Ae,Oe),Tt=gd(ce,xe),Yt=Tt*Oe,sn=0===S[0].x||S[0].x===it||0===S[0].y||S[0].y===it;return N-Yt<N/4&&(N=Yt+N/4),function tn(mn,Dn,Bn,Vn,er,ir,hr,Ir,Vr){for(var si=ir/2,oi=Pg(mn),yi=0,Li=Dn-Bn,$r=[],ui=0;ui<mn.length-1;ui++){for(var zi=mn[ui],Ri=mn[ui+1],Ci=zi.dist(Ri),va=Ri.angleTo(zi);Li+Bn<yi+Ci;){var Ra=((Li+=Bn)-yi)/Ci,Ya=or(zi.x,Ri.x,Ra),Xi=or(zi.y,Ri.y,Ra);if(Ya>=0&&Ya<Vr&&Xi>=0&&Xi<Vr&&Li-si>=0&&Li+si<=oi){var ba=new Ef(Ya,Xi,va,ui);ba._round(),Vn&&!Hp(mn,ba,ir,Vn,er)||$r.push(ba)}}yi+=Ci}return Ir||$r.length||hr||($r=tn(mn,yi/2,Bn,Vn,er,ir,hr,!0,Vr)),$r}(S,sn?N/2*We%N:(Tt/2+2*Ae)*Oe*We%N,N,xt,K,Yt,sn,!1,it)}function md(S,N,K,ce,xe){for(var Ae=[],Oe=0;Oe<S.length;Oe++)for(var We=S[Oe],it=void 0,xt=0;xt<We.length-1;xt++){var Tt=We[xt],Yt=We[xt+1];Tt.x<N&&Yt.x<N||(Tt.x<N?Tt=new r(N,Tt.y+(N-Tt.x)/(Yt.x-Tt.x)*(Yt.y-Tt.y))._round():Yt.x<N&&(Yt=new r(N,Tt.y+(N-Tt.x)/(Yt.x-Tt.x)*(Yt.y-Tt.y))._round()),Tt.y<K&&Yt.y<K||(Tt.y<K?Tt=new r(Tt.x+(K-Tt.y)/(Yt.y-Tt.y)*(Yt.x-Tt.x),K)._round():Yt.y<K&&(Yt=new r(Tt.x+(K-Tt.y)/(Yt.y-Tt.y)*(Yt.x-Tt.x),K)._round()),Tt.x>=ce&&Yt.x>=ce||(Tt.x>=ce?Tt=new r(ce,Tt.y+(ce-Tt.x)/(Yt.x-Tt.x)*(Yt.y-Tt.y))._round():Yt.x>=ce&&(Yt=new r(ce,Tt.y+(ce-Tt.x)/(Yt.x-Tt.x)*(Yt.y-Tt.y))._round()),Tt.y>=xe&&Yt.y>=xe||(Tt.y>=xe?Tt=new r(Tt.x+(xe-Tt.y)/(Yt.y-Tt.y)*(Yt.x-Tt.x),xe)._round():Yt.y>=xe&&(Yt=new r(Tt.x+(xe-Tt.y)/(Yt.y-Tt.y)*(Yt.x-Tt.x),xe)._round()),it&&Tt.equals(it[it.length-1])||Ae.push(it=[Tt]),it.push(Yt)))))}return Ae}function Rg(S,N,K,ce){var xe=[],Ae=S.image,Oe=Ae.pixelRatio,We=Ae.paddedRect.w-2,it=Ae.paddedRect.h-2,xt=S.right-S.left,Tt=S.bottom-S.top,Yt=Ae.stretchX||[[0,We]],sn=Ae.stretchY||[[0,it]],tn=function(ba,ho){return ba+ho[1]-ho[0]},mn=Yt.reduce(tn,0),Dn=sn.reduce(tn,0),Bn=We-mn,Vn=it-Dn,er=0,ir=mn,hr=0,Ir=Dn,Vr=0,si=Bn,oi=0,yi=Vn;if(Ae.content&&ce){var Li=Ae.content;er=yd(Yt,0,Li[0]),hr=yd(sn,0,Li[1]),ir=yd(Yt,Li[0],Li[2]),Ir=yd(sn,Li[1],Li[3]),Vr=Li[0]-er,oi=Li[1]-hr,si=Li[2]-Li[0]-ir,yi=Li[3]-Li[1]-Ir}var $r=function(ba,ho,po,xo){var bo=vd(ba.stretch-er,ir,xt,S.left),os=xd(ba.fixed-Vr,si,ba.stretch,mn),jo=vd(ho.stretch-hr,Ir,Tt,S.top),vs=xd(ho.fixed-oi,yi,ho.stretch,Dn),ss=vd(po.stretch-er,ir,xt,S.left),xs=xd(po.fixed-Vr,si,po.stretch,mn),qs=vd(xo.stretch-hr,Ir,Tt,S.top),Os=xd(xo.fixed-oi,yi,xo.stretch,Dn),bs=new r(bo,jo),Rs=new r(ss,jo),ls=new r(ss,qs),_s=new r(bo,qs),Aa=new r(os/Oe,vs/Oe),Va=new r(xs/Oe,Os/Oe),es=N*Math.PI/180;if(es){var Yo=Math.sin(es),Zo=Math.cos(es),Co=[Zo,-Yo,Yo,Zo];bs._matMult(Co),Rs._matMult(Co),_s._matMult(Co),ls._matMult(Co)}var Za=ba.stretch+ba.fixed,Gs=ho.stretch+ho.fixed;return{tl:bs,tr:Rs,bl:_s,br:ls,tex:{x:Ae.paddedRect.x+1+Za,y:Ae.paddedRect.y+1+Gs,w:po.stretch+po.fixed-Za,h:xo.stretch+xo.fixed-Gs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Aa,pixelOffsetBR:Va,minFontScaleX:si/Oe/xt,minFontScaleY:yi/Oe/Tt,isSDF:K}};if(ce&&(Ae.stretchX||Ae.stretchY))for(var ui=Sf(Yt,Bn,mn),zi=Sf(sn,Vn,Dn),Ri=0;Ri<ui.length-1;Ri++)for(var Ci=ui[Ri],va=ui[Ri+1],Ra=0;Ra<zi.length-1;Ra++)xe.push($r(Ci,zi[Ra],va,zi[Ra+1]));else xe.push($r({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:We+1},{fixed:0,stretch:it+1}));return xe}function yd(S,N,K){for(var ce=0,xe=0,Ae=S;xe<Ae.length;xe+=1){var Oe=Ae[xe];ce+=Math.max(N,Math.min(K,Oe[1]))-Math.max(N,Math.min(K,Oe[0]))}return ce}function Sf(S,N,K){for(var ce=[{fixed:-1,stretch:0}],xe=0,Ae=S;xe<Ae.length;xe+=1){var Oe=Ae[xe],We=Oe[0],it=Oe[1],xt=ce[ce.length-1];ce.push({fixed:We-xt.stretch,stretch:xt.stretch}),ce.push({fixed:We-xt.stretch,stretch:xt.stretch+(it-We)})}return ce.push({fixed:N+1,stretch:K}),ce}function vd(S,N,K,ce){return S/N*K+ce}function xd(S,N,K,ce){return S-N*K/ce}var bd=function(S,N,K,ce,xe,Ae,Oe,We,it,xt){if(this.boxStartIndex=S.length,it){var Tt=Ae.top,Yt=Ae.bottom,sn=Ae.collisionPadding;sn&&(Tt-=sn[1],Yt+=sn[3]);var tn=Yt-Tt;tn>0&&(tn=Math.max(10,tn),this.circleDiameter=tn)}else{var mn=Ae.top*Oe-We,Dn=Ae.bottom*Oe+We,Bn=Ae.left*Oe-We,Vn=Ae.right*Oe+We,er=Ae.collisionPadding;if(er&&(Bn-=er[0]*Oe,mn-=er[1]*Oe,Vn+=er[2]*Oe,Dn+=er[3]*Oe),xt){var ir=new r(Bn,mn),hr=new r(Vn,mn),Ir=new r(Bn,Dn),Vr=new r(Vn,Dn),si=xt*Math.PI/180;ir._rotate(si),hr._rotate(si),Ir._rotate(si),Vr._rotate(si),Bn=Math.min(ir.x,hr.x,Ir.x,Vr.x),Vn=Math.max(ir.x,hr.x,Ir.x,Vr.x),mn=Math.min(ir.y,hr.y,Ir.y,Vr.y),Dn=Math.max(ir.y,hr.y,Ir.y,Vr.y)}S.emplaceBack(N.x,N.y,Bn,mn,Vn,Dn,K,ce,xe)}this.boxEndIndex=S.length},Cf=function(S,N){if(void 0===S&&(S=[]),void 0===N&&(N=pv),this.data=S,this.length=this.data.length,this.compare=N,this.length>0)for(var K=(this.length>>1)-1;K>=0;K--)this._down(K)};function pv(S,N){return S<N?-1:S>N?1:0}function Fg(S,N,K){void 0===N&&(N=1),void 0===K&&(K=!1);for(var ce=1/0,xe=1/0,Ae=-1/0,Oe=-1/0,We=S[0],it=0;it<We.length;it++){var xt=We[it];(!it||xt.x<ce)&&(ce=xt.x),(!it||xt.y<xe)&&(xe=xt.y),(!it||xt.x>Ae)&&(Ae=xt.x),(!it||xt.y>Oe)&&(Oe=xt.y)}var sn=Math.min(Ae-ce,Oe-xe),tn=sn/2,mn=new Cf([],gv);if(0===sn)return new r(ce,xe);for(var Dn=ce;Dn<Ae;Dn+=sn)for(var Bn=xe;Bn<Oe;Bn+=sn)mn.push(new Df(Dn+tn,Bn+tn,tn,S));for(var Vn=function(hr){for(var Ir=0,Vr=0,si=0,oi=hr[0],yi=0,Li=oi.length,$r=Li-1;yi<Li;$r=yi++){var ui=oi[yi],zi=oi[$r],Ri=ui.x*zi.y-zi.x*ui.y;Vr+=(ui.x+zi.x)*Ri,si+=(ui.y+zi.y)*Ri,Ir+=3*Ri}return new Df(Vr/Ir,si/Ir,0,hr)}(S),er=mn.length;mn.length;){var ir=mn.pop();(ir.d>Vn.d||!Vn.d)&&(Vn=ir,K&&console.log("found best %d after %d probes",Math.round(1e4*ir.d)/1e4,er)),ir.max-Vn.d<=N||(mn.push(new Df(ir.p.x-(tn=ir.h/2),ir.p.y-tn,tn,S)),mn.push(new Df(ir.p.x+tn,ir.p.y-tn,tn,S)),mn.push(new Df(ir.p.x-tn,ir.p.y+tn,tn,S)),mn.push(new Df(ir.p.x+tn,ir.p.y+tn,tn,S)),er+=4)}return K&&(console.log("num probes: "+er),console.log("best distance: "+Vn.d)),Vn.p}function gv(S,N){return N.max-S.max}function Df(S,N,K,ce){this.p=new r(S,N),this.h=K,this.d=function(xe,Ae){for(var Oe=!1,We=1/0,it=0;it<Ae.length;it++)for(var xt=Ae[it],Tt=0,Yt=xt.length,sn=Yt-1;Tt<Yt;sn=Tt++){var tn=xt[Tt],mn=xt[sn];tn.y>xe.y!=mn.y>xe.y&&xe.x<(mn.x-tn.x)*(xe.y-tn.y)/(mn.y-tn.y)+tn.x&&(Oe=!Oe),We=Math.min(We,gc(xe,tn,mn))}return(Oe?1:-1)*Math.sqrt(We)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}Cf.prototype.push=function(S){this.data.push(S),this.length++,this._up(this.length-1)},Cf.prototype.pop=function(){if(0!==this.length){var S=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),S}},Cf.prototype.peek=function(){return this.data[0]},Cf.prototype._up=function(S){for(var N=this.data,K=this.compare,ce=N[S];S>0;){var xe=S-1>>1,Ae=N[xe];if(K(ce,Ae)>=0)break;N[S]=Ae,S=xe}N[S]=ce},Cf.prototype._down=function(S){for(var N=this.data,K=this.compare,ce=this.length>>1,xe=N[S];S<ce;){var Ae=1+(S<<1),Oe=N[Ae],We=Ae+1;if(We<this.length&&K(N[We],Oe)<0&&(Ae=We,Oe=N[We]),K(Oe,xe)>=0)break;N[S]=Oe,S=Ae}N[S]=xe};var qp=Number.POSITIVE_INFINITY;function Ng(S,N){return N[1]!==qp?function(K,ce,xe){var Ae=0,Oe=0;switch(ce=Math.abs(ce),xe=Math.abs(xe),K){case"top-right":case"top-left":case"top":Oe=xe-7;break;case"bottom-right":case"bottom-left":case"bottom":Oe=7-xe}switch(K){case"top-right":case"bottom-right":case"right":Ae=-ce;break;case"top-left":case"bottom-left":case"left":Ae=ce}return[Ae,Oe]}(S,N[0],N[1]):function(K,ce){var xe=0,Ae=0;ce<0&&(ce=0);var Oe=ce/Math.sqrt(2);switch(K){case"top-right":case"top-left":Ae=Oe-7;break;case"bottom-right":case"bottom-left":Ae=7-Oe;break;case"bottom":Ae=7-ce;break;case"top":Ae=ce-7}switch(K){case"top-right":case"bottom-right":xe=-Oe;break;case"top-left":case"bottom-left":xe=Oe;break;case"left":xe=ce;break;case"right":xe=-ce}return[xe,Ae]}(S,N[0])}function Gp(S){switch(S){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zg(S,N,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn){var Dn=function(hr,Ir,Vr,si,oi,yi,Li,$r){for(var ui=si.layout.get("text-rotate").evaluate(yi,{})*Math.PI/180,zi=[],Ri=0,Ci=Ir.positionedLines;Ri<Ci.length;Ri+=1)for(var va=Ci[Ri],Ra=0,Ya=va.positionedGlyphs;Ra<Ya.length;Ra+=1){var Xi=Ya[Ra];if(Xi.rect){var ba=Xi.rect||{},ho=4,po=!0,xo=1,bo=0,os=(oi||$r)&&Xi.vertical,jo=Xi.metrics.advance*Xi.scale/2;if($r&&Ir.verticalizable&&(bo=va.lineOffset/2-(Xi.imageName?-(24-Xi.metrics.width*Xi.scale)/2:24*(Xi.scale-1))),Xi.imageName){var xs=Li[Xi.imageName];po=xs.sdf,ho=1/(xo=xs.pixelRatio)}var qs=oi?[Xi.x+jo,Xi.y]:[0,0],Os=oi?[0,0]:[Xi.x+jo+Vr[0],Xi.y+Vr[1]-bo],bs=[0,0];os&&(bs=Os,Os=[0,0]);var Rs=(Xi.metrics.left-ho)*Xi.scale-jo+Os[0],ls=(-Xi.metrics.top-ho)*Xi.scale+Os[1],_s=Rs+ba.w*Xi.scale/xo,Aa=ls+ba.h*Xi.scale/xo,Va=new r(Rs,ls),es=new r(_s,ls),Yo=new r(Rs,Aa),Zo=new r(_s,Aa);if(os){var Co=new r(-jo,jo- -17),Za=-Math.PI/2,Xo=12-jo,Sl=new r(22-Xo,-(Xi.imageName?Xo:0)),ol=new(Function.prototype.bind.apply(r,[null].concat(bs)));Va._rotateAround(Za,Co)._add(Sl)._add(ol),es._rotateAround(Za,Co)._add(Sl)._add(ol),Yo._rotateAround(Za,Co)._add(Sl)._add(ol),Zo._rotateAround(Za,Co)._add(Sl)._add(ol)}if(ui){var Pu=Math.sin(ui),kc=Math.cos(ui),Fs=[kc,-Pu,Pu,kc];Va._matMult(Fs),es._matMult(Fs),Yo._matMult(Fs),Zo._matMult(Fs)}var Ou=new r(0,0),Ru=new r(0,0);zi.push({tl:Va,tr:es,bl:Yo,br:Zo,tex:ba,writingMode:Ir.writingMode,glyphOffset:qs,sectionIndex:Xi.sectionIndex,isSDF:po,pixelOffsetTL:Ou,pixelOffsetBR:Ru,minFontScaleX:0,minFontScaleY:0})}}return zi}(0,K,We,xe,Ae,Oe,ce,S.allowVerticalPlacement),Bn=S.textSizeData,Vn=null;"source"===Bn.kind?(Vn=[128*xe.layout.get("text-size").evaluate(Oe,{})])[0]>32640&&D(S.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Bn.kind&&((Vn=[128*tn.compositeTextSizes[0].evaluate(Oe,{},mn),128*tn.compositeTextSizes[1].evaluate(Oe,{},mn)])[0]>32640||Vn[1]>32640)&&D(S.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),S.addSymbols(S.text,Dn,Vn,We,Ae,Oe,xt,N,it.lineStartIndex,it.lineLength,sn,mn);for(var er=0,ir=Tt;er<ir.length;er+=1)Yt[ir[er]]=S.text.placedSymbolArray.length-1;return 4*Dn.length}function Bg(S){for(var N in S)return S[N];return null}function mv(S,N,K,ce){var xe=S.compareText;if(N in xe){for(var Ae=xe[N],Oe=Ae.length-1;Oe>=0;Oe--)if(ce.dist(Ae[Oe])<K)return!0}else xe[N]=[];return xe[N].push(ce),!1}var Lf=Xc.VectorTileFeature.types,Lu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wp(S,N,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn){var tn=We?Math.min(32640,Math.round(We[0])):0,mn=We?Math.min(32640,Math.round(We[1])):0;S.emplaceBack(N,K,Math.round(32*ce),Math.round(32*xe),Ae,Oe,(tn<<1)+(it?1:0),mn,16*xt,16*Tt,256*Yt,256*sn)}function jg(S,N,K){S.emplaceBack(N.x,N.y,K),S.emplaceBack(N.x,N.y,K),S.emplaceBack(N.x,N.y,K),S.emplaceBack(N.x,N.y,K)}function Vg(S){for(var N=0,K=S.sections;N<K.length;N+=1)if(Si(K[N].text))return!0;return!1}var vh=function(S){this.layoutVertexArray=new nu,this.indexArray=new Ao,this.programConfigurations=S,this.segments=new Xt,this.dynamicLayoutVertexArray=new nl,this.opacityVertexArray=new ru,this.placedSymbolArray=new Ze};vh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},vh.prototype.upload=function(S,N,K,ce){this.isEmpty()||(K&&(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,kg.members),this.indexBuffer=S.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=S.createVertexBuffer(this.dynamicLayoutVertexArray,rv.members,!0),this.opacityVertexBuffer=S.createVertexBuffer(this.opacityVertexArray,Lu,!0),this.opacityVertexBuffer.itemSize=1),(K||ce)&&this.programConfigurations.upload(S))},vh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},dr("SymbolBuffers",vh);var al=function(S,N,K){this.layoutVertexArray=new S,this.layoutAttributes=N,this.indexArray=new K,this.segments=new Xt,this.collisionVertexArray=new iu};al.prototype.upload=function(S){this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=S.createVertexBuffer(this.collisionVertexArray,ld.members,!0)},al.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},dr("CollisionBuffers",al);var ro=function(S){this.collisionBoxArray=S.collisionBoxArray,this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(Oe){return Oe.id}),this.index=S.index,this.pixelRatio=S.pixelRatio,this.sourceLayerIndex=S.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ku([]),this.placementViewportMatrix=Ku([]);var N=this.layers[0]._unevaluatedLayout._values;this.textSizeData=pd(this.zoom,N["text-size"]),this.iconSizeData=pd(this.zoom,N["icon-size"]);var K=this.layers[0].layout,ce=K.get("symbol-sort-key"),xe=K.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==xe&&void 0!==ce.constantOr(1),this.sortFeaturesByY=("viewport-y"===xe||"auto"===xe&&!this.sortFeaturesByKey)&&(K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement")),"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(Oe){return El[Oe]})),this.stateDependentLayerIds=this.layers.filter(function(Oe){return Oe.isStateDependent()}).map(function(Oe){return Oe.id}),this.sourceID=S.sourceID};ro.prototype.createArrays=function(){this.text=new vh(new eo(kg.members,this.layers,this.zoom,function(S){return/^text/.test(S)})),this.icon=new vh(new eo(kg.members,this.layers,this.zoom,function(S){return/^icon/.test(S)})),this.glyphOffsetArray=new St,this.lineVertexArray=new jt,this.symbolInstances=new ht},ro.prototype.calculateGlyphDependencies=function(S,N,K,ce,xe){for(var Ae=0;Ae<S.length;Ae++)if(N[S.charCodeAt(Ae)]=!0,(K||ce)&&xe){var Oe=Af[S.charAt(Ae)];Oe&&(N[Oe.charCodeAt(0)]=!0)}},ro.prototype.populate=function(S,N,K){var ce=this.layers[0],xe=ce.layout,Ae=xe.get("text-font"),Oe=xe.get("text-field"),We=xe.get("icon-image"),it=("constant"!==Oe.value.kind||Oe.value.value instanceof En&&!Oe.value.value.isEmpty()||Oe.value.value.toString().length>0)&&("constant"!==Ae.value.kind||Ae.value.value.length>0),xt="constant"!==We.value.kind||!!We.value.value||Object.keys(We.parameters).length>0,Tt=xe.get("symbol-sort-key");if(this.features=[],it||xt){for(var Yt=N.iconDependencies,sn=N.glyphDependencies,tn=N.availableImages,mn=new Qa(this.zoom),Dn=0,Bn=S;Dn<Bn.length;Dn+=1){var Vn=Bn[Dn],er=Vn.feature,ir=Vn.id,hr=Vn.index,Ir=Vn.sourceLayerIndex,Vr=ce._featureFilter.needGeometry,si={type:er.type,id:ir,properties:er.properties,geometry:Vr?vo(er):[]};if(ce._featureFilter.filter(mn,si,K)){Vr||(si.geometry=vo(er));var oi=void 0;if(it){var yi=ce.getValueAndResolveTokens("text-field",si,K,tn),Li=En.factory(yi);Vg(Li)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Wo()||this.hasRTLText&&Mo.isParsed())&&(oi=ph(Li,ce,si))}var $r=void 0;if(xt){var ui=ce.getValueAndResolveTokens("icon-image",si,K,tn);$r=ui instanceof In?ui:In.fromString(ui)}if(oi||$r){var zi=this.sortFeaturesByKey?Tt.evaluate(si,{},K):void 0,Ri={id:ir,text:oi,icon:$r,index:hr,sourceLayerIndex:Ir,geometry:vo(er),properties:er.properties,type:Lf[er.type],sortKey:zi};if(this.features.push(Ri),$r&&(Yt[$r.name]=!0),oi){var Ci=Ae.evaluate(si,{},K).join(","),va="map"===xe.get("text-rotation-alignment")&&"point"!==xe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(El.vertical)>=0;for(var Ra=0,Ya=oi.sections;Ra<Ya.length;Ra+=1){var Xi=Ya[Ra];if(Xi.image)Yt[Xi.image.name]=!0;else{var ba=Ma(oi.toString()),ho=Xi.fontStack||Ci,po=sn[ho]=sn[ho]||{};this.calculateGlyphDependencies(Xi.text,po,va,this.allowVerticalPlacement,ba)}}}}}}"line"===xe.get("symbol-placement")&&(this.features=function(xo){var bo={},os={},jo=[],vs=0;function ss(Zo){jo.push(xo[Zo]),vs++}function xs(Zo,Co,Za){var Xo=os[Zo];return delete os[Zo],os[Co]=Xo,jo[Xo].geometry[0].pop(),jo[Xo].geometry[0]=jo[Xo].geometry[0].concat(Za[0]),Xo}function qs(Zo,Co,Za){var Xo=bo[Co];return delete bo[Co],bo[Zo]=Xo,jo[Xo].geometry[0].shift(),jo[Xo].geometry[0]=Za[0].concat(jo[Xo].geometry[0]),Xo}function Os(Zo,Co,Za){var Xo=Za?Co[0][Co[0].length-1]:Co[0][0];return Zo+":"+Xo.x+":"+Xo.y}for(var bs=0;bs<xo.length;bs++){var Rs=xo[bs],ls=Rs.geometry,_s=Rs.text?Rs.text.toString():null;if(_s){var Aa=Os(_s,ls),Va=Os(_s,ls,!0);if(Aa in os&&Va in bo&&os[Aa]!==bo[Va]){var es=qs(Aa,Va,ls),Yo=xs(Aa,Va,jo[es].geometry);delete bo[Aa],delete os[Va],os[Os(_s,jo[Yo].geometry,!0)]=Yo,jo[es].geometry=null}else Aa in os?xs(Aa,Va,ls):Va in bo?qs(Aa,Va,ls):(ss(bs),bo[Aa]=vs-1,os[Va]=vs-1)}else ss(bs)}return jo.filter(function(Zo){return Zo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(xo,bo){return xo.sortKey-bo.sortKey})}},ro.prototype.update=function(S,N,K){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(S,N,this.layers,K),this.icon.programConfigurations.updatePaintArrays(S,N,this.layers,K))},ro.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ro.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ro.prototype.upload=function(S){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(S),this.iconCollisionBox.upload(S)),this.text.upload(S,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(S,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ro.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ro.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ro.prototype.addToLineVertexArray=function(S,N){var K=this.lineVertexArray.length;if(void 0!==S.segment){for(var ce=S.dist(N[S.segment+1]),xe=S.dist(N[S.segment]),Ae={},Oe=S.segment+1;Oe<N.length;Oe++)Ae[Oe]={x:N[Oe].x,y:N[Oe].y,tileUnitDistanceFromAnchor:ce},Oe<N.length-1&&(ce+=N[Oe+1].dist(N[Oe]));for(var We=S.segment||0;We>=0;We--)Ae[We]={x:N[We].x,y:N[We].y,tileUnitDistanceFromAnchor:xe},We>0&&(xe+=N[We-1].dist(N[We]));for(var it=0;it<N.length;it++){var xt=Ae[it];this.lineVertexArray.emplaceBack(xt.x,xt.y,xt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:K,lineLength:this.lineVertexArray.length-K}},ro.prototype.addSymbols=function(S,N,K,ce,xe,Ae,Oe,We,it,xt,Tt,Yt){for(var sn=S.indexArray,tn=S.layoutVertexArray,mn=S.segments.prepareSegment(4*N.length,tn,sn,Ae.sortKey),Dn=this.glyphOffsetArray.length,Bn=mn.vertexLength,Vn=this.allowVerticalPlacement&&Oe===El.vertical?Math.PI/2:0,er=Ae.text&&Ae.text.sections,ir=0;ir<N.length;ir++){var hr=N[ir],Ir=hr.tl,Vr=hr.tr,si=hr.bl,oi=hr.br,yi=hr.tex,Li=hr.pixelOffsetTL,$r=hr.pixelOffsetBR,ui=hr.minFontScaleX,zi=hr.minFontScaleY,Ri=hr.glyphOffset,Ci=hr.isSDF,va=hr.sectionIndex,Ra=mn.vertexLength,Ya=Ri[1];Wp(tn,We.x,We.y,Ir.x,Ya+Ir.y,yi.x,yi.y,K,Ci,Li.x,Li.y,ui,zi),Wp(tn,We.x,We.y,Vr.x,Ya+Vr.y,yi.x+yi.w,yi.y,K,Ci,$r.x,Li.y,ui,zi),Wp(tn,We.x,We.y,si.x,Ya+si.y,yi.x,yi.y+yi.h,K,Ci,Li.x,$r.y,ui,zi),Wp(tn,We.x,We.y,oi.x,Ya+oi.y,yi.x+yi.w,yi.y+yi.h,K,Ci,$r.x,$r.y,ui,zi),jg(S.dynamicLayoutVertexArray,We,Vn),sn.emplaceBack(Ra,Ra+1,Ra+2),sn.emplaceBack(Ra+1,Ra+2,Ra+3),mn.vertexLength+=4,mn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ri[0]),ir!==N.length-1&&va===N[ir+1].sectionIndex||S.programConfigurations.populatePaintArrays(tn.length,Ae,Ae.index,{},Yt,er&&er[va])}S.placedSymbolArray.emplaceBack(We.x,We.y,Dn,this.glyphOffsetArray.length-Dn,Bn,it,xt,We.segment,K?K[0]:0,K?K[1]:0,ce[0],ce[1],Oe,0,!1,0,Tt)},ro.prototype._addCollisionDebugVertex=function(S,N,K,ce,xe,Ae){return N.emplaceBack(0,0),S.emplaceBack(K.x,K.y,ce,xe,Math.round(Ae.x),Math.round(Ae.y))},ro.prototype.addCollisionDebugVertices=function(S,N,K,ce,xe,Ae,Oe){var We=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),it=We.vertexLength,xt=xe.layoutVertexArray,Tt=xe.collisionVertexArray,Yt=Oe.anchorX,sn=Oe.anchorY;this._addCollisionDebugVertex(xt,Tt,Ae,Yt,sn,new r(S,N)),this._addCollisionDebugVertex(xt,Tt,Ae,Yt,sn,new r(K,N)),this._addCollisionDebugVertex(xt,Tt,Ae,Yt,sn,new r(K,ce)),this._addCollisionDebugVertex(xt,Tt,Ae,Yt,sn,new r(S,ce)),We.vertexLength+=4;var tn=xe.indexArray;tn.emplaceBack(it,it+1),tn.emplaceBack(it+1,it+2),tn.emplaceBack(it+2,it+3),tn.emplaceBack(it+3,it),We.primitiveLength+=4},ro.prototype.addDebugCollisionBoxes=function(S,N,K,ce){for(var xe=S;xe<N;xe++){var Ae=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(Ae.x1,Ae.y1,Ae.x2,Ae.y2,ce?this.textCollisionBox:this.iconCollisionBox,Ae.anchorPoint,K)}},ro.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new al(_l,Op.members,U),this.iconCollisionBox=new al(_l,Op.members,U);for(var S=0;S<this.symbolInstances.length;S++){var N=this.symbolInstances.get(S);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},ro.prototype._deserializeCollisionBoxesForSymbol=function(S,N,K,ce,xe,Ae,Oe,We,it){for(var xt={},Tt=N;Tt<K;Tt++){var Yt=S.get(Tt);xt.textBox={x1:Yt.x1,y1:Yt.y1,x2:Yt.x2,y2:Yt.y2,anchorPointX:Yt.anchorPointX,anchorPointY:Yt.anchorPointY},xt.textFeatureIndex=Yt.featureIndex;break}for(var sn=ce;sn<xe;sn++){var tn=S.get(sn);xt.verticalTextBox={x1:tn.x1,y1:tn.y1,x2:tn.x2,y2:tn.y2,anchorPointX:tn.anchorPointX,anchorPointY:tn.anchorPointY},xt.verticalTextFeatureIndex=tn.featureIndex;break}for(var mn=Ae;mn<Oe;mn++){var Dn=S.get(mn);xt.iconBox={x1:Dn.x1,y1:Dn.y1,x2:Dn.x2,y2:Dn.y2,anchorPointX:Dn.anchorPointX,anchorPointY:Dn.anchorPointY},xt.iconFeatureIndex=Dn.featureIndex;break}for(var Bn=We;Bn<it;Bn++){var Vn=S.get(Bn);xt.verticalIconBox={x1:Vn.x1,y1:Vn.y1,x2:Vn.x2,y2:Vn.y2,anchorPointX:Vn.anchorPointX,anchorPointY:Vn.anchorPointY},xt.verticalIconFeatureIndex=Vn.featureIndex;break}return xt},ro.prototype.deserializeCollisionBoxes=function(S){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var K=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(S,K.textBoxStartIndex,K.textBoxEndIndex,K.verticalTextBoxStartIndex,K.verticalTextBoxEndIndex,K.iconBoxStartIndex,K.iconBoxEndIndex,K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex))}},ro.prototype.hasTextData=function(){return this.text.segments.get().length>0},ro.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ro.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ro.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ro.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ro.prototype.addIndicesForPlacedSymbol=function(S,N){for(var K=S.placedSymbolArray.get(N),ce=K.vertexStartIndex+4*K.numGlyphs,xe=K.vertexStartIndex;xe<ce;xe+=4)S.indexArray.emplaceBack(xe,xe+1,xe+2),S.indexArray.emplaceBack(xe+1,xe+2,xe+3)},ro.prototype.getSortedSymbolIndexes=function(S){if(this.sortedAngle===S&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var N=Math.sin(S),K=Math.cos(S),ce=[],xe=[],Ae=[],Oe=0;Oe<this.symbolInstances.length;++Oe){Ae.push(Oe);var We=this.symbolInstances.get(Oe);ce.push(0|Math.round(N*We.anchorX+K*We.anchorY)),xe.push(We.featureIndex)}return Ae.sort(function(it,xt){return ce[it]-ce[xt]||xe[xt]-xe[it]}),Ae},ro.prototype.addToSortKeyRanges=function(S,N){var K=this.sortKeyRanges[this.sortKeyRanges.length-1];K&&K.sortKey===N?K.symbolInstanceEnd=S+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:S,symbolInstanceEnd:S+1})},ro.prototype.sortFeatures=function(S){var N=this;if(this.sortFeaturesByY&&this.sortedAngle!==S&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(S),this.sortedAngle=S,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var K=0,ce=this.symbolInstanceIndexes;K<ce.length;K+=1){var Ae=this.symbolInstances.get(ce[K]);this.featureSortOrder.push(Ae.featureIndex),[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(function(Oe,We,it){Oe>=0&&it.indexOf(Oe)===We&&N.addIndicesForPlacedSymbol(N.text,Oe)}),Ae.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ae.verticalPlacedTextSymbolIndex),Ae.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.placedIconSymbolIndex),Ae.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},dr("SymbolBucket",ro,{omit:["layers","collisionBoxArray","features","compareText"]}),ro.MAX_GLYPHS=65535,ro.addDynamicAttributes=jg;var Yp=new Ls({"symbol-placement":new Pi(je.layout_symbol["symbol-placement"]),"symbol-spacing":new Pi(je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pi(je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gi(je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pi(je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pi(je.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pi(je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pi(je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pi(je.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gi(je.layout_symbol["icon-size"]),"icon-text-fit":new Pi(je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pi(je.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gi(je.layout_symbol["icon-image"]),"icon-rotate":new Gi(je.layout_symbol["icon-rotate"]),"icon-padding":new Pi(je.layout_symbol["icon-padding"]),"icon-keep-upright":new Pi(je.layout_symbol["icon-keep-upright"]),"icon-offset":new Gi(je.layout_symbol["icon-offset"]),"icon-anchor":new Gi(je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pi(je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pi(je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pi(je.layout_symbol["text-rotation-alignment"]),"text-field":new Gi(je.layout_symbol["text-field"]),"text-font":new Gi(je.layout_symbol["text-font"]),"text-size":new Gi(je.layout_symbol["text-size"]),"text-max-width":new Gi(je.layout_symbol["text-max-width"]),"text-line-height":new Pi(je.layout_symbol["text-line-height"]),"text-letter-spacing":new Gi(je.layout_symbol["text-letter-spacing"]),"text-justify":new Gi(je.layout_symbol["text-justify"]),"text-radial-offset":new Gi(je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pi(je.layout_symbol["text-variable-anchor"]),"text-anchor":new Gi(je.layout_symbol["text-anchor"]),"text-max-angle":new Pi(je.layout_symbol["text-max-angle"]),"text-writing-mode":new Pi(je.layout_symbol["text-writing-mode"]),"text-rotate":new Gi(je.layout_symbol["text-rotate"]),"text-padding":new Pi(je.layout_symbol["text-padding"]),"text-keep-upright":new Pi(je.layout_symbol["text-keep-upright"]),"text-transform":new Gi(je.layout_symbol["text-transform"]),"text-offset":new Gi(je.layout_symbol["text-offset"]),"text-allow-overlap":new Pi(je.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pi(je.layout_symbol["text-ignore-placement"]),"text-optional":new Pi(je.layout_symbol["text-optional"])}),Zp={paint:new Ls({"icon-opacity":new Gi(je.paint_symbol["icon-opacity"]),"icon-color":new Gi(je.paint_symbol["icon-color"]),"icon-halo-color":new Gi(je.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gi(je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gi(je.paint_symbol["icon-halo-blur"]),"icon-translate":new Pi(je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pi(je.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gi(je.paint_symbol["text-opacity"]),"text-color":new Gi(je.paint_symbol["text-color"],{runtimeType:zt,getOverride:function(S){return S.textColor},hasOverride:function(S){return!!S.textColor}}),"text-halo-color":new Gi(je.paint_symbol["text-halo-color"]),"text-halo-width":new Gi(je.paint_symbol["text-halo-width"]),"text-halo-blur":new Gi(je.paint_symbol["text-halo-blur"]),"text-translate":new Pi(je.paint_symbol["text-translate"]),"text-translate-anchor":new Pi(je.paint_symbol["text-translate-anchor"])}),layout:Yp},Kc=function(S){this.type=S.property.overrides?S.property.overrides.runtimeType:$t,this.defaultValue=S};Kc.prototype.evaluate=function(S){if(S.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(S.formattedSection))return N.getOverride(S.formattedSection)}return S.feature&&S.featureState?this.defaultValue.evaluate(S.feature,S.featureState):this.defaultValue.property.specification.default},Kc.prototype.eachChild=function(S){this.defaultValue.isConstant()||S(this.defaultValue.value._styleExpression.expression)},Kc.prototype.outputDefined=function(){return!1},Kc.prototype.serialize=function(){return null},dr("FormatSectionOverride",Kc,{omit:["defaultValue"]});var xh=function(S){function N(K){S.call(this,K,Zp)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.recalculate=function(K,ce){if(S.prototype.recalculate.call(this,K,ce),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var xe=this.layout.get("text-writing-mode");if(xe){for(var Ae=[],Oe=0,We=xe;Oe<We.length;Oe+=1){var it=We[Oe];Ae.indexOf(it)<0&&Ae.push(it)}this.layout._values["text-writing-mode"]=Ae}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},N.prototype.getValueAndResolveTokens=function(K,ce,xe,Ae){var it,Oe=this.layout.get(K).evaluate(ce,{},xe,Ae),We=this._unevaluatedLayout._values[K];return We.isDataDriven()||fn(We.value)||!Oe?Oe:(it=ce.properties,Oe.replace(/{([^{}]+)}/g,function(Tt,Yt){return Yt in it?String(it[Yt]):""}))},N.prototype.createBucket=function(K){return new ro(K)},N.prototype.queryRadius=function(){return 0},N.prototype.queryIntersectsFeature=function(){return!1},N.prototype._setPaintOverrides=function(){for(var K=0,ce=Zp.paint.overridableProperties;K<ce.length;K+=1){var xe=ce[K];if(N.hasPaintOverride(this.layout,xe)){var it,Ae=this.paint.get(xe),Oe=new Kc(Ae),We=new cn(Oe,Ae.property.specification);it="constant"===Ae.value.kind||"source"===Ae.value.kind?new vn("source",We):new Mn("composite",We,Ae.value.zoomStops,Ae.value._interpolationType),this.paint._values[xe]=new Io(Ae.property,it,Ae.parameters)}}},N.prototype._handleOverridablePaintPropertyUpdate=function(K,ce,xe){return!(!this.layout||ce.isDataDriven()||xe.isDataDriven())&&N.hasPaintOverride(this.layout,K)},N.hasPaintOverride=function(K,ce){var xe=K.get("text-field"),Ae=Zp.paint.properties[ce],Oe=!1,We=function(Tt){for(var Yt=0,sn=Tt;Yt<sn.length;Yt+=1)if(Ae.overrides&&Ae.overrides.hasOverride(sn[Yt]))return void(Oe=!0)};if("constant"===xe.value.kind&&xe.value.value instanceof En)We(xe.value.value.sections);else if("source"===xe.value.kind){var it=function(Tt){Oe||(Tt instanceof yr&&sr(Tt.value)===yt?We(Tt.value.sections):Tt instanceof Hn?We(Tt.sections):Tt.eachChild(it))},xt=xe.value;xt._styleExpression&&it(xt._styleExpression.expression)}return Oe},N}(Is),Ug={paint:new Ls({"background-color":new Pi(je.paint_background["background-color"]),"background-pattern":new Ql(je.paint_background["background-pattern"]),"background-opacity":new Pi(je.paint_background["background-opacity"])})},Hg=function(S){function N(K){S.call(this,K,Ug)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N}(Is),Xp={paint:new Ls({"raster-opacity":new Pi(je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pi(je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pi(je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pi(je.paint_raster["raster-brightness-max"]),"raster-saturation":new Pi(je.paint_raster["raster-saturation"]),"raster-contrast":new Pi(je.paint_raster["raster-contrast"]),"raster-resampling":new Pi(je.paint_raster["raster-resampling"]),"raster-fade-duration":new Pi(je.paint_raster["raster-fade-duration"])})},$p=function(S){function N(K){S.call(this,K,Xp)}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N}(Is),qg=function(S){function N(K){S.call(this,K,{}),this.implementation=K}return S&&(N.__proto__=S),(N.prototype=Object.create(S&&S.prototype)).constructor=N,N.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},N.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},N.prototype.recalculate=function(){},N.prototype.updateTransitions=function(){},N.prototype.hasTransition=function(){},N.prototype.serialize=function(){},N.prototype.onAdd=function(K){this.implementation.onAdd&&this.implementation.onAdd(K,K.painter.context.gl)},N.prototype.onRemove=function(K){this.implementation.onRemove&&this.implementation.onRemove(K,K.painter.context.gl)},N}(Is),bb={circle:Ap,heatmap:Sp,hillshade:pb,fill:Yy,"fill-extrusion":bc,line:nv,symbol:xh,background:Hg,raster:$p},Jc=self.HTMLImageElement,_d=self.HTMLCanvasElement,Kp=self.HTMLVideoElement,Gg=self.ImageData,If=self.ImageBitmap,Qc=function(S,N,K,ce){this.context=S,this.format=K,this.texture=S.gl.createTexture(),this.update(N,ce)};Qc.prototype.update=function(S,N,K){var ce=S.width,xe=S.height,Ae=!(this.size&&this.size[0]===ce&&this.size[1]===xe||K),Oe=this.context,We=Oe.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),We.bindTexture(We.TEXTURE_2D,this.texture),Oe.pixelStoreUnpackFlipY.set(!1),Oe.pixelStoreUnpack.set(1),Oe.pixelStoreUnpackPremultiplyAlpha.set(this.format===We.RGBA&&(!N||!1!==N.premultiply)),Ae)this.size=[ce,xe],S instanceof Jc||S instanceof _d||S instanceof Kp||S instanceof Gg||If&&S instanceof If?We.texImage2D(We.TEXTURE_2D,0,this.format,this.format,We.UNSIGNED_BYTE,S):We.texImage2D(We.TEXTURE_2D,0,this.format,ce,xe,0,this.format,We.UNSIGNED_BYTE,S.data);else{var it=K||{x:0,y:0},xt=it.x,Tt=it.y;S instanceof Jc||S instanceof _d||S instanceof Kp||S instanceof Gg||If&&S instanceof If?We.texSubImage2D(We.TEXTURE_2D,0,xt,Tt,We.RGBA,We.UNSIGNED_BYTE,S):We.texSubImage2D(We.TEXTURE_2D,0,xt,Tt,ce,xe,We.RGBA,We.UNSIGNED_BYTE,S.data)}this.useMipmap&&this.isSizePowerOfTwo()&&We.generateMipmap(We.TEXTURE_2D)},Qc.prototype.bind=function(S,N,K){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),K!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(K=ce.LINEAR),S!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,S),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,K||S),this.filter=S),N!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,N),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,N),this.wrap=N)},Qc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Qc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Jp=function(S){var N=this;this._callback=S,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};Jp.prototype.trigger=function(){var S=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){S._triggered=!1,S._callback()},0))},Jp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Pf=function(S,N,K){this.target=S,this.parent=N,this.mapId=K,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Jp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?S:self};function Wg(S,N,K){var ce=2*Math.PI*6378137/256/Math.pow(2,K);return[S*ce-2*Math.PI*6378137/2,N*ce-2*Math.PI*6378137/2]}Pf.prototype.send=function(S,N,K,ce,xe){var Ae=this;void 0===xe&&(xe=!1);var Oe=Math.round(1e18*Math.random()).toString(36).substring(0,10);K&&(this.callbacks[Oe]=K);var We=V(this.globalScope)?void 0:[];return this.target.postMessage({id:Oe,type:S,hasCallback:!!K,targetMapId:ce,mustQueue:xe,sourceMapId:this.mapId,data:Ei(N,We)},We),{cancel:function(){K&&delete Ae.callbacks[Oe],Ae.target.postMessage({id:Oe,type:"<cancel>",targetMapId:ce,sourceMapId:Ae.mapId})}}},Pf.prototype.receive=function(S){var N=S.data,K=N.id;if(K&&(!N.targetMapId||this.mapId===N.targetMapId))if("<cancel>"===N.type){delete this.tasks[K];var ce=this.cancelCallbacks[K];delete this.cancelCallbacks[K],ce&&ce()}else L()||N.mustQueue?(this.tasks[K]=N,this.taskQueue.push(K),this.invoker.trigger()):this.processTask(K,N)},Pf.prototype.process=function(){if(this.taskQueue.length){var S=this.taskQueue.shift(),N=this.tasks[S];delete this.tasks[S],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(S,N)}},Pf.prototype.processTask=function(S,N){var K=this;if("<response>"===N.type){var ce=this.callbacks[S];delete this.callbacks[S],ce&&(N.error?ce(Ji(N.error)):ce(null,Ji(N.data)))}else{var xe=!1,Ae=V(this.globalScope)?void 0:[],Oe=N.hasCallback?function(Tt,Yt){xe=!0,delete K.cancelCallbacks[S],K.target.postMessage({id:S,type:"<response>",sourceMapId:K.mapId,error:Tt?Ei(Tt):null,data:Ei(Yt,Ae)},Ae)}:function(Tt){xe=!0},We=null,it=Ji(N.data);if(this.parent[N.type])We=this.parent[N.type](N.sourceMapId,it,Oe);else if(this.parent.getWorkerSource){var xt=N.type.split(".");We=this.parent.getWorkerSource(N.sourceMapId,xt[0],it.source)[xt[1]](it,Oe)}else Oe(new Error("Could not find function "+N.type));!xe&&We&&We.cancel&&(this.cancelCallbacks[S]=We.cancel)}},Pf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var gs=function(S,N){S&&(N?this.setSouthWest(S).setNorthEast(N):4===S.length?this.setSouthWest([S[0],S[1]]).setNorthEast([S[2],S[3]]):this.setSouthWest(S[0]).setNorthEast(S[1]))};gs.prototype.setNorthEast=function(S){return this._ne=S instanceof Oo?new Oo(S.lng,S.lat):Oo.convert(S),this},gs.prototype.setSouthWest=function(S){return this._sw=S instanceof Oo?new Oo(S.lng,S.lat):Oo.convert(S),this},gs.prototype.extend=function(S){var N,K,ce=this._sw,xe=this._ne;if(S instanceof Oo)N=S,K=S;else{if(!(S instanceof gs))return Array.isArray(S)?4===S.length||S.every(Array.isArray)?this.extend(gs.convert(S)):this.extend(Oo.convert(S)):this;if(K=S._ne,!(N=S._sw)||!K)return this}return ce||xe?(ce.lng=Math.min(N.lng,ce.lng),ce.lat=Math.min(N.lat,ce.lat),xe.lng=Math.max(K.lng,xe.lng),xe.lat=Math.max(K.lat,xe.lat)):(this._sw=new Oo(N.lng,N.lat),this._ne=new Oo(K.lng,K.lat)),this},gs.prototype.getCenter=function(){return new Oo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},gs.prototype.getSouthWest=function(){return this._sw},gs.prototype.getNorthEast=function(){return this._ne},gs.prototype.getNorthWest=function(){return new Oo(this.getWest(),this.getNorth())},gs.prototype.getSouthEast=function(){return new Oo(this.getEast(),this.getSouth())},gs.prototype.getWest=function(){return this._sw.lng},gs.prototype.getSouth=function(){return this._sw.lat},gs.prototype.getEast=function(){return this._ne.lng},gs.prototype.getNorth=function(){return this._ne.lat},gs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},gs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},gs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},gs.prototype.contains=function(S){var N=Oo.convert(S),K=N.lng,ce=N.lat,Ae=this._sw.lng<=K&&K<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ae=this._sw.lng>=K&&K>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&Ae},gs.convert=function(S){return!S||S instanceof gs?S:new gs(S)};var Oo=function(S,N){if(isNaN(S)||isNaN(N))throw new Error("Invalid LngLat object: ("+S+", "+N+")");if(this.lng=+S,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Oo.prototype.wrap=function(){return new Oo(p(this.lng,-180,180),this.lat)},Oo.prototype.toArray=function(){return[this.lng,this.lat]},Oo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Oo.prototype.distanceTo=function(S){var N=Math.PI/180,K=this.lat*N,ce=S.lat*N,xe=Math.sin(K)*Math.sin(ce)+Math.cos(K)*Math.cos(ce)*Math.cos((S.lng-this.lng)*N);return 6371008.8*Math.acos(Math.min(xe,1))},Oo.prototype.toBounds=function(S){void 0===S&&(S=0);var N=360*S/40075017,K=N/Math.cos(Math.PI/180*this.lat);return new gs(new Oo(this.lng-K,this.lat-N),new Oo(this.lng+K,this.lat+N))},Oo.convert=function(S){if(S instanceof Oo)return S;if(Array.isArray(S)&&(2===S.length||3===S.length))return new Oo(Number(S[0]),Number(S[1]));if(!Array.isArray(S)&&"object"==typeof S&&null!==S)return new Oo(Number("lng"in S?S.lng:S.lon),Number(S.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Qp=2*Math.PI*6371008.8;function wd(S){return Qp*Math.cos(S*Math.PI/180)}function e0(S){return(180+S)/360}function Td(S){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S*Math.PI/360)))/360}function Yg(S,N){return S/wd(N)}function t0(S){return 360/Math.PI*Math.atan(Math.exp((180-360*S)*Math.PI/180))-90}var Tc=function(S,N,K){void 0===K&&(K=0),this.x=+S,this.y=+N,this.z=+K};Tc.fromLngLat=function(S,N){void 0===N&&(N=0);var K=Oo.convert(S);return new Tc(e0(K.lng),Td(K.lat),Yg(N,K.lat))},Tc.prototype.toLngLat=function(){return new Oo(360*this.x-180,t0(this.y))},Tc.prototype.toAltitude=function(){return this.z*wd(t0(this.y))},Tc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Qp*(S=t0(this.y),1/Math.cos(S*Math.PI/180));var S};var Mc=function(S,N,K){this.z=S,this.x=N,this.y=K,this.key=Of(0,S,S,N,K)};Mc.prototype.equals=function(S){return this.z===S.z&&this.x===S.x&&this.y===S.y},Mc.prototype.url=function(S,N){var K,ce,xe,Ae,Oe,We=(ce=this.y,xe=this.z,Ae=Wg(256*(K=this.x),256*(ce=Math.pow(2,xe)-ce-1),xe),Oe=Wg(256*(K+1),256*(ce+1),xe),Ae[0]+","+Ae[1]+","+Oe[0]+","+Oe[1]),it=function(xt,Tt,Yt){for(var sn,tn="",mn=xt;mn>0;mn--)tn+=(Tt&(sn=1<<mn-1)?1:0)+(Yt&sn?2:0);return tn}(this.z,this.x,this.y);return S[(this.x+this.y)%S.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===N?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",it).replace("{bbox-epsg-3857}",We)},Mc.prototype.getTilePoint=function(S){var N=Math.pow(2,this.z);return new r(8192*(S.x*N-this.x),8192*(S.y*N-this.y))},Mc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ac=function(S,N){this.wrap=S,this.canonical=N,this.key=Of(S,N.z,N.z,N.x,N.y)},is=function(S,N,K,ce,xe){this.overscaledZ=S,this.wrap=N,this.canonical=new Mc(K,+ce,+xe),this.key=Of(N,S,K,ce,xe)};function Of(S,N,K,ce,xe){(S*=2)<0&&(S=-1*S-1);var Ae=1<<K;return(Ae*Ae*S+Ae*xe+ce).toString(36)+K.toString(36)+N.toString(36)}is.prototype.equals=function(S){return this.overscaledZ===S.overscaledZ&&this.wrap===S.wrap&&this.canonical.equals(S.canonical)},is.prototype.scaledTo=function(S){var N=this.canonical.z-S;return S>this.canonical.z?new is(S,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new is(S,this.wrap,S,this.canonical.x>>N,this.canonical.y>>N)},is.prototype.calculateScaledKey=function(S,N){var K=this.canonical.z-S;return S>this.canonical.z?Of(this.wrap*+N,S,this.canonical.z,this.canonical.x,this.canonical.y):Of(this.wrap*+N,S,S,this.canonical.x>>K,this.canonical.y>>K)},is.prototype.isChildOf=function(S){if(S.wrap!==this.wrap)return!1;var N=this.canonical.z-S.canonical.z;return 0===S.overscaledZ||S.overscaledZ<this.overscaledZ&&S.canonical.x===this.canonical.x>>N&&S.canonical.y===this.canonical.y>>N},is.prototype.children=function(S){if(this.overscaledZ>=S)return[new is(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,K=2*this.canonical.x,ce=2*this.canonical.y;return[new is(N,this.wrap,N,K,ce),new is(N,this.wrap,N,K+1,ce),new is(N,this.wrap,N,K,ce+1),new is(N,this.wrap,N,K+1,ce+1)]},is.prototype.isLessThan=function(S){return this.wrap<S.wrap||!(this.wrap>S.wrap)&&(this.overscaledZ<S.overscaledZ||!(this.overscaledZ>S.overscaledZ)&&(this.canonical.x<S.canonical.x||!(this.canonical.x>S.canonical.x)&&this.canonical.y<S.canonical.y))},is.prototype.wrapped=function(){return new is(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},is.prototype.unwrapTo=function(S){return new is(this.overscaledZ,S,this.canonical.z,this.canonical.x,this.canonical.y)},is.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},is.prototype.toUnwrapped=function(){return new Ac(this.wrap,this.canonical)},is.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},is.prototype.getTilePoint=function(S){return this.canonical.getTilePoint(new Tc(S.x-this.wrap,S.y))},dr("CanonicalTileID",Mc),dr("OverscaledTileID",is,{omit:["posMatrix"]});var tc=function(S,N,K){if(this.uid=S,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(K&&"mapbox"!==K&&"terrarium"!==K)return D('"'+K+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var ce=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=K||"mapbox";for(var xe=0;xe<ce;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(ce,xe)]=this.data[this._idx(ce-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,ce)]=this.data[this._idx(xe,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};tc.prototype.get=function(S,N){var K=new Uint8Array(this.data.buffer),ce=4*this._idx(S,N);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(K[ce],K[ce+1],K[ce+2])},tc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},tc.prototype._idx=function(S,N){if(S<-1||S>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(S+1)},tc.prototype._unpackMapbox=function(S,N,K){return(256*S*256+256*N+K)/10-1e4},tc.prototype._unpackTerrarium=function(S,N,K){return 256*S+N+K/256-32768},tc.prototype.getPixels=function(){return new dl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},tc.prototype.backfillBorder=function(S,N,K){if(this.dim!==S.dim)throw new Error("dem dimension mismatch");var ce=N*this.dim,xe=N*this.dim+this.dim,Ae=K*this.dim,Oe=K*this.dim+this.dim;switch(N){case-1:ce=xe-1;break;case 1:xe=ce+1}switch(K){case-1:Ae=Oe-1;break;case 1:Oe=Ae+1}for(var We=-N*this.dim,it=-K*this.dim,xt=Ae;xt<Oe;xt++)for(var Tt=ce;Tt<xe;Tt++)this.data[this._idx(Tt,xt)]=S.data[this._idx(Tt+We,xt+it)]},dr("DEMData",tc);var ef=function(S){this._stringToNumber={},this._numberToString=[];for(var N=0;N<S.length;N++){var K=S[N];this._stringToNumber[K]=N,this._numberToString[N]=K}};ef.prototype.encode=function(S){return this._stringToNumber[S]},ef.prototype.decode=function(S){return this._numberToString[S]};var Md=function(S,N,K,ce,xe){this.type="Feature",this._vectorTileFeature=S,S._z=N,S._x=K,S._y=ce,this.properties=S.properties,this.id=xe},Ad={geometry:{configurable:!0}};Ad.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ad.geometry.set=function(S){this._geometry=S},Md.prototype.toJSON=function(){var S={geometry:this.geometry};for(var N in this)"_geometry"!==N&&"_vectorTileFeature"!==N&&(S[N]=this[N]);return S},Object.defineProperties(Md.prototype,Ad);var tf=function(){this.state={},this.stateChanges={},this.deletedStates={}};tf.prototype.updateState=function(S,N,K){var ce=String(N);if(this.stateChanges[S]=this.stateChanges[S]||{},this.stateChanges[S][ce]=this.stateChanges[S][ce]||{},c(this.stateChanges[S][ce],K),null===this.deletedStates[S])for(var xe in this.deletedStates[S]={},this.state[S])xe!==ce&&(this.deletedStates[S][xe]=null);else if(this.deletedStates[S]&&null===this.deletedStates[S][ce])for(var Ae in this.deletedStates[S][ce]={},this.state[S][ce])K[Ae]||(this.deletedStates[S][ce][Ae]=null);else for(var Oe in K)this.deletedStates[S]&&this.deletedStates[S][ce]&&null===this.deletedStates[S][ce][Oe]&&delete this.deletedStates[S][ce][Oe]},tf.prototype.removeFeatureState=function(S,N,K){if(null!==this.deletedStates[S]){var ce=String(N);if(this.deletedStates[S]=this.deletedStates[S]||{},K&&void 0!==N)null!==this.deletedStates[S][ce]&&(this.deletedStates[S][ce]=this.deletedStates[S][ce]||{},this.deletedStates[S][ce][K]=null);else if(void 0!==N)if(this.stateChanges[S]&&this.stateChanges[S][ce])for(K in this.deletedStates[S][ce]={},this.stateChanges[S][ce])this.deletedStates[S][ce][K]=null;else this.deletedStates[S][ce]=null;else this.deletedStates[S]=null}},tf.prototype.getState=function(S,N){var K=String(N),Ae=c({},(this.state[S]||{})[K],(this.stateChanges[S]||{})[K]);if(null===this.deletedStates[S])return{};if(this.deletedStates[S]){var Oe=this.deletedStates[S][N];if(null===Oe)return{};for(var We in Oe)delete Ae[We]}return Ae},tf.prototype.initializeTileState=function(S,N){S.setFeatureState(this.state,N)},tf.prototype.coalesceChanges=function(S,N){var K={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var xe={};for(var Ae in this.stateChanges[ce])this.state[ce][Ae]||(this.state[ce][Ae]={}),c(this.state[ce][Ae],this.stateChanges[ce][Ae]),xe[Ae]=this.state[ce][Ae];K[ce]=xe}for(var Oe in this.deletedStates){this.state[Oe]=this.state[Oe]||{};var We={};if(null===this.deletedStates[Oe])for(var it in this.state[Oe])We[it]={},this.state[Oe][it]={};else for(var xt in this.deletedStates[Oe]){if(null===this.deletedStates[Oe][xt])this.state[Oe][xt]={};else for(var Tt=0,Yt=Object.keys(this.deletedStates[Oe][xt]);Tt<Yt.length;Tt+=1)delete this.state[Oe][xt][Yt[Tt]];We[xt]=this.state[Oe][xt]}K[Oe]=K[Oe]||{},c(K[Oe],We)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(K).length)for(var tn in S)S[tn].setFeatureState(K,N)};var Iu=function(S,N){this.tileID=S,this.x=S.canonical.x,this.y=S.canonical.y,this.z=S.canonical.z,this.grid=new _r(8192,16,0),this.grid3D=new _r(8192,16,0),this.featureIndexArray=new Ft,this.promoteId=N};function kd(S,N,K,ce,xe){return M(S,function(Ae,Oe){var We=N instanceof xl?N.get(Oe):null;return We&&We.evaluate?We.evaluate(K,ce,xe):We})}function n0(S){for(var N=1/0,K=1/0,ce=-1/0,xe=-1/0,Ae=0,Oe=S;Ae<Oe.length;Ae+=1){var We=Oe[Ae];N=Math.min(N,We.x),K=Math.min(K,We.y),ce=Math.max(ce,We.x),xe=Math.max(xe,We.y)}return{minX:N,minY:K,maxX:ce,maxY:xe}}function Ed(S,N){return N-S}Iu.prototype.insert=function(S,N,K,ce,xe,Ae){var Oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(K,ce,xe);for(var We=Ae?this.grid3D:this.grid,it=0;it<N.length;it++){for(var xt=N[it],Tt=[1/0,1/0,-1/0,-1/0],Yt=0;Yt<xt.length;Yt++){var sn=xt[Yt];Tt[0]=Math.min(Tt[0],sn.x),Tt[1]=Math.min(Tt[1],sn.y),Tt[2]=Math.max(Tt[2],sn.x),Tt[3]=Math.max(Tt[3],sn.y)}Tt[0]<8192&&Tt[1]<8192&&Tt[2]>=0&&Tt[3]>=0&&We.insert(Oe,Tt[0],Tt[1],Tt[2],Tt[3])}},Iu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Xc.VectorTile(new Np(this.rawTileData)).layers,this.sourceLayerCoder=new ef(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Iu.prototype.query=function(S,N,K,ce){var xe=this;this.loadVTLayers();for(var Ae=S.params||{},Oe=8192/S.tileSize/S.scale,We=ra(Ae.filter),it=S.queryGeometry,xt=S.queryPadding*Oe,Tt=n0(it),Yt=this.grid.query(Tt.minX-xt,Tt.minY-xt,Tt.maxX+xt,Tt.maxY+xt),sn=n0(S.cameraQueryGeometry),mn=0,Dn=this.grid3D.query(sn.minX-xt,sn.minY-xt,sn.maxX+xt,sn.maxY+xt,function(Ir,Vr,si,oi){return function(yi,Li,$r,ui,zi){for(var Ri=0,Ci=yi;Ri<Ci.length;Ri+=1){var va=Ci[Ri];if(Li<=va.x&&$r<=va.y&&ui>=va.x&&zi>=va.y)return!0}var Ra=[new r(Li,$r),new r(Li,zi),new r(ui,zi),new r(ui,$r)];if(yi.length>2)for(var Ya=0,Xi=Ra;Ya<Xi.length;Ya+=1)if(il(yi,Xi[Ya]))return!0;for(var ba=0;ba<yi.length-1;ba++)if(su(yi[ba],yi[ba+1],Ra))return!0;return!1}(S.cameraQueryGeometry,Ir-xt,Vr-xt,si+xt,oi+xt)});mn<Dn.length;mn+=1)Yt.push(Dn[mn]);Yt.sort(Ed);for(var Vn,er={},ir=function(Ir){var Vr=Yt[Ir];if(Vr!==Vn){Vn=Vr;var si=xe.featureIndexArray.get(Vr),oi=null;xe.loadMatchingFeature(er,si.bucketIndex,si.sourceLayerIndex,si.featureIndex,We,Ae.layers,Ae.availableImages,N,K,ce,function(yi,Li,$r){return oi||(oi=vo(yi)),Li.queryIntersectsFeature(it,yi,$r,oi,xe.z,S.transform,Oe,S.pixelPosMatrix)})}},hr=0;hr<Yt.length;hr++)ir(hr);return er},Iu.prototype.loadMatchingFeature=function(S,N,K,ce,xe,Ae,Oe,We,it,xt,Tt){var Yt=this.bucketLayerIDs[N];if(!Ae||function(si,oi){for(var yi=0;yi<si.length;yi++)if(oi.indexOf(si[yi])>=0)return!0;return!1}(Ae,Yt)){var sn=this.sourceLayerCoder.decode(K),tn=this.vtLayers[sn].feature(ce);if(xe.filter(new Qa(this.tileID.overscaledZ),tn))for(var mn=this.getId(tn,sn),Dn=0;Dn<Yt.length;Dn++){var Bn=Yt[Dn];if(!(Ae&&Ae.indexOf(Bn)<0)){var Vn=We[Bn];if(Vn){var er={};void 0!==mn&&xt&&(er=xt.getState(Vn.sourceLayer||"_geojsonTileLayer",mn));var ir=it[Bn];ir.paint=kd(ir.paint,Vn.paint,tn,er,Oe),ir.layout=kd(ir.layout,Vn.layout,tn,er,Oe);var hr=!Tt||Tt(tn,Vn,er);if(hr){var Ir=new Md(tn,this.z,this.x,this.y,mn);Ir.layer=ir;var Vr=S[Bn];void 0===Vr&&(Vr=S[Bn]=[]),Vr.push({featureIndex:ce,feature:Ir,intersectionZ:hr})}}}}}},Iu.prototype.lookupSymbolFeatures=function(S,N,K,ce,xe,Ae,Oe,We){var it={};this.loadVTLayers();for(var xt=ra(xe),Tt=0,Yt=S;Tt<Yt.length;Tt+=1)this.loadMatchingFeature(it,K,ce,Yt[Tt],xt,Ae,Oe,We,N);return it},Iu.prototype.hasLayer=function(S){for(var N=0,K=this.bucketLayerIDs;N<K.length;N+=1)for(var ce=0,xe=K[N];ce<xe.length;ce+=1)if(S===xe[ce])return!0;return!1},Iu.prototype.getId=function(S,N){var K=S.id;return this.promoteId&&"boolean"==typeof(K=S.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[N]])&&(K=Number(K)),K},dr("FeatureIndex",Iu,{omit:["rawTileData","sourceLayerCoder"]});var as=function(S,N){this.tileID=S,this.uid=m(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};as.prototype.registerFadeDuration=function(S){var N=S+this.timeAdded;N<q.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},as.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},as.prototype.loadVectorData=function(S,N,K){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",S){for(var ce in S.featureIndex&&(this.latestFeatureIndex=S.featureIndex,S.rawTileData?(this.latestRawTileData=S.rawTileData,this.latestFeatureIndex.rawTileData=S.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=S.collisionBoxArray,this.buckets=function(xt,Tt){var Yt={};if(!Tt)return Yt;for(var sn=function(){var Dn=mn[tn],Bn=Dn.layerIds.map(function(hr){return Tt.getLayer(hr)}).filter(Boolean);if(0!==Bn.length){Dn.layers=Bn,Dn.stateDependentLayerIds&&(Dn.stateDependentLayers=Dn.stateDependentLayerIds.map(function(hr){return Bn.filter(function(Ir){return Ir.id===hr})[0]}));for(var Vn=0,er=Bn;Vn<er.length;Vn+=1)Yt[er[Vn].id]=Dn}},tn=0,mn=xt;tn<mn.length;tn+=1)sn();return Yt}(S.buckets,N.style),this.hasSymbolBuckets=!1,this.buckets){var xe=this.buckets[ce];if(xe instanceof ro){if(this.hasSymbolBuckets=!0,!K)break;xe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ae in this.buckets){var Oe=this.buckets[Ae];if(Oe instanceof ro&&Oe.hasRTLText){this.hasRTLText=!0,Mo.isLoading()||Mo.isLoaded()||"deferred"!==Wo()||za();break}}for(var We in this.queryPadding=0,this.buckets){var it=this.buckets[We];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(We).queryRadius(it))}S.imageAtlas&&(this.imageAtlas=S.imageAtlas),S.glyphAtlasImage&&(this.glyphAtlasImage=S.glyphAtlasImage)}else this.collisionBoxArray=new ke},as.prototype.unloadVectorData=function(){for(var S in this.buckets)this.buckets[S].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},as.prototype.getBucket=function(S){return this.buckets[S.id]},as.prototype.upload=function(S){for(var N in this.buckets){var K=this.buckets[N];K.uploadPending()&&K.upload(S)}var ce=S.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qc(S,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qc(S,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},as.prototype.prepare=function(S){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(S,this.imageAtlasTexture)},as.prototype.queryRenderedFeatures=function(S,N,K,ce,xe,Ae,Oe,We,it,xt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:xe,scale:Ae,tileSize:this.tileSize,pixelPosMatrix:xt,transform:We,params:Oe,queryPadding:this.queryPadding*it},S,N,K):{}},as.prototype.querySourceFeatures=function(S,N){var K=this.latestFeatureIndex;if(K&&K.rawTileData){var ce=K.loadVTLayers(),xe=N?N.sourceLayer:"",Ae=ce._geojsonTileLayer||ce[xe];if(Ae)for(var Oe=ra(N&&N.filter),We=this.tileID.canonical,it=We.z,xt=We.x,Tt=We.y,Yt={z:it,x:xt,y:Tt},sn=0;sn<Ae.length;sn++){var tn=Ae.feature(sn);if(Oe.filter(new Qa(this.tileID.overscaledZ),tn)){var mn=K.getId(tn,xe),Dn=new Md(tn,it,xt,Tt,mn);Dn.tile=Yt,S.push(Dn)}}}},as.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},as.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},as.prototype.setExpiryData=function(S){var N=this.expirationTime;if(S.cacheControl){var K=I(S.cacheControl);K["max-age"]&&(this.expirationTime=Date.now()+1e3*K["max-age"])}else S.expires&&(this.expirationTime=new Date(S.expires).getTime());if(this.expirationTime){var ce=Date.now(),xe=!1;if(this.expirationTime>ce)xe=!1;else if(N)if(this.expirationTime<N)xe=!0;else{var Ae=this.expirationTime-N;Ae?this.expirationTime=ce+Math.max(Ae,3e4):xe=!0}else xe=!0;xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},as.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},as.prototype.setFeatureState=function(S,N){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(S).length){var K=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(N.style.hasLayer(ce)){var xe=this.buckets[ce],Ae=xe.layers[0].sourceLayer||"_geojsonTileLayer",Oe=K[Ae],We=S[Ae];if(Oe&&We&&0!==Object.keys(We).length){xe.update(We,Oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var it=N&&N.style&&N.style.getLayer(ce);it&&(this.queryPadding=Math.max(this.queryPadding,it.queryRadius(xe)))}}}},as.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},as.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<q.now()},as.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},as.prototype.setHoldDuration=function(S){this.symbolFadeHoldUntil=q.now()+S},as.prototype.setDependencies=function(S,N){for(var K={},ce=0,xe=N;ce<xe.length;ce+=1)K[xe[ce]]=!0;this.dependencies[S]=K},as.prototype.hasDependency=function(S,N){for(var K=0,ce=S;K<ce.length;K+=1){var Ae=this.dependencies[ce[K]];if(Ae)for(var Oe=0,We=N;Oe<We.length;Oe+=1)if(Ae[We[Oe]])return!0}return!1};var nc=self.performance,Sd=function(S){this._marks={start:[S.url,"start"].join("#"),end:[S.url,"end"].join("#"),measure:S.url.toString()},nc.mark(this._marks.start)};Sd.prototype.finish=function(){nc.mark(this._marks.end);var S=nc.getEntriesByName(this._marks.measure);return 0===S.length&&(nc.measure(this._marks.measure,this._marks.start,this._marks.end),S=nc.getEntriesByName(this._marks.measure),nc.clearMarks(this._marks.start),nc.clearMarks(this._marks.end),nc.clearMeasures(this._marks.measure)),S},e.Actor=Pf,e.AlphaImage=Yc,e.CanonicalTileID=Mc,e.CollisionBoxArray=ke,e.Color=hn,e.DEMData=tc,e.DataConstantProperty=Pi,e.DictionaryCoder=ef,e.EXTENT=8192,e.ErrorEvent=Ve,e.EvaluationParameters=Qa,e.Event=Be,e.Evented=Le,e.FeatureIndex=Iu,e.FillBucket=Cu,e.FillExtrusionBucket=uu,e.ImageAtlas=yh,e.ImagePosition=gh,e.LineBucket=Tl,e.LngLat=Oo,e.LngLatBounds=gs,e.MercatorCoordinate=Tc,e.ONE_EM=24,e.OverscaledTileID=is,e.Point=r,e.Point$1=r,e.Properties=Ls,e.Protobuf=Np,e.RGBAImage=dl,e.RequestManager=ue,e.RequestPerformance=Sd,e.ResourceType=At,e.SegmentVector=Xt,e.SourceFeatureState=tf,e.StructArrayLayout1ui2=X,e.StructArrayLayout2f1f2i16=Xu,e.StructArrayLayout2i4=bl,e.StructArrayLayout3ui6=Ao,e.StructArrayLayout4i8=No,e.SymbolBucket=ro,e.Texture=Qc,e.Tile=as,e.Transitionable=vl,e.Uniform1f=ar,e.Uniform1i=Oi,e.Uniform2f=Gr,e.Uniform3f=_i,e.Uniform4f=gi,e.UniformColor=Ai,e.UniformMatrix4f=oa,e.UnwrappedTileID=Ac,e.ValidationError=Ke,e.WritingMode=El,e.ZoomHistory=ya,e.add=function(S,N,K){return S[0]=N[0]+K[0],S[1]=N[1]+K[1],S[2]=N[2]+K[2],S},e.addDynamicAttributes=jg,e.asyncAll=function(S,N,K){if(!S.length)return K(null,[]);var ce=S.length,xe=new Array(S.length),Ae=null;S.forEach(function(Oe,We){N(Oe,function(it,xt){it&&(Ae=it),xe[We]=xt,0==--ce&&K(Ae,xe)})})},e.bezier=h,e.bindAll=f,e.browser=q,e.cacheEntryPossiblyAdded=function(S){++ct>Xe&&(S.getActor().send("enforceCacheSizeLimit",qe),ct=0)},e.clamp=d,e.clearTileCache=function(S){var N=self.caches.delete("mapbox-tiles");S&&N.catch(S).then(function(){return S()})},e.clipLine=md,e.clone=function(S){var N=new Us(16);return N[0]=S[0],N[1]=S[1],N[2]=S[2],N[3]=S[3],N[4]=S[4],N[5]=S[5],N[6]=S[6],N[7]=S[7],N[8]=S[8],N[9]=S[9],N[10]=S[10],N[11]=S[11],N[12]=S[12],N[13]=S[13],N[14]=S[14],N[15]=S[15],N},e.clone$1=E,e.clone$2=function(S){var N=new Us(3);return N[0]=S[0],N[1]=S[1],N[2]=S[2],N},e.collisionCircleLayout=Du,e.config=W,e.create=function(){var S=new Us(16);return Us!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},e.create$1=function(){var S=new Us(9);return Us!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,S},e.create$2=function(){var S=new Us(4);return Us!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S},e.createCommonjsModule=o,e.createExpression=on,e.createLayout=Pa,e.createStyleLayer=function(S){return"custom"===S.type?new qg(S):new bb[S.type](S)},e.cross=function(S,N,K){var ce=N[0],xe=N[1],Ae=N[2],Oe=K[0],We=K[1],it=K[2];return S[0]=xe*it-Ae*We,S[1]=Ae*Oe-ce*it,S[2]=ce*We-xe*Oe,S},e.deepEqual=function S(N,K){if(Array.isArray(N)){if(!Array.isArray(K)||N.length!==K.length)return!1;for(var ce=0;ce<N.length;ce++)if(!S(N[ce],K[ce]))return!1;return!0}if("object"==typeof N&&null!==N&&null!==K){if("object"!=typeof K||Object.keys(N).length!==Object.keys(K).length)return!1;for(var xe in N)if(!S(N[xe],K[xe]))return!1;return!0}return N===K},e.dot=function(S,N){return S[0]*N[0]+S[1]*N[1]+S[2]*N[2]},e.dot$1=function(S,N){return S[0]*N[0]+S[1]*N[1]+S[2]*N[2]+S[3]*N[3]},e.ease=s,e.emitValidationErrors=jr,e.endsWith=A,e.enforceCacheSizeLimit=function(S){st(),Fe&&Fe.then(function(N){N.keys().then(function(K){for(var ce=0;ce<K.length-S;ce++)N.delete(K[ce])})})},e.evaluateSizeForFeature=Ig,e.evaluateSizeForZoom=Up,e.evaluateVariableOffset=Ng,e.evented=Ja,e.extend=c,e.featureFilter=ra,e.filterObject=k,e.fromRotation=function(S,N){var K=Math.sin(N),ce=Math.cos(N);return S[0]=ce,S[1]=K,S[2]=0,S[3]=-K,S[4]=ce,S[5]=0,S[6]=0,S[7]=0,S[8]=1,S},e.getAnchorAlignment=$c,e.getAnchorJustification=Gp,e.getArrayBuffer=Nt,e.getImage=Qe,e.getJSON=function(S,N){return at(c(S,{type:"json"}),N)},e.getRTLTextPluginStatus=Wo,e.getReferrer=Ct,e.getVideo=function(S,N){var K,ce,xe=self.document.createElement("video");xe.muted=!0,xe.onloadstart=function(){N(null,xe)};for(var Ae=0;Ae<S.length;Ae++){var Oe=self.document.createElement("source");K=S[Ae],ce=void 0,(ce=self.document.createElement("a")).href=K,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(xe.crossOrigin="Anonymous"),Oe.src=S[Ae],xe.appendChild(Oe)}return{cancel:function(){}}},e.identity=Ku,e.invert=function(S,N){var K=N[0],ce=N[1],xe=N[2],Ae=N[3],Oe=N[4],We=N[5],it=N[6],xt=N[7],Tt=N[8],Yt=N[9],sn=N[10],tn=N[11],mn=N[12],Dn=N[13],Bn=N[14],Vn=N[15],er=K*We-ce*Oe,ir=K*it-xe*Oe,hr=K*xt-Ae*Oe,Ir=ce*it-xe*We,Vr=ce*xt-Ae*We,si=xe*xt-Ae*it,oi=Tt*Dn-Yt*mn,yi=Tt*Bn-sn*mn,Li=Tt*Vn-tn*mn,$r=Yt*Bn-sn*Dn,ui=Yt*Vn-tn*Dn,zi=sn*Vn-tn*Bn,Ri=er*zi-ir*ui+hr*$r+Ir*Li-Vr*yi+si*oi;return Ri?(S[0]=(We*zi-it*ui+xt*$r)*(Ri=1/Ri),S[1]=(xe*ui-ce*zi-Ae*$r)*Ri,S[2]=(Dn*si-Bn*Vr+Vn*Ir)*Ri,S[3]=(sn*Vr-Yt*si-tn*Ir)*Ri,S[4]=(it*Li-Oe*zi-xt*yi)*Ri,S[5]=(K*zi-xe*Li+Ae*yi)*Ri,S[6]=(Bn*hr-mn*si-Vn*ir)*Ri,S[7]=(Tt*si-sn*hr+tn*ir)*Ri,S[8]=(Oe*ui-We*Li+xt*oi)*Ri,S[9]=(ce*Li-K*ui-Ae*oi)*Ri,S[10]=(mn*Vr-Dn*hr+Vn*er)*Ri,S[11]=(Yt*hr-Tt*Vr-tn*er)*Ri,S[12]=(We*yi-Oe*$r-it*oi)*Ri,S[13]=(K*$r-ce*yi+xe*oi)*Ri,S[14]=(Dn*ir-mn*Ir-Bn*er)*Ri,S[15]=(Tt*Ir-Yt*ir+sn*er)*Ri,S):null},e.isChar=Yr,e.isMapboxURL=de,e.keysDifference=function(S,N){var K=[];for(var ce in S)ce in N||K.push(ce);return K},e.makeRequest=at,e.mapObject=M,e.mercatorXfromLng=e0,e.mercatorYfromLat=Td,e.mercatorZfromAltitude=Yg,e.mul=Mp,e.multiply=mc,e.mvt=Xc,e.normalize=function(S,N){var K=N[0],ce=N[1],xe=N[2],Ae=K*K+ce*ce+xe*xe;return Ae>0&&(Ae=1/Math.sqrt(Ae)),S[0]=N[0]*Ae,S[1]=N[1]*Ae,S[2]=N[2]*Ae,S},e.number=or,e.offscreenCanvasSupported=bt,e.ortho=function(S,N,K,ce,xe,Ae,Oe){var We=1/(N-K),it=1/(ce-xe),xt=1/(Ae-Oe);return S[0]=-2*We,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*it,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*xt,S[11]=0,S[12]=(N+K)*We,S[13]=(xe+ce)*it,S[14]=(Oe+Ae)*xt,S[15]=1,S},e.parseGlyphPBF=function(S){return new Np(S).readFields(Ps,[])},e.pbf=Np,e.performSymbolLayout=function(S,N,K,ce,xe,Ae,Oe){S.createArrays(),S.tilePixelRatio=8192/(512*S.overscaling),S.compareText={},S.iconsNeedLinear=!1;var it=S.layers[0].layout,xt=S.layers[0]._unevaluatedLayout._values,Tt={};if("composite"===S.textSizeData.kind){var Yt=S.textSizeData,tn=Yt.maxZoom;Tt.compositeTextSizes=[xt["text-size"].possiblyEvaluate(new Qa(Yt.minZoom),Oe),xt["text-size"].possiblyEvaluate(new Qa(tn),Oe)]}if("composite"===S.iconSizeData.kind){var mn=S.iconSizeData,Bn=mn.maxZoom;Tt.compositeIconSizes=[xt["icon-size"].possiblyEvaluate(new Qa(mn.minZoom),Oe),xt["icon-size"].possiblyEvaluate(new Qa(Bn),Oe)]}Tt.layoutTextSize=xt["text-size"].possiblyEvaluate(new Qa(S.zoom+1),Oe),Tt.layoutIconSize=xt["icon-size"].possiblyEvaluate(new Qa(S.zoom+1),Oe),Tt.textMaxSize=xt["text-size"].possiblyEvaluate(new Qa(18));for(var Vn=24*it.get("text-line-height"),er="map"===it.get("text-rotation-alignment")&&"point"!==it.get("symbol-placement"),ir=it.get("text-keep-upright"),hr=it.get("text-size"),Ir=function(){var oi=si[Vr],yi=it.get("text-font").evaluate(oi,{},Oe).join(","),Li=hr.evaluate(oi,{},Oe),$r=Tt.layoutTextSize.evaluate(oi,{},Oe),ui=Tt.layoutIconSize.evaluate(oi,{},Oe),zi={horizontal:{},vertical:void 0},Ri=oi.text,Ci=[0,0];if(Ri){var va=Ri.toString(),Ra=24*it.get("text-letter-spacing").evaluate(oi,{},Oe),Ya=function(Aa){for(var Va=0,es=Aa;Va<es.length;Va+=1)if(!ha(es[Va].charCodeAt(0)))return!1;return!0}(va)?Ra:0,Xi=it.get("text-anchor").evaluate(oi,{},Oe),ba=it.get("text-variable-anchor");if(!ba){var ho=it.get("text-radial-offset").evaluate(oi,{},Oe);Ci=ho?Ng(Xi,[24*ho,qp]):it.get("text-offset").evaluate(oi,{},Oe).map(function(Aa){return 24*Aa})}var po=er?"center":it.get("text-justify").evaluate(oi,{},Oe),xo=it.get("symbol-placement"),bo="point"===xo?24*it.get("text-max-width").evaluate(oi,{},Oe):0,os=function(){S.allowVerticalPlacement&&Ma(va)&&(zi.vertical=zp(Ri,N,K,xe,yi,bo,Vn,Xi,"left",Ya,Ci,El.vertical,!0,xo,$r,Li))};if(!er&&ba){for(var jo="auto"===po?ba.map(function(Aa){return Gp(Aa)}):[po],vs=!1,ss=0;ss<jo.length;ss++){var xs=jo[ss];if(!zi.horizontal[xs])if(vs)zi.horizontal[xs]=zi.horizontal[0];else{var qs=zp(Ri,N,K,xe,yi,bo,Vn,"center",xs,Ya,Ci,El.horizontal,!1,xo,$r,Li);qs&&(zi.horizontal[xs]=qs,vs=1===qs.positionedLines.length)}}os()}else{"auto"===po&&(po=Gp(Xi));var Os=zp(Ri,N,K,xe,yi,bo,Vn,Xi,po,Ya,Ci,El.horizontal,!1,xo,$r,Li);Os&&(zi.horizontal[po]=Os),os(),Ma(va)&&er&&ir&&(zi.vertical=zp(Ri,N,K,xe,yi,bo,Vn,Xi,po,Ya,Ci,El.vertical,!1,xo,$r,Li))}}var Aa,Va,Yo,Gs,ol,bs=void 0,Rs=!1;if(oi.icon&&oi.icon.name){var ls=ce[oi.icon.name];ls&&(Aa=xe[oi.icon.name],Va=it.get("icon-offset").evaluate(oi,{},Oe),Yo=$c(it.get("icon-anchor").evaluate(oi,{},Oe)),bs={image:Aa,top:ol=Va[1]-Aa.displaySize[1]*Yo.verticalAlign,bottom:ol+Aa.displaySize[1],left:Gs=Va[0]-Aa.displaySize[0]*Yo.horizontalAlign,right:Gs+Aa.displaySize[0]},Rs=ls.sdf,void 0===S.sdfIcons?S.sdfIcons=ls.sdf:S.sdfIcons!==ls.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ls.pixelRatio!==S.pixelRatio||0!==it.get("icon-rotate").constantOr(1))&&(S.iconsNeedLinear=!0))}var _s=Bg(zi.horizontal)||zi.vertical;S.iconsInText=!!_s&&_s.iconsInText,(_s||bs)&&function(Aa,Va,es,Yo,Zo,Co,Za,Xo,Gs,Sl,ol){var Pu=Co.textMaxSize.evaluate(Va,{});void 0===Pu&&(Pu=Za);var kc,Fs=Aa.layers[0].layout,Ou=Fs.get("icon-offset").evaluate(Va,{},ol),Ru=Bg(es.horizontal),Fu=Za/24,Zg=Aa.tilePixelRatio*Fu,bh=Aa.tilePixelRatio*Pu/24,fu=Aa.tilePixelRatio*Xo,rc=Aa.tilePixelRatio*Fs.get("symbol-spacing"),Cd=Fs.get("text-padding")*Aa.tilePixelRatio,_h=Fs.get("icon-padding")*Aa.tilePixelRatio,Rf=Fs.get("text-max-angle")/180*Math.PI,wh="map"===Fs.get("text-rotation-alignment")&&"point"!==Fs.get("symbol-placement"),Nu="map"===Fs.get("icon-rotation-alignment")&&"point"!==Fs.get("symbol-placement"),Ff=Fs.get("symbol-placement"),hu=rc/2,nf=Fs.get("icon-text-fit");Yo&&"none"!==nf&&(Aa.allowVerticalPlacement&&es.vertical&&(kc=Lg(Yo,es.vertical,nf,Fs.get("icon-text-fit-padding"),Ou,Fu)),Ru&&(Yo=Lg(Yo,Ru,nf,Fs.get("icon-text-fit-padding"),Ou,Fu)));var Ec=function(vv,Eh){Eh.x<0||Eh.x>=8192||Eh.y<0||Eh.y>=8192||function(to,pu,xv,lf,Kg,a0,o0,ju,Bf,jf,Rd,Fd,s0,l0,Sh,u0,Jg,Qg,c0,f0,Cl,Fl,Nd,Vu,bv){var em,Lc,Vf,Uf,Hf,Ic=to.addToLineVertexArray(pu,xv),tm=0,nm=0,Ch=0,zd=0,h0=-1,Dh=-1,gu={},d0=jn(""),p0=0,g0=0;if(void 0===ju._unevaluatedLayout.getValue("text-radial-offset")?(p0=(em=ju.layout.get("text-offset").evaluate(Cl,{},Vu).map(function(cf){return 24*cf}))[0],g0=em[1]):(p0=24*ju.layout.get("text-radial-offset").evaluate(Cl,{},Vu),g0=qp),to.allowVerticalPlacement&&lf.vertical){var Bd=ju.layout.get("text-rotate").evaluate(Cl,{},Vu)+90;Uf=new bd(Bf,pu,jf,Rd,Fd,lf.vertical,s0,l0,Sh,Bd),o0&&(Hf=new bd(Bf,pu,jf,Rd,Fd,o0,Jg,Qg,Sh,Bd))}if(Kg){var m0=ju.layout.get("icon-rotate").evaluate(Cl,{}),y0="none"!==ju.layout.get("icon-text-fit"),v0=Rg(Kg,m0,Nd,y0),jd=o0?Rg(o0,m0,Nd,y0):void 0;Vf=new bd(Bf,pu,jf,Rd,Fd,Kg,Jg,Qg,!1,m0),tm=4*v0.length;var x0=to.iconSizeData,qf=null;"source"===x0.kind?(qf=[128*ju.layout.get("icon-size").evaluate(Cl,{})])[0]>32640&&D(to.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===x0.kind&&((qf=[128*Fl.compositeIconSizes[0].evaluate(Cl,{},Vu),128*Fl.compositeIconSizes[1].evaluate(Cl,{},Vu)])[0]>32640||qf[1]>32640)&&D(to.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),to.addSymbols(to.icon,v0,qf,f0,c0,Cl,!1,pu,Ic.lineStartIndex,Ic.lineLength,-1,Vu),h0=to.icon.placedSymbolArray.length-1,jd&&(nm=4*jd.length,to.addSymbols(to.icon,jd,qf,f0,c0,Cl,El.vertical,pu,Ic.lineStartIndex,Ic.lineLength,-1,Vu),Dh=to.icon.placedSymbolArray.length-1)}for(var Uu in lf.horizontal){var uf=lf.horizontal[Uu];if(!Lc){d0=jn(uf.text);var _v=ju.layout.get("text-rotate").evaluate(Cl,{},Vu);Lc=new bd(Bf,pu,jf,Rd,Fd,uf,s0,l0,Sh,_v)}var rm=1===uf.positionedLines.length;if(Ch+=zg(to,pu,uf,a0,ju,Sh,Cl,u0,Ic,lf.vertical?El.horizontal:El.horizontalOnly,rm?Object.keys(lf.horizontal):[Uu],gu,h0,Fl,Vu),rm)break}lf.vertical&&(zd+=zg(to,pu,lf.vertical,a0,ju,Sh,Cl,u0,Ic,El.vertical,["vertical"],gu,Dh,Fl,Vu));var wb=Lc?Lc.boxStartIndex:to.collisionBoxArray.length,b0=Lc?Lc.boxEndIndex:to.collisionBoxArray.length,im=Uf?Uf.boxStartIndex:to.collisionBoxArray.length,_0=Uf?Uf.boxEndIndex:to.collisionBoxArray.length,Lh=Vf?Vf.boxStartIndex:to.collisionBoxArray.length,wv=Vf?Vf.boxEndIndex:to.collisionBoxArray.length,w0=Hf?Hf.boxStartIndex:to.collisionBoxArray.length,am=Hf?Hf.boxEndIndex:to.collisionBoxArray.length,mu=-1,Ih=function(cf,sm){return cf&&cf.circleDiameter?Math.max(cf.circleDiameter,sm):sm};mu=Ih(Lc,mu),mu=Ih(Uf,mu),mu=Ih(Vf,mu);var om=(mu=Ih(Hf,mu))>-1?1:0;om&&(mu*=bv/24),to.glyphOffsetArray.length>=ro.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Cl.sortKey&&to.addToSortKeyRanges(to.symbolInstances.length,Cl.sortKey),to.symbolInstances.emplaceBack(pu.x,pu.y,gu.right>=0?gu.right:-1,gu.center>=0?gu.center:-1,gu.left>=0?gu.left:-1,gu.vertical||-1,h0,Dh,d0,wb,b0,im,_0,Lh,wv,w0,am,jf,Ch,zd,tm,nm,om,0,s0,p0,g0,mu)}(Aa,Eh,vv,es,Yo,Zo,kc,Aa.layers[0],Aa.collisionBoxArray,Va.index,Va.sourceLayerIndex,Aa.index,Zg,Cd,wh,Gs,fu,_h,Nu,Ou,Va,Co,Sl,ol,Za)};if("line"===Ff)for(var rf=0,Dd=md(Va.geometry,0,0,8192,8192);rf<Dd.length;rf+=1)for(var Th=Dd[rf],Mh=0,Sc=dv(Th,rc,Rf,es.vertical||Ru,Yo,24,bh,Aa.overscaling,8192);Mh<Sc.length;Mh+=1){var zu=Sc[Mh];Ru&&mv(Aa,Ru.text,hu,zu)||Ec(Th,zu)}else if("line-center"===Ff)for(var Bu=0,Cc=Va.geometry;Bu<Cc.length;Bu+=1){var du=Cc[Bu];if(du.length>1){var zf=hv(du,Rf,es.vertical||Ru,Yo,24,bh);zf&&Ec(du,zf)}}else if("Polygon"===Va.type)for(var af=0,Ah=Lp(Va.geometry,0);af<Ah.length;af+=1){var Dc=Ah[af],of=Fg(Dc,16);Ec(Dc[0],new Ef(of.x,of.y,0))}else if("LineString"===Va.type)for(var sf=0,kh=Va.geometry;sf<kh.length;sf+=1){var r0=kh[sf];Ec(r0,new Ef(r0[0].x,r0[0].y,0))}else if("Point"===Va.type)for(var Id=0,yv=Va.geometry;Id<yv.length;Id+=1)for(var Pd=0,$g=yv[Id];Pd<$g.length;Pd+=1){var Od=$g[Pd];Ec([Od],new Ef(Od.x,Od.y,0))}}(S,oi,zi,bs,ce,Tt,$r,ui,Ci,Rs,Oe)},Vr=0,si=S.features;Vr<si.length;Vr+=1)Ir();Ae&&S.generateCollisionDebugBuffers()},e.perspective=function(S,N,K,ce,xe){var Ae,Oe=1/Math.tan(N/2);return S[0]=Oe/K,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=Oe,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,null!=xe&&xe!==1/0?(S[10]=(xe+ce)*(Ae=1/(ce-xe)),S[14]=2*xe*ce*Ae):(S[10]=-1,S[14]=-2*ce),S},e.pick=function(S,N){for(var K={},ce=0;ce<N.length;ce++){var xe=N[ce];xe in S&&(K[xe]=S[xe])}return K},e.plugin=Mo,e.polygonIntersectsPolygon=rl,e.postMapLoadEvent=Ue,e.postTurnstileEvent=Ce,e.potpack=hd,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=dr,e.registerForPluginStateChange=function(S){return S({pluginStatus:$i,pluginURL:lo}),Ja.on("pluginStateChange",S),S},e.rotate=function(S,N,K){var ce=N[0],xe=N[1],Ae=N[2],Oe=N[3],We=Math.sin(K),it=Math.cos(K);return S[0]=ce*it+Ae*We,S[1]=xe*it+Oe*We,S[2]=ce*-We+Ae*it,S[3]=xe*-We+Oe*it,S},e.rotateX=function(S,N,K){var ce=Math.sin(K),xe=Math.cos(K),Ae=N[4],Oe=N[5],We=N[6],it=N[7],xt=N[8],Tt=N[9],Yt=N[10],sn=N[11];return N!==S&&(S[0]=N[0],S[1]=N[1],S[2]=N[2],S[3]=N[3],S[12]=N[12],S[13]=N[13],S[14]=N[14],S[15]=N[15]),S[4]=Ae*xe+xt*ce,S[5]=Oe*xe+Tt*ce,S[6]=We*xe+Yt*ce,S[7]=it*xe+sn*ce,S[8]=xt*xe-Ae*ce,S[9]=Tt*xe-Oe*ce,S[10]=Yt*xe-We*ce,S[11]=sn*xe-it*ce,S},e.rotateZ=function(S,N,K){var ce=Math.sin(K),xe=Math.cos(K),Ae=N[0],Oe=N[1],We=N[2],it=N[3],xt=N[4],Tt=N[5],Yt=N[6],sn=N[7];return N!==S&&(S[8]=N[8],S[9]=N[9],S[10]=N[10],S[11]=N[11],S[12]=N[12],S[13]=N[13],S[14]=N[14],S[15]=N[15]),S[0]=Ae*xe+xt*ce,S[1]=Oe*xe+Tt*ce,S[2]=We*xe+Yt*ce,S[3]=it*xe+sn*ce,S[4]=xt*xe-Ae*ce,S[5]=Tt*xe-Oe*ce,S[6]=Yt*xe-We*ce,S[7]=sn*xe-it*ce,S},e.scale=function(S,N,K){var ce=K[0],xe=K[1],Ae=K[2];return S[0]=N[0]*ce,S[1]=N[1]*ce,S[2]=N[2]*ce,S[3]=N[3]*ce,S[4]=N[4]*xe,S[5]=N[5]*xe,S[6]=N[6]*xe,S[7]=N[7]*xe,S[8]=N[8]*Ae,S[9]=N[9]*Ae,S[10]=N[10]*Ae,S[11]=N[11]*Ae,S[12]=N[12],S[13]=N[13],S[14]=N[14],S[15]=N[15],S},e.scale$1=function(S,N,K){return S[0]=N[0]*K,S[1]=N[1]*K,S[2]=N[2]*K,S[3]=N[3]*K,S},e.scale$2=function(S,N,K){return S[0]=N[0]*K,S[1]=N[1]*K,S[2]=N[2]*K,S},e.setCacheLimits=function(S,N){qe=S,Xe=N},e.setRTLTextPlugin=function(S,N,K){if(void 0===K&&(K=!1),$i===Ia||$i===ao||$i===Xs)throw new Error("setRTLTextPlugin cannot be called multiple times.");lo=q.resolveURL(S),$i=Ia,Ds=N,ua(),K||za()},e.sphericalToCartesian=function(S){var N=S[0],K=S[1],ce=S[2];return K+=90,K*=Math.PI/180,ce*=Math.PI/180,{x:N*Math.cos(K)*Math.sin(ce),y:N*Math.sin(K)*Math.sin(ce),z:N*Math.cos(ce)}},e.sqrLen=function(S){var N=S[0],K=S[1];return N*N+K*K},e.styleSpec=je,e.sub=function(S,N,K){return S[0]=N[0]-K[0],S[1]=N[1]-K[1],S[2]=N[2]-K[2],S},e.symbolSize=fv,e.transformMat3=function(S,N,K){var ce=N[0],xe=N[1],Ae=N[2];return S[0]=ce*K[0]+xe*K[3]+Ae*K[6],S[1]=ce*K[1]+xe*K[4]+Ae*K[7],S[2]=ce*K[2]+xe*K[5]+Ae*K[8],S},e.transformMat4=Ju,e.translate=function(S,N,K){var ce,xe,Ae,Oe,We,it,xt,Tt,Yt,sn,tn,mn,Dn=K[0],Bn=K[1],Vn=K[2];return N===S?(S[12]=N[0]*Dn+N[4]*Bn+N[8]*Vn+N[12],S[13]=N[1]*Dn+N[5]*Bn+N[9]*Vn+N[13],S[14]=N[2]*Dn+N[6]*Bn+N[10]*Vn+N[14],S[15]=N[3]*Dn+N[7]*Bn+N[11]*Vn+N[15]):(xe=N[1],Ae=N[2],Oe=N[3],We=N[4],it=N[5],xt=N[6],Tt=N[7],Yt=N[8],sn=N[9],tn=N[10],mn=N[11],S[0]=ce=N[0],S[1]=xe,S[2]=Ae,S[3]=Oe,S[4]=We,S[5]=it,S[6]=xt,S[7]=Tt,S[8]=Yt,S[9]=sn,S[10]=tn,S[11]=mn,S[12]=ce*Dn+We*Bn+Yt*Vn+N[12],S[13]=xe*Dn+it*Bn+sn*Vn+N[13],S[14]=Ae*Dn+xt*Bn+tn*Vn+N[14],S[15]=Oe*Dn+Tt*Bn+mn*Vn+N[15]),S},e.triggerPluginCompletionEvent=ns,e.uniqueId=m,e.validateCustomStyleLayer=function(S){var N=[],K=S.id;return void 0===K&&N.push({message:"layers."+K+': missing required property "id"'}),void 0===S.render&&N.push({message:"layers."+K+': missing required method "render"'}),S.renderingMode&&"2d"!==S.renderingMode&&"3d"!==S.renderingMode&&N.push({message:"layers."+K+': property "renderingMode" must be either "2d" or "3d"'}),N},e.validateLight=Tr,e.validateStyle=cr,e.values=function(S){var N=[];for(var K in S)N.push(S[K]);return N},e.vectorTile=Xc,e.version="1.10.1",e.warnOnce=D,e.webpSupported=ae,e.window=self,e.wrap=p}),b(0,function(e){function o(Be){var Ve=typeof Be;if("number"===Ve||"boolean"===Ve||"string"===Ve||null==Be)return JSON.stringify(Be);if(Array.isArray(Be)){for(var Le="[",je=0,Ke=Be;je<Ke.length;je+=1)Le+=o(Ke[je])+",";return Le+"]"}for(var ft=Object.keys(Be).sort(),mt="{",pt=0;pt<ft.length;pt++)mt+=JSON.stringify(ft[pt])+":"+o(Be[ft[pt]])+",";return mt+"}"}function i(Be){for(var Ve="",Le=0,je=e.refProperties;Le<je.length;Le+=1)Ve+="/"+o(Be[je[Le]]);return Ve}var l=function(Be){this.keyCache={},Be&&this.replace(Be)};l.prototype.replace=function(Be){this._layerConfigs={},this._layers={},this.update(Be,[])},l.prototype.update=function(Be,Ve){for(var Le=this,je=0,Ke=Be;je<Ke.length;je+=1){var ft=Ke[je];this._layerConfigs[ft.id]=ft;var mt=this._layers[ft.id]=e.createStyleLayer(ft);mt._featureFilter=e.featureFilter(mt.filter),this.keyCache[ft.id]&&delete this.keyCache[ft.id]}for(var pt=0,Ot=Ve;pt<Ot.length;pt+=1){var Pt=Ot[pt];delete this.keyCache[Pt],delete this._layerConfigs[Pt],delete this._layers[Pt]}this.familiesBySource={};for(var Jt=0,$t=function(ot,yt){for(var It={},Vt=0;Vt<ot.length;Vt++){var ln=yt&&yt[ot[Vt].id]||i(ot[Vt]);yt&&(yt[ot[Vt].id]=ln);var un=It[ln];un||(un=It[ln]=[]),un.push(ot[Vt])}var an=[];for(var wn in It)an.push(It[wn]);return an}(e.values(this._layerConfigs),this.keyCache);Jt<$t.length;Jt+=1){var ut=$t[Jt].map(function(ot){return Le._layers[ot.id]}),Dt=ut[0];if("none"!==Dt.visibility){var Wt=Dt.source||"",zt=this.familiesBySource[Wt];zt||(zt=this.familiesBySource[Wt]={});var Ht=Dt.sourceLayer||"_geojsonTileLayer",Ne=zt[Ht];Ne||(Ne=zt[Ht]=[]),Ne.push(ut)}}};var r=function(Be){var Ve={},Le=[];for(var je in Be){var Ke=Be[je],ft=Ve[je]={};for(var mt in Ke){var pt=Ke[+mt];if(pt&&0!==pt.bitmap.width&&0!==pt.bitmap.height){var Ot={x:0,y:0,w:pt.bitmap.width+2,h:pt.bitmap.height+2};Le.push(Ot),ft[mt]={rect:Ot,metrics:pt.metrics}}}}var Pt=e.potpack(Le),ut=new e.AlphaImage({width:Pt.w||1,height:Pt.h||1});for(var Dt in Be){var Wt=Be[Dt];for(var zt in Wt){var Ht=Wt[+zt];if(Ht&&0!==Ht.bitmap.width&&0!==Ht.bitmap.height){var Ne=Ve[Dt][zt].rect;e.AlphaImage.copy(Ht.bitmap,ut,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Ht.bitmap)}}}this.image=ut,this.positions=Ve};e.register("GlyphAtlas",r);var y=function(Be){this.tileID=new e.OverscaledTileID(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),this.uid=Be.uid,this.zoom=Be.zoom,this.pixelRatio=Be.pixelRatio,this.tileSize=Be.tileSize,this.source=Be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Be.showCollisionBoxes,this.collectResourceTiming=!!Be.collectResourceTiming,this.returnDependencies=!!Be.returnDependencies,this.promoteId=Be.promoteId};function h(Be,Ve,Le){for(var je=new e.EvaluationParameters(Ve),Ke=0,ft=Be;Ke<ft.length;Ke+=1)ft[Ke].recalculate(je,Le)}function s(Be,Ve){var Le=e.getArrayBuffer(Be.request,function(je,Ke,ft,mt){je?Ve(je):Ke&&Ve(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ke)),rawData:Ke,cacheControl:ft,expires:mt})});return function(){Le.cancel(),Ve()}}y.prototype.parse=function(Be,Ve,Le,je,Ke){var ft=this;this.status="parsing",this.data=Be,this.collisionBoxArray=new e.CollisionBoxArray;var mt=new e.DictionaryCoder(Object.keys(Be.layers).sort()),pt=new e.FeatureIndex(this.tileID,this.promoteId);pt.bucketLayerIDs=[];var Ot,Pt,Jt,$t,ut={},Dt={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Le},Wt=Ve.familiesBySource[this.source];for(var zt in Wt){var Ht=Be.layers[zt];if(Ht){1===Ht.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+zt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ne=mt.encode(zt),ot=[],yt=0;yt<Ht.length;yt++){var It=Ht.feature(yt),Vt=pt.getId(It,zt);ot.push({feature:It,id:Vt,index:yt,sourceLayerIndex:Ne})}for(var ln=0,un=Wt[zt];ln<un.length;ln+=1){var an=un[ln],wn=an[0];wn.minzoom&&this.zoom<Math.floor(wn.minzoom)||wn.maxzoom&&this.zoom>=wn.maxzoom||"none"!==wn.visibility&&(h(an,this.zoom,Le),(ut[wn.id]=wn.createBucket({index:pt.bucketLayerIDs.length,layers:an,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source})).populate(ot,Dt,this.tileID.canonical),pt.bucketLayerIDs.push(an.map(function(xn){return xn.id})))}}}var Zn=e.mapObject(Dt.glyphDependencies,function(xn){return Object.keys(xn).map(Number)});Object.keys(Zn).length?je.send("getGlyphs",{uid:this.uid,stacks:Zn},function(xn,En){Ot||(Ot=xn,Pt=En,pn.call(ft))}):Pt={};var An=Object.keys(Dt.iconDependencies);An.length?je.send("getImages",{icons:An,source:this.source,tileID:this.tileID,type:"icons"},function(xn,En){Ot||(Ot=xn,Jt=En,pn.call(ft))}):Jt={};var hn=Object.keys(Dt.patternDependencies);function pn(){if(Ot)return Ke(Ot);if(Pt&&Jt&&$t){var xn=new r(Pt),En=new e.ImageAtlas(Jt,$t);for(var In in ut){var Yn=ut[In];Yn instanceof e.SymbolBucket?(h(Yn.layers,this.zoom,Le),e.performSymbolLayout(Yn,Pt,xn.positions,Jt,En.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Yn.hasPattern&&(Yn instanceof e.LineBucket||Yn instanceof e.FillBucket||Yn instanceof e.FillExtrusionBucket)&&(h(Yn.layers,this.zoom,Le),Yn.addFeatures(Dt,this.tileID.canonical,En.patternPositions))}this.status="done",Ke(null,{buckets:e.values(ut).filter(function(nr){return!nr.isEmpty()}),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xn.image,imageAtlas:En,glyphMap:this.returnDependencies?Pt:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?xn.positions:null})}}hn.length?je.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"patterns"},function(xn,En){Ot||(Ot=xn,$t=En,pn.call(ft))}):$t={},pn.call(this)};var d=function(Be,Ve,Le,je){this.actor=Be,this.layerIndex=Ve,this.availableImages=Le,this.loadVectorData=je||s,this.loading={},this.loaded={}};d.prototype.loadTile=function(Be,Ve){var Le=this,je=Be.uid;this.loading||(this.loading={});var Ke=!!(Be&&Be.request&&Be.request.collectResourceTiming)&&new e.RequestPerformance(Be.request),ft=this.loading[je]=new y(Be);ft.abort=this.loadVectorData(Be,function(mt,pt){if(delete Le.loading[je],mt||!pt)return ft.status="done",Le.loaded[je]=ft,Ve(mt);var Ot=pt.rawData,Pt={};pt.expires&&(Pt.expires=pt.expires),pt.cacheControl&&(Pt.cacheControl=pt.cacheControl);var Jt={};if(Ke){var $t=Ke.finish();$t&&(Jt.resourceTiming=JSON.parse(JSON.stringify($t)))}ft.vectorTile=pt.vectorTile,ft.parse(pt.vectorTile,Le.layerIndex,Le.availableImages,Le.actor,function(ut,Dt){if(ut||!Dt)return Ve(ut);Ve(null,e.extend({rawTileData:Ot.slice(0)},Dt,Pt,Jt))}),Le.loaded=Le.loaded||{},Le.loaded[je]=ft})},d.prototype.reloadTile=function(Be,Ve){var Le=this,je=this.loaded,Ke=Be.uid,ft=this;if(je&&je[Ke]){var mt=je[Ke];mt.showCollisionBoxes=Be.showCollisionBoxes;var pt=function(Ot,Pt){var Jt=mt.reloadCallback;Jt&&(delete mt.reloadCallback,mt.parse(mt.vectorTile,ft.layerIndex,Le.availableImages,ft.actor,Jt)),Ve(Ot,Pt)};"parsing"===mt.status?mt.reloadCallback=pt:"done"===mt.status&&(mt.vectorTile?mt.parse(mt.vectorTile,this.layerIndex,this.availableImages,this.actor,pt):pt())}},d.prototype.abortTile=function(Be,Ve){var Le=this.loading,je=Be.uid;Le&&Le[je]&&Le[je].abort&&(Le[je].abort(),delete Le[je]),Ve()},d.prototype.removeTile=function(Be,Ve){var Le=this.loaded,je=Be.uid;Le&&Le[je]&&delete Le[je],Ve()};var p=e.window.ImageBitmap,c=function(){this.loaded={}};c.prototype.loadTile=function(Be,Ve){var Le=Be.uid,je=Be.encoding,Ke=Be.rawImageData,ft=p&&Ke instanceof p?this.getImageData(Ke):Ke,mt=new e.DEMData(Le,ft,je);this.loaded=this.loaded||{},this.loaded[Le]=mt,Ve(null,mt)},c.prototype.getImageData=function(Be){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Be.width,Be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Be.width,this.offscreenCanvas.height=Be.height,this.offscreenCanvasContext.drawImage(Be,0,0,Be.width,Be.height);var Ve=this.offscreenCanvasContext.getImageData(-1,-1,Be.width+2,Be.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Ve.width,height:Ve.height},Ve.data)},c.prototype.removeTile=function(Be){var Ve=this.loaded,Le=Be.uid;Ve&&Ve[Le]&&delete Ve[Le]};var g=function Be(Ve,Le){var je,Ke=Ve&&Ve.type;if("FeatureCollection"===Ke)for(je=0;je<Ve.features.length;je++)Be(Ve.features[je],Le);else if("GeometryCollection"===Ke)for(je=0;je<Ve.geometries.length;je++)Be(Ve.geometries[je],Le);else if("Feature"===Ke)Be(Ve.geometry,Le);else if("Polygon"===Ke)m(Ve.coordinates,Le);else if("MultiPolygon"===Ke)for(je=0;je<Ve.coordinates.length;je++)m(Ve.coordinates[je],Le);return Ve};function m(Be,Ve){if(0!==Be.length){u(Be[0],Ve);for(var Le=1;Le<Be.length;Le++)u(Be[Le],!Ve)}}function u(Be,Ve){for(var Le=0,je=0,Ke=Be.length,ft=Ke-1;je<Ke;ft=je++)Le+=(Be[je][0]-Be[ft][0])*(Be[ft][1]+Be[je][1]);Le>=0!=!!Ve&&Be.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(Be){this._feature=Be,this.extent=e.EXTENT,this.type=Be.type,this.properties=Be.tags,"id"in Be&&!isNaN(Be.id)&&(this.id=parseInt(Be.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Be=[],Ve=0,Le=this._feature.geometry;Ve<Le.length;Ve+=1){var je=Le[Ve];Be.push([new e.Point$1(je[0],je[1])])}return Be}for(var Ke=[],ft=0,mt=this._feature.geometry;ft<mt.length;ft+=1){for(var pt=[],Ot=0,Pt=mt[ft];Ot<Pt.length;Ot+=1){var Jt=Pt[Ot];pt.push(new e.Point$1(Jt[0],Jt[1]))}Ke.push(pt)}return Ke},f.prototype.toGeoJSON=function(Be,Ve,Le){return w.call(this,Be,Ve,Le)};var A=function(Be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Be.length,this._features=Be};A.prototype.feature=function(Be){return new f(this._features[Be])};var M=e.vectorTile.VectorTileFeature,k=E;function E(Be,Ve){this.options=Ve||{},this.features=Be,this.length=Be.length}function P(Be,Ve){this.id="number"==typeof Be.id?Be.id:void 0,this.type=Be.type,this.rawGeometry=1===Be.type?[Be.geometry]:Be.geometry,this.properties=Be.tags,this.extent=Ve||4096}E.prototype.feature=function(Be){return new P(this.features[Be],this.options.extent)},P.prototype.loadGeometry=function(){var Be=this.rawGeometry;this.geometry=[];for(var Ve=0;Ve<Be.length;Ve++){for(var Le=Be[Ve],je=[],Ke=0;Ke<Le.length;Ke++)je.push(new e.Point$1(Le[Ke][0],Le[Ke][1]));this.geometry.push(je)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Be=this.geometry,Ve=1/0,Le=-1/0,je=1/0,Ke=-1/0,ft=0;ft<Be.length;ft++)for(var mt=Be[ft],pt=0;pt<mt.length;pt++){var Ot=mt[pt];Ve=Math.min(Ve,Ot.x),Le=Math.max(Le,Ot.x),je=Math.min(je,Ot.y),Ke=Math.max(Ke,Ot.y)}return[Ve,je,Le,Ke]},P.prototype.toGeoJSON=M.prototype.toGeoJSON;var D=I,L=k;function I(Be){var Ve=new e.pbf;return function(Le,je){for(var Ke in Le.layers)je.writeMessage(3,B,Le.layers[Ke])}(Be,Ve),Ve.finish()}function B(Be,Ve){var Le;Ve.writeVarintField(15,Be.version||1),Ve.writeStringField(1,Be.name||""),Ve.writeVarintField(5,Be.extent||4096);var je={keys:[],values:[],keycache:{},valuecache:{}};for(Le=0;Le<Be.length;Le++)je.feature=Be.feature(Le),Ve.writeMessage(2,V,je);var Ke=je.keys;for(Le=0;Le<Ke.length;Le++)Ve.writeStringField(3,Ke[Le]);var ft=je.values;for(Le=0;Le<ft.length;Le++)Ve.writeMessage(4,$,ft[Le])}function V(Be,Ve){var Le=Be.feature;void 0!==Le.id&&Ve.writeVarintField(1,Le.id),Ve.writeMessage(2,Z,Be),Ve.writeVarintField(3,Le.type),Ve.writeMessage(4,re,Le)}function Z(Be,Ve){var Le=Be.feature,je=Be.keys,Ke=Be.values,ft=Be.keycache,mt=Be.valuecache;for(var pt in Le.properties){var Ot=ft[pt];void 0===Ot&&(je.push(pt),ft[pt]=Ot=je.length-1),Ve.writeVarint(Ot);var Pt=Le.properties[pt],Jt=typeof Pt;"string"!==Jt&&"boolean"!==Jt&&"number"!==Jt&&(Pt=JSON.stringify(Pt));var $t=Jt+":"+Pt,ut=mt[$t];void 0===ut&&(Ke.push(Pt),mt[$t]=ut=Ke.length-1),Ve.writeVarint(ut)}}function Y(Be,Ve){return(Ve<<3)+(7&Be)}function Q(Be){return Be<<1^Be>>31}function re(Be,Ve){for(var Le=Be.loadGeometry(),je=Be.type,Ke=0,ft=0,mt=Le.length,pt=0;pt<mt;pt++){var Ot=Le[pt],Pt=1;1===je&&(Pt=Ot.length),Ve.writeVarint(Y(1,Pt));for(var Jt=3===je?Ot.length-1:Ot.length,$t=0;$t<Jt;$t++){1===$t&&1!==je&&Ve.writeVarint(Y(2,Jt-1));var ut=Ot[$t].x-Ke,Dt=Ot[$t].y-ft;Ve.writeVarint(Q(ut)),Ve.writeVarint(Q(Dt)),Ke+=ut,ft+=Dt}3===je&&Ve.writeVarint(Y(7,1))}}function $(Be,Ve){var Le=typeof Be;"string"===Le?Ve.writeStringField(1,Be):"boolean"===Le?Ve.writeBooleanField(7,Be):"number"===Le&&(Be%1!=0?Ve.writeDoubleField(3,Be):Be<0?Ve.writeSVarintField(6,Be):Ve.writeVarintField(5,Be))}function J(Be,Ve,Le,je,Ke,ft){if(!(Ke-je<=Le)){var mt=je+Ke>>1;(function pt(Ot,Pt,Jt,$t,ut,Dt){for(;ut>$t;){if(ut-$t>600){var Wt=ut-$t+1,zt=Jt-$t+1,Ht=Math.log(Wt),Ne=.5*Math.exp(2*Ht/3),ot=.5*Math.sqrt(Ht*Ne*(Wt-Ne)/Wt)*(zt-Wt/2<0?-1:1);pt(Ot,Pt,Jt,Math.max($t,Math.floor(Jt-zt*Ne/Wt+ot)),Math.min(ut,Math.floor(Jt+(Wt-zt)*Ne/Wt+ot)),Dt)}var Vt=Pt[2*Jt+Dt],ln=$t,un=ut;for(ie(Ot,Pt,$t,Jt),Pt[2*ut+Dt]>Vt&&ie(Ot,Pt,$t,ut);ln<un;){for(ie(Ot,Pt,ln,un),ln++,un--;Pt[2*ln+Dt]<Vt;)ln++;for(;Pt[2*un+Dt]>Vt;)un--}Pt[2*$t+Dt]===Vt?ie(Ot,Pt,$t,un):ie(Ot,Pt,++un,ut),un<=Jt&&($t=un+1),Jt<=un&&(ut=un-1)}})(Be,Ve,mt,je,Ke,ft%2),J(Be,Ve,Le,je,mt-1,ft+1),J(Be,Ve,Le,mt+1,Ke,ft+1)}}function ie(Be,Ve,Le,je){j(Be,Le,je),j(Ve,2*Le,2*je),j(Ve,2*Le+1,2*je+1)}function j(Be,Ve,Le){var je=Be[Ve];Be[Ve]=Be[Le],Be[Le]=je}function q(Be,Ve,Le,je){var Ke=Be-Le,ft=Ve-je;return Ke*Ke+ft*ft}D.fromVectorTileJs=I,D.fromGeojsonVt=function(Be,Ve){Ve=Ve||{};var Le={};for(var je in Be)Le[je]=new k(Be[je].features,Ve),Le[je].name=je,Le[je].version=Ve.version,Le[je].extent=Ve.extent;return I({layers:Le})},D.GeoJSONWrapper=L;var W=function(Be){return Be[0]},ae=function(Be){return Be[1]},G=function(Be,Ve,Le,je,Ke){void 0===Ve&&(Ve=W),void 0===Le&&(Le=ae),void 0===je&&(je=64),void 0===Ke&&(Ke=Float64Array),this.nodeSize=je,this.points=Be;for(var ft=Be.length<65536?Uint16Array:Uint32Array,mt=this.ids=new ft(Be.length),pt=this.coords=new Ke(2*Be.length),Ot=0;Ot<Be.length;Ot++)mt[Ot]=Ot,pt[2*Ot]=Ve(Be[Ot]),pt[2*Ot+1]=Le(Be[Ot]);J(mt,pt,je,0,mt.length-1,0)};G.prototype.range=function(Be,Ve,Le,je){return function(Ke,ft,mt,pt,Ot,Pt,Jt){for(var $t,ut,Dt=[0,Ke.length-1,0],Wt=[];Dt.length;){var zt=Dt.pop(),Ht=Dt.pop(),Ne=Dt.pop();if(Ht-Ne<=Jt)for(var ot=Ne;ot<=Ht;ot++)ut=ft[2*ot+1],($t=ft[2*ot])>=mt&&$t<=Ot&&ut>=pt&&ut<=Pt&&Wt.push(Ke[ot]);else{var yt=Math.floor((Ne+Ht)/2);ut=ft[2*yt+1],($t=ft[2*yt])>=mt&&$t<=Ot&&ut>=pt&&ut<=Pt&&Wt.push(Ke[yt]);var It=(zt+1)%2;(0===zt?mt<=$t:pt<=ut)&&(Dt.push(Ne),Dt.push(yt-1),Dt.push(It)),(0===zt?Ot>=$t:Pt>=ut)&&(Dt.push(yt+1),Dt.push(Ht),Dt.push(It))}}return Wt}(this.ids,this.coords,Be,Ve,Le,je,this.nodeSize)},G.prototype.within=function(Be,Ve,Le){return function(je,Ke,ft,mt,pt,Ot){for(var Pt=[0,je.length-1,0],Jt=[],$t=pt*pt;Pt.length;){var ut=Pt.pop(),Dt=Pt.pop(),Wt=Pt.pop();if(Dt-Wt<=Ot)for(var zt=Wt;zt<=Dt;zt++)q(Ke[2*zt],Ke[2*zt+1],ft,mt)<=$t&&Jt.push(je[zt]);else{var Ht=Math.floor((Wt+Dt)/2),Ne=Ke[2*Ht],ot=Ke[2*Ht+1];q(Ne,ot,ft,mt)<=$t&&Jt.push(je[Ht]);var yt=(ut+1)%2;(0===ut?ft-pt<=Ne:mt-pt<=ot)&&(Pt.push(Wt),Pt.push(Ht-1),Pt.push(yt)),(0===ut?ft+pt>=Ne:mt+pt>=ot)&&(Pt.push(Ht+1),Pt.push(Dt),Pt.push(yt))}}return Jt}(this.ids,this.coords,Be,Ve,Le,this.nodeSize)};var ee={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Be){return Be}},te=function(Be){this.options=_e(Object.create(ee),Be),this.trees=new Array(this.options.maxZoom+1)};function le(Be,Ve,Le,je,Ke){return{x:Be,y:Ve,zoom:1/0,id:Le,parentId:-1,numPoints:je,properties:Ke}}function ue(Be,Ve){var Le=Be.geometry.coordinates,Ke=Le[1];return{x:be(Le[0]),y:me(Ke),zoom:1/0,index:Ve,parentId:-1}}function de(Be){return{type:"Feature",id:Be.id,properties:he(Be),geometry:{type:"Point",coordinates:[(je=Be.x,360*(je-.5)),(Ve=Be.y,Le=(180-360*Ve)*Math.PI/180,360*Math.atan(Math.exp(Le))/Math.PI-90)]}};var Ve,Le,je}function he(Be){var Ve=Be.numPoints,Le=Ve>=1e4?Math.round(Ve/1e3)+"k":Ve>=1e3?Math.round(Ve/100)/10+"k":Ve;return _e(_e({},Be.properties),{cluster:!0,cluster_id:Be.id,point_count:Ve,point_count_abbreviated:Le})}function be(Be){return Be/360+.5}function me(Be){var Ve=Math.sin(Be*Math.PI/180),Le=.5-.25*Math.log((1+Ve)/(1-Ve))/Math.PI;return Le<0?0:Le>1?1:Le}function _e(Be,Ve){for(var Le in Ve)Be[Le]=Ve[Le];return Be}function Ee(Be){return Be.x}function De(Be){return Be.y}function Se(Be,Ve,Le,je,Ke,ft){var mt=Ke-Le,pt=ft-je;if(0!==mt||0!==pt){var Ot=((Be-Le)*mt+(Ve-je)*pt)/(mt*mt+pt*pt);Ot>1?(Le=Ke,je=ft):Ot>0&&(Le+=mt*Ot,je+=pt*Ot)}return(mt=Be-Le)*mt+(pt=Ve-je)*pt}function Fe(Be,Ve,Le,je){var Ke={id:void 0===Be?null:Be,type:Ve,geometry:Le,tags:je,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ft){var mt=ft.geometry,pt=ft.type;if("Point"===pt||"MultiPoint"===pt||"LineString"===pt)ve(ft,mt);else if("Polygon"===pt||"MultiLineString"===pt)for(var Ot=0;Ot<mt.length;Ot++)ve(ft,mt[Ot]);else if("MultiPolygon"===pt)for(Ot=0;Ot<mt.length;Ot++)for(var Pt=0;Pt<mt[Ot].length;Pt++)ve(ft,mt[Ot][Pt])}(Ke),Ke}function ve(Be,Ve){for(var Le=0;Le<Ve.length;Le+=3)Be.minX=Math.min(Be.minX,Ve[Le]),Be.minY=Math.min(Be.minY,Ve[Le+1]),Be.maxX=Math.max(Be.maxX,Ve[Le]),Be.maxY=Math.max(Be.maxY,Ve[Le+1])}function Te(Be,Ve,Le,je){if(Ve.geometry){var Ke=Ve.geometry.coordinates,ft=Ve.geometry.type,mt=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2),pt=[],Ot=Ve.id;if(Le.promoteId?Ot=Ve.properties[Le.promoteId]:Le.generateId&&(Ot=je||0),"Point"===ft)Ie(Ke,pt);else if("MultiPoint"===ft)for(var Pt=0;Pt<Ke.length;Pt++)Ie(Ke[Pt],pt);else if("LineString"===ft)Ce(Ke,pt,mt,!1);else if("MultiLineString"===ft){if(Le.lineMetrics){for(Pt=0;Pt<Ke.length;Pt++)Ce(Ke[Pt],pt=[],mt,!1),Be.push(Fe(Ot,"LineString",pt,Ve.properties));return}Re(Ke,pt,mt,!1)}else if("Polygon"===ft)Re(Ke,pt,mt,!0);else{if("MultiPolygon"!==ft){if("GeometryCollection"===ft){for(Pt=0;Pt<Ve.geometry.geometries.length;Pt++)Te(Be,{id:Ot,geometry:Ve.geometry.geometries[Pt],properties:Ve.properties},Le,je);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Pt=0;Pt<Ke.length;Pt++){var Jt=[];Re(Ke[Pt],Jt,mt,!0),pt.push(Jt)}}Be.push(Fe(Ot,ft,pt,Ve.properties))}}function Ie(Be,Ve){Ve.push(Ue(Be[0])),Ve.push(qe(Be[1])),Ve.push(0)}function Ce(Be,Ve,Le,je){for(var Ke,ft,mt=0,pt=0;pt<Be.length;pt++){var Ot=Ue(Be[pt][0]),Pt=qe(Be[pt][1]);Ve.push(Ot),Ve.push(Pt),Ve.push(0),pt>0&&(mt+=je?(Ke*Pt-Ot*ft)/2:Math.sqrt(Math.pow(Ot-Ke,2)+Math.pow(Pt-ft,2))),Ke=Ot,ft=Pt}var Jt=Ve.length-3;Ve[2]=1,function $t(ut,Dt,Wt,zt){for(var Ht,Ne=zt,ot=Wt-Dt>>1,yt=Wt-Dt,It=ut[Dt],Vt=ut[Dt+1],ln=ut[Wt],un=ut[Wt+1],an=Dt+3;an<Wt;an+=3){var wn=Se(ut[an],ut[an+1],It,Vt,ln,un);if(wn>Ne)Ht=an,Ne=wn;else if(wn===Ne){var Zn=Math.abs(an-ot);Zn<yt&&(Ht=an,yt=Zn)}}Ne>zt&&(Ht-Dt>3&&$t(ut,Dt,Ht,zt),ut[Ht+2]=Ne,Wt-Ht>3&&$t(ut,Ht,Wt,zt))}(Ve,0,Jt,Le),Ve[Jt+2]=1,Ve.size=Math.abs(mt),Ve.start=0,Ve.end=Ve.size}function Re(Be,Ve,Le,je){for(var Ke=0;Ke<Be.length;Ke++){var ft=[];Ce(Be[Ke],ft,Le,je),Ve.push(ft)}}function Ue(Be){return Be/360+.5}function qe(Be){var Ve=Math.sin(Be*Math.PI/180),Le=.5-.25*Math.log((1+Ve)/(1-Ve))/Math.PI;return Le<0?0:Le>1?1:Le}function Xe(Be,Ve,Le,je,Ke,ft,mt,pt){if(je/=Ve,ft>=(Le/=Ve)&&mt<je)return Be;if(mt<Le||ft>=je)return null;for(var Ot=[],Pt=0;Pt<Be.length;Pt++){var Jt=Be[Pt],$t=Jt.geometry,ut=Jt.type,Dt=0===Ke?Jt.minX:Jt.minY,Wt=0===Ke?Jt.maxX:Jt.maxY;if(Dt>=Le&&Wt<je)Ot.push(Jt);else if(!(Wt<Le||Dt>=je)){var zt=[];if("Point"===ut||"MultiPoint"===ut)st($t,zt,Le,je,Ke);else if("LineString"===ut)He($t,zt,Le,je,Ke,!1,pt.lineMetrics);else if("MultiLineString"===ut)et($t,zt,Le,je,Ke,!1);else if("Polygon"===ut)et($t,zt,Le,je,Ke,!0);else if("MultiPolygon"===ut)for(var Ht=0;Ht<$t.length;Ht++){var Ne=[];et($t[Ht],Ne,Le,je,Ke,!0),Ne.length&&zt.push(Ne)}if(zt.length){if(pt.lineMetrics&&"LineString"===ut){for(Ht=0;Ht<zt.length;Ht++)Ot.push(Fe(Jt.id,ut,zt[Ht],Jt.tags));continue}"LineString"!==ut&&"MultiLineString"!==ut||(1===zt.length?(ut="LineString",zt=zt[0]):ut="MultiLineString"),"Point"!==ut&&"MultiPoint"!==ut||(ut=3===zt.length?"Point":"MultiPoint"),Ot.push(Fe(Jt.id,ut,zt,Jt.tags))}}}return Ot.length?Ot:null}function st(Be,Ve,Le,je,Ke){for(var ft=0;ft<Be.length;ft+=3){var mt=Be[ft+Ke];mt>=Le&&mt<=je&&(Ve.push(Be[ft]),Ve.push(Be[ft+1]),Ve.push(Be[ft+2]))}}function He(Be,Ve,Le,je,Ke,ft,mt){for(var pt,Ot,Pt=$e(Be),Jt=0===Ke?ct:bt,$t=Be.start,ut=0;ut<Be.length-3;ut+=3){var Dt=Be[ut],Wt=Be[ut+1],zt=Be[ut+2],Ht=Be[ut+3],Ne=Be[ut+4],ot=0===Ke?Dt:Wt,yt=0===Ke?Ht:Ne,It=!1;mt&&(pt=Math.sqrt(Math.pow(Dt-Ht,2)+Math.pow(Wt-Ne,2))),ot<Le?yt>Le&&(Ot=Jt(Pt,Dt,Wt,Ht,Ne,Le),mt&&(Pt.start=$t+pt*Ot)):ot>je?yt<je&&(Ot=Jt(Pt,Dt,Wt,Ht,Ne,je),mt&&(Pt.start=$t+pt*Ot)):tt(Pt,Dt,Wt,zt),yt<Le&&ot>=Le&&(Ot=Jt(Pt,Dt,Wt,Ht,Ne,Le),It=!0),yt>je&&ot<=je&&(Ot=Jt(Pt,Dt,Wt,Ht,Ne,je),It=!0),!ft&&It&&(mt&&(Pt.end=$t+pt*Ot),Ve.push(Pt),Pt=$e(Be)),mt&&($t+=pt)}var Vt=Be.length-3;Dt=Be[Vt],Wt=Be[Vt+1],zt=Be[Vt+2],(ot=0===Ke?Dt:Wt)>=Le&&ot<=je&&tt(Pt,Dt,Wt,zt),Vt=Pt.length-3,ft&&Vt>=3&&(Pt[Vt]!==Pt[0]||Pt[Vt+1]!==Pt[1])&&tt(Pt,Pt[0],Pt[1],Pt[2]),Pt.length&&Ve.push(Pt)}function $e(Be){var Ve=[];return Ve.size=Be.size,Ve.start=Be.start,Ve.end=Be.end,Ve}function et(Be,Ve,Le,je,Ke,ft){for(var mt=0;mt<Be.length;mt++)He(Be[mt],Ve,Le,je,Ke,ft,!1)}function tt(Be,Ve,Le,je){Be.push(Ve),Be.push(Le),Be.push(je)}function ct(Be,Ve,Le,je,Ke,ft){var mt=(ft-Ve)/(je-Ve);return Be.push(ft),Be.push(Le+(Ke-Le)*mt),Be.push(1),mt}function bt(Be,Ve,Le,je,Ke,ft){var mt=(ft-Le)/(Ke-Le);return Be.push(Ve+(je-Ve)*mt),Be.push(ft),Be.push(1),mt}function At(Be,Ve){for(var Le=[],je=0;je<Be.length;je++){var Ke,ft=Be[je],mt=ft.type;if("Point"===mt||"MultiPoint"===mt||"LineString"===mt)Ke=Ut(ft.geometry,Ve);else if("MultiLineString"===mt||"Polygon"===mt){Ke=[];for(var pt=0;pt<ft.geometry.length;pt++)Ke.push(Ut(ft.geometry[pt],Ve))}else if("MultiPolygon"===mt)for(Ke=[],pt=0;pt<ft.geometry.length;pt++){for(var Ot=[],Pt=0;Pt<ft.geometry[pt].length;Pt++)Ot.push(Ut(ft.geometry[pt][Pt],Ve));Ke.push(Ot)}Le.push(Fe(ft.id,mt,Ke,ft.tags))}return Le}function Ut(Be,Ve){var Le=[];Le.size=Be.size,void 0!==Be.start&&(Le.start=Be.start,Le.end=Be.end);for(var je=0;je<Be.length;je+=3)Le.push(Be[je]+Ve,Be[je+1],Be[je+2]);return Le}function Ct(Be,Ve){if(Be.transformed)return Be;var Le,je,Ke,ft=1<<Be.z,mt=Be.x,pt=Be.y;for(Le=0;Le<Be.features.length;Le++){var Ot=Be.features[Le],Pt=Ot.geometry,Jt=Ot.type;if(Ot.geometry=[],1===Jt)for(je=0;je<Pt.length;je+=2)Ot.geometry.push(dt(Pt[je],Pt[je+1],Ve,ft,mt,pt));else for(je=0;je<Pt.length;je++){var $t=[];for(Ke=0;Ke<Pt[je].length;Ke+=2)$t.push(dt(Pt[je][Ke],Pt[je][Ke+1],Ve,ft,mt,pt));Ot.geometry.push($t)}}return Be.transformed=!0,Be}function dt(Be,Ve,Le,je,Ke,ft){return[Math.round(Le*(Be*je-Ke)),Math.round(Le*(Ve*je-ft))]}function at(Be,Ve,Le,je,Ke){for(var ft=Ve===Ke.maxZoom?0:Ke.tolerance/((1<<Ve)*Ke.extent),mt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Le,y:je,z:Ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pt=0;pt<Be.length;pt++){mt.numFeatures++,Nt(mt,Be[pt],ft,Ke);var Ot=Be[pt].minX,Pt=Be[pt].minY,Jt=Be[pt].maxX,$t=Be[pt].maxY;Ot<mt.minX&&(mt.minX=Ot),Pt<mt.minY&&(mt.minY=Pt),Jt>mt.maxX&&(mt.maxX=Jt),$t>mt.maxY&&(mt.maxY=$t)}return mt}function Nt(Be,Ve,Le,je){var Ke=Ve.geometry,ft=Ve.type,mt=[];if("Point"===ft||"MultiPoint"===ft)for(var pt=0;pt<Ke.length;pt+=3)mt.push(Ke[pt]),mt.push(Ke[pt+1]),Be.numPoints++,Be.numSimplified++;else if("LineString"===ft)rn(mt,Ke,Be,Le,!1,!1);else if("MultiLineString"===ft||"Polygon"===ft)for(pt=0;pt<Ke.length;pt++)rn(mt,Ke[pt],Be,Le,"Polygon"===ft,0===pt);else if("MultiPolygon"===ft)for(var Ot=0;Ot<Ke.length;Ot++){var Pt=Ke[Ot];for(pt=0;pt<Pt.length;pt++)rn(mt,Pt[pt],Be,Le,!0,0===pt)}if(mt.length){var Jt=Ve.tags||null;if("LineString"===ft&&je.lineMetrics){for(var $t in Jt={},Ve.tags)Jt[$t]=Ve.tags[$t];Jt.mapbox_clip_start=Ke.start/Ke.size,Jt.mapbox_clip_end=Ke.end/Ke.size}var ut={geometry:mt,type:"Polygon"===ft||"MultiPolygon"===ft?3:"LineString"===ft||"MultiLineString"===ft?2:1,tags:Jt};null!==Ve.id&&(ut.id=Ve.id),Be.features.push(ut)}}function rn(Be,Ve,Le,je,Ke,ft){var mt=je*je;if(je>0&&Ve.size<(Ke?mt:je))Le.numPoints+=Ve.length/3;else{for(var pt=[],Ot=0;Ot<Ve.length;Ot+=3)(0===je||Ve[Ot+2]>mt)&&(Le.numSimplified++,pt.push(Ve[Ot]),pt.push(Ve[Ot+1])),Le.numPoints++;Ke&&function(Pt,Jt){for(var $t=0,ut=0,Dt=Pt.length,Wt=Dt-2;ut<Dt;Wt=ut,ut+=2)$t+=(Pt[ut]-Pt[Wt])*(Pt[ut+1]+Pt[Wt+1]);if($t>0===Jt)for(ut=0,Dt=Pt.length;ut<Dt/2;ut+=2){var zt=Pt[ut],Ht=Pt[ut+1];Pt[ut]=Pt[Dt-2-ut],Pt[ut+1]=Pt[Dt-1-ut],Pt[Dt-2-ut]=zt,Pt[Dt-1-ut]=Ht}}(pt,ft),Be.push(pt)}}function en(Be,Ve){var Le=(Ve=this.options=function(Ke,ft){for(var mt in ft)Ke[mt]=ft[mt];return Ke}(Object.create(this.options),Ve)).debug;if(Le&&console.time("preprocess data"),Ve.maxZoom<0||Ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ve.promoteId&&Ve.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ke,ft,mt,pt,Ot,Pt,je=function(Ke,ft){var mt=[];if("FeatureCollection"===Ke.type)for(var pt=0;pt<Ke.features.length;pt++)Te(mt,Ke.features[pt],ft,pt);else Te(mt,"Feature"===Ke.type?Ke:{geometry:Ke},ft);return mt}(Be,Ve);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ve.indexMaxZoom,Ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ke=je,ft=Ve,mt=ft.buffer/ft.extent,pt=Ke,Ot=Xe(Ke,1,-1-mt,mt,0,-1,2,ft),Pt=Xe(Ke,1,1-mt,2+mt,0,-1,2,ft),(Ot||Pt)&&(pt=Xe(Ke,1,-mt,1+mt,0,-1,2,ft)||[],Ot&&(pt=At(Ot,1).concat(pt)),Pt&&(pt=pt.concat(At(Pt,-1)))),je=pt).length&&this.splitTile(je,0,0,0),Le&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ge(Be,Ve,Le){return 32*((1<<Be)*Le+Ve)+Be}function Qe(Be,Ve){var Le=Be.tileID.canonical;if(!this._geoJSONIndex)return Ve(null,null);var je=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!je)return Ve(null,null);var Ke=new A(je.features),ft=D(Ke);0===ft.byteOffset&&ft.byteLength===ft.buffer.byteLength||(ft=new Uint8Array(ft)),Ve(null,{vectorTile:Ke,rawData:ft.buffer})}te.prototype.load=function(Be){var Ve=this.options,Le=Ve.log,je=Ve.minZoom,Ke=Ve.maxZoom,ft=Ve.nodeSize;Le&&console.time("total time");var mt="prepare "+Be.length+" points";Le&&console.time(mt),this.points=Be;for(var pt=[],Ot=0;Ot<Be.length;Ot++)Be[Ot].geometry&&pt.push(ue(Be[Ot],Ot));this.trees[Ke+1]=new G(pt,Ee,De,ft,Float32Array),Le&&console.timeEnd(mt);for(var Pt=Ke;Pt>=je;Pt--){var Jt=+Date.now();pt=this._cluster(pt,Pt),this.trees[Pt]=new G(pt,Ee,De,ft,Float32Array),Le&&console.log("z%d: %d clusters in %dms",Pt,pt.length,+Date.now()-Jt)}return Le&&console.timeEnd("total time"),this},te.prototype.getClusters=function(Be,Ve){var Le=((Be[0]+180)%360+360)%360-180,je=Math.max(-90,Math.min(90,Be[1])),Ke=180===Be[2]?180:((Be[2]+180)%360+360)%360-180,ft=Math.max(-90,Math.min(90,Be[3]));if(Be[2]-Be[0]>=360)Le=-180,Ke=180;else if(Le>Ke){var mt=this.getClusters([Le,je,180,ft],Ve),pt=this.getClusters([-180,je,Ke,ft],Ve);return mt.concat(pt)}for(var Ot=this.trees[this._limitZoom(Ve)],Pt=[],Jt=0,$t=Ot.range(be(Le),me(ft),be(Ke),me(je));Jt<$t.length;Jt+=1){var Dt=Ot.points[$t[Jt]];Pt.push(Dt.numPoints?de(Dt):this.points[Dt.index])}return Pt},te.prototype.getChildren=function(Be){var Ve=this._getOriginId(Be),Le=this._getOriginZoom(Be),je="No cluster with the specified id.",Ke=this.trees[Le];if(!Ke)throw new Error(je);var ft=Ke.points[Ve];if(!ft)throw new Error(je);for(var mt=this.options.radius/(this.options.extent*Math.pow(2,Le-1)),pt=[],Ot=0,Pt=Ke.within(ft.x,ft.y,mt);Ot<Pt.length;Ot+=1){var $t=Ke.points[Pt[Ot]];$t.parentId===Be&&pt.push($t.numPoints?de($t):this.points[$t.index])}if(0===pt.length)throw new Error(je);return pt},te.prototype.getLeaves=function(Be,Ve,Le){var je=[];return this._appendLeaves(je,Be,Ve=Ve||10,Le=Le||0,0),je},te.prototype.getTile=function(Be,Ve,Le){var je=this.trees[this._limitZoom(Be)],Ke=Math.pow(2,Be),ft=this.options,pt=ft.radius/ft.extent,Ot=(Le-pt)/Ke,Pt=(Le+1+pt)/Ke,Jt={features:[]};return this._addTileFeatures(je.range((Ve-pt)/Ke,Ot,(Ve+1+pt)/Ke,Pt),je.points,Ve,Le,Ke,Jt),0===Ve&&this._addTileFeatures(je.range(1-pt/Ke,Ot,1,Pt),je.points,Ke,Le,Ke,Jt),Ve===Ke-1&&this._addTileFeatures(je.range(0,Ot,pt/Ke,Pt),je.points,-1,Le,Ke,Jt),Jt.features.length?Jt:null},te.prototype.getClusterExpansionZoom=function(Be){for(var Ve=this._getOriginZoom(Be)-1;Ve<=this.options.maxZoom;){var Le=this.getChildren(Be);if(Ve++,1!==Le.length)break;Be=Le[0].properties.cluster_id}return Ve},te.prototype._appendLeaves=function(Be,Ve,Le,je,Ke){for(var ft=0,mt=this.getChildren(Ve);ft<mt.length;ft+=1){var pt=mt[ft],Ot=pt.properties;if(Ot&&Ot.cluster?Ke+Ot.point_count<=je?Ke+=Ot.point_count:Ke=this._appendLeaves(Be,Ot.cluster_id,Le,je,Ke):Ke<je?Ke++:Be.push(pt),Be.length===Le)break}return Ke},te.prototype._addTileFeatures=function(Be,Ve,Le,je,Ke,ft){for(var mt=0,pt=Be;mt<pt.length;mt+=1){var Ot=Ve[pt[mt]],Pt=Ot.numPoints,Jt={type:1,geometry:[[Math.round(this.options.extent*(Ot.x*Ke-Le)),Math.round(this.options.extent*(Ot.y*Ke-je))]],tags:Pt?he(Ot):this.points[Ot.index].properties},$t=void 0;Pt?$t=Ot.id:this.options.generateId?$t=Ot.index:this.points[Ot.index].id&&($t=this.points[Ot.index].id),void 0!==$t&&(Jt.id=$t),ft.features.push(Jt)}},te.prototype._limitZoom=function(Be){return Math.max(this.options.minZoom,Math.min(Be,this.options.maxZoom+1))},te.prototype._cluster=function(Be,Ve){for(var Le=[],je=this.options,mt=je.reduce,pt=je.radius/(je.extent*Math.pow(2,Ve)),Ot=0;Ot<Be.length;Ot++){var Pt=Be[Ot];if(!(Pt.zoom<=Ve)){Pt.zoom=Ve;for(var Jt=this.trees[Ve+1],$t=Jt.within(Pt.x,Pt.y,pt),ut=Pt.numPoints||1,Dt=Pt.x*ut,Wt=Pt.y*ut,zt=mt&&ut>1?this._map(Pt,!0):null,Ht=(Ot<<5)+(Ve+1)+this.points.length,Ne=0,ot=$t;Ne<ot.length;Ne+=1){var It=Jt.points[ot[Ne]];if(!(It.zoom<=Ve)){It.zoom=Ve;var Vt=It.numPoints||1;Dt+=It.x*Vt,Wt+=It.y*Vt,ut+=Vt,It.parentId=Ht,mt&&(zt||(zt=this._map(Pt,!0)),mt(zt,this._map(It)))}}1===ut?Le.push(Pt):(Pt.parentId=Ht,Le.push(le(Dt/ut,Wt/ut,Ht,ut,zt)))}}return Le},te.prototype._getOriginId=function(Be){return Be-this.points.length>>5},te.prototype._getOriginZoom=function(Be){return(Be-this.points.length)%32},te.prototype._map=function(Be,Ve){if(Be.numPoints)return Ve?_e({},Be.properties):Be.properties;var Le=this.points[Be.index].properties,je=this.options.map(Le);return Ve&&je===Le?_e({},je):je},en.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},en.prototype.splitTile=function(Be,Ve,Le,je,Ke,ft,mt){for(var pt=[Be,Ve,Le,je],Ot=this.options,Pt=Ot.debug;pt.length;){je=pt.pop(),Le=pt.pop(),Ve=pt.pop(),Be=pt.pop();var Jt=1<<Ve,$t=Ge(Ve,Le,je),ut=this.tiles[$t];if(!ut&&(Pt>1&&console.time("creation"),ut=this.tiles[$t]=at(Be,Ve,Le,je,Ot),this.tileCoords.push({z:Ve,x:Le,y:je}),Pt)){Pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ve,Le,je,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var Dt="z"+Ve;this.stats[Dt]=(this.stats[Dt]||0)+1,this.total++}if(ut.source=Be,Ke){if(Ve===Ot.maxZoom||Ve===Ke)continue;var Wt=1<<Ke-Ve;if(Le!==Math.floor(ft/Wt)||je!==Math.floor(mt/Wt))continue}else if(Ve===Ot.indexMaxZoom||ut.numPoints<=Ot.indexMaxPoints)continue;if(ut.source=null,0!==Be.length){Pt>1&&console.time("clipping");var zt,Ht,Ne,ot,yt,It,Vt=.5*Ot.buffer/Ot.extent,ln=.5-Vt,un=.5+Vt,an=1+Vt;zt=Ht=Ne=ot=null,yt=Xe(Be,Jt,Le-Vt,Le+un,0,ut.minX,ut.maxX,Ot),It=Xe(Be,Jt,Le+ln,Le+an,0,ut.minX,ut.maxX,Ot),Be=null,yt&&(zt=Xe(yt,Jt,je-Vt,je+un,1,ut.minY,ut.maxY,Ot),Ht=Xe(yt,Jt,je+ln,je+an,1,ut.minY,ut.maxY,Ot),yt=null),It&&(Ne=Xe(It,Jt,je-Vt,je+un,1,ut.minY,ut.maxY,Ot),ot=Xe(It,Jt,je+ln,je+an,1,ut.minY,ut.maxY,Ot),It=null),Pt>1&&console.timeEnd("clipping"),pt.push(zt||[],Ve+1,2*Le,2*je),pt.push(Ht||[],Ve+1,2*Le,2*je+1),pt.push(Ne||[],Ve+1,2*Le+1,2*je),pt.push(ot||[],Ve+1,2*Le+1,2*je+1)}}},en.prototype.getTile=function(Be,Ve,Le){var je=this.options,Ke=je.extent,ft=je.debug;if(Be<0||Be>24)return null;var mt=1<<Be,pt=Ge(Be,Ve=(Ve%mt+mt)%mt,Le);if(this.tiles[pt])return Ct(this.tiles[pt],Ke);ft>1&&console.log("drilling down to z%d-%d-%d",Be,Ve,Le);for(var Ot,Pt=Be,Jt=Ve,$t=Le;!Ot&&Pt>0;)Pt--,Jt=Math.floor(Jt/2),$t=Math.floor($t/2),Ot=this.tiles[Ge(Pt,Jt,$t)];return Ot&&Ot.source?(ft>1&&console.log("found parent tile z%d-%d-%d",Pt,Jt,$t),ft>1&&console.time("drilling down"),this.splitTile(Ot.source,Pt,Jt,$t,Be,Ve,Le),ft>1&&console.timeEnd("drilling down"),this.tiles[pt]?Ct(this.tiles[pt],Ke):null):null};var Rt=function(Be){function Ve(Le,je,Ke,ft){Be.call(this,Le,je,Ke,Qe),ft&&(this.loadGeoJSON=ft)}return Be&&(Ve.__proto__=Be),(Ve.prototype=Object.create(Be&&Be.prototype)).constructor=Ve,Ve.prototype.loadData=function(Le,je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=je,this._pendingLoadDataParams=Le,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ve.prototype._loadData=function(){var Le=this;if(this._pendingCallback&&this._pendingLoadDataParams){var je=this._pendingCallback,Ke=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ft=!!(Ke&&Ke.request&&Ke.request.collectResourceTiming)&&new e.RequestPerformance(Ke.request);this.loadGeoJSON(Ke,function(mt,pt){if(mt||!pt)return je(mt);if("object"!=typeof pt)return je(new Error("Input data given to '"+Ke.source+"' is not a valid GeoJSON object."));g(pt,!0);try{Le._geoJSONIndex=Ke.cluster?new te(function(Jt){var $t=Jt.superclusterOptions,ut=Jt.clusterProperties;if(!ut||!$t)return $t;for(var Dt={},Wt={},zt={accumulated:null,zoom:0},Ht={properties:null},Ne=Object.keys(ut),ot=0,yt=Ne;ot<yt.length;ot+=1){var It=yt[ot],Vt=ut[It],ln=Vt[0],an=e.createExpression(Vt[1]),wn=e.createExpression("string"==typeof ln?[ln,["accumulated"],["get",It]]:ln);Dt[It]=an.value,Wt[It]=wn.value}return $t.map=function(Zn){Ht.properties=Zn;for(var An={},hn=0,pn=Ne;hn<pn.length;hn+=1){var xn=pn[hn];An[xn]=Dt[xn].evaluate(zt,Ht)}return An},$t.reduce=function(Zn,An){Ht.properties=An;for(var hn=0,pn=Ne;hn<pn.length;hn+=1){var xn=pn[hn];zt.accumulated=Zn[xn],Zn[xn]=Wt[xn].evaluate(zt,Ht)}},$t}(Ke)).load(pt.features):new en(Jt=pt,Ke.geojsonVtOptions)}catch(Jt){return je(Jt)}var Jt;Le.loaded={};var Ot={};if(ft){var Pt=ft.finish();Pt&&(Ot.resourceTiming={},Ot.resourceTiming[Ke.source]=JSON.parse(JSON.stringify(Pt)))}je(null,Ot)})}},Ve.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ve.prototype.reloadTile=function(Le,je){var Ke=this.loaded;return Ke&&Ke[Le.uid]?Be.prototype.reloadTile.call(this,Le,je):this.loadTile(Le,je)},Ve.prototype.loadGeoJSON=function(Le,je){if(Le.request)e.getJSON(Le.request,je);else{if("string"!=typeof Le.data)return je(new Error("Input data given to '"+Le.source+"' is not a valid GeoJSON object."));try{return je(null,JSON.parse(Le.data))}catch(Ke){return je(new Error("Input data given to '"+Le.source+"' is not a valid GeoJSON object."))}}},Ve.prototype.removeSource=function(Le,je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),je()},Ve.prototype.getClusterExpansionZoom=function(Le,je){try{je(null,this._geoJSONIndex.getClusterExpansionZoom(Le.clusterId))}catch(Ke){je(Ke)}},Ve.prototype.getClusterChildren=function(Le,je){try{je(null,this._geoJSONIndex.getChildren(Le.clusterId))}catch(Ke){je(Ke)}},Ve.prototype.getClusterLeaves=function(Le,je){try{je(null,this._geoJSONIndex.getLeaves(Le.clusterId,Le.limit,Le.offset))}catch(Ke){je(Ke)}},Ve}(d),gt=function(Be){var Ve=this;this.self=Be,this.actor=new e.Actor(Be,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:Rt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Le,je){if(Ve.workerSourceTypes[Le])throw new Error('Worker source with name "'+Le+'" already registered.');Ve.workerSourceTypes[Le]=je},this.self.registerRTLTextPlugin=function(Le){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Le.applyArabicShaping,e.plugin.processBidirectionalText=Le.processBidirectionalText,e.plugin.processStyledBidirectionalText=Le.processStyledBidirectionalText}};return gt.prototype.setReferrer=function(Be,Ve){this.referrer=Ve},gt.prototype.setImages=function(Be,Ve,Le){for(var je in this.availableImages[Be]=Ve,this.workerSources[Be]){var Ke=this.workerSources[Be][je];for(var ft in Ke)Ke[ft].availableImages=Ve}Le()},gt.prototype.setLayers=function(Be,Ve,Le){this.getLayerIndex(Be).replace(Ve),Le()},gt.prototype.updateLayers=function(Be,Ve,Le){this.getLayerIndex(Be).update(Ve.layers,Ve.removedIds),Le()},gt.prototype.loadTile=function(Be,Ve,Le){this.getWorkerSource(Be,Ve.type,Ve.source).loadTile(Ve,Le)},gt.prototype.loadDEMTile=function(Be,Ve,Le){this.getDEMWorkerSource(Be,Ve.source).loadTile(Ve,Le)},gt.prototype.reloadTile=function(Be,Ve,Le){this.getWorkerSource(Be,Ve.type,Ve.source).reloadTile(Ve,Le)},gt.prototype.abortTile=function(Be,Ve,Le){this.getWorkerSource(Be,Ve.type,Ve.source).abortTile(Ve,Le)},gt.prototype.removeTile=function(Be,Ve,Le){this.getWorkerSource(Be,Ve.type,Ve.source).removeTile(Ve,Le)},gt.prototype.removeDEMTile=function(Be,Ve){this.getDEMWorkerSource(Be,Ve.source).removeTile(Ve)},gt.prototype.removeSource=function(Be,Ve,Le){if(this.workerSources[Be]&&this.workerSources[Be][Ve.type]&&this.workerSources[Be][Ve.type][Ve.source]){var je=this.workerSources[Be][Ve.type][Ve.source];delete this.workerSources[Be][Ve.type][Ve.source],void 0!==je.removeSource?je.removeSource(Ve,Le):Le()}},gt.prototype.loadWorkerSource=function(Be,Ve,Le){try{this.self.importScripts(Ve.url),Le()}catch(je){Le(je.toString())}},gt.prototype.syncRTLPluginState=function(Be,Ve,Le){try{e.plugin.setState(Ve);var je=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=je){this.self.importScripts(je);var Ke=e.plugin.isParsed();Le(Ke?void 0:new Error("RTL Text Plugin failed to import scripts from "+je),Ke)}}catch(ft){Le(ft.toString())}},gt.prototype.getAvailableImages=function(Be){var Ve=this.availableImages[Be];return Ve||(Ve=[]),Ve},gt.prototype.getLayerIndex=function(Be){var Ve=this.layerIndexes[Be];return Ve||(Ve=this.layerIndexes[Be]=new l),Ve},gt.prototype.getWorkerSource=function(Be,Ve,Le){var je=this;return this.workerSources[Be]||(this.workerSources[Be]={}),this.workerSources[Be][Ve]||(this.workerSources[Be][Ve]={}),this.workerSources[Be][Ve][Le]||(this.workerSources[Be][Ve][Le]=new this.workerSourceTypes[Ve]({send:function(ft,mt,pt){je.actor.send(ft,mt,pt,Be)}},this.getLayerIndex(Be),this.getAvailableImages(Be))),this.workerSources[Be][Ve][Le]},gt.prototype.getDEMWorkerSource=function(Be,Ve){return this.demWorkerSources[Be]||(this.demWorkerSources[Be]={}),this.demWorkerSources[Be][Ve]||(this.demWorkerSources[Be][Ve]=new c),this.demWorkerSources[Be][Ve]},gt.prototype.enforceCacheSizeLimit=function(Be,Ve){e.enforceCacheSizeLimit(Ve)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new gt(e.window)),gt}),b(0,function(e){var o=e.createCommonjsModule(function(O){function z(fe){return!U(fe)}function U(fe){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ye,we,ke=new Blob([""],{type:"text/javascript"}),Pe=URL.createObjectURL(ke);try{we=new Worker(Pe),ye=!0}catch(Ze){ye=!1}return we&&we.terminate(),URL.revokeObjectURL(Pe),ye}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ye=document.createElement("canvas");ye.width=ye.height=1;var we=ye.getContext("2d");if(!we)return!1;var ke=we.getImageData(0,0,1,1);return ke&&ke.width===ye.width}()?(void 0===X[ye=fe&&fe.failIfMajorPerformanceCaveat]&&(X[ye]=function(we){var Ze,nt,ht,ke=(Ze=we,nt=document.createElement("canvas"),(ht=Object.create(z.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ze,nt.probablySupportsContext?nt.probablySupportsContext("webgl",ht)||nt.probablySupportsContext("experimental-webgl",ht):nt.supportsContext?nt.supportsContext("webgl",ht)||nt.supportsContext("experimental-webgl",ht):nt.getContext("webgl",ht)||nt.getContext("experimental-webgl",ht));if(!ke)return!1;var Pe=ke.createShader(ke.VERTEX_SHADER);return!(!Pe||ke.isContextLost())&&(ke.shaderSource(Pe,"void main() {}"),ke.compileShader(Pe),!0===ke.getShaderParameter(Pe,ke.COMPILE_STATUS))}(ye)),X[ye]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ye}O.exports?O.exports=z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=z,window.mapboxgl.notSupportedReason=U);var X={};z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(O,z,U){var X=e.window.document.createElement(O);return void 0!==z&&(X.className=z),U&&U.appendChild(X),X},createNS:function(O,z){return e.window.document.createElementNS(O,z)}},l=e.window.document.documentElement.style;function r(O){if(!l)return O[0];for(var z=0;z<O.length;z++)if(O[z]in l)return O[z];return O[0]}var y,h=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){l&&h&&(y=l[h],l[h]="none")},i.enableDrag=function(){l&&h&&(l[h]=y)};var s=r(["transform","WebkitTransform"]);i.setTransform=function(O,z){O.style[s]=z};var d=!1;try{var p=Object.defineProperty({},"passive",{get:function(){d=!0}});e.window.addEventListener("test",p,p),e.window.removeEventListener("test",p,p)}catch(O){d=!1}i.addEventListener=function(O,z,U,X){void 0===X&&(X={}),O.addEventListener(z,U,"passive"in X&&d?X:X.capture)},i.removeEventListener=function(O,z,U,X){void 0===X&&(X={}),O.removeEventListener(z,U,"passive"in X&&d?X:X.capture)};var c=function(O){O.preventDefault(),O.stopPropagation(),e.window.removeEventListener("click",c,!0)};function g(O){var z=O.userImage;return!!(z&&z.render&&z.render())&&(O.data.replace(new Uint8Array(z.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",c,!0)},0)},i.mousePos=function(O,z){var U=O.getBoundingClientRect();return new e.Point(z.clientX-U.left-O.clientLeft,z.clientY-U.top-O.clientTop)},i.touchPos=function(O,z){for(var U=O.getBoundingClientRect(),X=[],fe=0;fe<z.length;fe++)X.push(new e.Point(z[fe].clientX-U.left-O.clientLeft,z[fe].clientY-U.top-O.clientTop));return X},i.mouseButton=function(O){return void 0!==e.window.InstallTrigger&&2===O.button&&O.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:O.button},i.remove=function(O){O.parentNode&&O.parentNode.removeChild(O)};var m=function(O){function z(){O.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.isLoaded=function(){return this.loaded},z.prototype.setLoaded=function(U){if(this.loaded!==U&&(this.loaded=U,U)){for(var X=0,fe=this.requestors;X<fe.length;X+=1){var ye=fe[X];this._notify(ye.ids,ye.callback)}this.requestors=[]}},z.prototype.getImage=function(U){return this.images[U]},z.prototype.addImage=function(U,X){this._validate(U,X)&&(this.images[U]=X)},z.prototype._validate=function(U,X){var fe=!0;return this._validateStretch(X.stretchX,X.data&&X.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(X.stretchY,X.data&&X.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(X.content,X)||(this.fire(new e.ErrorEvent(new Error('Image "'+U+'" has invalid "content" value'))),fe=!1),fe},z.prototype._validateStretch=function(U,X){if(!U)return!0;for(var fe=0,ye=0,we=U;ye<we.length;ye+=1){var ke=we[ye];if(ke[0]<fe||ke[1]<ke[0]||X<ke[1])return!1;fe=ke[1]}return!0},z.prototype._validateContent=function(U,X){return!(U&&(4!==U.length||U[0]<0||X.data.width<U[0]||U[1]<0||X.data.height<U[1]||U[2]<0||X.data.width<U[2]||U[3]<0||X.data.height<U[3]||U[2]<U[0]||U[3]<U[1]))},z.prototype.updateImage=function(U,X){X.version=this.images[U].version+1,this.images[U]=X,this.updatedImages[U]=!0},z.prototype.removeImage=function(U){var X=this.images[U];delete this.images[U],delete this.patterns[U],X.userImage&&X.userImage.onRemove&&X.userImage.onRemove()},z.prototype.listImages=function(){return Object.keys(this.images)},z.prototype.getImages=function(U,X){var fe=!0;if(!this.isLoaded())for(var ye=0,we=U;ye<we.length;ye+=1)this.images[we[ye]]||(fe=!1);this.isLoaded()||fe?this._notify(U,X):this.requestors.push({ids:U,callback:X})},z.prototype._notify=function(U,X){for(var fe={},ye=0,we=U;ye<we.length;ye+=1){var ke=we[ye];this.images[ke]||this.fire(new e.Event("styleimagemissing",{id:ke}));var Pe=this.images[ke];Pe?fe[ke]={data:Pe.data.clone(),pixelRatio:Pe.pixelRatio,sdf:Pe.sdf,version:Pe.version,stretchX:Pe.stretchX,stretchY:Pe.stretchY,content:Pe.content,hasRenderCallback:Boolean(Pe.userImage&&Pe.userImage.render)}:e.warnOnce('Image "'+ke+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}X(null,fe)},z.prototype.getPixelSize=function(){var U=this.atlasImage;return{width:U.width,height:U.height}},z.prototype.getPattern=function(U){var X=this.patterns[U],fe=this.getImage(U);if(!fe)return null;if(X&&X.position.version===fe.version)return X.position;if(X)X.position.version=fe.version;else{var ye={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},we=new e.ImagePosition(ye,fe);this.patterns[U]={bin:ye,position:we}}return this._updatePatternAtlas(),this.patterns[U].position},z.prototype.bind=function(U){var X=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(U,this.atlasImage,X.RGBA),this.atlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE)},z.prototype._updatePatternAtlas=function(){var U=[];for(var X in this.patterns)U.push(this.patterns[X].bin);var fe=e.potpack(U),ye=fe.w,we=fe.h,ke=this.atlasImage;for(var Pe in ke.resize({width:ye||1,height:we||1}),this.patterns){var Ze=this.patterns[Pe].bin,nt=Ze.x+1,ht=Ze.y+1,St=this.images[Pe].data,jt=St.width,Lt=St.height;e.RGBAImage.copy(St,ke,{x:0,y:0},{x:nt,y:ht},{width:jt,height:Lt}),e.RGBAImage.copy(St,ke,{x:0,y:Lt-1},{x:nt,y:ht-1},{width:jt,height:1}),e.RGBAImage.copy(St,ke,{x:0,y:0},{x:nt,y:ht+Lt},{width:jt,height:1}),e.RGBAImage.copy(St,ke,{x:jt-1,y:0},{x:nt-1,y:ht},{width:1,height:Lt}),e.RGBAImage.copy(St,ke,{x:0,y:0},{x:nt+jt,y:ht},{width:1,height:Lt})}this.dirty=!0},z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},z.prototype.dispatchRenderCallbacks=function(U){for(var X=0,fe=U;X<fe.length;X+=1){var ye=fe[X];if(!this.callbackDispatchedThisFrame[ye]){this.callbackDispatchedThisFrame[ye]=!0;var we=this.images[ye];g(we)&&this.updateImage(ye,we)}}},z}(e.Evented),u=A,w=A,f=1e20;function A(O,z,U,X,fe,ye){this.fontSize=O||24,this.buffer=void 0===z?3:z,this.cutoff=X||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=ye||"normal",this.radius=U||8;var we=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=we,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(we*we),this.gridInner=new Float64Array(we*we),this.f=new Float64Array(we),this.d=new Float64Array(we),this.z=new Float64Array(we+1),this.v=new Int16Array(we),this.middle=Math.round(we/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(O,z,U,X,fe,ye,we){for(var ke=0;ke<z;ke++){for(var Pe=0;Pe<U;Pe++)X[Pe]=O[Pe*z+ke];for(k(X,fe,ye,we,U),Pe=0;Pe<U;Pe++)O[Pe*z+ke]=fe[Pe]}for(Pe=0;Pe<U;Pe++){for(ke=0;ke<z;ke++)X[ke]=O[Pe*z+ke];for(k(X,fe,ye,we,z),ke=0;ke<z;ke++)O[Pe*z+ke]=Math.sqrt(fe[ke])}}function k(O,z,U,X,fe){U[0]=0,X[0]=-f,X[1]=+f;for(var ye=1,we=0;ye<fe;ye++){for(var ke=(O[ye]+ye*ye-(O[U[we]]+U[we]*U[we]))/(2*ye-2*U[we]);ke<=X[we];)we--,ke=(O[ye]+ye*ye-(O[U[we]]+U[we]*U[we]))/(2*ye-2*U[we]);U[++we]=ye,X[we]=ke,X[we+1]=+f}for(ye=0,we=0;ye<fe;ye++){for(;X[we+1]<ye;)we++;z[ye]=(ye-U[we])*(ye-U[we])+O[U[we]]}}A.prototype.draw=function(O){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(O,this.buffer,this.middle);for(var z=this.ctx.getImageData(0,0,this.size,this.size),U=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*this.size;X++){var fe=z.data[4*X+3]/255;this.gridOuter[X]=1===fe?0:0===fe?f:Math.pow(Math.max(0,.5-fe),2),this.gridInner[X]=1===fe?f:0===fe?0:Math.pow(Math.max(0,fe-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),X=0;X<this.size*this.size;X++)U[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return U},u.default=w;var E=function(O,z){this.requestManager=O,this.localIdeographFontFamily=z,this.entries={}};E.prototype.setURL=function(O){this.url=O},E.prototype.getGlyphs=function(O,z){var U=this,X=[];for(var fe in O)for(var ye=0,we=O[fe];ye<we.length;ye+=1)X.push({stack:fe,id:we[ye]});e.asyncAll(X,function(Pe,Ze){var nt=Pe.stack,ht=Pe.id,St=U.entries[nt];St||(St=U.entries[nt]={glyphs:{},requests:{},ranges:{}});var jt=St.glyphs[ht];if(void 0===jt){if(jt=U._tinySDF(St,nt,ht))return St.glyphs[ht]=jt,void Ze(null,{stack:nt,id:ht,glyph:jt});var Lt=Math.floor(ht/256);if(256*Lt>65535)Ze(new Error("glyphs > 65535 not supported"));else if(St.ranges[Lt])Ze(null,{stack:nt,id:ht,glyph:jt});else{var Ft=St.requests[Lt];Ft||(Ft=St.requests[Lt]=[],E.loadGlyphRange(nt,Lt,U.url,U.requestManager,function(kt,Xt){if(Xt){for(var Gt in Xt)U._doesCharSupportLocalGlyph(+Gt)||(St.glyphs[+Gt]=Xt[+Gt]);St.ranges[Lt]=!0}for(var Qt=0,gn=Ft;Qt<gn.length;Qt+=1)(0,gn[Qt])(kt,Xt);delete St.requests[Lt]})),Ft.push(function(kt,Xt){kt?Ze(kt):Xt&&Ze(null,{stack:nt,id:ht,glyph:Xt[ht]||null})})}}else Ze(null,{stack:nt,id:ht,glyph:jt})},function(Pe,Ze){if(Pe)z(Pe);else if(Ze){for(var nt={},ht=0,St=Ze;ht<St.length;ht+=1){var jt=St[ht],Lt=jt.stack,Ft=jt.id,kt=jt.glyph;(nt[Lt]||(nt[Lt]={}))[Ft]=kt&&{id:kt.id,bitmap:kt.bitmap.clone(),metrics:kt.metrics}}z(null,nt)}})},E.prototype._doesCharSupportLocalGlyph=function(O){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](O)||e.isChar["Hangul Syllables"](O)||e.isChar.Hiragana(O)||e.isChar.Katakana(O))},E.prototype._tinySDF=function(O,z,U){var X=this.localIdeographFontFamily;if(X&&this._doesCharSupportLocalGlyph(U)){var fe=O.tinySDF;if(!fe){var ye="400";/bold/i.test(z)?ye="900":/medium/i.test(z)?ye="500":/light/i.test(z)&&(ye="200"),fe=O.tinySDF=new E.TinySDF(24,3,8,.25,X,ye)}return{id:U,bitmap:new e.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(U))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=function(O,z,U,X,fe){var ye=256*z,we=ye+255,ke=X.transformRequest(X.normalizeGlyphsURL(U).replace("{fontstack}",O).replace("{range}",ye+"-"+we),e.ResourceType.Glyphs);e.getArrayBuffer(ke,function(Pe,Ze){if(Pe)fe(Pe);else if(Ze){for(var nt={},ht=0,St=e.parseGlyphPBF(Ze);ht<St.length;ht+=1){var jt=St[ht];nt[jt.id]=jt}fe(null,nt)}})},E.TinySDF=u;var P=function(){this.specification=e.styleSpec.light.position};P.prototype.possiblyEvaluate=function(O,z){return e.sphericalToCartesian(O.expression.evaluate(z))},P.prototype.interpolate=function(O,z,U){return{x:e.number(O.x,z.x,U),y:e.number(O.y,z.y,U),z:e.number(O.z,z.z,U)}};var D=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new P,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F=function(O){function z(U){O.call(this),this._transitionable=new e.Transitionable(D),this.setLight(U),this._transitioning=this._transitionable.untransitioned()}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getLight=function(){return this._transitionable.serialize()},z.prototype.setLight=function(U,X){if(void 0===X&&(X={}),!this._validate(e.validateLight,U,X))for(var fe in U){var ye=U[fe];e.endsWith(fe,"-transition")?this._transitionable.setTransition(fe.slice(0,-11),ye):this._transitionable.setValue(fe,ye)}},z.prototype.updateTransitions=function(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)},z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},z.prototype.recalculate=function(U){this.properties=this._transitioning.possiblyEvaluate(U)},z.prototype._validate=function(U,X,fe){return(!fe||!1!==fe.validate)&&e.emitValidationErrors(this,U.call(e.validateStyle,e.extend({value:X,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},z}(e.Evented),R=function(O,z){this.width=O,this.height=z,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};R.prototype.getDash=function(O,z){var U=O.join(",")+String(z);return this.dashEntry[U]||(this.dashEntry[U]=this.addDash(O,z)),this.dashEntry[U]},R.prototype.getDashRanges=function(O,z,U){var X=[],fe=O.length%2==1?-O[O.length-1]*U:0,ye=O[0]*U,we=!0;X.push({left:fe,right:ye,isDash:we,zeroLength:0===O[0]});for(var ke=O[0],Pe=1;Pe<O.length;Pe++){var Ze=O[Pe];fe=ke*U,ye=(ke+=Ze)*U,X.push({left:fe,right:ye,isDash:we=!we,zeroLength:0===Ze})}return X},R.prototype.addRoundDash=function(O,z,U){for(var X=z/2,fe=-U;fe<=U;fe++)for(var we=this.width*(this.nextRow+U+fe),ke=0,Pe=O[ke],Ze=0;Ze<this.width;Ze++){Ze/Pe.right>1&&(Pe=O[++ke]);var nt=Math.abs(Ze-Pe.left),ht=Math.abs(Ze-Pe.right),St=Math.min(nt,ht),jt=void 0,Lt=fe/U*(X+1);if(Pe.isDash){var Ft=X-Math.abs(Lt);jt=Math.sqrt(St*St+Ft*Ft)}else jt=X-Math.sqrt(St*St+Lt*Lt);this.data[we+Ze]=Math.max(0,Math.min(255,jt+128))}},R.prototype.addRegularDash=function(O){for(var z=O.length-1;z>=0;--z){var U=O[z],X=O[z+1];U.zeroLength?O.splice(z,1):X&&X.isDash===U.isDash&&(X.left=U.left,O.splice(z,1))}var fe=O[0],ye=O[O.length-1];fe.isDash===ye.isDash&&(fe.left=ye.left-this.width,ye.right=fe.right+this.width);for(var we=this.width*this.nextRow,ke=0,Pe=O[ke],Ze=0;Ze<this.width;Ze++){Ze/Pe.right>1&&(Pe=O[++ke]);var nt=Math.abs(Ze-Pe.left),ht=Math.abs(Ze-Pe.right),St=Math.min(nt,ht);this.data[we+Ze]=Math.max(0,Math.min(255,(Pe.isDash?St:-St)+128))}},R.prototype.addDash=function(O,z){var U=z?7:0,X=2*U+1;if(this.nextRow+X>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var fe=0,ye=0;ye<O.length;ye++)fe+=O[ye];if(0!==fe){var we=this.width/fe,ke=this.getDashRanges(O,this.width,we);z?this.addRoundDash(ke,we,U):this.addRegularDash(ke)}var Pe={y:(this.nextRow+U+.5)/this.height,height:2*U/this.height,width:fe};return this.nextRow+=X,this.dirty=!0,Pe},R.prototype.bind=function(O){var z=O.gl;this.texture?(z.bindTexture(z.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,z.texSubImage2D(z.TEXTURE_2D,0,0,0,this.width,this.height,z.ALPHA,z.UNSIGNED_BYTE,this.data))):(this.texture=z.createTexture(),z.bindTexture(z.TEXTURE_2D,this.texture),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),z.texImage2D(z.TEXTURE_2D,0,z.ALPHA,this.width,this.height,0,z.ALPHA,z.UNSIGNED_BYTE,this.data))};var L=function O(z,U){this.workerPool=z,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var X=this.workerPool.acquire(this.id),fe=0;fe<X.length;fe++){var we=new O.Actor(X[fe],U,this.id);we.name="Worker "+fe,this.actors.push(we)}};function I(O,z,U){var X=function(fe,ye){if(fe)return U(fe);if(ye){var we=e.pick(e.extend(ye,O),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ye.vector_layers&&(we.vectorLayers=ye.vector_layers,we.vectorLayerIds=we.vectorLayers.map(function(ke){return ke.id})),we.tiles=z.canonicalizeTileset(we,O.url),U(null,we)}};return O.url?e.getJSON(z.transformRequest(z.normalizeSourceURL(O.url),e.ResourceType.Source),X):e.browser.frame(function(){return X(null,O)})}L.prototype.broadcast=function(O,z,U){e.asyncAll(this.actors,function(X,fe){X.send(O,z,fe)},U=U||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(O){O.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=e.Actor;var B=function(O,z,U){this.bounds=e.LngLatBounds.convert(this.validateBounds(O)),this.minzoom=z||0,this.maxzoom=U||24};B.prototype.validateBounds=function(O){return Array.isArray(O)&&4===O.length?[Math.max(-180,O[0]),Math.max(-90,O[1]),Math.min(180,O[2]),Math.min(90,O[3])]:[-180,-90,180,90]},B.prototype.contains=function(O){var z=Math.pow(2,O.z),U=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*z),X=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*z),fe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*z),ye=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*z);return O.x>=U&&O.x<fe&&O.y>=X&&O.y<ye};var V=function(O){function z(U,X,fe,ye){if(O.call(this),this.id=U,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(X,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},X),this._collectResourceTiming=X.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ye)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.load=function(){var U=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(X,fe){U._tileJSONRequest=null,U._loaded=!0,X?U.fire(new e.ErrorEvent(X)):fe&&(e.extend(U,fe),fe.bounds&&(U.tileBounds=new B(fe.bounds,U.minzoom,U.maxzoom)),e.postTurnstileEvent(fe.tiles,U.map._requestManager._customAccessToken),e.postMapLoadEvent(fe.tiles,U.map._getMapId(),U.map._requestManager._skuToken,U.map._requestManager._customAccessToken),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},z.prototype.onAdd=function(U){this.map=U,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.loadTile=function(U,X){var fe=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme)),ye={request:this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,tileSize:this.tileSize*U.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function we(ke,Pe){return delete U.request,U.aborted?X(null):ke&&404!==ke.status?X(ke):(Pe&&Pe.resourceTiming&&(U.resourceTiming=Pe.resourceTiming),this.map._refreshExpiredTiles&&Pe&&U.setExpiryData(Pe),U.loadVectorData(Pe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),X(null),void(U.reloadCallback&&(this.loadTile(U,U.reloadCallback),U.reloadCallback=null)))}ye.request.collectResourceTiming=this._collectResourceTiming,U.actor&&"expired"!==U.state?"loading"===U.state?U.reloadCallback=X:U.request=U.actor.send("reloadTile",ye,we.bind(this)):(U.actor=this.dispatcher.getActor(),U.request=U.actor.send("loadTile",ye,we.bind(this)))},z.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request),U.actor&&U.actor.send("abortTile",{uid:U.uid,type:this.type,source:this.id},void 0)},z.prototype.unloadTile=function(U){U.unloadVectorData(),U.actor&&U.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id},void 0)},z.prototype.hasTransition=function(){return!1},z}(e.Evented),Z=function(O){function z(U,X,fe,ye){O.call(this),this.id=U,this.dispatcher=fe,this.setEventedParent(ye),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},X),e.extend(this,e.pick(X,["url","scheme","tileSize"]))}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.load=function(){var U=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(X,fe){U._tileJSONRequest=null,U._loaded=!0,X?U.fire(new e.ErrorEvent(X)):fe&&(e.extend(U,fe),fe.bounds&&(U.tileBounds=new B(fe.bounds,U.minzoom,U.maxzoom)),e.postTurnstileEvent(fe.tiles),e.postMapLoadEvent(fe.tiles,U.map._getMapId(),U.map._requestManager._skuToken),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.onAdd=function(U){this.map=U,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},z.prototype.loadTile=function(U,X){var fe=this,ye=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=e.getImage(this.map._requestManager.transformRequest(ye,e.ResourceType.Tile),function(we,ke){if(delete U.request,U.aborted)U.state="unloaded",X(null);else if(we)U.state="errored",X(we);else if(ke){fe.map._refreshExpiredTiles&&U.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Pe=fe.map.painter.context,Ze=Pe.gl;U.texture=fe.map.painter.getTileTexture(ke.width),U.texture?U.texture.update(ke,{useMipmap:!0}):(U.texture=new e.Texture(Pe,ke,Ze.RGBA,{useMipmap:!0}),U.texture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE,Ze.LINEAR_MIPMAP_NEAREST),Pe.extTextureFilterAnisotropic&&Ze.texParameterf(Ze.TEXTURE_2D,Pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Pe.extTextureFilterAnisotropicMax)),U.state="loaded",e.cacheEntryPossiblyAdded(fe.dispatcher),X(null)}})},z.prototype.abortTile=function(U,X){U.request&&(U.request.cancel(),delete U.request),X()},z.prototype.unloadTile=function(U,X){U.texture&&this.map.painter.saveTileTexture(U.texture),X()},z.prototype.hasTransition=function(){return!1},z}(e.Evented),Y=function(O){function z(U,X,fe,ye){O.call(this,U,X,fe,ye),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},X),this.encoding=X.encoding||"mapbox"}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},z.prototype.loadTile=function(U,X){var fe=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ye(we,ke){we&&(U.state="errored",X(we)),ke&&(U.dem=ke,U.needsHillshadePrepare=!0,U.state="loaded",X(null))}U.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(we,ke){if(delete U.request,U.aborted)U.state="unloaded",X(null);else if(we)U.state="errored",X(we);else if(ke){this.map._refreshExpiredTiles&&U.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Pe=e.window.ImageBitmap&&ke instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?ke:e.browser.getImageData(ke,1),Ze={uid:U.uid,coord:U.tileID,source:this.id,rawImageData:Pe,encoding:this.encoding};U.actor&&"expired"!==U.state||(U.actor=this.dispatcher.getActor(),U.actor.send("loadDEMTile",Ze,ye.bind(this)))}}.bind(this)),U.neighboringTiles=this._getNeighboringTiles(U.tileID)},z.prototype._getNeighboringTiles=function(U){var X=U.canonical,fe=Math.pow(2,X.z),ye=(X.x-1+fe)%fe,we=0===X.x?U.wrap-1:U.wrap,ke=(X.x+1+fe)%fe,Pe=X.x+1===fe?U.wrap+1:U.wrap,Ze={};return Ze[new e.OverscaledTileID(U.overscaledZ,we,X.z,ye,X.y).key]={backfilled:!1},Ze[new e.OverscaledTileID(U.overscaledZ,Pe,X.z,ke,X.y).key]={backfilled:!1},X.y>0&&(Ze[new e.OverscaledTileID(U.overscaledZ,we,X.z,ye,X.y-1).key]={backfilled:!1},Ze[new e.OverscaledTileID(U.overscaledZ,U.wrap,X.z,X.x,X.y-1).key]={backfilled:!1},Ze[new e.OverscaledTileID(U.overscaledZ,Pe,X.z,ke,X.y-1).key]={backfilled:!1}),X.y+1<fe&&(Ze[new e.OverscaledTileID(U.overscaledZ,we,X.z,ye,X.y+1).key]={backfilled:!1},Ze[new e.OverscaledTileID(U.overscaledZ,U.wrap,X.z,X.x,X.y+1).key]={backfilled:!1},Ze[new e.OverscaledTileID(U.overscaledZ,Pe,X.z,ke,X.y+1).key]={backfilled:!1}),Ze},z.prototype.unloadTile=function(U){U.demTexture&&this.map.painter.saveTileTexture(U.demTexture),U.fbo&&(U.fbo.destroy(),delete U.fbo),U.dem&&delete U.dem,delete U.neighboringTiles,U.state="unloaded",U.actor&&U.actor.send("removeDEMTile",{uid:U.uid,source:this.id})},z}(Z),Q=function(O){function z(U,X,fe,ye){O.call(this),this.id=U,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(ye),this._data=X.data,this._options=e.extend({},X),this._collectResourceTiming=X.collectResourceTiming,this._resourceTiming=[],void 0!==X.maxzoom&&(this.maxzoom=X.maxzoom),X.type&&(this.type=X.type),X.attribution&&(this.attribution=X.attribution),this.promoteId=X.promoteId;var we=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:X.cluster||!1,geojsonVtOptions:{buffer:(void 0!==X.buffer?X.buffer:128)*we,tolerance:(void 0!==X.tolerance?X.tolerance:.375)*we,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:X.lineMetrics||!1,generateId:X.generateId||!1},superclusterOptions:{maxZoom:void 0!==X.clusterMaxZoom?Math.min(X.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(X.clusterRadius||50)*we,log:!1,generateId:X.generateId||!1},clusterProperties:X.clusterProperties},X.workerOptions)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.load=function(){var U=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(X){if(X)U.fire(new e.ErrorEvent(X));else{var fe={dataType:"source",sourceDataType:"metadata"};U._collectResourceTiming&&U._resourceTiming&&U._resourceTiming.length>0&&(fe.resourceTiming=U._resourceTiming,U._resourceTiming=[]),U.fire(new e.Event("data",fe))}})},z.prototype.onAdd=function(U){this.map=U,this.load()},z.prototype.setData=function(U){var X=this;return this._data=U,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)X.fire(new e.ErrorEvent(fe));else{var ye={dataType:"source",sourceDataType:"content"};X._collectResourceTiming&&X._resourceTiming&&X._resourceTiming.length>0&&(ye.resourceTiming=X._resourceTiming,X._resourceTiming=[]),X.fire(new e.Event("data",ye))}}),this},z.prototype.getClusterExpansionZoom=function(U,X){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:U,source:this.id},X),this},z.prototype.getClusterChildren=function(U,X){return this.actor.send("geojson.getClusterChildren",{clusterId:U,source:this.id},X),this},z.prototype.getClusterLeaves=function(U,X,fe,ye){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:U,limit:X,offset:fe},ye),this},z.prototype._updateWorkerData=function(U){var X=this;this._loaded=!1;var fe=e.extend({},this.workerOptions),ye=this._data;"string"==typeof ye?(fe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ye),e.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(ye),this.actor.send(this.type+".loadData",fe,function(we,ke){X._removed||ke&&ke.abandoned||(X._loaded=!0,ke&&ke.resourceTiming&&ke.resourceTiming[X.id]&&(X._resourceTiming=ke.resourceTiming[X.id].slice(0)),X.actor.send(X.type+".coalesce",{source:fe.source},null),U(we))})},z.prototype.loaded=function(){return this._loaded},z.prototype.loadTile=function(U,X){var fe=this,ye=U.actor?"reloadTile":"loadTile";U.actor=this.actor,U.request=this.actor.send(ye,{type:this.type,uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ke,Pe){return delete U.request,U.unloadVectorData(),U.aborted?X(null):ke?X(ke):(U.loadVectorData(Pe,fe.map.painter,"reloadTile"===ye),X(null))})},z.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request),U.aborted=!0},z.prototype.unloadTile=function(U){U.unloadVectorData(),this.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id})},z.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},z.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},z.prototype.hasTransition=function(){return!1},z}(e.Evented),re=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),$=function(O){function z(U,X,fe,ye){O.call(this),this.id=U,this.dispatcher=fe,this.coordinates=X.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ye),this.options=X}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.load=function(U,X){var fe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ye,we){fe._loaded=!0,ye?fe.fire(new e.ErrorEvent(ye)):we&&(fe.image=we,U&&(fe.coordinates=U),X&&X(),fe._finishLoading())})},z.prototype.loaded=function(){return this._loaded},z.prototype.updateImage=function(U){var X=this;return this.image&&U.url?(this.options.url=U.url,this.load(U.coordinates,function(){X.texture=null}),this):this},z.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},z.prototype.onAdd=function(U){this.map=U,this.load()},z.prototype.setCoordinates=function(U){var X=this;this.coordinates=U;var fe=U.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(we){for(var ke=1/0,Pe=1/0,Ze=-1/0,nt=-1/0,ht=0,St=we;ht<St.length;ht+=1){var jt=St[ht];ke=Math.min(ke,jt.x),Pe=Math.min(Pe,jt.y),Ze=Math.max(Ze,jt.x),nt=Math.max(nt,jt.y)}var kt=Math.max(Ze-ke,nt-Pe),Xt=Math.max(0,Math.floor(-Math.log(kt)/Math.LN2)),Gt=Math.pow(2,Xt);return new e.CanonicalTileID(Xt,Math.floor((ke+Ze)/2*Gt),Math.floor((Pe+nt)/2*Gt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var ye=fe.map(function(we){return X.tileID.getTilePoint(we)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ye[0].x,ye[0].y,0,0),this._boundsArray.emplaceBack(ye[1].x,ye[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ye[3].x,ye[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ye[2].x,ye[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},z.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var U=this.map.painter.context,X=U.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,re.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(U,this.image,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var ye=this.tiles[fe];"loaded"!==ye.state&&(ye.state="loaded",ye.texture=this.texture)}}},z.prototype.loadTile=function(U,X){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},X(null)):(U.state="errored",X(null))},z.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return!1},z}(e.Evented),J=function(O){function z(U,X,fe,ye){O.call(this,U,X,fe,ye),this.roundZoom=!0,this.type="video",this.options=X}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.load=function(){var U=this;this._loaded=!1;var X=this.options;this.urls=[];for(var fe=0,ye=X.urls;fe<ye.length;fe+=1)this.urls.push(this.map._requestManager.transformRequest(ye[fe],e.ResourceType.Source).url);e.getVideo(this.urls,function(ke,Pe){U._loaded=!0,ke?U.fire(new e.ErrorEvent(ke)):Pe&&(U.video=Pe,U.video.loop=!0,U.video.addEventListener("playing",function(){U.map.triggerRepaint()}),U.map&&U.video.play(),U._finishLoading())})},z.prototype.pause=function(){this.video&&this.video.pause()},z.prototype.play=function(){this.video&&this.video.play()},z.prototype.seek=function(U){if(this.video){var X=this.video.seekable;U<X.start(0)||U>X.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+X.start(0)+" and "+X.end(0)+"-second mark."))):this.video.currentTime=U}},z.prototype.getVideo=function(){return this.video},z.prototype.onAdd=function(U){this.map||(this.map=U,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},z.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var U=this.map.painter.context,X=U.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,re.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE),X.texSubImage2D(X.TEXTURE_2D,0,0,0,X.RGBA,X.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(U,this.video,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var ye=this.tiles[fe];"loaded"!==ye.state&&(ye.state="loaded",ye.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this.video&&!this.video.paused},z}($),ie=function(O){function z(U,X,fe,ye){O.call(this,U,X,fe,ye),X.coordinates?Array.isArray(X.coordinates)&&4===X.coordinates.length&&!X.coordinates.some(function(we){return!Array.isArray(we)||2!==we.length||we.some(function(ke){return"number"!=typeof ke})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'missing required property "coordinates"'))),X.animate&&"boolean"!=typeof X.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'optional "animate" property must be a boolean value'))),X.canvas?"string"==typeof X.canvas||X.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+U,null,'missing required property "canvas"'))),this.options=X,this.animate=void 0===X.animate||X.animate}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},z.prototype.getCanvas=function(){return this.canvas},z.prototype.onAdd=function(U){this.map=U,this.load(),this.canvas&&this.animate&&this.play()},z.prototype.onRemove=function(){this.pause()},z.prototype.prepare=function(){var U=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,U=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,U=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var X=this.map.painter.context,fe=X.gl;for(var ye in this.boundsBuffer||(this.boundsBuffer=X.createVertexBuffer(this._boundsArray,re.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(U||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(X,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var we=this.tiles[ye];"loaded"!==we.state&&(we.state="loaded",we.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this._playing},z.prototype._hasInvalidDimensions=function(){for(var U=0,X=[this.canvas.width,this.canvas.height];U<X.length;U+=1){var fe=X[U];if(isNaN(fe)||fe<=0)return!0}return!1},z}($),j={vector:V,raster:Z,"raster-dem":Y,geojson:Q,video:J,image:$,canvas:ie};function q(O,z){var U=e.identity([]);return e.translate(U,U,[1,1,0]),e.scale(U,U,[.5*O.width,.5*O.height,1]),e.multiply(U,U,O.calculatePosMatrix(z.toUnwrapped()))}function W(O,z,U,X,fe,ye){var we=function(Ft,kt,Xt){if(Ft)for(var Gt=0,Qt=Ft;Gt<Qt.length;Gt+=1){var gn=kt[Qt[Gt]];if(gn&&gn.source===Xt&&"fill-extrusion"===gn.type)return!0}else for(var kn in kt){var jn=kt[kn];if(jn.source===Xt&&"fill-extrusion"===jn.type)return!0}return!1}(fe&&fe.layers,z,O.id),ke=ye.maxPitchScaleFactor(),Pe=O.tilesIn(X,ke,we);Pe.sort(ae);for(var Ze=[],nt=0,ht=Pe;nt<ht.length;nt+=1){var St=ht[nt];Ze.push({wrappedTileID:St.tileID.wrapped().key,queryResults:St.tile.queryRenderedFeatures(z,U,O._state,St.queryGeometry,St.cameraQueryGeometry,St.scale,fe,ye,ke,q(O.transform,St.tileID))})}var jt=function(Ft){for(var kt={},Xt={},Gt=0,Qt=Ft;Gt<Qt.length;Gt+=1){var gn=Qt[Gt],kn=gn.queryResults,jn=gn.wrappedTileID,Nn=Xt[jn]=Xt[jn]||{};for(var mr in kn)for(var gr=kn[mr],Dr=Nn[mr]=Nn[mr]||{},Cr=kt[mr]=kt[mr]||[],fi=0,bi=gr;fi<bi.length;fi+=1){var Oi=bi[fi];Dr[Oi.featureIndex]||(Dr[Oi.featureIndex]=!0,Cr.push(Oi))}}return kt}(Ze);for(var Lt in jt)jt[Lt].forEach(function(Ft){var kt=Ft.feature,Xt=O.getFeatureState(kt.layer["source-layer"],kt.id);kt.source=kt.layer.source,kt.layer["source-layer"]&&(kt.sourceLayer=kt.layer["source-layer"]),kt.state=Xt});return jt}function ae(O,z){var U=O.tileID,X=z.tileID;return U.overscaledZ-X.overscaledZ||U.canonical.y-X.canonical.y||U.wrap-X.wrap||U.canonical.x-X.canonical.x}var G=function(O,z){this.max=O,this.onRemove=z,this.reset()};G.prototype.reset=function(){for(var O in this.data)for(var z=0,U=this.data[O];z<U.length;z+=1){var X=U[z];X.timeout&&clearTimeout(X.timeout),this.onRemove(X.value)}return this.data={},this.order=[],this},G.prototype.add=function(O,z,U){var X=this,fe=O.wrapped().key;void 0===this.data[fe]&&(this.data[fe]=[]);var ye={value:z,timeout:void 0};if(void 0!==U&&(ye.timeout=setTimeout(function(){X.remove(O,ye)},U)),this.data[fe].push(ye),this.order.push(fe),this.order.length>this.max){var we=this._getAndRemoveByKey(this.order[0]);we&&this.onRemove(we)}return this},G.prototype.has=function(O){return O.wrapped().key in this.data},G.prototype.getAndRemove=function(O){return this.has(O)?this._getAndRemoveByKey(O.wrapped().key):null},G.prototype._getAndRemoveByKey=function(O){var z=this.data[O].shift();return z.timeout&&clearTimeout(z.timeout),0===this.data[O].length&&delete this.data[O],this.order.splice(this.order.indexOf(O),1),z.value},G.prototype.getByKey=function(O){var z=this.data[O];return z?z[0].value:null},G.prototype.get=function(O){return this.has(O)?this.data[O.wrapped().key][0].value:null},G.prototype.remove=function(O,z){if(!this.has(O))return this;var U=O.wrapped().key,X=void 0===z?0:this.data[U].indexOf(z),fe=this.data[U][X];return this.data[U].splice(X,1),fe.timeout&&clearTimeout(fe.timeout),0===this.data[U].length&&delete this.data[U],this.onRemove(fe.value),this.order.splice(this.order.indexOf(U),1),this},G.prototype.setMaxSize=function(O){for(this.max=O;this.order.length>this.max;){var z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this},G.prototype.filter=function(O){var z=[];for(var U in this.data)for(var X=0,fe=this.data[U];X<fe.length;X+=1){var ye=fe[X];O(ye.value)||z.push(ye)}for(var we=0,ke=z;we<ke.length;we+=1){var Pe=ke[we];this.remove(Pe.value.tileID,Pe)}};var ee=function(O,z,U){this.context=O;var X=O.gl;this.buffer=X.createBuffer(),this.dynamicDraw=Boolean(U),this.context.unbindVAO(),O.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};ee.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ee.prototype.updateData=function(O){var z=this.context.gl;this.context.unbindVAO(),this.bind(),z.bufferSubData(z.ELEMENT_ARRAY_BUFFER,0,O.arrayBuffer)},ee.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},le=function(O,z,U,X){this.length=z.length,this.attributes=U,this.itemSize=z.bytesPerElement,this.dynamicDraw=X,this.context=O;var fe=O.gl;this.buffer=fe.createBuffer(),O.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};le.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},le.prototype.updateData=function(O){var z=this.context.gl;this.bind(),z.bufferSubData(z.ARRAY_BUFFER,0,O.arrayBuffer)},le.prototype.enableAttributes=function(O,z){for(var U=0;U<this.attributes.length;U++){var fe=z.attributes[this.attributes[U].name];void 0!==fe&&O.enableVertexAttribArray(fe)}},le.prototype.setVertexAttribPointers=function(O,z,U){for(var X=0;X<this.attributes.length;X++){var fe=this.attributes[X],ye=z.attributes[fe.name];void 0!==ye&&O.vertexAttribPointer(ye,fe.components,O[te[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(U||0))}},le.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ue=function(O){this.gl=O.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(O){},ue.prototype.getDefault=function(){return this.default},ue.prototype.setDefault=function(){this.set(this.default)};var de=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(U){var X=this.current;(U.r!==X.r||U.g!==X.g||U.b!==X.b||U.a!==X.a||this.dirty)&&(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},z}(ue),he=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return 1},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.clearDepth(U),this.current=U,this.dirty=!1)},z}(ue),be=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return 0},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.clearStencil(U),this.current=U,this.dirty=!1)},z}(ue),me=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return[!0,!0,!0,!0]},z.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||U[2]!==X[2]||U[3]!==X[3]||this.dirty)&&(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},z}(ue),_e=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!0},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.depthMask(U),this.current=U,this.dirty=!1)},z}(ue),Ee=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return 255},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.stencilMask(U),this.current=U,this.dirty=!1)},z}(ue),De=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},z.prototype.set=function(U){var X=this.current;(U.func!==X.func||U.ref!==X.ref||U.mask!==X.mask||this.dirty)&&(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)},z}(ue),Se=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){var U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]},z.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||U[2]!==X[2]||this.dirty)&&(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)},z}(ue),Fe=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.STENCIL_TEST):X.disable(X.STENCIL_TEST),this.current=U,this.dirty=!1}},z}(ue),ve=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return[0,1]},z.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||this.dirty)&&(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)},z}(ue),Te=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.DEPTH_TEST):X.disable(X.DEPTH_TEST),this.current=U,this.dirty=!1}},z}(ue),Ie=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.LESS},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.depthFunc(U),this.current=U,this.dirty=!1)},z}(ue),Ce=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.BLEND):X.disable(X.BLEND),this.current=U,this.dirty=!1}},z}(ue),Re=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){var U=this.gl;return[U.ONE,U.ZERO]},z.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||this.dirty)&&(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)},z}(ue),Ue=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(U){var X=this.current;(U.r!==X.r||U.g!==X.g||U.b!==X.b||U.a!==X.a||this.dirty)&&(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},z}(ue),qe=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.FUNC_ADD},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.blendEquation(U),this.current=U,this.dirty=!1)},z}(ue),Xe=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;U?X.enable(X.CULL_FACE):X.disable(X.CULL_FACE),this.current=U,this.dirty=!1}},z}(ue),st=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.BACK},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.cullFace(U),this.current=U,this.dirty=!1)},z}(ue),He=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.CCW},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.frontFace(U),this.current=U,this.dirty=!1)},z}(ue),$e=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.useProgram(U),this.current=U,this.dirty=!1)},z}(ue),et=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.TEXTURE0},z.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.activeTexture(U),this.current=U,this.dirty=!1)},z}(ue),tt=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){var U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]},z.prototype.set=function(U){var X=this.current;(U[0]!==X[0]||U[1]!==X[1]||U[2]!==X[2]||U[3]!==X[3]||this.dirty)&&(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},z}(ue),ct=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,U),this.current=U,this.dirty=!1}},z}(ue),bt=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindRenderbuffer(X.RENDERBUFFER,U),this.current=U,this.dirty=!1}},z}(ue),At=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindTexture(X.TEXTURE_2D,U),this.current=U,this.dirty=!1}},z}(ue),Ut=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.bindBuffer(X.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}},z}(ue),Ct=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){var X=this.gl;X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1},z}(ue),dt=function(O){function z(U){O.call(this,U),this.vao=U.extVertexArrayObject}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)},z}(ue),at=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return 4},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}},z}(ue),Nt=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}},z}(ue),rn=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(U){if(U!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}},z}(ue),en=function(O){function z(U,X){O.call(this,U),this.context=U,this.parent=X}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z}(ue),Ge=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.setDirty=function(){this.dirty=!0},z.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}},z}(en),Qe=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,U),this.current=U,this.dirty=!1}},z}(en),Rt=function(O,z,U,X){this.context=O,this.width=z,this.height=U;var ye=this.framebuffer=O.gl.createFramebuffer();this.colorAttachment=new Ge(O,ye),X&&(this.depthAttachment=new Qe(O,ye))};Rt.prototype.destroy=function(){var O=this.context.gl,z=this.colorAttachment.get();if(z&&O.deleteTexture(z),this.depthAttachment){var U=this.depthAttachment.get();U&&O.deleteRenderbuffer(U)}O.deleteFramebuffer(this.framebuffer)};var gt=function(O,z,U){this.func=O,this.mask=z,this.range=U};gt.ReadOnly=!1,gt.ReadWrite=!0,gt.disabled=new gt(519,gt.ReadOnly,[0,1]);var Be=function(O,z,U,X,fe,ye){this.test=O,this.ref=z,this.mask=U,this.fail=X,this.depthFail=fe,this.pass=ye};Be.disabled=new Be({func:519,mask:0},0,0,7680,7680,7680);var Ve=function(O,z,U){this.blendFunction=O,this.blendColor=z,this.mask=U};Ve.disabled=new Ve(Ve.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Ve.unblended=new Ve(Ve.Replace,e.Color.transparent,[!0,!0,!0,!0]),Ve.alphaBlended=new Ve([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Le=function(O,z,U){this.enable=O,this.mode=z,this.frontFace=U};Le.disabled=new Le(!1,1029,2305),Le.backCCW=new Le(!0,1029,2305);var je=function(O){this.gl=O,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new de(this),this.clearDepth=new he(this),this.clearStencil=new be(this),this.colorMask=new me(this),this.depthMask=new _e(this),this.stencilMask=new Ee(this),this.stencilFunc=new De(this),this.stencilOp=new Se(this),this.stencilTest=new Fe(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Ie(this),this.blend=new Ce(this),this.blendFunc=new Re(this),this.blendColor=new Ue(this),this.blendEquation=new qe(this),this.cullFace=new Xe(this),this.cullFaceSide=new st(this),this.frontFace=new He(this),this.program=new $e(this),this.activeTexture=new et(this),this.viewport=new tt(this),this.bindFramebuffer=new ct(this),this.bindRenderbuffer=new bt(this),this.bindTexture=new At(this),this.bindVertexBuffer=new Ut(this),this.bindElementBuffer=new Ct(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dt(this),this.pixelStoreUnpack=new at(this),this.pixelStoreUnpackPremultiplyAlpha=new Nt(this),this.pixelStoreUnpackFlipY=new rn(this),this.extTextureFilterAnisotropic=O.getExtension("EXT_texture_filter_anisotropic")||O.getExtension("MOZ_EXT_texture_filter_anisotropic")||O.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=O.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=O.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(O.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=O.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=O.getExtension("EXT_disjoint_timer_query")};je.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},je.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},je.prototype.createIndexBuffer=function(O,z){return new ee(this,O,z)},je.prototype.createVertexBuffer=function(O,z,U){return new le(this,O,z,U)},je.prototype.createRenderbuffer=function(O,z,U){var X=this.gl,fe=X.createRenderbuffer();return this.bindRenderbuffer.set(fe),X.renderbufferStorage(X.RENDERBUFFER,O,z,U),this.bindRenderbuffer.set(null),fe},je.prototype.createFramebuffer=function(O,z,U){return new Rt(this,O,z,U)},je.prototype.clear=function(O){var z=O.color,U=O.depth,X=this.gl,fe=0;z&&(fe|=X.COLOR_BUFFER_BIT,this.clearColor.set(z),this.colorMask.set([!0,!0,!0,!0])),void 0!==U&&(fe|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(U),this.depthMask.set(!0)),X.clear(fe)},je.prototype.setCullFace=function(O){!1===O.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(O.mode),this.frontFace.set(O.frontFace))},je.prototype.setDepthMode=function(O){O.func!==this.gl.ALWAYS||O.mask?(this.depthTest.set(!0),this.depthFunc.set(O.func),this.depthMask.set(O.mask),this.depthRange.set(O.range)):this.depthTest.set(!1)},je.prototype.setStencilMode=function(O){O.test.func!==this.gl.ALWAYS||O.mask?(this.stencilTest.set(!0),this.stencilMask.set(O.mask),this.stencilOp.set([O.fail,O.depthFail,O.pass]),this.stencilFunc.set({func:O.test.func,ref:O.ref,mask:O.test.mask})):this.stencilTest.set(!1)},je.prototype.setColorMode=function(O){e.deepEqual(O.blendFunction,Ve.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(O.blendFunction),this.blendColor.set(O.blendColor)),this.colorMask.set(O.mask)},je.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ke=function(O){function z(U,X,fe){var ye=this;O.call(this),this.id=U,this.dispatcher=fe,this.on("data",function(we){"source"===we.dataType&&"metadata"===we.sourceDataType&&(ye._sourceLoaded=!0),ye._sourceLoaded&&!ye._paused&&"source"===we.dataType&&"content"===we.sourceDataType&&(ye.reload(),ye.transform&&ye.update(ye.transform))}),this.on("error",function(){ye._sourceErrored=!0}),this._source=function(we,ke,Pe,Ze){var nt=new j[ke.type](we,ke,Pe,Ze);if(nt.id!==we)throw new Error("Expected Source id to be "+we+" instead of "+nt.id);return e.bindAll(["load","abort","unload","serialize","prepare"],nt),nt}(U,X,fe,this),this._tiles={},this._cache=new G(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.onAdd=function(U){this.map=U,this._maxTileCacheSize=U?U._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(U)},z.prototype.onRemove=function(U){this._source&&this._source.onRemove&&this._source.onRemove(U)},z.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var U in this._tiles){var X=this._tiles[U];if("loaded"!==X.state&&"errored"!==X.state)return!1}return!0},z.prototype.getSource=function(){return this._source},z.prototype.pause=function(){this._paused=!0},z.prototype.resume=function(){if(this._paused){var U=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,U&&this.reload(),this.transform&&this.update(this.transform)}},z.prototype._loadTile=function(U,X){return this._source.loadTile(U,X)},z.prototype._unloadTile=function(U){if(this._source.unloadTile)return this._source.unloadTile(U,function(){})},z.prototype._abortTile=function(U){if(this._source.abortTile)return this._source.abortTile(U,function(){})},z.prototype.serialize=function(){return this._source.serialize()},z.prototype.prepare=function(U){for(var X in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[X];fe.upload(U),fe.prepare(this.map.style.imageManager)}},z.prototype.getIds=function(){return e.values(this._tiles).map(function(U){return U.tileID}).sort(ft).map(function(U){return U.key})},z.prototype.getRenderableIds=function(U){var X=this,fe=[];for(var ye in this._tiles)this._isIdRenderable(ye,U)&&fe.push(this._tiles[ye]);return U?fe.sort(function(we,ke){var Pe=we.tileID,Ze=ke.tileID,nt=new e.Point(Pe.canonical.x,Pe.canonical.y)._rotate(X.transform.angle),ht=new e.Point(Ze.canonical.x,Ze.canonical.y)._rotate(X.transform.angle);return Pe.overscaledZ-Ze.overscaledZ||ht.y-nt.y||ht.x-nt.x}).map(function(we){return we.tileID.key}):fe.map(function(we){return we.tileID}).sort(ft).map(function(we){return we.key})},z.prototype.hasRenderableParent=function(U){var X=this.findLoadedParent(U,0);return!!X&&this._isIdRenderable(X.tileID.key)},z.prototype._isIdRenderable=function(U,X){return this._tiles[U]&&this._tiles[U].hasData()&&!this._coveredTiles[U]&&(X||!this._tiles[U].holdingForFade())},z.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var U in this._cache.reset(),this._tiles)"errored"!==this._tiles[U].state&&this._reloadTile(U,"reloading")},z.prototype._reloadTile=function(U,X){var fe=this._tiles[U];fe&&("loading"!==fe.state&&(fe.state=X),this._loadTile(fe,this._tileLoaded.bind(this,fe,U,X)))},z.prototype._tileLoaded=function(U,X,fe,ye){if(ye)return U.state="errored",void(404!==ye.status?this._source.fire(new e.ErrorEvent(ye,{tile:U})):this.update(this.transform));U.timeAdded=e.browser.now(),"expired"===fe&&(U.refreshedUponExpiration=!0),this._setTileReloadTimer(X,U),"raster-dem"===this.getSource().type&&U.dem&&this._backfillDEM(U),this._state.initializeTileState(U,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:U,coord:U.tileID}))},z.prototype._backfillDEM=function(U){for(var X=this.getRenderableIds(),fe=0;fe<X.length;fe++){var ye=X[fe];if(U.neighboringTiles&&U.neighboringTiles[ye]){var we=this.getTileByID(ye);ke(U,we),ke(we,U)}}function ke(Pe,Ze){Pe.needsHillshadePrepare=!0;var nt=Ze.tileID.canonical.x-Pe.tileID.canonical.x,ht=Ze.tileID.canonical.y-Pe.tileID.canonical.y,St=Math.pow(2,Pe.tileID.canonical.z),jt=Ze.tileID.key;0===nt&&0===ht||Math.abs(ht)>1||(Math.abs(nt)>1&&(1===Math.abs(nt+St)?nt+=St:1===Math.abs(nt-St)&&(nt-=St)),Ze.dem&&Pe.dem&&(Pe.dem.backfillBorder(Ze.dem,nt,ht),Pe.neighboringTiles&&Pe.neighboringTiles[jt]&&(Pe.neighboringTiles[jt].backfilled=!0)))}},z.prototype.getTile=function(U){return this.getTileByID(U.key)},z.prototype.getTileByID=function(U){return this._tiles[U]},z.prototype._retainLoadedChildren=function(U,X,fe,ye){for(var we in this._tiles){var ke=this._tiles[we];if(!(ye[we]||!ke.hasData()||ke.tileID.overscaledZ<=X||ke.tileID.overscaledZ>fe)){for(var Pe=ke.tileID;ke&&ke.tileID.overscaledZ>X+1;){var Ze=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);(ke=this._tiles[Ze.key])&&ke.hasData()&&(Pe=Ze)}for(var nt=Pe;nt.overscaledZ>X;)if(U[(nt=nt.scaledTo(nt.overscaledZ-1)).key]){ye[Pe.key]=Pe;break}}}},z.prototype.findLoadedParent=function(U,X){if(U.key in this._loadedParentTiles){var fe=this._loadedParentTiles[U.key];return fe&&fe.tileID.overscaledZ>=X?fe:null}for(var ye=U.overscaledZ-1;ye>=X;ye--){var we=U.scaledTo(ye),ke=this._getLoadedTile(we);if(ke)return ke}},z.prototype._getLoadedTile=function(U){var X=this._tiles[U.key];return X&&X.hasData()?X:this._cache.getByKey(U.wrapped().key)},z.prototype.updateCacheSize=function(U){var X=(Math.ceil(U.width/this._source.tileSize)+1)*(Math.ceil(U.height/this._source.tileSize)+1),fe=Math.floor(5*X),ye="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(ye)},z.prototype.handleWrapJump=function(U){var fe=Math.round((U-(void 0===this._prevLng?U:this._prevLng))/360);if(this._prevLng=U,fe){var ye={};for(var we in this._tiles){var ke=this._tiles[we];ke.tileID=ke.tileID.unwrapTo(ke.tileID.wrap+fe),ye[ke.tileID.key]=ke}for(var Pe in this._tiles=ye,this._timers)clearTimeout(this._timers[Pe]),delete this._timers[Pe];for(var Ze in this._tiles)this._setTileReloadTimer(Ze,this._tiles[Ze])}},z.prototype.update=function(U){var X=this;if(this.transform=U,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(U),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=U.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nn){return new e.OverscaledTileID(Nn.canonical.z,Nn.wrap,Nn.canonical.z,Nn.canonical.x,Nn.canonical.y)}):(fe=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Nn){return X._source.hasTile(Nn)}))):fe=[];var ye=U.coveringZoomLevel(this._source),we=Math.max(ye-z.maxOverzooming,this._source.minzoom),ke=Math.max(ye+z.maxUnderzooming,this._source.minzoom),Pe=this._updateRetainedTiles(fe,ye);if(mt(this._source.type)){for(var Ze={},nt={},ht=0,St=Object.keys(Pe);ht<St.length;ht+=1){var jt=St[ht],Lt=Pe[jt],Ft=this._tiles[jt];if(Ft&&!(Ft.fadeEndTime&&Ft.fadeEndTime<=e.browser.now())){var kt=this.findLoadedParent(Lt,we);kt&&(this._addTile(kt.tileID),Ze[kt.tileID.key]=kt.tileID),nt[jt]=Lt}}for(var Xt in this._retainLoadedChildren(nt,ye,ke,Pe),Ze)Pe[Xt]||(this._coveredTiles[Xt]=!0,Pe[Xt]=Ze[Xt])}for(var Gt in Pe)this._tiles[Gt].clearFadeHold();for(var Qt=0,gn=e.keysDifference(this._tiles,Pe);Qt<gn.length;Qt+=1){var kn=gn[Qt],jn=this._tiles[kn];jn.hasSymbolBuckets&&!jn.holdingForFade()?jn.setHoldDuration(this.map._fadeDuration):jn.hasSymbolBuckets&&!jn.symbolFadeFinished()||this._removeTile(kn)}this._updateLoadedParentTileCache()}},z.prototype.releaseSymbolFadeTiles=function(){for(var U in this._tiles)this._tiles[U].holdingForFade()&&this._removeTile(U)},z.prototype._updateRetainedTiles=function(U,X){for(var fe={},ye={},we=Math.max(X-z.maxOverzooming,this._source.minzoom),ke=Math.max(X+z.maxUnderzooming,this._source.minzoom),Pe={},Ze=0,nt=U;Ze<nt.length;Ze+=1){var ht=nt[Ze],St=this._addTile(ht);fe[ht.key]=ht,St.hasData()||X<this._source.maxzoom&&(Pe[ht.key]=ht)}this._retainLoadedChildren(Pe,X,ke,fe);for(var jt=0,Lt=U;jt<Lt.length;jt+=1){var Ft=Lt[jt],kt=this._tiles[Ft.key];if(!kt.hasData()){if(X+1>this._source.maxzoom){var Xt=Ft.children(this._source.maxzoom)[0],Gt=this.getTile(Xt);if(Gt&&Gt.hasData()){fe[Xt.key]=Xt;continue}}else{var Qt=Ft.children(this._source.maxzoom);if(fe[Qt[0].key]&&fe[Qt[1].key]&&fe[Qt[2].key]&&fe[Qt[3].key])continue}for(var gn=kt.wasRequested(),kn=Ft.overscaledZ-1;kn>=we;--kn){var jn=Ft.scaledTo(kn);if(ye[jn.key]||(ye[jn.key]=!0,!(kt=this.getTile(jn))&&gn&&(kt=this._addTile(jn)),kt&&(fe[jn.key]=jn,gn=kt.wasRequested(),kt.hasData())))break}}}return fe},z.prototype._updateLoadedParentTileCache=function(){for(var U in this._loadedParentTiles={},this._tiles){for(var X=[],fe=void 0,ye=this._tiles[U].tileID;ye.overscaledZ>0;){if(ye.key in this._loadedParentTiles){fe=this._loadedParentTiles[ye.key];break}X.push(ye.key);var we=ye.scaledTo(ye.overscaledZ-1);if(fe=this._getLoadedTile(we))break;ye=we}for(var ke=0,Pe=X;ke<Pe.length;ke+=1)this._loadedParentTiles[Pe[ke]]=fe}},z.prototype._addTile=function(U){var X=this._tiles[U.key];if(X)return X;(X=this._cache.getAndRemove(U))&&(this._setTileReloadTimer(U.key,X),X.tileID=U,this._state.initializeTileState(X,this.map?this.map.painter:null),this._cacheTimers[U.key]&&(clearTimeout(this._cacheTimers[U.key]),delete this._cacheTimers[U.key],this._setTileReloadTimer(U.key,X)));var fe=Boolean(X);return fe||(X=new e.Tile(U,this._source.tileSize*U.overscaleFactor()),this._loadTile(X,this._tileLoaded.bind(this,X,U.key,X.state))),X?(X.uses++,this._tiles[U.key]=X,fe||this._source.fire(new e.Event("dataloading",{tile:X,coord:X.tileID,dataType:"source"})),X):null},z.prototype._setTileReloadTimer=function(U,X){var fe=this;U in this._timers&&(clearTimeout(this._timers[U]),delete this._timers[U]);var ye=X.getExpiryTimeout();ye&&(this._timers[U]=setTimeout(function(){fe._reloadTile(U,"expired"),delete fe._timers[U]},ye))},z.prototype._removeTile=function(U){var X=this._tiles[U];X&&(X.uses--,delete this._tiles[U],this._timers[U]&&(clearTimeout(this._timers[U]),delete this._timers[U]),X.uses>0||(X.hasData()&&"reloading"!==X.state?this._cache.add(X.tileID,X,X.getExpiryTimeout()):(X.aborted=!0,this._abortTile(X),this._unloadTile(X))))},z.prototype.clearTiles=function(){for(var U in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(U);this._cache.reset()},z.prototype.tilesIn=function(U,X,fe){var ye=this,we=[],ke=this.transform;if(!ke)return we;for(var Pe=fe?ke.getCameraQueryGeometry(U):U,Ze=U.map(function(kn){return ke.pointCoordinate(kn)}),nt=Pe.map(function(kn){return ke.pointCoordinate(kn)}),ht=this.getIds(),St=1/0,jt=1/0,Lt=-1/0,Ft=-1/0,kt=0,Xt=nt;kt<Xt.length;kt+=1){var Gt=Xt[kt];St=Math.min(St,Gt.x),jt=Math.min(jt,Gt.y),Lt=Math.max(Lt,Gt.x),Ft=Math.max(Ft,Gt.y)}for(var Qt=function(kn){var jn=ye._tiles[ht[kn]];if(!jn.holdingForFade()){var Nn=jn.tileID,mr=Math.pow(2,ke.zoom-jn.tileID.overscaledZ),gr=X*jn.queryPadding*e.EXTENT/jn.tileSize/mr,Dr=[Nn.getTilePoint(new e.MercatorCoordinate(St,jt)),Nn.getTilePoint(new e.MercatorCoordinate(Lt,Ft))];if(Dr[0].x-gr<e.EXTENT&&Dr[0].y-gr<e.EXTENT&&Dr[1].x+gr>=0&&Dr[1].y+gr>=0){var Cr=Ze.map(function(bi){return Nn.getTilePoint(bi)}),fi=nt.map(function(bi){return Nn.getTilePoint(bi)});we.push({tile:jn,tileID:Nn,queryGeometry:Cr,cameraQueryGeometry:fi,scale:mr})}}},gn=0;gn<ht.length;gn++)Qt(gn);return we},z.prototype.getVisibleCoordinates=function(U){for(var X=this,fe=this.getRenderableIds(U).map(function(Pe){return X._tiles[Pe].tileID}),ye=0,we=fe;ye<we.length;ye+=1){var ke=we[ye];ke.posMatrix=this.transform.calculatePosMatrix(ke.toUnwrapped())}return fe},z.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(mt(this._source.type))for(var U in this._tiles){var X=this._tiles[U];if(void 0!==X.fadeEndTime&&X.fadeEndTime>=e.browser.now())return!0}return!1},z.prototype.setFeatureState=function(U,X,fe){this._state.updateState(U=U||"_geojsonTileLayer",X,fe)},z.prototype.removeFeatureState=function(U,X,fe){this._state.removeFeatureState(U=U||"_geojsonTileLayer",X,fe)},z.prototype.getFeatureState=function(U,X){return this._state.getState(U=U||"_geojsonTileLayer",X)},z.prototype.setDependencies=function(U,X,fe){var ye=this._tiles[U];ye&&ye.setDependencies(X,fe)},z.prototype.reloadTilesForDependencies=function(U,X){for(var fe in this._tiles)this._tiles[fe].hasDependency(U,X)&&this._reloadTile(fe,"reloading");this._cache.filter(function(ye){return!ye.hasDependency(U,X)})},z}(e.Evented);function ft(O,z){var U=Math.abs(2*O.wrap)-+(O.wrap<0),X=Math.abs(2*z.wrap)-+(z.wrap<0);return O.overscaledZ-z.overscaledZ||X-U||z.canonical.y-O.canonical.y||z.canonical.x-O.canonical.x}function mt(O){return"raster"===O||"image"===O||"video"===O}function pt(){return new e.window.Worker(pe.workerUrl)}Ke.maxOverzooming=10,Ke.maxUnderzooming=3;var Ot="mapboxgl_preloaded_worker_pool",Pt=function(){this.active={}};Pt.prototype.acquire=function(O){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new pt);return this.active[O]=!0,this.workers.slice()},Pt.prototype.release=function(O){delete this.active[O],0===this.numActive()&&(this.workers.forEach(function(z){z.terminate()}),this.workers=null)},Pt.prototype.isPreloaded=function(){return!!this.active[Ot]},Pt.prototype.numActive=function(){return Object.keys(this.active).length};var Jt,$t=Math.floor(e.browser.hardwareConcurrency/2);function ut(){return Jt||(Jt=new Pt),Jt}function Dt(O,z){var U={};for(var X in O)"ref"!==X&&(U[X]=O[X]);return e.refProperties.forEach(function(fe){fe in z&&(U[fe]=z[fe])}),U}function Wt(O){O=O.slice();for(var z=Object.create(null),U=0;U<O.length;U++)z[O[U].id]=O[U];for(var X=0;X<O.length;X++)"ref"in O[X]&&(O[X]=Dt(O[X],z[O[X].ref]));return O}Pt.workerCount=Math.max(Math.min($t,6),1);var zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ht(O,z,U){U.push({command:zt.addSource,args:[O,z[O]]})}function Ne(O,z,U){z.push({command:zt.removeSource,args:[O]}),U[O]=!0}function ot(O,z,U,X){Ne(O,U,X),Ht(O,z,U)}function yt(O,z,U){var X;for(X in O[U])if(O[U].hasOwnProperty(X)&&"data"!==X&&!e.deepEqual(O[U][X],z[U][X]))return!1;for(X in z[U])if(z[U].hasOwnProperty(X)&&"data"!==X&&!e.deepEqual(O[U][X],z[U][X]))return!1;return!0}function It(O,z,U,X,fe,ye){var we;for(we in z=z||{},O=O||{})O.hasOwnProperty(we)&&(e.deepEqual(O[we],z[we])||U.push({command:ye,args:[X,we,z[we],fe]}));for(we in z)z.hasOwnProperty(we)&&!O.hasOwnProperty(we)&&(e.deepEqual(O[we],z[we])||U.push({command:ye,args:[X,we,z[we],fe]}))}function Vt(O){return O.id}function ln(O,z){return O[z.id]=z,O}var an=function(O,z){this.reset(O,z)};an.prototype.reset=function(O,z){this.points=O||[],this._distances=[0];for(var U=1;U<this.points.length;U++)this._distances[U]=this._distances[U-1]+this.points[U].dist(this.points[U-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(z||0,.5*this.length),this.paddedLength=this.length-2*this.padding},an.prototype.lerp=function(O){if(1===this.points.length)return this.points[0];O=e.clamp(O,0,1);for(var z=1,U=this._distances[z],X=O*this.paddedLength+this.padding;U<X&&z<this._distances.length;)U=this._distances[++z];var fe=z-1,ye=this._distances[fe],we=U-ye,ke=we>0?(X-ye)/we:0;return this.points[fe].mult(1-ke).add(this.points[z].mult(ke))};var wn=function(O,z,U){var X=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(O/U),this.yCellCount=Math.ceil(z/U);for(var ye=0;ye<this.xCellCount*this.yCellCount;ye++)X.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=O,this.height=z,this.xScale=this.xCellCount/O,this.yScale=this.yCellCount/z,this.boxUid=0,this.circleUid=0};function Zn(O,z,U,X,fe){var ye=e.create();return z?(e.scale(ye,ye,[1/fe,1/fe,1]),U||e.rotateZ(ye,ye,X.angle)):e.multiply(ye,X.labelPlaneMatrix,O),ye}function An(O,z,U,X,fe){if(z){var ye=e.clone(O);return e.scale(ye,ye,[fe,fe,1]),U||e.rotateZ(ye,ye,-X.angle),ye}return X.glCoordMatrix}function hn(O,z){var U=[O.x,O.y,0,1];Wr(U,U,z);var X=U[3];return{point:new e.Point(U[0]/X,U[1]/X),signedDistanceFromCamera:X}}function pn(O,z){return.5+O/z*.5}function xn(O,z){var U=O[0]/O[3],X=O[1]/O[3];return U>=-z[0]&&U<=z[0]&&X>=-z[1]&&X<=z[1]}function En(O,z,U,X,fe,ye,we,ke){var Pe=X?O.textSizeData:O.iconSizeData,Ze=e.evaluateSizeForZoom(Pe,U.transform.zoom),nt=[256/U.width*2+1,256/U.height*2+1],ht=X?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;ht.clear();for(var St=O.lineVertexArray,jt=X?O.text.placedSymbolArray:O.icon.placedSymbolArray,Lt=U.transform.width/U.transform.height,Ft=!1,kt=0;kt<jt.length;kt++){var Xt=jt.get(kt);if(Xt.hidden||Xt.writingMode===e.WritingMode.vertical&&!Ft)Pr(Xt.numGlyphs,ht);else{Ft=!1;var Gt=[Xt.anchorX,Xt.anchorY,0,1];if(e.transformMat4(Gt,Gt,z),xn(Gt,nt)){var gn=pn(U.transform.cameraToCenterDistance,Gt[3]),kn=e.evaluateSizeForFeature(Pe,Ze,Xt),jn=we?kn/gn:kn*gn,Nn=new e.Point(Xt.anchorX,Xt.anchorY),mr=hn(Nn,fe).point,gr={},Dr=nr(Xt,jn,!1,ke,z,fe,ye,O.glyphOffsetArray,St,ht,mr,Nn,gr,Lt);Ft=Dr.useVertical,(Dr.notEnoughRoom||Ft||Dr.needsFlipping&&nr(Xt,jn,!0,ke,z,fe,ye,O.glyphOffsetArray,St,ht,mr,Nn,gr,Lt).notEnoughRoom)&&Pr(Xt.numGlyphs,ht)}else Pr(Xt.numGlyphs,ht)}}X?O.text.dynamicLayoutVertexBuffer.updateData(ht):O.icon.dynamicLayoutVertexBuffer.updateData(ht)}function In(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt){var ht=ke.glyphStartIndex+ke.numGlyphs,St=ke.lineStartIndex,jt=ke.lineStartIndex+ke.lineLength,Lt=z.getoffsetX(ke.glyphStartIndex),Ft=z.getoffsetX(ht-1),kt=Ar(O*Lt,U,X,fe,ye,we,ke.segment,St,jt,Pe,Ze,nt);if(!kt)return null;var Xt=Ar(O*Ft,U,X,fe,ye,we,ke.segment,St,jt,Pe,Ze,nt);return Xt?{first:kt,last:Xt}:null}function Yn(O,z,U,X){return O===e.WritingMode.horizontal&&Math.abs(U.y-z.y)>Math.abs(U.x-z.x)*X?{useVertical:!0}:(O===e.WritingMode.vertical?z.y<U.y:z.x>U.x)?{needsFlipping:!0}:null}function nr(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt,ht,St,jt){var Lt,Ft=z/24,kt=O.lineOffsetX*Ft,Xt=O.lineOffsetY*Ft;if(O.numGlyphs>1){var Gt=O.glyphStartIndex+O.numGlyphs,Qt=O.lineStartIndex,gn=O.lineStartIndex+O.lineLength,kn=In(Ft,ke,kt,Xt,U,nt,ht,O,Pe,ye,St);if(!kn)return{notEnoughRoom:!0};var jn=hn(kn.first.point,we).point,Nn=hn(kn.last.point,we).point;if(X&&!U){var mr=Yn(O.writingMode,jn,Nn,jt);if(mr)return mr}Lt=[kn.first];for(var gr=O.glyphStartIndex+1;gr<Gt-1;gr++)Lt.push(Ar(Ft*ke.getoffsetX(gr),kt,Xt,U,nt,ht,O.segment,Qt,gn,Pe,ye,St));Lt.push(kn.last)}else{if(X&&!U){var Dr=hn(ht,fe).point,Cr=O.lineStartIndex+O.segment+1,fi=new e.Point(Pe.getx(Cr),Pe.gety(Cr)),bi=hn(fi,fe),Oi=bi.signedDistanceFromCamera>0?bi.point:sr(ht,fi,Dr,1,fe),ar=Yn(O.writingMode,Dr,Oi,jt);if(ar)return ar}var Gr=Ar(Ft*ke.getoffsetX(O.glyphStartIndex),kt,Xt,U,nt,ht,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,Pe,ye,St);if(!Gr)return{notEnoughRoom:!0};Lt=[Gr]}for(var _i=0,gi=Lt;_i<gi.length;_i+=1){var Ai=gi[_i];e.addDynamicAttributes(Ze,Ai.point,Ai.angle)}return{}}function sr(O,z,U,X,fe){var ye=hn(O.add(O.sub(z)._unit()),fe).point,we=U.sub(ye);return U.add(we._mult(X/we.mag()))}function Ar(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt,ht){var St=X?O-z:O+z,jt=St>0?1:-1,Lt=0;X&&(jt*=-1,Lt=Math.PI),jt<0&&(Lt+=Math.PI);for(var Ft=jt>0?ke+we:ke+we+1,kt=fe,Xt=fe,Gt=0,Qt=0,gn=Math.abs(St),kn=[];Gt+Qt<=gn;){if((Ft+=jt)<ke||Ft>=Pe)return null;if(Xt=kt,kn.push(kt),void 0===(kt=ht[Ft])){var jn=new e.Point(Ze.getx(Ft),Ze.gety(Ft)),Nn=hn(jn,nt);if(Nn.signedDistanceFromCamera>0)kt=ht[Ft]=Nn.point;else{var mr=Ft-jt;kt=sr(0===Gt?ye:new e.Point(Ze.getx(mr),Ze.gety(mr)),jn,Xt,gn-Gt+1,nt)}}Gt+=Qt,Qt=Xt.dist(kt)}var gr=(gn-Gt)/Qt,Dr=kt.sub(Xt),Cr=Dr.mult(gr)._add(Xt);Cr._add(Dr._unit()._perp()._mult(U*jt));var fi=Lt+Math.atan2(kt.y-Xt.y,kt.x-Xt.x);return kn.push(Cr),{point:Cr,angle:fi,path:kn}}wn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wn.prototype.insert=function(O,z,U,X,fe){this._forEachCell(z,U,X,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(O),this.bboxes.push(z),this.bboxes.push(U),this.bboxes.push(X),this.bboxes.push(fe)},wn.prototype.insertCircle=function(O,z,U,X){this._forEachCell(z-X,U-X,z+X,U+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(O),this.circles.push(z),this.circles.push(U),this.circles.push(X)},wn.prototype._insertBoxCell=function(O,z,U,X,fe,ye){this.boxCells[fe].push(ye)},wn.prototype._insertCircleCell=function(O,z,U,X,fe,ye){this.circleCells[fe].push(ye)},wn.prototype._query=function(O,z,U,X,fe,ye){if(U<0||O>this.width||X<0||z>this.height)return!fe&&[];var we=[];if(O<=0&&z<=0&&this.width<=U&&this.height<=X){if(fe)return!0;for(var ke=0;ke<this.boxKeys.length;ke++)we.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(var Pe=0;Pe<this.circleKeys.length;Pe++){var Ze=this.circles[3*Pe],nt=this.circles[3*Pe+1],ht=this.circles[3*Pe+2];we.push({key:this.circleKeys[Pe],x1:Ze-ht,y1:nt-ht,x2:Ze+ht,y2:nt+ht})}return ye?we.filter(ye):we}return this._forEachCell(O,z,U,X,this._queryCell,we,{hitTest:fe,seenUids:{box:{},circle:{}}},ye),fe?we.length>0:we},wn.prototype._queryCircle=function(O,z,U,X,fe){var ye=O-U,we=O+U,ke=z-U,Pe=z+U;if(we<0||ye>this.width||Pe<0||ke>this.height)return!X&&[];var Ze=[];return this._forEachCell(ye,ke,we,Pe,this._queryCellCircle,Ze,{hitTest:X,circle:{x:O,y:z,radius:U},seenUids:{box:{},circle:{}}},fe),X?Ze.length>0:Ze},wn.prototype.query=function(O,z,U,X,fe){return this._query(O,z,U,X,!1,fe)},wn.prototype.hitTest=function(O,z,U,X,fe){return this._query(O,z,U,X,!0,fe)},wn.prototype.hitTestCircle=function(O,z,U,X){return this._queryCircle(O,z,U,!0,X)},wn.prototype._queryCell=function(O,z,U,X,fe,ye,we,ke){var Pe=we.seenUids,Ze=this.boxCells[fe];if(null!==Ze)for(var nt=this.bboxes,ht=0,St=Ze;ht<St.length;ht+=1){var jt=St[ht];if(!Pe.box[jt]){Pe.box[jt]=!0;var Lt=4*jt;if(O<=nt[Lt+2]&&z<=nt[Lt+3]&&U>=nt[Lt+0]&&X>=nt[Lt+1]&&(!ke||ke(this.boxKeys[jt]))){if(we.hitTest)return ye.push(!0),!0;ye.push({key:this.boxKeys[jt],x1:nt[Lt],y1:nt[Lt+1],x2:nt[Lt+2],y2:nt[Lt+3]})}}}var Ft=this.circleCells[fe];if(null!==Ft)for(var kt=this.circles,Xt=0,Gt=Ft;Xt<Gt.length;Xt+=1){var Qt=Gt[Xt];if(!Pe.circle[Qt]){Pe.circle[Qt]=!0;var gn=3*Qt;if(this._circleAndRectCollide(kt[gn],kt[gn+1],kt[gn+2],O,z,U,X)&&(!ke||ke(this.circleKeys[Qt]))){if(we.hitTest)return ye.push(!0),!0;var kn=kt[gn],jn=kt[gn+1],Nn=kt[gn+2];ye.push({key:this.circleKeys[Qt],x1:kn-Nn,y1:jn-Nn,x2:kn+Nn,y2:jn+Nn})}}}},wn.prototype._queryCellCircle=function(O,z,U,X,fe,ye,we,ke){var Pe=we.circle,Ze=we.seenUids,nt=this.boxCells[fe];if(null!==nt)for(var ht=this.bboxes,St=0,jt=nt;St<jt.length;St+=1){var Lt=jt[St];if(!Ze.box[Lt]){Ze.box[Lt]=!0;var Ft=4*Lt;if(this._circleAndRectCollide(Pe.x,Pe.y,Pe.radius,ht[Ft+0],ht[Ft+1],ht[Ft+2],ht[Ft+3])&&(!ke||ke(this.boxKeys[Lt])))return ye.push(!0),!0}}var kt=this.circleCells[fe];if(null!==kt)for(var Xt=this.circles,Gt=0,Qt=kt;Gt<Qt.length;Gt+=1){var gn=Qt[Gt];if(!Ze.circle[gn]){Ze.circle[gn]=!0;var kn=3*gn;if(this._circlesCollide(Xt[kn],Xt[kn+1],Xt[kn+2],Pe.x,Pe.y,Pe.radius)&&(!ke||ke(this.circleKeys[gn])))return ye.push(!0),!0}}},wn.prototype._forEachCell=function(O,z,U,X,fe,ye,we,ke){for(var Pe=this._convertToXCellCoord(O),Ze=this._convertToYCellCoord(z),nt=this._convertToXCellCoord(U),ht=this._convertToYCellCoord(X),St=Pe;St<=nt;St++)for(var jt=Ze;jt<=ht;jt++)if(fe.call(this,O,z,U,X,this.xCellCount*jt+St,ye,we,ke))return},wn.prototype._convertToXCellCoord=function(O){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(O*this.xScale)))},wn.prototype._convertToYCellCoord=function(O){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(O*this.yScale)))},wn.prototype._circlesCollide=function(O,z,U,X,fe,ye){var we=X-O,ke=fe-z,Pe=U+ye;return Pe*Pe>we*we+ke*ke},wn.prototype._circleAndRectCollide=function(O,z,U,X,fe,ye,we){var ke=(ye-X)/2,Pe=Math.abs(O-(X+ke));if(Pe>ke+U)return!1;var Ze=(we-fe)/2,nt=Math.abs(z-(fe+Ze));if(nt>Ze+U)return!1;if(Pe<=ke||nt<=Ze)return!0;var ht=Pe-ke,St=nt-Ze;return ht*ht+St*St<=U*U};var yr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pr(O,z){for(var U=0;U<O;U++){var X=z.length;z.resize(X+4),z.float32.set(yr,3*X)}}function Wr(O,z,U){var X=z[0],fe=z[1];return O[0]=U[0]*X+U[4]*fe+U[12],O[1]=U[1]*X+U[5]*fe+U[13],O[3]=U[3]*X+U[7]*fe+U[15],O}var lr=function(O,z,U){void 0===z&&(z=new wn(O.width+200,O.height+200,25)),void 0===U&&(U=new wn(O.width+200,O.height+200,25)),this.transform=O,this.grid=z,this.ignoredGrid=U,this.pitchfactor=Math.cos(O._pitch)*O.cameraToCenterDistance,this.screenRightBoundary=O.width+100,this.screenBottomBoundary=O.height+100,this.gridRightBoundary=O.width+200,this.gridBottomBoundary=O.height+200};function Hn(O,z,U){return z*(e.EXTENT/(O.tileSize*Math.pow(2,U-O.tileID.overscaledZ)))}lr.prototype.placeCollisionBox=function(O,z,U,X,fe){var ye=this.projectAndGetPerspectiveRatio(X,O.anchorPointX,O.anchorPointY),we=U*ye.perspectiveRatio,ke=O.x1*we+ye.point.x,Pe=O.y1*we+ye.point.y,Ze=O.x2*we+ye.point.x,nt=O.y2*we+ye.point.y;return!this.isInsideGrid(ke,Pe,Ze,nt)||!z&&this.grid.hitTest(ke,Pe,Ze,nt,fe)?{box:[],offscreen:!1}:{box:[ke,Pe,Ze,nt],offscreen:this.isOffscreen(ke,Pe,Ze,nt)}},lr.prototype.placeCollisionCircles=function(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt,ht,St){var jt=[],Lt=new e.Point(z.anchorX,z.anchorY),Ft=hn(Lt,ye),kt=pn(this.transform.cameraToCenterDistance,Ft.signedDistanceFromCamera),Xt=(Ze?fe/kt:fe*kt)/e.ONE_EM,Gt=hn(Lt,we).point,Qt=In(Xt,X,z.lineOffsetX*Xt,z.lineOffsetY*Xt,!1,Gt,Lt,z,U,we,{}),gn=!1,kn=!1,jn=!0;if(Qt){for(var Nn=.5*ht*kt+St,mr=new e.Point(-100,-100),gr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Dr=new an,Cr=Qt.first,fi=Qt.last,bi=[],Oi=Cr.path.length-1;Oi>=1;Oi--)bi.push(Cr.path[Oi]);for(var ar=1;ar<fi.path.length;ar++)bi.push(fi.path[ar]);var Gr=2.5*Nn;if(ke){var _i=bi.map(function(ea){return hn(ea,ke)});bi=_i.some(function(ea){return ea.signedDistanceFromCamera<=0})?[]:_i.map(function(ea){return ea.point})}var gi=[];if(bi.length>0){for(var Ai=bi[0].clone(),Bi=bi[0].clone(),oa=1;oa<bi.length;oa++)Ai.x=Math.min(Ai.x,bi[oa].x),Ai.y=Math.min(Ai.y,bi[oa].y),Bi.x=Math.max(Bi.x,bi[oa].x),Bi.y=Math.max(Bi.y,bi[oa].y);gi=Ai.x>=mr.x&&Bi.x<=gr.x&&Ai.y>=mr.y&&Bi.y<=gr.y?[bi]:Bi.x<mr.x||Ai.x>gr.x||Bi.y<mr.y||Ai.y>gr.y?[]:e.clipLine([bi],mr.x,mr.y,gr.x,gr.y)}for(var Mi=0,qi=gi;Mi<qi.length;Mi+=1){Dr.reset(qi[Mi],.25*Nn);var da;da=Dr.length<=.5*Nn?1:Math.ceil(Dr.paddedLength/Gr)+1;for(var Wi=0;Wi<da;Wi++){var la=Wi/Math.max(da-1,1),wa=Dr.lerp(la),eo=wa.x+100,Po=wa.y+100;jt.push(eo,Po,Nn,0);var ko=eo-Nn,Wa=Po-Nn,zo=eo+Nn,vo=Po+Nn;if(jn=jn&&this.isOffscreen(ko,Wa,zo,vo),kn=kn||this.isInsideGrid(ko,Wa,zo,vo),!O&&this.grid.hitTestCircle(eo,Po,Nn,nt)&&(gn=!0,!Pe))return{circles:[],offscreen:!1,collisionDetected:gn}}}}return{circles:!Pe&&gn||!kn?[]:jt,offscreen:jn,collisionDetected:gn}},lr.prototype.queryRenderedSymbols=function(O){if(0===O.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var z=[],U=1/0,X=1/0,fe=-1/0,ye=-1/0,we=0,ke=O;we<ke.length;we+=1){var Pe=ke[we],Ze=new e.Point(Pe.x+100,Pe.y+100);U=Math.min(U,Ze.x),X=Math.min(X,Ze.y),fe=Math.max(fe,Ze.x),ye=Math.max(ye,Ze.y),z.push(Ze)}for(var nt={},ht={},St=0,jt=this.grid.query(U,X,fe,ye).concat(this.ignoredGrid.query(U,X,fe,ye));St<jt.length;St+=1){var Lt=jt[St],Ft=Lt.key;if(void 0===nt[Ft.bucketInstanceId]&&(nt[Ft.bucketInstanceId]={}),!nt[Ft.bucketInstanceId][Ft.featureIndex]){var kt=[new e.Point(Lt.x1,Lt.y1),new e.Point(Lt.x2,Lt.y1),new e.Point(Lt.x2,Lt.y2),new e.Point(Lt.x1,Lt.y2)];e.polygonIntersectsPolygon(z,kt)&&(nt[Ft.bucketInstanceId][Ft.featureIndex]=!0,void 0===ht[Ft.bucketInstanceId]&&(ht[Ft.bucketInstanceId]=[]),ht[Ft.bucketInstanceId].push(Ft.featureIndex))}}return ht},lr.prototype.insertCollisionBox=function(O,z,U,X,fe){(z?this.ignoredGrid:this.grid).insert({bucketInstanceId:U,featureIndex:X,collisionGroupID:fe},O[0],O[1],O[2],O[3])},lr.prototype.insertCollisionCircles=function(O,z,U,X,fe){for(var ye=z?this.ignoredGrid:this.grid,we={bucketInstanceId:U,featureIndex:X,collisionGroupID:fe},ke=0;ke<O.length;ke+=4)ye.insertCircle(we,O[ke],O[ke+1],O[ke+2])},lr.prototype.projectAndGetPerspectiveRatio=function(O,z,U){var X=[z,U,0,1];return Wr(X,X,O),{point:new e.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}},lr.prototype.isOffscreen=function(O,z,U,X){return U<100||O>=this.screenRightBoundary||X<100||z>this.screenBottomBoundary},lr.prototype.isInsideGrid=function(O,z,U,X){return U>=0&&O<this.gridRightBoundary&&X>=0&&z<this.gridBottomBoundary},lr.prototype.getViewportMatrix=function(){var O=e.identity([]);return e.translate(O,O,[-100,-100,0]),O};var Sr=function(O,z,U,X){this.opacity=O?Math.max(0,Math.min(1,O.opacity+(O.placed?z:-z))):X&&U?1:0,this.placed=U};Sr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ti=function(O,z,U,X,fe){this.text=new Sr(O?O.text:null,z,U,fe),this.icon=new Sr(O?O.icon:null,z,X,fe)};ti.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Fn=function(O,z,U){this.text=O,this.icon=z,this.skipFade=U},br=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},xr=function(O,z,U,X,fe){this.bucketInstanceId=O,this.featureIndex=z,this.sourceLayerIndex=U,this.bucketIndex=X,this.tileID=fe},Kn=function(O){this.crossSourceCollisions=O,this.maxGroupID=0,this.collisionGroups={}};function Qr(O,z,U,X,fe){var ye=e.getAnchorAlignment(O),we=-(ye.horizontalAlign-.5)*z,ke=-(ye.verticalAlign-.5)*U,Pe=e.evaluateVariableOffset(O,X);return new e.Point(we+Pe[0]*fe,ke+Pe[1]*fe)}function ci(O,z,U,X,fe,ye){var we=O.x1,ke=O.x2,Pe=O.y1,Ze=O.y2,nt=O.anchorPointX,ht=O.anchorPointY,St=new e.Point(z,U);return X&&St._rotate(fe?ye:-ye),{x1:we+St.x,y1:Pe+St.y,x2:ke+St.x,y2:Ze+St.y,anchorPointX:nt,anchorPointY:ht}}Kn.prototype.get=function(O){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[O]){var z=++this.maxGroupID;this.collisionGroups[O]={ID:z,predicate:function(U){return U.collisionGroupID===z}}}return this.collisionGroups[O]};var Or=function(O,z,U,X){this.transform=O.clone(),this.collisionIndex=new lr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=z,this.retainedQueryData={},this.collisionGroups=new Kn(U),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}};function li(O,z,U,X,fe){O.emplaceBack(z?1:0,U?1:0,X||0,fe||0),O.emplaceBack(z?1:0,U?1:0,X||0,fe||0),O.emplaceBack(z?1:0,U?1:0,X||0,fe||0),O.emplaceBack(z?1:0,U?1:0,X||0,fe||0)}Or.prototype.getBucketParts=function(O,z,U,X){var fe=U.getBucket(z),ye=U.latestFeatureIndex;if(fe&&ye&&z.id===fe.layerIds[0]){var we=U.collisionBoxArray,ke=fe.layers[0].layout,Pe=Math.pow(2,this.transform.zoom-U.tileID.overscaledZ),Ze=U.tileSize/e.EXTENT,nt=this.transform.calculatePosMatrix(U.tileID.toUnwrapped()),ht="map"===ke.get("text-pitch-alignment"),St="map"===ke.get("text-rotation-alignment"),jt=Hn(U,1,this.transform.zoom),Lt=Zn(nt,ht,St,this.transform,jt),Ft=null;if(ht){var kt=An(nt,ht,St,this.transform,jt);Ft=e.multiply([],this.transform.labelPlaneMatrix,kt)}this.retainedQueryData[fe.bucketInstanceId]=new xr(fe.bucketInstanceId,ye,fe.sourceLayerIndex,fe.index,U.tileID);var Xt={bucket:fe,layout:ke,posMatrix:nt,textLabelPlaneMatrix:Lt,labelToScreenMatrix:Ft,scale:Pe,textPixelRatio:Ze,holdingForFade:U.holdingForFade(),collisionBoxArray:we,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(X)for(var Gt=0,Qt=fe.sortKeyRanges;Gt<Qt.length;Gt+=1){var gn=Qt[Gt];O.push({sortKey:gn.sortKey,symbolInstanceStart:gn.symbolInstanceStart,symbolInstanceEnd:gn.symbolInstanceEnd,parameters:Xt})}else O.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:Xt})}},Or.prototype.attemptAnchorPlacement=function(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt,ht,St,jt,Lt){var Ft,kt=[ht.textOffset0,ht.textOffset1],Xt=Qr(O,U,X,kt,fe),Gt=this.collisionIndex.placeCollisionBox(ci(z,Xt.x,Xt.y,ye,we,this.transform.angle),nt,ke,Pe,Ze.predicate);if((!Lt||0!==this.collisionIndex.placeCollisionBox(ci(Lt,Xt.x,Xt.y,ye,we,this.transform.angle),nt,ke,Pe,Ze.predicate).box.length)&&Gt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[ht.crossTileID]&&this.prevPlacement.placements[ht.crossTileID]&&this.prevPlacement.placements[ht.crossTileID].text&&(Ft=this.prevPlacement.variableOffsets[ht.crossTileID].anchor),this.variableOffsets[ht.crossTileID]={textOffset:kt,width:U,height:X,anchor:O,textBoxScale:fe,prevAnchor:Ft},this.markUsedJustification(St,O,ht,jt),St.allowVerticalPlacement&&(this.markUsedOrientation(St,jt,ht),this.placedOrientations[ht.crossTileID]=jt),{shift:Xt,placedGlyphBoxes:Gt}},Or.prototype.placeLayerBucketPart=function(O,z,U){var X=this,fe=O.parameters,ye=fe.bucket,we=fe.layout,ke=fe.posMatrix,Pe=fe.textLabelPlaneMatrix,Ze=fe.labelToScreenMatrix,nt=fe.textPixelRatio,ht=fe.holdingForFade,St=fe.collisionBoxArray,jt=fe.partiallyEvaluatedTextSize,Lt=fe.collisionGroup,Ft=we.get("text-optional"),kt=we.get("icon-optional"),Xt=we.get("text-allow-overlap"),Gt=we.get("icon-allow-overlap"),Qt="map"===we.get("text-rotation-alignment"),gn="map"===we.get("text-pitch-alignment"),kn="none"!==we.get("icon-text-fit"),jn="viewport-y"===we.get("symbol-z-order"),Nn=Xt&&(Gt||!ye.hasIconData()||kt),mr=Gt&&(Xt||!ye.hasTextData()||Ft);!ye.collisionArrays&&St&&ye.deserializeCollisionBoxes(St);var gr=function(ar,Gr){if(!z[ar.crossTileID])if(ht)X.placements[ar.crossTileID]=new Fn(!1,!1,!1);else{var _i,gi=!1,Ai=!1,Bi=!0,oa=null,Mi={box:null,offscreen:null},qi={box:null,offscreen:null},Ii=null,da=null,Wi=0,la=0,wa=0;Gr.textFeatureIndex?Wi=Gr.textFeatureIndex:ar.useRuntimeCollisionCircles&&(Wi=ar.featureIndex),Gr.verticalTextFeatureIndex&&(la=Gr.verticalTextFeatureIndex);var eo=Gr.textBox;if(eo){var Po=function(Bo){var Vs=e.WritingMode.horizontal;if(ye.allowVerticalPlacement&&!Bo&&X.prevPlacement){var Eo=X.prevPlacement.placedOrientations[ar.crossTileID];Eo&&(X.placedOrientations[ar.crossTileID]=Eo,X.markUsedOrientation(ye,Vs=Eo,ar))}return Vs},ko=function(Bo,Vs){if(ye.allowVerticalPlacement&&ar.numVerticalGlyphVertices>0&&Gr.verticalTextBox)for(var Eo=0,wl=ye.writingModes;Eo<wl.length&&(wl[Eo]===e.WritingMode.vertical?(Mi=Vs(),qi=Mi):Mi=Bo(),!(Mi&&Mi.box&&Mi.box.length));Eo+=1);else Mi=Bo()};if(we.get("text-variable-anchor")){var Wa=we.get("text-variable-anchor");if(X.prevPlacement&&X.prevPlacement.variableOffsets[ar.crossTileID]){var zo=X.prevPlacement.variableOffsets[ar.crossTileID];Wa.indexOf(zo.anchor)>0&&(Wa=Wa.filter(function(Bo){return Bo!==zo.anchor})).unshift(zo.anchor)}var vo=function(Bo,Vs,Eo){for(var wl=Bo.x2-Bo.x1,Jh=Bo.y2-Bo.y1,Us=ar.textBoxScale,Ku=kn&&!Gt?Vs:null,mc={box:[],offscreen:!1},Mp=Xt?2*Wa.length:Wa.length,Eu=0;Eu<Mp;++Eu){var Ju=X.attemptAnchorPlacement(Wa[Eu%Wa.length],Bo,wl,Jh,Us,Qt,gn,nt,ke,Lt,Eu>=Wa.length,ar,ye,Eo,Ku);if(Ju&&(mc=Ju.placedGlyphBoxes)&&mc.box&&mc.box.length){gi=!0,oa=Ju.shift;break}}return mc};ko(function(){return vo(eo,Gr.iconBox,e.WritingMode.horizontal)},function(){var Bo=Gr.verticalTextBox;return ye.allowVerticalPlacement&&!(Mi&&Mi.box&&Mi.box.length)&&ar.numVerticalGlyphVertices>0&&Bo?vo(Bo,Gr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Mi&&(gi=Mi.box,Bi=Mi.offscreen);var ea=Po(Mi&&Mi.box);if(!gi&&X.prevPlacement){var Ko=X.prevPlacement.variableOffsets[ar.crossTileID];Ko&&(X.variableOffsets[ar.crossTileID]=Ko,X.markUsedJustification(ye,Ko.anchor,ar,ea))}}else{var rl=function(Bo,Vs){var Eo=X.collisionIndex.placeCollisionBox(Bo,Xt,nt,ke,Lt.predicate);return Eo&&Eo.box&&Eo.box.length&&(X.markUsedOrientation(ye,Vs,ar),X.placedOrientations[ar.crossTileID]=Vs),Eo};ko(function(){return rl(eo,e.WritingMode.horizontal)},function(){var Bo=Gr.verticalTextBox;return ye.allowVerticalPlacement&&ar.numVerticalGlyphVertices>0&&Bo?rl(Bo,e.WritingMode.vertical):{box:null,offscreen:null}}),Po(Mi&&Mi.box&&Mi.box.length)}}if(gi=(_i=Mi)&&_i.box&&_i.box.length>0,Bi=_i&&_i.offscreen,ar.useRuntimeCollisionCircles){var ou=ye.text.placedSymbolArray.get(ar.centerJustifiedTextSymbolIndex),$u=e.evaluateSizeForFeature(ye.textSizeData,jt,ou),_f=we.get("text-padding");Ii=X.collisionIndex.placeCollisionCircles(Xt,ou,ye.lineVertexArray,ye.glyphOffsetArray,$u,ke,Pe,Ze,U,gn,Lt.predicate,ar.collisionCircleDiameter,_f),gi=Xt||Ii.circles.length>0&&!Ii.collisionDetected,Bi=Bi&&Ii.offscreen}if(Gr.iconFeatureIndex&&(wa=Gr.iconFeatureIndex),Gr.iconBox){var Gc=function(Bo){var Vs=kn&&oa?ci(Bo,oa.x,oa.y,Qt,gn,X.transform.angle):Bo;return X.collisionIndex.placeCollisionBox(Vs,Gt,nt,ke,Lt.predicate)};Ai=qi&&qi.box&&qi.box.length&&Gr.verticalIconBox?(da=Gc(Gr.verticalIconBox)).box.length>0:(da=Gc(Gr.iconBox)).box.length>0,Bi=Bi&&da.offscreen}var Jo=Ft||0===ar.numHorizontalGlyphVertices&&0===ar.numVerticalGlyphVertices,gc=kt||0===ar.numIconVertices;if(Jo||gc?gc?Jo||(Ai=Ai&&gi):gi=Ai&&gi:Ai=gi=Ai&&gi,gi&&_i&&_i.box&&X.collisionIndex.insertCollisionBox(_i.box,we.get("text-ignore-placement"),ye.bucketInstanceId,qi&&qi.box&&la?la:Wi,Lt.ID),Ai&&da&&X.collisionIndex.insertCollisionBox(da.box,we.get("icon-ignore-placement"),ye.bucketInstanceId,wa,Lt.ID),Ii&&(gi&&X.collisionIndex.insertCollisionCircles(Ii.circles,we.get("text-ignore-placement"),ye.bucketInstanceId,Wi,Lt.ID),U)){var Qo=ye.bucketInstanceId,il=X.collisionCircleArrays[Qo];void 0===il&&(il=X.collisionCircleArrays[Qo]=new br);for(var su=0;su<Ii.circles.length;su+=4)il.circles.push(Ii.circles[su+0]),il.circles.push(Ii.circles[su+1]),il.circles.push(Ii.circles[su+2]),il.circles.push(Ii.collisionDetected?1:0)}X.placements[ar.crossTileID]=new Fn(gi||Nn,Ai||mr,Bi||ye.justReloaded),z[ar.crossTileID]=!0}};if(jn)for(var Dr=ye.getSortedSymbolIndexes(this.transform.angle),Cr=Dr.length-1;Cr>=0;--Cr){var fi=Dr[Cr];gr(ye.symbolInstances.get(fi),ye.collisionArrays[fi])}else for(var bi=O.symbolInstanceStart;bi<O.symbolInstanceEnd;bi++)gr(ye.symbolInstances.get(bi),ye.collisionArrays[bi]);if(U&&ye.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[ye.bucketInstanceId];e.invert(Oi.invProjMatrix,ke),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}ye.justReloaded=!1},Or.prototype.markUsedJustification=function(O,z,U,X){var fe;fe=X===e.WritingMode.vertical?U.verticalPlacedTextSymbolIndex:{left:U.leftJustifiedTextSymbolIndex,center:U.centerJustifiedTextSymbolIndex,right:U.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(z)];for(var we=0,ke=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex,U.verticalPlacedTextSymbolIndex];we<ke.length;we+=1){var Pe=ke[we];Pe>=0&&(O.text.placedSymbolArray.get(Pe).crossTileID=fe>=0&&Pe!==fe?0:U.crossTileID)}},Or.prototype.markUsedOrientation=function(O,z,U){for(var X=z===e.WritingMode.horizontal||z===e.WritingMode.horizontalOnly?z:0,fe=z===e.WritingMode.vertical?z:0,ye=0,we=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex];ye<we.length;ye+=1)O.text.placedSymbolArray.get(we[ye]).placedOrientation=X;U.verticalPlacedTextSymbolIndex&&(O.text.placedSymbolArray.get(U.verticalPlacedTextSymbolIndex).placedOrientation=fe)},Or.prototype.commit=function(O){this.commitTime=O,this.zoomAtLastRecencyCheck=this.transform.zoom;var z=this.prevPlacement,U=!1;this.prevZoomAdjustment=z?z.zoomAdjustment(this.transform.zoom):0;var X=z?z.symbolFadeChange(O):1,fe=z?z.opacities:{},ye=z?z.variableOffsets:{},we=z?z.placedOrientations:{};for(var ke in this.placements){var Pe=this.placements[ke],Ze=fe[ke];Ze?(this.opacities[ke]=new ti(Ze,X,Pe.text,Pe.icon),U=U||Pe.text!==Ze.text.placed||Pe.icon!==Ze.icon.placed):(this.opacities[ke]=new ti(null,X,Pe.text,Pe.icon,Pe.skipFade),U=U||Pe.text||Pe.icon)}for(var nt in fe){var ht=fe[nt];if(!this.opacities[nt]){var St=new ti(ht,X,!1,!1);St.isHidden()||(this.opacities[nt]=St,U=U||ht.text.placed||ht.icon.placed)}}for(var jt in ye)this.variableOffsets[jt]||!this.opacities[jt]||this.opacities[jt].isHidden()||(this.variableOffsets[jt]=ye[jt]);for(var Lt in we)this.placedOrientations[Lt]||!this.opacities[Lt]||this.opacities[Lt].isHidden()||(this.placedOrientations[Lt]=we[Lt]);U?this.lastPlacementChangeTime=O:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=z?z.lastPlacementChangeTime:O)},Or.prototype.updateLayerOpacities=function(O,z){for(var U={},X=0,fe=z;X<fe.length;X+=1){var ye=fe[X],we=ye.getBucket(O);we&&ye.latestFeatureIndex&&O.id===we.layerIds[0]&&this.updateBucketOpacities(we,U,ye.collisionBoxArray)}},Or.prototype.updateBucketOpacities=function(O,z,U){var X=this;O.hasTextData()&&O.text.opacityVertexArray.clear(),O.hasIconData()&&O.icon.opacityVertexArray.clear(),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexArray.clear(),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexArray.clear();var fe=O.layers[0].layout,ye=new ti(null,0,!1,!1,!0),we=fe.get("text-allow-overlap"),ke=fe.get("icon-allow-overlap"),Pe=fe.get("text-variable-anchor"),Ze="map"===fe.get("text-rotation-alignment"),nt="map"===fe.get("text-pitch-alignment"),ht="none"!==fe.get("icon-text-fit"),St=new ti(null,0,we&&(ke||!O.hasIconData()||fe.get("icon-optional")),ke&&(we||!O.hasTextData()||fe.get("text-optional")),!0);!O.collisionArrays&&U&&(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData())&&O.deserializeCollisionBoxes(U);for(var jt=function(Xt,Gt,Qt){for(var gn=0;gn<Gt/4;gn++)Xt.opacityVertexArray.emplaceBack(Qt)},Lt=function(Xt){var Gt=O.symbolInstances.get(Xt),Qt=Gt.numHorizontalGlyphVertices,gn=Gt.numVerticalGlyphVertices,kn=Gt.crossTileID,Nn=X.opacities[kn];z[kn]?Nn=ye:Nn||(X.opacities[kn]=Nn=St),z[kn]=!0;var gr=Gt.numIconVertices>0,Dr=X.placedOrientations[Gt.crossTileID],Cr=Dr===e.WritingMode.vertical,fi=Dr===e.WritingMode.horizontal||Dr===e.WritingMode.horizontalOnly;if(Qt>0||gn>0){var bi=Qn(Nn.text);jt(O.text,Qt,Cr?Jn:bi),jt(O.text,gn,fi?Jn:bi);var Gr=Nn.text.isHidden();[Gt.rightJustifiedTextSymbolIndex,Gt.centerJustifiedTextSymbolIndex,Gt.leftJustifiedTextSymbolIndex].forEach(function(wa){wa>=0&&(O.text.placedSymbolArray.get(wa).hidden=Gr||Cr?1:0)}),Gt.verticalPlacedTextSymbolIndex>=0&&(O.text.placedSymbolArray.get(Gt.verticalPlacedTextSymbolIndex).hidden=Gr||fi?1:0);var _i=X.variableOffsets[Gt.crossTileID];_i&&X.markUsedJustification(O,_i.anchor,Gt,Dr);var gi=X.placedOrientations[Gt.crossTileID];gi&&(X.markUsedJustification(O,"left",Gt,gi),X.markUsedOrientation(O,gi,Gt))}if(gr){var Ai=Qn(Nn.icon),Bi=!(ht&&Gt.verticalPlacedIconSymbolIndex&&Cr);Gt.placedIconSymbolIndex>=0&&(jt(O.icon,Gt.numIconVertices,Bi?Ai:Jn),O.icon.placedSymbolArray.get(Gt.placedIconSymbolIndex).hidden=Nn.icon.isHidden()),Gt.verticalPlacedIconSymbolIndex>=0&&(jt(O.icon,Gt.numVerticalIconVertices,Bi?Jn:Ai),O.icon.placedSymbolArray.get(Gt.verticalPlacedIconSymbolIndex).hidden=Nn.icon.isHidden())}if(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData()){var qi=O.collisionArrays[Xt];if(qi){var Ii=new e.Point(0,0);if(qi.textBox||qi.verticalTextBox){var da=!0;if(Pe){var Wi=X.variableOffsets[kn];Wi?(Ii=Qr(Wi.anchor,Wi.width,Wi.height,Wi.textOffset,Wi.textBoxScale),Ze&&Ii._rotate(nt?X.transform.angle:-X.transform.angle)):da=!1}qi.textBox&&li(O.textCollisionBox.collisionVertexArray,Nn.text.placed,!da||Cr,Ii.x,Ii.y),qi.verticalTextBox&&li(O.textCollisionBox.collisionVertexArray,Nn.text.placed,!da||fi,Ii.x,Ii.y)}var la=Boolean(!fi&&qi.verticalIconBox);qi.iconBox&&li(O.iconCollisionBox.collisionVertexArray,Nn.icon.placed,la,ht?Ii.x:0,ht?Ii.y:0),qi.verticalIconBox&&li(O.iconCollisionBox.collisionVertexArray,Nn.icon.placed,!la,ht?Ii.x:0,ht?Ii.y:0)}}},Ft=0;Ft<O.symbolInstances.length;Ft++)Lt(Ft);if(O.sortFeatures(this.transform.angle),this.retainedQueryData[O.bucketInstanceId]&&(this.retainedQueryData[O.bucketInstanceId].featureSortOrder=O.featureSortOrder),O.hasTextData()&&O.text.opacityVertexBuffer&&O.text.opacityVertexBuffer.updateData(O.text.opacityVertexArray),O.hasIconData()&&O.icon.opacityVertexBuffer&&O.icon.opacityVertexBuffer.updateData(O.icon.opacityVertexArray),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexBuffer&&O.iconCollisionBox.collisionVertexBuffer.updateData(O.iconCollisionBox.collisionVertexArray),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexBuffer&&O.textCollisionBox.collisionVertexBuffer.updateData(O.textCollisionBox.collisionVertexArray),O.bucketInstanceId in this.collisionCircleArrays){var kt=this.collisionCircleArrays[O.bucketInstanceId];O.placementInvProjMatrix=kt.invProjMatrix,O.placementViewportMatrix=kt.viewportMatrix,O.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[O.bucketInstanceId]}},Or.prototype.symbolFadeChange=function(O){return 0===this.fadeDuration?1:(O-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Or.prototype.zoomAdjustment=function(O){return Math.max(0,(this.transform.zoom-O)/1.5)},Or.prototype.hasTransitions=function(O){return this.stale||O-this.lastPlacementChangeTime<this.fadeDuration},Or.prototype.stillRecent=function(O,z){var U=this.zoomAtLastRecencyCheck===z?1-this.zoomAdjustment(z):1;return this.zoomAtLastRecencyCheck=z,this.commitTime+this.fadeDuration*U>O},Or.prototype.setStale=function(){this.stale=!0};var di=Math.pow(2,25),Tn=Math.pow(2,24),tr=Math.pow(2,17),Zt=Math.pow(2,16),yn=Math.pow(2,9),Cn=Math.pow(2,8),rr=Math.pow(2,1);function Qn(O){if(0===O.opacity&&!O.placed)return 0;if(1===O.opacity&&O.placed)return 4294967295;var z=O.placed?1:0,U=Math.floor(127*O.opacity);return U*di+z*Tn+U*tr+z*Zt+U*yn+z*Cn+U*rr+z}var Jn=0,Wn=function(O){this._sortAcrossTiles="viewport-y"!==O.layout.get("symbol-z-order")&&void 0!==O.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Wn.prototype.continuePlacement=function(O,z,U,X,fe){for(var ye=this._bucketParts;this._currentTileIndex<O.length;)if(z.getBucketParts(ye,X,O[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,fe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ye.sort(function(Pe,Ze){return Pe.sortKey-Ze.sortKey}));this._currentPartIndex<ye.length;)if(z.placeLayerBucketPart(ye[this._currentPartIndex],this._seenCrossTileIDs,U),this._currentPartIndex++,fe())return!0;return!1};var On=function(O,z,U,X,fe,ye,we){this.placement=new Or(O,fe,ye,we),this._currentPlacementIndex=z.length-1,this._forceFullPlacement=U,this._showCollisionBoxes=X,this._done=!1};On.prototype.isDone=function(){return this._done},On.prototype.continuePlacement=function(O,z,U){for(var X=this,fe=e.browser.now(),ye=function(){var Pe=e.browser.now()-fe;return!X._forceFullPlacement&&Pe>2};this._currentPlacementIndex>=0;){var we=z[O[this._currentPlacementIndex]],ke=this.placement.collisionIndex.transform.zoom;if("symbol"===we.type&&(!we.minzoom||we.minzoom<=ke)&&(!we.maxzoom||we.maxzoom>ke)){if(this._inProgressLayer||(this._inProgressLayer=new Wn(we)),this._inProgressLayer.continuePlacement(U[we.source],this.placement,this._showCollisionBoxes,we,ye))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},On.prototype.commit=function(O){return this.placement.commit(O),this.placement};var zn=512/e.EXTENT/2,Rn=function(O,z,U){this.tileID=O,this.indexedSymbolInstances={},this.bucketInstanceId=U;for(var X=0;X<z.length;X++){var fe=z.get(X),ye=fe.key;this.indexedSymbolInstances[ye]||(this.indexedSymbolInstances[ye]=[]),this.indexedSymbolInstances[ye].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,O)})}};Rn.prototype.getScaledCoordinates=function(O,z){var X=zn/Math.pow(2,z.canonical.z-this.tileID.canonical.z);return{x:Math.floor((z.canonical.x*e.EXTENT+O.anchorX)*X),y:Math.floor((z.canonical.y*e.EXTENT+O.anchorY)*X)}},Rn.prototype.findMatches=function(O,z,U){for(var X=this.tileID.canonical.z<z.canonical.z?1:Math.pow(2,this.tileID.canonical.z-z.canonical.z),fe=0;fe<O.length;fe++){var ye=O.get(fe);if(!ye.crossTileID){var we=this.indexedSymbolInstances[ye.key];if(we)for(var ke=this.getScaledCoordinates(ye,z),Pe=0,Ze=we;Pe<Ze.length;Pe+=1){var nt=Ze[Pe];if(Math.abs(nt.coord.x-ke.x)<=X&&Math.abs(nt.coord.y-ke.y)<=X&&!U[nt.crossTileID]){U[nt.crossTileID]=!0,ye.crossTileID=nt.crossTileID;break}}}}};var Gn=function(){this.maxCrossTileID=0};Gn.prototype.generate=function(){return++this.maxCrossTileID};var fr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};fr.prototype.handleWrapJump=function(O){var z=Math.round((O-this.lng)/360);if(0!==z)for(var U in this.indexes){var X=this.indexes[U],fe={};for(var ye in X){var we=X[ye];we.tileID=we.tileID.unwrapTo(we.tileID.wrap+z),fe[we.tileID.key]=we}this.indexes[U]=fe}this.lng=O},fr.prototype.addBucket=function(O,z,U){if(this.indexes[O.overscaledZ]&&this.indexes[O.overscaledZ][O.key]){if(this.indexes[O.overscaledZ][O.key].bucketInstanceId===z.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(O.overscaledZ,this.indexes[O.overscaledZ][O.key])}for(var X=0;X<z.symbolInstances.length;X++)z.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[O.overscaledZ]||(this.usedCrossTileIDs[O.overscaledZ]={});var fe=this.usedCrossTileIDs[O.overscaledZ];for(var ye in this.indexes){var we=this.indexes[ye];if(Number(ye)>O.overscaledZ)for(var ke in we){var Pe=we[ke];Pe.tileID.isChildOf(O)&&Pe.findMatches(z.symbolInstances,O,fe)}else{var Ze=we[O.scaledTo(Number(ye)).key];Ze&&Ze.findMatches(z.symbolInstances,O,fe)}}for(var nt=0;nt<z.symbolInstances.length;nt++){var ht=z.symbolInstances.get(nt);ht.crossTileID||(ht.crossTileID=U.generate(),fe[ht.crossTileID]=!0)}return void 0===this.indexes[O.overscaledZ]&&(this.indexes[O.overscaledZ]={}),this.indexes[O.overscaledZ][O.key]=new Rn(O,z.symbolInstances,z.bucketInstanceId),!0},fr.prototype.removeBucketCrossTileIDs=function(O,z){for(var U in z.indexedSymbolInstances)for(var X=0,fe=z.indexedSymbolInstances[U];X<fe.length;X+=1)delete this.usedCrossTileIDs[O][fe[X].crossTileID]},fr.prototype.removeStaleBuckets=function(O){var z=!1;for(var U in this.indexes){var X=this.indexes[U];for(var fe in X)O[X[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(U,X[fe]),delete X[fe],z=!0)}return z};var ur=function(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ur.prototype.addLayer=function(O,z,U){var X=this.layerIndexes[O.id];void 0===X&&(X=this.layerIndexes[O.id]=new fr);var fe=!1,ye={};X.handleWrapJump(U);for(var we=0,ke=z;we<ke.length;we+=1){var Pe=ke[we],Ze=Pe.getBucket(O);Ze&&O.id===Ze.layerIds[0]&&(Ze.bucketInstanceId||(Ze.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(Pe.tileID,Ze,this.crossTileIDs)&&(fe=!0),ye[Ze.bucketInstanceId]=!0)}return X.removeStaleBuckets(ye)&&(fe=!0),fe},ur.prototype.pruneUnusedLayers=function(O){var z={};for(var U in O.forEach(function(X){z[X]=!0}),this.layerIndexes)z[U]||delete this.layerIndexes[U]};var Mr=function(O,z){return e.emitValidationErrors(O,z&&z.filter(function(U){return"source.canvas"!==U.identifier}))},vr=e.pick(zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),zr=e.pick(zt,["setCenter","setZoom","setBearing","setPitch"]),Br=function(){var O={},z=e.styleSpec.$version;for(var U in e.styleSpec.$root){var X=e.styleSpec.$root[U];if(X.required){var fe;null!=(fe="version"===U?z:"array"===X.type?[]:{})&&(O[U]=fe)}}return O}(),or=function(O){function z(U,X){var fe=this;void 0===X&&(X={}),O.call(this),this.map=U,this.dispatcher=new L(ut(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new E(U._requestManager,X.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new ur,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ye=this;this._rtlTextPluginCallback=z.registerForPluginStateChange(function(we){ye.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:we.pluginStatus,pluginURL:we.pluginURL},function(Pe,Ze){if(e.triggerPluginCompletionEvent(Pe),Ze&&Ze.every(function(ht){return ht}))for(var nt in ye.sourceCaches)ye.sourceCaches[nt].reload()})}),this.on("data",function(we){if("source"===we.dataType&&"metadata"===we.sourceDataType){var ke=fe.sourceCaches[we.sourceId];if(ke){var Pe=ke.getSource();if(Pe&&Pe.vectorLayerIds)for(var Ze in fe._layers){var nt=fe._layers[Ze];nt.source===Pe.id&&fe._validateLayer(nt)}}}})}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.loadURL=function(U,X){var fe=this;void 0===X&&(X={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ye="boolean"==typeof X.validate?X.validate:!e.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,X.accessToken);var we=this.map._requestManager.transformRequest(U,e.ResourceType.Style);this._request=e.getJSON(we,function(ke,Pe){fe._request=null,ke?fe.fire(new e.ErrorEvent(ke)):Pe&&fe._load(Pe,ye)})},z.prototype.loadJSON=function(U,X){var fe=this;void 0===X&&(X={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){fe._request=null,fe._load(U,!1!==X.validate)})},z.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Br,!1)},z.prototype._load=function(U,X){if(!X||!Mr(this,e.validateStyle(U))){for(var fe in this._loaded=!0,this.stylesheet=U,U.sources)this.addSource(fe,U.sources[fe],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs);var ye=Wt(this.stylesheet.layers);this._order=ye.map(function(Ze){return Ze.id}),this._layers={},this._serializedLayers={};for(var we=0,ke=ye;we<ke.length;we+=1){var Pe=ke[we];(Pe=e.createStyleLayer(Pe)).setEventedParent(this,{layer:{id:Pe.id}}),this._layers[Pe.id]=Pe,this._serializedLayers[Pe.id]=Pe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new F(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},z.prototype._loadSprite=function(U){var X=this;this._spriteRequest=function(fe,ye,we){var ke,Pe,Ze,nt=e.browser.devicePixelRatio>1?"@2x":"",ht=e.getJSON(ye.transformRequest(ye.normalizeSpriteURL(fe,nt,".json"),e.ResourceType.SpriteJSON),function(Lt,Ft){ht=null,Ze||(Ze=Lt,ke=Ft,jt())}),St=e.getImage(ye.transformRequest(ye.normalizeSpriteURL(fe,nt,".png"),e.ResourceType.SpriteImage),function(Lt,Ft){St=null,Ze||(Ze=Lt,Pe=Ft,jt())});function jt(){if(Ze)we(Ze);else if(ke&&Pe){var Lt=e.browser.getImageData(Pe),Ft={};for(var kt in ke){var Xt=ke[kt],Gt=Xt.width,Qt=Xt.height,gn=Xt.x,kn=Xt.y,jn=Xt.sdf,Nn=Xt.pixelRatio,mr=Xt.stretchX,gr=Xt.stretchY,Dr=Xt.content,Cr=new e.RGBAImage({width:Gt,height:Qt});e.RGBAImage.copy(Lt,Cr,{x:gn,y:kn},{x:0,y:0},{width:Gt,height:Qt}),Ft[kt]={data:Cr,pixelRatio:Nn,sdf:jn,stretchX:mr,stretchY:gr,content:Dr}}we(null,Ft)}}return{cancel:function(){ht&&(ht.cancel(),ht=null),St&&(St.cancel(),St=null)}}}(U,this.map._requestManager,function(fe,ye){if(X._spriteRequest=null,fe)X.fire(new e.ErrorEvent(fe));else if(ye)for(var we in ye)X.imageManager.addImage(we,ye[we]);X.imageManager.setLoaded(!0),X._availableImages=X.imageManager.listImages(),X.dispatcher.broadcast("setImages",X._availableImages),X.fire(new e.Event("data",{dataType:"style"}))})},z.prototype._validateLayer=function(U){var X=this.sourceCaches[U.source];if(X){var fe=U.sourceLayer;if(fe){var ye=X.getSource();("geojson"===ye.type||ye.vectorLayerIds&&-1===ye.vectorLayerIds.indexOf(fe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+ye.id+'" as specified by style layer "'+U.id+'"')))}}},z.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var U in this.sourceCaches)if(!this.sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()},z.prototype._serializeLayers=function(U){for(var X=[],fe=0,ye=U;fe<ye.length;fe+=1){var ke=this._layers[ye[fe]];"custom"!==ke.type&&X.push(ke.serialize())}return X},z.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var U in this.sourceCaches)if(this.sourceCaches[U].hasTransition())return!0;for(var X in this._layers)if(this._layers[X].hasTransition())return!0;return!1},z.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},z.prototype.update=function(U){if(this._loaded){var X=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),ye=Object.keys(this._removedLayers);for(var we in(fe.length||ye.length)&&this._updateWorkerLayers(fe,ye),this._updatedSources){var ke=this._updatedSources[we];"reload"===ke?this._reloadSource(we):"clear"===ke&&this._clearSource(we)}for(var Pe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Pe].updateTransitions(U);this.light.updateTransitions(U),this._resetUpdates()}for(var Ze in this.sourceCaches)this.sourceCaches[Ze].used=!1;for(var nt=0,ht=this._order;nt<ht.length;nt+=1){var jt=this._layers[ht[nt]];jt.recalculate(U,this._availableImages),!jt.isHidden(U.zoom)&&jt.source&&(this.sourceCaches[jt.source].used=!0)}this.light.recalculate(U),this.z=U.zoom,X&&this.fire(new e.Event("data",{dataType:"style"}))}},z.prototype._updateTilesForChangedImages=function(){var U=Object.keys(this._changedImages);if(U.length){for(var X in this.sourceCaches)this.sourceCaches[X].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}},z.prototype._updateWorkerLayers=function(U,X){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:X})},z.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},z.prototype.setState=function(U){var X=this;if(this._checkLoaded(),Mr(this,e.validateStyle(U)))return!1;(U=e.clone$1(U)).layers=Wt(U.layers);var fe=function un(O,z){if(!O)return[{command:zt.setStyle,args:[z]}];var U=[];try{if(!e.deepEqual(O.version,z.version))return[{command:zt.setStyle,args:[z]}];e.deepEqual(O.center,z.center)||U.push({command:zt.setCenter,args:[z.center]}),e.deepEqual(O.zoom,z.zoom)||U.push({command:zt.setZoom,args:[z.zoom]}),e.deepEqual(O.bearing,z.bearing)||U.push({command:zt.setBearing,args:[z.bearing]}),e.deepEqual(O.pitch,z.pitch)||U.push({command:zt.setPitch,args:[z.pitch]}),e.deepEqual(O.sprite,z.sprite)||U.push({command:zt.setSprite,args:[z.sprite]}),e.deepEqual(O.glyphs,z.glyphs)||U.push({command:zt.setGlyphs,args:[z.glyphs]}),e.deepEqual(O.transition,z.transition)||U.push({command:zt.setTransition,args:[z.transition]}),e.deepEqual(O.light,z.light)||U.push({command:zt.setLight,args:[z.light]});var X={},fe=[];!function(we,ke,Pe,Ze){var nt;for(nt in ke=ke||{},we=we||{})we.hasOwnProperty(nt)&&(ke.hasOwnProperty(nt)||Ne(nt,Pe,Ze));for(nt in ke)ke.hasOwnProperty(nt)&&(we.hasOwnProperty(nt)?e.deepEqual(we[nt],ke[nt])||("geojson"===we[nt].type&&"geojson"===ke[nt].type&&yt(we,ke,nt)?Pe.push({command:zt.setGeoJSONSourceData,args:[nt,ke[nt].data]}):ot(nt,ke,Pe,Ze)):Ht(nt,ke,Pe))}(O.sources,z.sources,fe,X);var ye=[];O.layers&&O.layers.forEach(function(we){X[we.source]?U.push({command:zt.removeLayer,args:[we.id]}):ye.push(we)}),U=U.concat(fe),function(we,ke,Pe){ke=ke||[];var Ze,nt,ht,St,jt,Lt,Ft,kt=(we=we||[]).map(Vt),Xt=ke.map(Vt),Gt=we.reduce(ln,{}),Qt=ke.reduce(ln,{}),gn=kt.slice(),kn=Object.create(null);for(Ze=0,nt=0;Ze<kt.length;Ze++)Qt.hasOwnProperty(ht=kt[Ze])?nt++:(Pe.push({command:zt.removeLayer,args:[ht]}),gn.splice(gn.indexOf(ht,nt),1));for(Ze=0,nt=0;Ze<Xt.length;Ze++)gn[gn.length-1-Ze]!==(ht=Xt[Xt.length-1-Ze])&&(Gt.hasOwnProperty(ht)?(Pe.push({command:zt.removeLayer,args:[ht]}),gn.splice(gn.lastIndexOf(ht,gn.length-nt),1)):nt++,Pe.push({command:zt.addLayer,args:[Qt[ht],Lt=gn[gn.length-Ze]]}),gn.splice(gn.length-Ze,0,ht),kn[ht]=!0);for(Ze=0;Ze<Xt.length;Ze++)if(St=Gt[ht=Xt[Ze]],jt=Qt[ht],!kn[ht]&&!e.deepEqual(St,jt))if(e.deepEqual(St.source,jt.source)&&e.deepEqual(St["source-layer"],jt["source-layer"])&&e.deepEqual(St.type,jt.type)){for(Ft in It(St.layout,jt.layout,Pe,ht,null,zt.setLayoutProperty),It(St.paint,jt.paint,Pe,ht,null,zt.setPaintProperty),e.deepEqual(St.filter,jt.filter)||Pe.push({command:zt.setFilter,args:[ht,jt.filter]}),e.deepEqual(St.minzoom,jt.minzoom)&&e.deepEqual(St.maxzoom,jt.maxzoom)||Pe.push({command:zt.setLayerZoomRange,args:[ht,jt.minzoom,jt.maxzoom]}),St)St.hasOwnProperty(Ft)&&"layout"!==Ft&&"paint"!==Ft&&"filter"!==Ft&&"metadata"!==Ft&&"minzoom"!==Ft&&"maxzoom"!==Ft&&(0===Ft.indexOf("paint.")?It(St[Ft],jt[Ft],Pe,ht,Ft.slice(6),zt.setPaintProperty):e.deepEqual(St[Ft],jt[Ft])||Pe.push({command:zt.setLayerProperty,args:[ht,Ft,jt[Ft]]}));for(Ft in jt)jt.hasOwnProperty(Ft)&&!St.hasOwnProperty(Ft)&&"layout"!==Ft&&"paint"!==Ft&&"filter"!==Ft&&"metadata"!==Ft&&"minzoom"!==Ft&&"maxzoom"!==Ft&&(0===Ft.indexOf("paint.")?It(St[Ft],jt[Ft],Pe,ht,Ft.slice(6),zt.setPaintProperty):e.deepEqual(St[Ft],jt[Ft])||Pe.push({command:zt.setLayerProperty,args:[ht,Ft,jt[Ft]]}))}else Pe.push({command:zt.removeLayer,args:[ht]}),Lt=gn[gn.lastIndexOf(ht)+1],Pe.push({command:zt.addLayer,args:[jt,Lt]})}(ye,z.layers,U)}catch(we){console.warn("Unable to compute style diff:",we),U=[{command:zt.setStyle,args:[z]}]}return U}(this.serialize(),U).filter(function(we){return!(we.command in zr)});if(0===fe.length)return!1;var ye=fe.filter(function(we){return!(we.command in vr)});if(ye.length>0)throw new Error("Unimplemented: "+ye.map(function(we){return we.command}).join(", ")+".");return fe.forEach(function(we){"setTransition"!==we.command&&X[we.command].apply(X,we.args)}),this.stylesheet=U,!0},z.prototype.addImage=function(U,X){if(this.getImage(U))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(U,X),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.updateImage=function(U,X){this.imageManager.updateImage(U,X)},z.prototype.getImage=function(U){return this.imageManager.getImage(U)},z.prototype.removeImage=function(U){if(!this.getImage(U))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(U),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},z.prototype.addSource=function(U,X,fe){var ye=this;if(void 0===fe&&(fe={}),this._checkLoaded(),void 0!==this.sourceCaches[U])throw new Error("There is already a source with this ID");if(!X.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(X).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(X.type)>=0&&this._validate(e.validateStyle.source,"sources."+U,X,null,fe))){this.map&&this.map._collectResourceTiming&&(X.collectResourceTiming=!0);var we=this.sourceCaches[U]=new Ke(U,X,this.dispatcher);we.style=this,we.setEventedParent(this,function(){return{isSourceLoaded:ye.loaded(),source:we.serialize(),sourceId:U}}),we.onAdd(this.map),this._changed=!0}},z.prototype.removeSource=function(U){if(this._checkLoaded(),void 0===this.sourceCaches[U])throw new Error("There is no source with this ID");for(var X in this._layers)if(this._layers[X].source===U)return this.fire(new e.ErrorEvent(new Error('Source "'+U+'" cannot be removed while layer "'+X+'" is using it.')));var fe=this.sourceCaches[U];delete this.sourceCaches[U],delete this._updatedSources[U],fe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},z.prototype.setGeoJSONSourceData=function(U,X){this._checkLoaded(),this.sourceCaches[U].getSource().setData(X),this._changed=!0},z.prototype.getSource=function(U){return this.sourceCaches[U]&&this.sourceCaches[U].getSource()},z.prototype.addLayer=function(U,X,fe){void 0===fe&&(fe={}),this._checkLoaded();var ye=U.id;if(this.getLayer(ye))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ye+'" already exists on this map')));else{var we;if("custom"===U.type){if(Mr(this,e.validateCustomStyleLayer(U)))return;we=e.createStyleLayer(U)}else{if("object"==typeof U.source&&(this.addSource(ye,U.source),U=e.clone$1(U),U=e.extend(U,{source:ye})),this._validate(e.validateStyle.layer,"layers."+ye,U,{arrayIndex:-1},fe))return;we=e.createStyleLayer(U),this._validateLayer(we),we.setEventedParent(this,{layer:{id:ye}}),this._serializedLayers[we.id]=we.serialize()}var ke=X?this._order.indexOf(X):this._order.length;if(X&&-1===ke)this.fire(new e.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.')));else{if(this._order.splice(ke,0,ye),this._layerOrderChanged=!0,this._layers[ye]=we,this._removedLayers[ye]&&we.source&&"custom"!==we.type){var Pe=this._removedLayers[ye];delete this._removedLayers[ye],Pe.type!==we.type?this._updatedSources[we.source]="clear":(this._updatedSources[we.source]="reload",this.sourceCaches[we.source].pause())}this._updateLayer(we),we.onAdd&&we.onAdd(this.map)}}},z.prototype.moveLayer=function(U,X){if(this._checkLoaded(),this._changed=!0,this._layers[U]){if(U!==X){var fe=this._order.indexOf(U);this._order.splice(fe,1);var ye=X?this._order.indexOf(X):this._order.length;X&&-1===ye?this.fire(new e.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.'))):(this._order.splice(ye,0,U),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be moved.")))},z.prototype.removeLayer=function(U){this._checkLoaded();var X=this._layers[U];if(X){X.setEventedParent(null);var fe=this._order.indexOf(U);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=X,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],X.onRemove&&X.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be removed.")))},z.prototype.getLayer=function(U){return this._layers[U]},z.prototype.hasLayer=function(U){return U in this._layers},z.prototype.setLayerZoomRange=function(U,X,fe){this._checkLoaded();var ye=this.getLayer(U);ye?ye.minzoom===X&&ye.maxzoom===fe||(null!=X&&(ye.minzoom=X),null!=fe&&(ye.maxzoom=fe),this._updateLayer(ye)):this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot have zoom extent.")))},z.prototype.setFilter=function(U,X,fe){void 0===fe&&(fe={}),this._checkLoaded();var ye=this.getLayer(U);if(ye){if(!e.deepEqual(ye.filter,X))return null==X?(ye.filter=void 0,void this._updateLayer(ye)):void(this._validate(e.validateStyle.filter,"layers."+ye.id+".filter",X,null,fe)||(ye.filter=e.clone$1(X),this._updateLayer(ye)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be filtered.")))},z.prototype.getFilter=function(U){return e.clone$1(this.getLayer(U).filter)},z.prototype.setLayoutProperty=function(U,X,fe,ye){void 0===ye&&(ye={}),this._checkLoaded();var we=this.getLayer(U);we?e.deepEqual(we.getLayoutProperty(X),fe)||(we.setLayoutProperty(X,fe,ye),this._updateLayer(we)):this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getLayoutProperty=function(U,X){var fe=this.getLayer(U);if(fe)return fe.getLayoutProperty(X);this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style.")))},z.prototype.setPaintProperty=function(U,X,fe,ye){void 0===ye&&(ye={}),this._checkLoaded();var we=this.getLayer(U);we?e.deepEqual(we.getPaintProperty(X),fe)||(we.setPaintProperty(X,fe,ye)&&this._updateLayer(we),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getPaintProperty=function(U,X){return this.getLayer(U).getPaintProperty(X)},z.prototype.setFeatureState=function(U,X){this._checkLoaded();var fe=U.source,ye=U.sourceLayer,we=this.sourceCaches[fe];if(void 0!==we){var ke=we.getSource().type;"geojson"===ke&&ye?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ke||ye?(void 0===U.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),we.setFeatureState(ye,U.id,X)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},z.prototype.removeFeatureState=function(U,X){this._checkLoaded();var fe=U.source,ye=this.sourceCaches[fe];if(void 0!==ye){var we=ye.getSource().type,ke="vector"===we?U.sourceLayer:void 0;"vector"!==we||ke?X&&"string"!=typeof U.id&&"number"!=typeof U.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ye.removeFeatureState(ke,U.id,X):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},z.prototype.getFeatureState=function(U){this._checkLoaded();var X=U.source,fe=U.sourceLayer,ye=this.sourceCaches[X];if(void 0!==ye){if("vector"!==ye.getSource().type||fe)return void 0===U.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ye.getFeatureState(fe,U.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+X+"' does not exist in the map's style.")))},z.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},z.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(U){return U.serialize()}),layers:this._serializeLayers(this._order)},function(U){return void 0!==U})},z.prototype._updateLayer=function(U){this._updatedLayers[U.id]=!0,U.source&&!this._updatedSources[U.source]&&"raster"!==this.sourceCaches[U.source].getSource().type&&(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause()),this._changed=!0},z.prototype._flattenAndSortRenderedFeatures=function(U){for(var X=this,fe=function(Dr){return"fill-extrusion"===X._layers[Dr].type},ye={},we=[],ke=this._order.length-1;ke>=0;ke--){var Pe=this._order[ke];if(fe(Pe)){ye[Pe]=ke;for(var Ze=0,nt=U;Ze<nt.length;Ze+=1){var ht=nt[Ze][Pe];if(ht)for(var St=0,jt=ht;St<jt.length;St+=1)we.push(jt[St])}}}we.sort(function(Dr,Cr){return Cr.intersectionZ-Dr.intersectionZ});for(var Ft=[],kt=this._order.length-1;kt>=0;kt--){var Xt=this._order[kt];if(fe(Xt))for(var Gt=we.length-1;Gt>=0;Gt--){var Qt=we[Gt].feature;if(ye[Qt.layer.id]<kt)break;Ft.push(Qt),we.pop()}else for(var gn=0,kn=U;gn<kn.length;gn+=1){var jn=kn[gn][Xt];if(jn)for(var Nn=0,mr=jn;Nn<mr.length;Nn+=1)Ft.push(mr[Nn].feature)}}return Ft},z.prototype.queryRenderedFeatures=function(U,X,fe){X&&X.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",X.filter,null,X);var ye={};if(X&&X.layers){if(!Array.isArray(X.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var we=0,ke=X.layers;we<ke.length;we+=1){var Pe=ke[we],Ze=this._layers[Pe];if(!Ze)return this.fire(new e.ErrorEvent(new Error("The layer '"+Pe+"' does not exist in the map's style and cannot be queried for features."))),[];ye[Ze.source]=!0}}var nt=[];for(var ht in X.availableImages=this._availableImages,this.sourceCaches)X.layers&&!ye[ht]||nt.push(W(this.sourceCaches[ht],this._layers,this._serializedLayers,U,X,fe));return this.placement&&nt.push(function(St,jt,Lt,Ft,kt,Xt,Gt){for(var Qt={},gn=Xt.queryRenderedSymbols(Ft),kn=[],jn=0,Nn=Object.keys(gn).map(Number);jn<Nn.length;jn+=1)kn.push(Gt[Nn[jn]]);kn.sort(ae);for(var gr=function(){var Oi=Cr[Dr],ar=Oi.featureIndex.lookupSymbolFeatures(gn[Oi.bucketInstanceId],jt,Oi.bucketIndex,Oi.sourceLayerIndex,kt.filter,kt.layers,kt.availableImages,St);for(var Gr in ar){var _i=Qt[Gr]=Qt[Gr]||[],gi=ar[Gr];gi.sort(function(Mi,qi){var Ii=Oi.featureSortOrder;if(Ii){var da=Ii.indexOf(Mi.featureIndex);return Ii.indexOf(qi.featureIndex)-da}return qi.featureIndex-Mi.featureIndex});for(var Ai=0,Bi=gi;Ai<Bi.length;Ai+=1)_i.push(Bi[Ai])}},Dr=0,Cr=kn;Dr<Cr.length;Dr+=1)gr();var fi=function(Oi){Qt[Oi].forEach(function(ar){var Gr=ar.feature,gi=Lt[St[Oi].source].getFeatureState(Gr.layer["source-layer"],Gr.id);Gr.source=Gr.layer.source,Gr.layer["source-layer"]&&(Gr.sourceLayer=Gr.layer["source-layer"]),Gr.state=gi})};for(var bi in Qt)fi(bi);return Qt}(this._layers,this._serializedLayers,this.sourceCaches,U,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(nt)},z.prototype.querySourceFeatures=function(U,X){X&&X.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",X.filter,null,X);var fe=this.sourceCaches[U];return fe?function(ye,we){for(var ke=ye.getRenderableIds().map(function(jt){return ye.getTileByID(jt)}),Pe=[],Ze={},nt=0;nt<ke.length;nt++){var ht=ke[nt],St=ht.tileID.canonical.key;Ze[St]||(Ze[St]=!0,ht.querySourceFeatures(Pe,we))}return Pe}(fe,X):[]},z.prototype.addSourceType=function(U,X,fe){return z.getSourceType(U)?fe(new Error('A source type called "'+U+'" already exists.')):(z.setSourceType(U,X),X.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:U,url:X.workerSourceURL},fe):fe(null,null))},z.prototype.getLight=function(){return this.light.getLight()},z.prototype.setLight=function(U,X){void 0===X&&(X={}),this._checkLoaded();var fe=this.light.getLight(),ye=!1;for(var we in U)if(!e.deepEqual(U[we],fe[we])){ye=!0;break}if(ye){var ke={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(U,X),this.light.updateTransitions(ke)}},z.prototype._validate=function(U,X,fe,ye,we){return void 0===we&&(we={}),(!we||!1!==we.validate)&&Mr(this,U.call(e.validateStyle,e.extend({key:X,style:this.serialize(),value:fe,styleSpec:e.styleSpec},ye)))},z.prototype._remove=function(){for(var U in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[U].setEventedParent(null);for(var X in this.sourceCaches)this.sourceCaches[X].clearTiles(),this.sourceCaches[X].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},z.prototype._clearSource=function(U){this.sourceCaches[U].clearTiles()},z.prototype._reloadSource=function(U){this.sourceCaches[U].resume(),this.sourceCaches[U].reload()},z.prototype._updateSources=function(U){for(var X in this.sourceCaches)this.sourceCaches[X].update(U)},z.prototype._generateCollisionBoxes=function(){for(var U in this.sourceCaches)this._reloadSource(U)},z.prototype._updatePlacement=function(U,X,fe,ye,we){void 0===we&&(we=!1);for(var ke=!1,Pe=!1,Ze={},nt=0,ht=this._order;nt<ht.length;nt+=1){var jt=this._layers[ht[nt]];if("symbol"===jt.type){if(!Ze[jt.source]){var Lt=this.sourceCaches[jt.source];Ze[jt.source]=Lt.getRenderableIds(!0).map(function(gn){return Lt.getTileByID(gn)}).sort(function(gn,kn){return kn.tileID.overscaledZ-gn.tileID.overscaledZ||(gn.tileID.isLessThan(kn.tileID)?-1:1)})}var Ft=this.crossTileSymbolIndex.addLayer(jt,Ze[jt.source],U.center.lng);ke=ke||Ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((we=we||this._layerOrderChanged||0===fe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),U.zoom))&&(this.pauseablePlacement=new On(U,this._order,we,X,fe,ye,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ze),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Pe=!0),ke&&this.pauseablePlacement.placement.setStale()),Pe||ke)for(var kt=0,Xt=this._order;kt<Xt.length;kt+=1){var Qt=this._layers[Xt[kt]];"symbol"===Qt.type&&this.placement.updateLayerOpacities(Qt,Ze[Qt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},z.prototype._releaseSymbolFadeTiles=function(){for(var U in this.sourceCaches)this.sourceCaches[U].releaseSymbolFadeTiles()},z.prototype.getImages=function(U,X,fe){this.imageManager.getImages(X.icons,fe),this._updateTilesForChangedImages();var ye=this.sourceCaches[X.source];ye&&ye.setDependencies(X.tileID.key,X.type,X.icons)},z.prototype.getGlyphs=function(U,X,fe){this.glyphManager.getGlyphs(X.stacks,fe)},z.prototype.getResource=function(U,X,fe){return e.makeRequest(X,fe)},z}(e.Evented);or.getSourceType=function(O){return j[O]},or.setSourceType=function(O,z){j[O]=z},or.registerForPluginStateChange=e.registerForPluginStateChange;var Ur=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Zr=Da("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),mi=Da("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Zi=Da("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Vi=Da("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),qr=Da("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wi=Da("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),vi=Da("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ma=Da("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$a=Da("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Na=Da("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ys=Da("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),pa=Da("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ei=Da("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ki=Da("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ui=Da("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),so=Da("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Vo=Da("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ea=Da("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Do=Da("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ba=Da("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ts=Da("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),go=Da("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Ni=Da("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Uo=Da("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),el=Da("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Il=Da("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Da(O,z){var U=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,X={};return{fragmentSource:O=O.replace(U,function(fe,ye,we,ke,Pe){return X[Pe]=!0,"define"===ye?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nvarying "+we+" "+ke+" "+Pe+";\n#else\nuniform "+we+" "+ke+" u_"+Pe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Pe+"\n    "+we+" "+ke+" "+Pe+" = u_"+Pe+";\n#endif\n"}),vertexSource:z=z.replace(U,function(fe,ye,we,ke,Pe){var Ze="float"===ke?"vec2":"vec4",nt=Pe.match(/color/)?"color":Ze;return X[Pe]?"define"===ye?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nuniform lowp float u_"+Pe+"_t;\nattribute "+we+" "+Ze+" a_"+Pe+";\nvarying "+we+" "+ke+" "+Pe+";\n#else\nuniform "+we+" "+ke+" u_"+Pe+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+Pe+" = a_"+Pe+";\n#else\n    "+we+" "+ke+" "+Pe+" = u_"+Pe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+Pe+" = unpack_mix_"+nt+"(a_"+Pe+", u_"+Pe+"_t);\n#else\n    "+we+" "+ke+" "+Pe+" = u_"+Pe+";\n#endif\n":"define"===ye?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nuniform lowp float u_"+Pe+"_t;\nattribute "+we+" "+Ze+" a_"+Pe+";\n#else\nuniform "+we+" "+ke+" u_"+Pe+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+we+" "+ke+" "+Pe+" = a_"+Pe+";\n#else\n    "+we+" "+ke+" "+Pe+" = u_"+Pe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+we+" "+ke+" "+Pe+" = unpack_mix_"+nt+"(a_"+Pe+", u_"+Pe+"_t);\n#else\n    "+we+" "+ke+" "+Pe+" = u_"+Pe+";\n#endif\n"})}}var Go=Object.freeze({__proto__:null,prelude:Zr,background:mi,backgroundPattern:Zi,circle:Vi,clippingMask:qr,heatmap:wi,heatmapTexture:vi,collisionBox:ma,collisionCircle:$a,debug:Na,fill:ys,fillOutline:pa,fillOutlinePattern:ei,fillPattern:Ki,fillExtrusion:Ui,fillExtrusionPattern:so,hillshadePrepare:Vo,hillshade:Ea,line:Do,lineGradient:Ba,linePattern:ts,lineSDF:go,raster:Ni,symbolIcon:Uo,symbolSDF:el,symbolTextAndIcon:Il}),zs=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};zs.prototype.bind=function(O,z,U,X,fe,ye,we,ke){this.context=O;for(var Pe=this.boundPaintVertexBuffers.length!==X.length,Ze=0;!Pe&&Ze<X.length;Ze++)this.boundPaintVertexBuffers[Ze]!==X[Ze]&&(Pe=!0);O.extVertexArrayObject&&this.vao&&this.boundProgram===z&&this.boundLayoutVertexBuffer===U&&!Pe&&this.boundIndexBuffer===fe&&this.boundVertexOffset===ye&&this.boundDynamicVertexBuffer===we&&this.boundDynamicVertexBuffer2===ke?(O.bindVertexArrayOES.set(this.vao),we&&we.bind(),fe&&fe.dynamicDraw&&fe.bind(),ke&&ke.bind()):this.freshBind(z,U,X,fe,ye,we,ke)},zs.prototype.freshBind=function(O,z,U,X,fe,ye,we){var ke,Pe=O.numAttributes,Ze=this.context,nt=Ze.gl;if(Ze.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ze.extVertexArrayObject.createVertexArrayOES(),Ze.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=O,this.boundLayoutVertexBuffer=z,this.boundPaintVertexBuffers=U,this.boundIndexBuffer=X,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=ye,this.boundDynamicVertexBuffer2=we;else{ke=Ze.currentNumAttributes||0;for(var ht=Pe;ht<ke;ht++)nt.disableVertexAttribArray(ht)}z.enableAttributes(nt,O);for(var St=0,jt=U;St<jt.length;St+=1)jt[St].enableAttributes(nt,O);ye&&ye.enableAttributes(nt,O),we&&we.enableAttributes(nt,O),z.bind(),z.setVertexAttribPointers(nt,O,fe);for(var Lt=0,Ft=U;Lt<Ft.length;Lt+=1){var kt=Ft[Lt];kt.bind(),kt.setVertexAttribPointers(nt,O,fe)}ye&&(ye.bind(),ye.setVertexAttribPointers(nt,O,fe)),X&&X.bind(),we&&(we.bind(),we.setVertexAttribPointers(nt,O,fe)),Ze.currentNumAttributes=Pe},zs.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var fl=function(O,z,U,X,fe){var ye=O.gl;this.program=ye.createProgram();var we=U?U.defines():[];fe&&we.push("#define OVERDRAW_INSPECTOR;");var ke=we.concat(Zr.fragmentSource,z.fragmentSource).join("\n"),Pe=we.concat(Zr.vertexSource,z.vertexSource).join("\n"),Ze=ye.createShader(ye.FRAGMENT_SHADER);if(ye.isContextLost())this.failedToCreate=!0;else{ye.shaderSource(Ze,ke),ye.compileShader(Ze),ye.attachShader(this.program,Ze);var nt=ye.createShader(ye.VERTEX_SHADER);if(ye.isContextLost())this.failedToCreate=!0;else{ye.shaderSource(nt,Pe),ye.compileShader(nt),ye.attachShader(this.program,nt);for(var ht=U?U.layoutAttributes:[],St=0;St<ht.length;St++)ye.bindAttribLocation(this.program,St,ht[St].name);ye.linkProgram(this.program),ye.deleteShader(nt),ye.deleteShader(Ze),this.numAttributes=ye.getProgramParameter(this.program,ye.ACTIVE_ATTRIBUTES),this.attributes={};for(var jt={},Lt=0;Lt<this.numAttributes;Lt++){var Ft=ye.getActiveAttrib(this.program,Lt);Ft&&(this.attributes[Ft.name]=ye.getAttribLocation(this.program,Ft.name))}for(var kt=ye.getProgramParameter(this.program,ye.ACTIVE_UNIFORMS),Xt=0;Xt<kt;Xt++){var Gt=ye.getActiveUniform(this.program,Xt);Gt&&(jt[Gt.name]=ye.getUniformLocation(this.program,Gt.name))}this.fixedUniforms=X(O,jt),this.binderUniforms=U?U.getUniforms(O,jt):[]}}};function Ts(O,z,U){var X=1/Hn(U,1,z.transform.tileZoom),fe=Math.pow(2,U.tileID.overscaledZ),ye=U.tileSize*Math.pow(2,z.transform.tileZoom)/fe,we=ye*(U.tileID.canonical.x+U.tileID.wrap*fe),ke=ye*U.tileID.canonical.y;return{u_image:0,u_texsize:U.imageAtlasTexture.size,u_scale:[X,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[we>>16,ke>>16],u_pixel_coord_lower:[65535&we,65535&ke]}}fl.prototype.draw=function(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt,ht,St,jt,Lt,Ft){var kt,Xt=O.gl;if(!this.failedToCreate){for(var Gt in O.program.set(this.program),O.setDepthMode(U),O.setStencilMode(X),O.setColorMode(fe),O.setCullFace(ye),this.fixedUniforms)this.fixedUniforms[Gt].set(we[Gt]);jt&&jt.setUniforms(O,this.binderUniforms,ht,{zoom:St});for(var Qt=(kt={},kt[Xt.LINES]=2,kt[Xt.TRIANGLES]=3,kt[Xt.LINE_STRIP]=1,kt)[z],gn=0,kn=nt.get();gn<kn.length;gn+=1){var jn=kn[gn],Nn=jn.vaos||(jn.vaos={});(Nn[ke]||(Nn[ke]=new zs)).bind(O,this,Pe,jt?jt.getPaintVertexBuffers():[],Ze,jn.vertexOffset,Lt,Ft),Xt.drawElements(z,jn.primitiveLength*Qt,Xt.UNSIGNED_SHORT,jn.primitiveOffset*Qt*2)}}};var Ka=function(O,z,U,X){var fe=z.style.light,ye=fe.properties.get("position"),we=[ye.x,ye.y,ye.z],ke=e.create$1();"viewport"===fe.properties.get("anchor")&&e.fromRotation(ke,-z.transform.angle),e.transformMat3(we,we,ke);var Pe=fe.properties.get("color");return{u_matrix:O,u_lightpos:we,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Pe.r,Pe.g,Pe.b],u_vertical_gradient:+U,u_opacity:X}},$l=function(O,z,U,X,fe,ye,we){return e.extend(Ka(O,z,U,X),Ts(ye,z,we),{u_height_factor:-Math.pow(2,fe.overscaledZ)/we.tileSize/8})},Bs=function(O){return{u_matrix:O}},Ro=function(O,z,U,X){return e.extend(Bs(O),Ts(U,z,X))},Ho=function(O,z){return{u_matrix:O,u_world:z}},js=function(O,z,U,X,fe){return e.extend(Ro(O,z,U,X),{u_world:fe})},Ss=function(O,z,U,X){var fe,ye,we=O.transform;if("map"===X.paint.get("circle-pitch-alignment")){var ke=Hn(U,1,we.zoom);fe=!0,ye=[ke,ke]}else fe=!1,ye=we.pixelsToGLUnits;return{u_camera_to_center_distance:we.cameraToCenterDistance,u_scale_with_map:+("map"===X.paint.get("circle-pitch-scale")),u_matrix:O.translatePosMatrix(z.posMatrix,U,X.paint.get("circle-translate"),X.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ye}},Ys=function(O,z,U){var X=Hn(U,1,z.zoom),fe=Math.pow(2,z.zoom-U.tileID.overscaledZ),ye=U.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:z.cameraToCenterDistance,u_pixels_to_tile_units:X,u_extrude_scale:[z.pixelsToGLUnits[0]/(X*fe),z.pixelsToGLUnits[1]/(X*fe)],u_overscale_factor:ye}},mo=function(O,z,U){return{u_matrix:O,u_inv_matrix:z,u_camera_to_center_distance:U.cameraToCenterDistance,u_viewport_size:[U.width,U.height]}},Pl=function(O,z,U){return void 0===U&&(U=1),{u_matrix:O,u_color:z,u_overlay:0,u_overlay_scale:U}},Ms=function(O){return{u_matrix:O}},tl=function(O,z,U,X){return{u_matrix:O,u_extrude_scale:Hn(z,1,U),u_intensity:X}};function Ol(O,z){var U=Math.pow(2,z.canonical.z),X=z.canonical.y;return[new e.MercatorCoordinate(0,X/U).toLngLat().lat,new e.MercatorCoordinate(0,(X+1)/U).toLngLat().lat]}var Zs=function(O,z,U){var X=O.transform;return{u_matrix:vt(O,z,U),u_ratio:1/Hn(z,1,X.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},ja=function(O,z,U){return e.extend(Zs(O,z,U),{u_image:0})},Ye=function(O,z,U,X){var fe=O.transform,ye=lt(z,fe);return{u_matrix:vt(O,z,U),u_texsize:z.imageAtlasTexture.size,u_ratio:1/Hn(z,1,fe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ye,X.fromScale,X.toScale],u_fade:X.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Je=function(O,z,U,X,fe){var we=O.lineAtlas,ke=lt(z,O.transform),Pe="round"===U.layout.get("line-cap"),Ze=we.getDash(X.from,Pe),nt=we.getDash(X.to,Pe),ht=Ze.width*fe.fromScale,St=nt.width*fe.toScale;return e.extend(Zs(O,z,U),{u_patternscale_a:[ke/ht,-Ze.height/2],u_patternscale_b:[ke/St,-nt.height/2],u_sdfgamma:we.width/(256*Math.min(ht,St)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ze.y,u_tex_y_b:nt.y,u_mix:fe.t})};function lt(O,z){return 1/Hn(O,1,z.tileZoom)}function vt(O,z,U){return O.translatePosMatrix(z.tileID.posMatrix,z,U.paint.get("line-translate"),U.paint.get("line-translate-anchor"))}var Mt=function(O,z,U,X,fe){return{u_matrix:O,u_tl_parent:z,u_scale_parent:U,u_buffer_scale:1,u_fade_t:X.mix,u_opacity:X.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(we=fe.paint.get("raster-saturation"),we>0?1-1/(1.001-we):-we),u_contrast_factor:(ye=fe.paint.get("raster-contrast"),ye>0?1/(1-ye):1+ye),u_spin_weights:wt(fe.paint.get("raster-hue-rotate"))};var ye,we};function wt(O){O*=Math.PI/180;var z=Math.sin(O),U=Math.cos(O);return[(2*U+1)/3,(-Math.sqrt(3)*z-U+1)/3,(Math.sqrt(3)*z-U+1)/3]}var Bt,cn=function(O,z,U,X,fe,ye,we,ke,Pe,Ze){var nt=fe.transform;return{u_is_size_zoom_constant:+("constant"===O||"source"===O),u_is_size_feature_constant:+("constant"===O||"camera"===O),u_size_t:z?z.uSizeT:0,u_size:z?z.uSize:0,u_camera_to_center_distance:nt.cameraToCenterDistance,u_pitch:nt.pitch/360*2*Math.PI,u_rotate_symbol:+U,u_aspect_ratio:nt.width/nt.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:ye,u_label_plane_matrix:we,u_coord_matrix:ke,u_is_text:+Pe,u_pitch_with_map:+X,u_texsize:Ze,u_texture:0}},fn=function(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt){var ht=fe.transform;return e.extend(cn(O,z,U,X,fe,ye,we,ke,Pe,Ze),{u_gamma_scale:X?Math.cos(ht._pitch)*ht.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+nt})},on=function(O,z,U,X,fe,ye,we,ke,Pe,Ze){return e.extend(fn(O,z,U,X,fe,ye,we,ke,!0,Pe,!0),{u_texsize_icon:Ze,u_texture_icon:1})},vn=function(O,z,U){return{u_matrix:O,u_opacity:z,u_color:U}},Mn=function(O,z,U,X,fe,ye){return e.extend((ke=ye,Ze=fe,nt=(Pe=U).imageManager.getPattern((we=X).from.toString()),ht=Pe.imageManager.getPattern(we.to.toString()),jt=(St=Pe.imageManager.getPixelSize()).width,Lt=St.height,Ft=Math.pow(2,Ze.tileID.overscaledZ),Xt=(kt=Ze.tileSize*Math.pow(2,Pe.transform.tileZoom)/Ft)*(Ze.tileID.canonical.x+Ze.tileID.wrap*Ft),Gt=kt*Ze.tileID.canonical.y,{u_image:0,u_pattern_tl_a:nt.tl,u_pattern_br_a:nt.br,u_pattern_tl_b:ht.tl,u_pattern_br_b:ht.br,u_texsize:[jt,Lt],u_mix:ke.t,u_pattern_size_a:nt.displaySize,u_pattern_size_b:ht.displaySize,u_scale_a:ke.fromScale,u_scale_b:ke.toScale,u_tile_units_to_pixels:1/Hn(Ze,1,Pe.transform.tileZoom),u_pixel_coord_upper:[Xt>>16,Gt>>16],u_pixel_coord_lower:[65535&Xt,65535&Gt]}),{u_matrix:O,u_opacity:z});var we,ke,Pe,Ze,nt,ht,St,jt,Lt,Ft,kt,Xt,Gt},Ln={fillExtrusion:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_lightpos:new e.Uniform3f(O,z.u_lightpos),u_lightintensity:new e.Uniform1f(O,z.u_lightintensity),u_lightcolor:new e.Uniform3f(O,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,z.u_vertical_gradient),u_opacity:new e.Uniform1f(O,z.u_opacity)}},fillExtrusionPattern:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_lightpos:new e.Uniform3f(O,z.u_lightpos),u_lightintensity:new e.Uniform1f(O,z.u_lightintensity),u_lightcolor:new e.Uniform3f(O,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,z.u_vertical_gradient),u_height_factor:new e.Uniform1f(O,z.u_height_factor),u_image:new e.Uniform1i(O,z.u_image),u_texsize:new e.Uniform2f(O,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,z.u_scale),u_fade:new e.Uniform1f(O,z.u_fade),u_opacity:new e.Uniform1f(O,z.u_opacity)}},fill:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix)}},fillPattern:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_image:new e.Uniform1i(O,z.u_image),u_texsize:new e.Uniform2f(O,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,z.u_scale),u_fade:new e.Uniform1f(O,z.u_fade)}},fillOutline:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_world:new e.Uniform2f(O,z.u_world)}},fillOutlinePattern:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_world:new e.Uniform2f(O,z.u_world),u_image:new e.Uniform1i(O,z.u_image),u_texsize:new e.Uniform2f(O,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,z.u_scale),u_fade:new e.Uniform1f(O,z.u_fade)}},circle:function(O,z){return{u_camera_to_center_distance:new e.Uniform1f(O,z.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(O,z.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(O,z.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(O,z.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(O,z.u_matrix)}},collisionBox:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_camera_to_center_distance:new e.Uniform1f(O,z.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(O,z.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(O,z.u_extrude_scale),u_overscale_factor:new e.Uniform1f(O,z.u_overscale_factor)}},collisionCircle:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_inv_matrix:new e.UniformMatrix4f(O,z.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(O,z.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(O,z.u_viewport_size)}},debug:function(O,z){return{u_color:new e.UniformColor(O,z.u_color),u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_overlay:new e.Uniform1i(O,z.u_overlay),u_overlay_scale:new e.Uniform1f(O,z.u_overlay_scale)}},clippingMask:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix)}},heatmap:function(O,z){return{u_extrude_scale:new e.Uniform1f(O,z.u_extrude_scale),u_intensity:new e.Uniform1f(O,z.u_intensity),u_matrix:new e.UniformMatrix4f(O,z.u_matrix)}},heatmapTexture:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_world:new e.Uniform2f(O,z.u_world),u_image:new e.Uniform1i(O,z.u_image),u_color_ramp:new e.Uniform1i(O,z.u_color_ramp),u_opacity:new e.Uniform1f(O,z.u_opacity)}},hillshade:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_image:new e.Uniform1i(O,z.u_image),u_latrange:new e.Uniform2f(O,z.u_latrange),u_light:new e.Uniform2f(O,z.u_light),u_shadow:new e.UniformColor(O,z.u_shadow),u_highlight:new e.UniformColor(O,z.u_highlight),u_accent:new e.UniformColor(O,z.u_accent)}},hillshadePrepare:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_image:new e.Uniform1i(O,z.u_image),u_dimension:new e.Uniform2f(O,z.u_dimension),u_zoom:new e.Uniform1f(O,z.u_zoom),u_maxzoom:new e.Uniform1f(O,z.u_maxzoom),u_unpack:new e.Uniform4f(O,z.u_unpack)}},line:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_ratio:new e.Uniform1f(O,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,z.u_units_to_pixels)}},lineGradient:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_ratio:new e.Uniform1f(O,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,z.u_units_to_pixels),u_image:new e.Uniform1i(O,z.u_image)}},linePattern:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_texsize:new e.Uniform2f(O,z.u_texsize),u_ratio:new e.Uniform1f(O,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_image:new e.Uniform1i(O,z.u_image),u_units_to_pixels:new e.Uniform2f(O,z.u_units_to_pixels),u_scale:new e.Uniform3f(O,z.u_scale),u_fade:new e.Uniform1f(O,z.u_fade)}},lineSDF:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_ratio:new e.Uniform1f(O,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,z.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(O,z.u_patternscale_a),u_patternscale_b:new e.Uniform2f(O,z.u_patternscale_b),u_sdfgamma:new e.Uniform1f(O,z.u_sdfgamma),u_image:new e.Uniform1i(O,z.u_image),u_tex_y_a:new e.Uniform1f(O,z.u_tex_y_a),u_tex_y_b:new e.Uniform1f(O,z.u_tex_y_b),u_mix:new e.Uniform1f(O,z.u_mix)}},raster:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_tl_parent:new e.Uniform2f(O,z.u_tl_parent),u_scale_parent:new e.Uniform1f(O,z.u_scale_parent),u_buffer_scale:new e.Uniform1f(O,z.u_buffer_scale),u_fade_t:new e.Uniform1f(O,z.u_fade_t),u_opacity:new e.Uniform1f(O,z.u_opacity),u_image0:new e.Uniform1i(O,z.u_image0),u_image1:new e.Uniform1i(O,z.u_image1),u_brightness_low:new e.Uniform1f(O,z.u_brightness_low),u_brightness_high:new e.Uniform1f(O,z.u_brightness_high),u_saturation_factor:new e.Uniform1f(O,z.u_saturation_factor),u_contrast_factor:new e.Uniform1f(O,z.u_contrast_factor),u_spin_weights:new e.Uniform3f(O,z.u_spin_weights)}},symbolIcon:function(O,z){return{u_is_size_zoom_constant:new e.Uniform1i(O,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,z.u_size_t),u_size:new e.Uniform1f(O,z.u_size),u_camera_to_center_distance:new e.Uniform1f(O,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,z.u_pitch),u_rotate_symbol:new e.Uniform1i(O,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,z.u_fade_change),u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,z.u_coord_matrix),u_is_text:new e.Uniform1i(O,z.u_is_text),u_pitch_with_map:new e.Uniform1i(O,z.u_pitch_with_map),u_texsize:new e.Uniform2f(O,z.u_texsize),u_texture:new e.Uniform1i(O,z.u_texture)}},symbolSDF:function(O,z){return{u_is_size_zoom_constant:new e.Uniform1i(O,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,z.u_size_t),u_size:new e.Uniform1f(O,z.u_size),u_camera_to_center_distance:new e.Uniform1f(O,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,z.u_pitch),u_rotate_symbol:new e.Uniform1i(O,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,z.u_fade_change),u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,z.u_coord_matrix),u_is_text:new e.Uniform1i(O,z.u_is_text),u_pitch_with_map:new e.Uniform1i(O,z.u_pitch_with_map),u_texsize:new e.Uniform2f(O,z.u_texsize),u_texture:new e.Uniform1i(O,z.u_texture),u_gamma_scale:new e.Uniform1f(O,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,z.u_is_halo)}},symbolTextAndIcon:function(O,z){return{u_is_size_zoom_constant:new e.Uniform1i(O,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,z.u_size_t),u_size:new e.Uniform1f(O,z.u_size),u_camera_to_center_distance:new e.Uniform1f(O,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,z.u_pitch),u_rotate_symbol:new e.Uniform1i(O,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,z.u_fade_change),u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,z.u_coord_matrix),u_is_text:new e.Uniform1i(O,z.u_is_text),u_pitch_with_map:new e.Uniform1i(O,z.u_pitch_with_map),u_texsize:new e.Uniform2f(O,z.u_texsize),u_texsize_icon:new e.Uniform2f(O,z.u_texsize_icon),u_texture:new e.Uniform1i(O,z.u_texture),u_texture_icon:new e.Uniform1i(O,z.u_texture_icon),u_gamma_scale:new e.Uniform1f(O,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,z.u_is_halo)}},background:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_opacity:new e.Uniform1f(O,z.u_opacity),u_color:new e.UniformColor(O,z.u_color)}},backgroundPattern:function(O,z){return{u_matrix:new e.UniformMatrix4f(O,z.u_matrix),u_opacity:new e.Uniform1f(O,z.u_opacity),u_image:new e.Uniform1i(O,z.u_image),u_pattern_tl_a:new e.Uniform2f(O,z.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(O,z.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(O,z.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(O,z.u_pattern_br_b),u_texsize:new e.Uniform2f(O,z.u_texsize),u_mix:new e.Uniform1f(O,z.u_mix),u_pattern_size_a:new e.Uniform2f(O,z.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(O,z.u_pattern_size_b),u_scale_a:new e.Uniform1f(O,z.u_scale_a),u_scale_b:new e.Uniform1f(O,z.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(O,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,z.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(O,z.u_tile_units_to_pixels)}}};function Pn(O,z,U,X,fe,ye,we){for(var ke=O.context,Pe=ke.gl,Ze=O.useProgram("collisionBox"),nt=[],ht=0,St=0,jt=0;jt<X.length;jt++){var Lt=X[jt],Ft=z.getTile(Lt),kt=Ft.getBucket(U);if(kt){var Xt=Lt.posMatrix;0===fe[0]&&0===fe[1]||(Xt=O.translatePosMatrix(Lt.posMatrix,Ft,fe,ye));var Gt=we?kt.textCollisionBox:kt.iconCollisionBox,Qt=kt.collisionCircleArray;if(Qt.length>0){var gn=e.create(),kn=Xt;e.mul(gn,kt.placementInvProjMatrix,O.transform.glCoordMatrix),e.mul(gn,gn,kt.placementViewportMatrix),nt.push({circleArray:Qt,circleOffset:St,transform:kn,invTransform:gn}),St=ht+=Qt.length/4}Gt&&Ze.draw(ke,Pe.LINES,gt.disabled,Be.disabled,O.colorModeForRenderPass(),Le.disabled,Ys(Xt,O.transform,Ft),U.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,null,O.transform.zoom,null,null,Gt.collisionVertexBuffer)}}if(we&&nt.length){var jn=O.useProgram("collisionCircle"),Nn=new e.StructArrayLayout2f1f2i16;Nn.resize(4*ht),Nn._trim();for(var mr=0,gr=0,Dr=nt;gr<Dr.length;gr+=1)for(var Cr=Dr[gr],fi=0;fi<Cr.circleArray.length/4;fi++){var bi=4*fi,Oi=Cr.circleArray[bi+0],ar=Cr.circleArray[bi+1],Gr=Cr.circleArray[bi+2],_i=Cr.circleArray[bi+3];Nn.emplace(mr++,Oi,ar,Gr,_i,0),Nn.emplace(mr++,Oi,ar,Gr,_i,1),Nn.emplace(mr++,Oi,ar,Gr,_i,2),Nn.emplace(mr++,Oi,ar,Gr,_i,3)}(!Bt||Bt.length<2*ht)&&(Bt=function(Ii){var da=2*Ii,Wi=new e.StructArrayLayout3ui6;Wi.resize(da),Wi._trim();for(var la=0;la<da;la++){var wa=6*la;Wi.uint16[wa+0]=4*la+0,Wi.uint16[wa+1]=4*la+1,Wi.uint16[wa+2]=4*la+2,Wi.uint16[wa+3]=4*la+2,Wi.uint16[wa+4]=4*la+3,Wi.uint16[wa+5]=4*la+0}return Wi}(ht));for(var gi=ke.createIndexBuffer(Bt,!0),Ai=ke.createVertexBuffer(Nn,e.collisionCircleLayout.members,!0),Bi=0,oa=nt;Bi<oa.length;Bi+=1){var Mi=oa[Bi],qi=mo(Mi.transform,Mi.invTransform,O.transform);jn.draw(ke,Pe.TRIANGLES,gt.disabled,Be.disabled,O.colorModeForRenderPass(),Le.disabled,qi,U.id,Ai,gi,e.SegmentVector.simpleSegment(0,2*Mi.circleOffset,Mi.circleArray.length,Mi.circleArray.length/2),null,O.transform.zoom,null,null,null)}Ai.destroy(),gi.destroy()}}var qn=e.identity(new Float32Array(16));function kr(O,z,U,X,fe,ye){var we=e.getAnchorAlignment(O),ke=-(we.horizontalAlign-.5)*z,Pe=-(we.verticalAlign-.5)*U,Ze=e.evaluateVariableOffset(O,X);return new e.Point((ke/fe+Ze[0])*ye,(Pe/fe+Ze[1])*ye)}function Fr(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt){var ht=O.text.placedSymbolArray,St=O.text.dynamicLayoutVertexArray,jt=O.icon.dynamicLayoutVertexArray,Lt={};St.clear();for(var Ft=0;Ft<ht.length;Ft++){var kt=ht.get(Ft),Gt=kt.hidden||!kt.crossTileID||O.allowVerticalPlacement&&!kt.placedOrientation?null:X[kt.crossTileID];if(Gt){var Qt=new e.Point(kt.anchorX,kt.anchorY),gn=hn(Qt,U?ke:we),kn=pn(ye.cameraToCenterDistance,gn.signedDistanceFromCamera),jn=fe.evaluateSizeForFeature(O.textSizeData,Ze,kt)*kn/e.ONE_EM;U&&(jn*=O.tilePixelRatio/Pe);for(var gr=kr(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale,jn),Dr=U?hn(Qt.add(gr),we).point:gn.point.add(z?gr.rotate(-ye.angle):gr),Cr=O.allowVerticalPlacement&&kt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,fi=0;fi<kt.numGlyphs;fi++)e.addDynamicAttributes(St,Dr,Cr);nt&&kt.associatedIconIndex>=0&&(Lt[kt.associatedIconIndex]={shiftedAnchor:Dr,angle:Cr})}else Pr(kt.numGlyphs,St)}if(nt){jt.clear();for(var bi=O.icon.placedSymbolArray,Oi=0;Oi<bi.length;Oi++){var ar=bi.get(Oi);if(ar.hidden)Pr(ar.numGlyphs,jt);else{var Gr=Lt[Oi];if(Gr)for(var _i=0;_i<ar.numGlyphs;_i++)e.addDynamicAttributes(jt,Gr.shiftedAnchor,Gr.angle);else Pr(ar.numGlyphs,jt)}}O.icon.dynamicLayoutVertexBuffer.updateData(jt)}O.text.dynamicLayoutVertexBuffer.updateData(St)}function Xr(O,z,U){return U.iconsInText&&z?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function ai(O,z,U,X,fe,ye,we,ke,Pe,Ze,nt,ht){for(var St=O.context,jt=St.gl,Lt=O.transform,Ft="map"===ke,kt="map"===Pe,Xt=Ft&&"point"!==U.layout.get("symbol-placement"),Gt=Ft&&!kt&&!Xt,Qt=void 0!==U.layout.get("symbol-sort-key").constantOr(1),gn=O.depthModeForSublayer(0,gt.ReadOnly),kn=U.layout.get("text-variable-anchor"),jn=[],Nn=0,mr=X;Nn<mr.length;Nn+=1){var gr=mr[Nn],Dr=z.getTile(gr),Cr=Dr.getBucket(U);if(Cr){var fi=fe?Cr.text:Cr.icon;if(fi&&fi.segments.get().length){var bi=fi.programConfigurations.get(U.id),Oi=fe||Cr.sdfIcons,ar=fe?Cr.textSizeData:Cr.iconSizeData,Gr=kt||0!==Lt.pitch,_i=O.useProgram(Xr(Oi,fe,Cr),bi),gi=e.evaluateSizeForZoom(ar,Lt.zoom),Ai=void 0,Bi=[0,0],oa=void 0,Mi=void 0,qi=null,Ii=void 0;if(fe)oa=Dr.glyphAtlasTexture,Mi=jt.LINEAR,Ai=Dr.glyphAtlasTexture.size,Cr.iconsInText&&(Bi=Dr.imageAtlasTexture.size,qi=Dr.imageAtlasTexture,Ii=Gr||O.options.rotating||O.options.zooming||"composite"===ar.kind||"camera"===ar.kind?jt.LINEAR:jt.NEAREST);else{var Wi=1!==U.layout.get("icon-size").constantOr(0)||Cr.iconsNeedLinear;oa=Dr.imageAtlasTexture,Mi=Oi||O.options.rotating||O.options.zooming||Wi||Gr?jt.LINEAR:jt.NEAREST,Ai=Dr.imageAtlasTexture.size}var la=Hn(Dr,1,O.transform.zoom),wa=Zn(gr.posMatrix,kt,Ft,O.transform,la),eo=An(gr.posMatrix,kt,Ft,O.transform,la),Po=kn&&Cr.hasTextData(),ko="none"!==U.layout.get("icon-text-fit")&&Po&&Cr.hasIconData();Xt&&En(Cr,gr.posMatrix,O,fe,wa,eo,kt,Ze);var Wa=O.translatePosMatrix(gr.posMatrix,Dr,ye,we),zo=Xt||fe&&kn||ko?qn:wa,vo=O.translatePosMatrix(eo,Dr,ye,we,!0),ea=Oi&&0!==U.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1),Ko={program:_i,buffers:fi,uniformValues:Oi?Cr.iconsInText?on(ar.kind,gi,Gt,kt,O,Wa,zo,vo,Ai,Bi):fn(ar.kind,gi,Gt,kt,O,Wa,zo,vo,fe,Ai,!0):cn(ar.kind,gi,Gt,kt,O,Wa,zo,vo,fe,Ai),atlasTexture:oa,atlasTextureIcon:qi,atlasInterpolation:Mi,atlasInterpolationIcon:Ii,isSDF:Oi,hasHalo:ea};if(Qt)for(var rl=0,ou=fi.segments.get();rl<ou.length;rl+=1){var $u=ou[rl];jn.push({segments:new e.SegmentVector([$u]),sortKey:$u.sortKey,state:Ko})}else jn.push({segments:fi.segments,sortKey:0,state:Ko})}}}Qt&&jn.sort(function(Qo,il){return Qo.sortKey-il.sortKey});for(var _f=0,qc=jn;_f<qc.length;_f+=1){var Gc=qc[_f],Jo=Gc.state;if(St.activeTexture.set(jt.TEXTURE0),Jo.atlasTexture.bind(Jo.atlasInterpolation,jt.CLAMP_TO_EDGE),Jo.atlasTextureIcon&&(St.activeTexture.set(jt.TEXTURE1),Jo.atlasTextureIcon&&Jo.atlasTextureIcon.bind(Jo.atlasInterpolationIcon,jt.CLAMP_TO_EDGE)),Jo.isSDF){var gc=Jo.uniformValues;Jo.hasHalo&&(gc.u_is_halo=1,ni(Jo.buffers,Gc.segments,U,O,Jo.program,gn,nt,ht,gc)),gc.u_is_halo=0}ni(Jo.buffers,Gc.segments,U,O,Jo.program,gn,nt,ht,Jo.uniformValues)}}function ni(O,z,U,X,fe,ye,we,ke,Pe){var Ze=X.context;fe.draw(Ze,Ze.gl.TRIANGLES,ye,we,ke,Le.disabled,Pe,U.id,O.layoutVertexBuffer,O.indexBuffer,z,U.paint,X.transform.zoom,O.programConfigurations.get(U.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function ri(O,z,U,X,fe,ye,we){var ke,Pe,Ze,nt,ht,St=O.context.gl,jt=U.paint.get("fill-pattern"),Lt=jt&&jt.constantOr(1),Ft=U.getCrossfadeParameters();we?(Pe=Lt&&!U.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ke=St.LINES):(Pe=Lt?"fillPattern":"fill",ke=St.TRIANGLES);for(var kt=0,Xt=X;kt<Xt.length;kt+=1){var Gt=Xt[kt],Qt=z.getTile(Gt);if(!Lt||Qt.patternsLoaded()){var gn=Qt.getBucket(U);if(gn){var kn=gn.programConfigurations.get(U.id),jn=O.useProgram(Pe,kn);Lt&&(O.context.activeTexture.set(St.TEXTURE0),Qt.imageAtlasTexture.bind(St.LINEAR,St.CLAMP_TO_EDGE),kn.updatePaintBuffers(Ft));var Nn=jt.constantOr(null);if(Nn&&Qt.imageAtlas){var mr=Qt.imageAtlas,gr=mr.patternPositions[Nn.to.toString()],Dr=mr.patternPositions[Nn.from.toString()];gr&&Dr&&kn.setConstantPatternPositions(gr,Dr)}var Cr=O.translatePosMatrix(Gt.posMatrix,Qt,U.paint.get("fill-translate"),U.paint.get("fill-translate-anchor"));if(we){nt=gn.indexBuffer2,ht=gn.segments2;var fi=[St.drawingBufferWidth,St.drawingBufferHeight];Ze="fillOutlinePattern"===Pe&&Lt?js(Cr,O,Ft,Qt,fi):Ho(Cr,fi)}else nt=gn.indexBuffer,ht=gn.segments,Ze=Lt?Ro(Cr,O,Ft,Qt):Bs(Cr);jn.draw(O.context,ke,fe,O.stencilModeForClipping(Gt),ye,Le.disabled,Ze,U.id,gn.layoutVertexBuffer,nt,ht,U.paint,O.transform.zoom,kn)}}}}function Hi(O,z,U,X,fe,ye,we){for(var ke=O.context,Pe=ke.gl,Ze=U.paint.get("fill-extrusion-pattern"),nt=Ze.constantOr(1),ht=U.getCrossfadeParameters(),St=U.paint.get("fill-extrusion-opacity"),jt=0,Lt=X;jt<Lt.length;jt+=1){var Ft=Lt[jt],kt=z.getTile(Ft),Xt=kt.getBucket(U);if(Xt){var Gt=Xt.programConfigurations.get(U.id),Qt=O.useProgram(nt?"fillExtrusionPattern":"fillExtrusion",Gt);nt&&(O.context.activeTexture.set(Pe.TEXTURE0),kt.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Gt.updatePaintBuffers(ht));var gn=Ze.constantOr(null);if(gn&&kt.imageAtlas){var kn=kt.imageAtlas,jn=kn.patternPositions[gn.to.toString()],Nn=kn.patternPositions[gn.from.toString()];jn&&Nn&&Gt.setConstantPatternPositions(jn,Nn)}var mr=O.translatePosMatrix(Ft.posMatrix,kt,U.paint.get("fill-extrusion-translate"),U.paint.get("fill-extrusion-translate-anchor")),gr=U.paint.get("fill-extrusion-vertical-gradient"),Dr=nt?$l(mr,O,gr,St,Ft,ht,kt):Ka(mr,O,gr,St);Qt.draw(ke,ke.gl.TRIANGLES,fe,ye,we,Le.backCCW,Dr,U.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,U.paint,O.transform.zoom,Gt)}}}function ra(O,z,U,X,fe,ye){var we=O.context,ke=we.gl,Pe=z.fbo;if(Pe){var Ze=O.useProgram("hillshade");we.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,Pe.colorAttachment.get());var nt=function(ht,St,jt){var Lt=jt.paint.get("hillshade-shadow-color"),Ft=jt.paint.get("hillshade-highlight-color"),kt=jt.paint.get("hillshade-accent-color"),Xt=jt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===jt.paint.get("hillshade-illumination-anchor")&&(Xt-=ht.transform.angle);var Gt=!ht.options.moving;return{u_matrix:ht.transform.calculatePosMatrix(St.tileID.toUnwrapped(),Gt),u_image:0,u_latrange:Ol(0,St.tileID),u_light:[jt.paint.get("hillshade-exaggeration"),Xt],u_shadow:Lt,u_highlight:Ft,u_accent:kt}}(O,z,U);Ze.draw(we,ke.TRIANGLES,X,fe,ye,Le.disabled,nt,U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}}function La(O,z,U,X,fe,ye,we){var kt,Xt,Gt,Qt,gn,ke=O.context,Pe=ke.gl,Ze=z.dem;if(Ze&&Ze.data){var nt=Ze.dim,ht=Ze.stride,St=Ze.getPixels();if(ke.activeTexture.set(Pe.TEXTURE1),ke.pixelStoreUnpackPremultiplyAlpha.set(!1),z.demTexture=z.demTexture||O.getTileTexture(ht),z.demTexture){var jt=z.demTexture;jt.update(St,{premultiply:!1}),jt.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE)}else z.demTexture=new e.Texture(ke,St,Pe.RGBA,{premultiply:!1}),z.demTexture.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE);ke.activeTexture.set(Pe.TEXTURE0);var Lt=z.fbo;if(!Lt){var Ft=new e.Texture(ke,{width:nt,height:nt,data:null},Pe.RGBA);Ft.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),(Lt=z.fbo=ke.createFramebuffer(nt,nt,!0)).colorAttachment.set(Ft.texture)}ke.bindFramebuffer.set(Lt.framebuffer),ke.viewport.set([0,0,nt,nt]),O.useProgram("hillshadePrepare").draw(ke,Pe.TRIANGLES,fe,ye,we,Le.disabled,(kt=z.tileID,Gt=X,Qt=(Xt=Ze).stride,gn=e.create(),e.ortho(gn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(gn,gn,[0,-e.EXTENT,0]),{u_matrix:gn,u_image:1,u_dimension:[Qt,Qt],u_zoom:kt.overscaledZ,u_maxzoom:Gt,u_unpack:Xt.getUnpackVector()}),U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),z.needsHillshadePrepare=!1}}function Sa(O,z,U,X,fe){var ye=X.paint.get("raster-fade-duration");if(ye>0){var we=e.browser.now(),ke=(we-O.timeAdded)/ye,Pe=z?(we-z.timeAdded)/ye:-1,Ze=U.getSource(),nt=fe.coveringZoomLevel({tileSize:Ze.tileSize,roundZoom:Ze.roundZoom}),ht=!z||Math.abs(z.tileID.overscaledZ-nt)>Math.abs(O.tileID.overscaledZ-nt),St=ht&&O.refreshedUponExpiration?1:e.clamp(ht?ke:1-Pe,0,1);return O.refreshedUponExpiration&&ke>=1&&(O.refreshedUponExpiration=!1),z?{opacity:1,mix:1-St}:{opacity:St,mix:0}}return{opacity:1,mix:0}}var Oa=new e.Color(1,0,0,1),yo=new e.Color(0,1,0,1),wo=new e.Color(0,0,1,1),Ta=new e.Color(1,0,1,1),Ga=new e.Color(0,1,1,1);function Fo(O,z,U,X){hs(O,0,z+U/2,O.transform.width,U,X)}function fs(O,z,U,X){hs(O,z-U/2,0,U,O.transform.height,X)}function hs(O,z,U,X,fe,ye){var we=O.context,ke=we.gl;ke.enable(ke.SCISSOR_TEST),ke.scissor(z*e.browser.devicePixelRatio,U*e.browser.devicePixelRatio,X*e.browser.devicePixelRatio,fe*e.browser.devicePixelRatio),we.clear({color:ye}),ke.disable(ke.SCISSOR_TEST)}function $o(O,z,U){var X=O.context,fe=X.gl,ye=U.posMatrix,we=O.useProgram("debug"),ke=gt.disabled,Pe=Be.disabled,Ze=O.colorModeForRenderPass();X.activeTexture.set(fe.TEXTURE0),O.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),we.draw(X,fe.LINE_STRIP,ke,Pe,Ze,Le.disabled,Pl(ye,e.Color.red),"$debug",O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments);var nt=z.getTileByID(U.key).latestRawTileData,St=Math.floor((nt&&nt.byteLength||0)/1024),jt=z.getTile(U).tileSize,Lt=512/Math.min(jt,512)*(U.overscaledZ/O.transform.zoom)*.5,Ft=U.canonical.toString();U.overscaledZ!==U.canonical.z&&(Ft+=" => "+U.overscaledZ),function(kt,Xt){kt.initDebugOverlayCanvas();var Gt=kt.debugOverlayCanvas,Qt=kt.context.gl,gn=kt.debugOverlayCanvas.getContext("2d");gn.clearRect(0,0,Gt.width,Gt.height),gn.shadowColor="white",gn.shadowBlur=2,gn.lineWidth=1.5,gn.strokeStyle="white",gn.textBaseline="top",gn.font="bold 36px Open Sans, sans-serif",gn.fillText(Xt,5,5),gn.strokeText(Xt,5,5),kt.debugOverlayTexture.update(Gt),kt.debugOverlayTexture.bind(Qt.LINEAR,Qt.CLAMP_TO_EDGE)}(O,Ft+" "+St+"kb"),we.draw(X,fe.TRIANGLES,ke,Pe,Ve.alphaBlended,Le.disabled,Pl(ye,e.Color.transparent,Lt),"$debug",O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments)}var ds={symbol:function(O,z,U,X,fe){if("translucent"===O.renderPass){var ye=Be.disabled,we=O.colorModeForRenderPass();U.layout.get("text-variable-anchor")&&function(ke,Pe,Ze,nt,ht,St,jt){for(var Lt=Pe.transform,Ft="map"===ht,kt="map"===St,Xt=0,Gt=ke;Xt<Gt.length;Xt+=1){var Qt=Gt[Xt],gn=nt.getTile(Qt),kn=gn.getBucket(Ze);if(kn&&kn.text&&kn.text.segments.get().length){var Nn=e.evaluateSizeForZoom(kn.textSizeData,Lt.zoom),mr=Hn(gn,1,Pe.transform.zoom),gr=Zn(Qt.posMatrix,kt,Ft,Pe.transform,mr),Dr="none"!==Ze.layout.get("icon-text-fit")&&kn.hasIconData();if(Nn){var Cr=Math.pow(2,Lt.zoom-gn.tileID.overscaledZ);Fr(kn,Ft,kt,jt,e.symbolSize,Lt,gr,Qt.posMatrix,Cr,Nn,Dr)}}}}(X,O,U,z,U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),fe),0!==U.paint.get("icon-opacity").constantOr(1)&&ai(O,z,U,X,!1,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),U.layout.get("icon-rotation-alignment"),U.layout.get("icon-pitch-alignment"),U.layout.get("icon-keep-upright"),ye,we),0!==U.paint.get("text-opacity").constantOr(1)&&ai(O,z,U,X,!0,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.layout.get("text-keep-upright"),ye,we),z.map.showCollisionBoxes&&(Pn(O,z,U,X,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),!0),Pn(O,z,U,X,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),!1))}},circle:function(O,z,U,X){if("translucent"===O.renderPass){var fe=U.paint.get("circle-opacity"),ye=U.paint.get("circle-stroke-width"),we=U.paint.get("circle-stroke-opacity"),ke=void 0!==U.layout.get("circle-sort-key").constantOr(1);if(0!==fe.constantOr(1)||0!==ye.constantOr(1)&&0!==we.constantOr(1)){for(var Pe=O.context,Ze=Pe.gl,nt=O.depthModeForSublayer(0,gt.ReadOnly),ht=Be.disabled,St=O.colorModeForRenderPass(),jt=[],Lt=0;Lt<X.length;Lt++){var Ft=X[Lt],kt=z.getTile(Ft),Xt=kt.getBucket(U);if(Xt){var Gt=Xt.programConfigurations.get(U.id),Qt={programConfiguration:Gt,program:O.useProgram("circle",Gt),layoutVertexBuffer:Xt.layoutVertexBuffer,indexBuffer:Xt.indexBuffer,uniformValues:Ss(O,Ft,kt,U)};if(ke)for(var gn=0,kn=Xt.segments.get();gn<kn.length;gn+=1){var jn=kn[gn];jt.push({segments:new e.SegmentVector([jn]),sortKey:jn.sortKey,state:Qt})}else jt.push({segments:Xt.segments,sortKey:0,state:Qt})}}ke&&jt.sort(function(_i,gi){return _i.sortKey-gi.sortKey});for(var Nn=0,mr=jt;Nn<mr.length;Nn+=1){var gr=mr[Nn],Dr=gr.state;Dr.program.draw(Pe,Ze.TRIANGLES,nt,ht,St,Le.disabled,Dr.uniformValues,U.id,Dr.layoutVertexBuffer,Dr.indexBuffer,gr.segments,U.paint,O.transform.zoom,Dr.programConfiguration)}}}},heatmap:function(O,z,U,X){if(0!==U.paint.get("heatmap-opacity"))if("offscreen"===O.renderPass){var fe=O.context,ye=fe.gl,we=Be.disabled,ke=new Ve([ye.ONE,ye.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Ft,kt,Xt){var Gt=Ft.gl;Ft.activeTexture.set(Gt.TEXTURE1),Ft.viewport.set([0,0,kt.width/4,kt.height/4]);var kn,jn,Nn,mr,gr,Qt=Xt.heatmapFbo;if(Qt)Gt.bindTexture(Gt.TEXTURE_2D,Qt.colorAttachment.get()),Ft.bindFramebuffer.set(Qt.framebuffer);else{var gn=Gt.createTexture();Gt.bindTexture(Gt.TEXTURE_2D,gn),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_S,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_T,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MIN_FILTER,Gt.LINEAR),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MAG_FILTER,Gt.LINEAR),Nn=gn,mr=Qt=Xt.heatmapFbo=Ft.createFramebuffer(kt.width/4,kt.height/4,!1),(gr=(kn=Ft).gl).texImage2D(gr.TEXTURE_2D,0,gr.RGBA,(jn=kt).width/4,jn.height/4,0,gr.RGBA,kn.extRenderToTextureHalfFloat?kn.extTextureHalfFloat.HALF_FLOAT_OES:gr.UNSIGNED_BYTE,null),mr.colorAttachment.set(Nn)}})(fe,O,U),fe.clear({color:e.Color.transparent});for(var Pe=0;Pe<X.length;Pe++){var Ze=X[Pe];if(!z.hasRenderableParent(Ze)){var nt=z.getTile(Ze),ht=nt.getBucket(U);if(ht){var St=ht.programConfigurations.get(U.id);O.useProgram("heatmap",St).draw(fe,ye.TRIANGLES,gt.disabled,we,ke,Le.disabled,tl(Ze.posMatrix,nt,O.transform.zoom,U.paint.get("heatmap-intensity")),U.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,U.paint,O.transform.zoom,St)}}}fe.viewport.set([0,0,O.width,O.height])}else"translucent"===O.renderPass&&(O.context.setColorMode(O.colorModeForRenderPass()),function(Ft,kt){var Xt=Ft.context,Gt=Xt.gl,Qt=kt.heatmapFbo;if(Qt){Xt.activeTexture.set(Gt.TEXTURE0),Gt.bindTexture(Gt.TEXTURE_2D,Qt.colorAttachment.get()),Xt.activeTexture.set(Gt.TEXTURE1);var gn=kt.colorRampTexture;gn||(gn=kt.colorRampTexture=new e.Texture(Xt,kt.colorRamp,Gt.RGBA)),gn.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),Ft.useProgram("heatmapTexture").draw(Xt,Gt.TRIANGLES,gt.disabled,Be.disabled,Ft.colorModeForRenderPass(),Le.disabled,function(kn,jn,Nn,mr){var gr=e.create();e.ortho(gr,0,kn.width,kn.height,0,0,1);var Dr=kn.context.gl;return{u_matrix:gr,u_world:[Dr.drawingBufferWidth,Dr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:jn.paint.get("heatmap-opacity")}}(Ft,kt),kt.id,Ft.viewportBuffer,Ft.quadTriangleIndexBuffer,Ft.viewportSegments,kt.paint,Ft.transform.zoom)}}(O,U))},line:function(O,z,U,X){if("translucent"===O.renderPass){var fe=U.paint.get("line-opacity"),ye=U.paint.get("line-width");if(0!==fe.constantOr(1)&&0!==ye.constantOr(1)){var we=O.depthModeForSublayer(0,gt.ReadOnly),ke=O.colorModeForRenderPass(),Pe=U.paint.get("line-dasharray"),Ze=U.paint.get("line-pattern"),nt=Ze.constantOr(1),ht=U.paint.get("line-gradient"),St=U.getCrossfadeParameters(),jt=nt?"linePattern":Pe?"lineSDF":ht?"lineGradient":"line",Lt=O.context,Ft=Lt.gl,kt=!0;if(ht){Lt.activeTexture.set(Ft.TEXTURE0);var Xt=U.gradientTexture;if(!U.gradient)return;Xt||(Xt=U.gradientTexture=new e.Texture(Lt,U.gradient,Ft.RGBA)),Xt.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE)}for(var Gt=0,Qt=X;Gt<Qt.length;Gt+=1){var gn=Qt[Gt],kn=z.getTile(gn);if(!nt||kn.patternsLoaded()){var jn=kn.getBucket(U);if(jn){var Nn=jn.programConfigurations.get(U.id),mr=O.context.program.get(),gr=O.useProgram(jt,Nn),Dr=kt||gr.program!==mr,Cr=Ze.constantOr(null);if(Cr&&kn.imageAtlas){var fi=kn.imageAtlas,bi=fi.patternPositions[Cr.to.toString()],Oi=fi.patternPositions[Cr.from.toString()];bi&&Oi&&Nn.setConstantPatternPositions(bi,Oi)}var ar=nt?Ye(O,kn,U,St):Pe?Je(O,kn,U,Pe,St):ht?ja(O,kn,U):Zs(O,kn,U);nt?(Lt.activeTexture.set(Ft.TEXTURE0),kn.imageAtlasTexture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),Nn.updatePaintBuffers(St)):Pe&&(Dr||O.lineAtlas.dirty)&&(Lt.activeTexture.set(Ft.TEXTURE0),O.lineAtlas.bind(Lt)),gr.draw(Lt,Ft.TRIANGLES,we,O.stencilModeForClipping(gn),ke,Le.disabled,ar,U.id,jn.layoutVertexBuffer,jn.indexBuffer,jn.segments,U.paint,O.transform.zoom,Nn),kt=!1}}}}}},fill:function(O,z,U,X){var fe=U.paint.get("fill-color"),ye=U.paint.get("fill-opacity");if(0!==ye.constantOr(1)){var we=O.colorModeForRenderPass(),ke=U.paint.get("fill-pattern"),Pe=O.opaquePassEnabledForLayer()&&!ke.constantOr(1)&&1===fe.constantOr(e.Color.transparent).a&&1===ye.constantOr(0)?"opaque":"translucent";if(O.renderPass===Pe){var Ze=O.depthModeForSublayer(1,"opaque"===O.renderPass?gt.ReadWrite:gt.ReadOnly);ri(O,z,U,X,Ze,we,!1)}if("translucent"===O.renderPass&&U.paint.get("fill-antialias")){var nt=O.depthModeForSublayer(U.getPaintProperty("fill-outline-color")?2:0,gt.ReadOnly);ri(O,z,U,X,nt,we,!0)}}},"fill-extrusion":function(O,z,U,X){var fe=U.paint.get("fill-extrusion-opacity");if(0!==fe&&"translucent"===O.renderPass){var ye=new gt(O.context.gl.LEQUAL,gt.ReadWrite,O.depthRangeFor3D);if(1!==fe||U.paint.get("fill-extrusion-pattern").constantOr(1))Hi(O,z,U,X,ye,Be.disabled,Ve.disabled),Hi(O,z,U,X,ye,O.stencilModeFor3D(),O.colorModeForRenderPass());else{var we=O.colorModeForRenderPass();Hi(O,z,U,X,ye,Be.disabled,we)}}},hillshade:function(O,z,U,X){if("offscreen"===O.renderPass||"translucent"===O.renderPass){for(var fe=O.context,ye=z.getSource().maxzoom,we=O.depthModeForSublayer(0,gt.ReadOnly),ke=O.colorModeForRenderPass(),Pe="translucent"===O.renderPass?O.stencilConfigForOverlap(X):[{},X],Ze=Pe[0],nt=0,ht=Pe[1];nt<ht.length;nt+=1){var St=ht[nt],jt=z.getTile(St);jt.needsHillshadePrepare&&"offscreen"===O.renderPass?La(O,jt,U,ye,we,Be.disabled,ke):"translucent"===O.renderPass&&ra(O,jt,U,we,Ze[St.overscaledZ],ke)}fe.viewport.set([0,0,O.width,O.height])}},raster:function(O,z,U,X){if("translucent"===O.renderPass&&0!==U.paint.get("raster-opacity")&&X.length)for(var fe=O.context,ye=fe.gl,we=z.getSource(),ke=O.useProgram("raster"),Pe=O.colorModeForRenderPass(),Ze=we instanceof $?[{},X]:O.stencilConfigForOverlap(X),nt=Ze[0],ht=Ze[1],St=ht[ht.length-1].overscaledZ,jt=!O.options.moving,Lt=0,Ft=ht;Lt<Ft.length;Lt+=1){var kt=Ft[Lt],Xt=O.depthModeForSublayer(kt.overscaledZ-St,1===U.paint.get("raster-opacity")?gt.ReadWrite:gt.ReadOnly,ye.LESS),Gt=z.getTile(kt),Qt=O.transform.calculatePosMatrix(kt.toUnwrapped(),jt);Gt.registerFadeDuration(U.paint.get("raster-fade-duration"));var gn=z.findLoadedParent(kt,0),kn=Sa(Gt,gn,z,U,O.transform),jn=void 0,Nn=void 0,mr="nearest"===U.paint.get("raster-resampling")?ye.NEAREST:ye.LINEAR;fe.activeTexture.set(ye.TEXTURE0),Gt.texture.bind(mr,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(ye.TEXTURE1),gn?(gn.texture.bind(mr,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),jn=Math.pow(2,gn.tileID.overscaledZ-Gt.tileID.overscaledZ),Nn=[Gt.tileID.canonical.x*jn%1,Gt.tileID.canonical.y*jn%1]):Gt.texture.bind(mr,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST);var gr=Mt(Qt,Nn||[0,0],jn||1,kn,U);we instanceof $?ke.draw(fe,ye.TRIANGLES,Xt,Be.disabled,Pe,Le.disabled,gr,U.id,we.boundsBuffer,O.quadTriangleIndexBuffer,we.boundsSegments):ke.draw(fe,ye.TRIANGLES,Xt,nt[kt.overscaledZ],Pe,Le.disabled,gr,U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,z,U){var X=U.paint.get("background-color"),fe=U.paint.get("background-opacity");if(0!==fe){var ye=O.context,we=ye.gl,ke=O.transform,Pe=ke.tileSize,Ze=U.paint.get("background-pattern");if(!O.isPatternMissing(Ze)){var nt=!Ze&&1===X.a&&1===fe&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass===nt){var ht=Be.disabled,St=O.depthModeForSublayer(0,"opaque"===nt?gt.ReadWrite:gt.ReadOnly),jt=O.colorModeForRenderPass(),Lt=O.useProgram(Ze?"backgroundPattern":"background"),Ft=ke.coveringTiles({tileSize:Pe});Ze&&(ye.activeTexture.set(we.TEXTURE0),O.imageManager.bind(O.context));for(var kt=U.getCrossfadeParameters(),Xt=0,Gt=Ft;Xt<Gt.length;Xt+=1){var Qt=Gt[Xt],gn=O.transform.calculatePosMatrix(Qt.toUnwrapped()),kn=Ze?Mn(gn,fe,O,Ze,{tileID:Qt,tileSize:Pe},kt):vn(gn,fe,X);Lt.draw(ye,we.TRIANGLES,St,ht,jt,Le.disabled,kn,U.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}}}},debug:function(O,z,U){for(var X=0;X<U.length;X++)$o(O,z,U[X])},custom:function(O,z,U){var X=O.context,fe=U.implementation;if("offscreen"===O.renderPass){var ye=fe.prerender;ye&&(O.setCustomLayerDefaults(),X.setColorMode(O.colorModeForRenderPass()),ye.call(fe,X.gl,O.transform.customLayerMatrix()),X.setDirty(),O.setBaseState())}else if("translucent"===O.renderPass){O.setCustomLayerDefaults(),X.setColorMode(O.colorModeForRenderPass()),X.setStencilMode(Be.disabled);var we="3d"===fe.renderingMode?new gt(O.context.gl.LEQUAL,gt.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,gt.ReadOnly);X.setDepthMode(we),fe.render(X.gl,O.transform.customLayerMatrix()),X.setDirty(),O.setBaseState(),X.bindFramebuffer.set(null)}}},xa=function(O,z){this.context=new je(O),this.transform=z,this._tileTextures={},this.setup(),this.numSublayers=Ke.maxUnderzooming+Ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ur,this.gpuTimers={}};xa.prototype.resize=function(O,z){if(this.width=O*e.browser.devicePixelRatio,this.height=z*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var U=0,X=this.style._order;U<X.length;U+=1)this.style._layers[X[U]].resize()},xa.prototype.setup=function(){var O=this.context,z=new e.StructArrayLayout2i4;z.emplaceBack(0,0),z.emplaceBack(e.EXTENT,0),z.emplaceBack(0,e.EXTENT),z.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=O.createVertexBuffer(z,Ur.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var U=new e.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(e.EXTENT,0),U.emplaceBack(0,e.EXTENT),U.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=O.createVertexBuffer(U,Ur.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var X=new e.StructArrayLayout4i8;X.emplaceBack(0,0,0,0),X.emplaceBack(e.EXTENT,0,e.EXTENT,0),X.emplaceBack(0,e.EXTENT,0,e.EXTENT),X.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=O.createVertexBuffer(X,re.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=O.createVertexBuffer(fe,Ur.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ye=new e.StructArrayLayout1ui2;ye.emplaceBack(0),ye.emplaceBack(1),ye.emplaceBack(3),ye.emplaceBack(2),ye.emplaceBack(0),this.tileBorderIndexBuffer=O.createIndexBuffer(ye);var we=new e.StructArrayLayout3ui6;we.emplaceBack(0,1,2),we.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=O.createIndexBuffer(we),this.emptyTexture=new e.Texture(O,{width:1,height:1,data:new Uint8Array([0,0,0,0])},O.gl.RGBA);var ke=this.context.gl;this.stencilClearMode=new Be({func:ke.ALWAYS,mask:0},0,255,ke.ZERO,ke.ZERO,ke.ZERO)},xa.prototype.clearStencil=function(){var O=this.context,z=O.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var U=e.create();e.ortho(U,0,this.width,this.height,0,0,1),e.scale(U,U,[z.drawingBufferWidth,z.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(O,z.TRIANGLES,gt.disabled,this.stencilClearMode,Ve.disabled,Le.disabled,Ms(U),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},xa.prototype._renderTileClippingMasks=function(O,z){if(this.currentStencilSource!==O.source&&O.isTileClipped()&&z&&z.length){this.currentStencilSource=O.source;var U=this.context,X=U.gl;this.nextStencilID+z.length>256&&this.clearStencil(),U.setColorMode(Ve.disabled),U.setDepthMode(gt.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ye=0,we=z;ye<we.length;ye+=1){var ke=we[ye],Pe=this._tileClippingMaskIDs[ke.key]=this.nextStencilID++;fe.draw(U,X.TRIANGLES,gt.disabled,new Be({func:X.ALWAYS,mask:0},Pe,255,X.KEEP,X.KEEP,X.REPLACE),Ve.disabled,Le.disabled,Ms(ke.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},xa.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var O=this.nextStencilID++,z=this.context.gl;return new Be({func:z.NOTEQUAL,mask:255},O,255,z.KEEP,z.KEEP,z.REPLACE)},xa.prototype.stencilModeForClipping=function(O){var z=this.context.gl;return new Be({func:z.EQUAL,mask:255},this._tileClippingMaskIDs[O.key],0,z.KEEP,z.KEEP,z.REPLACE)},xa.prototype.stencilConfigForOverlap=function(O){var z,U=this.context.gl,X=O.sort(function(Pe,Ze){return Ze.overscaledZ-Pe.overscaledZ}),fe=X[X.length-1].overscaledZ,ye=X[0].overscaledZ-fe+1;if(ye>1){this.currentStencilSource=void 0,this.nextStencilID+ye>256&&this.clearStencil();for(var we={},ke=0;ke<ye;ke++)we[ke+fe]=new Be({func:U.GEQUAL,mask:255},ke+this.nextStencilID,255,U.KEEP,U.KEEP,U.REPLACE);return this.nextStencilID+=ye,[we,X]}return[(z={},z[fe]=Be.disabled,z),X]},xa.prototype.colorModeForRenderPass=function(){var O=this.context.gl;return this._showOverdrawInspector?new Ve([O.CONSTANT_COLOR,O.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ve.unblended:Ve.alphaBlended},xa.prototype.depthModeForSublayer=function(O,z,U){if(!this.opaquePassEnabledForLayer())return gt.disabled;var X=1-((1+this.currentLayer)*this.numSublayers+O)*this.depthEpsilon;return new gt(U||this.context.gl.LEQUAL,z,[X,X])},xa.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},xa.prototype.render=function(O,z){var U=this;this.style=O,this.options=z,this.lineAtlas=O.lineAtlas,this.imageManager=O.imageManager,this.glyphManager=O.glyphManager,this.symbolFadeChange=O.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var X=this.style._order,fe=this.style.sourceCaches;for(var ye in fe){var we=fe[ye];we.used&&we.prepare(this.context)}var ke,Pe,Ze={},nt={},ht={};for(var St in fe){var jt=fe[St];Ze[St]=jt.getVisibleCoordinates(),nt[St]=Ze[St].slice().reverse(),ht[St]=jt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Lt=0;Lt<X.length;Lt++)if(this.style._layers[X[Lt]].is3D()){this.opaquePassCutoff=Lt;break}this.renderPass="offscreen";for(var kt=0,Xt=X;kt<Xt.length;kt+=1){var Qt=this.style._layers[Xt[kt]];if(Qt.hasOffscreenPass()&&!Qt.isHidden(this.transform.zoom)){var gn=nt[Qt.source];("custom"===Qt.type||gn.length)&&this.renderLayer(this,fe[Qt.source],Qt,gn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:z.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=z.showOverdrawInspector,this.depthRangeFor3D=[0,1-(O._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=X.length-1;this.currentLayer>=0;this.currentLayer--){var kn=this.style._layers[X[this.currentLayer]],jn=fe[kn.source],Nn=Ze[kn.source];this._renderTileClippingMasks(kn,Nn),this.renderLayer(this,jn,kn,Nn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<X.length;this.currentLayer++){var mr=this.style._layers[X[this.currentLayer]],gr=fe[mr.source],Dr=("symbol"===mr.type?ht:nt)[mr.source];this._renderTileClippingMasks(mr,Ze[mr.source]),this.renderLayer(this,gr,mr,Dr)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(Cr){Cr.source&&!Cr.isHidden(U.transform.zoom)&&(Cr.source!==(Pe&&Pe.id)&&(Pe=U.style.sourceCaches[Cr.source]),(!ke||ke.getSource().maxzoom<Pe.getSource().maxzoom)&&(ke=Pe))}),ke&&ds.debug(this,ke,ke.getVisibleCoordinates())),this.options.showPadding&&function To(O){var z=O.transform.padding;Fo(O,O.transform.height-(z.top||0),3,Oa),Fo(O,z.bottom||0,3,yo),fs(O,z.left||0,3,wo),fs(O,O.transform.width-(z.right||0),3,Ta);var X,fe,ye,we,U=O.transform.centerPoint;hs(X=O,(fe=U.x)-1,(ye=O.transform.height-U.y)-10,2,20,we=Ga),hs(X,fe-10,ye-1,20,2,we)}(this),this.context.setDefault()},xa.prototype.renderLayer=function(O,z,U,X){U.isHidden(this.transform.zoom)||("background"===U.type||"custom"===U.type||X.length)&&(this.id=U.id,this.gpuTimingStart(U),ds[U.type](O,z,U,X,this.style.placement.variableOffsets),this.gpuTimingEnd())},xa.prototype.gpuTimingStart=function(O){if(this.options.gpuTiming){var z=this.context.extTimerQuery,U=this.gpuTimers[O.id];U||(U=this.gpuTimers[O.id]={calls:0,cpuTime:0,query:z.createQueryEXT()}),U.calls++,z.beginQueryEXT(z.TIME_ELAPSED_EXT,U.query)}},xa.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var O=this.context.extTimerQuery;O.endQueryEXT(O.TIME_ELAPSED_EXT)}},xa.prototype.collectGpuTimers=function(){var O=this.gpuTimers;return this.gpuTimers={},O},xa.prototype.queryGpuTimers=function(O){var z={};for(var U in O){var X=O[U],fe=this.context.extTimerQuery,ye=fe.getQueryObjectEXT(X.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(X.query),z[U]=ye}return z},xa.prototype.translatePosMatrix=function(O,z,U,X,fe){if(!U[0]&&!U[1])return O;var ye=fe?"map"===X?this.transform.angle:0:"viewport"===X?-this.transform.angle:0;if(ye){var we=Math.sin(ye),ke=Math.cos(ye);U=[U[0]*ke-U[1]*we,U[0]*we+U[1]*ke]}var Pe=[fe?U[0]:Hn(z,U[0],this.transform.zoom),fe?U[1]:Hn(z,U[1],this.transform.zoom),0],Ze=new Float32Array(16);return e.translate(Ze,O,Pe),Ze},xa.prototype.saveTileTexture=function(O){var z=this._tileTextures[O.size[0]];z?z.push(O):this._tileTextures[O.size[0]]=[O]},xa.prototype.getTileTexture=function(O){var z=this._tileTextures[O];return z&&z.length>0?z.pop():null},xa.prototype.isPatternMissing=function(O){if(!O)return!1;if(!O.from||!O.to)return!0;var z=this.imageManager.getPattern(O.from.toString()),U=this.imageManager.getPattern(O.to.toString());return!z||!U},xa.prototype.useProgram=function(O,z){this.cache=this.cache||{};var U=""+O+(z?z.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[U]||(this.cache[U]=new fl(this.context,Go[O],z,Ln[O],this._showOverdrawInspector)),this.cache[U]},xa.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},xa.prototype.setBaseState=function(){var O=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(O.FUNC_ADD)},xa.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},xa.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _t=function(O,z){this.points=O,this.planes=z};_t.fromInvProjectionMatrix=function(O,z,U){var X=Math.pow(2,U),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(we){return e.transformMat4([],we,O)}).map(function(we){return e.scale$1([],we,1/we[3]/z*X)}),ye=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(we){var ke=e.sub([],fe[we[0]],fe[we[1]]),Pe=e.sub([],fe[we[2]],fe[we[1]]),Ze=e.normalize([],e.cross([],ke,Pe)),nt=-e.dot(Ze,fe[we[1]]);return Ze.concat(nt)});return new _t(fe,ye)};var qt=function(O,z){this.min=O,this.max=z,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};qt.prototype.quadrant=function(O){for(var z=[O%2==0,O<2],U=e.clone$2(this.min),X=e.clone$2(this.max),fe=0;fe<z.length;fe++)U[fe]=z[fe]?this.min[fe]:this.center[fe],X[fe]=z[fe]?this.center[fe]:this.max[fe];return X[2]=this.max[2],new qt(U,X)},qt.prototype.distanceX=function(O){return Math.max(Math.min(this.max[0],O[0]),this.min[0])-O[0]},qt.prototype.distanceY=function(O){return Math.max(Math.min(this.max[1],O[1]),this.min[1])-O[1]},qt.prototype.intersects=function(O){for(var z=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],U=!0,X=0;X<O.planes.length;X++){for(var fe=O.planes[X],ye=0,we=0;we<z.length;we++)ye+=e.dot$1(fe,z[we])>=0;if(0===ye)return 0;ye!==z.length&&(U=!1)}if(U)return 2;for(var ke=0;ke<3;ke++){for(var Pe=Number.MAX_VALUE,Ze=-Number.MAX_VALUE,nt=0;nt<O.points.length;nt++){var ht=O.points[nt][ke]-this.min[ke];Pe=Math.min(Pe,ht),Ze=Math.max(Ze,ht)}if(Ze<0||Pe>this.max[ke]-this.min[ke])return 0}return 1};var _n=function(O,z,U,X){if(void 0===O&&(O=0),void 0===z&&(z=0),void 0===U&&(U=0),void 0===X&&(X=0),isNaN(O)||O<0||isNaN(z)||z<0||isNaN(U)||U<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=O,this.bottom=z,this.left=U,this.right=X};_n.prototype.interpolate=function(O,z,U){return null!=z.top&&null!=O.top&&(this.top=e.number(O.top,z.top,U)),null!=z.bottom&&null!=O.bottom&&(this.bottom=e.number(O.bottom,z.bottom,U)),null!=z.left&&null!=O.left&&(this.left=e.number(O.left,z.left,U)),null!=z.right&&null!=O.right&&(this.right=e.number(O.right,z.right,U)),this},_n.prototype.getCenter=function(O,z){var U=e.clamp((this.left+O-this.right)/2,0,O),X=e.clamp((this.top+z-this.bottom)/2,0,z);return new e.Point(U,X)},_n.prototype.equals=function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right},_n.prototype.clone=function(){return new _n(this.top,this.bottom,this.left,this.right)},_n.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var nn=function(O,z,U,X,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===fe||fe,this._minZoom=O||0,this._maxZoom=z||22,this._minPitch=null==U?0:U,this._maxPitch=null==X?60:X,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={}},dn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};nn.prototype.clone=function(){var O=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O._center=this._center,O.zoom=this.zoom,O.angle=this.angle,O._fov=this._fov,O._pitch=this._pitch,O._unmodified=this._unmodified,O._edgeInsets=this._edgeInsets.clone(),O._calcMatrices(),O},dn.minZoom.get=function(){return this._minZoom},dn.minZoom.set=function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))},dn.maxZoom.get=function(){return this._maxZoom},dn.maxZoom.set=function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))},dn.minPitch.get=function(){return this._minPitch},dn.minPitch.set=function(O){this._minPitch!==O&&(this._minPitch=O,this.pitch=Math.max(this.pitch,O))},dn.maxPitch.get=function(){return this._maxPitch},dn.maxPitch.set=function(O){this._maxPitch!==O&&(this._maxPitch=O,this.pitch=Math.min(this.pitch,O))},dn.renderWorldCopies.get=function(){return this._renderWorldCopies},dn.renderWorldCopies.set=function(O){void 0===O?O=!0:null===O&&(O=!1),this._renderWorldCopies=O},dn.worldSize.get=function(){return this.tileSize*this.scale},dn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},dn.size.get=function(){return new e.Point(this.width,this.height)},dn.bearing.get=function(){return-this.angle/Math.PI*180},dn.bearing.set=function(O){var z=-e.wrap(O,-180,180)*Math.PI/180;this.angle!==z&&(this._unmodified=!1,this.angle=z,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},dn.pitch.get=function(){return this._pitch/Math.PI*180},dn.pitch.set=function(O){var z=e.clamp(O,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==z&&(this._unmodified=!1,this._pitch=z,this._calcMatrices())},dn.fov.get=function(){return this._fov/Math.PI*180},dn.fov.set=function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this._unmodified=!1,this._fov=O/180*Math.PI,this._calcMatrices())},dn.zoom.get=function(){return this._zoom},dn.zoom.set=function(O){var z=Math.min(Math.max(O,this.minZoom),this.maxZoom);this._zoom!==z&&(this._unmodified=!1,this._zoom=z,this.scale=this.zoomScale(z),this.tileZoom=Math.floor(z),this.zoomFraction=z-this.tileZoom,this._constrain(),this._calcMatrices())},dn.center.get=function(){return this._center},dn.center.set=function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this._unmodified=!1,this._center=O,this._constrain(),this._calcMatrices())},dn.padding.get=function(){return this._edgeInsets.toJSON()},dn.padding.set=function(O){this._edgeInsets.equals(O)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,O,1),this._calcMatrices())},dn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},nn.prototype.isPaddingEqual=function(O){return this._edgeInsets.equals(O)},nn.prototype.interpolatePadding=function(O,z,U){this._unmodified=!1,this._edgeInsets.interpolate(O,z,U),this._constrain(),this._calcMatrices()},nn.prototype.coveringZoomLevel=function(O){var z=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,z)},nn.prototype.getVisibleUnwrappedCoordinates=function(O){var z=[new e.UnwrappedTileID(0,O)];if(this._renderWorldCopies)for(var U=this.pointCoordinate(new e.Point(0,0)),X=this.pointCoordinate(new e.Point(this.width,0)),fe=this.pointCoordinate(new e.Point(this.width,this.height)),ye=this.pointCoordinate(new e.Point(0,this.height)),we=Math.floor(Math.min(U.x,X.x,fe.x,ye.x)),ke=Math.floor(Math.max(U.x,X.x,fe.x,ye.x)),Pe=we-1;Pe<=ke+1;Pe++)0!==Pe&&z.push(new e.UnwrappedTileID(Pe,O));return z},nn.prototype.coveringTiles=function(O){var z=this.coveringZoomLevel(O),U=z;if(void 0!==O.minzoom&&z<O.minzoom)return[];void 0!==O.maxzoom&&z>O.maxzoom&&(z=O.maxzoom);var X=e.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,z),ye=[fe*X.x,fe*X.y,0],we=_t.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z),ke=O.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ke=z);var Pe=function(Dr){return{aabb:new qt([Dr*fe,0,0],[(Dr+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Dr,fullyVisible:!1}},Ze=[],nt=[],ht=z,St=O.reparseOverscaled?U:z;if(this._renderWorldCopies)for(var jt=1;jt<=3;jt++)Ze.push(Pe(-jt)),Ze.push(Pe(jt));for(Ze.push(Pe(0));Ze.length>0;){var Lt=Ze.pop(),Ft=Lt.x,kt=Lt.y,Xt=Lt.fullyVisible;if(!Xt){var Gt=Lt.aabb.intersects(we);if(0===Gt)continue;Xt=2===Gt}var Qt=Lt.aabb.distanceX(ye),gn=Lt.aabb.distanceY(ye),kn=Math.max(Math.abs(Qt),Math.abs(gn));if(Lt.zoom===ht||kn>3+(1<<ht-Lt.zoom)-2&&Lt.zoom>=ke)nt.push({tileID:new e.OverscaledTileID(Lt.zoom===ht?St:Lt.zoom,Lt.wrap,Lt.zoom,Ft,kt),distanceSq:e.sqrLen([ye[0]-.5-Ft,ye[1]-.5-kt])});else for(var Nn=0;Nn<4;Nn++){var mr=(Ft<<1)+Nn%2,gr=(kt<<1)+(Nn>>1);Ze.push({aabb:Lt.aabb.quadrant(Nn),zoom:Lt.zoom+1,x:mr,y:gr,wrap:Lt.wrap,fullyVisible:Xt})}}return nt.sort(function(Dr,Cr){return Dr.distanceSq-Cr.distanceSq}).map(function(Dr){return Dr.tileID})},nn.prototype.resize=function(O,z){this.width=O,this.height=z,this.pixelsToGLUnits=[2/O,-2/z],this._constrain(),this._calcMatrices()},dn.unmodified.get=function(){return this._unmodified},nn.prototype.zoomScale=function(O){return Math.pow(2,O)},nn.prototype.scaleZoom=function(O){return Math.log(O)/Math.LN2},nn.prototype.project=function(O){var z=e.clamp(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(O.lng)*this.worldSize,e.mercatorYfromLat(z)*this.worldSize)},nn.prototype.unproject=function(O){return new e.MercatorCoordinate(O.x/this.worldSize,O.y/this.worldSize).toLngLat()},dn.point.get=function(){return this.project(this.center)},nn.prototype.setLocationAtPoint=function(O,z){var U=this.pointCoordinate(z),X=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(O),ye=new e.MercatorCoordinate(fe.x-(U.x-X.x),fe.y-(U.y-X.y));this.center=this.coordinateLocation(ye),this._renderWorldCopies&&(this.center=this.center.wrap())},nn.prototype.locationPoint=function(O){return this.coordinatePoint(this.locationCoordinate(O))},nn.prototype.pointLocation=function(O){return this.coordinateLocation(this.pointCoordinate(O))},nn.prototype.locationCoordinate=function(O){return e.MercatorCoordinate.fromLngLat(O)},nn.prototype.coordinateLocation=function(O){return O.toLngLat()},nn.prototype.pointCoordinate=function(O){var z=[O.x,O.y,0,1],U=[O.x,O.y,1,1];e.transformMat4(z,z,this.pixelMatrixInverse),e.transformMat4(U,U,this.pixelMatrixInverse);var X=z[3],fe=U[3],ke=z[1]/X,Pe=U[1]/fe,Ze=z[2]/X,nt=U[2]/fe,ht=Ze===nt?0:(0-Ze)/(nt-Ze);return new e.MercatorCoordinate(e.number(z[0]/X,U[0]/fe,ht)/this.worldSize,e.number(ke,Pe,ht)/this.worldSize)},nn.prototype.coordinatePoint=function(O){var z=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix),new e.Point(z[0]/z[3],z[1]/z[3])},nn.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},nn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},nn.prototype.setMaxBounds=function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},nn.prototype.calculatePosMatrix=function(O,z){void 0===z&&(z=!1);var U=O.key,X=z?this._alignedPosMatrixCache:this._posMatrixCache;if(X[U])return X[U];var fe=O.canonical,ye=this.worldSize/this.zoomScale(fe.z),we=fe.x+Math.pow(2,fe.z)*O.wrap,ke=e.identity(new Float64Array(16));return e.translate(ke,ke,[we*ye,fe.y*ye,0]),e.scale(ke,ke,[ye/e.EXTENT,ye/e.EXTENT,1]),e.multiply(ke,z?this.alignedProjMatrix:this.projMatrix,ke),X[U]=new Float32Array(ke),X[U]},nn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},nn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var O,z,U,X,fe=-90,ye=90,we=-180,ke=180,Pe=this.size,Ze=this._unmodified;if(this.latRange){var nt=this.latRange;fe=e.mercatorYfromLat(nt[1])*this.worldSize,O=(ye=e.mercatorYfromLat(nt[0])*this.worldSize)-fe<Pe.y?Pe.y/(ye-fe):0}if(this.lngRange){var ht=this.lngRange;we=e.mercatorXfromLng(ht[0])*this.worldSize,z=(ke=e.mercatorXfromLng(ht[1])*this.worldSize)-we<Pe.x?Pe.x/(ke-we):0}var St=this.point,jt=Math.max(z||0,O||0);if(jt)return this.center=this.unproject(new e.Point(z?(ke+we)/2:St.x,O?(ye+fe)/2:St.y)),this.zoom+=this.scaleZoom(jt),this._unmodified=Ze,void(this._constraining=!1);if(this.latRange){var Lt=St.y,Ft=Pe.y/2;Lt-Ft<fe&&(X=fe+Ft),Lt+Ft>ye&&(X=ye-Ft)}if(this.lngRange){var kt=St.x,Xt=Pe.x/2;kt-Xt<we&&(U=we+Xt),kt+Xt>ke&&(U=ke-Xt)}void 0===U&&void 0===X||(this.center=this.unproject(new e.Point(void 0!==U?U:St.x,void 0!==X?X:St.y))),this._unmodified=Ze,this._constraining=!1}},nn.prototype._calcMatrices=function(){if(this.height){var z=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var U=Math.PI/2+this._pitch,X=this._fov*(.5+z.y/this.height),fe=Math.sin(X)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-U-X,.01,Math.PI-.01)),ye=this.point,we=ye.x,ke=ye.y,Pe=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),Ze=this.height/50,nt=new Float64Array(16);e.perspective(nt,this._fov,this.width/this.height,Ze,Pe),nt[8]=2*-z.x/this.width,nt[9]=2*z.y/this.height,e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[0,0,-this.cameraToCenterDistance]),e.rotateX(nt,nt,this._pitch),e.rotateZ(nt,nt,this.angle),e.translate(nt,nt,[-we,-ke,0]),this.mercatorMatrix=e.scale([],nt,[this.worldSize,this.worldSize,this.worldSize]),e.scale(nt,nt,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nt,this.invProjMatrix=e.invert([],this.projMatrix);var ht=this.width%2/2,St=this.height%2/2,jt=Math.cos(this.angle),Lt=Math.sin(this.angle),Ft=we-Math.round(we)+jt*ht+Lt*St,kt=ke-Math.round(ke)+jt*St+Lt*ht,Xt=new Float64Array(nt);if(e.translate(Xt,Xt,[Ft>.5?Ft-1:Ft,kt>.5?kt-1:kt,0]),this.alignedProjMatrix=Xt,nt=e.create(),e.scale(nt,nt,[this.width/2,-this.height/2,1]),e.translate(nt,nt,[1,-1,0]),this.labelPlaneMatrix=nt,nt=e.create(),e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[-1,-1,0]),e.scale(nt,nt,[2/this.width,2/this.height,1]),this.glCoordMatrix=nt,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(nt=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=nt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},nn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new e.Point(0,0)),z=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix)[3]/this.cameraToCenterDistance},nn.prototype.getCameraPoint=function(){var z=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,z))},nn.prototype.getCameraQueryGeometry=function(O){var z=this.getCameraPoint();if(1===O.length)return[O[0],z];for(var U=z.x,X=z.y,fe=z.x,ye=z.y,we=0,ke=O;we<ke.length;we+=1){var Pe=ke[we];U=Math.min(U,Pe.x),X=Math.min(X,Pe.y),fe=Math.max(fe,Pe.x),ye=Math.max(ye,Pe.y)}return[new e.Point(U,X),new e.Point(fe,X),new e.Point(fe,ye),new e.Point(U,ye),new e.Point(U,X)]},Object.defineProperties(nn.prototype,dn);var Un=function(O){var z,X,fe,ye;this._hashName=O&&encodeURIComponent(O),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(z=this._updateHashUnthrottled.bind(this),300,X=!1,fe=null,ye=function(){fe=null,X&&(z(),fe=setTimeout(ye,300),X=!1)},function(){return X=!0,fe||ye(),fe})};Un.prototype.addTo=function(O){return this._map=O,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Un.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Un.prototype.getHashString=function(O){var z=this._map.getCenter(),U=Math.round(100*this._map.getZoom())/100,X=Math.ceil((U*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,X),ye=Math.round(z.lng*fe)/fe,we=Math.round(z.lat*fe)/fe,ke=this._map.getBearing(),Pe=this._map.getPitch(),Ze="";if(Ze+=O?"/"+ye+"/"+we+"/"+U:U+"/"+we+"/"+ye,(ke||Pe)&&(Ze+="/"+Math.round(10*ke)/10),Pe&&(Ze+="/"+Math.round(Pe)),this._hashName){var nt=this._hashName,ht=!1,St=e.window.location.hash.slice(1).split("&").map(function(jt){var Lt=jt.split("=")[0];return Lt===nt?(ht=!0,Lt+"="+Ze):jt}).filter(function(jt){return jt});return ht||St.push(nt+"="+Ze),"#"+St.join("&")}return"#"+Ze},Un.prototype._getCurrentHash=function(){var O,z=this,U=e.window.location.hash.replace("#","");return this._hashName?(U.split("&").map(function(X){return X.split("=")}).forEach(function(X){X[0]===z._hashName&&(O=X)}),(O&&O[1]||"").split("/")):U.split("/")},Un.prototype._onHashChange=function(){var O=this._getCurrentHash();if(O.length>=3&&!O.some(function(U){return isNaN(U)})){var z=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(O[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+O[2],+O[1]],zoom:+O[0],bearing:z,pitch:+(O[4]||0)}),!0}return!1},Un.prototype._updateHashUnthrottled=function(){var O=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",O)}catch(z){}};var $n={linearity:.3,easing:e.bezier(0,0,.3,1)},cr=e.extend({deceleration:2500,maxSpeed:1400},$n),Tr=e.extend({deceleration:20,maxSpeed:1400},$n),Er=e.extend({deceleration:1e3,maxSpeed:360},$n),Rr=e.extend({deceleration:1e3,maxSpeed:90},$n),jr=function(O){this._map=O,this.clear()};function _r(O,z){(!O.duration||O.duration<z.duration)&&(O.duration=z.duration,O.easing=z.easing)}function Hr(O,z,U){var X=U.maxSpeed,fe=U.linearity,ye=U.deceleration,we=e.clamp(O*fe/(z/1e3),-X,X),ke=Math.abs(we)/(ye*fe);return{easing:U.easing,duration:1e3*ke,amount:we*(ke/2)}}jr.prototype.clear=function(){this._inertiaBuffer=[]},jr.prototype.record=function(O){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:O})},jr.prototype._drainInertiaBuffer=function(){for(var O=this._inertiaBuffer,z=e.browser.now();O.length>0&&z-O[0].time>160;)O.shift()},jr.prototype._onMoveEnd=function(O){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var z={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},U=0,X=this._inertiaBuffer;U<X.length;U+=1){var fe=X[U].settings;z.zoom+=fe.zoomDelta||0,z.bearing+=fe.bearingDelta||0,z.pitch+=fe.pitchDelta||0,fe.panDelta&&z.pan._add(fe.panDelta),fe.around&&(z.around=fe.around),fe.pinchAround&&(z.pinchAround=fe.pinchAround)}var ye=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,we={};if(z.pan.mag()){var ke=Hr(z.pan.mag(),ye,e.extend({},cr,O||{}));we.offset=z.pan.mult(ke.amount/z.pan.mag()),we.center=this._map.transform.center,_r(we,ke)}if(z.zoom){var Pe=Hr(z.zoom,ye,Tr);we.zoom=this._map.transform.zoom+Pe.amount,_r(we,Pe)}if(z.bearing){var Ze=Hr(z.bearing,ye,Er);we.bearing=this._map.transform.bearing+e.clamp(Ze.amount,-179,179),_r(we,Ze)}if(z.pitch){var nt=Hr(z.pitch,ye,Rr);we.pitch=this._map.transform.pitch+nt.amount,_r(we,nt)}if(we.zoom||we.bearing){var ht=void 0===z.pinchAround?z.around:z.pinchAround;we.around=ht?this._map.unproject(ht):this._map.getCenter()}return this.clear(),e.extend(we,{noMoveStart:!0})}};var ii=function(O){function z(X,fe,ye,we){void 0===we&&(we={});var ke=i.mousePos(fe.getCanvasContainer(),ye),Pe=fe.unproject(ke);O.call(this,X,e.extend({point:ke,lngLat:Pe,originalEvent:ye},we)),this._defaultPrevented=!1,this.target=fe}O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z;var U={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,U),z}(e.Event),pi=function(O){function z(X,fe,ye){var we="touchend"===X?ye.changedTouches:ye.touches,ke=i.touchPos(fe.getCanvasContainer(),we),Pe=ke.map(function(ht){return fe.unproject(ht)}),Ze=ke.reduce(function(ht,St,jt,Lt){return ht.add(St.div(Lt.length))},new e.Point(0,0)),nt=fe.unproject(Ze);O.call(this,X,{points:ke,point:Ze,lngLats:Pe,lngLat:nt,originalEvent:ye}),this._defaultPrevented=!1}O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z;var U={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,U),z}(e.Event),Ti=function(O){function z(X,fe,ye){O.call(this,X,{originalEvent:ye}),this._defaultPrevented=!1}O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z;var U={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,U),z}(e.Event),dr=function(O,z){this._map=O,this._clickTolerance=z.clickTolerance};dr.prototype.reset=function(){delete this._mousedownPos},dr.prototype.wheel=function(O){return this._firePreventable(new Ti(O.type,this._map,O))},dr.prototype.mousedown=function(O,z){return this._mousedownPos=z,this._firePreventable(new ii(O.type,this._map,O))},dr.prototype.mouseup=function(O){this._map.fire(new ii(O.type,this._map,O))},dr.prototype.click=function(O,z){this._mousedownPos&&this._mousedownPos.dist(z)>=this._clickTolerance||this._map.fire(new ii(O.type,this._map,O))},dr.prototype.dblclick=function(O){return this._firePreventable(new ii(O.type,this._map,O))},dr.prototype.mouseover=function(O){this._map.fire(new ii(O.type,this._map,O))},dr.prototype.mouseout=function(O){this._map.fire(new ii(O.type,this._map,O))},dr.prototype.touchstart=function(O){return this._firePreventable(new pi(O.type,this._map,O))},dr.prototype.touchmove=function(O){this._map.fire(new pi(O.type,this._map,O))},dr.prototype.touchend=function(O){this._map.fire(new pi(O.type,this._map,O))},dr.prototype.touchcancel=function(O){this._map.fire(new pi(O.type,this._map,O))},dr.prototype._firePreventable=function(O){if(this._map.fire(O),O.defaultPrevented)return{}},dr.prototype.isEnabled=function(){return!0},dr.prototype.isActive=function(){return!1},dr.prototype.enable=function(){},dr.prototype.disable=function(){};var ki=function(O){this._map=O};ki.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ki.prototype.mousemove=function(O){this._map.fire(new ii(O.type,this._map,O))},ki.prototype.mousedown=function(){this._delayContextMenu=!0},ki.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ii("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ki.prototype.contextmenu=function(O){this._delayContextMenu?this._contextMenuEvent=O:this._map.fire(new ii(O.type,this._map,O)),this._map.listens("contextmenu")&&O.preventDefault()},ki.prototype.isEnabled=function(){return!0},ki.prototype.isActive=function(){return!1},ki.prototype.enable=function(){},ki.prototype.disable=function(){};var wr=function(O,z){this._map=O,this._el=O.getCanvasContainer(),this._container=O.getContainer(),this._clickTolerance=z.clickTolerance||1};function hi(O,z){for(var U={},X=0;X<O.length;X++)U[O[X].identifier]=z[X];return U}wr.prototype.isEnabled=function(){return!!this._enabled},wr.prototype.isActive=function(){return!!this._active},wr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},wr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wr.prototype.mousedown=function(O,z){this.isEnabled()&&O.shiftKey&&0===O.button&&(i.disableDrag(),this._startPos=this._lastPos=z,this._active=!0)},wr.prototype.mousemoveWindow=function(O,z){if(this._active){var U=z;if(!(this._lastPos.equals(U)||!this._box&&U.dist(this._startPos)<this._clickTolerance)){var X=this._startPos;this._lastPos=U,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",O));var fe=Math.min(X.x,U.x),ye=Math.max(X.x,U.x),we=Math.min(X.y,U.y),ke=Math.max(X.y,U.y);i.setTransform(this._box,"translate("+fe+"px,"+we+"px)"),this._box.style.width=ye-fe+"px",this._box.style.height=ke-we+"px"}}},wr.prototype.mouseupWindow=function(O,z){var U=this;if(this._active&&0===O.button){var X=this._startPos,fe=z;if(this.reset(),i.suppressClick(),X.x!==fe.x||X.y!==fe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:O})),{cameraAnimation:function(ye){return ye.fitScreenCoordinates(X,fe,U._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",O)}},wr.prototype.keydown=function(O){this._active&&27===O.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",O))},wr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},wr.prototype._fireEvent=function(O,z){return this._map.fire(new e.Event(O,{originalEvent:z}))};var Ei=function(O){this.reset(),this.numTouches=O.numTouches};Ei.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ei.prototype.touchstart=function(O,z,U){(this.centroid||U.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=O.timeStamp),U.length===this.numTouches&&(this.centroid=function(X){for(var fe=new e.Point(0,0),ye=0,we=X;ye<we.length;ye+=1)fe._add(we[ye]);return fe.div(X.length)}(z),this.touches=hi(U,z)))},Ei.prototype.touchmove=function(O,z,U){if(!this.aborted&&this.centroid){var X=hi(U,z);for(var fe in this.touches){var we=X[fe];(!we||we.dist(this.touches[fe])>30)&&(this.aborted=!0)}}},Ei.prototype.touchend=function(O,z,U){if((!this.centroid||O.timeStamp-this.startTime>500)&&(this.aborted=!0),0===U.length){var X=!this.aborted&&this.centroid;if(this.reset(),X)return X}};var Ji=function(O){this.singleTap=new Ei(O),this.numTaps=O.numTaps,this.reset()};Ji.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ji.prototype.touchstart=function(O,z,U){this.singleTap.touchstart(O,z,U)},Ji.prototype.touchmove=function(O,z,U){this.singleTap.touchmove(O,z,U)},Ji.prototype.touchend=function(O,z,U){var X=this.singleTap.touchend(O,z,U);if(X){var fe=O.timeStamp-this.lastTime<500,ye=!this.lastTap||this.lastTap.dist(X)<30;if(fe&&ye||this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var ya=function(){this._zoomIn=new Ji({numTouches:1,numTaps:2}),this._zoomOut=new Ji({numTouches:2,numTaps:1}),this.reset()};ya.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ya.prototype.touchstart=function(O,z,U){this._zoomIn.touchstart(O,z,U),this._zoomOut.touchstart(O,z,U)},ya.prototype.touchmove=function(O,z,U){this._zoomIn.touchmove(O,z,U),this._zoomOut.touchmove(O,z,U)},ya.prototype.touchend=function(O,z,U){var X=this,fe=this._zoomIn.touchend(O,z,U),ye=this._zoomOut.touchend(O,z,U);return fe?(this._active=!0,O.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()+1,around:we.unproject(fe)},{originalEvent:O})}}):ye?(this._active=!0,O.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()-1,around:we.unproject(ye)},{originalEvent:O})}}):void 0},ya.prototype.touchcancel=function(){this.reset()},ya.prototype.enable=function(){this._enabled=!0},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active};var Yr=function(O){this.reset(),this._clickTolerance=O.clickTolerance||1};Yr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Yr.prototype._correctButton=function(O,z){return!1},Yr.prototype._move=function(O,z){return{}},Yr.prototype.mousedown=function(O,z){if(!this._lastPoint){var U=i.mouseButton(O);this._correctButton(O,U)&&(this._lastPoint=z,this._eventButton=U)}},Yr.prototype.mousemoveWindow=function(O,z){var U=this._lastPoint;if(U&&(O.preventDefault(),this._moved||!(z.dist(U)<this._clickTolerance)))return this._moved=!0,this._lastPoint=z,this._move(U,z)},Yr.prototype.mouseupWindow=function(O){i.mouseButton(O)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},Yr.prototype.enable=function(){this._enabled=!0},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Ma=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.mousedown=function(U,X){O.prototype.mousedown.call(this,U,X),this._lastPoint&&(this._active=!0)},z.prototype._correctButton=function(U,X){return 0===X&&!U.ctrlKey},z.prototype._move=function(U,X){return{around:X,panDelta:X.sub(U)}},z}(Yr),ha=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype._correctButton=function(U,X){return 0===X&&U.ctrlKey||2===X},z.prototype._move=function(U,X){var fe=.8*(X.x-U.x);if(fe)return this._active=!0,{bearingDelta:fe}},z.prototype.contextmenu=function(U){U.preventDefault()},z}(Yr),pr=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype._correctButton=function(U,X){return 0===X&&U.ctrlKey||2===X},z.prototype._move=function(U,X){var fe=-.5*(X.y-U.y);if(fe)return this._active=!0,{pitchDelta:fe}},z.prototype.contextmenu=function(U){U.preventDefault()},z}(Yr),Di=function(O){this._minTouches=1,this._clickTolerance=O.clickTolerance||1,this.reset()};Di.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Di.prototype.touchstart=function(O,z,U){return this._calculateTransform(O,z,U)},Di.prototype.touchmove=function(O,z,U){if(this._active)return O.preventDefault(),this._calculateTransform(O,z,U)},Di.prototype.touchend=function(O,z,U){this._calculateTransform(O,z,U),this._active&&U.length<this._minTouches&&this.reset()},Di.prototype.touchcancel=function(){this.reset()},Di.prototype._calculateTransform=function(O,z,U){U.length>0&&(this._active=!0);var X=hi(U,z),fe=new e.Point(0,0),ye=new e.Point(0,0),we=0;for(var ke in X){var Pe=X[ke],Ze=this._touches[ke];Ze&&(fe._add(Pe),ye._add(Pe.sub(Ze)),we++,X[ke]=Pe)}if(this._touches=X,!(we<this._minTouches)&&ye.mag()){var nt=ye.div(we);if(this._sum._add(nt),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(we),panDelta:nt}}},Di.prototype.enable=function(){this._enabled=!0},Di.prototype.disable=function(){this._enabled=!1,this.reset()},Di.prototype.isEnabled=function(){return this._enabled},Di.prototype.isActive=function(){return this._active};var Qi=function(){this.reset()};function aa(O,z,U){for(var X=0;X<O.length;X++)if(O[X].identifier===U)return z[X]}function Si(O,z){return Math.log(O/z)/Math.LN2}Qi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Qi.prototype._start=function(O){},Qi.prototype._move=function(O,z,U){return{}},Qi.prototype.touchstart=function(O,z,U){this._firstTwoTouches||U.length<2||(this._firstTwoTouches=[U[0].identifier,U[1].identifier],this._start([z[0],z[1]]))},Qi.prototype.touchmove=function(O,z,U){if(this._firstTwoTouches){O.preventDefault();var X=this._firstTwoTouches,ye=X[1],we=aa(U,z,X[0]),ke=aa(U,z,ye);if(we&&ke){var Pe=this._aroundCenter?null:we.add(ke).div(2);return this._move([we,ke],Pe,O)}}},Qi.prototype.touchend=function(O,z,U){if(this._firstTwoTouches){var X=this._firstTwoTouches,ye=X[1],we=aa(U,z,X[0]),ke=aa(U,z,ye);we&&ke||(this._active&&i.suppressClick(),this.reset())}},Qi.prototype.touchcancel=function(){this.reset()},Qi.prototype.enable=function(O){this._enabled=!0,this._aroundCenter=!!O&&"center"===O.around},Qi.prototype.disable=function(){this._enabled=!1,this.reset()},Qi.prototype.isEnabled=function(){return this._enabled},Qi.prototype.isActive=function(){return this._active};var Ia=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.reset=function(){O.prototype.reset.call(this),delete this._distance,delete this._startDistance},z.prototype._start=function(U){this._startDistance=this._distance=U[0].dist(U[1])},z.prototype._move=function(U,X){var fe=this._distance;if(this._distance=U[0].dist(U[1]),this._active||!(Math.abs(Si(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Si(this._distance,fe),pinchAround:X}},z}(Qi);function ao(O,z){return 180*O.angleWith(z)/Math.PI}var Xs=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.reset=function(){O.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},z.prototype._start=function(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])},z.prototype._move=function(U,X){var fe=this._vector;if(this._vector=U[0].sub(U[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ao(this._vector,fe),pinchAround:X}},z.prototype._isBelowThreshold=function(U){this._minDiameter=Math.min(this._minDiameter,U.mag());var X=25/(Math.PI*this._minDiameter)*360,fe=ao(U,this._startVector);return Math.abs(fe)<X},z}(Qi);function Cs(O){return Math.abs(O.y)>Math.abs(O.x)}var Ds=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.reset=function(){O.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},z.prototype._start=function(U){this._lastPoints=U,Cs(U[0].sub(U[1]))&&(this._valid=!1)},z.prototype._move=function(U,X,fe){var ye=U[0].sub(this._lastPoints[0]),we=U[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ye,we,fe.timeStamp),this._valid)return this._lastPoints=U,this._active=!0,{pitchDelta:(ye.y+we.y)/2*-.5}},z.prototype.gestureBeginsVertically=function(U,X,fe){if(void 0!==this._valid)return this._valid;var ye=U.mag()>=2,we=X.mag()>=2;if(ye||we){if(!ye||!we)return void 0===this._firstMove&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var ke=U.y>0==X.y>0;return Cs(U)&&Cs(X)&&ke}},z}(Qi),$i={panStep:100,bearingStep:15,pitchStep:10},lo=function(){var O=$i;this._panStep=O.panStep,this._bearingStep=O.bearingStep,this._pitchStep=O.pitchStep};function ns(O){return O*(2-O)}lo.prototype.reset=function(){this._active=!1},lo.prototype.keydown=function(O){var z=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var U=0,X=0,fe=0,ye=0,we=0;switch(O.keyCode){case 61:case 107:case 171:case 187:U=1;break;case 189:case 109:case 173:U=-1;break;case 37:O.shiftKey?X=-1:(O.preventDefault(),ye=-1);break;case 39:O.shiftKey?X=1:(O.preventDefault(),ye=1);break;case 38:O.shiftKey?fe=1:(O.preventDefault(),we=-1);break;case 40:O.shiftKey?fe=-1:(O.preventDefault(),we=1);break;default:return}return{cameraAnimation:function(ke){var Pe=ke.getZoom();ke.easeTo({duration:300,easeId:"keyboardHandler",easing:ns,zoom:U?Math.round(Pe)+U*(O.shiftKey?2:1):Pe,bearing:ke.getBearing()+X*z._bearingStep,pitch:ke.getPitch()+fe*z._pitchStep,offset:[-ye*z._panStep,-we*z._panStep],center:ke.getCenter()},{originalEvent:O})}}}},lo.prototype.enable=function(){this._enabled=!0},lo.prototype.disable=function(){this._enabled=!1,this.reset()},lo.prototype.isEnabled=function(){return this._enabled},lo.prototype.isActive=function(){return this._active};var ua=function(O,z){this._map=O,this._el=O.getCanvasContainer(),this._handler=z,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ua.prototype.setZoomRate=function(O){this._defaultZoomRate=O},ua.prototype.setWheelZoomRate=function(O){this._wheelZoomRate=O},ua.prototype.isEnabled=function(){return!!this._enabled},ua.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ua.prototype.isZooming=function(){return!!this._zooming},ua.prototype.enable=function(O){this.isEnabled()||(this._enabled=!0,this._aroundCenter=O&&"center"===O.around)},ua.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ua.prototype.wheel=function(O){if(this.isEnabled()){var z=O.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*O.deltaY:O.deltaY,U=e.browser.now(),X=U-(this._lastWheelEventTime||0);this._lastWheelEventTime=U,0!==z&&z%4.000244140625==0?this._type="wheel":0!==z&&Math.abs(z)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=z,this._timeout=setTimeout(this._onTimeout,40,O)):this._type||(this._type=Math.abs(X*z)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,z+=this._lastValue)),O.shiftKey&&z&&(z/=4),this._type&&(this._lastWheelEvent=O,this._delta-=z,this._active||this._start(O)),O.preventDefault()}},ua.prototype._onTimeout=function(O){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(O)},ua.prototype._start=function(O){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var z=i.mousePos(this._el,O);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(z)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ua.prototype.renderFrame=function(){return this._onScrollFrame()},ua.prototype._onScrollFrame=function(){var O=this;if(this._frameId&&(this._frameId=null,this.isActive())){var z=this._map.transform;if(0!==this._delta){var U="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,X=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&0!==X&&(X=1/X);var fe="number"==typeof this._targetZoom?z.zoomScale(this._targetZoom):z.scale;this._targetZoom=Math.min(z.maxZoom,Math.max(z.minZoom,z.scaleZoom(fe*X))),"wheel"===this._type&&(this._startZoom=z.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ye,we="number"==typeof this._targetZoom?this._targetZoom:z.zoom,ke=this._startZoom,Pe=this._easing,Ze=!1;if("wheel"===this._type&&ke&&Pe){var nt=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),ht=Pe(nt);ye=e.number(ke,we,ht),nt<1?this._frameId||(this._frameId=!0):Ze=!0}else ye=we,Ze=!0;return this._active=!0,Ze&&(this._active=!1,this._finishTimeout=setTimeout(function(){O._zooming=!1,O._handler._triggerRenderFrame(),delete O._targetZoom,delete O._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ze,zoomDelta:ye-z.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ua.prototype._smoothOutEasing=function(O){var z=e.ease;if(this._prevEase){var U=this._prevEase,X=(e.browser.now()-U.start)/U.duration,fe=U.easing(X+.01)-U.easing(X),ye=.27/Math.sqrt(fe*fe+1e-4)*.01,we=Math.sqrt(.0729-ye*ye);z=e.bezier(ye,we,.25,1)}return this._prevEase={start:e.browser.now(),duration:O,easing:z},z},ua.prototype.reset=function(){this._active=!1};var Ja=function(O,z){this._clickZoom=O,this._tapZoom=z};Ja.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ja.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ja.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ja.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Wo=function(){this.reset()};Wo.prototype.reset=function(){this._active=!1},Wo.prototype.dblclick=function(O,z){return O.preventDefault(),{cameraAnimation:function(U){U.easeTo({duration:300,zoom:U.getZoom()+(O.shiftKey?-1:1),around:U.unproject(z)},{originalEvent:O})}}},Wo.prototype.enable=function(){this._enabled=!0},Wo.prototype.disable=function(){this._enabled=!1,this.reset()},Wo.prototype.isEnabled=function(){return this._enabled},Wo.prototype.isActive=function(){return this._active};var za=function(){this._tap=new Ji({numTouches:1,numTaps:1}),this.reset()};za.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},za.prototype.touchstart=function(O,z,U){this._swipePoint||(this._tapTime&&O.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?U.length>0&&(this._swipePoint=z[0],this._swipeTouch=U[0].identifier):this._tap.touchstart(O,z,U))},za.prototype.touchmove=function(O,z,U){if(this._tapTime){if(this._swipePoint){if(U[0].identifier!==this._swipeTouch)return;var X=z[0],fe=X.y-this._swipePoint.y;return this._swipePoint=X,O.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(O,z,U)},za.prototype.touchend=function(O,z,U){this._tapTime?this._swipePoint&&0===U.length&&this.reset():this._tap.touchend(O,z,U)&&(this._tapTime=O.timeStamp)},za.prototype.touchcancel=function(){this.reset()},za.prototype.enable=function(){this._enabled=!0},za.prototype.disable=function(){this._enabled=!1,this.reset()},za.prototype.isEnabled=function(){return this._enabled},za.prototype.isActive=function(){return this._active};var Mo=function(O,z,U){this._el=O,this._mousePan=z,this._touchPan=U};Mo.prototype.enable=function(O){this._inertiaOptions=O||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Mo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Mo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Mo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Qa=function(O,z,U){this._pitchWithRotate=O.pitchWithRotate,this._mouseRotate=z,this._mousePitch=U};Qa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Qa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Qa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Qa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var rs=function(O,z,U,X){this._el=O,this._touchZoom=z,this._touchRotate=U,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0};rs.prototype.enable=function(O){this._touchZoom.enable(O),this._rotationDisabled||this._touchRotate.enable(O),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},rs.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},rs.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},rs.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},rs.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},rs.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Al=function(O){return O.zoom||O.drag||O.pitch||O.rotate},vl=function(O){function z(){O.apply(this,arguments)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z}(e.Event);function Wl(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}var Lo=function(O,z){this._map=O,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jr(O),this._bearingSnap=z.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(z),e.bindAll(["handleEvent","handleWindowEvent"],this);var U=this._el;this._listeners=[[U,"touchstart",{passive:!1}],[U,"touchmove",{passive:!1}],[U,"touchend",void 0],[U,"touchcancel",void 0],[U,"mousedown",void 0],[U,"mousemove",void 0],[U,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[U,"mouseover",void 0],[U,"mouseout",void 0],[U,"dblclick",void 0],[U,"click",void 0],[U,"keydown",{capture:!1}],[U,"keyup",void 0],[U,"wheel",{passive:!1}],[U,"contextmenu",void 0],[e.window,"blur",void 0]];for(var X=0,fe=this._listeners;X<fe.length;X+=1){var ye=fe[X],we=ye[0];i.addEventListener(we,ye[1],we===e.window.document?this.handleWindowEvent:this.handleEvent,ye[2])}};Lo.prototype.destroy=function(){for(var O=0,z=this._listeners;O<z.length;O+=1){var U=z[O],X=U[0];i.removeEventListener(X,U[1],X===e.window.document?this.handleWindowEvent:this.handleEvent,U[2])}},Lo.prototype._addDefaultHandlers=function(O){var z=this._map,U=z.getCanvasContainer();this._add("mapEvent",new dr(z,O));var X=z.boxZoom=new wr(z,O);this._add("boxZoom",X);var fe=new ya,ye=new Wo;z.doubleClickZoom=new Ja(ye,fe),this._add("tapZoom",fe),this._add("clickZoom",ye);var we=new za;this._add("tapDragZoom",we);var ke=z.touchPitch=new Ds;this._add("touchPitch",ke);var Pe=new ha(O),Ze=new pr(O);z.dragRotate=new Qa(O,Pe,Ze),this._add("mouseRotate",Pe,["mousePitch"]),this._add("mousePitch",Ze,["mouseRotate"]);var nt=new Ma(O),ht=new Di(O);z.dragPan=new Mo(U,nt,ht),this._add("mousePan",nt),this._add("touchPan",ht,["touchZoom","touchRotate"]);var St=new Xs,jt=new Ia;z.touchZoomRotate=new rs(U,jt,St,we),this._add("touchRotate",St,["touchPan","touchZoom"]),this._add("touchZoom",jt,["touchPan","touchRotate"]);var Lt=z.scrollZoom=new ua(z,this);this._add("scrollZoom",Lt,["mousePan"]);var Ft=z.keyboard=new lo;this._add("keyboard",Ft),this._add("blockableMapEvent",new ki(z));for(var kt=0,Xt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];kt<Xt.length;kt+=1){var Gt=Xt[kt];O.interactive&&O[Gt]&&z[Gt].enable(O[Gt])}},Lo.prototype._add=function(O,z,U){this._handlers.push({handlerName:O,handler:z,allowed:U}),this._handlersById[O]=z},Lo.prototype.stop=function(){if(!this._updatingCamera){for(var O=0,z=this._handlers;O<z.length;O+=1)z[O].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Lo.prototype.isActive=function(){for(var O=0,z=this._handlers;O<z.length;O+=1)if(z[O].handler.isActive())return!0;return!1},Lo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Lo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Lo.prototype.isMoving=function(){return Boolean(Al(this._eventsInProgress))||this.isZooming()},Lo.prototype._blockedByActive=function(O,z,U){for(var X in O)if(X!==U&&(!z||z.indexOf(X)<0))return!0;return!1},Lo.prototype.handleWindowEvent=function(O){this.handleEvent(O,O.type+"Window")},Lo.prototype._getMapTouches=function(O){for(var z=[],U=0,X=O;U<X.length;U+=1){var fe=X[U];this._el.contains(fe.target)&&z.push(fe)}return z},Lo.prototype.handleEvent=function(O,z){if("blur"!==O.type){this._updatingCamera=!0;for(var U="renderFrame"===O.type?void 0:O,X={needsRenderFrame:!1},fe={},ye={},we=O.touches?this._getMapTouches(O.touches):void 0,ke=we?i.touchPos(this._el,we):i.mousePos(this._el,O),Pe=0,Ze=this._handlers;Pe<Ze.length;Pe+=1){var nt=Ze[Pe],ht=nt.handlerName,St=nt.handler,jt=nt.allowed;if(St.isEnabled()){var Lt=void 0;this._blockedByActive(ye,jt,ht)?St.reset():St[z||O.type]&&(Lt=St[z||O.type](O,ke,we),this.mergeHandlerResult(X,fe,Lt,ht,U),Lt&&Lt.needsRenderFrame&&this._triggerRenderFrame()),(Lt||St.isActive())&&(ye[ht]=St)}}var Ft={};for(var kt in this._previousActiveHandlers)ye[kt]||(Ft[kt]=U);this._previousActiveHandlers=ye,(Object.keys(Ft).length||Wl(X))&&(this._changes.push([X,fe,Ft]),this._triggerRenderFrame()),(Object.keys(ye).length||Wl(X))&&this._map._stop(!0),this._updatingCamera=!1;var Xt=X.cameraAnimation;Xt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Xt(this._map))}else this.stop()},Lo.prototype.mergeHandlerResult=function(O,z,U,X,fe){if(U){e.extend(O,U);var ye={handlerName:X,originalEvent:U.originalEvent||fe};void 0!==U.zoomDelta&&(z.zoom=ye),void 0!==U.panDelta&&(z.drag=ye),void 0!==U.pitchDelta&&(z.pitch=ye),void 0!==U.bearingDelta&&(z.rotate=ye)}},Lo.prototype._applyChanges=function(){for(var O={},z={},U={},X=0,fe=this._changes;X<fe.length;X+=1){var ye=fe[X],we=ye[0],ke=ye[1],Pe=ye[2];we.panDelta&&(O.panDelta=(O.panDelta||new e.Point(0,0))._add(we.panDelta)),we.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+we.zoomDelta),we.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+we.bearingDelta),we.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+we.pitchDelta),void 0!==we.around&&(O.around=we.around),void 0!==we.pinchAround&&(O.pinchAround=we.pinchAround),we.noInertia&&(O.noInertia=we.noInertia),e.extend(z,ke),e.extend(U,Pe)}this._updateMapTransform(O,z,U),this._changes=[]},Lo.prototype._updateMapTransform=function(O,z,U){var X=this._map,fe=X.transform;if(!Wl(O))return this._fireEvents(z,U);var ye=O.panDelta,we=O.zoomDelta,ke=O.bearingDelta,Pe=O.pitchDelta,Ze=O.around,nt=O.pinchAround;void 0!==nt&&(Ze=nt),X._stop(!0),Ze=Ze||X.transform.centerPoint;var ht=fe.pointLocation(ye?Ze.sub(ye):Ze);ke&&(fe.bearing+=ke),Pe&&(fe.pitch+=Pe),we&&(fe.zoom+=we),fe.setLocationAtPoint(ht,Ze),this._map._update(),O.noInertia||this._inertia.record(O),this._fireEvents(z,U)},Lo.prototype._fireEvents=function(O,z){var U=this,X=Al(this._eventsInProgress),fe=Al(O),ye={};for(var we in O)this._eventsInProgress[we]||(ye[we+"start"]=O[we].originalEvent),this._eventsInProgress[we]=O[we];for(var Pe in!X&&fe&&this._fireEvent("movestart",fe.originalEvent),ye)this._fireEvent(Pe,ye[Pe]);for(var Ze in O.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),O)this._fireEvent(Ze,O[Ze].originalEvent);var ht,St={};for(var jt in this._eventsInProgress){var Lt=this._eventsInProgress[jt],Ft=Lt.handlerName,kt=Lt.originalEvent;this._handlersById[Ft].isActive()||(delete this._eventsInProgress[jt],St[jt+"end"]=ht=z[Ft]||kt)}for(var Xt in St)this._fireEvent(Xt,St[Xt]);var Gt=Al(this._eventsInProgress);if((X||fe)&&!Gt){this._updatingCamera=!0;var Qt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),gn=function(kn){return 0!==kn&&-U._bearingSnap<kn&&kn<U._bearingSnap};Qt?(gn(Qt.bearing||this._map.getBearing())&&(Qt.bearing=0),this._map.easeTo(Qt,{originalEvent:ht})):(this._map.fire(new e.Event("moveend",{originalEvent:ht})),gn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Lo.prototype._fireEvent=function(O,z){this._map.fire(new e.Event(O,z?{originalEvent:z}:{}))},Lo.prototype._triggerRenderFrame=function(){var O=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(z){delete O._frameId,O.handleEvent(new vl("renderFrame",{timeStamp:z})),O._applyChanges()}))};var Kl=function(O){function z(U,X){O.call(this),this._moving=!1,this._zooming=!1,this.transform=U,this._bearingSnap=X.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},z.prototype.setCenter=function(U,X){return this.jumpTo({center:U},X)},z.prototype.panBy=function(U,X,fe){return U=e.Point.convert(U).mult(-1),this.panTo(this.transform.center,e.extend({offset:U},X),fe)},z.prototype.panTo=function(U,X,fe){return this.easeTo(e.extend({center:U},X),fe)},z.prototype.getZoom=function(){return this.transform.zoom},z.prototype.setZoom=function(U,X){return this.jumpTo({zoom:U},X),this},z.prototype.zoomTo=function(U,X,fe){return this.easeTo(e.extend({zoom:U},X),fe)},z.prototype.zoomIn=function(U,X){return this.zoomTo(this.getZoom()+1,U,X),this},z.prototype.zoomOut=function(U,X){return this.zoomTo(this.getZoom()-1,U,X),this},z.prototype.getBearing=function(){return this.transform.bearing},z.prototype.setBearing=function(U,X){return this.jumpTo({bearing:U},X),this},z.prototype.getPadding=function(){return this.transform.padding},z.prototype.setPadding=function(U,X){return this.jumpTo({padding:U},X),this},z.prototype.rotateTo=function(U,X,fe){return this.easeTo(e.extend({bearing:U},X),fe)},z.prototype.resetNorth=function(U,X){return this.rotateTo(0,e.extend({duration:1e3},U),X),this},z.prototype.resetNorthPitch=function(U,X){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},U),X),this},z.prototype.snapToNorth=function(U,X){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,X):this},z.prototype.getPitch=function(){return this.transform.pitch},z.prototype.setPitch=function(U,X){return this.jumpTo({pitch:U},X),this},z.prototype.cameraForBounds=function(U,X){return U=e.LngLatBounds.convert(U),this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),0,X)},z.prototype._cameraForBoxAndBearing=function(U,X,fe,ye){var we={top:0,bottom:0,right:0,left:0};if("number"==typeof(ye=e.extend({padding:we,offset:[0,0],maxZoom:this.transform.maxZoom},ye)).padding){var ke=ye.padding;ye.padding={top:ke,bottom:ke,right:ke,left:ke}}ye.padding=e.extend(we,ye.padding);var Pe=this.transform,Ze=Pe.padding,nt=Pe.project(e.LngLat.convert(U)),ht=Pe.project(e.LngLat.convert(X)),St=nt.rotate(-fe*Math.PI/180),jt=ht.rotate(-fe*Math.PI/180),Lt=new e.Point(Math.max(St.x,jt.x),Math.max(St.y,jt.y)),Ft=new e.Point(Math.min(St.x,jt.x),Math.min(St.y,jt.y)),kt=Lt.sub(Ft),Xt=(Pe.width-(Ze.left+Ze.right+ye.padding.left+ye.padding.right))/kt.x,Gt=(Pe.height-(Ze.top+Ze.bottom+ye.padding.top+ye.padding.bottom))/kt.y;if(!(Gt<0||Xt<0)){var Qt=Math.min(Pe.scaleZoom(Pe.scale*Math.min(Xt,Gt)),ye.maxZoom),gn=e.Point.convert(ye.offset),Nn=new e.Point(gn.x+(ye.padding.left-ye.padding.right)/2,gn.y+(ye.padding.top-ye.padding.bottom)/2).mult(Pe.scale/Pe.zoomScale(Qt));return{center:Pe.unproject(nt.add(ht).div(2).sub(Nn)),zoom:Qt,bearing:fe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},z.prototype.fitBounds=function(U,X,fe){return this._fitInternal(this.cameraForBounds(U,X),X,fe)},z.prototype.fitScreenCoordinates=function(U,X,fe,ye,we){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(U)),this.transform.pointLocation(e.Point.convert(X)),fe,ye),ye,we)},z.prototype._fitInternal=function(U,X,fe){return U?(delete(X=e.extend(U,X)).padding,X.linear?this.easeTo(X,fe):this.flyTo(X,fe)):this},z.prototype.jumpTo=function(U,X){this.stop();var fe=this.transform,ye=!1,we=!1,ke=!1;return"zoom"in U&&fe.zoom!==+U.zoom&&(ye=!0,fe.zoom=+U.zoom),void 0!==U.center&&(fe.center=e.LngLat.convert(U.center)),"bearing"in U&&fe.bearing!==+U.bearing&&(we=!0,fe.bearing=+U.bearing),"pitch"in U&&fe.pitch!==+U.pitch&&(ke=!0,fe.pitch=+U.pitch),null==U.padding||fe.isPaddingEqual(U.padding)||(fe.padding=U.padding),this.fire(new e.Event("movestart",X)).fire(new e.Event("move",X)),ye&&this.fire(new e.Event("zoomstart",X)).fire(new e.Event("zoom",X)).fire(new e.Event("zoomend",X)),we&&this.fire(new e.Event("rotatestart",X)).fire(new e.Event("rotate",X)).fire(new e.Event("rotateend",X)),ke&&this.fire(new e.Event("pitchstart",X)).fire(new e.Event("pitch",X)).fire(new e.Event("pitchend",X)),this.fire(new e.Event("moveend",X))},z.prototype.easeTo=function(U,X){var fe=this;this._stop(!1,U.easeId),(!1===(U=e.extend({offset:[0,0],duration:500,easing:e.ease},U)).animate||!U.essential&&e.browser.prefersReducedMotion)&&(U.duration=0);var ye=this.transform,we=this.getZoom(),ke=this.getBearing(),Pe=this.getPitch(),Ze=this.getPadding(),nt="zoom"in U?+U.zoom:we,ht="bearing"in U?this._normalizeBearing(U.bearing,ke):ke,St="pitch"in U?+U.pitch:Pe,jt="padding"in U?U.padding:ye.padding,Lt=e.Point.convert(U.offset),Ft=ye.centerPoint.add(Lt),kt=ye.pointLocation(Ft),Xt=e.LngLat.convert(U.center||kt);this._normalizeCenter(Xt);var Gt,Qt,gn=ye.project(kt),kn=ye.project(Xt).sub(gn),jn=ye.zoomScale(nt-we);U.around&&(Gt=e.LngLat.convert(U.around),Qt=ye.locationPoint(Gt));var Nn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||nt!==we,this._rotating=this._rotating||ke!==ht,this._pitching=this._pitching||St!==Pe,this._padding=!ye.isPaddingEqual(jt),this._easeId=U.easeId,this._prepareEase(X,U.noMoveStart,Nn),clearTimeout(this._easeEndTimeoutID),this._ease(function(mr){if(fe._zooming&&(ye.zoom=e.number(we,nt,mr)),fe._rotating&&(ye.bearing=e.number(ke,ht,mr)),fe._pitching&&(ye.pitch=e.number(Pe,St,mr)),fe._padding&&(ye.interpolatePadding(Ze,jt,mr),Ft=ye.centerPoint.add(Lt)),Gt)ye.setLocationAtPoint(Gt,Qt);else{var gr=ye.zoomScale(ye.zoom-we),Dr=nt>we?Math.min(2,jn):Math.max(.5,jn),Cr=Math.pow(Dr,1-mr),fi=ye.unproject(gn.add(kn.mult(mr*Cr)).mult(gr));ye.setLocationAtPoint(ye.renderWorldCopies?fi.wrap():fi,Ft)}fe._fireMoveEvents(X)},function(mr){fe._afterEase(X,mr)},U),this},z.prototype._prepareEase=function(U,X,fe){void 0===fe&&(fe={}),this._moving=!0,X||fe.moving||this.fire(new e.Event("movestart",U)),this._zooming&&!fe.zooming&&this.fire(new e.Event("zoomstart",U)),this._rotating&&!fe.rotating&&this.fire(new e.Event("rotatestart",U)),this._pitching&&!fe.pitching&&this.fire(new e.Event("pitchstart",U))},z.prototype._fireMoveEvents=function(U){this.fire(new e.Event("move",U)),this._zooming&&this.fire(new e.Event("zoom",U)),this._rotating&&this.fire(new e.Event("rotate",U)),this._pitching&&this.fire(new e.Event("pitch",U))},z.prototype._afterEase=function(U,X){if(!this._easeId||!X||this._easeId!==X){delete this._easeId;var fe=this._zooming,ye=this._rotating,we=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new e.Event("zoomend",U)),ye&&this.fire(new e.Event("rotateend",U)),we&&this.fire(new e.Event("pitchend",U)),this.fire(new e.Event("moveend",U))}},z.prototype.flyTo=function(U,X){var fe=this;if(!U.essential&&e.browser.prefersReducedMotion){var ye=e.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ye,X)}this.stop(),U=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},U);var we=this.transform,ke=this.getZoom(),Pe=this.getBearing(),Ze=this.getPitch(),nt=this.getPadding(),ht="zoom"in U?e.clamp(+U.zoom,we.minZoom,we.maxZoom):ke,St="bearing"in U?this._normalizeBearing(U.bearing,Pe):Pe,jt="pitch"in U?+U.pitch:Ze,Lt="padding"in U?U.padding:we.padding,Ft=we.zoomScale(ht-ke),kt=e.Point.convert(U.offset),Xt=we.centerPoint.add(kt),Gt=we.pointLocation(Xt),Qt=e.LngLat.convert(U.center||Gt);this._normalizeCenter(Qt);var gn=we.project(Gt),kn=we.project(Qt).sub(gn),jn=U.curve,Nn=Math.max(we.width,we.height),mr=Nn/Ft,gr=kn.mag();if("minZoom"in U){var Dr=e.clamp(Math.min(U.minZoom,ke,ht),we.minZoom,we.maxZoom),Cr=Nn/we.zoomScale(Dr-ke);jn=Math.sqrt(Cr/gr*2)}var fi=jn*jn;function bi(Mi){var qi=(mr*mr-Nn*Nn+(Mi?-1:1)*fi*fi*gr*gr)/(2*(Mi?mr:Nn)*fi*gr);return Math.log(Math.sqrt(qi*qi+1)-qi)}function Oi(Mi){return(Math.exp(Mi)-Math.exp(-Mi))/2}function ar(Mi){return(Math.exp(Mi)+Math.exp(-Mi))/2}var Gr=bi(0),_i=function(Mi){return ar(Gr)/ar(Gr+jn*Mi)},gi=function(Mi){return Nn*((ar(Gr)*(Oi(qi=Gr+jn*Mi)/ar(qi))-Oi(Gr))/fi)/gr;var qi},Ai=(bi(1)-Gr)/jn;if(Math.abs(gr)<1e-6||!isFinite(Ai)){if(Math.abs(Nn-mr)<1e-6)return this.easeTo(U,X);var Bi=mr<Nn?-1:1;Ai=Math.abs(Math.log(mr/Nn))/jn,gi=function(){return 0},_i=function(Mi){return Math.exp(Bi*jn*Mi)}}return U.duration="duration"in U?+U.duration:1e3*Ai/("screenSpeed"in U?+U.screenSpeed/jn:+U.speed),U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0),this._zooming=!0,this._rotating=Pe!==St,this._pitching=jt!==Ze,this._padding=!we.isPaddingEqual(Lt),this._prepareEase(X,!1),this._ease(function(Mi){var qi=Mi*Ai,Ii=1/_i(qi);we.zoom=1===Mi?ht:ke+we.scaleZoom(Ii),fe._rotating&&(we.bearing=e.number(Pe,St,Mi)),fe._pitching&&(we.pitch=e.number(Ze,jt,Mi)),fe._padding&&(we.interpolatePadding(nt,Lt,Mi),Xt=we.centerPoint.add(kt));var da=1===Mi?Qt:we.unproject(gn.add(kn.mult(gi(qi))).mult(Ii));we.setLocationAtPoint(we.renderWorldCopies?da.wrap():da,Xt),fe._fireMoveEvents(X)},function(){return fe._afterEase(X)},U),this},z.prototype.isEasing=function(){return!!this._easeFrameId},z.prototype.stop=function(){return this._stop()},z.prototype._stop=function(U,X){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,X)}if(!U){var ye=this.handlers;ye&&ye.stop()}return this},z.prototype._ease=function(U,X,fe){!1===fe.animate||0===fe.duration?(U(1),X()):(this._easeStart=e.browser.now(),this._easeOptions=fe,this._onEaseFrame=U,this._onEaseEnd=X,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},z.prototype._renderFrameCallback=function(){var U=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},z.prototype._normalizeBearing=function(U,X){U=e.wrap(U,-180,180);var fe=Math.abs(U-X);return Math.abs(U-360-X)<fe&&(U-=360),Math.abs(U+360-X)<fe&&(U+=360),U},z.prototype._normalizeCenter=function(U){var X=this.transform;if(X.renderWorldCopies&&!X.lngRange){var fe=U.lng-X.center.lng;U.lng+=fe>180?-360:fe<-180?360:0}},z}(e.Evented),Io=function(O){void 0===O&&(O={}),this.options=O,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Io.prototype.getDefaultPosition=function(){return"bottom-right"},Io.prototype.onAdd=function(O){var z=this.options&&this.options.compact;return this._map=O,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),z&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===z&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Io.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Io.prototype._updateEditLink=function(){var O=this._editLink;O||(O=this._editLink=this._container.querySelector(".mapbox-improve-map"));var z=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(O){var U=z.reduce(function(X,fe,ye){return fe.value&&(X+=fe.key+"="+fe.value+(ye<z.length-1?"&":"")),X},"?");O.href=e.config.FEEDBACK_URL+"/"+U+(this._map._hash?this._map._hash.getHashString(!0):""),O.rel="noopener nofollow"}},Io.prototype._updateData=function(O){!O||"metadata"!==O.sourceDataType&&"style"!==O.dataType||(this._updateAttributions(),this._updateEditLink())},Io.prototype._updateAttributions=function(){if(this._map.style){var O=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(function(ke){return"string"!=typeof ke?"":ke})):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet){var z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}var U=this._map.style.sourceCaches;for(var X in U){var fe=U[X];if(fe.used){var ye=fe.getSource();ye.attribution&&O.indexOf(ye.attribution)<0&&O.push(ye.attribution)}}O.sort(function(ke,Pe){return ke.length-Pe.length});var we=(O=O.filter(function(ke,Pe){for(var Ze=Pe+1;Ze<O.length;Ze++)if(O[Ze].indexOf(ke)>=0)return!1;return!0})).join(" | ");we!==this._attribHTML&&(this._attribHTML=we,O.length?(this._innerContainer.innerHTML=we,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Io.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var xl=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};xl.prototype.onAdd=function(O){this._map=O,this._container=i.create("div","mapboxgl-ctrl");var z=i.create("a","mapboxgl-ctrl-logo");return z.target="_blank",z.rel="noopener nofollow",z.href="https://www.mapbox.com/",z.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),z.setAttribute("rel","noopener nofollow"),this._container.appendChild(z),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},xl.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},xl.prototype.getDefaultPosition=function(){return"bottom-left"},xl.prototype._updateLogo=function(O){O&&"metadata"!==O.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},xl.prototype._logoRequired=function(){if(this._map.style){var O=this._map.style.sourceCaches;for(var z in O)if(O[z].getSource().mapbox_logo)return!0;return!1}},xl.prototype._updateCompact=function(){var O=this._container.children;if(O.length){var z=O[0];this._map.getCanvasContainer().offsetWidth<250?z.classList.add("mapboxgl-compact"):z.classList.remove("mapboxgl-compact")}};var Pi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Pi.prototype.add=function(O){var z=++this._id;return this._queue.push({callback:O,id:z,cancelled:!1}),z},Pi.prototype.remove=function(O){for(var z=this._currentlyRunning,U=0,X=z?this._queue.concat(z):this._queue;U<X.length;U+=1){var fe=X[U];if(fe.id===O)return void(fe.cancelled=!0)}},Pi.prototype.run=function(O){void 0===O&&(O=0);var z=this._currentlyRunning=this._queue;this._queue=[];for(var U=0,X=z;U<X.length;U+=1){var fe=X[U];if(!fe.cancelled&&(fe.callback(O),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Pi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Gi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Jl=e.window.HTMLImageElement,Ql=e.window.HTMLElement,hl=e.window.ImageBitmap,Ls={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Is=function(O){function z(X){var fe=this;if(null!=(X=e.extend({},Ls,X)).minZoom&&null!=X.maxZoom&&X.minZoom>X.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=X.minPitch&&null!=X.maxPitch&&X.minPitch>X.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=X.minPitch&&X.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=X.maxPitch&&X.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ye=new nn(X.minZoom,X.maxZoom,X.minPitch,X.maxPitch,X.renderWorldCopies);if(O.call(this,ye,X),this._interactive=X.interactive,this._maxTileCacheSize=X.maxTileCacheSize,this._failIfMajorPerformanceCaveat=X.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=X.preserveDrawingBuffer,this._antialias=X.antialias,this._trackResize=X.trackResize,this._bearingSnap=X.bearingSnap,this._refreshExpiredTiles=X.refreshExpiredTiles,this._fadeDuration=X.fadeDuration,this._crossSourceCollisions=X.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=X.collectResourceTiming,this._renderTaskQueue=new Pi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Gi,X.locale),this._requestManager=new e.RequestManager(X.transformRequest,X.accessToken),"string"==typeof X.container){if(this._container=e.window.document.getElementById(X.container),!this._container)throw new Error("Container '"+X.container+"' not found.")}else{if(!(X.container instanceof Ql))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=X.container}if(X.maxBounds&&this.setMaxBounds(X.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Lo(this,X),this._hash=X.hash&&new Un("string"==typeof X.hash&&X.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:X.center,zoom:X.zoom,bearing:X.bearing,pitch:X.pitch}),X.bounds&&(this.resize(),this.fitBounds(X.bounds,e.extend({},X.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=X.localIdeographFontFamily,X.style&&this.setStyle(X.style,{localIdeographFontFamily:X.localIdeographFontFamily}),X.attributionControl&&this.addControl(new Io({customAttribution:X.customAttribution})),this.addControl(new xl,X.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(ke){fe._update("style"===ke.dataType),fe.fire(new e.Event(ke.dataType+"data",ke))}),this.on("dataloading",function(ke){fe.fire(new e.Event(ke.dataType+"dataloading",ke))})}O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z;var U={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return z.prototype._getMapId=function(){return this._mapId},z.prototype.addControl=function(X,fe){if(void 0===fe&&X.getDefaultPosition&&(fe=X.getDefaultPosition()),void 0===fe&&(fe="top-right"),!X||!X.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ye=X.onAdd(this);this._controls.push(X);var we=this._controlPositions[fe];return-1!==fe.indexOf("bottom")?we.insertBefore(ye,we.firstChild):we.appendChild(ye),this},z.prototype.removeControl=function(X){if(!X||!X.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(X);return fe>-1&&this._controls.splice(fe,1),X.onRemove(this),this},z.prototype.resize=function(X){var fe=this._containerDimensions(),ye=fe[0],we=fe[1];this._resizeCanvas(ye,we),this.transform.resize(ye,we),this.painter.resize(ye,we);var ke=!this._moving;return ke&&(this.stop(),this.fire(new e.Event("movestart",X)).fire(new e.Event("move",X))),this.fire(new e.Event("resize",X)),ke&&this.fire(new e.Event("moveend",X)),this},z.prototype.getBounds=function(){return this.transform.getBounds()},z.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},z.prototype.setMaxBounds=function(X){return this.transform.setMaxBounds(e.LngLatBounds.convert(X)),this._update()},z.prototype.setMinZoom=function(X){if((X=null==X?-2:X)>=-2&&X<=this.transform.maxZoom)return this.transform.minZoom=X,this._update(),this.getZoom()<X&&this.setZoom(X),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},z.prototype.getMinZoom=function(){return this.transform.minZoom},z.prototype.setMaxZoom=function(X){if((X=null==X?22:X)>=this.transform.minZoom)return this.transform.maxZoom=X,this._update(),this.getZoom()>X&&this.setZoom(X),this;throw new Error("maxZoom must be greater than the current minZoom")},z.prototype.getMaxZoom=function(){return this.transform.maxZoom},z.prototype.setMinPitch=function(X){if((X=null==X?0:X)<0)throw new Error("minPitch must be greater than or equal to 0");if(X>=0&&X<=this.transform.maxPitch)return this.transform.minPitch=X,this._update(),this.getPitch()<X&&this.setPitch(X),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},z.prototype.getMinPitch=function(){return this.transform.minPitch},z.prototype.setMaxPitch=function(X){if((X=null==X?60:X)>60)throw new Error("maxPitch must be less than or equal to 60");if(X>=this.transform.minPitch)return this.transform.maxPitch=X,this._update(),this.getPitch()>X&&this.setPitch(X),this;throw new Error("maxPitch must be greater than the current minPitch")},z.prototype.getMaxPitch=function(){return this.transform.maxPitch},z.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},z.prototype.setRenderWorldCopies=function(X){return this.transform.renderWorldCopies=X,this._update()},z.prototype.project=function(X){return this.transform.locationPoint(e.LngLat.convert(X))},z.prototype.unproject=function(X){return this.transform.pointLocation(e.Point.convert(X))},z.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},z.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},z.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},z.prototype._createDelegatedListener=function(X,fe,ye){var we,ke=this;if("mouseenter"===X||"mouseover"===X){var Pe=!1;return{layer:fe,listener:ye,delegates:{mousemove:function(nt){var ht=ke.getLayer(fe)?ke.queryRenderedFeatures(nt.point,{layers:[fe]}):[];ht.length?Pe||(Pe=!0,ye.call(ke,new ii(X,ke,nt.originalEvent,{features:ht}))):Pe=!1},mouseout:function(){Pe=!1}}}}if("mouseleave"===X||"mouseout"===X){var Ze=!1;return{layer:fe,listener:ye,delegates:{mousemove:function(nt){(ke.getLayer(fe)?ke.queryRenderedFeatures(nt.point,{layers:[fe]}):[]).length?Ze=!0:Ze&&(Ze=!1,ye.call(ke,new ii(X,ke,nt.originalEvent)))},mouseout:function(nt){Ze&&(Ze=!1,ye.call(ke,new ii(X,ke,nt.originalEvent)))}}}}return{layer:fe,listener:ye,delegates:(we={},we[X]=function(nt){var ht=ke.getLayer(fe)?ke.queryRenderedFeatures(nt.point,{layers:[fe]}):[];ht.length&&(nt.features=ht,ye.call(ke,nt),delete nt.features)},we)}},z.prototype.on=function(X,fe,ye){if(void 0===ye)return O.prototype.on.call(this,X,fe);var we=this._createDelegatedListener(X,fe,ye);for(var ke in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[X]=this._delegatedListeners[X]||[],this._delegatedListeners[X].push(we),we.delegates)this.on(ke,we.delegates[ke]);return this},z.prototype.once=function(X,fe,ye){if(void 0===ye)return O.prototype.once.call(this,X,fe);var we=this._createDelegatedListener(X,fe,ye);for(var ke in we.delegates)this.once(ke,we.delegates[ke]);return this},z.prototype.off=function(X,fe,ye){var we=this;return void 0===ye?O.prototype.off.call(this,X,fe):(this._delegatedListeners&&this._delegatedListeners[X]&&function(ke){for(var Pe=ke[X],Ze=0;Ze<Pe.length;Ze++){var nt=Pe[Ze];if(nt.layer===fe&&nt.listener===ye){for(var ht in nt.delegates)we.off(ht,nt.delegates[ht]);return Pe.splice(Ze,1),we}}}(this._delegatedListeners),this)},z.prototype.queryRenderedFeatures=function(X,fe){if(!this.style)return[];var ye;if(void 0!==fe||void 0===X||X instanceof e.Point||Array.isArray(X)||(fe=X,X=void 0),fe=fe||{},(X=X||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof X[0])ye=[e.Point.convert(X)];else{var we=e.Point.convert(X[0]),ke=e.Point.convert(X[1]);ye=[we,new e.Point(ke.x,we.y),ke,new e.Point(we.x,ke.y),we]}return this.style.queryRenderedFeatures(ye,fe,this.transform)},z.prototype.querySourceFeatures=function(X,fe){return this.style.querySourceFeatures(X,fe)},z.prototype.setStyle=function(X,fe){return!1!==(fe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&X?(this._diffStyle(X,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(X,fe))},z.prototype._getUIString=function(X){var fe=this._locale[X];if(null==fe)throw new Error("Missing UI string '"+X+"'");return fe},z.prototype._updateStyle=function(X,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),X?(this.style=new or(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof X?this.style.loadURL(X):this.style.loadJSON(X),this):(delete this.style,this)},z.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new or(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},z.prototype._diffStyle=function(X,fe){var ye=this;if("string"==typeof X){var we=this._requestManager.normalizeStyleURL(X),ke=this._requestManager.transformRequest(we,e.ResourceType.Style);e.getJSON(ke,function(Pe,Ze){Pe?ye.fire(new e.ErrorEvent(Pe)):Ze&&ye._updateDiff(Ze,fe)})}else"object"==typeof X&&this._updateDiff(X,fe)},z.prototype._updateDiff=function(X,fe){try{this.style.setState(X)&&this._update(!0)}catch(ye){e.warnOnce("Unable to perform style diff: "+(ye.message||ye.error||ye)+".  Rebuilding the style from scratch."),this._updateStyle(X,fe)}},z.prototype.getStyle=function(){if(this.style)return this.style.serialize()},z.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},z.prototype.addSource=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addSource(X,fe),this._update(!0)},z.prototype.isSourceLoaded=function(X){var fe=this.style&&this.style.sourceCaches[X];if(void 0!==fe)return fe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+X+"'")))},z.prototype.areTilesLoaded=function(){var X=this.style&&this.style.sourceCaches;for(var fe in X){var ye=X[fe]._tiles;for(var we in ye){var ke=ye[we];if("loaded"!==ke.state&&"errored"!==ke.state)return!1}}return!0},z.prototype.addSourceType=function(X,fe,ye){return this._lazyInitEmptyStyle(),this.style.addSourceType(X,fe,ye)},z.prototype.removeSource=function(X){return this.style.removeSource(X),this._update(!0)},z.prototype.getSource=function(X){return this.style.getSource(X)},z.prototype.addImage=function(X,fe,ye){void 0===ye&&(ye={});var we=ye.pixelRatio;void 0===we&&(we=1);var ke=ye.sdf;void 0===ke&&(ke=!1);var Pe=ye.stretchX,Ze=ye.stretchY,nt=ye.content;if(this._lazyInitEmptyStyle(),fe instanceof Jl||hl&&fe instanceof hl){var ht=e.browser.getImageData(fe);this.style.addImage(X,{data:new e.RGBAImage({width:ht.width,height:ht.height},ht.data),pixelRatio:we,stretchX:Pe,stretchY:Ze,content:nt,sdf:ke,version:0})}else{if(void 0===fe.width||void 0===fe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Gt=fe;this.style.addImage(X,{data:new e.RGBAImage({width:fe.width,height:fe.height},new Uint8Array(fe.data)),pixelRatio:we,stretchX:Pe,stretchY:Ze,content:nt,sdf:ke,version:0,userImage:Gt}),Gt.onAdd&&Gt.onAdd(this,X)}},z.prototype.updateImage=function(X,fe){var ye=this.style.getImage(X);if(!ye)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var we=fe instanceof Jl||hl&&fe instanceof hl?e.browser.getImageData(fe):fe,ke=we.width,Pe=we.height,Ze=we.data;return void 0===ke||void 0===Pe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ke!==ye.data.width||Pe!==ye.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ye.data.replace(Ze,!(fe instanceof Jl||hl&&fe instanceof hl)),void this.style.updateImage(X,ye))},z.prototype.hasImage=function(X){return X?!!this.style.getImage(X):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},z.prototype.removeImage=function(X){this.style.removeImage(X)},z.prototype.loadImage=function(X,fe){e.getImage(this._requestManager.transformRequest(X,e.ResourceType.Image),fe)},z.prototype.listImages=function(){return this.style.listImages()},z.prototype.addLayer=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(X,fe),this._update(!0)},z.prototype.moveLayer=function(X,fe){return this.style.moveLayer(X,fe),this._update(!0)},z.prototype.removeLayer=function(X){return this.style.removeLayer(X),this._update(!0)},z.prototype.getLayer=function(X){return this.style.getLayer(X)},z.prototype.setLayerZoomRange=function(X,fe,ye){return this.style.setLayerZoomRange(X,fe,ye),this._update(!0)},z.prototype.setFilter=function(X,fe,ye){return void 0===ye&&(ye={}),this.style.setFilter(X,fe,ye),this._update(!0)},z.prototype.getFilter=function(X){return this.style.getFilter(X)},z.prototype.setPaintProperty=function(X,fe,ye,we){return void 0===we&&(we={}),this.style.setPaintProperty(X,fe,ye,we),this._update(!0)},z.prototype.getPaintProperty=function(X,fe){return this.style.getPaintProperty(X,fe)},z.prototype.setLayoutProperty=function(X,fe,ye,we){return void 0===we&&(we={}),this.style.setLayoutProperty(X,fe,ye,we),this._update(!0)},z.prototype.getLayoutProperty=function(X,fe){return this.style.getLayoutProperty(X,fe)},z.prototype.setLight=function(X,fe){return void 0===fe&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(X,fe),this._update(!0)},z.prototype.getLight=function(){return this.style.getLight()},z.prototype.setFeatureState=function(X,fe){return this.style.setFeatureState(X,fe),this._update()},z.prototype.removeFeatureState=function(X,fe){return this.style.removeFeatureState(X,fe),this._update()},z.prototype.getFeatureState=function(X){return this.style.getFeatureState(X)},z.prototype.getContainer=function(){return this._container},z.prototype.getCanvasContainer=function(){return this._canvasContainer},z.prototype.getCanvas=function(){return this._canvas},z.prototype._containerDimensions=function(){var X=0,fe=0;return this._container&&(X=this._container.clientWidth||400,fe=this._container.clientHeight||300),[X,fe]},z.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},z.prototype._setupContainer=function(){var X=this._container;X.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",X)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=i.create("div","mapboxgl-canvas-container",X);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ye=this._containerDimensions();this._resizeCanvas(ye[0],ye[1]);var we=this._controlContainer=i.create("div","mapboxgl-control-container",X),ke=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Pe){ke[Pe]=i.create("div","mapboxgl-ctrl-"+Pe,we)})},z.prototype._resizeCanvas=function(X,fe){var ye=e.browser.devicePixelRatio||1;this._canvas.width=ye*X,this._canvas.height=ye*fe,this._canvas.style.width=X+"px",this._canvas.style.height=fe+"px"},z.prototype._setupPainter=function(){var X=e.extend({},o.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",X)||this._canvas.getContext("experimental-webgl",X);fe?(this.painter=new xa(fe,this.transform),e.webpSupported.testSupport(fe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},z.prototype._contextLost=function(X){X.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:X}))},z.prototype._contextRestored=function(X){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:X}))},z.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},z.prototype._update=function(X){return this.style?(this._styleDirty=this._styleDirty||X,this._sourcesDirty=!0,this.triggerRepaint(),this):this},z.prototype._requestRenderFrame=function(X){return this._update(),this._renderTaskQueue.add(X)},z.prototype._cancelRenderFrame=function(X){this._renderTaskQueue.remove(X)},z.prototype._render=function(X){var fe,ye=this,we=0,ke=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=ke.createQueryEXT(),ke.beginQueryEXT(ke.TIME_ELAPSED_EXT,fe),we=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(X),!this._removed){var Pe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ze=this.transform.zoom,nt=e.browser.now();this.style.zoomHistory.update(Ze,nt);var ht=new e.EvaluationParameters(Ze,{now:nt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),St=ht.crossFadingFactor();1===St&&St===this._crossFadingFactor||(Pe=!0,this._crossFadingFactor=St),this.style.update(ht)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Pe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var jt=e.browser.now()-we;ke.endQueryEXT(ke.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Ft=ke.getQueryObjectEXT(fe,ke.QUERY_RESULT_EXT)/1e6;ke.deleteQueryEXT(fe),ye.fire(new e.Event("gpu-timing-frame",{cpuTime:jt,gpuTime:Ft}))},50)}if(this.listens("gpu-timing-layer")){var Lt=this.painter.collectGpuTimers();setTimeout(function(){var Ft=ye.painter.queryGpuTimers(Lt);ye.fire(new e.Event("gpu-timing-layer",{layerTimes:Ft}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},z.prototype.remove=function(){this._hash&&this._hash.remove();for(var X=0,fe=this._controls;X<fe.length;X+=1)fe[X].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ye=this.painter.context.gl.getExtension("WEBGL_lose_context");ye&&ye.loseContext(),pc(this._canvasContainer),pc(this._controlContainer),pc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},z.prototype.triggerRepaint=function(){var X=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(fe){X._frame=null,X._render(fe)}))},z.prototype._onWindowOnline=function(){this._update()},z.prototype._onWindowResize=function(X){this._trackResize&&this.resize({originalEvent:X})._update()},U.showTileBoundaries.get=function(){return!!this._showTileBoundaries},U.showTileBoundaries.set=function(X){this._showTileBoundaries!==X&&(this._showTileBoundaries=X,this._update())},U.showPadding.get=function(){return!!this._showPadding},U.showPadding.set=function(X){this._showPadding!==X&&(this._showPadding=X,this._update())},U.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},U.showCollisionBoxes.set=function(X){this._showCollisionBoxes!==X&&(this._showCollisionBoxes=X,X?this.style._generateCollisionBoxes():this._update())},U.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},U.showOverdrawInspector.set=function(X){this._showOverdrawInspector!==X&&(this._showOverdrawInspector=X,this._update())},U.repaint.get=function(){return!!this._repaint},U.repaint.set=function(X){this._repaint!==X&&(this._repaint=X,this.triggerRepaint())},U.vertices.get=function(){return!!this._vertices},U.vertices.set=function(X){this._vertices=X,this._update()},z.prototype._setCacheLimits=function(X,fe){e.setCacheLimits(X,fe)},U.version.get=function(){return e.version},Object.defineProperties(z.prototype,U),z}(Kl);function pc(O){O.parentNode&&O.parentNode.removeChild(O)}var eu={showCompass:!0,showZoom:!0,visualizePitch:!1},ca=function(O){var z=this;this.options=e.extend({},eu,O),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(U){return U.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(U){return z._map.zoomIn({},{originalEvent:U})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(U){return z._map.zoomOut({},{originalEvent:U})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(U){z.options.visualizePitch?z._map.resetNorthPitch({},{originalEvent:U}):z._map.resetNorth({},{originalEvent:U})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ca.prototype._updateZoomButtons=function(){var O=this._map.getZoom();this._zoomInButton.disabled=O===this._map.getMaxZoom(),this._zoomOutButton.disabled=O===this._map.getMinZoom()},ca.prototype._rotateCompassArrow=function(){var O=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=O},ca.prototype.onAdd=function(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pa(this._map,this._compass,this.options.visualizePitch)),this._container},ca.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ca.prototype._createButton=function(O,z){var U=i.create("button",O,this._container);return U.type="button",U.addEventListener("click",z),U},ca.prototype._setButtonTitle=function(O,z){var U=this._map._getUIString("NavigationControl."+z);O.title=U,O.setAttribute("aria-label",U)};var Pa=function(O,z,U){void 0===U&&(U=!1),this._clickTolerance=10,this.element=z,this.mouseRotate=new ha({clickTolerance:O.dragRotate._mouseRotate._clickTolerance}),this.map=O,U&&(this.mousePitch=new pr({clickTolerance:O.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(z,"mousedown",this.mousedown),i.addEventListener(z,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(z,"touchmove",this.touchmove),i.addEventListener(z,"touchend",this.touchend),i.addEventListener(z,"touchcancel",this.reset)};function uo(O,z,U){if(O=new e.LngLat(O.lng,O.lat),z){var X=new e.LngLat(O.lng-360,O.lat),fe=new e.LngLat(O.lng+360,O.lat),ye=U.locationPoint(O).distSqr(z);U.locationPoint(X).distSqr(z)<ye?O=X:U.locationPoint(fe).distSqr(z)<ye&&(O=fe)}for(;Math.abs(O.lng-U.center.lng)>180;){var we=U.locationPoint(O);if(we.x>=0&&we.y>=0&&we.x<=U.width&&we.y<=U.height)break;O.lng>U.center.lng?O.lng-=360:O.lng+=360}return O}Pa.prototype.down=function(O,z){this.mouseRotate.mousedown(O,z),this.mousePitch&&this.mousePitch.mousedown(O,z),i.disableDrag()},Pa.prototype.move=function(O,z){var U=this.map,X=this.mouseRotate.mousemoveWindow(O,z);if(X&&X.bearingDelta&&U.setBearing(U.getBearing()+X.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(O,z);fe&&fe.pitchDelta&&U.setPitch(U.getPitch()+fe.pitchDelta)}},Pa.prototype.off=function(){var O=this.element;i.removeEventListener(O,"mousedown",this.mousedown),i.removeEventListener(O,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(O,"touchmove",this.touchmove),i.removeEventListener(O,"touchend",this.touchend),i.removeEventListener(O,"touchcancel",this.reset),this.offTemp()},Pa.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},Pa.prototype.mousedown=function(O){this.down(e.extend({},O,{ctrlKey:!0,preventDefault:function(){return O.preventDefault()}}),i.mousePos(this.element,O)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},Pa.prototype.mousemove=function(O){this.move(O,i.mousePos(this.element,O))},Pa.prototype.mouseup=function(O){this.mouseRotate.mouseupWindow(O),this.mousePitch&&this.mousePitch.mouseupWindow(O),this.offTemp()},Pa.prototype.touchstart=function(O){1!==O.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,O.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return O.preventDefault()}},this._startPos))},Pa.prototype.touchmove=function(O){1!==O.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,O.targetTouches)[0],this.move({preventDefault:function(){return O.preventDefault()}},this._lastPos))},Pa.prototype.touchend=function(O){0===O.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Pa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var bl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function No(O,z,U){var X=O.classList;for(var fe in bl)X.remove("mapboxgl-"+U+"-anchor-"+fe);X.add("mapboxgl-"+U+"-anchor-"+z)}var kl,tu=function(O){function z(U,X){var fe=this;if(O.call(this),(U instanceof e.window.HTMLElement||X)&&(U=e.extend({element:U},X)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=U&&U.anchor||"center",this._color=U&&U.color||"#3FB1CE",this._draggable=U&&U.draggable||!1,this._state="inactive",this._rotation=U&&U.rotation||0,this._rotationAlignment=U&&U.rotationAlignment||"auto",this._pitchAlignment=U&&U.pitchAlignment&&"auto"!==U.pitchAlignment?U.pitchAlignment:this._rotationAlignment,U&&U.element)this._element=U.element,this._offset=e.Point.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var ye=i.createNS("http://www.w3.org/2000/svg","svg");ye.setAttributeNS(null,"display","block"),ye.setAttributeNS(null,"height","41px"),ye.setAttributeNS(null,"width","27px"),ye.setAttributeNS(null,"viewBox","0 0 27 41");var we=i.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"stroke","none"),we.setAttributeNS(null,"stroke-width","1"),we.setAttributeNS(null,"fill","none"),we.setAttributeNS(null,"fill-rule","evenodd");var ke=i.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"fill-rule","nonzero");var Pe=i.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Pe.setAttributeNS(null,"fill","#000000");for(var Ze=0,nt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ze<nt.length;Ze+=1){var ht=nt[Ze],St=i.createNS("http://www.w3.org/2000/svg","ellipse");St.setAttributeNS(null,"opacity","0.04"),St.setAttributeNS(null,"cx","10.5"),St.setAttributeNS(null,"cy","5.80029008"),St.setAttributeNS(null,"rx",ht.rx),St.setAttributeNS(null,"ry",ht.ry),Pe.appendChild(St)}var jt=i.createNS("http://www.w3.org/2000/svg","g");jt.setAttributeNS(null,"fill",this._color);var Lt=i.createNS("http://www.w3.org/2000/svg","path");Lt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),jt.appendChild(Lt);var Ft=i.createNS("http://www.w3.org/2000/svg","g");Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"fill","#000000");var kt=i.createNS("http://www.w3.org/2000/svg","path");kt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ft.appendChild(kt);var Xt=i.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Xt.setAttributeNS(null,"fill","#FFFFFF");var Gt=i.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Qt=i.createNS("http://www.w3.org/2000/svg","circle");Qt.setAttributeNS(null,"fill","#000000"),Qt.setAttributeNS(null,"opacity","0.25"),Qt.setAttributeNS(null,"cx","5.5"),Qt.setAttributeNS(null,"cy","5.5"),Qt.setAttributeNS(null,"r","5.4999962");var gn=i.createNS("http://www.w3.org/2000/svg","circle");gn.setAttributeNS(null,"fill","#FFFFFF"),gn.setAttributeNS(null,"cx","5.5"),gn.setAttributeNS(null,"cy","5.5"),gn.setAttributeNS(null,"r","5.4999962"),Gt.appendChild(Qt),Gt.appendChild(gn),ke.appendChild(Pe),ke.appendChild(jt),ke.appendChild(Ft),ke.appendChild(Xt),ke.appendChild(Gt),ye.appendChild(ke),this._element.appendChild(ye),this._offset=e.Point.convert(U&&U.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(kn){kn.preventDefault()}),this._element.addEventListener("mousedown",function(kn){kn.preventDefault()}),this._element.addEventListener("focus",function(){var kn=fe._map.getContainer();kn.scrollTop=0,kn.scrollLeft=0}),No(this._element,this._anchor,"marker"),this._popup=null}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.addTo=function(U){return this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._update),U.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},z.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(U){return this._lngLat=e.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},z.prototype.getElement=function(){return this._element},z.prototype.setPopup=function(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){var X=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[X,-1*(24.6+X)],"bottom-right":[-X,-1*(24.6+X)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=U,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},z.prototype._onKeyPress=function(U){var X=U.code,fe=U.charCode||U.keyCode;"Space"!==X&&"Enter"!==X&&32!==fe&&13!==fe||this.togglePopup()},z.prototype._onMapClick=function(U){var X=U.originalEvent.target,fe=this._element;this._popup&&(X===fe||fe.contains(X))&&this.togglePopup()},z.prototype.getPopup=function(){return this._popup},z.prototype.togglePopup=function(){var U=this._popup;return U?(U.isOpen()?U.remove():U.addTo(this._map),this):this},z.prototype._update=function(U){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=uo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var X="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?X="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(X="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?fe="rotateX(0deg)":"map"===this._pitchAlignment&&(fe="rotateX("+this._map.getPitch()+"deg)"),U&&"moveend"!==U.type||(this._pos=this._pos.round()),i.setTransform(this._element,bl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+X)}},z.prototype.getOffset=function(){return this._offset},z.prototype.setOffset=function(U){return this._offset=e.Point.convert(U),this._update(),this},z.prototype._onMove=function(U){this._pos=U.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},z.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},z.prototype._addDragHandler=function(U){this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},z.prototype.setDraggable=function(U){return this._draggable=!!U,this._map&&(U?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},z.prototype.isDraggable=function(){return this._draggable},z.prototype.setRotation=function(U){return this._rotation=U||0,this._update(),this},z.prototype.getRotation=function(){return this._rotation},z.prototype.setRotationAlignment=function(U){return this._rotationAlignment=U||"auto",this._update(),this},z.prototype.getRotationAlignment=function(){return this._rotationAlignment},z.prototype.setPitchAlignment=function(U){return this._pitchAlignment=U&&"auto"!==U?U:this._rotationAlignment,this._update(),this},z.prototype.getPitchAlignment=function(){return this._pitchAlignment},z}(e.Evented),Yl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},nu=0,nl=!1,ru=function(O){function z(U){O.call(this),this.options=e.extend({},Yl,U),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.onAdd=function(U){var X;return this._map=U,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),X=this._setupUI,void 0!==kl?X(kl):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){X(kl="denied"!==fe.state)}):X(kl=!!e.window.navigator.geolocation),this._container},z.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,nu=0,nl=!1},z.prototype._isOutOfMapMaxBounds=function(U){var X=this._map.getMaxBounds(),fe=U.coords;return X&&(fe.longitude<X.getWest()||fe.longitude>X.getEast()||fe.latitude<X.getSouth()||fe.latitude>X.getNorth())},z.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},z.prototype._onSuccess=function(U){if(this._map){if(this._isOutOfMapMaxBounds(U))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",U)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=U,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(U),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(U),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",U)),this._finish()}},z.prototype._updateCamera=function(U){var X=new e.LngLat(U.coords.longitude,U.coords.latitude),fe=U.coords.accuracy,ye=this._map.getBearing(),we=e.extend({bearing:ye},this.options.fitBoundsOptions);this._map.fitBounds(X.toBounds(fe),we,{geolocateSource:!0})},z.prototype._updateMarker=function(U){if(U){var X=new e.LngLat(U.coords.longitude,U.coords.latitude);this._accuracyCircleMarker.setLngLat(X).addTo(this._map),this._userLocationDotMarker.setLngLat(X).addTo(this._map),this._accuracy=U.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},z.prototype._updateCircleRadius=function(){var U=this._map._container.clientHeight/2,X=this._map.unproject([0,U]),fe=this._map.unproject([1,U]),ye=X.distanceTo(fe),we=Math.ceil(2*this._accuracy/ye);this._circleElement.style.width=we+"px",this._circleElement.style.height=we+"px"},z.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},z.prototype._onError=function(U){if(this._map){if(this.options.trackUserLocation)if(1===U.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var X=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=X,this._geolocateButton.setAttribute("aria-label",X),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===U.code&&nl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",U)),this._finish()}},z.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},z.prototype._setupUI=function(U){var X=this;if(this._container.addEventListener("contextmenu",function(we){return we.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===U){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var ye=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ye,this._geolocateButton.setAttribute("aria-label",ye)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new tu(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(we){we.geolocateSource||"ACTIVE_LOCK"!==X._watchState||we.originalEvent&&"resize"===we.originalEvent.type||(X._watchState="BACKGROUND",X._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),X._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),X.fire(new e.Event("trackuserlocationend")))})},z.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":nu--,nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var U;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++nu>1?(U={maximumAge:6e5,timeout:0},nl=!0):(U=this.options.positionOptions,nl=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,U)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},z.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},z}(e.Evented),ku={maxWidth:100,unit:"metric"},_l=function(O){this.options=e.extend({},ku,O),e.bindAll(["_onMove","setUnit"],this)};function Xu(O,z,U){var X=U&&U.maxWidth||100,fe=O._container.clientHeight/2,ye=O.unproject([0,fe]),we=O.unproject([X,fe]),ke=ye.distanceTo(we);if(U&&"imperial"===U.unit){var Pe=3.2808*ke;Pe>5280?iu(z,X,Pe/5280,O._getUIString("ScaleControl.Miles")):iu(z,X,Pe,O._getUIString("ScaleControl.Feet"))}else U&&"nautical"===U.unit?iu(z,X,ke/1852,O._getUIString("ScaleControl.NauticalMiles")):ke>=1e3?iu(z,X,ke/1e3,O._getUIString("ScaleControl.Kilometers")):iu(z,X,ke,O._getUIString("ScaleControl.Meters"))}function iu(O,z,U,X){var fe,ye,we,Ze,nt,ke=(fe=U,(ye=Math.pow(10,(""+Math.floor(fe)).length-1))*(we=(we=fe/ye)>=10?10:we>=5?5:we>=3?3:we>=2?2:we>=1?1:(Ze=we,nt=Math.pow(10,Math.ceil(-Math.log(Ze)/Math.LN10)),Math.round(Ze*nt)/nt)));O.style.width=z*(ke/U)+"px",O.innerHTML=ke+"&nbsp;"+X}_l.prototype.getDefaultPosition=function(){return"bottom-left"},_l.prototype._onMove=function(){Xu(this._map,this._container,this.options)},_l.prototype.onAdd=function(O){return this._map=O,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},_l.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},_l.prototype.setUnit=function(O){this.options.unit=O,Xu(this._map,this._container,this.options)};var Ao=function(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof e.window.HTMLElement?this._container=O.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ao.prototype.onAdd=function(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ao.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ao.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Ao.prototype._setupUI=function(){var O=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",O).setAttribute("aria-hidden",!0),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ao.prototype._updateTitle=function(){var O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O},Ao.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ao.prototype._isFullscreen=function(){return this._fullscreen},Ao.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ao.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var au={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Hc=function(O){function z(U){O.call(this),this.options=e.extend(Object.create(au),U),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return O&&(z.__proto__=O),(z.prototype=Object.create(O&&O.prototype)).constructor=z,z.prototype.addTo=function(U){return this._map&&this.remove(),this._map=U,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},z.prototype.isOpen=function(){return!!this._map},z.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(U){return this._lngLat=e.LngLat.convert(U),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},z.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},z.prototype.getElement=function(){return this._container},z.prototype.setText=function(U){return this.setDOMContent(e.window.document.createTextNode(U))},z.prototype.setHTML=function(U){var X,fe=e.window.document.createDocumentFragment(),ye=e.window.document.createElement("body");for(ye.innerHTML=U;X=ye.firstChild;)fe.appendChild(X);return this.setDOMContent(fe)},z.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},z.prototype.setMaxWidth=function(U){return this.options.maxWidth=U,this._update(),this},z.prototype.setDOMContent=function(U){return this._createContent(),this._content.appendChild(U),this._update(),this},z.prototype.addClassName=function(U){this._container&&this._container.classList.add(U)},z.prototype.removeClassName=function(U){this._container&&this._container.classList.remove(U)},z.prototype.toggleClassName=function(U){if(this._container)return this._container.classList.toggle(U)},z.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},z.prototype._onMouseUp=function(U){this._update(U.point)},z.prototype._onMouseMove=function(U){this._update(U.point)},z.prototype._onDrag=function(U){this._update(U.point)},z.prototype._update=function(U){var X=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(St){return X._container.classList.add(St)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=uo(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||U)){var ye=this._pos=this._trackPointer&&U?U:this._map.project(this._lngLat),we=this.options.anchor,ke=function St(jt){if(jt){if("number"==typeof jt){var Lt=Math.round(Math.sqrt(.5*Math.pow(jt,2)));return{center:new e.Point(0,0),top:new e.Point(0,jt),"top-left":new e.Point(Lt,Lt),"top-right":new e.Point(-Lt,Lt),bottom:new e.Point(0,-jt),"bottom-left":new e.Point(Lt,-Lt),"bottom-right":new e.Point(-Lt,-Lt),left:new e.Point(jt,0),right:new e.Point(-jt,0)}}if(jt instanceof e.Point||Array.isArray(jt)){var Ft=e.Point.convert(jt);return{center:Ft,top:Ft,"top-left":Ft,"top-right":Ft,bottom:Ft,"bottom-left":Ft,"bottom-right":Ft,left:Ft,right:Ft}}return{center:e.Point.convert(jt.center||[0,0]),top:e.Point.convert(jt.top||[0,0]),"top-left":e.Point.convert(jt["top-left"]||[0,0]),"top-right":e.Point.convert(jt["top-right"]||[0,0]),bottom:e.Point.convert(jt.bottom||[0,0]),"bottom-left":e.Point.convert(jt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(jt["bottom-right"]||[0,0]),left:e.Point.convert(jt.left||[0,0]),right:e.Point.convert(jt.right||[0,0])}}return St(new e.Point(0,0))}(this.options.offset);if(!we){var Pe,Ze=this._container.offsetWidth,nt=this._container.offsetHeight;Pe=ye.y+ke.bottom.y<nt?["top"]:ye.y>this._map.transform.height-nt?["bottom"]:[],ye.x<Ze/2?Pe.push("left"):ye.x>this._map.transform.width-Ze/2&&Pe.push("right"),we=0===Pe.length?"bottom":Pe.join("-")}var ht=ye.add(ke[we]).round();i.setTransform(this._container,bl[we]+" translate("+ht.x+"px,"+ht.y+"px)"),No(this._container,we,"popup")}},z.prototype._onClose=function(){this.remove()},z}(e.Evented),pe={version:e.version,supported:o,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Is,NavigationControl:ca,GeolocateControl:ru,AttributionControl:Io,ScaleControl:_l,FullscreenControl:Ao,Popup:Hc,Marker:tu,Style:or,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){ut().acquire(Ot)},clearPrewarmedResources:function(){var O=Jt;O&&(O.isPreloaded()&&1===O.numActive()?(O.release(Ot),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(O){e.config.ACCESS_TOKEN=O},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(O){e.config.API_URL=O},get workerCount(){return Pt.workerCount},set workerCount(O){Pt.workerCount=O},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){e.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage:function(O){e.clearTileCache(O)},workerUrl:""};return pe}),T},"object"==typeof se&&void 0!==oe?oe.exports=x():(v=v||self).mapboxgl=x()},{}],240:[function(_,oe,se){"use strict";oe.exports=Math.log2||function(v){return Math.log(v)*Math.LOG2E}},{}],241:[function(_,oe,se){"use strict";oe.exports=function(x,T){T||(T=x,x=window);var b=0,e=0,o=0,i={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function r(w){var f=!1;return"altKey"in w&&(f=f||w.altKey!==i.alt,i.alt=!!w.altKey),"shiftKey"in w&&(f=f||w.shiftKey!==i.shift,i.shift=!!w.shiftKey),"ctrlKey"in w&&(f=f||w.ctrlKey!==i.control,i.control=!!w.ctrlKey),"metaKey"in w&&(f=f||w.metaKey!==i.meta,i.meta=!!w.metaKey),f}function y(w,f){var A=v.x(f),M=v.y(f);"buttons"in f&&(w=0|f.buttons),(w!==b||A!==e||M!==o||r(f))&&(b=0|w,e=A||0,o=M||0,T&&T(b,e,o,i))}function h(w){y(0,w)}function s(){(b||e||o||i.shift||i.alt||i.meta||i.control)&&(e=o=0,b=0,i.shift=i.alt=i.control=i.meta=!1,T&&T(0,0,0,i))}function d(w){r(w)&&T&&T(b,e,o,i)}function p(w){0===v.buttons(w)?y(0,w):y(b,w)}function c(w){y(b|v.buttons(w),w)}function g(w){y(b&~v.buttons(w),w)}function m(){l||(l=!0,x.addEventListener("mousemove",p),x.addEventListener("mousedown",c),x.addEventListener("mouseup",g),x.addEventListener("mouseleave",h),x.addEventListener("mouseenter",h),x.addEventListener("mouseout",h),x.addEventListener("mouseover",h),x.addEventListener("blur",s),x.addEventListener("keyup",d),x.addEventListener("keydown",d),x.addEventListener("keypress",d),x!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var u={element:x};return Object.defineProperties(u,{enabled:{get:function(){return l},set:function(w){w?m():!l||(l=!1,x.removeEventListener("mousemove",p),x.removeEventListener("mousedown",c),x.removeEventListener("mouseup",g),x.removeEventListener("mouseleave",h),x.removeEventListener("mouseenter",h),x.removeEventListener("mouseout",h),x.removeEventListener("mouseover",h),x.removeEventListener("blur",s),x.removeEventListener("keyup",d),x.removeEventListener("keydown",d),x.removeEventListener("keypress",d),x!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return b},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),u};var v=_("mouse-event")},{"mouse-event":243}],242:[function(_,oe,se){var v={left:0,top:0};oe.exports=function(x,T,b){T=T||x.currentTarget||x.srcElement,Array.isArray(b)||(b=[0,0]);var l,e=x.clientX||0,o=x.clientY||0,i=(l=T)===window||l===document||l===document.body?v:l.getBoundingClientRect();return b[0]=e-i.left,b[1]=o-i.top,b}},{}],243:[function(_,oe,se){"use strict";function v(x){return x.target||x.srcElement||window}se.buttons=function(x){if("object"==typeof x){if("buttons"in x)return x.buttons;if("which"in x){if(2===(T=x.which))return 4;if(3===T)return 2;if(T>0)return 1<<T-1}else if("button"in x){var T;if(1===(T=x.button))return 4;if(2===T)return 2;if(T>=0)return 1<<T}}return 0},se.element=v,se.x=function(x){if("object"==typeof x){if("offsetX"in x)return x.offsetX;var T=v(x).getBoundingClientRect();return x.clientX-T.left}return 0},se.y=function(x){if("object"==typeof x){if("offsetY"in x)return x.offsetY;var T=v(x).getBoundingClientRect();return x.clientY-T.top}return 0}},{}],244:[function(_,oe,se){"use strict";var v=_("to-px");oe.exports=function(x,T,b){"function"==typeof x&&(b=!!T,T=x,x=window);var e=v("ex",x),o=function(i){b&&i.preventDefault();var l=i.deltaX||0,r=i.deltaY||0,y=i.deltaZ||0,h=1;switch(i.deltaMode){case 1:h=e;break;case 2:h=window.innerHeight}if(r*=h,y*=h,(l*=h)||r||y)return T(l,r,y,i)};return x.addEventListener("wheel",o),o}},{"to-px":314}],245:[function(_,oe,se){(function(v,x){(function(){var T,b,e;e=function(){"use strict";var T,b,e,o=Object.prototype.toString,i=void 0!==x?function(w){return x(w)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(w,f,A,M){return Object.defineProperty(w,f,{value:A,writable:!0,configurable:!1!==M})}}catch(w){T=function(f,A,M){return f[A]=M,f}}function l(w,f){e.add(w,f),b||(b=i(e.drain))}function r(w){var f,A=typeof w;return null==w||"object"!=A&&"function"!=A||(f=w.then),"function"==typeof f&&f}function y(){for(var w=0;w<this.chain.length;w++)h(this,1===this.state?this.chain[w].success:this.chain[w].failure,this.chain[w]);this.chain.length=0}function h(w,f,A){var M,k;try{!1===f?A.reject(w.msg):(M=!0===f?w.msg:f.call(void 0,w.msg))===A.promise?A.reject(TypeError("Promise-chain cycle")):(k=r(M))?k.call(M,A.resolve,A.reject):A.resolve(M)}catch(E){A.reject(E)}}function s(w){var f,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(f=r(w))?l(function(){var M=new c(A);try{f.call(w,function(){s.apply(M,arguments)},function(){d.apply(M,arguments)})}catch(k){d.call(M,k)}}):(A.msg=w,A.state=1,A.chain.length>0&&l(y,A))}catch(M){d.call(new c(A),M)}}}function d(w){var f=this;f.triggered||(f.triggered=!0,f.def&&(f=f.def),f.msg=w,f.state=2,f.chain.length>0&&l(y,f))}function p(w,f,A,M){for(var k=0;k<f.length;k++)!function(E){w.resolve(f[E]).then(function(P){A(E,P)},M)}(k)}function c(w){this.def=w,this.triggered=!1}function g(w){this.promise=w,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(w){if("function"!=typeof w)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var f=new g(this);this.then=function(A,M){var k={success:"function"!=typeof A||A,failure:"function"==typeof M&&M};return k.promise=new this.constructor(function(E,P){if("function"!=typeof E||"function"!=typeof P)throw TypeError("Not a function");k.resolve=E,k.reject=P}),f.chain.push(k),0!==f.state&&l(y,f),k.promise},this.catch=function(A){return this.then(void 0,A)};try{w.call(void 0,function(A){s.call(f,A)},function(A){d.call(f,A)})}catch(A){d.call(f,A)}}e=function(){var w,f,A;function M(k,E){this.fn=k,this.self=E,this.next=void 0}return{add:function(k,E){A=new M(k,E),f?f.next=A:w=A,f=A,A=void 0},drain:function(){var k=w;for(w=f=b=void 0;k;)k.fn.call(k.self),k=k.next}}}();var u=T({},"constructor",m,!1);return m.prototype=u,T(u,"__NPO__",0,!1),T(m,"resolve",function(w){return w&&"object"==typeof w&&1===w.__NPO__?w:new this(function(f,A){if("function"!=typeof f||"function"!=typeof A)throw TypeError("Not a function");f(w)})}),T(m,"reject",function(w){return new this(function(f,A){if("function"!=typeof f||"function"!=typeof A)throw TypeError("Not a function");A(w)})}),T(m,"all",function(w){var f=this;return"[object Array]"!=o.call(w)?f.reject(TypeError("Not an array")):0===w.length?f.resolve([]):new f(function(A,M){if("function"!=typeof A||"function"!=typeof M)throw TypeError("Not a function");var k=w.length,E=Array(k),P=0;p(f,w,function(D,F){E[D]=F,++P===k&&A(E)},M)})}),T(m,"race",function(w){var f=this;return"[object Array]"!=o.call(w)?f.reject(TypeError("Not an array")):new f(function(A,M){if("function"!=typeof A||"function"!=typeof M)throw TypeError("Not a function");p(f,w,function(k,E){A(E)},M)})}),m},(b=void 0!==v?v:this)[T="Promise"]=b[T]||e(),void 0!==oe&&oe.exports&&(oe.exports=b[T])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_("timers").setImmediate)},{timers:311}],246:[function(_,oe,se){var v=Math.PI,x=i(120);function T(l,r,y,h){return["C",l,r,y,h,y,h]}function b(l,r,y,h,s,d){return["C",l/3+2/3*y,r/3+2/3*h,s/3+2/3*y,d/3+2/3*h,s,d]}function e(l,r,y,h,s,d,p,c,g,m){if(m)F=m[0],R=m[1],P=m[2],D=m[3];else{var u=o(l,r,-s);r=u.y;var w=((l=u.x)-(c=(u=o(c,g,-s)).x))/2,f=(r-(g=u.y))/2,A=w*w/(y*y)+f*f/(h*h);A>1&&(y*=A=Math.sqrt(A),h*=A);var M=y*y,k=h*h,E=(d==p?-1:1)*Math.sqrt(Math.abs((M*k-M*f*f-k*w*w)/(M*f*f+k*w*w)));E==1/0&&(E=1);var P=E*y*f/h+(l+c)/2,D=E*-h*w/y+(r+g)/2,F=Math.asin(((r-D)/h).toFixed(9)),R=Math.asin(((g-D)/h).toFixed(9));(F=l<P?v-F:F)<0&&(F=2*v+F),(R=c<P?v-R:R)<0&&(R=2*v+R),p&&F>R&&(F-=2*v),!p&&R>F&&(R-=2*v)}if(Math.abs(R-F)>x){var L=R,I=c,B=g;R=F+x*(p&&R>F?1:-1);var V=e(c=P+y*Math.cos(R),g=D+h*Math.sin(R),y,h,s,0,p,I,B,[R,L,P,D])}var Z=Math.tan((R-F)/4),Y=4/3*y*Z,Q=4/3*h*Z,re=[2*l-(l+Y*Math.sin(F)),2*r-(r-Q*Math.cos(F)),c+Y*Math.sin(R),g-Q*Math.cos(R),c,g];if(m)return re;V&&(re=re.concat(V));for(var $=0;$<re.length;){var J=o(re[$],re[$+1],s);re[$++]=J.x,re[$++]=J.y}return re}function o(l,r,y){return{x:l*Math.cos(y)-r*Math.sin(y),y:l*Math.sin(y)+r*Math.cos(y)}}function i(l){return l*(v/180)}oe.exports=function(l){for(var r,y=[],h=0,s=0,d=0,p=0,c=null,g=null,m=0,u=0,w=0,f=l.length;w<f;w++){var A=l[w],M=A[0];switch(M){case"M":d=A[1],p=A[2];break;case"A":(A=e(m,u,A[1],A[2],i(A[3]),A[4],A[5],A[6],A[7])).unshift("C"),A.length>7&&(y.push(A.splice(0,7)),A.unshift("C"));break;case"S":var k=m,E=u;"C"!=r&&"S"!=r||(k+=k-h,E+=E-s),A=["C",k,E,A[1],A[2],A[3],A[4]];break;case"T":"Q"==r||"T"==r?(c=2*m-c,g=2*u-g):(c=m,g=u),A=b(m,u,c,g,A[1],A[2]);break;case"Q":c=A[1],g=A[2],A=b(m,u,A[1],A[2],A[3],A[4]);break;case"L":A=T(m,u,A[1],A[2]);break;case"H":A=T(m,u,A[1],u);break;case"V":A=T(m,u,m,A[1]);break;case"Z":A=T(m,u,d,p)}r=M,m=A[A.length-2],u=A[A.length-1],A.length>4?(h=A[A.length-4],s=A[A.length-3]):(h=m,s=u),y.push(A)}return y}},{}],247:[function(_,oe,se){"use strict";var v=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;function b(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}oe.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var o={},i=0;i<10;i++)o["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(r){return o[r]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(r){l[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(r){return!1}}()?Object.assign:function(e,o){for(var i,l,r=b(e),y=1;y<arguments.length;y++){for(var h in i=Object(arguments[y]))x.call(i,h)&&(r[h]=i[h]);if(v){l=v(i);for(var s=0;s<l.length;s++)T.call(i,l[s])&&(r[l[s]]=i[l[s]])}}return r}},{}],248:[function(_,oe,se){"use strict";function v(b,e){if("string"!=typeof b)return[b];var o=[b];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var i=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],l=e.escape||"___",r=!!e.flat;i.forEach(function(h){var s=new RegExp(["\\",h[0],"[^\\",h[0],"\\",h[1],"]*\\",h[1]].join("")),d=[];function p(c,g,m){var u=o.push(c.slice(h[0].length,-h[1].length))-1;return d.push(u),l+u+l}o.forEach(function(c,g){for(var m,u=0;c!=m;)if(m=c,c=c.replace(s,p),u++>1e4)throw Error("References have circular dependency. Please, check them.");o[g]=c}),d=d.reverse(),o=o.map(function(c){return d.forEach(function(g){c=c.replace(new RegExp("(\\"+l+g+"\\"+l+")","g"),h[0]+"$1"+h[1])}),c})});var y=new RegExp("\\"+l+"([0-9]+)\\"+l);return r?o:function h(s,d,p){for(var c,g=[],m=0;c=y.exec(s);){if(m++>1e4)throw Error("Circular references in parenthesis");g.push(s.slice(0,c.index)),g.push(h(d[c[1]],d)),s=s.slice(c.index+c[0].length)}return g.push(s),g}(o[0],o)}function x(b,e){if(e&&e.flat){var o,i=e&&e.escape||"___",l=b[0];if(!l)return"";for(var r=new RegExp("\\"+i+"([0-9]+)\\"+i),y=0;l!=o;){if(y++>1e4)throw Error("Circular references in "+b);o=l,l=l.replace(r,h)}return l}return b.reduce(function s(d,p){return Array.isArray(p)&&(p=p.reduce(s,"")),d+p},"");function h(s,d){if(null==b[d])throw Error("Reference "+d+"is undefined");return b[d]}}function T(b,e){return Array.isArray(b)?x(b,e):v(b,e)}T.parse=v,T.stringify=x,oe.exports=T},{}],249:[function(_,oe,se){"use strict";var v=_("pick-by-alias");oe.exports=function(x){var T;return arguments.length>1&&(x=arguments),"string"==typeof x?x=x.split(/\s/).map(parseFloat):"number"==typeof x&&(x=[x]),x.length&&"number"==typeof x[0]?T=1===x.length?{width:x[0],height:x[0],x:0,y:0}:2===x.length?{width:x[0],height:x[1],x:0,y:0}:{x:x[0],y:x[1],width:x[2]-x[0]||0,height:x[3]-x[1]||0}:x&&((T={x:(x=v(x,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:x.top||0}).width=null==x.width?x.right?x.right-T.x:0:x.width,T.height=null==x.height?x.bottom?x.bottom-T.y:0:x.height),T}},{"pick-by-alias":253}],250:[function(_,oe,se){oe.exports=function(b){var e=[];return b.replace(x,function(o,i,l){var h,r=i.toLowerCase();for(h=void 0,l=(h=l.match(T))?h.map(Number):[],"m"==r&&l.length>2&&(e.push([i].concat(l.splice(0,2))),r="l",i="m"==i?"l":"L");;){if(l.length==v[r])return l.unshift(i),e.push(l);if(l.length<v[r])throw new Error("malformed path data");e.push([i].concat(l.splice(0,v[r])))}}),e};var v={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},x=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(_,oe,se){oe.exports=function(v,x){x||(x=[0,""]),v=String(v);var T=parseFloat(v,10);return x[0]=T,x[1]=v.match(/[\d.\-\+]*\s*(.*)/)[1]||"",x}},{}],252:[function(_,oe,se){(function(v){(function(){(function(){var x,T,b,e,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?oe.exports=function(){return performance.now()}:null!=v&&v.hrtime?(oe.exports=function(){return(x()-o)/1e6},T=v.hrtime,e=(x=function(){var l;return 1e9*(l=T())[0]+l[1]})(),i=1e9*v.uptime(),o=e-i):Date.now?(oe.exports=function(){return Date.now()-b},b=Date.now()):(oe.exports=function(){return(new Date).getTime()-b},b=(new Date).getTime())}).call(this)}).call(this)}).call(this,_("_process"))},{_process:277}],253:[function(_,oe,se){"use strict";oe.exports=function(T,b,e){var o,i,l={};if("string"==typeof b&&(b=x(b)),Array.isArray(b)){var r={};for(i=0;i<b.length;i++)r[b[i]]=!0;b=r}for(o in b)b[o]=x(b[o]);var y={};for(o in b){var h=b[o];if(Array.isArray(h))for(i=0;i<h.length;i++){var s=h[i];if(e&&(y[s]=!0),s in T){if(l[o]=T[s],e)for(var d=i;d<h.length;d++)y[h[d]]=!0;break}}else o in T&&(b[o]&&(l[o]=T[o]),e&&(y[o]=!0))}if(e)for(o in T)y[o]||(l[o]=T[o]);return l};var v={};function x(T){return v[T]?v[T]:("string"==typeof T&&(T=v[T]=T.split(/\s*,\s*|\s+/)),T)}},{}],254:[function(_,oe,se){var v,x=_("./lib/build-log"),T=_("./lib/epsilon"),b=_("./lib/intersecter"),e=_("./lib/segment-chainer"),o=_("./lib/segment-selector"),i=_("./lib/geojson"),l=!1,r=T();function y(h,s,d){var p=v.segments(h),c=v.segments(s),g=d(v.combine(p,c));return v.polygon(g)}v={buildLog:function(h){return!0===h?l=x():!1===h&&(l=!1),!1!==l&&l.list},epsilon:function(h){return r.epsilon(h)},segments:function(h){var s=b(!0,r,l);return h.regions.forEach(s.addRegion),{segments:s.calculate(h.inverted),inverted:h.inverted}},combine:function(h,s){return{combined:b(!1,r,l).calculate(h.segments,h.inverted,s.segments,s.inverted),inverted1:h.inverted,inverted2:s.inverted}},selectUnion:function(h){return{segments:o.union(h.combined,l),inverted:h.inverted1||h.inverted2}},selectIntersect:function(h){return{segments:o.intersect(h.combined,l),inverted:h.inverted1&&h.inverted2}},selectDifference:function(h){return{segments:o.difference(h.combined,l),inverted:h.inverted1&&!h.inverted2}},selectDifferenceRev:function(h){return{segments:o.differenceRev(h.combined,l),inverted:!h.inverted1&&h.inverted2}},selectXor:function(h){return{segments:o.xor(h.combined,l),inverted:h.inverted1!==h.inverted2}},polygon:function(h){return{regions:e(h.segments,r,l),inverted:h.inverted}},polygonFromGeoJSON:function(h){return i.toPolygon(v,h)},polygonToGeoJSON:function(h){return i.fromPolygon(v,r,h)},union:function(h,s){return y(h,s,v.selectUnion)},intersect:function(h,s){return y(h,s,v.selectIntersect)},difference:function(h,s){return y(h,s,v.selectDifference)},differenceRev:function(h,s){return y(h,s,v.selectDifferenceRev)},xor:function(h,s){return y(h,s,v.selectXor)}},"object"==typeof window&&(window.PolyBool=v),oe.exports=v},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(_,oe,se){oe.exports=function(){var v,x=0,T=!1;function b(e,o){return v.list.push({type:e,data:o?JSON.parse(JSON.stringify(o)):void 0}),v}return v={list:[],segmentId:function(){return x++},checkIntersection:function(e,o){return b("check",{seg1:e,seg2:o})},segmentChop:function(e,o){return b("div_seg",{seg:e,pt:o}),b("chop",{seg:e,pt:o})},statusRemove:function(e){return b("pop_seg",{seg:e})},segmentUpdate:function(e){return b("seg_update",{seg:e})},segmentNew:function(e,o){return b("new_seg",{seg:e,primary:o})},segmentRemove:function(e){return b("rem_seg",{seg:e})},tempStatus:function(e,o,i){return b("temp_status",{seg:e,above:o,below:i})},rewind:function(e){return b("rewind",{seg:e})},status:function(e,o,i){return b("status",{seg:e,above:o,below:i})},vert:function(e){return e===T?v:(T=e,b("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),b("log",{txt:e})},reset:function(){return b("reset")},selected:function(e){return b("selected",{segs:e})},chainStart:function(e){return b("chain_start",{seg:e})},chainRemoveHead:function(e,o){return b("chain_rem_head",{index:e,pt:o})},chainRemoveTail:function(e,o){return b("chain_rem_tail",{index:e,pt:o})},chainNew:function(e,o){return b("chain_new",{pt1:e,pt2:o})},chainMatch:function(e){return b("chain_match",{index:e})},chainClose:function(e){return b("chain_close",{index:e})},chainAddHead:function(e,o){return b("chain_add_head",{index:e,pt:o})},chainAddTail:function(e,o){return b("chain_add_tail",{index:e,pt:o})},chainConnect:function(e,o){return b("chain_con",{index1:e,index2:o})},chainReverse:function(e){return b("chain_rev",{index:e})},chainJoin:function(e,o){return b("chain_join",{index1:e,index2:o})},done:function(){return b("done")}}}},{}],256:[function(_,oe,se){oe.exports=function(v){"number"!=typeof v&&(v=1e-10);var x={epsilon:function(T){return"number"==typeof T&&(v=T),v},pointAboveOrOnLine:function(T,b,e){var o=b[0],i=b[1];return(e[0]-o)*(T[1]-i)-(e[1]-i)*(T[0]-o)>=-v},pointBetween:function(T,b,e){var i=e[0]-b[0],r=e[1]-b[1],y=(T[0]-b[0])*i+(T[1]-b[1])*r;return!(y<v||y-(i*i+r*r)>-v)},pointsSameX:function(T,b){return Math.abs(T[0]-b[0])<v},pointsSameY:function(T,b){return Math.abs(T[1]-b[1])<v},pointsSame:function(T,b){return x.pointsSameX(T,b)&&x.pointsSameY(T,b)},pointsCompare:function(T,b){return x.pointsSameX(T,b)?x.pointsSameY(T,b)?0:T[1]<b[1]?-1:1:T[0]<b[0]?-1:1},pointsCollinear:function(T,b,e){return Math.abs((T[0]-b[0])*(b[1]-e[1])-(b[0]-e[0])*(T[1]-b[1]))<v},linesIntersect:function(T,b,e,o){var i=b[0]-T[0],l=b[1]-T[1],r=o[0]-e[0],y=o[1]-e[1],h=i*y-l*r;if(Math.abs(h)<v)return!1;var s=T[0]-e[0],d=T[1]-e[1],p=(r*d-y*s)/h,c=(i*d-l*s)/h,g={alongA:0,alongB:0,pt:[T[0]+p*i,T[1]+p*l]};return g.alongA=p<=-v?-2:p<v?-1:p-1<=-v?0:p-1<v?1:2,g.alongB=c<=-v?-2:c<v?-1:c-1<=-v?0:c-1<v?1:2,g},pointInsideRegion:function(T,b){for(var e=T[0],o=T[1],i=b[b.length-1][0],l=b[b.length-1][1],r=!1,y=0;y<b.length;y++){var h=b[y][0],s=b[y][1];s-o>v!=l-o>v&&(i-h)*(o-s)/(l-s)+h-e>v&&(r=!r),i=h,l=s}return r}};return x}},{}],257:[function(_,oe,se){oe.exports={toPolygon:function(x,T){function b(i){if(i.length<=0)return x.segments({inverted:!1,regions:[]});function l(h){var s=h.slice(0,h.length-1);return x.segments({inverted:!1,regions:[s]})}for(var r=l(i[0]),y=1;y<i.length;y++)r=x.selectDifference(x.combine(r,l(i[y])));return r}if("Polygon"===T.type)return x.polygon(b(T.coordinates));if("MultiPolygon"===T.type){for(var e=x.segments({inverted:!1,regions:[]}),o=0;o<T.coordinates.length;o++)e=x.selectUnion(x.combine(e,b(T.coordinates[o])));return x.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(x,T,b){function e(c,g){return T.pointInsideRegion([.5*(c[0][0]+c[1][0]),.5*(c[0][1]+c[1][1])],g)}function o(c){return{region:c,children:[]}}b=x.polygon(x.segments(b));var i=o(null);function l(c,g){for(var m=0;m<c.children.length;m++)if(e(g,(w=c.children[m]).region))return void l(w,g);var u=o(g);for(m=0;m<c.children.length;m++){var w;e((w=c.children[m]).region,g)&&(u.children.push(w),c.children.splice(m,1),m--)}c.children.push(u)}for(var r=0;r<b.regions.length;r++){var y=b.regions[r];y.length<3||l(i,y)}function h(c,g){for(var m=0,u=c[c.length-1][0],w=c[c.length-1][1],f=[],A=0;A<c.length;A++){var M=c[A][0],k=c[A][1];f.push([M,k]),m+=k*u-M*w,u=M,w=k}return m<0!==g&&f.reverse(),f.push([f[0][0],f[0][1]]),f}var s=[];function d(c){var g=[h(c.region,!1)];s.push(g);for(var m=0;m<c.children.length;m++)g.push(p(c.children[m]))}function p(c){for(var g=0;g<c.children.length;g++)d(c.children[g]);return h(c.region,!0)}for(r=0;r<i.children.length;r++)d(i.children[r]);return s.length<=0?{type:"Polygon",coordinates:[]}:1==s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}}},{}],258:[function(_,oe,se){var v=_("./linked-list");oe.exports=function(x,T,b){function e(h,s,d){return{id:b?b.segmentId():-1,start:h,end:s,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}var o=v.create();function i(h,s){o.insertBefore(h,function(d){return p=h.isStart,g=s,m=d.isStart,w=d.other.pt,(0!==(f=T.pointsCompare(h.pt,u=d.pt))?f:T.pointsSame(g,w)?0:p!==m?p?1:-1:T.pointAboveOrOnLine(g,m?u:w,m?w:u)?1:-1)<0;var p,g,m,u,w,f})}function l(h,s){var p,g,d=(i(g=v.node({isStart:!0,pt:(p=h).start,seg:p,primary:s,other:null,status:null}),p.end),g);return function(p,c,g){var m=v.node({isStart:!1,pt:c.end,seg:c,primary:g,other:p,status:null});p.other=m,i(m,p.pt)}(d,h,s),d}function r(h,s){var p,c,d=e(s,h.seg.end,h.seg);return p=h,c=s,b&&b.segmentChop(p.seg,c),p.other.remove(),p.seg.end=c,p.other.pt=c,i(p.other,p.pt),l(d,h.primary)}function y(h,s){var d=v.create();function p(F){return d.findTransition(function(R){var L,I,B,V,Z,Y;return V=(L=F).seg.end,(T.pointsCollinear(B=L.seg.start,Z=(I=R.ev).seg.start,Y=I.seg.end)?T.pointsCollinear(V,Z,Y)||T.pointAboveOrOnLine(V,Z,Y)?1:-1:T.pointAboveOrOnLine(B,Z,Y)?1:-1)>0})}function c(F,R){var L=F.seg,I=R.seg,B=L.start,V=L.end,Z=I.start,Y=I.end;b&&b.checkIntersection(L,I);var Q=T.linesIntersect(B,V,Z,Y);if(!1===Q){if(!T.pointsCollinear(B,V,Z)||T.pointsSame(B,Y)||T.pointsSame(V,Z))return!1;var re=T.pointsSame(B,Z),$=T.pointsSame(V,Y);if(re&&$)return R;var J=!re&&T.pointBetween(B,Z,Y),ie=!$&&T.pointBetween(V,Z,Y);if(re)return ie?r(R,V):r(F,Y),R;J&&($||(ie?r(R,V):r(F,Y)),r(R,B))}else 0===Q.alongA&&(-1===Q.alongB?r(F,Z):0===Q.alongB?r(F,Q.pt):1===Q.alongB&&r(F,Y)),0===Q.alongB&&(-1===Q.alongA?r(R,B):0===Q.alongA?r(R,Q.pt):1===Q.alongA&&r(R,V));return!1}for(var g=[];!o.isEmpty();){var m=o.getHead();if(b&&b.vert(m.pt[0]),m.isStart){let F=function(){if(w){var R=c(m,w);if(R)return R}return!!f&&c(m,f)};b&&b.segmentNew(m.seg,m.primary);var u=p(m),w=u.before?u.before.ev:null,f=u.after?u.after.ev:null;b&&b.tempStatus(m.seg,!!w&&w.seg,!!f&&f.seg);var A,k,M=F();if(M&&(x?(k=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=m.seg.myFill,b&&b.segmentUpdate(M.seg),m.other.remove(),m.remove()),o.getHead()!==m){b&&b.rewind(m.seg);continue}x?(k=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below,m.seg.myFill.below=f?f.seg.myFill.above:h,m.seg.myFill.above=k?!m.seg.myFill.below:m.seg.myFill.below):null===m.seg.otherFill&&(m.seg.otherFill={above:A=f?m.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:m.primary?s:h,below:A}),b&&b.status(m.seg,!!w&&w.seg,!!f&&f.seg),m.other.status=u.insert(v.node({ev:m}))}else{var E=m.status;if(null===E)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(d.exists(E.prev)&&d.exists(E.next)&&c(E.prev.ev,E.next.ev),b&&b.statusRemove(E.ev.seg),E.remove(),!m.primary){var P=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=P}g.push(m.seg)}o.getHead().remove()}return b&&b.done(),g}return x?{addRegion:function(h){for(var s,d,p,c=h[h.length-1],g=0;g<h.length;g++){var m=T.pointsCompare(s=c,c=h[g]);0!==m&&l((d=m<0?s:c,p=m<0?c:s,{id:b?b.segmentId():-1,start:d,end:p,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(h){return y(h,!1)}}:{calculate:function(h,s,d,p){return h.forEach(function(c){l(e(c.start,c.end,c),!0)}),d.forEach(function(c){l(e(c.start,c.end,c),!1)}),y(s,p)}}}},{"./linked-list":259}],259:[function(_,oe,se){oe.exports={create:function(){var v={root:{root:!0,next:null},exists:function(x){return null!==x&&x!==v.root},isEmpty:function(){return null===v.root.next},getHead:function(){return v.root.next},insertBefore:function(x,T){for(var b=v.root,e=v.root.next;null!==e;){if(T(e))return x.prev=e.prev,x.next=e,e.prev.next=x,void(e.prev=x);b=e,e=e.next}b.next=x,x.prev=b,x.next=null},findTransition:function(x){for(var T=v.root,b=v.root.next;null!==b&&!x(b);)T=b,b=b.next;return{before:T===v.root?null:T,after:b,insert:function(e){return e.prev=T,e.next=b,T.next=e,null!==b&&(b.prev=e),e}}}};return v},node:function(v){return v.prev=null,v.next=null,v.remove=function(){v.prev.next=v.next,v.next&&(v.next.prev=v.prev),v.prev=null,v.next=null},v}}},{}],260:[function(_,oe,se){oe.exports=function(v,x,T){var b=[],e=[];return v.forEach(function(o){var i=o.start,l=o.end;if(x.pointsSame(i,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(o);for(var r={index:0,matches_head:!1,matches_pt1:!1},y={index:0,matches_head:!1,matches_pt1:!1},h=r,s=0;s<b.length;s++){var d=(u=b[s])[0],p=u[u.length-1];if(x.pointsSame(d,i)){if(D(s,!0,!0))break}else if(x.pointsSame(d,l)){if(D(s,!0,!1))break}else if(x.pointsSame(p,i)){if(D(s,!1,!0))break}else if(x.pointsSame(p,l)&&D(s,!1,!1))break}if(h===r)return b.push([i,l]),void(T&&T.chainNew(i,l));if(h===y){T&&T.chainMatch(r.index);var c=r.index,g=r.matches_pt1?l:i,m=r.matches_head,u=b[c],w=m?u[0]:u[u.length-1],f=m?u[1]:u[u.length-2],A=m?u[u.length-1]:u[0],M=m?u[u.length-2]:u[1];return x.pointsCollinear(f,w,g)&&(m?(T&&T.chainRemoveHead(r.index,g),u.shift()):(T&&T.chainRemoveTail(r.index,g),u.pop()),w=f),x.pointsSame(A,g)?(b.splice(c,1),x.pointsCollinear(M,A,w)&&(m?(T&&T.chainRemoveTail(r.index,w),u.pop()):(T&&T.chainRemoveHead(r.index,w),u.shift())),T&&T.chainClose(r.index),void e.push(u)):void(m?(T&&T.chainAddHead(r.index,g),u.unshift(g)):(T&&T.chainAddTail(r.index,g),u.push(g)))}var k=r.index,E=y.index;T&&T.chainConnect(k,E);var P=b[k].length<b[E].length;r.matches_head?y.matches_head?P?(F(k),R(k,E)):(F(E),R(E,k)):R(E,k):y.matches_head?R(k,E):P?(F(k),R(E,k)):(F(E),R(k,E))}function D(L,I,B){return h.index=L,h.matches_head=I,h.matches_pt1=B,h===r?(h=y,!1):(h=null,!0)}function F(L){T&&T.chainReverse(L),b[L].reverse()}function R(L,I){var B=b[L],V=b[I],Z=B[B.length-1],Y=B[B.length-2],Q=V[0],re=V[1];x.pointsCollinear(Y,Z,Q)&&(T&&T.chainRemoveTail(L,Z),B.pop(),Z=Y),x.pointsCollinear(Z,Q,re)&&(T&&T.chainRemoveHead(I,Q),V.shift()),T&&T.chainJoin(L,I),b[L]=B.concat(V),b.splice(I,1)}}),e}},{}],261:[function(_,oe,se){function v(T,b,e){var o=[];return T.forEach(function(i){var l=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);0!==b[l]&&o.push({id:e?e.segmentId():-1,start:i.start,end:i.end,myFill:{above:1===b[l],below:2===b[l]},otherFill:null})}),e&&e.selected(o),o}oe.exports={union:function(T,b){return v(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],b)},intersect:function(T,b){return v(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],b)},difference:function(T,b){return v(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],b)},differenceRev:function(T,b){return v(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],b)},xor:function(T,b){return v(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],b)}}},{}],262:[function(_,oe,se){"use strict";var v=_("stream").Transform,x=_("stream-parser");function T(){v.call(this,{readableObjectMode:!0})}function b(e,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,o&&(this.code=o),i&&(this.statusCode=i)}(T.prototype=Object.create(v.prototype)).constructor=T,x(T.prototype),se.ParserStream=T,se.sliceEq=function(e,o,i){for(var l=o,r=0;r<i.length;)if(e[l++]!==i[r++])return!1;return!0},se.str2arr=function(e,o){var i=[],l=0;if(o&&"hex"===o)for(;l<e.length;)i.push(parseInt(e.slice(l,l+2),16)),l+=2;else for(;l<e.length;l++)i.push(255&e.charCodeAt(l));return i},se.readUInt16LE=function(e,o){return e[o]|e[o+1]<<8},se.readUInt16BE=function(e,o){return e[o+1]|e[o]<<8},se.readUInt32LE=function(e,o){return e[o]|e[o+1]<<8|e[o+2]<<16|16777216*e[o+3]},se.readUInt32BE=function(e,o){return e[o+3]|e[o+2]<<8|e[o+1]<<16|16777216*e[o]},(b.prototype=Object.create(Error.prototype)).constructor=b,se.ProbeError=b},{stream:285,"stream-parser":301}],263:[function(_,oe,se){"use strict";function v(b,e){var o=new Error(b);return o.code=e,o}function x(b){try{return decodeURIComponent(escape(b))}catch(e){return b}}function T(b,e,o){this.input=b.subarray(e,o),this.start=e;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==i&&"MM\0*"!==i)throw v("invalid TIFF signature","EBADDATA");this.big_endian="M"===i[0]}T.prototype.each=function(b){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();o.offset&&this.scan_ifd(o.id,o.offset,b)}},T.prototype.read_uint16=function(b){var e=this.input;if(b+2>e.length)throw v("unexpected EOF","EBADDATA");return this.big_endian?256*e[b]+e[b+1]:e[b]+256*e[b+1]},T.prototype.read_uint32=function(b){var e=this.input;if(b+4>e.length)throw v("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[b]+65536*e[b+1]+256*e[b+2]+e[b+3]:e[b]+256*e[b+1]+65536*e[b+2]+16777216*e[b+3]},T.prototype.is_subifd_link=function(b,e){return 0===b&&34665===e||0===b&&34853===e||34665===b&&40965===e},T.prototype.exif_format_length=function(b){switch(b){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(b,e){var o;switch(b){case 1:case 2:return this.input[e];case 6:return(o=this.input[e])|33554430*(128&o);case 3:return this.read_uint16(e);case 8:return(o=this.read_uint16(e))|131070*(32768&o);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},T.prototype.scan_ifd=function(b,e,o){var i=this.read_uint16(e);e+=2;for(var l=0;l<i;l++){var r=this.read_uint16(e),y=this.read_uint16(e+2),h=this.read_uint32(e+4),s=this.exif_format_length(y),d=h*s,p=d<=4?e+8:this.read_uint32(e+8),c=!1;if(p+d>this.input.length)throw v("unexpected EOF","EBADDATA");for(var g=[],m=p,u=0;u<h;u++,m+=s){var w=this.exif_format_read(y,m);if(null===w){g=null;break}g.push(w)}if(Array.isArray(g)&&2===y&&(g=x(String.fromCharCode.apply(null,g)))&&"\0"===g[g.length-1]&&(g=g.slice(0,-1)),this.is_subifd_link(b,r)&&Array.isArray(g)&&Number.isInteger(g[0])&&g[0]>0&&(this.ifds_to_read.push({id:r,offset:g[0]}),c=!0),!1===o({is_big_endian:this.big_endian,ifd:b,tag:r,format:y,count:h,entry_offset:e+this.start,data_length:d,data_offset:p+this.start,value:g,is_subifd_link:c}))return void(this.aborted=!0);e+=12}0===b&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},oe.exports.ExifParser=T,oe.exports.get_orientation=function(b){var e=0;try{return new T(b,0,b.length).each(function(o){if(0===o.ifd&&274===o.tag&&Array.isArray(o.value))return e=o.value[0],!1}),e}catch(o){return-1}}},{}],264:[function(_,oe,se){"use strict";var v=_("./common").readUInt16BE,x=_("./common").readUInt32BE;function T(r,y){if(r.length<4+y)return null;var h=x(r,y);return r.length<h+y||h<8?null:{boxtype:String.fromCharCode.apply(null,r.slice(y+4,y+8)),data:r.slice(y+8,y+h),end:y+h}}function b(r,y){for(var h=0;;){var s=T(r,h);if(!s)break;switch(s.boxtype){case"ispe":y.sizes.push({width:x(s.data,4),height:x(s.data,8)});break;case"irot":y.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":y.transforms.push({type:"imir",value:1&s.data[0]})}h=s.end}}function e(r,y,h){for(var s=0,d=0;d<h;d++)s=256*s+(r[y+d]||0);return s}function o(r,y){for(var h=r[4]>>4&15,s=15&r[4],d=r[5]>>4&15,p=v(r,6),c=8,g=0;g<p;g++){var m=v(r,c),u=v(r,c+=2),w=e(r,c+=2,d),f=v(r,c+=d);if(c+=2,0===u&&1===f){var A=e(r,c,h),M=e(r,c+h,s);y.item_loc[m]={length:M,offset:A+w}}c+=f*(h+s)}}function i(r,y){for(var h=v(r,4),s=6,d=0;d<h;d++){var p=T(r,s);if(!p)break;if("infe"===p.boxtype){for(var c=v(p.data,4),g="",m=8;m<p.data.length&&p.data[m];m++)g+=String.fromCharCode(p.data[m]);y.item_inf[g]=c}s=p.end}}function l(r,y){for(var h=0;;){var s=T(r,h);if(!s)break;"ipco"===s.boxtype&&b(s.data,y),h=s.end}}oe.exports.unbox=T,oe.exports.readSizeFromMeta=function(r){var y={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(m,u){for(var w=4;;){var f=T(m,w);if(!f)break;"iprp"===f.boxtype&&l(f.data,u),"iloc"===f.boxtype&&o(f.data,u),"iinf"===f.boxtype&&i(f.data,u),w=f.end}}(r,y),y.sizes.length){var h,s,d,p=(s=(h=y.sizes).reduce(function(m,u){return m.width>u.width||m.width===u.width&&m.height>u.height?m:u}),d=h.reduce(function(m,u){return m.height>u.height||m.height===u.height&&m.width>u.width?m:u}),s.width>d.height||s.width===d.height&&s.height>d.width?s:d),c=1;y.transforms.forEach(function(m){var u={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},w={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===m.type&&(c=0===m.value?w[c]:u[c=u[c=w[c]]]),"irot"===m.type)for(var f=0;f<m.value;f++)c=u[c]});var g=null;return y.item_inf.Exif&&(g=y.item_loc[y.item_inf.Exif]),{width:p.width,height:p.height,orientation:y.transforms.length?c:null,variants:y.sizes,exif_location:g}}},oe.exports.getMimeType=function(r){var y=String.fromCharCode.apply(null,r.slice(0,4)),h={};h[y]=!0;for(var s=8;s<r.length;s+=4)h[String.fromCharCode.apply(null,r.slice(s,s+4))]=!0;if(h.mif1||h.msf1||h.miaf)return"avif"===y||"avis"===y||"avio"===y?{type:"avif",mime:"image/avif"}:"heic"===y||"heix"===y?{type:"heic",mime:"image/heic"}:"hevc"===y||"hevx"===y?{type:"heic",mime:"image/heic-sequence"}:h.avif||h.avis?{type:"avif",mime:"image/avif"}:h.heic||h.heix||h.hevc||h.hevx||h.heis?h.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=_("../miaf_utils"),e=_("../exif_utils"),o=v("ftyp");oe.exports=function(i){if(x(i,4,o)){var l=b.unbox(i,0);if(l){var r=b.getMimeType(l.data);if(r){for(var y,h=l.end;;){var s=b.unbox(i,h);if(!s)break;if(h=s.end,"mdat"===s.boxtype)return;if("meta"===s.boxtype){y=s.data;break}}if(y){var d=b.readSizeFromMeta(y);if(d){var p={width:d.width,height:d.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(d.variants.length>1&&(p.variants=d.variants),d.orientation&&(p.orientation=d.orientation),d.exif_location&&d.exif_location.offset+d.exif_location.length<=i.length){var c=T(i,d.exif_location.offset),g=i.slice(d.exif_location.offset+c+4,d.exif_location.offset+d.exif_location.length),m=e.get_orientation(g);m>0&&(p.orientation=m)}return p}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=v("BM");oe.exports=function(e){if(!(e.length<26)&&x(e,0,b))return{width:T(e,18),height:T(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=v("GIF87a"),e=v("GIF89a");oe.exports=function(o){if(!(o.length<10)&&(x(o,0,b)||x(o,0,e)))return{width:T(o,6),height:T(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(_,oe,se){"use strict";var v=_("../common").readUInt16LE;oe.exports=function(x){var T=v(x,0),b=v(x,2),e=v(x,4);if(0===T&&1===b&&e){for(var o=[],i={width:0,height:0},l=0;l<e;l++){var r=x[6+16*l]||256,y=x[6+16*l+1]||256,h={width:r,height:y};o.push(h),(r>i.width||y>i.height)&&(i=h)}return{width:i.width,height:i.height,variants:o,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(_,oe,se){"use strict";var v=_("../common").readUInt16BE,x=_("../common").str2arr,T=_("../common").sliceEq,b=_("../exif_utils"),e=x("Exif\0\0");oe.exports=function(o){if(!(o.length<2)&&255===o[0]&&216===o[1]&&255===o[2])for(var i=2;;){for(;;){if(o.length-i<2)return;if(255===o[i++])break}for(var l,r,y=o[i++];255===y;)y=o[i++];if(208<=y&&y<=217||1===y)l=0;else{if(!(192<=y&&y<=254)||o.length-i<2)return;l=v(o,i)-2,i+=2}if(217===y||218===y)return;if(225===y&&l>=10&&T(o,i,e)&&(r=b.get_orientation(o.slice(i+6,i+l))),l>=5&&192<=y&&y<=207&&196!==y&&200!==y&&204!==y){if(o.length-i<l)return;var h={width:v(o,i+3),height:v(o,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return r>0&&(h.orientation=r),h}i+=l}}},{"../common":262,"../exif_utils":263}],270:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=v("\x89PNG\r\n\x1a\n"),e=v("IHDR");oe.exports=function(o){if(!(o.length<24)&&x(o,0,b)&&x(o,12,e))return{width:T(o,16),height:T(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=v("8BPS\0\x01");oe.exports=function(e){if(!(e.length<22)&&x(e,0,b))return{width:T(e,18),height:T(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(_,oe,se){"use strict";function v(r){return"number"==typeof r&&isFinite(r)&&r>0}var x=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,b=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,o=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,i=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(r){return i.test(r)?r.match(i)[0]:"px"}oe.exports=function(r){if(function(A){var M,k=0,E=A.length;for(239===A[0]&&187===A[1]&&191===A[2]&&(k=3);k<E&&(32===(M=A[k])||9===M||13===M||10===M);)k++;return k!==E&&60===A[k]}(r)){for(var y="",h=0;h<r.length;h++)y+=String.fromCharCode(r[h]);var s=(y.match(x)||[""])[0];if(T.test(s)){var d=(M=(A=s).match(b),k=A.match(e),E=A.match(o),{width:M&&(M[1]||M[2]),height:k&&(k[1]||k[2]),viewbox:E&&(E[1]||E[2])}),p=parseFloat(d.width),c=parseFloat(d.height);if(d.width&&d.height)return v(p)&&v(c)?{width:p,height:c,type:"svg",mime:"image/svg+xml",wUnits:l(d.width),hUnits:l(d.height)}:void 0;var g=(d.viewbox||"").split(" "),m={width:g[2],height:g[3]},u=parseFloat(m.width),w=parseFloat(m.height);if(v(u)&&v(w)&&l(m.width)===l(m.height)){var f=u/w;return d.width?v(p)?{width:p,height:p/f,type:"svg",mime:"image/svg+xml",wUnits:l(d.width),hUnits:l(d.width)}:void 0:d.height?v(c)?{width:c*f,height:c,type:"svg",mime:"image/svg+xml",wUnits:l(d.height),hUnits:l(d.height)}:void 0:{width:u,height:w,type:"svg",mime:"image/svg+xml",wUnits:l(m.width),hUnits:l(m.height)}}}}var A,M,k,E}},{}],273:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=_("../common").readUInt16BE,e=_("../common").readUInt32LE,o=_("../common").readUInt32BE,i=v("II*\0"),l=v("MM\0*");function r(s,d,p){return p?b(s,d):T(s,d)}function y(s,d,p){return p?o(s,d):e(s,d)}function h(s,d,p){var c=r(s,d+2,p);return 1!==y(s,d+4,p)||3!==c&&4!==c?null:3===c?r(s,d+8,p):y(s,d+8,p)}oe.exports=function(s){if(!(s.length<8)&&(x(s,0,i)||x(s,0,l))){var d=77===s[0],p=y(s,4,d)-8;if(!(p<0)){var c=p+8;if(!(s.length-c<2)){var g=12*r(s,c+0,d);if(!(g<=0||(c+=2,s.length-c<g))){var m,u,w,f;for(m=0;m<g;m+=12)256===(f=r(s,c+m,d))?u=h(s,c+m,d):257===f&&(w=h(s,c+m,d));return u&&w?{width:u,height:w,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(_,oe,se){"use strict";var v=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=_("../common").readUInt32LE,e=_("../exif_utils"),o=v("RIFF"),i=v("WEBP");function l(h,s){if(157===h[s+3]&&1===h[s+4]&&42===h[s+5])return{width:16383&T(h,s+6),height:16383&T(h,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(h,s){if(47===h[s]){var d=b(h,s+1);return{width:1+(16383&d),height:1+(d>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function y(h,s){return{width:1+(h[s+6]<<16|h[s+5]<<8|h[s+4]),height:1+(h[s+9]<<s|h[s+8]<<8|h[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}oe.exports=function(h){if(!(h.length<16)&&(x(h,0,o)||x(h,8,i))){var s=12,d=null,p=0,c=b(h,4)+8;if(!(c>h.length)){for(;s+8<c;)if(0!==h[s]){var g=String.fromCharCode.apply(null,h.slice(s,s+4)),m=b(h,s+4);"VP8 "===g&&m>=10?d=d||l(h,s+8):"VP8L"===g&&m>=9?d=d||r(h,s+8):"VP8X"===g&&m>=10?d=d||y(h,s+8):"EXIF"===g&&(p=e.get_orientation(h.slice(s+8,s+8+m)),s=1/0),s+=8+m}else s++;if(d)return p>0&&(d.orientation=p),d}}}},{"../common":262,"../exif_utils":263}],275:[function(_,oe,se){"use strict";oe.exports={avif:_("./parse_sync/avif"),bmp:_("./parse_sync/bmp"),gif:_("./parse_sync/gif"),ico:_("./parse_sync/ico"),jpeg:_("./parse_sync/jpeg"),png:_("./parse_sync/png"),psd:_("./parse_sync/psd"),svg:_("./parse_sync/svg"),tiff:_("./parse_sync/tiff"),webp:_("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(_,oe,se){"use strict";var v=_("./lib/parsers_sync");oe.exports=function(x){return function(T){for(var b=Object.keys(v),e=0;e<b.length;e++){var o=v[b[e]](T);if(o)return o}return null}(x)},oe.exports.parsers=v},{"./lib/parsers_sync":275}],277:[function(_,oe,se){var v,x,T=oe.exports={};function b(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(c){if(v===setTimeout)return setTimeout(c,0);if((v===b||!v)&&setTimeout)return v=setTimeout,setTimeout(c,0);try{return v(c,0)}catch(g){try{return v.call(null,c,0)}catch(m){return v.call(this,c,0)}}}!function(){try{v="function"==typeof setTimeout?setTimeout:b}catch(c){v=b}try{x="function"==typeof clearTimeout?clearTimeout:e}catch(c){x=e}}();var i,l=[],r=!1,y=-1;function h(){r&&i&&(r=!1,i.length?l=i.concat(l):y=-1,l.length&&s())}function s(){if(!r){var c=o(h);r=!0;for(var g=l.length;g;){for(i=l,l=[];++y<g;)i&&i[y].run();y=-1,g=l.length}i=null,r=!1,function(m){if(x===clearTimeout)return clearTimeout(m);if((x===e||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(m);try{x(m)}catch(u){try{return x.call(null,m)}catch(w){return x.call(this,m)}}}(c)}}function d(c,g){this.fun=c,this.array=g}function p(){}T.nextTick=function(c){var g=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)g[m-1]=arguments[m];l.push(new d(c,g)),1!==l.length||r||o(s)},d.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=p,T.addListener=p,T.once=p,T.off=p,T.removeListener=p,T.removeAllListeners=p,T.emit=p,T.prependListener=p,T.prependOnceListener=p,T.listeners=function(c){return[]},T.binding=function(c){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(c){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],278:[function(_,oe,se){(function(v){(function(){for(var x=_("performance-now"),T="undefined"==typeof window?v:window,b=["moz","webkit"],e="AnimationFrame",o=T["request"+e],i=T["cancel"+e]||T["cancelRequest"+e],l=0;!o&&l<b.length;l++)o=T[b[l]+"Request"+e],i=T[b[l]+"Cancel"+e]||T[b[l]+"CancelRequest"+e];if(!o||!i){var r=0,y=0,h=[];o=function(s){if(0===h.length){var d=x(),p=Math.max(0,1e3/60-(d-r));r=p+d,setTimeout(function(){var c=h.slice(0);h.length=0;for(var g=0;g<c.length;g++)if(!c[g].cancelled)try{c[g].callback(r)}catch(m){setTimeout(function(){throw m},0)}},Math.round(p))}return h.push({handle:++y,callback:s,cancelled:!1}),y},i=function(s){for(var d=0;d<h.length;d++)h[d].handle===s&&(h[d].cancelled=!0)}}oe.exports=function(s){return o.call(T,s)},oe.exports.cancel=function(){i.apply(T,arguments)},oe.exports.polyfill=function(s){s||(s=T),s.requestAnimationFrame=o,s.cancelAnimationFrame=i}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(_,oe,se){"use strict";var v=_("array-bounds"),x=_("color-normalize"),T=_("update-diff"),b=_("pick-by-alias"),e=_("object-assign"),o=_("flatten-vertex-data"),i=_("to-float32"),l=i.float32,r=i.fract32;oe.exports=function(h,s){if("function"==typeof h?(s||(s={}),s.regl=h):s=h,s.length&&(s.positions=s),!(h=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d,p,c,g,m,u,w=h._gl,f={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];return g=h.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),p=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=h.buffer({usage:"static",type:"float",data:y}),P(s),d=h({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:h.prop("range"),lineWidth:h.prop("lineWidth"),capSize:h.prop("capSize"),opacity:h.prop("opacity"),scale:h.prop("scale"),translate:h.prop("translate"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),viewport:function(F,R){return[R.viewport.x,R.viewport.y,F.viewportWidth,F.viewportHeight]}},attributes:{color:{buffer:g,offset:function(F,R){return 4*R.offset},divisor:1},position:{buffer:p,offset:function(F,R){return 8*R.offset},divisor:1},positionFract:{buffer:c,offset:function(F,R){return 8*R.offset},divisor:1},error:{buffer:m,offset:function(F,R){return 16*R.offset},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:!1,instances:h.prop("count"),count:y.length}),e(M,{update:P,draw:k,destroy:D,regl:h,gl:w,canvas:w.canvas,groups:A}),M;function M(F){F?P(F):null===F&&D(),k()}function k(F){if("number"==typeof F)return E(F);F&&!Array.isArray(F)&&(F=[F]),h._refresh(),A.forEach(function(R,L){R&&(F&&(R.draw=!!F[L]),R.draw?E(L):R.draw=!0)})}function E(F){"number"==typeof F&&(F=A[F]),null!=F&&F&&F.count&&F.color&&F.opacity&&F.positions&&F.positions.length>1&&(F.scaleRatio=[F.scale[0]*F.viewport.width,F.scale[1]*F.viewport.height],d(F),F.after&&F.after(F))}function P(F){if(F){null!=F.length?"number"==typeof F[0]&&(F=[{positions:F}]):Array.isArray(F)||(F=[F]);var R=0,L=0;if(M.groups=A=F.map(function(re,$){var J=A[$];return re&&("function"==typeof re?re={after:re}:"number"==typeof re[0]&&(re={positions:re}),re=b(re,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),J||(A[$]=J={id:$,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},re=e({},f,re)),T(J,re,[{lineWidth:function(ie){return.5*+ie},capSize:function(ie){return.5*+ie},opacity:parseFloat,errors:function(ie){return ie=o(ie),L+=ie.length,ie},positions:function(ie,j){return ie=o(ie,"float64"),j.count=Math.floor(ie.length/2),j.bounds=v(ie,2),j.offset=R,R+=j.count,ie}},{color:function(ie,j){var q=j.count;if(ie||(ie="transparent"),!Array.isArray(ie)||"number"==typeof ie[0]){var W=ie;ie=Array(q);for(var ae=0;ae<q;ae++)ie[ae]=W}if(ie.length<q)throw Error("Not enough colors");for(var G=new Uint8Array(4*q),ee=0;ee<q;ee++){var te=x(ie[ee],"uint8");G.set(te,4*ee)}return G},range:function(ie,j,q){return ie||(ie=j.bounds),j.scale=[1/(ie[2]-ie[0]),1/(ie[3]-ie[1])],j.translate=[-ie[0],-ie[1]],j.scaleFract=r(j.scale),j.translateFract=r(j.translate),ie},viewport:function(ie){var j;return Array.isArray(ie)?j={x:ie[0],y:ie[1],width:ie[2]-ie[0],height:ie[3]-ie[1]}:ie?((j={x:ie.x||ie.left||0,y:ie.y||ie.top||0}).width=ie.right?ie.right-j.x:ie.w||ie.width||0,j.height=ie.bottom?ie.bottom-j.y:ie.h||ie.height||0):j={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight},j}}])),J}),R||L){var I=A.reduce(function(re,$,J){return re+($?$.count:0)},0),B=new Float64Array(2*I),V=new Uint8Array(4*I),Z=new Float32Array(4*I);A.forEach(function(re,$){if(re){var J=re.positions,j=re.offset,W=re.errors;re.count&&(V.set(re.color,4*j),Z.set(W,4*j),B.set(J,2*j))}});var Y=l(B);p(Y);var Q=r(B,Y);c(Q),g(V),m(Z)}}}function D(){p.destroy(),c.destroy(),g.destroy(),m.destroy(),u.destroy()}};var y=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(_,oe,se){"use strict";var v=_("color-normalize"),x=_("array-bounds"),T=_("object-assign"),b=_("glslify"),e=_("pick-by-alias"),o=_("flatten-vertex-data"),i=_("earcut"),l=_("array-normalize"),r=_("to-float32"),y=r.float32,h=r.fract32,s=_("es6-weak-map"),d=_("parse-rect"),p=_("array-find-index");function c(g,m){if(!(this instanceof c))return new c(g,m);if("function"==typeof g?(m||(m={}),m.regl=g):m=g,m.length&&(m.positions=m),!(g=m.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=c.shaders.has(g)?c.shaders.get(g):c.shaders.set(g,c.createShaders(g)).get(g),this.update(m)}oe.exports=c,c.dashMult=2,c.maxPatternLength=256,c.precisionThreshold=3e6,c.maxPoints=1e4,c.maxLines=2048,c.shaders=new s,c.createShaders=function(g){var m,u=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:function(A,M){return"round"===M.join?2:1},miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashTexture:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashLength:g.prop("dashLength"),viewport:function(A,M){return[M.viewport.x,M.viewport.y,A.viewportWidth,A.viewportHeight]},depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(A,M){return!M.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},f=g(T({vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{m=g(T({cull:{enable:!0,face:"back"},vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},w))}catch(A){m=f}return{fill:g({primitive:"triangle",elements:function(A,M){return M.triangles},offset:0,vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:function(A,M){return[M.viewport.x,M.viewport.y,A.viewportWidth,A.viewportHeight]}},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:f,miter:m}},c.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},c.prototype.render=function(){for(var g,m=[],u=arguments.length;u--;)m[u]=arguments[u];m.length&&(g=this).update.apply(g,m),this.draw()},c.prototype.draw=function(){for(var g=this,m=[],u=arguments.length;u--;)m[u]=arguments[u];return(m.length?m:this.passes).forEach(function(w,f){var A;if(w&&Array.isArray(w))return(A=g).draw.apply(A,w);"number"==typeof w&&(w=g.passes[w]),w&&w.count>1&&w.opacity&&(g.regl._refresh(),w.fill&&w.triangles&&w.triangles.length>2&&g.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>c.precisionThreshold||w.scale[1]*w.viewport.height>c.precisionThreshold||"rect"===w.join||!w.join&&(w.thickness<=2||w.count>=c.maxPoints)?g.shaders.rect(w):g.shaders.miter(w)))}),this},c.prototype.update=function(g){var m=this;if(g){null!=g.length?"number"==typeof g[0]&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);var u=this.regl,w=this.gl;if(g.forEach(function(E,P){var D=m.passes[P];if(void 0!==E)if(null!==E){if("number"==typeof E[0]&&(E={positions:E}),E=e(E,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),D||(m.passes[P]=D={id:P,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},E=T({},c.defaults,E)),null!=E.thickness&&(D.thickness=parseFloat(E.thickness)),null!=E.opacity&&(D.opacity=parseFloat(E.opacity)),null!=E.miterLimit&&(D.miterLimit=parseFloat(E.miterLimit)),null!=E.overlay&&(D.overlay=!!E.overlay,P<c.maxLines&&(D.depth=2*(c.maxLines-1-P%c.maxLines)/c.maxLines-1)),null!=E.join&&(D.join=E.join),null!=E.hole&&(D.hole=E.hole),null!=E.fill&&(D.fill=E.fill?v(E.fill,"uint8"):null),null!=E.viewport&&(D.viewport=d(E.viewport)),D.viewport||(D.viewport=d([w.drawingBufferWidth,w.drawingBufferHeight])),null!=E.close&&(D.close=E.close),null===E.positions&&(E.positions=[]),E.positions){var F,R;if(E.positions.x&&E.positions.y){var L=E.positions.x,I=E.positions.y;R=D.count=Math.max(L.length,I.length),F=new Float64Array(2*R);for(var B=0;B<R;B++)F[2*B]=L[B],F[2*B+1]=I[B]}else F=o(E.positions,"float64"),R=D.count=Math.floor(F.length/2);var V=D.bounds=x(F,2);if(D.fill){for(var Z=[],Y={},Q=0,re=0,$=0,J=D.count;re<J;re++){var ie=F[2*re],j=F[2*re+1];isNaN(ie)||isNaN(j)||null==ie||null==j?(ie=F[2*Q],j=F[2*Q+1],Y[re]=Q):Q=re,Z[$++]=ie,Z[$++]=j}if(E.splitNull){D.count-1 in Y||(Y[D.count]=D.count-1);var q=Object.keys(Y).map(Number).sort(function(Nt,rn){return Nt-rn}),W=[],ae=0,G=null!=D.hole?D.hole[0]:null;if(null!=G){var ee=p(q,function(Nt){return Nt>=G});(q=q.slice(0,ee)).push(G)}for(var te=function(Nt){var rn=Z.slice(2*ae,2*q[Nt]).concat(G?Z.slice(2*G):[]),en=(D.hole||[]).map(function(Qe){return Qe-G+(q[Nt]-ae)}),Ge=i(rn,en);Ge=Ge.map(function(Qe){return Qe+ae+(Qe+ae<q[Nt]?0:G-q[Nt])}),W.push.apply(W,Ge),ae=q[Nt]+1},le=0;le<q.length;le++)te(le);for(var ue=0,de=W.length;ue<de;ue++)null!=Y[W[ue]]&&(W[ue]=Y[W[ue]]);D.triangles=W}else{for(var he=i(Z,D.hole||[]),be=0,me=he.length;be<me;be++)null!=Y[he[be]]&&(he[be]=Y[he[be]]);D.triangles=he}}var _e=new Float64Array(F);l(_e,2,V);var Ee=new Float64Array(2*R+6);D.close?F[0]===F[2*R-2]&&F[1]===F[2*R-1]?(Ee[0]=_e[2*R-4],Ee[1]=_e[2*R-3]):(Ee[0]=_e[2*R-2],Ee[1]=_e[2*R-1]):(Ee[0]=_e[0],Ee[1]=_e[1]),Ee.set(_e,2),D.close?F[0]===F[2*R-2]&&F[1]===F[2*R-1]?(Ee[2*R+2]=_e[2],Ee[2*R+3]=_e[3],D.count-=1):(Ee[2*R+2]=_e[0],Ee[2*R+3]=_e[1],Ee[2*R+4]=_e[2],Ee[2*R+5]=_e[3]):(Ee[2*R+2]=_e[2*R-2],Ee[2*R+3]=_e[2*R-1],Ee[2*R+4]=_e[2*R-2],Ee[2*R+5]=_e[2*R-1]);var De=y(Ee);D.positionBuffer(De);var Se=h(Ee,De);D.positionFractBuffer(Se)}if(E.range?D.range=E.range:D.range||(D.range=D.bounds),(E.range||E.positions)&&D.count){var Fe=D.bounds,Ie=D.range[2]-D.range[0],Ce=D.range[3]-D.range[1];D.scale=[(Fe[2]-Fe[0])/Ie,(Fe[3]-Fe[1])/Ce],D.translate=[-D.range[0]/Ie+Fe[0]/Ie||0,-D.range[1]/Ce+Fe[1]/Ce||0],D.scaleFract=h(D.scale),D.translateFract=h(D.translate)}if(E.dashes){var Re,Ue=0;if(!E.dashes||E.dashes.length<2)Ue=1,Re=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ue=0;for(var qe=0;qe<E.dashes.length;++qe)Ue+=E.dashes[qe];Re=new Uint8Array(Ue*c.dashMult);for(var Xe=0,st=255,He=0;He<2;He++)for(var $e=0;$e<E.dashes.length;++$e){for(var et=0,tt=E.dashes[$e]*c.dashMult*.5;et<tt;++et)Re[Xe++]=st;st^=255}}D.dashLength=Ue,D.dashTexture({channels:1,data:Re,width:Re.length,height:1,mag:"linear",min:"linear"},0,0)}if(E.color){var ct=D.count,bt=E.color;bt||(bt="transparent");var At=new Uint8Array(4*ct+4);if(Array.isArray(bt)&&"number"!=typeof bt[0]){for(var Ut=0;Ut<ct;Ut++){var Ct=v(bt[Ut],"uint8");At.set(Ct,4*Ut)}At.set(v(bt[0],"uint8"),4*ct)}else for(var dt=v(bt,"uint8"),at=0;at<ct+1;at++)At.set(dt,4*at);D.colorBuffer({usage:"dynamic",type:"uint8",data:At})}}else m.passes[P]=null}),g.length<this.passes.length){for(var f=g.length;f<this.passes.length;f++){var A=this.passes[f];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),A.dashTexture.destroy())}this.passes.length=g.length}for(var M=[],k=0;k<this.passes.length;k++)null!==this.passes[k]&&M.push(this.passes[k]);return this.passes=M,this}},c.prototype.destroy=function(){return this.passes.forEach(function(g){g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(_,oe,se){"use strict";function v(f,A){return function(M){if(Array.isArray(M))return M}(f)||function(M,k){var E=null==M?null:"undefined"!=typeof Symbol&&M[Symbol.iterator]||M["@@iterator"];if(null!=E){var P,D,F=[],R=!0,L=!1;try{for(E=E.call(M);!(R=(P=E.next()).done)&&(F.push(P.value),!k||F.length!==k);R=!0);}catch(I){L=!0,D=I}finally{try{R||null==E.return||E.return()}finally{if(L)throw D}}return F}}(f,A)||T(f,A)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(f){return function(A){if(Array.isArray(A))return b(A)}(f)||function(A){if("undefined"!=typeof Symbol&&null!=A[Symbol.iterator]||null!=A["@@iterator"])return Array.from(A)}(f)||T(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(f,A){if(f){if("string"==typeof f)return b(f,A);var M=Object.prototype.toString.call(f).slice(8,-1);return"Object"===M&&f.constructor&&(M=f.constructor.name),"Map"===M||"Set"===M?Array.from(f):"Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?b(f,A):void 0}}function b(f,A){(null==A||A>f.length)&&(A=f.length);for(var M=0,k=new Array(A);M<A;M++)k[M]=f[M];return k}var e=_("color-normalize"),o=_("array-bounds"),i=_("color-id"),l=_("@plotly/point-cluster"),r=_("object-assign"),y=_("glslify"),h=_("pick-by-alias"),s=_("update-diff"),d=_("flatten-vertex-data"),p=_("is-iexplorer"),c=_("to-float32"),g=_("parse-rect"),m=u;function u(f,A){var M=this;if(!(this instanceof u))return new u(f,A);"function"==typeof f?(A||(A={}),A.regl=f):(A=f,f=null),A&&A.length&&(A.positions=A);var k,E=(f=A.regl)._gl,P=[];this.tooManyColors=p,k=f.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),r(this,{regl:f,gl:E,groups:[],markerCache:[null],markerTextures:[null],palette:P,paletteIds:{},paletteTexture:k,maxColors:255,maxSize:100,canvas:E.canvas}),this.update(A);var D={uniforms:{constPointSize:!!A.constPointSize,opacity:f.prop("opacity"),paletteSize:function(L,I){return[M.tooManyColors?0:255,k.height]},pixelRatio:f.context("pixelRatio"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translate:f.prop("translate"),translateFract:f.prop("translateFract"),markerTexture:f.prop("markerTexture"),paletteTexture:k},attributes:{x:function(L,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(L,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(L,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(L,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(L,I){return I.size.length?{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/M.maxSize)]}},borderSize:function(L,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/M.maxSize)]}},colorId:function(L,I){return I.color.length?{buffer:I.colorBuffer,stride:M.tooManyColors?8:4,offset:0}:{constant:M.tooManyColors?P.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(L,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:M.tooManyColors?8:4,offset:M.tooManyColors?4:2}:{constant:M.tooManyColors?P.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(L,I){return!0===I.activation?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:f.prop("elements"),count:f.prop("count"),offset:f.prop("offset"),primitive:"points"},F=r({},D);F.frag=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),F.vert=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=f(F);var R=r({},D);R.frag=y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),R.vert=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),p&&(R.frag=R.frag.replace("smoothstep","smoothStep"),F.frag=F.frag.replace("smoothstep","smoothStep")),this.drawCircle=f(R)}u.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},u.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},u.prototype.draw=function(){for(var f=this,A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];var E=this.groups;if(1===M.length&&Array.isArray(M[0])&&(null===M[0][0]||Array.isArray(M[0][0]))&&(M=M[0]),this.regl._refresh(),M.length)for(var P=0;P<M.length;P++)this.drawItem(P,M[P]);else E.forEach(function(D,F){f.drawItem(F)});return this},u.prototype.drawItem=function(f,A){var M=this.groups,k=M[f];if("number"==typeof A&&(f=A,k=M[A],A=null),k&&k.count&&k.opacity){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,A));for(var E=[],P=1;P<k.activation.length;P++)k.activation[P]&&(!0===k.activation[P]||k.activation[P].data.length)&&E.push.apply(E,x(this.getMarkerDrawOptions(P,k,A)));E.length&&this.drawMarker(E)}},u.prototype.getMarkerDrawOptions=function(f,A,M){var k=A.range,E=A.tree,P=A.viewport,D=A.activation,F=A.selectionBuffer,R=A.count;if(!E)return M?[r({},A,{markerTexture:this.markerTextures[f],activation:D[f],count:M.length,elements:M,offset:0})]:[r({},A,{markerTexture:this.markerTextures[f],activation:D[f],offset:0})];var L=[],I=E.range(k,{lod:!0,px:[(k[2]-k[0])/P.width,(k[3]-k[1])/P.height]});if(M){for(var B=D[f].data,V=new Uint8Array(R),Z=0;Z<M.length;Z++){var Y=M[Z];V[Y]=B?B[Y]:1}F.subdata(V)}for(var Q=I.length;Q--;){var re=v(I[Q],2),$=re[0];L.push(r({},A,{markerTexture:this.markerTextures[f],activation:M?F:D[f],offset:$,count:re[1]-$}))}return L},u.prototype.update=function(){for(var f=this,A=arguments.length,M=new Array(A),k=0;k<A;k++)M[k]=arguments[k];if(M.length){1===M.length&&Array.isArray(M[0])&&(M=M[0]);var E=this.groups,P=this.gl,D=this.regl,F=this.maxSize,R=this.maxColors,L=this.palette;this.groups=E=M.map(function(I,B){var V=E[B];if(void 0===I)return V;null===I?I={positions:null}:"function"==typeof I?I={ondraw:I}:"number"==typeof I[0]&&(I={positions:I}),null===(I=h(I,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(I.positions=[]),null!=I.tooManyColors&&(f.tooManyColors=I.tooManyColors),V||(E[B]=V={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},I=r({},u.defaults,I)),I.positions&&!("marker"in I)&&(I.marker=V.marker,delete V.marker),I.marker&&!("positions"in I)&&(I.positions=V.positions,delete V.positions);var Z=0,Y=0;if(s(V,I,[{snap:!0,size:function(me,_e){return null==me&&(me=u.defaults.size),Z+=me&&me.length?1:0,me},borderSize:function(me,_e){return null==me&&(me=u.defaults.borderSize),Z+=me&&me.length?1:0,me},opacity:parseFloat,color:function(me,_e){return null==me&&(me=u.defaults.color),me=f.updateColor(me),Y++,me},borderColor:function(me,_e){return null==me&&(me=u.defaults.borderColor),me=f.updateColor(me),Y++,me},bounds:function(me,_e,Ee){return"range"in Ee||(Ee.range=null),me},positions:function(me,_e,Ee){var De=_e.snap,Se=_e.positionBuffer,Fe=_e.positionFractBuffer,ve=_e.selectionBuffer;if(me.x||me.y)return _e.xAttr=me.x.length?{buffer:D.buffer(me.x),offset:0,stride:4,count:me.x.length}:{buffer:me.x.buffer,offset:4*me.x.offset||0,stride:4*(me.x.stride||1),count:me.x.count},_e.yAttr=me.y.length?{buffer:D.buffer(me.y),offset:0,stride:4,count:me.y.length}:{buffer:me.y.buffer,offset:4*me.y.offset||0,stride:4*(me.y.stride||1),count:me.y.count},_e.count=Math.max(_e.xAttr.count,_e.yAttr.count),me;me=d(me,"float64");var Te=_e.count=Math.floor(me.length/2),Ie=_e.bounds=Te?o(me,2):null;if(Ee.range||_e.range||(delete _e.range,Ee.range=Ie),Ee.marker||_e.marker||(delete _e.marker,Ee.marker=null),De&&(!0===De||Te>De)?_e.tree=l(me,{bounds:Ie}):De&&De.length&&(_e.tree=De),_e.tree){var Ce={primitive:"points",usage:"static",data:_e.tree,type:"uint32"};_e.elements?_e.elements(Ce):_e.elements=D.elements(Ce)}var Re=c.float32(me);return Se({data:Re,usage:"dynamic"}),Fe({data:c.fract32(me,Re),usage:"dynamic"}),ve({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),me}},{marker:function(me,_e,Ee){var De=_e.activation;if(De.forEach(function(Re){return Re&&Re.destroy&&Re.destroy()}),De.length=0,me&&"number"!=typeof me[0]){for(var Se=[],Fe=0,ve=Math.min(me.length,_e.count);Fe<ve;Fe++){var Te=f.addMarker(me[Fe]);Se[Te]||(Se[Te]=new Uint8Array(_e.count)),Se[Te][Fe]=1}for(var Ie=0;Ie<Se.length;Ie++)if(Se[Ie]){var Ce={data:Se[Ie],type:"uint8",usage:"static"};De[Ie]?De[Ie](Ce):De[Ie]=D.buffer(Ce),De[Ie].data=Se[Ie]}}else De[f.addMarker(me)]=!0;return me},range:function(me,_e,Ee){var De=_e.bounds;if(De)return me||(me=De),_e.scale=[1/(me[2]-me[0]),1/(me[3]-me[1])],_e.translate=[-me[0],-me[1]],_e.scaleFract=c.fract(_e.scale),_e.translateFract=c.fract(_e.translate),me},viewport:function(me){return g(me||[P.drawingBufferWidth,P.drawingBufferHeight])}}]),Z){var re=V.count,$=V.size,J=V.borderSize,ie=V.sizeBuffer,j=new Uint8Array(2*re);if($.length||J.length)for(var q=0;q<re;q++)j[2*q]=Math.round(255*(null==$[q]?$:$[q])/F),j[2*q+1]=Math.round(255*(null==J[q]?J:J[q])/F);ie({data:j,usage:"dynamic"})}if(Y){var W,G=V.count,ee=V.color,te=V.borderColor,le=V.colorBuffer;if(f.tooManyColors){if(ee.length||te.length){W=new Uint8Array(8*G);for(var ue=0;ue<G;ue++){var de=ee[ue];W[8*ue]=L[4*de],W[8*ue+1]=L[4*de+1],W[8*ue+2]=L[4*de+2],W[8*ue+3]=L[4*de+3];var he=te[ue];W[8*ue+4]=L[4*he],W[8*ue+5]=L[4*he+1],W[8*ue+6]=L[4*he+2],W[8*ue+7]=L[4*he+3]}}}else if(ee.length||te.length){W=new Uint8Array(4*G+2);for(var be=0;be<G;be++)null!=ee[be]&&(W[4*be]=ee[be]%R,W[4*be+1]=Math.floor(ee[be]/R)),null!=te[be]&&(W[4*be+2]=te[be]%R,W[4*be+3]=Math.floor(te[be]/R))}le({data:W||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return V})}},u.prototype.addMarker=function(f){var A,M=this.markerTextures,k=this.regl,E=this.markerCache,P=null==f?0:E.indexOf(f);if(P>=0)return P;if(f instanceof Uint8Array||f instanceof Uint8ClampedArray)A=f;else{A=new Uint8Array(f.length);for(var D=0,F=f.length;D<F;D++)A[D]=255*f[D]}var R=Math.floor(Math.sqrt(A.length));return P=M.length,E.push(f),M.push(k.texture({channels:1,data:A,radius:R,mag:"linear",min:"linear"})),P},u.prototype.updateColor=function(f){var A=this.paletteIds,M=this.palette,k=this.maxColors;Array.isArray(f)||(f=[f]);var E=[];if("number"==typeof f[0]){var P=[];if(Array.isArray(f))for(var D=0;D<f.length;D+=4)P.push(f.slice(D,D+4));else for(var F=0;F<f.length;F+=4)P.push(f.subarray(F,F+4));f=P}for(var R=0;R<f.length;R++){var L=f[R];L=e(L,"uint8");var I=i(L,!1);if(null==A[I]){var B=M.length;A[I]=Math.floor(B/4),M[B]=L[0],M[B+1]=L[1],M[B+2]=L[2],M[B+3]=L[3]}E[R]=A[I]}return!this.tooManyColors&&M.length>4*k&&(this.tooManyColors=!0),this.updatePalette(M),1===E.length?E[0]:E},u.prototype.updatePalette=function(f){if(!this.tooManyColors){var A=this.maxColors,M=this.paletteTexture,k=Math.ceil(.25*f.length/A);if(k>1)for(var E=.25*(f=f.slice()).length%A;E<k*A;E++)f.push(0,0,0,0);M.height<k&&M.resize(A,k),M.subimage({width:Math.min(.25*f.length,A),height:k,data:f},0,0)}},u.prototype.destroy=function(){return this.groups.forEach(function(f){f.sizeBuffer.destroy(),f.positionBuffer.destroy(),f.positionFractBuffer.destroy(),f.colorBuffer.destroy(),f.activation.forEach(function(A){return A&&A.destroy&&A.destroy()}),f.selectionBuffer.destroy(),f.elements&&f.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(f){return f&&f.destroy&&f.destroy()}),this};var w=_("object-assign");oe.exports=function(f,A){var M=new m(f,A),k=M.render.bind(M);return w(k,{render:k,update:M.update.bind(M),draw:M.draw.bind(M),destroy:M.destroy.bind(M),regl:M.regl,gl:M.gl,canvas:M.gl.canvas,groups:M.groups,markers:M.markerCache,palette:M.palette}),k}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(_,oe,se){"use strict";var v=_("regl-scatter2d"),x=_("pick-by-alias"),T=_("array-bounds"),b=_("raf"),e=_("array-range"),o=_("parse-rect"),i=_("flatten-vertex-data");function l(s,d){if(!(this instanceof l))return new l(s,d);this.traces=[],this.passes={},this.regl=s,this.scatter=v(s),this.canvas=this.scatter.canvas}function r(s,d,p){return(null!=s.id?s.id:s)<<16|(255&d)<<8|255&p}function y(s,d,p){var c,g,m,u,w=s[d],f=s[p];return w.length>2?(c=w[1],g=w[3]):w.length?(c=w[0],g=w[1]):(c=w.y,g=w.y+w.height),f.length>2?(m=f[0],u=f[2]):f.length?(m=f[0],u=f[1]):(m=f.x,u=f.x+f.width),[m,c,u,g]}function h(s){if("number"==typeof s)return[s,s,s,s];if(2===s.length)return[s[0],s[1],s[0],s[1]];var d=o(s);return[d.x,d.y,d.x+d.width,d.y+d.height]}oe.exports=l,l.prototype.render=function(){for(var s,d=this,p=[],c=arguments.length;c--;)p[c]=arguments[c];return p.length&&(s=this).update.apply(s,p),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=b(function(){d.draw(),d.dirty=!0,d.planned=null})):(this.draw(),this.dirty=!0,b(function(){d.dirty=!1})),this)},l.prototype.update=function(){for(var s,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(var c=0;c<d.length;c++)this.updateItem(c,d[c]);this.traces=this.traces.filter(Boolean);for(var g=[],m=0,u=0;u<this.traces.length;u++){for(var w=this.traces[u],f=this.traces[u].passes,A=0;A<f.length;A++)g.push(this.passes[f[A]]);w.passOffset=m,m+=w.passes.length}return(s=this.scatter).update.apply(s,g),this}},l.prototype.updateItem=function(s,d){var p=this.regl;if(null===d)return this.traces[s]=null,this;if(!d)return this;var c,g=x(d,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=g.color&&(m.color=g.color),null!=g.size&&(m.size=g.size),null!=g.marker&&(m.marker=g.marker),null!=g.borderColor&&(m.borderColor=g.borderColor),null!=g.borderSize&&(m.borderSize=g.borderSize),null!=g.opacity&&(m.opacity=g.opacity),g.viewport&&(m.viewport=o(g.viewport)),null!=g.diagonal&&(m.diagonal=g.diagonal),null!=g.upper&&(m.upper=g.upper),null!=g.lower&&(m.lower=g.lower),g.data){m.buffer(i(g.data)),m.columns=g.data.length,m.count=g.data[0].length,m.bounds=[];for(var u=0;u<m.columns;u++)m.bounds[u]=T(g.data[u],1)}g.range&&(m.range=g.range,c=m.range&&"number"!=typeof m.range[0]),g.domain&&(m.domain=g.domain);var w=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===m.columns&&"number"==typeof g.padding[g.padding.length-1]?(m.padding=g.padding.map(h),w=!0):m.padding=h(g.padding));var f=m.columns,A=m.count,M=m.viewport.width,k=m.viewport.height,E=m.viewport.x,P=m.viewport.y,D=M/f,F=k/f;m.passes=[];for(var R=0;R<f;R++)for(var L=0;L<f;L++)if((m.diagonal||L!==R)&&(m.upper||!(R>L))&&(m.lower||!(R<L))){var I=r(m.id,R,L),B=this.passes[I]||(this.passes[I]={});if(g.data&&(B.positions=g.transpose?{x:{buffer:m.buffer,offset:L,count:A,stride:f},y:{buffer:m.buffer,offset:R,count:A,stride:f}}:{x:{buffer:m.buffer,offset:L*A,count:A},y:{buffer:m.buffer,offset:R*A,count:A}},B.bounds=y(m.bounds,R,L)),g.domain||g.viewport||g.data){var V=w?y(m.padding,R,L):m.padding;if(m.domain){var Z=y(m.domain,R,L);B.viewport=[E+Z[0]*M+V[0],P+Z[1]*k+V[1],E+Z[2]*M-V[2],P+Z[3]*k-V[3]]}else B.viewport=[E+L*D+D*V[0],P+R*F+F*V[1],E+(L+1)*D-D*V[2],P+(R+1)*F-F*V[3]]}g.color&&(B.color=m.color),g.size&&(B.size=m.size),g.marker&&(B.marker=m.marker),g.borderSize&&(B.borderSize=m.borderSize),g.borderColor&&(B.borderColor=m.borderColor),g.opacity&&(B.opacity=m.opacity),g.range&&(B.range=c?y(m.range,R,L):m.range||B.bounds),m.passes.push(I)}return this},l.prototype.draw=function(){for(var s,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(var c=[],g=0;g<d.length;g++)if("number"==typeof d[g]){var m=this.traces[d[g]],w=m.passOffset;c.push.apply(c,e(w,w+m.passes.length))}else if(d[g].length){var f=d[g],A=this.traces[g],M=A.passes,k=A.passOffset;M=M.map(function(E,P){c[k+P]=f})}(s=this.scatter).draw.apply(s,c)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(_,oe,se){var x;x=function(){function v(Le,je){this.id=ee++,this.type=Le,this.data=je}function x(Le){return"["+function je(Ke){if(0===Ke.length)return[];var ft=Ke.charAt(0),mt=Ke.charAt(Ke.length-1);if(1<Ke.length&&ft===mt&&('"'===ft||"'"===ft))return['"'+Ke.substr(1,Ke.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ft=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ke))return je(Ke.substr(0,ft.index)).concat(je(ft[1])).concat(je(Ke.substr(ft.index+ft[0].length)));if(1===(ft=Ke.split(".")).length)return['"'+Ke.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ke=[],mt=0;mt<ft.length;++mt)Ke=Ke.concat(je(ft[mt]));return Ke}(Le).join("][")+"]"}function T(Le){return"string"==typeof Le?Le.split():Le}function b(Le){return"string"==typeof Le?document.querySelector(Le):Le}function o(Le,je){for(var Ke=Array(Le),ft=0;ft<Le;++ft)Ke[ft]=je(ft);return Ke}function i(Le){var je,Ke;return je=(65535<Le)<<4,je|=Ke=(255<(Le>>>=je))<<3,(je|=Ke=(15<(Le>>>=Ke))<<2)|(Ke=(3<(Le>>>=Ke))<<1)|Le>>>Ke>>1}function l(){function Le(ft){e:{for(var mt=16;268435456>=mt;mt*=16)if(ft<=mt){ft=mt;break e}ft=0}return 0<(mt=Ke[i(ft)>>2]).length?mt.pop():new ArrayBuffer(ft)}function je(ft){Ke[i(ft.byteLength)>>2].push(ft)}var Ke=o(8,function(){return[]});return{alloc:Le,free:je,allocType:function(ft,mt){var pt=null;switch(ft){case 5120:pt=new Int8Array(Le(mt),0,mt);break;case 5121:pt=new Uint8Array(Le(mt),0,mt);break;case 5122:pt=new Int16Array(Le(2*mt),0,mt);break;case 5123:pt=new Uint16Array(Le(2*mt),0,mt);break;case 5124:pt=new Int32Array(Le(4*mt),0,mt);break;case 5125:pt=new Uint32Array(Le(4*mt),0,mt);break;case 5126:pt=new Float32Array(Le(4*mt),0,mt);break;default:return null}return pt.length!==mt?pt.subarray(0,mt):pt},freeType:function(ft){je(ft.buffer)}}}function r(Le){return!!Le&&"object"==typeof Le&&Array.isArray(Le.shape)&&Array.isArray(Le.stride)&&"number"==typeof Le.offset&&Le.shape.length===Le.stride.length&&(Array.isArray(Le.data)||be(Le.data))}function y(Le,je,Ke,ft,mt,pt){for(var Ot=0;Ot<je;++Ot)for(var Pt=Le[Ot],Jt=0;Jt<Ke;++Jt)for(var $t=Pt[Jt],ut=0;ut<ft;++ut)mt[pt++]=$t[ut]}function h(Le){return 0|Ee[Object.prototype.toString.call(Le)]}function s(Le,je){for(var Ke=0;Ke<je.length;++Ke)Le[Ke]=je[Ke]}function d(Le,je,Ke,ft,mt,pt,Ot){for(var Pt=0,Jt=0;Jt<Ke;++Jt)for(var $t=0;$t<ft;++$t)Le[Pt++]=je[mt*Jt+pt*$t+Ot]}function g(Le){for(var je=de.allocType(5123,Le.length),Ke=0;Ke<Le.length;++Ke)if(isNaN(Le[Ke]))je[Ke]=65535;else if(1/0===Le[Ke])je[Ke]=31744;else if(-1/0===Le[Ke])je[Ke]=64512;else{Ce[0]=Le[Ke];var ft=(pt=Re[0])>>>31<<15,mt=(pt<<1>>>24)-127,pt=pt>>13&1023;je[Ke]=-24>mt?ft:-14>mt?ft+(pt+1024>>-14-mt):15<mt?ft+31744:ft+(mt+15<<10)+pt}return je}function m(Le){return Array.isArray(Le)||be(Le)}function u(Le){return"[object "+Le+"]"}function w(Le){return Array.isArray(Le)&&(0===Le.length||"number"==typeof Le[0])}function f(Le){return!(!Array.isArray(Le)||0===Le.length||!m(Le[0]))}function A(Le){return Object.prototype.toString.call(Le)}function M(Le){if(!Le)return!1;var je=A(Le);return 0<=bt.indexOf(je)||w(Le)||f(Le)||r(Le)}function k(Le,je){36193===Le.type?(Le.data=g(je),de.freeType(je)):Le.data=je}function E(Le,je,Ke,ft,mt,pt){if(Le=void 0!==Ut[Le]?Ut[Le]:Xe[Le]*At[je],pt&&(Le*=6),mt){for(ft=0;1<=Ke;)ft+=Le*Ke*Ke,Ke/=2;return ft}return Le*Ke*ft}function F(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(Le,je){return Le>>>je|Le<<32-je}function V(Le,je){var Ke=(65535&Le)+(65535&je);return(Le>>16)+(je>>16)+(Ke>>16)<<16|65535&Ke}function Z(Le){return Array.prototype.slice.call(Le)}function Y(Le){return Z(Le).join("")}function re(Le){return Array.isArray(Le)||be(Le)||r(Le)}function $(Le){return Le.sort(function(je,Ke){return"viewport"===je?-1:"viewport"===Ke?1:je<Ke?-1:1})}function J(Le,je,Ke,ft){this.thisDep=Le,this.contextDep=je,this.propDep=Ke,this.append=ft}function ie(Le){return Le&&!(Le.thisDep||Le.contextDep||Le.propDep)}function j(Le){return new J(!1,!1,!1,Le)}function q(Le,je){var Ke=Le.type;if(0===Ke)return new J(!0,1<=(Ke=Le.data.length),2<=Ke,je);if(4===Ke)return new J((Ke=Le.data).thisDep,Ke.contextDep,Ke.propDep,je);if(5===Ke)return new J(!1,!1,!1,je);if(6===Ke){for(var ft=Ke=!1,mt=!1,pt=0;pt<Le.data.length;++pt){var Ot=Le.data[pt];1===Ot.type?mt=!0:2===Ot.type?ft=!0:3===Ot.type?Ke=!0:0===Ot.type?(Ke=!0,1<=(Ot=Ot.data)&&(ft=!0),2<=Ot&&(mt=!0)):4===Ot.type&&(Ke=Ke||Ot.data.thisDep,ft=ft||Ot.data.contextDep,mt=mt||Ot.data.propDep)}return new J(Ke,ft,mt,je)}return new J(3===Ke,2===Ke,1===Ke,je)}function W(Le,je,Ke,ft,mt,pt,Ot,Pt,Jt,$t,ut,Dt,Wt,zt,Ht,Ne){function ot(Zt){return Zt.replace(".","_")}function yt(Zt,yn,Cn){var rr=ot(Zt);ci.push(Zt),Qr[rr]=Kn[rr]=!!Cn,Or[rr]=yn}function It(Zt,yn,Cn){var rr=ot(Zt);ci.push(Zt),Array.isArray(Cn)?(Kn[rr]=Cn.slice(),Qr[rr]=Cn.slice()):Kn[rr]=Qr[rr]=Cn,li[rr]=yn}function Vt(){var Zt=function Q(Le){function je(){var ut=[],Dt=[];return G(function(){ut.push.apply(ut,Z(arguments))},{def:function(){var Wt="v"+mt++;return Dt.push(Wt),0<arguments.length&&(ut.push(Wt,"="),ut.push.apply(ut,Z(arguments)),ut.push(";")),Wt},toString:function(){return Y([0<Dt.length?"var "+Dt.join(",")+";":"",Y(ut)])}})}function Ke(){function ut(Ne,ot){Wt(Ne,ot,"=",Dt.def(Ne,ot),";")}var Dt=je(),Wt=je(),zt=Dt.toString,Ht=Wt.toString;return G(function(){Dt.apply(Dt,Z(arguments))},{def:Dt.def,entry:Dt,exit:Wt,save:ut,set:function(Ne,ot,yt){ut(Ne,ot),Dt(Ne,ot,"=",yt,";")},toString:function(){return zt()+Ht()}})}var ft=Le&&Le.cache,mt=0,pt=[],Ot=[],Pt=[],Jt=je(),$t={};return{global:Jt,link:function(ut,Dt){var Wt=Dt&&Dt.stable;if(!Wt)for(var zt=0;zt<Ot.length;++zt)if(Ot[zt]===ut&&!Pt[zt])return pt[zt];return zt="g"+mt++,pt.push(zt),Ot.push(ut),Pt.push(Wt),zt},block:je,proc:function(ut,Dt){function Wt(){var ot="a"+zt.length;return zt.push(ot),ot}var zt=[];Dt=Dt||0;for(var Ht=0;Ht<Dt;++Ht)Wt();var Ne=(Ht=Ke()).toString;return $t[ut]=G(Ht,{arg:Wt,toString:function(){return Y(["function(",zt.join(),"){",Ne(),"}"])}})},scope:Ke,cond:function(){var ut=Y(arguments),Dt=Ke(),Wt=Ke(),zt=Dt.toString,Ht=Wt.toString;return G(Dt,{then:function(){return Dt.apply(Dt,Z(arguments)),this},else:function(){return Wt.apply(Wt,Z(arguments)),this},toString:function(){var Ne=Ht();return Ne&&(Ne="else{"+Ne+"}"),Y(["if(",ut,"){",zt(),"}",Ne])}})},compile:function(){var ut=['"use strict";',Jt,"return {"];Object.keys($t).forEach(function(zt){ut.push('"',zt,'":',$t[zt].toString(),",")}),ut.push("}");var Dt,Wt=Y(ut).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return ft&&(Dt=function(zt){for(var Ht,Ne="",ot=0;ot<zt.length;ot++)Ht=zt.charCodeAt(ot),Ne+="0123456789abcdef".charAt(Ht>>>4&15)+"0123456789abcdef".charAt(15&Ht);return Ne}(function(zt){for(var Ht=Array(zt.length>>2),Ne=0;Ne<Ht.length;Ne++)Ht[Ne]=0;for(Ne=0;Ne<8*zt.length;Ne+=8)Ht[Ne>>5]|=(255&zt.charCodeAt(Ne/8))<<24-Ne%32;var ot,yt,It,Vt,ln,un,an,wn,Zn,An,hn,pn=8*zt.length;for(zt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ne=Array(64),Ht[pn>>5]|=128<<24-pn%32,Ht[15+(pn+64>>9<<4)]=pn,wn=0;wn<Ht.length;wn+=16){for(pn=zt[0],ot=zt[1],yt=zt[2],It=zt[3],Vt=zt[4],ln=zt[5],un=zt[6],an=zt[7],Zn=0;64>Zn;Zn++){var xn;16>Zn?Ne[Zn]=Ht[Zn+wn]:(An=Zn,hn=V(hn=B(hn=Ne[Zn-2],17)^B(hn,19)^hn>>>10,Ne[Zn-7]),xn=B(xn=Ne[Zn-15],7)^B(xn,18)^xn>>>3,Ne[An]=V(V(hn,xn),Ne[Zn-16])),An=V(V(V(V(an,An=B(An=Vt,6)^B(An,11)^B(An,25)),Vt&ln^~Vt&un),rn[Zn]),Ne[Zn]),hn=V(an=B(an=pn,2)^B(an,13)^B(an,22),pn&ot^pn&yt^ot&yt),an=un,un=ln,ln=Vt,Vt=V(It,An),It=yt,yt=ot,ot=pn,pn=V(An,hn)}zt[0]=V(pn,zt[0]),zt[1]=V(ot,zt[1]),zt[2]=V(yt,zt[2]),zt[3]=V(It,zt[3]),zt[4]=V(Vt,zt[4]),zt[5]=V(ln,zt[5]),zt[6]=V(un,zt[6]),zt[7]=V(an,zt[7])}for(Ht="",Ne=0;Ne<32*zt.length;Ne+=8)Ht+=String.fromCharCode(zt[Ne>>5]>>>24-Ne%32&255);return Ht}(function(zt){for(var Ht,Ne,ot="",yt=-1;++yt<zt.length;)Ht=zt.charCodeAt(yt),Ne=yt+1<zt.length?zt.charCodeAt(yt+1):0,55296<=Ht&&56319>=Ht&&56320<=Ne&&57343>=Ne&&(Ht=65536+((1023&Ht)<<10)+(1023&Ne),yt++),127>=Ht?ot+=String.fromCharCode(Ht):2047>=Ht?ot+=String.fromCharCode(192|Ht>>>6&31,128|63&Ht):65535>=Ht?ot+=String.fromCharCode(224|Ht>>>12&15,128|Ht>>>6&63,128|63&Ht):2097151>=Ht&&(ot+=String.fromCharCode(240|Ht>>>18&7,128|Ht>>>12&63,128|Ht>>>6&63,128|63&Ht));return ot}(Wt))),ft[Dt])?ft[Dt].apply(null,Ot):(Wt=Function.apply(null,pt.concat(Wt)),ft&&(ft[Dt]=Wt),Wt.apply(null,Ot))}}}({cache:Ht}),yn=Zt.link,Cn=Zt.global;Zt.id=tr++,Zt.batchId="0";var rr=yn(di),Qn=Zt.shared={props:"a0"};Object.keys(di).forEach(function(Rn){Qn[Rn]=Cn.def(rr,".",Rn)});var Jn=Zt.next={},Wn=Zt.current={};Object.keys(li).forEach(function(Rn){Array.isArray(Kn[Rn])&&(Jn[Rn]=Cn.def(Qn.next,".",Rn),Wn[Rn]=Cn.def(Qn.current,".",Rn))});var On=Zt.constants={};Object.keys(Tn).forEach(function(Rn){On[Rn]=Cn.def(JSON.stringify(Tn[Rn]))}),Zt.invoke=function(Rn,Gn){switch(Gn.type){case 0:var fr=["this",Qn.context,Qn.props,Zt.batchId];return Rn.def(yn(Gn.data),".call(",fr.slice(0,Math.max(Gn.data.length+1,4)),")");case 1:return Rn.def(Qn.props,Gn.data);case 2:return Rn.def(Qn.context,Gn.data);case 3:return Rn.def("this",Gn.data);case 4:return Gn.data.append(Zt,Rn),Gn.data.ref;case 5:return Gn.data.toString();case 6:return Gn.data.map(function(ur){return Zt.invoke(Rn,ur)})}},Zt.attribCache={};var zn={};return Zt.scopeAttrib=function(Rn){if((Rn=je.id(Rn))in zn)return zn[Rn];var Gn=$t.scope[Rn];return Gn||(Gn=$t.scope[Rn]=new Sr),zn[Rn]=yn(Gn)},Zt}function Zn(Zt,yn,Cn,rr,Qn){function Jn(zr){var Br=On[zr];Br&&(Rn[zr]=Br)}var zr,or,Ur,Zr,Wn=function(zr,Br){if("string"==typeof(or=zr.static).frag&&"string"==typeof or.vert){if(0<Object.keys(Br.dynamic).length)return null;var or=Br.static,Ur=Object.keys(or);if(0<Ur.length&&"number"==typeof or[Ur[0]]){for(var Zr=[],mi=0;mi<Ur.length;++mi)Zr.push([0|or[Ur[mi]],Ur[mi]]);return Zr}}return null}(Zt,yn),On=function(zr,Br,or){function Ur(Vi){if(Vi in Zr){var qr=Zr[Vi];Vi=!0;var wi,vi,ma=0|qr.x,$a=0|qr.y;return"width"in qr?wi=0|qr.width:Vi=!1,"height"in qr?vi=0|qr.height:Vi=!1,new J(!Vi&&Br&&Br.thisDep,!Vi&&Br&&Br.contextDep,!Vi&&Br&&Br.propDep,function(ys,pa){var ei=ys.shared.context,Ki=wi;"width"in qr||(Ki=pa.def(ei,".","framebufferWidth","-",ma));var Ui=vi;return"height"in qr||(Ui=pa.def(ei,".","framebufferHeight","-",$a)),[ma,$a,Ki,Ui]})}if(Vi in mi){var Na=mi[Vi];return Vi=q(Na,function(ys,pa){var ei=ys.invoke(pa,Na),Ki=ys.shared.context,Ui=pa.def(ei,".x|0"),so=pa.def(ei,".y|0");return[Ui,so,pa.def('"width" in ',ei,"?",ei,".width|0:","(",Ki,".","framebufferWidth","-",Ui,")"),ei=pa.def('"height" in ',ei,"?",ei,".height|0:","(",Ki,".","framebufferHeight","-",so,")")]}),Br&&(Vi.thisDep=Vi.thisDep||Br.thisDep,Vi.contextDep=Vi.contextDep||Br.contextDep,Vi.propDep=Vi.propDep||Br.propDep),Vi}return Br?new J(Br.thisDep,Br.contextDep,Br.propDep,function(ys,pa){var ei=ys.shared.context;return[0,0,pa.def(ei,".","framebufferWidth"),pa.def(ei,".","framebufferHeight")]}):null}var Zr=zr.static,mi=zr.dynamic;if(zr=Ur("viewport")){var Zi=zr;zr=new J(zr.thisDep,zr.contextDep,zr.propDep,function(Vi,qr){var wi=Zi.append(Vi,qr),vi=Vi.shared.context;return qr.set(vi,".viewportWidth",wi[2]),qr.set(vi,".viewportHeight",wi[3]),wi})}return{viewport:zr,scissor_box:Ur("scissor.box")}}(Zt,fr=function ln(Zt,yn){var Cn=Zt.static,rr=Zt.dynamic;if("framebuffer"in Cn){var Qn=Cn.framebuffer;return Qn?(Qn=Pt.getFramebuffer(Qn),j(function(Wn,On){var zn=Wn.link(Qn),Rn=Wn.shared;return On.set(Rn.framebuffer,".next",zn),On.set(Rn=Rn.context,".framebufferWidth",zn+".width"),On.set(Rn,".framebufferHeight",zn+".height"),zn})):j(function(Wn,On){var zn=Wn.shared;return On.set(zn.framebuffer,".next","null"),On.set(zn=zn.context,".framebufferWidth",zn+".drawingBufferWidth"),On.set(zn,".framebufferHeight",zn+".drawingBufferHeight"),"null"})}if("framebuffer"in rr){var Jn=rr.framebuffer;return q(Jn,function(Wn,On){var zn=Wn.invoke(On,Jn),Rn=Wn.shared,Gn=Rn.framebuffer;return zn=On.def(Gn,".getFramebuffer(",zn,")"),On.set(Gn,".next",zn),On.set(Rn=Rn.context,".framebufferWidth",zn+"?"+zn+".width:"+Rn+".drawingBufferWidth"),On.set(Rn,".framebufferHeight",zn+"?"+zn+".height:"+Rn+".drawingBufferHeight"),zn})}return null}(Zt)),zn=function an(Zt,yn){function Cn(vr,zr){if(vr in rr){var Br=0|rr[vr];return zr?Jn.offset=Br:Jn.instances=Br,j(function(Ur,Zr){return zr&&(Ur.OFFSET=Br),Br})}if(vr in Qn){var or=Qn[vr];return q(or,function(Ur,Zr){var mi=Ur.invoke(Zr,or);return zr&&(Ur.OFFSET=mi),mi})}if(zr){if(zn)return j(function(Ur,Zr){return Ur.OFFSET=0});if(Wn)return new J(On.thisDep,On.contextDep,On.propDep,function(Ur,Zr){return Zr.def(Ur.shared.vao+".currentVAO?"+Ur.shared.vao+".currentVAO.offset:0")})}else if(Wn)return new J(On.thisDep,On.contextDep,On.propDep,function(Ur,Zr){return Zr.def(Ur.shared.vao+".currentVAO?"+Ur.shared.vao+".currentVAO.instances:-1")});return null}var rr=Zt.static,Qn=Zt.dynamic,Jn={},Wn=!1,On=function(){if("vao"in rr){var vr=rr.vao;return null!==vr&&null===$t.getVAO(vr)&&(vr=$t.createVAO(vr)),Wn=!0,Jn.vao=vr,j(function(Br){var or=$t.getVAO(vr);return or?Br.link(or):"null"})}if("vao"in Qn){Wn=!0;var zr=Qn.vao;return q(zr,function(Br,or){var Ur=Br.invoke(or,zr);return or.def(Br.shared.vao+".getVAO("+Ur+")")})}return null}(),zn=!1,Rn=function(){if("elements"in rr){var vr=rr.elements;if(Jn.elements=vr,re(vr)){var zr=Jn.elements=pt.create(vr,!0);vr=pt.getElements(zr),zn=!0}else vr&&(vr=pt.getElements(vr),zn=!0);return(zr=j(function(or,Ur){if(vr){var Zr=or.link(vr);return or.ELEMENTS=Zr}return or.ELEMENTS=null})).value=vr,zr}if("elements"in Qn){zn=!0;var Br=Qn.elements;return q(Br,function(or,Ur){var Zr=(mi=or.shared).isBufferArgs,mi=mi.elements,Zi=or.invoke(Ur,Br),Vi=Ur.def("null");return Zr=Ur.def(Zr,"(",Zi,")"),Zi=or.cond(Zr).then(Vi,"=",mi,".createStream(",Zi,");").else(Vi,"=",mi,".getElements(",Zi,");"),Ur.entry(Zi),Ur.exit(or.cond(Zr).then(mi,".destroyStream(",Vi,");")),or.ELEMENTS=Vi})}return Wn?new J(On.thisDep,On.contextDep,On.propDep,function(or,Ur){return Ur.def(or.shared.vao+".currentVAO?"+or.shared.elements+".getElements("+or.shared.vao+".currentVAO.elements):null")}):null}(),Gn=Cn("offset",!0),fr=function(){if("primitive"in rr){var vr=rr.primitive;return Jn.primitive=vr,j(function(Br,or){return Ie[vr]})}if("primitive"in Qn){var zr=Qn.primitive;return q(zr,function(Br,or){var Ur=Br.constants.primTypes,Zr=Br.invoke(or,zr);return or.def(Ur,"[",Zr,"]")})}return zn?ie(Rn)?j(Rn.value?function(Br,or){return or.def(Br.ELEMENTS,".primType")}:function(){return 4}):new J(Rn.thisDep,Rn.contextDep,Rn.propDep,function(Br,or){var Ur=Br.ELEMENTS;return or.def(Ur,"?",Ur,".primType:",4)}):Wn?new J(On.thisDep,On.contextDep,On.propDep,function(Br,or){return or.def(Br.shared.vao+".currentVAO?"+Br.shared.vao+".currentVAO.primitive:4")}):null}(),ur=function(){if("count"in rr){var vr=0|rr.count;return Jn.count=vr,j(function(){return vr})}if("count"in Qn){var zr=Qn.count;return q(zr,function(Br,or){return Br.invoke(or,zr)})}return zn?ie(Rn)?Rn?Gn?new J(Gn.thisDep,Gn.contextDep,Gn.propDep,function(Br,or){return or.def(Br.ELEMENTS,".vertCount-",Br.OFFSET)}):j(function(Br,or){return or.def(Br.ELEMENTS,".vertCount")}):j(function(){return-1}):new J(Rn.thisDep||Gn.thisDep,Rn.contextDep||Gn.contextDep,Rn.propDep||Gn.propDep,function(Br,or){var Ur=Br.ELEMENTS;return Br.OFFSET?or.def(Ur,"?",Ur,".vertCount-",Br.OFFSET,":-1"):or.def(Ur,"?",Ur,".vertCount:-1")}):Wn?new J(On.thisDep,On.contextDep,On.propDep,function(Br,or){return or.def(Br.shared.vao,".currentVAO?",Br.shared.vao,".currentVAO.count:-1")}):null}(),Mr=Cn("instances",!1);return{elements:Rn,primitive:fr,count:ur,instances:Mr,offset:Gn,vao:On,vaoActive:Wn,elementsActive:zn,static:Jn}}(Zt),Rn=(or=(zr=Zt).static,Ur=zr.dynamic,Zr={},ci.forEach(function(mi){function Zi(qr,wi){if(mi in or){var vi=qr(or[mi]);Zr[Vi]=j(function(){return vi})}else if(mi in Ur){var ma=Ur[mi];Zr[Vi]=q(ma,function($a,Na){return wi($a,Na,$a.invoke(Na,ma))})}}var Vi=ot(mi);switch(mi){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Zi(function(qr){return qr},function(qr,wi,vi){return vi});case"depth.func":return Zi(function(qr){return Rt[qr]},function(qr,wi,vi){return wi.def(qr.constants.compareFuncs,"[",vi,"]")});case"depth.range":return Zi(function(qr){return qr},function(qr,wi,vi){return[wi.def("+",vi,"[0]"),wi=wi.def("+",vi,"[1]")]});case"blend.func":return Zi(function(qr){return[Qe["srcRGB"in qr?qr.srcRGB:qr.src],Qe["dstRGB"in qr?qr.dstRGB:qr.dst],Qe["srcAlpha"in qr?qr.srcAlpha:qr.src],Qe["dstAlpha"in qr?qr.dstAlpha:qr.dst]]},function(qr,wi,vi){function ma(pa,ei){return wi.def('"',pa,ei,'" in ',vi,"?",vi,".",pa,ei,":",vi,".",pa)}qr=qr.constants.blendFuncs;var $a=ma("src","RGB"),Na=ma("dst","RGB"),ys=($a=wi.def(qr,"[",$a,"]"),wi.def(qr,"[",ma("src","Alpha"),"]"));return[$a,Na=wi.def(qr,"[",Na,"]"),ys,qr=wi.def(qr,"[",ma("dst","Alpha"),"]")]});case"blend.equation":return Zi(function(qr){return"string"==typeof qr?[ti[qr],ti[qr]]:"object"==typeof qr?[ti[qr.rgb],ti[qr.alpha]]:void 0},function(qr,wi,vi){var ma=qr.constants.blendEquations,$a=wi.def(),Na=wi.def();return(qr=qr.cond("typeof ",vi,'==="string"')).then($a,"=",Na,"=",ma,"[",vi,"];"),qr.else($a,"=",ma,"[",vi,".rgb];",Na,"=",ma,"[",vi,".alpha];"),wi(qr),[$a,Na]});case"blend.color":return Zi(function(qr){return o(4,function(wi){return+qr[wi]})},function(qr,wi,vi){return o(4,function(ma){return wi.def("+",vi,"[",ma,"]")})});case"stencil.mask":return Zi(function(qr){return 0|qr},function(qr,wi,vi){return wi.def(vi,"|0")});case"stencil.func":return Zi(function(qr){return[Rt[qr.cmp||"keep"],qr.ref||0,"mask"in qr?qr.mask:-1]},function(qr,wi,vi){return[qr=wi.def('"cmp" in ',vi,"?",qr.constants.compareFuncs,"[",vi,".cmp]",":",7680),wi.def(vi,".ref|0"),wi=wi.def('"mask" in ',vi,"?",vi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Zi(function(qr){return["stencil.opBack"===mi?1029:1028,gt[qr.fail||"keep"],gt[qr.zfail||"keep"],gt[qr.zpass||"keep"]]},function(qr,wi,vi){function ma(Na){return wi.def('"',Na,'" in ',vi,"?",$a,"[",vi,".",Na,"]:",7680)}var $a=qr.constants.stencilOps;return["stencil.opBack"===mi?1029:1028,ma("fail"),ma("zfail"),ma("zpass")]});case"polygonOffset.offset":return Zi(function(qr){return[0|qr.factor,0|qr.units]},function(qr,wi,vi){return[wi.def(vi,".factor|0"),wi=wi.def(vi,".units|0")]});case"cull.face":return Zi(function(qr){var wi=0;return"front"===qr?wi=1028:"back"===qr&&(wi=1029),wi},function(qr,wi,vi){return wi.def(vi,'==="front"?',1028,":",1029)});case"frontFace":return Zi(function(qr){return Be[qr]},function(qr,wi,vi){return wi.def(vi+'==="cw"?2304:2305')});case"colorMask":return Zi(function(qr){return qr.map(function(wi){return!!wi})},function(qr,wi,vi){return o(4,function(ma){return"!!"+vi+"["+ma+"]"})});case"sample.coverage":return Zi(function(qr){return["value"in qr?qr.value:1,!!qr.invert]},function(qr,wi,vi){return[wi.def('"value" in ',vi,"?+",vi,".value:1"),wi=wi.def("!!",vi,".invert")]})}}),Zr),Gn=function un(Zt,yn,Cn){function rr(Rn){if(Rn in Qn){var Gn=je.id(Qn[Rn]);return(Rn=j(function(){return Gn})).id=Gn,Rn}if(Rn in Jn){var fr=Jn[Rn];return q(fr,function(ur,Mr){var vr=ur.invoke(Mr,fr);return Mr.def(ur.shared.strings,".id(",vr,")")})}return null}var Qn=Zt.static,Jn=Zt.dynamic,Wn=rr("frag"),On=rr("vert"),zn=null;return ie(Wn)&&ie(On)?(zn=ut.program(On.id,Wn.id,null,Cn),Zt=j(function(Rn,Gn){return Rn.link(zn)})):Zt=new J(Wn&&Wn.thisDep||On&&On.thisDep,Wn&&Wn.contextDep||On&&On.contextDep,Wn&&Wn.propDep||On&&On.propDep,function(Rn,Gn){var fr,ur,Mr=Rn.shared.shader;return fr=Wn?Wn.append(Rn,Gn):Gn.def(Mr,".","frag"),ur=On?On.append(Rn,Gn):Gn.def(Mr,".","vert"),Gn.def(Mr+".program("+ur+","+fr+")")}),{frag:Wn,vert:On,progVar:Zt,program:zn}}(Zt,0,Wn);Jn("viewport"),Jn(ot("scissor.box"));var fr,ur=0<Object.keys(Rn).length;if((fr={framebuffer:fr,draw:zn,shader:Gn,state:Rn,dirty:ur,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(zr){var Br,or=zr.static;if(zr=zr.dynamic,"profile"in or){var Ur=!!or.profile;(Br=j(function(mi,Zi){return Ur})).enable=Ur}else if("profile"in zr){var Zr=zr.profile;Br=q(Zr,function(mi,Zi){return mi.invoke(Zi,Zr)})}return Br}(Zt),fr.uniforms=function(zr,Br){var or=zr.static,Ur=zr.dynamic,Zr={};return Object.keys(or).forEach(function(mi){var Zi,Vi=or[mi];if("number"==typeof Vi||"boolean"==typeof Vi)Zi=j(function(){return Vi});else if("function"==typeof Vi){var qr=Vi._reglType;"texture2d"===qr||"textureCube"===qr?Zi=j(function(wi){return wi.link(Vi)}):"framebuffer"!==qr&&"framebufferCube"!==qr||(Zi=j(function(wi){return wi.link(Vi.color[0])}))}else m(Vi)&&(Zi=j(function(wi){return wi.global.def("[",o(Vi.length,function(vi){return Vi[vi]}),"]")}));Zi.value=Vi,Zr[mi]=Zi}),Object.keys(Ur).forEach(function(mi){var Zi=Ur[mi];Zr[mi]=q(Zi,function(Vi,qr){return Vi.invoke(qr,Zi)})}),Zr}(Cn),fr.drawVAO=fr.scopeVAO=zn.vao,!fr.drawVAO&&Gn.program&&!Wn&&Ke.angle_instanced_arrays&&zn.static.elements){var Mr=!0;if(Zt=Gn.program.attributes.map(function(zr){return zr=yn.static[zr],Mr=Mr&&!!zr,zr}),Mr&&0<Zt.length){var vr=$t.getVAO($t.createVAO({attributes:Zt,elements:zn.static.elements}));fr.drawVAO=new J(null,null,null,function(zr,Br){return zr.link(vr)}),fr.useVAO=!0}}return Wn?fr.useVAO=!0:fr.attributes=function wn(Zt,yn){var Cn=Zt.static,rr=Zt.dynamic,Qn={};return Object.keys(Cn).forEach(function(Jn){var Wn=Cn[Jn],On=je.id(Jn),zn=new Sr;if(re(Wn))zn.state=1,zn.buffer=mt.getBuffer(mt.create(Wn,34962,!1,!0)),zn.type=0;else if(Gn=mt.getBuffer(Wn))zn.state=1,zn.buffer=Gn,zn.type=0;else if("constant"in Wn){var Rn=Wn.constant;zn.buffer="null",zn.state=2,"number"==typeof Rn?zn.x=Rn:en.forEach(function(Br,or){or<Rn.length&&(zn[Br]=Rn[or])})}else{var Gn=re(Wn.buffer)?mt.getBuffer(mt.create(Wn.buffer,34962,!1,!0)):mt.getBuffer(Wn.buffer),fr=0|Wn.offset,ur=0|Wn.stride,Mr=0|Wn.size,vr=!!Wn.normalized,zr=0;"type"in Wn&&(zr=De[Wn.type]),Wn=0|Wn.divisor,zn.buffer=Gn,zn.state=1,zn.size=Mr,zn.normalized=vr,zn.type=zr||Gn.dtype,zn.offset=fr,zn.stride=ur,zn.divisor=Wn}Qn[Jn]=j(function(Br,or){var Ur=Br.attribCache;if(On in Ur)return Ur[On];var Zr={isStream:!1};return Object.keys(zn).forEach(function(mi){Zr[mi]=zn[mi]}),zn.buffer&&(Zr.buffer=Br.link(zn.buffer),Zr.type=Zr.type||Zr.buffer+".dtype"),Ur[On]=Zr})}),Object.keys(rr).forEach(function(Jn){var Wn=rr[Jn];Qn[Jn]=q(Wn,function(On,zn){function Rn(Ur){zn(vr[Ur],"=",Gn,".",Ur,"|0;")}var Gn=On.invoke(zn,Wn),fr=On.shared,ur=On.constants,Mr=fr.isBufferArgs,vr=(fr=fr.buffer,{isStream:zn.def(!1)}),zr=new Sr;zr.state=1,Object.keys(zr).forEach(function(Ur){vr[Ur]=zn.def(""+zr[Ur])});var Br=vr.buffer,or=vr.type;return zn("if(",Mr,"(",Gn,")){",vr.isStream,"=true;",Br,"=",fr,".createStream(",34962,",",Gn,");",or,"=",Br,".dtype;","}else{",Br,"=",fr,".getBuffer(",Gn,");","if(",Br,"){",or,"=",Br,".dtype;",'}else if("constant" in ',Gn,"){",vr.state,"=",2,";","if(typeof "+Gn+'.constant === "number"){',vr[en[0]],"=",Gn,".constant;",en.slice(1).map(function(Ur){return vr[Ur]}).join("="),"=0;","}else{",en.map(function(Ur,Zr){return vr[Ur]+"="+Gn+".constant.length>"+Zr+"?"+Gn+".constant["+Zr+"]:0;"}).join(""),"}}else{","if(",Mr,"(",Gn,".buffer)){",Br,"=",fr,".createStream(",34962,",",Gn,".buffer);","}else{",Br,"=",fr,".getBuffer(",Gn,".buffer);","}",or,'="type" in ',Gn,"?",ur.glTypes,"[",Gn,".type]:",Br,".dtype;",vr.normalized,"=!!",Gn,".normalized;"),Rn("size"),Rn("offset"),Rn("stride"),Rn("divisor"),zn("}}"),zn.exit("if(",vr.isStream,"){",fr,".destroyStream(",Br,");","}"),vr})}),Qn}(yn),fr.context=function(zr){var Br=zr.static,or=zr.dynamic,Ur={};return Object.keys(Br).forEach(function(Zr){var mi=Br[Zr];Ur[Zr]=j(function(Zi,Vi){return"number"==typeof mi||"boolean"==typeof mi?""+mi:Zi.link(mi)})}),Object.keys(or).forEach(function(Zr){var mi=or[Zr];Ur[Zr]=q(mi,function(Zi,Vi){return Zi.invoke(Vi,mi)})}),Ur}(rr),fr}function An(Zt,yn,Cn){var rr=Zt.shared.context,Qn=Zt.scope();Object.keys(Cn).forEach(function(Jn){yn.save(rr,"."+Jn);var Wn=Cn[Jn].append(Zt,yn);Array.isArray(Wn)?Qn(rr,".",Jn,"=[",Wn.join(),"];"):Qn(rr,".",Jn,"=",Wn,";")}),yn(Qn)}function hn(Zt,yn,Cn,rr){var Qn,Jn=(On=Zt.shared).gl,Wn=On.framebuffer;br&&(Qn=yn.def(On.extensions,".webgl_draw_buffers"));var On=(zn=Zt.constants).drawBuffer,zn=zn.backBuffer;Zt=Cn?Cn.append(Zt,yn):yn.def(Wn,".next"),rr||yn("if(",Zt,"!==",Wn,".cur){"),yn("if(",Zt,"){",Jn,".bindFramebuffer(",36160,",",Zt,".framebuffer);"),br&&yn(Qn,".drawBuffersWEBGL(",On,"[",Zt,".colorAttachments.length]);"),yn("}else{",Jn,".bindFramebuffer(",36160,",null);"),br&&yn(Qn,".drawBuffersWEBGL(",zn,");"),yn("}",Wn,".cur=",Zt,";"),rr||yn("}")}function pn(Zt,yn,Cn){var rr=Zt.shared,Qn=rr.gl,Jn=Zt.current,Wn=Zt.next,On=rr.current,zn=rr.next,Rn=Zt.cond(On,".dirty");ci.forEach(function(Gn){var fr,ur;if(!((Gn=ot(Gn))in Cn.state))if(Gn in Wn){fr=Wn[Gn],ur=Jn[Gn];var Mr=o(Kn[Gn].length,function(vr){return Rn.def(fr,"[",vr,"]")});Rn(Zt.cond(Mr.map(function(vr,zr){return vr+"!=="+ur+"["+zr+"]"}).join("||")).then(Qn,".",li[Gn],"(",Mr,");",Mr.map(function(vr,zr){return ur+"["+zr+"]="+vr}).join(";"),";"))}else fr=Rn.def(zn,".",Gn),Mr=Zt.cond(fr,"!==",On,".",Gn),Rn(Mr),Gn in Or?Mr(Zt.cond(fr).then(Qn,".enable(",Or[Gn],");").else(Qn,".disable(",Or[Gn],");"),On,".",Gn,"=",fr,";"):Mr(Qn,".",li[Gn],"(",fr,");",On,".",Gn,"=",fr,";")}),0===Object.keys(Cn.state).length&&Rn(On,".dirty=false;"),yn(Rn)}function xn(Zt,yn,Cn,rr){var Qn,Jn=Zt.shared,Wn=Zt.current,On=Jn.current,zn=Jn.gl;$(Object.keys(Cn)).forEach(function(Rn){var Gn=Cn[Rn];if(!rr||rr(Gn)){var fr=Gn.append(Zt,yn);if(Or[Rn]){var ur=Or[Rn];ie(Gn)?(Qn=Zt.link(fr,{stable:!0}),yn(Zt.cond(Qn).then(zn,".enable(",ur,");").else(zn,".disable(",ur,");")),yn(On,".",Rn,"=",Qn,";")):(yn(Zt.cond(fr).then(zn,".enable(",ur,");").else(zn,".disable(",ur,");")),yn(On,".",Rn,"=",fr,";"))}else if(m(fr)){var Mr=Wn[Rn];yn(zn,".",li[Rn],"(",fr,");",fr.map(function(vr,zr){return Mr+"["+zr+"]="+vr}).join(";"),";")}else ie(Gn)?(Qn=Zt.link(fr,{stable:!0}),yn(zn,".",li[Rn],"(",Qn,");",On,".",Rn,"=",Qn,";")):yn(zn,".",li[Rn],"(",fr,");",On,".",Rn,"=",fr,";")}})}function En(Zt,yn){Fn&&(Zt.instancing=yn.def(Zt.shared.extensions,".angle_instanced_arrays"))}function In(Zt,yn,Cn,rr,Qn){function Jn(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Wn(zr){zr(Rn=yn.def(),"=",Jn(),";"),"string"==typeof Qn?zr(ur,".count+=",Qn,";"):zr(ur,".count++;"),zt&&(rr?zr(Gn=yn.def(),"=",vr,".getNumPendingQueries();"):zr(vr,".beginQuery(",ur,");"))}function On(zr){zr(ur,".cpuTime+=",Jn(),"-",Rn,";"),zt&&(rr?zr(vr,".pushScopeStats(",Gn,",",vr,".getNumPendingQueries(),",ur,");"):zr(vr,".endQuery();"))}function zn(zr){var Br=yn.def(Mr,".profile");yn(Mr,".profile=",zr,";"),yn.exit(Mr,".profile=",Br,";")}var Rn,Gn,fr=Zt.shared,ur=Zt.stats,Mr=fr.current,vr=fr.timer;if(Cn=Cn.profile){if(ie(Cn))return void(Cn.enable?(Wn(yn),On(yn.exit),zn("true")):zn("false"));zn(Cn=Cn.append(Zt,yn))}else Cn=yn.def(Mr,".profile");Wn(fr=Zt.block()),yn("if(",Cn,"){",fr,"}"),On(Zt=Zt.block()),yn.exit("if(",Cn,"){",Zt,"}")}function Yn(Zt,yn,Cn,rr,Qn){var Wn=Zt.shared;rr.forEach(function(On){var zn,Rn=On.name,Gn=Cn.attributes[Rn];if(Gn){if(!Qn(Gn))return;zn=Gn.append(Zt,yn)}else{if(!Qn(Ve))return;var fr=Zt.scopeAttrib(Rn);zn={},Object.keys(new Sr).forEach(function(ur){zn[ur]=yn.def(fr,".",ur)})}!function Jn(On,zn,Rn){function Gn(){yn("if(!",vr,".buffer){",ur,".enableVertexAttribArray(",Mr,");}");var Ur,Zr=Rn.type;Ur=Rn.size?yn.def(Rn.size,"||",zn):zn,yn("if(",vr,".type!==",Zr,"||",vr,".size!==",Ur,"||",or.map(function(mi){return vr+"."+mi+"!=="+Rn[mi]}).join("||"),"){",ur,".bindBuffer(",34962,",",zr,".buffer);",ur,".vertexAttribPointer(",[Mr,Ur,Zr,Rn.normalized,Rn.stride,Rn.offset],");",vr,".type=",Zr,";",vr,".size=",Ur,";",or.map(function(mi){return vr+"."+mi+"="+Rn[mi]+";"}).join(""),"}"),Fn&&yn("if(",vr,".divisor!==",Zr=Rn.divisor,"){",Zt.instancing,".vertexAttribDivisorANGLE(",[Mr,Zr],");",vr,".divisor=",Zr,";}")}function fr(){yn("if(",vr,".buffer){",ur,".disableVertexAttribArray(",Mr,");",vr,".buffer=null;","}if(",en.map(function(Ur,Zr){return vr+"."+Ur+"!=="+Br[Zr]}).join("||"),"){",ur,".vertexAttrib4f(",Mr,",",Br,");",en.map(function(Ur,Zr){return vr+"."+Ur+"="+Br[Zr]+";"}).join(""),"}")}var ur=Wn.gl,Mr=yn.def(On,".location"),vr=yn.def(Wn.attributes,"[",Mr,"]"),zr=Rn.buffer,Br=[Rn.x,Rn.y,Rn.z,Rn.w],or=["buffer","normalized","offset","stride"];1===(On=Rn.state)?Gn():2===On?fr():(yn("if(",On,"===",1,"){"),Gn(),yn("}else{"),fr(),yn("}"))}(Zt.link(On),function(ur){switch(ur){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(On.info.type),zn)})}function nr(Zt,yn,Cn,rr,Qn,Jn){for(var Wn,On=Zt.shared,zn=On.gl,Rn=0;Rn<rr.length;++Rn){var Gn,fr=(vr=rr[Rn]).name,ur=vr.info.type,Mr=Cn.uniforms[fr],vr=Zt.link(vr)+".location";if(Mr){if(!Qn(Mr))continue;if(ie(Mr)){if(fr=Mr.value,35678===ur||35680===ur)yn(zn,".uniform1i(",vr,",",(ur=Zt.link(fr._texture||fr.color[0]._texture))+".bind());"),yn.exit(ur,".unbind();");else if(35674===ur||35675===ur||35676===ur)Mr=2,35675===ur?Mr=3:35676===ur&&(Mr=4),yn(zn,".uniformMatrix",Mr,"fv(",vr,",false,",fr=Zt.global.def("new Float32Array(["+Array.prototype.slice.call(fr)+"])"),");");else{switch(ur){case 5126:Wn="1f";break;case 35664:Wn="2f";break;case 35665:Wn="3f";break;case 35666:Wn="4f";break;case 35670:case 5124:Wn="1i";break;case 35671:case 35667:Wn="2i";break;case 35672:case 35668:Wn="3i";break;case 35673:case 35669:Wn="4i"}yn(zn,".uniform",Wn,"(",vr,",",m(fr)?Array.prototype.slice.call(fr):fr,");")}continue}Gn=Mr.append(Zt,yn)}else{if(!Qn(Ve))continue;Gn=yn.def(On.uniforms,"[",je.id(fr),"]")}switch(35678===ur?yn("if(",Gn,"&&",Gn,'._reglType==="framebuffer"){',Gn,"=",Gn,".color[0];","}"):35680===ur&&yn("if(",Gn,"&&",Gn,'._reglType==="framebufferCube"){',Gn,"=",Gn,".color[0];","}"),fr=1,ur){case 35678:case 35680:ur=yn.def(Gn,"._texture"),yn(zn,".uniform1i(",vr,",",ur,".bind());"),yn.exit(ur,".unbind();");continue;case 5124:case 35670:Wn="1i";break;case 35667:case 35671:Wn="2i",fr=2;break;case 35668:case 35672:Wn="3i",fr=3;break;case 35669:case 35673:Wn="4i",fr=4;break;case 5126:Wn="1f";break;case 35664:Wn="2f",fr=2;break;case 35665:Wn="3f",fr=3;break;case 35666:Wn="4f",fr=4;break;case 35674:Wn="Matrix2fv";break;case 35675:Wn="Matrix3fv";break;case 35676:Wn="Matrix4fv"}if("M"===Wn.charAt(0)){yn(zn,".uniform",Wn,"(",vr,","),vr=Math.pow(ur-35674+2,2);var zr=Zt.global.def("new Float32Array(",vr,")");Array.isArray(Gn)?yn("false,(",o(vr,function(or){return zr+"["+or+"]="+Gn[or]}),",",zr,")"):yn("false,(Array.isArray(",Gn,")||",Gn," instanceof Float32Array)?",Gn,":(",o(vr,function(or){return zr+"["+or+"]="+Gn+"["+or+"]"}),",",zr,")"),yn(");")}else{if(1<fr){ur=[];var Br=[];for(Mr=0;Mr<fr;++Mr)Array.isArray(Gn)?Br.push(Gn[Mr]):Br.push(yn.def(Gn+"["+Mr+"]")),Jn&&ur.push(yn.def());Jn&&yn("if(!",Zt.batchId,"||",ur.map(function(or,Ur){return or+"!=="+Br[Ur]}).join("||"),"){",ur.map(function(or,Ur){return or+"="+Br[Ur]+";"}).join("")),yn(zn,".uniform",Wn,"(",vr,",",Br.join(","),");")}else Jn&&(ur=yn.def(),yn("if(!",Zt.batchId,"||",ur,"!==",Gn,"){",ur,"=",Gn,";")),yn(zn,".uniform",Wn,"(",vr,",",Gn,");");Jn&&yn("}")}}}function sr(Zt,yn,Cn,rr){function Qn(Zr){var mi=ur[Zr];return mi?mi.append(Zt,mi.contextDep&&rr.contextDynamic||mi.propDep?Cn:yn):yn.def(fr,".",Zr)}function Jn(){function Zr(){Cn(zn,".drawElementsInstancedANGLE(",[vr,Br,or,zr+"<<(("+or+"-5121)>>1)",On],");")}function mi(){Cn(zn,".drawArraysInstancedANGLE(",[vr,zr,Br,On],");")}Mr&&"null"!==Mr?Ur?Zr():(Cn("if(",Mr,"){"),Zr(),Cn("}else{"),mi(),Cn("}")):mi()}function Wn(){function Zr(){Cn(Gn+".drawElements("+[vr,Br,or,zr+"<<(("+or+"-5121)>>1)"]+");")}function mi(){Cn(Gn+".drawArrays("+[vr,zr,Br]+");")}Mr&&"null"!==Mr?Ur?Zr():(Cn("if(",Mr,"){"),Zr(),Cn("}else{"),mi(),Cn("}")):mi()}var On,zn,Zr,mi,Rn=Zt.shared,Gn=Rn.gl,fr=Rn.draw,ur=rr.draw,Mr=(mi=yn,(Zr=ur.elements)?((Zr.contextDep&&rr.contextDynamic||Zr.propDep)&&(mi=Cn),Zr=Zr.append(Zt,mi),ur.elementsActive&&mi("if("+Zr+")"+Gn+".bindBuffer(34963,"+Zr+".buffer.buffer);")):(Zr=mi.def(),mi(Zr,"=",fr,".","elements",";","if(",Zr,"){",Gn,".bindBuffer(",34963,",",Zr,".buffer.buffer);}","else if(",Rn.vao,".currentVAO){",Zr,"=",Zt.shared.elements+".getElements("+Rn.vao,".currentVAO.elements);",xr?"":"if("+Zr+")"+Gn+".bindBuffer(34963,"+Zr+".buffer.buffer);","}")),Zr),vr=Qn("primitive"),zr=Qn("offset"),Br=function(){var Zr=ur.count,mi=yn;return Zr?((Zr.contextDep&&rr.contextDynamic||Zr.propDep)&&(mi=Cn),Zr=Zr.append(Zt,mi)):Zr=mi.def(fr,".","count"),Zr}();if("number"==typeof Br){if(0===Br)return}else Cn("if(",Br,"){"),Cn.exit("}");Fn&&(On=Qn("instances"),zn=Zt.instancing);var or=Mr+".type",Ur=ur.elements&&ie(ur.elements)&&!ur.vaoActive;Fn&&("number"!=typeof On||0<=On)?"string"==typeof On?(Cn("if(",On,">0){"),Jn(),Cn("}else if(",On,"<0){"),Wn(),Cn("}")):Jn():Wn()}function Ar(Zt,yn,Cn,rr,Qn){return Qn=(yn=Vt()).proc("body",Qn),Fn&&(yn.instancing=Qn.def(yn.shared.extensions,".angle_instanced_arrays")),Zt(yn,Qn,Cn,rr),yn.compile().body}function yr(Zt,yn,Cn,rr){En(Zt,yn),Cn.useVAO?Cn.drawVAO?yn(Zt.shared.vao,".setVAO(",Cn.drawVAO.append(Zt,yn),");"):yn(Zt.shared.vao,".setVAO(",Zt.shared.vao,".targetVAO);"):(yn(Zt.shared.vao,".setVAO(null);"),Yn(Zt,yn,Cn,rr.attributes,function(){return!0})),nr(Zt,yn,Cn,rr.uniforms,function(){return!0},!1),sr(Zt,yn,yn,Cn)}function Pr(Zt,yn,Cn,rr){function Qn(){return!0}Zt.batchId="a1",En(Zt,yn),Yn(Zt,yn,Cn,rr.attributes,Qn),nr(Zt,yn,Cn,rr.uniforms,Qn,!1),sr(Zt,yn,yn,Cn)}function Wr(Zt,yn,Cn,rr){function Qn(fr){return fr.contextDep&&Wn||fr.propDep}function Jn(fr){return!Qn(fr)}En(Zt,yn);var Wn=Cn.contextDep,On=yn.def(),zn=yn.def();Zt.shared.props=zn,Zt.batchId=On;var Rn=Zt.scope(),Gn=Zt.scope();yn(Rn.entry,"for(",On,"=0;",On,"<","a1",";++",On,"){",zn,"=","a0","[",On,"];",Gn,"}",Rn.exit),Cn.needsContext&&An(Zt,Gn,Cn.context),Cn.needsFramebuffer&&hn(Zt,Gn,Cn.framebuffer),xn(Zt,Gn,Cn.state,Qn),Cn.profile&&Qn(Cn.profile)&&In(Zt,Gn,Cn,!1,!0),rr?(Cn.useVAO?Cn.drawVAO?Qn(Cn.drawVAO)?Gn(Zt.shared.vao,".setVAO(",Cn.drawVAO.append(Zt,Gn),");"):Rn(Zt.shared.vao,".setVAO(",Cn.drawVAO.append(Zt,Rn),");"):Rn(Zt.shared.vao,".setVAO(",Zt.shared.vao,".targetVAO);"):(Rn(Zt.shared.vao,".setVAO(null);"),Yn(Zt,Rn,Cn,rr.attributes,Jn),Yn(Zt,Gn,Cn,rr.attributes,Qn)),nr(Zt,Rn,Cn,rr.uniforms,Jn,!1),nr(Zt,Gn,Cn,rr.uniforms,Qn,!0),sr(Zt,Rn,Gn,Cn)):(yn=Zt.global.def("{}"),rr=Cn.shader.progVar.append(Zt,Gn),zn=Gn.def(rr,".id"),Rn=Gn.def(yn,"[",zn,"]"),Gn(Zt.shared.gl,".useProgram(",rr,".program);","if(!",Rn,"){",Rn,"=",yn,"[",zn,"]=",Zt.link(function(fr){return Ar(Pr,Zt,Cn,fr,2)}),"(",rr,");}",Rn,".call(this,a0[",On,"],",On,");"))}function Hn(Zt,yn,Cn){var rr=yn.static[Cn];if(rr&&function(Gn){if("object"==typeof Gn&&!m(Gn)){for(var fr=Object.keys(Gn),ur=0;ur<fr.length;++ur)if(te.isDynamic(Gn[fr[ur]]))return!0;return!1}}(rr)){var Qn=Zt.global,Jn=Object.keys(rr),Wn=!1,On=!1,zn=!1,Rn=Zt.global.def("{}");Jn.forEach(function(Gn){var fr=rr[Gn];if(te.isDynamic(fr))"function"==typeof fr&&(fr=rr[Gn]=te.unbox(fr)),Gn=q(fr,null),Wn=Wn||Gn.thisDep,zn=zn||Gn.propDep,On=On||Gn.contextDep;else{switch(Qn(Rn,".",Gn,"="),typeof fr){case"number":Qn(fr);break;case"string":Qn('"',fr,'"');break;case"object":Array.isArray(fr)&&Qn("[",fr.join(),"]");break;default:Qn(Zt.link(fr))}Qn(";")}}),yn.dynamic[Cn]=new te.DynamicVariable(4,{thisDep:Wn,contextDep:On,propDep:zn,ref:Rn,append:function(Gn,fr){Jn.forEach(function(ur){var Mr=rr[ur];te.isDynamic(Mr)&&(Mr=Gn.invoke(fr,Mr),fr(Rn,".",ur,"=",Mr,";"))})}}),delete yn.static[Cn]}}var Sr=$t.Record,ti={add:32774,subtract:32778,"reverse subtract":32779};Ke.ext_blend_minmax&&(ti.min=32775,ti.max=32776);var Fn=Ke.angle_instanced_arrays,br=Ke.webgl_draw_buffers,xr=Ke.oes_vertex_array_object,Kn={dirty:!0,profile:Ne.profile},Qr={},ci=[],Or={},li={};yt("dither",3024),yt("blend.enable",3042),It("blend.color","blendColor",[0,0,0,0]),It("blend.equation","blendEquationSeparate",[32774,32774]),It("blend.func","blendFuncSeparate",[1,0,1,0]),yt("depth.enable",2929,!0),It("depth.func","depthFunc",513),It("depth.range","depthRange",[0,1]),It("depth.mask","depthMask",!0),It("colorMask","colorMask",[!0,!0,!0,!0]),yt("cull.enable",2884),It("cull.face","cullFace",1029),It("frontFace","frontFace",2305),It("lineWidth","lineWidth",1),yt("polygonOffset.enable",32823),It("polygonOffset.offset","polygonOffset",[0,0]),yt("sample.alpha",32926),yt("sample.enable",32928),It("sample.coverage","sampleCoverage",[1,!1]),yt("stencil.enable",2960),It("stencil.mask","stencilMask",-1),It("stencil.func","stencilFunc",[519,0,-1]),It("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),It("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),yt("scissor.enable",3089),It("scissor.box","scissor",[0,0,Le.drawingBufferWidth,Le.drawingBufferHeight]),It("viewport","viewport",[0,0,Le.drawingBufferWidth,Le.drawingBufferHeight]);var di={gl:Le,context:Wt,strings:je,next:Qr,current:Kn,draw:Dt,elements:pt,buffer:mt,shader:ut,attributes:$t.state,vao:$t,uniforms:Jt,framebuffer:Pt,extensions:Ke,timer:zt,isBufferArgs:re},Tn={primTypes:Ie,compareFuncs:Rt,blendFuncs:Qe,blendEquations:ti,stencilOps:gt,glTypes:De,orientationType:Be};br&&(Tn.backBuffer=[1029],Tn.drawBuffer=o(ft.maxDrawbuffers,function(Zt){return 0===Zt?[0]:o(Zt,function(yn){return 36064+yn})}));var tr=0;return{next:Qr,current:Kn,procs:function(){var Zt=Vt(),yn=Zt.proc("poll"),Cn=Zt.proc("refresh"),rr=Zt.block();yn(rr),Cn(rr);var Qn,Jn=(zn=Zt.shared).gl,Wn=zn.next,On=zn.current;rr(On,".dirty=false;"),hn(Zt,yn),hn(Zt,Cn,null,!0),Fn&&(Qn=Zt.link(Fn)),Ke.oes_vertex_array_object&&Cn(Zt.link(Ke.oes_vertex_array_object),".bindVertexArrayOES(null);");var zn=Cn.def(zn.attributes),Rn=Cn.def(0),Gn=Zt.cond(Rn,".buffer");Gn.then(Jn,".enableVertexAttribArray(i);",Jn,".bindBuffer(",34962,",",Rn,".buffer.buffer);",Jn,".vertexAttribPointer(i,",Rn,".size,",Rn,".type,",Rn,".normalized,",Rn,".stride,",Rn,".offset);").else(Jn,".disableVertexAttribArray(i);",Jn,".vertexAttrib4f(i,",Rn,".x,",Rn,".y,",Rn,".z,",Rn,".w);",Rn,".buffer=null;");var fr=Zt.link(ft.maxAttributes,{stable:!0});return Cn("for(var i=0;i<",fr,";++i){",Rn,"=",zn,"[i];",Gn,"}"),Fn&&Cn("for(var i=0;i<",fr,";++i){",Qn,".vertexAttribDivisorANGLE(i,",zn,"[i].divisor);","}"),Cn(Zt.shared.vao,".currentVAO=null;",Zt.shared.vao,".setVAO(",Zt.shared.vao,".targetVAO);"),Object.keys(Or).forEach(function(ur){var Mr=Or[ur],vr=rr.def(Wn,".",ur),zr=Zt.block();zr("if(",vr,"){",Jn,".enable(",Mr,")}else{",Jn,".disable(",Mr,")}",On,".",ur,"=",vr,";"),Cn(zr),yn("if(",vr,"!==",On,".",ur,"){",zr,"}")}),Object.keys(li).forEach(function(ur){var Mr,vr,zr=li[ur],Br=Kn[ur],or=Zt.block();or(Jn,".",zr,"("),m(Br)?(zr=Br.length,Mr=Zt.global.def(Wn,".",ur),vr=Zt.global.def(On,".",ur),or(o(zr,function(Ur){return Mr+"["+Ur+"]"}),");",o(zr,function(Ur){return vr+"["+Ur+"]="+Mr+"["+Ur+"];"}).join("")),yn("if(",o(zr,function(Ur){return Mr+"["+Ur+"]!=="+vr+"["+Ur+"]"}).join("||"),"){",or,"}")):(Mr=rr.def(Wn,".",ur),vr=rr.def(On,".",ur),or(Mr,");",On,".",ur,"=",Mr,";"),yn("if(",Mr,"!==",vr,"){",or,"}")),Cn(or)}),Zt.compile()}(),compile:function(Zt,yn,Cn,rr,Qn){var Jn=Vt();Jn.stats=Jn.link(Qn),Object.keys(yn.static).forEach(function(On){Hn(Jn,yn,On)}),Ge.forEach(function(On){Hn(Jn,Zt,On)});var Wn=Zn(Zt,yn,Cn,rr);return Wn.shader.program&&(Wn.shader.program.attributes.sort(function(On,zn){return On.name<zn.name?-1:1}),Wn.shader.program.uniforms.sort(function(On,zn){return On.name<zn.name?-1:1})),function(On,zn){var Rn=On.proc("draw",1);En(On,Rn),An(On,Rn,zn.context),hn(On,Rn,zn.framebuffer),pn(On,Rn,zn),xn(On,Rn,zn.state),In(On,Rn,zn,!1,!0);var Gn=zn.shader.progVar.append(On,Rn);if(Rn(On.shared.gl,".useProgram(",Gn,".program);"),zn.shader.program)yr(On,Rn,zn,zn.shader.program);else{Rn(On.shared.vao,".setVAO(null);");var fr=On.global.def("{}"),ur=Rn.def(Gn,".id"),Mr=Rn.def(fr,"[",ur,"]");Rn(On.cond(Mr).then(Mr,".call(this,a0);").else(Mr,"=",fr,"[",ur,"]=",On.link(function(vr){return Ar(yr,On,zn,vr,1)}),"(",Gn,");",Mr,".call(this,a0);"))}0<Object.keys(zn.state).length&&Rn(On.shared.current,".dirty=true;"),On.shared.vao&&Rn(On.shared.vao,".setVAO(null);")}(Jn,Wn),function lr(Zt,yn){function Cn(On){var zn=yn.shader[On];zn&&(zn=zn.append(Zt,rr),isNaN(zn)?rr.set(Qn.shader,"."+On,zn):rr.set(Qn.shader,"."+On,Zt.link(zn,{stable:!0})))}var rr=Zt.proc("scope",3);Zt.batchId="a2";var Qn=Zt.shared,Jn=Qn.current;if(An(Zt,rr,yn.context),yn.framebuffer&&yn.framebuffer.append(Zt,rr),$(Object.keys(yn.state)).forEach(function(On){var zn=yn.state[On],Rn=zn.append(Zt,rr);m(Rn)?Rn.forEach(function(Gn,fr){isNaN(Gn)?rr.set(Zt.next[On],"["+fr+"]",Gn):rr.set(Zt.next[On],"["+fr+"]",Zt.link(Gn,{stable:!0}))}):ie(zn)?rr.set(Qn.next,"."+On,Zt.link(Rn,{stable:!0})):rr.set(Qn.next,"."+On,Rn)}),In(Zt,rr,yn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(On){var zn=yn.draw[On];zn&&(zn=zn.append(Zt,rr),isNaN(zn)?rr.set(Qn.draw,"."+On,zn):rr.set(Qn.draw,"."+On,Zt.link(zn),{stable:!0}))}),Object.keys(yn.uniforms).forEach(function(On){var zn=yn.uniforms[On].append(Zt,rr);Array.isArray(zn)&&(zn="["+zn.map(function(Rn){return isNaN(Rn)?Rn:Zt.link(Rn,{stable:!0})})+"]"),rr.set(Qn.uniforms,"["+Zt.link(je.id(On),{stable:!0})+"]",zn)}),Object.keys(yn.attributes).forEach(function(On){var zn=yn.attributes[On].append(Zt,rr),Rn=Zt.scopeAttrib(On);Object.keys(new Sr).forEach(function(Gn){rr.set(Rn,"."+Gn,zn[Gn])})}),yn.scopeVAO){var Wn=yn.scopeVAO.append(Zt,rr);isNaN(Wn)?rr.set(Qn.vao,".targetVAO",Wn):rr.set(Qn.vao,".targetVAO",Zt.link(Wn,{stable:!0}))}Cn("vert"),Cn("frag"),0<Object.keys(yn.state).length&&(rr(Jn,".dirty=true;"),rr.exit(Jn,".dirty=true;")),rr("a1(",Zt.shared.context,",a0,",Zt.batchId,");")}(Jn,Wn),function(On,zn){function Rn(Br){return Br.contextDep&&fr||Br.propDep}var Gn=On.proc("batch",2);On.batchId="0",En(On,Gn);var fr=!1,ur=!0;Object.keys(zn.context).forEach(function(Br){fr=fr||zn.context[Br].propDep}),fr||(An(On,Gn,zn.context),ur=!1);var Mr=!1;if((vr=zn.framebuffer)?(vr.propDep?fr=Mr=!0:vr.contextDep&&fr&&(Mr=!0),Mr||hn(On,Gn,vr)):hn(On,Gn,null),zn.state.viewport&&zn.state.viewport.propDep&&(fr=!0),pn(On,Gn,zn),xn(On,Gn,zn.state,function(Br){return!Rn(Br)}),zn.profile&&Rn(zn.profile)||In(On,Gn,zn,!1,"a1"),zn.contextDep=fr,zn.needsContext=ur,zn.needsFramebuffer=Mr,(ur=zn.shader.progVar).contextDep&&fr||ur.propDep)Wr(On,Gn,zn,null);else if(ur=ur.append(On,Gn),Gn(On.shared.gl,".useProgram(",ur,".program);"),zn.shader.program)Wr(On,Gn,zn,zn.shader.program);else{Gn(On.shared.vao,".setVAO(null);");var vr=On.global.def("{}"),zr=(Mr=Gn.def(ur,".id"),Gn.def(vr,"[",Mr,"]"));Gn(On.cond(zr).then(zr,".call(this,a0,a1);").else(zr,"=",vr,"[",Mr,"]=",On.link(function(Br){return Ar(Wr,On,zn,Br,2)}),"(",ur,");",zr,".call(this,a0,a1);"))}0<Object.keys(zn.state).length&&Gn(On.shared.current,".dirty=true;"),On.shared.vao&&Gn(On.shared.vao,".setVAO(null);")}(Jn,Wn),G(Jn.compile(),{destroy:function(){Wn.shader.program.destroy()}})}}}function ae(Le,je){for(var Ke=0;Ke<Le.length;++Ke)if(Le[Ke]===je)return Ke;return-1}var G=function(Le,je){for(var Ke=Object.keys(je),ft=0;ft<Ke.length;++ft)Le[Ke[ft]]=je[Ke[ft]];return Le},ee=0,te={DynamicVariable:v,define:function(Le,je){return new v(Le,x(je+""))},isDynamic:function(Le){return"function"==typeof Le&&!Le._reglType||Le instanceof v},unbox:function Le(je,Ke){return"function"==typeof je?new v(0,je):"number"==typeof je||"boolean"==typeof je?new v(5,je):Array.isArray(je)?new v(6,je.map(function(ft,mt){return Le(ft,Ke+"["+mt+"]")})):je instanceof v?je:void 0},accessor:x},le={next:"function"==typeof requestAnimationFrame?function(Le){return requestAnimationFrame(Le)}:function(Le){return setTimeout(Le,16)},cancel:"function"==typeof cancelAnimationFrame?function(Le){return cancelAnimationFrame(Le)}:clearTimeout},ue="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},de=l();de.zero=l();var be=function(Le){return Le instanceof Uint8Array||Le instanceof Uint16Array||Le instanceof Uint32Array||Le instanceof Int8Array||Le instanceof Int16Array||Le instanceof Int32Array||Le instanceof Float32Array||Le instanceof Float64Array||Le instanceof Uint8ClampedArray},me=function(Le){return Object.keys(Le).map(function(je){return Le[je]})},_e={shape:function(Le){for(var je=[];Le.length;Le=Le[0])je.push(Le.length);return je},flatten:function(Le,je,Ke,ft){var mt=1;if(je.length)for(var pt=0;pt<je.length;++pt)mt*=je[pt];else mt=0;switch(Ke=ft||de.allocType(Ke,mt),je.length){case 0:break;case 1:for(ft=je[0],je=0;je<ft;++je)Ke[je]=Le[je];break;case 2:for(ft=je[0],je=je[1],pt=mt=0;pt<ft;++pt)for(var Ot=Le[pt],Pt=0;Pt<je;++Pt)Ke[mt++]=Ot[Pt];break;case 3:y(Le,je[0],je[1],je[2],Ke,0);break;default:!function Jt($t,ut,Dt,Wt,zt){for(var Ht=1,Ne=Dt+1;Ne<ut.length;++Ne)Ht*=ut[Ne];var ot=ut[Dt];if(ut.length-Dt==4){var yt=ut[Dt+1],It=ut[Dt+2];for(ut=ut[Dt+3],Ne=0;Ne<ot;++Ne)y($t[Ne],yt,It,ut,Wt,zt),zt+=Ht}else for(Ne=0;Ne<ot;++Ne)Jt($t[Ne],ut,Dt+1,Wt,zt),zt+=Ht}(Le,je,0,Ke,0)}return Ke}},Ee={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},De={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Se={dynamic:35048,stream:35040,static:35044},Fe=_e.flatten,ve=_e.shape,Te=[];Te[5120]=1,Te[5122]=2,Te[5124]=4,Te[5121]=1,Te[5123]=2,Te[5125]=4,Te[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ce=new Float32Array(1),Re=new Uint32Array(Ce.buffer),Ue=[9984,9986,9985,9987],qe=[0,6409,6410,6407,6408],Xe={};Xe[6409]=Xe[6406]=Xe[6402]=1,Xe[34041]=Xe[6410]=2,Xe[6407]=Xe[35904]=3,Xe[6408]=Xe[35906]=4;var st=u("HTMLCanvasElement"),He=u("OffscreenCanvas"),$e=u("CanvasRenderingContext2D"),et=u("ImageBitmap"),tt=u("HTMLImageElement"),ct=u("HTMLVideoElement"),bt=Object.keys(Ee).concat([st,He,$e,et,tt,ct]),At=[];At[5121]=1,At[5126]=4,At[36193]=2,At[5123]=2,At[5125]=4;var Ut=[];Ut[32854]=2,Ut[32855]=2,Ut[36194]=2,Ut[34041]=4,Ut[33776]=.5,Ut[33777]=.5,Ut[33778]=1,Ut[33779]=1,Ut[35986]=.5,Ut[35987]=1,Ut[34798]=1,Ut[35840]=.5,Ut[35841]=.25,Ut[35842]=.5,Ut[35843]=.25,Ut[36196]=.5;var Ct=[];Ct[32854]=2,Ct[32855]=2,Ct[36194]=2,Ct[33189]=2,Ct[36168]=1,Ct[34041]=4,Ct[35907]=4,Ct[34836]=16,Ct[34842]=8,Ct[34843]=6;var at=[];at[6408]=4,at[6407]=3;var Nt=[];Nt[5121]=1,Nt[5126]=4,Nt[36193]=2;var rn=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],en=["x","y","z","w"],Ge="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Qe={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Rt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},gt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Be={cw:2304,ccw:2305},Ve=new J(!1,!1,!1,function(){});return function(Le){function je(){if(0===Pr.length)ln&&ln.update(),Sr=null;else{Sr=le.next(je),ut();for(var Fn=Pr.length-1;0<=Fn;--Fn){var br=Pr[Fn];br&&br(Zn,null,0)}zt.flush(),ln&&ln.update()}}function Ke(){!Sr&&0<Pr.length&&(Sr=le.next(je))}function ft(){Sr&&(le.cancel(je),Sr=null)}function mt(Fn){Fn.preventDefault(),ft(),Wr.forEach(function(br){br()})}function pt(Fn){zt.getError(),Ne.restore(),En.restore(),hn.restore(),In.restore(),Yn.restore(),nr.restore(),xn.restore(),ln&&ln.restore(),sr.procs.refresh(),Ke(),lr.forEach(function(br){br()})}function Ot(Fn){function br(Zt,yn){var Cn={},rr={};return Object.keys(Zt).forEach(function(Qn){var Jn=Zt[Qn];if(te.isDynamic(Jn))rr[Qn]=te.unbox(Jn,Qn);else{if(yn&&Array.isArray(Jn))for(var Wn=0;Wn<Jn.length;++Wn)if(te.isDynamic(Jn[Wn]))return void(rr[Qn]=te.unbox(Jn,Qn));Cn[Qn]=Jn}}),{dynamic:rr,static:Cn}}var xr=br(Fn.context||{},!0),Kn=br(Fn.uniforms||{},!0),Qr=br(Fn.attributes||{},!1);Fn=br(function(Zt){function yn(rr){if(rr in Cn){var Qn=Cn[rr];delete Cn[rr],Object.keys(Qn).forEach(function(Jn){Cn[rr+"."+Jn]=Qn[Jn]})}}var Cn=G({},Zt);return delete Cn.uniforms,delete Cn.attributes,delete Cn.context,delete Cn.vao,"stencil"in Cn&&Cn.stencil.op&&(Cn.stencil.opBack=Cn.stencil.opFront=Cn.stencil.op,delete Cn.stencil.op),yn("blend"),yn("depth"),yn("cull"),yn("stencil"),yn("polygonOffset"),yn("scissor"),yn("sample"),"vao"in Zt&&(Cn.vao=Zt.vao),Cn}(Fn),!1);var ci={gpuTime:0,cpuTime:0,count:0},Or=sr.compile(Fn,Qr,Kn,xr,ci),li=Or.draw,di=Or.batch,Tn=Or.scope,tr=[];return G(function(Zt,yn){var Cn;if("function"==typeof Zt)return Tn.call(this,null,Zt,0);if("function"==typeof yn)if("number"==typeof Zt)for(Cn=0;Cn<Zt;++Cn)Tn.call(this,null,yn,Cn);else{if(!Array.isArray(Zt))return Tn.call(this,Zt,yn,0);for(Cn=0;Cn<Zt.length;++Cn)Tn.call(this,Zt[Cn],yn,Cn)}else if("number"==typeof Zt){if(0<Zt)return di.call(this,function(rr){for(;tr.length<rr;)tr.push(null);return tr}(0|Zt),0|Zt)}else{if(!Array.isArray(Zt))return li.call(this,Zt);if(Zt.length)return di.call(this,Zt,Zt.length)}},{stats:ci,destroy:function(){Or.destroy()}})}function Pt(Fn,br){var xr=0;sr.procs.poll();var Kn=br.color;Kn&&(zt.clearColor(+Kn[0]||0,+Kn[1]||0,+Kn[2]||0,+Kn[3]||0),xr|=16384),"depth"in br&&(zt.clearDepth(+br.depth),xr|=256),"stencil"in br&&(zt.clearStencil(0|br.stencil),xr|=1024),zt.clear(xr)}function Jt(Fn){return Pr.push(Fn),Ke(),{cancel:function(){var br=ae(Pr,Fn);Pr[br]=function xr(){var Kn=ae(Pr,xr);Pr[Kn]=Pr[Pr.length-1],--Pr.length,0>=Pr.length&&ft()}}}}function $t(){var Fn=Ar.viewport,br=Ar.scissor_box;Fn[0]=Fn[1]=br[0]=br[1]=0,Zn.viewportWidth=Zn.framebufferWidth=Zn.drawingBufferWidth=Fn[2]=br[2]=zt.drawingBufferWidth,Zn.viewportHeight=Zn.framebufferHeight=Zn.drawingBufferHeight=Fn[3]=br[3]=zt.drawingBufferHeight}function ut(){Zn.tick+=1,Zn.time=Wt(),$t(),sr.procs.poll()}function Dt(){In.refresh(),$t(),sr.procs.refresh(),ln&&ln.update()}function Wt(){return(ue()-un)/1e3}if(!(Le=function e(Le){var je,Ke,ft,mt,pt=Le||{};Le={};var Ot=[],Pt=[],Jt="undefined"==typeof window?1:window.devicePixelRatio,$t=!1,ut={},Dt=function(zt){},Wt=function(){};if("string"==typeof pt?je=document.querySelector(pt):"object"==typeof pt&&("string"==typeof pt.nodeName&&"function"==typeof pt.appendChild&&"function"==typeof pt.getBoundingClientRect?je=pt:"function"==typeof pt.drawArrays||"function"==typeof pt.drawElements?ft=(mt=pt).canvas:("gl"in pt?mt=pt.gl:"canvas"in pt?ft=b(pt.canvas):"container"in pt&&(Ke=b(pt.container)),"attributes"in pt&&(Le=pt.attributes),"extensions"in pt&&(Ot=T(pt.extensions)),"optionalExtensions"in pt&&(Pt=T(pt.optionalExtensions)),"onDone"in pt&&(Dt=pt.onDone),"profile"in pt&&($t=!!pt.profile),"pixelRatio"in pt&&(Jt=+pt.pixelRatio),"cachedCode"in pt&&(ut=pt.cachedCode))),je&&("canvas"===je.nodeName.toLowerCase()?ft=je:Ke=je),!mt){if(!ft){if(!(je=function(zt,Ht,Ne){function ot(){var Vt=window.innerWidth,ln=window.innerHeight;zt!==document.body&&(Vt=(ln=It.getBoundingClientRect()).right-ln.left,ln=ln.bottom-ln.top),It.width=Ne*Vt,It.height=Ne*ln}var yt,It=document.createElement("canvas");return G(It.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),zt.appendChild(It),zt===document.body&&(It.style.position="absolute",G(zt.style,{margin:0,padding:0})),zt!==document.body&&"function"==typeof ResizeObserver?(yt=new ResizeObserver(function(){setTimeout(ot)})).observe(zt):window.addEventListener("resize",ot,!1),ot(),{canvas:It,onDestroy:function(){yt?yt.disconnect():window.removeEventListener("resize",ot),zt.removeChild(It)}}}(Ke||document.body,0,Jt)))return null;ft=je.canvas,Wt=je.onDestroy}void 0===Le.premultipliedAlpha&&(Le.premultipliedAlpha=!0),mt=function(zt,Ht){function Ne(ot){try{return zt.getContext(ot,Ht)}catch(yt){return null}}return Ne("webgl")||Ne("experimental-webgl")||Ne("webgl-experimental")}(ft,Le)}return mt?{gl:mt,canvas:ft,container:Ke,extensions:Ot,optionalExtensions:Pt,pixelRatio:Jt,profile:$t,cachedCode:ut,onDone:Dt,onDestroy:Wt}:(Wt(),Dt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Le)))return null;var zt=Le.gl,Ht=zt.getContextAttributes();zt.isContextLost();var Ne=function(Fn,br){function xr(Or){var li;Or=Or.toLowerCase();try{li=Kn[Or]=Fn.getExtension(Or)}catch(di){}return!!li}for(var Kn={},Qr=0;Qr<br.extensions.length;++Qr){var ci=br.extensions[Qr];if(!xr(ci))return br.onDestroy(),br.onDone('"'+ci+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return br.optionalExtensions.forEach(xr),{extensions:Kn,restore:function(){Object.keys(Kn).forEach(function(Or){if(Kn[Or]&&!xr(Or))throw Error("(regl): error restoring extension "+Or)})}}}(zt,Le);if(!Ne)return null;var Fn,br,ot=(Fn={"":0},br=[""],{id:function(xr){var Kn=Fn[xr];return Kn||(Kn=Fn[xr]=br.length,br.push(xr),Kn)},str:function(xr){return br[xr]}}),yt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},It=Le.cachedCode||{},Vt=Ne.extensions,ln=function(Fn,br){function xr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Kn(tr,Zt,yn){var Cn=Or.pop()||new xr;Cn.startQueryIndex=tr,Cn.endQueryIndex=Zt,Cn.sum=0,Cn.stats=yn,li.push(Cn)}if(!br.ext_disjoint_timer_query)return null;var Qr=[],ci=[],Or=[],li=[],di=[],Tn=[];return{beginQuery:function(tr){var Zt=Qr.pop()||br.ext_disjoint_timer_query.createQueryEXT();br.ext_disjoint_timer_query.beginQueryEXT(35007,Zt),ci.push(Zt),Kn(ci.length-1,ci.length,tr)},endQuery:function(){br.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Kn,update:function(){var tr,Zt;if(0!==(tr=ci.length)){Tn.length=Math.max(Tn.length,tr+1),di.length=Math.max(di.length,tr+1),di[0]=0;var yn=Tn[0]=0;for(Zt=tr=0;Zt<ci.length;++Zt){var Cn=ci[Zt];br.ext_disjoint_timer_query.getQueryObjectEXT(Cn,34919)?(yn+=br.ext_disjoint_timer_query.getQueryObjectEXT(Cn,34918),Qr.push(Cn)):ci[tr++]=Cn,di[Zt+1]=yn,Tn[Zt+1]=tr}for(ci.length=tr,Zt=tr=0;Zt<li.length;++Zt){var rr=(yn=li[Zt]).startQueryIndex;yn.sum+=di[Cn=yn.endQueryIndex]-di[rr],(Cn=Tn[Cn])===(rr=Tn[rr])?(yn.stats.gpuTime+=yn.sum/1e6,Or.push(yn)):(yn.startQueryIndex=rr,yn.endQueryIndex=Cn,li[tr++]=yn)}li.length=tr}},getNumPendingQueries:function(){return ci.length},clear:function(){Qr.push.apply(Qr,ci);for(var tr=0;tr<Qr.length;tr++)br.ext_disjoint_timer_query.deleteQueryEXT(Qr[tr]);ci.length=0,Qr.length=0},restore:function(){ci.length=0,Qr.length=0}}}(0,Vt),un=ue(),an=zt.drawingBufferWidth,wn=zt.drawingBufferHeight,Zn={tick:0,time:0,viewportWidth:an,viewportHeight:wn,framebufferWidth:an,framebufferHeight:wn,drawingBufferWidth:an,drawingBufferHeight:wn,pixelRatio:Le.pixelRatio},An=(an={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Le,je){var Ke=1;je.ext_texture_filter_anisotropic&&(Ke=Le.getParameter(34047));var ft=1,mt=1;je.webgl_draw_buffers&&(ft=Le.getParameter(34852),mt=Le.getParameter(36063));var pt=!!je.oes_texture_float;if(pt){pt=Le.createTexture(),Le.bindTexture(3553,pt),Le.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Ot=Le.createFramebuffer();if(Le.bindFramebuffer(36160,Ot),Le.framebufferTexture2D(36160,36064,3553,pt,0),Le.bindTexture(3553,null),36053!==Le.checkFramebufferStatus(36160))pt=!1;else{Le.viewport(0,0,1,1),Le.clearColor(1,0,0,1),Le.clear(16384);var Pt=de.allocType(5126,4);Le.readPixels(0,0,1,1,6408,5126,Pt),Le.getError()?pt=!1:(Le.deleteFramebuffer(Ot),Le.deleteTexture(pt),pt=1===Pt[0]),de.freeType(Pt)}}return Pt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Pt=Le.createTexture(),Ot=de.allocType(5121,36),Le.activeTexture(33984),Le.bindTexture(34067,Pt),Le.texImage2D(34069,0,6408,3,3,0,6408,5121,Ot),de.freeType(Ot),Le.bindTexture(34067,null),Le.deleteTexture(Pt),Pt=!Le.getError()),{colorBits:[Le.getParameter(3410),Le.getParameter(3411),Le.getParameter(3412),Le.getParameter(3413)],depthBits:Le.getParameter(3414),stencilBits:Le.getParameter(3415),subpixelBits:Le.getParameter(3408),extensions:Object.keys(je).filter(function(Jt){return!!je[Jt]}),maxAnisotropic:Ke,maxDrawbuffers:ft,maxColorAttachments:mt,pointSizeDims:Le.getParameter(33901),lineWidthDims:Le.getParameter(33902),maxViewportDims:Le.getParameter(3386),maxCombinedTextureUnits:Le.getParameter(35661),maxCubeMapSize:Le.getParameter(34076),maxRenderbufferSize:Le.getParameter(34024),maxTextureUnits:Le.getParameter(34930),maxTextureSize:Le.getParameter(3379),maxAttributes:Le.getParameter(34921),maxVertexUniforms:Le.getParameter(36347),maxVertexTextureUnits:Le.getParameter(35660),maxVaryingVectors:Le.getParameter(36348),maxFragmentUniforms:Le.getParameter(36349),glsl:Le.getParameter(35724),renderer:Le.getParameter(7937),vendor:Le.getParameter(7936),version:Le.getParameter(7938),readFloat:pt,npotTextureCube:Pt}}(zt,Vt)),hn=function p(Le,je,Ke,ft){function mt(Dt){this.id=Jt++,this.buffer=Le.createBuffer(),this.type=Dt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ke.profile&&(this.stats={size:0})}function pt(Dt,Wt,zt){Dt.byteLength=Wt.byteLength,Le.bufferData(Dt.type,Wt,zt)}function Ot(Dt,Wt,zt,Ht,Ne,ot){if(Dt.usage=zt,Array.isArray(Wt)){if(Dt.dtype=Ht||5126,0<Wt.length)if(Array.isArray(Wt[0])){Ne=ve(Wt);for(var yt=Ht=1;yt<Ne.length;++yt)Ht*=Ne[yt];Dt.dimension=Ht,pt(Dt,Wt=Fe(Wt,Ne,Dt.dtype),zt),ot?Dt.persistentData=Wt:de.freeType(Wt)}else"number"==typeof Wt[0]?(Dt.dimension=Ne,s(Ne=de.allocType(Dt.dtype,Wt.length),Wt),pt(Dt,Ne,zt),ot?Dt.persistentData=Ne:de.freeType(Ne)):be(Wt[0])&&(Dt.dimension=Wt[0].length,Dt.dtype=Ht||h(Wt[0])||5126,pt(Dt,Wt=Fe(Wt,[Wt.length,Wt[0].length],Dt.dtype),zt),ot?Dt.persistentData=Wt:de.freeType(Wt))}else if(be(Wt))Dt.dtype=Ht||h(Wt),Dt.dimension=Ne,pt(Dt,Wt,zt),ot&&(Dt.persistentData=new Uint8Array(new Uint8Array(Wt.buffer)));else if(r(Wt)){var It=Wt.stride,Vt=(yt=Wt.offset,0),ln=0,un=0,an=0;1===(Ne=Wt.shape).length?(Vt=Ne[0],ln=1,un=It[0],an=0):2===Ne.length&&(Vt=Ne[0],ln=Ne[1],un=It[0],an=It[1]),Dt.dtype=Ht||h(Wt.data)||5126,Dt.dimension=ln,d(Ne=de.allocType(Dt.dtype,Vt*ln),Wt.data,Vt,ln,un,an,yt),pt(Dt,Ne,zt),ot?Dt.persistentData=Ne:de.freeType(Ne)}else Wt instanceof ArrayBuffer&&(Dt.dtype=5121,Dt.dimension=Ne,pt(Dt,Wt,zt),ot&&(Dt.persistentData=new Uint8Array(new Uint8Array(Wt))))}function Pt(Dt){je.bufferCount--,ft(Dt),Le.deleteBuffer(Dt.buffer),Dt.buffer=null,delete $t[Dt.id]}var Jt=0,$t={};mt.prototype.bind=function(){Le.bindBuffer(this.type,this.buffer)},mt.prototype.destroy=function(){Pt(this)};var ut=[];return Ke.profile&&(je.getTotalBufferSize=function(){var Dt=0;return Object.keys($t).forEach(function(Wt){Dt+=$t[Wt].stats.size}),Dt}),{create:function(Dt,Wt,zt,Ht){function Ne(yt){var It=35044,Vt=null,ln=0,un=0,an=1;return Array.isArray(yt)||be(yt)||r(yt)||yt instanceof ArrayBuffer?Vt=yt:"number"==typeof yt?ln=0|yt:yt&&("data"in yt&&(Vt=yt.data),"usage"in yt&&(It=Se[yt.usage]),"type"in yt&&(un=De[yt.type]),"dimension"in yt&&(an=0|yt.dimension),"length"in yt&&(ln=0|yt.length)),ot.bind(),Vt?Ot(ot,Vt,It,un,an,Ht):(ln&&Le.bufferData(ot.type,ln,It),ot.dtype=un||5121,ot.usage=It,ot.dimension=an,ot.byteLength=ln),Ke.profile&&(ot.stats.size=ot.byteLength*Te[ot.dtype]),Ne}je.bufferCount++;var ot=new mt(Wt);return $t[ot.id]=ot,zt||Ne(Dt),Ne._reglType="buffer",Ne._buffer=ot,Ne.subdata=function(yt,It){var Vt,ln=0|(It||0);if(ot.bind(),be(yt)||yt instanceof ArrayBuffer)Le.bufferSubData(ot.type,ln,yt);else if(Array.isArray(yt)){if(0<yt.length)if("number"==typeof yt[0]){var un=de.allocType(ot.dtype,yt.length);s(un,yt),Le.bufferSubData(ot.type,ln,un),de.freeType(un)}else(Array.isArray(yt[0])||be(yt[0]))&&(Vt=ve(yt),un=Fe(yt,Vt,ot.dtype),Le.bufferSubData(ot.type,ln,un),de.freeType(un))}else if(r(yt)){var an=yt.stride,wn=un=0,Zn=0,An=0;1===(Vt=yt.shape).length?(un=Vt[0],wn=1,Zn=an[0],An=0):2===Vt.length&&(un=Vt[0],wn=Vt[1],Zn=an[0],An=an[1]),Vt=Array.isArray(yt.data)?ot.dtype:h(yt.data),d(Vt=de.allocType(Vt,un*wn),yt.data,un,wn,Zn,An,yt.offset),Le.bufferSubData(ot.type,ln,Vt),de.freeType(Vt)}return Ne},Ke.profile&&(Ne.stats=ot.stats),Ne.destroy=function(){Pt(ot)},Ne},createStream:function(Dt,Wt){var zt=ut.pop();return zt||(zt=new mt(Dt)),zt.bind(),Ot(zt,Wt,35040,0,1,!1),zt},destroyStream:function(Dt){ut.push(Dt)},clear:function(){me($t).forEach(Pt),ut.forEach(Pt)},getBuffer:function(Dt){return Dt&&Dt._buffer instanceof mt?Dt._buffer:null},restore:function(){me($t).forEach(function(Dt){Dt.buffer=Le.createBuffer(),Le.bindBuffer(Dt.type,Dt.buffer),Le.bufferData(Dt.type,Dt.persistentData||Dt.byteLength,Dt.usage)})},_initBuffer:Ot}}(zt,yt,Le,function(Fn){return xn.destroyBuffer(Fn)}),pn=function c(Le,je,Ke,ft){function mt(Dt){this.id=Jt++,Pt[this.id]=this,this.buffer=Dt,this.primType=4,this.type=this.vertCount=0}function pt(Dt,Wt,zt,Ht,Ne,ot,yt){var It;if(Dt.buffer.bind(),Wt?((It=yt)||be(Wt)&&(!r(Wt)||be(Wt.data))||(It=je.oes_element_index_uint?5125:5123),Ke._initBuffer(Dt.buffer,Wt,zt,It,3)):(Le.bufferData(34963,ot,zt),Dt.buffer.dtype=It||5121,Dt.buffer.usage=zt,Dt.buffer.dimension=3,Dt.buffer.byteLength=ot),It=yt,!yt){switch(Dt.buffer.dtype){case 5121:case 5120:It=5121;break;case 5123:case 5122:It=5123;break;case 5125:case 5124:It=5125}Dt.buffer.dtype=It}Dt.type=It,0>(Wt=Ne)&&(Wt=Dt.buffer.byteLength,5123===It?Wt>>=1:5125===It&&(Wt>>=2)),Dt.vertCount=Wt,Wt=Ht,0>Ht&&(Wt=4,1===(Ht=Dt.buffer.dimension)&&(Wt=0),2===Ht&&(Wt=1),3===Ht&&(Wt=4)),Dt.primType=Wt}function Ot(Dt){ft.elementsCount--,delete Pt[Dt.id],Dt.buffer.destroy(),Dt.buffer=null}var Pt={},Jt=0,$t={uint8:5121,uint16:5123};je.oes_element_index_uint&&($t.uint32=5125),mt.prototype.bind=function(){this.buffer.bind()};var ut=[];return{create:function(Dt,Wt){function zt(ot){if(ot)if("number"==typeof ot)Ht(ot),Ne.primType=4,Ne.vertCount=0|ot,Ne.type=5121;else{var yt=null,It=35044,Vt=-1,ln=-1,un=0,an=0;Array.isArray(ot)||be(ot)||r(ot)?yt=ot:("data"in ot&&(yt=ot.data),"usage"in ot&&(It=Se[ot.usage]),"primitive"in ot&&(Vt=Ie[ot.primitive]),"count"in ot&&(ln=0|ot.count),"type"in ot&&(an=$t[ot.type]),"length"in ot?un=0|ot.length:(un=ln,5123===an||5122===an?un*=2:5125!==an&&5124!==an||(un*=4))),pt(Ne,yt,It,Vt,ln,un,an)}else Ht(),Ne.primType=4,Ne.vertCount=0,Ne.type=5121;return zt}var Ht=Ke.create(null,34963,!0),Ne=new mt(Ht._buffer);return ft.elementsCount++,zt(Dt),zt._reglType="elements",zt._elements=Ne,zt.subdata=function(ot,yt){return Ht.subdata(ot,yt),zt},zt.destroy=function(){Ot(Ne)},zt},createStream:function(Dt){var Wt=ut.pop();return Wt||(Wt=new mt(Ke.create(null,34963,!0,!1)._buffer)),pt(Wt,Dt,35040,-1,-1,0,0),Wt},destroyStream:function(Dt){ut.push(Dt)},getElements:function(Dt){return"function"==typeof Dt&&Dt._elements instanceof mt?Dt._elements:null},clear:function(){me(Pt).forEach(Ot)}}}(zt,Vt,hn,yt),xn=function R(Le,je,Ke,ft,mt,pt,Ot){function Pt(){this.id=++ut,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var zt=je.oes_vertex_array_object;this.vao=zt?zt.createVertexArrayOES():null,Dt[this.id]=this,this.buffers=[]}var Jt=Ke.maxAttributes,$t=Array(Jt);for(Ke=0;Ke<Jt;++Ke)$t[Ke]=new F;var ut=0,Dt={},Wt={Record:F,scope:{},state:$t,currentVAO:null,targetVAO:null,restore:je.oes_vertex_array_object?function(){je.oes_vertex_array_object&&me(Dt).forEach(function(zt){zt.refresh()})}:function(){},createVAO:function(zt){function Ht(ot){var yt;Array.isArray(ot)?(yt=ot,Ne.elements&&Ne.ownsElements&&Ne.elements.destroy(),Ne.elements=null,Ne.ownsElements=!1,Ne.offset=0,Ne.count=0,Ne.instances=-1,Ne.primitive=4):(ot.elements?(yt=ot.elements,Ne.ownsElements?("function"==typeof yt&&"elements"===yt._reglType?Ne.elements.destroy():Ne.elements(yt),Ne.ownsElements=!1):pt.getElements(ot.elements)?(Ne.elements=ot.elements,Ne.ownsElements=!1):(Ne.elements=pt.create(ot.elements),Ne.ownsElements=!0)):(Ne.elements=null,Ne.ownsElements=!1),yt=ot.attributes,Ne.offset=0,Ne.count=-1,Ne.instances=-1,Ne.primitive=4,Ne.elements&&(Ne.count=Ne.elements._elements.vertCount,Ne.primitive=Ne.elements._elements.primType),"offset"in ot&&(Ne.offset=0|ot.offset),"count"in ot&&(Ne.count=0|ot.count),"instances"in ot&&(Ne.instances=0|ot.instances),"primitive"in ot&&(Ne.primitive=Ie[ot.primitive])),ot={};var It=Ne.attributes;It.length=yt.length;for(var Vt=0;Vt<yt.length;++Vt){var ln,un=yt[Vt],an=It[Vt]=new F,wn=un.data||un;Array.isArray(wn)||be(wn)||r(wn)?(Ne.buffers[Vt]&&(ln=Ne.buffers[Vt],be(wn)&&ln._buffer.byteLength>=wn.byteLength?ln.subdata(wn):(ln.destroy(),Ne.buffers[Vt]=null)),Ne.buffers[Vt]||(ln=Ne.buffers[Vt]=mt.create(un,34962,!1,!0)),an.buffer=mt.getBuffer(ln),an.size=0|an.buffer.dimension,an.normalized=!1,an.type=an.buffer.dtype,an.offset=0,an.stride=0,an.divisor=0,an.state=1,ot[Vt]=1):mt.getBuffer(un)?(an.buffer=mt.getBuffer(un),an.size=0|an.buffer.dimension,an.normalized=!1,an.type=an.buffer.dtype,an.offset=0,an.stride=0,an.divisor=0,an.state=1):mt.getBuffer(un.buffer)?(an.buffer=mt.getBuffer(un.buffer),an.size=0|(+un.size||an.buffer.dimension),an.normalized=!!un.normalized||!1,an.type="type"in un?De[un.type]:an.buffer.dtype,an.offset=0|(un.offset||0),an.stride=0|(un.stride||0),an.divisor=0|(un.divisor||0),an.state=1):"x"in un&&(an.x=+un.x||0,an.y=+un.y||0,an.z=+un.z||0,an.w=+un.w||0,an.state=2)}for(ln=0;ln<Ne.buffers.length;++ln)!ot[ln]&&Ne.buffers[ln]&&(Ne.buffers[ln].destroy(),Ne.buffers[ln]=null);return Ne.refresh(),Ht}var Ne=new Pt;return ft.vaoCount+=1,Ht.destroy=function(){for(var ot=0;ot<Ne.buffers.length;++ot)Ne.buffers[ot]&&Ne.buffers[ot].destroy();Ne.buffers.length=0,Ne.ownsElements&&(Ne.elements.destroy(),Ne.elements=null,Ne.ownsElements=!1),Ne.destroy()},Ht._vao=Ne,Ht._reglType="vao",Ht(zt)},getVAO:function(zt){return"function"==typeof zt&&zt._vao?zt._vao:null},destroyBuffer:function(zt){for(var Ht=0;Ht<$t.length;++Ht){var Ne=$t[Ht];Ne.buffer===zt&&(Le.disableVertexAttribArray(Ht),Ne.buffer=null)}},setVAO:je.oes_vertex_array_object?function(zt){zt!==Wt.currentVAO&&(je.oes_vertex_array_object.bindVertexArrayOES(zt?zt.vao:null),Wt.currentVAO=zt)}:function(zt){if(zt!==Wt.currentVAO){if(zt)zt.bindAttrs();else{for(var Ht=je.angle_instanced_arrays,Ne=0;Ne<$t.length;++Ne){var ot=$t[Ne];ot.buffer?(Le.enableVertexAttribArray(Ne),ot.buffer.bind(),Le.vertexAttribPointer(Ne,ot.size,ot.type,ot.normalized,ot.stride,ot.offfset),Ht&&ot.divisor&&Ht.vertexAttribDivisorANGLE(Ne,ot.divisor)):(Le.disableVertexAttribArray(Ne),Le.vertexAttrib4f(Ne,ot.x,ot.y,ot.z,ot.w))}Le.bindBuffer(34963,Ot.elements?Ot.elements.buffer.buffer:null)}Wt.currentVAO=zt}},clear:je.oes_vertex_array_object?function(){me(Dt).forEach(function(zt){zt.destroy()})}:function(){}};return Pt.prototype.bindAttrs=function(){for(var zt=je.angle_instanced_arrays,Ht=this.attributes,Ne=0;Ne<Ht.length;++Ne){var ot=Ht[Ne];ot.buffer?(Le.enableVertexAttribArray(Ne),Le.bindBuffer(34962,ot.buffer.buffer),Le.vertexAttribPointer(Ne,ot.size,ot.type,ot.normalized,ot.stride,ot.offset),zt&&ot.divisor&&zt.vertexAttribDivisorANGLE(Ne,ot.divisor)):(Le.disableVertexAttribArray(Ne),Le.vertexAttrib4f(Ne,ot.x,ot.y,ot.z,ot.w))}for(zt=Ht.length;zt<Jt;++zt)Le.disableVertexAttribArray(zt);(zt=pt.getElements(this.elements))?Le.bindBuffer(34963,zt.buffer.buffer):Le.bindBuffer(34963,null)},Pt.prototype.refresh=function(){var zt=je.oes_vertex_array_object;zt&&(zt.bindVertexArrayOES(this.vao),this.bindAttrs(),Wt.currentVAO=null,zt.bindVertexArrayOES(null))},Pt.prototype.destroy=function(){if(this.vao){var zt=je.oes_vertex_array_object;this===Wt.currentVAO&&(Wt.currentVAO=null,zt.bindVertexArrayOES(null)),zt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Dt[this.id]&&(delete Dt[this.id],--ft.vaoCount)},Wt}(zt,Vt,An,yt,hn,pn,an),En=function L(Le,je,Ke,ft){function mt(Ht,Ne,ot,yt){this.name=Ht,this.id=Ne,this.location=ot,this.info=yt}function pt(Ht,Ne){for(var ot=0;ot<Ht.length;++ot)if(Ht[ot].id===Ne.id)return void(Ht[ot].location=Ne.location);Ht.push(Ne)}function Ot(Ht,Ne,ot){if(!(It=(ot=35632===Ht?$t:ut)[Ne])){var yt=je.str(Ne),It=Le.createShader(Ht);Le.shaderSource(It,yt),Le.compileShader(It),ot[Ne]=It}return It}function Pt(Ht,Ne){this.id=zt++,this.fragId=Ht,this.vertId=Ne,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ft.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Jt(Ht,Ne,ot){var yt;yt=Ot(35632,Ht.fragId);var It=Ot(35633,Ht.vertId);if(Ne=Ht.program=Le.createProgram(),Le.attachShader(Ne,yt),Le.attachShader(Ne,It),ot)for(yt=0;yt<ot.length;++yt)Le.bindAttribLocation(Ne,(It=ot[yt])[0],It[1]);Le.linkProgram(Ne),It=Le.getProgramParameter(Ne,35718),ft.profile&&(Ht.stats.uniformsCount=It);var Vt=Ht.uniforms;for(yt=0;yt<It;++yt)if(ot=Le.getActiveUniform(Ne,yt))if(1<ot.size)for(var ln=0;ln<ot.size;++ln){var un=ot.name.replace("[0]","["+ln+"]");pt(Vt,new mt(un,je.id(un),Le.getUniformLocation(Ne,un),ot))}else pt(Vt,new mt(ot.name,je.id(ot.name),Le.getUniformLocation(Ne,ot.name),ot));for(It=Le.getProgramParameter(Ne,35721),ft.profile&&(Ht.stats.attributesCount=It),Ht=Ht.attributes,yt=0;yt<It;++yt)(ot=Le.getActiveAttrib(Ne,yt))&&pt(Ht,new mt(ot.name,je.id(ot.name),Le.getAttribLocation(Ne,ot.name),ot))}var $t={},ut={},Dt={},Wt=[],zt=0;return ft.profile&&(Ke.getMaxUniformsCount=function(){var Ht=0;return Wt.forEach(function(Ne){Ne.stats.uniformsCount>Ht&&(Ht=Ne.stats.uniformsCount)}),Ht},Ke.getMaxAttributesCount=function(){var Ht=0;return Wt.forEach(function(Ne){Ne.stats.attributesCount>Ht&&(Ht=Ne.stats.attributesCount)}),Ht}),{clear:function(){var Ht=Le.deleteShader.bind(Le);me($t).forEach(Ht),$t={},me(ut).forEach(Ht),ut={},Wt.forEach(function(Ne){Le.deleteProgram(Ne.program)}),Wt.length=0,Dt={},Ke.shaderCount=0},program:function(Ht,Ne,ot,yt){var It=Dt[Ne];It||(It=Dt[Ne]={});var Vt=It[Ht];if(Vt&&(Vt.refCount++,!yt))return Vt;var ln=new Pt(Ne,Ht);return Ke.shaderCount++,Jt(ln,ot,yt),Vt||(It[Ht]=ln),Wt.push(ln),G(ln,{destroy:function(){if(ln.refCount--,0>=ln.refCount){Le.deleteProgram(ln.program);var un=Wt.indexOf(ln);Wt.splice(un,1),Ke.shaderCount--}0>=It[ln.vertId].refCount&&(Le.deleteShader(ut[ln.vertId]),delete ut[ln.vertId],delete Dt[ln.fragId][ln.vertId]),Object.keys(Dt[ln.fragId]).length||(Le.deleteShader($t[ln.fragId]),delete $t[ln.fragId],delete Dt[ln.fragId])}})},restore:function(){$t={},ut={};for(var Ht=0;Ht<Wt.length;++Ht)Jt(Wt[Ht],null,Wt[Ht].attributes.map(function(Ne){return[Ne.location,Ne.name]}))},shader:Ot,frag:-1,vert:-1}}(zt,ot,yt,Le),In=function P(Le,je,Ke,ft,mt,pt,Ot){function Pt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Jt(Tn,tr){Tn.internalformat=tr.internalformat,Tn.format=tr.format,Tn.type=tr.type,Tn.compressed=tr.compressed,Tn.premultiplyAlpha=tr.premultiplyAlpha,Tn.flipY=tr.flipY,Tn.unpackAlignment=tr.unpackAlignment,Tn.colorSpace=tr.colorSpace,Tn.width=tr.width,Tn.height=tr.height,Tn.channels=tr.channels}function $t(Tn,tr){if("object"==typeof tr&&tr){"premultiplyAlpha"in tr&&(Tn.premultiplyAlpha=tr.premultiplyAlpha),"flipY"in tr&&(Tn.flipY=tr.flipY),"alignment"in tr&&(Tn.unpackAlignment=tr.alignment),"colorSpace"in tr&&(Tn.colorSpace=sr[tr.colorSpace]),"type"in tr&&(Tn.type=Ar[tr.type]);var Zt=Tn.width,yn=Tn.height,Cn=Tn.channels,rr=!1;"shape"in tr?(Zt=tr.shape[0],yn=tr.shape[1],3===tr.shape.length&&(Cn=tr.shape[2],rr=!0)):("radius"in tr&&(Zt=yn=tr.radius),"width"in tr&&(Zt=tr.width),"height"in tr&&(yn=tr.height),"channels"in tr&&(Cn=tr.channels,rr=!0)),Tn.width=0|Zt,Tn.height=0|yn,Tn.channels=0|Cn,Zt=!1,"format"in tr&&(yn=Tn.internalformat=yr[Zt=tr.format],Tn.format=xr[yn],Zt in Ar&&!("type"in tr)&&(Tn.type=Ar[Zt]),Zt in Pr&&(Tn.compressed=!0),Zt=!0),!rr&&Zt?Tn.channels=Xe[Tn.format]:rr&&!Zt&&Tn.channels!==qe[Tn.format]&&(Tn.format=Tn.internalformat=qe[Tn.channels])}}function ut(Tn){Le.pixelStorei(37440,Tn.flipY),Le.pixelStorei(37441,Tn.premultiplyAlpha),Le.pixelStorei(37443,Tn.colorSpace),Le.pixelStorei(3317,Tn.unpackAlignment)}function Dt(){Pt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Wt(Tn,tr){var Zt=null;if(M(tr)?Zt=tr:tr&&($t(Tn,tr),"x"in tr&&(Tn.xOffset=0|tr.x),"y"in tr&&(Tn.yOffset=0|tr.y),M(tr.data)&&(Zt=tr.data)),tr.copy){var yn=mt.viewportWidth,Cn=mt.viewportHeight;Tn.width=Tn.width||yn-Tn.xOffset,Tn.height=Tn.height||Cn-Tn.yOffset,Tn.needsCopy=!0}else if(Zt){if(be(Zt))Tn.channels=Tn.channels||4,Tn.data=Zt,"type"in tr||5121!==Tn.type||(Tn.type=0|Ee[Object.prototype.toString.call(Zt)]);else if(w(Zt)){switch(Tn.channels=Tn.channels||4,Cn=(yn=Zt).length,Tn.type){case 5121:case 5123:case 5125:case 5126:(Cn=de.allocType(Tn.type,Cn)).set(yn),Tn.data=Cn;break;case 36193:Tn.data=g(yn)}Tn.alignment=1,Tn.needsFree=!0}else if(r(Zt)){yn=Zt.data,Array.isArray(yn)||5121!==Tn.type||(Tn.type=0|Ee[Object.prototype.toString.call(yn)]);var rr,Qn,Jn,Wn,On=Zt.stride;3===(Cn=Zt.shape).length?(Jn=Cn[2],Wn=On[2]):Wn=Jn=1,rr=Cn[0],Qn=Cn[1],Cn=On[0],On=On[1],Tn.alignment=1,Tn.width=rr,Tn.height=Qn,Tn.channels=Jn,Tn.format=Tn.internalformat=qe[Jn],Tn.needsFree=!0,rr=Wn,Zt=Zt.offset;for(var zn=de.allocType(36193===Tn.type?5126:Tn.type,(Jn=Tn.width)*(Wn=Tn.height)*(Qn=Tn.channels)),Rn=0,Gn=0;Gn<Wn;++Gn)for(var fr=0;fr<Jn;++fr)for(var ur=0;ur<Qn;++ur)zn[Rn++]=yn[Cn*fr+On*Gn+rr*ur+Zt];k(Tn,zn)}else if(A(Zt)===st||A(Zt)===He||A(Zt)===$e)Tn.element=A(Zt)===st||A(Zt)===He?Zt:Zt.canvas,Tn.width=Tn.element.width,Tn.height=Tn.element.height,Tn.channels=4;else if(A(Zt)===et)Tn.element=Zt,Tn.width=Zt.width,Tn.height=Zt.height,Tn.channels=4;else if(A(Zt)===tt)Tn.element=Zt,Tn.width=Zt.naturalWidth,Tn.height=Zt.naturalHeight,Tn.channels=4;else if(A(Zt)===ct)Tn.element=Zt,Tn.width=Zt.videoWidth,Tn.height=Zt.videoHeight,Tn.channels=4;else if(f(Zt)){for(yn=Tn.width||Zt[0].length,Cn=Tn.height||Zt.length,On=Tn.channels,On=m(Zt[0][0])?On||Zt[0][0].length:On||1,rr=_e.shape(Zt),Jn=1,Wn=0;Wn<rr.length;++Wn)Jn*=rr[Wn];Jn=de.allocType(36193===Tn.type?5126:Tn.type,Jn),_e.flatten(Zt,rr,"",Jn),k(Tn,Jn),Tn.alignment=1,Tn.width=yn,Tn.height=Cn,Tn.channels=On,Tn.format=Tn.internalformat=qe[On],Tn.needsFree=!0}}else Tn.width=Tn.width||1,Tn.height=Tn.height||1,Tn.channels=Tn.channels||4}function zt(Tn,tr,Zt,yn,Cn){var rr=Tn.element,Qn=Tn.data,Jn=Tn.internalformat,Wn=Tn.format,On=Tn.type,zn=Tn.width,Rn=Tn.height;ut(Tn),rr?Le.texSubImage2D(tr,Cn,Zt,yn,Wn,On,rr):Tn.compressed?Le.compressedTexSubImage2D(tr,Cn,Zt,yn,Jn,zn,Rn,Qn):Tn.needsCopy?(ft(),Le.copyTexSubImage2D(tr,Cn,Zt,yn,Tn.xOffset,Tn.yOffset,zn,Rn)):Le.texSubImage2D(tr,Cn,Zt,yn,zn,Rn,Wn,On,Qn)}function Ht(){return Kn.pop()||new Dt}function Ne(Tn){Tn.needsFree&&de.freeType(Tn.data),Dt.call(Tn),Kn.push(Tn)}function ot(){Pt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function yt(Tn,tr,Zt){var yn=Tn.images[0]=Ht();Tn.mipmask=1,yn.width=Tn.width=tr,yn.height=Tn.height=Zt,yn.channels=Tn.channels=4}function It(Tn,tr){var Zt=null;if(M(tr))Jt(Zt=Tn.images[0]=Ht(),Tn),Wt(Zt,tr),Tn.mipmask=1;else if($t(Tn,tr),Array.isArray(tr.mipmap))for(var yn=tr.mipmap,Cn=0;Cn<yn.length;++Cn)Jt(Zt=Tn.images[Cn]=Ht(),Tn),Zt.width>>=Cn,Zt.height>>=Cn,Wt(Zt,yn[Cn]),Tn.mipmask|=1<<Cn;else Jt(Zt=Tn.images[0]=Ht(),Tn),Wt(Zt,tr),Tn.mipmask=1;Jt(Tn,Tn.images[0])}function Vt(Tn,tr){for(var Zt=Tn.images,yn=0;yn<Zt.length&&Zt[yn];++yn){var Cn=Zt[yn],rr=tr,Qn=yn,Jn=Cn.element,Wn=Cn.data,On=Cn.internalformat,zn=Cn.format,Rn=Cn.type,Gn=Cn.width,fr=Cn.height;ut(Cn),Jn?Le.texImage2D(rr,Qn,zn,zn,Rn,Jn):Cn.compressed?Le.compressedTexImage2D(rr,Qn,On,Gn,fr,0,Wn):Cn.needsCopy?(ft(),Le.copyTexImage2D(rr,Qn,zn,Cn.xOffset,Cn.yOffset,Gn,fr,0)):Le.texImage2D(rr,Qn,zn,Gn,fr,0,zn,Rn,Wn||null)}}function ln(){var Tn=Qr.pop()||new ot;Pt.call(Tn);for(var tr=Tn.mipmask=0;16>tr;++tr)Tn.images[tr]=null;return Tn}function un(Tn){for(var tr=Tn.images,Zt=0;Zt<tr.length;++Zt)tr[Zt]&&Ne(tr[Zt]),tr[Zt]=null;Qr.push(Tn)}function an(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function wn(Tn,tr){"min"in tr&&(Tn.minFilter=nr[tr.min],0<=Ue.indexOf(Tn.minFilter)&&!("faces"in tr)&&(Tn.genMipmaps=!0)),"mag"in tr&&(Tn.magFilter=Yn[tr.mag]);var Zt=Tn.wrapS,yn=Tn.wrapT;if("wrap"in tr){var Cn=tr.wrap;"string"==typeof Cn?Zt=yn=In[Cn]:Array.isArray(Cn)&&(Zt=In[Cn[0]],yn=In[Cn[1]])}else"wrapS"in tr&&(Zt=In[tr.wrapS]),"wrapT"in tr&&(yn=In[tr.wrapT]);if(Tn.wrapS=Zt,Tn.wrapT=yn,"anisotropic"in tr&&(Tn.anisotropic=tr.anisotropic),"mipmap"in tr){switch(Zt=!1,typeof tr.mipmap){case"string":Tn.mipmapHint=En[tr.mipmap],Zt=Tn.genMipmaps=!0;break;case"boolean":Zt=Tn.genMipmaps=tr.mipmap;break;case"object":Tn.genMipmaps=!1,Zt=!0}!Zt||"min"in tr||(Tn.minFilter=9984)}}function Zn(Tn,tr){Le.texParameteri(tr,10241,Tn.minFilter),Le.texParameteri(tr,10240,Tn.magFilter),Le.texParameteri(tr,10242,Tn.wrapS),Le.texParameteri(tr,10243,Tn.wrapT),je.ext_texture_filter_anisotropic&&Le.texParameteri(tr,34046,Tn.anisotropic),Tn.genMipmaps&&(Le.hint(33170,Tn.mipmapHint),Le.generateMipmap(tr))}function An(Tn){Pt.call(this),this.mipmask=0,this.internalformat=6408,this.id=ci++,this.refCount=1,this.target=Tn,this.texture=Le.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new an,Ot.profile&&(this.stats={size:0})}function hn(Tn){Le.activeTexture(33984),Le.bindTexture(Tn.target,Tn.texture)}function pn(){var Tn=di[0];Tn?Le.bindTexture(Tn.target,Tn.texture):Le.bindTexture(3553,null)}function xn(Tn){var tr=Tn.texture,Zt=Tn.unit,yn=Tn.target;0<=Zt&&(Le.activeTexture(33984+Zt),Le.bindTexture(yn,null),di[Zt]=null),Le.deleteTexture(tr),Tn.texture=null,Tn.params=null,Tn.pixels=null,Tn.refCount=0,delete Or[Tn.id],pt.textureCount--}var En={"don't care":4352,"dont care":4352,nice:4354,fast:4353},In={repeat:10497,clamp:33071,mirror:33648},Yn={nearest:9728,linear:9729},nr=G({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Yn),sr={none:0,browser:37444},Ar={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},yr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pr={};je.ext_srgb&&(yr.srgb=35904,yr.srgba=35906),je.oes_texture_float&&(Ar.float32=Ar.float=5126),je.oes_texture_half_float&&(Ar.float16=Ar["half float"]=36193),je.webgl_depth_texture&&(G(yr,{depth:6402,"depth stencil":34041}),G(Ar,{uint16:5123,uint32:5125,"depth stencil":34042})),je.webgl_compressed_texture_s3tc&&G(Pr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),je.webgl_compressed_texture_atc&&G(Pr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),je.webgl_compressed_texture_pvrtc&&G(Pr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),je.webgl_compressed_texture_etc1&&(Pr["rgb etc1"]=36196);var Wr=Array.prototype.slice.call(Le.getParameter(34467));Object.keys(Pr).forEach(function(Tn){var tr=Pr[Tn];0<=Wr.indexOf(tr)&&(yr[Tn]=tr)});var lr=Object.keys(yr);Ke.textureFormats=lr;var Hn=[];Object.keys(yr).forEach(function(Tn){Hn[yr[Tn]]=Tn});var Sr=[];Object.keys(Ar).forEach(function(Tn){Sr[Ar[Tn]]=Tn});var ti=[];Object.keys(Yn).forEach(function(Tn){ti[Yn[Tn]]=Tn});var Fn=[];Object.keys(nr).forEach(function(Tn){Fn[nr[Tn]]=Tn});var br=[];Object.keys(In).forEach(function(Tn){br[In[Tn]]=Tn});var xr=lr.reduce(function(Tn,tr){var Zt=yr[tr];return Tn[Zt]=6409===Zt||6406===Zt||6409===Zt||6410===Zt||6402===Zt||34041===Zt||je.ext_srgb&&(35904===Zt||35906===Zt)?Zt:32855===Zt||0<=tr.indexOf("rgba")?6408:6407,Tn},{}),Kn=[],Qr=[],ci=0,Or={},li=Ke.maxTextureUnits,di=Array(li).map(function(){return null});return G(An.prototype,{bind:function(){this.bindCount+=1;var Tn=this.unit;if(0>Tn){for(var tr=0;tr<li;++tr){var Zt=di[tr];if(Zt){if(0<Zt.bindCount)continue;Zt.unit=-1}di[tr]=this,Tn=tr;break}Ot.profile&&pt.maxTextureUnits<Tn+1&&(pt.maxTextureUnits=Tn+1),this.unit=Tn,Le.activeTexture(33984+Tn),Le.bindTexture(this.target,this.texture)}return Tn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&xn(this)}}),Ot.profile&&(pt.getTotalTextureSize=function(){var Tn=0;return Object.keys(Or).forEach(function(tr){Tn+=Or[tr].stats.size}),Tn}),{create2D:function(Tn,tr){function Zt(Cn,rr){var Qn=yn.texInfo;an.call(Qn);var Jn=ln();return"number"==typeof Cn?yt(Jn,0|Cn,"number"==typeof rr?0|rr:0|Cn):Cn?(wn(Qn,Cn),It(Jn,Cn)):yt(Jn,1,1),Qn.genMipmaps&&(Jn.mipmask=(Jn.width<<1)-1),yn.mipmask=Jn.mipmask,Jt(yn,Jn),yn.internalformat=Jn.internalformat,Zt.width=Jn.width,Zt.height=Jn.height,hn(yn),Vt(Jn,3553),Zn(Qn,3553),pn(),un(Jn),Ot.profile&&(yn.stats.size=E(yn.internalformat,yn.type,Jn.width,Jn.height,Qn.genMipmaps,!1)),Zt.format=Hn[yn.internalformat],Zt.type=Sr[yn.type],Zt.mag=ti[Qn.magFilter],Zt.min=Fn[Qn.minFilter],Zt.wrapS=br[Qn.wrapS],Zt.wrapT=br[Qn.wrapT],Zt}var yn=new An(3553);return Or[yn.id]=yn,pt.textureCount++,Zt(Tn,tr),Zt.subimage=function(Cn,rr,Qn,Jn){rr|=0,Qn|=0,Jn|=0;var Wn=Ht();return Jt(Wn,yn),Wn.width=0,Wn.height=0,Wt(Wn,Cn),Wn.width=Wn.width||(yn.width>>Jn)-rr,Wn.height=Wn.height||(yn.height>>Jn)-Qn,hn(yn),zt(Wn,3553,rr,Qn,Jn),pn(),Ne(Wn),Zt},Zt.resize=function(Cn,rr){var Qn=0|Cn,Jn=0|rr||Qn;if(Qn===yn.width&&Jn===yn.height)return Zt;Zt.width=yn.width=Qn,Zt.height=yn.height=Jn,hn(yn);for(var Wn=0;yn.mipmask>>Wn;++Wn){var On=Qn>>Wn,zn=Jn>>Wn;if(!On||!zn)break;Le.texImage2D(3553,Wn,yn.format,On,zn,0,yn.format,yn.type,null)}return pn(),Ot.profile&&(yn.stats.size=E(yn.internalformat,yn.type,Qn,Jn,!1,!1)),Zt},Zt._reglType="texture2d",Zt._texture=yn,Ot.profile&&(Zt.stats=yn.stats),Zt.destroy=function(){yn.decRef()},Zt},createCube:function(Tn,tr,Zt,yn,Cn,rr){function Qn(On,zn,Rn,Gn,fr,ur){var Mr,vr=Jn.texInfo;for(an.call(vr),Mr=0;6>Mr;++Mr)Wn[Mr]=ln();if("number"!=typeof On&&On){if("object"==typeof On)if(zn)It(Wn[0],On),It(Wn[1],zn),It(Wn[2],Rn),It(Wn[3],Gn),It(Wn[4],fr),It(Wn[5],ur);else if(wn(vr,On),$t(Jn,On),"faces"in On)for(On=On.faces,Mr=0;6>Mr;++Mr)Jt(Wn[Mr],Jn),It(Wn[Mr],On[Mr]);else for(Mr=0;6>Mr;++Mr)It(Wn[Mr],On)}else for(On=0|On||1,Mr=0;6>Mr;++Mr)yt(Wn[Mr],On,On);for(Jt(Jn,Wn[0]),Jn.mipmask=vr.genMipmaps?(Wn[0].width<<1)-1:Wn[0].mipmask,Jn.internalformat=Wn[0].internalformat,Qn.width=Wn[0].width,Qn.height=Wn[0].height,hn(Jn),Mr=0;6>Mr;++Mr)Vt(Wn[Mr],34069+Mr);for(Zn(vr,34067),pn(),Ot.profile&&(Jn.stats.size=E(Jn.internalformat,Jn.type,Qn.width,Qn.height,vr.genMipmaps,!0)),Qn.format=Hn[Jn.internalformat],Qn.type=Sr[Jn.type],Qn.mag=ti[vr.magFilter],Qn.min=Fn[vr.minFilter],Qn.wrapS=br[vr.wrapS],Qn.wrapT=br[vr.wrapT],Mr=0;6>Mr;++Mr)un(Wn[Mr]);return Qn}var Jn=new An(34067);Or[Jn.id]=Jn,pt.cubeCount++;var Wn=Array(6);return Qn(Tn,tr,Zt,yn,Cn,rr),Qn.subimage=function(On,zn,Rn,Gn,fr){Rn|=0,Gn|=0,fr|=0;var ur=Ht();return Jt(ur,Jn),ur.width=0,ur.height=0,Wt(ur,zn),ur.width=ur.width||(Jn.width>>fr)-Rn,ur.height=ur.height||(Jn.height>>fr)-Gn,hn(Jn),zt(ur,34069+On,Rn,Gn,fr),pn(),Ne(ur),Qn},Qn.resize=function(On){if((On|=0)!==Jn.width){Qn.width=Jn.width=On,Qn.height=Jn.height=On,hn(Jn);for(var zn=0;6>zn;++zn)for(var Rn=0;Jn.mipmask>>Rn;++Rn)Le.texImage2D(34069+zn,Rn,Jn.format,On>>Rn,On>>Rn,0,Jn.format,Jn.type,null);return pn(),Ot.profile&&(Jn.stats.size=E(Jn.internalformat,Jn.type,Qn.width,Qn.height,!1,!0)),Qn}},Qn._reglType="textureCube",Qn._texture=Jn,Ot.profile&&(Qn.stats=Jn.stats),Qn.destroy=function(){Jn.decRef()},Qn},clear:function(){for(var Tn=0;Tn<li;++Tn)Le.activeTexture(33984+Tn),Le.bindTexture(3553,null),di[Tn]=null;me(Or).forEach(xn),pt.cubeCount=0,pt.textureCount=0},getTexture:function(Tn){return null},restore:function(){for(var Tn=0;Tn<li;++Tn){var tr=di[Tn];tr&&(tr.bindCount=0,tr.unit=-1,di[Tn]=null)}me(Or).forEach(function(Zt){Zt.texture=Le.createTexture(),Le.bindTexture(Zt.target,Zt.texture);for(var yn=0;32>yn;++yn)if(0!=(Zt.mipmask&1<<yn))if(3553===Zt.target)Le.texImage2D(3553,yn,Zt.internalformat,Zt.width>>yn,Zt.height>>yn,0,Zt.internalformat,Zt.type,null);else for(var Cn=0;6>Cn;++Cn)Le.texImage2D(34069+Cn,yn,Zt.internalformat,Zt.width>>yn,Zt.height>>yn,0,Zt.internalformat,Zt.type,null);Zn(Zt.texInfo,Zt.target)})},refresh:function(){for(var Tn=0;Tn<li;++Tn){var tr=di[Tn];tr&&(tr.bindCount=0,tr.unit=-1,di[Tn]=null),Le.activeTexture(33984+Tn),Le.bindTexture(3553,null),Le.bindTexture(34067,null)}}}}(zt,Vt,An,function(){sr.procs.poll()},Zn,yt,Le),Yn=function(Le,je,Ke,ft,mt){function pt(Dt){this.id=$t++,this.refCount=1,this.renderbuffer=Dt,this.format=32854,this.height=this.width=0,mt.profile&&(this.stats={size:0})}function Ot(Dt){var Wt=Dt.renderbuffer;Le.bindRenderbuffer(36161,null),Le.deleteRenderbuffer(Wt),Dt.renderbuffer=null,Dt.refCount=0,delete ut[Dt.id],ft.renderbufferCount--}var Pt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};je.ext_srgb&&(Pt.srgba=35907),je.ext_color_buffer_half_float&&(Pt.rgba16f=34842,Pt.rgb16f=34843),je.webgl_color_buffer_float&&(Pt.rgba32f=34836);var Jt=[];Object.keys(Pt).forEach(function(Dt){Jt[Pt[Dt]]=Dt});var $t=0,ut={};return pt.prototype.decRef=function(){0>=--this.refCount&&Ot(this)},mt.profile&&(ft.getTotalRenderbufferSize=function(){var Dt=0;return Object.keys(ut).forEach(function(Wt){Dt+=ut[Wt].stats.size}),Dt}),{create:function(Dt,Wt){function zt(Ne,ot){var yt=0,It=0,Vt=32854;if("object"==typeof Ne&&Ne?("shape"in Ne?(yt=0|(It=Ne.shape)[0],It=0|It[1]):("radius"in Ne&&(yt=It=0|Ne.radius),"width"in Ne&&(yt=0|Ne.width),"height"in Ne&&(It=0|Ne.height)),"format"in Ne&&(Vt=Pt[Ne.format])):"number"==typeof Ne?(yt=0|Ne,It="number"==typeof ot?0|ot:yt):Ne||(yt=It=1),yt!==Ht.width||It!==Ht.height||Vt!==Ht.format)return zt.width=Ht.width=yt,zt.height=Ht.height=It,Ht.format=Vt,Le.bindRenderbuffer(36161,Ht.renderbuffer),Le.renderbufferStorage(36161,Vt,yt,It),mt.profile&&(Ht.stats.size=Ct[Ht.format]*Ht.width*Ht.height),zt.format=Jt[Ht.format],zt}var Ht=new pt(Le.createRenderbuffer());return ut[Ht.id]=Ht,ft.renderbufferCount++,zt(Dt,Wt),zt.resize=function(Ne,ot){var yt=0|Ne,It=0|ot||yt;return yt===Ht.width&&It===Ht.height||(zt.width=Ht.width=yt,zt.height=Ht.height=It,Le.bindRenderbuffer(36161,Ht.renderbuffer),Le.renderbufferStorage(36161,Ht.format,yt,It),mt.profile&&(Ht.stats.size=Ct[Ht.format]*Ht.width*Ht.height)),zt},zt._reglType="renderbuffer",zt._renderbuffer=Ht,mt.profile&&(zt.stats=Ht.stats),zt.destroy=function(){Ht.decRef()},zt},clear:function(){me(ut).forEach(Ot)},restore:function(){me(ut).forEach(function(Dt){Dt.renderbuffer=Le.createRenderbuffer(),Le.bindRenderbuffer(36161,Dt.renderbuffer),Le.renderbufferStorage(36161,Dt.format,Dt.width,Dt.height)}),Le.bindRenderbuffer(36161,null)}}}(zt,Vt,0,yt,Le),nr=function D(Le,je,Ke,ft,mt,pt){function Ot(An,hn,pn){this.target=An,this.texture=hn,this.renderbuffer=pn;var xn=An=0;hn?(An=hn.width,xn=hn.height):pn&&(An=pn.width,xn=pn.height),this.width=An,this.height=xn}function Pt(An){An&&(An.texture&&An.texture._texture.decRef(),An.renderbuffer&&An.renderbuffer._renderbuffer.decRef())}function Jt(An,hn,pn){An&&(An.texture?An.texture._texture.refCount+=1:An.renderbuffer._renderbuffer.refCount+=1)}function $t(An,hn){hn&&(hn.texture?Le.framebufferTexture2D(36160,An,hn.target,hn.texture._texture.texture,0):Le.framebufferRenderbuffer(36160,An,36161,hn.renderbuffer._renderbuffer.renderbuffer))}function ut(An){var hn=3553,pn=null,xn=null,En=An;return"object"==typeof An&&(En=An.data,"target"in An&&(hn=0|An.target)),"texture2d"===(An=En._reglType)||"textureCube"===An?pn=En:"renderbuffer"===An&&(xn=En,hn=36161),new Ot(hn,pn,xn)}function Dt(An,hn,pn,xn,En){return pn?((An=ft.create2D({width:An,height:hn,format:xn,type:En}))._texture.refCount=0,new Ot(3553,An,null)):((An=mt.create({width:An,height:hn,format:xn}))._renderbuffer.refCount=0,new Ot(36161,null,An))}function Wt(An){return An&&(An.texture||An.renderbuffer)}function zt(An,hn,pn){An&&(An.texture?An.texture.resize(hn,pn):An.renderbuffer&&An.renderbuffer.resize(hn,pn),An.width=hn,An.height=pn)}function Ht(){this.id=wn++,Zn[this.id]=this,this.framebuffer=Le.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ne(An){An.colorAttachments.forEach(Pt),Pt(An.depthAttachment),Pt(An.stencilAttachment),Pt(An.depthStencilAttachment)}function ot(An){Le.deleteFramebuffer(An.framebuffer),An.framebuffer=null,pt.framebufferCount--,delete Zn[An.id]}function yt(An){var hn;Le.bindFramebuffer(36160,An.framebuffer);var pn=An.colorAttachments;for(hn=0;hn<pn.length;++hn)$t(36064+hn,pn[hn]);for(hn=pn.length;hn<Ke.maxColorAttachments;++hn)Le.framebufferTexture2D(36160,36064+hn,3553,null,0);Le.framebufferTexture2D(36160,33306,3553,null,0),Le.framebufferTexture2D(36160,36096,3553,null,0),Le.framebufferTexture2D(36160,36128,3553,null,0),$t(36096,An.depthAttachment),$t(36128,An.stencilAttachment),$t(33306,An.depthStencilAttachment),Le.checkFramebufferStatus(36160),Le.isContextLost(),Le.bindFramebuffer(36160,Vt.next?Vt.next.framebuffer:null),Vt.cur=Vt.next,Le.getError()}function It(An,hn){function pn(En,In){var Yn,nr=0,sr=0,Ar=!0,yr=!0;Yn=null;var Pr=!0,Wr="rgba",lr="uint8",Hn=1,Sr=null,ti=null,Fn=null,br=!1;"number"==typeof En?(nr=0|En,sr=0|In||nr):En?("shape"in En?(nr=(sr=En.shape)[0],sr=sr[1]):("radius"in En&&(nr=sr=En.radius),"width"in En&&(nr=En.width),"height"in En&&(sr=En.height)),("color"in En||"colors"in En)&&(Yn=En.color||En.colors,Array.isArray(Yn)),Yn||("colorCount"in En&&(Hn=0|En.colorCount),"colorTexture"in En&&(Pr=!!En.colorTexture,Wr="rgba4"),"colorType"in En&&(lr=En.colorType,!Pr)&&("half float"===lr||"float16"===lr?Wr="rgba16f":"float"!==lr&&"float32"!==lr||(Wr="rgba32f")),"colorFormat"in En&&(0<=ln.indexOf(Wr=En.colorFormat)?Pr=!0:0<=un.indexOf(Wr)&&(Pr=!1))),("depthTexture"in En||"depthStencilTexture"in En)&&(br=!(!En.depthTexture&&!En.depthStencilTexture)),"depth"in En&&("boolean"==typeof En.depth?Ar=En.depth:(Sr=En.depth,yr=!1)),"stencil"in En&&("boolean"==typeof En.stencil?yr=En.stencil:(ti=En.stencil,Ar=!1)),"depthStencil"in En&&("boolean"==typeof En.depthStencil?Ar=yr=En.depthStencil:(Fn=En.depthStencil,yr=Ar=!1))):nr=sr=1;var xr=null,Kn=null,Qr=null,ci=null;if(Array.isArray(Yn))xr=Yn.map(ut);else if(Yn)xr=[ut(Yn)];else for(xr=Array(Hn),Yn=0;Yn<Hn;++Yn)xr[Yn]=Dt(nr,sr,Pr,Wr,lr);for(nr=nr||xr[0].width,sr=sr||xr[0].height,Sr?Kn=ut(Sr):Ar&&!yr&&(Kn=Dt(nr,sr,br,"depth","uint32")),ti?Qr=ut(ti):yr&&!Ar&&(Qr=Dt(nr,sr,!1,"stencil","uint8")),Fn?ci=ut(Fn):!Sr&&!ti&&yr&&Ar&&(ci=Dt(nr,sr,br,"depth stencil","depth stencil")),Ar=null,Yn=0;Yn<xr.length;++Yn)Jt(xr[Yn]),xr[Yn]&&xr[Yn].texture&&(yr=at[xr[Yn].texture._texture.format]*Nt[xr[Yn].texture._texture.type],null===Ar&&(Ar=yr));return Jt(Kn),Jt(Qr),Jt(ci),Ne(xn),xn.width=nr,xn.height=sr,xn.colorAttachments=xr,xn.depthAttachment=Kn,xn.stencilAttachment=Qr,xn.depthStencilAttachment=ci,pn.color=xr.map(Wt),pn.depth=Wt(Kn),pn.stencil=Wt(Qr),pn.depthStencil=Wt(ci),pn.width=xn.width,pn.height=xn.height,yt(xn),pn}var xn=new Ht;return pt.framebufferCount++,pn(An,hn),G(pn,{resize:function(En,In){var Yn=Math.max(0|En,1),nr=Math.max(0|In||Yn,1);if(Yn===xn.width&&nr===xn.height)return pn;for(var sr=xn.colorAttachments,Ar=0;Ar<sr.length;++Ar)zt(sr[Ar],Yn,nr);return zt(xn.depthAttachment,Yn,nr),zt(xn.stencilAttachment,Yn,nr),zt(xn.depthStencilAttachment,Yn,nr),xn.width=pn.width=Yn,xn.height=pn.height=nr,yt(xn),pn},_reglType:"framebuffer",_framebuffer:xn,destroy:function(){ot(xn),Ne(xn)},use:function(En){Vt.setFBO({framebuffer:pn},En)}})}var Vt={cur:null,next:null,dirty:!1,setFBO:null},ln=["rgba"],un=["rgba4","rgb565","rgb5 a1"];je.ext_srgb&&un.push("srgba"),je.ext_color_buffer_half_float&&un.push("rgba16f","rgb16f"),je.webgl_color_buffer_float&&un.push("rgba32f");var an=["uint8"];je.oes_texture_half_float&&an.push("half float","float16"),je.oes_texture_float&&an.push("float","float32");var wn=0,Zn={};return G(Vt,{getFramebuffer:function(An){return"function"==typeof An&&"framebuffer"===An._reglType&&(An=An._framebuffer)instanceof Ht?An:null},create:It,createCube:function(An){function hn(xn){var En,In={color:null},Yn=0,nr=null;En="rgba";var sr="uint8",Ar=1;if("number"==typeof xn?Yn=0|xn:xn?("shape"in xn?Yn=xn.shape[0]:("radius"in xn&&(Yn=0|xn.radius),"width"in xn?Yn=0|xn.width:"height"in xn&&(Yn=0|xn.height)),("color"in xn||"colors"in xn)&&(nr=xn.color||xn.colors,Array.isArray(nr)),nr||("colorCount"in xn&&(Ar=0|xn.colorCount),"colorType"in xn&&(sr=xn.colorType),"colorFormat"in xn&&(En=xn.colorFormat)),"depth"in xn&&(In.depth=xn.depth),"stencil"in xn&&(In.stencil=xn.stencil),"depthStencil"in xn&&(In.depthStencil=xn.depthStencil)):Yn=1,nr)if(Array.isArray(nr))for(xn=[],En=0;En<nr.length;++En)xn[En]=nr[En];else xn=[nr];else for(xn=Array(Ar),nr={radius:Yn,format:En,type:sr},En=0;En<Ar;++En)xn[En]=ft.createCube(nr);for(In.color=Array(xn.length),En=0;En<xn.length;++En)Ar=xn[En],Yn=Yn||Ar.width,In.color[En]={target:34069,data:xn[En]};for(En=0;6>En;++En){for(Ar=0;Ar<xn.length;++Ar)In.color[Ar].target=34069+En;0<En&&(In.depth=pn[0].depth,In.stencil=pn[0].stencil,In.depthStencil=pn[0].depthStencil),pn[En]?pn[En](In):pn[En]=It(In)}return G(hn,{width:Yn,height:Yn,color:xn})}var pn=Array(6);return hn(An),G(hn,{faces:pn,resize:function(xn){var En=0|xn;if(En===hn.width)return hn;var In=hn.color;for(xn=0;xn<In.length;++xn)In[xn].resize(En);for(xn=0;6>xn;++xn)pn[xn].resize(En);return hn.width=hn.height=En,hn},_reglType:"framebufferCube",destroy:function(){pn.forEach(function(xn){xn.destroy()})}})},clear:function(){me(Zn).forEach(ot)},restore:function(){Vt.cur=null,Vt.next=null,Vt.dirty=!0,me(Zn).forEach(function(An){An.framebuffer=Le.createFramebuffer(),yt(An)})}})}(zt,Vt,An,In,Yn,yt),sr=W(zt,ot,Vt,An,hn,pn,0,nr,{},xn,En,an,Zn,ln,It,Le),Ar=(ot=function I(Le,je,Ke,ft,mt,pt,Ot){function Pt(Jt){var $t;$t=null===je.next?5121:je.next.colorAttachments[0].texture._texture.type;var ut=0,Dt=0,Wt=ft.framebufferWidth,zt=ft.framebufferHeight,Ht=null;return be(Jt)?Ht=Jt:Jt&&(ut=0|Jt.x,Dt=0|Jt.y,Wt=0|(Jt.width||ft.framebufferWidth-ut),zt=0|(Jt.height||ft.framebufferHeight-Dt),Ht=Jt.data||null),Ke(),Jt=Wt*zt*4,Ht||(5121===$t?Ht=new Uint8Array(Jt):5126===$t&&(Ht=Ht||new Float32Array(Jt))),Le.pixelStorei(3333,4),Le.readPixels(ut,Dt,Wt,zt,6408,$t,Ht),Ht}return function(Jt){return Jt&&"framebuffer"in Jt?(je.setFBO({framebuffer:($t=Jt).framebuffer},function(){ut=Pt($t)}),ut):Pt(Jt);var $t,ut}}(zt,nr,sr.procs.poll,Zn),sr.next),yr=zt.canvas,Pr=[],Wr=[],lr=[],Hn=[Le.onDestroy],Sr=null;yr&&(yr.addEventListener("webglcontextlost",mt,!1),yr.addEventListener("webglcontextrestored",pt,!1));var ti=nr.setFBO=Ot({framebuffer:te.define.call(null,1,"framebuffer")});return Dt(),Ht=G(Ot,{clear:function(Fn){if("framebuffer"in Fn)if(Fn.framebuffer&&"framebufferCube"===Fn.framebuffer_reglType)for(var br=0;6>br;++br)ti(G({framebuffer:Fn.framebuffer.faces[br]},Fn),Pt);else ti(Fn,Pt);else Pt(0,Fn)},prop:te.define.bind(null,1),context:te.define.bind(null,2),this:te.define.bind(null,3),draw:Ot({}),buffer:function(Fn){return hn.create(Fn,34962,!1,!1)},elements:function(Fn){return pn.create(Fn,!1)},texture:In.create2D,cube:In.createCube,renderbuffer:Yn.create,framebuffer:nr.create,framebufferCube:nr.createCube,vao:xn.createVAO,attributes:Ht,frame:Jt,on:function(Fn,br){var xr;switch(Fn){case"frame":return Jt(br);case"lost":xr=Wr;break;case"restore":xr=lr;break;case"destroy":xr=Hn}return xr.push(br),{cancel:function(){for(var Kn=0;Kn<xr.length;++Kn)if(xr[Kn]===br){xr[Kn]=xr[xr.length-1],xr.pop();break}}}},limits:An,hasExtension:function(Fn){return 0<=An.extensions.indexOf(Fn.toLowerCase())},read:ot,destroy:function(){Pr.length=0,ft(),yr&&(yr.removeEventListener("webglcontextlost",mt),yr.removeEventListener("webglcontextrestored",pt)),En.clear(),nr.clear(),Yn.clear(),xn.clear(),In.clear(),pn.clear(),hn.clear(),ln&&ln.clear(),Hn.forEach(function(Fn){Fn()})},_gl:zt,_refresh:Dt,poll:function(){ut(),ln&&ln.update()},now:Wt,stats:yt,getCachedCode:function(){return It},preloadCachedCode:function(Fn){Object.entries(Fn).forEach(function(br){It[br[0]]=br[1]})}}),Le.onDone(null,Ht),Ht}},"object"==typeof se&&void 0!==oe?oe.exports=x():this.createREGL=x()},{}],284:[function(_,oe,se){var v=_("buffer"),x=v.Buffer;function T(e,o){for(var i in e)o[i]=e[i]}function b(e,o,i){return x(e,o,i)}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?oe.exports=v:(T(v,se),se.Buffer=b),b.prototype=Object.create(x.prototype),T(x,b),b.from=function(e,o,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return x(e,o,i)},b.alloc=function(e,o,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=x(e);return void 0!==o?"string"==typeof i?l.fill(o,i):l.fill(o):l.fill(0),l},b.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return x(e)},b.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return v.SlowBuffer(e)}},{buffer:85}],285:[function(_,oe,se){oe.exports=x;var v=_("events").EventEmitter;function x(){v.call(this)}_("inherits")(x,v),x.Readable=_("readable-stream/lib/_stream_readable.js"),x.Writable=_("readable-stream/lib/_stream_writable.js"),x.Duplex=_("readable-stream/lib/_stream_duplex.js"),x.Transform=_("readable-stream/lib/_stream_transform.js"),x.PassThrough=_("readable-stream/lib/_stream_passthrough.js"),x.finished=_("readable-stream/lib/internal/streams/end-of-stream.js"),x.pipeline=_("readable-stream/lib/internal/streams/pipeline.js"),x.Stream=x,x.prototype.pipe=function(T,b){var e=this;function o(d){T.writable&&!1===T.write(d)&&e.pause&&e.pause()}function i(){e.readable&&e.resume&&e.resume()}e.on("data",o),T.on("drain",i),T._isStdio||b&&!1===b.end||(e.on("end",r),e.on("close",y));var l=!1;function r(){l||(l=!0,T.end())}function y(){l||(l=!0,"function"==typeof T.destroy&&T.destroy())}function h(d){if(s(),0===v.listenerCount(this,"error"))throw d}function s(){e.removeListener("data",o),T.removeListener("drain",i),e.removeListener("end",r),e.removeListener("close",y),e.removeListener("error",h),T.removeListener("error",h),e.removeListener("end",s),e.removeListener("close",s),T.removeListener("close",s)}return e.on("error",h),T.on("error",h),e.on("end",s),e.on("close",s),T.on("close",s),T.emit("pipe",e),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(_,oe,se){"use strict";var v={};function x(b,e,o){o||(o=Error);var i=function(l){var r,y;function h(s,d,p){return l.call(this,"string"==typeof e?e:e(s,d,p))||this}return y=l,(r=h).prototype=Object.create(y.prototype),r.prototype.constructor=r,r.__proto__=y,h}(o);i.prototype.name=o.name,i.prototype.code=b,v[b]=i}function T(b,e){if(Array.isArray(b)){var o=b.length;return b=b.map(function(i){return String(i)}),o>2?"one of ".concat(e," ").concat(b.slice(0,o-1).join(", "),", or ")+b[o-1]:2===o?"one of ".concat(e," ").concat(b[0]," or ").concat(b[1]):"of ".concat(e," ").concat(b[0])}return"of ".concat(e," ").concat(String(b))}x("ERR_INVALID_OPT_VALUE",function(b,e){return'The value "'+e+'" is invalid for option "'+b+'"'},TypeError),x("ERR_INVALID_ARG_TYPE",function(b,e,o){var i,y,s,p;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(i="must not be",e=e.replace(/^not /,"")):i="must be",s=b,(void 0===p||p>s.length)&&(p=s.length)," argument"===s.substring(p-" argument".length,p))y="The ".concat(b," ").concat(i," ").concat(T(e,"type"));else{var h=function(s,d,p){return"number"!=typeof p&&(p=0),!(p+".".length>s.length)&&-1!==s.indexOf(".",p)}(b)?"property":"argument";y='The "'.concat(b,'" ').concat(h," ").concat(i," ").concat(T(e,"type"))}return y+". Received type ".concat(typeof o)},TypeError),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),x("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),x("ERR_STREAM_PREMATURE_CLOSE","Premature close"),x("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),x("ERR_STREAM_WRITE_AFTER_END","write after end"),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oe.exports.codes=v},{}],287:[function(_,oe,se){(function(v){(function(){"use strict";var x=Object.keys||function(h){var s=[];for(var d in h)s.push(d);return s};oe.exports=l;var T=_("./_stream_readable"),b=_("./_stream_writable");_("inherits")(l,T);for(var e=x(b.prototype),o=0;o<e.length;o++){var i=e[o];l.prototype[i]||(l.prototype[i]=b.prototype[i])}function l(h){if(!(this instanceof l))return new l(h);T.call(this,h),b.call(this,h),this.allowHalfOpen=!0,h&&(!1===h.readable&&(this.readable=!1),!1===h.writable&&(this.writable=!1),!1===h.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||v.nextTick(y,this)}function y(h){h.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}).call(this)}).call(this,_("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(_,oe,se){"use strict";oe.exports=x;var v=_("./_stream_transform");function x(T){if(!(this instanceof x))return new x(T);v.call(this,T)}_("inherits")(x,v),x.prototype._transform=function(T,b,e){e(null,T)}},{"./_stream_transform":290,inherits:231}],289:[function(_,oe,se){(function(v,x){(function(){"use strict";var T;oe.exports=E,E.ReadableState=k,_("events");var l,b=function(j,q){return j.listeners(q).length},e=_("./internal/streams/stream"),o=_("buffer").Buffer,i=x.Uint8Array||function(){},r=_("util");l=r&&r.debuglog?r.debuglog("stream"):function(){};var y,h,s,d=_("./internal/streams/buffer_list"),p=_("./internal/streams/destroy"),c=_("./internal/streams/state").getHighWaterMark,g=_("../errors").codes,m=g.ERR_INVALID_ARG_TYPE,u=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,f=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;_("inherits")(E,e);var A=p.errorOrDestroy,M=["error","close","destroy","pause","resume"];function k(j,q,W){T=T||_("./_stream_duplex"),"boolean"!=typeof W&&(W=q instanceof T),this.objectMode=!!(j=j||{}).objectMode,W&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=c(this,j,"readableHighWaterMark",W),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==j.emitClose,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(y||(y=_("string_decoder/").StringDecoder),this.decoder=new y(j.encoding),this.encoding=j.encoding)}function E(j){if(T=T||_("./_stream_duplex"),!(this instanceof E))return new E(j);this._readableState=new k(j,this,this instanceof T),this.readable=!0,j&&("function"==typeof j.read&&(this._read=j.read),"function"==typeof j.destroy&&(this._destroy=j.destroy)),e.call(this)}function P(j,q,W,ae,G){l("readableAddChunk",q);var ee,le,ue,de,he,te=j._readableState;if(null===q)te.reading=!1,function(le,ue){if(l("onEofChunk"),!ue.ended){if(ue.decoder){var de=ue.decoder.end();de&&de.length&&(ue.buffer.push(de),ue.length+=ue.objectMode?1:de.length)}ue.ended=!0,ue.sync?R(le):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,L(le)))}}(j,te);else if(G||(le=te,o.isBuffer(he=ue=q)||he instanceof i||"string"==typeof ue||void 0===ue||le.objectMode||(de=new m("chunk",["string","Buffer","Uint8Array"],ue)),ee=de),ee)A(j,ee);else if(te.objectMode||q&&q.length>0)if("string"==typeof q||te.objectMode||Object.getPrototypeOf(q)===o.prototype||(q=function(le){return o.from(le)}(q)),ae)te.endEmitted?A(j,new f):D(j,te,q,!0);else if(te.ended)A(j,new u);else{if(te.destroyed)return!1;te.reading=!1,te.decoder&&!W?(q=te.decoder.write(q),te.objectMode||0!==q.length?D(j,te,q,!1):I(j,te)):D(j,te,q,!1)}else ae||(te.reading=!1,I(j,te));return!te.ended&&(te.length<te.highWaterMark||0===te.length)}function D(j,q,W,ae){q.flowing&&0===q.length&&!q.sync?(q.awaitDrain=0,j.emit("data",W)):(q.length+=q.objectMode?1:W.length,ae?q.buffer.unshift(W):q.buffer.push(W),q.needReadable&&R(j)),I(j,q)}function F(j,q){return j<=0||0===q.length&&q.ended?0:q.objectMode?1:j!=j?q.flowing&&q.length?q.buffer.head.data.length:q.length:(j>q.highWaterMark&&(q.highWaterMark=((W=j)>=1073741824?W=1073741824:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W)),j<=q.length?j:q.ended?q.length:(q.needReadable=!0,0));var W}function R(j){var q=j._readableState;l("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(l("emitReadable",q.flowing),q.emittedReadable=!0,v.nextTick(L,j))}function L(j){var q=j._readableState;l("emitReadable_",q.destroyed,q.length,q.ended),q.destroyed||!q.length&&!q.ended||(j.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,Q(j)}function I(j,q){q.readingMore||(q.readingMore=!0,v.nextTick(B,j,q))}function B(j,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&0===q.length);){var W=q.length;if(l("maybeReadMore read 0"),j.read(0),W===q.length)break}q.readingMore=!1}function V(j){var q=j._readableState;q.readableListening=j.listenerCount("readable")>0,q.resumeScheduled&&!q.paused?q.flowing=!0:j.listenerCount("data")>0&&j.resume()}function Z(j){l("readable nexttick read 0"),j.read(0)}function Y(j,q){l("resume",q.reading),q.reading||j.read(0),q.resumeScheduled=!1,j.emit("resume"),Q(j),q.flowing&&!q.reading&&j.read(0)}function Q(j){var q=j._readableState;for(l("flow",q.flowing);q.flowing&&null!==j.read(););}function re(j,q){return 0===q.length?null:(q.objectMode?W=q.buffer.shift():!j||j>=q.length?(W=q.decoder?q.buffer.join(""):1===q.buffer.length?q.buffer.first():q.buffer.concat(q.length),q.buffer.clear()):W=q.buffer.consume(j,q.decoder),W);var W}function $(j){var q=j._readableState;l("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,v.nextTick(J,q,j))}function J(j,q){if(l("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&0===j.length&&(j.endEmitted=!0,q.readable=!1,q.emit("end"),j.autoDestroy)){var W=q._writableState;(!W||W.autoDestroy&&W.finished)&&q.destroy()}}function ie(j,q){for(var W=0,ae=j.length;W<ae;W++)if(j[W]===q)return W;return-1}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){this._readableState&&(this._readableState.destroyed=j)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(j,q){q(j)},E.prototype.push=function(j,q){var W,ae=this._readableState;return ae.objectMode?W=!0:"string"==typeof j&&((q=q||ae.defaultEncoding)!==ae.encoding&&(j=o.from(j,q),q=""),W=!0),P(this,j,q,!1,W)},E.prototype.unshift=function(j){return P(this,j,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(j){y||(y=_("string_decoder/").StringDecoder);var q=new y(j);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,ae="";null!==W;)ae+=q.write(W.data),W=W.next;return this._readableState.buffer.clear(),""!==ae&&this._readableState.buffer.push(ae),this._readableState.length=ae.length,this},E.prototype.read=function(j){l("read",j),j=parseInt(j,10);var q=this._readableState,W=j;if(0!==j&&(q.emittedReadable=!1),0===j&&q.needReadable&&((0!==q.highWaterMark?q.length>=q.highWaterMark:q.length>0)||q.ended))return l("read: emitReadable",q.length,q.ended),0===q.length&&q.ended?$(this):R(this),null;if(0===(j=F(j,q))&&q.ended)return 0===q.length&&$(this),null;var ae,G=q.needReadable;return l("need readable",G),(0===q.length||q.length-j<q.highWaterMark)&&l("length less than watermark",G=!0),q.ended||q.reading?l("reading or ended",G=!1):G&&(l("do read"),q.reading=!0,q.sync=!0,0===q.length&&(q.needReadable=!0),this._read(q.highWaterMark),q.sync=!1,q.reading||(j=F(W,q))),null===(ae=j>0?re(j,q):null)?(q.needReadable=q.length<=q.highWaterMark,j=0):(q.length-=j,q.awaitDrain=0),0===q.length&&(q.ended||(q.needReadable=!0),W!==j&&q.ended&&$(this)),null!==ae&&this.emit("data",ae),ae},E.prototype._read=function(j){A(this,new w("_read()"))},E.prototype.pipe=function(j,q){var W=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=j;break;case 1:ae.pipes=[ae.pipes,j];break;default:ae.pipes.push(j)}ae.pipesCount+=1,l("pipe count=%d opts=%j",ae.pipesCount,q);var G=q&&!1===q.end||j===v.stdout||j===v.stderr?_e:te;function te(){l("onend"),j.end()}ae.endEmitted?v.nextTick(G):W.once("end",G),j.on("unpipe",function ee(Ee,De){l("onunpipe"),Ee===W&&De&&!1===De.hasUnpiped&&(De.hasUnpiped=!0,l("cleanup"),j.removeListener("close",be),j.removeListener("finish",me),j.removeListener("drain",le),j.removeListener("error",he),j.removeListener("unpipe",ee),W.removeListener("end",te),W.removeListener("end",_e),W.removeListener("data",de),ue=!0,!ae.awaitDrain||j._writableState&&!j._writableState.needDrain||le())});var Ee,le=(Ee=W,function(){var De=Ee._readableState;l("pipeOnDrain",De.awaitDrain),De.awaitDrain&&De.awaitDrain--,0===De.awaitDrain&&b(Ee,"data")&&(De.flowing=!0,Q(Ee))});j.on("drain",le);var ue=!1;function de(Ee){l("ondata");var De=j.write(Ee);l("dest.write",De),!1===De&&((1===ae.pipesCount&&ae.pipes===j||ae.pipesCount>1&&-1!==ie(ae.pipes,j))&&!ue&&(l("false write response, pause",ae.awaitDrain),ae.awaitDrain++),W.pause())}function he(Ee){l("onerror",Ee),_e(),j.removeListener("error",he),0===b(j,"error")&&A(j,Ee)}function be(){j.removeListener("finish",me),_e()}function me(){l("onfinish"),j.removeListener("close",be),_e()}function _e(){l("unpipe"),W.unpipe(j)}return W.on("data",de),function(Ee,De,Se){if("function"==typeof Ee.prependListener)return Ee.prependListener(De,Se);Ee._events&&Ee._events[De]?Array.isArray(Ee._events[De])?Ee._events[De].unshift(Se):Ee._events[De]=[Se,Ee._events[De]]:Ee.on(De,Se)}(j,"error",he),j.once("close",be),j.once("finish",me),j.emit("pipe",W),ae.flowing||(l("pipe resume"),W.resume()),j},E.prototype.unpipe=function(j){var q=this._readableState,W={hasUnpiped:!1};if(0===q.pipesCount)return this;if(1===q.pipesCount)return j&&j!==q.pipes||(j||(j=q.pipes),q.pipes=null,q.pipesCount=0,q.flowing=!1,j&&j.emit("unpipe",this,W)),this;if(!j){var ae=q.pipes,G=q.pipesCount;q.pipes=null,q.pipesCount=0,q.flowing=!1;for(var ee=0;ee<G;ee++)ae[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var te=ie(q.pipes,j);return-1===te||(q.pipes.splice(te,1),q.pipesCount-=1,1===q.pipesCount&&(q.pipes=q.pipes[0]),j.emit("unpipe",this,W)),this},E.prototype.addListener=E.prototype.on=function(j,q){var W=e.prototype.on.call(this,j,q),ae=this._readableState;return"data"===j?(ae.readableListening=this.listenerCount("readable")>0,!1!==ae.flowing&&this.resume()):"readable"===j&&(ae.endEmitted||ae.readableListening||(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,l("on readable",ae.length,ae.reading),ae.length?R(this):ae.reading||v.nextTick(Z,this))),W},E.prototype.removeListener=function(j,q){var W=e.prototype.removeListener.call(this,j,q);return"readable"===j&&v.nextTick(V,this),W},E.prototype.removeAllListeners=function(j){var q=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==j&&void 0!==j||v.nextTick(V,this),q},E.prototype.resume=function(){var W,j=this._readableState;return j.flowing||(l("resume"),j.flowing=!j.readableListening,this,(W=j).resumeScheduled||(W.resumeScheduled=!0,v.nextTick(Y,this,W))),j.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(j){var q=this,W=this._readableState,ae=!1;for(var G in j.on("end",function(){if(l("wrapped end"),W.decoder&&!W.ended){var te=W.decoder.end();te&&te.length&&q.push(te)}q.push(null)}),j.on("data",function(te){l("wrapped data"),W.decoder&&(te=W.decoder.write(te)),W.objectMode&&null==te||(W.objectMode||te&&te.length)&&(q.push(te)||(ae=!0,j.pause()))}),j)void 0===this[G]&&"function"==typeof j[G]&&(this[G]=function(te){return function(){return j[te].apply(j,arguments)}}(G));for(var ee=0;ee<M.length;ee++)j.on(M[ee],this.emit.bind(this,M[ee]));return this._read=function(te){l("wrapped _read",te),ae&&(ae=!1,j.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=_("./internal/streams/async_iterator")),h(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),E._fromList=re,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(j,q){return void 0===s&&(s=_("./internal/streams/from")),s(E,j,q)})}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(_,oe,se){"use strict";oe.exports=l;var v=_("../errors").codes,x=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_MULTIPLE_CALLBACK,b=v.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=v.ERR_TRANSFORM_WITH_LENGTH_0,o=_("./_stream_duplex");function i(h,s){var d=this._transformState;d.transforming=!1;var p=d.writecb;if(null===p)return this.emit("error",new T);d.writechunk=null,d.writecb=null,null!=s&&this.push(s),p(h);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);o.call(this,h),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&("function"==typeof h.transform&&(this._transform=h.transform),"function"==typeof h.flush&&(this._flush=h.flush)),this.on("prefinish",r)}function r(){var h=this;"function"!=typeof this._flush||this._readableState.destroyed?y(this,null,null):this._flush(function(s,d){y(h,s,d)})}function y(h,s,d){if(s)return h.emit("error",s);if(null!=d&&h.push(d),h._writableState.length)throw new e;if(h._transformState.transforming)throw new b;return h.push(null)}_("inherits")(l,o),l.prototype.push=function(h,s){return this._transformState.needTransform=!1,o.prototype.push.call(this,h,s)},l.prototype._transform=function(h,s,d){d(new x("_transform()"))},l.prototype._write=function(h,s,d){var p=this._transformState;if(p.writecb=d,p.writechunk=h,p.writeencoding=s,!p.transforming){var c=this._readableState;(p.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},l.prototype._read=function(h){var s=this._transformState;null===s.writechunk||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},l.prototype._destroy=function(h,s){o.prototype._destroy.call(this,h,function(d){s(d)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(_,oe,se){(function(v,x){(function(){"use strict";function T(B){var V=this;this.next=null,this.entry=null,this.finish=function(){!function(Z,Y,Q){var re=Z.entry;for(Z.entry=null;re;){var $=re.callback;Y.pendingcb--,$(undefined),re=re.next}Y.corkedRequestsFree.next=Z}(V,B)}}var b;oe.exports=E,E.WritableState=k;var r,e={deprecate:_("util-deprecate")},o=_("./internal/streams/stream"),i=_("buffer").Buffer,l=x.Uint8Array||function(){},y=_("./internal/streams/destroy"),h=_("./internal/streams/state").getHighWaterMark,s=_("../errors").codes,d=s.ERR_INVALID_ARG_TYPE,p=s.ERR_METHOD_NOT_IMPLEMENTED,c=s.ERR_MULTIPLE_CALLBACK,g=s.ERR_STREAM_CANNOT_PIPE,m=s.ERR_STREAM_DESTROYED,u=s.ERR_STREAM_NULL_VALUES,w=s.ERR_STREAM_WRITE_AFTER_END,f=s.ERR_UNKNOWN_ENCODING,A=y.errorOrDestroy;function M(){}function k(B,V,Z){b=b||_("./_stream_duplex"),"boolean"!=typeof Z&&(Z=V instanceof b),this.objectMode=!!(B=B||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=h(this,B,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===B.decodeStrings),this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){!function(re,$){var W,J=re._writableState,ie=J.sync,j=J.writecb;if("function"!=typeof j)throw new c;if((W=J).writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0,$)!function(W,ae,G,ee,te){--ae.pendingcb,G?(v.nextTick(te,ee),v.nextTick(I,W,ae),W._writableState.errorEmitted=!0,A(W,ee)):(te(ee),W._writableState.errorEmitted=!0,A(W,ee),I(W,ae))}(re,J,ie,$,j);else{var q=R(J)||re.destroyed;q||J.corked||J.bufferProcessing||!J.bufferedRequest||F(re,J),ie?v.nextTick(D,re,J,q,j):D(re,J,q,j)}}(V,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==B.emitClose,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new T(this)}function E(B){var V=this instanceof(b=b||_("./_stream_duplex"));if(!V&&!r.call(E,this))return new E(B);this._writableState=new k(B,this,V),this.writable=!0,B&&("function"==typeof B.write&&(this._write=B.write),"function"==typeof B.writev&&(this._writev=B.writev),"function"==typeof B.destroy&&(this._destroy=B.destroy),"function"==typeof B.final&&(this._final=B.final)),o.call(this)}function P(B,V,Z,Y,Q,re,$){V.writelen=Y,V.writecb=$,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new m("write")):Z?B._writev(Q,V.onwrite):B._write(Q,re,V.onwrite),V.sync=!1}function D(B,V,Z,Y){var Q,re;Z||(Q=B,0===(re=V).length&&re.needDrain&&(re.needDrain=!1,Q.emit("drain"))),V.pendingcb--,Y(),I(B,V)}function F(B,V){V.bufferProcessing=!0;var Z=V.bufferedRequest;if(B._writev&&Z&&Z.next){var Q=new Array(V.bufferedRequestCount),re=V.corkedRequestsFree;re.entry=Z;for(var $=0,J=!0;Z;)Q[$]=Z,Z.isBuf||(J=!1),Z=Z.next,$+=1;Q.allBuffers=J,P(B,V,!0,V.length,Q,"",re.finish),V.pendingcb++,V.lastBufferedRequest=null,re.next?(V.corkedRequestsFree=re.next,re.next=null):V.corkedRequestsFree=new T(V),V.bufferedRequestCount=0}else{for(;Z;){var ie=Z.chunk;if(P(B,V,!1,V.objectMode?1:ie.length,ie,Z.encoding,Z.callback),Z=Z.next,V.bufferedRequestCount--,V.writing)break}null===Z&&(V.lastBufferedRequest=null)}V.bufferedRequest=Z,V.bufferProcessing=!1}function R(B){return B.ending&&0===B.length&&null===B.bufferedRequest&&!B.finished&&!B.writing}function L(B,V){B._final(function(Z){V.pendingcb--,Z&&A(B,Z),V.prefinished=!0,B.emit("prefinish"),I(B,V)})}function I(B,V){var Q,re,Z=R(V);if(Z&&(Q=B,(re=V).prefinished||re.finalCalled||("function"!=typeof Q._final||re.destroyed?(re.prefinished=!0,Q.emit("prefinish")):(re.pendingcb++,re.finalCalled=!0,v.nextTick(L,Q,re))),0===V.pendingcb&&(V.finished=!0,B.emit("finish"),V.autoDestroy))){var Y=B._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&B.destroy()}return Z}_("inherits")(E,o),k.prototype.getBuffer=function(){for(var B=this.bufferedRequest,V=[];B;)V.push(B),B=B.next;return V},function(){try{Object.defineProperty(k.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(B){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(B){return!!r.call(this,B)||this===E&&B&&B._writableState instanceof k}})):r=function(B){return B instanceof this},E.prototype.pipe=function(){A(this,new g)},E.prototype.write=function(B,V,Z){var Y,J,ie,j,Q=this._writableState,re=!1,$=!Q.objectMode&&(i.isBuffer(Y=B)||Y instanceof l);return $&&!i.isBuffer(B)&&(B=i.from(B)),"function"==typeof V&&(Z=V,V=null),$?V="buffer":V||(V=Q.defaultEncoding),"function"!=typeof Z&&(Z=M),Q.ending?(J=this,ie=Z,j=new w,A(J,j),v.nextTick(ie,j)):($||function(J,ie,j,q){var W;return null===j?W=new u:"string"==typeof j||ie.objectMode||(W=new d("chunk",["string","Buffer"],j)),!W||(A(J,W),v.nextTick(q,W),!1)}(this,Q,B,Z))&&(Q.pendingcb++,re=function(J,ie,j,q,W,ae){if(!j){var G=(de=q,(ue=ie).objectMode||!1===ue.decodeStrings||"string"!=typeof de||(de=i.from(de,W)),de);q!==G&&(j=!0,W="buffer",q=G)}var ue,de,ee=ie.objectMode?1:q.length;ie.length+=ee;var te=ie.length<ie.highWaterMark;if(te||(ie.needDrain=!0),ie.writing||ie.corked){var le=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:q,encoding:W,isBuf:j,callback:ae,next:null},le?le.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else P(J,ie,!1,ee,q,W,ae);return te}(this,Q,$,B,V,Z)),re},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,B.writing||B.corked||B.bufferProcessing||!B.bufferedRequest||F(this,B))},E.prototype.setDefaultEncoding=function(B){if("string"==typeof B&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new f(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(B,V,Z){Z(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(B,V,Z){var Q,re,$,Y=this._writableState;return"function"==typeof B?(Z=B,B=null,V=null):"function"==typeof V&&(Z=V,V=null),null!=B&&this.write(B,V),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||(Q=this,$=Z,(re=Y).ending=!0,I(Q,re),$&&(re.finished?v.nextTick($):Q.once("finish",$)),re.ended=!0,Q.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),E.prototype.destroy=y.destroy,E.prototype._undestroy=y.undestroy,E.prototype._destroy=function(B,V){V(B)}}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(_,oe,se){(function(v){(function(){"use strict";var x;function T(m,u,w){return u in m?Object.defineProperty(m,u,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[u]=w,m}var b=_("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),i=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),y=Symbol("handlePromise"),h=Symbol("stream");function s(m,u){return{value:m,done:u}}function d(m){var u=m[e];if(null!==u){var w=m[h].read();null!==w&&(m[r]=null,m[e]=null,m[o]=null,u(s(w,!1)))}}function p(m){v.nextTick(d,m)}var c=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((T(x={get stream(){return this[h]},next:function(){var m=this,u=this[i];if(null!==u)return Promise.reject(u);if(this[l])return Promise.resolve(s(void 0,!0));if(this[h].destroyed)return new Promise(function(M,k){v.nextTick(function(){m[i]?k(m[i]):M(s(void 0,!0))})});var w,M,k,f=this[r];if(f)w=new Promise((M=f,k=this,function(E,P){M.then(function(){k[l]?E(s(void 0,!0)):k[y](E,P)},P)}));else{var A=this[h].read();if(null!==A)return Promise.resolve(s(A,!1));w=new Promise(this[y])}return this[r]=w,w}},Symbol.asyncIterator,function(){return this}),T(x,"return",function(){var m=this;return new Promise(function(u,w){m[h].destroy(null,function(f){f?w(f):u(s(void 0,!0))})})}),x),c);oe.exports=function(m){var u,w=Object.create(g,(T(u={},h,{value:m,writable:!0}),T(u,e,{value:null,writable:!0}),T(u,o,{value:null,writable:!0}),T(u,i,{value:null,writable:!0}),T(u,l,{value:m._readableState.endEmitted,writable:!0}),T(u,y,{value:function(f,A){var M=w[h].read();M?(w[r]=null,w[e]=null,w[o]=null,f(s(M,!1))):(w[e]=f,w[o]=A)},writable:!0}),u));return w[r]=null,b(m,function(f){if(f&&"ERR_STREAM_PREMATURE_CLOSE"!==f.code){var A=w[o];return null!==A&&(w[r]=null,w[e]=null,w[o]=null,A(f)),void(w[i]=f)}var M=w[e];null!==M&&(w[r]=null,w[e]=null,w[o]=null,M(s(void 0,!0))),w[l]=!0}),m.on("readable",p.bind(null,w)),w}}).call(this)}).call(this,_("_process"))},{"./end-of-stream":295,_process:277}],293:[function(_,oe,se){"use strict";function v(i,l){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);l&&(y=y.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),r.push.apply(r,y)}return r}function x(i,l,r){return l in i?Object.defineProperty(i,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[l]=r,i}function T(i,l){for(var r=0;r<l.length;r++){var y=l[r];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(i,y.key,y)}}var b=_("buffer").Buffer,e=_("util").inspect,o=e&&e.custom||"inspect";oe.exports=function(){function i(){(function(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}var l,r;return l=i,(r=[{key:"push",value:function(h){var s={data:h,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(h){var s={data:h,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(0===this.length)return"";for(var s=this.head,d=""+s.data;s=s.next;)d+=h+s.data;return d}},{key:"concat",value:function(h){if(0===this.length)return b.alloc(0);for(var c=b.allocUnsafe(h>>>0),g=this.head,m=0;g;)b.prototype.copy.call(g.data,c,m),m+=g.data.length,g=g.next;return c}},{key:"consume",value:function(h,s){var d;return h<this.head.data.length?(d=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):d=h===this.head.data.length?this.shift():s?this._getString(h):this._getBuffer(h),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var s=this.head,d=1,p=s.data;for(h-=p.length;s=s.next;){var c=s.data,g=h>c.length?c.length:h;if(p+=g===c.length?c:c.slice(0,h),0==(h-=g)){g===c.length?(++d,this.head=s.next?s.next:this.tail=null):(this.head=s,s.data=c.slice(g));break}++d}return this.length-=d,p}},{key:"_getBuffer",value:function(h){var s=b.allocUnsafe(h),d=this.head,p=1;for(d.data.copy(s),h-=d.data.length;d=d.next;){var c=d.data,g=h>c.length?c.length:h;if(c.copy(s,s.length-h,0,g),0==(h-=g)){g===c.length?(++p,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=c.slice(g));break}++p}return this.length-=p,s}},{key:o,value:function(h,s){return e(this,function(d){for(var p=1;p<arguments.length;p++){var c=null!=arguments[p]?arguments[p]:{};p%2?v(Object(c),!0).forEach(function(g){x(d,g,c[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(c)):v(Object(c)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(c,g))})}return d}({},s,{depth:0,customInspect:!1}))}}])&&T(l.prototype,r),i}()},{buffer:85,util:83}],294:[function(_,oe,se){(function(v){(function(){"use strict";function x(e,o){b(e,o),T(e)}function T(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function b(e,o){e.emit("error",o)}oe.exports={destroy:function(e,o){var i=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,v.nextTick(b,this,e)):v.nextTick(b,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(y){!o&&y?i._writableState?i._writableState.errorEmitted?v.nextTick(T,i):(i._writableState.errorEmitted=!0,v.nextTick(x,i,y)):v.nextTick(x,i,y):o?(v.nextTick(T,i),o(y)):v.nextTick(T,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var i=e._readableState,l=e._writableState;i&&i.autoDestroy||l&&l.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,_("_process"))},{_process:277}],295:[function(_,oe,se){"use strict";var v=_("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function x(){}oe.exports=function T(b,e,o){if("function"==typeof e)return T(b,null,e);var m,u;e||(e={}),m=o||x,u=!1,o=function(){if(!u){u=!0;for(var w=arguments.length,f=new Array(w),A=0;A<w;A++)f[A]=arguments[A];m.apply(this,f)}};var i=e.readable||!1!==e.readable&&b.readable,l=e.writable||!1!==e.writable&&b.writable,r=function(){b.writable||h()},y=b._writableState&&b._writableState.finished,h=function(){l=!1,y=!0,i||o.call(b)},s=b._readableState&&b._readableState.endEmitted,d=function(){i=!1,s=!0,l||o.call(b)},p=function(m){o.call(b,m)},c=function(){var m;return i&&!s?(b._readableState&&b._readableState.ended||(m=new v),o.call(b,m)):l&&!y?(b._writableState&&b._writableState.ended||(m=new v),o.call(b,m)):void 0},g=function(){b.req.on("finish",h)};return function(m){return m.setHeader&&"function"==typeof m.abort}(b)?(b.on("complete",h),b.on("abort",c),b.req?g():b.on("request",g)):l&&!b._writableState&&(b.on("end",r),b.on("close",r)),b.on("end",d),b.on("finish",h),!1!==e.error&&b.on("error",p),b.on("close",c),function(){b.removeListener("complete",h),b.removeListener("abort",c),b.removeListener("request",g),b.req&&b.req.removeListener("finish",h),b.removeListener("end",r),b.removeListener("close",r),b.removeListener("finish",h),b.removeListener("end",d),b.removeListener("error",p),b.removeListener("close",c)}}},{"../../../errors":286}],296:[function(_,oe,se){oe.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(_,oe,se){"use strict";var v,x=_("../../../errors").codes,T=x.ERR_MISSING_ARGS,b=x.ERR_STREAM_DESTROYED;function e(y){if(y)throw y}function o(y,h,s,d){var g,m;g=d,m=!1,d=function(){m||(m=!0,g.apply(void 0,arguments))};var p=!1;y.on("close",function(){p=!0}),void 0===v&&(v=_("./end-of-stream")),v(y,{readable:h,writable:s},function(g){if(g)return d(g);p=!0,d()});var c=!1;return function(g){if(!p&&!c)return c=!0,function(m){return m.setHeader&&"function"==typeof m.abort}(y)?y.abort():"function"==typeof y.destroy?y.destroy():void d(g||new b("pipe"))}}function i(y){y()}function l(y,h){return y.pipe(h)}function r(y){return y.length?"function"!=typeof y[y.length-1]?e:y.pop():e}oe.exports=function(){for(var y=arguments.length,h=new Array(y),s=0;s<y;s++)h[s]=arguments[s];var d,p=r(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new T("streams");var c=h.map(function(g,m){var u=m<h.length-1;return o(g,u,m>0,function(w){d||(d=w),w&&c.forEach(i),u||(c.forEach(i),p(d))})});return h.reduce(l)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(_,oe,se){"use strict";var v=_("../../../errors").codes.ERR_INVALID_OPT_VALUE;oe.exports={getHighWaterMark:function(x,T,b,e){var i,o=null!=(i=T).highWaterMark?i.highWaterMark:e?i[b]:null;if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new v(e?b:"highWaterMark",o);return Math.floor(o)}return x.objectMode?16:16384}}},{"../../../errors":286}],299:[function(_,oe,se){oe.exports=_("events").EventEmitter},{events:84}],300:[function(_,oe,se){"use strict";var v=_("safe-buffer").Buffer,x=v.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function T(s){var d;switch(this.encoding=function(p){var c=function(g){if(!g)return"utf8";for(var m;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(m)return;g=(""+g).toLowerCase(),m=!0}}(p);if("string"!=typeof c&&(v.isEncoding===x||!x(p)))throw new Error("Unknown encoding: "+p);return c||p}(s),this.encoding){case"utf16le":this.text=o,this.end=i,d=4;break;case"utf8":this.fillLast=e,d=4;break;case"base64":this.text=l,this.end=r,d=3;break;default:return this.write=y,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(d)}function b(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function e(s){var d=this.lastTotal-this.lastNeed,p=function(c,g,m){if(128!=(192&g[0]))return c.lastNeed=0,"\ufffd";if(c.lastNeed>1&&g.length>1){if(128!=(192&g[1]))return c.lastNeed=1,"\ufffd";if(c.lastNeed>2&&g.length>2&&128!=(192&g[2]))return c.lastNeed=2,"\ufffd"}}(this,s);return void 0!==p?p:this.lastNeed<=s.length?(s.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,d,0,s.length),void(this.lastNeed-=s.length))}function o(s,d){if((s.length-d)%2==0){var p=s.toString("utf16le",d);if(p){var c=p.charCodeAt(p.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",d,s.length-1)}function i(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function l(s,d){var p=(s.length-d)%3;return 0===p?s.toString("base64",d):(this.lastNeed=3-p,this.lastTotal=3,1===p?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",d,s.length-p))}function r(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function y(s){return s.toString(this.encoding)}function h(s){return s&&s.length?this.write(s):""}se.StringDecoder=T,T.prototype.write=function(s){if(0===s.length)return"";var d,p;if(this.lastNeed){if(void 0===(d=this.fillLast(s)))return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<s.length?d?d+this.text(s,p):this.text(s,p):d||""},T.prototype.end=function(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+"\ufffd":d},T.prototype.text=function(s,d){var p=function(g,m,u){var w=m.length-1;if(w<u)return 0;var f=b(m[w]);return f>=0?(f>0&&(g.lastNeed=f-1),f):--w<u||-2===f?0:(f=b(m[w]))>=0?(f>0&&(g.lastNeed=f-2),f):--w<u||-2===f?0:(f=b(m[w]))>=0?(f>0&&(2===f?f=0:g.lastNeed=f-3),f):0}(this,s,d);if(!this.lastNeed)return s.toString("utf8",d);this.lastTotal=p;var c=s.length-(p-this.lastNeed);return s.copy(this.lastChar,0,c),s.toString("utf8",d,c)},T.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},{"safe-buffer":284}],301:[function(_,oe,se){(function(v,x){(function(){var T=_("assert"),b=_("debug")("stream-parser");function e(p){b("initializing parser stream"),p._parserBytesLeft=0,p._parserBuffers=[],p._parserBuffered=0,p._parserState=-1,p._parserCallback=null,"function"==typeof p.push&&(p._parserOutput=p.push.bind(p)),p._parserInit=!0}function o(p,c){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(p)&&p>0,'can only buffer a finite number of bytes > 0, got "'+p+'"'),this._parserInit||e(this),b("buffering %o bytes",p),this._parserBytesLeft=p,this._parserCallback=c,this._parserState=0}function i(p,c){T(!this._parserCallback,'there is already a "callback" set!'),T(p>0,'can only skip > 0 bytes, got "'+p+'"'),this._parserInit||e(this),b("skipping %o bytes",p),this._parserBytesLeft=p,this._parserCallback=c,this._parserState=1}function l(p,c){T(!this._parserCallback,'There is already a "callback" set!'),T(p>0,'can only pass through > 0 bytes, got "'+p+'"'),this._parserInit||e(this),b("passing through %o bytes",p),this._parserBytesLeft=p,this._parserCallback=c,this._parserState=2}function r(p,c,g){this._parserInit||e(this),b("write(%o bytes)",p.length),"function"==typeof c&&(g=c),s(this,p,null,g)}function y(p,c,g){this._parserInit||e(this),b("transform(%o bytes)",p.length),"function"!=typeof c&&(c=this._parserOutput),s(this,p,c,g)}function h(p,c,g,m){if(p._parserBytesLeft-=c.length,b("%o bytes left for stream piece",p._parserBytesLeft),0===p._parserState?(p._parserBuffers.push(c),p._parserBuffered+=c.length):2===p._parserState&&g(c),0!==p._parserBytesLeft)return m;var u=p._parserCallback;if(u&&0===p._parserState&&p._parserBuffers.length>1&&(c=x.concat(p._parserBuffers,p._parserBuffered)),0!==p._parserState&&(c=null),p._parserCallback=null,p._parserBuffered=0,p._parserState=-1,p._parserBuffers.splice(0),u){var w=[];c&&w.push(c),g&&w.push(g);var f=u.length>w.length;f&&w.push(d(m));var A=u.apply(p,w);if(!f||m===A)return m}}oe.exports=function(p){var c=p&&"function"==typeof p._transform;if(!(c||p&&"function"==typeof p._write))throw new Error("must pass a Writable or Transform stream in");b("extending Parser into stream"),p._bytes=o,p._skipBytes=i,c&&(p._passthrough=l),c?p._transform=y:p._write=r};var s=d(function p(c,g,m,u){return c._parserBytesLeft<=0?u(new Error("got data but not currently parsing anything")):g.length<=c._parserBytesLeft?function(){return h(c,g,m,u)}:function(){var w=g.slice(0,c._parserBytesLeft);return h(c,w,m,function(f){return f?u(f):g.length>w.length?function(){return p(c,g.slice(w.length),m,u)}:void 0})}});function d(p){return function(){for(var c=p.apply(this,arguments);"function"==typeof c;)c=c();return c}}}).call(this)}).call(this,_("_process"),_("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(_,oe,se){(function(v){(function(){function x(){var T;try{T=se.storage.debug}catch(b){}return!T&&void 0!==v&&"env"in v&&(T=v.env.DEBUG),T}(se=oe.exports=_("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},se.formatArgs=function(T){var b=this.useColors;if(T[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+T[0]+(b?"%c ":" ")+"+"+se.humanize(this.diff),b){var e="color: "+this.color;T.splice(1,0,e,"color: inherit");var o=0,i=0;T[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(o++,"%c"===l&&(i=o))}),T.splice(i,0,e)}},se.save=function(T){try{null==T?se.storage.removeItem("debug"):se.storage.debug=T}catch(b){}},se.load=x,se.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},se.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(T){}}(),se.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],se.formatters.j=function(T){try{return JSON.stringify(T)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}},se.enable(x())}).call(this)}).call(this,_("_process"))},{"./debug":303,_process:277}],303:[function(_,oe,se){var v;function x(T){function b(){if(b.enabled){var e=b,o=+new Date;e.diff=o-(v||o),e.prev=v,e.curr=o,v=o;for(var l=new Array(arguments.length),r=0;r<l.length;r++)l[r]=arguments[r];l[0]=se.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var y=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(s,d){if("%%"===s)return s;y++;var p=se.formatters[d];return"function"==typeof p&&(s=p.call(e,l[y]),l.splice(y,1),y--),s}),se.formatArgs.call(e,l),(b.log||se.log||console.log.bind(console)).apply(e,l)}}return b.namespace=T,b.enabled=se.enabled(T),b.useColors=se.useColors(),b.color=function(e){var o,i=0;for(o in e)i=(i<<5)-i+e.charCodeAt(o),i|=0;return se.colors[Math.abs(i)%se.colors.length]}(T),"function"==typeof se.init&&se.init(b),b}(se=oe.exports=x.debug=x.default=x).coerce=function(T){return T instanceof Error?T.stack||T.message:T},se.disable=function(){se.enable("")},se.enable=function(T){se.save(T),se.names=[],se.skips=[];for(var b=("string"==typeof T?T:"").split(/[\s,]+/),e=b.length,o=0;o<e;o++)b[o]&&("-"===(T=b[o].replace(/\*/g,".*?"))[0]?se.skips.push(new RegExp("^"+T.substr(1)+"$")):se.names.push(new RegExp("^"+T+"$")))},se.enabled=function(T){var b,e;for(b=0,e=se.skips.length;b<e;b++)if(se.skips[b].test(T))return!1;for(b=0,e=se.names.length;b<e;b++)if(se.names[b].test(T))return!0;return!1},se.humanize=_("ms"),se.names=[],se.skips=[],se.formatters={}},{ms:304}],304:[function(_,oe,se){var v=1e3,x=6e4,T=60*x,b=24*T;function e(o,i,l){if(!(o<i))return o<1.5*i?Math.floor(o/i)+" "+l:Math.ceil(o/i)+" "+l+"s"}oe.exports=function(o,i){i=i||{};var l,y,r=typeof o;if("string"===r&&o.length>0)return function(y){if(!((y=String(y)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(y);if(h){var s=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*b;case"hours":case"hour":case"hrs":case"hr":case"h":return s*T;case"minutes":case"minute":case"mins":case"min":case"m":return s*x;case"seconds":case"second":case"secs":case"sec":case"s":return s*v;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===r&&!1===isNaN(o))return i.long?e(l=o,b,"day")||e(l,T,"hour")||e(l,x,"minute")||e(l,v,"second")||l+" ms":(y=o)>=b?Math.round(y/b)+"d":y>=T?Math.round(y/T)+"h":y>=x?Math.round(y/x)+"m":y>=v?Math.round(y/v)+"s":y+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}},{}],305:[function(_,oe,se){"use strict";var v=_("parenthesis");oe.exports=function(x,T,b){if(null==x)throw Error("First argument should be a string");if(null==T)throw Error("Separator should be a string or a RegExp");b?("string"==typeof b||Array.isArray(b))&&(b={ignore:b}):b={},null==b.escape&&(b.escape=!0),null==b.ignore?b.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof b.ignore&&(b.ignore=[b.ignore]),b.ignore=b.ignore.map(function(h){return 1===h.length&&(h+=h),h}));var e=v.parse(x,{flat:!0,brackets:b.ignore}),o=e[0].split(T);if(b.escape){for(var i=[],l=0;l<o.length;l++){var r=o[l];"\\"===r[r.length-1]&&"\\"!==r[r.length-2]?(i.push(r+T+o[l+1]),l++):i.push(r)}o=i}for(l=0;l<o.length;l++)e[0]=o[l],o[l]=v.stringify(e,{flat:!0});return o}},{parenthesis:248}],306:[function(_,oe,se){"use strict";oe.exports=function(v){for(var x=v.length,T=new Array(x),b=new Array(x),e=new Array(x),o=new Array(x),i=new Array(x),l=new Array(x),r=0;r<x;++r)T[r]=-1,b[r]=0,e[r]=!1,o[r]=0,i[r]=-1,l[r]=[];var y,h=0,s=[],d=[];function p(m){var u=[m],w=[m];for(T[m]=b[m]=h,e[m]=!0,h+=1;w.length>0;){var f=v[m=w[w.length-1]];if(o[m]<f.length){for(var A=o[m];A<f.length;++A){var M=f[A];if(T[M]<0){T[M]=b[M]=h,e[M]=!0,h+=1,u.push(M),w.push(M);break}e[M]&&(b[m]=0|Math.min(b[m],b[M])),i[M]>=0&&l[m].push(i[M])}o[m]=A}else{if(b[m]===T[m]){var k=[],E=[],P=0;for(A=u.length-1;A>=0;--A){var D=u[A];if(e[D]=!1,k.push(D),E.push(l[D]),P+=l[D].length,i[D]=s.length,D===m){u.length=A;break}}s.push(k);var F=new Array(P);for(A=0;A<E.length;A++)for(var R=0;R<E[A].length;R++)F[--P]=E[A][R];d.push(F)}w.pop()}}}for(r=0;r<x;++r)T[r]<0&&p(r);for(r=0;r<d.length;r++){var c=d[r];if(0!==c.length){c.sort(function(m,u){return m-u}),y=[c[0]];for(var g=1;g<c.length;g++)c[g]!==c[g-1]&&y.push(c[g]);d[r]=y}}return{components:s,adjacencyList:d}}},{}],307:[function(_,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var x=2*Math.PI,T=function(o,i,l,r,y,h,s){var d=o.x,p=o.y;return{x:r*(d*=i)-y*(p*=l)+h,y:y*d+r*p+s}},b=function(o,i){var l=1.5707963267948966===i?.551915024494:-1.5707963267948966===i?-.551915024494:1.3333333333333333*Math.tan(i/4),r=Math.cos(o),y=Math.sin(o),h=Math.cos(o+i),s=Math.sin(o+i);return[{x:r-y*l,y:y+r*l},{x:h+s*l,y:s-h*l},{x:h,y:s}]},e=function(o,i,l,r){var y=o*l+i*r;return y>1&&(y=1),y<-1&&(y=-1),(o*r-i*l<0?-1:1)*Math.acos(y)};se.default=function(o){var i=o.px,l=o.py,r=o.cx,y=o.cy,h=o.rx,s=o.ry,d=o.xAxisRotation,p=void 0===d?0:d,c=o.largeArcFlag,g=void 0===c?0:c,m=o.sweepFlag,u=void 0===m?0:m,w=[];if(0===h||0===s)return[];var f=Math.sin(p*x/360),A=Math.cos(p*x/360),M=A*(i-r)/2+f*(l-y)/2,k=-f*(i-r)/2+A*(l-y)/2;if(0===M&&0===k)return[];h=Math.abs(h),s=Math.abs(s);var E=Math.pow(M,2)/Math.pow(h,2)+Math.pow(k,2)/Math.pow(s,2);E>1&&(h*=Math.sqrt(E),s*=Math.sqrt(E));var D=function(o,i){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return function(l,r){var y=[],h=!0,s=!1,d=void 0;try{for(var p,c=l[Symbol.iterator]();!(h=(p=c.next()).done)&&(y.push(p.value),!r||y.length!==r);h=!0);}catch(g){s=!0,d=g}finally{try{!h&&c.return&&c.return()}finally{if(s)throw d}}return y}(o,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(Y,Q,re,$,J,ie,j,q,W,ae,G,ee){var te=Math.pow(J,2),le=Math.pow(ie,2),ue=Math.pow(G,2),de=Math.pow(ee,2),he=te*le-te*de-le*ue;he<0&&(he=0),he/=te*de+le*ue;var be=(he=Math.sqrt(he)*(j===q?-1:1))*J/ie*ee,me=he*-ie/J*G,_e=ae*be-W*me+(Y+re)/2,Ee=W*be+ae*me+(Q+$)/2,De=(G-be)/J,Se=(ee-me)/ie,Fe=(-G-be)/J,ve=(-ee-me)/ie,Te=e(1,0,De,Se),Ie=e(De,Se,Fe,ve);return 0===q&&Ie>0&&(Ie-=x),1===q&&Ie<0&&(Ie+=x),[_e,Ee,Te,Ie]}(i,l,r,y,h,s,g,u,f,A,M,k),4),F=D[0],R=D[1],L=D[2],I=D[3],B=Math.abs(I)/(x/4);Math.abs(1-B)<1e-7&&(B=1);var V=Math.max(Math.ceil(B),1);I/=V;for(var Z=0;Z<V;Z++)w.push(b(L,I)),L+=I;return w.map(function(Y){var Q=T(Y[0],h,s,A,f,F,R),re=Q.x,$=Q.y,J=T(Y[1],h,s,A,f,F,R),ie=J.x,j=J.y,q=T(Y[2],h,s,A,f,F,R);return{x1:re,y1:$,x2:ie,y2:j,x:q.x,y:q.y}})},oe.exports=se.default},{}],308:[function(_,oe,se){"use strict";var v=_("parse-svg-path"),x=_("abs-svg-path"),T=_("normalize-svg-path"),b=_("is-svg-path"),e=_("assert");oe.exports=function(o){if(Array.isArray(o)&&1===o.length&&"string"==typeof o[0]&&(o=o[0]),"string"==typeof o&&(e(b(o),"String is not an SVG path."),o=v(o)),e(Array.isArray(o),"Argument should be a string or an array of path segments."),o=x(o),!(o=T(o)).length)return[0,0,0,0];for(var i=[1/0,1/0,-1/0,-1/0],l=0,r=o.length;l<r;l++)for(var y=o[l].slice(1),h=0;h<y.length;h+=2)y[h+0]<i[0]&&(i[0]=y[h+0]),y[h+1]<i[1]&&(i[1]=y[h+1]),y[h+0]>i[2]&&(i[2]=y[h+0]),y[h+1]>i[3]&&(i[3]=y[h+1]);return i}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(_,oe,se){"use strict";oe.exports=function(b){for(var e,o=[],i=0,l=0,r=0,y=0,h=null,s=null,d=0,p=0,c=0,g=b.length;c<g;c++){var m=b[c],u=m[0];switch(u){case"M":r=m[1],y=m[2];break;case"A":var w=v({px:d,py:p,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!w.length)continue;for(var f,A=0;A<w.length;A++)m=["C",(f=w[A]).x1,f.y1,f.x2,f.y2,f.x,f.y],A<w.length-1&&o.push(m);break;case"S":var M=d,k=p;"C"!=e&&"S"!=e||(M+=M-i,k+=k-l),m=["C",M,k,m[1],m[2],m[3],m[4]];break;case"T":"Q"==e||"T"==e?(h=2*d-h,s=2*p-s):(h=d,s=p),m=T(d,p,h,s,m[1],m[2]);break;case"Q":h=m[1],s=m[2],m=T(d,p,m[1],m[2],m[3],m[4]);break;case"L":m=x(d,p,m[1],m[2]);break;case"H":m=x(d,p,m[1],p);break;case"V":m=x(d,p,d,m[1]);break;case"Z":m=x(d,p,r,y)}e=u,d=m[m.length-2],p=m[m.length-1],m.length>4?(i=m[m.length-4],l=m[m.length-3]):(i=d,l=p),o.push(m)}return o};var v=_("svg-arc-to-cubic-bezier");function x(b,e,o,i){return["C",b,e,o,i,o,i]}function T(b,e,o,i,l,r){return["C",b/3+2/3*o,e/3+2/3*i,l/3+2/3*o,r/3+2/3*i,l,r]}},{"svg-arc-to-cubic-bezier":307}],310:[function(_,oe,se){"use strict";var v,x=_("svg-path-bounds"),T=_("parse-svg-path"),b=_("draw-svg-path"),e=_("is-svg-path"),o=_("bitmap-sdf"),i=document.createElement("canvas"),l=i.getContext("2d");oe.exports=function(r,y){if(!e(r))throw Error("Argument should be valid svg path string");var h,s;y||(y={}),y.shape?(h=y.shape[0],s=y.shape[1]):(h=i.width=y.w||y.width||200,s=i.height=y.h||y.height||200);var d=Math.min(h,s),p=y.stroke||0,c=y.viewbox||y.viewBox||x(r),g=[h/(c[2]-c[0]),s/(c[3]-c[1])],m=Math.min(g[0]||0,g[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,h,s),l.fillStyle="white",p&&("number"!=typeof p&&(p=1),l.strokeStyle=p>0?"white":"black",l.lineWidth=Math.abs(p)),l.translate(.5*h,.5*s),l.scale(m,m),function(){if(null!=v)return v;var f=document.createElement("canvas").getContext("2d");if(f.canvas.width=f.canvas.height=1,!window.Path2D)return v=!1;var A=new Path2D("M0,0h1v1h-1v-1Z");f.fillStyle="black",f.fill(A);var M=f.getImageData(0,0,1,1);return v=M&&M.data&&255===M.data[3]}()){var u=new Path2D(r);l.fill(u),p&&l.stroke(u)}else{var w=T(r);b(l,w),l.fill(),p&&l.stroke()}return l.setTransform(1,0,0,1,0,0),o(l,{cutoff:null!=y.cutoff?y.cutoff:.5,radius:null!=y.radius?y.radius:.5*d})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(_,oe,se){(function(v,x){(function(){var T=_("process/browser.js").nextTick,b=Function.prototype.apply,e=Array.prototype.slice,o={},i=0;function l(r,y){this._id=r,this._clearFn=y}se.setTimeout=function(){return new l(b.call(setTimeout,window,arguments),clearTimeout)},se.setInterval=function(){return new l(b.call(setInterval,window,arguments),clearInterval)},se.clearTimeout=se.clearInterval=function(r){r.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},se.enroll=function(r,y){clearTimeout(r._idleTimeoutId),r._idleTimeout=y},se.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},se._unrefActive=se.active=function(r){clearTimeout(r._idleTimeoutId);var y=r._idleTimeout;y>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},y))},se.setImmediate="function"==typeof v?v:function(r){var y=i++,h=!(arguments.length<2)&&e.call(arguments,1);return o[y]=!0,T(function(){o[y]&&(h?r.apply(null,h):r.call(null),se.clearImmediate(y))}),y},se.clearImmediate="function"==typeof x?x:function(r){delete o[r]}}).call(this)}).call(this,_("timers").setImmediate,_("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(_,oe,se){!function(v){var x=/^\s+/,T=/\s+$/,b=0,e=v.round,o=v.min,i=v.max,l=v.random;function r(W,ae){if(ae=ae||{},(W=W||"")instanceof r)return W;if(!(this instanceof r))return new r(W,ae);var ee,Ee,De,te,le,ue,de,he,be,me,G=(te={r:0,g:0,b:0},le=1,ue=null,de=null,he=null,be=!1,me=!1,"string"==typeof(ee=W)&&(ee=function(Se){Se=Se.replace(x,"").replace(T,"").toLowerCase();var Fe,ve=!1;if(F[Se])Se=F[Se],ve=!0;else if("transparent"==Se)return{r:0,g:0,b:0,a:0,format:"name"};return(Fe=j.rgb.exec(Se))?{r:Fe[1],g:Fe[2],b:Fe[3]}:(Fe=j.rgba.exec(Se))?{r:Fe[1],g:Fe[2],b:Fe[3],a:Fe[4]}:(Fe=j.hsl.exec(Se))?{h:Fe[1],s:Fe[2],l:Fe[3]}:(Fe=j.hsla.exec(Se))?{h:Fe[1],s:Fe[2],l:Fe[3],a:Fe[4]}:(Fe=j.hsv.exec(Se))?{h:Fe[1],s:Fe[2],v:Fe[3]}:(Fe=j.hsva.exec(Se))?{h:Fe[1],s:Fe[2],v:Fe[3],a:Fe[4]}:(Fe=j.hex8.exec(Se))?{r:V(Fe[1]),g:V(Fe[2]),b:V(Fe[3]),a:re(Fe[4]),format:ve?"name":"hex8"}:(Fe=j.hex6.exec(Se))?{r:V(Fe[1]),g:V(Fe[2]),b:V(Fe[3]),format:ve?"name":"hex"}:(Fe=j.hex4.exec(Se))?{r:V(Fe[1]+""+Fe[1]),g:V(Fe[2]+""+Fe[2]),b:V(Fe[3]+""+Fe[3]),a:re(Fe[4]+""+Fe[4]),format:ve?"name":"hex8"}:!!(Fe=j.hex3.exec(Se))&&{r:V(Fe[1]+""+Fe[1]),g:V(Fe[2]+""+Fe[2]),b:V(Fe[3]+""+Fe[3]),format:ve?"name":"hex"}}(ee)),"object"==typeof ee&&(q(ee.r)&&q(ee.g)&&q(ee.b)?(Ee=ee.g,De=ee.b,te={r:255*I(ee.r,255),g:255*I(Ee,255),b:255*I(De,255)},be=!0,me="%"===String(ee.r).substr(-1)?"prgb":"rgb"):q(ee.h)&&q(ee.s)&&q(ee.v)?(ue=Y(ee.s),de=Y(ee.v),te=function(Se,Fe,ve){Se=6*I(Se,360),Fe=I(Fe,100),ve=I(ve,100);var Te=v.floor(Se),Ie=Se-Te,Ce=ve*(1-Fe),Re=ve*(1-Ie*Fe),Ue=ve*(1-(1-Ie)*Fe),qe=Te%6;return{r:255*[ve,Re,Ce,Ce,Ue,ve][qe],g:255*[Ue,ve,ve,Re,Ce,Ce][qe],b:255*[Ce,Ce,Ue,ve,ve,Re][qe]}}(ee.h,ue,de),be=!0,me="hsv"):q(ee.h)&&q(ee.s)&&q(ee.l)&&(ue=Y(ee.s),he=Y(ee.l),te=function(Se,Fe,ve){var Te,Ie,Ce;function Re(Xe,st,He){return He<0&&(He+=1),He>1&&(He-=1),He<1/6?Xe+6*(st-Xe)*He:He<.5?st:He<2/3?Xe+(st-Xe)*(2/3-He)*6:Xe}if(Se=I(Se,360),Fe=I(Fe,100),ve=I(ve,100),0===Fe)Te=Ie=Ce=ve;else{var Ue=ve<.5?ve*(1+Fe):ve+Fe-ve*Fe,qe=2*ve-Ue;Te=Re(qe,Ue,Se+1/3),Ie=Re(qe,Ue,Se),Ce=Re(qe,Ue,Se-1/3)}return{r:255*Te,g:255*Ie,b:255*Ce}}(ee.h,ue,he),be=!0,me="hsl"),ee.hasOwnProperty("a")&&(le=ee.a)),le=L(le),{ok:be,format:ee.format||me,r:o(255,i(te.r,0)),g:o(255,i(te.g,0)),b:o(255,i(te.b,0)),a:le});this._originalInput=W,this._r=G.r,this._g=G.g,this._b=G.b,this._a=G.a,this._roundA=e(100*this._a)/100,this._format=ae.format||G.format,this._gradientType=ae.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=G.ok,this._tc_id=b++}function y(W,ae,G){W=I(W,255),ae=I(ae,255),G=I(G,255);var ee,te,le=i(W,ae,G),ue=o(W,ae,G),de=(le+ue)/2;if(le==ue)ee=te=0;else{var he=le-ue;switch(te=de>.5?he/(2-le-ue):he/(le+ue),le){case W:ee=(ae-G)/he+(ae<G?6:0);break;case ae:ee=(G-W)/he+2;break;case G:ee=(W-ae)/he+4}ee/=6}return{h:ee,s:te,l:de}}function h(W,ae,G){W=I(W,255),ae=I(ae,255),G=I(G,255);var ee,te,le=i(W,ae,G),ue=o(W,ae,G),de=le,he=le-ue;if(te=0===le?0:he/le,le==ue)ee=0;else{switch(le){case W:ee=(ae-G)/he+(ae<G?6:0);break;case ae:ee=(G-W)/he+2;break;case G:ee=(W-ae)/he+4}ee/=6}return{h:ee,s:te,v:de}}function s(W,ae,G,ee){var te=[Z(e(W).toString(16)),Z(e(ae).toString(16)),Z(e(G).toString(16))];return ee&&te[0].charAt(0)==te[0].charAt(1)&&te[1].charAt(0)==te[1].charAt(1)&&te[2].charAt(0)==te[2].charAt(1)?te[0].charAt(0)+te[1].charAt(0)+te[2].charAt(0):te.join("")}function d(W,ae,G,ee){return[Z(Q(ee)),Z(e(W).toString(16)),Z(e(ae).toString(16)),Z(e(G).toString(16))].join("")}function p(W,ae){ae=0===ae?0:ae||10;var G=r(W).toHsl();return G.s-=ae/100,G.s=B(G.s),r(G)}function c(W,ae){ae=0===ae?0:ae||10;var G=r(W).toHsl();return G.s+=ae/100,G.s=B(G.s),r(G)}function g(W){return r(W).desaturate(100)}function m(W,ae){ae=0===ae?0:ae||10;var G=r(W).toHsl();return G.l+=ae/100,G.l=B(G.l),r(G)}function u(W,ae){ae=0===ae?0:ae||10;var G=r(W).toRgb();return G.r=i(0,o(255,G.r-e(-ae/100*255))),G.g=i(0,o(255,G.g-e(-ae/100*255))),G.b=i(0,o(255,G.b-e(-ae/100*255))),r(G)}function w(W,ae){ae=0===ae?0:ae||10;var G=r(W).toHsl();return G.l-=ae/100,G.l=B(G.l),r(G)}function f(W,ae){var G=r(W).toHsl(),ee=(G.h+ae)%360;return G.h=ee<0?360+ee:ee,r(G)}function A(W){var ae=r(W).toHsl();return ae.h=(ae.h+180)%360,r(ae)}function M(W){var ae=r(W).toHsl(),G=ae.h;return[r(W),r({h:(G+120)%360,s:ae.s,l:ae.l}),r({h:(G+240)%360,s:ae.s,l:ae.l})]}function k(W){var ae=r(W).toHsl(),G=ae.h;return[r(W),r({h:(G+90)%360,s:ae.s,l:ae.l}),r({h:(G+180)%360,s:ae.s,l:ae.l}),r({h:(G+270)%360,s:ae.s,l:ae.l})]}function E(W){var ae=r(W).toHsl(),G=ae.h;return[r(W),r({h:(G+72)%360,s:ae.s,l:ae.l}),r({h:(G+216)%360,s:ae.s,l:ae.l})]}function P(W,ae,G){ae=ae||6,G=G||30;var ee=r(W).toHsl(),te=360/G,le=[r(W)];for(ee.h=(ee.h-(te*ae>>1)+720)%360;--ae;)ee.h=(ee.h+te)%360,le.push(r(ee));return le}function D(W,ae){ae=ae||6;for(var G=r(W).toHsv(),ee=G.h,te=G.s,le=G.v,ue=[],de=1/ae;ae--;)ue.push(r({h:ee,s:te,v:le})),le=(le+de)%1;return ue}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(299*W.r+587*W.g+114*W.b)/1e3},getLuminance:function(){var W,ae,G,ee=this.toRgb();return ae=ee.g/255,G=ee.b/255,.2126*((W=ee.r/255)<=.03928?W/12.92:v.pow((W+.055)/1.055,2.4))+.7152*(ae<=.03928?ae/12.92:v.pow((ae+.055)/1.055,2.4))+.0722*(G<=.03928?G/12.92:v.pow((G+.055)/1.055,2.4))},setAlpha:function(W){return this._a=L(W),this._roundA=e(100*this._a)/100,this},toHsv:function(){var W=h(this._r,this._g,this._b);return{h:360*W.h,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=h(this._r,this._g,this._b),ae=e(360*W.h),G=e(100*W.s),ee=e(100*W.v);return 1==this._a?"hsv("+ae+", "+G+"%, "+ee+"%)":"hsva("+ae+", "+G+"%, "+ee+"%, "+this._roundA+")"},toHsl:function(){var W=y(this._r,this._g,this._b);return{h:360*W.h,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=y(this._r,this._g,this._b),ae=e(360*W.h),G=e(100*W.s),ee=e(100*W.l);return 1==this._a?"hsl("+ae+", "+G+"%, "+ee+"%)":"hsla("+ae+", "+G+"%, "+ee+"%, "+this._roundA+")"},toHex:function(W){return s(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return G=this._g,ee=this._b,te=this._a,le=W,ue=[Z(e(this._r).toString(16)),Z(e(G).toString(16)),Z(e(ee).toString(16)),Z(Q(te))],le&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("");var G,ee,te,le,ue},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*I(this._r,255))+"%",g:e(100*I(this._g,255))+"%",b:e(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*I(this._r,255))+"%, "+e(100*I(this._g,255))+"%, "+e(100*I(this._b,255))+"%)":"rgba("+e(100*I(this._r,255))+"%, "+e(100*I(this._g,255))+"%, "+e(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(W){var ae="#"+d(this._r,this._g,this._b,this._a),G=ae,ee=this._gradientType?"GradientType = 1, ":"";if(W){var te=r(W);G="#"+d(te._r,te._g,te._b,te._a)}return"progid:DXImageTransform.Microsoft.gradient("+ee+"startColorstr="+ae+",endColorstr="+G+")"},toString:function(W){var ae=!!W;W=W||this._format;var G=!1;return ae||!(this._a<1&&this._a>=0)||"hex"!==W&&"hex6"!==W&&"hex3"!==W&&"hex4"!==W&&"hex8"!==W&&"name"!==W?("rgb"===W&&(G=this.toRgbString()),"prgb"===W&&(G=this.toPercentageRgbString()),"hex"!==W&&"hex6"!==W||(G=this.toHexString()),"hex3"===W&&(G=this.toHexString(!0)),"hex4"===W&&(G=this.toHex8String(!0)),"hex8"===W&&(G=this.toHex8String()),"name"===W&&(G=this.toName()),"hsl"===W&&(G=this.toHslString()),"hsv"===W&&(G=this.toHsvString()),G||this.toHexString()):"name"===W&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(W,ae){var G=W.apply(null,[this].concat([].slice.call(ae)));return this._r=G._r,this._g=G._g,this._b=G._b,this.setAlpha(G._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(W,ae){return W.apply(null,[this].concat([].slice.call(ae)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},r.fromRatio=function(W,ae){if("object"==typeof W){var G={};for(var ee in W)W.hasOwnProperty(ee)&&(G[ee]="a"===ee?W[ee]:Y(W[ee]));W=G}return r(W,ae)},r.equals=function(W,ae){return!(!W||!ae)&&r(W).toRgbString()==r(ae).toRgbString()},r.random=function(){return r.fromRatio({r:l(),g:l(),b:l()})},r.mix=function(W,ae,G){G=0===G?0:G||50;var ee=r(W).toRgb(),te=r(ae).toRgb(),le=G/100;return r({r:(te.r-ee.r)*le+ee.r,g:(te.g-ee.g)*le+ee.g,b:(te.b-ee.b)*le+ee.b,a:(te.a-ee.a)*le+ee.a})},r.readability=function(W,ae){var G=r(W),ee=r(ae);return(v.max(G.getLuminance(),ee.getLuminance())+.05)/(v.min(G.getLuminance(),ee.getLuminance())+.05)},r.isReadable=function(W,ae,G){var ee,te,ue,de,he,le=r.readability(W,ae);switch(te=!1,(ue=G,"AA"!==(de=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==de&&(de="AA"),"small"!==(he=(ue.size||"small").toLowerCase())&&"large"!==he&&(he="small"),ee={level:de,size:he}).level+ee.size){case"AAsmall":case"AAAlarge":te=le>=4.5;break;case"AAlarge":te=le>=3;break;case"AAAsmall":te=le>=7}return te},r.mostReadable=function(W,ae,G){var ee,te,le,ue,de=null,he=0;te=(G=G||{}).includeFallbackColors,le=G.level,ue=G.size;for(var be=0;be<ae.length;be++)(ee=r.readability(W,ae[be]))>he&&(he=ee,de=r(ae[be]));return r.isReadable(W,de,{level:le,size:ue})||!te?de:(G.includeFallbackColors=!1,r.mostReadable(W,["#fff","#000"],G))};var F=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=r.hexNames=function(W){var ae={};for(var G in W)W.hasOwnProperty(G)&&(ae[W[G]]=G);return ae}(F);function L(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function I(W,ae){var ee;"string"==typeof(ee=W)&&-1!=ee.indexOf(".")&&1===parseFloat(ee)&&(W="100%");var G=function(ee){return"string"==typeof ee&&-1!=ee.indexOf("%")}(W);return W=o(ae,i(0,parseFloat(W))),G&&(W=parseInt(W*ae,10)/100),v.abs(W-ae)<1e-6?1:W%ae/parseFloat(ae)}function B(W){return o(1,i(0,W))}function V(W){return parseInt(W,16)}function Z(W){return 1==W.length?"0"+W:""+W}function Y(W){return W<=1&&(W=100*W+"%"),W}function Q(W){return v.round(255*parseFloat(W)).toString(16)}function re(W){return V(W)/255}var $,J,ie,j=(J="[\\s|\\(]+("+($="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",ie="[\\s|\\(]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",{CSS_UNIT:new RegExp($),rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function q(W){return!!j.CSS_UNIT.exec(W)}void 0!==oe&&oe.exports?oe.exports=r:window.tinycolor=r}(Math)},{}],313:[function(_,oe,se){"use strict";oe.exports=x,oe.exports.float32=oe.exports.float=x,oe.exports.fract32=oe.exports.fract=function(T,b){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);b instanceof Float32Array||(b=x(T));for(var e=0,o=b.length;e<o;e++)b[e]=T[e]-b[e];return b}return x(T-x(T))};var v=new Float32Array(1);function x(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(v[0]=T,v[0])}},{}],314:[function(_,oe,se){"use strict";var v=_("parse-unit");function x(b,e){var o=v(getComputedStyle(b).getPropertyValue(e));return o[0]*T(o[1],b)}function T(b,e){switch(e=e||document.body,b=(b||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),b){case"%":return e.clientHeight/100;case"ch":case"ex":return function(o,i){var l=document.createElement("div");l.style["font-size"]="128"+o,i.appendChild(l);var r=x(l,"font-size")/128;return i.removeChild(l),r}(b,e);case"em":return x(e,"font-size");case"rem":return x(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}oe.exports=T},{"parse-unit":251}],315:[function(_,oe,se){var v,x;v=this,x=function(v){"use strict";function x(d){return d}function T(d){if(null==d)return x;var p,c,g=d.scale[0],m=d.scale[1],u=d.translate[0],w=d.translate[1];return function(f,A){A||(p=c=0);var M=2,k=f.length,E=new Array(k);for(E[0]=(p+=f[0])*g+u,E[1]=(c+=f[1])*m+w;M<k;)E[M]=f[M],++M;return E}}function b(d){var p,c=T(d.transform),g=1/0,m=g,u=-g,w=-g;function f(M){(M=c(M))[0]<g&&(g=M[0]),M[0]>u&&(u=M[0]),M[1]<m&&(m=M[1]),M[1]>w&&(w=M[1])}function A(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(A);break;case"Point":f(M.coordinates);break;case"MultiPoint":M.coordinates.forEach(f)}}for(p in d.arcs.forEach(function(M){for(var k,E=-1,P=M.length;++E<P;)(k=c(M[E],E))[0]<g&&(g=k[0]),k[0]>u&&(u=k[0]),k[1]<m&&(m=k[1]),k[1]>w&&(w=k[1])}),d.objects)A(d.objects[p]);return[g,m,u,w]}function e(d,p){var c=p.id,g=p.bbox,m=null==p.properties?{}:p.properties,u=o(d,p);return null==c&&null==g?{type:"Feature",properties:m,geometry:u}:null==g?{type:"Feature",id:c,properties:m,geometry:u}:{type:"Feature",id:c,bbox:g,properties:m,geometry:u}}function o(d,p){var c=T(d.transform),g=d.arcs;function m(M,k){k.length&&k.pop();for(var E=g[M<0?~M:M],P=0,D=E.length;P<D;++P)k.push(c(E[P],P));M<0&&function(F,R){for(var L,I=F.length,B=I-R;B<--I;)L=F[B],F[B++]=F[I],F[I]=L}(k,D)}function u(M){return c(M)}function w(M){for(var k=[],E=0,P=M.length;E<P;++E)m(M[E],k);return k.length<2&&k.push(k[0]),k}function f(M){for(var k=w(M);k.length<4;)k.push(k[0]);return k}function A(M){return M.map(f)}return function M(k){var E,P=k.type;switch(P){case"GeometryCollection":return{type:P,geometries:k.geometries.map(M)};case"Point":E=u(k.coordinates);break;case"MultiPoint":E=k.coordinates.map(u);break;case"LineString":E=w(k.arcs);break;case"MultiLineString":E=k.arcs.map(w);break;case"Polygon":E=A(k.arcs);break;case"MultiPolygon":E=k.arcs.map(A);break;default:return null}return{type:P,coordinates:E}}(p)}function i(d,p){var c={},g={},m={},u=[],w=-1;function f(A,M){for(var k in A){var E=A[k];delete M[E.start],delete E.start,delete E.end,E.forEach(function(P){c[P<0?~P:P]=1}),u.push(E)}}return p.forEach(function(A,M){var k,E=d.arcs[A<0?~A:A];E.length<3&&!E[1][0]&&!E[1][1]&&(k=p[++w],p[w]=A,p[M]=k)}),p.forEach(function(A){var M,k,L,I,B,V,E=(V=(B=d.arcs[(L=A)<0?~L:L])[0],d.transform?(I=[0,0],B.forEach(function(Z){I[0]+=Z[0],I[1]+=Z[1]})):I=B[B.length-1],L<0?[I,V]:[V,I]),P=E[0],D=E[1];if(M=m[P])if(delete m[M.end],M.push(A),M.end=D,k=g[D]){delete g[k.start];var F=k===M?M:M.concat(k);g[F.start=M.start]=m[F.end=k.end]=F}else g[M.start]=m[M.end]=M;else if(M=g[D])if(delete g[M.start],M.unshift(A),M.start=P,k=m[P]){delete m[k.end];var R=k===M?M:k.concat(M);g[R.start=k.start]=m[R.end=M.end]=R}else g[M.start]=m[M.end]=M;else g[(M=[A]).start=P]=m[M.end=D]=M}),f(m,g),f(g,m),p.forEach(function(A){c[A<0?~A:A]||u.push([A])}),u}function l(d,p,c){var g,m,u;if(arguments.length>1)g=r(0,p,c);else for(m=0,g=new Array(u=d.arcs.length);m<u;++m)g[m]=m;return{type:"MultiLineString",arcs:i(d,g)}}function r(d,p,c){var g,m=[],u=[];function w(M){var k=M<0?~M:M;(u[k]||(u[k]=[])).push({i:M,g})}function f(M){M.forEach(w)}function A(M){M.forEach(f)}return function M(k){switch(g=k,k.type){case"GeometryCollection":k.geometries.forEach(M);break;case"LineString":f(k.arcs);break;case"MultiLineString":case"Polygon":A(k.arcs);break;case"MultiPolygon":k.arcs.forEach(A)}}(p),u.forEach(null==c?function(M){m.push(M[0].i)}:function(M){c(M[0].g,M[M.length-1].g)&&m.push(M[0].i)}),m}function y(d,p){var c={},g=[],m=[];function u(f){f.forEach(function(A){A.forEach(function(M){(c[M=M<0?~M:M]||(c[M]=[])).push(f)})}),g.push(f)}function w(f){return function(A){for(var M,k=-1,E=A.length,P=A[E-1],D=0;++k<E;)D+=(M=P)[0]*(P=A[k])[1]-M[1]*P[0];return Math.abs(D)}(o(d,{type:"Polygon",arcs:[f]}).coordinates[0])}return p.forEach(function f(A){switch(A.type){case"GeometryCollection":A.geometries.forEach(f);break;case"Polygon":u(A.arcs);break;case"MultiPolygon":A.arcs.forEach(u)}}),g.forEach(function(f){if(!f._){var A=[],M=[f];for(f._=1,m.push(A);f=M.pop();)A.push(f),f.forEach(function(k){k.forEach(function(E){c[E<0?~E:E].forEach(function(P){P._||(P._=1,M.push(P))})})})}}),g.forEach(function(f){delete f._}),{type:"MultiPolygon",arcs:m.map(function(f){var A,M=[];if(f.forEach(function(F){F.forEach(function(R){R.forEach(function(L){c[L<0?~L:L].length<2&&M.push(L)})})}),(A=(M=i(d,M)).length)>1)for(var k,E,P=1,D=w(M[0]);P<A;++P)(k=w(M[P]))>D&&(E=M[0],M[0]=M[P],M[P]=E,D=k);return M}).filter(function(f){return f.length>0})}}function h(d,p){for(var c=0,g=d.length;c<g;){var m=c+g>>>1;d[m]<p?c=m+1:g=m}return c}function s(d){if(null==d)return x;var p,c,g=d.scale[0],m=d.scale[1],u=d.translate[0],w=d.translate[1];return function(f,A){A||(p=c=0);var M=2,k=f.length,E=new Array(k),P=Math.round((f[0]-u)/g),D=Math.round((f[1]-w)/m);for(E[0]=P-p,p=P,E[1]=D-c,c=D;M<k;)E[M]=f[M],++M;return E}}v.bbox=b,v.feature=function(d,p){return"string"==typeof p&&(p=d.objects[p]),"GeometryCollection"===p.type?{type:"FeatureCollection",features:p.geometries.map(function(c){return e(d,c)})}:e(d,p)},v.merge=function(d){return o(d,y.apply(this,arguments))},v.mergeArcs=y,v.mesh=function(d){return o(d,l.apply(this,arguments))},v.meshArcs=l,v.neighbors=function(d){var p={},c=d.map(function(){return[]});function g(F,R){F.forEach(function(L){L<0&&(L=~L);var I=p[L];I?I.push(R):p[L]=[R]})}function m(F,R){F.forEach(function(L){g(L,R)})}var u={LineString:g,MultiLineString:m,Polygon:m,MultiPolygon:function(F,R){F.forEach(function(L){m(L,R)})}};for(var w in d.forEach(function F(R,L){"GeometryCollection"===R.type?R.geometries.forEach(function(I){F(I,L)}):R.type in u&&u[R.type](R.arcs,L)}),p)for(var f=p[w],A=f.length,M=0;M<A;++M)for(var k=M+1;k<A;++k){var E,P=f[M],D=f[k];(E=c[P])[w=h(E,D)]!==D&&E.splice(w,0,D),(E=c[D])[w=h(E,P)]!==P&&E.splice(w,0,P)}return c},v.quantize=function(d,p){if(d.transform)throw new Error("already quantized");if(p&&p.scale)f=d.bbox;else{if(!((c=Math.floor(p))>=2))throw new Error("n must be \u22652");var c,g=(f=d.bbox||b(d))[0],m=f[1],u=f[2],w=f[3];p={scale:[u-g?(u-g)/(c-1):1,w-m?(w-m)/(c-1):1],translate:[g,m]}}var f,A,M=s(p),k=d.objects,E={};function P(F){return M(F)}function D(F){var R;switch(F.type){case"GeometryCollection":R={type:"GeometryCollection",geometries:F.geometries.map(D)};break;case"Point":R={type:"Point",coordinates:P(F.coordinates)};break;case"MultiPoint":R={type:"MultiPoint",coordinates:F.coordinates.map(P)};break;default:return F}return null!=F.id&&(R.id=F.id),null!=F.bbox&&(R.bbox=F.bbox),null!=F.properties&&(R.properties=F.properties),R}for(A in k)E[A]=D(k[A]);return{type:"Topology",bbox:f,transform:p,objects:E,arcs:d.arcs.map(function(F){var R,L=0,I=1,B=F.length,V=new Array(B);for(V[0]=M(F[0],0);++L<B;)((R=M(F[L],L))[0]||R[1])&&(V[I++]=R);return 1===I&&(V[I++]=[0,0]),V.length=I,V})}},v.transform=T,v.untransform=s,Object.defineProperty(v,"__esModule",{value:!0})},x("object"==typeof se&&void 0!==oe?se:(v=v||self).topojson=v.topojson||{})},{}],316:[function(_,oe,se){"use strict";var v=_("../prototype/is");oe.exports=function(x){if("function"!=typeof x||!hasOwnProperty.call(x,"length"))return!1;try{if("number"!=typeof x.length||"function"!=typeof x.call||"function"!=typeof x.apply)return!1}catch(T){return!1}return!v(x)}},{"../prototype/is":323}],317:[function(_,oe,se){"use strict";var v=_("../value/is"),x=_("../object/is"),T=_("../string/coerce"),b=_("./to-short-string"),e=function(o,i){return o.replace("%v",b(i))};oe.exports=function(o,i,l){if(!x(l))throw new TypeError(e(i,o));if(!v(o)){if("default"in l)return l.default;if(l.isOptional)return null}var r=T(l.errorMessage);throw v(r)||(r=i),new TypeError(e(r,o))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(_,oe,se){"use strict";oe.exports=function(v){try{return v.toString()}catch(x){try{return String(v)}catch(T){return null}}}},{}],319:[function(_,oe,se){"use strict";var v=_("./safe-to-string"),x=/[\n\r\u2028\u2029]/g;oe.exports=function(T){var b=v(T);return null===b?"<Non-coercible to string value>":(b.length>100&&(b=b.slice(0,99)+"\u2026"),b=b.replace(x,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(_,oe,se){"use strict";var v=_("../value/is"),x={object:!0,function:!0,undefined:!0};oe.exports=function(T){return!!v(T)&&hasOwnProperty.call(x,typeof T)}},{"../value/is":326}],321:[function(_,oe,se){"use strict";var v=_("../lib/resolve-exception"),x=_("./is");oe.exports=function(T){return x(T)?T:v(T,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(_,oe,se){"use strict";var v=_("../function/is"),x=/^\s*class[\s{/}]/,T=Function.prototype.toString;oe.exports=function(b){return!!v(b)&&!x.test(T.call(b))}},{"../function/is":316}],323:[function(_,oe,se){"use strict";var v=_("../object/is");oe.exports=function(x){if(!v(x))return!1;try{return!!x.constructor&&x.constructor.prototype===x}catch(T){return!1}}},{"../object/is":320}],324:[function(_,oe,se){"use strict";var v=_("../value/is"),x=_("../object/is"),T=Object.prototype.toString;oe.exports=function(b){if(!v(b))return null;if(x(b)){var e=b.toString;if("function"!=typeof e||e===T)return null}try{return""+b}catch(o){return null}}},{"../object/is":320,"../value/is":326}],325:[function(_,oe,se){"use strict";var v=_("../lib/resolve-exception"),x=_("./is");oe.exports=function(T){return x(T)?T:v(T,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(_,oe,se){"use strict";oe.exports=function(v){return null!=v}},{}],327:[function(_,oe,se){(function(v){(function(){"use strict";var x=_("bit-twiddle"),T=_("dup"),b=_("buffer").Buffer;v.__TYPEDARRAY_POOL||(v.__TYPEDARRAY_POOL={UINT8:T([32,0]),UINT16:T([32,0]),UINT32:T([32,0]),BIGUINT64:T([32,0]),INT8:T([32,0]),INT16:T([32,0]),INT32:T([32,0]),BIGINT64:T([32,0]),FLOAT:T([32,0]),DOUBLE:T([32,0]),DATA:T([32,0]),UINT8C:T([32,0]),BUFFER:T([32,0])});var e="undefined"!=typeof Uint8ClampedArray,o="undefined"!=typeof BigUint64Array,i="undefined"!=typeof BigInt64Array,l=v.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=T([32,0])),l.BIGUINT64||(l.BIGUINT64=T([32,0])),l.BIGINT64||(l.BIGINT64=T([32,0])),l.BUFFER||(l.BUFFER=T([32,0]));var r=l.DATA,y=l.BUFFER;function h(D){if(D){var R=x.log2(D.length||D.byteLength);r[R].push(D)}}function s(D){D=x.nextPow2(D);var F=x.log2(D),R=r[F];return R.length>0?R.pop():new ArrayBuffer(D)}function d(D){return new Uint8Array(s(D),0,D)}function p(D){return new Uint16Array(s(2*D),0,D)}function c(D){return new Uint32Array(s(4*D),0,D)}function g(D){return new Int8Array(s(D),0,D)}function m(D){return new Int16Array(s(2*D),0,D)}function u(D){return new Int32Array(s(4*D),0,D)}function w(D){return new Float32Array(s(4*D),0,D)}function f(D){return new Float64Array(s(8*D),0,D)}function A(D){return e?new Uint8ClampedArray(s(D),0,D):d(D)}function M(D){return o?new BigUint64Array(s(8*D),0,D):null}function k(D){return i?new BigInt64Array(s(8*D),0,D):null}function E(D){return new DataView(s(D),0,D)}function P(D){D=x.nextPow2(D);var F=x.log2(D),R=y[F];return R.length>0?R.pop():new b(D)}se.free=function(D){if(b.isBuffer(D))y[x.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var R=0|x.log2(D.length||D.byteLength);r[R].push(D)}},se.freeUint8=se.freeUint16=se.freeUint32=se.freeBigUint64=se.freeInt8=se.freeInt16=se.freeInt32=se.freeBigInt64=se.freeFloat32=se.freeFloat=se.freeFloat64=se.freeDouble=se.freeUint8Clamped=se.freeDataView=function(D){h(D.buffer)},se.freeArrayBuffer=h,se.freeBuffer=function(D){y[x.log2(D.length)].push(D)},se.malloc=function(D,F){if(void 0===F||"arraybuffer"===F)return s(D);switch(F){case"uint8":return d(D);case"uint16":return p(D);case"uint32":return c(D);case"int8":return g(D);case"int16":return m(D);case"int32":return u(D);case"float":case"float32":return w(D);case"double":case"float64":return f(D);case"uint8_clamped":return A(D);case"bigint64":return k(D);case"biguint64":return M(D);case"buffer":return P(D);case"data":case"dataview":return E(D);default:return null}return null},se.mallocArrayBuffer=s,se.mallocUint8=d,se.mallocUint16=p,se.mallocUint32=c,se.mallocInt8=g,se.mallocInt16=m,se.mallocInt32=u,se.mallocFloat32=se.mallocFloat=w,se.mallocFloat64=se.mallocDouble=f,se.mallocUint8Clamped=A,se.mallocBigUint64=M,se.mallocBigInt64=k,se.mallocDataView=E,se.mallocBuffer=P,se.clearCache=function(){for(var D=0;D<32;++D)l.UINT8[D].length=0,l.UINT16[D].length=0,l.UINT32[D].length=0,l.INT8[D].length=0,l.INT16[D].length=0,l.INT32[D].length=0,l.FLOAT[D].length=0,l.DOUBLE[D].length=0,l.BIGUINT64[D].length=0,l.BIGINT64[D].length=0,l.UINT8C[D].length=0,r[D].length=0,y[D].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(_,oe,se){var v=/[\'\"]/;oe.exports=function(x){return x?(v.test(x.charAt(0))&&(x=x.substr(1)),v.test(x.charAt(x.length-1))&&(x=x.substr(0,x.length-1)),x):""}},{}],329:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var b=0,e=T.length;b<e;b++){var o=T[b];for(var i in o)if((void 0===x[i]||Array.isArray(x[i])||v[i]!==x[i])&&i in x){var l;if(!0===o[i])l=x[i];else if(!1===o[i]||"function"==typeof o[i]&&void 0===(l=o[i](x[i],v,x)))continue;v[i]=l}}return v}},{}],330:[function(_,oe,se){(function(v){(function(){function x(T){try{if(!v.localStorage)return!1}catch(e){return!1}var b=v.localStorage[T];return null!=b&&"true"===String(b).toLowerCase()}oe.exports=function(T,b){if(x("noDeprecation"))return T;var e=!1;return function(){if(!e){if(x("throwDeprecation"))throw new Error(b);x("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return T.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(_,oe,se){var v=_("get-canvas-context");oe.exports=function(x){return v("webgl",x)}},{"get-canvas-context":194}],332:[function(_,oe,se){var v=_("../main"),x=_("object-assign"),T=v.instance();function b(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}x(b.prototype=new v.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(h,s){if("string"==typeof h){var d=h.match(o);return d?d[0]:""}var p=this._validateYear(h),c=h.month(),g=""+this.toChineseMonth(p,c);return s&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(p,c)&&(g+="i"),g},monthNames:function(h){if("string"==typeof h){var s=h.match(i);return s?s[0]:""}var d=this._validateYear(h),p=h.month(),c=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(d,p)-1];return this.isIntercalaryMonth(d,p)&&(c="\u95f0"+c),c},monthNamesShort:function(h){if("string"==typeof h){var s=h.match(l);return s?s[0]:""}var d=this._validateYear(h),p=h.month(),c=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(d,p)-1];return this.isIntercalaryMonth(d,p)&&(c="\u95f0"+c),c},parseMonth:function(h,s){h=this._validateYear(h);var d,p=parseInt(s);if(isNaN(p))"\u95f0"===s[0]&&(d=!0,s=s.substring(1)),"\u6708"===s[s.length-1]&&(s=s.substring(0,s.length-1)),p=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(s);else{var c=s[s.length-1];d="i"===c||"I"===c}return this.toMonthIndex(h,p,d)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(h,s){if(h.year&&(h=h.year()),"number"!=typeof h||h<1888||h>2111)throw s.replace(/\{0\}/,this.local.name);return h},toMonthIndex:function(h,s,d){var p=this.intercalaryMonth(h);if(d&&s!==p||s<1||s>12)throw v.local.invalidMonth.replace(/\{0\}/,this.local.name);return p?!d&&s<=p?s-1:s:s-1},toChineseMonth:function(h,s){h.year&&(s=(h=h.year()).month());var d=this.intercalaryMonth(h);if(s<0||s>(d?12:11))throw v.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?s<d?s+1:s:s+1},intercalaryMonth:function(h){return h=this._validateYear(h),r[h-r[0]]>>13},isIntercalaryMonth:function(h,s){h.year&&(s=(h=h.year()).month());var d=this.intercalaryMonth(h);return!!d&&d===s},leapYear:function(h){return 0!==this.intercalaryMonth(h)},weekOfYear:function(h,s,d){var p,c=this._validateYear(h,v.local.invalidyear),g=y[c-y[0]];(p=T.newDate(g>>9&4095,g>>5&15,31&g)).add(4-(p.dayOfWeek()||7),"d");var f=this.toJD(h,s,d)-p.toJD();return 1+Math.floor(f/7)},monthsInYear:function(h){return this.leapYear(h)?13:12},daysInMonth:function(h,s){h.year&&(s=h.month(),h=h.year()),h=this._validateYear(h);var d=r[h-r[0]];if(s>(d>>13?12:11))throw v.local.invalidMonth.replace(/\{0\}/,this.local.name);return d&1<<12-s?30:29},weekDay:function(h,s,d){return(this.dayOfWeek(h,s,d)||7)<6},toJD:function(h,s,d){var p=this._validate(h,g,d,v.local.invalidDate);h=this._validateYear(p.year()),s=p.month(),d=p.day();var c=this.isIntercalaryMonth(h,s),g=this.toChineseMonth(h,s),m=function(u,w,f,A,M){var k,E,P;if("object"==typeof u)E=u,k=w||{};else{var D;if(!("number"==typeof u&&u>=1888&&u<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof w&&w>=1&&w<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof f&&f>=1&&f<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof A?(D=!1,k=A):(D=!!A,k={}),E={year:u,month:w,day:f,isIntercalary:D}}P=E.day-1;var F,R=r[E.year-r[0]],L=R>>13;F=L&&(E.month>L||E.isIntercalary)?E.month:E.month-1;for(var I=0;I<F;I++)P+=R&1<<12-I?30:29;var B=y[E.year-y[0]],V=new Date(B>>9&4095,(B>>5&15)-1,(31&B)+P);return k.year=V.getFullYear(),k.month=1+V.getMonth(),k.day=V.getDate(),k}(h,g,d,c);return T.toJD(m.year,m.month,m.day)},fromJD:function(h){var s=T.fromJD(h),d=function(c,g,m,u){var w,f;if("object"==typeof c)w=c,f=g||{};else{if(!("number"==typeof c&&c>=1888&&c<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof g&&g>=1&&g<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");w={year:c,month:g,day:m},f={}}var A=y[w.year-y[0]];f.year=(w.year<<9|w.month<<5|w.day)>=A?w.year:w.year-1,A=y[f.year-y[0]];var k,E=new Date(A>>9&4095,(A>>5&15)-1,31&A),P=new Date(w.year,w.month-1,w.day);k=Math.round((P-E)/864e5);var D,F=r[f.year-r[0]];for(D=0;D<13;D++){var R=F&1<<12-D?30:29;if(k<R)break;k-=R}var L=F>>13;return!L||D<L?(f.isIntercalary=!1,f.month=1+D):D===L?(f.isIntercalary=!0,f.month=D):(f.isIntercalary=!1,f.month=D),f.day=1+k,f}(s.year(),s.month(),s.day()),p=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,p,d.day)},fromString:function(h){var s=h.match(e),d=this._validateYear(+s[1]),g=this.toMonthIndex(d,+s[2],!!s[3]);return this.newDate(d,g,+s[4])},add:function(h,s,d){var p=h.year(),c=h.month(),g=this.isIntercalaryMonth(p,c),m=this.toChineseMonth(p,c),u=Object.getPrototypeOf(b.prototype).add.call(this,h,s,d);if("y"===d){var w=u.year(),f=u.month(),A=this.isIntercalaryMonth(w,m),M=this.toMonthIndex(w,m,!(!g||!A));M!==f&&u.month(M)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,i=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;v.calendars.chinese=b;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],y=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(_,oe,se){var v=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,v.local.invalidYear);return(b=e.year()+(e.year()<0?1:0))%4==3||b%4==-1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),13},weekOfYear:function(b,e,o){var i=this.newDate(b,e,o);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,v.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return(this.dayOfWeek(b,e,o)||7)<6},toJD:function(b,e,o){var i=this._validate(b,e,o,v.local.invalidDate);return(b=i.year())<0&&b++,i.day()+30*(i.month()-1)+365*(b-1)+Math.floor(b/4)+this.jdEpoch-1},fromJD:function(b){var e=Math.floor(b)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(b)+.5-this.newDate(o,1,1).toJD();var i=Math.floor(e/30)+1;return this.newDate(o,i,e-30*(i-1)+1)}}),v.calendars.coptic=T},{"../main":346,"object-assign":247}],334:[function(_,oe,se){var v=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,v.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,v.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,v.local.invalidYear),400},weekOfYear:function(e,o,i){var l=this.newDate(e,o,i);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(e,o){var i=this._validate(e,o,this.minDay,v.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,o,i){return(this._validate(e,o,i,v.local.invalidDate).day()+1)%8},weekDay:function(e,o,i){var l=this.dayOfWeek(e,o,i);return l>=2&&l<=6},extraInfo:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);return{century:b[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);return e=l.year()+(l.year()<0?1:0),o=l.month(),(i=l.day())+(o>1?16:0)+(o>2?32*(o-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(e/400)+1;e-=400*(o-1),e+=e>15?16:0;var i=Math.floor(e/32)+1;return this.newDate(o<=0?o-1:o,i,e-32*(i-1)+1)}});var b={20:"Fruitbat",21:"Anchovy"};v.calendars.discworld=T},{"../main":346,"object-assign":247}],335:[function(_,oe,se){var v=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,v.local.invalidYear);return(b=e.year()+(e.year()<0?1:0))%4==3||b%4==-1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),13},weekOfYear:function(b,e,o){var i=this.newDate(b,e,o);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,v.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return(this.dayOfWeek(b,e,o)||7)<6},toJD:function(b,e,o){var i=this._validate(b,e,o,v.local.invalidDate);return(b=i.year())<0&&b++,i.day()+30*(i.month()-1)+365*(b-1)+Math.floor(b/4)+this.jdEpoch-1},fromJD:function(b){var e=Math.floor(b)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(b)+.5-this.newDate(o,1,1).toJD();var i=Math.floor(e/30)+1;return this.newDate(o,i,e-30*(i-1)+1)}}),v.calendars.ethiopian=T},{"../main":346,"object-assign":247}],336:[function(_,oe,se){var v=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function b(e,o){return e-o*Math.floor(e/o)}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(e){return b(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,v.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,o,i){var l=this.newDate(e,o,i);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,o){return e.year&&(o=e.month(),e=e.year()),this._validate(e,o,this.minDay,v.local.invalidMonth),12===o&&this.leapYear(e)||8===o&&5===b(this.daysInYear(e),10)?30:9===o&&3===b(this.daysInYear(e),10)?29:this.daysPerMonth[o-1]},weekDay:function(e,o,i){return 6!==this.dayOfWeek(e,o,i)},extraInfo:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);e=l.year(),o=l.month(),i=l.day();var r=e<=0?e+1:e,y=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(o<7){for(var h=7;h<=this.monthsInYear(e);h++)y+=this.daysInMonth(e,h);for(h=1;h<o;h++)y+=this.daysInMonth(e,h)}else for(h=7;h<o;h++)y+=this.daysInMonth(e,h);return y},_delay1:function(e){var o=Math.floor((235*e-234)/19),l=29*o+Math.floor((12084+13753*o)/25920);return b(3*(l+1),7)<3&&l++,l},_delay2:function(e){var o=this._delay1(e-1),i=this._delay1(e);return this._delay1(e+1)-i==356?2:i-o==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var o=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===o?1:o+1,7,1);)o++;for(var i=e<this.toJD(o,1,1)?7:1;e>this.toJD(o,i,this.daysInMonth(o,i));)i++;var l=e-this.toJD(o,i,1)+1;return this.newDate(o,i,l)}}),v.calendars.hebrew=T},{"../main":346,"object-assign":247}],337:[function(_,oe,se){var v=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){return(11*this._validate(b,this.minMonth,this.minDay,v.local.invalidYear).year()+14)%30<11},weekOfYear:function(b,e,o){var i=this.newDate(b,e,o);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(b){return this.leapYear(b)?355:354},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,v.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(12===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return 5!==this.dayOfWeek(b,e,o)},toJD:function(b,e,o){var i=this._validate(b,e,o,v.local.invalidDate);return b=i.year(),e=i.month(),b=b<=0?b+1:b,(o=i.day())+Math.ceil(29.5*(e-1))+354*(b-1)+Math.floor((3+11*b)/30)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b)+.5;var e=Math.floor((30*(b-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var o=Math.min(12,Math.ceil((b-29-this.toJD(e,1,1))/29.5)+1),i=b-this.toJD(e,o,1)+1;return this.newDate(e,o,i)}}),v.calendars.islamic=T},{"../main":346,"object-assign":247}],338:[function(_,oe,se){var v=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,v.local.invalidYear);return(b=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(b,e,o){var i=this.newDate(b,e,o);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,v.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(2===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return(this.dayOfWeek(b,e,o)||7)<6},toJD:function(b,e,o){var i=this._validate(b,e,o,v.local.invalidDate);return b=i.year(),e=i.month(),o=i.day(),b<0&&b++,e<=2&&(b--,e+=12),Math.floor(365.25*(b+4716))+Math.floor(30.6001*(e+1))+o-1524.5},fromJD:function(b){var e=Math.floor(b+.5)+1524,o=Math.floor((e-122.1)/365.25),i=Math.floor(365.25*o),l=Math.floor((e-i)/30.6001),r=l-Math.floor(l<14?1:13),y=o-Math.floor(r>2?4716:4715),h=e-i-Math.floor(30.6001*l);return y<=0&&y--,this.newDate(y,r,h)}}),v.calendars.julian=T},{"../main":346,"object-assign":247}],339:[function(_,oe,se){var v=_("../main");function T(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}function b(o,i){return o-i*Math.floor(o/i)}function e(o,i){return b(o-1,i)+1}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,v.local.invalidYear),!1},formatYear:function(o){o=this._validate(o,this.minMonth,this.minDay,v.local.invalidYear).year();var i=Math.floor(o/400);return o%=400,o+=o<0?400:0,i+"."+Math.floor(o/20)+"."+o%20},forYear:function(o){if((o=o.split(".")).length<3)throw"Invalid Mayan year";for(var i=0,l=0;l<o.length;l++){var r=parseInt(o[l],10);if(Math.abs(r)>19||l>0&&r<0)throw"Invalid Mayan year";i=20*i+r}return i},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,v.local.invalidYear),18},weekOfYear:function(o,i,l){return this._validate(o,i,l,v.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,v.local.invalidYear),360},daysInMonth:function(o,i){return this._validate(o,i,this.minDay,v.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,i,l){return this._validate(o,i,l,v.local.invalidDate).day()},weekDay:function(o,i,l){return this._validate(o,i,l,v.local.invalidDate),!0},extraInfo:function(o,i,l){var r=this._validate(o,i,l,v.local.invalidDate).toJD(),y=this._toHaab(r),h=this._toTzolkin(r);return{haabMonthName:this.local.haabMonths[y[0]-1],haabMonth:y[0],haabDay:y[1],tzolkinDayName:this.local.tzolkinMonths[h[0]-1],tzolkinDay:h[0],tzolkinTrecena:h[1]}},_toHaab:function(o){var i=b(8+(o-=this.jdEpoch)+340,365);return[Math.floor(i/20)+1,b(i,20)]},_toTzolkin:function(o){return[e(20+(o-=this.jdEpoch),20),e(o+4,13)]},toJD:function(o,i,l){var r=this._validate(o,i,l,v.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var i=Math.floor(o/360);o%=360,o+=o<0?360:0;var l=Math.floor(o/20);return this.newDate(i,l,o%20)}}),v.calendars.mayan=T},{"../main":346,"object-assign":247}],340:[function(_,oe,se){var v=_("../main"),x=_("object-assign");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new v.baseCalendar;var b=v.instance("gregorian");x(T.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return b.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(e,o,i){var l=this.newDate(e,o,i);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var i=this._validate(e,o,this.minDay,v.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,o,i){return(this.dayOfWeek(e,o,i)||7)<6},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidMonth);(e=l.year())<0&&e++;for(var r=l.day(),y=1;y<l.month();y++)r+=this.daysPerMonth[y-1];return r+b.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var o=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(o+1,1,1);)o++;for(var i=e-Math.floor(this.toJD(o,1,1)+.5)+1,l=1;i>this.daysInMonth(o,l);)i-=this.daysInMonth(o,l),l++;return this.newDate(o,l,i)}}),v.calendars.nanakshahi=T},{"../main":346,"object-assign":247}],341:[function(_,oe,se){var v=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(b){return this.daysInYear(b)!==this.daysPerYear},weekOfYear:function(b,e,o){var i=this.newDate(b,e,o);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(b){if(b=this._validate(b,this.minMonth,this.minDay,v.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[b])return this.daysPerYear;for(var e=0,o=this.minMonth;o<=12;o++)e+=this.NEPALI_CALENDAR_DATA[b][o];return e},daysInMonth:function(b,e){return b.year&&(e=b.month(),b=b.year()),this._validate(b,e,this.minDay,v.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[b]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[b][e]},weekDay:function(b,e,o){return 6!==this.dayOfWeek(b,e,o)},toJD:function(b,e,o){var i=this._validate(b,e,o,v.local.invalidDate);b=i.year(),e=i.month(),o=i.day();var l=v.instance(),r=0,y=e,h=b;this._createMissingCalendarData(b);var s=b-(y>9||9===y&&o>=this.NEPALI_CALENDAR_DATA[h][0]?56:57);for(9!==e&&(r=o,y--);9!==y;)y<=0&&(y=12,h--),r+=this.NEPALI_CALENDAR_DATA[h][y],y--;return 9===e?(r+=o-this.NEPALI_CALENDAR_DATA[h][0])<0&&(r+=l.daysInYear(s)):r+=this.NEPALI_CALENDAR_DATA[h][9]-this.NEPALI_CALENDAR_DATA[h][0],l.newDate(s,1,1).add(r,"d").toJD()},fromJD:function(b){var e=v.instance().fromJD(b),o=e.year(),i=e.dayOfYear(),l=o+56;this._createMissingCalendarData(l);for(var r=9,h=this.NEPALI_CALENDAR_DATA[l][r]-this.NEPALI_CALENDAR_DATA[l][0]+1;i>h;)++r>12&&(r=1,l++),h+=this.NEPALI_CALENDAR_DATA[l][r];return this.newDate(l,r,this.NEPALI_CALENDAR_DATA[l][r]-(h-i))},_createMissingCalendarData:function(b){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var o=b-1;o<b+2;o++)void 0===this.NEPALI_CALENDAR_DATA[o]&&(this.NEPALI_CALENDAR_DATA[o]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),v.calendars.nepali=T},{"../main":346,"object-assign":247}],342:[function(_,oe,se){var v=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function b(e,o){return e-o*Math.floor(e/o)}_("object-assign")(T.prototype=new v.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return 682*((o.year()-(o.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,o,i){var l=this.newDate(e,o,i);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var i=this._validate(e,o,this.minDay,v.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,o,i){return 5!==this.dayOfWeek(e,o,i)},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);e=l.year(),o=l.month(),i=l.day();var r=e-(e>=0?474:473),y=474+b(r,2820);return i+(o<=7?31*(o-1):30*(o-1)+6)+Math.floor((682*y-110)/2816)+365*(y-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var o=(e=Math.floor(e)+.5)-this.toJD(475,1,1),i=Math.floor(o/1029983),l=b(o,1029983),r=2820;if(1029982!==l){var y=Math.floor(l/366),h=b(l,366);r=Math.floor((2134*y+2816*h+2815)/1028522)+y+1}var s=r+2820*i+474,d=e-this.toJD(s=s<=0?s-1:s,1,1)+1,p=d<=186?Math.ceil(d/31):Math.ceil((d-6)/30),c=e-this.toJD(s,p,1)+1;return this.newDate(s,p,c)}}),v.calendars.persian=T,v.calendars.jalali=T},{"../main":346,"object-assign":247}],343:[function(_,oe,se){var v=_("../main"),x=_("object-assign"),T=v.instance();function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(b.prototype=new v.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return e=this._t2gYear(o.year()),T.leapYear(e)},weekOfYear:function(e,o,i){var l=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return e=this._t2gYear(l.year()),T.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var i=this._validate(e,o,this.minDay,v.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,o,i){return(this.dayOfWeek(e,o,i)||7)<6},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);return e=this._t2gYear(l.year()),T.toJD(e,l.month(),l.day())},fromJD:function(e){var o=T.fromJD(e),i=this._g2tYear(o.year());return this.newDate(i,o.month(),o.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),v.calendars.taiwan=b},{"../main":346,"object-assign":247}],344:[function(_,oe,se){var v=_("../main"),x=_("object-assign"),T=v.instance();function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(b.prototype=new v.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return e=this._t2gYear(o.year()),T.leapYear(e)},weekOfYear:function(e,o,i){var l=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return e=this._t2gYear(l.year()),T.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var i=this._validate(e,o,this.minDay,v.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,o,i){return(this.dayOfWeek(e,o,i)||7)<6},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate);return e=this._t2gYear(l.year()),T.toJD(e,l.month(),l.day())},fromJD:function(e){var o=T.fromJD(e),i=this._g2tYear(o.year());return this.newDate(i,o.month(),o.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),v.calendars.thai=b},{"../main":346,"object-assign":247}],345:[function(_,oe,se){var v=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new v.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear);return 355===this.daysInYear(o.year())},weekOfYear:function(e,o,i){var l=this.newDate(e,o,i);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var o=0,i=1;i<=12;i++)o+=this.daysInMonth(e,i);return o},daysInMonth:function(e,o){for(var i=this._validate(e,o,this.minDay,v.local.invalidMonth).toJD()-24e5+.5,l=0,r=0;r<b.length;r++){if(b[r]>i)return b[l]-b[l-1];l++}return 30},weekDay:function(e,o,i){return 5!==this.dayOfWeek(e,o,i)},toJD:function(e,o,i){var l=this._validate(e,o,i,v.local.invalidDate),r=12*(l.year()-1)+l.month()-15292;return l.day()+b[r-1]-1+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,i=0,l=0;l<b.length&&!(b[l]>o);l++)i++;var r=i+15292,y=Math.floor((r-1)/12);return this.newDate(y+1,r-12*y,o-b[i-1]+1)},isValid:function(e,o,i){var l=v.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(e=null!=e.year?e.year:e)>=1276&&e<=1500),l},_validate:function(e,o,i,l){var r=v.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw l.replace(/\{0\}/,this.local.name);return r}}),v.calendars.ummalqura=T;var b=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(_,oe,se){var v=_("object-assign");function x(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function T(l,r,y,h){if(this._calendar=l,this._year=r,this._month=y,this._day=h,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function b(l,r){return"000000".substring(0,r-(l=""+l).length)+l}function e(){this.shortYearCutoff="+10"}function o(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}v(x.prototype,{instance:function(l,r){l=(l||"gregorian").toLowerCase();var y=this._localCals[l+"-"+(r=r||"")];if(!y&&this.calendars[l]&&(y=new this.calendars[l](r),this._localCals[l+"-"+r]=y),!y)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return y},newDate:function(l,r,y,h,s){return(h=(null!=l&&l.year?l.calendar():"string"==typeof h?this.instance(h,s):h)||this.instance()).newDate(l,r,y)},substituteDigits:function(l){return function(r){return(r+"").replace(/[0-9]/g,function(y){return l[y]})}},substituteChineseDigits:function(l,r){return function(y){for(var h="",s=0;y>0;){var d=y%10;h=(0===d?"":l[d]+r[s])+h,s++,y=Math.floor(y/10)}return 0===h.indexOf(l[1]+r[1])&&(h=h.substr(1)),h||l[0]}}}),v(T.prototype,{newDate:function(l,r,y){return this._calendar.newDate(null==l?this:l,r,y)},year:function(l){return 0===arguments.length?this._year:this.set(l,"y")},month:function(l){return 0===arguments.length?this._month:this.set(l,"m")},day:function(l){return 0===arguments.length?this._day:this.set(l,"d")},date:function(l,r,y){if(!this._calendar.isValid(l,r,y))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=r,this._day=y,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,r){return this._calendar.add(this,l,r)},set:function(l,r){return this._calendar.set(this,l,r)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var r=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return 0===r?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+b(Math.abs(this.year()),4)+"-"+b(this.month(),2)+"-"+b(this.day(),2)}}),v(e.prototype,{_validateLevel:0,newDate:function(l,r,y){return null==l?this.today():(l.year&&(this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate),y=l.day(),r=l.month(),l=l.year()),new T(this,l,r,y))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+b(Math.abs(r.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(l,r){var y=this._validate(l,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(y.month()+this.monthsInYear(y)-this.firstMonth)%this.monthsInYear(y)+this.minMonth},fromMonthOfYear:function(l,r){var y=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,y,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),y},daysInYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(l,r,y){var h=this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate);return h.toJD()-this.newDate(h.year(),this.fromMonthOfYear(h.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,r,y){var h=this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(h))+2)%this.daysInWeek()},extraInfo:function(l,r,y){return this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(l,r,y){return this._validate(l,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,r,y),r,y)},_add:function(l,r,y){if(this._validateLevel++,"d"===y||"w"===y){var h=l.toJD()+r*("w"===y?this.daysInWeek():1),s=l.calendar().fromJD(h);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var d=l.year()+("y"===y?r:0),p=l.monthOfYear()+("m"===y?r:0);s=l.day(),"y"===y?(l.month()!==this.fromMonthOfYear(d,p)&&(p=this.newDate(d,l.month(),this.minDay).monthOfYear()),p=Math.min(p,this.monthsInYear(d)),s=Math.min(s,this.daysInMonth(d,this.fromMonthOfYear(d,p)))):"m"===y&&(function(g){for(;p<g.minMonth;)d--,p+=g.monthsInYear(d);for(var m=g.monthsInYear(d);p>m-1+g.minMonth;)d++,p-=m,m=g.monthsInYear(d)}(this),s=Math.min(s,this.daysInMonth(d,this.fromMonthOfYear(d,p))));var c=[d,this.fromMonthOfYear(d,p),s];return this._validateLevel--,c}catch(g){throw this._validateLevel--,g}},_correctAdd:function(l,r,y,h){if(!(this.hasYearZero||"y"!==h&&"m"!==h||0!==r[0]&&l.year()>0==r[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[h];r=this._add(l,y*s[0]+(y<0?-1:1)*s[1],s[2])}return l.date(r[0],r[1],r[2])},set:function(l,r,y){this._validate(l,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var h="y"===y?r:l.year(),s="m"===y?r:l.month(),d="d"===y?r:l.day();return"y"!==y&&"m"!==y||(d=Math.min(d,this.daysInMonth(h,s))),l.date(h,s,d)},isValid:function(l,r,y){this._validateLevel++;var h=this.hasYearZero||0!==l;if(h){var s=this.newDate(l,r,this.minDay);h=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(s)&&y>=this.minDay&&y-this.minDay<this.daysInMonth(s)}return this._validateLevel--,h},toJSDate:function(l,r,y){var h=this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(h)).toJSDate()},fromJSDate:function(l){return this.fromJD(i.instance().fromJSDate(l).toJD())},_validate:function(l,r,y,h){if(l.year){if(0===this._validateLevel&&this.name!==l.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(l,r,y))throw h.replace(/\{0\}/,this.local.name);var s=this.newDate(l,r,y);return this._validateLevel--,s}catch(d){throw this._validateLevel--,d}}}),v(o.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(l=r.year()+(r.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,r,y){var h=this.newDate(l,r,y);return h.add(4-(h.dayOfWeek()||7),"d"),Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(l,r){var y=this._validate(l,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[y.month()-1]+(2===y.month()&&this.leapYear(y.year())?1:0)},weekDay:function(l,r,y){return(this.dayOfWeek(l,r,y)||7)<6},toJD:function(l,r,y){var h=this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate);l=h.year(),r=h.month(),y=h.day(),l<0&&l++,r<3&&(r+=12,l--);var s=Math.floor(l/100),d=2-s+Math.floor(s/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(r+1))+y+d-1524.5},fromJD:function(l){var r=Math.floor(l+.5),y=Math.floor((r-1867216.25)/36524.25),h=1524+(y=r+1+y-Math.floor(y/4)),s=Math.floor((h-122.1)/365.25),d=Math.floor(365.25*s),p=Math.floor((h-d)/30.6001),c=h-d-Math.floor(30.6001*p),g=p-(p>13.5?13:1),m=s-(g>2.5?4716:4715);return m<=0&&m--,this.newDate(m,g,c)},toJSDate:function(l,r,y){var h=this._validate(l,r,y,i.local.invalidDate||i.regionalOptions[""].invalidDate),s=new Date(h.year(),h.month()-1,h.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var i=oe.exports=new x;i.cdate=T,i.baseCalendar=e,i.calendars.gregorian=o},{"object-assign":247}],347:[function(_,oe,se){var v=_("object-assign"),x=_("./main");v(x.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),x.local=x.regionalOptions[""],v(x.cdate.prototype,{formatDate:function(T,b){return"string"!=typeof T&&(b=T,T=""),this._calendar.formatDate(T||"",this,b)}}),v(x.baseCalendar.prototype,{UNIX_EPOCH:x.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:x.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(T,b,e){if("string"!=typeof T&&(e=b,b=T,T=""),!b)return"";if(b.calendar()!==this)throw x.local.invalidFormat||x.regionalOptions[""].invalidFormat;T=T||this.local.dateFormat;for(var i,l,r,y=(e=e||{}).dayNamesShort||this.local.dayNamesShort,h=e.dayNames||this.local.dayNames,s=e.monthNumbers||this.local.monthNumbers,d=e.monthNamesShort||this.local.monthNamesShort,p=e.monthNames||this.local.monthNames,c=function(P,D){for(var F=1;E+F<T.length&&T.charAt(E+F)===P;)F++;return E+=F-1,Math.floor(F/(D||1))>1},g=function(P,D,F,R){var L=""+D;if(c(P,R))for(;L.length<F;)L="0"+L;return L},m=this,w=function(P,D){return D?"function"==typeof p?p.call(m,P):p[P.month()-m.minMonth]:"function"==typeof d?d.call(m,P):d[P.month()-m.minMonth]},f=this.local.digits,A=function(P){return e.localNumbers&&f?f(P):P},M="",k=!1,E=0;E<T.length;E++)if(k)"'"!==T.charAt(E)||c("'")?M+=T.charAt(E):k=!1;else switch(T.charAt(E)){case"d":M+=A(g("d",b.day(),2));break;case"D":M+=("D",i=b.dayOfWeek(),l=y,r=h,c("D")?r[i]:l[i]);break;case"o":M+=g("o",b.dayOfYear(),3);break;case"w":M+=g("w",b.weekOfYear(),2);break;case"m":M+=(P=b,"function"==typeof s?s.call(m,P,c("m")):A(g("m",P.month(),2)));break;case"M":M+=w(b,c("M"));break;case"y":M+=c("y",2)?b.year():(b.year()%100<10?"0":"")+b.year()%100;break;case"Y":c("Y",2),M+=b.formatYear();break;case"J":M+=b.toJD();break;case"@":M+=(b.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":M+=(b.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?M+="'":k=!0;break;default:M+=T.charAt(E)}var P;return M},parseDate:function(T,b,e){if(null==b)throw x.local.invalidArguments||x.regionalOptions[""].invalidArguments;if(""===(b="object"==typeof b?b.toString():b+""))return null;T=T||this.local.dateFormat;var o=(e=e||{}).shortYearCutoff||this.shortYearCutoff;o="string"!=typeof o?o:this.today().year()%100+parseInt(o,10);for(var i=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,y=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,d=-1,p=-1,c=-1,g=-1,m=-1,u=!1,w=!1,f=function(B,V){for(var Z=1;R+Z<T.length&&T.charAt(R+Z)===B;)Z++;return R+=Z-1,Math.floor(Z/(V||1))>1},A=function(B,V){var Z=f(B,V),Y=[2,3,Z?4:2,Z?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],Q=new RegExp("^-?\\d{1,"+Y+"}"),re=b.substring(F).match(Q);if(!re)throw(x.local.missingNumberAt||x.regionalOptions[""].missingNumberAt).replace(/\{0\}/,F);return F+=re[0].length,parseInt(re[0],10)},M=this,k=function(){if("function"==typeof y){f("m");var B=y.call(M,b.substring(F));return F+=B.length,B}return A("m")},E=function(B,V,Z,Y){for(var Q=f(B,Y)?Z:V,re=0;re<Q.length;re++)if(b.substr(F,Q[re].length).toLowerCase()===Q[re].toLowerCase())return F+=Q[re].length,re+M.minMonth;throw(x.local.unknownNameAt||x.regionalOptions[""].unknownNameAt).replace(/\{0\}/,F)},P=function(){if("function"==typeof s){var B=f("M")?s.call(M,b.substring(F)):h.call(M,b.substring(F));return F+=B.length,B}return E("M",h,s)},D=function(){if(b.charAt(F)!==T.charAt(R))throw(x.local.unexpectedLiteralAt||x.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,F);F++},F=0,R=0;R<T.length;R++)if(w)"'"!==T.charAt(R)||f("'")?D():w=!1;else switch(T.charAt(R)){case"d":g=A("d");break;case"D":E("D",i,l);break;case"o":m=A("o");break;case"w":A("w");break;case"m":c=k();break;case"M":c=P();break;case"y":var L=R;u=!f("y",2),R=L,p=A("y",2);break;case"Y":p=A("Y",2);break;case"J":d=A("J")+.5,"."===b.charAt(F)&&(F++,A("J"));break;case"@":d=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":d=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":F=b.length;break;case"'":f("'")?D():w=!0;break;default:D()}if(F<b.length)throw x.local.unexpectedText||x.regionalOptions[""].unexpectedText;if(-1===p?p=this.today().year():p<100&&u&&(p+=-1===o?1900:this.today().year()-this.today().year()%100-(p<=o?0:100)),"string"==typeof c&&(c=r.call(this,p,c)),m>-1){g=m;for(var I=this.daysInMonth(p,c=1);g>I;I=this.daysInMonth(p,c))c++,g-=I}return d>-1?this.fromJD(d):this.newDate(p,c,g)},determineDate:function(T,b,e,o,i){e&&"object"!=typeof e&&(i=o,o=e,e=null),"string"!=typeof o&&(i=o,o="");var l=this;return b=b?b.newDate():null,null==T?b:"string"==typeof T?function(r){try{return l.parseDate(o,r,i)}catch(d){}for(var y=((r=r.toLowerCase()).match(/^c/)&&e?e.newDate():null)||l.today(),h=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=h.exec(r);s;)y.add(parseInt(s[1],10),s[2]||"d"),s=h.exec(r);return y}(T):"number"==typeof T?isNaN(T)||T===1/0||T===-1/0?b:l.today().add(T,"d"):l.newDate(T)}})},{"./main":346,"object-assign":247}],348:[function(_,oe,se){"use strict";oe.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(_,oe,se){"use strict";var v=_("./arrow_paths"),x=_("../../plots/font_attributes"),T=_("../../plots/cartesian/constants"),b=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),oe.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:x({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:v.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:v.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:x({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("./draw").draw;function b(o){v.filterVisible(o._fullLayout.annotations).forEach(function(l){var r=x.getFromId(o,l.xref),y=x.getFromId(o,l.yref),h=x.getRefType(l.xref),s=x.getRefType(l.yref);l._extremes={},"range"===h&&e(l,r),"range"===s&&e(l,y)})}function e(o,i){var l,r=i._id,y=r.charAt(0),h=o[y],s=o["a"+y],c=o["_"+y+"padplus"],g=o["_"+y+"padminus"],m={x:1,y:-1}[y]*o[y+"shift"],u=3*o.arrowsize*o.arrowwidth||0,w=u+m,f=u-m,A=3*o.startarrowsize*o.arrowwidth||0,M=A+m,k=A-m;if(o["a"+y+"ref"]===o[y+"ref"]){var E=x.findExtremes(i,[i.r2c(h)],{ppadplus:w,ppadminus:f}),P=x.findExtremes(i,[i.r2c(s)],{ppadplus:Math.max(c,M),ppadminus:Math.max(g,k)});l={min:[E.min[0],P.min[0]],max:[E.max[0],P.max[0]]}}else M=s?M+s:M,k=s?k-s:k,l=x.findExtremes(i,[i.r2c(h)],{ppadplus:Math.max(c,w,M),ppadminus:Math.max(g,f,k)});o._extremes[r]=l}oe.exports=function(o){if(v.filterVisible(o._fullLayout.annotations).length&&o._fullData.length)return v.syncOrAsync([T,b],o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry"),T=_("../../plot_api/plot_template").arrayEditor;function b(o,i){var l,r,y,h,s,d,p,c=o._fullLayout.annotations,g=[],m=[],u=[],w=(i||[]).length;for(l=0;l<c.length;l++)if(h=(y=c[l]).clicktoshow){for(r=0;r<w;r++)if(d=(s=i[r]).xaxis,p=s.yaxis,d._id===y.xref&&p._id===y.yref&&d.d2r(s.x)===e(y._xclick,d)&&p.d2r(s.y)===e(y._yclick,p)){(y.visible?"onout"===h?m:u:g).push(l);break}r===w&&y.visible&&"onout"===h&&m.push(l)}return{on:g,off:m,explicitOff:u}}function e(o,i){return"log"===i.type?i.l2r(o):i.d2r(o)}oe.exports={hasClickToShow:function(o,i){var l=b(o,i);return l.on.length>0||l.explicitOff.length>0},onClick:function(o,i){var l,r,y=b(o,i),h=y.on,s=y.off.concat(y.explicitOff),d={},p=o._fullLayout.annotations;if(h.length||s.length){for(l=0;l<h.length;l++)(r=T(o.layout,"annotations",p[h[l]])).modifyItem("visible",!0),v.extendFlat(d,r.getUpdateObj());for(l=0;l<s.length;l++)(r=T(o.layout,"annotations",p[s[l]])).modifyItem("visible",!1),v.extendFlat(d,r.getUpdateObj());return x.call("update",o,{},d)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../color");oe.exports=function(T,b,e,o){o("opacity");var i=o("bgcolor"),l=o("bordercolor"),r=x.opacity(l);o("borderpad");var y=o("borderwidth"),h=o("showarrow");if(o("text",h?" ":e._dfltTitle.annotation),o("textangle"),v.coerceFont(o,"font",e.font),o("width"),o("align"),o("height")&&o("valign"),h){var s,d,p=o("arrowside");-1!==p.indexOf("end")&&(s=o("arrowhead"),d=o("arrowsize")),-1!==p.indexOf("start")&&(o("startarrowhead",s),o("startarrowsize",d)),o("arrowcolor",r?b.bordercolor:x.defaultLine),o("arrowwidth",2*(r&&y||1)),o("standoff"),o("startstandoff")}var c=o("hovertext"),g=e.hoverlabel||{};if(c){var m=o("hoverlabel.bgcolor",g.bgcolor||(x.opacity(i)?x.rgb(i):x.defaultLine)),u=o("hoverlabel.bordercolor",g.bordercolor||x.contrast(m));v.coerceFont(o,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||u})}o("captureevents",!!c)}},{"../../lib":503,"../color":366}],353:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib/to_log_range");oe.exports=function(T,b,e,o){b=b||{};var i="log"===e&&"linear"===b.type;if(i||"linear"===e&&"log"===b.type)for(var r,y,h=T._fullLayout.annotations,s=b._id.charAt(0),d=0;d<h.length;d++)y="annotations["+d+"].",(r=h[d])[s+"ref"]===b._id&&p(s),r["a"+s+"ref"]===b._id&&p("a"+s);function p(c){var g=r[c],m=null;m=i?x(g,b.range):Math.pow(10,g),v(m)||(m=null),o(y+c,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./common_defaults"),e=_("./attributes");function o(i,l,r){function y(P,D){return v.coerce(i,l,e,P,D)}var h=y("visible"),s=y("clicktoshow");if(h||s){b(i,l,r,y);for(var d=l.showarrow,p=["x","y"],c=[-10,-30],g={_fullLayout:r},m=0;m<2;m++){var u=p[m],w=x.coerceRef(i,l,g,u,"","paper");if("paper"!==w&&x.getFromId(g,w)._annIndices.push(l._index),x.coercePosition(l,g,y,w,u,.5),d){var f="a"+u,A=x.coerceRef(i,l,g,f,"pixel",["pixel","paper"]);"pixel"!==A&&A!==w&&(A=l[f]="pixel"),x.coercePosition(l,g,y,A,f,"pixel"===A?c[m]:.4)}y(u+"anchor"),y(u+"shift")}if(v.noneOrAll(i,l,["x","y"]),d&&v.noneOrAll(i,l,["ax","ay"]),s){var k=y("xclick"),E=y("yclick");l._xclick=void 0===k?l.x:x.cleanPosition(k,g,l.xref),l._yclick=void 0===E?l.y:x.cleanPosition(E,g,l.yref)}}}oe.exports=function(i,l){T(i,l,{name:"annotations",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../../lib"),e=b.strTranslate,o=_("../../plots/cartesian/axes"),i=_("../color"),l=_("../drawing"),r=_("../fx"),y=_("../../lib/svg_text_utils"),h=_("../../lib/setcursor"),s=_("../dragelement"),d=_("../../plot_api/plot_template").arrayEditor,p=_("./draw_arrow_head");function c(u,w){var f=u._fullLayout.annotations[w]||{},A=o.getFromId(u,f.xref),M=o.getFromId(u,f.yref);A&&A.setScale(),M&&M.setScale(),m(u,f,w,!1,A,M)}function g(u,w,f,A,M){var k=M[f],E=M[f+"ref"],P=-1!==f.indexOf("y"),D="domain"===o.getRefType(E),F=P?A.h:A.w;return u?D?k+(P?-w:w)/u._length:u.p2r(u.r2p(k)+w):k+(P?-w:w)/F}function m(u,w,f,A,M,k){var E,P,D=u._fullLayout,F=u._fullLayout._size,R=u._context.edits;A?(E="annotation-"+A,P=A+".annotations"):(E="annotation",P="annotations");var L=d(u.layout,P,w),I=L.modifyBase,B=L.modifyItem,V=L.getUpdateObj;D._infolayer.selectAll("."+E+'[data-index="'+f+'"]').remove();var Z="clip"+D._uid+"_ann"+f;if(w._input&&!1!==w.visible){var Y={x:{},y:{}},Q=+w.textangle||0,re=D._infolayer.append("g").classed(E,!0).attr("data-index",String(f)).style("opacity",w.opacity),$=re.append("g").classed("annotation-text-g",!0),J=R[w.showarrow?"annotationTail":"annotationPosition"],ie=w.captureevents||R.annotationText||J,j=$.append("g").style("pointer-events",ie?"all":null).call(h,"pointer").on("click",function(){u._dragging=!1,u.emit("plotly_clickannotation",he(v.event))});w.hovertext&&j.on("mouseover",function(){var _e=w.hoverlabel,Ee=_e.font,De=this.getBoundingClientRect(),Se=u.getBoundingClientRect();r.loneHover({x0:De.left-Se.left,x1:De.right-Se.left,y:(De.top+De.bottom)/2-Se.top,text:w.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:Ee.family,fontSize:Ee.size,fontColor:Ee.color},{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:u})}).on("mouseout",function(){r.loneUnhover(D._hoverlayer.node())});var q=w.borderwidth,ae=q+w.borderpad,G=j.append("rect").attr("class","bg").style("stroke-width",q+"px").call(i.stroke,w.bordercolor).call(i.fill,w.bgcolor),ee=w.width||w.height,te=D._topclips.selectAll("#"+Z).data(ee?[0]:[]);te.enter().append("clipPath").classed("annclip",!0).attr("id",Z).append("rect"),te.exit().remove();var le=w.font,ue=D._meta?b.templateString(w.text,D._meta):w.text,de=j.append("text").classed("annotation-text",!0).text(ue);R.annotationText?de.call(y.makeEditable,{delegate:j,gd:u}).call(be).on("edit",function(_e){w.text=_e,this.call(be),B("text",_e),M&&M.autorange&&I(M._name+".autorange",!0),k&&k.autorange&&I(k._name+".autorange",!0),x.call("_guiRelayout",u,V())}):de.call(be)}else v.selectAll("#"+Z).remove();function he(_e){var Ee={index:f,annotation:w._input,fullAnnotation:w,event:_e};return A&&(Ee.subplotId=A),Ee}function be(_e){return _e.call(l.font,le).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"}),y.convertToTspans(_e,u,me),_e}function me(){var _e=de.selectAll("a");1===_e.size()&&_e.text()===de.text()&&j.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(G.node());var Ee=j.select(".annotation-text-math-group"),De=!Ee.empty(),Se=l.bBox((De?Ee:de).node()),Fe=Se.width,ve=Se.height,Te=w.width||Fe,Ie=w.height||ve,Ce=Math.round(Te+2*ae),Re=Math.round(Ie+2*ae);function Ue(ut,Dt){return"auto"===Dt&&(Dt=ut<1/3?"left":ut>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Dt]}for(var qe=!1,Xe=["x","y"],st=0;st<Xe.length;st++){var He,$e,et,tt,ct,bt=Xe[st],At=w[bt+"ref"]||bt,Ut=w["a"+bt+"ref"],Ct={x:M,y:k}[bt],dt=(Q+("x"===bt?0:-90))*Math.PI/180,at=Ce*Math.cos(dt),Nt=Re*Math.sin(dt),rn=Math.abs(at)+Math.abs(Nt),en=w[bt+"anchor"],Ge=w[bt+"shift"]*("x"===bt?1:-1),Qe=Y[bt],Rt=o.getRefType(At);if(Ct&&"domain"!==Rt){var gt=Ct.r2fraction(w[bt]);(gt<0||gt>1)&&(Ut===At?((gt=Ct.r2fraction(w["a"+bt]))<0||gt>1)&&(qe=!0):qe=!0),He=Ct._offset+Ct.r2p(w[bt]),tt=.5}else{var Be="domain"===Rt;"x"===bt?(et=w[bt],He=Be?Ct._offset+Ct._length*et:He=F.l+F.w*et):(et=1-w[bt],He=Be?Ct._offset+Ct._length*et:He=F.t+F.h*et),tt=w.showarrow?.5:et}if(w.showarrow){Qe.head=He;var Ve=w["a"+bt];if(ct=at*Ue(.5,w.xanchor)-Nt*Ue(.5,w.yanchor),Ut===At){var Le=o.getRefType(Ut);"domain"===Le?("y"===bt&&(Ve=1-Ve),Qe.tail=Ct._offset+Ct._length*Ve):Qe.tail="paper"===Le?"y"===bt?F.t+F.h*(Ve=1-Ve):F.l+F.w*Ve:Ct._offset+Ct.r2p(Ve),$e=ct}else Qe.tail=He+Ve,$e=ct+Ve;Qe.text=Qe.tail+ct;var je=D["x"===bt?"width":"height"];if("paper"===At&&(Qe.head=b.constrain(Qe.head,1,je-1)),"pixel"===Ut){var Ke=-Math.max(Qe.tail-3,Qe.text),ft=Math.min(Qe.tail+3,Qe.text)-je;Ke>0?(Qe.tail+=Ke,Qe.text+=Ke):ft>0&&(Qe.tail-=ft,Qe.text-=ft)}Qe.tail+=Ge,Qe.head+=Ge}else $e=ct=rn*Ue(tt,en),Qe.text=He+ct;Qe.text+=Ge,ct+=Ge,w["_"+bt+"padplus"]=rn/2+($e+=Ge),w["_"+bt+"padminus"]=rn/2-$e,w["_"+bt+"size"]=rn,w["_"+bt+"shift"]=ct}if(qe)j.remove();else{var mt=0,pt=0;"left"!==w.align&&(mt=(Te-Fe)*("center"===w.align?.5:1)),"top"!==w.valign&&(pt=(Ie-ve)*("middle"===w.valign?.5:1)),De?Ee.select("svg").attr({x:ae+mt-1,y:ae+pt}).call(l.setClipUrl,ee?Z:null,u):de.call(y.positionText,ae+mt-Se.left,ae+pt-Se.top).call(l.setClipUrl,ee?Z:null,u),te.select("rect").call(l.setRect,ae,ae,Te,Ie),G.call(l.setRect,q/2,q/2,Ce-q,Re-q),j.call(l.setTranslate,Math.round(Y.x.text-Ce/2),Math.round(Y.y.text-Re/2)),$.attr({transform:"rotate("+Q+","+Y.x.text+","+Y.y.text+")"});var Jt,$t=function(ut,Dt){re.selectAll(".annotation-arrow-g").remove();var Wt=Y.x.head,zt=Y.y.head,Ht=Y.x.tail+ut,Ne=Y.y.tail+Dt,ot=Y.x.text+ut,yt=Y.y.text+Dt,It=b.rotationXYMatrix(Q,ot,yt),Vt=b.apply2DTransform(It),ln=b.apply2DTransform2(It),un=+G.attr("width"),an=+G.attr("height"),wn=ot-.5*un,Zn=wn+un,An=yt-.5*an,hn=An+an,pn=[[wn,An,wn,hn],[wn,hn,Zn,hn],[Zn,hn,Zn,An],[Zn,An,wn,An]].map(ln);if(!pn.reduce(function(Hn,Sr){return Hn^!!b.segmentsIntersect(Wt,zt,Wt+1e6,zt+1e6,Sr[0],Sr[1],Sr[2],Sr[3])},!1)){pn.forEach(function(Hn){var Sr=b.segmentsIntersect(Ht,Ne,Wt,zt,Hn[0],Hn[1],Hn[2],Hn[3]);Sr&&(Ht=Sr.x,Ne=Sr.y)});var xn=w.arrowwidth,En=w.arrowcolor,In=w.arrowside,Yn=re.append("g").style({opacity:i.opacity(En)}).classed("annotation-arrow-g",!0),nr=Yn.append("path").attr("d","M"+Ht+","+Ne+"L"+Wt+","+zt).style("stroke-width",xn+"px").call(i.stroke,i.rgb(En));if(p(nr,In,w),R.annotationPosition&&nr.node().parentNode&&!A){var sr=Wt,Ar=zt;if(w.standoff){var yr=Math.sqrt(Math.pow(Wt-Ht,2)+Math.pow(zt-Ne,2));sr+=w.standoff*(Ht-Wt)/yr,Ar+=w.standoff*(Ne-zt)/yr}var Pr,Wr,lr=Yn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Ht-sr)+","+(Ne-Ar),transform:e(sr,Ar)}).style("stroke-width",xn+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)");s.init({element:lr.node(),gd:u,prepFn:function(){var Hn=l.getTranslate(j);Pr=Hn.x,Wr=Hn.y,M&&M.autorange&&I(M._name+".autorange",!0),k&&k.autorange&&I(k._name+".autorange",!0)},moveFn:function(Hn,Sr){var ti=Vt(Pr,Wr),Fn=ti[0]+Hn,br=ti[1]+Sr;j.call(l.setTranslate,Fn,br),B("x",g(M,Hn,"x",F,w)),B("y",g(k,Sr,"y",F,w)),w.axref===w.xref&&B("ax",g(M,Hn,"ax",F,w)),w.ayref===w.yref&&B("ay",g(k,Sr,"ay",F,w)),Yn.attr("transform",e(Hn,Sr)),$.attr({transform:"rotate("+Q+","+Fn+","+br+")"})},doneFn:function(){x.call("_guiRelayout",u,V());var Hn=document.querySelector(".js-notes-box-panel");Hn&&Hn.redraw(Hn.selectedObj)}})}}};w.showarrow&&$t(0,0),J&&s.init({element:j.node(),gd:u,prepFn:function(){Jt=$.attr("transform")},moveFn:function(ut,Dt){var Wt="pointer";if(w.showarrow)B("ax",w.axref===w.xref?g(M,ut,"ax",F,w):w.ax+ut),B("ay",w.ayref===w.yref?g(k,Dt,"ay",F.w,w):w.ay+Dt),$t(ut,Dt);else{if(A)return;var zt,Ht;if(M)zt=g(M,ut,"x",F,w);else{var Ne=w._xsize/F.w;zt=s.align(w.x+(w._xshift-w.xshift)/F.w-Ne/2+ut/F.w,Ne,0,1,w.xanchor)}if(k)Ht=g(k,Dt,"y",F,w);else{var yt=w._ysize/F.h;Ht=s.align(w.y-(w._yshift+w.yshift)/F.h-yt/2-Dt/F.h,yt,0,1,w.yanchor)}B("x",zt),B("y",Ht),M&&k||(Wt=s.getCursor(M?.5:zt,k?.5:Ht,w.xanchor,w.yanchor))}$.attr({transform:e(ut,Dt)+Jt}),h(j,Wt)},clickFn:function(ut,Dt){w.captureevents&&u.emit("plotly_clickannotation",he(Dt))},doneFn:function(){h(j),x.call("_guiRelayout",u,V());var ut=document.querySelector(".js-notes-box-panel");ut&&ut.redraw(ut.selectedObj)}})}}}oe.exports={draw:function(u){var w=u._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var f=0;f<w.annotations.length;f++)w.annotations[f].visible&&c(u,f);return T.previousPromises(u)},drawOne:c,drawRaw:m}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../color"),T=_("./arrow_paths"),b=_("../../lib"),e=b.strScale,o=b.strRotate,i=b.strTranslate;oe.exports=function(l,r,y){var h,s,d,p,c=l.node(),g=T[y.arrowhead||0],m=T[y.startarrowhead||0],u=(y.arrowwidth||1)*(y.arrowsize||1),w=(y.arrowwidth||1)*(y.startarrowsize||1),f=r.indexOf("start")>=0,A=r.indexOf("end")>=0,M=g.backoff*u+y.standoff,k=m.backoff*w+y.startstandoff;if("line"===c.nodeName){h={x:+l.attr("x1"),y:+l.attr("y1")},s={x:+l.attr("x2"),y:+l.attr("y2")};var E=h.x-s.x,P=h.y-s.y;if(p=(d=Math.atan2(P,E))+Math.PI,M&&k&&M+k>Math.sqrt(E*E+P*P))return void re();if(M){if(M*M>E*E+P*P)return void re();var D=M*Math.cos(d),F=M*Math.sin(d);s.x+=D,s.y+=F,l.attr({x2:s.x,y2:s.y})}if(k){if(k*k>E*E+P*P)return void re();var R=k*Math.cos(d),L=k*Math.sin(d);h.x-=R,h.y-=L,l.attr({x1:h.x,y1:h.y})}}else if("path"===c.nodeName){var I=c.getTotalLength(),B="";if(I<M+k)return void re();var V=c.getPointAtLength(0),Z=c.getPointAtLength(.1);d=Math.atan2(V.y-Z.y,V.x-Z.x),h=c.getPointAtLength(Math.min(k,I)),B="0px,"+k+"px,";var Y=c.getPointAtLength(I),Q=c.getPointAtLength(I-.1);p=Math.atan2(Y.y-Q.y,Y.x-Q.x),s=c.getPointAtLength(Math.max(0,I-M)),l.style("stroke-dasharray",B+=I-(B?k+M:M)+"px,"+I+"px")}function re(){l.style("stroke-dasharray","0px,100px")}function $(J,ie,j,q){J.path&&(J.noRotate&&(j=0),v.select(c.parentNode).append("path").attr({class:l.attr("class"),d:J.path,transform:i(ie.x,ie.y)+o(180*j/Math.PI)+e(q)}).style({fill:x.rgb(y.arrowcolor),"stroke-width":0}))}f&&$(m,h,d,w),A&&$(g,s,p,u)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(_,oe,se){"use strict";var v=_("./draw"),x=_("./click");oe.exports={moduleType:"component",name:"annotations",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("annotations"),calcAutorange:_("./calc_autorange"),draw:v.draw,drawOne:v.drawOne,drawRaw:v.drawRaw,hasClickToShow:x.hasClickToShow,onClick:x.onClick,convertCoords:_("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(_,oe,se){"use strict";var v=_("../annotations/attributes"),x=_("../../plot_api/edit_types").overrideAll,T=_("../../plot_api/plot_template").templatedArray;oe.exports=x(T("annotation",{visible:v.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:v.xanchor,xshift:v.xshift,yanchor:v.yanchor,yshift:v.yshift,text:v.text,textangle:v.textangle,font:v.font,width:v.width,height:v.height,opacity:v.opacity,align:v.align,valign:v.valign,bgcolor:v.bgcolor,bordercolor:v.bordercolor,borderpad:v.borderpad,borderwidth:v.borderwidth,showarrow:v.showarrow,arrowcolor:v.arrowcolor,arrowhead:v.arrowhead,startarrowhead:v.startarrowhead,arrowside:v.arrowside,arrowsize:v.arrowsize,startarrowsize:v.startarrowsize,arrowwidth:v.arrowwidth,standoff:v.standoff,startstandoff:v.startstandoff,hovertext:v.hovertext,hoverlabel:v.hoverlabel,captureevents:v.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes");function T(b,e){var o=e.fullSceneLayout.domain,i=e.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};b._xa={},v.extendFlat(b._xa,l),x.setConvert(b._xa),b._xa._offset=i.l+o.x[0]*i.w,b._xa.l2p=function(){return.5*(1+b._pdata[0]/b._pdata[3])*i.w*(o.x[1]-o.x[0])},b._ya={},v.extendFlat(b._ya,l),x.setConvert(b._ya),b._ya._offset=i.t+(1-o.y[1])*i.h,b._ya.l2p=function(){return.5*(1-b._pdata[1]/b._pdata[3])*i.h*(o.y[1]-o.y[0])}}oe.exports=function(b){for(var e=b.fullSceneLayout.annotations,o=0;o<e.length;o++)T(e[o],b);b.fullLayout._infolayer.selectAll(".annotation-"+b.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("../annotations/common_defaults"),e=_("./attributes");function o(i,l,r,y){function h(d,p){return v.coerce(i,l,e,d,p)}function s(d){var p=d+"axis",c={_fullLayout:{}};return c._fullLayout[p]=r[p],x.coercePosition(l,c,h,d,d,.5)}h("visible")&&(b(i,l,y.fullLayout,h),s("x"),s("y"),s("z"),v.noneOrAll(i,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",h("xanchor"),h("yanchor"),h("xshift"),h("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",h("ax",-10),h("ay",-30),v.noneOrAll(i,l,["ax","ay"])))}oe.exports=function(i,l,r){T(i,l,{name:"annotations",handleItemDefaults:o,fullLayout:r.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(_,oe,se){"use strict";var v=_("../annotations/draw").drawRaw,x=_("../../plots/gl3d/project"),T=["x","y","z"];oe.exports=function(b){for(var e=b.fullSceneLayout,o=b.dataScale,i=e.annotations,l=0;l<i.length;l++){for(var r=i[l],y=!1,h=0;h<3;h++){var s=T[h],p=e[s+"axis"].r2fraction(r[s]);if(p<0||p>1){y=!0;break}}y?b.fullLayout._infolayer.select(".annotation-"+b.id+'[data-index="'+l+'"]').remove():(r._pdata=x(b.glplot.cameraParams,[e.xaxis.r2l(r.x)*o[0],e.yaxis.r2l(r.y)*o[1],e.zaxis.r2l(r.z)*o[2]]),v(b.graphDiv,r,l,b.id,r._xa,r._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib");oe.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:_("./attributes")}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),includeBasePlot:function(T,b){var e=v.subplotsRegistry.gl3d;if(e)for(var o=e.attrRegex,i=Object.keys(T),l=0;l<i.length;l++){var r=i[l];o.test(r)&&(T[r].annotations||[]).length&&(x.pushUnique(b._basePlotModules,e),x.pushUnique(b._subplots.gl3d,r))}},convert:_("./convert"),draw:_("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(_,oe,se){"use strict";oe.exports=_("world-calendars/dist/main"),_("world-calendars/dist/plus"),_("world-calendars/dist/calendars/chinese"),_("world-calendars/dist/calendars/coptic"),_("world-calendars/dist/calendars/discworld"),_("world-calendars/dist/calendars/ethiopian"),_("world-calendars/dist/calendars/hebrew"),_("world-calendars/dist/calendars/islamic"),_("world-calendars/dist/calendars/julian"),_("world-calendars/dist/calendars/mayan"),_("world-calendars/dist/calendars/nanakshahi"),_("world-calendars/dist/calendars/nepali"),_("world-calendars/dist/calendars/persian"),_("world-calendars/dist/calendars/taiwan"),_("world-calendars/dist/calendars/thai"),_("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(_,oe,se){"use strict";var v=_("./calendars"),x=_("../../lib"),T=_("../../constants/numerical"),b=T.EPOCHJD,e=T.ONEDAY,o={valType:"enumerated",values:x.sortObjectKeys(v.calendars),editType:"calc",dflt:"gregorian"},i=function(m,u,w,f){var A={};return A[w]=o,x.coerce(m,u,A,w,f)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function y(m){return r[m]||(r[m]=v.instance(m))}function h(m){return x.extendFlat({},o,{description:m})}function s(m){return"Sets the calendar system to use with `"+m+"` date data."}var d={xcalendar:h(s("x"))},p=x.extendFlat({},d,{ycalendar:h(s("y"))}),c=x.extendFlat({},p,{zcalendar:h(s("z"))}),g=h(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));oe.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:d,candlestick:d},layout:{calendar:h(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:g},yaxis:{calendar:g},scene:{xaxis:{calendar:g},yaxis:{calendar:g},zaxis:{calendar:g}},polar:{radialaxis:{calendar:g}}},transforms:{filter:{valuecalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:i,handleTraceDefaults:function(m,u,w,f){for(var A=0;A<w.length;A++)i(m,u,w[A]+"calendar",f.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:y,worldCalFmt:function(m,u,w){for(var f,A,M,k,E,P=Math.floor((u+.05)/e)+b,D=y(w).fromJD(P),F=0;-1!==(F=m.indexOf("%",F));)"0"===(f=m.charAt(F+1))||"-"===f||"_"===f?(M=3,A=m.charAt(F+2),"_"===f&&(f="-")):(A=f,f="0",M=2),(k=l[A])?(E="##"===k?"##":D.formatDate(k[f]),m=m.substr(0,F)+E+m.substr(F+M),F+=E.length):F+=M;return m}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(_,oe,se){"use strict";se.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],se.defaultLine="#444",se.lightLine="#eee",se.background="#fff",se.borderLine="#BEC8D9",se.lightFraction=1e3/11},{}],366:[function(_,oe,se){"use strict";var v=_("tinycolor2"),x=_("fast-isnumeric"),T=_("../../lib/array").isTypedArray,b=oe.exports={},e=_("./attributes");b.defaults=e.defaults;var o=b.defaultLine=e.defaultLine;b.lightLine=e.lightLine;var i=b.background=e.background;function l(r){if(x(r)||"string"!=typeof r)return r;var y=r.trim();if("rgb"!==y.substr(0,3))return r;var h=y.match(/^rgba?\s*\(([^()]*)\)$/);if(!h)return r;var s=h[1].trim().split(/\s*[\s,]\s*/),d="a"===y.charAt(3)&&4===s.length;if(!d&&3!==s.length)return r;for(var p=0;p<s.length;p++){if(!(s[p].length&&(s[p]=Number(s[p]),s[p]>=0)))return r;if(3===p)s[p]>1&&(s[p]=1);else if(s[p]>=1)return r}var c=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return d?"rgba("+c+", "+s[3]+")":"rgb("+c+")"}b.tinyRGB=function(r){var y=r.toRgb();return"rgb("+Math.round(y.r)+", "+Math.round(y.g)+", "+Math.round(y.b)+")"},b.rgb=function(r){return b.tinyRGB(v(r))},b.opacity=function(r){return r?v(r).getAlpha():0},b.addOpacity=function(r,y){var h=v(r).toRgb();return"rgba("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+", "+y+")"},b.combine=function(r,y){var h=v(r).toRgb();if(1===h.a)return v(r).toRgbString();var s=v(y||i).toRgb(),d=1===s.a?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a};return v({r:d.r*(1-h.a)+h.r*h.a,g:d.g*(1-h.a)+h.g*h.a,b:d.b*(1-h.a)+h.b*h.a}).toRgbString()},b.contrast=function(r,y,h){var s=v(r);return 1!==s.getAlpha()&&(s=v(b.combine(r,i))),(s.isDark()?y?s.lighten(y):i:h?s.darken(h):o).toString()},b.stroke=function(r,y){var h=v(y);r.style({stroke:b.tinyRGB(h),"stroke-opacity":h.getAlpha()})},b.fill=function(r,y){var h=v(y);r.style({fill:b.tinyRGB(h),"fill-opacity":h.getAlpha()})},b.clean=function(r){if(r&&"object"==typeof r){var y,h,s,d,p=Object.keys(r);for(y=0;y<p.length;y++)if(d=r[s=p[y]],"color"===s.substr(s.length-5))if(Array.isArray(d))for(h=0;h<d.length;h++)d[h]=l(d[h]);else r[s]=l(d);else if("colorscale"===s.substr(s.length-10)&&Array.isArray(d))for(h=0;h<d.length;h++)Array.isArray(d[h])&&(d[h][1]=l(d[h][1]));else if(Array.isArray(d)){var c=d[0];if(!Array.isArray(c)&&c&&"object"==typeof c)for(h=0;h<d.length;h++)b.clean(d[h])}else d&&"object"==typeof d&&!T(d)&&b.clean(d)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/layout_attributes"),x=_("../../plots/font_attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll;oe.exports=b({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:v.linecolor,outlinewidth:v.linewidth,bordercolor:v.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:T({},v.ticks,{dflt:""}),ticklabeloverflow:T({},v.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,tickfont:x({}),tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,separatethousands:v.separatethousands,exponentformat:v.exponentformat,minexponent:v.minexponent,showexponent:v.showexponent,title:{text:{valType:"string"},font:x({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:x({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(_,oe,se){"use strict";oe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("../../plots/cartesian/tick_value_defaults"),b=_("../../plots/cartesian/tick_mark_defaults"),e=_("../../plots/cartesian/tick_label_defaults"),o=_("../../plots/cartesian/prefix_suffix_defaults"),i=_("./attributes");oe.exports=function(l,r,y){var h=x.newContainer(r,"colorbar"),s=l.colorbar||{};function d(P,D){return v.coerce(s,h,i,P,D)}var p=y.margin||{t:0,b:0,l:0,r:0},c=y.width-p.l-p.r,g=y.height-p.t-p.b,m="v"===d("orientation"),u=d("thicknessmode");d("thickness","fraction"===u?30/(m?c:g):30);var w=d("lenmode");d("len","fraction"===w?1:m?g:c),d("x",m?1.02:.5),d("xanchor",m?"left":"center"),d("xpad"),d("y",m?.5:1.02),d("yanchor",m?"middle":"bottom"),d("ypad"),v.noneOrAll(s,h,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var f=v.coerce(s,h,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",-1!==f.indexOf("inside")?"hide past domain":"hide past div"),T(s,h,d,"linear");var A=y.font,M={outerTicks:!1,font:A};-1!==f.indexOf("inside")&&(M.bgColor="black"),o(s,h,d,"linear",M),e(s,h,d,"linear",M),b(s,h,d,"linear",M),d("title.text",y._dfltTitle.colorbar);var k=h.tickfont,E=v.extendFlat({},k,{color:A.color,size:v.bigFont(k.size)});v.coerceFont(d,"title.font",E),d("title.side",m?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../plots/cartesian/axes"),o=_("../dragelement"),i=_("../../lib"),l=i.strTranslate,r=_("../../lib/extend").extendFlat,y=_("../../lib/setcursor"),h=_("../drawing"),s=_("../color"),d=_("../titles"),p=_("../../lib/svg_text_utils"),c=_("../colorscale/helpers").flipScale,g=_("../../plots/cartesian/axis_defaults"),m=_("../../plots/cartesian/position_defaults"),u=_("../../plots/cartesian/layout_attributes"),w=_("../../constants/alignment"),f=w.LINE_SPACING,A=w.FROM_TL,M=w.FROM_BR,k=_("./constants").cn;oe.exports={draw:function(E){var P=E._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(D){var F,R,L,I,B=D._fullLayout,V=D.calcdata,Z=[];function Y(ee){return r(ee,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Q(){"function"==typeof I.calc?I.calc(D,L,F):(F._fillgradient=R.reversescale?c(R.colorscale):R.colorscale,F._zrange=[R[I.min],R[I.max]])}for(var re=0;re<V.length;re++){var J=(L=V[re][0].trace)._module.colorbar;if(!0===L.visible&&J)for(var ie=Array.isArray(J),j=ie?J:[J],q=0;q<j.length;q++){var W=(I=j[q]).container;(R=W?L[W]:L)&&R.showscale&&((F=Y(R.colorbar))._id="cb"+L.uid+(ie&&W?"-"+W:""),F._traceIndex=L.index,F._propPrefix=(W?W+".":"")+"colorbar.",F._meta=L._meta,Q(),Z.push(F))}}for(var ae in B._colorAxes)if((R=B[ae]).showscale){var G=B._colorAxes[ae];(F=Y(R.colorbar))._id="cb"+ae,F._propPrefix=ae+".colorbar.",F._meta=B._meta,I={min:"cmin",max:"cmax"},"heatmap"!==G[0]&&(I.calc=(L=G[1])._module.colorbar.calc),Q(),Z.push(F)}return Z}(E),function(D){return D._id});P.enter().append("g").attr("class",function(D){return D._id}).classed(k.colorbar,!0),P.each(function(D){var F=v.select(this);i.ensureSingle(F,"rect",k.cbbg),i.ensureSingle(F,"g",k.cbfills),i.ensureSingle(F,"g",k.cblines),i.ensureSingle(F,"g",k.cbaxis,function(L){L.classed(k.crisp,!0)}),i.ensureSingle(F,"g",k.cbtitleunshift,function(L){L.append("g").classed(k.cbtitle,!0)}),i.ensureSingle(F,"rect",k.cboutline);var L,I,B,V,Z,Y,Q,re,R=function(L,I,B){var V="v"===I.orientation,Z=I.len,Y=I.lenmode,Q=I.thickness,re=I.thicknessmode,$=I.outlinewidth,J=I.borderwidth,ie=I.bgcolor,j=I.xanchor,q=I.yanchor,W=I.xpad,ae=I.ypad,G=I.x,ee=V?I.y:1-I.y,te=B._fullLayout,le=te._size,ue=I._fillcolor,de=I._line,he=I.title,be=he.side,me=I._zrange||v.extent(("function"==typeof ue?ue:de.color).domain()),_e="function"==typeof de.color?de.color:function(){return de.color},Ee="function"==typeof ue?ue:function(){return ue},De=I._levels,Se=function(Rt,gt,Be){var Ve,Le,je=gt._levels,Ke=[],ft=[],mt=je.end+je.size/100,pt=je.size,Ot=1.001*Be[0]-.001*Be[1],Pt=1.001*Be[1]-.001*Be[0];for(Le=0;Le<1e5&&(Ve=je.start+Le*pt,!(pt>0?Ve>=mt:Ve<=mt));Le++)Ve>Ot&&Ve<Pt&&Ke.push(Ve);if(gt._fillgradient)ft=[0];else if("function"==typeof gt._fillcolor){var Jt=gt._filllevels;if(Jt)for(mt=Jt.end+Jt.size/100,pt=Jt.size,Le=0;Le<1e5&&(Ve=Jt.start+Le*pt,!(pt>0?Ve>=mt:Ve<=mt));Le++)Ve>Be[0]&&Ve<Be[1]&&ft.push(Ve);else(ft=Ke.map(function($t){return $t-je.size/2})).push(ft[ft.length-1]+je.size)}else gt._fillcolor&&"string"==typeof gt._fillcolor&&(ft=[0]);return je.size<0&&(Ke.reverse(),ft.reverse()),{line:Ke,fill:ft}}(0,I,me),Fe=Se.fill,ve=Se.line,Te=Math.round(Q*("fraction"===re?V?le.w:le.h:1)),Ie=Te/(V?le.w:le.h),Ce=Math.round(Z*("fraction"===Y?V?le.h:le.w:1)),Re=Ce/(V?le.h:le.w),Ue=Math.round(V?G*le.w+W:ee*le.h+ae),qe={center:.5,right:1}[j]||0,Xe={top:1,middle:.5}[q]||0,st=V?G-qe*Ie:ee-Xe*Ie,He=V?ee-Xe*Re:G-qe*Re,$e=Math.round(V?le.h*(1-He):le.w*He);I._lenFrac=Re,I._thickFrac=Ie,I._uFrac=st,I._vFrac=He;var et=I._axis=function(Rt,gt,Be){var Ve=Rt._fullLayout,Le="v"===gt.orientation,je={type:"linear",range:Be,tickmode:gt.tickmode,nticks:gt.nticks,tick0:gt.tick0,dtick:gt.dtick,tickvals:gt.tickvals,ticktext:gt.ticktext,ticks:gt.ticks,ticklen:gt.ticklen,tickwidth:gt.tickwidth,tickcolor:gt.tickcolor,showticklabels:gt.showticklabels,ticklabelposition:gt.ticklabelposition,ticklabeloverflow:gt.ticklabeloverflow,ticklabelstep:gt.ticklabelstep,tickfont:gt.tickfont,tickangle:gt.tickangle,tickformat:gt.tickformat,exponentformat:gt.exponentformat,minexponent:gt.minexponent,separatethousands:gt.separatethousands,showexponent:gt.showexponent,showtickprefix:gt.showtickprefix,tickprefix:gt.tickprefix,showticksuffix:gt.showticksuffix,ticksuffix:gt.ticksuffix,title:gt.title,showline:!0,anchor:"free",side:Le?"right":"bottom",position:1},Ke=Le?"y":"x",ft={type:"linear",_id:Ke+gt._id},mt={letter:Ke,font:Ve.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ve.calendar};function pt(Ot,Pt){return i.coerce(je,ft,u,Ot,Pt)}return g(je,ft,pt,mt,Ve),m(je,ft,pt,mt),ft}(B,I,me);et.position=Ie+(V?G+W/le.w:ee+ae/le.h);var tt=-1!==["top","bottom"].indexOf(be);if(V&&tt&&(et.title.side=be,et.titlex=G+W/le.w,et.titley=He+("top"===he.side?Re-ae/le.h:ae/le.h)),V||tt||(et.title.side=be,et.titley=ee+ae/le.h,et.titlex=He+W/le.w),de.color&&"auto"===I.tickmode){et.tickmode="linear",et.tick0=De.start;var ct=De.size,bt=i.constrain(Ce/50,4,15)+1,At=(me[1]-me[0])/((I.nticks||bt)*ct);if(At>1){var Ut=Math.pow(10,Math.floor(Math.log(At)/Math.LN10));ct*=Ut*i.roundUp(At/Ut,[2,5,10]),(Math.abs(De.start)/De.size+1e-6)%1<2e-6&&(et.tick0=0)}et.dtick=ct}et.domain=V?[He+ae/le.h,He+Re-ae/le.h]:[He+W/le.w,He+Re-W/le.w],et.setScale(),L.attr("transform",l(Math.round(le.l),Math.round(le.t)));var Ct,dt=L.select("."+k.cbtitleunshift).attr("transform",l(-Math.round(le.l),-Math.round(le.t))),at=et.ticklabelposition,Nt=et.title.font.size,rn=L.select("."+k.cbaxis),en=0,Ge=0;function Qe(Rt,gt){var Be={propContainer:et,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:te._dfltTitle.colorbar,containerGroup:L.select("."+k.cbtitle)},Ve="h"===Rt.charAt(0)?Rt.substr(1):"h"+Rt;L.selectAll("."+Ve+",."+Ve+"-math-group").remove(),d.draw(B,Rt,r(Be,gt||{}))}return i.syncOrAsync([T.previousPromises,function(){var Rt,gt;(V&&tt||!V&&!tt)&&("top"===be&&(Rt=W+le.l+le.w*G,gt=ae+le.t+le.h*(1-He-Re)+3+.75*Nt),"bottom"===be&&(Rt=W+le.l+le.w*G,gt=ae+le.t+le.h*(1-He)-3-.25*Nt),"right"===be&&(gt=ae+le.t+le.h*ee+3+.75*Nt,Rt=W+le.l+le.w*He),Qe(et._id+"title",{attributes:{x:Rt,y:gt,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!tt||V&&tt){var Rt,gt=L.select("."+k.cbtitle),Be=gt.select("text"),Ve=[-$/2,$/2],Le=gt.select(".h"+et._id+"title-math-group").node(),je=15.6;if(Be.node()&&(je=parseInt(Be.node().style.fontSize,10)*f),Le?(Rt=h.bBox(Le),Ge=Rt.width,(en=Rt.height)>je&&(Ve[1]-=(en-je)/2)):Be.node()&&!Be.classed(k.jsPlaceholder)&&(Rt=h.bBox(Be.node()),Ge=Rt.width,en=Rt.height),V){if(en){if(en+=5,"top"===be)et.domain[1]-=en/le.h,Ve[1]*=-1;else{et.domain[0]+=en/le.h;var Ke=p.lineCount(Be);Ve[1]+=(1-Ke)*je}gt.attr("transform",l(Ve[0],Ve[1])),et.setScale()}}else Ge&&("right"===be&&(et.domain[0]+=(Ge+Nt/2)/le.w),gt.attr("transform",l(Ve[0],Ve[1])),et.setScale())}L.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",V?l(0,Math.round(le.h*(1-et.domain[1]))):l(Math.round(le.w*et.domain[0]),0)),rn.attr("transform",V?l(0,Math.round(-le.t)):l(Math.round(-le.l),0));var ft=L.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(Fe);ft.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),ft.exit().remove();var mt=me.map(et.c2p).map(Math.round).sort(function($t,ut){return $t-ut});ft.each(function($t,ut){var Dt=[0===ut?me[0]:(Fe[ut]+Fe[ut-1])/2,ut===Fe.length-1?me[1]:(Fe[ut]+Fe[ut+1])/2].map(et.c2p).map(Math.round);V&&(Dt[1]=i.constrain(Dt[1]+(Dt[1]>Dt[0])?1:-1,mt[0],mt[1]));var Wt=v.select(this).attr(V?"x":"y",Ue).attr(V?"y":"x",v.min(Dt)).attr(V?"width":"height",Math.max(Te,2)).attr(V?"height":"width",Math.max(v.max(Dt)-v.min(Dt),2));if(I._fillgradient)h.gradient(Wt,B,I._id,V?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var zt=Ee($t).replace("e-","");Wt.attr("fill",x(zt).toHexString())}});var pt=L.select("."+k.cblines).selectAll("path."+k.cbline).data(de.color&&de.width?ve:[]);pt.enter().append("path").classed(k.cbline,!0),pt.exit().remove(),pt.each(function($t){var ut=Ue,Dt=Math.round(et.c2p($t))+de.width/2%1;v.select(this).attr("d","M"+(V?ut+","+Dt:Dt+","+ut)+(V?"h":"v")+Te).call(h.lineGroupStyle,de.width,_e($t),de.dash)}),rn.selectAll("g."+et._id+"tick,path").remove();var Ot=Ue+Te+($||0)/2-("outside"===I.ticks?1:0),Pt=e.calcTicks(et),Jt=e.getTickSigns(et)[2];return e.drawTicks(B,et,{vals:"inside"===et.ticks?e.clipEnds(et,Pt):Pt,layer:rn,path:e.makeTickPath(et,Ot,Jt),transFn:e.makeTransTickFn(et)}),e.drawLabels(B,et,{vals:Pt,layer:rn,transFn:e.makeTransTickLabelFn(et),labelFns:e.makeLabelFns(et,Ot)})},function(){if(V&&!tt||!V&&tt){var Rt,gt,Be=et.position||0,Ve=et._offset+et._length/2;if("right"===be)gt=Ve,Rt=le.l+le.w*Be+10+Nt*(et.showticklabels?1:.5);else if(Rt=Ve,"bottom"===be&&(gt=le.t+le.h*Be+10+(-1===at.indexOf("inside")?et.tickfont.size:0)+("intside"!==et.ticks&&I.ticklen||0)),"top"===be){var Le=he.text.split("<br>").length;gt=le.t+le.h*Be+10-Te-f*Nt*Le}Qe((V?"h":"v")+et._id+"title",{avoid:{selection:v.select(B).selectAll("g."+et._id+"tick"),side:be,offsetTop:V?0:le.t,offsetLeft:V?le.l:0,maxShift:V?te.width:te.height},attributes:{x:Rt,y:gt,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},T.previousPromises,function(){var Rt,gt=Te+$/2;-1===at.indexOf("inside")&&(Rt=h.bBox(rn.node()),gt+=V?Rt.width:Rt.height),Ct=dt.select("text");var Be=0,Ve=V&&"top"===be,Le=!V&&"right"===be,je=0;if(Ct.node()&&!Ct.classed(k.jsPlaceholder)){var Ke,ft=dt.select(".h"+et._id+"title-math-group").node();ft&&(V&&tt||!V&&!tt)?(Be=(Rt=h.bBox(ft)).width,Ke=Rt.height):(Be=(Rt=h.bBox(dt.node())).right-le.l-(V?Ue:$e),Ke=Rt.bottom-le.t-(V?$e:Ue),V||"top"!==be||(gt+=Rt.height,je=Rt.height)),Le&&(Ct.attr("transform",l(Be/2+Nt/2,0)),Be*=2),gt=Math.max(gt,V?Be:Ke)}var mt=2*(V?W:ae)+gt+J+$/2,pt=0;!V&&he.text&&"bottom"===q&&ee<=0&&(mt+=pt=mt/2,je+=pt),te._hColorbarMoveTitle=pt,te._hColorbarMoveCBTitle=je;var Ot=J+$;L.select("."+k.cbbg).attr("x",(V?Ue:$e)-Ot/2-(V?W:0)).attr("y",(V?$e:Ue)-(V?Ce:ae+je-pt)).attr(V?"width":"height",Math.max(mt-pt,2)).attr(V?"height":"width",Math.max(Ce+Ot,2)).call(s.fill,ie).call(s.stroke,I.bordercolor).style("stroke-width",J);var Pt=Le?Math.max(Be-10,0):0;if(L.selectAll("."+k.cboutline).attr("x",(V?Ue:$e+W)+Pt).attr("y",(V?$e+ae-Ce:Ue)+(Ve?en:0)).attr(V?"width":"height",Math.max(Te,2)).attr(V?"height":"width",Math.max(Ce-(V?2*ae+en:2*W+Pt),2)).call(s.stroke,I.outlinecolor).style({fill:"none","stroke-width":$}),L.attr("transform",l(le.l-(V?qe*mt:0),le.t-(V?0:(1-Xe)*mt-je))),!V&&(J||x(ie).getAlpha()&&!x.equals(te.paper_bgcolor,ie))){var Jt=rn.selectAll("text"),$t=Jt[0].length,ut=L.select("."+k.cbbg).node(),Dt=h.bBox(ut),Wt=h.getTranslate(L);Jt.each(function(Vt,ln){var un=$t-1;if(0===ln||ln===un){var an,wn=h.bBox(this),Zn=h.getTranslate(this);ln===un?(an=Dt.right+Wt.x+$e-J-2+G-(wn.right+Zn.x))>0&&(an=0):0===ln&&(an=Dt.left+Wt.x+$e+J+2-(wn.left+Zn.x))<0&&(an=0),an&&($t<3?this.setAttribute("transform","translate("+an+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var zt={},Ht=A[j],Ne=M[j],ot=A[q],yt=M[q],It=mt-Te;V?("pixels"===Y?(zt.y=ee,zt.t=Ce*ot,zt.b=Ce*yt):(zt.t=zt.b=0,zt.yt=ee+Z*ot,zt.yb=ee-Z*yt),"pixels"===re?(zt.x=G,zt.l=mt*Ht,zt.r=mt*Ne):(zt.l=It*Ht,zt.r=It*Ne,zt.xl=G-Q*Ht,zt.xr=G+Q*Ne)):("pixels"===Y?(zt.x=G,zt.l=Ce*Ht,zt.r=Ce*Ne):(zt.l=zt.r=0,zt.xl=G+Z*Ht,zt.xr=G-Z*Ne),"pixels"===re?(zt.y=1-ee,zt.t=mt*ot,zt.b=mt*yt):(zt.t=It*ot,zt.b=It*yt,zt.yt=ee-Q*ot,zt.yb=ee+Q*yt)),T.autoMargin(B,I._id,zt)}],B)}(F,D,E);R&&R.then&&(E._promises||[]).push(R),E._context.edits.colorbarPosition&&(Q="v"===(I=D).orientation,re=(B=E)._fullLayout._size,o.init({element:(L=F).node(),gd:B,prepFn:function(){V=L.attr("transform"),y(L)},moveFn:function($,J){L.attr("transform",V+l($,J)),Z=o.align((Q?I._uFrac:I._vFrac)+$/re.w,Q?I._thickFrac:I._lenFrac,0,1,I.xanchor),Y=o.align((Q?I._vFrac:1-I._uFrac)-J/re.h,Q?I._lenFrac:I._thickFrac,0,1,I.yanchor);var ie=o.getCursor(Z,Y,I.xanchor,I.yanchor);y(L,ie)},doneFn:function(){if(y(L),void 0!==Z&&void 0!==Y){var $={};$[I._propPrefix+"x"]=Z,$[I._propPrefix+"y"]=Y,void 0!==I._traceIndex?b.call("_guiRestyle",B,$,I._traceIndex):b.call("_guiRelayout",B,$)}}}))}),P.exit().each(function(D){T.autoMargin(E,D._id)}).remove(),P.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x){return v.isPlainObject(x.colorbar)}},{"../../lib":503}],372:[function(_,oe,se){"use strict";oe.exports={moduleType:"component",name:"colorbar",attributes:_("./attributes"),supplyDefaults:_("./defaults"),draw:_("./draw").draw,hasColorbar:_("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(_,oe,se){"use strict";var v=_("../colorbar/attributes"),x=_("../../lib/regex").counter,T=_("../../lib/sort_object_keys"),b=_("./scales.js").scales;function e(o){return"`"+o+"`"}T(b),oe.exports=function(o,i){o=o||"";var l,r=(i=i||{}).cLetter||"c",y=("onlyIfNumerical"in i||Boolean(o),"noScale"in i?i.noScale:"marker.line"===o),h="showScaleDflt"in i?i.showScaleDflt:"z"===r,s="string"==typeof i.colorscaleDflt?b[i.colorscaleDflt]:null,d=i.editTypeOverride||"",p=o?o+".":"";"colorAttr"in i?l=i.colorAttr:e(p+(l={z:"z",c:"color"}[r]));var c=r+"auto",g=r+"min",m=r+"max",u=r+"mid",w=(e(p+c),e(p+g),e(p+m),{});w[g]=w[m]=void 0;var f={};f[c]=!1;var A={};return"color"===l&&(A.color={valType:"color",arrayOk:!0,editType:d||"style"},i.anim&&(A.color.anim=!0)),A[c]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:w},A[g]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:f},A[m]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:f},A[u]={valType:"number",dflt:null,editType:"calc",impliedEdits:w},A.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},A.autocolorscale={valType:"boolean",dflt:!1!==i.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},A.reversescale={valType:"boolean",dflt:!1,editType:"plot"},y||(A.showscale={valType:"boolean",dflt:h,editType:"calc"},A.colorbar=v),i.noColorAxis||(A.coloraxis={valType:"subplotid",regex:x("coloraxis"),dflt:null,editType:"calc"}),A}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("./helpers").extractOpts;oe.exports=function(b,e,o){var l=b._fullLayout,r=o.vals,y=o.containerStr,h=y?x.nestedProperty(e,y).get():e,s=T(h),d=!1!==s.auto,p=s.min,c=s.max,g=s.mid,m=function(){return x.aggNums(Math.min,null,r)},u=function(){return x.aggNums(Math.max,null,r)};void 0===p?p=m():d&&(p=h._colorAx&&v(p)?Math.min(p,m()):m()),void 0===c?c=u():d&&(c=h._colorAx&&v(c)?Math.max(c,u()):u()),d&&void 0!==g&&(c-g>g-p?p=g-(c-g):c-g<g-p&&(c=g+(g-p))),p===c&&(p-=.5,c+=.5),s._sync("min",p),s._sync("max",c),s.autocolorscale&&s._sync("colorscale",p*c<0?l.colorscale.diverging:p>=0?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./helpers").hasColorscale,T=_("./helpers").extractOpts;oe.exports=function(b,e){function o(d,p){var c=d["_"+p];void 0!==c&&(d[p]=c)}function i(d,p){var c=p.container?v.nestedProperty(d,p.container).get():d;if(c)if(c.coloraxis)c._colorAx=e[c.coloraxis];else{var g=T(c),m=g.auto;(m||void 0===g.min)&&o(c,p.min),(m||void 0===g.max)&&o(c,p.max),g.autocolorscale&&o(c,"colorscale")}}for(var l=0;l<b.length;l++){var r=b[l],y=r._module.colorbar;if(y)if(Array.isArray(y))for(var h=0;h<y.length;h++)i(r,y[h]);else i(r,y);x(r,"marker.line")&&i(r,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in e._colorAxes)i(e[s],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../colorbar/has_colorbar"),b=_("../colorbar/defaults"),e=_("./scales").isValid,o=_("../../registry").traceIs;function i(l,r){var y=r.slice(0,r.length-1);return r?x.nestedProperty(l,y).get()||{}:l}oe.exports=function l(r,y,h,s,d){var p=d.prefix,c=d.cLetter,g="_module"in y,m=i(r,p),u=i(y,p),w=i(y._template||{},p)||{},f=function(){return delete r.coloraxis,delete y.coloraxis,l(r,y,h,s,d)};if(g){var A=h._colorAxes||{},M=s(p+"coloraxis");if(M){var k=o(y,"contour")&&x.nestedProperty(y,"contours.coloring").get()||"heatmap",E=A[M];return void(E?(E[2].push(f),E[0]!==k&&(E[0]=!1,x.warn(["Ignoring coloraxis:",M,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[M]=[k,y,[f]])}}var P=m[c+"min"],D=m[c+"max"],F=v(P)&&v(D)&&P<D;s(p+c+"auto",!F)?s(p+c+"mid"):(s(p+c+"min"),s(p+c+"max"));var R,L,I=m.colorscale,B=w.colorscale;void 0!==I&&(R=!e(I)),void 0!==B&&(R=!e(B)),s(p+"autocolorscale",R),s(p+"colorscale"),s(p+"reversescale"),"marker.line."!==p&&(p&&g&&(L=T(m)),s(p+"showscale",L)&&(p&&w&&(u._template=w),b(m,u,h)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("tinycolor2"),T=_("fast-isnumeric"),b=_("../../lib"),e=_("../color"),o=_("./scales").isValid,i=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function r(p){var c,g,m,u=p._colorAx,w=u||p,f={};for(g=0;g<i.length;g++)f[m=i[g]]=w[m];if(u)for(c="c",g=0;g<l.length;g++)f[m=l[g]]=w["c"+m];else{var A;for(g=0;g<l.length;g++)((A="c"+(m=l[g]))in w||(A="z"+m)in w)&&(f[m]=w[A]);c=A.charAt(0)}return f._sync=function(M,k){var E=-1!==l.indexOf(M)?c+M:M;w[E]=w["_"+E]=k},f}function y(p){for(var c=r(p),g=c.min,m=c.max,u=c.reversescale?h(c.colorscale):c.colorscale,w=u.length,f=new Array(w),A=new Array(w),M=0;M<w;M++){var k=u[M];f[M]=g+k[0]*(m-g),A[M]=k[1]}return{domain:f,range:A}}function h(p){for(var c=p.length,g=new Array(c),m=c-1,u=0;m>=0;m--,u++){var w=p[m];g[u]=[1-w[0],w[1]]}return g}function s(p,c){c=c||{};for(var g=p.domain,m=p.range,u=m.length,w=new Array(u),f=0;f<u;f++){var A=x(m[f]).toRgb();w[f]=[A.r,A.g,A.b,A.a]}var M,k=v.scale.linear().domain(g).range(w).clamp(!0),E=c.noNumericCheck,P=c.returnArray;return(M=E&&P?k:E?function(D){return d(k(D))}:P?function(D){return T(D)?k(D):x(D).isValid()?D:e.defaultLine}:function(D){return T(D)?d(k(D)):x(D).isValid()?D:e.defaultLine}).domain=k.domain,M.range=function(){return m},M}function d(p){return x({r:p[0],g:p[1],b:p[2],a:p[3]}).toRgbString()}oe.exports={hasColorscale:function(p,c,g){var m=c?b.nestedProperty(p,c).get()||{}:p,u=m[g||"color"],w=!1;if(b.isArrayOrTypedArray(u))for(var f=0;f<u.length;f++)if(T(u[f])){w=!0;break}return b.isPlainObject(m)&&(w||!0===m.showscale||T(m.cmin)&&T(m.cmax)||o(m.colorscale)||b.isPlainObject(m.colorbar))},extractOpts:r,extractScale:y,flipScale:h,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(p,c){return s(y(p),c)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(_,oe,se){"use strict";var v=_("./scales"),x=_("./helpers");oe.exports={moduleType:"component",name:"colorscale",attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),handleDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),calc:_("./calc"),scales:v.scales,defaultScale:v.defaultScale,getScale:v.get,isValidScale:v.isValid,hasColorscale:x.hasColorscale,extractOpts:x.extractOpts,extractScale:x.extractScale,flipScale:x.flipScale,makeColorScaleFunc:x.makeColorScaleFunc,makeColorScaleFuncFromTrace:x.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(_,oe,se){"use strict";var v=_("../../lib/extend").extendFlat,x=_("./attributes"),T=_("./scales").scales;oe.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:T.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:T.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:T.RdBu,editType:"calc"}},coloraxis:v({_isSubplotObj:!0,editType:"calc"},x("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("./layout_attributes"),b=_("./defaults");oe.exports=function(e,o){function i(c,g){return v.coerce(e,o,T,c,g)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var l,r,y=o._colorAxes;function h(c,g){return v.coerce(l,r,T.coloraxis,c,g)}for(var s in y){var d=y[s];if(d[0])l=e[s]||{},(r=x.newContainer(o,s,"coloraxis"))._name=s,b(l,r,o,h,{prefix:"",cLetter:"c"});else{for(var p=0;p<d[2].length;p++)d[2][p]();delete o._colorAxes[s]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(_,oe,se){"use strict";var v=_("tinycolor2"),x={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},T=x.RdBu;function b(e){var o=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var i=0;i<e.length;i++){var l=e[i];if(2!==l.length||+l[0]<o||!v(l[1]).isValid())return!1;o=+l[0]}return!0}oe.exports={scales:x,defaultScale:T,get:function(e,o){if(o||(o=T),!e)return o;function i(){try{e=x[e]||JSON.parse(e)}catch(l){e=o}}return"string"==typeof e&&(i(),"string"==typeof e&&i()),b(e)?e:o},isValid:function(e){return void 0!==x[e]||b(e)}}},{tinycolor2:312}],382:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){var o=(v-T)/(b-T),i=o+x/(b-T),l=(o+i)/2;return"left"===e||"bottom"===e?o:"center"===e||"middle"===e?l:"right"===e||"top"===e?i:o<2/3-l?o:i>4/3-l?i:l}},{}],383:[function(_,oe,se){"use strict";var v=_("../../lib"),x=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];oe.exports=function(T,b,e,o){return T="left"===e?0:"center"===e?1:"right"===e?2:v.constrain(Math.floor(3*T),0,2),b="bottom"===o?0:"middle"===o?1:"top"===o?2:v.constrain(Math.floor(3*b),0,2),x[b][T]}},{"../../lib":503}],384:[function(_,oe,se){"use strict";se.selectMode=function(v){return"lasso"===v||"select"===v},se.drawMode=function(v){return"drawclosedpath"===v||"drawopenpath"===v||"drawline"===v||"drawrect"===v||"drawcircle"===v},se.openMode=function(v){return"drawline"===v||"drawopenpath"===v},se.rectMode=function(v){return"select"===v||"drawline"===v||"drawrect"===v||"drawcircle"===v},se.freeMode=function(v){return"lasso"===v||"drawclosedpath"===v||"drawopenpath"===v},se.selectingOrDrawing=function(v){return se.freeMode(v)||se.rectMode(v)}},{}],385:[function(_,oe,se){"use strict";var v=_("mouse-event-offset"),x=_("has-hover"),T=_("has-passive-events"),b=_("../../lib").removeElement,e=_("../../plots/cartesian/constants"),o=oe.exports={};o.align=_("./align"),o.getCursor=_("./cursor");var i=_("./unhover");function l(){var y=document.createElement("div");y.className="dragcover";var h=y.style;return h.position="fixed",h.left=0,h.right=0,h.top=0,h.bottom=0,h.zIndex=999999999,h.background="none",document.body.appendChild(y),y}function r(y){return v(y.changedTouches?y.changedTouches[0]:y,document.body)}o.unhover=i.wrapped,o.unhoverRaw=i.raw,o.init=function(y){var h,s,d,p,c,g,m,u,w=y.gd,f=1,A=w._context.doubleClickDelay,M=y.element;w._mouseDownTime||(w._mouseDownTime=0),M.style.pointerEvents="all",M.onmousedown=E,T?(M._ontouchstart&&M.removeEventListener("touchstart",M._ontouchstart),M._ontouchstart=E,M.addEventListener("touchstart",E,{passive:!1})):M.ontouchstart=E;var k=y.clampFn||function(F,R,L){return Math.abs(F)<L&&(F=0),Math.abs(R)<L&&(R=0),[F,R]};function E(F){w._dragged=!1,w._dragging=!0;var R=r(F);h=R[0],s=R[1],m=F.target,g=F,u=2===F.buttons||F.ctrlKey,void 0===F.clientX&&void 0===F.clientY&&(F.clientX=h,F.clientY=s),(d=(new Date).getTime())-w._mouseDownTime<A?f+=1:(f=1,w._mouseDownTime=d),y.prepFn&&y.prepFn(F,h,s),x&&!u?(c=l()).style.cursor=window.getComputedStyle(M).cursor:x||(c=document,p=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(M).cursor),document.addEventListener("mouseup",D),document.addEventListener("touchend",D),!1!==y.dragmode&&(F.preventDefault(),document.addEventListener("mousemove",P),document.addEventListener("touchmove",P,{passive:!1}))}function P(F){F.preventDefault();var R=r(F),I=k(R[0]-h,R[1]-s,y.minDrag||e.MINDRAG),B=I[0],V=I[1];(B||V)&&(w._dragged=!0,o.unhover(w,F)),w._dragged&&y.moveFn&&!u&&(w._dragdata={element:M,dx:B,dy:V},y.moveFn(B,V))}function D(F){if(delete w._dragdata,!1!==y.dragmode&&(F.preventDefault(),document.removeEventListener("mousemove",P),document.removeEventListener("touchmove",P)),document.removeEventListener("mouseup",D),document.removeEventListener("touchend",D),x?b(c):p&&(c.documentElement.style.cursor=p,p=null),w._dragging){if(w._dragging=!1,(new Date).getTime()-w._mouseDownTime>A&&(f=Math.max(f-1,1)),w._dragged)y.doneFn&&y.doneFn();else if(y.clickFn&&y.clickFn(f,g),!u){var R;try{R=new MouseEvent("click",F)}catch(I){var L=r(F);(R=document.createEvent("MouseEvents")).initMouseEvent("click",F.bubbles,F.cancelable,F.view,F.detail,F.screenX,F.screenY,L[0],L[1],F.ctrlKey,F.altKey,F.shiftKey,F.metaKey,F.button,F.relatedTarget)}m.dispatchEvent(R)}w._dragging=!1,w._dragged=!1}else w._dragged=!1}},o.coverSlip=l},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(_,oe,se){"use strict";var v=_("../../lib/events"),x=_("../../lib/throttle"),T=_("../../lib/dom").getGraphDiv,b=_("../fx/constants"),e=oe.exports={};e.wrapped=function(o,i,l){(o=T(o))._fullLayout&&x.clear(o._fullLayout._uid+b.HOVERID),e.raw(o,i,l)},e.raw=function(o,i){var l=o._fullLayout,r=o._hoverdata;i||(i={}),i.target&&!o._dragged&&!1===v.triggerHandler(o,"plotly_beforehover",i)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),o._hoverdata=void 0,i.target&&r&&o.emit("plotly_unhover",{event:i,points:r}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(_,oe,se){"use strict";se.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},se.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("fast-isnumeric"),e=_("tinycolor2"),o=_("../../registry"),i=_("../color"),l=_("../colorscale"),r=x.strTranslate,y=_("../../lib/svg_text_utils"),h=_("../../constants/xmlns_namespaces"),s=_("../../constants/alignment").LINE_SPACING,d=_("../../constants/interactions").DESELECTDIM,p=_("../../traces/scatter/subtypes"),c=_("../../traces/scatter/make_bubble_size_func"),g=_("../../components/fx/helpers").appendArrayPointValue,m=oe.exports={};function u($,J,ie){var j=J.fillpattern,q=j&&m.getPatternAttr(j.shape,0,"");if(q){var W=m.getPatternAttr(j.bgcolor,0,null),ae=m.getPatternAttr(j.fgcolor,0,null),G=j.fgopacity,ee=m.getPatternAttr(j.size,0,8),te=m.getPatternAttr(j.solidity,0,.3);m.pattern($,"point",ie,J.uid,q,ee,te,void 0,j.fillmode,W,ae,G)}else J.fillcolor&&$.call(i.fill,J.fillcolor)}m.font=function($,J,ie,j){x.isPlainObject(J)&&(j=J.color,ie=J.size,J=J.family),J&&$.style("font-family",J),ie+1&&$.style("font-size",ie+"px"),j&&$.call(i.fill,j)},m.setPosition=function($,J,ie){$.attr("x",J).attr("y",ie)},m.setSize=function($,J,ie){$.attr("width",J).attr("height",ie)},m.setRect=function($,J,ie,j,q){$.call(m.setPosition,J,ie).call(m.setSize,j,q)},m.translatePoint=function($,J,ie,j){var q=ie.c2p($.x),W=j.c2p($.y);return!!(b(q)&&b(W)&&J.node())&&("text"===J.node().nodeName?J.attr("x",q).attr("y",W):J.attr("transform",r(q,W)),!0)},m.translatePoints=function($,J,ie){$.each(function(j){var q=v.select(this);m.translatePoint(j,q,J,ie)})},m.hideOutsideRangePoint=function($,J,ie,j,q,W){J.attr("display",ie.isPtWithinRange($,q)&&j.isPtWithinRange($,W)?null:"none")},m.hideOutsideRangePoints=function($,J){if(J._hasClipOnAxisFalse){var ie=J.xaxis,j=J.yaxis;$.each(function(q){var W=q[0].trace,ae=W.xcalendar,G=W.ycalendar,ee=o.traceIs(W,"bar-like")?".bartext":".point,.textpoint";$.selectAll(ee).each(function(te){m.hideOutsideRangePoint(te,v.select(this),ie,j,ae,G)})})}},m.crispRound=function($,J,ie){return J&&b(J)?$._context.staticPlot?J:J<1?1:Math.round(J):ie||0},m.singleLineStyle=function($,J,ie,j,q){J.style("fill","none");var W=((($||[])[0]||{}).trace||{}).line||{},ae=ie||W.width||0,G=q||W.dash||"";i.stroke(J,j||W.color),m.dashLine(J,G,ae)},m.lineGroupStyle=function($,J,ie,j){$.style("fill","none").each(function(q){var W=(((q||[])[0]||{}).trace||{}).line||{},ae=J||W.width||0,G=j||W.dash||"";v.select(this).call(i.stroke,ie||W.color).call(m.dashLine,G,ae)})},m.dashLine=function($,J,ie){J=m.dashStyle(J,ie=+ie||0),$.style({"stroke-dasharray":J,"stroke-width":ie+"px"})},m.dashStyle=function($,J){J=+J||1;var ie=Math.max(J,3);return"solid"===$?$="":"dot"===$?$=ie+"px,"+ie+"px":"dash"===$?$=3*ie+"px,"+3*ie+"px":"longdash"===$?$=5*ie+"px,"+5*ie+"px":"dashdot"===$?$=3*ie+"px,"+ie+"px,"+ie+"px,"+ie+"px":"longdashdot"===$&&($=5*ie+"px,"+2*ie+"px,"+ie+"px,"+2*ie+"px"),$},m.singleFillStyle=function($,J){var ie=v.select($.node());u($,((ie.data()[0]||[])[0]||{}).trace||{},J)},m.fillGroupStyle=function($,J){$.style("stroke-width",0).each(function(ie){var j=v.select(this);ie[0].trace&&u(j,ie[0].trace,J)})};var w=_("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(w).forEach(function($){var J=w[$],ie=J.n;m.symbolList.push(ie,String(ie),$,ie+100,String(ie+100),$+"-open"),m.symbolNames[ie]=$,m.symbolFuncs[ie]=J.f,J.needLine&&(m.symbolNeedLines[ie]=!0),J.noDot?m.symbolNoDot[ie]=!0:m.symbolList.push(ie+200,String(ie+200),$+"-dot",ie+300,String(ie+300),$+"-open-dot"),J.noFill&&(m.symbolNoFill[ie]=!0)});var f=m.symbolNames.length;function A($,J){return m.symbolFuncs[$%100](J)+($>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function($){if(b($))$=+$;else if("string"==typeof $){var J=0;$.indexOf("-open")>0&&(J=100,$=$.replace("-open","")),$.indexOf("-dot")>0&&(J+=200,$=$.replace("-dot","")),($=m.symbolNames.indexOf($))>=0&&($+=J)}return $%100>=f||$>=400?0:Math.floor(Math.max($,0))};var M={x1:1,x2:0,y1:0,y2:0},k={x1:0,x2:0,y1:1,y2:0},E=T("~f"),P={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:k},verticalreversed:{node:"linearGradient",attrs:k,reversed:!0}};m.gradient=function($,J,ie,j,q,W){for(var ae=q.length,G=P[j],ee=new Array(ae),te=0;te<ae;te++)G.reversed?ee[ae-1-te]=[E(100*(1-q[te][0])),q[te][1]]:ee[te]=[E(100*q[te][0]),q[te][1]];var le=J._fullLayout,ue="g"+le._uid+"-"+ie,de=le._defs.select(".gradients").selectAll("#"+ue).data([j+ee.join(";")],x.identity);de.exit().remove(),de.enter().append(G.node).each(function(){var he=v.select(this);G.attrs&&he.attr(G.attrs),he.attr("id",ue);var be=he.selectAll("stop").data(ee);be.exit().remove(),be.enter().append("stop"),be.each(function(me){var _e=e(me[1]);v.select(this).attr({offset:me[0]+"%","stop-color":i.tinyRGB(_e),"stop-opacity":_e.getAlpha()})})}),$.style(W,Y(ue,J)).style(W+"-opacity",null),$.classed("gradient_filled",!0)},m.pattern=function($,J,ie,j,q,W,ae,G,ee,te,le,ue){var de="legend"===J;G&&("overlay"===ee?le=i.contrast(te=G):(te=void 0,le=G));var he,be,me,_e,Ee,De,Se,Fe,Te,Ce=ie._fullLayout,Re="p"+Ce._uid+"-"+j,Ue={};switch(q){case"/":he=W*Math.sqrt(2),be=W*Math.sqrt(2),De="path",Ue={d:me="M-"+he/4+","+be/4+"l"+he/2+",-"+be/2+"M0,"+be+"L"+he+",0M"+he/4*3+","+be/4*5+"l"+he/2+",-"+be/2,opacity:ue,stroke:le,"stroke-width":(_e=ae*W)+"px"};break;case"\\":he=W*Math.sqrt(2),be=W*Math.sqrt(2),De="path",Ue={d:me="M"+he/4*3+",-"+be/4+"l"+he/2+","+be/2+"M0,0L"+he+","+be+"M-"+he/4+","+be/4*3+"l"+he/2+","+be/2,opacity:ue,stroke:le,"stroke-width":(_e=ae*W)+"px"};break;case"x":he=W*Math.sqrt(2),be=W*Math.sqrt(2),me="M-"+he/4+","+be/4+"l"+he/2+",-"+be/2+"M0,"+be+"L"+he+",0M"+he/4*3+","+be/4*5+"l"+he/2+",-"+be/2+"M"+he/4*3+",-"+be/4+"l"+he/2+","+be/2+"M0,0L"+he+","+be+"M-"+he/4+","+be/4*3+"l"+he/2+","+be/2,_e=W-W*Math.sqrt(1-ae),De="path",Ue={d:me,opacity:ue,stroke:le,"stroke-width":_e+"px"};break;case"|":De="path",De="path",Ue={d:me="M"+(he=W)/2+",0L"+he/2+","+(be=W),opacity:ue,stroke:le,"stroke-width":(_e=ae*W)+"px"};break;case"-":De="path",De="path",Ue={d:me="M0,"+(be=W)/2+"L"+(he=W)+","+be/2,opacity:ue,stroke:le,"stroke-width":(_e=ae*W)+"px"};break;case"+":De="path",me="M"+(he=W)/2+",0L"+he/2+","+(be=W)+"M0,"+be/2+"L"+he+","+be/2,_e=W-W*Math.sqrt(1-ae),De="path",Ue={d:me,opacity:ue,stroke:le,"stroke-width":_e+"px"};break;case".":he=W,be=W,ae<Math.PI/4?Ee=Math.sqrt(ae*W*W/Math.PI):(Se=ae,Fe=Math.PI/4,1,Ee=(Te=W/2)+(W/Math.sqrt(2)-Te)*(Se-Fe)/(1-Fe)),De="circle",Ue={cx:he/2,cy:be/2,r:Ee,opacity:ue,fill:le}}var qe=[q||"noSh",te||"noBg",le||"noFg",W,ae].join(";"),Xe=Ce._defs.select(".patterns").selectAll("#"+Re).data([qe],x.identity);Xe.exit().remove(),Xe.enter().append("pattern").each(function(){var st=v.select(this);if(st.attr({id:Re,width:he+"px",height:be+"px",patternUnits:"userSpaceOnUse",patternTransform:de?"scale(0.8)":""}),te){var He=st.selectAll("rect").data([0]);He.exit().remove(),He.enter().append("rect").attr({width:he+"px",height:be+"px",fill:te})}var $e=st.selectAll(De).data([0]);$e.exit().remove(),$e.enter().append(De).attr(Ue)}),$.style("fill",Y(Re,ie)).style("fill-opacity",null),$.classed("pattern_filled",!0)},m.initGradients=function($){x.ensureSingle($._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),v.select($).selectAll(".gradient_filled").classed("gradient_filled",!1)},m.initPatterns=function($){x.ensureSingle($._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),v.select($).selectAll(".pattern_filled").classed("pattern_filled",!1)},m.getPatternAttr=function($,J,ie){return $&&x.isArrayOrTypedArray($)?J<$.length?$[J]:ie:$},m.pointStyle=function($,J,ie){if($.size()){var j=m.makePointStyleFns(J);$.each(function(q){m.singlePointStyle(q,v.select(this),J,j,ie)})}},m.singlePointStyle=function($,J,ie,j,q){var W=ie.marker,ae=W.line;if(J.style("opacity",j.selectedOpacityFn?j.selectedOpacityFn($):void 0===$.mo?W.opacity:$.mo),j.ms2mrc){var G;G="various"===$.ms||"various"===W.size?3:j.ms2mrc($.ms),$.mrc=G,j.selectedSizeFn&&(G=$.mrc=j.selectedSizeFn($));var ee=m.symbolNumber($.mx||W.symbol)||0;$.om=ee%200>=100,J.attr("d",A(ee,G))}var te,le,ue,de=!1;if($.so?(ue=ae.outlierwidth,le=ae.outliercolor,te=W.outliercolor):(ue=($.mlw+1||(ae||{}).width+1||($.trace?($.trace.marker.line||{}).width:0)+1)-1||0,le="mlc"in $?$.mlcc=j.lineScale($.mlc):x.isArrayOrTypedArray(ae.color)?i.defaultLine:ae.color,x.isArrayOrTypedArray(W.color)&&(te=i.defaultLine,de=!0),te="mc"in $?$.mcc=j.markerScale($.mc):W.color||"rgba(0,0,0,0)",j.selectedColorFn&&(te=j.selectedColorFn($))),$.om)J.call(i.stroke,te).style({"stroke-width":(ue||1)+"px",fill:"none"});else{J.style("stroke-width",($.isBlank?0:ue)+"px");var be=W.gradient,me=$.mgt;me?de=!0:me=be&&be.type,x.isArrayOrTypedArray(me)&&(P[me=me[0]]||(me=0));var _e=W.pattern,Ee=_e&&m.getPatternAttr(_e.shape,$.i,"");if(me&&"none"!==me){var De=$.mgc;De?de=!0:De=be.color;var Se=ie.uid;de&&(Se+="-"+$.i),m.gradient(J,q,Se,me,[[0,De],[1,te]],"fill")}else if(Ee){var Fe=m.getPatternAttr(_e.bgcolor,$.i,null),ve=m.getPatternAttr(_e.fgcolor,$.i,null),Te=_e.fgopacity,Ie=m.getPatternAttr(_e.size,$.i,8),Ce=m.getPatternAttr(_e.solidity,$.i,.3),Re=$.mcc||x.isArrayOrTypedArray(_e.shape)||x.isArrayOrTypedArray(_e.bgcolor)||x.isArrayOrTypedArray(_e.size)||x.isArrayOrTypedArray(_e.solidity),Ue=ie.uid;Re&&(Ue+="-"+$.i),m.pattern(J,"point",q,Ue,Ee,Ie,Ce,$.mcc,_e.fillmode,Fe,ve,Te)}else i.fill(J,te);ue&&i.stroke(J,le)}},m.makePointStyleFns=function($){var J={},ie=$.marker;return J.markerScale=m.tryColorscale(ie,""),J.lineScale=m.tryColorscale(ie,"line"),o.traceIs($,"symbols")&&(J.ms2mrc=p.isBubble($)?c($):function(){return(ie.size||6)/2}),$.selectedpoints&&x.extendFlat(J,m.makeSelectedPointStyleFns($)),J},m.makeSelectedPointStyleFns=function($){var J={},q=$.marker||{},W=($.selected||{}).marker||{},ae=($.unselected||{}).marker||{},ee=W.opacity,te=ae.opacity,le=void 0!==ee,ue=void 0!==te;(x.isArrayOrTypedArray(q.opacity)||le||ue)&&(J.selectedOpacityFn=function(Fe){var ve=void 0===Fe.mo?q.opacity:Fe.mo;return Fe.selected?le?ee:ve:ue?te:d*ve});var de=q.color,he=W.color,be=ae.color;(he||be)&&(J.selectedColorFn=function(Fe){var ve=Fe.mcc||de;return Fe.selected?he||ve:be||ve});var me=q.size,_e=W.size,Ee=ae.size,De=void 0!==_e,Se=void 0!==Ee;return o.traceIs($,"symbols")&&(De||Se)&&(J.selectedSizeFn=function(Fe){var ve=Fe.mrc||me/2;return Fe.selected?De?_e/2:ve:Se?Ee/2:ve}),J},m.makeSelectedTextStyleFns=function($){var J={},G=($.textfont||{}).color,ee=(($.selected||{}).textfont||{}).color,te=(($.unselected||{}).textfont||{}).color;return J.selectedTextColorFn=function(le){var ue=le.tc||G;return le.selected?ee||ue:te||(ee?ue:i.addOpacity(ue,d))},J},m.selectedPointStyle=function($,J){if($.size()&&J.selectedpoints){var ie=m.makeSelectedPointStyleFns(J),j=J.marker||{},q=[];ie.selectedOpacityFn&&q.push(function(W,ae){W.style("opacity",ie.selectedOpacityFn(ae))}),ie.selectedColorFn&&q.push(function(W,ae){i.fill(W,ie.selectedColorFn(ae))}),ie.selectedSizeFn&&q.push(function(W,ae){var G=ae.mx||j.symbol||0,ee=ie.selectedSizeFn(ae);W.attr("d",A(m.symbolNumber(G),ee)),ae.mrc2=ee}),q.length&&$.each(function(W){for(var ae=v.select(this),G=0;G<q.length;G++)q[G](ae,W)})}},m.tryColorscale=function($,J){var ie=J?x.nestedProperty($,J).get():$;return ie&&(ie.colorscale||ie._colorAx)&&x.isArrayOrTypedArray(ie.color)?l.makeColorScaleFuncFromTrace(ie):x.identity};var D={start:1,end:-1,middle:0,bottom:1,top:-1};function F($,J,ie,j,q){var W=v.select($.node().parentNode),ae=-1!==J.indexOf("top")?"top":-1!==J.indexOf("bottom")?"bottom":"middle",G=-1!==J.indexOf("left")?"end":-1!==J.indexOf("right")?"start":"middle",ee=j?j/.8+1:0,te=(y.lineCount($)-1)*s+1,le=D[G]*ee,ue=.75*ie+D[ae]*ee+(D[ae]-1)*te*ie/2;$.attr("text-anchor",G),q||W.attr("transform",r(le,ue))}function R($,J){var ie=$.ts||J.textfont.size;return b(ie)&&ie>0?ie:0}function L($,J,ie,j){var q=$[0]-J[0],W=$[1]-J[1],ae=ie[0]-J[0],G=ie[1]-J[1],ee=Math.pow(q*q+W*W,.25),te=Math.pow(ae*ae+G*G,.25),le=(te*te*q-ee*ee*ae)*j,ue=(te*te*W-ee*ee*G)*j,de=3*te*(ee+te),he=3*ee*(ee+te);return[[v.round(J[0]+(de&&le/de),2),v.round(J[1]+(de&&ue/de),2)],[v.round(J[0]-(he&&le/he),2),v.round(J[1]-(he&&ue/he),2)]]}m.textPointStyle=function($,J,ie){if($.size()){var j;if(J.selectedpoints){var q=m.makeSelectedTextStyleFns(J);j=q.selectedTextColorFn}var W=J.texttemplate,ae=ie._fullLayout;$.each(function(G){var ee=v.select(this),te=W?x.extractOption(G,J,"txt","texttemplate"):x.extractOption(G,J,"tx","text");if(te||0===te){if(W){var le=J._module.formatLabels,ue=le?le(G,J,ae):{},de={};g(de,J,G.i),te=x.texttemplateString(te,ue,ae._d3locale,de,G,J._meta||{})}var be=G.tp||J.textposition,me=R(G,J),_e=j?j(G):G.tc||J.textfont.color;ee.call(m.font,G.tf||J.textfont.family,me,_e).text(te).call(y.convertToTspans,ie).call(F,be,me,G.mrc)}else ee.remove()})}},m.selectedTextStyle=function($,J){if($.size()&&J.selectedpoints){var ie=m.makeSelectedTextStyleFns(J);$.each(function(j){var q=v.select(this),W=ie.selectedTextColorFn(j),ae=j.tp||J.textposition,G=R(j,J);i.fill(q,W);var ee=o.traceIs(J,"bar-like");F(q,ae,G,j.mrc2||j.mrc,ee)})}},m.smoothopen=function($,J){if($.length<3)return"M"+$.join("L");var ie,j="M"+$[0],q=[];for(ie=1;ie<$.length-1;ie++)q.push(L($[ie-1],$[ie],$[ie+1],J));for(j+="Q"+q[0][0]+" "+$[1],ie=2;ie<$.length-1;ie++)j+="C"+q[ie-2][1]+" "+q[ie-1][0]+" "+$[ie];return j+"Q"+q[$.length-3][1]+" "+$[$.length-1]},m.smoothclosed=function($,J){if($.length<3)return"M"+$.join("L")+"Z";var ie,j="M"+$[0],q=$.length-1,W=[L($[q],$[0],$[1],J)];for(ie=1;ie<q;ie++)W.push(L($[ie-1],$[ie],$[ie+1],J));for(W.push(L($[q-1],$[q],$[0],J)),ie=1;ie<=q;ie++)j+="C"+W[ie-1][1]+" "+W[ie][0]+" "+$[ie];return j+"C"+W[q][1]+" "+W[0][0]+" "+$[0]+"Z"};var I={hv:function($,J){return"H"+v.round(J[0],2)+"V"+v.round(J[1],2)},vh:function($,J){return"V"+v.round(J[1],2)+"H"+v.round(J[0],2)},hvh:function($,J){return"H"+v.round(($[0]+J[0])/2,2)+"V"+v.round(J[1],2)+"H"+v.round(J[0],2)},vhv:function($,J){return"V"+v.round(($[1]+J[1])/2,2)+"H"+v.round(J[0],2)+"V"+v.round(J[1],2)}},B=function($,J){return"L"+v.round(J[0],2)+","+v.round(J[1],2)};m.steps=function($){var J=I[$]||B;return function(ie){for(var j="M"+v.round(ie[0][0],2)+","+v.round(ie[0][1],2),q=1;q<ie.length;q++)j+=J(ie[q-1],ie[q]);return j}},m.makeTester=function(){var $=x.ensureSingleById(v.select("body"),"svg","js-plotly-tester",function(ie){ie.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),J=x.ensureSingle($,"path","js-reference-point",function(ie){ie.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=$,m.testref=J},m.savedBBoxes={};var V=0;function Z($){var J=$.getAttribute("data-unformatted");if(null!==J)return J+$.getAttribute("data-math")+$.getAttribute("text-anchor")+$.getAttribute("style")}function Y($,J){if(!$)return null;var ie=J._context,j=ie._exportedPlot?"":ie._baseUrl||"";return j?"url('"+j+"#"+$+"')":"url(#"+$+")"}m.bBox=function($,J,ie){var j,q,W;if(ie||(ie=Z($)),ie){if(j=m.savedBBoxes[ie])return x.extendFlat({},j)}else if(1===$.childNodes.length){var ae=$.childNodes[0];if(ie=Z(ae)){var G=+ae.getAttribute("x")||0,ee=+ae.getAttribute("y")||0,te=ae.getAttribute("transform");if(!te){var le=m.bBox(ae,!1,ie);return G&&(le.left+=G,le.right+=G),ee&&(le.top+=ee,le.bottom+=ee),le}if(j=m.savedBBoxes[ie+="~"+G+"~"+ee+"~"+te])return x.extendFlat({},j)}}J?q=$:(W=m.tester.node(),q=$.cloneNode(!0),W.appendChild(q)),v.select(q).attr("transform",null).call(y.positionText,0,0);var ue=q.getBoundingClientRect(),de=m.testref.node().getBoundingClientRect();J||W.removeChild(q);var he={height:ue.height,width:ue.width,left:ue.left-de.left,top:ue.top-de.top,right:ue.right-de.left,bottom:ue.bottom-de.top};return V>=1e4&&(m.savedBBoxes={},V=0),ie&&(m.savedBBoxes[ie]=he),V++,x.extendFlat({},he)},m.setClipUrl=function($,J,ie){$.attr("clip-path",Y(J,ie))},m.getTranslate=function($){var J=($[$.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ie,j,q){return[j,q].join(" ")}).split(" ");return{x:+J[0]||0,y:+J[1]||0}},m.setTranslate=function($,J,ie){var q=$.attr?"attr":"setAttribute",W=$[$.attr?"attr":"getAttribute"]("transform")||"";return J=J||0,ie=ie||0,W=W.replace(/(\btranslate\(.*?\);?)/,"").trim(),W=(W+=r(J,ie)).trim(),$[q]("transform",W),W},m.getScale=function($){var J=($[$.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ie,j,q){return[j,q].join(" ")}).split(" ");return{x:+J[0]||1,y:+J[1]||1}},m.setScale=function($,J,ie){var q=$.attr?"attr":"setAttribute",W=$[$.attr?"attr":"getAttribute"]("transform")||"";return J=J||1,ie=ie||1,W=W.replace(/(\bscale\(.*?\);?)/,"").trim(),W=(W+="scale("+J+","+ie+")").trim(),$[q]("transform",W),W};var Q=/\s*sc.*/;m.setPointGroupScale=function($,J,ie){if(J=J||1,ie=ie||1,$){var j=1===J&&1===ie?"":"scale("+J+","+ie+")";$.each(function(){var q=(this.getAttribute("transform")||"").replace(Q,"");q=(q+=j).trim(),this.setAttribute("transform",q)})}};var re=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function($,J,ie){$&&$.each(function(){var j,q=v.select(this),W=q.select("text");if(W.node()){var ae=parseFloat(W.attr("x")||0),G=parseFloat(W.attr("y")||0),ee=(q.attr("transform")||"").match(re);j=1===J&&1===ie?[]:[r(ae,G),"scale("+J+","+ie+")",r(-ae,-G)],ee&&j.push(ee),q.attr("transform",j.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(_,oe,se){"use strict";var v=_("@plotly/d3");oe.exports={circle:{n:0,f:function(x){var T=v.round(x,2);return"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"}},square:{n:1,f:function(x){var T=v.round(x,2);return"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"}},diamond:{n:2,f:function(x){var T=v.round(1.3*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"Z"}},cross:{n:3,f:function(x){var T=v.round(.4*x,2),b=v.round(1.2*x,2);return"M"+b+","+T+"H"+T+"V"+b+"H-"+T+"V"+T+"H-"+b+"V-"+T+"H-"+T+"V-"+b+"H"+T+"V-"+T+"H"+b+"Z"}},x:{n:4,f:function(x){var T=v.round(.8*x/Math.sqrt(2),2),b="l"+T+","+T,e="l"+T+",-"+T,o="l-"+T+",-"+T,i="l-"+T+","+T;return"M0,"+T+b+e+o+e+o+i+o+i+b+i+b+"Z"}},"triangle-up":{n:5,f:function(x){var T=v.round(2*x/Math.sqrt(3),2);return"M-"+T+","+v.round(x/2,2)+"H"+T+"L0,-"+v.round(x,2)+"Z"}},"triangle-down":{n:6,f:function(x){var T=v.round(2*x/Math.sqrt(3),2);return"M-"+T+",-"+v.round(x/2,2)+"H"+T+"L0,"+v.round(x,2)+"Z"}},"triangle-left":{n:7,f:function(x){var T=v.round(2*x/Math.sqrt(3),2);return"M"+v.round(x/2,2)+",-"+T+"V"+T+"L-"+v.round(x,2)+",0Z"}},"triangle-right":{n:8,f:function(x){var T=v.round(2*x/Math.sqrt(3),2);return"M-"+v.round(x/2,2)+",-"+T+"V"+T+"L"+v.round(x,2)+",0Z"}},"triangle-ne":{n:9,f:function(x){var T=v.round(.6*x,2),b=v.round(1.2*x,2);return"M-"+b+",-"+T+"H"+T+"V"+b+"Z"}},"triangle-se":{n:10,f:function(x){var T=v.round(.6*x,2),b=v.round(1.2*x,2);return"M"+T+",-"+b+"V"+T+"H-"+b+"Z"}},"triangle-sw":{n:11,f:function(x){var T=v.round(.6*x,2),b=v.round(1.2*x,2);return"M"+b+","+T+"H-"+T+"V-"+b+"Z"}},"triangle-nw":{n:12,f:function(x){var T=v.round(.6*x,2),b=v.round(1.2*x,2);return"M-"+T+","+b+"V-"+T+"H"+b+"Z"}},pentagon:{n:13,f:function(x){var T=v.round(.951*x,2),b=v.round(.588*x,2),e=v.round(-x,2),o=v.round(-.309*x,2);return"M"+T+","+o+"L"+b+","+v.round(.809*x,2)+"H-"+b+"L-"+T+","+o+"L0,"+e+"Z"}},hexagon:{n:14,f:function(x){var T=v.round(x,2),b=v.round(x/2,2),e=v.round(x*Math.sqrt(3)/2,2);return"M"+e+",-"+b+"V"+b+"L0,"+T+"L-"+e+","+b+"V-"+b+"L0,-"+T+"Z"}},hexagon2:{n:15,f:function(x){var T=v.round(x,2),b=v.round(x/2,2),e=v.round(x*Math.sqrt(3)/2,2);return"M-"+b+","+e+"H"+b+"L"+T+",0L"+b+",-"+e+"H-"+b+"L-"+T+",0Z"}},octagon:{n:16,f:function(x){var T=v.round(.924*x,2),b=v.round(.383*x,2);return"M-"+b+",-"+T+"H"+b+"L"+T+",-"+b+"V"+b+"L"+b+","+T+"H-"+b+"L-"+T+","+b+"V-"+b+"Z"}},star:{n:17,f:function(x){var T=1.4*x,b=v.round(.225*T,2),e=v.round(.951*T,2),o=v.round(.363*T,2),i=v.round(.588*T,2),l=v.round(-T,2),r=v.round(-.309*T,2),y=v.round(.118*T,2),h=v.round(.809*T,2);return"M"+b+","+r+"H"+e+"L"+o+","+y+"L"+i+","+h+"L0,"+v.round(.382*T,2)+"L-"+i+","+h+"L-"+o+","+y+"L-"+e+","+r+"H-"+b+"L0,"+l+"Z"}},hexagram:{n:18,f:function(x){var T=v.round(.66*x,2),b=v.round(.38*x,2),e=v.round(.76*x,2);return"M-"+e+",0l-"+b+",-"+T+"h"+e+"l"+b+",-"+T+"l"+b+","+T+"h"+e+"l-"+b+","+T+"l"+b+","+T+"h-"+e+"l-"+b+","+T+"l-"+b+",-"+T+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(x){var T=v.round(x*Math.sqrt(3)*.8,2),b=v.round(.8*x,2),e=v.round(1.6*x,2),o=v.round(4*x,2),i="A "+o+","+o+" 0 0 1 ";return"M-"+T+","+b+i+T+","+b+i+"0,-"+e+i+"-"+T+","+b+"Z"}},"star-triangle-down":{n:20,f:function(x){var T=v.round(x*Math.sqrt(3)*.8,2),b=v.round(.8*x,2),e=v.round(1.6*x,2),o=v.round(4*x,2),i="A "+o+","+o+" 0 0 1 ";return"M"+T+",-"+b+i+"-"+T+",-"+b+i+"0,"+e+i+T+",-"+b+"Z"}},"star-square":{n:21,f:function(x){var T=v.round(1.1*x,2),b=v.round(2*x,2),e="A "+b+","+b+" 0 0 1 ";return"M-"+T+",-"+T+e+"-"+T+","+T+e+T+","+T+e+T+",-"+T+e+"-"+T+",-"+T+"Z"}},"star-diamond":{n:22,f:function(x){var T=v.round(1.4*x,2),b=v.round(1.9*x,2),e="A "+b+","+b+" 0 0 1 ";return"M-"+T+",0"+e+"0,"+T+e+T+",0"+e+"0,-"+T+e+"-"+T+",0Z"}},"diamond-tall":{n:23,f:function(x){var T=v.round(.7*x,2),b=v.round(1.4*x,2);return"M0,"+b+"L"+T+",0L0,-"+b+"L-"+T+",0Z"}},"diamond-wide":{n:24,f:function(x){var T=v.round(1.4*x,2),b=v.round(.7*x,2);return"M0,"+b+"L"+T+",0L0,-"+b+"L-"+T+",0Z"}},hourglass:{n:25,f:function(x){var T=v.round(x,2);return"M"+T+","+T+"H-"+T+"L"+T+",-"+T+"H-"+T+"Z"},noDot:!0},bowtie:{n:26,f:function(x){var T=v.round(x,2);return"M"+T+","+T+"V-"+T+"L-"+T+","+T+"V-"+T+"Z"},noDot:!0},"circle-cross":{n:27,f:function(x){var T=v.round(x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(x){var T=v.round(x,2),b=v.round(x/Math.sqrt(2),2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(x){var T=v.round(x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(x){var T=v.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(x){var T=v.round(1.3*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM0,-"+T+"V"+T+"M-"+T+",0H"+T},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(x){var T=v.round(1.3*x,2),b=v.round(.65*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM-"+b+",-"+b+"L"+b+","+b+"M-"+b+","+b+"L"+b+",-"+b},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(x){var T=v.round(1.4*x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(x){var T=v.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(x){var T=v.round(1.2*x,2),b=v.round(.85*x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(x){var T=v.round(x/2,2),b=v.round(x,2);return"M"+T+","+b+"V-"+b+"m-"+b+",0V"+b+"M"+b+","+T+"H-"+b+"m0,-"+b+"H"+b},needLine:!0,noFill:!0},"y-up":{n:37,f:function(x){var T=v.round(1.2*x,2),b=v.round(1.6*x,2),e=v.round(.8*x,2);return"M-"+T+","+e+"L0,0M"+T+","+e+"L0,0M0,-"+b+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(x){var T=v.round(1.2*x,2),b=v.round(1.6*x,2),e=v.round(.8*x,2);return"M-"+T+",-"+e+"L0,0M"+T+",-"+e+"L0,0M0,"+b+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(x){var T=v.round(1.2*x,2),b=v.round(1.6*x,2),e=v.round(.8*x,2);return"M"+e+","+T+"L0,0M"+e+",-"+T+"L0,0M-"+b+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(x){var T=v.round(1.2*x,2),b=v.round(1.6*x,2),e=v.round(.8*x,2);return"M-"+e+","+T+"L0,0M-"+e+",-"+T+"L0,0M"+b+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(x){var T=v.round(1.4*x,2);return"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(x){var T=v.round(1.4*x,2);return"M0,"+T+"V-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(x){var T=v.round(x,2);return"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(x){var T=v.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(x){var T=v.round(x,2);return"M0,0L-"+T+","+v.round(2*x,2)+"H"+T+"Z"},noDot:!0},"arrow-down":{n:46,f:function(x){var T=v.round(x,2);return"M0,0L-"+T+",-"+v.round(2*x,2)+"H"+T+"Z"},noDot:!0},"arrow-left":{n:47,f:function(x){var T=v.round(2*x,2),b=v.round(x,2);return"M0,0L"+T+",-"+b+"V"+b+"Z"},noDot:!0},"arrow-right":{n:48,f:function(x){var T=v.round(2*x,2),b=v.round(x,2);return"M0,0L-"+T+",-"+b+"V"+b+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(x){var T=v.round(x,2);return"M-"+T+",0H"+T+"M0,0L-"+T+","+v.round(2*x,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(x){var T=v.round(x,2);return"M-"+T+",0H"+T+"M0,0L-"+T+",-"+v.round(2*x,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(x){var T=v.round(2*x,2),b=v.round(x,2);return"M0,-"+b+"V"+b+"M0,0L"+T+",-"+b+"V"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(x){var T=v.round(2*x,2),b=v.round(x,2);return"M0,-"+b+"V"+b+"M0,0L-"+T+",-"+b+"V"+b+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(_,oe,se){"use strict";oe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../registry"),T=_("../../plots/cartesian/axes"),b=_("../../lib"),e=_("./compute_error");function o(i,l,r,y){var h=l["error_"+y]||{},s=[];if(h.visible&&-1!==["linear","log"].indexOf(r.type)){for(var d=e(h),p=0;p<i.length;p++){var c=i[p],g=c.i;if(void 0===g)g=p;else if(null===g)continue;var m=c[y];if(v(r.c2l(m))){var u=d(m,g);if(v(u[0])&&v(u[1])){var w=c[y+"s"]=m-u[0],f=c[y+"h"]=m+u[1];s.push(w,f)}}}var M=l._extremes[r._id],k=T.findExtremes(r,s,b.extendFlat({tozero:M.opts.tozero},{padded:!0}));M.min=M.min.concat(k.min),M.max=M.max.concat(k.max)}}oe.exports=function(i){for(var l=i.calcdata,r=0;r<l.length;r++){var y=l[r],h=y[0].trace;if(!0===h.visible&&x.traceIs(h,"errorBarsOK")){var s=T.getFromId(i,h.xaxis),d=T.getFromId(i,h.yaxis);o(y,h,s,"x"),o(y,h,d,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(_,oe,se){"use strict";function v(x,T){return"percent"===x?function(b){return Math.abs(b*T/100)}:"constant"===x?function(){return Math.abs(T)}:"sqrt"===x?function(b){return Math.sqrt(Math.abs(b))}:void 0}oe.exports=function(x){var T=x.type,b=x.symmetric;if("data"===T){var e=x.array||[];if(b)return function(r,y){var h=+e[y];return[h,h]};var o=x.arrayminus||[];return function(r,y){var h=+e[y],s=+o[y];return isNaN(h)&&isNaN(s)?[NaN,NaN]:[s||0,h||0]}}var i=v(T,x.value),l=v(T,x.valueminus);return b||void 0===x.valueminus?function(r){var y=i(r);return[y,y]}:function(r){return[l(r),i(r)]}}},{}],393:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../registry"),T=_("../../lib"),b=_("../../plot_api/plot_template"),e=_("./attributes");oe.exports=function(o,i,l,r){var y="error_"+r.axis,h=b.newContainer(i,y),s=o[y]||{};function d(m,u){return T.coerce(s,h,e,m,u)}if(!1!==d("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var p=d("type","array"in s?"data":"percent"),c=!0;"sqrt"!==p&&(c=d("symmetric",!(("data"===p?"arrayminus":"valueminus")in s))),"data"===p?(d("array"),d("traceref"),c||(d("arrayminus"),d("tracerefminus"))):"percent"!==p&&"constant"!==p||(d("value"),c||d("valueminus"));var g="copy_"+r.inherit+"style";r.inherit&&(i["error_"+r.inherit]||{}).visible&&d(g,!(s.color||v(s.thickness)||v(s.width))),r.inherit&&h[g]||(d("color",l),d("thickness"),d("width",x.traceIs(i,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plot_api/edit_types").overrideAll,T=_("./attributes"),b={error_x:v.extendFlat({},T),error_y:v.extendFlat({},T)};delete b.error_x.copy_zstyle,delete b.error_y.copy_zstyle,delete b.error_y.copy_ystyle;var e={error_x:v.extendFlat({},T),error_y:v.extendFlat({},T),error_z:v.extendFlat({},T)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,oe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:b,bar:b,histogram:b,scatter3d:x(e,"calc","nested"),scattergl:x(b,"calc","nested")}},supplyDefaults:_("./defaults"),calc:_("./calc"),makeComputeError:_("./compute_error"),plot:_("./plot"),style:_("./style"),hoverInfo:function(o,i,l){(i.error_y||{}).visible&&(l.yerr=o.yh-o.y,i.error_y.symmetric||(l.yerrneg=o.y-o.ys)),(i.error_x||{}).visible&&(l.xerr=o.xh-o.x,i.error_x.symmetric||(l.xerrneg=o.x-o.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../drawing"),b=_("../../traces/scatter/subtypes");oe.exports=function(e,o,i,l){var r=i.xaxis,y=i.yaxis,h=l&&l.duration>0;o.each(function(s){var d,p=s[0].trace,c=p.error_x||{},g=p.error_y||{};p.ids&&(d=function(f){return f.id});var m=b.hasMarkers(p)&&p.marker.maxdisplayed>0;g.visible||c.visible||(s=[]);var u=v.select(this).selectAll("g.errorbar").data(s,d);if(u.exit().remove(),s.length){c.visible||u.selectAll("path.xerror").remove(),g.visible||u.selectAll("path.yerror").remove(),u.style("opacity",1);var w=u.enter().append("g").classed("errorbar",!0);h&&w.style("opacity",0).transition().duration(l.duration).style("opacity",1),T.setClipUrl(u,i.layerClipId,e),u.each(function(f){var R,L,I,B,A=v.select(this),M=(I=y,B={x:(L=r).c2p((R=f).x),y:I.c2p(R.y)},void 0!==R.yh&&(B.yh=I.c2p(R.yh),B.ys=I.c2p(R.ys),x(B.ys)||(B.noYS=!0,B.ys=I.c2p(R.ys,!0))),void 0!==R.xh&&(B.xh=L.c2p(R.xh),B.xs=L.c2p(R.xs),x(B.xs)||(B.noXS=!0,B.xs=L.c2p(R.xs,!0))),B);if(!m||f.vis){var k,E=A.select("path.yerror");if(g.visible&&x(M.x)&&x(M.yh)&&x(M.ys)){var P=g.width;k="M"+(M.x-P)+","+M.yh+"h"+2*P+"m-"+P+",0V"+M.ys,M.noYS||(k+="m-"+P+",0h"+2*P),E.size()?h&&(E=E.transition().duration(l.duration).ease(l.easing)):E=A.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),E.attr("d",k)}else E.remove();var D=A.select("path.xerror");if(c.visible&&x(M.y)&&x(M.xh)&&x(M.xs)){var F=(c.copy_ystyle?g:c).width;k="M"+M.xh+","+(M.y-F)+"v"+2*F+"m0,-"+F+"H"+M.xs,M.noXS||(k+="m0,-"+F+"v"+2*F),D.size()?h&&(D=D.transition().duration(l.duration).ease(l.easing)):D=A.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),D.attr("d",k)}else D.remove()}})}})}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../color");oe.exports=function(T){T.each(function(b){var e=b[0].trace,o=e.error_y||{},i=e.error_x||{},l=v.select(this);l.selectAll("path.yerror").style("stroke-width",o.thickness+"px").call(x.stroke,o.color),i.copy_ystyle&&(i=o),l.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(x.stroke,i.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("./layout_attributes").hoverlabel,T=_("../../lib/extend").extendFlat;oe.exports={hoverlabel:{bgcolor:T({},x.bgcolor,{arrayOk:!0}),bordercolor:T({},x.bordercolor,{arrayOk:!0}),font:v({arrayOk:!0,editType:"none"}),align:T({},x.align,{arrayOk:!0}),namelength:T({},x.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry");function T(b,e,o,i){i=i||v.identity,Array.isArray(b)&&(e[0][o]=i(b))}oe.exports=function(b){var e=b.calcdata,o=b._fullLayout;function i(s){return function(d){return v.coerceHoverinfo({hoverinfo:d},{_module:s._module},o)}}for(var l=0;l<e.length;l++){var r=e[l],y=r[0].trace;if(!x.traceIs(y,"pie-like")){var h=x.traceIs(y,"2dMap")?T:v.fillArray;h(y.hoverinfo,r,"hi",i(y)),y.hovertemplate&&h(y.hovertemplate,r,"ht"),y.hoverlabel&&(h(y.hoverlabel.bgcolor,r,"hbg"),h(y.hoverlabel.bordercolor,r,"hbc"),h(y.hoverlabel.font.size,r,"hts"),h(y.hoverlabel.font.color,r,"htc"),h(y.hoverlabel.font.family,r,"htf"),h(y.hoverlabel.namelength,r,"hnl"),h(y.hoverlabel.align,r,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("./hover").hover;oe.exports=function(T,b,e){var o=v.getComponentMethod("annotations","onClick")(T,T._hoverdata);function i(){T.emit("plotly_click",{points:T._hoverdata,event:b})}void 0!==e&&x(T,b,e,!0),T._hoverdata&&b&&b.target&&(o&&o.then?o.then(i):i(),b.stopImmediatePropagation&&b.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(_,oe,se){"use strict";oe.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("./hoverlabel_defaults");oe.exports=function(b,e,o,i){var l=v.extendFlat({},i.hoverlabel);e.hovertemplate&&(l.namelength=-1),T(b,e,function(r,y){return v.coerce(b,e,x,r,y)},l)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(_,oe,se){"use strict";var v=_("../../lib");se.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},se.isTraceInSubplots=function(i,l){if("splom"===i.type){for(var r=i.xaxes||[],y=i.yaxes||[],h=0;h<r.length;h++)for(var s=0;s<y.length;s++)if(-1!==l.indexOf(r[h]+y[s]))return!0;return!1}return-1!==l.indexOf(se.getSubplot(i))},se.flat=function(i,l){for(var r=new Array(i.length),y=0;y<i.length;y++)r[y]=l;return r},se.p2c=function(i,l){for(var r=new Array(i.length),y=0;y<i.length;y++)r[y]=i[y].p2c(l);return r},se.getDistanceFunction=function(i,l,r,y){return"closest"===i?y||se.quadrature(l,r):"x"===i.charAt(0)?l:r},se.getClosest=function(i,l,r){if(!1!==r.index)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var y=0;y<i.length;y++){var h=l(i[y]);h<=r.distance&&(r.index=y,r.distance=h)}return r},se.inbox=function(i,l,r){return i*l<0||0===i?r:1/0},se.quadrature=function(i,l){return function(r){var y=i(r),h=l(r);return Math.sqrt(y*y+h*h)}},se.makeEventData=function(i,l,r){var y="index"in i?i.index:i.pointNumber,h={data:l._input,fullData:l,curveNumber:l.index,pointNumber:y};if(l._indexToPoints){var s=l._indexToPoints[y];1===s.length?h.pointIndex=s[0]:h.pointIndices=s}else h.pointIndex=y;return l._module.eventData?h=l._module.eventData(h,i,l,r,y):("xVal"in i?h.x=i.xVal:"x"in i&&(h.x=i.x),"yVal"in i?h.y=i.yVal:"y"in i&&(h.y=i.y),i.xa&&(h.xaxis=i.xa),i.ya&&(h.yaxis=i.ya),void 0!==i.zLabelVal&&(h.z=i.zLabelVal)),se.appendArrayPointValue(h,l,y),h},se.appendArrayPointValue=function(i,l,r){var y=l._arrayAttrs;if(y)for(var h=0;h<y.length;h++){var s=y[h],d=T(s);if(void 0===i[d]){var p=b(v.nestedProperty(l,s).get(),r);void 0!==p&&(i[d]=p)}}},se.appendArrayMultiPointValues=function(i,l,r){var y=l._arrayAttrs;if(y)for(var h=0;h<y.length;h++){var s=y[h],d=T(s);if(void 0===i[d]){for(var p=v.nestedProperty(l,s).get(),c=new Array(r.length),g=0;g<r.length;g++)c[g]=b(p,r[g]);i[d]=c}}};var x={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function T(i){return x[i]||i}function b(i,l){return Array.isArray(l)?Array.isArray(i)&&Array.isArray(i[l[0]])?i[l[0]][l[1]]:void 0:i[l]}var e={x:!0,y:!0},o={"x unified":!0,"y unified":!0};se.isUnifiedHover=function(i){return"string"==typeof i&&!!o[i]},se.isXYhover=function(i){return"string"==typeof i&&!!e[i]}},{"../../lib":503}],403:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("tinycolor2"),b=_("../../lib"),e=b.strTranslate,o=b.strRotate,i=_("../../lib/events"),l=_("../../lib/svg_text_utils"),r=_("../../lib/override_cursor"),y=_("../drawing"),h=_("../color"),s=_("../dragelement"),d=_("../../plots/cartesian/axes"),p=_("../../registry"),c=_("./helpers"),g=_("./constants"),m=_("../legend/defaults"),u=_("../legend/draw"),w=g.YANGLE,f=Math.PI*w/180,A=1/Math.sin(f),M=Math.cos(f),k=Math.sin(f),E=g.HOVERARROWSIZE,P=g.HOVERTEXTPAD,D={box:!0,ohlc:!0,violin:!0,candlestick:!0},F={scatter:!0,scattergl:!0,splom:!0};function R(q){return[q.trace.index,q.index,q.x0,q.y0,q.name,q.attr,q.xa?q.xa._id:"",q.ya?q.ya._id:""].join(",")}se.hover=function(q,W,ae,G){q=b.getGraphDiv(q);var ee=W.target;b.throttle(q._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){!function(te,le,ue,de,he){ue||(ue="xy");var be=Array.isArray(ue)?ue:[ue],me=te._fullLayout,_e=me._plots||[],Ee=_e[ue],De=me._has("cartesian");if(Ee){var Se=Ee.overlays.map(function(Fn){return Fn.id});be=be.concat(Se)}for(var Fe=be.length,ve=new Array(Fe),Te=new Array(Fe),Ie=!1,Ce=0;Ce<Fe;Ce++){var Re=be[Ce];if(_e[Re])Ie=!0,ve[Ce]=_e[Re].xaxis,Te[Ce]=_e[Re].yaxis;else{if(!me[Re]||!me[Re]._subplot)return void b.warn("Unrecognized subplot: "+Re);var Ue=me[Re]._subplot;ve[Ce]=Ue.xaxis,Te[Ce]=Ue.yaxis}}var qe=le.hovermode||me.hovermode;if(qe&&!Ie&&(qe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(qe)||!te.calcdata||te.querySelector(".zoombox")||te._dragging)return s.unhoverRaw(te,le);var Xe=me.hoverdistance;-1===Xe&&(Xe=1/0);var st=me.spikedistance;-1===st&&(st=1/0);var He,$e,et,tt,ct,bt,At,Ut,Ct,dt,at,Nt,rn,en=[],Ge=[],Qe={hLinePoint:null,vLinePoint:null},Rt=!1;if(Array.isArray(le))for(qe="array",et=0;et<le.length;et++)(ct=te.calcdata[le[et].curveNumber||0])&&(bt=ct[0].trace,"skip"!==ct[0].trace.hoverinfo&&(Ge.push(ct),"h"===bt.orientation&&(Rt=!0)));else{for(tt=0;tt<te.calcdata.length;tt++)"skip"!==(bt=(ct=te.calcdata[tt])[0].trace).hoverinfo&&c.isTraceInSubplots(bt,be)&&(Ge.push(ct),"h"===bt.orientation&&(Rt=!0));var gt,Be;if(he){if(!1===i.triggerHandler(te,"plotly_beforehover",le))return;var Ve=he.getBoundingClientRect();gt=le.clientX-Ve.left,Be=le.clientY-Ve.top,me._calcInverseTransform(te);var Le=b.apply3DTransform(me._invTransform)(gt,Be);if(Be=Le[1],(gt=Le[0])<0||gt>ve[0]._length||Be<0||Be>Te[0]._length)return s.unhoverRaw(te,le)}else gt="xpx"in le?le.xpx:ve[0]._length/2,Be="ypx"in le?le.ypx:Te[0]._length/2;if(le.pointerX=gt+ve[0]._offset,le.pointerY=Be+Te[0]._offset,He="xval"in le?c.flat(be,le.xval):c.p2c(ve,gt),$e="yval"in le?c.flat(be,le.yval):c.p2c(Te,Be),!x(He[0])||!x($e[0]))return b.warn("Fx.hover failed",le,te),s.unhoverRaw(te,le)}var je=1/0;function Ke(Fn,br){for(tt=0;tt<Ge.length;tt++)if((ct=Ge[tt])&&ct[0]&&ct[0].trace&&!0===(bt=ct[0].trace).visible&&0!==bt._length&&-1===["carpet","contourcarpet"].indexOf(bt._module.name)){if("splom"===bt.type?At=be[Ut=0]:(At=c.getSubplot(bt),Ut=be.indexOf(At)),c.isUnifiedHover(Ct=qe)&&(Ct=Ct.charAt(0)),Nt={cd:ct,trace:bt,xa:ve[Ut],ya:Te[Ut],maxHoverDistance:Xe,maxSpikeDistance:st,index:!1,distance:Math.min(je,Xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:h.defaultLine,name:bt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},me[At]&&(Nt.subplot=me[At]._subplot),me._splomScenes&&me._splomScenes[bt.uid]&&(Nt.scene=me._splomScenes[bt.uid]),rn=en.length,"array"===Ct){var xr=le[tt];"pointNumber"in xr?(Nt.index=xr.pointNumber,Ct="closest"):(Ct="","xval"in xr&&(dt=xr.xval,Ct="x"),"yval"in xr&&(at=xr.yval,Ct=Ct?"closest":"y"))}else void 0!==Fn&&void 0!==br?(dt=Fn,at=br):(dt=He[Ut],at=$e[Ut]);if(0!==Xe)if(bt._module&&bt._module.hoverPoints){var Kn=bt._module.hoverPoints(Nt,dt,at,Ct,{finiteRange:!0,hoverLayer:me._hoverlayer});if(Kn)for(var Qr,ci=0;ci<Kn.length;ci++)x((Qr=Kn[ci]).x0)&&x(Qr.y0)&&en.push(Z(Qr,qe))}else b.log("Unrecognized trace type in hover:",bt);if("closest"===qe&&en.length>rn&&(en.splice(0,rn),je=en[0].distance),De&&0!==st&&0===en.length){Nt.distance=st,Nt.index=!1;var Or=bt._module.hoverPoints(Nt,dt,at,"closest",{hoverLayer:me._hoverlayer});if(Or&&(Or=Or.filter(function(yn){return yn.spikeDistance<=st})),Or&&Or.length){var li,di=Or.filter(function(yn){return yn.xa.showspikes&&"hovered data"!==yn.xa.spikesnap});if(di.length){var Tn=di[0];x(Tn.x0)&&x(Tn.y0)&&(li=mt(Tn),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>li.spikeDistance)&&(Qe.vLinePoint=li))}var tr=Or.filter(function(yn){return yn.ya.showspikes&&"hovered data"!==yn.ya.spikesnap});if(tr.length){var Zt=tr[0];x(Zt.x0)&&x(Zt.y0)&&(li=mt(Zt),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>li.spikeDistance)&&(Qe.hLinePoint=li))}}}}}function ft(Fn,br,xr){for(var Kn,Qr=null,ci=1/0,Or=0;Or<Fn.length;Or++)Kn=Fn[Or].spikeDistance,xr&&0===Or&&(Kn=-1/0),Kn<=ci&&Kn<=br&&(Qr=Fn[Or],ci=Kn);return Qr}function mt(Fn){return Fn?{xa:Fn.xa,ya:Fn.ya,x:void 0!==Fn.xSpike?Fn.xSpike:(Fn.x0+Fn.x1)/2,y:void 0!==Fn.ySpike?Fn.ySpike:(Fn.y0+Fn.y1)/2,distance:Fn.distance,spikeDistance:Fn.spikeDistance,curveNumber:Fn.trace.index,color:Fn.color,pointNumber:Fn.index}:null}Ke();var pt={fullLayout:me,container:me._hoverlayer,event:le},Ot=te._spikepoints;te._spikepoints={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};var Jt=function(){en.sort(function(Fn,br){return Fn.distance-br.distance}),en=function(Fn,br){for(var xr=br.charAt(0),Kn=[],Qr=[],ci=[],Or=0;Or<Fn.length;Or++){var li=Fn[Or];p.traceIs(li.trace,"bar-like")||p.traceIs(li.trace,"box-violin")?ci.push(li):li.trace[xr+"period"]?Qr.push(li):Kn.push(li)}return Kn.concat(Qr).concat(ci)}(en,qe)};Jt();var $t=qe.charAt(0),ut=("x"===$t||"y"===$t)&&en[0]&&F[en[0].trace.type];if(De&&0!==st&&0!==en.length){var Dt=ft(en.filter(function(Fn){return Fn.ya.showspikes}),st,ut);Qe.hLinePoint=mt(Dt);var Wt=ft(en.filter(function(Fn){return Fn.xa.showspikes}),st,ut);Qe.vLinePoint=mt(Wt)}if(0===en.length){var zt=s.unhoverRaw(te,le);return!De||null===Qe.hLinePoint&&null===Qe.vLinePoint||Q(Ot)&&Y(te,Qe,pt),zt}if(De&&Q(Ot)&&Y(te,Qe,pt),c.isXYhover(Ct)&&0!==en[0].length&&"splom"!==en[0].trace.type){var Ht=en[0],Ne=(en=D[Ht.trace.type]?en.filter(function(Fn){return Fn.trace.index===Ht.trace.index}):[Ht]).length;Ke($("x",Ht,me),$("y",Ht,me));var It,Vt=[],ln={},un=0,an=function(Fn){var br=D[Fn.trace.type]?R(Fn):Fn.trace.index;if(ln[br]){var xr=ln[br]-1,Kn=Vt[xr];xr>0&&Math.abs(Fn.distance)<Math.abs(Kn.distance)&&(Vt[xr]=Fn)}else un++,ln[br]=un,Vt.push(Fn)};for(It=0;It<Ne;It++)an(en[It]);for(It=en.length-1;It>Ne-1;It--)an(en[It]);en=Vt,Jt()}var wn=te._hoverdata,Zn=[],An=J(te),hn=ie(te);for(et=0;et<en.length;et++){var pn=en[et],xn=c.makeEventData(pn,pn.trace,pn.cd);if(!1!==pn.hovertemplate){var En=!1;pn.cd[pn.index]&&pn.cd[pn.index].ht&&(En=pn.cd[pn.index].ht),pn.hovertemplate=En||pn.trace.hovertemplate||!1}if(pn.xa&&pn.ya){var In=pn.x0+pn.xa._offset,Yn=pn.x1+pn.xa._offset,nr=pn.y0+pn.ya._offset,sr=pn.y1+pn.ya._offset,Ar=Math.min(In,Yn),yr=Math.max(In,Yn),Pr=Math.min(nr,sr),Wr=Math.max(nr,sr);xn.bbox={x0:Ar+hn,x1:yr+hn,y0:Pr+An,y1:Wr+An}}pn.eventData=[xn],Zn.push(xn)}te._hoverdata=Zn;var lr="y"===qe&&(Ge.length>1||en.length>1)||"closest"===qe&&Rt&&en.length>1,Hn=h.combine(me.plot_bgcolor||h.background,me.paper_bgcolor),Sr=I(en,{gd:te,hovermode:qe,rotateLabels:lr,bgColor:Hn,container:me._hoverlayer,outerContainer:me._paper.node(),commonLabelOpts:me.hoverlabel,hoverdistance:me.hoverdistance});if(c.isUnifiedHover(qe)||(function(Fn,br,xr){var Kn,Qr,ci,Or,li,di,Tn,tr=0,Zt=1,yn=Fn.size(),Cn=new Array(yn),rr=0;function Qn(ur){var Mr=ur[0],vr=ur[ur.length-1];if(ci=vr.pos+vr.dp+vr.size-Mr.pmax,(Qr=Mr.pmin-Mr.pos-Mr.dp+Mr.size)>.01){for(li=ur.length-1;li>=0;li--)ur[li].dp+=Qr;Kn=!1}if(!(ci<.01)){if(Qr<-.01){for(li=ur.length-1;li>=0;li--)ur[li].dp-=ci;Kn=!1}if(Kn){var zr=0;for(Or=0;Or<ur.length;Or++)(di=ur[Or]).pos+di.dp+di.size>Mr.pmax&&zr++;for(Or=ur.length-1;Or>=0&&!(zr<=0);Or--)(di=ur[Or]).pos>Mr.pmax-1&&(di.del=!0,zr--);for(Or=0;Or<ur.length&&!(zr<=0);Or++)if((di=ur[Or]).pos<Mr.pmin+1)for(di.del=!0,zr--,ci=2*di.size,li=ur.length-1;li>=0;li--)ur[li].dp-=ci;for(Or=ur.length-1;Or>=0&&!(zr<=0);Or--)(di=ur[Or]).pos+di.dp+di.size>Mr.pmax&&(di.del=!0,zr--)}}}for(Fn.each(function(ur){var Mr=ur[br],vr="x"===Mr._id.charAt(0),zr=Mr.range;0===rr&&zr&&zr[0]>zr[1]!==vr&&(Zt=-1),Cn[rr++]=[{datum:ur,traceIndex:ur.trace.index,dp:0,pos:ur.pos,posref:ur.posref,size:ur.by*(vr?A:1)/2,pmin:0,pmax:vr?xr.width:xr.height}]}),Cn.sort(function(ur,Mr){return ur[0].posref-Mr[0].posref||Zt*(Mr[0].traceIndex-ur[0].traceIndex)});!Kn&&tr<=yn;){for(tr++,Kn=!0,Or=0;Or<Cn.length-1;){var Jn=Cn[Or],Wn=Cn[Or+1],On=Jn[Jn.length-1],zn=Wn[0];if((Qr=On.pos+On.dp+On.size-zn.pos-zn.dp+zn.size)>.01&&On.pmin===zn.pmin&&On.pmax===zn.pmax){for(li=Wn.length-1;li>=0;li--)Wn[li].dp+=Qr;for(Jn.push.apply(Jn,Wn),Cn.splice(Or+1,1),Tn=0,li=Jn.length-1;li>=0;li--)Tn+=Jn[li].dp;for(ci=Tn/Jn.length,li=Jn.length-1;li>=0;li--)Jn[li].dp-=ci;Kn=!1}else Or++}Cn.forEach(Qn)}for(Or=Cn.length-1;Or>=0;Or--){var Rn=Cn[Or];for(li=Rn.length-1;li>=0;li--){var Gn=Rn[li],fr=Gn.datum;fr.offset=Gn.dp,fr.del=Gn.del}}}(Sr,lr?"xa":"ya",me),V(Sr,lr,me._invScaleX,me._invScaleY)),he&&he.tagName){var ti=p.getComponentMethod("annotations","hasClickToShow")(te,Zn);r(v.select(he),ti?"pointer":"")}!he||de||!function(Fn,br,xr){if(!xr||xr.length!==Fn._hoverdata.length)return!0;for(var Kn=xr.length-1;Kn>=0;Kn--){var Qr=xr[Kn],ci=Fn._hoverdata[Kn];if(Qr.curveNumber!==ci.curveNumber||String(Qr.pointNumber)!==String(ci.pointNumber)||String(Qr.pointNumbers)!==String(ci.pointNumbers))return!0}return!1}(te,0,wn)||(wn&&te.emit("plotly_unhover",{event:le,points:wn}),te.emit("plotly_hover",{event:le,points:te._hoverdata,xaxes:ve,yaxes:Te,xvals:He,yvals:$e}))}(q,W,ae,G,ee)})},se.loneHover=function(q,W){var ae=!0;Array.isArray(q)||(ae=!1,q=[q]);var G=W.gd,ee=J(G),te=ie(G),le=I(q.map(function(he){var be=he._x0||he.x0||he.x||0,me=he._x1||he.x1||he.x||0,_e=he._y0||he.y0||he.y||0,Ee=he._y1||he.y1||he.y||0,De=he.eventData;if(De){var Se=Math.min(be,me),Fe=Math.max(be,me),ve=Math.min(_e,Ee),Te=Math.max(_e,Ee),Ie=he.trace;if(p.traceIs(Ie,"gl3d")){var Ce=G._fullLayout[Ie.scene]._scene.container,Re=Ce.offsetLeft,Ue=Ce.offsetTop;Se+=Re,Fe+=Re,ve+=Ue,Te+=Ue}De.bbox={x0:Se+te,x1:Fe+te,y0:ve+ee,y1:Te+ee},W.inOut_bbox&&W.inOut_bbox.push(De.bbox)}else De=!1;return{color:he.color||h.defaultLine,x0:he.x0||he.x||0,x1:he.x1||he.x||0,y0:he.y0||he.y||0,y1:he.y1||he.y||0,xLabel:he.xLabel,yLabel:he.yLabel,zLabel:he.zLabel,text:he.text,name:he.name,idealAlign:he.idealAlign,borderColor:he.borderColor,fontFamily:he.fontFamily,fontSize:he.fontSize,fontColor:he.fontColor,nameLength:he.nameLength,textAlign:he.textAlign,trace:he.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:he.hovertemplate||!1,hovertemplateLabels:he.hovertemplateLabels||!1,eventData:De}}),{gd:G,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||h.background,container:v.select(W.container),outerContainer:W.outerContainer||W.container}),ue=0,de=0;return le.sort(function(he,be){return he.y0-be.y0}).each(function(he,be){var me=he.y0-he.by/2;he.offset=me-5<ue?ue-me+5:0,ue=me+he.by+he.offset,be===W.anchorIndex&&(de=he.offset)}).each(function(he){he.offset-=de}),V(le,!1,G._fullLayout._invScaleX,G._fullLayout._invScaleY),ae?le:le.node()};var L=/<extra>([\s\S]*)<\/extra>/;function I(q,W){var ae=W.gd,G=ae._fullLayout,ee=W.hovermode,te=W.rotateLabels,le=W.bgColor,ue=W.container,de=W.outerContainer,he=W.commonLabelOpts||{};if(0===q.length)return[[]];var be=W.fontFamily||g.HOVERFONT,me=W.fontSize||g.HOVERFONTSIZE,_e=q[0],Ee=_e.xa,De=_e.ya,Se=ee.charAt(0),Fe=_e[Se+"Label"],ve=j(ae,de),Te=ve.top,Ie=ve.width,Ce=ve.height,Re=void 0!==Fe&&_e.distance<=W.hoverdistance&&("x"===ee||"y"===ee);if(Re){var Ue,qe,Xe=!0;for(Ue=0;Ue<q.length;Ue++)if(Xe&&void 0===q[Ue].zLabel&&(Xe=!1),qe=q[Ue].hoverinfo||q[Ue].trace.hoverinfo){var st=Array.isArray(qe)?qe:qe.split("+");if(-1===st.indexOf("all")&&-1===st.indexOf(ee)){Re=!1;break}}Xe&&(Re=!1)}var He=ue.selectAll("g.axistext").data(Re?[0]:[]);if(He.enter().append("g").classed("axistext",!0),He.exit().remove(),He.each(function(){var ut=v.select(this),Dt=b.ensureSingle(ut,"path","",function(Yn){Yn.style({"stroke-width":"1px"})}),Wt=b.ensureSingle(ut,"text","",function(Yn){Yn.attr("data-notex",1)}),zt=he.bgcolor||h.defaultLine,Ht=he.bordercolor||h.contrast(zt),Ne=h.contrast(zt),ot={family:he.font.family||be,size:he.font.size||me,color:he.font.color||Ne};Dt.style({fill:zt,stroke:Ht}),Wt.text(Fe).call(y.font,ot).call(l.positionText,0,0).call(l.convertToTspans,ae),ut.attr("transform","");var yt,It,Vt=j(ae,Wt.node());if("x"===ee){var ln="top"===Ee.side?"-":"";Wt.attr("text-anchor","middle").call(l.positionText,0,"top"===Ee.side?Te-Vt.bottom-E-P:Te-Vt.top+E+P),It=De._offset+("top"===Ee.side?0:De._length);var un=Vt.width/2+P;(yt=Ee._offset+(_e.x0+_e.x1)/2)<un?(yt=un,Dt.attr("d","M-"+(un-E)+",0L-"+(un-2*E)+","+ln+E+"H"+(P+Vt.width/2)+"v"+ln+(2*P+Vt.height)+"H-"+un+"V"+ln+E+"Z")):yt>G.width-un?(yt=G.width-un,Dt.attr("d","M"+(un-E)+",0L"+un+","+ln+E+"v"+ln+(2*P+Vt.height)+"H-"+un+"V"+ln+E+"H"+(un-2*E)+"Z")):Dt.attr("d","M0,0L"+E+","+ln+E+"H"+(P+Vt.width/2)+"v"+ln+(2*P+Vt.height)+"H-"+(P+Vt.width/2)+"V"+ln+E+"H-"+E+"Z")}else{var an,wn,Zn;"right"===De.side?(an="start",wn=1,Zn="",yt=Ee._offset+Ee._length):(an="end",wn=-1,Zn="-",yt=Ee._offset),It=De._offset+(_e.y0+_e.y1)/2,Wt.attr("text-anchor",an),Dt.attr("d","M0,0L"+Zn+E+","+E+"V"+(P+Vt.height/2)+"h"+Zn+(2*P+Vt.width)+"V-"+(P+Vt.height/2)+"H"+Zn+E+"V-"+E+"Z");var An,hn=Vt.height/2,pn=Te-Vt.top-hn,xn="clip"+G._uid+"commonlabel"+De._id;if(yt<Vt.width+2*P+E){An="M-"+(E+P)+"-"+hn+"h-"+(Vt.width-P)+"V"+hn+"h"+(Vt.width-P)+"Z";var En=Vt.width-yt+P;l.positionText(Wt,En,pn),"end"===an&&Wt.selectAll("tspan").each(function(){var Yn=v.select(this),nr=y.tester.append("text").text(Yn.text()).call(y.font,ot),sr=j(ae,nr.node());Math.round(sr.width)<Math.round(Vt.width)&&Yn.attr("x",En-sr.width),nr.remove()})}else l.positionText(Wt,wn*(P+E),pn),An=null;var In=G._topclips.selectAll("#"+xn).data(An?[0]:[]);In.enter().append("clipPath").attr("id",xn).append("path"),In.exit().remove(),In.select("path").attr("d",An),y.setClipUrl(Wt,An?xn:null,ae)}ut.attr("transform",e(yt,It))}),c.isUnifiedHover(ee)){ue.selectAll("g.hovertext").remove();var $e=q.filter(function(ut){return"none"!==ut.hoverinfo});if(0===$e.length)return;var et=G.hoverlabel,tt=et.font,bt={font:tt};m({showlegend:!0,legend:{title:{text:Fe,font:tt},font:tt,bgcolor:et.bgcolor,bordercolor:et.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:G.legend?G.legend.traceorder:void 0,orientation:"v"}},bt,ae._fullData);var At=bt.legend;At.entries=[];for(var Ut=0;Ut<$e.length;Ut++){var Ct=$e[Ut];if("none"!==Ct.hoverinfo){var dt=B(Ct,!0,ee,G,Fe),at=dt[0],Nt=dt[1];Ct.name=Nt,Ct.text=""!==Nt?Nt+" : "+at:at;var rn=Ct.cd[Ct.index];rn&&(rn.mc&&(Ct.mc=rn.mc),rn.mcc&&(Ct.mc=rn.mcc),rn.mlc&&(Ct.mlc=rn.mlc),rn.mlcc&&(Ct.mlc=rn.mlcc),rn.mlw&&(Ct.mlw=rn.mlw),rn.mrc&&(Ct.mrc=rn.mrc),rn.dir&&(Ct.dir=rn.dir)),Ct._distinct=!0,At.entries.push([Ct])}}At.entries.sort(function(ut,Dt){return ut[0].trace.index-Dt[0].trace.index}),At.layer=ue,At._inHover=!0,At._groupTitleFont=et.grouptitlefont,u(ae,At);var en,Ge,Qe,Rt,gt=ue.select("g.legend"),Be=j(ae,gt.node()),Ve=Be.width+2*P,Le=Be.height+2*P,je=$e[0],Ke=(je.x0+je.x1)/2,ft=(je.y0+je.y1)/2,mt=!(p.traceIs(je.trace,"bar-like")||p.traceIs(je.trace,"box-violin"));"y"===Se?mt?(Ge=ft-P,en=ft+P):(Ge=Math.min.apply(null,$e.map(function(ut){return Math.min(ut.y0,ut.y1)})),en=Math.max.apply(null,$e.map(function(ut){return Math.max(ut.y0,ut.y1)}))):Ge=en=b.mean($e.map(function(ut){return(ut.y0+ut.y1)/2}))-Le/2,"x"===Se?mt?(Qe=Ke+P,Rt=Ke-P):(Qe=Math.max.apply(null,$e.map(function(ut){return Math.max(ut.x0,ut.x1)})),Rt=Math.min.apply(null,$e.map(function(ut){return Math.min(ut.x0,ut.x1)}))):Qe=Rt=b.mean($e.map(function(ut){return(ut.x0+ut.x1)/2}))-Ve/2;var pt,Ot,Pt=Ee._offset,Jt=De._offset;return Rt+=Pt-Ve,Ge+=Jt-Le,pt=(Qe+=Pt)+Ve<Ie&&Qe>=0?Qe:Rt+Ve<Ie&&Rt>=0?Rt:Pt+Ve<Ie?Pt:Qe-Ke<Ke-Rt+Ve?Ie-Ve:0,Ot=(en+=Jt)+Le<Ce&&en>=0?en:Ge+Le<Ce&&Ge>=0?Ge:Jt+Le<Ce?Jt:en-ft<ft-Ge+Le?Ce-Le:0,gt.attr("transform",e((pt+=P)-1,(Ot+=P)-1)),gt}var $t=ue.selectAll("g.hovertext").data(q,function(ut){return R(ut)});return $t.enter().append("g").classed("hovertext",!0).each(function(){var ut=v.select(this);ut.append("rect").call(h.fill,h.addOpacity(le,.8)),ut.append("text").classed("name",!0),ut.append("path").style("stroke-width","1px"),ut.append("text").classed("nums",!0).call(y.font,be,me)}),$t.exit().remove(),$t.each(function(ut){var Dt=v.select(this).attr("transform",""),Wt=ut.color;Array.isArray(Wt)&&(Wt=Wt[ut.eventData[0].pointNumber]);var zt=ut.bgcolor||Wt,Ht=h.combine(h.opacity(zt)?zt:h.defaultLine,le),Ne=h.combine(h.opacity(Wt)?Wt:h.defaultLine,le),ot=ut.borderColor||h.contrast(Ht),yt=B(ut,Re,ee,G,Fe,Dt),It=yt[0],Vt=yt[1],ln=Dt.select("text.nums").call(y.font,ut.fontFamily||be,ut.fontSize||me,ut.fontColor||ot).text(It).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ae),un=Dt.select("text.name"),an=0,wn=0;if(Vt&&Vt!==It){un.call(y.font,ut.fontFamily||be,ut.fontSize||me,Ne).text(Vt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ae);var Zn=j(ae,un.node());an=Zn.width+2*P,wn=Zn.height+2*P}else un.remove(),Dt.select("rect").remove();Dt.select("path").style({fill:Ht,stroke:ot});var An=ut.xa._offset+(ut.x0+ut.x1)/2,hn=ut.ya._offset+(ut.y0+ut.y1)/2,pn=Math.abs(ut.x1-ut.x0),xn=Math.abs(ut.y1-ut.y0),En=j(ae,ln.node()),In=En.width/G._invScaleX,Yn=En.height/G._invScaleY;ut.ty0=(Te-En.top)/G._invScaleY,ut.bx=In+2*P,ut.by=Math.max(Yn+2*P,wn),ut.anchor="start",ut.txwidth=In,ut.tx2width=an,ut.offset=0;var nr,sr,Ar=(In+E+P+an)*G._invScaleX;if(te)ut.pos=An,nr=hn+xn/2+Ar<=Ce,sr=hn-xn/2-Ar>=0,"top"!==ut.idealAlign&&nr||!sr?nr?(hn+=xn/2,ut.anchor="start"):ut.anchor="middle":(hn-=xn/2,ut.anchor="end");else if(ut.pos=hn,nr=An+pn/2+Ar<=Ie,sr=An-pn/2-Ar>=0,"left"!==ut.idealAlign&&nr||!sr)if(nr)An+=pn/2,ut.anchor="start";else{ut.anchor="middle";var yr=Ar/2,Pr=An+yr-Ie,Wr=An-yr;Pr>0&&(An-=Pr),Wr<0&&(An+=-Wr)}else An-=pn/2,ut.anchor="end";ln.attr("text-anchor",ut.anchor),an&&un.attr("text-anchor",ut.anchor),Dt.attr("transform",e(An,hn)+(te?o(w):""))}),$t}function B(q,W,ae,G,ee,te){var le="",ue="";void 0!==q.nameOverride&&(q.name=q.nameOverride),q.name&&(q.trace._meta&&(q.name=b.templateString(q.name,q.trace._meta)),le=re(q.name,q.nameLength));var de=ae.charAt(0);void 0!==q.zLabel?(void 0!==q.xLabel&&(ue+="x: "+q.xLabel+"<br>"),void 0!==q.yLabel&&(ue+="y: "+q.yLabel+"<br>"),"choropleth"!==q.trace.type&&"choroplethmapbox"!==q.trace.type&&(ue+=(ue?"z: ":"")+q.zLabel)):W&&q[de+"Label"]===ee?ue=q[("x"===de?"y":"x")+"Label"]||"":void 0===q.xLabel?void 0!==q.yLabel&&"scattercarpet"!==q.trace.type&&(ue=q.yLabel):ue=void 0===q.yLabel?q.xLabel:"("+q.xLabel+", "+q.yLabel+")",!q.text&&0!==q.text||Array.isArray(q.text)||(ue+=(ue?"<br>":"")+q.text),void 0!==q.extraText&&(ue+=(ue?"<br>":"")+q.extraText),te&&""===ue&&!q.hovertemplate&&(""===le&&te.remove(),ue=le);var be=q.hovertemplate||!1;if(be){var me=q.hovertemplateLabels||q;q[de+"Label"]!==ee&&(me[de+"other"]=me[de+"Val"],me[de+"otherLabel"]=me[de+"Label"]),ue=(ue=b.hovertemplateString(be,me,G._d3locale,q.eventData[0]||{},q.trace._meta)).replace(L,function(_e,Ee){return le=re(Ee,q.nameLength),""})}return[ue,le]}function V(q,W,ae,G){var ee=function(le){return le*ae},te=function(le){return le*G};q.each(function(le){var ue=v.select(this);if(le.del)return ue.remove();var de=ue.select("text.nums"),he=le.anchor,be="end"===he?-1:1,me={start:1,end:-1,middle:0}[he],_e=me*(E+P),Ee=_e+me*(le.txwidth+P),De=0,Se=le.offset,Fe="middle"===he;Fe&&(_e-=le.tx2width/2,Ee+=le.txwidth/2+P),W&&(Se*=-k,De=le.offset*M),ue.select("path").attr("d",Fe?"M-"+ee(le.bx/2+le.tx2width/2)+","+te(Se-le.by/2)+"h"+ee(le.bx)+"v"+te(le.by)+"h-"+ee(le.bx)+"Z":"M0,0L"+ee(be*E+De)+","+te(E+Se)+"v"+te(le.by/2-E)+"h"+ee(be*le.bx)+"v-"+te(le.by)+"H"+ee(be*E+De)+"V"+te(Se-E)+"Z");var ve=De+_e,Te=Se+le.ty0-le.by/2+P,Ie=le.textAlign||"auto";"auto"!==Ie&&("left"===Ie&&"start"!==he?(de.attr("text-anchor","start"),ve=Fe?-le.bx/2-le.tx2width/2+P:-le.bx-P):"right"===Ie&&"end"!==he&&(de.attr("text-anchor","end"),ve=Fe?le.bx/2-le.tx2width/2-P:le.bx+P)),de.call(l.positionText,ee(ve),te(Te)),le.tx2width&&(ue.select("text.name").call(l.positionText,ee(Ee+me*P+De),te(Se+le.ty0-le.by/2+P)),ue.select("rect").call(y.setRect,ee(Ee+(me-1)*le.tx2width/2+De),te(Se-le.by/2-1),ee(le.tx2width),te(le.by+2)))})}function Z(q,W){var ae=q.index,G=q.trace||{},ee=q.cd[0],te=q.cd[ae]||{};function le(_e){return _e||x(_e)&&0===_e}var ue=Array.isArray(ae)?function(_e,Ee){var De=b.castOption(ee,ae,_e);return le(De)?De:b.extractOption({},G,"",Ee)}:function(_e,Ee){return b.extractOption(te,G,_e,Ee)};function de(_e,Ee,De){var Se=ue(Ee,De);le(Se)&&(q[_e]=Se)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),q.posref="y"===W||"closest"===W&&"h"===G.orientation?q.xa._offset+(q.x0+q.x1)/2:q.ya._offset+(q.y0+q.y1)/2,q.x0=b.constrain(q.x0,0,q.xa._length),q.x1=b.constrain(q.x1,0,q.xa._length),q.y0=b.constrain(q.y0,0,q.ya._length),q.y1=b.constrain(q.y1,0,q.ya._length),void 0!==q.xLabelVal&&(q.xLabel="xLabel"in q?q.xLabel:d.hoverLabelText(q.xa,q.xLabelVal,G.xhoverformat),q.xVal=q.xa.c2d(q.xLabelVal)),void 0!==q.yLabelVal&&(q.yLabel="yLabel"in q?q.yLabel:d.hoverLabelText(q.ya,q.yLabelVal,G.yhoverformat),q.yVal=q.ya.c2d(q.yLabelVal)),void 0!==q.zLabelVal&&void 0===q.zLabel&&(q.zLabel=String(q.zLabelVal)),!(isNaN(q.xerr)||"log"===q.xa.type&&q.xerr<=0)){var he=d.tickText(q.xa,q.xa.c2l(q.xerr),"hover").text;q.xLabel+=void 0!==q.xerrneg?" +"+he+" / -"+d.tickText(q.xa,q.xa.c2l(q.xerrneg),"hover").text:" \xb1 "+he,"x"===W&&(q.distance+=1)}if(!(isNaN(q.yerr)||"log"===q.ya.type&&q.yerr<=0)){var be=d.tickText(q.ya,q.ya.c2l(q.yerr),"hover").text;q.yLabel+=void 0!==q.yerrneg?" +"+be+" / -"+d.tickText(q.ya,q.ya.c2l(q.yerrneg),"hover").text:" \xb1 "+be,"y"===W&&(q.distance+=1)}var me=q.hoverinfo||q.trace.hoverinfo;return me&&"all"!==me&&(-1===(me=Array.isArray(me)?me:me.split("+")).indexOf("x")&&(q.xLabel=void 0),-1===me.indexOf("y")&&(q.yLabel=void 0),-1===me.indexOf("z")&&(q.zLabel=void 0),-1===me.indexOf("text")&&(q.text=void 0),-1===me.indexOf("name")&&(q.name=void 0)),q}function Y(q,W,ae){var G,ee,te=ae.container,le=ae.fullLayout,ue=le._size,de=ae.event,he=!!W.hLinePoint,be=!!W.vLinePoint;if(te.selectAll(".spikeline").remove(),be||he){var me=h.combine(le.plot_bgcolor,le.paper_bgcolor);if(he){var _e,Ee,De=W.hLinePoint;G=De&&De.xa,"cursor"===(ee=De&&De.ya).spikesnap?(_e=de.pointerX,Ee=de.pointerY):(_e=G._offset+De.x,Ee=ee._offset+De.y);var Se,Fe,ve=T.readability(De.color,me)<1.5?h.contrast(me):De.color,Te=ee.spikemode,Ie=ee.spikethickness,Ce=ee.spikecolor||ve,Re=d.getPxPosition(q,ee);if(-1!==Te.indexOf("toaxis")||-1!==Te.indexOf("across")){if(-1!==Te.indexOf("toaxis")&&(Se=Re,Fe=_e),-1!==Te.indexOf("across")){var Ue=ee._counterDomainMin,qe=ee._counterDomainMax;"free"===ee.anchor&&(Ue=Math.min(Ue,ee.position),qe=Math.max(qe,ee.position)),Se=ue.l+Ue*ue.w,Fe=ue.l+qe*ue.w}te.insert("line",":first-child").attr({x1:Se,x2:Fe,y1:Ee,y2:Ee,"stroke-width":Ie,stroke:Ce,"stroke-dasharray":y.dashStyle(ee.spikedash,Ie)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:Se,x2:Fe,y1:Ee,y2:Ee,"stroke-width":Ie+2,stroke:me}).classed("spikeline",!0).classed("crisp",!0)}-1!==Te.indexOf("marker")&&te.insert("circle",":first-child").attr({cx:Re+("right"!==ee.side?Ie:-Ie),cy:Ee,r:Ie,fill:Ce}).classed("spikeline",!0)}if(be){var Xe,st,He=W.vLinePoint;ee=He&&He.ya,"cursor"===(G=He&&He.xa).spikesnap?(Xe=de.pointerX,st=de.pointerY):(Xe=G._offset+He.x,st=ee._offset+He.y);var $e,et,tt=T.readability(He.color,me)<1.5?h.contrast(me):He.color,ct=G.spikemode,bt=G.spikethickness,At=G.spikecolor||tt,Ut=d.getPxPosition(q,G);if(-1!==ct.indexOf("toaxis")||-1!==ct.indexOf("across")){if(-1!==ct.indexOf("toaxis")&&($e=Ut,et=st),-1!==ct.indexOf("across")){var Ct=G._counterDomainMin,dt=G._counterDomainMax;"free"===G.anchor&&(Ct=Math.min(Ct,G.position),dt=Math.max(dt,G.position)),$e=ue.t+(1-dt)*ue.h,et=ue.t+(1-Ct)*ue.h}te.insert("line",":first-child").attr({x1:Xe,x2:Xe,y1:$e,y2:et,"stroke-width":bt,stroke:At,"stroke-dasharray":y.dashStyle(G.spikedash,bt)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:Xe,x2:Xe,y1:$e,y2:et,"stroke-width":bt+2,stroke:me}).classed("spikeline",!0).classed("crisp",!0)}-1!==ct.indexOf("marker")&&te.insert("circle",":first-child").attr({cx:Xe,cy:Ut-("top"!==G.side?bt:-bt),r:bt,fill:At}).classed("spikeline",!0)}}}function Q(q,W){return!W||W.vLinePoint!==q._spikepoints.vLinePoint||W.hLinePoint!==q._spikepoints.hLinePoint}function re(q,W){return l.plainText(q||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function $(q,W,ae){var G=W[q+"a"],ee=W[q+"Val"],te=W.cd[0];if("category"===G.type)ee=G._categoriesMap[ee];else if("date"===G.type){var le=W.trace[q+"periodalignment"];if(le){var ue=W.cd[W.index],de=ue[q+"Start"];void 0===de&&(de=ue[q]);var he=ue[q+"End"];void 0===he&&(he=ue[q]);var be=he-de;"end"===le?ee+=be:"middle"===le&&(ee+=be/2)}ee=G.d2c(ee)}return te&&te.t&&te.t.posLetter===G._id&&("group"!==ae.boxmode&&"group"!==ae.violinmode||(ee+=te.t.dPos)),ee}function J(q){return q.offsetTop+q.clientTop}function ie(q){return q.offsetLeft+q.clientLeft}function j(q,W){var ae=q._fullLayout,G=W.getBoundingClientRect(),ee=G.x,te=G.y,le=ee+G.width,ue=te+G.height,de=b.apply3DTransform(ae._invTransform)(ee,te),he=b.apply3DTransform(ae._invTransform)(le,ue),be=de[0],me=de[1],_e=he[0],Ee=he[1];return{x:be,y:me,width:_e-be,height:Ee-me,top:Math.min(me,Ee),left:Math.min(be,_e),right:Math.max(be,_e),bottom:Math.max(me,Ee)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../color"),T=_("./helpers").isUnifiedHover;oe.exports=function(b,e,o,i){i=i||{};var l=e.legend;function r(y){i.font[y]||(i.font[y]=l?e.legend.font[y]:e.font[y])}e&&T(e.hovermode)&&(i.font||(i.font={}),r("size"),r("family"),r("color"),l?(i.bgcolor||(i.bgcolor=x.combine(e.legend.bgcolor,e.paper_bgcolor)),i.bordercolor||(i.bordercolor=e.legend.bordercolor)):i.bgcolor||(i.bgcolor=e.paper_bgcolor)),o("hoverlabel.bgcolor",i.bgcolor),o("hoverlabel.bordercolor",i.bordercolor),o("hoverlabel.namelength",i.namelength),v.coerceFont(o,"hoverlabel.font",i.font),o("hoverlabel.align",i.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,i){return void 0!==b[o]?b[o]:v.coerce(T,b,x,o,i)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../dragelement"),b=_("./helpers"),e=_("./layout_attributes"),o=_("./hover");oe.exports={moduleType:"component",name:"fx",constants:_("./constants"),schema:{layout:e},attributes:_("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:_("./layout_global_defaults"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),getDistanceFunction:b.getDistanceFunction,getClosest:b.getClosest,inbox:b.inbox,quadrature:b.quadrature,appendArrayPointValue:b.appendArrayPointValue,castHoverOption:function(i,l,r){return x.castOption(i,l,"hoverlabel."+r)},castHoverinfo:function(i,l,r){return x.castOption(i,r,"hoverinfo",function(y){return x.coerceHoverinfo({hoverinfo:y},{_module:i._module},l)})},hover:o.hover,unhover:T.unhover,loneHover:o.loneHover,loneUnhover:function(i){var l=x.isD3Selection(i)?i:v.select(i);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:_("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(_,oe,se){"use strict";var v=_("./constants"),x=_("../../plots/font_attributes"),T=x({editType:"none"});T.family.dflt=v.HOVERFONT,T.size.dflt=v.HOVERFONTSIZE,oe.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:T,grouptitlefont:x({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes"),T=_("./hovermode_defaults"),b=_("./hoverlabel_defaults");oe.exports=function(e,o){function i(h,s){return v.coerce(e,o,x,h,s)}T(e,o)&&(i("hoverdistance"),i("spikedistance")),"select"===i("dragmode")&&i("selectdirection");var l=o._has("mapbox"),r=o._has("geo"),y=o._basePlotModules.length;"zoom"===o.dragmode&&((l||r)&&1===y||l&&r&&2===y)&&(o.dragmode="pan"),b(e,o,i),v.coerceFont(i,"hoverlabel.grouptitlefont",o.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./hoverlabel_defaults"),T=_("./layout_attributes");oe.exports=function(b,e){x(b,e,function(o,i){return v.coerce(b,e,T,o,i)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../lib/regex").counter,T=_("../../plots/domain").attributes,b=_("../../plots/cartesian/constants").idRegex,e=_("../../plot_api/plot_template"),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[x("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:T({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(y,h,s){var d=h[s+"axes"],p=Object.keys((y._splomAxes||{})[s]||{});return Array.isArray(d)?d:p.length?p:void 0}function l(y,h,s,d,p,c){var g=h(y+"gap",s),m=h("domain."+y);h(y+"side",d);for(var u=new Array(p),w=m[0],f=(m[1]-w)/(p-g),A=f*(1-g),M=0;M<p;M++){var k=w+f*M;u[c?p-1-M:M]=[k,k+A]}return u}function r(y,h,s,d,p){var c,g=new Array(s);function m(u,w){-1!==h.indexOf(w)&&void 0===d[w]?(g[u]=w,d[w]=u):g[u]=""}if(Array.isArray(y))for(c=0;c<s;c++)m(c,y[c]);else for(m(0,p),c=1;c<s;c++)m(c,p+(c+1));return g}oe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:function(y,h){var s=y.grid||{},d=i(h,s,"x"),p=i(h,s,"y");if(y.grid||d||p){var c,g,m=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),u=Array.isArray(d),w=Array.isArray(p),f=u&&d!==s.xaxes&&w&&p!==s.yaxes;m?(c=s.subplots.length,g=s.subplots[0].length):(w&&(c=p.length),u&&(g=d.length));var A=e.newContainer(h,"grid"),M=L("rows",c),k=L("columns",g);if(M*k>1){!m&&!u&&!w&&"independent"===L("pattern")&&(m=!0),A._hasSubplotGrid=m;var E,P,D="top to bottom"===L("roworder"),R=m?.3:.1;f&&h._splomGridDflt&&(E=h._splomGridDflt.xside,P=h._splomGridDflt.yside),A._domains={x:l("x",L,m?.2:.1,E,k),y:l("y",L,R,P,M,D)}}else delete h.grid}function L(I,B){return v.coerce(s,A,o,I,B)}},contentDefaults:function(y,h){var s=h.grid;if(s&&s._domains){var d,p,c,g,m,u,w,f=y.grid||{},A=h._subplots,M=s._hasSubplotGrid,k=s.rows,E=s.columns,P="independent"===s.pattern,D=s._axisMap={};if(M){var F=f.subplots||[];u=s.subplots=new Array(k);var R=1;for(d=0;d<k;d++){var L=u[d]=new Array(E),I=F[d]||[];for(p=0;p<E;p++)if(P?(m=1===R?"xy":"x"+R+"y"+R,R++):m=I[p],L[p]="",-1!==A.cartesian.indexOf(m)){if(w=m.indexOf("y"),c=m.slice(0,w),g=m.slice(w),void 0!==D[c]&&D[c]!==p||void 0!==D[g]&&D[g]!==d)continue;L[p]=m,D[c]=p,D[g]=d}}}else{var B=i(h,f,"x"),V=i(h,f,"y");s.xaxes=r(B,A.xaxis,E,D,"x"),s.yaxes=r(V,A.yaxis,k,D,"y")}var Z=s._anchors={},Y="top to bottom"===s.roworder;for(var Q in D){var re,$,J,ie=Q.charAt(0),j=s[ie+"side"];if(j.length<8)Z[Q]="free";else if("x"===ie){if("t"===j.charAt(0)===Y?(re=0,$=1,J=k):(re=k-1,$=-1,J=-1),M){var q=D[Q];for(d=re;d!==J;d+=$)if((m=u[d][q])&&(w=m.indexOf("y"),m.slice(0,w)===Q)){Z[Q]=m.slice(w);break}}else for(d=re;d!==J;d+=$)if(-1!==A.cartesian.indexOf(Q+(g=s.yaxes[d]))){Z[Q]=g;break}}else if("l"===j.charAt(0)?(re=0,$=1,J=E):(re=E-1,$=-1,J=-1),M){var W=D[Q];for(d=re;d!==J;d+=$)if((m=u[W][d])&&(w=m.indexOf("y"),m.slice(w)===Q)){Z[Q]=m.slice(0,w);break}}else for(d=re;d!==J;d+=$)if(-1!==A.cartesian.indexOf((c=s.xaxes[d])+Q)){Z[Q]=c;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/constants"),x=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),oe.exports=x("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",v.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",v.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib/to_log_range");oe.exports=function(T,b,e,o){b=b||{};var i="log"===e&&"linear"===b.type;if(i||"linear"===e&&"log"===b.type)for(var r,y,h=T._fullLayout.images,s=b._id.charAt(0),d=0;d<h.length;d++)if(y="images["+d+"].",(r=h[d])[s+"ref"]===b._id){var p=r[s],c=r["size"+s],g=null,m=null;if(i){g=x(p,b.range);var u=c/Math.pow(10,g)/2;m=2*Math.log(u+Math.sqrt(1+u*u))/Math.LN10}else m=(g=Math.pow(10,p))*(Math.pow(10,c/2)-Math.pow(10,-c/2));v(g)?v(m)||(m=null):(g=null,m=null),o(y+s,g),o(y+"size"+s,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./attributes");function e(o,i,l){function r(g,m){return v.coerce(o,i,b,g,m)}var y=r("source");if(!r("visible",!!y))return i;r("layer"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var h={_fullLayout:l},s=["x","y"],d=0;d<2;d++){var p=s[d],c=x.coerceRef(o,i,h,p,"paper",void 0);"paper"!==c&&x.getFromId(h,c)._imgIndices.push(i._index),x.coercePosition(i,h,r,c,p,0)}return i}oe.exports=function(o,i){T(o,i,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../drawing"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/axis_ids"),e=_("../../constants/xmlns_namespaces");oe.exports=function(o){var i,l,r=o._fullLayout,y=[],h={},s=[];for(l=0;l<r.images.length;l++){var d=r.images[l];if(d.visible)if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){i=b.ref2id(d.xref)+b.ref2id(d.yref);var p=r._plots[i];if(!p){s.push(d);continue}p.mainplot&&(i=p.mainplot.id),h[i]||(h[i]=[]),h[i].push(d)}else"above"===d.layer?y.push(d):s.push(d)}var c={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(E){var P=v.select(this);if(this._imgSrc!==E.source)if(P.attr("xmlns",e.svg),E.source&&"data:"===E.source.slice(0,5))P.attr("xlink:href",E.source),this._imgSrc=E.source;else{var D=new Promise(function(F){var R=new Image;function L(){P.remove(),F()}this.img=R,R.setAttribute("crossOrigin","anonymous"),R.onerror=L,R.onload=function(){var I=document.createElement("canvas");I.width=this.width,I.height=this.height,I.getContext("2d").drawImage(this,0,0);var B=I.toDataURL("image/png");P.attr("xlink:href",B),F()},P.on("error",L),R.src=E.source,this._imgSrc=E.source}.bind(this));o._promises.push(D)}}function u(E){var P,D,F=v.select(this),R=T.getFromId(o,E.xref),L=T.getFromId(o,E.yref),I="domain"===T.getRefType(E.xref),B="domain"===T.getRefType(E.yref),V=r._size;P=void 0!==R?"string"==typeof E.xref&&I?R._length*E.sizex:Math.abs(R.l2p(E.sizex)-R.l2p(0)):E.sizex*V.w,D=void 0!==L?"string"==typeof E.yref&&B?L._length*E.sizey:Math.abs(L.l2p(E.sizey)-L.l2p(0)):E.sizey*V.h;var Z,Y,Q=P*c[E.xanchor].offset,re=D*g[E.yanchor].offset,$=c[E.xanchor].sizing+g[E.yanchor].sizing;switch(Z=void 0!==R?"string"==typeof E.xref&&I?R._length*E.x+R._offset:R.r2p(E.x)+R._offset:E.x*V.w+V.l,Z+=Q,Y=void 0!==L?"string"==typeof E.yref&&B?L._length*(1-E.y)+L._offset:L.r2p(E.y)+L._offset:V.h-E.y*V.h+V.t,Y+=re,E.sizing){case"fill":$+=" slice";break;case"stretch":$="none"}F.attr({x:Z,y:Y,width:P,height:D,preserveAspectRatio:$,opacity:E.opacity});var J=(R&&"domain"!==T.getRefType(E.xref)?R._id:"")+(L&&"domain"!==T.getRefType(E.yref)?L._id:"");x.setClipUrl(F,J?"clip"+r._uid+J:null,o)}var w=r._imageLowerLayer.selectAll("image").data(s),f=r._imageUpperLayer.selectAll("image").data(y);w.enter().append("image"),f.enter().append("image"),w.exit().remove(),f.exit().remove(),w.each(function(E){m.bind(this)(E),u.bind(this)(E)}),f.each(function(E){m.bind(this)(E),u.bind(this)(E)});var A=Object.keys(r._plots);for(l=0;l<A.length;l++){var M=r._plots[i=A[l]];if(M.imagelayer){var k=M.imagelayer.selectAll("image").data(h[i]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(E){m.bind(this)(E),u.bind(this)(E)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(_,oe,se){"use strict";oe.exports={moduleType:"component",name:"images",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("images"),draw:_("./draw"),convertCoords:_("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("../color/attributes");oe.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:v({editType:"legend"}),grouptitlefont:v({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:v({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(_,oe,se){"use strict";oe.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../../plot_api/plot_template"),b=_("../../plots/attributes"),e=_("./attributes"),o=_("../../plots/layout_attributes"),i=_("./helpers");oe.exports=function(l,r,y){var h,s=l.legend||{},d=T.newContainer(r,"legend");function p(L,I){return x.coerce(s,d,e,L,I)}for(var c=function(L,I){return x.coerce(h._input,h,b,L,I)},g=r.font||{},m=x.coerceFont(p,"grouptitlefont",x.extendFlat({},g,{size:Math.round(1.1*g.size)})),u=0,w=!1,f="normal",A=0;A<y.length;A++)(h=y[A]).visible&&((h.showlegend||h._dfltShowLegend&&!(h._module&&h._module.attributes&&h._module.attributes.showlegend&&!1===h._module.attributes.showlegend.dflt))&&(u++,h.showlegend&&(w=!0,(v.traceIs(h,"pie-like")||!0===h._input.showlegend)&&u++),x.coerceFont(c,"legendgrouptitle.font",m)),(v.traceIs(h,"bar")&&"stack"===r.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(f=i.isGrouped({traceorder:f})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(f=i.isReversed({traceorder:f})?"reversed+grouped":"grouped"));var M=x.coerce(l,r,o,"showlegend",w&&u>1);if(!1===M&&(r.legend=void 0),(!1!==M||s.uirevision)&&(p("uirevision",r.uirevision),!1!==M)){p("bgcolor",r.paper_bgcolor),p("bordercolor"),p("borderwidth");var k,E,P,D=x.coerceFont(p,"font",r.font),F="h"===p("orientation");if(F?(k=0,v.getComponentMethod("rangeslider","isVisible")(l.xaxis)?(E=1.1,P="bottom"):(E=-.1,P="top")):(k=1.02,E=1,P="auto"),p("traceorder",f),i.isGrouped(r.legend)&&p("tracegroupgap"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("x",k),p("xanchor"),p("y",E),p("yanchor",P),p("valign"),x.noneOrAll(s,d,["x","y"]),p("title.text")){p("title.side",F?"left":"top");var R=x.extendFlat({},D,{size:x.bigFont(D.size)});x.coerceFont(p,"title.font",R)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib/events"),o=_("../dragelement"),i=_("../drawing"),l=_("../color"),r=_("../../lib/svg_text_utils"),y=_("./handle_click"),h=_("./constants"),s=_("../../constants/alignment"),d=s.LINE_SPACING,p=s.FROM_TL,c=s.FROM_BR,g=_("./get_legend_data"),m=_("./style"),u=_("./helpers");function w(D,F,R,L,I){var B=R.data()[0][0].trace,V={event:I,node:R.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};B._group&&(V.group=B._group),b.traceIs(B,"pie-like")&&(V.label=R.datum()[0].label),!1!==e.triggerHandler(D,"plotly_legendclick",V)&&(1===L?F._clickTimeout=setTimeout(function(){D._fullLayout&&y(R,D,L)},D._context.doubleClickDelay):2===L&&(F._clickTimeout&&clearTimeout(F._clickTimeout),D._legendMouseDownTime=0,!1!==e.triggerHandler(D,"plotly_legenddoubleclick",V)&&y(R,D,L)))}function f(D,F,R){var L,I,B=D.data()[0][0],V=B.trace,Z=b.traceIs(V,"pie-like"),Y=!R._inHover&&F._context.edits.legendText&&!Z,Q=R._maxNameLength;B.groupTitle?(L=B.groupTitle.text,I=B.groupTitle.font):(I=R.font,R.entries?L=B.text:(L=Z?B.label:V.name,V._meta&&(L=x.templateString(L,V._meta))));var re=x.ensureSingle(D,"text","legendtext");re.attr("text-anchor","start").call(i.font,I).text(Y?A(L,Q):L),r.positionText(re,R.itemwidth+2*h.itemGap,0),Y?re.call(r.makeEditable,{gd:F,text:L}).call(k,D,F,R).on("edit",function(J){this.text(A(J,Q)).call(k,D,F,R);var ie=B.trace._fullInput||{},j={};if(b.hasTransform(ie,"groupby")){var q=b.getTransformIndices(ie,"groupby"),ae=x.keyedContainer(ie,"transforms["+q[q.length-1]+"].styles","target","value.name");ae.set(B.trace._group,J),j=ae.constructUpdate()}else j.name=J;return b.call("_guiRestyle",F,j,V.index)}):k(re,D,F,R)}function A(D,F){var R=Math.max(4,F);if(D&&D.trim().length>=R/2)return D;for(var L=R-(D=D||"").length;L>0;L--)D+=" ";return D}function M(D,F){var R,L=F._context.doubleClickDelay,I=1,B=x.ensureSingle(D,"rect","legendtoggle",function(V){F._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(l.fill,"rgba(0,0,0,0)")});F._context.staticPlot||(B.on("mousedown",function(){(R=(new Date).getTime())-F._legendMouseDownTime<L?I+=1:(I=1,F._legendMouseDownTime=R)}),B.on("mouseup",function(){if(!F._dragged&&!F._editing){var V=F._fullLayout.legend;(new Date).getTime()-F._legendMouseDownTime>L&&(I=Math.max(I-1,1)),w(F,V,D,I,v.event)}}))}function k(D,F,R,L,I){L._inHover&&D.attr("data-notex",!0),r.convertToTspans(D,R,function(){!function(B,V,Z,Y){var Q=B.data()[0][0];if(Z._inHover||!Q||Q.trace.showlegend){var re=B.select("g[class*=math-group]"),$=re.node();Z||(Z=V._fullLayout.legend);var j,q,ie=Z.borderwidth,W=(1===Y?Z.title.font:Q.groupTitle?Q.groupTitle.font:Z.font).size*d;if($){var ae=i.bBox($);j=ae.height,q=ae.width,1===Y?i.setTranslate(re,ie,ie+.75*j):i.setTranslate(re,0,.25*j)}else{var G=B.select(1===Y?".legendtitletext":".legendtext"),ee=r.lineCount(G),te=G.node();if(j=W*ee,q=te?i.bBox(te).width:0,1===Y)"left"===Z.title.side&&(q+=2*h.itemGap),r.positionText(G,ie+h.titlePad,ie+W);else{var le=2*h.itemGap+Z.itemwidth;Q.groupTitle&&(le=h.itemGap,q-=Z.itemwidth),r.positionText(G,le,-W*((ee-1)/2-.3))}}1===Y?(Z._titleWidth=q,Z._titleHeight=j):(Q.lineHeight=W,Q.height=Math.max(j,16)+3,Q.width=q)}else B.remove()}(F,R,L,I)})}function E(D){return x.isRightAnchor(D)?"right":x.isCenterAnchor(D)?"center":"left"}function P(D){return x.isBottomAnchor(D)?"bottom":x.isMiddleAnchor(D)?"middle":"top"}oe.exports=function(D,F){return F||(F=D._fullLayout.legend||{}),function(R,L){var I,B,V=R._fullLayout,Z="legend"+V._uid,Y=L._inHover;if(Y?(I=L.layer,Z+="-hover"):I=V._infolayer,I){if(R._legendMouseDownTime||(R._legendMouseDownTime=0),Y){if(!L.entries)return;B=g(L.entries,L)}else{if(!R.calcdata)return;B=V.showlegend&&g(R.calcdata,L)}var Q=V.hiddenlabels||[];if(!(Y||V.showlegend&&B.length))return I.selectAll(".legend").remove(),V._topdefs.select("#"+Z).remove(),T.autoMargin(R,"legend");var re=x.ensureSingle(I,"g","legend",function(ee){Y||ee.attr("pointer-events","all")}),$=x.ensureSingleById(V._topdefs,"clipPath",Z,function(ee){ee.append("rect")}),J=x.ensureSingle(re,"rect","bg",function(ee){ee.attr("shape-rendering","crispEdges")});J.call(l.stroke,L.bordercolor).call(l.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px");var ie=x.ensureSingle(re,"g","scrollbox"),j=L.title;if(L._titleWidth=0,L._titleHeight=0,j.text){var q=x.ensureSingle(ie,"text","legendtitletext");q.attr("text-anchor","start").call(i.font,j.font).text(j.text),k(q,ie,R,L,1)}else ie.selectAll(".legendtitletext").remove();var W=x.ensureSingle(re,"rect","scrollbar",function(ee){ee.attr(h.scrollBarEnterAttrs).call(l.fill,h.scrollBarColor)}),ae=ie.selectAll("g.groups").data(B);ae.enter().append("g").attr("class","groups"),ae.exit().remove();var G=ae.selectAll("g.traces").data(x.identity);G.enter().append("g").attr("class","traces"),G.exit().remove(),G.style("opacity",function(ee){var te=ee[0].trace;return b.traceIs(te,"pie-like")?-1!==Q.indexOf(ee[0].label)?.5:1:"legendonly"===te.visible?.5:1}).each(function(){v.select(this).call(f,R,L)}).call(m,R,L).each(function(){Y||v.select(this).call(M,R)}),x.syncOrAsync([T.previousPromises,function(){return function(ee,te,le,ue){var de=ee._fullLayout;ue||(ue=de.legend);var he=de._size,be=u.isVertical(ue),me=u.isGrouped(ue),_e=ue.borderwidth,Ee=2*_e,De=h.itemGap,Se=ue.itemwidth+2*De,Fe=2*(_e+De),ve=P(ue),Te=ue.y<0||0===ue.y&&"top"===ve,Ie=ue.y>1||1===ue.y&&"bottom"===ve,Ce=ue.tracegroupgap;ue._maxHeight=Math.max(Te||Ie?de.height/2:he.h,30);var Re=0;ue._width=0,ue._height=0;var Rt,gt,Be,Ve,Ue=(gt=0,Be=0,(Ve=(Rt=ue).title.side)&&(-1!==Ve.indexOf("left")&&(gt=Rt._titleWidth),-1!==Ve.indexOf("top")&&(Be=Rt._titleHeight)),[gt,Be]);if(be)le.each(function(Rt){var gt=Rt[0].height;i.setTranslate(this,_e+Ue[0],_e+Ue[1]+ue._height+gt/2+De),ue._height+=gt,ue._width=Math.max(ue._width,Rt[0].width)}),Re=Se+ue._width,ue._width+=De+Se+Ee,ue._height+=Fe,me&&(te.each(function(Rt,gt){i.setTranslate(this,0,gt*ue.tracegroupgap)}),ue._height+=(ue._lgroupsLength-1)*ue.tracegroupgap);else{var qe=E(ue),He=Ie||Te,$e=de.width/2;ue._maxWidth=Math.max(ue.x<0||0===ue.x&&"right"===qe?He&&"left"===qe?he.l+he.w:$e:ue.x>1||1===ue.x&&"left"===qe?He&&"right"===qe?he.r+he.w:$e:he.w,2*Se);var et=0,tt=0;le.each(function(Rt){var gt=Rt[0].width+Se;et=Math.max(et,gt),tt+=gt}),Re=null;var ct=0;if(me){var bt=0,At=0,Ut=0;te.each(function(){var Rt=0,gt=0;v.select(this).selectAll("g.traces").each(function(Ve){var Le=Ve[0].width,je=Ve[0].height;i.setTranslate(this,Ue[0],Ue[1]+_e+De+je/2+gt),gt+=je,Rt=Math.max(Rt,Se+Le)});var Be=Rt+De;At>0&&Be+_e+At>ue._maxWidth?(ct=Math.max(ct,At),At=0,Ut+=bt+Ce,bt=gt):bt=Math.max(bt,gt),i.setTranslate(this,At,Ut),At+=Be}),ue._width=Math.max(ct,At)+_e,ue._height=Ut+bt+Fe}else{var Ct=le.size(),dt=tt+Ee+(Ct-1)*De<ue._maxWidth,at=0,Nt=0,rn=0,en=0;le.each(function(Rt){var gt=Rt[0].height,Be=Se+Rt[0].width,Ve=(dt?Be:et)+De;Ve+_e+Nt-De>=ue._maxWidth&&(ct=Math.max(ct,en),Nt=0,rn+=at,ue._height+=at,at=0),i.setTranslate(this,Ue[0]+_e+Nt,Ue[1]+_e+rn+gt/2+De),en=Nt+Be+De,Nt+=Ve,at=Math.max(at,gt)}),dt?(ue._width=Nt+Ee,ue._height=at+Fe):(ue._width=Math.max(ct,en)+Ee,ue._height+=at+Fe)}}ue._width=Math.ceil(Math.max(ue._width+Ue[0],ue._titleWidth+2*(_e+h.titlePad))),ue._height=Math.ceil(Math.max(ue._height+Ue[1],ue._titleHeight+2*(_e+h.itemGap))),ue._effHeight=Math.min(ue._height,ue._maxHeight);var Ge=ee._context.edits,Qe=Ge.legendText||Ge.legendPosition;le.each(function(Rt){var gt=v.select(this).select(".legendtoggle"),Be=Rt[0].height,Ve=Qe?Se:Re||Se+Rt[0].width;be||(Ve+=De/2),i.setRect(gt,0,-Be/2,Ve,Be)})}(R,ae,G,L)},function(){var ee,te,le,ue,He,$e,et,tt,de=V._size,he=L.borderwidth;if(!Y){if(et=E($e=(He=R)._fullLayout.legend),tt=P($e),T.autoMargin(He,"legend",{x:$e.x,y:$e.y,l:$e._width*p[et],r:$e._width*c[et],b:$e._effHeight*c[tt],t:$e._effHeight*p[tt]}))return;var be=de.l+de.w*L.x-p[E(L)]*L._width,me=de.t+de.h*(1-L.y)-p[P(L)]*L._effHeight;if(V.margin.autoexpand){var _e=be,Ee=me;be=x.constrain(be,0,V.width-L._width),me=x.constrain(me,0,V.height-L._effHeight),be!==_e&&x.log("Constrain legend.x to make legend fit inside graph"),me!==Ee&&x.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(re,be,me)}if(W.on(".drag",null),re.on("wheel",null),Y||L._height<=L._maxHeight||R._context.staticPlot){var De=L._effHeight;Y&&(De=L._height),J.attr({width:L._width-he,height:De-he,x:he/2,y:he/2}),i.setTranslate(ie,0,0),$.select("rect").attr({width:L._width-2*he,height:De-2*he,x:he,y:he}),i.setClipUrl(ie,Z,R),i.setRect(W,0,0,0,0),delete L._scrollY}else{var Se,ve,Te=Math.max(h.scrollBarMinHeight,L._effHeight*L._effHeight/L._height),Ie=L._effHeight-Te-2*h.scrollBarMargin,Ce=L._height-L._effHeight,Re=Ie/Ce,Ue=Math.min(L._scrollY||0,Ce);J.attr({width:L._width-2*he+h.scrollBarWidth+h.scrollBarMargin,height:L._effHeight-he,x:he/2,y:he/2}),$.select("rect").attr({width:L._width-2*he+h.scrollBarWidth+h.scrollBarMargin,height:L._effHeight-2*he,x:he,y:he+Ue}),i.setClipUrl(ie,Z,R),st(Ue,Te,Re),re.on("wheel",function(){st(Ue=x.constrain(L._scrollY+v.event.deltaY/Ie*Ce,0,Ce),Te,Re),0!==Ue&&Ue!==Ce&&v.event.preventDefault()});var qe=v.behavior.drag().on("dragstart",function(){var He=v.event.sourceEvent;Se="touchstart"===He.type?He.changedTouches[0].clientY:He.clientY,ve=Ue}).on("drag",function(){var He=v.event.sourceEvent;2===He.buttons||He.ctrlKey||st(Ue=function($e,et,tt){return x.constrain((tt-et)/Re+$e,0,Ce)}(ve,Se,"touchmove"===He.type?He.changedTouches[0].clientY:He.clientY),Te,Re)});W.call(qe);var Xe=v.behavior.drag().on("dragstart",function(){var He=v.event.sourceEvent;"touchstart"===He.type&&(Se=He.changedTouches[0].clientY,ve=Ue)}).on("drag",function(){var He=v.event.sourceEvent;"touchmove"===He.type&&st(Ue=function($e,et,tt){return x.constrain((et-tt)/Re+$e,0,Ce)}(ve,Se,He.changedTouches[0].clientY),Te,Re)});ie.call(Xe)}function st(He,$e,et){L._scrollY=R._fullLayout.legend._scrollY=He,i.setTranslate(ie,0,-He),i.setRect(W,L._width,h.scrollBarMargin+He*et,h.scrollBarWidth,$e),$.select("rect").attr("y",he+He)}R._context.edits.legendPosition&&(re.classed("cursor-move",!0),o.init({element:re.node(),gd:R,prepFn:function(){var He=i.getTranslate(re);le=He.x,ue=He.y},moveFn:function(He,$e){var et=le+He,tt=ue+$e;i.setTranslate(re,et,tt),ee=o.align(et,0,de.l,de.l+de.w,L.xanchor),te=o.align(tt,0,de.t+de.h,de.t,L.yanchor)},doneFn:function(){void 0!==ee&&void 0!==te&&b.call("_guiRelayout",R,{"legend.x":ee,"legend.y":te})},clickFn:function(He,$e){var et=I.selectAll("g.traces").filter(function(){var tt=this.getBoundingClientRect();return $e.clientX>=tt.left&&$e.clientX<=tt.right&&$e.clientY>=tt.top&&$e.clientY<=tt.bottom});et.size()>0&&w(R,re,et,He,$e)}}))}],R)}}(D,F)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("./helpers");oe.exports=function(T,b){var e,o,i=b._inHover,l=x.isGrouped(b),r=x.isReversed(b),y={},h=[],s=!1,d={},p=0,c=0;function g(V,Z){if(""!==V&&x.isGrouped(b))-1===h.indexOf(V)?(h.push(V),s=!0,y[V]=[Z]):y[V].push(Z);else{var Y="~~i"+p;h.push(Y),y[Y]=[Z],p++}}for(e=0;e<T.length;e++){var m=T[e],u=m[0],w=u.trace,f=w.legendgroup;if(i||w.visible&&w.showlegend)if(v.traceIs(w,"pie-like"))for(d[f]||(d[f]={}),o=0;o<m.length;o++){var A=m[o].label;d[f][A]||(g(f,{label:A,color:m[o].color,i:m[o].i,trace:w,pts:m[o].pts}),d[f][A]=!0,c=Math.max(c,(A||"").length))}else g(f,u),c=Math.max(c,(w.name||"").length)}if(!h.length)return[];var M=!s||!l,k=[];for(e=0;e<h.length;e++){var E=y[h[e]];k.push(M?E[0]:E)}for(M&&(k=[k]),e=0;e<k.length;e++){var P=1/0;for(o=0;o<k[e].length;o++){var D=k[e][o].trace.legendrank;P>D&&(P=D)}k[e][0]._groupMinRank=P,k[e][0]._preGroupSort=e}var F=function(V,Z){return V.trace.legendrank-Z.trace.legendrank||V._preSort-Z._preSort};for(k.forEach(function(V,Z){V[0]._preGroupSort=Z}),k.sort(function(V,Z){return V[0]._groupMinRank-Z[0]._groupMinRank||V[0]._preGroupSort-Z[0]._preGroupSort}),e=0;e<k.length;e++){k[e].forEach(function(V,Z){V._preSort=Z}),k[e].sort(F);var R=k[e][0].trace,L=null;for(o=0;o<k[e].length;o++){var I=k[e][o].trace.legendgrouptitle;if(I&&I.text){L=I,i&&(I.font=b._groupTitleFont);break}}if(r&&k[e].reverse(),L){var B=!1;for(o=0;o<k[e].length;o++)if(v.traceIs(k[e][o].trace,"pie-like")){B=!0;break}k[e].unshift({i:-1,groupTitle:L,noClick:B,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:"toggleitem"===b.groupclick||R.visible}})}for(o=0;o<k[e].length;o++)k[e][o]=[k[e][o]]}return b._lgroupsLength=k.length,b._maxNameLength=c,k}},{"../../registry":638,"./helpers":422}],421:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry"),T=!0;oe.exports=function(b,e,o){var i=e._fullLayout;if(!e._dragged&&!e._editing){var l,r=i.legend.itemclick,y=i.legend.itemdoubleclick,h=i.legend.groupclick;if(1===o&&"toggle"===r&&"toggleothers"===y&&T&&e.data&&e._context.showTips&&v.notifier(v._(e,"Double-click on legend to isolate one trace"),"long"),T=!1,1===o?l=r:2===o&&(l=y),l){var s="togglegroup"===h,d=i.hiddenlabels?i.hiddenlabels.slice():[],p=b.data()[0][0];if(!p.groupTitle||!p.noClick){var c,g,m,u,w,f=e._fullData,A=p.trace,M=A.legendgroup,k={},E=[],P=[],D=[];if(x.traceIs(A,"pie-like")){var F=p.label,R=d.indexOf(F);"toggle"===l?-1===R?d.push(F):d.splice(R,1):"toggleothers"===l&&(d=[],e.calcdata[0].forEach(function(W){F!==W.label&&d.push(W.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===d.length&&-1===R&&(d=[])),x.call("_guiRelayout",e,"hiddenlabels",d)}else{var L,I=M&&M.length,B=[];if(I)for(c=0;c<f.length;c++)(L=f[c]).visible&&L.legendgroup===M&&B.push(c);if("toggle"===l){var V;switch(A.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(I)if(s)for(c=0;c<f.length;c++)!1!==f[c].visible&&f[c].legendgroup===M&&q(f[c],V);else q(A,V);else q(A,V)}else if("toggleothers"===l){var Q,$=!0;for(c=0;c<f.length;c++)if(Q=!0!==f[c].showlegend,!(f[c]===A||Q||I&&f[c].legendgroup===M||!0!==f[c].visible||x.traceIs(f[c],"notLegendIsolatable"))){$=!1;break}for(c=0;c<f.length;c++)if(!1!==f[c].visible&&!x.traceIs(f[c],"notLegendIsolatable"))switch(A.visible){case"legendonly":q(f[c],!0);break;case!0:Q=!0!==f[c].showlegend&&!f[c].legendgroup,q(f[c],!!(f[c]===A||I&&f[c].legendgroup===M||Q)||!!$||"legendonly")}}for(c=0;c<P.length;c++)if(m=P[c]){var J=m.constructUpdate(),ie=Object.keys(J);for(g=0;g<ie.length;g++)(k[u=ie[g]]=k[u]||[])[D[c]]=J[u]}for(w=Object.keys(k),c=0;c<w.length;c++)for(u=w[c],g=0;g<E.length;g++)k[u].hasOwnProperty(g)||(k[u][g]=void 0);x.call("_guiRestyle",e,k,E)}}}}function j(W,ae,G){var ee=E.indexOf(W),te=k[ae];return te||(te=k[ae]=[]),-1===E.indexOf(W)&&(E.push(W),ee=E.length-1),te[ee]=G,ee}function q(W,ae){if(!p.groupTitle||s){var G=W._fullInput;if(x.hasTransform(G,"groupby")){var ee=P[G.index];if(!ee){var te=x.getTransformIndices(G,"groupby");ee=v.keyedContainer(G,"transforms["+te[te.length-1]+"].styles","target","value.visible"),P[G.index]=ee}var ue=ee.get(W._group);void 0===ue&&(ue=!0),!1!==ue&&ee.set(W._group,ae),D[G.index]=j(G.index,"visible",!1!==G.visible)}else j(G.index,"visible",!1!==G.visible&&ae)}}}},{"../../lib":503,"../../registry":638}],422:[function(_,oe,se){"use strict";se.isGrouped=function(v){return-1!==(v.traceorder||"").indexOf("grouped")},se.isVertical=function(v){return"h"!==v.orientation},se.isReversed=function(v){return-1!==(v.traceorder||"").indexOf("reversed")}},{}],423:[function(_,oe,se){"use strict";oe.exports={moduleType:"component",name:"legend",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),draw:_("./draw"),style:_("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=T.strTranslate,e=_("../drawing"),o=_("../color"),i=_("../colorscale/helpers").extractOpts,l=_("../../traces/scatter/subtypes"),r=_("../../traces/pie/style_one"),y=_("../../traces/pie/helpers").castOption,h=_("./constants");function s(c,g){return(g?"radial":"horizontal")+(c?"":"reversed")}function d(c){var g=c[0].trace,m=g.contours,u=l.hasLines(g),w=l.hasMarkers(g),f=g.visible&&g.fill&&"none"!==g.fill,A=!1,M=!1;if(m){var k=m.coloring;"lines"===k?A=!0:u="none"===k||"heatmap"===k||m.showlines,"constraint"===m.type?f="="!==m._operation:"fill"!==k&&"heatmap"!==k||(M=!0)}return{showMarker:w,showLine:u,showFill:f,showGradientLine:A,showGradientFill:M,anyLine:u||A,anyFill:f||M}}function p(c,g,m){return c&&T.isArrayOrTypedArray(c)?g:c>m?m:c}oe.exports=function(c,g,m){m||(m=g._fullLayout.legend);var w="constant"===m.itemsizing,f=m.itemwidth,M=b((f+2*h.itemGap)/2,0),k=function(D,F,R,L){var I;if(D+1)I=D;else{if(!(F&&F.width>0))return 0;I=F.width}return w?L:Math.min(I,R)};function E(D,F,R){var L=D[0].trace,I=L.marker||{},B=I.line||{},V=R?L.visible&&L.type===R:x.traceIs(L,"bar"),Z=v.select(F).select("g.legendpoints").selectAll("path.legend"+R).data(V?[D]:[]);Z.enter().append("path").classed("legend"+R,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),Z.exit().remove(),Z.each(function(Y){var Q=v.select(this),re=Y[0],$=k(re.mlw,I.line,5,2);Q.style("stroke-width",$+"px");var J=re.mcc;if(!m._inHover&&"mc"in re){var ie=i(I),j=ie.mid;void 0===j&&(j=(ie.max+ie.min)/2),J=e.tryColorscale(I,"")(j)}var q=J||re.mc||I.color,W=I.pattern,ae=W&&e.getPatternAttr(W.shape,0,"");if(ae){var G=e.getPatternAttr(W.bgcolor,0,null),ee=e.getPatternAttr(W.fgcolor,0,null),te=W.fgopacity,le=p(W.size,8,10),ue=p(W.solidity,.5,1);Q.call(e.pattern,"legend",g,"legend-"+L.uid,ae,le,ue,J,W.fillmode,G,ee,te)}else Q.call(o.fill,q);$&&o.stroke(Q,re.mlc||B.color)})}function P(D,F,R){var L=D[0],I=L.trace,B=R?I.visible&&I.type===R:x.traceIs(I,R),V=v.select(F).select("g.legendpoints").selectAll("path.legend"+R).data(B?[D]:[]);if(V.enter().append("path").classed("legend"+R,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),V.exit().remove(),V.size()){var Z=(I.marker||{}).line,Y=k(y(Z.width,L.pts),Z,5,2),Q=T.minExtend(I,{marker:{line:{width:Y}}});Q.marker.line.color=Z.color;var re=T.minExtend(L,{trace:Q});r(V,re,Q)}}c.each(function(D){var F=v.select(this),R=T.ensureSingle(F,"g","layers");R.style("opacity",D[0].trace.opacity);var L=m.valign,I=D[0].lineHeight,B=D[0].height;R.attr("transform","middle"!==L&&I&&B?b(0,{top:1,bottom:-1}[L]*(.5*(I-B+3))):null),R.selectAll("g.legendfill").data([D]).enter().append("g").classed("legendfill",!0),R.selectAll("g.legendlines").data([D]).enter().append("g").classed("legendlines",!0);var Z=R.selectAll("g.legendsymbols").data([D]);Z.enter().append("g").classed("legendsymbols",!0),Z.selectAll("g.legendpoints").data([D]).enter().append("g").classed("legendpoints",!0)}).each(function(D){var F,R=D[0].trace,L=[];if(R.visible)switch(R.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],F=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],F=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],F="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],F=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],F=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],F=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],F=!1}var I=v.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);I.enter().append("path").classed("legend3dandfriends",!0).attr("transform",M).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(B,V){var Z,Y=v.select(this),Q=i(R),re=Q.colorscale,$=Q.reversescale;if(re){if(!F){var J=re.length;Z=0===V?re[$?J-1:0][1]:1===V?re[$?0:J-1][1]:re[Math.floor((J-1)/2)][1]}}else{var ie=R.vertexcolor||R.facecolor||R.color;Z=T.isArrayOrTypedArray(ie)?ie[V]||ie[0]:ie}Y.attr("d",B[0]),Z?Y.call(o.fill,Z):Y.call(function(j){j.size()&&e.gradient(j,g,"legendfill-"+R.uid,s($,"radial"===F),re,"fill")})})}).each(function(D){var F=D[0].trace,R="waterfall"===F.type;if(D[0]._distinct&&R){var L=D[0].trace[D[0].dir].marker;return D[0].mc=L.color,D[0].mlw=L.line.width,D[0].mlc=L.line.color,E(D,this,"waterfall")}var I=[];F.visible&&R&&(I=D[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var B=v.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(I);B.enter().append("path").classed("legendwaterfall",!0).attr("transform",M).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(V){var Z=v.select(this),Y=F[V[0]].marker,Q=k(void 0,Y.line,5,2);Z.attr("d",V[1]).style("stroke-width",Q+"px").call(o.fill,Y.color),Q&&Z.call(o.stroke,Y.line.color)})}).each(function(D){E(D,this,"funnel")}).each(function(D){E(D,this)}).each(function(D){var F=D[0].trace,R=v.select(this).select("g.legendpoints").selectAll("path.legendbox").data(F.visible&&x.traceIs(F,"box-violin")?[D]:[]);R.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),R.exit().remove(),R.each(function(){var L=v.select(this);if("all"!==F.boxpoints&&"all"!==F.points||0!==o.opacity(F.fillcolor)||0!==o.opacity((F.line||{}).color)){var I=k(void 0,F.line,5,2);L.style("stroke-width",I+"px").call(o.fill,F.fillcolor),I&&o.stroke(L,F.line.color)}else{var B=T.minExtend(F,{marker:{size:w?12:T.constrain(F.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});R.call(e.pointStyle,B,g)}})}).each(function(D){P(D,this,"funnelarea")}).each(function(D){P(D,this,"pie")}).each(function(D){var F,R,L=d(D),I=L.showFill,B=L.showLine,V=L.showGradientLine,Z=L.showGradientFill,Y=L.anyFill,Q=L.anyLine,re=D[0],$=re.trace,J=i($),ie=J.colorscale,j=J.reversescale,q=l.hasMarkers($)||!Y?"M5,0":Q?"M5,-2":"M5,-3",W=v.select(this),ae=W.select(".legendfill").selectAll("path").data(I||Z?[D]:[]);if(ae.enter().append("path").classed("js-fill",!0),ae.exit().remove(),ae.attr("d",q+"h"+f+"v6h-"+f+"z").call(function(te){te.size()&&(I?e.fillGroupStyle(te,g):e.gradient(te,g,"legendfill-"+$.uid,s(j),ie,"fill"))}),B||V){var G=k(void 0,$.line,10,5);R=T.minExtend($,{line:{width:G}}),F=[T.minExtend(re,{trace:R})]}var ee=W.select(".legendlines").selectAll("path").data(B||V?[F]:[]);ee.enter().append("path").classed("js-line",!0),ee.exit().remove(),ee.attr("d",q+(V?"l"+f+",0.0001":"h"+f)).call(B?e.lineGroupStyle:function(te){if(te.size()){var le="legendline-"+$.uid;e.lineGroupStyle(te),e.gradient(te,g,le,s(j),ie,"stroke")}})}).each(function(D){var F,R,L=d(D),V=L.showLine,Z=L.showMarker,Y=D[0],Q=Y.trace,re=!Z&&!L.anyLine&&!L.anyFill&&l.hasText(Q);function $(ee,te,le,ue){var de=T.nestedProperty(Q,ee).get(),he=T.isArrayOrTypedArray(de)&&te?te(de):de;if(w&&he&&void 0!==ue&&(he=ue),le){if(he<le[0])return le[0];if(he>le[1])return le[1]}return he}function J(ee){return Y._distinct&&Y.index&&ee[Y.index]?ee[Y.index]:ee[0]}if(Z||re||V){var ie={},j={};if(Z){ie.mc=$("marker.color",J),ie.mx=$("marker.symbol",J),ie.mo=$("marker.opacity",T.mean,[.2,1]),ie.mlc=$("marker.line.color",J),ie.mlw=$("marker.line.width",T.mean,[0,5],2),j.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var q=$("marker.size",T.mean,[2,16],12);ie.ms=q,j.marker.size=q}V&&(j.line={width:$("line.width",J,[0,10],5)}),re&&(ie.tx="Aa",ie.tp=$("textposition",J),ie.ts=10,ie.tc=$("textfont.color",J),ie.tf=$("textfont.family",J)),F=[T.minExtend(Y,ie)],(R=T.minExtend(Q,j)).selectedpoints=null,R.texttemplate=null}var W=v.select(this).select("g.legendpoints"),ae=W.selectAll("path.scatterpts").data(Z?F:[]);ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",M),ae.exit().remove(),ae.call(e.pointStyle,R,g),Z&&(F[0].mrc=3);var G=W.selectAll("g.pointtext").data(re?F:[]);G.enter().append("g").classed("pointtext",!0).append("text").attr("transform",M),G.exit().remove(),G.selectAll("text").call(e.textPointStyle,R,g)}).each(function(D){var F=D[0].trace,R=v.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(F.visible&&"candlestick"===F.type?[D,D]:[]);R.enter().append("path").classed("legendcandle",!0).attr("d",function(L,I){return I?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",M).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(L,I){var B=v.select(this),V=F[I?"increasing":"decreasing"],Z=k(void 0,V.line,5,2);B.style("stroke-width",Z+"px").call(o.fill,V.fillcolor),Z&&o.stroke(B,V.line.color)})}).each(function(D){var F=D[0].trace,R=v.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(F.visible&&"ohlc"===F.type?[D,D]:[]);R.enter().append("path").classed("legendohlc",!0).attr("d",function(L,I){return I?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",M).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(L,I){var B=v.select(this),V=F[I?"increasing":"decreasing"],Z=k(void 0,V.line,5,2);B.style("fill","none").call(e.dashLine,V.line.dash,Z),Z&&o.stroke(B,V.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(_,oe,se){"use strict";_("./constants"),oe.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../plots/plots"),T=_("../../plots/cartesian/axis_ids"),b=_("../../fonts/ploticon"),e=_("../shapes/draw").eraseActiveShape,o=_("../../lib"),i=o._,l=oe.exports={};function r(u,w){var f,A,M=w.currentTarget,k=M.getAttribute("data-attr"),E=M.getAttribute("data-val")||!0,P=u._fullLayout,D={},F=T.list(u,null,!0),R=P._cartesianSpikesEnabled;if("zoom"===k){var L,I="in"===E?.5:2,B=(1+I)/2,V=(1-I)/2;for(A=0;A<F.length;A++)if(!(f=F[A]).fixedrange)if(L=f._name,"auto"===E)D[L+".autorange"]=!0;else if("reset"===E){if(void 0===f._rangeInitial)D[L+".autorange"]=!0;else{var Z=f._rangeInitial.slice();D[L+".range[0]"]=Z[0],D[L+".range[1]"]=Z[1]}void 0!==f._showSpikeInitial&&(D[L+".showspikes"]=f._showSpikeInitial,"on"!==R||f._showSpikeInitial||(R="off"))}else{var Y=[f.r2l(f.range[0]),f.r2l(f.range[1])],Q=[B*Y[0]+V*Y[1],B*Y[1]+V*Y[0]];D[L+".range[0]"]=f.l2r(Q[0]),D[L+".range[1]"]=f.l2r(Q[1])}}else"hovermode"!==k||"x"!==E&&"y"!==E||M.setAttribute("data-val",E=P._isHoriz?"y":"x"),D[k]=E;P._cartesianSpikesEnabled=R,v.call("_guiRelayout",u,D)}function y(u,w){for(var f=w.currentTarget,A=f.getAttribute("data-attr"),M=f.getAttribute("data-val")||!0,k=u._fullLayout._subplots.gl3d||[],E={},P=A.split("."),D=0;D<k.length;D++)E[k[D]+"."+P[1]]=M;E.dragmode="pan"===M?M:"zoom",v.call("_guiRelayout",u,E)}function h(u,w){for(var f=w.currentTarget.getAttribute("data-attr"),A="resetLastSave"===f,M="resetDefault"===f,k=u._fullLayout,E=k._subplots.gl3d||[],P={},D=0;D<E.length;D++){var F,R=E[D],L=R+".camera",I=R+".aspectratio",B=R+".aspectmode",V=k[R]._scene;A?(P[L+".up"]=V.viewInitial.up,P[L+".eye"]=V.viewInitial.eye,P[L+".center"]=V.viewInitial.center,F=!0):M&&(P[L+".up"]=null,P[L+".eye"]=null,P[L+".center"]=null,F=!0),F&&(P[I+".x"]=V.viewInitial.aspectratio.x,P[I+".y"]=V.viewInitial.aspectratio.y,P[I+".z"]=V.viewInitial.aspectratio.z,P[B]=V.viewInitial.aspectmode)}v.call("_guiRelayout",u,P)}function s(u,w){var f=w.currentTarget,A=f._previousVal,M=u._fullLayout,k=M._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],P={},D={};if(A)D=A,f._previousVal=null;else{for(var F=0;F<k.length;F++){var R=k[F],L=M[R],I=R+".hovermode";P[I]=L.hovermode,D[I]=!1;for(var B=0;B<3;B++){var V=E[B],Z=R+"."+V+".showspikes";D[Z]=!1,P[Z]=L[V].showspikes}}f._previousVal=P}return D}function d(u,w){for(var f=w.currentTarget,A=f.getAttribute("data-attr"),M=f.getAttribute("data-val")||!0,k=u._fullLayout,E=k._subplots.geo||[],P=0;P<E.length;P++){var D=E[P];if("zoom"===A){var R=k[D].projection.scale;v.call("_guiRelayout",u,D+".projection.scale","in"===M?2*R:.5*R)}}"reset"===A&&m(u,"geo")}function p(u){var w=u._fullLayout;return!w.hovermode&&(w._has("cartesian")?w._isHoriz?"y":"x":"closest")}function c(u){var w=p(u);v.call("_guiRelayout",u,"hovermode",w)}function g(u,w){for(var f=w.currentTarget.getAttribute("data-val"),A=u._fullLayout,M=A._subplots.mapbox||[],k={},E=0;E<M.length;E++){var P=M[E],D=A[P].zoom;k[P+".zoom"]="in"===f?1.05*D:D/1.05}v.call("_guiRelayout",u,k)}function m(u,w){for(var f=u._fullLayout,A=f._subplots[w]||[],M={},k=0;k<A.length;k++)for(var E=A[k],P=f[E]._subplot.viewInitial,D=Object.keys(P),F=0;F<D.length;F++){var R=D[F];M[E+"."+R]=P[R]}v.call("_guiRelayout",u,M)}l.toImage={name:"toImage",title:function(u){return i(u,"png"===((u._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:b.camera,click:function(u){var w=u._context.toImageButtonOptions,f={format:w.format||"png"};o.notifier(i(u,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==f.format&&o.isIE()&&(o.notifier(i(u,"IE only supports svg.  Changing format to svg."),"long"),f.format="svg"),["filename","width","height","scale"].forEach(function(A){A in w&&(f[A]=w[A])}),v.call("downloadImage",u,f).then(function(A){o.notifier(i(u,"Snapshot succeeded")+" - "+A,"long")}).catch(function(){o.notifier(i(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(u){return i(u,"Edit in Chart Studio")},icon:b.disk,click:function(u){x.sendDataToCloud(u)}},l.editInChartStudio={name:"editInChartStudio",title:function(u){return i(u,"Edit in Chart Studio")},icon:b.pencil,click:function(u){x.sendDataToCloud(u)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"dragmode",val:"zoom",icon:b.zoombox,click:r},l.pan2d={name:"pan2d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"dragmode",val:"pan",icon:b.pan,click:r},l.select2d={name:"select2d",_cat:"select",title:function(u){return i(u,"Box Select")},attr:"dragmode",val:"select",icon:b.selectbox,click:r},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return i(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:b.lasso,click:r},l.drawclosedpath={name:"drawclosedpath",title:function(u){return i(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:b.drawclosedpath,click:r},l.drawopenpath={name:"drawopenpath",title:function(u){return i(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:b.drawopenpath,click:r},l.drawline={name:"drawline",title:function(u){return i(u,"Draw line")},attr:"dragmode",val:"drawline",icon:b.drawline,click:r},l.drawrect={name:"drawrect",title:function(u){return i(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:b.drawrect,click:r},l.drawcircle={name:"drawcircle",title:function(u){return i(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:b.drawcircle,click:r},l.eraseshape={name:"eraseshape",title:function(u){return i(u,"Erase active shape")},icon:b.eraseshape,click:e},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:r},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:r},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return i(u,"Autoscale")},attr:"zoom",val:"auto",icon:b.autoscale,click:r},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return i(u,"Reset axes")},attr:"zoom",val:"reset",icon:b.home,click:r},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return i(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:r},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return i(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:b.tooltip_compare,gravity:"ne",click:r},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:b.zoombox,click:y},l.pan3d={name:"pan3d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:b.pan,click:y},l.orbitRotation={name:"orbitRotation",title:function(u){return i(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:b["3d_rotate"],click:y},l.tableRotation={name:"tableRotation",title:function(u){return i(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:b["z-axis"],click:y},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return i(u,"Reset camera to default")},attr:"resetDefault",icon:b.home,click:h},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return i(u,"Reset camera to last save")},attr:"resetLastSave",icon:b.movie,click:h},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(u,w){var f=s(u,w);v.call("_guiRelayout",u,f)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:d},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:d},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return i(u,"Reset")},attr:"reset",val:null,icon:b.autoscale,click:d},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:c},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:c},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:c},l.resetViewSankey={name:"resetSankeyGroup",title:function(u){return i(u,"Reset view")},icon:b.home,click:function(u){for(var w={"node.groups":[],"node.x":[],"node.y":[]},f=0;f<u._fullData.length;f++){var A=u._fullData[f]._viewInitial;w["node.groups"].push(A.node.groups.slice()),w["node.x"].push(A.node.x.slice()),w["node.y"].push(A.node.y.slice())}v.call("restyle",u,w)}},l.toggleHover={name:"toggleHover",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(u,w){var f=s(u,w);f.hovermode=p(u),v.call("_guiRelayout",u,f)}},l.resetViews={name:"resetViews",title:function(u){return i(u,"Reset views")},icon:b.home,click:function(u,w){var f=w.currentTarget;f.setAttribute("data-attr","zoom"),f.setAttribute("data-val","reset"),r(u,w),f.setAttribute("data-attr","resetLastSave"),h(u,w),m(u,"geo"),m(u,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(u){return i(u,"Toggle Spike Lines")},icon:b.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var w=u._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on",v.call("_guiRelayout",u,function(A){for(var M="on"===A._fullLayout._cartesianSpikesEnabled,k=T.list(A,null,!0),E={},P=0;P<k.length;P++){var D=k[P];E[D._name+".showspikes"]=!!M||D._showSpikeInitial}return E}(u))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return i(u,"Reset view")},attr:"reset",icon:b.home,click:function(u){m(u,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:g},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:g}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(_,oe,se){"use strict";var v=_("./buttons"),x=Object.keys(v),T=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],b=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(T),e=[];x.forEach(function(o){!function(i){if(-1===b.indexOf(i._cat||i.name)){var l=i.name,r=(i._cat||i.name).toLowerCase();-1===e.indexOf(l)&&e.push(l),-1===e.indexOf(r)&&e.push(r)}}(v[o])}),e.sort(),oe.exports={DRAW_MODES:T,backButtons:b,foreButtons:e}},{"./buttons":426}],428:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../color"),T=_("../../plot_api/plot_template"),b=_("./attributes");oe.exports=function(e,o){var i=e.modebar||{},l=T.newContainer(o,"modebar");function r(h,s){return v.coerce(i,l,b,h,s)}r("orientation"),r("bgcolor",x.addOpacity(o.paper_bgcolor,.5));var y=x.contrast(x.rgb(o.modebar.bgcolor));r("color",x.addOpacity(y,.3)),r("activecolor",x.addOpacity(y,.7)),r("uirevision",o.uirevision),r("add"),r("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(_,oe,se){"use strict";oe.exports={moduleType:"component",name:"modebar",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),manage:_("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axis_ids"),x=_("../../traces/scatter/subtypes"),T=_("../../registry"),b=_("../fx/helpers").isUnifiedHover,e=_("./modebar"),o=_("./buttons"),i=_("./constants").DRAW_MODES;oe.exports=function(l){var r=l._fullLayout,y=l._context,h=r._modeBar;if(y.displayModeBar||y.watermark){if(!Array.isArray(y.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(y.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,d=y.modeBarButtons;s=Array.isArray(d)&&d.length?function(p){for(var c=0;c<p.length;c++)for(var g=p[c],m=0;m<g.length;m++){var u=g[m];if("string"==typeof u){if(void 0===o[u])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));p[c][m]=o[u]}}return p}(d):!y.displayModeBar&&y.watermark?[]:function(p){var c=p._fullLayout,g=p._fullData,m=p._context;function u(ue,de){if("string"==typeof de){if(de.toLowerCase()===ue.toLowerCase())return!0}else if(de.name===ue||(de._cat||de.name)===ue.toLowerCase())return!0;return!1}var w=c.modebar.add;"string"==typeof w&&(w=[w]);var f=c.modebar.remove;"string"==typeof f&&(f=[f]);var A=m.modeBarButtonsToAdd.concat(w.filter(function(ue){for(var de=0;de<m.modeBarButtonsToRemove.length;de++)if(u(ue,m.modeBarButtonsToRemove[de]))return!1;return!0})),M=m.modeBarButtonsToRemove.concat(f.filter(function(ue){for(var de=0;de<m.modeBarButtonsToAdd.length;de++)if(u(ue,m.modeBarButtonsToAdd[de]))return!1;return!0})),k=c._has("cartesian"),E=c._has("gl3d"),P=c._has("geo"),D=c._has("pie"),F=c._has("funnelarea"),R=c._has("gl2d"),L=c._has("ternary"),I=c._has("mapbox"),B=c._has("polar"),V=c._has("smith"),Z=c._has("sankey"),Y=function(ue){for(var de=v.list({_fullLayout:ue},null,!0),he=0;he<de.length;he++)if(!de[he].fixedrange)return!1;return!0}(c),Q=b(c.hovermode),re=[];function $(ue){if(ue.length){for(var de=[],he=0;he<ue.length;he++){for(var be=ue[he],me=o[be],_e=me.name.toLowerCase(),Ee=(me._cat||me.name).toLowerCase(),De=!1,Se=0;Se<M.length;Se++){var Fe=M[Se].toLowerCase();if(Fe===_e||Fe===Ee){De=!0;break}}De||de.push(o[be])}re.push(de)}}var J=["toImage"];m.showEditInChartStudio?J.push("editInChartStudio"):m.showSendToCloud&&J.push("sendDataToCloud"),$(J);var ie=[],j=[],q=[],W=[];(k||R||D||F||L)+P+E+I+B+V>1?(j=["toggleHover"],q=["resetViews"]):P?(ie=["zoomInGeo","zoomOutGeo"],j=["hoverClosestGeo"],q=["resetGeo"]):E?(j=["hoverClosest3d"],q=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(ie=["zoomInMapbox","zoomOutMapbox"],j=["toggleHover"],q=["resetViewMapbox"]):R?j=["hoverClosestGl2d"]:D?j=["hoverClosestPie"]:Z?(j=["hoverClosestCartesian","hoverCompareCartesian"],q=["resetViewSankey"]):j=["toggleHover"],k&&(j=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ue){for(var de=0;de<ue.length;de++)if(!T.traceIs(ue[de],"noHover"))return!1;return!0}(g)||Q)&&(j=[]),!k&&!R||Y||(ie=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==q[0]&&(q=["resetScale2d"])),E?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(k||R)&&!Y||L?W=["zoom2d","pan2d"]:I||P?W=["pan2d"]:B&&(W=["zoom2d"]),function(ue){for(var de=!1,he=0;he<ue.length&&!de;he++){var be=ue[he];be._module&&be._module.selectPoints&&(T.traceIs(be,"scatter-like")?(x.hasMarkers(be)||x.hasText(be))&&(de=!0):T.traceIs(be,"box-violin")&&"all"!==be.boxpoints&&"all"!==be.points||(de=!0))}return de}(g)&&W.push("select2d","lasso2d");var ae=[],G=function(ue){-1===ae.indexOf(ue)&&-1!==j.indexOf(ue)&&ae.push(ue)};if(Array.isArray(A)){for(var ee=[],te=0;te<A.length;te++){var le=A[te];"string"==typeof le?(le=le.toLowerCase(),-1!==i.indexOf(le)?(c._has("mapbox")||c._has("cartesian"))&&W.push(le):"togglespikelines"===le?G("toggleSpikelines"):"togglehover"===le?G("toggleHover"):"hovercompare"===le?G("hoverCompareCartesian"):"hoverclosest"===le?(G("hoverClosestCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestGl2d"),G("hoverClosestPie")):"v1hovermode"===le&&(G("toggleHover"),G("hoverClosestCartesian"),G("hoverCompareCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestGl2d"),G("hoverClosestPie"))):ee.push(le)}A=ee}return $(W),$(ie.concat(q)),$(ae),function(ue,de){if(de.length)if(Array.isArray(de[0]))for(var he=0;he<de.length;he++)ue.push(de[he]);else ue.push(de);return ue}(re,A)}(l),h?h.update(l,s):r._modeBar=e(l,s)}else h&&(h.destroy(),delete r._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../fonts/ploticon"),e=_("../../version").version,o=new DOMParser;function i(r){this.container=r.container,this.element=document.createElement("div"),this.update(r.graphInfo,r.buttons),this.container.appendChild(this.element)}var l=i.prototype;l.update=function(r,y){this.graphInfo=r;var h=this.graphInfo._context,s=this.graphInfo._fullLayout,d="modebar-"+s._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar","hover"===h.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",y=y.reverse());var p=s.modebar,c="hover"===h.displayModeBar?".js-plotly-plot .plotly:hover ":"";T.deleteRelatedStyleRule(d),T.addRelatedStyleRule(d,c+"#"+d+" .modebar-group","background-color: "+p.bgcolor),T.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+p.color),T.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+p.activecolor),T.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+p.activecolor);var g=!this.hasButtons(y),m=this.hasLogo!==h.displaylogo,u=this.locale!==h.locale;if(this.locale=h.locale,(g||m||u)&&(this.removeAllButtons(),this.updateButtons(y),h.watermark||h.displaylogo)){var w=this.getLogo();h.watermark&&(w.className=w.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(r){var y=this;this.buttons=r,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(h){var s=y.createGroup();h.forEach(function(d){var p=d.name;if(!p)throw new Error("must provide button 'name' in button config");if(-1!==y.buttonsNames.indexOf(p))throw new Error("button name '"+p+"' is taken");y.buttonsNames.push(p);var c=y.createButton(d);y.buttonElements.push(c),s.appendChild(c)}),y.element.appendChild(s)})},l.createGroup=function(){var r=document.createElement("div");return r.className="modebar-group",r},l.createButton=function(r){var y=this,h=document.createElement("a");h.setAttribute("rel","tooltip"),h.className="modebar-btn";var s=r.title;void 0===s?s=r.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&h.setAttribute("data-title",s),void 0!==r.attr&&h.setAttribute("data-attr",r.attr);var d=r.val;if(void 0!==d&&("function"==typeof d&&(d=d(this.graphInfo)),h.setAttribute("data-val",d)),"function"!=typeof r.click)throw new Error("must provide button 'click' function in button config");h.addEventListener("click",function(c){r.click(y.graphInfo,c),y.updateActiveButton(c.currentTarget)}),h.setAttribute("data-toggle",r.toggle||!1),r.toggle&&v.select(h).classed("active",!0);var p=r.icon;return h.appendChild("function"==typeof p?p():this.createIcon(p||b.question)),h.setAttribute("data-gravity",r.gravity||"n"),h},l.createIcon=function(r){var y,h=x(r.height)?Number(r.height):r.ascent-r.descent,s="http://www.w3.org/2000/svg";if(r.path){(y=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,r.width,h].join(" ")),y.setAttribute("class","icon");var d=document.createElementNS(s,"path");d.setAttribute("d",r.path),r.transform?d.setAttribute("transform",r.transform):void 0!==r.ascent&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+r.ascent+")"),y.appendChild(d)}return r.svg&&(y=o.parseFromString(r.svg,"application/xml").childNodes[0]),y.setAttribute("height","1em"),y.setAttribute("width","1em"),y},l.updateActiveButton=function(r){var y=this.graphInfo._fullLayout,h=void 0!==r?r.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var d=s.getAttribute("data-val")||!0,p=s.getAttribute("data-attr"),c="true"===s.getAttribute("data-toggle"),g=v.select(s);if(c)p===h&&g.classed("active",!g.classed("active"));else{var m=null===p?p:T.nestedProperty(y,p).get();g.classed("active",m===d)}})},l.hasButtons=function(r){var y=this.buttons;if(!y||r.length!==y.length)return!1;for(var h=0;h<r.length;++h){if(r[h].length!==y[h].length)return!1;for(var s=0;s<r[h].length;s++)if(r[h][s].name!==y[h][s].name)return!1}return!0},l.getLogo=function(){var r=this.createGroup(),y=document.createElement("a");return y.href="https://plotly.com/",y.target="_blank",y.setAttribute("data-title",T._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),y.className="modebar-btn plotlyjsicon modebar-btn--logo",y.appendChild(this.createIcon(b.newplotlylogo)),r.appendChild(y),r},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){T.removeElement(this.container.querySelector(".modebar")),T.deleteRelatedStyleRule(this._uid)},oe.exports=function(r,y){var h=r._fullLayout,s=new i({graphInfo:r,container:h._modebardiv.node(),buttons:y});return h._privateplot&&v.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("../color/attributes"),T=(0,_("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});oe.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:v({editType:"plot"}),bgcolor:{valType:"color",dflt:x.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(_,oe,se){"use strict";oe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../color"),T=_("../../plot_api/plot_template"),b=_("../../plots/array_container_defaults"),e=_("./attributes"),o=_("./constants");function i(l,r,y,h){var s=h.calendar;function d(c,g){return v.coerce(l,r,e.buttons,c,g)}if(d("visible")){var p=d("step");"all"!==p&&(!s||"gregorian"===s||"month"!==p&&"year"!==p?d("stepmode"):r.stepmode="backward",d("count")),d("label")}}oe.exports=function(l,r,y,h,s){var d=l.rangeselector||{},p=T.newContainer(r,"rangeselector");function c(u,w){return v.coerce(d,p,e,u,w)}if(c("visible",b(d,p,{name:"buttons",handleItemDefaults:i,calendar:s}).length>0)){var g=function(u,w,f){for(var A=f.filter(function(P){return w[P].anchor===u._id}),M=0,k=0;k<A.length;k++){var E=w[A[k]].domain;E&&(M=Math.max(E[1],M))}return[u.domain[0],M+o.yPad]}(r,y,h);c("x",g[0]),c("y",g[1]),v.noneOrAll(l,r,["x","y"]),c("xanchor"),c("yanchor"),v.coerceFont(c,"font",y.font);var m=c("bgcolor");c("activecolor",x.contrast(m,o.lightAmount,o.darkAmount)),c("bordercolor"),c("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../color"),e=_("../drawing"),o=_("../../lib"),i=o.strTranslate,l=_("../../lib/svg_text_utils"),r=_("../../plots/cartesian/axis_ids"),y=_("../../constants/alignment"),h=y.LINE_SPACING,s=y.FROM_TL,d=y.FROM_BR,p=_("./constants"),c=_("./get_update_object");function g(w){return w._id}function m(w,f,A){var k,E,M=o.ensureSingle(w,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});M.attr({rx:p.rx,ry:p.ry}),M.call(b.stroke,f.bordercolor).call(b.fill,(k=f,E=A,E._isActive||E._isHovered?k.activecolor:k.bgcolor)).style("stroke-width",f.borderwidth+"px")}function u(w,f,A,M){var k,E;o.ensureSingle(w,"text","selector-text",function(k){k.attr("text-anchor","middle")}).call(e.font,f.font).text((k=A,E=M._fullLayout._meta,k.label?E?o.templateString(k.label,E):k.label:"all"===k.step?"all":k.count+k.step.charAt(0))).call(function(k){l.convertToTspans(k,M)})}oe.exports=function(w){var f=w._fullLayout._infolayer.selectAll(".rangeselector").data(function(A){for(var M=r.list(A,"x",!0),k=[],E=0;E<M.length;E++){var P=M[E];P.rangeselector&&P.rangeselector.visible&&k.push(P)}return k}(w),g);f.enter().append("g").classed("rangeselector",!0),f.exit().remove(),f.style({cursor:"pointer","pointer-events":"all"}),f.each(function(A){var M=v.select(this),k=A,E=k.rangeselector,P=M.selectAll("g.button").data(o.filterVisible(E.buttons));P.enter().append("g").classed("button",!0),P.exit().remove(),P.each(function(D){var F=v.select(this),R=c(k,D);D._isActive=function(L,I,B){if("all"===I.step)return!0===L.autorange;var V=Object.keys(B);return L.range[0]===B[V[0]]&&L.range[1]===B[V[1]]}(k,D,R),F.call(m,E,D),F.call(u,E,D,w),F.on("click",function(){w._dragged||x.call("_guiRelayout",w,R)}),F.on("mouseover",function(){D._isHovered=!0,F.call(m,E,D)}),F.on("mouseout",function(){D._isHovered=!1,F.call(m,E,D)})}),function(D,F,R,L,I){var B=0,V=0,Z=R.borderwidth;F.each(function(){var ie=v.select(this).select(".selector-text"),q=Math.max(R.font.size*h*l.lineCount(ie),16)+3;V=Math.max(V,q)}),F.each(function(){var ie=v.select(this),j=ie.select(".selector-rect"),q=ie.select(".selector-text"),W=q.node()&&e.bBox(q.node()).width,ae=R.font.size*h,G=l.lineCount(q),ee=Math.max(W+10,p.minButtonWidth);ie.attr("transform",i(Z+B,Z)),j.attr({x:0,y:0,width:ee,height:V}),l.positionText(q,ee/2,V/2-(G-1)*ae/2+3),B+=ee+5});var Y=D._fullLayout._size,Q=Y.l+Y.w*R.x,re=Y.t+Y.h*(1-R.y),$="left";o.isRightAnchor(R)&&(Q-=B,$="right"),o.isCenterAnchor(R)&&(Q-=B/2,$="center");var J="top";o.isBottomAnchor(R)&&(re-=V,J="bottom"),o.isMiddleAnchor(R)&&(re-=V/2,J="middle"),B=Math.ceil(B),V=Math.ceil(V),Q=Math.round(Q),re=Math.round(re),T.autoMargin(D,L+"-range-selector",{x:R.x,y:R.y,l:B*s[$],r:B*d[$],b:V*d[J],t:V*s[J]}),I.attr("transform",i(Q,re))}(w,P,E,k._name,M)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(_,oe,se){"use strict";var v=_("d3-time"),x=_("../../lib").titleCase;oe.exports=function(T,b){var e=T._name,o={};if("all"===b.step)o[e+".autorange"]=!0;else{var i=function(l,r){var y,h=l.range,s=new Date(l.r2l(h[1])),p=v["utc"+x(r.step)],c=r.count;switch(r.stepmode){case"backward":y=l.l2r(+p.offset(s,-c));break;case"todate":var g=p.offset(s,-c);y=l.l2r(+p.ceil(g))}return[y,h[1]]}(T,b);o[e+".range[0]"]=i[0],o[e+".range[1]"]=i[1]}return o}},{"../../lib":503,"d3-time":122}],437:[function(_,oe,se){"use strict";oe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:_("./attributes")}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),draw:_("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(_,oe,se){"use strict";var v=_("../color/attributes");oe.exports={bgcolor:{valType:"color",dflt:v.background,editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axis_ids").list,x=_("../../plots/cartesian/autorange").getAutoRange,T=_("./constants");oe.exports=function(b){for(var e=v(b,"x",!0),o=0;o<e.length;o++){var i=e[o],l=i[T.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=x(b,i))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(_,oe,se){"use strict";oe.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("../../plots/cartesian/axis_ids"),b=_("./attributes"),e=_("./oppaxis_attributes");oe.exports=function(o,i,l){var r=o[l],y=i[l];if(r.rangeslider||i._requestRangeslider[y._id]){v.isPlainObject(r.rangeslider)||(r.rangeslider={});var h,s,d=r.rangeslider,p=x.newContainer(y,"rangeslider");if(M("visible")){M("bgcolor",i.plot_bgcolor),M("bordercolor"),M("borderwidth"),M("thickness"),M("autorange",!y.isValidRange(d.range)),M("range");var c=i._subplots;if(c)for(var g=c.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===T.name2id(l)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),m=v.simpleMap(g,T.id2name),u=0;u<m.length;u++){var w=m[u];h=d[w]||{},s=x.newContainer(p,w,"yaxis");var f,A=i[w];h.range&&A.isValidRange(h.range)&&(f="fixed"),"match"!==k("rangemode",f)&&k("range",A.range.slice())}p._input=d}}function M(E,P){return v.coerce(d,p,b,E,P)}function k(E,P){return v.coerce(h,s,e,E,P)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../../lib"),e=b.strTranslate,o=_("../drawing"),i=_("../color"),l=_("../titles"),r=_("../../plots/cartesian"),y=_("../../plots/cartesian/axis_ids"),h=_("../dragelement"),s=_("../../lib/setcursor"),d=_("./constants");function p(f,A,M,k){var E=b.ensureSingle(f,"rect",d.bgClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=k.borderwidth%2==0?k.borderwidth:k.borderwidth-1,D=-k._offsetShift,F=o.crispRound(A,k.borderwidth);E.attr({width:k._width+P,height:k._height+P,transform:e(D,D),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":F})}function c(f,A,M,k){b.ensureSingleById(A._fullLayout._topdefs,"clipPath",k._clipId,function(P){P.append("rect").attr({x:0,y:0})}).select("rect").attr({width:k._width,height:k._height})}function g(f,A,M,k){var E,P=A.calcdata,D=f.selectAll("g."+d.rangePlotClassName).data(M._subplotsWith,b.identity);D.enter().append("g").attr("class",function(F){return d.rangePlotClassName+" "+F}).call(o.setClipUrl,k._clipId,A),D.order(),D.exit().remove(),D.each(function(F,R){var L=v.select(this),I=0===R,B=y.getFromId(A,F,"y"),V=B._name,Z=k[V],Y={data:[],layout:{xaxis:{type:M.type,domain:[0,1],range:k.range.slice(),calendar:M.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:A._context};M.rangebreaks&&(Y.layout.xaxis.rangebreaks=M.rangebreaks),Y.layout[V]={type:B.type,domain:[0,1],range:"match"!==Z.rangemode?Z.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(Y.layout[V].rangebreaks=B.rangebreaks),T.supplyDefaults(Y);var Q=Y._fullLayout.xaxis,re=Y._fullLayout[V];Q.clearCalc(),Q.setScale(),re.clearCalc(),re.setScale();var $={id:F,plotgroup:L,xaxis:Q,yaxis:re,isRangePlot:!0};I?E=$:($.mainplot="xy",$.mainplotinfo=E),r.rangePlot(A,$,function(J,ie){for(var j=[],q=0;q<J.length;q++){var W=J[q],ae=W[0].trace;ae.xaxis+ae.yaxis===ie&&j.push(W)}return j}(P,F))})}function m(f,A,M,k,E){b.ensureSingle(f,"rect",d.maskMinClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(i.fill,d.maskColor),b.ensureSingle(f,"rect",d.maskMaxClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(i.fill,d.maskColor),"match"!==E.rangemode&&(b.ensureSingle(f,"rect",d.maskMinOppAxisClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).call(i.fill,d.maskOppAxisColor),b.ensureSingle(f,"rect",d.maskMaxOppAxisClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).style("border-top",d.maskOppBorder).call(i.fill,d.maskOppAxisColor))}function u(f,A,M,k){A._context.staticPlot||b.ensureSingle(f,"rect",d.slideBoxClassName,function(E){E.attr({y:0,cursor:d.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:k._height,fill:d.slideBoxFill})}function w(f,A,M,k){var E=b.ensureSingle(f,"g",d.grabberMinClassName),P=b.ensureSingle(f,"g",d.grabberMaxClassName),D={x:0,width:d.handleWidth,rx:d.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":d.handleStrokeWidth,"shape-rendering":"crispEdges"},F={y:Math.round(k._height/4),height:Math.round(k._height/2)};b.ensureSingle(E,"rect",d.handleMinClassName,function(L){L.attr(D)}).attr(F),b.ensureSingle(P,"rect",d.handleMaxClassName,function(L){L.attr(D)}).attr(F);var R={width:d.grabAreaWidth,x:0,y:0,fill:d.grabAreaFill,cursor:A._context.staticPlot?void 0:d.grabAreaCursor};b.ensureSingle(E,"rect",d.grabAreaMinClassName,function(L){L.attr(R)}).attr("height",k._height),b.ensureSingle(P,"rect",d.grabAreaMaxClassName,function(L){L.attr(R)}).attr("height",k._height)}oe.exports=function(f){for(var A=f._fullLayout,M=A._rangeSliderData,k=0;k<M.length;k++){var E=M[k][d.name];E._clipId=E._id+"-"+A._uid}var P=A._infolayer.selectAll("g."+d.containerClassName).data(M,function(D){return D._name});P.exit().each(function(D){A._topdefs.select("#"+D[d.name]._clipId).remove()}).remove(),0!==M.length&&(P.enter().append("g").classed(d.containerClassName,!0).attr("pointer-events","all"),P.each(function(D){var F=v.select(this),R=D[d.name],L=A[y.id2name(D.anchor)],I=R[y.id2name(D.anchor)];if(R.range){var B,V=b.simpleMap(R.range,D.r2l),Z=b.simpleMap(D.range,D.r2l);B=Z[0]<Z[1]?[Math.min(V[0],Z[0]),Math.max(V[1],Z[1])]:[Math.max(V[0],Z[0]),Math.min(V[1],Z[1])],R.range=R._input.range=b.simpleMap(B,D.l2r)}D.cleanRange("rangeslider.range");var Y=A._size,Q=D.domain;R._width=Y.w*(Q[1]-Q[0]);var re=Math.round(Y.l+Y.w*Q[0]),$=Math.round(Y.t+Y.h*(1-D._counterDomainMin)+("bottom"===D.side?D._depth:0)+R._offsetShift+d.extraPad);F.attr("transform",e(re,$)),R._rl=b.simpleMap(R.range,D.r2l);var J=R._rl[0],ie=R._rl[1],j=ie-J;if(R.p2d=function(de){return de/R._width*j+J},R.d2p=function(de){return(de-J)/j*R._width},D.rangebreaks){var q=D.locateBreaks(J,ie);if(q.length){var W,ae,G=0;for(W=0;W<q.length;W++)G+=(ae=q[W]).max-ae.min;var ee=R._width/(ie-J-G),te=[-ee*J];for(W=0;W<q.length;W++)te.push(te[te.length-1]-ee*((ae=q[W]).max-ae.min));for(R.d2p=function(de){for(var he=te[0],be=0;be<q.length;be++){var me=q[be];if(de>=me.max)he=te[be+1];else if(de<me.min)break}return he+ee*de},W=0;W<q.length;W++)(ae=q[W]).pmin=R.d2p(ae.min),ae.pmax=R.d2p(ae.max);R.p2d=function(de){for(var he=te[0],be=0;be<q.length;be++){var me=q[be];if(de>=me.pmax)he=te[be+1];else if(de<me.pmin)break}return(de-he)/ee}}}if("match"!==I.rangemode){var le=L.r2l(I.range[0]),ue=L.r2l(I.range[1])-le;R.d2pOppAxis=function(de){return(de-le)/ue*R._height}}F.call(p,f,D,R).call(c,f,D,R).call(g,f,D,R).call(m,f,D,R,I).call(u,f,D,R).call(w,f,D,R),function(de,he,be,me){if(!he._context.staticPlot){var _e=de.select("rect."+d.slideBoxClassName).node(),Ee=de.select("rect."+d.grabAreaMinClassName).node(),De=de.select("rect."+d.grabAreaMaxClassName).node();de.on("mousedown",Se),de.on("touchstart",Se)}function Se(){var Fe=v.event,ve=Fe.target,Te=Fe.clientX||Fe.touches[0].clientX,Ie=Te-de.node().getBoundingClientRect().left,Ce=me.d2p(be._rl[0]),Re=me.d2p(be._rl[1]),Ue=h.coverSlip();function qe(st){var He,$e,et,tt=+(st.clientX||st.touches[0].clientX)-Te;switch(ve){case _e:et="ew-resize",He=Ce+tt,$e=Re+tt;break;case Ee:et="col-resize",He=Ce+tt,$e=Re;break;case De:et="col-resize",He=Ce,$e=Re+tt;break;default:et="ew-resize",He=Ie,$e=Ie+tt}if($e<He){var ct=$e;$e=He,He=ct}me._pixelMin=He,me._pixelMax=$e,s(v.select(Ue),et),function(bt,At,Ut,Ct){function dt(rn){return Ut.l2r(b.constrain(rn,Ct._rl[0],Ct._rl[1]))}var at=dt(Ct.p2d(Ct._pixelMin)),Nt=dt(Ct.p2d(Ct._pixelMax));window.requestAnimationFrame(function(){x.call("_guiRelayout",At,Ut._name+".range",[at,Nt])})}(0,he,be,me)}function Xe(){Ue.removeEventListener("mousemove",qe),Ue.removeEventListener("mouseup",Xe),this.removeEventListener("touchmove",qe),this.removeEventListener("touchend",Xe),b.removeElement(Ue)}this.addEventListener("touchmove",qe),this.addEventListener("touchend",Xe),Ue.addEventListener("mousemove",qe),Ue.addEventListener("mouseup",Xe)}}(F,f,D,R),function(de,he,be,me,_e,Ee){var De=d.handleWidth/2;function Se(Xe){return b.constrain(Xe,0,me._width)}function Fe(Xe){return b.constrain(Xe,0,me._height)}function ve(Xe){return b.constrain(Xe,-De,me._width+De)}var Te=Se(me.d2p(be._rl[0])),Ie=Se(me.d2p(be._rl[1]));if(de.select("rect."+d.slideBoxClassName).attr("x",Te).attr("width",Ie-Te),de.select("rect."+d.maskMinClassName).attr("width",Te),de.select("rect."+d.maskMaxClassName).attr("x",Ie).attr("width",me._width-Ie),"match"!==Ee.rangemode){var Ce=me._height-Fe(me.d2pOppAxis(_e._rl[1])),Re=me._height-Fe(me.d2pOppAxis(_e._rl[0]));de.select("rect."+d.maskMinOppAxisClassName).attr("x",Te).attr("height",Ce).attr("width",Ie-Te),de.select("rect."+d.maskMaxOppAxisClassName).attr("x",Te).attr("y",Re).attr("height",me._height-Re).attr("width",Ie-Te),de.select("rect."+d.slideBoxClassName).attr("y",Ce).attr("height",Re-Ce)}var Ue=Math.round(ve(Te-De))-.5,qe=Math.round(ve(Ie-De))+.5;de.select("g."+d.grabberMinClassName).attr("transform",e(Ue,.5)),de.select("g."+d.grabberMaxClassName).attr("transform",e(qe,.5))}(F,0,D,R,L,I),"bottom"===D.side&&l.draw(f,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:A._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:$+R._height+R._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axis_ids"),x=_("../../lib/svg_text_utils"),T=_("./constants"),b=_("../../constants/alignment").LINE_SPACING,e=T.name;function o(i){var l=i&&i[e];return l&&l.visible}se.isVisible=o,se.makeData=function(i){var l=v.list({_fullLayout:i},"x",!0),r=i.margin,y=[];if(!i._has("gl2d"))for(var h=0;h<l.length;h++){var s=l[h];if(o(s)){y.push(s);var d=s[e];d._id=e+s._id,d._height=(i.height-r.b-r.t)*d.thickness,d._offsetShift=Math.floor(d.borderwidth/2)}}i._rangeSliderData=y},se.autoMarginOpts=function(i,l){var r=i._fullLayout,y=l[e],h=l._id.charAt(0),s=0,d=0;return"bottom"===l.side&&(s=l._depth,l.title.text!==r._dfltTitle[h]&&(d=1.5*l.title.font.size+10+y._offsetShift,d+=(l.title.text.match(x.BR_TAG_ALL)||[]).length*l.title.font.size*b)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:y._height+s+Math.max(r.margin.b,d),pad:T.extraPad+2*y._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("./oppaxis_attributes"),b=_("./helpers");oe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:v.extendFlat({},x,{yaxis:T})}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),calcAutorange:_("./calc_autorange"),draw:_("./draw"),isVisible:b.isVisible,makeData:b.makeData,autoMarginOpts:b.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(_,oe,se){"use strict";oe.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(_,oe,se){"use strict";var v=_("../annotations/attributes"),x=_("../../traces/scatter/attributes").line,T=_("../drawing/attributes").dash,b=_("../../lib/extend").extendFlat,e=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),oe.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},v.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},v.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},x.color,{editType:"arraydraw"}),width:b({},x.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("./constants"),b=_("./helpers");function e(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function o(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,y,h,s,d,p){var c=r/2,g=p;if("pixel"===y){var m=d?b.extractPathCoords(d,p?T.paramIsY:T.paramIsX):[h,s],u=v.aggNums(Math.max,null,m),w=v.aggNums(Math.min,null,m),f=w<0?Math.abs(w)+c:c,A=u>0?u+c:c;return{ppad:c,ppadplus:g?f:A,ppadminus:g?A:f}}return{ppad:c}}function l(r,y,h,s,d){var p="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==y)return[p(y),p(h)];if(s){var c,g,m,u,w=1/0,f=-1/0,A=s.match(T.segmentRE);for("date"===r.type&&(p=b.decodeDate(p)),c=0;c<A.length;c++)void 0!==(g=d[A[c].charAt(0)].drawn)&&(!(m=A[c].substr(1).match(T.paramRE))||m.length<g||((u=p(m[g]))<w&&(w=u),u>f&&(f=u)));return f>=w?[w,f]:void 0}}oe.exports=function(r){var h=v.filterVisible(r._fullLayout.shapes);if(h.length&&r._fullData.length)for(var s=0;s<h.length;s++){var d,p,c=h[s];c._extremes={};var g=x.getRefType(c.xref),m=x.getRefType(c.yref);if("paper"!==c.xref&&"domain"!==g){var u="pixel"===c.xsizemode?c.xanchor:c.x0,w="pixel"===c.xsizemode?c.xanchor:c.x1;(p=l(d=x.getFromId(r,c.xref),u,w,c.path,T.paramIsX))&&(c._extremes[d._id]=x.findExtremes(d,p,e(c)))}if("paper"!==c.yref&&"domain"!==m){var f="pixel"===c.ysizemode?c.yanchor:c.y0,A="pixel"===c.ysizemode?c.yanchor:c.y1;(p=l(d=x.getFromId(r,c.yref),f,A,c.path,T.paramIsY))&&(c._extremes[d._id]=x.findExtremes(d,p,o(c)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(_,oe,se){"use strict";oe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./attributes"),e=_("./helpers");function o(i,l,r){function y(I,B){return v.coerce(i,l,b,I,B)}if(y("visible")){var h=y("path"),s=y("type",h?"path":"rect");"path"!==l.type&&delete l.path,y("editable"),y("layer"),y("opacity"),y("fillcolor"),y("fillrule"),y("line.width")&&(y("line.color"),y("line.dash"));for(var d=y("xsizemode"),p=y("ysizemode"),c=["x","y"],g=0;g<2;g++){var m,u,w,f=c[g],A=f+"anchor",M="x"===f?d:p,k={_fullLayout:r},E=x.coerceRef(i,l,k,f,void 0,"paper");if("range"===x.getRefType(E)?((m=x.getFromId(k,E))._shapeIndices.push(l._index),w=e.rangeToShapePosition(m),u=e.shapePositionToRange(m)):u=w=v.identity,"path"!==s){var P=f+"0",D=f+"1",F=i[P],R=i[D];i[P]=u(i[P],!0),i[D]=u(i[D],!0),"pixel"===M?(y(P,0),y(D,10)):(x.coercePosition(l,k,y,E,P,.25),x.coercePosition(l,k,y,E,D,.75)),l[P]=w(l[P]),l[D]=w(l[D]),i[P]=F,i[D]=R}if("pixel"===M){var L=i[A];i[A]=u(i[A],!0),x.coercePosition(l,k,y,E,A,.25),l[A]=w(l[A]),i[A]=L}}"path"===s?y("path"):v.noneOrAll(i,l,["x0","x1","y0","y1"])}}oe.exports=function(i,l){T(i,l,{name:"shapes",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("./draw_newshape/helpers").readPaths,e=_("./draw_newshape/display_outlines"),o=_("../../plots/cartesian/handle_outline").clearOutlineControllers,i=_("../color"),l=_("../drawing"),r=_("../../plot_api/plot_template").arrayEditor,y=_("../dragelement"),h=_("../../lib/setcursor"),s=_("./constants"),d=_("./helpers");function p(M){var k=M._fullLayout;for(var E in k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove(),k._plots){var P=k._plots[E].shapelayer;P&&P.selectAll("path").remove()}for(var D=0;D<k.shapes.length;D++)k.shapes[D].visible&&m(M,D)}function c(M){return!!M._fullLayout._drawing}function g(M){return!M._context.edits.shapePosition}function m(M,k){M._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var E=d.makeOptionsAndPlotinfo(M,k),P=E.options,D=E.plotinfo;P._input&&!1!==P.visible&&function F(R){var L=w(M,P),I={"data-index":k,"fill-rule":P.fillrule,d:L},B=P.opacity,V=P.fillcolor,Z=P.line.width?P.line.color:"rgba(0,0,0,0)",Y=P.line.width,Q=P.line.dash;Y||!0!==P.editable||(Y=5,Q="solid");var re="Z"!==L[L.length-1],$=g(M)&&P.editable&&M._fullLayout._activeShapeIndex===k;$&&(V=re?"rgba(0,0,0,0)":M._fullLayout.activeshape.fillcolor,B=M._fullLayout.activeshape.opacity);var J,ie=R.append("path").attr(I).style("opacity",B).call(i.stroke,Z).call(i.fill,V).call(l.dashLine,Q,Y);if(u(ie,M,P),($||M._context.edits.shapePosition)&&(J=r(M.layout,"shapes",P)),$){ie.style({cursor:"move"});var j={element:ie.node(),plotinfo:D,gd:M,editHelpers:J,isActiveShape:!0},q=b(L,M);e(q,ie,j)}else M._context.edits.shapePosition?function(W,ae,G,ee,te,le){var ue,de,he,be,me,_e,Ee,De,Se,Fe,ve,Te,Ie,Ce,Re,Ue,qe="pixel"===G.xsizemode,Xe="pixel"===G.ysizemode,st="line"===G.type,He="path"===G.type,$e=le.modifyItem,et=T.getFromId(W,G.xref),tt=T.getRefType(G.xref),ct=T.getFromId(W,G.yref),bt=T.getRefType(G.yref),At=d.getDataToPixel(W,et,!1,tt),Ut=d.getDataToPixel(W,ct,!0,bt),Ct=d.getPixelToData(W,et,!1,tt),dt=d.getPixelToData(W,ct,!0,bt),at=st?function(){var gt=Math.max(G.line.width,10),Be=te.append("g").attr("data-index",ee);Be.append("path").attr("d",ae.attr("d")).style({cursor:"move","stroke-width":gt,"stroke-opacity":"0"});var Ve={"fill-opacity":"0"},Le=Math.max(gt/2,10);return Be.append("circle").attr({"data-line-point":"start-point",cx:qe?At(G.xanchor)+G.x0:At(G.x0),cy:Xe?Ut(G.yanchor)-G.y0:Ut(G.y0),r:Le}).style(Ve).classed("cursor-grab",!0),Be.append("circle").attr({"data-line-point":"end-point",cx:qe?At(G.xanchor)+G.x1:At(G.x1),cy:Xe?Ut(G.yanchor)-G.y1:Ut(G.y1),r:Le}).style(Ve).classed("cursor-grab",!0),Be}():ae,Nt={element:at.node(),gd:W,prepFn:function(gt){var Be,Ve,Le,je,Ke,ft,mt,pt;c(W)||(qe&&(me=At(G.xanchor)),Xe&&(_e=Ut(G.yanchor)),"path"===G.type?Re=G.path:(ue=qe?G.x0:At(G.x0),de=Xe?G.y0:Ut(G.y0),he=qe?G.x1:At(G.x1),be=Xe?G.y1:Ut(G.y1)),ue<he?(Se=ue,Ie="x0",Fe=he,Ce="x1"):(Se=he,Ie="x1",Fe=ue,Ce="x0"),!Xe&&de<be||Xe&&de>be?(Ee=de,ve="y0",De=be,Te="y1"):(Ee=be,ve="y1",De=de,Te="y0"),rn(gt),Qe(te,G),Be=ae,Ke=(Ve=G).yref,ft=T.getFromId(Le=W,je=Ve.xref),mt=T.getFromId(Le,Ke),pt="","paper"===je||ft.autorange||(pt+=je),"paper"===Ke||mt.autorange||(pt+=Ke),l.setClipUrl(Be,pt?"clip"+Le._fullLayout._uid+pt:null,Le),Nt.moveFn="move"===Ue?en:Ge,Nt.altKey=gt.altKey)},doneFn:function(){c(W)||(h(ae),Rt(te),u(ae,W,G),v.call("_guiRelayout",W,le.getUpdateObj()))},clickFn:function(){c(W)||Rt(te)}};function rn(gt){if(c(W))Ue=null;else if(st)Ue="path"===gt.target.tagName?"move":"start-point"===gt.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Be=Nt.element.getBoundingClientRect(),Ve=Be.right-Be.left,Le=Be.bottom-Be.top,ft=!He&&Ve>10&&Le>10&&!gt.shiftKey?y.getCursor((gt.clientX-Be.left)/Ve,1-(gt.clientY-Be.top)/Le):"move";h(ae,ft),Ue=ft.split("-")[0]}}function en(gt,Be){if("path"===G.type){var Ve=function(Ke){return Ke},Le=Ve,je=Ve;qe?$e("xanchor",G.xanchor=Ct(me+gt)):(Le=function(Ke){return Ct(At(Ke)+gt)},et&&"date"===et.type&&(Le=d.encodeDate(Le))),Xe?$e("yanchor",G.yanchor=dt(_e+Be)):(je=function(Ke){return dt(Ut(Ke)+Be)},ct&&"date"===ct.type&&(je=d.encodeDate(je))),$e("path",G.path=f(Re,Le,je))}else qe?$e("xanchor",G.xanchor=Ct(me+gt)):($e("x0",G.x0=Ct(ue+gt)),$e("x1",G.x1=Ct(he+gt))),Xe?$e("yanchor",G.yanchor=dt(_e+Be)):($e("y0",G.y0=dt(de+Be)),$e("y1",G.y1=dt(be+Be)));ae.attr("d",w(W,G)),Qe(te,G)}function Ge(gt,Be){if(He){var Ve=function(Ne){return Ne},Le=Ve,je=Ve;qe?$e("xanchor",G.xanchor=Ct(me+gt)):(Le=function(Ne){return Ct(At(Ne)+gt)},et&&"date"===et.type&&(Le=d.encodeDate(Le))),Xe?$e("yanchor",G.yanchor=dt(_e+Be)):(je=function(Ne){return dt(Ut(Ne)+Be)},ct&&"date"===ct.type&&(je=d.encodeDate(je))),$e("path",G.path=f(Re,Le,je))}else if(st){if("resize-over-start-point"===Ue){var Ke=ue+gt,ft=Xe?de-Be:de+Be;$e("x0",G.x0=qe?Ke:Ct(Ke)),$e("y0",G.y0=Xe?ft:dt(ft))}else if("resize-over-end-point"===Ue){var mt=he+gt,pt=Xe?be-Be:be+Be;$e("x1",G.x1=qe?mt:Ct(mt)),$e("y1",G.y1=Xe?pt:dt(pt))}}else{var Ot=function(Ne){return-1!==Ue.indexOf(Ne)},Pt=Ot("n"),Jt=Ot("s"),$t=Ot("w"),ut=Ot("e"),Dt=Pt?Ee+Be:Ee,Wt=Jt?De+Be:De,zt=$t?Se+gt:Se,Ht=ut?Fe+gt:Fe;Xe&&(Pt&&(Dt=Ee-Be),Jt&&(Wt=De-Be)),(!Xe&&Wt-Dt>10||Xe&&Dt-Wt>10)&&($e(ve,G[ve]=Xe?Dt:dt(Dt)),$e(Te,G[Te]=Xe?Wt:dt(Wt))),Ht-zt>10&&($e(Ie,G[Ie]=qe?zt:Ct(zt)),$e(Ce,G[Ce]=qe?Ht:Ct(Ht)))}ae.attr("d",w(W,G)),Qe(te,G)}function Qe(gt,Be){(qe||Xe)&&function(){var Ve="path"!==Be.type,Le=gt.selectAll(".visual-cue").data([0]);Le.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var je=At(qe?Be.xanchor:x.midRange(Ve?[Be.x0,Be.x1]:d.extractPathCoords(Be.path,s.paramIsX))),Ke=Ut(Xe?Be.yanchor:x.midRange(Ve?[Be.y0,Be.y1]:d.extractPathCoords(Be.path,s.paramIsY)));je=d.roundPositionForSharpStrokeRendering(je,1),Ke=d.roundPositionForSharpStrokeRendering(Ke,1),Le.attr("d",qe&&Xe?"M"+(je-1-1)+","+(Ke-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":qe?"M"+(je-1-1)+","+(Ke-9-1)+"v18 h2 v-18 Z":"M"+(je-9-1)+","+(Ke-1-1)+"h18 v2 h-18 Z")}()}function Rt(gt){gt.selectAll(".visual-cue").remove()}y.init(Nt),at.node().onmousemove=rn}(M,ie,P,k,R,J):!0===P.editable&&ie.style("pointer-events",re||i.opacity(V)*B<=.5?"stroke":"all");ie.node().addEventListener("click",function(){return function(W,ae){if(g(W)){var G=+ae.node().getAttribute("data-index");if(G>=0){if(G===W._fullLayout._activeShapeIndex)return void A(W);W._fullLayout._activeShapeIndex=G,W._fullLayout._deactivateShape=A,p(W)}}}(M,ie)})}("below"!==P.layer?M._fullLayout._shapeUpperLayer:"paper"===P.xref||"paper"===P.yref?M._fullLayout._shapeLowerLayer:D._hadPlotinfo?(D.mainplotinfo||D).shapelayer:M._fullLayout._shapeLowerLayer)}function u(M,k,E){var P=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(M,P?"clip"+k._fullLayout._uid+P:null,k)}function w(M,k){var E,P,D,F,R,L,I,B,te,le,ue,he,be,me,_e,V=k.type,Z=T.getRefType(k.xref),Y=T.getRefType(k.yref),Q=T.getFromId(M,k.xref),re=T.getFromId(M,k.yref),$=M._fullLayout._size;if(Q?"domain"===Z?P=function(te){return Q._offset+Q._length*te}:(E=d.shapePositionToRange(Q),P=function(te){return Q._offset+Q.r2p(E(te,!0))}):P=function(te){return $.l+$.w*te},re?"domain"===Y?F=function(te){return re._offset+re._length*(1-te)}:(D=d.shapePositionToRange(re),F=function(te){return re._offset+re.r2p(D(te,!0))}):F=function(te){return $.t+$.h*(1-te)},"path"===V)return Q&&"date"===Q.type&&(P=d.decodeDate(P)),re&&"date"===re.type&&(F=d.decodeDate(F)),le=P,ue=F,he=(te=k).xsizemode,be=te.ysizemode,me=te.xanchor,_e=te.yanchor,te.path.replace(s.segmentRE,function(Ee){var De=0,Se=Ee.charAt(0),Fe=s.paramIsX[Se],ve=s.paramIsY[Se],Te=s.numParams[Se],Ie=Ee.substr(1).replace(s.paramRE,function(Ce){return Fe[De]?Ce="pixel"===he?le(me)+Number(Ce):le(Ce):ve[De]&&(Ce="pixel"===be?ue(_e)-Number(Ce):ue(Ce)),++De>Te&&(Ce="X"),Ce});return De>Te&&(Ie=Ie.replace(/[\s,]*X.*/,""),x.log("Ignoring extra params in segment "+Ee)),Se+Ie});if("pixel"===k.xsizemode){var J=P(k.xanchor);R=J+k.x0,L=J+k.x1}else R=P(k.x0),L=P(k.x1);if("pixel"===k.ysizemode){var ie=F(k.yanchor);I=ie-k.y0,B=ie-k.y1}else I=F(k.y0),B=F(k.y1);if("line"===V)return"M"+R+","+I+"L"+L+","+B;if("rect"===V)return"M"+R+","+I+"H"+L+"V"+B+"H"+R+"Z";var j=(R+L)/2,q=(I+B)/2,W=Math.abs(j-R),ae=Math.abs(q-I),G="A"+W+","+ae,ee=j+W+","+q;return"M"+ee+G+" 0 1,1 "+j+","+(q-ae)+G+" 0 0,1 "+ee+"Z"}function f(M,k,E){return M.replace(s.segmentRE,function(P){var D=0,F=P.charAt(0),R=s.paramIsX[F],L=s.paramIsY[F],I=s.numParams[F];return F+P.substr(1).replace(s.paramRE,function(B){return D>=I||(R[D]?B=k(B):L[D]&&(B=E(B)),D++),B})})}function A(M){g(M)&&M._fullLayout._activeShapeIndex>=0&&(o(M),delete M._fullLayout._activeShapeIndex,p(M))}oe.exports={draw:p,drawOne:m,eraseActiveShape:function(M){if(g(M)){o(M);var k=M._fullLayout._activeShapeIndex,E=(M.layout||{}).shapes||[];if(k<E.length){for(var P=[],D=0;D<E.length;D++)D!==k&&P.push(E[D]);delete M._fullLayout._activeShapeIndex,v.call("_guiRelayout",M,{shapes:P})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(_,oe,se){"use strict";var v=_("../../drawing/attributes").dash,x=_("../../../lib/extend").extendFlat;oe.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:x({},v,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(_,oe,se){"use strict";oe.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(_,oe,se){"use strict";var v=_("../../color");oe.exports=function(x,T,b){b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")&&(b("newshape.line.color",v.contrast((x||{}).plot_bgcolor||"#FFF")),b("newshape.line.dash")),b("activeshape.fillcolor"),b("activeshape.opacity")}},{"../../color":366}],454:[function(_,oe,se){"use strict";var v=_("../../dragelement"),x=_("../../dragelement/helpers").drawMode,T=_("../../../registry"),b=_("./constants"),e=b.i000,o=b.i090,i=b.i180,l=b.i270,r=_("../../../plots/cartesian/handle_outline").clearOutlineControllers,y=_("./helpers"),h=y.pointsShapeRectangle,s=y.pointsShapeEllipse,d=y.writePaths,p=_("./newshapes");oe.exports=function c(g,m,u,w){w||(w=0);var f=u.gd;function A(){c(g,m,u,w++),s(g[0])&&M({redrawing:!0})}function M(J){u.isActiveShape=!1;var ie=p(m,u);Object.keys(ie).length&&T.call((J||{}).redrawing?"relayout":"_guiRelayout",f,ie)}var k,E,P,D,F,R=u.isActiveShape,L=f._fullLayout._zoomlayer;function B(J){P=+J.srcElement.getAttribute("data-i"),D=+J.srcElement.getAttribute("data-j"),k[P][D].moveFn=V}function V(J,ie){if(g.length){var j=F[P][D][1],q=F[P][D][2],W=g[P],ae=W.length;if(h(W)){for(var G=0;G<ae;G++)if(G!==D){var ee=W[G];ee[1]===W[D][1]&&(ee[1]=j+J),ee[2]===W[D][2]&&(ee[2]=q+ie)}if(W[D][1]=j+J,W[D][2]=q+ie,!h(W))for(var te=0;te<ae;te++)for(var le=0;le<W[te].length;le++)W[te][le]=F[P][te][le]}else W[D][1]=j+J,W[D][2]=q+ie;A()}}function Z(){M()}function Y(J,ie){if(2===J){P=+ie.srcElement.getAttribute("data-i"),D=+ie.srcElement.getAttribute("data-j");var j=g[P];h(j)||s(j)||function(){if(g.length&&g[P]&&g[P].length){for(var q=[],W=0;W<g[P].length;W++)W!==D&&q.push(g[P][W]);q.length>1&&(2!==q.length||"Z"!==q[1][0])&&(0===D&&(q[0][0]="M"),g[P]=q,A(),M())}}()}}function Q(J,ie){(function(j,q){if(g.length)for(var W=0;W<g.length;W++)for(var ae=0;ae<g[W].length;ae++)for(var G=0;G+2<g[W][ae].length;G+=2)g[W][ae][G+1]=F[W][ae][G+1]+j,g[W][ae][G+2]=F[W][ae][G+2]+q})(J,ie),A()}x(u.dragmode)?f._fullLayout._drawing=!0:f._fullLayout._activeShapeIndex>=0&&r(f),m.attr("d",d(g)),R&&!w&&(F=function(J,ie){for(var j=0;j<ie.length;j++){var q=ie[j];J[j]=[];for(var W=0;W<q.length;W++){J[j][W]=[];for(var ae=0;ae<q[W].length;ae++)J[j][W][ae]=q[W][ae]}}return J}([],g),function(J){k=[];for(var ie=0;ie<g.length;ie++){var j=g[ie],q=!h(j)&&s(j);k[ie]=[];for(var W=0;W<j.length;W++)if("Z"!==j[W][0]&&(!q||W===e||W===o||W===i||W===l)){var ae=j[W][1],G=j[W][2],ee=J.append("circle").classed("cursor-grab",!0).attr("data-i",ie).attr("data-j",W).attr("cx",ae).attr("cy",G).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});k[ie][W]={element:ee.node(),gd:f,prepFn:B,doneFn:Z,clickFn:Y},v.init(k[ie][W])}}}(L.append("g").attr("class","outline-controllers")),E=[],g.length&&(E[0]={element:m[0][0],gd:f,prepFn:function re(J){(P=+J.srcElement.getAttribute("data-i"))||(P=0),E[P].moveFn=Q},doneFn:function $(){M()}},v.init(E[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(_,oe,se){"use strict";var v=_("parse-svg-path"),x=_("./constants"),T=x.CIRCLE_SIDES,b=x.SQRT2,e=_("../../../plots/cartesian/helpers"),o=e.p2r,i=e.r2p,l=[0,3,4,5,6,1,2],r=[0,3,4,1,2];function y(s,d){return Math.abs(s-d)<=1e-6}function h(s,d){var p=d[1]-s[1],c=d[2]-s[2];return Math.sqrt(p*p+c*c)}se.writePaths=function(s){var d=s.length;if(!d)return"M0,0Z";for(var p="",c=0;c<d;c++)for(var g=s[c].length,m=0;m<g;m++){var u=s[c][m][0];if("Z"===u)p+="Z";else for(var w=s[c][m].length,f=0;f<w;f++){var A=f;"Q"===u||"S"===u?A=r[f]:"C"===u&&(A=l[f]),p+=s[c][m][A],f>0&&f<w-1&&(p+=",")}}return p},se.readPaths=function(s,d,p,c){var g,m,u,w=v(s),f=[],A=-1,M=0,k=0,E=function(){m=M,u=k};E();for(var P=0;P<w.length;P++){var I=[],B=w[P][0],V=B;switch(B){case"M":f[++A]=[],I.push([V,M=+w[P][1],k=+w[P][2]]),E();break;case"Q":case"S":I.push([V,M=+w[P][3],k=+w[P][4],+w[P][1],+w[P][2]]);break;case"C":I.push([V,M=+w[P][5],k=+w[P][6],+w[P][1],+w[P][2],+w[P][3],+w[P][4]]);break;case"T":case"L":I.push([V,M=+w[P][1],k=+w[P][2]]);break;case"H":I.push([V="L",M=+w[P][1],k]);break;case"V":I.push([V="L",M,k=+w[P][1]]);break;case"A":V="L";var Z=+w[P][1],Y=+w[P][2];+w[P][4]||(Z=-Z,Y=-Y);var Q=M-Z,re=k;for(g=1;g<=T/2;g++){var $=2*Math.PI*g/T;I.push([V,Q+Z*Math.cos($),re+Y*Math.sin($)])}break;case"Z":M===m&&k===u||I.push([V,M=m,k=u])}for(var J=(p||{}).domain,ie=d._fullLayout._size,j=p&&"pixel"===p.xsizemode,q=p&&"pixel"===p.ysizemode,W=!1===c,ae=0;ae<I.length;ae++){for(g=0;g+2<7;g+=2){var G=I[ae][g+1],ee=I[ae][g+2];void 0!==G&&void 0!==ee&&(M=G,k=ee,p&&(p.xaxis&&p.xaxis.p2r?(W&&(G-=p.xaxis._offset),G=j?i(p.xaxis,p.xanchor)+G:o(p.xaxis,G)):(W&&(G-=ie.l),J?G=J.x[0]+G/ie.w:G/=ie.w),p.yaxis&&p.yaxis.p2r?(W&&(ee-=p.yaxis._offset),ee=q?i(p.yaxis,p.yanchor)-ee:o(p.yaxis,ee)):(W&&(ee-=ie.t),ee=J?J.y[1]-ee/ie.h:1-ee/ie.h)),I[ae][g+1]=G,I[ae][g+2]=ee)}f[A].push(I[ae].slice())}}return f},se.pointsShapeRectangle=function(s){if(5!==s.length)return!1;for(var d=1;d<3;d++)if(!y(s[0][d]-s[1][d],s[3][d]-s[2][d])||!y(s[0][d]-s[3][d],s[1][d]-s[2][d]))return!1;return!(!y(s[0][1],s[1][1])&&!y(s[0][1],s[3][1])||!(h(s[0],s[1])*h(s[0],s[3])))},se.pointsShapeEllipse=function(s){var d=s.length;if(d!==T+1)return!1;d=T;for(var p=0;p<d;p++){var c=(2*d-p)%d,g=(d/2+c)%d;if(!y(h(s[p],s[(d/2+p)%d]),h(s[c],s[g])))return!1}return!0},se.handleEllipse=function(s,d,p){if(!s)return[d,p];var c=se.ellipseOver({x0:d[0],y0:d[1],x1:p[0],y1:p[1]}),g=(c.x1+c.x0)/2,m=(c.y1+c.y0)/2,u=(c.x1-c.x0)/2,w=(c.y1-c.y0)/2;u||(u=w/=b),w||(w=u/=b);for(var f=[],A=0;A<T;A++){var M=2*A*Math.PI/T;f.push([g+u*Math.cos(M),m+w*Math.sin(M)])}return f},se.ellipseOver=function(s){var d=s.x0,p=s.y0,c=s.x1,g=s.y1,m=c-d,u=g-p,w=((d-=m)+c)/2,f=((p-=u)+g)/2;return{x0:w-(m*=b),y0:f-(u*=b),x1:w+m,y1:f+u}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(_,oe,se){"use strict";var v=_("../../dragelement/helpers"),x=v.drawMode,T=v.openMode,b=_("./constants"),e=b.i000,o=b.i090,i=b.i180,l=b.i270,r=b.cos45,y=b.sin45,h=_("../../../plots/cartesian/helpers"),s=h.p2r,d=h.r2p,p=_("../../../plots/cartesian/handle_outline").clearSelect,c=_("./helpers"),g=c.readPaths,m=c.writePaths,u=c.ellipseOver;oe.exports=function(w,f){if(w.length){var A=w[0][0];if(A){var M=A.getAttribute("d"),k=f.gd,E=k._fullLayout.newshape,P=f.plotinfo,D=P.xaxis,F=P.yaxis,R=!!P.domain||!P.xaxis,L=!!P.domain||!P.yaxis,I=f.isActiveShape,B=f.dragmode,V=(k.layout||{}).shapes||[];if(!x(B)&&void 0!==I){var Z=k._fullLayout._activeShapeIndex;if(Z<V.length)switch(k._fullLayout.shapes[Z].type){case"rect":B="drawrect";break;case"circle":B="drawcircle";break;case"line":B="drawline";break;case"path":var Y=V[Z].path||"";B="Z"===Y[Y.length-1]?"drawclosedpath":"drawopenpath"}}var Q,re=T(B),$=g(M,k,P,I),J={editable:!0,xref:R?"paper":D._id,yref:L?"paper":F._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};if(re||(J.fillcolor=E.fillcolor,J.fillrule=E.fillrule),1===$.length&&(Q=$[0]),Q&&"drawrect"===B)J.type="rect",J.x0=Q[0][1],J.y0=Q[0][2],J.x1=Q[2][1],J.y1=Q[2][2];else if(Q&&"drawline"===B)J.type="line",J.x0=Q[0][1],J.y0=Q[0][2],J.x1=Q[1][1],J.y1=Q[1][2];else if(Q&&"drawcircle"===B){J.type="circle";var ie=Q[e][1],j=Q[o][1],q=Q[i][1],W=Q[l][1],ae=Q[e][2],G=Q[o][2],ee=Q[i][2],te=Q[l][2],le=P.xaxis&&("date"===P.xaxis.type||"log"===P.xaxis.type),ue=P.yaxis&&("date"===P.yaxis.type||"log"===P.yaxis.type);le&&(ie=d(P.xaxis,ie),j=d(P.xaxis,j),q=d(P.xaxis,q),W=d(P.xaxis,W)),ue&&(ae=d(P.yaxis,ae),G=d(P.yaxis,G),ee=d(P.yaxis,ee),te=d(P.yaxis,te));var de=(j+W)/2,he=(ae+ee)/2,be=u({x0:de,y0:he,x1:de+(W-j+q-ie)/2*r,y1:he+(te-G+ee-ae)/2*y});le&&(be.x0=s(P.xaxis,be.x0),be.x1=s(P.xaxis,be.x1)),ue&&(be.y0=s(P.yaxis,be.y0),be.y1=s(P.yaxis,be.y1)),J.x0=be.x0,J.y0=be.y0,J.x1=be.x1,J.y1=be.y1}else J.type="path",D&&F&&function(ve,Te,Ie){var Ce="date"===Te.type,Re="date"===Ie.type;if(!Ce&&!Re)return ve;for(var Ue=0;Ue<ve.length;Ue++)for(var qe=0;qe<ve[Ue].length;qe++)for(var Xe=0;Xe+2<ve[Ue][qe].length;Xe+=2)Ce&&(ve[Ue][qe][Xe+1]=ve[Ue][qe][Xe+1].replace(" ","_")),Re&&(ve[Ue][qe][Xe+2]=ve[Ue][qe][Xe+2].replace(" ","_"))}($,D,F),J.path=m($),Q=null;p(k);for(var me=f.editHelpers,_e=(me||{}).modifyItem,Ee=[],De=0;De<V.length;De++){var Se=k._fullLayout.shapes[De];if(Ee[De]=Se._input,void 0!==I&&De===k._fullLayout._activeShapeIndex){var Fe=J;switch(Se.type){case"line":case"rect":case"circle":_e("x0",Fe.x0),_e("x1",Fe.x1),_e("y0",Fe.y0),_e("y1",Fe.y1);break;case"path":_e("path",Fe.path)}}}return void 0===I?(Ee.push(J),Ee):me?me.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(_,oe,se){"use strict";var v=_("./constants"),x=_("../../lib");se.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(b){return b}},se.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(b){return b}},se.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},se.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},se.extractPathCoords=function(T,b){var e=[];return T.match(v.segmentRE).forEach(function(o){var i=b[o.charAt(0)].drawn;if(void 0!==i){var l=o.substr(1).match(v.paramRE);!l||l.length<i||e.push(x.cleanNumber(l[i]))}}),e},se.getDataToPixel=function(T,b,e,o){var i,l=T._fullLayout._size;if(b)if("domain"===o)i=function(y){return b._length*(e?1-y:y)+b._offset};else{var r=se.shapePositionToRange(b);i=function(y){return b._offset+b.r2p(r(y,!0))},"date"===b.type&&(i=se.decodeDate(i))}else i=e?function(y){return l.t+l.h*(1-y)}:function(y){return l.l+l.w*y};return i},se.getPixelToData=function(T,b,e,o){var i,l=T._fullLayout._size;if(b)if("domain"===o)i=function(y){var h=(y-b._offset)/b._length;return e?1-h:h};else{var r=se.rangeToShapePosition(b);i=function(y){return r(b.p2r(y-b._offset))}}else i=e?function(y){return 1-(y-l.t)/l.h}:function(y){return(y-l.l)/l.w};return i},se.roundPositionForSharpStrokeRendering=function(T,b){var e=1===Math.round(b%2),o=Math.round(T);return e?o+.5:o},se.makeOptionsAndPlotinfo=function(T,b){var e=T._fullLayout.shapes[b]||{},o=T._fullLayout._plots[e.xref+e.yref];return o?o._hadPlotinfo=!0:(o={},e.xref&&"paper"!==e.xref&&(o.xaxis=T._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(o.yaxis=T._fullLayout[e.yref+"axis"])),o.xsizemode=e.xsizemode,o.ysizemode=e.ysizemode,o.xanchor=e.xanchor,o.yanchor=e.yanchor,{options:e,plotinfo:o}}},{"../../lib":503,"./constants":448}],458:[function(_,oe,se){"use strict";var v=_("./draw");oe.exports={moduleType:"component",name:"shapes",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),supplyDrawNewShapeDefaults:_("./draw_newshape/defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("shapes"),calcAutorange:_("./calc_autorange"),draw:v.draw,drawOne:v.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("../../plots/pad_attributes"),T=_("../../lib/extend").extendDeepAll,b=_("../../plot_api/edit_types").overrideAll,e=_("../../plots/animation_attributes"),o=_("../../plot_api/plot_template").templatedArray,i=_("./constants"),l=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});oe.exports=b(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:T(x({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:v({})},font:v({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(_,oe,se){"use strict";oe.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("./constants").name,e=T.steps;function o(l,r,y){function h(g,m){return v.coerce(l,r,T,g,m)}for(var s=x(l,r,{name:"steps",handleItemDefaults:i}),d=0,p=0;p<s.length;p++)s[p].visible&&d++;if(d<2?r.visible=!1:h("visible")){r._stepCount=d;var c=r._visibleSteps=v.filterVisible(s);(s[h("active")]||{}).visible||(r.active=c[0]._index),h("x"),h("y"),v.noneOrAll(l,r,["x","y"]),h("xanchor"),h("yanchor"),h("len"),h("lenmode"),h("pad.t"),h("pad.r"),h("pad.b"),h("pad.l"),v.coerceFont(h,"font",y.font),h("currentvalue.visible")&&(h("currentvalue.xanchor"),h("currentvalue.prefix"),h("currentvalue.suffix"),h("currentvalue.offset"),v.coerceFont(h,"currentvalue.font",r.font)),h("transition.duration"),h("transition.easing"),h("bgcolor"),h("activebgcolor"),h("bordercolor"),h("borderwidth"),h("ticklen"),h("tickwidth"),h("tickcolor"),h("minorticklen")}}function i(l,r){function y(s,d){return v.coerce(l,r,e,s,d)}if("skip"===l.method||Array.isArray(l.args)?y("visible"):r.visible=!1){y("method"),y("args");var h=y("label","step-"+r._index);y("value",h),y("execute")}}oe.exports=function(l,r){x(l,r,{name:b,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../color"),b=_("../drawing"),e=_("../../lib"),o=e.strTranslate,i=_("../../lib/svg_text_utils"),l=_("../../plot_api/plot_template").arrayEditor,r=_("./constants"),y=_("../../constants/alignment"),h=y.LINE_SPACING,s=y.FROM_TL,d=y.FROM_BR;function p(I){return r.autoMarginIdRoot+I._index}function c(I){return I._index}function g(I,B){var V=b.tester.selectAll("g."+r.labelGroupClass).data(B._visibleSteps);V.enter().append("g").classed(r.labelGroupClass,!0);var Z=0,Y=0;V.each(function(ae){var G=w(v.select(this),{step:ae},B).node();if(G){var ee=b.bBox(G);Y=Math.max(Y,ee.height),Z=Math.max(Z,ee.width)}}),V.remove();var Q=B._dims={};Q.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var re=I._fullLayout._size;if(Q.lx=re.l+re.w*B.x,Q.ly=re.t+re.h*(1-B.y),Q.outerLength="fraction"===B.lenmode?Math.round(re.w*B.len):B.len,Q.inputAreaStart=0,Q.inputAreaLength=Math.round(Q.outerLength-B.pad.l-B.pad.r),Q.labelStride=Math.max(1,Math.ceil((Z+r.labelPadding)/((Q.inputAreaLength-2*r.stepInset)/(B._stepCount-1)))),Q.labelHeight=Y,Q.currentValueMaxWidth=0,Q.currentValueHeight=0,Q.currentValueTotalHeight=0,Q.currentValueMaxLines=1,B.currentvalue.visible){var ie=b.tester.append("g");V.each(function(ae){var G=m(ie,B,ae.label),ee=G.node()&&b.bBox(G.node())||{width:0,height:0},te=i.lineCount(G);Q.currentValueMaxWidth=Math.max(Q.currentValueMaxWidth,Math.ceil(ee.width)),Q.currentValueHeight=Math.max(Q.currentValueHeight,Math.ceil(ee.height)),Q.currentValueMaxLines=Math.max(Q.currentValueMaxLines,te)}),Q.currentValueTotalHeight=Q.currentValueHeight+B.currentvalue.offset,ie.remove()}Q.height=Q.currentValueTotalHeight+r.tickOffset+B.ticklen+r.labelOffset+Q.labelHeight+B.pad.t+B.pad.b;var j="left";e.isRightAnchor(B)&&(Q.lx-=Q.outerLength,j="right"),e.isCenterAnchor(B)&&(Q.lx-=Q.outerLength/2,j="center");var q="top";e.isBottomAnchor(B)&&(Q.ly-=Q.height,q="bottom"),e.isMiddleAnchor(B)&&(Q.ly-=Q.height/2,q="middle"),Q.outerLength=Math.ceil(Q.outerLength),Q.height=Math.ceil(Q.height),Q.lx=Math.round(Q.lx),Q.ly=Math.round(Q.ly);var W={y:B.y,b:Q.height*d[q],t:Q.height*s[q]};"fraction"===B.lenmode?(W.l=0,W.xl=B.x-B.len*s[j],W.r=0,W.xr=B.x+B.len*d[j]):(W.x=B.x,W.l=Q.outerLength*s[j],W.r=Q.outerLength*d[j]),x.autoMargin(I,p(B),W)}function m(I,B,V){if(B.currentvalue.visible){var Z,Y,Q=B._dims;switch(B.currentvalue.xanchor){case"right":Z=Q.inputAreaLength-r.currentValueInset-Q.currentValueMaxWidth,Y="left";break;case"center":Z=.5*Q.inputAreaLength,Y="middle";break;default:Z=r.currentValueInset,Y="left"}var re=e.ensureSingle(I,"text",r.labelClass,function(W){W.attr({"text-anchor":Y,"data-notex":1})}),$=B.currentvalue.prefix?B.currentvalue.prefix:"";if("string"==typeof V)$+=V;else{var J=B.steps[B.active].label,ie=B._gd._fullLayout._meta;ie&&(J=e.templateString(J,ie)),$+=J}B.currentvalue.suffix&&($+=B.currentvalue.suffix),re.call(b.font,B.currentvalue.font).text($).call(i.convertToTspans,B._gd);var j=i.lineCount(re);return i.positionText(re,Z,(Q.currentValueMaxLines+1-j)*B.currentvalue.font.size*h),re}}function u(I,B,V){e.ensureSingle(I,"rect",r.gripRectClass,function(Z){Z.call(k,B,I,V).style("pointer-events","all")}).attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(T.stroke,V.bordercolor).call(T.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function w(I,B,V){var Z=e.ensureSingle(I,"text",r.labelClass,function(re){re.attr({"text-anchor":"middle","data-notex":1})}),Y=B.step.label,Q=V._gd._fullLayout._meta;return Q&&(Y=e.templateString(Y,Q)),Z.call(b.font,V.font).text(Y).call(i.convertToTspans,V._gd),Z}function f(I,B){var V=e.ensureSingle(I,"g",r.labelsClass),Z=B._dims,Y=V.selectAll("g."+r.labelGroupClass).data(Z.labelSteps);Y.enter().append("g").classed(r.labelGroupClass,!0),Y.exit().remove(),Y.each(function(Q){var re=v.select(this);re.call(w,Q,B),b.setTranslate(re,D(B,Q.fraction),r.tickOffset+B.ticklen+B.font.size*h+r.labelOffset+Z.currentValueTotalHeight)})}function A(I,B,V,Z,Y){var Q=Math.round(Z*(V._stepCount-1)),re=V._visibleSteps[Q]._index;re!==V.active&&M(I,B,V,re,!0,Y)}function M(I,B,V,Z,Y,Q){var re=V.active;V.active=Z,l(I.layout,r.name,V).applyUpdate("active",Z);var $=V.steps[V.active];B.call(P,V,Q),B.call(m,V),I.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:Y,previousActive:re}),$&&$.method&&Y&&(B._nextMethod?(B._nextMethod.step=$,B._nextMethod.doCallback=Y,B._nextMethod.doTransition=Q):(B._nextMethod={step:$,doCallback:Y,doTransition:Q},B._nextMethodRaf=window.requestAnimationFrame(function(){var J=B._nextMethod.step;J.method&&(J.execute&&x.executeAPICommand(I,J.method,J.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function k(I,B,V){var Z=V.node(),Y=v.select(B);function Q(){return V.data()[0]}function re(){var $=Q();B.emit("plotly_sliderstart",{slider:$});var J=V.select("."+r.gripRectClass);v.event.stopPropagation(),v.event.preventDefault(),J.call(T.fill,$.activebgcolor);var ie=F($,v.mouse(Z)[0]);function j(){var W=Q(),ae=F(W,v.mouse(Z)[0]);A(B,V,W,ae,!1)}function q(){var W=Q();W._dragging=!1,J.call(T.fill,W.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),B.emit("plotly_sliderend",{slider:W,step:W.steps[W.active]})}A(B,V,$,ie,!0),$._dragging=!0,Y.on("mousemove",j),Y.on("touchmove",j),Y.on("mouseup",q),Y.on("touchend",q)}I.on("mousedown",re),I.on("touchstart",re)}function E(I,B){var V=I.selectAll("rect."+r.tickRectClass).data(B._visibleSteps),Z=B._dims;V.enter().append("rect").classed(r.tickRectClass,!0),V.exit().remove(),V.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(Y,Q){var re=Q%Z.labelStride==0,$=v.select(this);$.attr({height:re?B.ticklen:B.minorticklen}).call(T.fill,B.tickcolor),b.setTranslate($,D(B,Q/(B._stepCount-1))-.5*B.tickwidth,(re?r.tickOffset:r.minorTickOffset)+Z.currentValueTotalHeight)})}function P(I,B,V){for(var Z=I.select("rect."+r.gripRectClass),Y=0,Q=0;Q<B._stepCount;Q++)if(B._visibleSteps[Q]._index===B.active){Y=Q;break}var re=D(B,Y/(B._stepCount-1));if(!B._invokingCommand){var $=Z;V&&B.transition.duration>0&&($=$.transition().duration(B.transition.duration).ease(B.transition.easing)),$.attr("transform",o(re-.5*r.gripWidth,B._dims.currentValueTotalHeight))}}function D(I,B){var V=I._dims;return V.inputAreaStart+r.stepInset+(V.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,B))}function F(I,B){var V=I._dims;return Math.min(1,Math.max(0,(B-r.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*r.stepInset-2*V.inputAreaStart)))}function R(I,B,V){var Z=V._dims,Y=e.ensureSingle(I,"rect",r.railTouchRectClass,function(Q){Q.call(k,B,I,V).style("pointer-events","all")});Y.attr({width:Z.inputAreaLength,height:Math.max(Z.inputAreaWidth,r.tickOffset+V.ticklen+Z.labelHeight)}).call(T.fill,V.bgcolor).attr("opacity",0),b.setTranslate(Y,0,Z.currentValueTotalHeight)}function L(I,B){var V=B._dims,Z=V.inputAreaLength-2*r.railInset,Y=e.ensureSingle(I,"rect",r.railRectClass);Y.attr({width:Z,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(T.stroke,B.bordercolor).call(T.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),b.setTranslate(Y,r.railInset,.5*(V.inputAreaWidth-r.railWidth)+V.currentValueTotalHeight)}oe.exports=function(I){var B=I._fullLayout,V=function(J,ie){for(var j=J[r.name],q=[],W=0;W<j.length;W++){var ae=j[W];ae.visible&&(ae._gd=ie,q.push(ae))}return q}(B,I),Z=B._infolayer.selectAll("g."+r.containerClassName).data(V.length>0?[0]:[]);function Y(J){J._commandObserver&&(J._commandObserver.remove(),delete J._commandObserver),x.autoMargin(I,p(J))}if(Z.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize"),Z.exit().each(function(){v.select(this).selectAll("g."+r.groupClassName).each(Y)}).remove(),0!==V.length){var Q=Z.selectAll("g."+r.groupClassName).data(V,c);Q.enter().append("g").classed(r.groupClassName,!0),Q.exit().each(Y).remove();for(var re=0;re<V.length;re++)g(I,V[re]);Q.each(function(J){var ie=v.select(this);(function(j){var q=j._dims;q.labelSteps=[];for(var W=j._stepCount,ae=0;ae<W;ae+=q.labelStride)q.labelSteps.push({fraction:ae/(W-1),step:j._visibleSteps[ae]})})(J),x.manageCommandObserver(I,J,J._visibleSteps,function(j){var q=ie.data()[0];q.active!==j.index&&(q._dragging||M(I,ie,q,j.index,!1,!0))}),function(j,q,W){(W.steps[W.active]||{}).visible||(W.active=W._visibleSteps[0]._index),q.call(m,W).call(L,W).call(f,W).call(E,W).call(R,j,W).call(u,j,W);var ae=W._dims;b.setTranslate(q,ae.lx+W.pad.l,ae.ly+W.pad.t),q.call(P,W,!1),q.call(m,W)}(I,v.select(this),J)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(_,oe,se){"use strict";var v=_("./constants");oe.exports={moduleType:"component",name:v.name,layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),draw:_("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib"),o=e.strTranslate,i=_("../drawing"),l=_("../color"),r=_("../../lib/svg_text_utils"),y=_("../../constants/interactions"),h=_("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;oe.exports={draw:function(d,p,c){var g,u=c.propName,w=c.placeholder,f=c.traceIndex,A=c.avoid||{},M=c.attributes,k=c.transform,E=c.containerGroup,P=d._fullLayout,D=1,F=!1,R=c.propContainer.title,L=(R&&R.text?R.text:"").trim(),I=R&&R.font?R.font:{},B=I.family,V=I.size,Z=I.color;"title.text"===u?g="titleText":-1!==u.indexOf("axis")?g="axisTitleText":u.indexOf(!0)&&(g="colorbarTitleText");var Y=d._context.edits[g];""===L?D=0:L.replace(s," % ")===w.replace(s," % ")&&(D=.2,F=!0,Y||(L="")),c._meta?L=e.templateString(L,c._meta):P._meta&&(L=e.templateString(L,P._meta));var Q,re=L||Y;E||(E=e.ensureSingle(P._infolayer,"g","g-"+p),Q=P._hColorbarMoveTitle);var $=E.selectAll("text").data(re?[0]:[]);if($.enter().append("text"),$.text(L).attr("class",p),$.exit().remove(),!re)return E;function J(q){e.syncOrAsync([ie,j],q)}function ie(q){var W;return!k&&Q&&(k={}),k?(W="",k.rotate&&(W+="rotate("+[k.rotate,M.x,M.y]+")"),(k.offset||Q)&&(W+=o(0,(k.offset||0)-(Q||0)))):W=null,q.attr("transform",W),q.style({"font-family":B,"font-size":v.round(V,2)+"px",fill:l.rgb(Z),opacity:D*l.opacity(Z),"font-weight":T.fontWeight}).attr(M).call(r.convertToTspans,d),T.previousPromises(d)}function j(q){var W=v.select(q.node().parentNode);if(A&&A.selection&&A.side&&L){W.attr("transform",null);var ae=h[A.side],G="left"===A.side||"top"===A.side?-1:1,ee=x(A.pad)?A.pad:2,te=i.bBox(W.node()),ue=A.maxShift||G*({left:0,top:0,right:P.width,bottom:P.height}[A.side]-te[A.side]),de=0;if(ue<0)de=ue;else{var he=A.offsetLeft||0,be=A.offsetTop||0;te.left-=he,te.right-=he,te.top-=be,te.bottom-=be,A.selection.each(function(){var _e=i.bBox(this);e.bBoxIntersect(te,_e,ee)&&(de=Math.max(de,G*(_e[A.side]-te[ae])+ee))}),de=Math.min(ue,de)}if(de>0||ue<0){var me={left:[-de,0],right:[de,0],top:[0,-de],bottom:[0,de]}[A.side];W.attr("transform",o(me[0],me[1]))}}}return $.call(J),Y&&(L?$.on(".opacity",null):(D=0,F=!0,$.text(w).on("mouseover.opacity",function(){v.select(this).transition().duration(y.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){v.select(this).transition().duration(y.HIDE_PLACEHOLDER).style("opacity",0)})),$.call(r.makeEditable,{gd:d}).on("edit",function(q){void 0!==f?b.call("_guiRestyle",d,u,q,f):b.call("_guiRelayout",d,u,q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(J)}).on("input",function(q){this.text(q||" ").call(r.positionText,M.x,M.y)})),$.classed("js-placeholder",F),E}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("../color/attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll,e=_("../../plots/pad_attributes"),o=_("../../plot_api/plot_template").templatedArray,i=o("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});oe.exports=b(o("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:T(e({editType:"arraydraw"}),{}),font:v({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:x.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(_,oe,se){"use strict";oe.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("./constants").name,e=T.buttons;function o(l,r,y){function h(s,d){return v.coerce(l,r,T,s,d)}h("visible",x(l,r,{name:"buttons",handleItemDefaults:i}).length>0)&&(h("active"),h("direction"),h("type"),h("showactive"),h("x"),h("y"),v.noneOrAll(l,r,["x","y"]),h("xanchor"),h("yanchor"),h("pad.t"),h("pad.r"),h("pad.b"),h("pad.l"),v.coerceFont(h,"font",y.font),h("bgcolor",y.paper_bgcolor),h("bordercolor"),h("borderwidth"))}function i(l,r){function y(h,s){return v.coerce(l,r,e,h,s)}y("visible","skip"===l.method||Array.isArray(l.args))&&(y("method"),y("args"),y("args2"),y("label"),y("execute"))}oe.exports=function(l,r){x(l,r,{name:b,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../color"),b=_("../drawing"),e=_("../../lib"),o=_("../../lib/svg_text_utils"),i=_("../../plot_api/plot_template").arrayEditor,l=_("../../constants/alignment").LINE_SPACING,r=_("./constants"),y=_("./scrollbox");function h(D){return D._index}function s(D,F){return+D.attr(r.menuIndexAttrName)===F._index}function d(D,F,R,L,I,B,V,Z){F.active=V,i(D.layout,r.name,F).applyUpdate("active",V),"buttons"===F.type?c(D,L,null,null,F):"dropdown"===F.type&&(I.attr(r.menuIndexAttrName,"-1"),p(D,L,I,B,F),Z||c(D,L,I,B,F))}function p(D,F,R,L,I){var B=e.ensureSingle(F,"g",r.headerClassName,function($){$.style("pointer-events","all")}),V=I._dims,Q={y:I.pad.t,yPad:0,x:I.pad.l,xPad:0,index:0},re={width:V.headerWidth,height:V.headerHeight};B.call(g,I,I.buttons[I.active]||r.blankHeaderOpts,D).call(E,I,Q,re),e.ensureSingle(F,"text",r.headerArrowClassName,function($){$.attr("text-anchor","end").call(b.font,I.font).text(r.arrowSymbol[I.direction])}).attr({x:V.headerWidth-r.arrowOffsetX+I.pad.l,y:V.headerHeight/2+r.textOffsetY+I.pad.t}),B.on("click",function(){R.call(P,String(s(R,I)?-1:I._index)),c(D,F,R,L,I)}),B.on("mouseover",function(){B.call(f)}),B.on("mouseout",function(){B.call(A,I)}),b.setTranslate(F,V.lx,V.ly)}function c(D,F,R,L,I){R||(R=F).attr("pointer-events","all");var B=-1==+R.attr(r.menuIndexAttrName)&&"buttons"!==I.type?[]:I.buttons,V="dropdown"===I.type?r.dropdownButtonClassName:r.buttonClassName,Z=R.selectAll("g."+V).data(e.filterVisible(B)),Y=Z.enter().append("g").classed(V,!0),Q=Z.exit();"dropdown"===I.type?(Y.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var re=0,$=0,J=I._dims,ie=-1!==["up","down"].indexOf(I.direction);"dropdown"===I.type&&(ie?$=J.headerHeight+r.gapButtonHeader:re=J.headerWidth+r.gapButtonHeader),"dropdown"===I.type&&"up"===I.direction&&($=-r.gapButtonHeader+r.gapButton-J.openHeight),"dropdown"===I.type&&"left"===I.direction&&(re=-r.gapButtonHeader+r.gapButton-J.openWidth);var W,ae,G,j={x:J.lx+re+I.pad.l,y:J.ly+$+I.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},q={l:j.x+I.borderwidth,t:j.y+I.borderwidth};Z.each(function(W,ae){var G=v.select(this);G.call(g,I,W,D).call(E,I,j),G.on("click",function(){v.event.defaultPrevented||(W.execute&&(W.args2&&I.active===ae?(d(D,I,0,F,R,L,-1),x.executeAPICommand(D,W.method,W.args2)):(d(D,I,0,F,R,L,ae),x.executeAPICommand(D,W.method,W.args))),D.emit("plotly_buttonclicked",{menu:I,button:W,active:I.active}))}),G.on("mouseover",function(){G.call(f)}),G.on("mouseout",function(){G.call(A,I),Z.call(w,I)})}),Z.call(w,I),ie?(q.w=Math.max(J.openWidth,J.headerWidth),q.h=j.y-q.t):(q.w=j.x-q.l,q.h=Math.max(J.openHeight,J.headerHeight)),q.direction=I.direction,L&&(Z.size()?function(W,ae,G,ee,te,le){var ue,de,he,be=te.direction,_e=te._dims,Ee=te.active;if("up"===be||"down"===be)for(de=0,he=0;he<Ee;he++)de+=_e.heights[he]+r.gapButton;else for(ue=0,he=0;he<Ee;he++)ue+=_e.widths[he]+r.gapButton;ee.enable(le,ue,de),ee.hbar&&ee.hbar.attr("opacity","0").transition().attr("opacity","1"),ee.vbar&&ee.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,L,I,q):(G=!!(W=L).vbar,(ae=!!W.hbar)&&W.hbar.transition().attr("opacity","0").each("end",function(){ae=!1,G||W.disable()}),G&&W.vbar.transition().attr("opacity","0").each("end",function(){G=!1,ae||W.disable()})))}function g(D,F,R,L){D.call(m,F).call(u,F,R,L)}function m(D,F){e.ensureSingle(D,"rect",r.itemRectClassName,function(R){R.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})}).call(T.stroke,F.bordercolor).call(T.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function u(D,F,R,L){var I=e.ensureSingle(D,"text",r.itemTextClassName,function(Z){Z.attr({"text-anchor":"start","data-notex":1})}),B=R.label,V=L._fullLayout._meta;V&&(B=e.templateString(B,V)),I.call(b.font,F.font).text(B).call(o.convertToTspans,L)}function w(D,F){var R=F.active;D.each(function(L,I){var B=v.select(this);I===R&&F.showactive&&B.select("rect."+r.itemRectClassName).call(T.fill,r.activeColor)})}function f(D){D.select("rect."+r.itemRectClassName).call(T.fill,r.hoverColor)}function A(D,F){D.select("rect."+r.itemRectClassName).call(T.fill,F.bgcolor)}function M(D,F){var R=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=b.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(F.buttons));L.enter().append("g").classed(r.dropdownButtonClassName,!0);var I=-1!==["up","down"].indexOf(F.direction);L.each(function(re,$){var J=v.select(this);J.call(g,F,re,D);var ie=J.select("."+r.itemTextClassName),j=ie.node()&&b.bBox(ie.node()).width,q=Math.max(j+r.textPadX,r.minWidth),W=F.font.size*l,ae=o.lineCount(ie),G=Math.max(W*ae,r.minHeight)+r.textOffsetY;G=Math.ceil(G),q=Math.ceil(q),R.widths[$]=q,R.heights[$]=G,R.height1=Math.max(R.height1,G),R.width1=Math.max(R.width1,q),I?(R.totalWidth=Math.max(R.totalWidth,q),R.openWidth=R.totalWidth,R.totalHeight+=G+r.gapButton,R.openHeight+=G+r.gapButton):(R.totalWidth+=q+r.gapButton,R.openWidth+=q+r.gapButton,R.totalHeight=Math.max(R.totalHeight,G),R.openHeight=R.totalHeight)}),I?R.totalHeight-=r.gapButton:R.totalWidth-=r.gapButton,R.headerWidth=R.width1+r.arrowPadX,R.headerHeight=R.height1,"dropdown"===F.type&&(I?(R.width1+=r.arrowPadX,R.totalHeight=R.height1):R.totalWidth=R.width1,R.totalWidth+=r.arrowPadX),L.remove();var B=R.totalWidth+F.pad.l+F.pad.r,V=R.totalHeight+F.pad.t+F.pad.b,Z=D._fullLayout._size;R.lx=Z.l+Z.w*F.x,R.ly=Z.t+Z.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(R.lx-=B,Y="right"),e.isCenterAnchor(F)&&(R.lx-=B/2,Y="center");var Q="top";e.isBottomAnchor(F)&&(R.ly-=V,Q="bottom"),e.isMiddleAnchor(F)&&(R.ly-=V/2,Q="middle"),R.totalWidth=Math.ceil(R.totalWidth),R.totalHeight=Math.ceil(R.totalHeight),R.lx=Math.round(R.lx),R.ly=Math.round(R.ly),x.autoMargin(D,k(F),{x:F.x,y:F.y,l:B*({right:1,center:.5}[Y]||0),r:B*({left:1,center:.5}[Y]||0),b:V*({top:1,middle:.5}[Q]||0),t:V*({bottom:1,middle:.5}[Q]||0)})}function k(D){return r.autoMarginIdRoot+D._index}function E(D,F,R,L){L=L||{};var I=D.select("."+r.itemRectClassName),B=D.select("."+r.itemTextClassName),V=F.borderwidth,Z=R.index,Y=F._dims;b.setTranslate(D,V+R.x,V+R.y);var Q=-1!==["up","down"].indexOf(F.direction),re=L.height||(Q?Y.heights[Z]:Y.height1);I.attr({x:0,y:0,width:L.width||(Q?Y.width1:Y.widths[Z]),height:re});var $=F.font.size*l,J=(o.lineCount(B)-1)*$/2;o.positionText(B,r.textOffsetX,re/2-J+r.textOffsetY),Q?R.y+=Y.heights[Z]+R.yPad:R.x+=Y.widths[Z]+R.xPad,R.index++}function P(D,F){D.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}oe.exports=function(D){var F=D._fullLayout,R=e.filterVisible(F[r.name]);function L($){x.autoMargin(D,k($))}var I=F._menulayer.selectAll("g."+r.containerClassName).data(R.length>0?[0]:[]);if(I.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),I.exit().each(function(){v.select(this).selectAll("g."+r.headerGroupClassName).each(L)}).remove(),0!==R.length){var B=I.selectAll("g."+r.headerGroupClassName).data(R,h);B.enter().append("g").classed(r.headerGroupClassName,!0);for(var V=e.ensureSingle(I,"g",r.dropdownButtonGroupClassName,function($){$.style("pointer-events","all")}),Z=0;Z<R.length;Z++)M(D,R[Z]);var re=new y(D,V,"updatemenus"+F._uid);B.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(P)),B.exit().each(function($){V.call(P),L($)}).remove(),B.each(function($){var J=v.select(this),ie="dropdown"===$.type?V:null;x.manageCommandObserver(D,$,$.buttons,function(j){d(D,$,0,J,ie,re,j.index,!0)}),"dropdown"===$.type?(p(D,J,V,re,$),s(V,$)&&c(D,J,V,re,$)):c(D,J,null,null,$)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(_,oe,se){arguments[4][463][0].apply(se,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(_,oe,se){"use strict";oe.exports=e;var v=_("@plotly/d3"),x=_("../color"),T=_("../drawing"),b=_("../../lib");function e(o,i,l){this.gd=o,this.container=i,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(o,i,l){var r=this.gd._fullLayout,y=r.width,h=r.height;this.position=o;var s,d,p,c,g=this.position.l,m=this.position.w,u=this.position.t,w=this.position.h,f=this.position.direction,A="down"===f,M="left"===f,k="up"===f,E=m,P=w;A||M||"right"===f||k||(this.position.direction="down",A=!0),A||k?(d=(s=g)+E,A?(p=u,P=(c=Math.min(p+P,h))-p):P=(c=u+P)-(p=Math.max(c-P,0))):(c=(p=u)+P,M?E=(d=g+E)-(s=Math.max(d-E,0)):(s=g,E=(d=Math.min(s+E,y))-s)),this._box={l:s,t:p,w:E,h:P};var D=m>E,F=e.barLength+2*e.barPad,R=e.barWidth+2*e.barPad,L=g,I=u+w;I+R>h&&(I=h-R);var B=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(x.fill,e.barColor),D?(this.hbar=B.attr({rx:e.barRadius,ry:e.barRadius,x:L,y:I,width:F,height:R}),this._hbarXMin=L+F/2,this._hbarTranslateMax=E-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=w>P,Z=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,Q=g+m,re=u;Q+Z>y&&(Q=y-Z);var $=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);$.exit().on(".drag",null).remove(),$.enter().append("rect").classed("scrollbar-vertical",!0).call(x.fill,e.barColor),V?(this.vbar=$.attr({rx:e.barRadius,ry:e.barRadius,x:Q,y:re,width:Z,height:Y}),this._vbarYMin=re+Y/2,this._vbarTranslateMax=P-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,ie=s-.5,j=V?d+Z+.5:d+.5,q=p-.5,W=D?c+R+.5:c+.5,ae=r._topdefs.selectAll("#"+J).data(D||V?[0]:[]);if(ae.exit().remove(),ae.enter().append("clipPath").attr("id",J).append("rect"),D||V?(this._clipRect=ae.select("rect").attr({x:Math.floor(ie),y:Math.floor(q),width:Math.ceil(j)-Math.floor(ie),height:Math.ceil(W)-Math.floor(q)}),this.container.call(T.setClipUrl,J,this.gd),this.bg.attr({x:g,y:u,width:m,height:w})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),D||V){var G=v.behavior.drag().on("dragstart",function(){v.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var ee=v.behavior.drag().on("dragstart",function(){v.event.sourceEvent.preventDefault(),v.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call(ee),V&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(i,l)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var o=this.translateX,i=this.translateY;this.hbar&&(o-=v.event.dx),this.vbar&&(i-=v.event.dy),this.setTranslate(o,i)},e.prototype._onBoxWheel=function(){var o=this.translateX,i=this.translateY;this.hbar&&(o+=v.event.deltaY),this.vbar&&(i+=v.event.deltaY),this.setTranslate(o,i)},e.prototype._onBarDrag=function(){var o=this.translateX,i=this.translateY;if(this.hbar){var l=o+this._hbarXMin,r=l+this._hbarTranslateMax;o=(b.constrain(v.event.x,l,r)-l)/(r-l)*(this.position.w-this._box.w)}if(this.vbar){var y=i+this._vbarYMin,h=y+this._vbarTranslateMax;i=(b.constrain(v.event.y,y,h)-y)/(h-y)*(this.position.h-this._box.h)}this.setTranslate(o,i)},e.prototype.setTranslate=function(o,i){var l=this.position.w-this._box.w,r=this.position.h-this._box.h;o=b.constrain(o||0,0,l),i=b.constrain(i||0,0,r),this.translateX=o,this.translateY=i,this.container.call(T.setTranslate,this._box.l-this.position.l-o,this._box.t-this.position.t-i),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+o-.5),y:Math.floor(this.position.t+i-.5)}),this.hbar&&this.hbar.call(T.setTranslate,o+o/l*this._hbarTranslateMax,i),this.vbar&&this.vbar.call(T.setTranslate,o,i+i/r*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(_,oe,se){"use strict";oe.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(_,oe,se){"use strict";oe.exports={axisRefDescription:function(v,x,T){return["If set to a",v,"axis id (e.g. *"+v+"* or","*"+v+"2*), the `"+v+"` position refers to a",v,"coordinate. If set to *paper*, the `"+v+"`","position refers to the distance from the",x,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",x,"("+T+"). If set to a",v,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",x,"of the domain of that axis: e.g.,","*"+v+"2 domain* refers to the domain of the second",v," axis and a",v,"position of 0.5 refers to the","point between the",x,"and the",T,"of the domain of the","second",v,"axis."].join(" ")}}},{}],473:[function(_,oe,se){"use strict";oe.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(_,oe,se){"use strict";oe.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(_,oe,se){"use strict";oe.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(_,oe,se){"use strict";oe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(_,oe,se){"use strict";oe.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(_,oe,se){"use strict";oe.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(_,oe,se){"use strict";oe.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(_,oe,se){"use strict";se.xmlns="http://www.w3.org/2000/xmlns/",se.svg="http://www.w3.org/2000/svg",se.xlink="http://www.w3.org/1999/xlink",se.svgAttrs={xmlns:se.svg,"xmlns:xlink":se.xlink}},{}],481:[function(_,oe,se){"use strict";se.version=_("./version").version,_("native-promise-only"),_("../build/plotcss");for(var v=_("./registry"),x=se.register=v.register,T=_("./plot_api"),b=Object.keys(T),e=0;e<b.length;e++){var o=b[e];"_"!==o.charAt(0)&&(se[o]=T[o]),x({moduleType:"apiMethod",name:o,fn:T[o]})}x(_("./traces/scatter")),x([_("./components/legend"),_("./components/fx"),_("./components/annotations"),_("./components/annotations3d"),_("./components/shapes"),_("./components/images"),_("./components/updatemenus"),_("./components/sliders"),_("./components/rangeslider"),_("./components/rangeselector"),_("./components/grid"),_("./components/errorbars"),_("./components/colorscale"),_("./components/colorbar"),_("./components/modebar")]),x([_("./locale-en"),_("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(x(window.PlotlyLocales),delete window.PlotlyLocales),se.Icons=_("./fonts/ploticon");var i=_("./components/fx"),l=_("./plots/plots");se.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},se.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},se.Snapshot=_("./snapshot"),se.PlotSchema=_("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(_,oe,se){"use strict";oe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(_,oe,se){"use strict";se.isLeftAnchor=function(v){return"left"===v.xanchor||"auto"===v.xanchor&&v.x<=1/3},se.isCenterAnchor=function(v){return"center"===v.xanchor||"auto"===v.xanchor&&v.x>1/3&&v.x<2/3},se.isRightAnchor=function(v){return"right"===v.xanchor||"auto"===v.xanchor&&v.x>=2/3},se.isTopAnchor=function(v){return"top"===v.yanchor||"auto"===v.yanchor&&v.y>=2/3},se.isMiddleAnchor=function(v){return"middle"===v.yanchor||"auto"===v.yanchor&&v.y>1/3&&v.y<2/3},se.isBottomAnchor=function(v){return"bottom"===v.yanchor||"auto"===v.yanchor&&v.y<=1/3}},{}],484:[function(_,oe,se){"use strict";var v=_("./mod"),x=v.mod,T=v.modHalf,b=Math.PI,e=2*b;function o(y){return Math.abs(y[1]-y[0])>e-1e-14}function i(y,h){return T(h-y,e)}function l(y,h){if(o(h))return!0;var s,d;h[0]<h[1]?(s=h[0],d=h[1]):(s=h[1],d=h[0]),(s=x(s,e))>(d=x(d,e))&&(d+=e);var p=x(y,e),c=p+e;return p>=s&&p<=d||c>=s&&c<=d}function r(y,h,s,d,p,c,g){p=p||0,c=c||0;var m,u,w,f,A,M=o([s,d]);function k(F,R){return[F*Math.cos(R)+p,c-F*Math.sin(R)]}M?(m=0,u=b,w=e):s<d?(m=s,w=d):(m=d,w=s),y<h?(f=y,A=h):(f=h,A=y);var E,P=Math.abs(w-m)<=b?0:1;function D(F,R,L){return"A"+[F,F]+" "+[0,P,L]+" "+k(F,R)}return M?E=null===f?"M"+k(A,m)+D(A,u,0)+D(A,w,0)+"Z":"M"+k(f,m)+D(f,u,0)+D(f,w,0)+"ZM"+k(A,m)+D(A,u,1)+D(A,w,1)+"Z":null===f?(E="M"+k(A,m)+D(A,w,0),g&&(E+="L0,0Z")):E="M"+k(f,m)+"L"+k(A,m)+D(A,w,0)+"L"+k(f,w)+D(f,m,1)+"Z",E}oe.exports={deg2rad:function(y){return y/180*b},rad2deg:function(y){return y/b*180},angleDelta:i,angleDist:function(y,h){return Math.abs(i(y,h))},isFullCircle:o,isAngleInsideSector:l,isPtInsideSector:function(y,h,s,d){return!!l(h,d)&&(s[0]<s[1]?(p=s[0],c=s[1]):(p=s[1],c=s[0]),y>=p&&y<=c);var p,c},pathArc:function(y,h,s,d,p){return r(null,y,h,s,d,p,0)},pathSector:function(y,h,s,d,p){return r(null,y,h,s,d,p,1)},pathAnnulus:function(y,h,s,d,p,c){return r(y,h,s,d,p,c,1)}}},{"./mod":510}],485:[function(_,oe,se){"use strict";var v=Array.isArray,x=ArrayBuffer,T=DataView;function b(i){return x.isView(i)&&!(i instanceof T)}function e(i){return v(i)||b(i)}function o(i,l,r){if(e(i)){if(e(i[0])){for(var y=r,h=0;h<i.length;h++)y=l(y,i[h].length);return y}return i.length}return 0}se.isTypedArray=b,se.isArrayOrTypedArray=e,se.isArray1D=function(i){return!e(i[0])},se.ensureArray=function(i,l){return v(i)||(i=[]),i.length=l,i},se.concat=function(){var i,l,r,y,h,s,d,p,c=[],g=!0,m=0;for(r=0;r<arguments.length;r++)(s=(y=arguments[r]).length)&&(l?c.push(y):(l=y,h=s),v(y)?i=!1:(g=!1,m?i!==y.constructor&&(i=!1):i=y.constructor),m+=s);if(!m)return[];if(!c.length)return l;if(g)return l.concat.apply(l,c);if(i){for((d=new i(m)).set(l),r=0;r<c.length;r++)d.set(y=c[r],h),h+=y.length;return d}for(d=new Array(m),p=0;p<l.length;p++)d[p]=l[p];for(r=0;r<c.length;r++){for(y=c[r],p=0;p<y.length;p++)d[h+p]=y[p];h+=p}return d},se.maxRowLength=function(i){return o(i,Math.max,0)},se.minRowLength=function(i){return o(i,Math.min,1/0)}},{}],486:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../constants/numerical").BADNUM,T=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;oe.exports=function(b){return"string"==typeof b&&(b=b.replace(T,"")),v(b)?Number(b):x}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(_,oe,se){"use strict";oe.exports=function(v){var x=v._fullLayout;x._glcanvas&&x._glcanvas.size()&&x._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],488:[function(_,oe,se){"use strict";oe.exports=function(v){v._responsiveChartHandler&&(window.removeEventListener("resize",v._responsiveChartHandler),delete v._responsiveChartHandler)}},{}],489:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../plots/attributes"),b=_("../components/colorscale/scales"),e=_("../components/color"),o=_("../constants/interactions").DESELECTDIM,i=_("./nested_property"),l=_("./regex").counter,r=_("./mod").modHalf,y=_("./array").isArrayOrTypedArray;function h(s,d){var p=se.valObjectMeta[d.valType];if(d.arrayOk&&y(s))return!0;if(p.validateFunction)return p.validateFunction(s,d);var c={},g=c;return p.coerceFunction(s,{set:function(u){g=u}},c,d),g!==c}se.valObjectMeta={data_array:{coerceFunction:function(s,d,p){y(s)?d.set(s):void 0!==p&&d.set(p)}},enumerated:{coerceFunction:function(s,d,p,c){c.coerceNumber&&(s=+s),-1===c.values.indexOf(s)?d.set(p):d.set(s)},validateFunction:function(s,d){d.coerceNumber&&(s=+s);for(var p=d.values,c=0;c<p.length;c++){var g=String(p[c]);if("/"===g.charAt(0)&&"/"===g.charAt(g.length-1)){if(new RegExp(g.substr(1,g.length-2)).test(s))return!0}else if(s===p[c])return!0}return!1}},boolean:{coerceFunction:function(s,d,p){d.set(!0===s||!1===s?s:p)}},number:{coerceFunction:function(s,d,p,c){!v(s)||void 0!==c.min&&s<c.min||void 0!==c.max&&s>c.max?d.set(p):d.set(+s)}},integer:{coerceFunction:function(s,d,p,c){s%1||!v(s)||void 0!==c.min&&s<c.min||void 0!==c.max&&s>c.max?d.set(p):d.set(+s)}},string:{coerceFunction:function(s,d,p,c){d.set("string"!=typeof s?!0!==c.strict&&"number"==typeof s?String(s):p:c.noBlank&&!s?p:s)}},color:{coerceFunction:function(s,d,p){x(s).isValid()?d.set(s):d.set(p)}},colorlist:{coerceFunction:function(s,d,p){Array.isArray(s)&&s.length&&s.every(function(c){return x(c).isValid()})?d.set(s):d.set(p)}},colorscale:{coerceFunction:function(s,d,p){d.set(b.get(s,p))}},angle:{coerceFunction:function(s,d,p){"auto"===s?d.set("auto"):v(s)?d.set(r(+s,360)):d.set(p)}},subplotid:{coerceFunction:function(s,d,p,c){var g=c.regex||l(p);"string"==typeof s&&g.test(s)?d.set(s):d.set(p)},validateFunction:function(s,d){var p=d.dflt;return s===p||"string"==typeof s&&!!l(p).test(s)}},flaglist:{coerceFunction:function(s,d,p,c){if("string"==typeof s)if(-1===(c.extras||[]).indexOf(s)){for(var g=s.split("+"),m=0;m<g.length;){var u=g[m];-1===c.flags.indexOf(u)||g.indexOf(u)<m?g.splice(m,1):m++}d.set(g.length?g.join("+"):p)}else d.set(s);else d.set(p)}},any:{coerceFunction:function(s,d,p){d.set(void 0===s?p:s)}},info_array:{coerceFunction:function(s,d,p,c){function g(I,B,V){var Z;return void 0===V&&(V=B.dflt),se.valObjectMeta[B.valType].coerceFunction(I,{set:function(Q){Z=Q}},V,B),Z}var m=2===c.dimensions||"1-2"===c.dimensions&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var u,w,f,M,k,E=c.items,P=[],D=Array.isArray(E),F=D&&m&&Array.isArray(E[0]),R=m&&D&&!F,L=D&&!R?E.length:s.length;if(p=Array.isArray(p)?p:[],m)for(u=0;u<L;u++)for(P[u]=[],f=Array.isArray(s[u])?s[u]:[],M=R?E.length:D?E[u].length:f.length,w=0;w<M;w++)void 0!==(k=g(f[w],R?E[w]:D?E[u][w]:E,(p[u]||[])[w]))&&(P[u][w]=k);else for(u=0;u<L;u++)void 0!==(k=g(s[u],D?E[u]:E,p[u]))&&(P[u]=k);d.set(P)}else d.set(p)},validateFunction:function(s,d){if(!Array.isArray(s))return!1;var p=d.items,c=Array.isArray(p),g=2===d.dimensions;if(!d.freeLength&&s.length!==p.length)return!1;for(var m=0;m<s.length;m++)if(g){if(!Array.isArray(s[m])||!d.freeLength&&s[m].length!==p[m].length)return!1;for(var u=0;u<s[m].length;u++)if(!h(s[m][u],c?p[m][u]:p))return!1}else if(!h(s[m],c?p[m]:p))return!1;return!0}}},se.coerce=function(s,d,p,c,g){var m=i(p,c).get(),u=i(s,c),w=i(d,c),f=u.get(),A=d._template;if(void 0===f&&A&&(f=i(A,c).get(),A=0),void 0===g&&(g=m.dflt),m.arrayOk&&y(f))return w.set(f),f;var M=se.valObjectMeta[m.valType].coerceFunction;M(f,w,g,m);var k=w.get();return A&&k===g&&!h(f,m)&&(M(f=i(A,c).get(),w,g,m),k=w.get()),k},se.coerce2=function(s,d,p,c,g){var m=i(s,c),u=se.coerce(s,d,p,c,g);return null!=m.get()&&u},se.coerceFont=function(s,d,p){var c={};return c.family=s(d+".family",(p=p||{}).family),c.size=s(d+".size",p.size),c.color=s(d+".color",p.color),c},se.coercePattern=function(s,d,p,c){if(s(d+".shape")){s(d+".solidity"),s(d+".size");var g="overlay"===s(d+".fillmode");if(!c){var m=s(d+".bgcolor",g?p:void 0);s(d+".fgcolor",g?e.contrast(m):p)}s(d+".fgopacity",g?.5:1)}},se.coerceHoverinfo=function(s,d,p){var c,g=d._module.attributes,m=g.hoverinfo?g:T,u=m.hoverinfo;if(1===p._dataLength){var w="all"===u.dflt?u.flags.slice():u.dflt.split("+");w.splice(w.indexOf("name"),1),c=w.join("+")}return se.coerce(s,d,m,"hoverinfo",c)},se.coerceSelectionMarkerOpacity=function(s,d){if(s.marker){var p,c,g=s.marker.opacity;void 0!==g&&(y(g)||s.selected||s.unselected||(p=g,c=o*g),d("selected.marker.opacity",p),d("unselected.marker.opacity",c))}},se.validate=h},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(_,oe,se){"use strict";var v,x,T=_("d3-time-format").timeFormat,b=_("fast-isnumeric"),e=_("./loggers"),o=_("./mod").mod,i=_("../constants/numerical"),l=i.BADNUM,r=i.ONEDAY,y=i.ONEHOUR,h=i.ONEMIN,s=i.ONESEC,d=i.EPOCHJD,p=_("../registry"),c=_("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,u=(new Date).getFullYear()-70;function w(B){return B&&p.componentsRegistry.calendars&&"string"==typeof B&&"gregorian"!==B}function f(B,V){return String(B+Math.pow(10,V)).substr(1)}se.dateTick0=function(B,V){var Q,re,Z=(re=!!V,w(Q=B)?re?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[Q]:p.getComponentMethod("calendars","CANONICAL_TICK")[Q]:re?"2000-01-02":"2000-01-01");if(V<2)return Z;var Y=se.dateTime2ms(Z,B);return se.ms2DateTime(Y+=r*(V-1),0,B)},se.dfltRange=function(B){return w(B)?p.getComponentMethod("calendars","DFLTRANGE")[B]:["2000-01-01","2001-01-01"]},se.isJSDate=function(B){return"object"==typeof B&&null!==B&&"function"==typeof B.getTime},se.dateTime2ms=function(B,V){if(se.isJSDate(B)){var Z=B.getTimezoneOffset()*h,Y=(B.getUTCMinutes()-B.getMinutes())*h+(B.getUTCSeconds()-B.getSeconds())*s+(B.getUTCMilliseconds()-B.getMilliseconds());if(Y){var Q=3*h;Z=Z-Q/2+o(Y-Z+Q/2,Q)}return(B=Number(B)-Z)>=v&&B<=x?B:l}if("string"!=typeof B&&"number"!=typeof B)return l;B=String(B);var re=w(V),$=B.charAt(0);!re||"G"!==$&&"g"!==$||(B=B.substr(1),V="");var J=re&&"chinese"===V.substr(0,7),ie=B.match(J?m:g);if(!ie)return l;var j=ie[1],q=ie[3]||"1",W=Number(ie[5]||1),ae=Number(ie[7]||0),G=Number(ie[9]||0),ee=Number(ie[11]||0);if(re){if(2===j.length)return l;var te;j=Number(j);try{var le=p.getComponentMethod("calendars","getCal")(V);if(J){var ue="i"===q.charAt(q.length-1);q=parseInt(q,10),te=le.newDate(j,le.toMonthIndex(j,q,ue),W)}else te=le.newDate(j,Number(q),W)}catch(he){return l}return te?(te.toJD()-d)*r+ae*y+G*h+ee*s:l}j=2===j.length?(Number(j)+2e3-u)%100+u:Number(j),q-=1;var de=new Date(Date.UTC(2e3,q,W,ae,G));return de.setUTCFullYear(j),de.getUTCMonth()!==q||de.getUTCDate()!==W?l:de.getTime()+ee*s},v=se.MIN_MS=se.dateTime2ms("-9999"),x=se.MAX_MS=se.dateTime2ms("9999-12-31 23:59:59.9999"),se.isDateTime=function(B,V){return se.dateTime2ms(B,V)!==l};var A=90*r,M=3*y,k=5*h;function E(B,V,Z,Y,Q){if((V||Z||Y||Q)&&(B+=" "+f(V,2)+":"+f(Z,2),(Y||Q)&&(B+=":"+f(Y,2),Q))){for(var re=4;Q%10==0;)re-=1,Q/=10;B+="."+f(Q,re)}return B}se.ms2DateTime=function(B,V,Z){if("number"!=typeof B||!(B>=v&&B<=x))return l;V||(V=0);var Y,Q,re,$,J,ie,j=Math.floor(10*o(B+.05,1)),q=Math.round(B-j/10);if(w(Z)){var W=Math.floor(q/r)+d,ae=Math.floor(o(B,r));try{Y=p.getComponentMethod("calendars","getCal")(Z).fromJD(W).formatDate("yyyy-mm-dd")}catch(G){Y=c("G%Y-%m-%d")(new Date(q))}if("-"===Y.charAt(0))for(;Y.length<11;)Y="-0"+Y.substr(1);else for(;Y.length<10;)Y="0"+Y;Q=V<A?Math.floor(ae/y):0,re=V<A?Math.floor(ae%y/h):0,$=V<M?Math.floor(ae%h/s):0,J=V<k?ae%s*10+j:0}else ie=new Date(q),Y=c("%Y-%m-%d")(ie),Q=V<A?ie.getUTCHours():0,re=V<A?ie.getUTCMinutes():0,$=V<M?ie.getUTCSeconds():0,J=V<k?10*ie.getUTCMilliseconds()+j:0;return E(Y,Q,re,$,J)},se.ms2DateTimeLocal=function(B){if(!(B>=v+r&&B<=x-r))return l;var V=Math.floor(10*o(B+.05,1)),Z=new Date(Math.round(B-V/10));return E(T("%Y-%m-%d")(Z),Z.getHours(),Z.getMinutes(),Z.getSeconds(),10*Z.getUTCMilliseconds()+V)},se.cleanDate=function(B,V,Z){if(B===l)return V;if(se.isJSDate(B)||"number"==typeof B&&isFinite(B)){if(w(Z))return e.error("JS Dates and milliseconds are incompatible with world calendars",B),V;if(!(B=se.ms2DateTimeLocal(+B))&&void 0!==V)return V}else if(!se.isDateTime(B,Z))return e.error("unrecognized date",B),V;return B};var P=/%\d?f/g,D=/%h/g,F={1:"1",2:"1",3:"2",4:"2"};function R(B,V,Z,Y){B=B.replace(P,function(re){var $=Math.min(+re.charAt(1)||6,6);return(V/1e3%1+2).toFixed($).substr(2).replace(/0+$/,"")||"0"});var Q=new Date(Math.floor(V+.05));if(B=B.replace(D,function(){return F[Z("%q")(Q)]}),w(Y))try{B=p.getComponentMethod("calendars","worldCalFmt")(B,V,Y)}catch(re){return"Invalid"}return Z(B)(Q)}var L=[59,59.9,59.99,59.999,59.9999];se.formatDate=function(B,V,Z,Y,Q,re){if(Q=w(Q)&&Q,!V)if("y"===Z)V=re.year;else if("m"===Z)V=re.month;else{if("d"!==Z)return function($,J){var ie=o($+.05,r),j=f(Math.floor(ie/y),2)+":"+f(o(Math.floor(ie/h),60),2);if("M"!==J){b(J)||(J=0);var q=(100+Math.min(o($/s,60),L[J])).toFixed(J).substr(1);J>0&&(q=q.replace(/0+$/,"").replace(/[\.]$/,"")),j+=":"+q}return j}(B,Z)+"\n"+R(re.dayMonthYear,B,Y,Q);V=re.dayMonth+"\n"+re.year}return R(V,B,Y,Q)};var I=3*r;se.incrementMonth=function(B,V,Z){Z=w(Z)&&Z;var Y=o(B,r);if(B=Math.round(B-Y),Z)try{var Q=Math.round(B/r)+d,re=p.getComponentMethod("calendars","getCal")(Z),$=re.fromJD(Q);return V%12?re.add($,V,"m"):re.add($,V/12,"y"),($.toJD()-d)*r+Y}catch(ie){e.error("invalid ms "+B+" in calendar "+Z)}var J=new Date(B+I);return J.setUTCMonth(J.getUTCMonth()+V)+Y-I},se.findExactDates=function(B,V){for(var Z,Y,Q=0,re=0,$=0,J=0,ie=w(V)&&p.getComponentMethod("calendars","getCal")(V),j=0;j<B.length;j++)if(b(Y=B[j])){if(!(Y%r))if(ie)try{1===(Z=ie.fromJD(Y/r+d)).day()?1===Z.month()?Q++:re++:$++}catch(W){}else 1===(Z=new Date(Y)).getUTCDate()?0===Z.getUTCMonth()?Q++:re++:$++}else J++;$+=re+=Q;var q=B.length-J;return{exactYears:Q/q,exactMonths:re/q,exactDays:$/q}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("./loggers"),T=_("./matrix"),b=_("gl-mat4");function e(y){var h=y&&y.parentNode;h&&h.removeChild(y)}function o(y,h,s){var d="plotly.js-style-"+y,p=document.getElementById(d);p||((p=document.createElement("style")).setAttribute("id",d),p.appendChild(document.createTextNode("")),document.head.appendChild(p));var c=p.sheet;c.insertRule?c.insertRule(h+"{"+s+"}",0):c.addRule?c.addRule(h,s,0):x.warn("addStyleRule failed")}function i(y){var h=window.getComputedStyle(y,null),s=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform")||h.getPropertyValue("transform");return"none"===s?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(d){return+d})}function l(y){for(var h=[];r(y);)h.push(y),y=y.parentNode;return h}function r(y){return y&&(y instanceof Element||y instanceof HTMLElement)}oe.exports={getGraphDiv:function(y){var h;if("string"==typeof y){if(null===(h=document.getElementById(y)))throw new Error("No DOM element with id '"+y+"' exists on the page.");return h}if(null==y)throw new Error("DOM element provided is null or undefined");return y},isPlotDiv:function(y){var h=v.select(y);return h.node()instanceof HTMLElement&&h.size()&&h.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(y,h){o("global",y,h)},addRelatedStyleRule:o,deleteRelatedStyleRule:function(y){var s=document.getElementById("plotly.js-style-"+y);s&&e(s)},getFullTransformMatrix:function(y){var h=l(y),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return h.forEach(function(d){var p=i(d);if(p){var c=T.convertCssMatrix(p);s=b.multiply(s,s,c)}}),s},getElementTransformMatrix:i,getElementAndAncestors:l,equalDomRects:function(y,h){return y&&h&&y.x===h.x&&y.y===h.y&&y.top===h.top&&y.left===h.left&&y.right===h.right&&y.bottom===h.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(_,oe,se){"use strict";var v=_("events").EventEmitter;oe.exports={init:function(T){if(T._ev instanceof v)return T;var b=new v,e=new v;return T._ev=b,T._internalEv=e,T.on=b.on.bind(b),T.once=b.once.bind(b),T.removeListener=b.removeListener.bind(b),T.removeAllListeners=b.removeAllListeners.bind(b),T._internalOn=e.on.bind(e),T._internalOnce=e.once.bind(e),T._removeInternalListener=e.removeListener.bind(e),T._removeAllInternalListeners=e.removeAllListeners.bind(e),T.emit=function(o,i){"undefined"!=typeof jQuery&&jQuery(T).trigger(o,i),b.emit(o,i),e.emit(o,i)},T},triggerHandler:function(T,b,e){var o,i;"undefined"!=typeof jQuery&&(o=jQuery(T).triggerHandler(b,e));var l=T._ev;if(!l)return o;var r,y=l._events[b];if(!y)return o;function h(s){return s.listener?(l.removeListener(b,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(l,[e]))):s.apply(l,[e])}for(y=Array.isArray(y)?y:[y],r=0;r<y.length-1;r++)h(y[r]);return i=h(y[r]),void 0!==o?o:i},purge:function(T){return delete T._ev,delete T.on,delete T.once,delete T.removeListener,delete T.removeAllListeners,delete T.emit,delete T._ev,delete T._internalEv,delete T._internalOn,delete T._internalOnce,delete T._removeInternalListener,delete T._removeAllInternalListeners,T}}},{events:84}],493:[function(_,oe,se){"use strict";var v=_("./is_plain_object.js"),x=Array.isArray;function T(b,e,o,i){var l,r,y,h,s,d,p=b[0],c=b.length;if(2===c&&x(p)&&x(b[1])&&0===p.length){if(function(m,u){var w,f;for(w=0;w<m.length;w++){if(null!==(f=m[w])&&"object"==typeof f)return!1;void 0!==f&&(u[w]=f)}return!0}(b[1],p))return p;p.splice(0,p.length)}for(var g=1;g<c;g++)for(r in l=b[g])y=p[r],h=l[r],i&&x(h)?p[r]=h:e&&h&&(v(h)||(s=x(h)))?(s?(s=!1,d=y&&x(y)?y:[]):d=y&&v(y)?y:{},p[r]=T([d,h],e,o,i)):(void 0!==h||o)&&(p[r]=h);return p}se.extendFlat=function(){return T(arguments,!1,!1,!1)},se.extendDeep=function(){return T(arguments,!0,!1,!1)},se.extendDeepAll=function(){return T(arguments,!0,!0,!1)},se.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(_,oe,se){"use strict";oe.exports=function(v){for(var x={},T=[],b=0,e=0;e<v.length;e++){var o=v[e];1!==x[o]&&(x[o]=1,T[b++]=o)}return T}},{}],495:[function(_,oe,se){"use strict";function v(T){return!0===T.visible}function x(T){var b=T[0].trace;return!0===b.visible&&0!==b._length}oe.exports=function(T){for(var b,e=(b=T,Array.isArray(b)&&Array.isArray(b[0])&&b[0][0]&&b[0][0].trace?x:v),o=[],i=0;i<T.length;i++){var l=T[i];e(l)&&o.push(l)}return o}},{}],496:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("country-regex"),T=_("@turf/area"),b=_("@turf/centroid"),e=_("@turf/bbox"),o=_("./identity"),i=_("./loggers"),l=_("./is_plain_object"),r=_("./nested_property"),y=_("./polygon"),h=Object.keys(x),s={"ISO-3":o,"USA-states":o,"country names":function(p){for(var c=0;c<h.length;c++){var g=h[c];if(new RegExp(x[g]).test(p.trim().toLowerCase()))return g}return i.log("Unrecognized country name: "+p+"."),!1}};function d(p){var c=p.geojson,g=window.PlotlyGeoAssets||{},m="string"==typeof c?g[c]:c;return l(m)?m:(i.error("Oops ... something went wrong when fetching "+c),!1)}oe.exports={locationToFeature:function(p,c,g){if(!c||"string"!=typeof c)return!1;var m,u,w,f=s[p](c);if(f){if("USA-states"===p)for(m=[],w=0;w<g.length;w++)(u=g[w]).properties&&u.properties.gu&&"USA"===u.properties.gu&&m.push(u);else m=g;for(w=0;w<m.length;w++)if((u=m[w]).id===f)return u;i.log(["Location with id",f,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(p){var c,g,m,u,w=p.geometry,f=w.coordinates,A=p.id,M=[];function k(E){for(var P=0;P<E.length-1;P++)if(E[P][0]>0&&E[P+1][0]<0)return P;return null}switch(c="RUS"===A||"FJI"===A?function(E){var P;if(null===k(E))P=E;else for(P=new Array(E.length),u=0;u<E.length;u++)P[u]=[E[u][0]<0?E[u][0]+360:E[u][0],E[u][1]];M.push(y.tester(P))}:"ATA"===A?function(E){var P=k(E);if(null===P)return M.push(y.tester(E));var D=new Array(E.length+1),F=0;for(u=0;u<E.length;u++)u>P?D[F++]=[E[u][0]+360,E[u][1]]:u===P?(D[F++]=E[u],D[F++]=[E[u][0],-90]):D[F++]=E[u];var R=y.tester(D);R.pts.pop(),M.push(R)}:function(E){M.push(y.tester(E))},w.type){case"MultiPolygon":for(g=0;g<f.length;g++)for(m=0;m<f[g].length;m++)c(f[g][m]);break;case"Polygon":for(g=0;g<f.length;g++)c(f[g])}return M},getTraceGeojson:d,extractTraceFeature:function(p){var c=p[0].trace,g=d(c);if(!g)return!1;var m,u={},w=[];for(m=0;m<c._length;m++){var f=p[m];(f.loc||0===f.loc)&&(u[f.loc]=f)}function A(E){var P=r(E,c.featureidkey||"id").get(),D=u[P];if(D){var F=E.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){var R={type:"Feature",id:P,geometry:F,properties:{}};R.properties.ct=function(L){var I,B=L.geometry;if("MultiPolygon"===B.type)for(var V=B.coordinates,Z=0,Y=0;Y<V.length;Y++){var Q={type:"Polygon",coordinates:V[Y]},re=T.default(Q);re>Z&&(Z=re,I=Q)}else I=B;return b.default(I).geometry.coordinates}(R),D.fIn=E,D.fOut=R,w.push(R)}else i.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete u[P]}switch(g.type){case"FeatureCollection":var M=g.features;for(m=0;m<M.length;m++)A(M[m]);break;case"Feature":A(g);break;default:return i.warn(["Invalid GeoJSON type",(g.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in u)i.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+c.featureidkey+"*."].join(" "));return w},fetchTraceGeoData:function(p){var c=window.PlotlyGeoAssets||{},g=[];function m(A){return new Promise(function(M,k){v.json(A,function(E,P){return E?(delete c[A],k(new Error(404===E.status?'GeoJSON at URL "'+A+'" does not exist.':"Unexpected error while fetching from "+A))):(c[A]=P,M(P))})})}function u(A){return new Promise(function(M,k){var E=0,P=setInterval(function(){return c[A]&&"pending"!==c[A]?(clearInterval(P),M(c[A])):E>100?(clearInterval(P),k("Unexpected error while fetching from "+A)):void E++},50)})}for(var w=0;w<p.length;w++){var f=p[w][0].trace.geojson;"string"==typeof f&&(c[f]?"pending"===c[f]&&g.push(u(f)):(c[f]="pending",g.push(m(f))))}return g},computeBbox:function(p){return e.default(p)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(_,oe,se){"use strict";var v=_("../constants/numerical").BADNUM;se.calcTraceToLineCoords=function(x){for(var T=x[0].trace.connectgaps,b=[],e=[],o=0;o<x.length;o++){var i=x[o].lonlat;i[0]!==v?e.push(i):!T&&e.length>0&&(b.push(e),e=[])}return e.length>0&&b.push(e),b},se.makeLine=function(x){return 1===x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}},se.makePolygon=function(x){if(1===x.length)return{type:"Polygon",coordinates:x};for(var T=new Array(x.length),b=0;b<x.length;b++)T[b]=[x[b]];return{type:"MultiPolygon",coordinates:T}},se.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(_,oe,se){"use strict";var v,x,T,b=_("./mod").mod;function e(i,l,r,y,h,s,d,p){var c=r-i,g=h-i,m=d-h,u=y-l,w=s-l,f=p-s,A=c*f-m*u;if(0===A)return null;var M=(g*f-m*w)/A,k=(g*u-c*w)/A;return k<0||k>1||M<0||M>1?null:{x:i+c*M,y:l+u*M}}function o(i,l,r,y,h){var s=y*i+h*l;if(s<0)return y*y+h*h;if(s>r){var d=y-i,p=h-l;return d*d+p*p}var c=y*l-h*i;return c*c/r}se.segmentsIntersect=e,se.segmentDistance=function(i,l,r,y,h,s,d,p){if(e(i,l,r,y,h,s,d,p))return 0;var c=r-i,g=y-l,m=d-h,u=p-s,w=c*c+g*g,f=m*m+u*u,A=Math.min(o(c,g,w,h-i,s-l),o(c,g,w,d-i,p-l),o(m,u,f,i-h,l-s),o(m,u,f,r-h,y-s));return Math.sqrt(A)},se.getTextLocation=function(i,l,r,y){if(i===x&&y===T||(v={},x=i,T=y),v[r])return v[r];var h=i.getPointAtLength(b(r-y/2,l)),s=i.getPointAtLength(b(r+y/2,l)),d=Math.atan((s.y-h.y)/(s.x-h.x)),p=i.getPointAtLength(b(r,l)),c={x:(4*p.x+h.x+s.x)/6,y:(4*p.y+h.y+s.y)/6,theta:d};return v[r]=c,c},se.clearLocationCache=function(){x=null},se.getVisibleSegment=function(i,l,r){var y,h,s=l.left,d=l.right,p=l.top,c=l.bottom,g=0,m=i.getTotalLength(),u=m;function w(A){var M=i.getPointAtLength(A);0===A?y=M:A===m&&(h=M);var k=M.x<s?s-M.x:M.x>d?M.x-d:0,E=M.y<p?p-M.y:M.y>c?M.y-c:0;return Math.sqrt(k*k+E*E)}for(var f=w(g);f;){if((g+=f+r)>u)return;f=w(g)}for(f=w(u);f;){if(g>(u-=f+r))return;f=w(u)}return{min:g,max:u,len:u-g,total:m,isClosed:0===g&&u===m&&Math.abs(y.x-h.x)<.1&&Math.abs(y.y-h.y)<.1}},se.findPointOnPath=function(i,l,r,y){for(var h,s,d,p=(y=y||{}).pathLength||i.getTotalLength(),c=y.tolerance||.001,g=y.iterationLimit||30,m=i.getPointAtLength(0)[r]>i.getPointAtLength(p)[r]?-1:1,u=0,w=0,f=p;u<g;){if(d=(s=i.getPointAtLength(h=(w+f)/2))[r]-l,Math.abs(d)<c)return s;m*d>0?f=h:w=h,u++}return s}},{"./mod":510}],499:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("tinycolor2"),T=_("color-normalize"),b=_("../components/colorscale"),e=_("../components/color/attributes").defaultLine,o=_("./array").isArrayOrTypedArray,i=T(e);function l(h,s){var d=h;return d[3]*=s,d}function r(h){if(v(h))return i;var s=T(h);return s.length?s:i}function y(h){return v(h)?h:1}oe.exports={formatColor:function(h,s,d){var p,c,g,m,u,w=h.color,f=o(w),A=o(s),M=b.extractOpts(h),k=[];if(p=void 0!==M.colorscale?b.makeColorScaleFuncFromTrace(h):r,c=f?function(P,D){return void 0===P[D]?i:T(p(P[D]))}:r,g=A?function(P,D){return void 0===P[D]?1:y(P[D])}:y,f||A)for(var E=0;E<d;E++)m=c(w,E),u=g(s,E),k[E]=l(m,u);else k=l(T(w),s);return k},parseColorScale:function(h){var s=b.extractOpts(h),d=s.colorscale;return s.reversescale&&(d=b.flipScale(s.colorscale)),d.map(function(p){var c=p[0],g=x(p[1]).toRgb();return{index:c,rgb:[g.r,g.g,g.b,g.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(_,oe,se){"use strict";var v=_("./identity");function x(T){return[T]}oe.exports={keyFun:function(T){return T.key},repeat:x,descend:v,wrap:x,unwrap:function(T){return T[0]}}},{"./identity":501}],501:[function(_,oe,se){"use strict";oe.exports=function(v){return v}},{}],502:[function(_,oe,se){"use strict";oe.exports=function(v,x){if(!x)return v;var T=1/Math.abs(x),b=T>1?(T*v+T*x)/T:v+x,e=String(b).length;if(e>16){var o=String(x).length;if(e>=String(v).length+o){var i=parseFloat(b).toPrecision(12);-1===i.indexOf("e+")&&(b=+i)}}return b}},{}],503:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-time-format").utcFormat,T=_("d3-format").format,b=_("fast-isnumeric"),e=_("../constants/numerical"),o=e.FP_SAFE,i=-o,l=e.BADNUM,r=oe.exports={};r.adjustFormat=function(j){return!j||/^\d[.]\df/.test(j)||/[.]\d%/.test(j)?j:"0.f"===j?"~f":/^\d%/.test(j)?"~%":/^\ds/.test(j)?"~s":!/^[~,.0$]/.test(j)&&/[&fps]/.test(j)?"~"+j:j};var y={};r.warnBadFormat=function(j){var q=String(j);y[q]||(y[q]=1,r.warn('encountered bad format: "'+q+'"'))},r.noFormat=function(j){return String(j)},r.numberFormat=function(j){var q;try{q=T(r.adjustFormat(j))}catch(W){return r.warnBadFormat(j),r.noFormat}return q},r.nestedProperty=_("./nested_property"),r.keyedContainer=_("./keyed_container"),r.relativeAttr=_("./relative_attr"),r.isPlainObject=_("./is_plain_object"),r.toLogRange=_("./to_log_range"),r.relinkPrivateKeys=_("./relink_private");var h=_("./array");r.isTypedArray=h.isTypedArray,r.isArrayOrTypedArray=h.isArrayOrTypedArray,r.isArray1D=h.isArray1D,r.ensureArray=h.ensureArray,r.concat=h.concat,r.maxRowLength=h.maxRowLength,r.minRowLength=h.minRowLength;var s=_("./mod");r.mod=s.mod,r.modHalf=s.modHalf;var d=_("./coerce");r.valObjectMeta=d.valObjectMeta,r.coerce=d.coerce,r.coerce2=d.coerce2,r.coerceFont=d.coerceFont,r.coercePattern=d.coercePattern,r.coerceHoverinfo=d.coerceHoverinfo,r.coerceSelectionMarkerOpacity=d.coerceSelectionMarkerOpacity,r.validate=d.validate;var p=_("./dates");r.dateTime2ms=p.dateTime2ms,r.isDateTime=p.isDateTime,r.ms2DateTime=p.ms2DateTime,r.ms2DateTimeLocal=p.ms2DateTimeLocal,r.cleanDate=p.cleanDate,r.isJSDate=p.isJSDate,r.formatDate=p.formatDate,r.incrementMonth=p.incrementMonth,r.dateTick0=p.dateTick0,r.dfltRange=p.dfltRange,r.findExactDates=p.findExactDates,r.MIN_MS=p.MIN_MS,r.MAX_MS=p.MAX_MS;var c=_("./search");r.findBin=c.findBin,r.sorterAsc=c.sorterAsc,r.sorterDes=c.sorterDes,r.distinctVals=c.distinctVals,r.roundUp=c.roundUp,r.sort=c.sort,r.findIndexOfMin=c.findIndexOfMin,r.sortObjectKeys=_("./sort_object_keys");var g=_("./stats");r.aggNums=g.aggNums,r.len=g.len,r.mean=g.mean,r.median=g.median,r.midRange=g.midRange,r.variance=g.variance,r.stdev=g.stdev,r.interp=g.interp;var m=_("./matrix");r.init2dArray=m.init2dArray,r.transposeRagged=m.transposeRagged,r.dot=m.dot,r.translationMatrix=m.translationMatrix,r.rotationMatrix=m.rotationMatrix,r.rotationXYMatrix=m.rotationXYMatrix,r.apply3DTransform=m.apply3DTransform,r.apply2DTransform=m.apply2DTransform,r.apply2DTransform2=m.apply2DTransform2,r.convertCssMatrix=m.convertCssMatrix,r.inverseTransformMatrix=m.inverseTransformMatrix;var u=_("./angles");r.deg2rad=u.deg2rad,r.rad2deg=u.rad2deg,r.angleDelta=u.angleDelta,r.angleDist=u.angleDist,r.isFullCircle=u.isFullCircle,r.isAngleInsideSector=u.isAngleInsideSector,r.isPtInsideSector=u.isPtInsideSector,r.pathArc=u.pathArc,r.pathSector=u.pathSector,r.pathAnnulus=u.pathAnnulus;var w=_("./anchor_utils");r.isLeftAnchor=w.isLeftAnchor,r.isCenterAnchor=w.isCenterAnchor,r.isRightAnchor=w.isRightAnchor,r.isTopAnchor=w.isTopAnchor,r.isMiddleAnchor=w.isMiddleAnchor,r.isBottomAnchor=w.isBottomAnchor;var f=_("./geometry2d");r.segmentsIntersect=f.segmentsIntersect,r.segmentDistance=f.segmentDistance,r.getTextLocation=f.getTextLocation,r.clearLocationCache=f.clearLocationCache,r.getVisibleSegment=f.getVisibleSegment,r.findPointOnPath=f.findPointOnPath;var A=_("./extend");r.extendFlat=A.extendFlat,r.extendDeep=A.extendDeep,r.extendDeepAll=A.extendDeepAll,r.extendDeepNoArrays=A.extendDeepNoArrays;var M=_("./loggers");r.log=M.log,r.warn=M.warn,r.error=M.error;var k=_("./regex");r.counterRegex=k.counter;var E=_("./throttle");r.throttle=E.throttle,r.throttleDone=E.done,r.clearThrottle=E.clear;var P=_("./dom");function D(j){var q={};for(var W in j)for(var ae=j[W],G=0;G<ae.length;G++)q[ae[G]]=+W;return q}r.getGraphDiv=P.getGraphDiv,r.isPlotDiv=P.isPlotDiv,r.removeElement=P.removeElement,r.addStyleRule=P.addStyleRule,r.addRelatedStyleRule=P.addRelatedStyleRule,r.deleteRelatedStyleRule=P.deleteRelatedStyleRule,r.getFullTransformMatrix=P.getFullTransformMatrix,r.getElementTransformMatrix=P.getElementTransformMatrix,r.getElementAndAncestors=P.getElementAndAncestors,r.equalDomRects=P.equalDomRects,r.clearResponsive=_("./clear_responsive"),r.preserveDrawingBuffer=_("./preserve_drawing_buffer"),r.makeTraceGroups=_("./make_trace_groups"),r._=_("./localize"),r.notifier=_("./notifier"),r.filterUnique=_("./filter_unique"),r.filterVisible=_("./filter_visible"),r.pushUnique=_("./push_unique"),r.increment=_("./increment"),r.cleanNumber=_("./clean_number"),r.ensureNumber=function(j){return b(j)?(j=Number(j))>o||j<i?l:j:l},r.isIndex=function(j,q){return!(void 0!==q&&j>=q)&&b(j)&&j>=0&&j%1==0},r.noop=_("./noop"),r.identity=_("./identity"),r.repeat=function(j,q){for(var W=new Array(q),ae=0;ae<q;ae++)W[ae]=j;return W},r.swapAttrs=function(j,q,W,ae){W||(W="x"),ae||(ae="y");for(var G=0;G<q.length;G++){var ee=q[G],te=r.nestedProperty(j,ee.replace("?",W)),le=r.nestedProperty(j,ee.replace("?",ae)),ue=te.get();te.set(le.get()),le.set(ue)}},r.raiseToTop=function(j){j.parentNode.appendChild(j)},r.cancelTransition=function(j){return j.transition().duration(0)},r.constrain=function(j,q,W){return q>W?Math.max(W,Math.min(q,j)):Math.max(q,Math.min(W,j))},r.bBoxIntersect=function(j,q,W){return j.left<=q.right+(W=W||0)&&q.left<=j.right+W&&j.top<=q.bottom+W&&q.top<=j.bottom+W},r.simpleMap=function(j,q,W,ae,G){for(var ee=j.length,te=new Array(ee),le=0;le<ee;le++)te[le]=q(j[le],W,ae,G);return te},r.randstr=function j(q,W,ae,G){if(ae||(ae=16),void 0===W&&(W=24),W<=0)return"0";var ee,te,le=Math.log(Math.pow(2,W))/Math.log(ae),ue="";for(ee=2;le===1/0;ee*=2)le=Math.log(Math.pow(2,W/ee))/Math.log(ae)*ee;var de=le-Math.floor(le);for(ee=0;ee<Math.floor(le);ee++)ue=Math.floor(Math.random()*ae).toString(ae)+ue;de&&(te=Math.pow(ae,de),ue=Math.floor(Math.random()*te).toString(ae)+ue);var he=parseInt(ue,ae);return q&&q[ue]||he!==1/0&&he>=Math.pow(2,W)?G>10?(r.warn("randstr failed uniqueness"),ue):j(q,W,ae,(G||0)+1):ue},r.OptionControl=function(j,q){j||(j={}),q||(q="opt");var W={optionList:[],_newoption:function(ae){ae[q]=j,W[ae.name]=ae,W.optionList.push(ae)}};return W["_"+q]=j,W},r.smooth=function(j,q){if((q=Math.round(q)||0)<2)return j;var W,ae,G,ee,te=j.length,le=2*te,ue=2*q-1,de=new Array(ue),he=new Array(te);for(W=0;W<ue;W++)de[W]=(1-Math.cos(Math.PI*(W+1)/q))/(2*q);for(W=0;W<te;W++){for(ee=0,ae=0;ae<ue;ae++)(G=W+ae+1-q)<-te?G-=le*Math.round(G/le):G>=le&&(G-=le*Math.floor(G/le)),G<0?G=-1-G:G>=te&&(G=le-1-G),ee+=j[G]*de[ae];he[W]=ee}return he},r.syncOrAsync=function(j,q,W){var ae;function G(){return r.syncOrAsync(j,q,W)}for(;j.length;)if((ae=(0,j.splice(0,1)[0])(q))&&ae.then)return ae.then(G);return W&&W(q)},r.stripTrailingSlash=function(j){return"/"===j.substr(-1)?j.substr(0,j.length-1):j},r.noneOrAll=function(j,q,W){if(j){var ae,G=!1,ee=!0;for(ae=0;ae<W.length;ae++)null!=j[W[ae]]?G=!0:ee=!1;if(G&&!ee)for(ae=0;ae<W.length;ae++)j[W[ae]]=q[W[ae]]}},r.mergeArray=function(j,q,W,ae){var G="function"==typeof ae;if(r.isArrayOrTypedArray(j))for(var ee=Math.min(j.length,q.length),te=0;te<ee;te++){var le=j[te];q[te][W]=G?ae(le):le}},r.mergeArrayCastPositive=function(j,q,W){return r.mergeArray(j,q,W,function(ae){var G=+ae;return isFinite(G)&&G>0?G:0})},r.fillArray=function(j,q,W,ae){if(ae=ae||r.identity,r.isArrayOrTypedArray(j))for(var G=0;G<q.length;G++)q[G][W]=ae(j[G])},r.castOption=function(j,q,W,ae){ae=ae||r.identity;var G=r.nestedProperty(j,W).get();return r.isArrayOrTypedArray(G)?Array.isArray(q)&&r.isArrayOrTypedArray(G[q[0]])?ae(G[q[0]][q[1]]):ae(G[q]):G},r.extractOption=function(j,q,W,ae){if(W in j)return j[W];var G=r.nestedProperty(q,ae).get();return Array.isArray(G)?void 0:G},r.tagSelected=function(j,q,W){var ae,G,ee=q.selectedpoints,te=q._indexToPoints;te&&(ae=D(te));for(var le=0;le<ee.length;le++){var ue=ee[le];if(r.isIndex(ue)||r.isArrayOrTypedArray(ue)&&r.isIndex(ue[0])&&r.isIndex(ue[1])){var de=ae?ae[ue]:ue,he=W?W[de]:de;void 0!==(G=he)&&G<j.length&&(j[he].selected=1)}}},r.selIndices2selPoints=function(j){var q=j.selectedpoints,W=j._indexToPoints;if(W){for(var ae=D(W),G=[],ee=0;ee<q.length;ee++){var te=q[ee];if(r.isIndex(te)){var le=ae[te];r.isIndex(le)&&G.push(le)}}return G}return q},r.getTargetArray=function(j,q){var W=q.target;if("string"==typeof W&&W){var ae=r.nestedProperty(j,W).get();return!!Array.isArray(ae)&&ae}return!!Array.isArray(W)&&W},r.minExtend=function(j,q){var W={};"object"!=typeof q&&(q={});var ae,G,ee,te=Object.keys(j);for(ae=0;ae<te.length;ae++)ee=j[G=te[ae]],"_"!==G.charAt(0)&&"function"!=typeof ee&&(W[G]="module"===G?ee:Array.isArray(ee)?"colorscale"===G?ee.slice():ee.slice(0,3):r.isTypedArray(ee)?ee.subarray(0,3):ee&&"object"==typeof ee?r.minExtend(j[G],q[G]):ee);for(te=Object.keys(q),ae=0;ae<te.length;ae++)"object"==typeof(ee=q[G=te[ae]])&&G in W&&"object"==typeof W[G]||(W[G]=ee);return W},r.titleCase=function(j){return j.charAt(0).toUpperCase()+j.substr(1)},r.containsAny=function(j,q){for(var W=0;W<q.length;W++)if(-1!==j.indexOf(q[W]))return!0;return!1},r.isIE=function(){return void 0!==window.navigator.msSaveBlob};var F=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return F.test(window.navigator.userAgent)};var R=/iPad|iPhone|iPod/;r.isIOS=function(){return R.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var j=L.exec(window.navigator.userAgent);if(j&&2===j.length){var q=parseInt(j[1]);if(!isNaN(q))return q}return null},r.isD3Selection=function(j){return j instanceof v.selection},r.ensureSingle=function(j,q,W,ae){var G=j.select(q+(W?"."+W:""));if(G.size())return G;var ee=j.append(q);return W&&ee.classed(W,!0),ae&&ee.call(ae),ee},r.ensureSingleById=function(j,q,W,ae){var G=j.select(q+"#"+W);if(G.size())return G;var ee=j.append(q).attr("id",W);return ae&&ee.call(ae),ee},r.objectFromPath=function(j,q){for(var W,ae=j.split("."),G=W={},ee=0;ee<ae.length;ee++){var te=ae[ee],le=null,ue=ae[ee].match(/(.*)\[([0-9]+)\]/);ue?(le=ue[2],(W=W[te=ue[1]]=[])[le]=ee===ae.length-1?q:{},W=W[le]):(W[te]=ee===ae.length-1?q:{},W=W[te])}return G};var I=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(j){var q,W,ae,G,ee,te,le;if("object"==typeof j&&!Array.isArray(j))for(W in j)j.hasOwnProperty(W)&&((q=W.match(I))?(G=j[W],ae=q[1],delete j[W],j[ae]=r.extendDeepNoArrays(j[ae]||{},r.objectFromPath(W,r.expandObjectPaths(G))[ae])):(q=W.match(B))?(G=j[W],ae=q[1],ee=parseInt(q[2]),delete j[W],j[ae]=j[ae]||[],"."===q[3]?(le=q[4],te=j[ae][ee]=j[ae][ee]||{},r.extendDeepNoArrays(te,r.objectFromPath(le,r.expandObjectPaths(G)))):j[ae][ee]=r.expandObjectPaths(G)):j[W]=r.expandObjectPaths(j[W]));return j},r.numSeparate=function(j,q,W){if(W||(W=!1),"string"!=typeof q||0===q.length)throw new Error("Separator string required for formatting!");"number"==typeof j&&(j=String(j));var ae=/(\d+)(\d{3})/,G=q.charAt(0),ee=q.charAt(1),te=j.split("."),le=te[0],ue=te.length>1?G+te[1]:"";if(ee&&(te.length>1||le.length>4||W))for(;ae.test(le);)le=le.replace(ae,"$1"+ee+"$2");return le+ue},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var V=/^\w*$/;r.templateString=function(j,q){var W={};return j.replace(r.TEMPLATE_STRING_REGEX,function(ae,G){var ee;return V.test(G)?ee=q[G]:(W[G]=W[G]||r.nestedProperty(q,G).get,ee=W[G]()),r.isValidTextValue(ee)?ee:""})};var Z={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return re.apply(Z,arguments)};var Y={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return re.apply(Y,arguments)};var Q=/^[:|\|]/;function re(j,q,W){var ae=this,G=arguments;q||(q={});var ee={};return j.replace(r.TEMPLATE_STRING_REGEX,function(te,le,ue){var de,he,be,me="_xother"===le||"_yother"===le,_e="_xother_"===le||"_yother_"===le,Ee="xother_"===le||"yother_"===le,De="xother"===le||"yother"===le||me||Ee||_e,Se=le;if((me||_e)&&(Se=Se.substring(1)),(Ee||_e)&&(Se=Se.substring(0,Se.length-1)),De){if(void 0===(de=q[Se]))return""}else for(be=3;be<G.length;be++)if(he=G[be]){if(he.hasOwnProperty(Se)){de=he[Se];break}if(V.test(Se)||(de=r.nestedProperty(he,Se).get(),(de=ee[Se]||r.nestedProperty(he,Se).get())&&(ee[Se]=de)),void 0!==de)break}if(void 0===de&&ae)return ae.count<ae.max&&(r.warn("Variable '"+Se+"' in "+ae.name+" could not be found!"),de=te),ae.count===ae.max&&r.warn("Too many "+ae.name+" warnings - additional warnings will be suppressed"),ae.count++,te;if(ue){var Fe;if(":"===ue[0]&&(de=(Fe=W?W.numberFormat:r.numberFormat)(ue.replace(Q,""))(de)),"|"===ue[0]){Fe=W?W.timeFormat:x;var ve=r.dateTime2ms(de);de=r.formatDate(ve,ue.replace(Q,""),!1,Fe)}}else{var Te=Se+"Label";q.hasOwnProperty(Te)&&(de=q[Te])}return De&&(de="("+de+")",(me||_e)&&(de=" "+de),(Ee||_e)&&(de+=" ")),de})}r.subplotSort=function(j,q){for(var W=Math.min(j.length,q.length)+1,ae=0,G=0,ee=0;ee<W;ee++){var te=j.charCodeAt(ee)||0,le=q.charCodeAt(ee)||0,ue=te>=48&&te<=57,de=le>=48&&le<=57;if(ue&&(ae=10*ae+te-48),de&&(G=10*G+le-48),!ue||!de){if(ae!==G)return ae-G;if(te!==le)return te-le}}return G-ae};var $=2e9;r.seedPseudoRandom=function(){$=2e9},r.pseudoRandom=function(){var j=$;return $=(69069*$+1)%4294967296,Math.abs($-j)<429496729?r.pseudoRandom():$/4294967296},r.fillText=function(j,q,W){var ae=Array.isArray(W)?function(te){W.push(te)}:function(te){W.text=te},G=r.extractOption(j,q,"htx","hovertext");if(r.isValidTextValue(G))return ae(G);var ee=r.extractOption(j,q,"tx","text");return r.isValidTextValue(ee)?ae(ee):void 0},r.isValidTextValue=function(j){return j||0===j},r.formatPercent=function(j,q){q=q||0;for(var W=(Math.round(100*j*Math.pow(10,q))*Math.pow(.1,q)).toFixed(q)+"%",ae=0;ae<q;ae++)-1!==W.indexOf(".")&&(W=(W=W.replace("0%","%")).replace(".%","%"));return W},r.isHidden=function(j){var q=window.getComputedStyle(j).display;return!q||"none"===q},r.strTranslate=function(j,q){return j||q?"translate("+j+","+q+")":""},r.strRotate=function(j){return j?"rotate("+j+")":""},r.strScale=function(j){return 1!==j?"scale("+j+")":""},r.getTextTransform=function(j){var q=j.noCenter,W=j.textX,ae=j.textY,ue=j.rotate,de=j.scale;return de?de>1&&(de=1):de=0,r.strTranslate(j.targetX-de*(W+(j.anchorX||0)),j.targetY-de*(ae+(j.anchorY||0)))+r.strScale(de)+(ue?"rotate("+ue+(q?"":" "+W+" "+ae)+")":"")},r.ensureUniformFontSize=function(j,q){var W=r.extendFlat({},q);return W.size=Math.max(q.size,j._fullLayout.uniformtext.minsize||0),W},r.join2=function(j,q,W){var ae=j.length;return ae>1?j.slice(0,-1).join(q)+W+j[ae-1]:j.join(q)},r.bigFont=function(j){return Math.round(1.2*j)};var J=r.getFirefoxVersion(),ie=null!==J&&J<86;r.getPositionFromD3Event=function(){return ie?[v.event.layerX,v.event.layerY]:[v.event.offsetX,v.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(_,oe,se){"use strict";oe.exports=function(v){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(v):"[object Object]"===Object.prototype.toString.call(v)&&Object.getPrototypeOf(v).hasOwnProperty("hasOwnProperty")}},{}],505:[function(_,oe,se){"use strict";var v=_("./nested_property"),x=/^\w*$/;oe.exports=function(T,b,e,o){var i,l,r;e=e||"name",o=o||"value";var y={};b&&b.length?(r=v(T,b),l=r.get()):l=T,b=b||"";var h={};if(l)for(i=0;i<l.length;i++)h[l[i][e]]=i;var s=x.test(o),d={set:function(p,c){var g=null===c?4:0;if(!l){if(!r||4===g)return;r.set(l=[])}var m=h[p];if(void 0===m){if(4===g)return;g|=3,h[p]=m=l.length}else c!==(s?l[m][o]:v(l[m],o).get())&&(g|=2);var u=l[m]=l[m]||{};return u[e]=p,s?u[o]=c:v(u,o).set(c),null!==c&&(g&=-5),y[m]=y[m]|g,d},get:function(p){if(l){var c=h[p];return void 0===c?void 0:s?l[c][o]:v(l[c],o).get()}},rename:function(p,c){var g=h[p];return void 0===g||(y[g]=1|y[g],h[c]=g,delete h[p],l[g][e]=c),d},remove:function(p){var c=h[p];if(void 0===c)return d;var g=l[c];if(Object.keys(g).length>2)return y[c]=2|y[c],d.set(p,null);if(s){for(i=c;i<l.length;i++)y[i]=3|y[i];for(i=c;i<l.length;i++)h[l[i][e]]--;l.splice(c,1),delete h[p]}else v(g,o).set(null),y[c]=6|y[c];return d},constructUpdate:function(){for(var p,c,g={},m=Object.keys(y),u=0;u<m.length;u++)p=b+"["+(c=m[u])+"]",l[c]?(1&y[c]&&(g[p+"."+e]=l[c][e]),2&y[c]&&(g[p+"."+o]=s?4&y[c]?null:l[c][o]:4&y[c]?null:v(l[c],o).get())):g[p]=null;return g}};return d}},{"./nested_property":511}],506:[function(_,oe,se){"use strict";var v=_("../registry");oe.exports=function(x,T){for(var b=x._context.locale,e=0;e<2;e++){for(var o=x._context.locales,i=0;i<2;i++){var l=(o[b]||{}).dictionary;if(l){var r=l[T];if(r)return r}o=v.localeRegistry}var y=b.split("-")[0];if(y===b)break;b=y}return T}},{"../registry":638}],507:[function(_,oe,se){"use strict";var v=_("../plot_api/plot_config").dfltConfig,x=_("./notifier"),T=oe.exports={};T.log=function(){var b;if(v.logging>1){var e=["LOG:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.trace.apply(console,e)}if(v.notifyOnLogging>1){var o=[];for(b=0;b<arguments.length;b++)o.push(arguments[b]);x(o.join("<br>"),"long")}},T.warn=function(){var b;if(v.logging>0){var e=["WARN:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.trace.apply(console,e)}if(v.notifyOnLogging>0){var o=[];for(b=0;b<arguments.length;b++)o.push(arguments[b]);x(o.join("<br>"),"stick")}},T.error=function(){var b;if(v.logging>0){var e=["ERROR:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.error.apply(console,e)}if(v.notifyOnLogging>0){var o=[];for(b=0;b<arguments.length;b++)o.push(arguments[b]);x(o.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(_,oe,se){"use strict";var v=_("@plotly/d3");oe.exports=function(x,T,b){var e=x.selectAll("g."+b.replace(/\s/g,".")).data(T,function(i){return i[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",b),e.order();var o=x.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(i){i[0][o]=v.select(this)}),e}},{"@plotly/d3":58}],509:[function(_,oe,se){"use strict";var v=_("gl-mat4");se.init2dArray=function(x,T){for(var b=new Array(x),e=0;e<x;e++)b[e]=new Array(T);return b},se.transposeRagged=function(x){var T,b,e=0,o=x.length;for(T=0;T<o;T++)e=Math.max(e,x[T].length);var i=new Array(e);for(T=0;T<e;T++)for(i[T]=new Array(o),b=0;b<o;b++)i[T][b]=x[b][T];return i},se.dot=function(x,T){if(!x.length||!T.length||x.length!==T.length)return null;var b,e,o=x.length;if(x[0].length)for(b=new Array(o),e=0;e<o;e++)b[e]=se.dot(x[e],T);else if(T[0].length){var i=se.transposeRagged(T);for(b=new Array(i.length),e=0;e<i.length;e++)b[e]=se.dot(x,i[e])}else for(b=0,e=0;e<o;e++)b+=x[e]*T[e];return b},se.translationMatrix=function(x,T){return[[1,0,x],[0,1,T],[0,0,1]]},se.rotationMatrix=function(x){var T=x*Math.PI/180;return[[Math.cos(T),-Math.sin(T),0],[Math.sin(T),Math.cos(T),0],[0,0,1]]},se.rotationXYMatrix=function(x,T,b){return se.dot(se.dot(se.translationMatrix(T,b),se.rotationMatrix(x)),se.translationMatrix(-T,-b))},se.apply3DTransform=function(x){return function(){var T=arguments,b=1===arguments.length?T[0]:[T[0],T[1],T[2]||0];return se.dot(x,[b[0],b[1],b[2],1]).slice(0,3)}},se.apply2DTransform=function(x){return function(){var T=arguments;3===T.length&&(T=T[0]);var b=1===arguments.length?T[0]:[T[0],T[1]];return se.dot(x,[b[0],b[1],1]).slice(0,2)}},se.apply2DTransform2=function(x){var T=se.apply2DTransform(x);return function(b){return T(b.slice(0,2)).concat(T(b.slice(2,4)))}},se.convertCssMatrix=function(x){if(x){var T=x.length;if(16===T)return x;if(6===T)return[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},se.inverseTransformMatrix=function(x){var T=[];return v.invert(T,x),[[T[0],T[1],T[2],T[3]],[T[4],T[5],T[6],T[7]],[T[8],T[9],T[10],T[11]],[T[12],T[13],T[14],T[15]]]}},{"gl-mat4":210}],510:[function(_,oe,se){"use strict";oe.exports={mod:function(v,x){var T=v%x;return T<0?T+x:T},modHalf:function(v,x){return Math.abs(v)>x/2?v-Math.round(v/x)*x:v}}},{}],511:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("./array").isArrayOrTypedArray;function T(y,h){return function(){var s,d,p,c,g,m=y;for(c=0;c<h.length-1;c++){if(-1===(s=h[c])){for(d=!0,p=[],g=0;g<m.length;g++)p[g]=T(m[g],h.slice(c+1))(),p[g]!==p[0]&&(d=!1);return d?p[0]:p}if("number"==typeof s&&!x(m)||"object"!=typeof(m=m[s])||null===m)return}if("object"==typeof m&&null!==m&&null!==(p=m[h[c]]))return p}}oe.exports=function(y,h){if(v(h))h=String(h);else if("string"!=typeof h||"[-1]"===h.substr(h.length-4))throw"bad property string";for(var s,d,p,c=0,g=h.split(".");c<g.length;){if(s=String(g[c]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])g[c]=s[1];else{if(0!==c)throw"bad property string";g.splice(0,1)}for(d=s[2].substr(1,s[2].length-2).split("]["),p=0;p<d.length;p++)c++,g.splice(c,0,Number(d[p]))}c++}return"object"!=typeof y?{set:function(){throw"bad container"},get:function(){},astr:h,parts:g,obj:y}:{set:o(y,g,h),get:T(y,g),astr:h,parts:g,obj:y}};var b=/(^|\.)args\[/;function e(y,h){return void 0===y||null===y&&!h.match(b)}function o(y,h,s){return function(d){var p,c,g=y,m="",u=[[y,m]],w=e(d,s);for(c=0;c<h.length-1;c++){if("number"==typeof(p=h[c])&&!x(g))throw"array index but container is not an array";if(-1===p){if(w=!l(g,h.slice(c+1),d,s))break;return}if(!r(g,p,h[c+1],w))break;if("object"!=typeof(g=g[p])||null===g)throw"container is not an object";m=i(m,p),u.push([g,m])}if(w){if(c===h.length-1&&(delete g[h[c]],Array.isArray(g)&&+h[c]==g.length-1))for(;g.length&&void 0===g[g.length-1];)g.pop()}else g[h[c]]=d}}function i(y,h){var s=h;return v(h)?s="["+h+"]":y&&(s="."+h),y+s}function l(y,h,s,d){var p,c=x(s),g=!0,m=s,u=d.replace("-1",0),w=!c&&e(s,u),f=h[0];for(p=0;p<y.length;p++)u=d.replace("-1",p),c&&(w=e(m=s[p%s.length],u)),w&&(g=!1),r(y,p,f,w)&&o(y[p],h,d.replace("-1",p))(m);return g}function r(y,h,s,d){if(void 0===y[h]){if(d)return!1;y[h]="number"==typeof s?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(_,oe,se){"use strict";oe.exports=function(){}},{}],513:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=[];oe.exports=function(b,e){if(-1===T.indexOf(b)){T.push(b);var o=1e3;x(e)?o=e:"long"===e&&(o=3e3);var i=v.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0),i.selectAll(".notifier-note").data(T).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var y=v.select(this);y.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){y.transition().call(l)});for(var h=y.append("p"),s=r.split(/<br\s*\/?>/g),d=0;d<s.length;d++)d&&h.append("br"),h.append("span").text(s[d]);"stick"===e?y.transition().duration(350).style("opacity",1):y.transition().duration(700).style("opacity",1).transition().delay(o).call(l)})}function l(r){r.duration(700).style("opacity",0).each("end",function(y){var h=T.indexOf(y);-1!==h&&T.splice(h,1),v.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(_,oe,se){"use strict";var v=_("./setcursor"),x="data-savedcursor";oe.exports=function(T,b){var e=T.attr(x);if(b){if(!e){for(var o=(T.attr("class")||"").split(" "),i=0;i<o.length;i++){var l=o[i];0===l.indexOf("cursor-")&&T.attr(x,l.substr(7)).classed(l,!1)}T.attr(x)||T.attr(x,"!!")}v(T,b)}else e&&(T.attr(x,null),"!!"===e?v(T):v(T,e))}},{"./setcursor":524}],515:[function(_,oe,se){"use strict";var v=_("./matrix").dot,x=_("../constants/numerical").BADNUM,T=oe.exports={};T.tester=function(b){var e,o=b.slice(),i=o[0][0],l=i,r=o[0][1],y=r;for(o.push(o[0]),e=1;e<o.length;e++)i=Math.min(i,o[e][0]),l=Math.max(l,o[e][0]),r=Math.min(r,o[e][1]),y=Math.max(y,o[e][1]);var h,s=!1;5===o.length&&(o[0][0]===o[1][0]?o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]&&(s=!0,h=function(c){return c[0]===o[0][0]}):o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0]&&(s=!0,h=function(c){return c[1]===o[0][1]}));var d=!0,p=o[0];for(e=1;e<o.length;e++)if(p[0]!==o[e][0]||p[1]!==o[e][1]){d=!1;break}return{xmin:i,xmax:l,ymin:r,ymax:y,pts:o,contains:s?function(c,g){var m=c[0],u=c[1];return!(m===x||m<i||m>l||u===x||u<r||u>y||g&&h(c))}:function(c,g){var m=c[0],u=c[1];if(m===x||m<i||m>l||u===x||u<r||u>y)return!1;var w,f,A,M,k,E=o.length,P=o[0][0],D=o[0][1],F=0;for(w=1;w<E;w++)if(f=P,A=D,P=o[w][0],D=o[w][1],!(m<(M=Math.min(f,P))||m>Math.max(f,P)||u>Math.max(A,D)))if(u<Math.min(A,D))m!==M&&F++;else{if(u===(k=P===f?u:A+(m-f)*(D-A)/(P-f)))return 1!==w||!g;u<=k&&m!==M&&F++}return F%2==1},isRect:s,degenerate:d}},T.isSegmentBent=function(b,e,o,i){var l,r,y,h=b[e],s=[b[o][0]-h[0],b[o][1]-h[1]],d=v(s,s),p=Math.sqrt(d),c=[-s[1]/p,s[0]/p];for(l=e+1;l<o;l++)if((y=v(r=[b[l][0]-h[0],b[l][1]-h[1]],s))<0||y>d||Math.abs(v(r,c))>i)return!0;return!1},T.filter=function(b,e){var o=[b[0]],i=0,l=0;function r(y){b.push(y);var h=o.length,s=i;o.splice(l+1);for(var d=s+1;d<b.length;d++)(d===b.length-1||T.isSegmentBent(b,s,d+1,e))&&(o.push(b[d]),o.length<h-2&&(i=d,l=o.length-1),s=d)}return b.length>1&&r(b.pop()),{addPt:r,raw:b,filtered:o}}},{"../constants/numerical":479,"./matrix":509}],516:[function(_,oe,se){(function(v){(function(){"use strict";var x=_("./show_no_webgl_msg"),T=_("regl");oe.exports=function(b,e,o){var i=b._fullLayout,l=!0;return i._glcanvas.each(function(r){if(r.regl)r.regl.preloadCachedCode(o);else if(!r.pick||i._has("parcoords")){try{r.regl=T({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:b._context.plotGlPixelRatio||v.devicePixelRatio,extensions:e||[],cachedCode:o||{}})}catch(y){l=!1}r.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(y){b&&b.emit&&b.emit("plotly_webglcontextlost",{event:y,layer:r.key})},!1)}}),l||x({container:i._glcontainer.node()}),l}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("is-mobile");oe.exports=function(T){var b,h;if("string"!=typeof(b=T&&T.hasOwnProperty("userAgent")?T.userAgent:("undefined"!=typeof navigator&&(h=navigator.userAgent),h&&h.headers&&"string"==typeof h.headers["user-agent"]&&(h=h.headers["user-agent"]),h)))return!0;var e=x({ua:{headers:{"user-agent":b}},tablet:!0,featureDetect:!1});if(!e)for(var o=b.split(" "),i=1;i<o.length;i++)if(-1!==o[i].indexOf("Safari"))for(var l=i-1;l>-1;l--){var r=o[l];if("Version/"===r.substr(0,8)){var y=r.substr(8).split(".")[0];if(v(y)&&(y=+y),y>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(_,oe,se){"use strict";oe.exports=function(v,x){if(x instanceof RegExp){for(var T=x.toString(),b=0;b<v.length;b++)if(v[b]instanceof RegExp&&v[b].toString()===T)return v;v.push(x)}else!x&&0!==x||-1!==v.indexOf(x)||v.push(x);return v}},{}],519:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plot_api/plot_config").dfltConfig,T={add:function(b,e,o,i,l){var r,y;b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},y=b.undoQueue.index,b.autoplay?b.undoQueue.inSequence||(b.autoplay=!1):(!b.undoQueue.sequence||b.undoQueue.beginSequence?(b.undoQueue.queue.splice(y,b.undoQueue.queue.length-y,r={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),b.undoQueue.index+=1):r=b.undoQueue.queue[y-1],b.undoQueue.beginSequence=!1,r&&(r.undo.calls.unshift(e),r.undo.args.unshift(o),r.redo.calls.push(i),r.redo.args.push(l)),b.undoQueue.queue.length>x.queueLength&&(b.undoQueue.queue.shift(),b.undoQueue.index--))},startSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!0,b.undoQueue.beginSequence=!0},stopSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!1,b.undoQueue.beginSequence=!1},undo:function(b){var e,o;if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||b.undoQueue.index<=0)){for(b.undoQueue.index--,e=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,o=0;o<e.undo.calls.length;o++)T.plotDo(b,e.undo.calls[o],e.undo.args[o]);b.undoQueue.inSequence=!1,b.autoplay=!1}},redo:function(b){var e,o;if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||b.undoQueue.index>=b.undoQueue.queue.length)){for(e=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,o=0;o<e.redo.calls.length;o++)T.plotDo(b,e.redo.calls[o],e.redo.args[o]);b.undoQueue.inSequence=!1,b.autoplay=!1,b.undoQueue.index++}},plotDo:function(b,e,o){b.autoplay=!0,o=function(i,l){for(var r,y=[],h=0;h<l.length;h++)y[h]=(r=l[h])===i?r:"object"==typeof r?Array.isArray(r)?v.extendDeep([],r):v.extendDeepAll({},r):r;return y}(b,o),e.apply(null,o)}};oe.exports=T},{"../lib":503,"../plot_api/plot_config":541}],520:[function(_,oe,se){"use strict";se.counter=function(v,x,T,b){var e=(x||"")+(T?"":"$"),o=!1===b?"":"^";return"xy"===v?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(o+v+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(_,oe,se){"use strict";var v=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,x=/^[^\.\[\]]+$/;oe.exports=function(T,b){for(;b;){var e=T.match(v);if(e)T=e[1];else{if(!T.match(x))throw new Error("bad relativeAttr call:"+[T,b]);T=""}if("^"!==b.charAt(0))break;b=b.slice(1)}return T&&"["!==b.charAt(0)?T+"."+b:T+b}},{}],522:[function(_,oe,se){"use strict";var v=_("./array").isArrayOrTypedArray,x=_("./is_plain_object");oe.exports=function T(b,e){for(var o in e){var i=e[o],l=b[o];if(l!==i)if("_"===o.charAt(0)||"function"==typeof i){if(o in b)continue;b[o]=i}else if(v(i)&&v(l)&&x(i[0])){if("customdata"===o||"ids"===o)continue;for(var r=Math.min(i.length,l.length),y=0;y<r;y++)l[y]!==i[y]&&x(i[y])&&x(l[y])&&T(l[y],i[y])}else x(i)&&x(l)&&(T(l,i),Object.keys(l).length||delete b[o])}}},{"./array":485,"./is_plain_object":504}],523:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("./loggers"),T=_("./identity"),b=_("../constants/numerical").BADNUM;function e(r,y){return r<y}function o(r,y){return r<=y}function i(r,y){return r>y}function l(r,y){return r>=y}se.findBin=function(r,y,h){if(v(y.start))return h?Math.ceil((r-y.start)/y.size-1e-9)-1:Math.floor((r-y.start)/y.size+1e-9);var s,d,p=0,c=y.length,g=0,m=c>1?(y[c-1]-y[0])/(c-1):1;for(d=m>=0?h?e:o:h?l:i,r+=1e-9*m*(h?-1:1)*(m>=0?1:-1);p<c&&g++<100;)d(y[s=Math.floor((p+c)/2)],r)?p=s+1:c=s;return g>90&&x.log("Long binary search..."),p-1},se.sorterAsc=function(r,y){return r-y},se.sorterDes=function(r,y){return y-r},se.distinctVals=function(r){var y,h=r.slice();for(h.sort(se.sorterAsc),y=h.length-1;y>-1&&h[y]===b;y--);for(var s,d=h[y]-h[0]||1,p=d/(y||1)/1e4,c=[],g=0;g<=y;g++){var m=h[g],u=m-s;void 0===s?(c.push(m),s=m):u>p&&(d=Math.min(d,u),c.push(m),s=m)}return{vals:c,minDiff:d}},se.roundUp=function(r,y,h){for(var s,d=0,p=y.length-1,c=0,g=h?0:1,m=h?1:0,u=h?Math.ceil:Math.floor;d<p&&c++<100;)y[s=u((d+p)/2)]<=r?d=s+g:p=s-m;return y[d]},se.sort=function(r,y){for(var h=0,s=0,d=1;d<r.length;d++){var p=y(r[d],r[d-1]);if(p<0?h=1:p>0&&(s=1),h&&s)return r.sort(y)}return s?r:r.reverse()},se.findIndexOfMin=function(r,y){y=y||T;for(var h,s=1/0,d=0;d<r.length;d++){var p=y(r[d]);p<s&&(s=p,h=d)}return h}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(_,oe,se){"use strict";oe.exports=function(v,x){(v.attr("class")||"").split(" ").forEach(function(T){0===T.indexOf("cursor-")&&v.classed(T,!1)}),x&&v.classed("cursor-"+x,!0)}},{}],525:[function(_,oe,se){"use strict";var v=_("../components/color"),x=function(){};oe.exports=function(T){for(var b in T)"function"==typeof T[b]&&(T[b]=x);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=v.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=v.lightLine,e.style["z-index"]=30;var o=document.createElement("p");return o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",o.style.position="relative",o.style.top="50%",o.style.left="50%",o.style.height="30%",o.style.width="50%",o.style.margin="-15% 0 0 -25%",e.appendChild(o),T.container.appendChild(e),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(_,oe,se){"use strict";oe.exports=function(v){return Object.keys(v).sort()}},{}],527:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("./array").isArrayOrTypedArray;se.aggNums=function(T,b,e,o){var i,l;if((!o||o>e.length)&&(o=e.length),v(b)||(b=!1),x(e[0])){for(l=new Array(o),i=0;i<o;i++)l[i]=se.aggNums(T,b,e[i]);e=l}for(i=0;i<o;i++)v(b)?v(e[i])&&(b=T(+b,+e[i])):b=e[i];return b},se.len=function(T){return se.aggNums(function(b){return b+1},0,T)},se.mean=function(T,b){return b||(b=se.len(T)),se.aggNums(function(e,o){return e+o},0,T)/b},se.midRange=function(T){if(void 0!==T&&0!==T.length)return(se.aggNums(Math.max,null,T)+se.aggNums(Math.min,null,T))/2},se.variance=function(T,b,e){return b||(b=se.len(T)),v(e)||(e=se.mean(T,b)),se.aggNums(function(o,i){return o+Math.pow(i-e,2)},0,T)/b},se.stdev=function(T,b,e){return Math.sqrt(se.variance(T,b,e))},se.median=function(T){var b=T.slice().sort();return se.interp(b,.5)},se.interp=function(T,b){if(!v(b))throw"n should be a finite number";if((b=b*T.length-.5)<0)return T[0];if(b>T.length-1)return T[T.length-1];var e=b%1;return e*T[Math.ceil(b)]+(1-e)*T[Math.floor(b)]}},{"./array":485,"fast-isnumeric":190}],528:[function(_,oe,se){"use strict";var v=_("color-normalize");oe.exports=function(x){return x?v(x):[0,0,0,1]}},{"color-normalize":89}],529:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../lib"),T=x.strTranslate,b=_("../constants/xmlns_namespaces"),e=_("../constants/alignment").LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;se.convertToTspans=function(L,I,B){var V=L.text(),Z=!L.attr("data-notex")&&I&&I._context.typesetMath&&"undefined"!=typeof MathJax&&V.match(o),Y=v.select(L.node().parentNode);if(!Y.empty()){var Q=L.attr("class")?L.attr("class").split(" ")[0]:"text";return Y.selectAll("svg."+(Q+="-math")).remove(),Y.selectAll("g."+Q+"-group").remove(),L.style("display",null).attr({"data-unformatted":V,"data-math":"N"}),Z?(I&&I._promises||[]).push(new Promise(function($){L.style("display","none");var J=parseInt(L.node().style.fontSize,10);!function(j,q,W){var ae,G,ee,te,le=parseInt((MathJax.version||"").split(".")[0]);if(2===le||3===le){var ue=function(){var he="math-output-"+x.randstr({},64),be=(te=v.select("body").append("div").attr({id:he}).style({visibility:"hidden",position:"absolute","font-size":q.fontSize+"px"}).text(j.replace(i,"\\lt ").replace(l,"\\gt "))).node();return 2===le?MathJax.Hub.Typeset(be):MathJax.typeset([be])},de=function(){var he=te.select(2===le?".MathJax_SVG":".MathJax"),be=!he.empty()&&te.select("svg").node();if(be){var me,_e=be.getBoundingClientRect();me=2===le?v.select("body").select("#MathJax_SVG_glyphs"):he.select("defs"),W(he,me,_e)}else x.log("There was an error in the tex syntax.",j),W();te.remove()};2===le?MathJax.Hub.Queue(function(){return G=x.extendDeepAll({},MathJax.Hub.config),ee=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:r},displayAlign:"left"})},function(){if("SVG"!==(ae=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ue,de,function(){if("SVG"!==ae)return MathJax.Hub.setRenderer(ae)},function(){return void 0!==ee&&(MathJax.Hub.processSectionDelay=ee),MathJax.Hub.Config(G)}):3===le&&(G=x.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=r,"svg"!==(ae=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ue(),de(),"svg"!==ae&&(MathJax.config.startup.output=ae),MathJax.config=G}))}else x.warn("No MathJax version:",MathJax.version)}(Z[2],{fontSize:J},function(j,q,W){Y.selectAll("svg."+Q).remove(),Y.selectAll("g."+Q+"-group").remove();var ae=j&&j.select("svg");if(!ae||!ae.node())return re(),void $();var G=Y.append("g").classed(Q+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});G.node().appendChild(ae.node()),q&&q.node()&&ae.node().insertBefore(q.node().cloneNode(!0),ae.node().firstChild);var ee=W.width,te=W.height;ae.attr({class:Q,height:te,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var le=L.node().style.fill||"black",ue=ae.select("g");ue.attr({fill:le,stroke:le});var de=ue.node().getBoundingClientRect(),he=de.width,be=de.height;(he>ee||be>te)&&(ae.style("overflow","hidden"),he=(de=ae.node().getBoundingClientRect()).width,be=de.height);var me=+L.attr("x"),_e=+L.attr("y"),Ee=-(J||L.node().getBoundingClientRect().height)/4;if("y"===Q[0])G.attr({transform:"rotate("+[-90,me,_e]+")"+T(-he/2,Ee-be/2)});else if("l"===Q[0])_e=Ee-be/2;else if("a"===Q[0]&&0!==Q.indexOf("atitle"))me=0,_e=Ee;else{var De=L.attr("text-anchor");me-=he*("middle"===De?.5:"end"===De?1:0),_e=_e+Ee-be/2}ae.attr({x:me,y:_e}),B&&B.call(L,G),$(G)})})):re(),L}function re(){Y.empty()||(Q=L.attr("class")+"-math",Y.select("svg."+Q).remove()),L.text("").style("white-space","pre"),function($,J){J=J.replace(p," ");var ie,j=!1,q=[],W=-1;function ae(){W++;var ve=document.createElementNS(b.svg,"tspan");v.select(ve).attr({class:"line",dy:W*e+"em"}),$.appendChild(ve),ie=ve;var Te=q;if(q=[{node:ve}],Te.length>1)for(var Ie=1;Ie<Te.length;Ie++)G(Te[Ie])}function G(ve){var Te,Ie=ve.type,Ce={};if("a"===Ie){Te="a";var Re=ve.target,Ue=ve.href,qe=ve.popup;Ue&&(Ce={"xlink:xlink:show":"_blank"===Re||"_"!==Re.charAt(0)?"new":"replace",target:Re,"xlink:xlink:href":Ue},qe&&(Ce.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+qe+'");return false;'))}else Te="tspan";ve.style&&(Ce.style=ve.style);var Xe=document.createElementNS(b.svg,Te);if("sup"===Ie||"sub"===Ie){ee(ie,"\u200b"),ie.appendChild(Xe);var st=document.createElementNS(b.svg,"tspan");ee(st,"\u200b"),v.select(st).attr("dy",s[Ie]),Ce.dy=h[Ie],ie.appendChild(Xe),ie.appendChild(st)}else ie.appendChild(Xe);v.select(Xe).attr(Ce),ie=ve.node=Xe,q.push(ve)}function ee(ve,Te){ve.appendChild(document.createTextNode(Te))}function te(ve){if(1!==q.length){var Te=q.pop();ve!==Te.type&&x.log("Start tag <"+Te.type+"> doesnt match end tag <"+ve+">. Pretending it did match.",J),ie=q[q.length-1].node}else x.log("Ignoring unexpected end tag </"+ve+">.",J)}m.test(J)?ae():(ie=$,q=[{node:$}]);for(var le=J.split(c),ue=0;ue<le.length;ue++){var de=le[ue],he=de.match(g),be=he&&he[2].toLowerCase(),me=y[be];if("br"===be)ae();else if(void 0===me)ee(ie,D(de));else if(he[1])te(be);else{var _e=he[4],Ee={type:be},De=M(_e,u);if(De?(De=De.replace(k,"$1 fill:"),me&&(De+=";"+me)):me&&(De=me),De&&(Ee.style=De),"a"===be){j=!0;var Se=M(_e,w);if(Se){var Fe=F(Se);Fe&&(Ee.href=Fe,Ee.target=M(_e,f)||"_blank",Ee.popup=M(_e,A))}}G(Ee)}}return j}(L.node(),V)&&L.style("pointer-events","all"),se.positionText(L),B&&B.call(L)}};var i=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g,r=[["$","$"],["\\(","\\)"]],y={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},d=["http:","https:","mailto:","",void 0,":"],p=se.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;se.BR_TAG_ALL=/<br(\s+.*)?>/gi;var u=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,f=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(L,I){if(!L)return null;var B=L.match(I),V=B&&(B[3]||B[4]);return V&&D(V)}var k=/(^|;)\s*color:/;se.plainText=function(L,I){for(var B=void 0!==(I=I||{}).len&&-1!==I.len?I.len:1/0,V=void 0!==I.allowedTags?I.allowedTags:["br"],Y=L.split(c),Q=[],re="",$=0,J=0;J<Y.length;J++){var ie=Y[J],j=ie.match(g),q=j&&j[2].toLowerCase();if(q)-1!==V.indexOf(q)&&(Q.push(ie),re=q);else{var W=ie.length;if($+W<B)Q.push(ie),$+=W;else if($<B){var ae=B-$;re&&("br"!==re||ae<=3||W<=3)&&Q.pop(),Q.push(B>3?ie.substr(0,ae-3)+"...":ie.substr(0,ae));break}re=""}}return Q.join("")};var E={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},P=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(L){return L.replace(P,function(I,B){return("#"===B.charAt(0)?function(V){if(!(V>1114111)){var Z=String.fromCodePoint;if(Z)return Z(V);var Y=String.fromCharCode;return V<=65535?Y(V):Y(55232+(V>>10),V%1024+56320)}}("x"===B.charAt(1)?parseInt(B.substr(2),16):parseInt(B.substr(1),10)):E[B])||I})}function F(L){var I=encodeURI(decodeURI(L)),B=document.createElement("a"),V=document.createElement("a");B.href=L,V.href=I;var Y=V.protocol;return-1!==d.indexOf(B.protocol)&&-1!==d.indexOf(Y)?I:""}function R(L,I,B){var V,Z,Y,Q=B.horizontalAlign,re=B.verticalAlign||"top",$=L.node().getBoundingClientRect(),J=I.node().getBoundingClientRect();return Z="bottom"===re?function(){return $.bottom-V.height}:"middle"===re?function(){return $.top+($.height-V.height)/2}:function(){return $.top},Y="right"===Q?function(){return $.right-V.width}:"center"===Q?function(){return $.left+($.width-V.width)/2}:function(){return $.left},function(){V=this.node().getBoundingClientRect();var ie=Y()-J.left,j=Z()-J.top,q=B.gd||{};if(B.gd){q._fullLayout._calcInverseTransform(q);var W=x.apply3DTransform(q._fullLayout._invTransform)(ie,j);ie=W[0],j=W[1]}return this.style({top:j+"px",left:ie+"px","z-index":1e3}),this}}se.convertEntities=D,se.sanitizeHTML=function(L){L=L.replace(p," ");for(var I=document.createElement("p"),B=I,V=[],Z=L.split(c),Y=0;Y<Z.length;Y++){var Q=Z[Y],re=Q.match(g),$=re&&re[2].toLowerCase();if($ in y)if(re[1])V.length&&(B=V.pop());else{var J=re[4],ie=M(J,u),j=ie?{style:ie}:{};if("a"===$){var q=M(J,w);if(q){var W=F(q);if(W){j.href=W;var ae=M(J,f);ae&&(j.target=ae)}}}var G=document.createElement($);B.appendChild(G),v.select(G).attr(j),B=G,V.push(G)}else B.appendChild(document.createTextNode(D(Q)))}return I.innerHTML},se.lineCount=function(L){return L.selectAll("tspan.line").size()||1},se.positionText=function(L,I,B){return L.each(function(){var V=v.select(this);function Z(re,$){return void 0===$?null===($=V.attr(re))&&(V.attr(re,0),$=0):V.attr(re,$),$}var Y=Z("x",I),Q=Z("y",B);"text"===this.nodeName&&V.selectAll("tspan.line").attr({x:Y,y:Q})})},se.makeTextShadow=function(L){var I="1px ",B="1px ",V="1px ";return I+B+V+L+", -"+I+"-"+B+V+L+", "+I+"-"+B+V+L+", -"+I+B+V+L},se.makeEditable=function(L,I){var B=I.gd,V=I.delegate,Z=v.dispatch("edit","input","cancel"),Y=V||L;if(L.style({"pointer-events":V?"none":"all"}),1!==L.size())throw new Error("boo");function Q(){var ie,j,q,W,ae;ie=v.select(B).select(".svg-container"),j=ie.append("div"),q=L.node().style,W=parseFloat(q.fontSize||12),void 0===(ae=I.text)&&(ae=L.attr("data-unformatted")),j.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":W,color:I.fill||q.fill||"black",opacity:1,"background-color":I.background||"transparent",outline:"#ffffff33 1px solid",margin:[-W/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ae).call(R(L,ie,I)).on("blur",function(){B._editing=!1,L.text(this.textContent).style({opacity:1});var G,ee=v.select(this).attr("class");(G=ee?"."+ee.split(" ")[0]+"-math-group":"[class*=-math-group]")&&v.select(L.node().parentNode).select(G).style({opacity:0});var te=this.textContent;v.select(this).transition().duration(0).remove(),v.select(document).on("mouseup",null),Z.edit.call(L,te)}).on("focus",function(){var G=this;B._editing=!0,v.select(document).on("mouseup",function(){if(v.event.target===G)return!1;document.activeElement===j.node()&&j.node().blur()})}).on("keyup",function(){27===v.event.which?(B._editing=!1,L.style({opacity:1}),v.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(L,this.textContent)):(Z.input.call(L,this.textContent),v.select(this).call(R(L,ie,I)))}).on("keydown",function(){13===v.event.which&&this.blur()}).call(re),L.style({opacity:0});var $,J=Y.attr("class");($=J?"."+J.split(" ")[0]+"-math-group":"[class*=-math-group]")&&v.select(L.node().parentNode).select($).style({opacity:0})}function re($){var J=$.node(),ie=document.createRange();ie.selectNodeContents(J);var j=window.getSelection();j.removeAllRanges(),j.addRange(ie),J.focus()}return I.immediate?Q():Y.on("click",Q),v.rebind(L,Z,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(_,oe,se){"use strict";var v={};function x(T){T&&null!==T.timer&&(clearTimeout(T.timer),T.timer=null)}se.throttle=function(T,b,e){var o=v[T],i=Date.now();if(!o){for(var l in v)v[l].ts<i-6e4&&delete v[l];o=v[T]={ts:0,timer:null}}function r(){e(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}x(o),i>o.ts+b?r():o.timer=setTimeout(function(){r(),o.timer=null},b)},se.done=function(T){var b=v[T];return b&&b.timer?new Promise(function(e){var o=b.onDone;b.onDone=function(){o&&o(),e(),b.onDone=null}}):Promise.resolve()},se.clear=function(T){if(T)x(v[T]),delete v[T];else for(var b in v)se.clear(b)}},{}],531:[function(_,oe,se){"use strict";var v=_("fast-isnumeric");oe.exports=function(x,T){if(x>0)return Math.log(x)/Math.LN10;var b=Math.log(Math.min(T[0],T[1]))/Math.LN10;return v(b)||(b=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),b}},{"fast-isnumeric":190}],532:[function(_,oe,se){"use strict";var v=oe.exports={},x=_("../plots/geo/constants").locationmodeToLayer,T=_("topojson-client").feature;v.getTopojsonName=function(b){return[b.scope.replace(/ /g,"-"),"_",b.resolution.toString(),"m"].join("")},v.getTopojsonPath=function(b,e){return b+e+".json"},v.getTopojsonFeatures=function(b,e){return T(e,e.objects[x[b.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(_,oe,se){"use strict";oe.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(_,oe,se){"use strict";oe.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(_,oe,se){"use strict";var v=_("../registry");oe.exports=function(x){for(var T,b,e=v.layoutArrayContainers,o=v.layoutArrayRegexes,i=x.split("[")[0],l=0;l<o.length;l++)if((b=x.match(o[l]))&&0===b.index){T=b[0];break}if(T||(T=e[e.indexOf(i)]),!T)return!1;var r=x.substr(T.length);return r?!!(b=r.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:T,index:Number(b[1]),property:b[3]||""}:{array:T,index:"",property:""}}},{"../registry":638}],536:[function(_,oe,se){"use strict";var v=_("../lib"),x=v.extendFlat,T=v.isPlainObject,b={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},o=b.flags.slice().concat(["fullReplot"]),i=e.flags.slice().concat("layoutReplot");function l(h){for(var s={},d=0;d<h.length;d++)s[h[d]]=!1;return s}function r(h,s,d){var p=x({},h);for(var c in p){var g=p[c];T(g)&&(p[c]=y(g,s,0,c))}return"from-root"===d&&(p.editType=s),p}function y(h,s,d,p){if(h.valType){var c=x({},h);if(c.editType=s,Array.isArray(h.items)){c.items=new Array(h.items.length);for(var g=0;g<h.items.length;g++)c.items[g]=y(h.items[g],s)}return c}return r(h,s,"_"===p.charAt(0)?"nested":"from-root")}oe.exports={traces:b,layout:e,traceFlags:function(){return l(o)},layoutFlags:function(){return l(i)},update:function(h,s){var d=s.editType;if(d&&"none"!==d)for(var p=d.split("+"),c=0;c<p.length;c++)h[p[c]]=!0},overrideAll:r}},{"../lib":503}],537:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("gl-mat4/fromQuat"),T=_("../registry"),b=_("../lib"),e=_("../plots/plots"),o=_("../plots/cartesian/axis_ids"),i=_("../components/color"),l=o.cleanId,r=o.getFromTrace,y=T.traceIs;function h(f,A){var M=f[A],k=A.charAt(0);M&&"paper"!==M&&(f[A]=l(M,k,!0))}function s(f){function A(M,k){f[M]&&(!f.title||!f.title[k])&&(f.title||(f.title={}),f.title[k]=f[M],delete f[M])}f&&("string"!=typeof f.title&&"number"!=typeof f.title||(f.title={text:f.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"))}function d(f){if(!b.isPlainObject(f))return!1;var A=f.name;return delete f.name,delete f.showlegend,("string"==typeof A||"number"==typeof A)&&String(A)}function p(f,A,M,k){if(M&&!k)return f;if(k&&!M||!f.trim())return A;if(!A.trim())return f;var E,P=Math.min(f.length,A.length);for(E=0;E<P&&f.charAt(E)===A.charAt(E);E++);return f.substr(0,E).trim()}function c(f){var A="middle",M="center";return"string"==typeof f&&(-1!==f.indexOf("top")?A="top":-1!==f.indexOf("bottom")&&(A="bottom"),-1!==f.indexOf("left")?M="left":-1!==f.indexOf("right")&&(M="right")),A+" "+M}function g(f,A){return A in f&&"object"==typeof f[A]&&0===Object.keys(f[A]).length}se.clearPromiseQueue=function(f){Array.isArray(f._promises)&&f._promises.length>0&&b.log("Clearing previous rejected promises from queue."),f._promises=[]},se.cleanLayout=function(f){var A,M;f||(f={}),f.xaxis1&&(f.xaxis||(f.xaxis=f.xaxis1),delete f.xaxis1),f.yaxis1&&(f.yaxis||(f.yaxis=f.yaxis1),delete f.yaxis1),f.scene1&&(f.scene||(f.scene=f.scene1),delete f.scene1);var k=(e.subplotsRegistry.cartesian||{}).attrRegex,E=(e.subplotsRegistry.polar||{}).attrRegex,P=(e.subplotsRegistry.ternary||{}).attrRegex,D=(e.subplotsRegistry.gl3d||{}).attrRegex,F=Object.keys(f);for(A=0;A<F.length;A++){var R=F[A];if(k&&k.test(R)){var L=f[R];L.anchor&&"free"!==L.anchor&&(L.anchor=l(L.anchor)),L.overlaying&&(L.overlaying=l(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":!1===L.isdate&&!1===L.islog&&(L.type="linear")),"withzero"!==L.autorange&&"tozero"!==L.autorange||(L.autorange=!0,L.rangemode="tozero"),delete L.islog,delete L.isdate,delete L.categories,g(L,"domain")&&delete L.domain,void 0!==L.autotick&&(void 0===L.tickmode&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),s(L)}else if(E&&E.test(R))s(f[R].radialaxis);else if(P&&P.test(R)){var I=f[R];s(I.aaxis),s(I.baxis),s(I.caxis)}else if(D&&D.test(R)){var B=f[R],V=B.cameraposition;if(Array.isArray(V)&&4===V[0].length){var Y=V[1],Q=V[2],re=x([],V[0]),$=[];for(M=0;M<3;++M)$[M]=Y[M]+Q*re[2+4*M];B.camera={eye:{x:$[0],y:$[1],z:$[2]},center:{x:Y[0],y:Y[1],z:Y[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}s(B.xaxis),s(B.yaxis),s(B.zaxis)}}var J=Array.isArray(f.annotations)?f.annotations.length:0;for(A=0;A<J;A++){var ie=f.annotations[A];b.isPlainObject(ie)&&(ie.ref&&("paper"===ie.ref?(ie.xref="paper",ie.yref="paper"):"data"===ie.ref&&(ie.xref="x",ie.yref="y"),delete ie.ref),h(ie,"xref"),h(ie,"yref"))}var j=Array.isArray(f.shapes)?f.shapes.length:0;for(A=0;A<j;A++){var q=f.shapes[A];b.isPlainObject(q)&&(h(q,"xref"),h(q,"yref"))}var W=Array.isArray(f.images)?f.images.length:0;for(A=0;A<W;A++){var ae=f.images[A];b.isPlainObject(ae)&&(h(ae,"xref"),h(ae,"yref"))}var G=f.legend;return G&&(G.x>3?(G.x=1.02,G.xanchor="left"):G.x<-2&&(G.x=-.02,G.xanchor="right"),G.y>3?(G.y=1.02,G.yanchor="bottom"):G.y<-2&&(G.y=-.02,G.yanchor="top")),s(f),"rotate"===f.dragmode&&(f.dragmode="orbit"),i.clean(f),f.template&&f.template.layout&&se.cleanLayout(f.template.layout),f},se.cleanData=function(f){for(var A=0;A<f.length;A++){var M,k=f[A];if("histogramy"===k.type&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var E=i.defaults,P=k.error_y.color||(y(k,"bar")?i.defaultLine:E[A%E.length]);k.error_y.color=i.addOpacity(i.rgb(P),i.opacity(P)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&("h"!==k.bardir||!y(k,"bar")&&"histogram"!==k.type.substr(0,9)||(k.orientation="h",se.swapXYData(k)),delete k.bardir),"histogramy"===k.type&&se.swapXYData(k),"histogramx"!==k.type&&"histogramy"!==k.type||(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=l(k.xaxis,"x")),k.yaxis&&(k.yaxis=l(k.yaxis,"y")),y(k,"gl3d")&&k.scene&&(k.scene=e.subplotsRegistry.gl3d.cleanId(k.scene)),!y(k,"pie-like")&&!y(k,"bar-like"))if(Array.isArray(k.textposition))for(M=0;M<k.textposition.length;M++)k.textposition[M]=c(k.textposition[M]);else k.textposition&&(k.textposition=c(k.textposition));var D=T.getModule(k);if(D&&D.colorbar){var F=D.colorbar.container,R=F?k[F]:k;R&&R.colorscale&&("YIGnBu"===R.colorscale&&(R.colorscale="YlGnBu"),"YIOrRd"===R.colorscale&&(R.colorscale="YlOrRd"))}if("surface"===k.type&&b.isPlainObject(k.contours)){var L=["x","y","z"];for(M=0;M<L.length;M++){var I=k.contours[L[M]];b.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if("candlestick"===k.type||"ohlc"===k.type){var B=!1!==(k.increasing||{}).showlegend,V=!1!==(k.decreasing||{}).showlegend,Z=d(k.increasing),Y=d(k.decreasing);if(!1!==Z&&!1!==Y){var Q=p(Z,Y,B,V);Q&&(k.name=Q)}else!Z&&!Y||k.name||(k.name=Z||Y)}if(Array.isArray(k.transforms)){var re=k.transforms;for(M=0;M<re.length;M++){var $=re[M];if(b.isPlainObject($))switch($.type){case"filter":$.filtersrc&&($.target=$.filtersrc,delete $.filtersrc),$.calendar&&($.valuecalendar||($.valuecalendar=$.calendar),delete $.calendar);break;case"groupby":if($.styles=$.styles||$.style,$.styles&&!Array.isArray($.styles)){var J=$.styles,ie=Object.keys(J);$.styles=[];for(var j=0;j<ie.length;j++)$.styles.push({target:ie[j],value:J[ie[j]]})}}}}g(k,"line")&&delete k.line,"marker"in k&&(g(k.marker,"line")&&delete k.marker.line,g(k,"marker")&&delete k.marker),i.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),s(k),k.colorbar&&s(k.colorbar),k.marker&&k.marker.colorbar&&s(k.marker.colorbar),k.line&&k.line.colorbar&&s(k.line.colorbar),k.aaxis&&s(k.aaxis),k.baxis&&s(k.baxis)}},se.swapXYData=function(f){var A;if(b.swapAttrs(f,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(f.z)&&Array.isArray(f.z[0])&&(f.transpose?delete f.transpose:f.transpose=!0),f.error_x&&f.error_y){var M=f.error_y,k="copy_ystyle"in M?M.copy_ystyle:!(M.color||M.thickness||M.width);b.swapAttrs(f,["error_?.copy_ystyle"]),k&&b.swapAttrs(f,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof f.hoverinfo){var E=f.hoverinfo.split("+");for(A=0;A<E.length;A++)"x"===E[A]?E[A]="y":"y"===E[A]&&(E[A]="x");f.hoverinfo=E.join("+")}},se.coerceTraceIndices=function(f,A){if(v(A))return[A];if(!Array.isArray(A)||!A.length)return f.data.map(function(E,P){return P});if(Array.isArray(A)){for(var M=[],k=0;k<A.length;k++)b.isIndex(A[k],f.data.length)?M.push(A[k]):b.warn("trace index (",A[k],") is not a number or is out of bounds");return M}return A},se.manageArrayContainers=function(f,A,M){var k=f.obj,E=f.parts,P=E.length,D=E[P-1],F=v(D);if(F&&null===A){var R=E.slice(0,P-1).join(".");b.nestedProperty(k,R).get().splice(D,1)}else F&&void 0===f.get()&&void 0===f.get()&&(M[f.astr]=null),f.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function u(f){var A=f.search(m);if(A>0)return f.substr(0,A)}se.hasParent=function(f,A){for(var M=u(A);M;){if(M in f)return!0;M=u(M)}return!1};var w=["x","y","z"];se.clearAxisTypes=function(f,A,M){for(var k=0;k<A.length;k++)for(var E=f._fullData[k],P=0;P<3;P++){var D=r(f,E,w[P]);if(D&&"log"!==D.type){var F=D._name,R=D._id.substr(1);if("scene"===R.substr(0,5)){if(void 0!==M[R])continue;F=R+"."+F}var L=F+".type";void 0===M[F]&&void 0===M[L]&&b.nestedProperty(f.layout,L).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(_,oe,se){"use strict";var v=_("./plot_api");se._doPlot=v._doPlot,se.newPlot=v.newPlot,se.restyle=v.restyle,se.relayout=v.relayout,se.redraw=v.redraw,se.update=v.update,se._guiRestyle=v._guiRestyle,se._guiRelayout=v._guiRelayout,se._guiUpdate=v._guiUpdate,se._storeDirectGUIEdit=v._storeDirectGUIEdit,se.react=v.react,se.extendTraces=v.extendTraces,se.prependTraces=v.prependTraces,se.addTraces=v.addTraces,se.deleteTraces=v.deleteTraces,se.moveTraces=v.moveTraces,se.purge=v.purge,se.addFrames=v.addFrames,se.deleteFrames=v.deleteFrames,se.animate=v.animate,se.setPlotConfig=v.setPlotConfig,se.toImage=_("./to_image"),se.validate=_("./validate"),se.downloadImage=_("../snapshot/download");var x=_("./template_api");se.makeTemplate=x.makeTemplate,se.validateTemplate=x.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(_,oe,se){"use strict";var v=_("../lib/is_plain_object"),x=_("../lib/noop"),T=_("../lib/loggers"),b=_("../lib/search").sorterAsc,e=_("../registry");se.containerArrayMatch=_("./container_array_match");var o=se.isAddVal=function(l){return"add"===l||v(l)},i=se.isRemoveVal=function(l){return null===l||"remove"===l};se.applyContainerArrayChanges=function(l,r,y,h,s){var d=r.astr,p=e.getComponentMethod(d,"supplyLayoutDefaults"),c=e.getComponentMethod(d,"draw"),g=e.getComponentMethod(d,"drawOne"),m=h.replot||h.recalc||p===x||c===x,u=l.layout,w=l._fullLayout;if(y[""]){Object.keys(y).length>1&&T.warn("Full array edits are incompatible with other edits",d);var f=y[""][""];if(i(f))r.set(null);else{if(!Array.isArray(f))return T.warn("Unrecognized full array edit value",d,f),!0;r.set(f)}return!m&&(p(u,w),c(l),!0)}var A,M,k,E,P,D,F,L=Object.keys(y).map(Number).sort(b),I=r.get(),B=I||[],V=s(w,d).get(),Z=[],Y=-1,Q=B.length;for(A=0;A<L.length;A++)if(E=y[k=L[A]],P=Object.keys(E),F=o(D=E[""]),k<0||k>B.length-(F?0:1))T.warn("index out of range",d,k);else if(void 0!==D)P.length>1&&T.warn("Insertion & removal are incompatible with edits to the same index.",d,k),i(D)?Z.push(k):F?("add"===D&&(D={}),B.splice(k,0,D),V&&V.splice(k,0,{})):T.warn("Unrecognized full object edit value",d,k,D),-1===Y&&(Y=k);else for(M=0;M<P.length;M++)s(B[k],P[M],d+"["+k+"].").set(E[P[M]]);for(A=Z.length-1;A>=0;A--)B.splice(Z[A],1),V&&V.splice(Z[A],1);if(B.length?I||r.set(B):r.set(null),m)return!1;if(p(u,w),g!==x){var re;if(-1===Y)re=L;else{for(Q=Math.max(B.length,Q),re=[],A=0;A<L.length&&!((k=L[A])>=Y);A++)re.push(k);for(A=Y;A<Q;A++)re.push(A)}for(A=0;A<re.length;A++)g(l,re[A])}else c(l);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("has-hover"),b=_("../lib"),e=b.nestedProperty,o=_("../lib/events"),i=_("../lib/queue"),l=_("../registry"),r=_("./plot_schema"),y=_("../plots/plots"),h=_("../plots/cartesian/axes"),s=_("../components/drawing"),d=_("../components/color"),p=_("../plots/cartesian/graph_interact").initInteractions,c=_("../constants/xmlns_namespaces"),g=_("../plots/cartesian/select").clearSelect,m=_("./plot_config").dfltConfig,u=_("./manage_arrays"),w=_("./helpers"),f=_("./subroutines"),A=_("./edit_types"),M=_("../plots/cartesian/constants").AX_NAME_PATTERN,k=0;function E(ve){var Te=ve._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:ve.emit("plotly_afterplot")}function P(ve,Te){try{ve._fullLayout._paper.style("background",Te)}catch(Ie){b.error(Ie)}}function D(ve,Te){P(ve,d.combine(Te,"white"))}function F(ve,Te){if(!ve._context){ve._context=b.extendDeep({},m);var Ie=v.select("base");ve._context._baseUrl=Ie.size()&&Ie.attr("href")?window.location.href.split("#")[0]:""}var Ce,Re,Ue,qe=ve._context;if(Te){for(Re=Object.keys(Te),Ce=0;Ce<Re.length;Ce++)"editable"!==(Ue=Re[Ce])&&"edits"!==Ue&&Ue in qe&&(qe[Ue]="setBackground"===Ue&&"opaque"===Te[Ue]?D:Te[Ue]);Te.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var Xe=Te.editable;if(void 0!==Xe)for(qe.editable=Xe,Re=Object.keys(qe.edits),Ce=0;Ce<Re.length;Ce++)qe.edits[Re[Ce]]=Xe;if(Te.edits)for(Re=Object.keys(Te.edits),Ce=0;Ce<Re.length;Ce++)(Ue=Re[Ce])in qe.edits&&(qe.edits[Ue]=Te.edits[Ue]);qe._exportedPlot=Te._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),"hover"!==qe.displayModeBar||T||(qe.displayModeBar=!0),"transparent"!==qe.setBackground&&"function"==typeof qe.setBackground||(qe.setBackground=P),qe._hasZeroHeight=qe._hasZeroHeight||0===ve.clientHeight,qe._hasZeroWidth=qe._hasZeroWidth||0===ve.clientWidth;var st=qe.scrollZoom,He=qe._scrollZoom={};if(!0===st)He.cartesian=1,He.gl3d=1,He.geo=1,He.mapbox=1;else if("string"==typeof st){var $e=st.split("+");for(Ce=0;Ce<$e.length;Ce++)He[$e[Ce]]=1}else!1!==st&&(He.gl3d=1,He.geo=1,He.mapbox=1)}function R(ve,Te){var Ie,Ce,Re=Te+1,Ue=[];for(Ie=0;Ie<ve.length;Ie++)(Ce=ve[Ie])<0?Ue.push(Re+Ce):Ue.push(Ce);return Ue}function L(ve,Te,Ie){var Ce,Re;for(Ce=0;Ce<Te.length;Ce++){if((Re=Te[Ce])!==parseInt(Re,10))throw new Error("all values in "+Ie+" must be integers");if(Re>=ve.data.length||Re<-ve.data.length)throw new Error(Ie+" must be valid indices for gd.data.");if(Te.indexOf(Re,Ce+1)>-1||Re>=0&&Te.indexOf(-ve.data.length+Re)>-1||Re<0&&Te.indexOf(ve.data.length+Re)>-1)throw new Error("each index in "+Ie+" must be unique.")}}function I(ve,Te,Ie){if(!Array.isArray(ve.data))throw new Error("gd.data must be an array.");if(void 0===Te)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),L(ve,Te,"currentIndices"),void 0===Ie||Array.isArray(Ie)||(Ie=[Ie]),void 0!==Ie&&L(ve,Ie,"newIndices"),void 0!==Ie&&Te.length!==Ie.length)throw new Error("current and new indices must be of equal length.")}function B(ve,Te,Ie,Ce,Re){!function(tt,ct,bt,At){var Ut=b.isPlainObject(At);if(!Array.isArray(tt.data))throw new Error("gd.data must be an array");if(!b.isPlainObject(ct))throw new Error("update must be a key:value object");if(void 0===bt)throw new Error("indices must be an integer or array of integers");for(var Ct in L(tt,bt,"indices"),ct){if(!Array.isArray(ct[Ct])||ct[Ct].length!==bt.length)throw new Error("attribute "+Ct+" must be an array of length equal to indices array length");if(Ut&&(!(Ct in At)||!Array.isArray(At[Ct])||At[Ct].length!==ct[Ct].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ve,Te,Ie,Ce);for(var Ue=function(tt,ct,bt,At){var Ct,dt,at,Nt,rn=b.isPlainObject(At),en=[];for(var Ge in Array.isArray(bt)||(bt=[bt]),bt=R(bt,tt.data.length-1),ct)for(var Qe=0;Qe<bt.length;Qe++){if(Ct=(dt=e(tt.data[bt[Qe]],Ge)).get(),!b.isArrayOrTypedArray(at=ct[Ge][Qe]))throw new Error("attribute: "+Ge+" index: "+Qe+" must be an array");if(!b.isArrayOrTypedArray(Ct))throw new Error("cannot extend missing or non-array attribute: "+Ge);if(Ct.constructor!==at.constructor)throw new Error("cannot extend array with an array of a different type: "+Ge);x(Nt=rn?At[Ge][Qe]:At)||(Nt=-1),en.push({prop:dt,target:Ct,insert:at,maxp:Math.floor(Nt)})}return en}(ve,Te,Ie,Ce),qe={},Xe={},st=0;st<Ue.length;st++){var He=Ue[st].prop,et=Re(Ue[st].target,Ue[st].insert,Ue[st].maxp);He.set(et[0]),Array.isArray(qe[He.astr])||(qe[He.astr]=[]),qe[He.astr].push(et[1]),Array.isArray(Xe[He.astr])||(Xe[He.astr]=[]),Xe[He.astr].push(Ue[st].target.length)}return{update:qe,maxPoints:Xe}}function V(ve,Te){var Ie=new ve.constructor(ve.length+Te.length);return Ie.set(ve),Ie.set(Te,ve.length),Ie}function Z(ve,Te,Ie,Ce){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Re={};if("string"==typeof Te)Re[Te]=Ie;else{if(!b.isPlainObject(Te))return b.warn("Restyle fail.",Te,Ie,Ce),Promise.reject();Re=b.extendFlat({},Te),void 0===Ce&&(Ce=Ie)}Object.keys(Re).length&&(ve.changed=!0);var Ue=w.coerceTraceIndices(ve,Ce),qe=$(ve,Re,Ue),Xe=qe.flags;Xe.calc&&(ve.calcdata=void 0),Xe.clearAxisTypes&&w.clearAxisTypes(ve,Ue,{});var st=[];Xe.fullReplot?st.push(se._doPlot):(st.push(y.previousPromises),y.supplyDefaults(ve),Xe.markerSize&&(y.doCalcdata(ve),q(st)),Xe.style&&st.push(f.doTraceStyle),Xe.colorbars&&st.push(f.doColorBars),st.push(E)),st.push(y.rehover,y.redrag),i.add(ve,Z,[ve,qe.undoit,qe.traces],Z,[ve,qe.redoit,qe.traces]);var He=b.syncOrAsync(st,ve);return He&&He.then||(He=Promise.resolve()),He.then(function(){return ve.emit("plotly_restyle",qe.eventData),ve})}function Y(ve){return void 0===ve?null:ve}function Q(ve,Te){return Te?function(Ie,Ce,Re){var Ue=e(Ie,Ce),qe=Ue.set;return Ue.set=function(Xe){re((Re||"")+Ce,Ue.get(),Xe,ve),qe(Xe)},Ue}:e}function re(ve,Te,Ie,Ce){if(Array.isArray(Te)||Array.isArray(Ie))for(var Re=Array.isArray(Te)?Te:[],Ue=Array.isArray(Ie)?Ie:[],qe=Math.max(Re.length,Ue.length),Xe=0;Xe<qe;Xe++)re(ve+"["+Xe+"]",Re[Xe],Ue[Xe],Ce);else if(b.isPlainObject(Te)||b.isPlainObject(Ie)){var st=b.isPlainObject(Te)?Te:{},He=b.isPlainObject(Ie)?Ie:{},$e=b.extendFlat({},st,He);for(var et in $e)re(ve+"."+et,st[et],He[et],Ce)}else void 0===Ce[ve]&&(Ce[ve]=Y(Te))}function $(ve,Te,Ie){var Ce,Re=ve._fullLayout,Ue=ve._fullData,qe=ve.data,Xe=Re._guiEditing,st=Q(Re._preGUI,Xe),He=b.extendDeepAll({},Te);J(Te);var $e,et=A.traceFlags(),tt={},ct={};function bt(){return Ie.map(function(){})}function At(yt){var It=h.id2name(yt);-1===$e.indexOf(It)&&$e.push(It)}function Ut(yt){return"LAYOUT"+yt+".autorange"}function Ct(yt){return"LAYOUT"+yt+".range"}function dt(yt){for(var It=yt;It<Ue.length;It++)if(Ue[It]._input===qe[yt])return Ue[It]}function at(yt,It,Vt){if(Array.isArray(yt))yt.forEach(function(an){at(an,It,Vt)});else if(!(yt in Te)&&!w.hasParent(Te,yt)){var ln;if("LAYOUT"===yt.substr(0,6))ln=st(ve.layout,yt.replace("LAYOUT",""));else{var un=Ie[Vt];ln=Q(Re._tracePreGUI[dt(un)._fullInput.uid],Xe)(qe[un],yt)}yt in ct||(ct[yt]=bt()),void 0===ct[yt][Vt]&&(ct[yt][Vt]=Y(ln.get())),void 0!==It&&ln.set(It)}}function Nt(yt){return function(It){return Ue[It][yt]}}function rn(yt){return function(It,Vt){return!1===It?Ue[Ie[Vt]][yt]:null}}for(var en in Te){if(w.hasParent(Te,en))throw new Error("cannot set "+en+" and a parent attribute simultaneously");var Ge,Qe,Rt,gt,Be,Ve,Le=Te[en];if("autobinx"!==en&&"autobiny"!==en||(en=en.charAt(en.length-1)+"bins",Le=Array.isArray(Le)?Le.map(rn(en)):!1===Le?Ie.map(Nt(en)):null),tt[en]=Le,"LAYOUT"!==en.substr(0,6)){for(ct[en]=bt(),Ce=0;Ce<Ie.length;Ce++)if(Ge=qe[Ie[Ce]],Qe=dt(Ie[Ce]),gt=(Rt=Q(Re._tracePreGUI[Qe._fullInput.uid],Xe)(Ge,en)).get(),void 0!==(Be=Array.isArray(Le)?Le[Ce%Le.length]:Le)){var je=Rt.parts[Rt.parts.length-1],Ke=en.substr(0,en.length-je.length-1),ft=Ke?Ke+".":"",mt=Ke?e(Qe,Ke).get():Qe;if((Ve=r.getTraceValObject(Qe,Rt.parts))&&Ve.impliedEdits&&null!==Be)for(var pt in Ve.impliedEdits)at(b.relativeAttr(en,pt),Ve.impliedEdits[pt],Ce);else if("thicknessmode"!==je&&"lenmode"!==je||gt===Be||"fraction"!==Be&&"pixels"!==Be||!mt){if("type"===en&&("pie"===Be!=("pie"===gt)||"funnelarea"===Be!=("funnelarea"===gt))){var Ot="x",Pt="y";"bar"!==Be&&"bar"!==gt||"h"!==Ge.orientation||(Ot="y",Pt="x"),b.swapAttrs(Ge,["?","?src"],"labels",Ot),b.swapAttrs(Ge,["d?","?0"],"label",Ot),b.swapAttrs(Ge,["?","?src"],"values",Pt),"pie"===gt||"funnelarea"===gt?(e(Ge,"marker.color").set(e(Ge,"marker.colors").get()),Re._pielayer.selectAll("g.trace").remove()):l.traceIs(Ge,"cartesian")&&e(Ge,"marker.colors").set(e(Ge,"marker.color").get())}}else{var Jt=Re._size,$t=mt.orient,ut="top"===$t||"bottom"===$t;if("thicknessmode"===je){var Dt=ut?Jt.h:Jt.w;at(ft+"thickness",mt.thickness*("fraction"===Be?1/Dt:Dt),Ce)}else{var Wt=ut?Jt.w:Jt.h;at(ft+"len",mt.len*("fraction"===Be?1/Wt:Wt),Ce)}}if(ct[en][Ce]=Y(gt),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(en)){if("orientation"===en){Rt.set(Be);var zt=Ge.x&&!Ge.y?"h":"v";if((Rt.get()||zt)===Qe.orientation)continue}else"orientationaxes"===en&&(Ge.orientation={v:"h",h:"v"}[Qe.orientation]);w.swapXYData(Ge),et.calc=et.clearAxisTypes=!0}else-1!==y.dataArrayContainers.indexOf(Rt.parts[0])?(w.manageArrayContainers(Rt,Be,ct),et.calc=!0):(Ve?Ve.arrayOk&&!l.traceIs(Qe,"regl")&&(b.isArrayOrTypedArray(Be)||b.isArrayOrTypedArray(gt))?et.calc=!0:A.update(et,Ve):et.calc=!0,Rt.set(Be))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(en)&&h.swap(ve,Ie),"orientationaxes"===en){var Ht=e(ve.layout,"hovermode"),Ne=Ht.get();"x"===Ne?Ht.set("y"):"y"===Ne?Ht.set("x"):"x unified"===Ne?Ht.set("y unified"):"y unified"===Ne&&Ht.set("x unified")}if(-1!==["orientation","type"].indexOf(en)){for($e=[],Ce=0;Ce<Ie.length;Ce++){var ot=qe[Ie[Ce]];l.traceIs(ot,"cartesian")&&(At(ot.xaxis||"x"),At(ot.yaxis||"y"))}at($e.map(Ut),!0,0),at($e.map(Ct),[0,1],0)}}else Rt=st(ve.layout,en.replace("LAYOUT","")),ct[en]=[Y(Rt.get())],Rt.set(Array.isArray(Le)?Le[0]:Le),et.calc=!0}return(et.calc||et.plot)&&(et.fullReplot=!0),{flags:et,undoit:ct,redoit:tt,traces:Ie,eventData:b.extendDeepNoArrays([],[He,Ie])}}function J(ve){var Te,Ie,Ce,Re=b.counterRegex("axis",".title",!1,!1),Ue=/colorbar\.title$/,qe=Object.keys(ve);for(Te=0;Te<qe.length;Te++)Ce=ve[Ie=qe[Te]],"title"!==Ie&&!Re.test(Ie)&&!Ue.test(Ie)||"string"!=typeof Ce&&"number"!=typeof Ce?Ie.indexOf("titlefont")>-1&&-1===Ie.indexOf("grouptitlefont")?Xe(Ie,Ie.replace("titlefont","title.font")):Ie.indexOf("titleposition")>-1?Xe(Ie,Ie.replace("titleposition","title.position")):Ie.indexOf("titleside")>-1?Xe(Ie,Ie.replace("titleside","title.side")):Ie.indexOf("titleoffset")>-1&&Xe(Ie,Ie.replace("titleoffset","title.offset")):Xe(Ie,Ie.replace("title","title.text"));function Xe(st,He){ve[He]=ve[st],delete ve[st]}}function ie(ve,Te,Ie){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Ce={};if("string"==typeof Te)Ce[Te]=Ie;else{if(!b.isPlainObject(Te))return b.warn("Relayout fail.",Te,Ie),Promise.reject();Ce=b.extendFlat({},Te)}Object.keys(Ce).length&&(ve.changed=!0);var Re=ee(ve,Ce),Ue=Re.flags;Ue.calc&&(ve.calcdata=void 0);var qe=[y.previousPromises];Ue.layoutReplot?qe.push(f.layoutReplot):Object.keys(Ce).length&&(j(ve,Ue,Re)||y.supplyDefaults(ve),Ue.legend&&qe.push(f.doLegend),Ue.layoutstyle&&qe.push(f.layoutStyles),Ue.axrange&&q(qe,Re.rangesAltered),Ue.ticks&&qe.push(f.doTicksRelayout),Ue.modebar&&qe.push(f.doModeBar),Ue.camera&&qe.push(f.doCamera),Ue.colorbars&&qe.push(f.doColorBars),qe.push(E)),qe.push(y.rehover,y.redrag),i.add(ve,ie,[ve,Re.undoit],ie,[ve,Re.redoit]);var Xe=b.syncOrAsync(qe,ve);return Xe&&Xe.then||(Xe=Promise.resolve(ve)),Xe.then(function(){return ve.emit("plotly_relayout",Re.eventData),ve})}function j(ve,Te,Ie){var Ce=ve._fullLayout;if(!Te.axrange)return!1;for(var Re in Te)if("axrange"!==Re&&Te[Re])return!1;for(var Ue in Ie.rangesAltered){var qe=h.id2name(Ue),Xe=ve.layout[qe],st=Ce[qe];if(st.autorange=Xe.autorange,Xe.range&&(st.range=Xe.range.slice()),st.cleanRange(),st._matchGroup)for(var He in st._matchGroup)if(He!==Ue){var $e=Ce[h.id2name(He)];$e.autorange=st.autorange,$e.range=st.range.slice(),$e._input.range=st.range.slice()}}return!0}function q(ve,Te){ve.push(g,f.doAutoRangeAndConstraints,Te?function(Ce){var Re=[],Ue=!0;for(var qe in Te){var Xe=h.getFromId(Ce,qe);if(Re.push(qe),-1!==(Xe.ticklabelposition||"").indexOf("inside")&&Xe._anchorAxis&&Re.push(Xe._anchorAxis._id),Xe._matchGroup)for(var st in Xe._matchGroup)Te[st]||Re.push(st);Xe.automargin&&(Ue=!1)}return h.draw(Ce,Re,{skipTitle:Ue})}:function(Ce){return h.draw(Ce,"redraw")},f.drawData,f.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ae=/^[xyz]axis[0-9]*\.autorange$/,G=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ee(ve,Te){var Ie,Ce,Re,Ue=ve.layout,qe=ve._fullLayout,st=Q(qe._preGUI,qe._guiEditing),He=Object.keys(Te),$e=h.list(ve),et=b.extendDeepAll({},Te),tt={};for(J(Te),He=Object.keys(Te),Ce=0;Ce<He.length;Ce++)if(0===He[Ce].indexOf("allaxes")){for(Re=0;Re<$e.length;Re++){var ct=$e[Re]._id.substr(1),bt=-1!==ct.indexOf("scene")?ct+".":"",At=He[Ce].replace("allaxes",bt+$e[Re]._name);Te[At]||(Te[At]=Te[He[Ce]])}delete Te[He[Ce]]}var Ut=A.layoutFlags(),Ct={},dt={};function at(un,an){if(Array.isArray(un))un.forEach(function(Zn){at(Zn,an)});else if(!(un in Te)&&!w.hasParent(Te,un)){var wn=st(Ue,un);un in dt||(dt[un]=Y(wn.get())),void 0!==an&&wn.set(an)}}var Nt,rn={};function en(un){var an=h.name2id(un.split(".")[0]);return rn[an]=1,an}for(var Ge in Te){if(w.hasParent(Te,Ge))throw new Error("cannot set "+Ge+" and a parent attribute simultaneously");for(var Qe=st(Ue,Ge),Rt=Te[Ge],gt=Qe.parts.length-1;gt>0&&"string"!=typeof Qe.parts[gt];)gt--;var Be=Qe.parts[gt],Ve=Qe.parts[gt-1]+"."+Be,Le=Qe.parts.slice(0,gt).join("."),je=e(ve.layout,Le).get(),Ke=e(qe,Le).get(),ft=Qe.get();if(void 0!==Rt){Ct[Ge]=Rt,dt[Ge]="reverse"===Be?Rt:Y(ft);var mt=r.getLayoutValObject(qe,Qe.parts);if(mt&&mt.impliedEdits&&null!==Rt)for(var pt in mt.impliedEdits)at(b.relativeAttr(Ge,pt),mt.impliedEdits[pt]);if(-1!==["width","height"].indexOf(Ge))if(Rt){at("autosize",null);var Ot="height"===Ge?"width":"height";at(Ot,qe[Ot])}else qe[Ge]=ve._initialAutoSize[Ge];else if("autosize"===Ge)at("width",Rt?null:qe.width),at("height",Rt?null:qe.height);else if(Ve.match(W))en(Ve),e(qe,Le+"._inputRange").set(null);else if(Ve.match(ae)){en(Ve),e(qe,Le+"._inputRange").set(null);var Pt=e(qe,Le).get();Pt._inputDomain&&(Pt._input.domain=Pt._inputDomain.slice())}else Ve.match(G)&&e(qe,Le+"._inputDomain").set(null);if("type"===Be){Nt=je;var Jt="linear"===Ke.type&&"log"===Rt;if(Jt||"log"===Ke.type&&"linear"===Rt){if(Nt&&Nt.range)if(Ke.autorange)Jt&&(Nt.range=Nt.range[1]>Nt.range[0]?[1,2]:[2,1]);else{var ut=Nt.range[0],Dt=Nt.range[1];Jt?(ut<=0&&Dt<=0&&at(Le+".autorange",!0),ut<=0?ut=Dt/1e6:Dt<=0&&(Dt=ut/1e6),at(Le+".range[0]",Math.log(ut)/Math.LN10),at(Le+".range[1]",Math.log(Dt)/Math.LN10)):(at(Le+".range[0]",Math.pow(10,ut)),at(Le+".range[1]",Math.pow(10,Dt)))}else at(Le+".autorange",!0);Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[Qe.parts[0]]&&"radialaxis"===Qe.parts[1]&&delete qe[Qe.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(ve,Ke,Rt,at),l.getComponentMethod("images","convertCoords")(ve,Ke,Rt,at)}else at(Le+".autorange",!0),at(Le+".range",null);e(qe,Le+"._inputRange").set(null)}else if(Be.match(M)){var Wt=e(qe,Ge).get(),zt=(Rt||{}).type;zt&&"-"!==zt||(zt="linear"),l.getComponentMethod("annotations","convertCoords")(ve,Wt,zt,at),l.getComponentMethod("images","convertCoords")(ve,Wt,zt,at)}var Ht=u.containerArrayMatch(Ge);if(Ht){Ie=Ht.array;var Ne=Ht.property,ot=mt||{editType:"calc"};""!==(Ce=Ht.index)&&""===Ne&&(u.isAddVal(Rt)?dt[Ge]=null:u.isRemoveVal(Rt)?dt[Ge]=(e(Ue,Ie).get()||[])[Ce]:b.warn("unrecognized full object value",Te)),A.update(Ut,ot),tt[Ie]||(tt[Ie]={});var yt=tt[Ie][Ce];yt||(yt=tt[Ie][Ce]={}),yt[Ne]=Rt,delete Te[Ge]}else"reverse"===Be?(je.range?je.range.reverse():(at(Le+".autorange",!0),je.range=[1,0]),Ke.autorange?Ut.calc=!0:Ut.plot=!0):(qe._has("scatter-like")&&qe._has("regl")&&"dragmode"===Ge&&("lasso"===Rt||"select"===Rt)&&"lasso"!==ft&&"select"!==ft||qe._has("gl2d")?Ut.plot=!0:mt?A.update(Ut,mt):Ut.calc=!0,Qe.set(Rt))}}for(Ie in tt)u.applyContainerArrayChanges(ve,st(Ue,Ie),tt[Ie],Ut,st)||(Ut.plot=!0);for(var It in rn){var Vt=(Nt=h.getFromId(ve,It))&&Nt._constraintGroup;if(Vt)for(var ln in Ut.calc=!0,Vt)rn[ln]||(h.getFromId(ve,ln)._constraintShrinkable=!0)}return(te(ve)||Te.height||Te.width)&&(Ut.plot=!0),(Ut.plot||Ut.calc)&&(Ut.layoutReplot=!0),{flags:Ut,rangesAltered:rn,undoit:dt,redoit:Ct,eventData:et}}function te(ve){var Te=ve._fullLayout,Ie=Te.width,Ce=Te.height;return ve.layout.autosize&&y.plotAutoSize(ve,ve.layout,Te),Te.width!==Ie||Te.height!==Ce}function le(ve,Te,Ie,Ce){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve),b.isPlainObject(Te)||(Te={}),b.isPlainObject(Ie)||(Ie={}),Object.keys(Te).length&&(ve.changed=!0),Object.keys(Ie).length&&(ve.changed=!0);var Re=w.coerceTraceIndices(ve,Ce),Ue=$(ve,b.extendFlat({},Te),Re),qe=Ue.flags,Xe=ee(ve,b.extendFlat({},Ie)),st=Xe.flags;(qe.calc||st.calc)&&(ve.calcdata=void 0),qe.clearAxisTypes&&w.clearAxisTypes(ve,Re,Ie);var He=[];st.layoutReplot?He.push(f.layoutReplot):qe.fullReplot?He.push(se._doPlot):(He.push(y.previousPromises),j(ve,st,Xe)||y.supplyDefaults(ve),qe.style&&He.push(f.doTraceStyle),(qe.colorbars||st.colorbars)&&He.push(f.doColorBars),st.legend&&He.push(f.doLegend),st.layoutstyle&&He.push(f.layoutStyles),st.axrange&&q(He,Xe.rangesAltered),st.ticks&&He.push(f.doTicksRelayout),st.modebar&&He.push(f.doModeBar),st.camera&&He.push(f.doCamera),He.push(E)),He.push(y.rehover,y.redrag),i.add(ve,le,[ve,Ue.undoit,Xe.undoit,Ue.traces],le,[ve,Ue.redoit,Xe.redoit,Ue.traces]);var $e=b.syncOrAsync(He,ve);return $e&&$e.then||($e=Promise.resolve(ve)),$e.then(function(){return ve.emit("plotly_update",{data:Ue.eventData,layout:Xe.eventData}),ve})}function ue(ve){return function(Te){Te._fullLayout._guiEditing=!0;var Ie=ve.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Ie}}var de=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],he=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function be(ve,Te){for(var Ie=0;Ie<Te.length;Ie++){var Ce=Te[Ie],Re=ve.match(Ce.pattern);if(Re){var Ue=Re[1]||"";return{head:Ue,tail:ve.substr(Ue.length+1),attr:Ce.attr}}}}function me(ve,Te){var Ie=e(Te,ve).get();if(void 0!==Ie)return Ie;var Ce=ve.split(".");for(Ce.pop();Ce.length>1;)if(Ce.pop(),void 0!==(Ie=e(Te,Ce.join(".")+".uirevision").get()))return Ie;return Te.uirevision}function _e(ve,Te){for(var Ie=0;Ie<Te.length;Ie++)if(Te[Ie]._fullInput.uid===ve)return Ie;return-1}function Ee(ve,Te,Ie){for(var Ce=0;Ce<Te.length;Ce++)if(Te[Ce].uid===ve)return Ce;return!Te[Ie]||Te[Ie].uid?-1:Ie}function De(ve,Te){var Ie=b.isPlainObject(ve),Ce=Array.isArray(ve);return Ie||Ce?(Ie&&b.isPlainObject(Te)||Ce&&Array.isArray(Te))&&JSON.stringify(ve)===JSON.stringify(Te):ve===Te}function Se(ve,Te,Ie,Ce){var Re,Ue,qe,Xe=Ce.getValObject,st=Ce.flags,He=Ce.immutable,$e=Ce.inArray,et=Ce.arrayIndex;function tt(){var je=Re.editType;$e&&-1!==je.indexOf("arraydraw")?b.pushUnique(st.arrays[$e],et):(A.update(st,Re),"none"!==je&&st.nChanges++,Ce.transition&&Re.anim&&st.nChangesAnim++,(W.test(qe)||ae.test(qe))&&(st.rangesAltered[Ie[0]]=1),G.test(qe)&&e(Te,"_inputDomain").set(null),"datarevision"===Ue&&(st.newDataRevision=1))}function ct(je){return"data_array"===je.valType||je.arrayOk}for(Ue in ve){if(st.calc&&!Ce.transition)return;var bt=ve[Ue],At=Te[Ue],Ut=Ie.concat(Ue);if(qe=Ut.join("."),"_"!==Ue.charAt(0)&&"function"!=typeof bt&&bt!==At){if(("tick0"===Ue||"dtick"===Ue)&&"geo"!==Ie[0]){var Ct=Te.tickmode;if("auto"===Ct||"array"===Ct||!Ct)continue}if(("range"!==Ue||!Te.autorange)&&("zmin"!==Ue&&"zmax"!==Ue||"contourcarpet"!==Te.type)&&(Re=Xe(Ut))&&(!Re._compareAsJSON||JSON.stringify(bt)!==JSON.stringify(At))){var dt,at=Re.valType,Nt=ct(Re),rn=Array.isArray(bt),en=Array.isArray(At);if(rn&&en){var Ge="_input_"+Ue,Qe=ve[Ge],Rt=Te[Ge];if(Array.isArray(Qe)&&Qe===Rt)continue}if(void 0===At)Nt&&rn?st.calc=!0:tt();else if(Re._isLinkedToArray){var gt=[],Be=!1;$e||(st.arrays[Ue]=gt);var Ve=Math.min(bt.length,At.length),Le=Math.max(bt.length,At.length);if(Ve!==Le){if("arraydraw"!==Re.editType){tt();continue}Be=!0}for(dt=0;dt<Ve;dt++)Se(bt[dt],At[dt],Ut.concat(dt),b.extendFlat({inArray:Ue,arrayIndex:dt},Ce));if(Be)for(dt=Ve;dt<Le;dt++)gt.push(dt)}else!at&&b.isPlainObject(bt)?Se(bt,At,Ut,Ce):Nt?rn&&en?(He&&(st.calc=!0),(He||Ce.newDataRevision)&&tt()):rn!==en?st.calc=!0:tt():rn&&en&&bt.length===At.length&&String(bt)===String(At)||tt()}}}for(Ue in Te)if(!(Ue in ve)&&"_"!==Ue.charAt(0)&&"function"!=typeof Te[Ue]){if(ct(Re=Xe(Ie.concat(Ue)))&&Array.isArray(Te[Ue]))return void(st.calc=!0);tt()}}function Fe(ve){var Te=ve._fullLayout,Ie=ve.getBoundingClientRect();if(!b.equalDomRects(Ie,Te._lastBBox)){var Ce=Te._invTransform=b.inverseTransformMatrix(b.getFullTransformMatrix(ve));Te._invScaleX=Math.sqrt(Ce[0][0]*Ce[0][0]+Ce[0][1]*Ce[0][1]+Ce[0][2]*Ce[0][2]),Te._invScaleY=Math.sqrt(Ce[1][0]*Ce[1][0]+Ce[1][1]*Ce[1][1]+Ce[1][2]*Ce[1][2]),Te._lastBBox=Ie}}se.animate=function(ve,Te,Ie){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ce=ve._transitionData;Ce._frameQueue||(Ce._frameQueue=[]);var Re=(Ie=y.supplyAnimationDefaults(Ie)).transition,Ue=Ie.frame;function qe(He){return Array.isArray(Re)?He>=Re.length?Re[0]:Re[He]:Re}function Xe(He){return Array.isArray(Ue)?He>=Ue.length?Ue[0]:Ue[He]:Ue}function st(He,$e){var et=0;return function(){if(He&&++et===$e)return He()}}return void 0===Ce._frameWaitingCnt&&(Ce._frameWaitingCnt=0),new Promise(function(He,$e){function tt(){ve.emit("plotly_animating"),Ce._lastFrameAt=-1/0,Ce._timeToNext=0,Ce._runningTransitions=0,Ce._currentFrame=null;var Qe=function(){Ce._animationRaf=window.requestAnimationFrame(Qe),Date.now()-Ce._lastFrameAt>Ce._timeToNext&&function et(){Ce._currentFrame&&Ce._currentFrame.onComplete&&Ce._currentFrame.onComplete();var Qe=Ce._currentFrame=Ce._frameQueue.shift();if(Qe){var Rt=Qe.name?Qe.name.toString():null;ve._fullLayout._currentFrame=Rt,Ce._lastFrameAt=Date.now(),Ce._timeToNext=Qe.frameOpts.duration,y.transition(ve,Qe.frame.data,Qe.frame.layout,w.coerceTraceIndices(ve,Qe.frame.traces),Qe.frameOpts,Qe.transitionOpts).then(function(){Qe.onComplete&&Qe.onComplete()}),ve.emit("plotly_animatingframe",{name:Rt,frame:Qe.frame,animation:{frame:Qe.frameOpts,transition:Qe.transitionOpts}})}else ve.emit("plotly_animated"),window.cancelAnimationFrame(Ce._animationRaf),Ce._animationRaf=null}()};Qe()}var ct,bt,At=0;function Ut(Qe){return Qe.transitionOpts=Array.isArray(Re)?At>=Re.length?Re[At]:Re[0]:Re,At++,Qe}var Ct=[],dt=null==Te,at=Array.isArray(Te);if(dt||at||!b.isPlainObject(Te)){if(dt||-1!==["string","number"].indexOf(typeof Te))for(ct=0;ct<Ce._frames.length;ct++)(bt=Ce._frames[ct])&&(dt||String(bt.group)===String(Te))&&Ct.push({type:"byname",name:String(bt.name),data:Ut({name:bt.name})});else if(at)for(ct=0;ct<Te.length;ct++){var Nt=Te[ct];-1!==["number","string"].indexOf(typeof Nt)?(Nt=String(Nt),Ct.push({type:"byname",name:Nt,data:Ut({name:Nt})})):b.isPlainObject(Nt)&&Ct.push({type:"object",data:Ut(b.extendFlat({},Nt))})}}else Ct.push({type:"object",data:Ut(b.extendFlat({},Te))});for(ct=0;ct<Ct.length;ct++)if("byname"===(bt=Ct[ct]).type&&!Ce._frameHash[bt.data.name])return b.warn('animate failure: frame not found: "'+bt.data.name+'"'),void $e();-1!==["next","immediate"].indexOf(Ie.mode)&&function(){if(0!==Ce._frameQueue.length){for(;Ce._frameQueue.length;){var Qe=Ce._frameQueue.pop();Qe.onInterrupt&&Qe.onInterrupt()}ve.emit("plotly_animationinterrupted",[])}}(),"reverse"===Ie.direction&&Ct.reverse();var rn=ve._fullLayout._currentFrame;if(rn&&Ie.fromcurrent){var en=-1;for(ct=0;ct<Ct.length;ct++)if("byname"===(bt=Ct[ct]).type&&bt.name===rn){en=ct;break}if(en>0&&en<Ct.length-1){var Ge=[];for(ct=0;ct<Ct.length;ct++)bt=Ct[ct],("byname"!==Ct[ct].type||ct>en)&&Ge.push(bt);Ct=Ge}}Ct.length>0?function(Qe){if(0!==Qe.length){for(var Rt=0;Rt<Qe.length;Rt++){var gt;gt="byname"===Qe[Rt].type?y.computeFrame(ve,Qe[Rt].name):Qe[Rt].data;var Be=Xe(Rt),Ve=qe(Rt);Ve.duration=Math.min(Ve.duration,Be.duration);var Le={frame:gt,name:Qe[Rt].name,frameOpts:Be,transitionOpts:Ve};Rt===Qe.length-1&&(Le.onComplete=st(He,2),Le.onInterrupt=$e),Ce._frameQueue.push(Le)}"immediate"===Ie.mode&&(Ce._lastFrameAt=-1/0),Ce._animationRaf||tt()}}(Ct):(ve.emit("plotly_animated"),He())})},se.addFrames=function(ve,Te,Ie){if(ve=b.getGraphDiv(ve),null==Te)return Promise.resolve();if(!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ce,Re,Ue,qe,Xe=ve._transitionData._frames,st=ve._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var He=Xe.length+2*Te.length,$e=[],et={};for(Ce=Te.length-1;Ce>=0;Ce--)if(b.isPlainObject(Te[Ce])){var tt=Te[Ce].name,ct=(st[tt]||et[tt]||{}).name,bt=Te[Ce].name;ct&&bt&&"number"==typeof bt&&(st[ct]||et[ct])&&k<5&&(k++,b.warn('addFrames: overwriting frame "'+(st[ct]||et[ct]).name+'" with a frame whose name of type "number" also equates to "'+ct+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&b.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),et[tt]={name:tt},$e.push({frame:y.supplyFrameDefaults(Te[Ce]),index:Ie&&null!=Ie[Ce]?Ie[Ce]:He+Ce})}$e.sort(function(Ge,Qe){return Ge.index>Qe.index?-1:Ge.index<Qe.index?1:0});var Ut=[],Ct=[],dt=Xe.length;for(Ce=$e.length-1;Ce>=0;Ce--){if("number"==typeof(Re=$e[Ce].frame).name&&b.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Re.name)for(;st[Re.name="frame "+ve._transitionData._counter++];);if(st[Re.name]){for(Ue=0;Ue<Xe.length&&(Xe[Ue]||{}).name!==Re.name;Ue++);Ut.push({type:"replace",index:Ue,value:Re}),Ct.unshift({type:"replace",index:Ue,value:Xe[Ue]})}else qe=Math.max(0,Math.min($e[Ce].index,dt)),Ut.push({type:"insert",index:qe,value:Re}),Ct.unshift({type:"delete",index:qe}),dt++}return i&&i.add(ve,y.modifyFrames,[ve,Ct],y.modifyFrames,[ve,Ut]),y.modifyFrames(ve,Ut)},se.deleteFrames=function(ve,Te){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);var Ie,Ce,Re=ve._transitionData._frames,Ue=[],qe=[];if(!Te)for(Te=[],Ie=0;Ie<Re.length;Ie++)Te.push(Ie);for((Te=Te.slice()).sort(),Ie=Te.length-1;Ie>=0;Ie--)Ue.push({type:"delete",index:Ce=Te[Ie]}),qe.unshift({type:"insert",index:Ce,value:Re[Ce]});return i&&i.add(ve,y.modifyFrames,[ve,qe],y.modifyFrames,[ve,Ue]),y.modifyFrames(ve,Ue)},se.addTraces=function ve(Te,Ie,Ce){Te=b.getGraphDiv(Te);var Re,Ue,qe=[],Xe=se.deleteTraces,st=ve,He=[Te,qe],$e=[Te,Ie];for(function(et,tt,ct){var bt,At;if(!Array.isArray(et.data))throw new Error("gd.data must be an array.");if(void 0===tt)throw new Error("traces must be defined.");for(Array.isArray(tt)||(tt=[tt]),bt=0;bt<tt.length;bt++)if("object"!=typeof(At=tt[bt])||Array.isArray(At)||null===At)throw new Error("all values in traces array must be non-array objects");if(void 0===ct||Array.isArray(ct)||(ct=[ct]),void 0!==ct&&ct.length!==tt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Ie,Ce),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(et){return b.extendFlat({},et)}),w.cleanData(Ie),Re=0;Re<Ie.length;Re++)Te.data.push(Ie[Re]);for(Re=0;Re<Ie.length;Re++)qe.push(-Ie.length+Re);if(void 0===Ce)return Ue=se.redraw(Te),i.add(Te,Xe,He,st,$e),Ue;Array.isArray(Ce)||(Ce=[Ce]);try{I(Te,qe,Ce)}catch(et){throw Te.data.splice(Te.data.length-Ie.length,Ie.length),et}return i.startSequence(Te),i.add(Te,Xe,He,st,$e),Ue=se.moveTraces(Te,qe,Ce),i.stopSequence(Te),Ue},se.deleteTraces=function ve(Te,Ie){Te=b.getGraphDiv(Te);var Ce,Re,Ue=[],qe=se.addTraces,Xe=ve,st=[Te,Ue,Ie],He=[Te,Ie];if(void 0===Ie)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),L(Te,Ie,"indices"),(Ie=R(Ie,Te.data.length-1)).sort(b.sorterDes),Ce=0;Ce<Ie.length;Ce+=1)Re=Te.data.splice(Ie[Ce],1)[0],Ue.push(Re);var $e=se.redraw(Te);return i.add(Te,qe,st,Xe,He),$e},se.extendTraces=function ve(Te,Ie,Ce,Re){function Ue(He,$e,et){var tt,ct;if(b.isTypedArray(He))if(et<0){var bt=new He.constructor(0),At=V(He,$e);et<0?(tt=At,ct=bt):(tt=bt,ct=At)}else if(tt=new He.constructor(et),ct=new He.constructor(He.length+$e.length-et),et===$e.length)tt.set($e),ct.set(He);else if(et<$e.length){var Ut=$e.length-et;tt.set($e.subarray(Ut)),ct.set(He),ct.set($e.subarray(0,Ut),He.length)}else{var Ct=et-$e.length,dt=He.length-Ct;tt.set(He.subarray(dt)),tt.set($e,Ct),ct.set(He.subarray(0,dt))}else tt=He.concat($e),ct=et>=0&&et<tt.length?tt.splice(0,tt.length-et):[];return[tt,ct]}var qe=B(Te=b.getGraphDiv(Te),Ie,Ce,Re,Ue),Xe=se.redraw(Te);return i.add(Te,se.prependTraces,[Te,qe.update,Ce,qe.maxPoints],ve,arguments),Xe},se.moveTraces=function ve(Te,Ie,Ce){var Re,Ue=[],qe=[],Xe=ve,st=ve,He=[Te=b.getGraphDiv(Te),Ce,Ie],$e=[Te,Ie,Ce];if(I(Te,Ie,Ce),Ie=Array.isArray(Ie)?Ie:[Ie],void 0===Ce)for(Ce=[],Re=0;Re<Ie.length;Re++)Ce.push(-Ie.length+Re);for(Ce=Array.isArray(Ce)?Ce:[Ce],Ie=R(Ie,Te.data.length-1),Ce=R(Ce,Te.data.length-1),Re=0;Re<Te.data.length;Re++)-1===Ie.indexOf(Re)&&Ue.push(Te.data[Re]);for(Re=0;Re<Ie.length;Re++)qe.push({newIndex:Ce[Re],trace:Te.data[Ie[Re]]});for(qe.sort(function(tt,ct){return tt.newIndex-ct.newIndex}),Re=0;Re<qe.length;Re+=1)Ue.splice(qe[Re].newIndex,0,qe[Re].trace);Te.data=Ue;var et=se.redraw(Te);return i.add(Te,Xe,He,st,$e),et},se.prependTraces=function ve(Te,Ie,Ce,Re){function Ue(He,$e,et){var tt,ct;if(b.isTypedArray(He))if(et<=0){var bt=new He.constructor(0),At=V($e,He);et<0?(tt=At,ct=bt):(tt=bt,ct=At)}else if(tt=new He.constructor(et),ct=new He.constructor(He.length+$e.length-et),et===$e.length)tt.set($e),ct.set(He);else if(et<$e.length){var Ut=$e.length-et;tt.set($e.subarray(0,Ut)),ct.set($e.subarray(Ut)),ct.set(He,Ut)}else{var Ct=et-$e.length;tt.set($e),tt.set(He.subarray(0,Ct),$e.length),ct.set(He.subarray(Ct))}else tt=$e.concat(He),ct=et>=0&&et<tt.length?tt.splice(et,tt.length):[];return[tt,ct]}var qe=B(Te=b.getGraphDiv(Te),Ie,Ce,Re,Ue),Xe=se.redraw(Te);return i.add(Te,se.extendTraces,[Te,qe.update,Ce,qe.maxPoints],ve,arguments),Xe},se.newPlot=function(ve,Te,Ie,Ce){return ve=b.getGraphDiv(ve),y.cleanPlot([],{},ve._fullData||[],ve._fullLayout||{}),y.purge(ve),se._doPlot(ve,Te,Ie,Ce)},se._doPlot=function(ve,Te,Ie,Ce){var Re;if(ve=b.getGraphDiv(ve),o.init(ve),b.isPlainObject(Te)){var Ue=Te;Te=Ue.data,Ie=Ue.layout,Ce=Ue.config,Re=Ue.frames}if(!1===o.triggerHandler(ve,"plotly_beforeplot",[Te,Ie,Ce]))return Promise.reject();Te||Ie||b.isPlotDiv(ve)||b.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ve),F(ve,Ce),Ie||(Ie={}),v.select(ve).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(ve._promises)||(ve._promises=[]);var qe=0===(ve.data||[]).length&&Array.isArray(Te);Array.isArray(Te)&&(w.cleanData(Te),qe?ve.data=Te:ve.data.push.apply(ve.data,Te),ve.empty=!1),ve.layout&&!qe||(ve.layout=w.cleanLayout(Ie)),y.supplyDefaults(ve);var Xe=ve._fullLayout,st=Xe._has("cartesian");Xe._replotting=!0,(qe||Xe._shouldCreateBgLayer)&&(function(Ct){var dt=v.select(Ct),at=Ct._fullLayout;if(at._calcInverseTransform=Fe,at._calcInverseTransform(Ct),at._container=dt.selectAll(".plot-container").data([0]),at._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),at._paperdiv=at._container.selectAll(".svg-container").data([0]),at._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),at._glcontainer=at._paperdiv.selectAll(".gl-container").data([{}]),at._glcontainer.enter().append("div").classed("gl-container",!0),at._paperdiv.selectAll(".main-svg").remove(),at._paperdiv.select(".modebar-container").remove(),at._paper=at._paperdiv.insert("svg",":first-child").classed("main-svg",!0),at._toppaper=at._paperdiv.append("svg").classed("main-svg",!0),at._modebardiv=at._paperdiv.append("div"),delete at._modeBar,at._hoverpaper=at._paperdiv.append("svg").classed("main-svg",!0),!at._uid){var Nt={};v.selectAll("defs").each(function(){this.id&&(Nt[this.id.split("-")[1]]=1)}),at._uid=b.randstr(Nt)}at._paperdiv.selectAll(".main-svg").attr(c.svgAttrs),at._defs=at._paper.append("defs").attr("id","defs-"+at._uid),at._clips=at._defs.append("g").classed("clips",!0),at._topdefs=at._toppaper.append("defs").attr("id","topdefs-"+at._uid),at._topclips=at._topdefs.append("g").classed("clips",!0),at._bgLayer=at._paper.append("g").classed("bglayer",!0),at._draggers=at._paper.append("g").classed("draglayer",!0);var rn=at._paper.append("g").classed("layer-below",!0);at._imageLowerLayer=rn.append("g").classed("imagelayer",!0),at._shapeLowerLayer=rn.append("g").classed("shapelayer",!0),at._cartesianlayer=at._paper.append("g").classed("cartesianlayer",!0),at._polarlayer=at._paper.append("g").classed("polarlayer",!0),at._smithlayer=at._paper.append("g").classed("smithlayer",!0),at._ternarylayer=at._paper.append("g").classed("ternarylayer",!0),at._geolayer=at._paper.append("g").classed("geolayer",!0),at._funnelarealayer=at._paper.append("g").classed("funnelarealayer",!0),at._pielayer=at._paper.append("g").classed("pielayer",!0),at._iciclelayer=at._paper.append("g").classed("iciclelayer",!0),at._treemaplayer=at._paper.append("g").classed("treemaplayer",!0),at._sunburstlayer=at._paper.append("g").classed("sunburstlayer",!0),at._indicatorlayer=at._toppaper.append("g").classed("indicatorlayer",!0),at._glimages=at._paper.append("g").classed("glimages",!0);var en=at._toppaper.append("g").classed("layer-above",!0);at._imageUpperLayer=en.append("g").classed("imagelayer",!0),at._shapeUpperLayer=en.append("g").classed("shapelayer",!0),at._infolayer=at._toppaper.append("g").classed("infolayer",!0),at._menulayer=at._toppaper.append("g").classed("menulayer",!0),at._zoomlayer=at._toppaper.append("g").classed("zoomlayer",!0),at._hoverlayer=at._hoverpaper.append("g").classed("hoverlayer",!0),at._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ct.emit("plotly_framework")}(ve),Xe._shouldCreateBgLayer&&delete Xe._shouldCreateBgLayer),s.initGradients(ve),s.initPatterns(ve),qe&&h.saveShowSpikeInitial(ve);var He=!ve.calcdata||ve.calcdata.length!==(ve._fullData||[]).length;He&&y.doCalcdata(ve);for(var $e=0;$e<ve.calcdata.length;$e++)ve.calcdata[$e][0].trace=ve._fullData[$e];ve._context.responsive?ve._responsiveChartHandler||(ve._responsiveChartHandler=function(){b.isHidden(ve)||y.resize(ve)},window.addEventListener("resize",ve._responsiveChartHandler)):b.clearResponsive(ve);var et=b.extendFlat({},Xe._size),tt=0;function ct(){if(y.clearAutoMarginIds(ve),f.drawMarginPushers(ve),h.allowAutoMargin(ve),Xe._has("pie"))for(var Ct=ve._fullData,dt=0;dt<Ct.length;dt++){var at=Ct[dt];"pie"===at.type&&at.automargin&&y.allowAutoMargin(ve,"pie."+at.uid+".automargin")}return y.doAutoMargin(ve),y.previousPromises(ve)}function bt(){ve._transitioning||(f.doAutoRangeAndConstraints(ve),qe&&h.saveRangeInitial(ve),l.getComponentMethod("rangeslider","calcAutorange")(ve))}var At=[y.previousPromises,function(){if(Re)return se.addFrames(ve,Re)},function Ct(){for(var dt=Xe._basePlotModules,at=0;at<dt.length;at++)dt[at].drawFramework&&dt[at].drawFramework(ve);!Xe._glcanvas&&Xe._has("gl")&&(Xe._glcanvas=Xe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ge){return Ge.key}),Xe._glcanvas.enter().append("canvas").attr("class",function(Ge){return"gl-canvas gl-canvas-"+Ge.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Nt=ve._context.plotGlPixelRatio;if(Xe._glcanvas){Xe._glcanvas.attr("width",Xe.width*Nt).attr("height",Xe.height*Nt).style("width",Xe.width+"px").style("height",Xe.height+"px");var rn=Xe._glcanvas.data()[0].regl;if(rn&&(Math.floor(Xe.width*Nt)!==rn._gl.drawingBufferWidth||Math.floor(Xe.height*Nt)!==rn._gl.drawingBufferHeight)){var en="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!tt)return b.log(en+" Clearing graph and plotting again."),y.cleanPlot([],{},ve._fullData,Xe),y.supplyDefaults(ve),Xe=ve._fullLayout,y.doCalcdata(ve),tt++,Ct();b.error(en)}}return"h"===Xe.modebar.orientation?Xe._modebardiv.style("height",null).style("width","100%"):Xe._modebardiv.style("width",null).style("height",Xe.height+"px"),y.previousPromises(ve)},ct,function(){if(y.didMarginChange(et,Xe._size))return b.syncOrAsync([ct,f.layoutStyles],ve)}];st&&At.push(function(){if(He)return b.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),bt],ve);bt()}),At.push(f.layoutStyles),st&&At.push(function(){return h.draw(ve,qe?"":"redraw")},function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&ie(Ct,Ct._fullLayout._insideTickLabelsAutorange).then(function(){Ct._fullLayout._insideTickLabelsAutorange=void 0})}),At.push(f.drawData,f.finalDraw,p,y.addLinks,y.rehover,y.redrag,y.doAutoMargin,function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&qe&&h.saveRangeInitial(Ct,!0)},y.previousPromises);var Ut=b.syncOrAsync(At,ve);return Ut&&Ut.then||(Ut=Promise.resolve()),Ut.then(function(){return E(ve),ve})},se.purge=function(ve){var Te=(ve=b.getGraphDiv(ve))._fullLayout||{};return y.cleanPlot([],{},ve._fullData||[],Te),y.purge(ve),o.purge(ve),Te._container&&Te._container.remove(),delete ve._context,ve},se.react=function(ve,Te,Ie,Ce){var Re,Ue;ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Le,je,Ke,ft,mt,pt,qe=ve._fullData,Xe=ve._fullLayout;if(b.isPlotDiv(ve)&&qe&&Xe){if(b.isPlainObject(Te)){var st=Te;Te=st.data,Ie=st.layout,Ce=st.config,Re=st.frames}var He=!1;if(Ce){var $e=b.extendDeep({},ve._context);ve._context=void 0,F(ve,Ce),He=function Le(je,Ke){var ft;for(ft in je)if("_"!==ft.charAt(0)){var mt=je[ft],pt=Ke[ft];if(mt!==pt)if(b.isPlainObject(mt)&&b.isPlainObject(pt)){if(Le(mt,pt))return!0}else{if(!Array.isArray(mt)||!Array.isArray(pt)||mt.length!==pt.length)return!0;for(var Ot=0;Ot<mt.length;Ot++)if(mt[Ot]!==pt[Ot]&&(!b.isPlainObject(mt[Ot])||!b.isPlainObject(pt[Ot])||Le(mt[Ot],pt[Ot])))return!0}}}($e,ve._context)}ve.data=Te||[],w.cleanData(ve.data),ve.layout=Ie||{},w.cleanLayout(ve.layout),function(Le,je,Ke,ft){var mt,pt,Ot,Pt,Jt,$t,ut,Dt,Wt,zt,Ht=ft._preGUI,Ne=[],ot={},yt={};for(mt in Ht){if(Jt=be(mt,de)){if(Wt=Jt.head,zt=Jt.tail,(Pt=(Ot=e(ft,pt=Jt.attr||Wt+".uirevision").get())&&me(pt,je))&&Pt===Ot){if(null===($t=Ht[mt])&&($t=void 0),De(Dt=(ut=e(je,mt)).get(),$t)){void 0===Dt&&"autorange"===zt&&Ne.push(Wt),ut.set(Y(e(ft,mt).get()));continue}if("autorange"===zt||"range["===zt.substr(0,6)){var ln=Ht[Wt+".autorange"];if(ln||null===ln&&null===Ht[Wt+".range[0]"]&&null===Ht[Wt+".range[1]"]){if(!(Wt in ot)){var un=e(je,Wt).get();ot[Wt]=un&&(un.autorange||!1!==un.autorange&&(!un.range||2!==un.range.length))}if(ot[Wt]){ut.set(Y(e(ft,mt).get()));continue}}}}}else b.warn("unrecognized GUI edit: "+mt);delete Ht[mt],Jt&&"range["===Jt.tail.substr(0,6)&&(yt[Jt.head]=1)}for(var an=0;an<Ne.length;an++){var wn=Ne[an];if(yt[wn]){var Zn=e(je,wn).get();Zn&&delete Zn.autorange}}var An=ft._tracePreGUI;for(var hn in An){var pn,xn=An[hn],En=null;for(mt in xn){if(!En){var In=_e(hn,Ke);if(In<0){delete An[hn];break}var Yn=Ee(hn,Le,(pn=Ke[In]._fullInput).index);if(Yn<0){delete An[hn];break}En=Le[Yn]}if(Jt=be(mt,he)){if(Jt.attr?Pt=(Ot=e(ft,Jt.attr).get())&&me(Jt.attr,je):(Ot=pn.uirevision,void 0===(Pt=En.uirevision)&&(Pt=je.uirevision)),Pt&&Pt===Ot&&(null===($t=xn[mt])&&($t=void 0),De(Dt=(ut=e(En,mt)).get(),$t))){ut.set(Y(e(pn,mt).get()));continue}}else b.warn("unrecognized GUI edit: "+mt+" in trace uid "+hn);delete xn[mt]}}}(ve.data,ve.layout,qe,Xe),y.supplyDefaults(ve,{skipUpdateCalc:!0});var et=ve._fullData,tt=ve._fullLayout,ct=void 0===tt.datarevision,bt=tt.transition,At=(Le=ve,je=Xe,Ke=tt,ft=ct,mt=bt,(pt=A.layoutFlags()).arrays={},pt.rangesAltered={},pt.nChanges=0,pt.nChangesAnim=0,Se(je,Ke,[],{getValObject:function Ot(Pt){return r.getLayoutValObject(Ke,Pt)},flags:pt,immutable:ft,transition:mt,gd:Le}),(pt.plot||pt.calc)&&(pt.layoutReplot=!0),mt&&pt.nChanges&&pt.nChangesAnim&&(pt.anim=pt.nChanges===pt.nChangesAnim?"all":"some"),pt),Ct=function(Le,je,Ke,ft,mt,pt){var Ot=je.length===Ke.length;if(!mt&&!Ot)return{fullReplot:!0,calc:!0};var Pt,Jt,$t=A.traceFlags();$t.arrays={},$t.nChanges=0,$t.nChangesAnim=0;var ut={getValObject:function(Wt){var zt=r.getTraceValObject(Jt,Wt);return!Jt._module.animatable&&zt.anim&&(zt.anim=!1),zt},flags:$t,immutable:ft,transition:mt,newDataRevision:pt,gd:Le},Dt={};for(Pt=0;Pt<je.length;Pt++)if(Ke[Pt]){if(y.hasMakesDataTransform(Jt=Ke[Pt]._fullInput)&&(Jt=Ke[Pt]),Dt[Jt.uid])continue;Dt[Jt.uid]=1,Se(je[Pt]._fullInput,Jt,[],ut)}return($t.calc||$t.plot)&&($t.fullReplot=!0),mt&&$t.nChanges&&$t.nChangesAnim&&($t.anim=$t.nChanges===$t.nChangesAnim&&Ot?"all":"some"),$t}(ve,qe,et,ct,bt,At.newDataRevision);if(te(ve)&&(At.layoutReplot=!0),Ct.calc||At.calc){ve.calcdata=void 0;for(var dt=Object.getOwnPropertyNames(tt),at=0;at<dt.length;at++){var Nt=dt[at],rn=Nt.substring(0,5);if("xaxis"===rn||"yaxis"===rn){var en=tt[Nt]._emptyCategories;en&&en()}}}else y.supplyDefaultsUpdateCalc(ve.calcdata,et);var Ge=[];if(Re&&(ve._transitionData={},y.createTransitionData(ve),Ge.push(function(){return se.addFrames(ve,Re)})),tt.transition&&!He&&(Ct.anim||At.anim))At.ticks&&Ge.push(f.doTicksRelayout),y.doCalcdata(ve),f.doAutoRangeAndConstraints(ve),Ge.push(function(){return y.transitionFromReact(ve,Ct,At,Xe)});else if(Ct.fullReplot||At.layoutReplot||He)ve._fullLayout._skipDefaults=!0,Ge.push(se._doPlot);else{for(var Qe in At.arrays){var Rt=At.arrays[Qe];if(Rt.length){var gt=l.getComponentMethod(Qe,"drawOne");if(gt!==b.noop)for(var Be=0;Be<Rt.length;Be++)gt(ve,Rt[Be]);else{var Ve=l.getComponentMethod(Qe,"draw");if(Ve===b.noop)throw new Error("cannot draw components: "+Qe);Ve(ve)}}}Ge.push(y.previousPromises),Ct.style&&Ge.push(f.doTraceStyle),(Ct.colorbars||At.colorbars)&&Ge.push(f.doColorBars),At.legend&&Ge.push(f.doLegend),At.layoutstyle&&Ge.push(f.layoutStyles),At.axrange&&q(Ge),At.ticks&&Ge.push(f.doTicksRelayout),At.modebar&&Ge.push(f.doModeBar),At.camera&&Ge.push(f.doCamera),Ge.push(E)}Ge.push(y.rehover,y.redrag),(Ue=b.syncOrAsync(Ge,ve))&&Ue.then||(Ue=Promise.resolve(ve))}else Ue=se.newPlot(ve,Te,Ie,Ce);return Ue.then(function(){return ve.emit("plotly_react",{data:Te,layout:Ie}),ve})},se.redraw=function(ve){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);return w.cleanData(ve.data),w.cleanLayout(ve.layout),ve.calcdata=void 0,se._doPlot(ve).then(function(){return ve.emit("plotly_redraw"),ve})},se.relayout=ie,se.restyle=Z,se.setPlotConfig=function(ve){return b.extendFlat(m,ve)},se.update=le,se._guiRelayout=ue(ie),se._guiRestyle=ue(Z),se._guiUpdate=ue(le),se._storeDirectGUIEdit=function(ve,Te,Ie){for(var Ce in Ie)re(Ce,e(ve,Ce).get(),Ie[Ce],Te)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(_,oe,se){"use strict";var v={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},x={};(function T(b,e){for(var o in b){var i=b[o];i.valType?e[o]=i.dflt:(e[o]||(e[o]={}),T(i,e[o]))}})(v,x),oe.exports={configAttributes:v,dfltConfig:x}},{}],542:[function(_,oe,se){"use strict";var v=_("../registry"),x=_("../lib"),T=_("../plots/attributes"),b=_("../plots/layout_attributes"),e=_("../plots/frame_attributes"),o=_("../plots/animation_attributes"),i=_("./plot_config").configAttributes,l=_("./edit_types"),r=x.extendDeepAll,y=x.isPlainObject,h=x.isArrayOrTypedArray,s=x.nestedProperty,d=x.valObjectMeta,p=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function c(M,k,E){if(!M)return!1;if(M._isLinkedToArray)if(g(k[E]))E++;else if(E<k.length)return!1;for(;E<k.length;E++){var P=M[k[E]];if(!y(P)||(M=P,E===k.length-1))break;if(M._isLinkedToArray){if(!g(k[++E]))return!1}else if("info_array"===M.valType){var D=k[++E];if(!g(D))return!1;var F=M.items;if(Array.isArray(F)){if(D>=F.length)return!1;if(2===M.dimensions){if(E++,k.length===E)return M;var R=k[E];if(!g(R))return!1;M=F[D][R]}else M=F[D]}else M=F}}return M}function g(M){return M===Math.round(M)&&M>=0}function m(){var M,k,E={};for(M in r(E,b),v.subplotsRegistry)if((k=v.subplotsRegistry[M]).layoutAttributes)if(Array.isArray(k.attr))for(var P=0;P<k.attr.length;P++)f(E,k,k.attr[P]);else f(E,k,"subplot"===k.attr?k.name:k.attr);for(M in v.componentsRegistry){var D=(k=v.componentsRegistry[M]).schema;if(D&&(D.subplots||D.layout)){var F=D.subplots;if(F&&F.xaxis&&!F.yaxis)for(var R in F.xaxis)delete E.yaxis[R]}else"colorscale"===k.name?r(E,k.layoutAttributes):k.layoutAttributes&&A(E,k.layoutAttributes,k.name)}return{layoutAttributes:w(E)}}function u(){var M={frames:r({},e)};return w(M),M.frames}function w(M){return se.crawl(M,function(E,P,D){se.isValObject(E)?!0!==E.arrayOk&&"data_array"!==E.valType||(D[P+"src"]={valType:"string",editType:"none"}):y(E)&&(E.role="object")}),se.crawl(M,function(E,P,D){if(E){var F=E._isLinkedToArray;F&&(delete E._isLinkedToArray,D[P]={items:{}},D[P].items[F]=E,D[P].role="object")}}),function(k){!function E(P){for(var D in P)if(y(P[D]))E(P[D]);else if(Array.isArray(P[D]))for(var F=0;F<P[D].length;F++)E(P[D][F]);else P[D]instanceof RegExp&&(P[D]=P[D].toString())}(k)}(M),M}function f(M,k,E){var P=s(M,E),D=r({},k.layoutAttributes);D._isSubplotObj=!0,P.set(D)}function A(M,k,E){var P=s(M,E);P.set(r(P.get()||{},k))}se.IS_SUBPLOT_OBJ="_isSubplotObj",se.IS_LINKED_TO_ARRAY="_isLinkedToArray",se.DEPRECATED="_deprecated",se.UNDERSCORE_ATTRS=p,se.get=function(){var M={};v.allTypes.forEach(function(E){M[E]=function(P){var D,F;F=(D=v.modules[P]._module).basePlotModule;var R={type:null},L=r({},T),I=r({},D.attributes);se.crawl(I,function(Z,Y,Q,re,$){s(L,$).set(void 0),void 0===Z&&s(I,$).set(void 0)}),r(R,L),v.traceIs(P,"noOpacity")&&delete R.opacity,v.traceIs(P,"showLegend")||(delete R.showlegend,delete R.legendgroup),v.traceIs(P,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),D.selectPoints||delete R.selectedpoints,r(R,I),F.attributes&&r(R,F.attributes),R.type=P;var B={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:P,attributes:w(R)};if(D.layoutAttributes){var V={};r(V,D.layoutAttributes),B.layoutAttributes=w(V)}return D.animatable||se.crawl(B,function(Z){se.isValObject(Z)&&"anim"in Z&&delete Z.anim}),B}(E)});var k={};return Object.keys(v.transformsRegistry).forEach(function(E){var P,F;k[E]=(F=r({},v.transformsRegistry[P=E].attributes),Object.keys(v.componentsRegistry).forEach(function(R){var L=v.componentsRegistry[R];L.schema&&L.schema.transforms&&L.schema.transforms[P]&&Object.keys(L.schema.transforms[P]).forEach(function(I){A(F,L.schema.transforms[P][I],I)})}),{attributes:w(F)})}),{defs:{valObjects:d,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:M,layout:m(),transforms:k,frames:u(),animation:w(o),config:w(i)}},se.crawl=function(M,k,E,P){var D=E||0;P=P||"",Object.keys(M).forEach(function(F){var R=M[F];if(-1===p.indexOf(F)){var L=(P?P+".":"")+F;k(R,F,M,D,L),se.isValObject(R)||y(R)&&"impliedEdits"!==F&&se.crawl(R,k,D+1,L)}})},se.isValObject=function(M){return M&&void 0!==M.valType},se.findArrayAttributes=function(M){var k,E,P=[],D=[],F=[];function R(Z,Y,Q,re){D=D.slice(0,re).concat([Y]),F=F.slice(0,re).concat([Z&&Z._isLinkedToArray]),Z&&("data_array"===Z.valType||!0===Z.arrayOk)&&("colorbar"!==D[re-1]||"ticktext"!==Y&&"tickvals"!==Y)&&function $(J,ie,j){var q=J[D[ie]],W=j+D[ie];if(ie===D.length-1)h(q)&&P.push(E+W);else if(F[ie]){if(Array.isArray(q))for(var ae=0;ae<q.length;ae++)y(q[ae])&&$(q[ae],ie+1,W+"["+ae+"].")}else y(q)&&$(q,ie+1,W+".")}(k,0,"")}k=M,E="",se.crawl(T,R),M._module&&M._module.attributes&&se.crawl(M._module.attributes,R);var L=M.transforms;if(L)for(var I=0;I<L.length;I++){var B=L[I],V=B._module;V&&(E="transforms["+I+"].",k=B,se.crawl(V.attributes,R))}return P},se.getTraceValObject=function(M,k){var E,P,D=k[0],F=1;if("transforms"===D){if(1===k.length)return T.transforms;var R=M.transforms;if(!Array.isArray(R)||!R.length)return!1;var L=k[1];if(!g(L)||L>=R.length)return!1;P=(E=(v.transformsRegistry[R[L].type]||{}).attributes)&&E[k[2]],F=3}else{var I=M._module;if(I||(I=(v.modules[M.type||T.type.dflt]||{})._module),!I)return!1;if(!(P=(E=I.attributes)&&E[D])){var B=I.basePlotModule;B&&B.attributes&&(P=B.attributes[D])}P||(P=T[D])}return c(P,k,F)},se.getLayoutValObject=function(M,k){return c(function(E,P){var D,F,R,L,I=E._basePlotModules;if(I){var B;for(D=0;D<I.length;D++){if((R=I[D]).attrRegex&&R.attrRegex.test(P)){if(R.layoutAttrOverrides)return R.layoutAttrOverrides;!B&&R.layoutAttributes&&(B=R.layoutAttributes)}var V=R.baseLayoutAttrOverrides;if(V&&P in V)return V[P]}if(B)return B}var Z=E._modules;if(Z)for(D=0;D<Z.length;D++)if((L=Z[D].layoutAttributes)&&P in L)return L[P];for(F in v.componentsRegistry){if("colorscale"===(R=v.componentsRegistry[F]).name&&0===P.indexOf("coloraxis"))return R.layoutAttributes[P];if(!R.schema&&P===R.name)return R.layoutAttributes}return P in b&&b[P]}(M,k[0]),k,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plots/attributes"),T={name:{valType:"string",editType:"none"}};function b(o){return o&&"string"==typeof o}function e(o){return"s"!==o.charAt(o.length-1)&&v.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}T.templateitemname={valType:"string",editType:"calc"},se.templatedArray=function(o,i){return i._isLinkedToArray=o,i.name=T.name,i.templateitemname=T.templateitemname,i},se.traceTemplater=function(o){var i,l,r={};for(i in o)l=o[i],Array.isArray(l)&&l.length&&(r[i]=0);return{newTrace:function(y){var h={type:i=v.coerce(y,{},x,"type"),_template:null};if(i in r){var s=r[i]%(l=o[i]).length;r[i]++,h._template=l[s]}return h}}},se.newContainer=function(o,i,l){var r=o._template,y=r&&(r[i]||l&&r[l]);return v.isPlainObject(y)||(y=null),o[i]={_template:y}},se.arrayTemplater=function(o,i,l){var r=o._template,y=r&&r[e(i)],h=r&&r[i];Array.isArray(h)&&h.length||(h=[]);var s={};return{newItem:function(d){var p={name:d.name,_input:d},c=p.templateitemname=d.templateitemname;if(!b(c))return p._template=y,p;for(var g=0;g<h.length;g++){var m=h[g];if(m.name===c)return s[c]=1,p._template=m,p}return p[l]=d[l]||!1,p._template=!1,p},defaultItems:function(){for(var d=[],p=0;p<h.length;p++){var c=h[p],g=c.name;if(b(g)&&!s[g]){var m={_template:c,name:g,_input:{_templateitemname:g}};m.templateitemname=c.templateitemname,d.push(m),s[g]=1}}return d}}},se.arrayDefaultKey=e,se.arrayEditor=function(o,i,l){var r=(v.nestedProperty(o,i).get()||[]).length,y=l._index,h=y>=r&&(l._input||{})._templateitemname;h&&(y=r);var s,d=i+"["+y+"]";function p(){s={},h&&(s[d]={},s[d].templateitemname=h)}function c(m,u){h?v.nestedProperty(s[d],m).set(u):s[d+"."+m]=u}function g(){var m=s;return p(),m}return p(),{modifyBase:function(m,u){s[m]=u},modifyItem:c,getUpdateObj:g,applyUpdate:function(m,u){m&&c(m,u);var w=g();for(var f in w)v.nestedProperty(o,f).set(w[f])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../registry"),T=_("../plots/plots"),b=_("../lib"),e=_("../lib/clear_gl_canvases"),o=_("../components/color"),i=_("../components/drawing"),l=_("../components/titles"),r=_("../components/modebar"),y=_("../plots/cartesian/axes"),h=_("../constants/alignment"),s=_("../plots/cartesian/constraints"),d=s.enforce,p=s.clean,c=_("../plots/cartesian/autorange").doAutoRange;function g(k,E,P){for(var D=0;D<P.length;D++){var F=P[D][0],R=P[D][1];if(!(F[0]>=k[1]||F[1]<=k[0])&&R[0]<E[1]&&R[1]>E[0])return!0}return!1}function m(k){var E,P,D,F,R,L,I=k._fullLayout,B=I._size,V=B.p,Z=y.list(k,"",!0);if(I._paperdiv.style({width:k._context.responsive&&I.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":I.width+"px",height:k._context.responsive&&I.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(i.setSize,I.width,I.height),k._context.setBackground(k,I.paper_bgcolor),se.drawMainTitle(k),r.manage(k),!I._has("cartesian"))return T.previousPromises(k);function Y(tt,ct,bt){var At=tt._lw/2;return"x"===tt._id.charAt(0)?ct?"top"===bt?ct._offset-V-At:ct._offset+ct._length+V+At:B.t+B.h*(1-(tt.position||0))+At%1:ct?"right"===bt?ct._offset+ct._length+V+At:ct._offset-V-At:B.l+B.w*(tt.position||0)+At%1}for(E=0;E<Z.length;E++){var Q=(F=Z[E])._anchorAxis;F._linepositions={},F._lw=i.crispRound(k,F.linewidth,1),F._mainLinePosition=Y(F,Q,F.side),F._mainMirrorPosition=F.mirror&&Q?Y(F,Q,h.OPPOSITE_SIDE[F.side]):null}var re=[],$=[],J=[],ie=1===o.opacity(I.paper_bgcolor)&&1===o.opacity(I.plot_bgcolor)&&I.paper_bgcolor===I.plot_bgcolor;for(P in I._plots)if((D=I._plots[P]).mainplot)D.bg&&D.bg.remove(),D.bg=void 0;else{var j=D.xaxis.domain,q=D.yaxis.domain,W=D.plotgroup;if(g(j,q,J)){var ae=W.node(),G=D.bg=b.ensureSingle(W,"rect","bg");ae.insertBefore(G.node(),ae.childNodes[0]),$.push(P)}else W.select("rect.bg").remove(),J.push([j,q]),ie||(re.push(P),$.push(P))}var ee,te,le,ue,de,he,be,me,_e,Ee,De,Se,Fe,ve=I._bgLayer.selectAll(".bg").data(re);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(tt){I._plots[tt].bg=v.select(this)}),E=0;E<$.length;E++)R=(D=I._plots[$[E]]).xaxis,L=D.yaxis,D.bg&&void 0!==R._offset&&void 0!==L._offset&&D.bg.call(i.setRect,R._offset-V,L._offset-V,R._length+2*V,L._length+2*V).call(o.fill,I.plot_bgcolor).style("stroke-width",0);if(!I._hasOnlyLargeSploms)for(P in I._plots){R=(D=I._plots[P]).xaxis,L=D.yaxis;var Te,Ie,Ce=D.clipId="clip"+I._uid+P+"plot",Re=b.ensureSingleById(I._clips,"clipPath",Ce,function(tt){tt.classed("plotclip",!0).append("rect")});D.clipRect=Re.select("rect").attr({width:R._length,height:L._length}),i.setTranslate(D.plot,R._offset,L._offset),D._hasClipOnAxisFalse?(Te=null,Ie=Ce):(Te=Ce,Ie=null),i.setClipUrl(D.plot,Te,k),D.layerClipId=Ie}function Ue(tt){return"M"+ee+","+tt+"H"+te}function qe(tt){return"M"+R._offset+","+tt+"h"+R._length}function Xe(tt){return"M"+tt+","+me+"V"+be}function st(tt){return"M"+tt+","+L._offset+"v"+L._length}function He(tt,ct,bt){if(!tt.showline||P!==tt._mainSubplot)return"";if(!tt._anchorAxis)return bt(tt._mainLinePosition);var At=ct(tt._mainLinePosition);return tt.mirror&&(At+=ct(tt._mainMirrorPosition)),At}for(P in I._plots){L=(D=I._plots[P]).yaxis;var $e="M0,0";u(R=D.xaxis,P)&&(de=f(R,"left",L,Z),ee=R._offset-(de?V+de:0),he=f(R,"right",L,Z),te=R._offset+R._length+(he?V+he:0),le=Y(R,L,"bottom"),ue=Y(R,L,"top"),!(Fe=!R._anchorAxis||P!==R._mainSubplot)||"allticks"!==R.mirror&&"all"!==R.mirror||(R._linepositions[P]=[le,ue]),$e=He(R,Ue,qe),Fe&&R.showline&&("all"===R.mirror||"allticks"===R.mirror)&&($e+=Ue(le)+Ue(ue)),D.xlines.style("stroke-width",R._lw+"px").call(o.stroke,R.showline?R.linecolor:"rgba(0,0,0,0)")),D.xlines.attr("d",$e);var et="M0,0";u(L,P)&&(De=f(L,"bottom",R,Z),be=L._offset+L._length+(De?V:0),Se=f(L,"top",R,Z),me=L._offset-(Se?V:0),_e=Y(L,R,"left"),Ee=Y(L,R,"right"),!(Fe=!L._anchorAxis||P!==L._mainSubplot)||"allticks"!==L.mirror&&"all"!==L.mirror||(L._linepositions[P]=[_e,Ee]),et=He(L,Xe,st),Fe&&L.showline&&("all"===L.mirror||"allticks"===L.mirror)&&(et+=Xe(_e)+Xe(Ee)),D.ylines.style("stroke-width",L._lw+"px").call(o.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),D.ylines.attr("d",et)}return y.makeClipPaths(k),T.previousPromises(k)}function u(k,E){return(k.ticks||k.showline)&&(E===k._mainSubplot||"all"===k.mirror||"allticks"===k.mirror)}function w(k,E,P){if(!P.showline||!P._lw)return!1;if("all"===P.mirror||"allticks"===P.mirror)return!0;var D=P._anchorAxis;if(!D)return!1;var F=h.FROM_BL[E];return P.side===E?D.domain[F]===k.domain[F]:P.mirror&&D.domain[1-F]===k.domain[1-F]}function f(k,E,P,D){if(w(k,E,P))return P._lw;for(var F=0;F<D.length;F++){var R=D[F];if(R._mainAxis===P._mainAxis&&w(k,E,R))return R._lw}return 0}function A(k,E){var P=k.title,D=k._size,F=0;return"paper"===("start"===E?F=P.pad.l:"end"===E&&(F=-P.pad.r),P.xref)?D.l+D.w*P.x+F:k.width*P.x+F}function M(k,E){var P=k.title,D=k._size,F=0;return"0em"!==E&&E?E===h.CAP_SHIFT+"em"&&(F=P.pad.t):F=-P.pad.b,"auto"===P.y?D.t/2:"paper"===P.yref?D.t+D.h-D.h*P.y+F:k.height-k.height*P.y+F}se.layoutStyles=function(k){return b.syncOrAsync([T.doAutoMargin,m],k)},se.drawMainTitle=function(k){var R,L,E=k._fullLayout,P=(L="middle",b.isRightAnchor(R=E.title)?L="end":b.isLeftAnchor(R)&&(L="start"),L),D=function(F){var R=F.title,L="0em";return b.isTopAnchor(R)?L=h.CAP_SHIFT+"em":b.isMiddleAnchor(R)&&(L=h.MID_SHIFT+"em"),L}(E);l.draw(k,"gtitle",{propContainer:E,propName:"title.text",placeholder:E._dfltTitle.plot,attributes:{x:A(E,P),y:M(E,D),"text-anchor":P,dy:D}})},se.doTraceStyle=function(k){var E,P=k.calcdata,D=[];for(E=0;E<P.length;E++){var F=P[E],R=F[0]||{},L=R.trace||{},I=L._module||{},B=I.arraysToCalcdata;B&&B(F,L);var V=I.editStyle;V&&D.push({fn:V,cd0:R})}if(D.length){for(E=0;E<D.length;E++){var Z=D[E];Z.fn(k,Z.cd0)}e(k),se.redrawReglTraces(k)}return T.style(k),x.getComponentMethod("legend","draw")(k),T.previousPromises(k)},se.doColorBars=function(k){return x.getComponentMethod("colorbar","draw")(k),T.previousPromises(k)},se.layoutReplot=function(k){var E=k.layout;return k.layout=void 0,x.call("_doPlot",k,"",E)},se.doLegend=function(k){return x.getComponentMethod("legend","draw")(k),T.previousPromises(k)},se.doTicksRelayout=function(k){return y.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(x.subplotsRegistry.splom.updateGrid(k),e(k),se.redrawReglTraces(k)),se.drawMainTitle(k),T.previousPromises(k)},se.doModeBar=function(k){var E=k._fullLayout;r.manage(k);for(var P=0;P<E._basePlotModules.length;P++){var D=E._basePlotModules[P].updateFx;D&&D(k)}return T.previousPromises(k)},se.doCamera=function(k){for(var E=k._fullLayout,P=E._subplots.gl3d,D=0;D<P.length;D++){var F=E[P[D]];F._scene.setViewport(F)}},se.drawData=function(k){var E=k._fullLayout;e(k);for(var P=E._basePlotModules,D=0;D<P.length;D++)P[D].plot(k);return se.redrawReglTraces(k),T.style(k),x.getComponentMethod("shapes","draw")(k),x.getComponentMethod("annotations","draw")(k),x.getComponentMethod("images","draw")(k),E._replotting=!1,T.previousPromises(k)},se.redrawReglTraces=function(k){var E=k._fullLayout;if(E._has("regl")){var P,D,F=k._fullData,R=[],L=[];for(E._hasOnlyLargeSploms&&E._splomGrid.draw(),P=0;P<F.length;P++){var I=F[P];!0===I.visible&&0!==I._length&&("splom"===I.type?E._splomScenes[I.uid].draw():"scattergl"===I.type?b.pushUnique(R,I.xaxis+I.yaxis):"scatterpolargl"===I.type&&b.pushUnique(L,I.subplot))}for(P=0;P<R.length;P++)(D=E._plots[R[P]])._scene&&D._scene.draw();for(P=0;P<L.length;P++)(D=E[L[P]]._subplot)._scene&&D._scene.draw()}},se.doAutoRangeAndConstraints=function(k){for(var E,P=y.list(k,"",!0),D={},F=0;F<P.length;F++)if(!D[(E=P[F])._id]){D[E._id]=1,p(k,E),c(k,E);var R=E._matchGroup;if(R)for(var L in R){var I=y.getFromId(k,L);c(k,I,E.range),D[L]=1}}d(k)},se.finalDraw=function(k){x.getComponentMethod("rangeslider","draw")(k),x.getComponentMethod("rangeselector","draw")(k)},se.drawMarginPushers=function(k){x.getComponentMethod("legend","draw")(k),x.getComponentMethod("rangeselector","draw")(k),x.getComponentMethod("sliders","draw")(k),x.getComponentMethod("updatemenus","draw")(k),x.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(_,oe,se){"use strict";var v=_("../lib"),x=v.isPlainObject,T=_("./plot_schema"),b=_("../plots/plots"),e=_("../plots/attributes"),o=_("./plot_template"),i=_("./plot_config").dfltConfig;function l(g,m){g=v.extendDeep({},g);var u,w,f=Object.keys(g).sort();function A(D,F,R){if(x(F)&&x(D))l(D,F);else if(Array.isArray(F)&&Array.isArray(D)){var L=o.arrayTemplater({_template:g},R);for(w=0;w<F.length;w++){var I=F[w],B=L.newItem(I)._template;B&&l(B,I)}var V=L.defaultItems();for(w=0;w<V.length;w++)F.push(V[w]._template);for(w=0;w<F.length;w++)delete F[w].templateitemname}}for(u=0;u<f.length;u++){var M=f[u],k=g[M];if(M in m?A(k,m[M],M):m[M]=k,r(M)===M)for(var E in m){var P=r(E);E===P||P!==M||E in g||A(k,m[E],M)}}}function r(g){return g.replace(/[0-9]+$/,"")}function y(g,m,u,w,f){var A=f&&u(f);for(var M in g){var k=g[M],E=d(g,M,w),P=d(g,M,f),D=u(P);if(!D){var F=r(M);F!==M&&(D=u(P=d(g,F,f)))}if(!(A&&A===D||!D||D._noTemplating||"data_array"===D.valType||D.arrayOk&&Array.isArray(k)))if(!D.valType&&x(k))y(k,m,u,E,P);else if(D._isLinkedToArray&&Array.isArray(k))for(var R=!1,L=0,I={},B=0;B<k.length;B++){var V=k[B];if(x(V)){var Z=V.name;if(Z)I[Z]||(y(V,m,u,d(k,L,E),d(k,L,P)),L++,I[Z]=1);else if(!R){var Y=d(g,o.arrayDefaultKey(M),w),Q=d(k,L,E);y(V,m,u,Q,d(k,L,P));var re=v.nestedProperty(m,Q);v.nestedProperty(m,Y).set(re.get()),re.set(null),R=!0}}}else v.nestedProperty(m,E).set(k)}}function h(g,m){return T.getLayoutValObject(g,v.nestedProperty({},m).parts)}function s(g,m){return T.getTraceValObject(g,v.nestedProperty({},m).parts)}function d(g,m,u){return u?Array.isArray(g)?u+"["+m+"]":u+"."+m:m}function p(g){for(var m=0;m<g.length;m++)if(x(g[m]))return!0}function c(g){var m;switch(g.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":m=g.path?"There are no templates for item "+g.path+" with name "+g.templateitemname:"There are no templates for trace "+g.index+", of type "+g.traceType+".";break;case"unused":m=g.path?"The template item at "+g.path+" was not used in constructing the plot.":g.dataCount?"Some of the templates of type "+g.traceType+" were not used. The template has "+g.templateCount+" traces, the data only has "+g.dataCount+" of this type.":"The template has "+g.templateCount+" traces of type "+g.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+g.traceType+" were used more than once. The template has "+g.templateCount+" traces, the data has "+g.dataCount+" of this type."}return g.msg=m,g}se.makeTemplate=function(g){g=v.isPlainObject(g)?g:v.getGraphDiv(g),g=v.extendDeep({_context:i},{data:g.data,layout:g.layout}),b.supplyDefaults(g);var m=g.data||[],u=g.layout||{};u._basePlotModules=g._fullLayout._basePlotModules,u._modules=g._fullLayout._modules;var w={data:{},layout:{}};m.forEach(function(L){var I={};y(L,I,s.bind(null,L));var B=v.coerce(L,{},e,"type"),V=w.data[B];V||(V=w.data[B]=[]),V.push(I)}),y(u,w.layout,h.bind(null,u)),delete w.layout.template;var f=u.template;if(x(f)){var A,M,k,E,P,D,F=f.layout;x(F)&&l(F,w.layout);var R=f.data;if(x(R)){for(M in w.data)if(k=R[M],Array.isArray(k)){for(D=(P=w.data[M]).length,E=k.length,A=0;A<D;A++)l(k[A%E],P[A]);for(A=D;A<E;A++)P.push(v.extendDeep({},k[A]))}for(M in R)M in w.data||(w.data[M]=v.extendDeep([],R[M]))}}return w},se.validateTemplate=function(g,m){var u=v.extendDeep({},{_context:i,data:g.data,layout:g.layout}),w=u.layout||{};x(m)||(m=w.template||{});var f=m.layout,A=m.data,M=[];u.layout=w,u.layout.template=m,b.supplyDefaults(u);var k=u._fullLayout,E=u._fullData,P={};if(x(f)?(function V(Z,Y){for(var Q in Z)if("_"!==Q.charAt(0)&&x(Z[Q])){var re,$=r(Q),J=[];for(re=0;re<Y.length;re++)J.push(d(Z,Q,Y[re])),$!==Q&&J.push(d(Z,$,Y[re]));for(re=0;re<J.length;re++)P[J[re]]=1;V(Z[Q],J)}}(k,["layout"]),function V(Z,Y){for(var Q in Z)if(-1===Q.indexOf("defaults")&&x(Z[Q])){var re=d(Z,Q,Y);P[re]?V(Z[Q],re):M.push({code:"unused",path:re})}}(f,"layout")):M.push({code:"layout"}),x(A)){for(var D,F={},R=0;R<E.length;R++){var L=E[R];F[D=L.type]=(F[D]||0)+1,L._fullInput._template||M.push({code:"missing",index:L._fullInput.index,traceType:D})}for(D in A){var I=A[D].length,B=F[D]||0;I>B?M.push({code:"unused",traceType:D,templateCount:I,dataCount:B}):B>I&&M.push({code:"reused",traceType:D,templateCount:I,dataCount:B})}}else M.push({code:"data"});if(function V(Z,Y){for(var Q in Z)if("_"!==Q.charAt(0)){var re=Z[Q],$=d(Z,Q,Y);x(re)?(Array.isArray(Z)&&!1===re._template&&re.templateitemname&&M.push({code:"missing",path:$,templateitemname:re.templateitemname}),V(re,$)):Array.isArray(re)&&p(re)&&V(re,$)}}({data:E,layout:k},""),M.length)return M.map(c)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("./plot_api"),T=_("../plots/plots"),b=_("../lib"),e=_("../snapshot/helpers"),o=_("../snapshot/tosvg"),i=_("../snapshot/svgtoimg"),l=_("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};oe.exports=function(y,h){var s,d,p,c;function g(B){return!(B in h)||b.validate(h[B],r[B])}if(h=h||{},b.isPlainObject(y)?(s=y.data||[],d=y.layout||{},p=y.config||{},c={}):(y=b.getGraphDiv(y),s=b.extendDeep([],y.data),d=b.extendDeep({},y.layout),p=y._context,c=y._fullLayout||{}),!g("width")&&null!==h.width||!g("height")&&null!==h.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+b.join2(r.format.values,", "," or ")+".");var m={};function u(B,V){return b.coerce(h,m,r,B,V)}var w=u("format"),f=u("width"),A=u("height"),M=u("scale"),k=u("setBackground"),E=u("imageDataOnly"),P=document.createElement("div");P.style.position="absolute",P.style.left="-5000px",document.body.appendChild(P);var D=b.extendFlat({},d);f?D.width=f:null===h.width&&v(c.width)&&(D.width=c.width),A?D.height=A:null===h.height&&v(c.height)&&(D.height=c.height);var F=b.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),R=e.getRedrawFunc(P);function L(){return new Promise(function(B){setTimeout(B,e.getDelay(P._fullLayout))})}function I(){return new Promise(function(B,V){var Z=o(P,w,M),Y=P._fullLayout.width,Q=P._fullLayout.height;function re(){x.purge(P),document.body.removeChild(P)}if("full-json"===w){var $=T.graphJson(P,!1,"keepdata","object",!0,!0);return $.version=l,$=JSON.stringify($),re(),B(E?$:e.encodeJSON($))}if(re(),"svg"===w)return B(E?Z:e.encodeSVG(Z));var J=document.createElement("canvas");J.id=b.randstr(),i({format:w,width:Y,height:Q,scale:M,canvas:J,svg:Z,promise:!0}).then(B).catch(V)})}return new Promise(function(B,V){x.newPlot(P,s,D,F).then(R).then(L).then(I).then(function(Z){var Y;B((Y=Z,E?Y.replace(e.IMAGE_URL_PREFIX,""):Y))}).catch(function(Z){V(Z)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plots/plots"),T=_("./plot_schema"),b=_("./plot_config").dfltConfig,e=v.isPlainObject,o=Array.isArray,i=v.isArrayOrTypedArray;function l(m,u,w,f,A,M){M=M||[];for(var k=Object.keys(m),E=0;E<k.length;E++){var P=k[E];if("transforms"!==P){var D=M.slice();D.push(P);var F=m[P],R=u[P],L=p(w,P),I=(L||{}).valType,B="info_array"===I,V="colorscale"===I,Z=(L||{}).items;if(d(w,P))if(e(F)&&e(R)&&"any"!==I)l(F,R,L,f,A,D);else if(B&&o(F)){F.length>R.length&&f.push(s("unused",A,D.concat(R.length)));var Y,Q,$,J,ie=R.length,j=Array.isArray(Z);if(j&&(ie=Math.min(ie,Z.length)),2===L.dimensions)for(Q=0;Q<ie;Q++)if(o(F[Q])){F[Q].length>R[Q].length&&f.push(s("unused",A,D.concat(Q,R[Q].length)));var q=R[Q].length;for(Y=0;Y<(j?Math.min(q,Z[Q].length):q);Y++)J=R[Q][Y],v.validate($=F[Q][Y],j?Z[Q][Y]:Z)?J!==$&&J!==+$&&f.push(s("dynamic",A,D.concat(Q,Y),$,J)):f.push(s("value",A,D.concat(Q,Y),$))}else f.push(s("array",A,D.concat(Q),F[Q]));else for(Q=0;Q<ie;Q++)J=R[Q],v.validate($=F[Q],j?Z[Q]:Z)?J!==$&&J!==+$&&f.push(s("dynamic",A,D.concat(Q),$,J)):f.push(s("value",A,D.concat(Q),$))}else if(L.items&&!B&&o(F)){var W,ae,G=Z[Object.keys(Z)[0]],ee=[];for(W=0;W<R.length;W++){var te=R[W]._index||W;if((ae=D.slice()).push(te),e(F[te])&&e(R[W])){ee.push(te);var le=F[te],ue=R[W];e(le)&&!1!==le.visible&&!1===ue.visible?f.push(s("invisible",A,ae)):l(le,ue,G,f,A,ae)}}for(W=0;W<F.length;W++)(ae=D.slice()).push(W),e(F[W])?-1===ee.indexOf(W)&&f.push(s("unused",A,ae)):f.push(s("object",A,ae,F[W]))}else!e(F)&&e(R)?f.push(s("object",A,D,F)):i(F)||!i(R)||B||V?P in u?v.validate(F,L)?"enumerated"===L.valType&&(L.coerceNumber&&F!==+R||F!==R)&&f.push(s("dynamic",A,D,F,R)):f.push(s("value",A,D,F)):f.push(s("unused",A,D,F)):f.push(s("array",A,D,F));else f.push(s("schema",A,D))}}return f}function r(m,u){for(var w=m.layout.layoutAttributes,f=0;f<u.length;f++){var A=u[f],M=m.traces[A.type],k=M.layoutAttributes;k&&v.extendFlat(A.subplot?w[M.attributes.subplot.dflt]:w,k)}return w}oe.exports=function(m,u){void 0===m&&(m=[]),void 0===u&&(u={});var w,f,A=T.get(),M=[],k={_context:v.extendFlat({},b)};o(m)?(k.data=v.extendDeep([],m),w=m):(k.data=[],w=[],M.push(s("array","data"))),e(u)?(k.layout=v.extendDeep({},u),f=u):(k.layout={},f={},arguments.length>1&&M.push(s("object","layout"))),x.supplyDefaults(k);for(var E=k._fullData,P=w.length,D=0;D<P;D++){var F=w[D],R=["data",D];if(e(F)){var L=E[D],I=L.type,B=A.traces[I].attributes;B.type={valType:"enumerated",values:[I]},!1===L.visible&&!1!==F.visible&&M.push(s("invisible",R)),l(F,L,B,M,R);var V=F.transforms,Z=L.transforms;if(V){o(V)||M.push(s("array",R,["transforms"])),R.push("transforms");for(var Y=0;Y<V.length;Y++){var Q=["transforms",Y],re=V[Y].type;if(e(V[Y])){var $=A.transforms[re]?A.transforms[re].attributes:{};$.type={valType:"enumerated",values:Object.keys(A.transforms)},l(V[Y],Z[Y],$,M,R,Q)}else M.push(s("object",R,Q))}}}else M.push(s("object",R))}return l(f,k._fullLayout,r(A,E),M,"layout"),0===M.length?void 0:M};var y={object:function(m,u){return("layout"===m&&""===u?"The layout argument":"data"===m[0]&&""===u?"Trace "+m[1]+" in the data argument":h(m)+"key "+u)+" must be linked to an object container"},array:function(m,u){return("data"===m?"The data argument":h(m)+"key "+u)+" must be linked to an array container"},schema:function(m,u){return h(m)+"key "+u+" is not part of the schema"},unused:function(m,u,w){var f=e(w)?"container":"key";return h(m)+f+" "+u+" did not get coerced"},dynamic:function(m,u,w,f){return[h(m)+"key",u,"(set to '"+w+"')","got reset to","'"+f+"'","during defaults."].join(" ")},invisible:function(m,u){return(u?h(m)+"item "+u:"Trace "+m[1])+" got defaulted to be not visible"},value:function(m,u,w){return[h(m)+"key "+u,"is set to an invalid value ("+w+")"].join(" ")}};function h(m){return o(m)?"In data trace "+m[1]+", ":"In "+m+", "}function s(m,u,w,f,A){var M,k;w=w||"",o(u)?(M=u[0],k=u[1]):(M=u,k=null);var E=function(D){if(!o(D))return String(D);for(var F="",R=0;R<D.length;R++){var L=D[R];"number"==typeof L?F=F.substr(0,F.length-1)+"["+L+"]":F+=L,R<D.length-1&&(F+=".")}return F}(w),P=y[m](u,E,f,A);return v.log(P),{code:m,container:M,trace:k,path:w,astr:E,msg:P}}function d(m,u){var w=g(u),f=w.keyMinusId;return!!(f in m&&m[f]._isSubplotObj&&w.id)||u in m}function p(m,u){return u in m?m[u]:m[g(u).keyMinusId]}var c=v.counterRegex("([a-z]+)");function g(m){var u=m.match(c);return{keyMinusId:u&&u[1],id:u&&u[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(_,oe,se){"use strict";oe.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plot_api/plot_template");oe.exports=function(T,b,e){var o,i,l=e.name,r=e.inclusionAttr||"visible",y=b[l],h=v.isArrayOrTypedArray(T[l])?T[l]:[],s=b[l]=[],d=x.arrayTemplater(b,l,r);for(o=0;o<h.length;o++){var p=h[o];v.isPlainObject(p)?i=d.newItem(p):(i=d.newItem({}))[r]=!1,i._index=o,!1!==i[r]&&e.handleItemDefaults(p,i,b,e),s.push(i)}var c=d.defaultItems();for(o=0;o<c.length;o++)(i=c[o])._index=s.length,e.handleItemDefaults({},i,b,e,{}),s.push(i);if(v.isArrayOrTypedArray(y)){var g=Math.min(y.length,s.length);for(o=0;o<g;o++)v.relinkPrivateKeys(s[o],y[o])}return s}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(_,oe,se){"use strict";var v=_("./font_attributes"),x=_("../components/fx/attributes");oe.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:v({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:x.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=x.dateTime2ms,b=x.incrementMonth,e=_("../../constants/numerical").ONEAVGMONTH;oe.exports=function(o,i,l,r){if("date"!==i.type)return{vals:r};var y=o[l+"periodalignment"];if(!y)return{vals:r};var h,s=o[l+"period"];if(v(s)){if((s=+s)<=0)return{vals:r}}else if("string"==typeof s&&"M"===s.charAt(0)){var d=+s.substring(1);if(!(d>0&&Math.round(d)===d))return{vals:r};h=d}for(var p=i.calendar,c="start"===y,g="end"===y,u=T(o[l+"period0"],p)||0,w=[],f=[],A=[],M=r.length,k=0;k<M;k++){var E,P,D,F=r[k];if(h){for(E=Math.round((F-u)/(h*e)),D=b(u,h*E,p);D>F;)D=b(D,-h,p);for(;D<=F;)D=b(D,h,p);P=b(D,-h,p)}else{for(D=u+(E=Math.round((F-u)/s))*s;D>F;)D-=s;for(;D<=F;)D+=s;P=D-s}w[k]=c?P:g?D:(P+D)/2,f[k]=P,A[k]=D}return{vals:w,starts:f,ends:A}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(_,oe,se){"use strict";oe.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../constants/numerical").FP_SAFE,e=_("../../registry"),o=_("../../components/drawing"),i=_("./axis_ids"),l=i.getFromId,r=i.isLinked;function y(f,A){var M,k,E=[],P=f._fullLayout,D=s(P,A,0),F=s(P,A,1),R=d(f,A),L=R.min,I=R.max;if(0===L.length||0===I.length)return T.simpleMap(A.range,A.r2l);var B=L[0].val,V=I[0].val;for(M=1;M<L.length&&B===V;M++)B=Math.min(B,L[M].val);for(M=1;M<I.length&&B===V;M++)V=Math.max(V,I[M].val);var Z=!1;if(A.range){var Y=T.simpleMap(A.range,A.r2l);Z=Y[1]<Y[0]}"reversed"===A.autorange&&(Z=!0,A.autorange=!0);var Q,re,$,J,ie,j,q=A.rangemode,W="tozero"===q,ae="nonnegative"===q,G=A._length,ee=G/10,te=0;for(M=0;M<L.length;M++)for(Q=L[M],k=0;k<I.length;k++)(j=(re=I[k]).val-Q.val-h(A,Q.val,re.val))>0&&((ie=G-D(Q)-F(re))>ee?j/ie>te&&($=Q,J=re,te=j/ie):j/G>te&&($={val:Q.val,nopad:1},J={val:re.val,nopad:1},te=j/G));if(B===V){var le=B-1,ue=B+1;if(W)if(0===B)E=[0,1];else{var de=(B>0?I:L).reduce(function(be,me){return Math.max(be,F(me))},0),he=B/(1-Math.min(.5,de/G));E=B>0?[0,he]:[he,0]}else E=ae?[Math.max(0,le),Math.max(1,ue)]:[le,ue]}else W?($.val>=0&&($={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):ae&&($.val-te*D($)<0&&($={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),te=(J.val-$.val-h(A,Q.val,re.val))/(G-D($)-F(J)),E=[$.val-te*D($),J.val+te*F(J)];return Z&&E.reverse(),T.simpleMap(E,A.l2r||Number)}function h(f,A,M){var k=0;if(f.rangebreaks)for(var E=f.locateBreaks(A,M),P=0;P<E.length;P++){var D=E[P];k+=D.max-D.min}return k}function s(f,A,M){var k=.05*A._length,E=A._anchorAxis||{};if(-1!==(A.ticklabelposition||"").indexOf("inside")||-1!==(E.ticklabelposition||"").indexOf("inside")){var P="reversed"===A.autorange;if(!P){var D=T.simpleMap(A.range,A.r2l);P=D[1]<D[0]}P&&(M=!M)}var F=0;return r(f,A._id)||(F=function(R,L,I){var B=0,V="x"===L._id.charAt(0);for(var Z in R._plots){var Y=R._plots[Z];if(L._id===Y.xaxis._id||L._id===Y.yaxis._id){var Q=(V?Y.yaxis:Y.xaxis)||{};if(-1!==(Q.ticklabelposition||"").indexOf("inside")&&(!I&&("left"===Q.side||"bottom"===Q.side)||I&&("top"===Q.side||"right"===Q.side))){if(Q._vals){var re=T.deg2rad(Q._tickAngles[Q._id+"tick"]||0),$=Math.abs(Math.cos(re)),J=Math.abs(Math.sin(re));Q._vals[0].bb||Q._selections[Q._id+"tick"].each(function(G){var ee=v.select(this);ee.select(".text-math-group").empty()&&(G.bb=o.bBox(ee.node()))});for(var j=0;j<Q._vals.length;j++){var q=Q._vals[j].bb;if(q){var W=6+q.width,ae=6+q.height;B=Math.max(B,V?Math.max(W*$,ae*J):Math.max(ae*$,W*J))}}}"inside"===Q.ticks&&"inside"===Q.ticklabelposition&&(B+=Q.ticklen||0)}}}return B}(f,A,M)),k=Math.max(F,k),"domain"===A.constrain&&A._inputDomain&&(k*=(A._inputDomain[1]-A._inputDomain[0])/(A.domain[1]-A.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?k:F)}}function d(f,A,M){var k,E,P,D=A._id,R=f._fullLayout,L=[],I=[];function B(re,$){for(k=0;k<$.length;k++){var J=re[$[k]],ie=(J._extremes||{})[D];if(!0===J.visible&&ie){for(E=0;E<ie.min.length;E++)p(L,(P=ie.min[E]).val,P.pad,{extrapad:P.extrapad});for(E=0;E<ie.max.length;E++)c(I,(P=ie.max[E]).val,P.pad,{extrapad:P.extrapad})}}}if(B(f._fullData,A._traceIndices),B(R.annotations||[],A._annIndices||[]),B(R.shapes||[],A._shapeIndices||[]),A._matchGroup&&!M)for(var V in A._matchGroup)if(V!==A._id){var Z=l(f,V),Y=d(f,Z,!0),Q=A._length/Z._length;for(E=0;E<Y.min.length;E++)p(L,(P=Y.min[E]).val,P.pad*Q,{extrapad:P.extrapad});for(E=0;E<Y.max.length;E++)c(I,(P=Y.max[E]).val,P.pad*Q,{extrapad:P.extrapad})}return{min:L,max:I}}function p(f,A,M,k){g(f,A,M,k,u)}function c(f,A,M,k){g(f,A,M,k,w)}function g(f,A,M,k,E){for(var P=k.tozero,D=k.extrapad,F=!0,R=0;R<f.length&&F;R++){var L=f[R];if(E(L.val,A)&&L.pad>=M&&(L.extrapad||!D)){F=!1;break}E(A,L.val)&&L.pad<=M&&(D||!L.extrapad)&&(f.splice(R,1),R--)}if(F){var I=P&&0===A;f.push({val:A,pad:I?0:M,extrapad:!I&&D})}}function m(f){return x(f)&&Math.abs(f)<b}function u(f,A){return f<=A}function w(f,A){return f>=A}oe.exports={getAutoRange:y,makePadFn:s,doAutoRange:function(f,A,M){if(A.setScale(),A.autorange){A.range=M?M.slice():y(f,A),A._r=A.range.slice(),A._rl=T.simpleMap(A._r,A.r2l);var k=A._input,E={};E[A._attr+".range"]=A.range,E[A._attr+".autorange"]=A.autorange,e.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,E),k.range=A.range.slice(),k.autorange=A.autorange}var P=A._anchorAxis;if(P&&P.rangeslider){var D=P.rangeslider[A._name];D&&"auto"===D.rangemode&&(D.range=y(f,A)),P._input.rangeslider[A._name]=T.extendFlat({},D)}},findExtremes:function(f,A,M){M||(M={}),f._m||f.setScale();var k,E,P,D,F,R,L,I,B,V=[],Z=[],Y=A.length,Q=M.padded||!1,re=M.tozero&&("linear"===f.type||"-"===f.type),$="log"===f.type,J=!1,ie=M.vpadLinearized||!1;function j(ue){if(Array.isArray(ue))return J=!0,function(he){return Math.max(Number(ue[he]||0),0)};var de=Math.max(Number(ue||0),0);return function(){return de}}var q=j((f._m>0?M.ppadplus:M.ppadminus)||M.ppad||0),W=j((f._m>0?M.ppadminus:M.ppadplus)||M.ppad||0),ae=j(M.vpadplus||M.vpad),G=j(M.vpadminus||M.vpad);if(!J){if(I=1/0,B=-1/0,$)for(k=0;k<Y;k++)(E=A[k])<I&&E>0&&(I=E),E>B&&E<b&&(B=E);else for(k=0;k<Y;k++)(E=A[k])<I&&E>-b&&(I=E),E>B&&E<b&&(B=E);A=[I,B],Y=2}var ee={tozero:re,extrapad:Q};function te(ue){x(P=A[ue])&&(R=q(ue),L=W(ue),ie?(D=f.c2l(P)-G(ue),F=f.c2l(P)+ae(ue)):(I=P-G(ue),B=P+ae(ue),$&&I<B/10&&(I=B/10),D=f.c2l(I),F=f.c2l(B)),re&&(D=Math.min(0,D),F=Math.max(0,F)),m(D)&&p(V,D,L,ee),m(F)&&c(Z,F,R,ee))}var le=Math.min(6,Y);for(k=0;k<le;k++)te(k);for(k=Y-1;k>=le;k--)te(k);return{min:V,max:Z,opts:M}},concatExtremes:d}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib"),o=e.strTranslate,i=_("../../lib/svg_text_utils"),l=_("../../components/titles"),r=_("../../components/color"),y=_("../../components/drawing"),h=_("./layout_attributes"),s=_("./clean_ticks"),d=_("../../constants/numerical"),p=d.ONEMAXYEAR,c=d.ONEAVGYEAR,g=d.ONEMINYEAR,m=d.ONEMAXQUARTER,u=d.ONEAVGQUARTER,w=d.ONEMINQUARTER,f=d.ONEMAXMONTH,A=d.ONEAVGMONTH,M=d.ONEMINMONTH,k=d.ONEWEEK,E=d.ONEDAY,P=E/2,D=d.ONEHOUR,F=d.ONEMIN,R=d.ONESEC,L=d.MINUS_SIGN,I=d.BADNUM,B={K:"zeroline"},V={K:"gridline",L:"path"},Z={K:"tick",L:"path"},Y={K:"tick",L:"text"},Q=_("../../constants/alignment"),re=Q.MID_SHIFT,$=Q.CAP_SHIFT,J=Q.LINE_SPACING,ie=Q.OPPOSITE_SIDE,j=oe.exports={};j.setConvert=_("./set_convert");var q=_("./axis_autotype"),W=_("./axis_ids"),ae=W.idSort,G=W.isLinked;j.id2name=W.id2name,j.name2id=W.name2id,j.cleanId=W.cleanId,j.list=W.list,j.listIds=W.listIds,j.getFromId=W.getFromId,j.getFromTrace=W.getFromTrace;var ee=_("./autorange");function te(Ge){var Qe=1e-4*(Ge[1]-Ge[0]);return[Ge[0]-Qe,Ge[1]+Qe]}j.getAutoRange=ee.getAutoRange,j.findExtremes=ee.findExtremes,j.coerceRef=function(Ge,Qe,Rt,gt,Be,Ve){var Le=gt.charAt(gt.length-1),je=Rt._fullLayout._subplots[Le+"axis"],Ke=gt+"ref",ft={};return Be||(Be=je[0]||("string"==typeof Ve?Ve:Ve[0])),Ve||(Ve=Be),je=je.concat(je.map(function(mt){return mt+" domain"})),ft[Ke]={valType:"enumerated",values:je.concat(Ve?"string"==typeof Ve?[Ve]:Ve:[]),dflt:Be},e.coerce(Ge,Qe,ft,Ke)},j.getRefType=function(Ge){return void 0===Ge?Ge:"paper"===Ge?"paper":"pixel"===Ge?"pixel":/( domain)$/.test(Ge)?"domain":"range"},j.coercePosition=function(Ge,Qe,Rt,gt,Be,Ve){var Le,je;if("range"!==j.getRefType(gt))Le=e.ensureNumber,je=Rt(Be,Ve);else{var Ke=j.getFromId(Qe,gt);je=Rt(Be,Ve=Ke.fraction2r(Ve)),Le=Ke.cleanPos}Ge[Be]=Le(je)},j.cleanPosition=function(Ge,Qe,Rt){return("paper"===Rt||"pixel"===Rt?e.ensureNumber:j.getFromId(Qe,Rt).cleanPos)(Ge)},j.redrawComponents=function(Ge,Qe){Qe=Qe||j.listIds(Ge);var Rt=Ge._fullLayout;function gt(Be,Ve,Le,je){for(var Ke=b.getComponentMethod(Be,Ve),ft={},mt=0;mt<Qe.length;mt++)for(var pt=Rt[j.id2name(Qe[mt])][Le],Ot=0;Ot<pt.length;Ot++){var Pt=pt[Ot];if(!ft[Pt]&&(Ke(Ge,Pt),ft[Pt]=1,je))return}}gt("annotations","drawOne","_annIndices"),gt("shapes","drawOne","_shapeIndices"),gt("images","draw","_imgIndices",!0)};var le=j.getDataConversions=function(Ge,Qe,Rt,gt){var Be,Ve="x"===Rt||"y"===Rt||"z"===Rt?Rt:gt;if(Array.isArray(Ve)){if(Be={type:q(gt,void 0,{autotypenumbers:Ge._fullLayout.autotypenumbers}),_categories:[]},j.setConvert(Be),"category"===Be.type)for(var Le=0;Le<gt.length;Le++)Be.d2c(gt[Le])}else Be=j.getFromTrace(Ge,Qe,Ve);return Be?{d2c:Be.d2c,c2d:Be.c2d}:"ids"===Ve?{d2c:de,c2d:de}:{d2c:ue,c2d:ue}};function ue(Ge){return+Ge}function de(Ge){return String(Ge)}function he(Ge){return+Ge.substring(1)}j.getDataToCoordFunc=function(Ge,Qe,Rt,gt){return le(Ge,Qe,Rt,gt).d2c},j.counterLetter=function(Ge){var Qe=Ge.charAt(0);return"x"===Qe?"y":"y"===Qe?"x":void 0},j.minDtick=function(Ge,Qe,Rt,gt){-1===["log","category","multicategory"].indexOf(Ge.type)&&gt?void 0===Ge._minDtick?(Ge._minDtick=Qe,Ge._forceTick0=Rt):Ge._minDtick&&((Ge._minDtick/Qe+1e-6)%1<2e-6&&((Rt-Ge._forceTick0)/Qe%1+1.000001)%1<2e-6?(Ge._minDtick=Qe,Ge._forceTick0=Rt):((Qe/Ge._minDtick+1e-6)%1>2e-6||((Rt-Ge._forceTick0)/Ge._minDtick%1+1.000001)%1>2e-6)&&(Ge._minDtick=0)):Ge._minDtick=0},j.saveRangeInitial=function(Ge,Qe){for(var Rt=j.list(Ge,"",!0),gt=!1,Be=0;Be<Rt.length;Be++){var Ve=Rt[Be],Le=void 0===Ve._rangeInitial;(Le&&!1===Ve.autorange||Qe&&(Le||Ve.range[0]!==Ve._rangeInitial[0]||Ve.range[1]!==Ve._rangeInitial[1]))&&(Ve._rangeInitial=Ve.range.slice(),gt=!0)}return gt},j.saveShowSpikeInitial=function(Ge,Qe){for(var Rt=j.list(Ge,"",!0),gt=!1,Be="on",Ve=0;Ve<Rt.length;Ve++){var Le=Rt[Ve],je=void 0===Le._showSpikeInitial;(je||Qe&&(je||Le.showspikes!==Le._showspikes))&&(Le._showSpikeInitial=Le.showspikes,gt=!0),"on"!==Be||Le.showspikes||(Be="off")}return Ge._fullLayout._cartesianSpikesEnabled=Be,gt},j.autoBin=function(Ge,Qe,Rt,gt,Be,Ve){var Le,je=e.aggNums(Math.min,null,Ge),Ke=e.aggNums(Math.max,null,Ge);if("category"===Qe.type||"multicategory"===Qe.type)return{start:je-.5,end:Ke+.5,size:Math.max(1,Math.round(Ve)||1),_dataSpan:Ke-je};if(Be||(Be=Qe.calendar),Le="log"===Qe.type?{type:"linear",range:[je,Ke]}:{type:Qe.type,range:e.simpleMap([je,Ke],Qe.c2r,0,Be),calendar:Be},j.setConvert(Le),Ve=Ve&&s.dtick(Ve,Le.type))Le.dtick=Ve,Le.tick0=s.tick0(void 0,Le.type,Be);else{var ft;if(Rt)ft=(Ke-je)/Rt;else{var mt=e.distinctVals(Ge),pt=Math.pow(10,Math.floor(Math.log(mt.minDiff)/Math.LN10)),Ot=pt*e.roundUp(mt.minDiff/pt,[.9,1.9,4.9,9.9],!0);ft=Math.max(Ot,2*e.stdev(Ge)/Math.pow(Ge.length,gt?.25:.4)),x(ft)||(ft=1)}j.autoTicks(Le,ft)}var Pt,Jt=Le.dtick,$t=j.tickIncrement(j.tickFirst(Le),Jt,"reverse",Be);if("number"==typeof Jt)Pt=($t=function(ut,Dt,Wt,zt,Ht){var Ne=0,ot=0,yt=0,It=0;function Vt(wn){return(1+100*(wn-ut)/Wt.dtick)%100<2}for(var ln=0;ln<Dt.length;ln++)Dt[ln]%1==0?yt++:x(Dt[ln])||It++,Vt(Dt[ln])&&Ne++,Vt(Dt[ln]+Wt.dtick/2)&&ot++;var un=Dt.length-It;if(yt===un&&"date"!==Wt.type)Wt.dtick<1?ut=zt-.5*Wt.dtick:(ut-=.5)+Wt.dtick<zt&&(ut+=Wt.dtick);else if(ot<.1*un&&(Ne>.3*un||Vt(zt)||Vt(Ht))){var an=Wt.dtick/2;ut+=ut+an<zt?an:-an}return ut}($t,Ge,Le,je,Ke))+(1+Math.floor((Ke-$t)/Jt))*Jt;else for("M"===Le.dtick.charAt(0)&&($t=function(ut,Dt,Wt,zt,Ht){var Ne=e.findExactDates(Dt,Ht);if(Ne.exactDays>.8){var ot=Number(Wt.substr(1));Ne.exactYears>.8&&ot%12==0?ut=j.tickIncrement(ut,"M6","reverse")+1.5*E:Ne.exactMonths>.8?ut=j.tickIncrement(ut,"M1","reverse")+15.5*E:ut-=P;var yt=j.tickIncrement(ut,Wt);if(yt<=zt)return yt}return ut}($t,Ge,Jt,je,Be)),Pt=$t;Pt<=Ke;)Pt=j.tickIncrement(Pt,Jt,!1,Be);return{start:Qe.c2r($t,0,Be),end:Qe.c2r(Pt,0,Be),size:Jt,_dataSpan:Ke-je}},j.prepTicks=function(Ge,Qe){var Rt=e.simpleMap(Ge.range,Ge.r2l,void 0,void 0,Qe);if(Ge._dtickInit=Ge.dtick,Ge._tick0Init=Ge.tick0,"auto"===Ge.tickmode||!Ge.dtick){var gt,Be=Ge.nticks;Be||("category"===Ge.type||"multicategory"===Ge.type?(gt=Ge.tickfont?e.bigFont(Ge.tickfont.size||12):15,Be=Ge._length/gt):(gt="y"===Ge._id.charAt(0)?40:80,Be=e.constrain(Ge._length/gt,4,9)+1),"radialaxis"===Ge._name&&(Be*=2)),"array"===Ge.tickmode&&(Be*=100),Ge._roughDTick=Math.abs(Rt[1]-Rt[0])/Be,j.autoTicks(Ge,Ge._roughDTick),Ge._minDtick>0&&Ge.dtick<2*Ge._minDtick&&(Ge.dtick=Ge._minDtick,Ge.tick0=Ge.l2r(Ge._forceTick0))}"period"===Ge.ticklabelmode&&function(Ve){var Le;function je(){return!(x(Ve.dtick)||"M"!==Ve.dtick.charAt(0))}var Ke=je(),ft=j.getTickFormat(Ve);if(ft){var mt=Ve._dtickInit!==Ve.dtick;/%[fLQsSMX]/.test(ft)||(/%[HI]/.test(ft)?(Le=D,mt&&!Ke&&Ve.dtick<D&&(Ve.dtick=D)):/%p/.test(ft)?(Le=P,mt&&!Ke&&Ve.dtick<P&&(Ve.dtick=P)):/%[Aadejuwx]/.test(ft)?(Le=E,mt&&!Ke&&Ve.dtick<E&&(Ve.dtick=E)):/%[UVW]/.test(ft)?(Le=k,mt&&!Ke&&Ve.dtick<k&&(Ve.dtick=k)):/%[Bbm]/.test(ft)?(Le=A,mt&&(Ke?he(Ve.dtick)<1:Ve.dtick<M)&&(Ve.dtick="M1")):/%[q]/.test(ft)?(Le=u,mt&&(Ke?he(Ve.dtick)<3:Ve.dtick<w)&&(Ve.dtick="M3")):/%[Yy]/.test(ft)&&(Le=c,mt&&(Ke?he(Ve.dtick)<12:Ve.dtick<g)&&(Ve.dtick="M12")))}(Ke=je())&&Ve.tick0===Ve._dowTick0&&(Ve.tick0=Ve._rawTick0),Ve._definedDelta=Le}(Ge),Ge.tick0||(Ge.tick0="date"===Ge.type?"2000-01-01":0),"date"===Ge.type&&Ge.dtick<.1&&(Ge.dtick=.1),Te(Ge)},j.calcTicks=function(Ge,Qe){j.prepTicks(Ge,Qe);var Rt=e.simpleMap(Ge.range,Ge.r2l,void 0,void 0,Qe);if("array"===Ge.tickmode)return function(pn){var xn=pn.tickvals,En=pn.ticktext,In=new Array(xn.length),Yn=te(e.simpleMap(pn.range,pn.r2l)),nr=Math.min(Yn[0],Yn[1]),sr=Math.max(Yn[0],Yn[1]),Ar=0;Array.isArray(En)||(En=[]);var yr="category"===pn.type?pn.d2l_noadd:pn.d2l;"log"===pn.type&&"L"!==String(pn.dtick).charAt(0)&&(pn.dtick="L"+Math.pow(10,Math.floor(Math.min(pn.range[0],pn.range[1]))-1));for(var Pr=0;Pr<xn.length;Pr++){var Wr=yr(xn[Pr]);Wr>nr&&Wr<sr&&(In[Ar]=void 0===En[Pr]?j.tickText(pn,Wr):Ie(pn,Wr,String(En[Pr])),Ar++)}return Ar<xn.length&&In.splice(Ar,xn.length-Ar),pn.rangebreaks&&(In=In.filter(function(lr){return pn.maskBreaks(lr.x)!==I})),In}(Ge);var gt=te(Rt),Be=gt[0],Ve=gt[1],Le=Rt[1]<Rt[0],je=Math.min(Rt[0],Rt[1]),Ke=Math.max(Rt[0],Rt[1]),ft=x(Ge.dtick),mt="log"===Ge.type&&!(ft||"L"===Ge.dtick.charAt(0)),pt="period"===Ge.ticklabelmode;if(Ge._tmin=j.tickFirst(Ge,Qe),Ge._tmin<Be!==Le)return[];"category"!==Ge.type&&"multicategory"!==Ge.type||(Ve=Le?Math.max(-.5,Ve):Math.min(Ge._categories.length-.5,Ve));var Ot=Ge._tmin;Ge.rangebreaks&&Ge._tick0Init!==Ge.tick0&&(Ot=Nt(Ot,Ge),Le||(Ot=j.tickIncrement(Ot,Ge.dtick,!Le,Ge.calendar))),pt&&(Ot=j.tickIncrement(Ot,Ge.dtick,!Le,Ge.calendar));var Pt,Jt=Ge.ticklabelstep,$t=Math.max(1e3,Ge._length||0),ut=[],Dt=null;ft?Pt=Ge.dtick:"date"===Ge.type?"string"==typeof Ge.dtick&&"M"===Ge.dtick.charAt(0)&&(Pt=A*Ge.dtick.substring(1)):Pt=Ge._roughDTick;for(var Wt,zt,Ht=Math.round((Ge.r2l(Ot)-Ge.r2l(Ge.tick0))/Pt)-1;Le?Ot>=Ve:Ot<=Ve;Ot=j.tickIncrement(Ot,Ge.dtick,Le,Ge.calendar)){if(Ht++,Ge.rangebreaks&&!Le){if(Ot<Be)continue;if(Ge.maskBreaks(Ot)===I&&Nt(Ot,Ge)>=Ke)break}if(ut.length>$t||Ot===Dt)break;Dt=Ot;var Ne=!1;mt&&Ot!==(0|Ot)&&(Ne=!0);var ot={minor:Ne,value:Ot};Jt>1&&Ht%Jt&&(ot.skipLabel=!0),ut.push(ot)}if(pt&&function(pn,xn,En){for(var In=0;In<pn.length;In++){var Yn=pn[In].value,nr=In,sr=In+1;In<pn.length-1?(nr=In,sr=In+1):In>0?(nr=In-1,sr=In):(nr=In,sr=In);var Ar,Wr=Math.abs(pn[sr].value-pn[nr].value),lr=En||Wr,Hn=0;lr>=g?Hn=Wr>=g&&Wr<=p?Wr:c:En===u&&lr>=w?Hn=Wr>=w&&Wr<=m?Wr:u:lr>=M?Hn=Wr>=M&&Wr<=f?Wr:A:En===k&&lr>=k?Hn=k:lr>=E?Hn=E:En===P&&lr>=P?Hn=P:En===D&&lr>=D&&(Hn=D),Hn>=Wr&&(Hn=Wr,Ar=!0);var Sr=Yn+Hn;if(xn.rangebreaks&&Hn>0){for(var ti=0,Fn=0;Fn<84;Fn++){var br=(Fn+.5)/84;xn.maskBreaks(Yn*(1-br)+br*Sr)!==I&&ti++}(Hn*=ti/84)||(pn[In].drop=!0),Ar&&Wr>k&&(Hn=Wr)}(Hn>0||0===In)&&(pn[In].periodX=Yn+Hn/2)}}(ut,Ge,Ge._definedDelta),Ge.rangebreaks){var yt="y"===Ge._id.charAt(0),It=1;"auto"===Ge.tickmode&&(It=Ge.tickfont?Ge.tickfont.size:12);var Vt=NaN;for(Wt=ut.length-1;Wt>-1;Wt--)if(ut[Wt].drop)ut.splice(Wt,1);else{ut[Wt].value=Nt(ut[Wt].value,Ge);var ln=Ge.c2p(ut[Wt].value);(yt?Vt>ln-It:Vt<ln+It)?ut.splice(Le?Wt+1:Wt,1):Vt=ln}}at(Ge)&&360===Math.abs(Rt[1]-Rt[0])&&ut.pop(),Ge._tmax=(ut[ut.length-1]||{}).value,Ge._prevDateHead="",Ge._inCalcTicks=!0;var un,an,wn=function(pn){pn.text=" ",Ge._prevDateHead=zt},Zn=[];for(Wt=0;Wt<ut.length;Wt++)zt=Ge._prevDateHead,un=j.tickText(Ge,ut[Wt].value,!1,ut[Wt].minor),void 0!==(an=ut[Wt].periodX)&&(un.periodX=an,(an>Ke||an<je)&&(an>Ke&&(un.periodX=Ke),an<je&&(un.periodX=je),wn(un))),ut[Wt].skipLabel&&wn(un),Zn.push(un);return Ge._inCalcTicks=!1,Zn};var be=[2,5,10],me=[1,2,3,6,12],_e=[1,2,5,10,15,30],Ee=[1,2,3,7,14],De=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Se=[-.301,0,.301,.699,1],Fe=[15,30,45,90,180];function ve(Ge,Qe,Rt){return Qe*e.roundUp(Ge/Qe,Rt)}function Te(Ge){var Qe=Ge.dtick;if(Ge._tickexponent=0,x(Qe)||"string"==typeof Qe||(Qe=1),"category"!==Ge.type&&"multicategory"!==Ge.type||(Ge._tickround=null),"date"===Ge.type){var Rt=Ge.r2l(Ge.tick0),gt=Ge.l2r(Rt).replace(/(^-|i)/g,""),Be=gt.length;if("M"===String(Qe).charAt(0))Ge._tickround=Be>10||"01-01"!==gt.substr(5)?"d":+Qe.substr(1)%12==0?"y":"m";else if(Qe>=E&&Be<=10||Qe>=15*E)Ge._tickround="d";else if(Qe>=F&&Be<=16||Qe>=D)Ge._tickround="M";else if(Qe>=R&&Be<=19||Qe>=F)Ge._tickround="S";else{var Ve=Ge.l2r(Rt+Qe).replace(/^-/,"").length;Ge._tickround=Math.max(Be,Ve)-20,Ge._tickround<0&&(Ge._tickround=4)}}else if(x(Qe)||"L"===Qe.charAt(0)){var Le=Ge.range.map(Ge.r2d||Number);x(Qe)||(Qe=Number(Qe.substr(1))),Ge._tickround=2-Math.floor(Math.log(Qe)/Math.LN10+.01);var je=Math.max(Math.abs(Le[0]),Math.abs(Le[1])),Ke=Math.floor(Math.log(je)/Math.LN10+.01),ft=void 0===Ge.minexponent?3:Ge.minexponent;Math.abs(Ke)>ft&&(Ge._tickexponent=Re(Ge.exponentformat)&&!Ue(Ke)?3*Math.round((Ke-1)/3):Ke)}else Ge._tickround=null}function Ie(Ge,Qe,Rt){var gt=Ge.tickfont||{};return{x:Qe,dx:0,dy:0,text:Rt||"",fontSize:gt.size,font:gt.family,fontColor:gt.color}}j.autoTicks=function(Ge,Qe){var Rt;function gt(mt){return Math.pow(mt,Math.floor(Math.log(Qe)/Math.LN10))}if("date"===Ge.type){Ge.tick0=e.dateTick0(Ge.calendar,0);var Be=2*Qe;if(Be>c)Qe/=c,Rt=gt(10),Ge.dtick="M"+12*ve(Qe,Rt,be);else if(Be>A)Ge.dtick="M"+ve(Qe/=A,1,me);else if(Be>E){Ge.dtick=ve(Qe,E,Ge._hasDayOfWeekBreaks?[1,2,7,14]:Ee);var Ve=j.getTickFormat(Ge),Le="period"===Ge.ticklabelmode;Le&&(Ge._rawTick0=Ge.tick0),Ge.tick0=/%[uVW]/.test(Ve)?e.dateTick0(Ge.calendar,2):e.dateTick0(Ge.calendar,1),Le&&(Ge._dowTick0=Ge.tick0)}else Be>D?Ge.dtick=ve(Qe,D,me):Be>F?Ge.dtick=ve(Qe,F,_e):Be>R?Ge.dtick=ve(Qe,R,_e):(Rt=gt(10),Ge.dtick=ve(Qe,Rt,be))}else if("log"===Ge.type){Ge.tick0=0;var je=e.simpleMap(Ge.range,Ge.r2l);if(Qe>.7)Ge.dtick=Math.ceil(Qe);else if(Math.abs(je[1]-je[0])<1){var Ke=1.5*Math.abs((je[1]-je[0])/Qe);Qe=Math.abs(Math.pow(10,je[1])-Math.pow(10,je[0]))/Ke,Rt=gt(10),Ge.dtick="L"+ve(Qe,Rt,be)}else Ge.dtick=Qe>.3?"D2":"D1"}else"category"===Ge.type||"multicategory"===Ge.type?(Ge.tick0=0,Ge.dtick=Math.ceil(Math.max(Qe,1))):at(Ge)?(Ge.tick0=0,Ge.dtick=ve(Qe,Rt=1,Fe)):(Ge.tick0=0,Rt=gt(10),Ge.dtick=ve(Qe,Rt,be));if(0===Ge.dtick&&(Ge.dtick=1),!x(Ge.dtick)&&"string"!=typeof Ge.dtick){var ft=Ge.dtick;throw Ge.dtick=1,"ax.dtick error: "+String(ft)}},j.tickIncrement=function(Ge,Qe,Rt,gt){var Be=Rt?-1:1;if(x(Qe))return e.increment(Ge,Be*Qe);var Ve=Qe.charAt(0),Le=Be*Number(Qe.substr(1));if("M"===Ve)return e.incrementMonth(Ge,Le,gt);if("L"===Ve)return Math.log(Math.pow(10,Ge)+Le)/Math.LN10;if("D"===Ve){var je="D2"===Qe?Se:De,Ke=Ge+.01*Be,ft=e.roundUp(e.mod(Ke,1),je,Rt);return Math.floor(Ke)+Math.log(v.round(Math.pow(10,ft),1))/Math.LN10}throw"unrecognized dtick "+String(Qe)},j.tickFirst=function(Ge,Qe){var Rt=Ge.r2l||Number,gt=e.simpleMap(Ge.range,Rt,void 0,void 0,Qe),Be=gt[1]<gt[0],Ve=Be?Math.floor:Math.ceil,Le=te(gt)[0],je=Ge.dtick,Ke=Rt(Ge.tick0);if(x(je)){var ft=Ve((Le-Ke)/je)*je+Ke;return"category"!==Ge.type&&"multicategory"!==Ge.type||(ft=e.constrain(ft,0,Ge._categories.length-1)),ft}var mt=je.charAt(0),pt=Number(je.substr(1));if("M"===mt){for(var Ot,Pt,Jt,$t=0,ut=Ke;$t<10;){if(((Ot=j.tickIncrement(ut,je,Be,Ge.calendar))-Le)*(ut-Le)<=0)return Be?Math.min(ut,Ot):Math.max(ut,Ot);Pt=(Le-(ut+Ot)/2)/(Ot-ut),Jt=mt+(Math.abs(Math.round(Pt))||1)*pt,ut=j.tickIncrement(ut,Jt,Pt<0?!Be:Be,Ge.calendar),$t++}return e.error("tickFirst did not converge",Ge),ut}if("L"===mt)return Math.log(Ve((Math.pow(10,Le)-Ke)/pt)*pt+Ke)/Math.LN10;if("D"===mt){var Dt="D2"===je?Se:De,Wt=e.roundUp(e.mod(Le,1),Dt,Be);return Math.floor(Le)+Math.log(v.round(Math.pow(10,Wt),1))/Math.LN10}throw"unrecognized dtick "+String(je)},j.tickText=function(Ge,Qe,Rt,gt){var Be,Ve=Ie(Ge,Qe),Le="array"===Ge.tickmode,je=Rt||Le,Ke=Ge.type,ft="category"===Ke?Ge.d2l_noadd:Ge.d2l;if(Le&&Array.isArray(Ge.ticktext)){var mt=e.simpleMap(Ge.range,Ge.r2l),pt=(Math.abs(mt[1]-mt[0])-(Ge._lBreaks||0))/1e4;for(Be=0;Be<Ge.ticktext.length&&!(Math.abs(Qe-ft(Ge.tickvals[Be]))<pt);Be++);if(Be<Ge.ticktext.length)return Ve.text=String(Ge.ticktext[Be]),Ve}function Ot($t){return void 0===$t||(Rt?"none"===$t:"all"!==$t&&Qe!=={first:Ge._tmin,last:Ge._tmax}[$t])}var ut,Dt,Pt=Rt?"never":"none"!==Ge.exponentformat&&Ot(Ge.showexponent)?"hide":"";if("date"===Ke?function($t,ut,Dt,Wt){var zt=$t._tickround,Ht=Dt&&$t.hoverformat||j.getTickFormat($t);Wt&&(zt=x(zt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[zt]);var Ne,ot=e.formatDate(ut.x,Ht,zt,$t._dateFormat,$t.calendar,$t._extraFormat),yt=ot.indexOf("\n");if(-1!==yt&&(Ne=ot.substr(yt+1),ot=ot.substr(0,yt)),Wt&&("00:00:00"===ot||"00:00"===ot?(ot=Ne,Ne=""):8===ot.length&&(ot=ot.replace(/:00$/,""))),Ne)if(Dt)"d"===zt?ot+=", "+Ne:ot=Ne+(ot?", "+ot:"");else if($t._inCalcTicks&&$t._prevDateHead===Ne){var It=rn($t),Vt=$t._trueSide||$t.side;(!It&&"top"===Vt||It&&"bottom"===Vt)&&(ot+="<br> ")}else $t._prevDateHead=Ne,ot+="<br>"+Ne;ut.text=ot}(Ge,Ve,Rt,je):"log"===Ke?function($t,ut,Dt,Wt,zt){var Ht=$t.dtick,Ne=ut.x,ot=$t.tickformat,yt="string"==typeof Ht&&Ht.charAt(0);if("never"===zt&&(zt=""),Wt&&"L"!==yt&&(Ht="L3",yt="L"),ot||"L"===yt)ut.text=qe(Math.pow(10,Ne),$t,zt,Wt);else if(x(Ht)||"D"===yt&&e.mod(Ne+.01,1)<.1){var It=Math.round(Ne),Vt=Math.abs(It),ln=$t.exponentformat;"power"===ln||Re(ln)&&Ue(It)?(ut.text=0===It?1:1===It?"10":"10<sup>"+(It>1?"":L)+Vt+"</sup>",ut.fontSize*=1.25):("e"===ln||"E"===ln)&&Vt>2?ut.text="1"+ln+(It>0?"+":L)+Vt:(ut.text=qe(Math.pow(10,Ne),$t,"","fakehover"),"D1"===Ht&&"y"===$t._id.charAt(0)&&(ut.dy-=ut.fontSize/6))}else{if("D"!==yt)throw"unrecognized dtick "+String(Ht);ut.text=String(Math.round(Math.pow(10,e.mod(Ne,1)))),ut.fontSize*=.75}if("D1"===$t.dtick){var un=String(ut.text).charAt(0);"0"!==un&&"1"!==un||("y"===$t._id.charAt(0)?ut.dx-=ut.fontSize/4:(ut.dy+=ut.fontSize/2,ut.dx+=($t.range[1]>$t.range[0]?1:-1)*ut.fontSize*(Ne<0?.5:.25)))}}(Ge,Ve,0,je,Pt):"category"===Ke?(ut=Ve,void 0===(Dt=Ge._categories[Math.round(ut.x)])&&(Dt=""),ut.text=String(Dt)):"multicategory"===Ke?function($t,ut,Dt){var Wt=Math.round(ut.x),zt=$t._categories[Wt]||[],Ht=void 0===zt[1]?"":String(zt[1]),Ne=void 0===zt[0]?"":String(zt[0]);Dt?ut.text=Ne+" - "+Ht:(ut.text=Ht,ut.text2=Ne)}(Ge,Ve,Rt):at(Ge)?function($t,ut,Dt,Wt,zt){if("radians"!==$t.thetaunit||Dt)ut.text=qe(ut.x,$t,zt,Wt);else{var Ht=ut.x/180;if(0===Ht)ut.text="0";else{var Ne=function(yt){function It(an,wn){return Math.abs(an-wn)<=1e-6}var Vt=function(an){for(var wn=1;!It(Math.round(an*wn)/wn,an);)wn*=10;return wn}(yt),ln=yt*Vt,un=Math.abs(function an(wn,Zn){return It(Zn,0)?wn:an(Zn,wn%Zn)}(ln,Vt));return[Math.round(ln/un),Math.round(Vt/un)]}(Ht);if(Ne[1]>=100)ut.text=qe(e.deg2rad(ut.x),$t,zt,Wt);else{var ot=ut.x<0;ut.text=1===Ne[1]?1===Ne[0]?"\u03c0":Ne[0]+"\u03c0":["<sup>",Ne[0],"</sup>","\u2044","<sub>",Ne[1],"</sub>","\u03c0"].join(""),ot&&(ut.text=L+ut.text)}}}}(Ge,Ve,Rt,je,Pt):function($t,ut,Dt,Wt,zt){"never"===zt?zt="":"all"===$t.showexponent&&Math.abs(ut.x/$t.dtick)<1e-6&&(zt="hide"),ut.text=qe(ut.x,$t,zt,Wt)}(Ge,Ve,0,je,Pt),gt||(Ge.tickprefix&&!Ot(Ge.showtickprefix)&&(Ve.text=Ge.tickprefix+Ve.text),Ge.ticksuffix&&!Ot(Ge.showticksuffix)&&(Ve.text+=Ge.ticksuffix)),"boundaries"===Ge.tickson||Ge.showdividers){var Jt=function($t){var ut=Ge.l2p($t);return ut>=0&&ut<=Ge._length?$t:null};Ve.xbnd=[Jt(Ve.x-.5),Jt(Ve.x+Ge.dtick-.5)]}return Ve},j.hoverLabelText=function(Ge,Qe,Rt){Rt&&(Ge=e.extendFlat({},Ge,{hoverformat:Rt}));var gt=Array.isArray(Qe)?Qe[0]:Qe,Be=Array.isArray(Qe)?Qe[1]:void 0;if(void 0!==Be&&Be!==gt)return j.hoverLabelText(Ge,gt,Rt)+" - "+j.hoverLabelText(Ge,Be,Rt);var Ve="log"===Ge.type&&gt<=0,Le=j.tickText(Ge,Ge.c2l(Ve?-gt:gt),"hover").text;return Ve?0===gt?"0":L+Le:Le};var Ce=["f","p","n","\u03bc","m","","k","M","G","T"];function Re(Ge){return"SI"===Ge||"B"===Ge}function Ue(Ge){return Ge>14||Ge<-15}function qe(Ge,Qe,Rt,gt){var Be=Ge<0,Ve=Qe._tickround,Le=Rt||Qe.exponentformat||"B",je=Qe._tickexponent,Ke=j.getTickFormat(Qe),ft=Qe.separatethousands;if(gt){var mt={exponentformat:Le,minexponent:Qe.minexponent,dtick:"none"===Qe.showexponent?Qe.dtick:x(Ge)&&Math.abs(Ge)||1,range:"none"===Qe.showexponent?Qe.range.map(Qe.r2d):[0,Ge||1]};Te(mt),Ve=(Number(mt._tickround)||0)+4,je=mt._tickexponent,Qe.hoverformat&&(Ke=Qe.hoverformat)}if(Ke)return Qe._numFormat(Ke)(Ge).replace(/-/g,L);var pt,Ot=Math.pow(10,-Ve)/2;if("none"===Le&&(je=0),(Ge=Math.abs(Ge))<Ot)Ge="0",Be=!1;else{if(Ge+=Ot,je&&(Ge*=Math.pow(10,-je),Ve+=je),0===Ve)Ge=String(Math.floor(Ge));else if(Ve<0){Ge=(Ge=String(Math.round(Ge))).substr(0,Ge.length+Ve);for(var Pt=Ve;Pt<0;Pt++)Ge+="0"}else{var Jt=(Ge=String(Ge)).indexOf(".")+1;Jt&&(Ge=Ge.substr(0,Jt+Ve).replace(/\.?0+$/,""))}Ge=e.numSeparate(Ge,Qe._separators,ft)}return je&&"hide"!==Le&&(Re(Le)&&Ue(je)&&(Le="power"),pt=je<0?L+-je:"power"!==Le?"+"+je:String(je),"e"===Le||"E"===Le?Ge+=Le+pt:"power"===Le?Ge+="\xd710<sup>"+pt+"</sup>":"B"===Le&&9===je?Ge+="B":Re(Le)&&(Ge+=Ce[je/3+5])),Be?L+Ge:Ge}function Xe(Ge,Qe){for(var Rt=[],gt={},Be=0;Be<Qe.length;Be++){var Ve=Qe[Be];gt[Ve.text2]?gt[Ve.text2].push(Ve.x):gt[Ve.text2]=[Ve.x]}for(var Le in gt)Rt.push(Ie(Ge,e.interp(gt[Le],.5),Le));return Rt}function st(Ge){return void 0!==Ge.periodX?Ge.periodX:Ge.x}function He(Ge){return[Ge.text,Ge.x,Ge.axInfo,Ge.font,Ge.fontSize,Ge.fontColor].join("_")}function $e(Ge){var Qe=Ge.title.font.size,Rt=(Ge.title.text.match(i.BR_TAG_ALL)||[]).length;return Ge.title.hasOwnProperty("standoff")?Rt?Qe*($+Rt*J):Qe*$:Rt?Qe*(Rt+1)*J:Qe}function et(Ge,Qe){var Rt=Ge.l2p(Qe);return Rt>1&&Rt<Ge._length-1}function tt(Ge){var Qe=v.select(Ge),Rt=Qe.select(".text-math-group");return Rt.empty()?Qe.select("text"):Rt}function ct(Ge){return Ge._id+".automargin"}function bt(Ge){return ct(Ge)+".mirror"}function At(Ge){return Ge._id+".rangeslider"}function Ut(Ge,Qe){for(var Rt=0;Rt<Qe.length;Rt++)-1===Ge.indexOf(Qe[Rt])&&Ge.push(Qe[Rt])}function Ct(Ge,Qe,Rt){var gt,Be,Ve=[],Le=[],je=Ge.layout;for(gt=0;gt<Qe.length;gt++)Ve.push(j.getFromId(Ge,Qe[gt]));for(gt=0;gt<Rt.length;gt++)Le.push(j.getFromId(Ge,Rt[gt]));var Ke=Object.keys(h),ft=["anchor","domain","overlaying","position","side","tickangle","editType"],mt=["linear","log"];for(gt=0;gt<Ke.length;gt++){var pt=Ke[gt],Ot=Ve[0][pt],Pt=Le[0][pt],Jt=!0,$t=!1,ut=!1;if("_"!==pt.charAt(0)&&"function"!=typeof Ot&&-1===ft.indexOf(pt)){for(Be=1;Be<Ve.length&&Jt;Be++){var Dt=Ve[Be][pt];"type"===pt&&-1!==mt.indexOf(Ot)&&-1!==mt.indexOf(Dt)&&Ot!==Dt?$t=!0:Dt!==Ot&&(Jt=!1)}for(Be=1;Be<Le.length&&Jt;Be++){var Wt=Le[Be][pt];"type"===pt&&-1!==mt.indexOf(Pt)&&-1!==mt.indexOf(Wt)&&Pt!==Wt?ut=!0:Le[Be][pt]!==Pt&&(Jt=!1)}Jt&&($t&&(je[Ve[0]._name].type="linear"),ut&&(je[Le[0]._name].type="linear"),dt(je,pt,Ve,Le,Ge._fullLayout._dfltTitle))}}for(gt=0;gt<Ge._fullLayout.annotations.length;gt++){var zt=Ge._fullLayout.annotations[gt];-1!==Qe.indexOf(zt.xref)&&-1!==Rt.indexOf(zt.yref)&&e.swapAttrs(je.annotations[gt],["?"])}}function dt(Ge,Qe,Rt,gt,Be){var Ve,Le=e.nestedProperty,je=Le(Ge[Rt[0]._name],Qe).get(),Ke=Le(Ge[gt[0]._name],Qe).get();for("title"===Qe&&(je&&je.text===Be.x&&(je.text=Be.y),Ke&&Ke.text===Be.y&&(Ke.text=Be.x)),Ve=0;Ve<Rt.length;Ve++)Le(Ge,Rt[Ve]._name+"."+Qe).set(Ke);for(Ve=0;Ve<gt.length;Ve++)Le(Ge,gt[Ve]._name+"."+Qe).set(je)}function at(Ge){return"angularaxis"===Ge._id}function Nt(Ge,Qe){for(var Rt=Qe._rangebreaks.length,gt=0;gt<Rt;gt++){var Be=Qe._rangebreaks[gt];if(Ge>=Be.min&&Ge<Be.max)return Be.max}return Ge}function rn(Ge){return-1!==(Ge.ticklabelposition||"").indexOf("inside")}function en(Ge,Qe){rn(Ge._anchorAxis||{})&&Ge._hideCounterAxisInsideTickLabels&&Ge._hideCounterAxisInsideTickLabels(Qe)}j.getTickFormat=function(Ge){var Qe,Rt,gt,Be,Ve,Le,je,Ke,Ot,Pt,Jt,$t,ut,Dt;function ft(Ot){return"string"!=typeof Ot?Ot:Number(Ot.replace("M",""))*A}function mt(Ot,Pt){var Jt=["L","D"];if(typeof Ot==typeof Pt){if("number"==typeof Ot)return Ot-Pt;var $t=Jt.indexOf(Ot.charAt(0)),ut=Jt.indexOf(Pt.charAt(0));return $t===ut?Number(Ot.replace(/(L|D)/g,""))-Number(Pt.replace(/(L|D)/g,"")):$t-ut}return"number"==typeof Ot?1:-1}if(Ge.tickformatstops&&Ge.tickformatstops.length>0)switch(Ge.type){case"date":case"linear":for(Qe=0;Qe<Ge.tickformatstops.length;Qe++)if((gt=Ge.tickformatstops[Qe]).enabled&&(Be=Ge.dtick,Le=void 0,void 0,void 0,Le=ft||function(Ot){return Ot},Ke=(Ve=gt.dtickrange)[1],(!(je=Ve[0])&&"number"!=typeof je||Le(je)<=Le(Be))&&(!Ke&&"number"!=typeof Ke||Le(Ke)>=Le(Be)))){Rt=gt;break}break;case"log":for(Qe=0;Qe<Ge.tickformatstops.length;Qe++)if((gt=Ge.tickformatstops[Qe]).enabled&&(Jt=void 0,$t=void 0,ut=void 0,Dt=void 0,Jt=null===(Pt=gt.dtickrange)[0],$t=null===Pt[1],ut=mt(Ot=Ge.dtick,Pt[0])>=0,Dt=mt(Ot,Pt[1])<=0,(Jt||ut)&&($t||Dt))){Rt=gt;break}}return Rt?Rt.value:Ge.tickformat},j.getSubplots=function(Ge,Qe){var Rt=Ge._fullLayout._subplots,gt=Rt.cartesian.concat(Rt.gl2d||[]),Be=Qe?j.findSubplotsWithAxis(gt,Qe):gt;return Be.sort(function(Ve,Le){var je=Ve.substr(1).split("y"),Ke=Le.substr(1).split("y");return je[0]===Ke[0]?+je[1]-+Ke[1]:+je[0]-+Ke[0]}),Be},j.findSubplotsWithAxis=function(Ge,Qe){for(var Rt=new RegExp("x"===Qe._id.charAt(0)?"^"+Qe._id+"y":Qe._id+"$"),gt=[],Be=0;Be<Ge.length;Be++){var Ve=Ge[Be];Rt.test(Ve)&&gt.push(Ve)}return gt},j.makeClipPaths=function(Ge){var Qe=Ge._fullLayout;if(!Qe._hasOnlyLargeSploms){var Rt,gt,Be={_offset:0,_length:Qe.width,_id:""},Ve={_offset:0,_length:Qe.height,_id:""},Le=j.list(Ge,"x",!0),je=j.list(Ge,"y",!0),Ke=[];for(Rt=0;Rt<Le.length;Rt++)for(Ke.push({x:Le[Rt],y:Ve}),gt=0;gt<je.length;gt++)0===Rt&&Ke.push({x:Be,y:je[gt]}),Ke.push({x:Le[Rt],y:je[gt]});var ft=Qe._clips.selectAll(".axesclip").data(Ke,function(mt){return mt.x._id+mt.y._id});ft.enter().append("clipPath").classed("axesclip",!0).attr("id",function(mt){return"clip"+Qe._uid+mt.x._id+mt.y._id}).append("rect"),ft.exit().remove(),ft.each(function(mt){v.select(this).select("rect").attr({x:mt.x._offset||0,y:mt.y._offset||0,width:mt.x._length||1,height:mt.y._length||1})})}},j.draw=function(Ge,Qe,Rt){var gt=Ge._fullLayout;"redraw"===Qe&&gt._paper.selectAll("g.subplot").each(function(Ve){var je=gt._plots[Ve[0]];if(je){var Ke=je.xaxis,ft=je.yaxis;je.xaxislayer.selectAll("."+Ke._id+"tick").remove(),je.yaxislayer.selectAll("."+ft._id+"tick").remove(),je.xaxislayer.selectAll("."+Ke._id+"tick2").remove(),je.yaxislayer.selectAll("."+ft._id+"tick2").remove(),je.xaxislayer.selectAll("."+Ke._id+"divider").remove(),je.yaxislayer.selectAll("."+ft._id+"divider").remove(),je.gridlayer&&je.gridlayer.selectAll("path").remove(),je.zerolinelayer&&je.zerolinelayer.selectAll("path").remove(),gt._infolayer.select(".g-"+Ke._id+"title").remove(),gt._infolayer.select(".g-"+ft._id+"title").remove()}});var Be=Qe&&"redraw"!==Qe?Qe:j.listIds(Ge);return e.syncOrAsync(Be.map(function(Ve){return function(){if(Ve){var Le=j.getFromId(Ge,Ve),je=j.drawOne(Ge,Le,Rt);return Le._r=Le.range.slice(),Le._rl=e.simpleMap(Le._r,Le.r2l),je}}}))},j.drawOne=function(Ge,Qe,Rt){var gt,Be,Ve;Rt=Rt||{},Qe.setScale();var Le=Ge._fullLayout,je=Qe._id,Ke=je.charAt(0),ft=j.counterLetter(je),mt=Le._plots[Qe._mainSubplot];if(mt){var pt=mt[Ke+"axislayer"],Ot=Qe._mainLinePosition,Pt=Qe._mainMirrorPosition,Jt=Qe._vals=j.calcTicks(Qe),$t=[Qe.mirror,Ot,Pt].join("_");for(gt=0;gt<Jt.length;gt++)Jt[gt].axInfo=$t;Qe._selections={},Qe._tickAngles&&(Qe._prevTickAngles=Qe._tickAngles),Qe._tickAngles={},Qe._depth=null;var ut={};if(Qe.visible){var Dt,Wt,zt=j.makeTransTickFn(Qe),Ht=j.makeTransTickLabelFn(Qe),Ne="inside"===Qe.ticks,ot="outside"===Qe.ticks;if("boundaries"===Qe.tickson){var yt=function(lr,Hn){var Sr,ti=[],Fn=function(br,xr){var Kn=br.xbnd[xr];null!==Kn&&ti.push(e.extendFlat({},br,{x:Kn}))};if(Hn.length){for(Sr=0;Sr<Hn.length;Sr++)Fn(Hn[Sr],0);Fn(Hn[Sr-1],1)}return ti}(0,Jt);Wt=j.clipEnds(Qe,yt),Dt=Ne?Wt:yt}else Wt=j.clipEnds(Qe,Jt),Dt=Ne&&"period"!==Qe.ticklabelmode?Wt:Jt;var It=Qe._gridVals=Wt,Vt=function(lr,Hn){var Sr,ti,Fn=[],br=Hn.length&&Hn[Hn.length-1].x<Hn[0].x,xr=function(Qr,ci){var Or=Qr.xbnd[ci];null!==Or&&Fn.push(e.extendFlat({},Qr,{x:Or}))};if(lr.showdividers&&Hn.length){for(Sr=0;Sr<Hn.length;Sr++){var Kn=Hn[Sr];Kn.text2!==ti&&xr(Kn,br?1:0),ti=Kn.text2}xr(Hn[Sr-1],br?0:1)}return Fn}(Qe,Jt);if(!Le._hasOnlyLargeSploms){var ln=Qe._subplotsWith,un={};for(gt=0;gt<ln.length;gt++){var an=(Ve=Le._plots[Be=ln[gt]])[ft+"axis"],wn=an._mainAxis._id;if(!un[wn]){un[wn]=1;var Zn="x"===Ke?"M0,"+an._offset+"v"+an._length:"M"+an._offset+",0h"+an._length;j.drawGrid(Ge,Qe,{vals:It,counterAxis:an,layer:Ve.gridlayer.select("."+je),path:Zn,transFn:zt}),j.drawZeroLine(Ge,Qe,{counterAxis:an,layer:Ve.zerolinelayer,path:Zn,transFn:zt})}}}var An=j.getTickSigns(Qe),hn=[];if(Qe.ticks){var pn,xn,En,In=j.makeTickPath(Qe,Ot,An[2]);if(Qe._anchorAxis&&Qe.mirror&&!0!==Qe.mirror?(pn=j.makeTickPath(Qe,Pt,An[3]),xn=In+pn):(pn="",xn=In),Qe.showdividers&&ot&&"boundaries"===Qe.tickson){var Yn={};for(gt=0;gt<Vt.length;gt++)Yn[Vt[gt].x]=1;En=function(lr){return Yn[lr.x]?pn:xn}}else En=xn;j.drawTicks(Ge,Qe,{vals:Dt,layer:pt,path:En,transFn:zt}),"allticks"===Qe.mirror&&(hn=Object.keys(Qe._linepositions||{}))}for(gt=0;gt<hn.length;gt++){Ve=Le._plots[Be=hn[gt]];var nr=Qe._linepositions[Be]||[],sr=j.makeTickPath(Qe,nr[0],An[0])+j.makeTickPath(Qe,nr[1],An[1]);j.drawTicks(Ge,Qe,{vals:Dt,layer:Ve[Ke+"axislayer"],path:sr,transFn:zt})}var Ar=[];if(Ar.push(function(){return j.drawLabels(Ge,Qe,{vals:Jt,layer:pt,plotinfo:Ve,transFn:Ht,labelFns:j.makeLabelFns(Qe,Ot)})}),"multicategory"===Qe.type){var yr={x:2,y:10}[Ke];Ar.push(function(){var lr={x:"height",y:"width"}[Ke],Hn=Wr()[lr]+yr+(Qe._tickAngles[je+"tick"]?Qe.tickfont.size*J:0);return j.drawLabels(Ge,Qe,{vals:Xe(Qe,Jt),layer:pt,cls:je+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:zt,labelFns:j.makeLabelFns(Qe,Ot+Hn*An[4])})}),Ar.push(function(){return Qe._depth=An[4]*(Wr("tick2")[Qe.side]-Ot),lr=Ge,Hn=Qe,Fn=(Sr={vals:Vt,layer:pt,path:j.makeTickPath(Qe,Ot,An[4],Qe._depth),transFn:zt}).vals,(br=Sr.layer.selectAll("path."+(ti=Hn._id+"divider")).data(Fn,He)).exit().remove(),br.enter().insert("path",":first-child").classed(ti,1).classed("crisp",1).call(r.stroke,Hn.dividercolor).style("stroke-width",y.crispRound(lr,Hn.dividerwidth,1)+"px"),void br.attr("transform",Sr.transFn).attr("d",Sr.path);var lr,Hn,Sr,ti,Fn,br})}else Qe.title.hasOwnProperty("standoff")&&Ar.push(function(){Qe._depth=An[4]*(Wr()[Qe.side]-Ot)});var Pr=b.getComponentMethod("rangeslider","isVisible")(Qe);return Ar.push(function(){var lr,Hn,Sr,ti,Fn=Qe.side.charAt(0),br=ie[Qe.side].charAt(0),xr=j.getPxPosition(Ge,Qe),Kn=ot?Qe.ticklen:0;if((Qe.automargin||Pr)&&("multicategory"===Qe.type?lr=Wr("tick2"):(lr=Wr(),"x"===Ke&&"b"===Fn&&(Qe._depth=Math.max(lr.width>0?lr.bottom-xr:0,Kn)))),Qe.automargin){Hn={x:0,y:0,r:0,l:0,t:0,b:0};var Qr=[0,1];if("x"===Ke){if("b"===Fn?Hn[Fn]=Qe._depth:(Hn[Fn]=Qe._depth=Math.max(lr.width>0?xr-lr.top:0,Kn),Qr.reverse()),lr.width>0){var ci=lr.right-(Qe._offset+Qe._length);ci>0&&(Hn.xr=1,Hn.r=ci);var Or=Qe._offset-lr.left;Or>0&&(Hn.xl=0,Hn.l=Or)}}else if("l"===Fn?Hn[Fn]=Qe._depth=Math.max(lr.height>0?xr-lr.left:0,Kn):(Hn[Fn]=Qe._depth=Math.max(lr.height>0?lr.right-xr:0,Kn),Qr.reverse()),lr.height>0){var li=lr.bottom-(Qe._offset+Qe._length);li>0&&(Hn.yb=0,Hn.b=li);var di=Qe._offset-lr.top;di>0&&(Hn.yt=1,Hn.t=di)}Hn[ft]="free"===Qe.anchor?Qe.position:Qe._anchorAxis.domain[Qr[0]],Qe.title.text!==Le._dfltTitle[Ke]&&(Hn[Fn]+=$e(Qe)+(Qe.title.standoff||0)),Qe.mirror&&"free"!==Qe.anchor&&((Sr={x:0,y:0,r:0,l:0,t:0,b:0})[br]=Qe.linewidth,Qe.mirror&&!0!==Qe.mirror&&(Sr[br]+=Kn),!0===Qe.mirror||"ticks"===Qe.mirror?Sr[ft]=Qe._anchorAxis.domain[Qr[1]]:"all"!==Qe.mirror&&"allticks"!==Qe.mirror||(Sr[ft]=[Qe._counterDomainMin,Qe._counterDomainMax][Qr[1]]))}Pr&&(ti=b.getComponentMethod("rangeslider","autoMarginOpts")(Ge,Qe)),T.autoMargin(Ge,ct(Qe),Hn),T.autoMargin(Ge,bt(Qe),Sr),T.autoMargin(Ge,At(Qe),ti)}),Rt.skipTitle||Pr&&"bottom"===Qe.side||Ar.push(function(){return function(lr,Hn){var Sr,ti=lr._fullLayout,Fn=Hn._id,br=Fn.charAt(0),xr=Hn.title.font.size;if(Hn.title.hasOwnProperty("standoff"))Sr=Hn._depth+Hn.title.standoff+$e(Hn);else{var Kn=rn(Hn);if("multicategory"===Hn.type)Sr=Hn._depth;else{var Qr=1.5*xr;Kn&&(Qr=.5*xr,"outside"===Hn.ticks&&(Qr+=Hn.ticklen)),Sr=10+Qr+(Hn.linewidth?Hn.linewidth-1:0)}Kn||(Sr+="x"===br?"top"===Hn.side?xr*(Hn.showticklabels?1:0):xr*(Hn.showticklabels?1.5:.5):"right"===Hn.side?xr*(Hn.showticklabels?1:.5):xr*(Hn.showticklabels?.5:0))}var ci,Or,li,di,Tn=j.getPxPosition(lr,Hn);if("x"===br?(Or=Hn._offset+Hn._length/2,li="top"===Hn.side?Tn-Sr:Tn+Sr):(li=Hn._offset+Hn._length/2,Or="right"===Hn.side?Tn+Sr:Tn-Sr,ci={rotate:"-90",offset:0}),"multicategory"!==Hn.type){var tr=Hn._selections[Hn._id+"tick"];if(di={selection:tr,side:Hn.side},tr&&tr.node()&&tr.node().parentNode){var Zt=y.getTranslate(tr.node().parentNode);di.offsetLeft=Zt.x,di.offsetTop=Zt.y}Hn.title.hasOwnProperty("standoff")&&(di.pad=0)}return l.draw(lr,Fn+"title",{propContainer:Hn,propName:Hn._name+".title.text",placeholder:ti._dfltTitle[br],avoid:di,transform:ci,attributes:{x:Or,y:li,"text-anchor":"middle"}})}(Ge,Qe)}),e.syncOrAsync(Ar)}}function Wr(lr){var Sr,ti,Fn,br,xr,Kn,Hn=je+(lr||"tick");return ut[Hn]||(ut[Hn]=((Sr=Qe)._selections[ti=Hn].size()?(Fn=1/0,br=-1/0,xr=1/0,Kn=-1/0,Sr._selections[ti].each(function(){var Qr=tt(this),ci=y.bBox(Qr.node().parentNode);Fn=Math.min(Fn,ci.top),br=Math.max(br,ci.bottom),xr=Math.min(xr,ci.left),Kn=Math.max(Kn,ci.right)})):(Fn=0,br=0,xr=0,Kn=0),{top:Fn,bottom:br,left:xr,right:Kn,height:br-Fn,width:Kn-xr})),ut[Hn]}},j.getTickSigns=function(Ge){var Qe=Ge._id.charAt(0),gt=Ge.side==={x:"top",y:"right"}[Qe]?1:-1,Be=[-1,1,gt,-gt];return"inside"!==Ge.ticks==("x"===Qe)&&(Be=Be.map(function(Ve){return-Ve})),Ge.side&&Be.push({l:-1,t:-1,r:1,b:1}[Ge.side.charAt(0)]),Be},j.makeTransTickFn=function(Ge){return"x"===Ge._id.charAt(0)?function(Qe){return o(Ge._offset+Ge.l2p(Qe.x),0)}:function(Qe){return o(0,Ge._offset+Ge.l2p(Qe.x))}},j.makeTransTickLabelFn=function(Ge){var Qe=function(Be){var Ve=Be.ticklabelposition||"",Le=function(Dt){return-1!==Ve.indexOf(Dt)},je=Le("top"),Ke=Le("left"),ft=Le("right"),mt=Le("bottom"),pt=Le("inside"),Ot=mt||Ke||je||ft;if(!Ot&&!pt)return[0,0];var Pt=Be.side,Jt=Ot?(Be.tickwidth||0)/2:0,$t=3,ut=Be.tickfont?Be.tickfont.size:12;return(mt||je)&&(Jt+=ut*$,$t+=(Be.linewidth||0)/2),(Ke||ft)&&(Jt+=(Be.linewidth||0)/2,$t+=3),pt&&"top"===Pt&&($t-=ut*(1-$)),(Ke||je)&&(Jt=-Jt),"bottom"!==Pt&&"right"!==Pt||($t=-$t),[Ot?Jt:0,pt?$t:0]}(Ge),Rt=Qe[0],gt=Qe[1];return"x"===Ge._id.charAt(0)?function(Be){return o(Rt+Ge._offset+Ge.l2p(st(Be)),gt)}:function(Be){return o(gt,Rt+Ge._offset+Ge.l2p(st(Be)))}},j.makeTickPath=function(Ge,Qe,Rt,gt){gt=void 0!==gt?gt:Ge.ticklen;var Be=Ge._id.charAt(0),Ve=(Ge.linewidth||1)/2;return"x"===Be?"M0,"+(Qe+Ve*Rt)+"v"+gt*Rt:"M"+(Qe+Ve*Rt)+",0h"+gt*Rt},j.makeLabelFns=function(Ge,Qe,Rt){var gt=Ge.ticklabelposition||"",Be=function(un){return-1!==gt.indexOf(un)},Ve=Be("top"),Le=Be("left"),je=Be("right"),Ke=Be("bottom")||Le||Ve||je,ft=Be("inside"),mt="inside"===gt&&"inside"===Ge.ticks||!ft&&"outside"===Ge.ticks&&"boundaries"!==Ge.tickson,pt=0,Ot=0,Pt=mt?Ge.ticklen:0;if(ft?Pt*=-1:Ke&&(Pt=0),mt&&(pt+=Pt,Rt)){var Jt=e.deg2rad(Rt);pt=Pt*Math.cos(Jt)+1,Ot=Pt*Math.sin(Jt)}Ge.showticklabels&&(mt||Ge.showline)&&(pt+=.2*Ge.tickfont.size);var $t,ut,Dt,Wt,zt,Ht={labelStandoff:pt+=(Ge.linewidth||1)/2*(ft?-1:1),labelShift:Ot},Ne=0,ot=Ge.side,yt=Ge._id.charAt(0),It=Ge.tickangle;if("x"===yt)Wt=(zt=!ft&&"bottom"===ot||ft&&"top"===ot)?1:-1,ft&&(Wt*=-1),$t=Ot*Wt,ut=Qe+pt*Wt,Dt=zt?1:-.2,90===Math.abs(It)&&(ft?Dt+=re:Dt=-90===It&&"bottom"===ot?$:90===It&&"top"===ot?re:.5,Ne=re/2*(It/90)),Ht.xFn=function(un){return un.dx+$t+Ne*un.fontSize},Ht.yFn=function(un){return un.dy+ut+un.fontSize*Dt},Ht.anchorFn=function(un,an){if(Ke){if(Le)return"end";if(je)return"start"}return x(an)&&0!==an&&180!==an?an*Wt<0!==ft?"end":"start":"middle"},Ht.heightFn=function(un,an,wn){return an<-60||an>60?-.5*wn:"top"===Ge.side!==ft?-wn:0};else if("y"===yt){if(Wt=(zt=!ft&&"left"===ot||ft&&"right"===ot)?1:-1,ft&&(Wt*=-1),$t=pt,ut=Ot*Wt,Dt=0,ft||90!==Math.abs(It)||(Dt=-90===It&&"left"===ot||90===It&&"right"===ot?$:.5),ft){var Vt=x(It)?+It:0;if(0!==Vt){var ln=e.deg2rad(Vt);Ne=Math.abs(Math.sin(ln))*$*Wt,Dt=0}}Ht.xFn=function(un){return un.dx+Qe-($t+un.fontSize*Dt)*Wt+Ne*un.fontSize},Ht.yFn=function(un){return un.dy+ut+un.fontSize*re},Ht.anchorFn=function(un,an){return x(an)&&90===Math.abs(an)?"middle":zt?"end":"start"},Ht.heightFn=function(un,an,wn){return"right"===Ge.side&&(an*=-1),an<-30?-wn:an<30?-.5*wn:0}}return Ht},j.drawTicks=function(Ge,Qe,Rt){var gt=Qe._id+"tick",Be=(Rt=Rt||{}).vals;"period"===Qe.ticklabelmode&&(Be=Be.slice()).shift();var Ve=Rt.layer.selectAll("path."+gt).data(Qe.ticks?Be:[],He);Ve.exit().remove(),Ve.enter().append("path").classed(gt,1).classed("ticks",1).classed("crisp",!1!==Rt.crisp).call(r.stroke,Qe.tickcolor).style("stroke-width",y.crispRound(Ge,Qe.tickwidth,1)+"px").attr("d",Rt.path).style("display",null),en(Qe,[Z]),Ve.attr("transform",Rt.transFn)},j.drawGrid=function(Ge,Qe,Rt){var gt=Qe._id+"grid",Be=(Rt=Rt||{}).vals,Ve=Rt.counterAxis;if(!1===Qe.showgrid)Be=[];else if(Ve&&j.shouldShowZeroLine(Ge,Qe,Ve))for(var Le="array"===Qe.tickmode,je=0;je<Be.length;je++){var Ke=Be[je].x;if(Le?!Ke:Math.abs(Ke)<Qe.dtick/100){if(Be=Be.slice(0,je).concat(Be.slice(je+1)),!Le)break;je--}}var ft=Rt.layer.selectAll("path."+gt).data(Be,He);ft.exit().remove(),ft.enter().append("path").classed(gt,1).classed("crisp",!1!==Rt.crisp),Qe._gw=y.crispRound(Ge,Qe.gridwidth,1),ft.attr("transform",Rt.transFn).attr("d",Rt.path).call(r.stroke,Qe.gridcolor||"#ddd").style("stroke-width",Qe._gw+"px").style("display",null),en(Qe,[V]),"function"==typeof Rt.path&&ft.attr("d",Rt.path)},j.drawZeroLine=function(Ge,Qe,Rt){var gt=Qe._id+"zl",Be=j.shouldShowZeroLine(Ge,Qe,(Rt=Rt||Rt).counterAxis),Ve=Rt.layer.selectAll("path."+gt).data(Be?[{x:0,id:Qe._id}]:[]);Ve.exit().remove(),Ve.enter().append("path").classed(gt,1).classed("zl",1).classed("crisp",!1!==Rt.crisp).each(function(){Rt.layer.selectAll("path").sort(function(Le,je){return ae(Le.id,je.id)})}),Ve.attr("transform",Rt.transFn).attr("d",Rt.path).call(r.stroke,Qe.zerolinecolor||r.defaultLine).style("stroke-width",y.crispRound(Ge,Qe.zerolinewidth,Qe._gw||1)+"px").style("display",null),en(Qe,[B])},j.drawLabels=function(Ge,Qe,Rt){Rt=Rt||{};var gt=Ge._fullLayout,Be=Qe._id,Ve=Be.charAt(0),Le=Rt.cls||Be+"tick",je=Rt.vals,Ke=Rt.labelFns,ft=Rt.secondary?0:Qe.tickangle,mt=(Qe._prevTickAngles||{})[Le],pt=Rt.layer.selectAll("g."+Le).data(Qe.showticklabels?je:[],He),Ot=[];function Pt(Wt,zt){Wt.each(function(Ht){var Ne=v.select(this),ot=Ne.select(".text-math-group"),yt=Ke.anchorFn(Ht,zt),It=Rt.transFn.call(Ne.node(),Ht)+(x(zt)&&0!=+zt?" rotate("+zt+","+Ke.xFn(Ht)+","+(Ke.yFn(Ht)-Ht.fontSize/2)+")":""),Vt=i.lineCount(Ne),ln=J*Ht.fontSize,un=Ke.heightFn(Ht,x(zt)?+zt:0,(Vt-1)*ln);if(un&&(It+=o(0,un)),ot.empty()){var an=Ne.select("text");an.attr({transform:It,"text-anchor":yt}),an.style("opacity",1),Qe._adjustTickLabelsOverflow&&Qe._adjustTickLabelsOverflow()}else{var wn=y.bBox(ot.node()).width*{end:-.5,start:.5}[yt];ot.attr("transform",It+o(wn,0))}})}pt.enter().append("g").classed(Le,1).append("text").attr("text-anchor","middle").each(function(Wt){var zt=v.select(this),Ht=Ge._promises.length;zt.call(i.positionText,Ke.xFn(Wt),Ke.yFn(Wt)).call(y.font,Wt.font,Wt.fontSize,Wt.fontColor).text(Wt.text).call(i.convertToTspans,Ge),Ge._promises[Ht]?Ot.push(Ge._promises.pop().then(function(){Pt(zt,ft)})):Pt(zt,ft)}),en(Qe,[Y]),pt.exit().remove(),Rt.repositionOnUpdate&&pt.each(function(Wt){v.select(this).select("text").call(i.positionText,Ke.xFn(Wt),Ke.yFn(Wt))}),Qe._adjustTickLabelsOverflow=function(){var Wt=Qe.ticklabeloverflow;if(Wt&&"allow"!==Wt){var zt=-1!==Wt.indexOf("hide"),Ht="x"===Qe._id.charAt(0),Ne=0,ot=Ht?Ge._fullLayout.width:Ge._fullLayout.height;if(-1!==Wt.indexOf("domain")){var yt=e.simpleMap(Qe.range,Qe.r2l);Ne=Qe.l2p(yt[0])+Qe._offset,ot=Qe.l2p(yt[1])+Qe._offset}var It=Math.min(Ne,ot),Vt=Math.max(Ne,ot),ln=Qe.side,un=1/0,an=-1/0;for(var wn in pt.each(function(hn){var pn=v.select(this);if(pn.select(".text-math-group").empty()){var xn=y.bBox(pn.node()),En=0;Ht?(xn.right>Vt||xn.left<It)&&(En=1):(xn.bottom>Vt||xn.top+(Qe.tickangle?0:hn.fontSize/4)<It)&&(En=1);var In=pn.select("text");En?zt&&In.style("opacity",0):(In.style("opacity",1),un="bottom"===ln||"right"===ln?Math.min(un,Ht?xn.top:xn.left):-1/0,an="top"===ln||"left"===ln?Math.max(an,Ht?xn.bottom:xn.right):1/0)}}),gt._plots){var Zn=gt._plots[wn];if(Qe._id===Zn.xaxis._id||Qe._id===Zn.yaxis._id){var An=Ht?Zn.yaxis:Zn.xaxis;An&&(An["_visibleLabelMin_"+Qe._id]=un,An["_visibleLabelMax_"+Qe._id]=an)}}}},Qe._hideCounterAxisInsideTickLabels=function(Wt){var zt="x"===Qe._id.charAt(0),Ht=[];for(var Ne in gt._plots){var ot=gt._plots[Ne];Qe._id!==ot.xaxis._id&&Qe._id!==ot.yaxis._id||Ht.push(zt?ot.yaxis:ot.xaxis)}Ht.forEach(function(yt,It){yt&&rn(yt)&&(Wt||[B,V,Z,Y]).forEach(function(Vt){var ln="tick"===Vt.K&&"text"===Vt.L&&"period"===Qe.ticklabelmode,un=gt._plots[Qe._mainSubplot];(Vt.K===B.K?un.zerolinelayer.selectAll("."+Qe._id+"zl"):Vt.K===V.K?un.gridlayer.selectAll("."+Qe._id):un[Qe._id.charAt(0)+"axislayer"]).each(function(){var an=v.select(this);Vt.L&&(an=an.selectAll(Vt.L)),an.each(function(wn){var Zn=Qe.l2p(ln?st(wn):wn.x)+Qe._offset,An=v.select(this);Zn<Qe["_visibleLabelMax_"+yt._id]&&Zn>Qe["_visibleLabelMin_"+yt._id]?An.style("display","none"):"tick"!==Vt.K||It||An.style("display",null)})})})})},Pt(pt,mt+1?mt:ft);var Jt=null;Qe._selections&&(Qe._selections[Le]=pt);var $t=[function(){return Ot.length&&Promise.all(Ot)}];Qe.automargin&&gt._redrawFromAutoMarginCount&&90===mt?(Jt=90,$t.push(function(){Pt(pt,mt)})):$t.push(function(){if(Pt(pt,ft),je.length&&"x"===Ve&&!x(ft)&&("log"!==Qe.type||"D"!==String(Qe.dtick).charAt(0))){Jt=0;var Wt,zt=0,Ht=[];if(pt.each(function(pn){zt=Math.max(zt,pn.fontSize);var xn=Qe.l2p(pn.x),En=tt(this),In=y.bBox(En.node());Ht.push({top:0,bottom:10,height:10,left:xn-In.width/2,right:xn+In.width/2+2,width:In.width+2})}),"boundaries"!==Qe.tickson&&!Qe.showdividers||Rt.secondary){var Ne=je.length,ot=Math.abs((je[Ne-1].x-je[0].x)*Qe._m)/(Ne-1),yt=Qe.ticklabelposition||"",It=function(pn){return-1!==yt.indexOf(pn)},Vt=It("top"),ln=It("left"),un=It("right"),an=It("bottom")||ln||Vt||un?(Qe.tickwidth||0)+6:0,wn=ot<2.5*zt||"multicategory"===Qe.type||"realaxis"===Qe._name;for(Wt=0;Wt<Ht.length-1;Wt++)if(e.bBoxIntersect(Ht[Wt],Ht[Wt+1],an)){Jt=wn?90:30;break}}else{var Zn=2;for(Qe.ticks&&(Zn+=Qe.tickwidth/2),Wt=0;Wt<Ht.length;Wt++){var An=je[Wt].xbnd,hn=Ht[Wt];if(null!==An[0]&&hn.left-Qe.l2p(An[0])<Zn||null!==An[1]&&Qe.l2p(An[1])-hn.right<Zn){Jt=90;break}}}Jt&&Pt(pt,Jt)}}),Qe._tickAngles&&$t.push(function(){Qe._tickAngles[Le]=null===Jt?x(ft)?ft:0:Jt});var ut=Qe._anchorAxis;ut&&ut.autorange&&rn(Qe)&&!G(gt,Qe._id)&&(gt._insideTickLabelsAutorange||(gt._insideTickLabelsAutorange={}),gt._insideTickLabelsAutorange[ut._name+".autorange"]=ut.autorange,$t.push(function(){pt.each(function(Wt,zt){var Ht=tt(this);Ht.select(".text-math-group").empty()&&(Qe._vals[zt].bb=y.bBox(Ht.node()))})}));var Dt=e.syncOrAsync($t);return Dt&&Dt.then&&Ge._promises.push(Dt),Dt},j.getPxPosition=function(Ge,Qe){var Rt,gt=Ge._fullLayout._size,Be=Qe._id.charAt(0),Ve=Qe.side;return"free"!==Qe.anchor?Rt=Qe._anchorAxis:"x"===Be?Rt={_offset:gt.t+(1-(Qe.position||0))*gt.h,_length:0}:"y"===Be&&(Rt={_offset:gt.l+(Qe.position||0)*gt.w,_length:0}),"top"===Ve||"left"===Ve?Rt._offset:"bottom"===Ve||"right"===Ve?Rt._offset+Rt._length:void 0},j.shouldShowZeroLine=function(Ge,Qe,Rt){var gt=e.simpleMap(Qe.range,Qe.r2l);return gt[0]*gt[1]<=0&&Qe.zeroline&&("linear"===Qe.type||"-"===Qe.type)&&!(Qe.rangebreaks&&Qe.maskBreaks(0)===I)&&(et(Qe,0)||!function(Be,Ve,Le,je){var Ke=Le._mainAxis;if(Ke){var ft=Be._fullLayout,mt=Ve._id.charAt(0),pt=j.counterLetter(Ve._id),Ot=Ve._offset+(Math.abs(je[0])<Math.abs(je[1])==("x"===mt)?0:Ve._length),Jt=ft._plots[Le._mainSubplot];if(!(Jt.mainplotinfo||Jt).overlays.length)return Pt(Le);for(var $t=j.list(Be,pt),ut=0;ut<$t.length;ut++){var Dt=$t[ut];if(Dt._mainAxis===Ke&&Pt(Dt))return!0}}function Pt(Wt){if(!Wt.showline||!Wt.linewidth)return!1;var zt=Math.max((Wt.linewidth+Ve.zerolinewidth)/2,1);function Ht(yt){return"number"==typeof yt&&Math.abs(yt-Ot)<zt}if(Ht(Wt._mainLinePosition)||Ht(Wt._mainMirrorPosition))return!0;var Ne=Wt._linepositions||{};for(var ot in Ne)if(Ht(Ne[ot][0])||Ht(Ne[ot][1]))return!0}}(Ge,Qe,Rt,gt)||function(Be,Ve){for(var Le=Be._fullData,je=Ve._mainSubplot,Ke=Ve._id.charAt(0),ft=0;ft<Le.length;ft++){var mt=Le[ft];if(!0===mt.visible&&mt.xaxis+mt.yaxis===je&&(b.traceIs(mt,"bar-like")&&mt.orientation==={x:"h",y:"v"}[Ke]||mt.fill&&mt.fill.charAt(mt.fill.length-1)===Ke))return!0}return!1}(Ge,Qe))},j.clipEnds=function(Ge,Qe){return Qe.filter(function(Rt){return et(Ge,Rt.x)})},j.allowAutoMargin=function(Ge){for(var Qe=j.list(Ge,"",!0),Rt=0;Rt<Qe.length;Rt++){var gt=Qe[Rt];gt.automargin&&(T.allowAutoMargin(Ge,ct(gt)),gt.mirror&&T.allowAutoMargin(Ge,bt(gt))),b.getComponentMethod("rangeslider","isVisible")(gt)&&T.allowAutoMargin(Ge,At(gt))}},j.swap=function(Ge,Qe){for(var Rt=function(Be,Ve){var Le,je,Ke=[];for(Le=0;Le<Ve.length;Le++){var ft=[],mt=Be._fullData[Ve[Le]].xaxis,pt=Be._fullData[Ve[Le]].yaxis;if(mt&&pt){for(je=0;je<Ke.length;je++)-1===Ke[je].x.indexOf(mt)&&-1===Ke[je].y.indexOf(pt)||ft.push(je);if(ft.length){var Ot,Pt=Ke[ft[0]];if(ft.length>1)for(je=1;je<ft.length;je++)Ut(Pt.x,(Ot=Ke[ft[je]]).x),Ut(Pt.y,Ot.y);Ut(Pt.x,[mt]),Ut(Pt.y,[pt])}else Ke.push({x:[mt],y:[pt]})}}return Ke}(Ge,Qe),gt=0;gt<Rt.length;gt++)Ct(Ge,Rt[gt].x,Rt[gt].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM,b=x.isArrayOrTypedArray,e=x.isDateTime,o=x.cleanNumber,i=Math.round;function l(y,h){return h?v(y):"number"==typeof y}function r(y){return Math.max(1,(y-1)/1e3)}oe.exports=function(y,h,s){var w,d=y,p=s.noMultiCategory;if(b(d)&&!d.length)return"-";if(!p&&b((w=d)[0])&&b(w[1]))return"multicategory";if(p&&Array.isArray(d[0])){for(var c=[],g=0;g<d.length;g++)if(b(d[g]))for(var m=0;m<d[g].length;m++)c.push(d[g][m]);d=c}if(function(w,f){for(var A=w.length,M=r(A),k=0,E=0,P={},D=0;D<A;D+=M){var R=w[i(D)],L=String(R);P[L]||(P[L]=1,e(R,f)&&k++,v(R)&&E++)}return k>2*E}(d,h))return"date";var u="strict"!==s.autotypenumbers;return function(w,f){for(var A=w.length,M=r(A),k=0,E=0,P={},D=0;D<A;D+=M){var R=w[i(D)],L=String(R);if(!P[L]){P[L]=1;var I=typeof R;"boolean"===I?E++:(f?o(R)!==T:"number"===I)?k++:"string"===I&&E++}}return E>2*k}(d,u)?"category":function(w,f){for(var A=w.length,M=0;M<A;M++)if(l(w[M],f))return!0;return!1}(d,u)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../registry"),T=_("../../lib"),b=_("../array_container_defaults"),e=_("./layout_attributes"),o=_("./tick_value_defaults"),i=_("./tick_mark_defaults"),l=_("./tick_label_defaults"),r=_("./prefix_suffix_defaults"),y=_("./category_order_defaults"),h=_("./line_grid_defaults"),s=_("./set_convert"),d=_("./constants").WEEKDAY_PATTERN,p=_("./constants").HOUR_PATTERN;function c(u,w,f){function A(L,I){return T.coerce(u,w,e.rangebreaks,L,I)}if(A("enabled")){var M=A("bounds");if(M&&M.length>=2){var k,E,P="";if(2===M.length)for(k=0;k<2;k++)if(E=m(M[k])){P=d;break}var D=A("pattern",P);if(D===d)for(k=0;k<2;k++)(E=m(M[k]))&&(w.bounds[k]=M[k]=E-1);if(D)for(k=0;k<2;k++)switch(E=M[k],D){case d:if(!v(E)||(E=+E)!==Math.floor(E)||E<0||E>=7)return void(w.enabled=!1);w.bounds[k]=M[k]=E;break;case p:if(!v(E)||(E=+E)<0||E>24)return void(w.enabled=!1);w.bounds[k]=M[k]=E}if(!1===f.autorange){var F=f.range;if(F[0]<F[1]){if(M[0]<F[0]&&M[1]>F[1])return void(w.enabled=!1)}else if(M[0]>F[0]&&M[1]<F[1])return void(w.enabled=!1)}}else{var R=A("values");if(!R||!R.length)return void(w.enabled=!1);A("dvalue")}}}oe.exports=function(u,w,f,A,M){var k,E=A.letter,P=A.font||{},D=A.splomStash||{},F=f("visible",!A.visibleDflt),L=w.type||(w._template||{}).type||"-";"date"===L&&(x.getComponentMethod("calendars","handleDefaults")(u,w,"calendar",A.calendar),A.noTicklabelmode||(k=f("ticklabelmode")));var I="";A.noTicklabelposition&&"multicategory"!==L||(I=T.coerce(u,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===k?["outside","inside"]:"x"===E?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),A.noTicklabeloverflow||f("ticklabeloverflow",-1!==I.indexOf("inside")?"hide past domain":"category"===L||"multicategory"===L?"allow":"hide past div"),s(w,M);var B=!w.isValidRange(u.range);B&&A.reverseDflt&&(B="reversed"),!f("autorange",B)||"linear"!==L&&"-"!==L||f("rangemode"),f("range"),w.cleanRange(),y(u,w,f,A),"category"===L||A.noHover||f("hoverformat");var V=f("color"),Z=V!==e.color.dflt?V:P.color,Y=D.label||M._dfltTitle[E];if(r(u,w,f,L,A),!F)return w;f("title.text",Y),T.coerceFont(f,"title.font",{family:P.family,size:T.bigFont(P.size),color:Z}),o(u,w,f,L),l(u,w,f,L,A),i(u,w,f,A),h(u,w,f,{dfltColor:V,bgColor:A.bgColor,showGrid:A.showGrid,attributes:e}),(w.showline||w.ticks)&&f("mirror"),A.automargin&&f("automargin");var Q,re="multicategory"===L;if(A.noTickson||"category"!==L&&!re||!w.ticks&&!w.showgrid||(re&&(Q="boundaries"),"boundaries"===f("tickson",Q)&&delete w.ticklabelposition),re&&f("showdividers")&&(f("dividercolor"),f("dividerwidth")),"date"===L)if(b(u,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),w.rangebreaks.length){for(var $=0;$<w.rangebreaks.length;$++)if(w.rangebreaks[$].pattern===d){w._hasDayOfWeekBreaks=!0;break}if(s(w,M),M._has("scattergl")||M._has("splom"))for(var J=0;J<A.data.length;J++){var ie=A.data[J];"scattergl"!==ie.type&&"splom"!==ie.type||(ie.visible=!1,T.warn(ie.type+" traces do not work on axes with rangebreaks. Setting trace "+ie.index+" to `visible: false`."))}}else delete w.rangebreaks;return w};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(u){if("string"==typeof u)return g[u.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(_,oe,se){"use strict";var v=_("../../constants/docs"),x=v.FORMAT_LINK,T=v.DATE_FORMAT_LINK;function b(o,i){return["Sets the "+o+" formatting rule"+(i?"for `"+i+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+x+"."].join(" ")}function e(o,i){return b(o,i)+[" And for dates see: "+T+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}oe.exports={axisHoverFormat:function(o,i){return{valType:"string",dflt:"",editType:"none",description:(i?b:e)("hover text",o)+["By default the values are formatted using "+(i?"generic number format":"`"+o+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:b,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("./constants");function T(b,e){if(e&&e.length)for(var o=0;o<e.length;o++)if(e[o][b])return!0;return!1}se.id2name=function(b){if("string"==typeof b&&b.match(x.AX_ID_PATTERN)){var e=b.split(" ")[0].substr(1);return"1"===e&&(e=""),b.charAt(0)+"axis"+e}},se.name2id=function(b){if(b.match(x.AX_NAME_PATTERN)){var e=b.substr(5);return"1"===e&&(e=""),b.charAt(0)+e}},se.cleanId=function(b,e,o){var i=/( domain)$/.test(b);if("string"==typeof b&&b.match(x.AX_ID_PATTERN)&&(!e||b.charAt(0)===e)&&(!i||o)){var l=b.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===l&&(l=""),b.charAt(0)+l+(i&&o?" domain":"")}},se.list=function(b,e,o){var i=b._fullLayout;if(!i)return[];var l,r=se.listIds(b,e),y=new Array(r.length);for(l=0;l<r.length;l++){var h=r[l];y[l]=i[h.charAt(0)+"axis"+h.substr(1)]}if(!o){var s=i._subplots.gl3d||[];for(l=0;l<s.length;l++){var d=i[s[l]];e?y.push(d[e+"axis"]):y.push(d.xaxis,d.yaxis,d.zaxis)}}return y},se.listIds=function(b,e){var o=b._fullLayout;if(!o)return[];var i=o._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},se.getFromId=function(b,e,o){var i=b._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===o?e=e.replace(/y[0-9]*/,""):"y"===o&&(e=e.replace(/x[0-9]*/,"")),i[se.id2name(e)]},se.getFromTrace=function(b,e,o){var i=b._fullLayout,l=null;if(v.traceIs(e,"gl3d")){var r=e.scene;"scene"===r.substr(0,5)&&(l=i[r][o+"axis"])}else l=se.getFromId(b,e[o+"axis"]||o);return l},se.idSort=function(b,e){var o=b.charAt(0),i=e.charAt(0);return o!==i?o>i?1:-1:+(b.substr(1)||1)-+(e.substr(1)||1)},se.ref2id=function(b){return!!/^[xyz]/.test(b)&&b.split(" ")[0]},se.isLinked=function(b,e){return T(e,b._axisMatchGroups)||T(e,b._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b){if("category"===x.type){var e,o=v.categoryarray,i=Array.isArray(o)&&o.length>0;i&&(e="array");var l,r=T("categoryorder",e);"array"===r&&(l=T("categoryarray")),i||"array"!==r||(r=x.categoryorder="trace"),"trace"===r?x._initialCategories=[]:"array"===r?x._initialCategories=l.slice():(l=function(y,h){var s,d,p,c=h.dataAttr||y._id.charAt(0),g={};if(h.axData)s=h.axData;else for(s=[],d=0;d<h.data.length;d++){var m=h.data[d];m[c+"axis"]===y._id&&s.push(m)}for(d=0;d<s.length;d++){var u=s[d][c];for(p=0;p<u.length;p++){var w=u[p];null!=w&&(g[w]=1)}}return Object.keys(g)}(x,b).sort(),"category ascending"===r?x._initialCategories=l:"category descending"===r&&(x._initialCategories=l.reverse()))}}},{}],560:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical"),b=T.ONEDAY,e=T.ONEWEEK;se.dtick=function(o,i){var l="log"===i,r="date"===i,y="category"===i,h=r?b:1;if(!o)return h;if(v(o))return(o=Number(o))<=0?h:y?Math.max(1,Math.round(o)):r?Math.max(.1,o):o;if("string"!=typeof o||!r&&!l)return h;var s=o.charAt(0),d=o.substr(1);return(d=v(d)?Number(d):0)<=0||!(r&&"M"===s&&d===Math.round(d)||l&&"L"===s||l&&"D"===s&&(1===d||2===d))?h:o},se.tick0=function(o,i,l,r){return"date"===i?x.cleanDate(o,x.dateTick0(l,r%e==0?1:0)):"D1"!==r&&"D2"!==r?v(o)?Number(o):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(_,oe,se){"use strict";var v=_("../../lib/regex").counter;oe.exports={idRegex:{x:v("x","( domain)?"),y:v("y","( domain)?")},attrRegex:v("[xy]axis"),xAxisMatch:v("xaxis"),yAxisMatch:v("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./autorange"),T=_("./axis_ids").id2name,b=_("./layout_attributes"),e=_("./scale_zoom"),o=_("./set_convert"),i=_("../../constants/numerical").ALMOST_EQUAL,l=_("../../constants/alignment").FROM_BL;function r(g,m,u){var w=u.axIds,f=u.layoutOut,A=u.hasImage,M=f._axisConstraintGroups,k=f._axisMatchGroups,E=m._id,P=E.charAt(0),D=((f._splomAxes||{})[P]||{})[E]||{},F=m._id,R="x"===F.charAt(0);function L(ae,G){return v.coerce(g,m,b,ae,G)}m._matchGroup=null,m._constraintGroup=null,L("constrain",A?"domain":"range"),v.coerce(g,m,{constraintoward:{valType:"enumerated",values:R?["left","center","right"]:["bottom","middle","top"],dflt:R?"center":"middle"}},"constraintoward");var I,B,V=m.type,Z=[];for(I=0;I<w.length;I++)(B=w[I])!==F&&f[T(B)].type===V&&Z.push(B);var Y=h(M,F);if(Y){var Q=[];for(I=0;I<Z.length;I++)Y[B=Z[I]]||Q.push(B);Z=Q}var re,$,J=Z.length;J&&(g.matches||D.matches)&&(re=v.coerce(g,m,{matches:{valType:"enumerated",values:Z,dflt:-1!==Z.indexOf(D.matches)?D.matches:void 0}},"matches"));var ie=A&&!R?m.anchor:void 0;if(J&&!re&&(g.scaleanchor||ie)&&($=v.coerce(g,m,{scaleanchor:{valType:"enumerated",values:Z}},"scaleanchor",ie)),re){m._matchGroup=s(k,F,re,1);var j=f[T(re)],q=y(f,m)/y(f,j);R!==("x"===re.charAt(0))&&(q=(R?"x":"y")+q),s(M,F,re,q)}else g.matches&&-1!==w.indexOf(g.matches)&&v.warn("ignored "+m._name+'.matches: "'+g.matches+'" to avoid an infinite loop');if($){var W=L("scaleratio");W||(W=m.scaleratio=1),s(M,F,$,W)}else g.scaleanchor&&-1!==w.indexOf(g.scaleanchor)&&v.warn("ignored "+m._name+'.scaleanchor: "'+g.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function y(g,m){var u=m.domain;return u||(u=g[T(m.overlaying)].domain),u[1]-u[0]}function h(g,m){for(var u=0;u<g.length;u++)if(g[u][m])return g[u];return null}function s(g,m,u,w){var f,A,M,k,E,P=h(g,m);null===P?((P={})[m]=1,E=g.length,g.push(P)):E=g.indexOf(P);var D=Object.keys(P);for(f=0;f<g.length;f++)if(M=g[f],f!==E&&M[u]){var F=M[u];for(A=0;A<D.length;A++)M[k=D[A]]=d(F,d(w,P[k]));return void g.splice(E,1)}if(1!==w)for(A=0;A<D.length;A++){var R=D[A];P[R]=d(w,P[R])}P[u]=1}function d(g,m){var u,w,f="",A="";"string"==typeof g&&(u=(f=g.match(/^[xy]*/)[0]).length,g=+g.substr(u)),"string"==typeof m&&(w=(A=m.match(/^[xy]*/)[0]).length,m=+m.substr(w));var M=g*m;return u||w?u&&w&&f.charAt(0)!==A.charAt(0)?u===w?M:(u>w?f.substr(w):A.substr(u))+M:f+A+g*m:M}function p(g,m){for(var u=m._size,w=u.h/u.w,f={},A=Object.keys(g),M=0;M<A.length;M++){var k=A[M],E=g[k];if("string"==typeof E){var P=E.match(/^[xy]*/)[0],D=P.length;E=+E.substr(D);for(var F="y"===P.charAt(0)?w:1/w,R=0;R<D;R++)E*=F}f[k]=E}return f}function c(g,m){var u=g._inputDomain,f=u[0]+(u[1]-u[0])*l[g.constraintoward];g.domain=g._input.domain=[f+(u[0]-f)/m,f+(u[1]-f)/m],g.setScale()}se.handleDefaults=function(g,m,u){var w,f,A,M,k,E,P,D,F=u.axIds,R=u.axHasImage,L=m._axisConstraintGroups=[],I=m._axisMatchGroups=[];for(w=0;w<F.length;w++)r(k=g[M=T(F[w])],E=m[M],{axIds:F,layoutOut:m,hasImage:R[M]});function B(j,q){for(w=0;w<j.length;w++)for(A in f=j[w])m[T(A)][q]=f}for(B(I,"_matchGroup"),w=0;w<L.length;w++)for(A in f=L[w])if((E=m[T(A)]).fixedrange){for(var V in f){var Z=T(V);!1===(g[Z]||{}).fixedrange&&v.warn("fixedrange was specified as false for axis "+Z+" but was overridden because another axis in its constraint group has fixedrange true"),m[Z].fixedrange=!0}break}for(w=0;w<L.length;){for(A in f=L[w]){(E=m[T(A)])._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(f).length&&(L.splice(w,1),w--);break}w++}B(L,"_constraintGroup");var Y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Q=!1,re=!1;function $(){D=E[P],"rangebreaks"===P&&(re=E._hasDayOfWeekBreaks)}for(w=0;w<I.length;w++){f=I[w];for(var J=0;J<Y.length;J++){var ie;for(A in P=Y[J],D=null,f)if(k=g[M=T(A)],P in(E=m[M])){if(!E.matches&&(ie=E,P in k)){$();break}null===D&&P in k&&$()}if("range"===P&&D&&(Q=!0),"autorange"===P&&null===D&&Q&&(D=!1),null===D&&P in ie&&(D=ie[P]),null!==D)for(A in f)(E=m[T(A)])[P]="range"===P?D.slice():D,"rangebreaks"===P&&(E._hasDayOfWeekBreaks=re,o(E,m))}}},se.enforce=function(g){var m,u,w,f,A,M,k,E,P=g._fullLayout,D=P._axisConstraintGroups||[];for(m=0;m<D.length;m++){w=p(D[m],P);var F=Object.keys(w),R=1/0,L=0,I=1/0,B={},V={},Z=!1;for(u=0;u<F.length;u++)V[f=F[u]]=A=P[T(f)],A._inputDomain?A.domain=A._inputDomain.slice():A._inputDomain=A.domain.slice(),A._inputRange||(A._inputRange=A.range.slice()),A.setScale(),B[f]=M=Math.abs(A._m)/w[f],R=Math.min(R,M),"domain"!==A.constrain&&A._constraintShrinkable||(I=Math.min(I,M)),delete A._constraintShrinkable,L=Math.max(L,M),"domain"===A.constrain&&(Z=!0);if(!(R>i*L)||Z)for(u=0;u<F.length;u++)if(M=B[f=F[u]],k=(A=V[f]).constrain,M!==I||"domain"===k)if(E=M/I,"range"===k)e(A,E);else{var Y=A._inputDomain,Q=(A.domain[1]-A.domain[0])/(Y[1]-Y[0]),re=(A.r2l(A.range[1])-A.r2l(A.range[0]))/(A.r2l(A._inputRange[1])-A.r2l(A._inputRange[0]));if((E/=Q)*re<1){A.domain=A._input.domain=Y.slice(),e(A,E);continue}if(re<1&&(A.range=A._input.range=A._inputRange.slice(),E*=re),A.autorange){var $=A.r2l(A.range[0]),J=A.r2l(A.range[1]),ie=($+J)/2,j=ie,q=ie,W=Math.abs(J-ie),ae=ie-W*E*1.0001,G=ie+W*E*1.0001,ee=x.makePadFn(P,A,0),te=x.makePadFn(P,A,1);c(A,E);var le,ue,de=Math.abs(A._m),he=x.concatExtremes(g,A),be=he.min,me=he.max;for(ue=0;ue<be.length;ue++)(le=be[ue].val-ee(be[ue])/de)>ae&&le<j&&(j=le);for(ue=0;ue<me.length;ue++)(le=me[ue].val+te(me[ue])/de)<G&&le>q&&(q=le);E/=(q-j)/(2*W),j=A.l2r(j),q=A.l2r(q),A.range=A._input.range=$<J?[j,q]:[q,j]}c(A,E)}}},se.getAxisGroup=function(g,m){for(var u=g._axisMatchGroups,w=0;w<u.length;w++)if(u[w][m])return"g"+w;return m},se.clean=function(g,m){if(m._inputDomain){for(var u=!1,w=m._id,f=g._fullLayout._axisConstraintGroups,A=0;A<f.length;A++)if(f[A][w]){u=!0;break}u&&"domain"===m.constrain||(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("tinycolor2"),e=_("has-passive-events"),o=_("../../registry"),i=x.strTranslate,l=_("../../lib/svg_text_utils"),r=_("../../components/color"),y=_("../../components/drawing"),h=_("../../components/fx"),s=_("./axes"),d=_("../../lib/setcursor"),p=_("../../components/dragelement"),c=_("../../components/dragelement/helpers"),g=c.selectingOrDrawing,m=c.freeMode,u=_("../../constants/alignment").FROM_TL,w=_("../../lib/clear_gl_canvases"),f=_("../../plot_api/subroutines").redrawReglTraces,A=_("../plots"),M=_("./axis_ids").getFromId,k=_("./select").prepSelect,E=_("./select").clearSelect,P=_("./select").selectOnClick,D=_("./scale_zoom"),F=_("./constants"),R=F.MINDRAG,L=F.MINZOOM,I=!0;function B(le,ue,de,he){var be=x.ensureSingle(le.draglayer,ue,de,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",le.id)});return be.call(d,he),be.node()}function V(le,ue,de,he,be,me,_e){var Ee=B(le,"rect",ue,de);return v.select(Ee).call(y.setRect,he,be,me,_e),Ee}function Z(le,ue){for(var de=0;de<le.length;de++)if(!le[de].fixedrange)return ue;return""}function Y(le,ue,de,he,be){for(var me=0;me<le.length;me++){var _e=le[me];if(!_e.fixedrange)if(_e.rangebreaks){var Ee="y"===_e._id.charAt(0),Se=Ee?1-de:de;he[_e._name+".range[0]"]=_e.l2r(_e.p2l((Ee?1-ue:ue)*_e._length)),he[_e._name+".range[1]"]=_e.l2r(_e.p2l(Se*_e._length))}else{var Fe=_e._rl[0],ve=_e._rl[1]-Fe;he[_e._name+".range[0]"]=_e.l2r(Fe+ve*ue),he[_e._name+".range[1]"]=_e.l2r(Fe+ve*de)}}if(be&&be.length){var Te=(ue+(1-de))/2;Y(be,Te,1-Te,he,[])}}function Q(le,ue){for(var de=0;de<le.length;de++){var he=le[de];if(!he.fixedrange)if(he.rangebreaks){var be=he._length,me=(he.p2l(0+ue)-he.p2l(0)+(he.p2l(be+ue)-he.p2l(be)))/2;he.range=[he.l2r(he._rl[0]-me),he.l2r(he._rl[1]-me)]}else he.range=[he.l2r(he._rl[0]-ue/he._m),he.l2r(he._rl[1]-ue/he._m)]}}function re(le){return 1-(le>=0?Math.min(le,.9):1/(1/Math.max(le,-.3)+3.222))}function $(le,ue,de,he,be){return le.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(de,he)).attr("d",be+"Z")}function J(le,ue,de){return le.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ue,de)).attr("d","M0,0Z")}function ie(le,ue,de,he,be,me){le.attr("d",he+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),j(le,ue,be,me)}function j(le,ue,de,he){de||(le.transition().style("fill",he>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function q(le){v.select(le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function W(le){I&&le.data&&le._context.showTips&&(x.notifier(x._(le,"Double-click to zoom back out"),"long"),I=!1)}function ae(le){var ue=Math.floor(Math.min(le.b-le.t,le.r-le.l,L)/2);return"M"+(le.l-3.5)+","+(le.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(le.l-3.5)+","+(le.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function G(le,ue,de,he,be){for(var me,_e,Ee,De,Se=!1,Fe={},ve={},Te=(be||{}).xaHash,Ie=(be||{}).yaHash,Ce=0;Ce<ue.length;Ce++){var Re=ue[Ce];for(me in de)if(Re[me]){for(Ee in Re)be&&(Te[Ee]||Ie[Ee])||("x"===Ee.charAt(0)?de:he)[Ee]||(Fe[Ee]=me);for(_e in he)be&&(Te[_e]||Ie[_e])||!Re[_e]||(Se=!0)}for(_e in he)if(Re[_e])for(De in Re)be&&(Te[De]||Ie[De])||("x"===De.charAt(0)?de:he)[De]||(ve[De]=_e)}Se&&(x.extendFlat(Fe,ve),ve={});var Ue={},qe=[];for(Ee in Fe){var Xe=M(le,Ee);qe.push(Xe),Ue[Xe._id]=Xe}var st={},He=[];for(De in ve){var $e=M(le,De);He.push($e),st[$e._id]=$e}return{xaHash:Ue,yaHash:st,xaxes:qe,yaxes:He,xLinks:Fe,yLinks:ve,isSubplotConstrained:Se}}function ee(le,ue){if(e){var de=void 0!==le.onwheel?"wheel":"mousewheel";le._onwheel&&le.removeEventListener(de,le._onwheel),le._onwheel=ue,le.addEventListener(de,ue,{passive:!1})}else void 0!==le.onwheel?le.onwheel=ue:void 0!==le.onmousewheel?le.onmousewheel=ue:le.isAddedWheelEvent||(le.isAddedWheelEvent=!0,le.addEventListener("wheel",ue,{passive:!1}))}function te(le){var ue=[];for(var de in le)ue.push(le[de]);return ue}oe.exports={makeDragBox:function(le,ue,de,he,be,me,_e,Ee){var De,Se,Fe,ve,Te,Ie,Ce,Re,Ue,qe,Xe,st,He,$e,et,tt,ct,bt,At,Ut,Ct,dt,at,Nt=le._fullLayout._zoomlayer,rn=_e+Ee==="nsew",en=1===(_e+Ee).length;function Ge(){if(Ue=(De=ue.xaxis)._length,qe=(Se=ue.yaxis)._length,Ce=De._offset,Re=Se._offset,(Fe={})[De._id]=De,(ve={})[Se._id]=Se,_e&&Ee)for(var hn=ue.overlays,pn=0;pn<hn.length;pn++){var xn=hn[pn].xaxis;Fe[xn._id]=xn;var En=hn[pn].yaxis;ve[En._id]=En}Te=te(Fe),Ie=te(ve),He=Z(Te,Ee),$e=Z(Ie,_e),et=!$e&&!He,st=G(le,le._fullLayout._axisMatchGroups,Fe,ve);var In=(Xe=G(le,le._fullLayout._axisConstraintGroups,Fe,ve,st)).isSubplotConstrained||st.isSubplotConstrained;tt=Ee||In,ct=_e||In;var Yn=le._fullLayout;bt=Yn._has("scattergl"),At=Yn._has("splom"),Ut=Yn._has("svg")}Ge();var hn,Qe=(hn=$e+He)?"nsew"===hn?rn?"":"pan"===le._fullLayout.dragmode?"move":"crosshair":hn.toLowerCase()+"-resize":"pointer",Rt=V(ue,_e+Ee+"drag",Qe,de,he,be,me);if(et&&!rn)return Rt.onmousedown=null,Rt.style.pointerEvents="none",Rt;var gt,Be,Ve,Le,je,Ke,ft,mt,pt,Ot,Pt={element:Rt,gd:le,plotinfo:ue};function Jt(){Pt.plotinfo.selection=!1,E(le)}function $t(hn,pn){var Pr,Wr,lr,Hn,Sr,xn=Pt.gd;if(xn._fullLayout._activeShapeIndex>=0)xn._fullLayout._deactivateShape(xn);else{var En=xn._fullLayout.clickmode;if(q(xn),2!==hn||en||function ln(){if(!le._transitioningWithDuration){var hn=le._context.doubleClick,pn=[];He&&(pn=pn.concat(Te)),$e&&(pn=pn.concat(Ie)),st.xaxes&&(pn=pn.concat(st.xaxes)),st.yaxes&&(pn=pn.concat(st.yaxes));var xn,En,In,Yn={};if("reset+autosize"===hn)for(hn="autosize",En=0;En<pn.length;En++)if((xn=pn[En])._rangeInitial&&(xn.range[0]!==xn._rangeInitial[0]||xn.range[1]!==xn._rangeInitial[1])||!xn._rangeInitial&&!xn.autorange){hn="reset";break}if("autosize"===hn)for(En=0;En<pn.length;En++)(xn=pn[En]).fixedrange||(Yn[xn._name+".autorange"]=!0);else if("reset"===hn)for((He||Xe.isSubplotConstrained)&&(pn=pn.concat(Xe.xaxes)),$e&&!Xe.isSubplotConstrained&&(pn=pn.concat(Xe.yaxes)),Xe.isSubplotConstrained&&(He?$e||(pn=pn.concat(Ie)):pn=pn.concat(Te)),En=0;En<pn.length;En++)(xn=pn[En]).fixedrange||(xn._rangeInitial?(Yn[xn._name+".range[0]"]=(In=xn._rangeInitial)[0],Yn[xn._name+".range[1]"]=In[1]):Yn[xn._name+".autorange"]=!0);le.emit("plotly_doubleclick",null),o.call("_guiRelayout",le,Yn)}}(),rn)En.indexOf("select")>-1&&P(pn,xn,Te,Ie,ue.id,Pt),En.indexOf("event")>-1&&h.click(xn,pn,ue.id);else if(1===hn&&en){var In=_e?Se:De,Yn="s"===_e||"w"===Ee?0:1,nr=In._name+".range["+Yn+"]",sr=(Hn=(Pr=In).range[Wr=Yn],Sr=Math.abs(Hn-Pr.range[1-Wr]),"date"===Pr.type?Hn:"log"===Pr.type?(lr=Math.ceil(Math.max(0,-Math.log(Sr)/Math.LN10))+3,T("."+lr+"g")(Math.pow(10,Hn))):(lr=Math.floor(Math.log(Math.abs(Hn))/Math.LN10)-Math.floor(Math.log(Sr)/Math.LN10)+4,T("."+String(lr)+"g")(Hn))),Ar="left",yr="middle";if(In.fixedrange)return;_e?(yr="n"===_e?"top":"bottom","right"===In.side&&(Ar="right")):"e"===Ee&&(Ar="right"),xn._context.showAxisRangeEntryBoxes&&v.select(Rt).call(l.makeEditable,{gd:xn,immediate:!0,background:xn._fullLayout.paper_bgcolor,text:String(sr),fill:In.tickfont?In.tickfont.color:"#444",horizontalAlign:Ar,verticalAlign:yr}).on("edit",function(Pr){var Wr=In.d2r(Pr);void 0!==Wr&&o.call("_guiRelayout",xn,nr,Wr)})}}}function ut(hn,pn){if(le._transitioningWithDuration)return!1;var yr,Pr,xn=Math.max(0,Math.min(Ue,dt*hn+gt)),En=Math.max(0,Math.min(qe,at*pn+Be)),In=Math.abs(xn-gt),Yn=Math.abs(En-Be);function nr(){ft="",Ve.r=Ve.l,Ve.t=Ve.b,pt.attr("d","M0,0Z")}if(Ve.l=Math.min(gt,xn),Ve.r=Math.max(gt,xn),Ve.t=Math.min(Be,En),Ve.b=Math.max(Be,En),Xe.isSubplotConstrained)In>L||Yn>L?(ft="xy",In/Ue>Yn/qe?(Yn=In*qe/Ue,Be>En?Ve.t=Be-Yn:Ve.b=Be+Yn):(In=Yn*Ue/qe,gt>xn?Ve.l=gt-In:Ve.r=gt+In),pt.attr("d",ae(Ve))):nr();else if(st.isSubplotConstrained)if(In>L||Yn>L){ft="xy";var sr=Math.min(Ve.l/Ue,(qe-Ve.b)/qe),Ar=Math.max(Ve.r/Ue,(qe-Ve.t)/qe);Ve.l=sr*Ue,Ve.r=Ar*Ue,Ve.b=(1-sr)*qe,Ve.t=(1-Ar)*qe,pt.attr("d",ae(Ve))}else nr();else!$e||Yn<Math.min(Math.max(.6*In,R),L)?In<R||!He?nr():(Ve.t=0,Ve.b=qe,ft="x",pt.attr("d","M"+((yr=Ve).l-.5)+","+((Pr=Be)-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(yr.r+.5)+","+(Pr-L-.5)+"h3v"+(2*L+1)+"h-3Z")):!He||In<Math.min(.6*Yn,L)?(Ve.l=0,Ve.r=Ue,ft="y",pt.attr("d",function(yr,Pr){return"M"+(Pr-L-.5)+","+(yr.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(Pr-L-.5)+","+(yr.b+.5)+"v3h"+(2*L+1)+"v-3Z"}(Ve,gt))):(ft="xy",pt.attr("d",ae(Ve)));Ve.w=Ve.r-Ve.l,Ve.h=Ve.b-Ve.t,ft&&(Ot=!0),le._dragged=Ot,ie(mt,pt,Ve,je,Ke,Le),Dt(),le.emit("plotly_relayouting",Ct),Ke=!0}function Dt(){Ct={},"xy"!==ft&&"x"!==ft||(Y(Te,Ve.l/Ue,Ve.r/Ue,Ct,Xe.xaxes),It("x",Ct)),"xy"!==ft&&"y"!==ft||(Y(Ie,(qe-Ve.b)/qe,(qe-Ve.t)/qe,Ct,Xe.yaxes),It("y",Ct))}function Wt(){Dt(),q(le),un(),W(le)}Pt.prepFn=function(hn,pn,xn){var En=Pt.dragmode,In=le._fullLayout.dragmode;In!==En&&(Pt.dragmode=In),Ge(),dt=le._fullLayout._invScaleX,at=le._fullLayout._invScaleY,et||(rn?hn.shiftKey?"pan"===In?In="zoom":g(In)||(In="pan"):hn.ctrlKey&&(In="pan"):In="pan"),Pt.minDrag=m(In)?1:void 0,g(In)?(Pt.xaxes=Te,Pt.yaxes=Ie,k(hn,pn,xn,Pt,In)):(Pt.clickFn=$t,g(En)&&Jt(),et||("zoom"===In?(Pt.moveFn=ut,Pt.doneFn=Wt,Pt.minDrag=1,function(Yn,nr,sr){var Ar=Rt.getBoundingClientRect();gt=nr-Ar.left,Be=sr-Ar.top,le._fullLayout._calcInverseTransform(le);var yr=x.apply3DTransform(le._fullLayout._invTransform)(gt,Be);Ve={l:gt=yr[0],r:gt,w:0,t:Be=yr[1],b:Be,h:0},Le=le._hmpixcount?le._hmlumcount/le._hmpixcount:b(le._fullLayout.plot_bgcolor).getLuminance(),Ke=!1,ft="xy",Ot=!1,mt=$(Nt,Le,Ce,Re,je="M0,0H"+Ue+"V"+qe+"H0V0"),pt=J(Nt,Ce,Re)}(0,pn,xn)):"pan"===In&&(Pt.moveFn=yt,Pt.doneFn=un))),le._fullLayout._redrag=function(){var Yn=le._dragdata;Yn&&Yn.element===Rt&&(g(le._fullLayout.dragmode)||(Ge(),an([0,0,Ue,qe]),Pt.moveFn(Yn.dx,Yn.dy)))}},p.init(Pt);var zt=[0,0,Ue,qe],Ht=null,Ne=F.REDRAWDELAY,ot=ue.mainplot?le._fullLayout._plots[ue.mainplot]:ue;function yt(hn,pn){if(hn*=dt,pn*=at,!le._transitioningWithDuration){if(le._fullLayout._replotting=!0,"ew"===He||"ns"===$e){var xn=He?-hn:0,En=$e?-pn:0;if(st.isSubplotConstrained){if(He&&$e){var In=(hn/Ue-pn/qe)/2;xn=-(hn=In*Ue),En=-(pn=-In*qe)}$e?xn=-En*Ue/qe:En=-xn*qe/Ue}return He&&(Q(Te,hn),It("x")),$e&&(Q(Ie,pn),It("y")),an([xn,En,Ue,qe]),Vt(),void le.emit("plotly_relayouting",Ct)}var Yn,nr,sr="w"===He==("n"===$e)?1:-1;if(He&&$e&&(Xe.isSubplotConstrained||st.isSubplotConstrained)){var Ar=(hn/Ue+sr*pn/qe)/2;hn=Ar*Ue,pn=sr*Ar*qe}if("w"===He?hn=lr(Te,0,hn):"e"===He?hn=lr(Te,1,-hn):He||(hn=0),"n"===$e?pn=lr(Ie,1,pn):"s"===$e?pn=lr(Ie,0,-pn):$e||(pn=0),Yn="w"===He?hn:0,nr="n"===$e?pn:0,Xe.isSubplotConstrained&&!st.isSubplotConstrained||st.isSubplotConstrained&&He&&$e&&sr>0){var yr;if(st.isSubplotConstrained||!He&&1===$e.length){for(yr=0;yr<Te.length;yr++)Te[yr].range=Te[yr]._r.slice(),D(Te[yr],1-pn/qe);Yn=(hn=pn*Ue/qe)/2}if(st.isSubplotConstrained||!$e&&1===He.length){for(yr=0;yr<Ie.length;yr++)Ie[yr].range=Ie[yr]._r.slice(),D(Ie[yr],1-hn/Ue);nr=(pn=hn*qe/Ue)/2}}st.isSubplotConstrained&&$e||It("x"),st.isSubplotConstrained&&He||It("y");var Pr=Ue-hn,Wr=qe-pn;!st.isSubplotConstrained||He&&$e||(He?(nr=Yn?0:hn*qe/Ue,Wr=Pr*qe/Ue):(Yn=nr?0:pn*Ue/qe,Pr=Wr*Ue/qe)),an([Yn,nr,Pr,Wr]),Vt(),le.emit("plotly_relayouting",Ct)}function lr(Hn,Sr,ti){for(var Fn,br,xr=1-Sr,Kn=0;Kn<Hn.length;Kn++){var Qr=Hn[Kn];if(!Qr.fixedrange){Fn=Qr,br=Qr._rl[xr]+(Qr._rl[Sr]-Qr._rl[xr])/re(ti/Qr._length);var ci=Qr.l2r(br);!1!==ci&&void 0!==ci&&(Qr.range[Sr]=ci)}}return Fn._length*(Fn._rl[Sr]-br)/(Fn._rl[Sr]-Fn._rl[xr])}}function It(hn,pn){for(var xn=st.isSubplotConstrained?{x:Ie,y:Te}[hn]:st[hn+"axes"],En=st.isSubplotConstrained?{x:Te,y:Ie}[hn]:[],In=0;In<xn.length;In++){var Yn=xn[In],nr=Yn._id,sr=st.xLinks[nr]||st.yLinks[nr],Ar=En[0]||Fe[sr]||ve[sr];Ar&&(pn?(pn[Yn._name+".range[0]"]=pn[Ar._name+".range[0]"],pn[Yn._name+".range[1]"]=pn[Ar._name+".range[1]"]):Yn.range=Ar.range.slice())}}function Vt(){var hn,pn=[];function xn(Yn){for(hn=0;hn<Yn.length;hn++)Yn[hn].fixedrange||pn.push(Yn[hn]._id)}for(tt&&(xn(Te),xn(Xe.xaxes),xn(st.xaxes)),ct&&(xn(Ie),xn(Xe.yaxes),xn(st.yaxes)),Ct={},hn=0;hn<pn.length;hn++){var In=M(le,pn[hn]);s.drawOne(le,In,{skipTitle:!0}),Ct[In._name+".range[0]"]=In.range[0],Ct[In._name+".range[1]"]=In.range[1]}s.redrawComponents(le,pn)}function un(){an([0,0,Ue,qe]),x.syncOrAsync([A.previousPromises,function(){le._fullLayout._replotting=!1,o.call("_guiRelayout",le,Ct)}],le)}function an(hn){var pn,xn,En,In,Yn=le._fullLayout,nr=Yn._plots,sr=Yn._subplots.cartesian;if(At&&o.subplotsRegistry.splom.drag(le),bt)for(pn=0;pn<sr.length;pn++)if(En=(xn=nr[sr[pn]]).xaxis,In=xn.yaxis,xn._scene){var Ar=x.simpleMap(En.range,En.r2l),yr=x.simpleMap(In.range,In.r2l);xn._scene.update({range:[Ar[0],yr[0],Ar[1],yr[1]]})}if((At||bt)&&(w(le),f(le)),Ut){var Pr=hn[2]/De._length,Wr=hn[3]/Se._length;for(pn=0;pn<sr.length;pn++){En=(xn=nr[sr[pn]]).xaxis,In=xn.yaxis;var lr,Hn,Sr,ti,br=(ct||st.isSubplotConstrained)&&!In.fixedrange&&ve[In._id];if((tt||st.isSubplotConstrained)&&!En.fixedrange&&Fe[En._id]?(lr=Pr,Sr=Ee||st.isSubplotConstrained?hn[0]:An(En,lr)):st.xaHash[En._id]?(lr=Pr,Sr=hn[0]*En._length/De._length):st.yaHash[En._id]?(lr=Wr,Sr="ns"===$e?-hn[1]*En._length/Se._length:An(En,lr,{n:"top",s:"bottom"}[$e])):Sr=Zn(En,lr=wn(En,Pr,Wr)),br?(Hn=Wr,ti=_e||st.isSubplotConstrained?hn[1]:An(In,Hn)):st.yaHash[In._id]?(Hn=Wr,ti=hn[1]*In._length/Se._length):st.xaHash[In._id]?(Hn=Pr,ti="ew"===He?-hn[0]*In._length/De._length:An(In,Hn,{e:"right",w:"left"}[He])):ti=Zn(In,Hn=wn(In,Pr,Wr)),lr||Hn){lr||(lr=1),Hn||(Hn=1);var xr=En._offset-Sr/lr,Kn=In._offset-ti/Hn;xn.clipRect.call(y.setTranslate,Sr,ti).call(y.setScale,lr,Hn),xn.plot.call(y.setTranslate,xr,Kn).call(y.setScale,1/lr,1/Hn),lr===xn.xScaleFactor&&Hn===xn.yScaleFactor||(y.setPointGroupScale(xn.zoomScalePts,lr,Hn),y.setTextPointsScale(xn.zoomScaleTxt,lr,Hn)),y.hideOutsideRangePoints(xn.clipOnAxisFalseTraces,xn),xn.xScaleFactor=lr,xn.yScaleFactor=Hn}}}}function wn(hn,pn,xn){return hn.fixedrange?0:tt&&Xe.xaHash[hn._id]?pn:ct&&(Xe.isSubplotConstrained?Xe.xaHash:Xe.yaHash)[hn._id]?xn:0}function Zn(hn,pn){return pn?(hn.range=hn._r.slice(),D(hn,pn),An(hn,pn)):0}function An(hn,pn,xn){return hn._length*(1-pn)*u[xn||hn.constraintoward||"middle"]}return _e.length*Ee.length!=1&&ee(Rt,function(hn){if(le._context._scrollZoom.cartesian||le._fullLayout._enablescrollzoom){if(Jt(),le._transitioningWithDuration)return hn.preventDefault(),void hn.stopPropagation();Ge(),clearTimeout(Ht);var pn=-hn.deltaY;if(isFinite(pn)||(pn=hn.wheelDelta/10),isFinite(pn)){var xn,En=Math.exp(-Math.min(Math.max(pn,-20),20)/200),In=ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Yn=(hn.clientX-In.left)/In.width,nr=(In.bottom-hn.clientY)/In.height;if(tt){for(Ee||(Yn=.5),xn=0;xn<Te.length;xn++)sr(Te[xn],Yn,En);It("x"),zt[2]*=En,zt[0]+=zt[2]*Yn*(1/En-1)}if(ct){for(_e||(nr=.5),xn=0;xn<Ie.length;xn++)sr(Ie[xn],nr,En);It("y"),zt[3]*=En,zt[1]+=zt[3]*(1-nr)*(1/En-1)}an(zt),Vt(),le.emit("plotly_relayouting",Ct),Ht=setTimeout(function(){le._fullLayout&&(zt=[0,0,Ue,qe],un())},Ne),hn.preventDefault()}else x.log("Did not find wheel motion attributes: ",hn)}function sr(Ar,yr,Pr){if(!Ar.fixedrange){var Wr=x.simpleMap(Ar.range,Ar.r2l),lr=Wr[0]+(Wr[1]-Wr[0])*yr;Ar.range=Wr.map(function(Hn){return Ar.l2r(lr+(Hn-lr)*Pr)})}}}),Rt},makeDragger:B,makeRectDragger:V,makeZoombox:$,makeCorners:J,updateZoombox:ie,xyCorners:ae,transitionZoombox:j,removeZoombox:q,showDoubleClickNotifier:W,attachWheelEventHandler:ee}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/fx"),T=_("../../components/dragelement"),b=_("../../lib/setcursor"),e=_("./dragbox").makeDragBox,o=_("./constants").DRAGGERSIZE;se.initInteractions=function(i){var l=i._fullLayout;if(i._context.staticPlot)v.select(i).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(y,h){if((l._plots[y].mainplot&&!0)===(l._plots[h].mainplot&&!0)){var s=y.split("y"),d=h.split("y");return s[0]===d[0]?Number(s[1]||1)-Number(d[1]||1):Number(s[0]||1)-Number(d[0]||1)}return l._plots[y].mainplot?1:-1}).forEach(function(y){var h=l._plots[y],s=h.xaxis,d=h.yaxis;if(!h.mainplot){var p=e(i,h,s._offset,d._offset,s._length,d._length,"ns","ew");p.onmousemove=function(m){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===y&&i._fullLayout._plots[y]&&x.hover(i,m,y)},x.hover(i,m,y),i._fullLayout._lasthover=p,i._fullLayout._hoversubplot=y},p.onmouseout=function(m){i._dragging||(i._fullLayout._hoversubplot=null,T.unhover(i,m))},i._context.showAxisDragHandles&&(e(i,h,s._offset-o,d._offset-o,o,o,"n","w"),e(i,h,s._offset+s._length,d._offset-o,o,o,"n","e"),e(i,h,s._offset-o,d._offset+d._length,o,o,"s","w"),e(i,h,s._offset+s._length,d._offset+d._length,o,o,"s","e"))}if(i._context.showAxisDragHandles){if(y===s._mainSubplot){var c=s._mainLinePosition;"top"===s.side&&(c-=o),e(i,h,s._offset+.1*s._length,c,.8*s._length,o,"","ew"),e(i,h,s._offset,c,.1*s._length,o,"","w"),e(i,h,s._offset+.9*s._length,c,.1*s._length,o,"","e")}if(y===d._mainSubplot){var g=d._mainLinePosition;"right"!==d.side&&(g-=o),e(i,h,g,d._offset+.1*d._length,o,.8*d._length,"ns",""),e(i,h,g,d._offset+.9*d._length,o,.1*d._length,"s",""),e(i,h,g,d._offset,o,.1*d._length,"n","")}}});var r=l._hoverlayer.node();r.onmousemove=function(y){y.target=i._fullLayout._lasthover,x.hover(i,y,l._hoversubplot)},r.onclick=function(y){y.target=i._fullLayout._lasthover,x.click(i,y)},r.onmousedown=function(y){i._fullLayout._lasthover.onmousedown(y)},se.updateFx(i)}},se.updateFx=function(i){var l=i._fullLayout;b(l._draggers,"pan"===l.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(_,oe,se){"use strict";oe.exports={clearOutlineControllers:function(v){var x=v._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()},clearSelect:function(v){var x=v._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),v._fullLayout._drawing=!1}}},{}],566:[function(_,oe,se){"use strict";var v=_("../../lib").strTranslate;function x(T,b){switch(T.type){case"log":return T.p2d(b);case"date":return T.p2r(b,0,T.calendar);default:return T.p2r(b)}}oe.exports={p2r:x,r2p:function(T,b){switch(T.type){case"log":return T.d2p(b);case"date":return T.r2p(b,0,T.calendar);default:return T.r2p(b)}},axValue:function(T){var b="y"===T._id.charAt(0)?1:0;return function(e){return x(T,e[b])}},getTransform:function(T){return v(T.xaxis._offset,T.yaxis._offset)}}},{"../../lib":503}],567:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("./axis_ids");oe.exports=function(b){return function(e,o){var i=e[b];if(Array.isArray(i))for(var l=v.subplotsRegistry.cartesian,r=l.idRegex,y=o._subplots,h=y.xaxis,s=y.yaxis,d=y.cartesian,p=o._has("cartesian")||o._has("gl2d"),c=0;c<i.length;c++){var g=i[c];if(x.isPlainObject(g)){var m=T.cleanId(g.xref,"x",!1),u=T.cleanId(g.yref,"y",!1),w=r.x.test(m),f=r.y.test(u);if(w||f){p||x.pushUnique(o._basePlotModules,l);var A=!1;w&&-1===h.indexOf(m)&&(h.push(m),A=!0),f&&-1===s.indexOf(u)&&(s.push(u),A=!0),A&&w&&f&&d.push(m+u)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=_("../plots"),e=_("../../components/drawing"),o=_("../get_data").getModuleCalcData,i=_("./axis_ids"),l=_("./constants"),r=_("../../constants/xmlns_namespaces"),y=T.ensureSingle;function h(g,m,u){return T.ensureSingle(g,m,u,function(w){w.datum(u)})}function s(g,m,u,w,f){for(var A,M,k,E=l.traceLayerClasses,P=g._fullLayout,D=P._modules,F=[],R=[],L=0;L<D.length;L++){var I=(A=D[L]).name,B=x.modules[I].categories;if(B.svg){var V=A.layerName||I+"layer",Z=A.plot;k=(M=o(u,Z))[0],u=M[1],k.length&&F.push({i:E.indexOf(V),className:V,plotMethod:Z,cdModule:k}),B.zoomScale&&R.push("."+V)}}F.sort(function(re,$){return re.i-$.i});var Y=m.plot.selectAll("g.mlayer").data(F,function(re){return re.className});if(Y.enter().append("g").attr("class",function(re){return re.className}).classed("mlayer",!0).classed("rangeplot",m.isRangePlot),Y.exit().remove(),Y.order(),Y.each(function(re){var $=v.select(this),J=re.className;re.plotMethod(g,m,re.cdModule,$,w,f),-1===l.clipOnAxisFalseQuery.indexOf("."+J)&&e.setClipUrl($,m.layerClipId,g)}),P._has("scattergl")&&(A=x.getModule("scattergl"),k=o(u,A)[0],A.plot(g,m,k)),!g._context.staticPlot&&(m._hasClipOnAxisFalse&&(m.clipOnAxisFalseTraces=m.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var Q=m.plot.selectAll(R.join(",")).selectAll(".trace");m.zoomScalePts=Q.selectAll("path.point"),m.zoomScaleTxt=Q.selectAll(".textpoint")}}function d(g,m){var u=m.plotgroup,w=m.id,f=l.layerValue2layerClass[m.xaxis.layer],A=l.layerValue2layerClass[m.yaxis.layer],M=g._fullLayout._hasOnlyLargeSploms;if(m.mainplot){var k=m.mainplotinfo,E=k.plotgroup,P=w+"-x",D=w+"-y";m.gridlayer=k.gridlayer,m.zerolinelayer=k.zerolinelayer,y(k.overlinesBelow,"path",P),y(k.overlinesBelow,"path",D),y(k.overaxesBelow,"g",P),y(k.overaxesBelow,"g",D),m.plot=y(k.overplot,"g",w),y(k.overlinesAbove,"path",P),y(k.overlinesAbove,"path",D),y(k.overaxesAbove,"g",P),y(k.overaxesAbove,"g",D),m.xlines=E.select(".overlines-"+f).select("."+P),m.ylines=E.select(".overlines-"+A).select("."+D),m.xaxislayer=E.select(".overaxes-"+f).select("."+P),m.yaxislayer=E.select(".overaxes-"+A).select("."+D)}else if(M)m.xlines=y(u,"path","xlines-above"),m.ylines=y(u,"path","ylines-above"),m.xaxislayer=y(u,"g","xaxislayer-above"),m.yaxislayer=y(u,"g","yaxislayer-above");else{var F=y(u,"g","layer-subplot");m.shapelayer=y(F,"g","shapelayer"),m.imagelayer=y(F,"g","imagelayer"),m.gridlayer=y(u,"g","gridlayer"),m.zerolinelayer=y(u,"g","zerolinelayer"),y(u,"path","xlines-below"),y(u,"path","ylines-below"),m.overlinesBelow=y(u,"g","overlines-below"),y(u,"g","xaxislayer-below"),y(u,"g","yaxislayer-below"),m.overaxesBelow=y(u,"g","overaxes-below"),m.plot=y(u,"g","plot"),m.overplot=y(u,"g","overplot"),m.xlines=y(u,"path","xlines-above"),m.ylines=y(u,"path","ylines-above"),m.overlinesAbove=y(u,"g","overlines-above"),y(u,"g","xaxislayer-above"),y(u,"g","yaxislayer-above"),m.overaxesAbove=y(u,"g","overaxes-above"),m.xlines=u.select(".xlines-"+f),m.ylines=u.select(".ylines-"+A),m.xaxislayer=u.select(".xaxislayer-"+f),m.yaxislayer=u.select(".yaxislayer-"+A)}M||(h(m.gridlayer,"g",m.xaxis._id),h(m.gridlayer,"g",m.yaxis._id),m.gridlayer.selectAll("g").map(function(R){return R[0]}).sort(i.idSort)),m.xlines.style("fill","none").classed("crisp",!0),m.ylines.style("fill","none").classed("crisp",!0)}function p(g,m){if(g){var u={};for(var w in g.each(function(k){var E=k[0];v.select(this).remove(),c(E,m),u[E]=!0}),m._plots)for(var f=m._plots[w].overlays||[],A=0;A<f.length;A++){var M=f[A];u[M.id]&&M.plot.selectAll(".trace").remove()}}}function c(g,m){m._draggers.selectAll("g."+g).remove(),m._defs.select("#clip"+m._uid+g+"plot").remove()}se.name="cartesian",se.attr=["xaxis","yaxis"],se.idRoot=["x","y"],se.idRegex=l.idRegex,se.attrRegex=l.attrRegex,se.attributes=_("./attributes"),se.layoutAttributes=_("./layout_attributes"),se.supplyLayoutDefaults=_("./layout_defaults"),se.transitionAxes=_("./transition_axes"),se.finalizeSubplots=function(g,m){var u,w,f,A=m._subplots,M=A.xaxis,k=A.yaxis,E=A.cartesian,P=E.concat(A.gl2d||[]),D={},F={};for(u=0;u<P.length;u++){var R=P[u].split("y");D[R[0]]=1,F["y"+R[1]]=1}for(u=0;u<M.length;u++)D[w=M[u]]||(f=(g[i.id2name(w)]||{}).anchor,l.idRegex.y.test(f)||(f="y"),E.push(w+f),P.push(w+f),F[f]||(F[f]=1,T.pushUnique(k,f)));for(u=0;u<k.length;u++)F[f=k[u]]||(w=(g[i.id2name(f)]||{}).anchor,l.idRegex.x.test(w)||(w="x"),E.push(w+f),P.push(w+f),D[w]||(D[w]=1,T.pushUnique(M,w)));if(!P.length){for(var L in w="",f="",g)l.attrRegex.test(L)&&("x"===L.charAt(0)?(!w||+L.substr(5)<+w.substr(5))&&(w=L):(!f||+L.substr(5)<+f.substr(5))&&(f=L));w=w?i.name2id(w):"x",f=f?i.name2id(f):"y",M.push(w),k.push(f),E.push(w+f)}},se.plot=function(g,m,u,w){var f,A=g._fullLayout,M=A._subplots.cartesian,k=g.calcdata;if(!Array.isArray(m))for(m=[],f=0;f<k.length;f++)m.push(f);for(f=0;f<M.length;f++){for(var E,P=M[f],D=A._plots[P],F=[],R=0;R<k.length;R++){var L=k[R],I=L[0].trace;I.xaxis+I.yaxis===P&&((-1!==m.indexOf(I.index)||I.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===P&&-1!==["tonextx","tonexty","tonext"].indexOf(I.fill)&&-1===F.indexOf(E)&&F.push(E),F.push(L)),E=L)}s(g,D,F,u,w)}},se.clean=function(g,m,u,w){var f,A,M,k=w._plots||{},E=m._plots||{},P=w._subplots||{};if(w._hasOnlyLargeSploms&&!m._hasOnlyLargeSploms)for(M in k)(f=k[M]).plotgroup&&f.plotgroup.remove();var D=w._has&&w._has("gl"),F=m._has&&m._has("gl");if(D&&!F)for(M in k)(f=k[M])._scene&&f._scene.destroy();if(P.xaxis&&P.yaxis){var R=i.listIds({_fullLayout:w});for(A=0;A<R.length;A++){var L=R[A];m[i.id2name(L)]||w._infolayer.selectAll(".g-"+L+"title").remove()}}var I=w._has&&w._has("cartesian"),B=m._has&&m._has("cartesian");if(I&&!B)p(w._cartesianlayer.selectAll(".subplot"),w),w._defs.selectAll(".axesclip").remove(),delete w._axisConstraintGroups,delete w._axisMatchGroups;else if(P.cartesian)for(A=0;A<P.cartesian.length;A++){var V=P.cartesian[A];E[V]||(w._cartesianlayer.selectAll("."+V+",."+V+"-x,."+V+"-y").remove(),c(V,w))}},se.drawFramework=function(g){var m=g._fullLayout,u=function(f){var A,M,k,E,P,D,F=f._fullLayout,R=F._subplots.cartesian,L=R.length,I=[],B=[];for(A=0;A<L;A++){var Y=(P=(E=F._plots[k=R[A]]).xaxis)._mainAxis._id+(D=E.yaxis)._mainAxis._id,Q=F._plots[Y];E.overlays=[],Y!==k&&Q?(E.mainplot=Y,E.mainplotinfo=Q,B.push(k)):(E.mainplot=void 0,E.mainplotinfo=void 0,I.push(k))}for(A=0;A<B.length;A++)(E=F._plots[k=B[A]]).mainplotinfo.overlays.push(E);var re=I.concat(B),$=new Array(L);for(A=0;A<L;A++){var J=[k=re[A],(P=(E=F._plots[k]).xaxis).layer,(D=E.yaxis).layer,P.overlaying||"",D.overlaying||""];for(M=0;M<E.overlays.length;M++)J.push(E.overlays[M].id);$[A]=J}return $}(g),w=m._cartesianlayer.selectAll(".subplot").data(u,String);w.enter().append("g").attr("class",function(f){return"subplot "+f[0]}),w.order(),w.exit().call(p,m),w.each(function(f){var A=f[0],M=m._plots[A];M.plotgroup=v.select(this),d(g,M),M.draglayer=y(m._draggers,"g",A)})},se.rangePlot=function(g,m,u){d(g,m),s(g,m,u),b.style(g)},se.toSVG=function(g){var m=g._fullLayout._glimages,u=v.select(g).selectAll(".svg-container");u.filter(function(w,f){return f===u.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var w=this.toDataURL("image/png");m.append("svg:image").attr({xmlns:r.svg,"xlink:href":w,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},se.updateFx=_("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(_,oe,se){"use strict";var v=_("../font_attributes"),x=_("../../components/color/attributes"),T=_("../../components/drawing/attributes").dash,b=_("../../lib/extend").extendFlat,e=_("../../plot_api/plot_template").templatedArray,o=_("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=_("../../constants/numerical").ONEDAY,l=_("./constants"),r=l.HOUR_PATTERN,y=l.WEEKDAY_PATTERN;oe.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:x.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:v({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[y,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:b({},T,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:v({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:o("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:o("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:x.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:v({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../../components/fx/helpers").isUnifiedHover,b=_("../../components/fx/hovermode_defaults"),e=_("../../plot_api/plot_template"),o=_("../layout_attributes"),i=_("./layout_attributes"),l=_("./type_defaults"),r=_("./axis_defaults"),y=_("./constraints"),h=_("./position_defaults"),s=_("./axis_ids"),d=s.id2name,p=s.name2id,c=_("./constants").AX_ID_PATTERN,g=_("../../registry"),m=g.traceIs,u=g.getComponentMethod;function w(f,A,M){Array.isArray(f[A])?f[A].push(M):f[A]=[M]}oe.exports=function(f,A,M){var k,E,P=A.autotypenumbers,D={},F={},R={},L={},I={},B={},V={},Z={},Y={},Q={};for(k=0;k<M.length;k++){var re=M[k];if(m(re,"cartesian")||m(re,"gl2d")){var $,J;if(re.xaxis)$=d(re.xaxis),w(D,$,re);else if(re.xaxes)for(E=0;E<re.xaxes.length;E++)w(D,d(re.xaxes[E]),re);if(re.yaxis)J=d(re.yaxis),w(D,J,re);else if(re.yaxes)for(E=0;E<re.yaxes.length;E++)w(D,d(re.yaxes[E]),re);"funnel"===re.type?"h"===re.orientation?($&&(F[$]=!0),J&&(V[J]=!0)):J&&(R[J]=!0):"image"===re.type?(J&&(Z[J]=!0),$&&(Z[$]=!0)):(J&&(I[J]=!0,B[J]=!0),m(re,"carpet")&&("carpet"!==re.type||re._cheater)||$&&(L[$]=!0)),"carpet"===re.type&&re._cheater&&$&&(F[$]=!0),m(re,"2dMap")&&(Y[$]=!0,Y[J]=!0),m(re,"oriented")&&(Q["h"===re.orientation?J:$]=!0)}}var ie=A._subplots,j=ie.xaxis,q=ie.yaxis,W=v.simpleMap(j,d),ae=v.simpleMap(q,d),G=W.concat(ae),ee=x.background;j.length&&q.length&&(ee=v.coerce(f,A,o,"plot_bgcolor"));var te,le,ue,de,he,be=x.combine(ee,A.paper_bgcolor);function me(){he._traceIndices=(D[te]||[]).map(function(Nt){return Nt._expandedIndex}),he._annIndices=[],he._shapeIndices=[],he._imgIndices=[],he._subplotsWith=[],he._counterAxes=[],he._name=he._attr=te,he._id=le}function _e(at,Nt){return v.coerce(de,he,i,at,Nt)}function Ee(at,Nt){return v.coerce2(de,he,i,at,Nt)}function De(at){return"x"===at?q:j}function Se(at,Nt){for(var rn="x"===at?W:ae,en=[],Ge=0;Ge<rn.length;Ge++){var Qe=rn[Ge];Qe===Nt||(f[Qe]||{}).overlaying||en.push(p(Qe))}return en}var Fe={x:De("x"),y:De("y")},ve=Fe.x.concat(Fe.y),Te={},Ie=[];function Ce(){var at=de.matches;c.test(at)&&-1===ve.indexOf(at)&&(Te[at]=de.type,Ie=Object.keys(Te))}var Re=b(f,A),Ue=T(Re);for(k=0;k<G.length;k++){le=p(te=G[k]),ue=te.charAt(0),v.isPlainObject(f[te])||(f[te]={}),de=f[te],he=e.newContainer(A,te,ue+"axis"),me();var st={letter:ue,font:A.font,outerTicks:Y[te],showGrid:!Q[te],data:D[te]||[],bgColor:be,calendar:A.calendar,automargin:!0,visibleDflt:"x"===ue&&!L[te]&&F[te]||"y"===ue&&!I[te]&&R[te],reverseDflt:"y"===ue&&(!B[te]&&V[te]||Z[te]),autotypenumbersDflt:P,splomStash:((A._splomAxes||{})[ue]||{})[le]};_e("uirevision",A.uirevision),l(de,he,_e,st),r(de,he,_e,st,A);var He=Ue&&ue===Re.charAt(0),$e=Ee("spikecolor",Ue?he.color:void 0),et=Ee("spikethickness",Ue?1.5:void 0),tt=Ee("spikedash",Ue?"dot":void 0),ct=Ee("spikemode",Ue?"across":void 0),bt=Ee("spikesnap");_e("showspikes",!!(He||$e||et||tt||ct||bt))||(delete he.spikecolor,delete he.spikethickness,delete he.spikedash,delete he.spikemode,delete he.spikesnap),h(de,he,_e,{letter:ue,counterAxes:Fe[ue],overlayableAxes:Se(ue,te),grid:A.grid}),_e("title.standoff"),Ce(),he._input=de}for(k=0;k<Ie.length;){le=Ie[k++],ue=(te=d(le)).charAt(0),v.isPlainObject(f[te])||(f[te]={}),de=f[te],he=e.newContainer(A,te,ue+"axis"),me();var At={letter:ue,font:A.font,outerTicks:Y[te],showGrid:!Q[te],data:[],bgColor:be,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:P,splomStash:((A._splomAxes||{})[ue]||{})[le]};_e("uirevision",A.uirevision),he.type=Te[le]||"linear",r(de,he,_e,At,A),h(de,he,_e,{letter:ue,counterAxes:Fe[ue],overlayableAxes:Se(ue,te),grid:A.grid}),_e("fixedrange"),Ce(),he._input=de}var Ut=u("rangeslider","handleDefaults"),Ct=u("rangeselector","handleDefaults");for(k=0;k<W.length;k++)de=f[te=W[k]],he=A[te],Ut(f,A,te),"date"===he.type&&Ct(de,he,A,ae,he.calendar),_e("fixedrange");for(k=0;k<ae.length;k++){de=f[te=ae[k]];var dt=A[d((he=A[te]).anchor)];_e("fixedrange",u("rangeslider","isVisible")(dt))}y.handleDefaults(f,A,{axIds:ve.concat(Ie).sort(s.idSort),axHasImage:Z})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(_,oe,se){"use strict";var v=_("tinycolor2").mix,x=_("../../components/color/attributes").lightFraction,T=_("../../lib");oe.exports=function(b,e,o,i){var l=(i=i||{}).dfltColor;function r(g,m){return T.coerce2(b,e,i.attributes,g,m)}var y=r("linecolor",l),h=r("linewidth");o("showline",i.showLine||!!y||!!h)||(delete e.linecolor,delete e.linewidth);var s=r("gridcolor",v(l,i.bgColor,i.blend||x).toRgbString()),d=r("gridwidth");if(o("showgrid",i.showGrid||!!s||!!d)||(delete e.gridcolor,delete e.gridwidth),!i.noZeroLine){var p=r("zerolinecolor",l),c=r("zerolinewidth");o("zeroline",i.showGrid||!!p||!!c)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib");oe.exports=function(T,b,e,o){var i,l,r,y,h=o.counterAxes||[],s=o.overlayableAxes||[],d=o.letter,p=o.grid;p&&(i=p._anchors[b._id],(l=p._domains[d][p._axisMap[b._id]])&&(r=p[d+"side"].split(" ")[0],y=p.domain[d]["right"===r||"top"===r?1:0])),l=l||[0,1],i=i||(v(T.position)?"free":h[0]||"free"),r=r||("x"===d?"bottom":"left"),y=y||0,"free"===x.coerce(T,b,{anchor:{valType:"enumerated",values:["free"].concat(h),dflt:i}},"anchor")&&e("position",y),x.coerce(T,b,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:r}},"side");var c=!1;if(s.length&&(c=x.coerce(T,b,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!c){var g=e("domain",l);g[0]>g[1]-1/4096&&(b.domain=l),x.noneOrAll(T.domain,b.domain,l)}return e("layer"),b}},{"../../lib":503,"fast-isnumeric":190}],573:[function(_,oe,se){"use strict";var v=_("./show_dflt");oe.exports=function(x,T,b,e,o){o||(o={});var i=o.tickSuffixDflt,l=v(x);b("tickprefix")&&b("showtickprefix",l),b("ticksuffix",i)&&b("showticksuffix",l)}},{"./show_dflt":577}],574:[function(_,oe,se){"use strict";var v=_("../../constants/alignment").FROM_BL;oe.exports=function(x,T,b){void 0===b&&(b=v[x.constraintoward||"center"]);var e=[x.r2l(x.range[0]),x.r2l(x.range[1])],o=e[0]+(e[1]-e[0])*b;x.range=x._input.range=[x.l2r(o+(e[0]-o)*T),x.l2r(o+(e[1]-o)*T)],x.setScale()}},{"../../constants/alignment":471}],575:[function(_,oe,se){"use strict";var v=_("polybooljs"),x=_("../../registry"),T=_("../../components/drawing").dashStyle,b=_("../../components/color"),e=_("../../components/fx"),o=_("../../components/fx/helpers").makeEventData,i=_("../../components/dragelement/helpers"),l=i.freeMode,r=i.rectMode,y=i.drawMode,h=i.openMode,s=i.selectMode,d=_("../../components/shapes/draw_newshape/display_outlines"),p=_("../../components/shapes/draw_newshape/helpers").handleEllipse,c=_("../../components/shapes/draw_newshape/newshapes"),g=_("../../lib"),m=_("../../lib/polygon"),u=_("../../lib/throttle"),w=_("./axis_ids").getFromId,f=_("../../lib/clear_gl_canvases"),A=_("../../plot_api/subroutines").redrawReglTraces,M=_("./constants"),k=M.MINSELECT,E=m.filter,P=m.tester,D=_("./handle_outline").clearSelect,F=_("./helpers"),R=F.p2r,L=F.axValue,I=F.getTransform;function B(W,ae,G,ee,te,le,ue){var de,he,be,me,_e,Ee,De,Se,Fe,Xe,ve=ae._hoverdata,Te=ae._fullLayout.clickmode.indexOf("event")>-1,Ie=[];if((Xe=ve)&&Array.isArray(Xe)&&!0!==Xe[0].hoverOnBox){Q(W,ae,le);var Ce=function(Xe,st){var He,$e,et=Xe[0],tt=-1,ct=[];for($e=0;$e<st.length;$e++)if(et.fullData._expandedIndex===(He=st[$e]).cd[0].trace._expandedIndex){if(!0===et.hoverOnBox)break;void 0!==et.pointNumber?tt=et.pointNumber:void 0!==et.binNumber&&(tt=et.binNumber,ct=et.pointNumbers);break}return{pointNumber:tt,pointNumbers:ct,searchInfo:He}}(ve,de=$(ae,G,ee,te));if(Ce.pointNumbers.length>0?function(Xe,st){var He,$e,et,tt=[];for(et=0;et<Xe.length;et++)(He=Xe[et]).cd[0].trace.selectedpoints&&He.cd[0].trace.selectedpoints.length>0&&tt.push(He);if(1===tt.length&&tt[0]===st.searchInfo&&($e=st.searchInfo.cd[0].trace).selectedpoints.length===st.pointNumbers.length){for(et=0;et<st.pointNumbers.length;et++)if($e.selectedpoints.indexOf(st.pointNumbers[et])<0)return!1;return!0}return!1}(de,Ce):function(Xe){var He,$e,et=0;for($e=0;$e<Xe.length;$e++)if((He=Xe[$e].cd[0].trace).selectedpoints&&(He.selectedpoints.length>1||(et+=He.selectedpoints.length)>1))return!1;return 1===et}(de)&&(Ee=J(Ce))){for(ue&&ue.remove(),Fe=0;Fe<de.length;Fe++)(he=de[Fe])._module.selectPoints(he,!1);ie(ae,de),re(le),Te&&ae.emit("plotly_deselect",null)}else{for(De=W.shiftKey&&(void 0!==Ee?Ee:J(Ce)),be=function(Xe,st,He){return{pointNumber:Xe,searchInfo:st,subtract:He}}(Ce.pointNumber,Ce.searchInfo,De),me=Y(le.selectionDefs.concat([be])),Fe=0;Fe<de.length;Fe++)if(_e=j(de[Fe]._module.selectPoints(de[Fe],me),de[Fe]),Ie.length)for(var Re=0;Re<_e.length;Re++)Ie.push(_e[Re]);else Ie=_e;if(ie(ae,de,Se={points:Ie}),be&&le&&le.selectionDefs.push(be),ue){var Ue=le.mergedPolygons,qe=h(le.dragmode);d(q(Ue,qe),ue,le)}Te&&ae.emit("plotly_selected",Se)}}}function V(W){return"pointNumber"in W&&"searchInfo"in W}function Z(W){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ae,G,ee,te){return te.cd[0].trace._expandedIndex===W.searchInfo.cd[0].trace._expandedIndex&&ee===W.pointNumber},isRect:!1,degenerate:!1,subtract:W.subtract}}function Y(W){for(var ae=[],G=V(W[0])?0:W[0][0][0],ee=G,te=V(W[0])?0:W[0][0][1],le=te,ue=0;ue<W.length;ue++)if(V(W[ue]))ae.push(Z(W[ue]));else{var de=m.tester(W[ue]);de.subtract=W[ue].subtract,ae.push(de),G=Math.min(G,de.xmin),ee=Math.max(ee,de.xmax),te=Math.min(te,de.ymin),le=Math.max(le,de.ymax)}return{xmin:G,xmax:ee,ymin:te,ymax:le,pts:[],contains:function(he,be,me,_e){for(var Ee=!1,De=0;De<ae.length;De++)ae[De].contains(he,be,me,_e)&&(Ee=!1===ae[De].subtract);return Ee},isRect:!1,degenerate:!1}}function Q(W,ae,G){ae._fullLayout._drawing=!1;var ee=ae._fullLayout,te=G.plotinfo,le=G.dragmode,ue=ee._lastSelectedSubplot&&ee._lastSelectedSubplot===te.id,de=(W.shiftKey||W.altKey)&&!(y(le)&&h(le));ue&&de&&te.selection&&te.selection.selectionDefs&&!G.selectionDefs?(G.selectionDefs=te.selection.selectionDefs,G.mergedPolygons=te.selection.mergedPolygons):de&&te.selection||re(G),ue||(D(ae),ee._lastSelectedSubplot=te.id)}function re(W){var ae=W.dragmode,G=W.plotinfo,ee=W.gd;if(ee._fullLayout._activeShapeIndex>=0&&ee._fullLayout._deactivateShape(ee),y(ae)){var te=ee._fullLayout._zoomlayer.selectAll(".select-outline-"+G.id);if(te&&ee._fullLayout._drawing){var le=c(te,W);le&&x.call("_guiRelayout",ee,{shapes:le}),ee._fullLayout._drawing=!1}}G.selection={},G.selection.selectionDefs=W.selectionDefs=[],G.selection.mergedPolygons=W.mergedPolygons=[]}function $(W,ae,G,ee){var te,le,ue,de=[],he=ae.map(function(De){return De._id}),be=G.map(function(De){return De._id});for(ue=0;ue<W.calcdata.length;ue++)if(!0===(le=(te=W.calcdata[ue])[0].trace).visible&&le._module&&le._module.selectPoints)if(!ee||le.subplot!==ee&&le.geo!==ee)if("splom"===le.type&&le._xaxes[he[0]]&&le._yaxes[be[0]]){var me=Ee(le._module,te,ae[0],G[0]);me.scene=W._fullLayout._splomScenes[le.uid],de.push(me)}else if("sankey"===le.type){var _e=Ee(le._module,te,ae[0],G[0]);de.push(_e)}else{if(-1===he.indexOf(le.xaxis)||-1===be.indexOf(le.yaxis))continue;de.push(Ee(le._module,te,w(W,le.xaxis),w(W,le.yaxis)))}else de.push(Ee(le._module,te,ae[0],G[0]));return de;function Ee(De,Se,Fe,ve){return{_module:De,cd:Se,xaxis:Fe,yaxis:ve}}}function J(W){var ae=W.searchInfo.cd[0].trace,ee=W.pointNumbers;return!!ae.selectedpoints&&ae.selectedpoints.indexOf(ee.length>0?ee[0]:W.pointNumber)>-1}function ie(W,ae,G){var ee,te,le,ue;for(ee=0;ee<ae.length;ee++){var de=ae[ee].cd[0].trace._fullInput,he=W._fullLayout._tracePreGUI[de.uid]||{};void 0===he.selectedpoints&&(he.selectedpoints=de._input.selectedpoints||null)}if(G){var be=G.points||[];for(ee=0;ee<ae.length;ee++)(ue=ae[ee].cd[0].trace)._input.selectedpoints=ue._fullInput.selectedpoints=[],ue._fullInput!==ue&&(ue.selectedpoints=[]);for(ee=0;ee<be.length;ee++){var me=be[ee],_e=me.data,Ee=me.fullData;me.pointIndices?([].push.apply(_e.selectedpoints,me.pointIndices),ue._fullInput!==ue&&[].push.apply(Ee.selectedpoints,me.pointIndices)):(_e.selectedpoints.push(me.pointIndex),ue._fullInput!==ue&&Ee.selectedpoints.push(me.pointIndex))}}else for(ee=0;ee<ae.length;ee++)delete(ue=ae[ee].cd[0].trace).selectedpoints,delete ue._input.selectedpoints,ue._fullInput!==ue&&delete ue._fullInput.selectedpoints;var De=!1;for(ee=0;ee<ae.length;ee++){ue=(le=(te=ae[ee]).cd)[0].trace,x.traceIs(ue,"regl")&&(De=!0);var Se=te._module,Fe=Se.styleOnSelect||Se.style;Fe&&(Fe(W,le,le[0].node3),le[0].nodeRangePlot3&&Fe(W,le,le[0].nodeRangePlot3))}De&&(f(W),A(W))}function j(W,ae){if(Array.isArray(W))for(var G=ae.cd,ee=ae.cd[0].trace,te=0;te<W.length;te++)W[te]=o(W[te],ee,G);return W}function q(W,ae){for(var G=[],ee=0;ee<W.length;ee++){G[ee]=[];for(var te=0;te<W[ee].length;te++){G[ee][te]=[],G[ee][te][0]=te?"L":"M";for(var le=0;le<W[ee][te].length;le++)G[ee][te].push(W[ee][te][le])}ae||G[ee].push(["Z",G[ee][0][1],G[ee][0][2]])}return G}oe.exports={prepSelect:function(W,ae,G,ee,te){var le=l(te),ue=r(te),de=h(te),he=y(te),be=s(te),me="drawcircle"===te,_e="drawline"===te||me,Ee=ee.gd,De=Ee._fullLayout,Se=De._zoomlayer,Fe=ee.element.getBoundingClientRect(),ve=ee.plotinfo,Te=I(ve),Ie=ae-Fe.left,Ce=G-Fe.top;De._calcInverseTransform(Ee);var Ue,qe,Xe,st,He,$e,et,Re=g.apply3DTransform(De._invTransform)(Ie,Ce),tt=De._invScaleX,ct=De._invScaleY,bt=Ie=Re[0],At=Ce=Re[1],Ut="M"+Ie+","+Ce,Ct=ee.xaxes[0]._length,dt=ee.yaxes[0]._length,at=ee.xaxes.concat(ee.yaxes),Nt=W.altKey&&!(y(te)&&de);Q(W,Ee,ee),le&&(Ue=E([[Ie,Ce]],M.BENDPX));var rn=Se.selectAll("path.select-outline-"+ve.id).data(he?[0]:[1,2]),en=De.newshape;rn.enter().append("path").attr("class",function(Le){return"select-outline select-outline-"+Le+" select-outline-"+ve.id}).style(he?{opacity:en.opacity/2,fill:de?void 0:en.fillcolor,stroke:en.line.color,"stroke-dasharray":T(en.line.dash,en.line.width),"stroke-width":en.line.width+"px"}:{}).attr("fill-rule",en.fillrule).classed("cursor-move",!!he).attr("transform",Te).attr("d",Ut+"Z");var Ge,Qe=Se.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",Te).attr("d","M0,0Z"),Rt=De._uid+M.SELECTID,gt=[],Be=$(Ee,ee.xaxes,ee.yaxes,ee.subplot);function Ve(Le,je){return Le-je}Ge=ve.fillRangeItems?ve.fillRangeItems:ue?function(Le,je){var Ke=Le.range={};for(He=0;He<at.length;He++){var ft=at[He],mt=ft._id.charAt(0);Ke[ft._id]=[R(ft,je[mt+"min"]),R(ft,je[mt+"max"])].sort(Ve)}}:function(Le,je,Ke){var ft=Le.lassoPoints={};for(He=0;He<at.length;He++){var mt=at[He];ft[mt._id]=Ke.filtered.map(L(mt))}},ee.moveFn=function(Le,je){bt=Math.max(0,Math.min(Ct,tt*Le+Ie)),At=Math.max(0,Math.min(dt,ct*je+Ce));var Jt,$t,Ke=Math.abs(bt-Ie),ft=Math.abs(At-Ce);if(ue){var mt,pt,Ot;if(be){var Pt=De.selectdirection;switch(mt="any"===Pt?ft<Math.min(.6*Ke,k)?"h":Ke<Math.min(.6*ft,k)?"v":"d":Pt){case"h":pt=me?dt/2:0,Ot=dt;break;case"v":pt=me?Ct/2:0,Ot=Ct}}if(he)switch(De.newshape.drawdirection){case"vertical":mt="h",pt=me?dt/2:0,Ot=dt;break;case"horizontal":mt="v",pt=me?Ct/2:0,Ot=Ct;break;case"ortho":Ke<ft?(mt="h",pt=Ce,Ot=At):(mt="v",pt=Ie,Ot=bt);break;default:mt="d"}"h"===mt?((st=_e?p(me,[bt,pt],[bt,Ot]):[[Ie,pt],[Ie,Ot],[bt,Ot],[bt,pt]]).xmin=_e?bt:Math.min(Ie,bt),st.xmax=_e?bt:Math.max(Ie,bt),st.ymin=Math.min(pt,Ot),st.ymax=Math.max(pt,Ot),Qe.attr("d","M"+st.xmin+","+(Ce-k)+"h-4v"+2*k+"h4ZM"+(st.xmax-1)+","+(Ce-k)+"h4v"+2*k+"h-4Z")):"v"===mt?((st=_e?p(me,[pt,At],[Ot,At]):[[pt,Ce],[pt,At],[Ot,At],[Ot,Ce]]).xmin=Math.min(pt,Ot),st.xmax=Math.max(pt,Ot),st.ymin=_e?At:Math.min(Ce,At),st.ymax=_e?At:Math.max(Ce,At),Qe.attr("d","M"+(Ie-k)+","+st.ymin+"v-4h"+2*k+"v4ZM"+(Ie-k)+","+(st.ymax-1)+"v4h"+2*k+"v-4Z")):"d"===mt&&((st=_e?p(me,[Ie,Ce],[bt,At]):[[Ie,Ce],[Ie,At],[bt,At],[bt,Ce]]).xmin=Math.min(Ie,bt),st.xmax=Math.max(Ie,bt),st.ymin=Math.min(Ce,At),st.ymax=Math.max(Ce,At),Qe.attr("d","M0,0Z"))}else le&&(Ue.addPt([bt,At]),st=Ue.filtered);ee.selectionDefs&&ee.selectionDefs.length?(Jt=ee.mergedPolygons,$t=st,Xe=Nt?v.difference({regions:Jt,inverted:!1},{regions:[$t],inverted:!1}).regions:v.union({regions:Jt,inverted:!1},{regions:[$t],inverted:!1}).regions,st.subtract=Nt,qe=Y(ee.selectionDefs.concat([st]))):(Xe=[st],qe=P(st)),d(q(Xe,de),rn,ee),be&&u.throttle(Rt,M.SELECTDELAY,function(){var Jt;gt=[];var $t,ut=[];for(He=0;He<Be.length;He++)if($t=($e=Be[He])._module.selectPoints($e,qe),ut.push($t),Jt=j($t,$e),gt.length)for(var Dt=0;Dt<Jt.length;Dt++)gt.push(Jt[Dt]);else gt=Jt;ie(Ee,Be,et={points:gt}),Ge(et,st,Ue),ee.gd.emit("plotly_selecting",et)})},ee.clickFn=function(Le,je){if(Qe.remove(),Ee._fullLayout._activeShapeIndex>=0)Ee._fullLayout._deactivateShape(Ee);else if(!he){var Ke=De.clickmode;u.done(Rt).then(function(){if(u.clear(Rt),2===Le){for(rn.remove(),He=0;He<Be.length;He++)($e=Be[He])._module.selectPoints($e,!1);ie(Ee,Be),re(ee),Ee.emit("plotly_deselect",null)}else Ke.indexOf("select")>-1&&B(je,Ee,ee.xaxes,ee.yaxes,ee.subplot,ee,rn),"event"===Ke&&Ee.emit("plotly_selected",void 0);e.click(Ee,je)}).catch(g.error)}},ee.doneFn=function(){Qe.remove(),u.done(Rt).then(function(){u.clear(Rt),ee.gd.emit("plotly_selected",et),st&&ee.selectionDefs&&(st.subtract=Nt,ee.selectionDefs.push(st),ee.mergedPolygons.length=0,[].push.apply(ee.mergedPolygons,Xe)),ee.doneFnCompleted&&ee.doneFnCompleted(gt)}).catch(g.error),he&&re(ee)}},clearSelect:D,clearSelectionsCache:re,selectOnClick:B}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-time-format").utcFormat,T=_("../../lib"),b=T.numberFormat,e=_("fast-isnumeric"),o=T.cleanNumber,i=T.ms2DateTime,l=T.dateTime2ms,r=T.ensureNumber,y=T.isArrayOrTypedArray,h=_("../../constants/numerical"),s=h.FP_SAFE,d=h.BADNUM,p=h.LOG_CLIP,c=h.ONEWEEK,g=h.ONEDAY,m=h.ONEHOUR,u=h.ONEMIN,w=h.ONESEC,f=_("./axis_ids"),A=_("./constants"),M=A.HOUR_PATTERN,k=A.WEEKDAY_PATTERN;function E(D){return Math.pow(10,D)}function P(D){return null!=D}oe.exports=function(D,F){F=F||{};var R=D._id||"x",L=R.charAt(0);function I(G,ee){if(G>0)return Math.log(G)/Math.LN10;if(G<=0&&ee&&D.range&&2===D.range.length){var te=D.range[0],le=D.range[1];return.5*(te+le-2*p*Math.abs(te-le))}return d}function B(G,ee,te,le){if((le||{}).msUTC&&e(G))return+G;var ue=l(G,te||D.calendar);if(ue===d){if(!e(G))return d;G=+G;var de=Math.floor(10*T.mod(G+.05,1)),he=Math.round(G-de/10);ue=l(new Date(he))+de/10}return ue}function V(G,ee,te){return i(G,ee,te||D.calendar)}function Z(G){return D._categories[Math.round(G)]}function Y(G){if(P(G)){if(void 0===D._categoriesMap&&(D._categoriesMap={}),void 0!==D._categoriesMap[G])return D._categoriesMap[G];D._categories.push("number"==typeof G?String(G):G);var ee=D._categories.length-1;return D._categoriesMap[G]=ee,ee}return d}function Q(G){if(D._categoriesMap)return D._categoriesMap[G]}function re(G){var ee=Q(G);return void 0!==ee?ee:e(G)?+G:void 0}function $(G){return e(G)?+G:Q(G)}function J(G,ee,te){return v.round(te+ee*G,2)}function ie(G,ee,te){return(G-te)/ee}var j=function(G){return e(G)?J(G,D._m,D._b):d},q=function(G){return ie(G,D._m,D._b)};if(D.rangebreaks){var W="y"===L;j=function(G){if(!e(G))return d;var ee=D._rangebreaks.length;if(!ee)return J(G,D._m,D._b);var te=W;D.range[0]>D.range[1]&&(te=!te);for(var le=te?-1:1,ue=le*G,de=0,he=0;he<ee;he++){var be=le*D._rangebreaks[he].min,me=le*D._rangebreaks[he].max;if(ue<be)break;if(!(ue>me)){de=ue<(be+me)/2?he:he+1;break}de=he+1}var _e=D._B[de]||0;return isFinite(_e)?J(G,D._m2,_e):0},q=function(G){var ee=D._rangebreaks.length;if(!ee)return ie(G,D._m,D._b);for(var te=0,le=0;le<ee&&!(G<D._rangebreaks[le].pmin);le++)G>D._rangebreaks[le].pmax&&(te=le+1);return ie(G,D._m2,D._B[te])}}D.c2l="log"===D.type?I:r,D.l2c="log"===D.type?E:r,D.l2p=j,D.p2l=q,D.c2p="log"===D.type?function(G,ee){return j(I(G,ee))}:j,D.p2c="log"===D.type?function(G){return E(q(G))}:q,-1!==["linear","-"].indexOf(D.type)?(D.d2r=D.r2d=D.d2c=D.r2c=D.d2l=D.r2l=o,D.c2d=D.c2r=D.l2d=D.l2r=r,D.d2p=D.r2p=function(G){return D.l2p(o(G))},D.p2d=D.p2r=q,D.cleanPos=r):"log"===D.type?(D.d2r=D.d2l=function(G,ee){return I(o(G),ee)},D.r2d=D.r2c=function(G){return E(o(G))},D.d2c=D.r2l=o,D.c2d=D.l2r=r,D.c2r=I,D.l2d=E,D.d2p=function(G,ee){return D.l2p(D.d2r(G,ee))},D.p2d=function(G){return E(q(G))},D.r2p=function(G){return D.l2p(o(G))},D.p2r=q,D.cleanPos=r):"date"===D.type?(D.d2r=D.r2d=T.identity,D.d2c=D.r2c=D.d2l=D.r2l=B,D.c2d=D.c2r=D.l2d=D.l2r=V,D.d2p=D.r2p=function(G,ee,te){return D.l2p(B(G,0,te))},D.p2d=D.p2r=function(G,ee,te){return V(q(G),ee,te)},D.cleanPos=function(G){return T.cleanDate(G,d,D.calendar)}):"category"===D.type?(D.d2c=D.d2l=Y,D.r2d=D.c2d=D.l2d=Z,D.d2r=D.d2l_noadd=re,D.r2c=function(G){var ee=$(G);return void 0!==ee?ee:D.fraction2r(.5)},D.l2r=D.c2r=r,D.r2l=$,D.d2p=function(G){return D.l2p(D.r2c(G))},D.p2d=function(G){return Z(q(G))},D.r2p=D.d2p,D.p2r=q,D.cleanPos=function(G){return"string"==typeof G&&""!==G?G:r(G)}):"multicategory"===D.type&&(D.r2d=D.c2d=D.l2d=Z,D.d2r=D.d2l_noadd=re,D.r2c=function(G){var ee=re(G);return void 0!==ee?ee:D.fraction2r(.5)},D.r2c_just_indices=Q,D.l2r=D.c2r=r,D.r2l=re,D.d2p=function(G){return D.l2p(D.r2c(G))},D.p2d=function(G){return Z(q(G))},D.r2p=D.d2p,D.p2r=q,D.cleanPos=function(G){return Array.isArray(G)||"string"==typeof G&&""!==G?G:r(G)},D.setupMultiCategory=function(G){var ee,te,le=D._traceIndices,ue=D._matchGroup;if(ue&&0===D._categories.length)for(var de in ue)if(de!==R){var he=F[f.id2name(de)];le=le.concat(he._traceIndices)}var be=[[0,{}],[0,{}]],me=[];for(ee=0;ee<le.length;ee++){var _e=G[le[ee]];if(L in _e){var Ee=_e[L],De=_e._length||T.minRowLength(Ee);if(y(Ee[0])&&y(Ee[1]))for(te=0;te<De;te++){var Se=Ee[0][te],Fe=Ee[1][te];P(Se)&&P(Fe)&&(me.push([Se,Fe]),Se in be[0][1]||(be[0][1][Se]=be[0][0]++),Fe in be[1][1]||(be[1][1][Fe]=be[1][0]++))}}}for(me.sort(function(ve,Te){var Ie=be[0][1],Ce=Ie[ve[0]]-Ie[Te[0]];if(Ce)return Ce;var Re=be[1][1];return Re[ve[1]]-Re[Te[1]]}),ee=0;ee<me.length;ee++)Y(me[ee])}),D.fraction2r=function(G){var ee=D.r2l(D.range[0]),te=D.r2l(D.range[1]);return D.l2r(ee+G*(te-ee))},D.r2fraction=function(G){var ee=D.r2l(D.range[0]),te=D.r2l(D.range[1]);return(D.r2l(G)-ee)/(te-ee)},D.cleanRange=function(G,ee){ee||(ee={}),G||(G="range");var te,le,ue=T.nestedProperty(D,G).get();if(le=(le="date"===D.type?T.dfltRange(D.calendar):"y"===L?A.DFLTRANGEY:"realaxis"===D._name?[0,1]:ee.dfltRange||A.DFLTRANGEX).slice(),"tozero"!==D.rangemode&&"nonnegative"!==D.rangemode||(le[0]=0),ue&&2===ue.length)for("date"!==D.type||D.autorange||(ue[0]=T.cleanDate(ue[0],d,D.calendar),ue[1]=T.cleanDate(ue[1],d,D.calendar)),te=0;te<2;te++)if("date"===D.type){if(!T.isDateTime(ue[te],D.calendar)){D[G]=le;break}if(D.r2l(ue[0])===D.r2l(ue[1])){var de=T.constrain(D.r2l(ue[0]),T.MIN_MS+1e3,T.MAX_MS-1e3);ue[0]=D.l2r(de-1e3),ue[1]=D.l2r(de+1e3);break}}else{if(!e(ue[te])){if(!e(ue[1-te])){D[G]=le;break}ue[te]=ue[1-te]*(te?10:.1)}if(ue[te]<-s?ue[te]=-s:ue[te]>s&&(ue[te]=s),ue[0]===ue[1]){var he=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=he,ue[1]+=he}}else T.nestedProperty(D,G).set(le)},D.setScale=function(G){var ee=F._size;if(D.overlaying){var te=f.getFromId({_fullLayout:F},D.overlaying);D.domain=te.domain}var le=G&&D._r?"_r":"range",ue=D.calendar;D.cleanRange(le);var de,he,be=D.r2l(D[le][0],ue),me=D.r2l(D[le][1],ue),_e="y"===L;if(_e?(D._offset=ee.t+(1-D.domain[1])*ee.h,D._length=ee.h*(D.domain[1]-D.domain[0]),D._m=D._length/(be-me),D._b=-D._m*me):(D._offset=ee.l+D.domain[0]*ee.w,D._length=ee.w*(D.domain[1]-D.domain[0]),D._m=D._length/(me-be),D._b=-D._m*be),D._rangebreaks=[],D._lBreaks=0,D._m2=0,D._B=[],D.rangebreaks&&(D._rangebreaks=D.locateBreaks(Math.min(be,me),Math.max(be,me)),D._rangebreaks.length)){for(de=0;de<D._rangebreaks.length;de++)he=D._rangebreaks[de],D._lBreaks+=Math.abs(he.max-he.min);var Ee=_e;be>me&&(Ee=!Ee),Ee&&D._rangebreaks.reverse();var De=Ee?-1:1;for(D._m2=De*D._length/(Math.abs(me-be)-D._lBreaks),D._B.push(-D._m2*(_e?me:be)),de=0;de<D._rangebreaks.length;de++)D._B.push(D._B[D._B.length-1]-De*D._m2*((he=D._rangebreaks[de]).max-he.min));for(de=0;de<D._rangebreaks.length;de++)(he=D._rangebreaks[de]).pmin=j(he.min),he.pmax=j(he.max)}if(!isFinite(D._m)||!isFinite(D._b)||D._length<0)throw F._replotting=!1,new Error("Something went wrong with axis scaling")},D.maskBreaks=function(G){var ee,te,le,ue,de,he=D.rangebreaks||[];he._cachedPatterns||(he._cachedPatterns=he.map(function(Se){return Se.enabled&&Se.bounds?T.simpleMap(Se.bounds,Se.pattern?o:D.d2c):null})),he._cachedValues||(he._cachedValues=he.map(function(Se){return Se.enabled&&Se.values?T.simpleMap(Se.values,D.d2c).sort(T.sorterAsc):null}));for(var be=0;be<he.length;be++){var me=he[be];if(me.enabled)if(me.bounds){switch(te=(ee=he._cachedPatterns[be])[0],le=ee[1],me.pattern){case k:ue=(de=new Date(G)).getUTCDay(),te>le&&(le+=7,ue<te&&(ue+=7));break;case M:ue=(de=new Date(G)).getUTCHours()+(de.getUTCMinutes()/60+de.getUTCSeconds()/3600+de.getUTCMilliseconds()/36e5),te>le&&(le+=24,ue<te&&(ue+=24));break;case"":ue=G}if(ue>=te&&ue<le)return d}else for(var Ee=he._cachedValues[be],De=0;De<Ee.length;De++)if(le=(te=Ee[De])+me.dvalue,G>=te&&G<le)return d}return G},D.locateBreaks=function(G,ee){var te,le,ue,de,he=[];if(!D.rangebreaks)return he;var be=D.rangebreaks.slice().sort(function(Re,Ue){return Re.pattern===k&&Ue.pattern===M?-1:Ue.pattern===k&&Re.pattern===M?1:0}),me=function(Re,Ue){if((Re=T.constrain(Re,G,ee))!==(Ue=T.constrain(Ue,G,ee))){for(var qe=!0,Xe=0;Xe<he.length;Xe++){var st=he[Xe];Re<st.max&&Ue>=st.min&&(Re<st.min&&(st.min=Re),Ue>st.max&&(st.max=Ue),qe=!1)}qe&&he.push({min:Re,max:Ue})}};for(te=0;te<be.length;te++){var _e=be[te];if(_e.enabled)if(_e.bounds){var Ee=G,De=ee;_e.pattern&&(Ee=Math.floor(Ee)),ue=(le=T.simpleMap(_e.bounds,_e.pattern?o:D.r2l))[0],de=le[1];var Se,Fe,ve=new Date(Ee);switch(_e.pattern){case k:Fe=c,Se=(de-ue+(de<ue?7:0))*g,Ee+=ue*g-(ve.getUTCDay()*g+ve.getUTCHours()*m+ve.getUTCMinutes()*u+ve.getUTCSeconds()*w+ve.getUTCMilliseconds());break;case M:Fe=g,Se=(de-ue+(de<ue?24:0))*m,Ee+=ue*m-(ve.getUTCHours()*m+ve.getUTCMinutes()*u+ve.getUTCSeconds()*w+ve.getUTCMilliseconds());break;default:Ee=Math.min(le[0],le[1]),Se=Fe=(De=Math.max(le[0],le[1]))-Ee}for(var Te=Ee;Te<De;Te+=Fe)me(Te,Te+Se)}else for(var Ie=T.simpleMap(_e.values,D.d2c),Ce=0;Ce<Ie.length;Ce++)me(ue=Ie[Ce],de=ue+_e.dvalue)}return he.sort(function(Re,Ue){return Re.min-Ue.min}),he},D.makeCalcdata=function(G,ee,te){var le,ue,de,he,be=D.type,me="date"===be&&G[ee+"calendar"];if(ee in G){if(le=G[ee],he=G._length||T.minRowLength(le),T.isTypedArray(le)&&("linear"===be||"log"===be)){if(he===le.length)return le;if(le.subarray)return le.subarray(0,he)}if("multicategory"===be)return function(De,Se){for(var Fe=new Array(Se),ve=0;ve<Se;ve++)Fe[ve]=Q([(De[0]||[])[ve],(De[1]||[])[ve]]);return Fe}(le,he);for(ue=new Array(he),de=0;de<he;de++)ue[de]=D.d2c(le[de],0,me,te)}else{var _e=ee+"0"in G?D.d2c(G[ee+"0"],0,me):0,Ee=G["d"+ee]?Number(G["d"+ee]):1;for(le=G[{x:"y",y:"x"}[ee]],he=G._length||le.length,ue=new Array(he),de=0;de<he;de++)ue[de]=_e+de*Ee}if(D.rangebreaks)for(de=0;de<he;de++)ue[de]=D.maskBreaks(ue[de]);return ue},D.isValidRange=function(G){return Array.isArray(G)&&2===G.length&&e(D.r2l(G[0]))&&e(D.r2l(G[1]))},D.isPtWithinRange=function(G,ee){var te=D.c2l(G[L],null,ee),le=D.r2l(D.range[0]),ue=D.r2l(D.range[1]);return le<ue?le<=te&&te<=ue:ue<=te&&te<=le},D._emptyCategories=function(){D._categories=[],D._categoriesMap={}},D.clearCalc=function(){var G=D._matchGroup;if(G){var ee=null,te=null;for(var le in G){var ue=F[f.id2name(le)];if(ue._categories){ee=ue._categories,te=ue._categoriesMap;break}}ee&&te?(D._categories=ee,D._categoriesMap=te):D._emptyCategories()}else D._emptyCategories();if(D._initialCategories)for(var de=0;de<D._initialCategories.length;de++)Y(D._initialCategories[de])},D.sortByInitialCategories=function(){var G=[];if(D._emptyCategories(),D._initialCategories)for(var ee=0;ee<D._initialCategories.length;ee++)Y(D._initialCategories[ee]);G=G.concat(D._traceIndices);var te=D._matchGroup;for(var le in te)if(R!==le){var ue=F[f.id2name(le)];ue._categories=D._categories,ue._categoriesMap=D._categoriesMap,G=G.concat(ue._traceIndices)}return G};var ae=F._d3locale;"date"===D.type&&(D._dateFormat=ae?ae.timeFormat:x,D._extraFormat=F._extraFormat),D._separators=F.separators,D._numFormat=ae?ae.numberFormat:b,delete D._minDtick,delete D._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(_,oe,se){"use strict";oe.exports=function(v){var x=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return void 0!==v[T]});if(x.every(function(T){return v[T]===v[x[0]]})||1===x.length)return v[x[0]]}},{}],578:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color").contrast,T=_("./layout_attributes"),b=_("./show_dflt"),e=_("../array_container_defaults");function o(i,l){function r(y,h){return v.coerce(i,l,T.tickformatstops,y,h)}r("enabled")&&(r("dtickrange"),r("value"))}oe.exports=function(i,l,r,y,h){h||(h={});var s=b(i);if(r("showticklabels")){var d=h.font||{},p=l.color,c=-1!==(l.ticklabelposition||"").indexOf("inside")?x(h.bgColor):p&&p!==T.color.dflt?p:d.color;if(v.coerceFont(r,"tickfont",{family:d.family,size:d.size,color:c}),h.noTicklabelstep||"multicategory"===y||"log"===y||r("ticklabelstep"),h.noAng||r("tickangle"),"category"!==y){var g=r("tickformat");e(i,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),l.tickformatstops.length||delete l.tickformatstops,h.noExp||g||"date"===y||(r("showexponent",s),r("exponentformat"),r("minexponent"),r("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e,o){var i=v.coerce2(T,b,x,"ticklen"),l=v.coerce2(T,b,x,"tickwidth"),r=v.coerce2(T,b,x,"tickcolor",b.color);e("ticks",o.outerTicks||i||l||r?"outside":"")||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(_,oe,se){"use strict";var v=_("./clean_ticks"),x=_("../../lib").isArrayOrTypedArray;oe.exports=function(T,b,e,o){function i(d){var p=T[d];return void 0!==p?p:(b._template||{})[d]}var l=i("tick0"),r=i("dtick"),y=i("tickvals"),h=e("tickmode",x(y)?"array":r?"linear":"auto");if("auto"===h)e("nticks");else if("linear"===h){var s=b.dtick=v.dtick(r,o);b.tick0=v.tick0(l,o,b.calendar,s)}else"multicategory"!==o&&(void 0===e("tickvals")?b.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=_("../../components/drawing"),e=_("./axes");oe.exports=function(o,i,l,r){var y=o._fullLayout;if(0!==i.length){var h,s,d,p;r&&(h=r());var c=v.ease(l.easing);return o._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(p),p=null,function(){for(var u={},w=0;w<i.length;w++){var f=i[w],M=f.plotinfo.yaxis;f.xr0&&(u[f.plotinfo.xaxis._name+".range"]=f.xr0.slice()),f.yr0&&(u[M._name+".range"]=f.yr0.slice())}return x.call("relayout",o,u).then(function(){for(var k=0;k<i.length;k++)g(i[k].plotinfo)})}()}),s=Date.now(),p=window.requestAnimationFrame(function u(){d=Date.now();for(var w=Math.min(1,(d-s)/l.duration),f=c(w),A=0;A<i.length;A++)m(i[A],f);d-s>l.duration?(function(){for(var M={},k=0;k<i.length;k++){var E=i[k],D=E.plotinfo.yaxis;E.xr1&&(M[E.plotinfo.xaxis._name+".range"]=E.xr1.slice()),E.yr1&&(M[D._name+".range"]=E.yr1.slice())}h&&h(),x.call("relayout",o,M).then(function(){for(var F=0;F<i.length;F++)g(i[F].plotinfo)})}(),p=window.cancelAnimationFrame(u)):p=window.requestAnimationFrame(u)}),Promise.resolve()}function g(u){var w=u.xaxis,f=u.yaxis;y._defs.select("#"+u.clipId+"> rect").call(b.setTranslate,0,0).call(b.setScale,1,1),u.plot.call(b.setTranslate,w._offset,f._offset).call(b.setScale,1,1);var A=u.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(b.setPointGroupScale,1,1),A.selectAll(".textpoint").call(b.setTextPointsScale,1,1),A.call(b.hideOutsideRangePoints,u)}function m(u,w){var f=u.plotinfo,A=f.xaxis,M=f.yaxis,k=A._length,E=M._length,P=!!u.xr1,D=!!u.yr1,F=[];if(P){var R=T.simpleMap(u.xr0,A.r2l),L=T.simpleMap(u.xr1,A.r2l),I=R[1]-R[0],B=L[1]-L[0];F[0]=(R[0]*(1-w)+w*L[0]-R[0])/(R[1]-R[0])*k,F[2]=k*(1-w+w*B/I),A.range[0]=A.l2r(R[0]*(1-w)+w*L[0]),A.range[1]=A.l2r(R[1]*(1-w)+w*L[1])}else F[0]=0,F[2]=k;if(D){var V=T.simpleMap(u.yr0,M.r2l),Z=T.simpleMap(u.yr1,M.r2l),Y=V[1]-V[0],Q=Z[1]-Z[0];F[1]=(V[1]*(1-w)+w*Z[1]-V[1])/(V[0]-V[1])*E,F[3]=E*(1-w+w*Q/Y),M.range[0]=A.l2r(V[0]*(1-w)+w*Z[0]),M.range[1]=M.l2r(V[1]*(1-w)+w*Z[1])}else F[1]=0,F[3]=E;e.drawOne(o,A,{skipTitle:!0}),e.drawOne(o,M,{skipTitle:!0}),e.redrawComponents(o,[A._id,M._id]);var re=P?k/F[2]:1,$=D?E/F[3]:1,W=A._offset-(P?F[0]/F[2]*k:0),ae=M._offset-(D?F[1]/F[3]*E:0);f.clipRect.call(b.setTranslate,P?F[0]:0,D?F[1]:0).call(b.setScale,1/re,1/$),f.plot.call(b.setTranslate,W,ae).call(b.setScale,re,$),b.setPointGroupScale(f.zoomScalePts,1/re,1/$),b.setTextPointsScale(f.zoomScaleTxt,1/re,1/$)}e.redrawComponents(o)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(_,oe,se){"use strict";var v=_("../../registry").traceIs,x=_("./axis_autotype");function T(e){return{v:"x",h:"y"}[e.orientation||"v"]}function b(e,o){var i=T(e),l=v(e,"box-violin"),r=v(e._fullInput||{},"candlestick");return l&&!r&&o===i&&void 0===e[i]&&void 0===e[i+"0"]}oe.exports=function(e,o,i,l){i("autotypenumbers",l.autotypenumbersDflt),"-"===i("type",(l.splomStash||{}).type)&&(function(r,y){if("-"===r.type){var h,s=r._id,d=s.charAt(0);-1!==s.indexOf("scene")&&(s=d);var p=function(M,k,E){for(var P=0;P<M.length;P++){var D=M[P];if("splom"===D.type&&D._length>0&&(D["_"+E+"axes"]||{})[k]||(D[E+"axis"]||E)===k&&(b(D,E)||(D[E]||[]).length||D[E+"0"]))return D}}(y,s,d);if(p){if("histogram"===p.type&&d==={v:"y",h:"x"}[p.orientation||"v"])return void(r.type="linear");var c=d+"calendar",g=p[c],m={noMultiCategory:!v(p,"cartesian")||v(p,"noMultiCategory")};if("box"===p.type&&p._hasPreCompStats&&d==={h:"x",v:"y"}[p.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=r.autotypenumbers,b(p,d)){var u=T(p),w=[];for(h=0;h<y.length;h++){var f=y[h];v(f,"box-violin")&&(f[d+"axis"]||d)===s&&(w.push(void 0!==f[u]?f[u][0]:void 0!==f.name?f.name:"text"),f[c]!==g&&(g=void 0))}r.type=x(w,g,m)}else if("splom"===p.type){var A=p.dimensions[p._axesDim[s]];A.visible&&(r.type=x(A.values,g,m))}else r.type=x(p[d]||[p[d+"0"]],g,m)}}}(o,l.data),"-"===o.type?o.type="linear":e.type=o.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(_,oe,se){"use strict";var v=_("../registry"),x=_("../lib");function T(i,l,r){var y,h,s,d=!1;if("data"===l.type)y=i._fullData[null!==l.traces?l.traces[0]:0];else{if("layout"!==l.type)return!1;y=i._fullLayout}return h=x.nestedProperty(y,l.prop).get(),(s=r[l.type]=r[l.type]||{}).hasOwnProperty(l.prop)&&s[l.prop]!==h&&(d=!0),s[l.prop]=h,{changed:d,value:h}}function b(i,l){var r=[],y=l[0],h={};if("string"==typeof y)h[y]=l[1];else{if(!x.isPlainObject(y))return r;h=y}return o(h,function(s,d,p){r.push({type:"layout",prop:s,value:p})},"",0),r}function e(i,l){var r,y,h,s,d=[];if(h=l[1],r=l[2],s={},"string"==typeof(y=l[0]))s[y]=h;else{if(!x.isPlainObject(y))return d;s=y,void 0===r&&(r=h)}return void 0===r&&(r=null),o(s,function(p,c,g){var m,u;if(Array.isArray(g)){u=g.slice();var w=Math.min(u.length,i.data.length);r&&(w=Math.min(w,r.length)),m=[];for(var f=0;f<w;f++)m[f]=r?r[f]:f}else u=g,m=r?r.slice():null;if(null===m)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(m)){if(!Array.isArray(u)){var A=u;u=[];for(var M=0;M<m.length;M++)u[M]=A}u.length=Math.min(m.length,u.length)}d.push({type:"data",prop:p,traces:m,value:u})},"",0),d}function o(i,l,r,y){Object.keys(i).forEach(function(h){var s=i[h];if("_"!==h[0]){var d=r+(y>0?".":"")+h;x.isPlainObject(s)?o(s,l,d,y+1):l(d,h,s)}})}se.manageCommandObserver=function(i,l,r,y){var h={},s=!0;l&&l._commandObserver&&(h=l._commandObserver),h.cache||(h.cache={}),h.lookupTable={};var d=se.hasSimpleAPICommandBindings(i,r,h.lookupTable);if(l&&l._commandObserver){if(d)return h;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,h}if(d){T(i,d,h.cache),h.check=function(){if(s){var g=T(i,d,h.cache);return g.changed&&y&&void 0!==h.lookupTable[g.value]&&(h.disable(),Promise.resolve(y({value:g.value,type:d.type,prop:d.prop,traces:d.traces,index:h.lookupTable[g.value]})).then(h.enable,h.enable)),g.changed}};for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<p.length;c++)i._internalOn(p[c],h.check);h.remove=function(){for(var g=0;g<p.length;g++)i._removeInternalListener(p[g],h.check)}}else x.log("Unable to automatically bind plot updates to API command"),h.lookupTable={},h.remove=function(){};return h.disable=function(){s=!1},h.enable=function(){s=!0},l&&(l._commandObserver=h),h},se.hasSimpleAPICommandBindings=function(i,l,r){var y,h,s=l.length;for(y=0;y<s;y++){var d,p=l[y],c=p.method,g=p.args;if(Array.isArray(g)||(g=[]),!c)return!1;var m=se.computeAPICommandBindings(i,c,g);if(1!==m.length)return!1;if(h){if((d=m[0]).type!==h.type||d.prop!==h.prop)return!1;if(Array.isArray(h.traces)){if(!Array.isArray(d.traces))return!1;d.traces.sort();for(var u=0;u<h.traces.length;u++)if(h.traces[u]!==d.traces[u])return!1}else if(d.prop!==h.prop)return!1}else h=m[0],Array.isArray(h.traces)&&h.traces.sort();var w=(d=m[0]).value;if(Array.isArray(w)){if(1!==w.length)return!1;w=w[0]}r&&(r[w]=y)}return h},se.executeAPICommand=function(i,l,r){if("skip"===l)return Promise.resolve();var y=v.apiMethodRegistry[l],h=[i];Array.isArray(r)||(r=[]);for(var s=0;s<r.length;s++)h.push(r[s]);return y.apply(null,h).catch(function(d){return x.warn("API call to Plotly."+l+" rejected.",d),Promise.reject(d)})},se.computeAPICommandBindings=function(i,l,r){var y,s;switch(Array.isArray(r)||(r=[]),l){case"restyle":y=e(i,r);break;case"relayout":y=b(0,r);break;case"update":y=e(i,[r[0],r[2]]).concat(b(0,[r[1]]));break;case"animate":s=r,y=Array.isArray(s[0])&&1===s[0].length&&-1!==["string","number"].indexOf(typeof s[0][0])?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[];break;default:y=[]}return y}},{"../lib":503,"../registry":638}],584:[function(_,oe,se){"use strict";var v=_("../lib/extend").extendFlat;se.attributes=function(x,T){T=T||{};var b={valType:"info_array",editType:(x=x||{}).editType,items:[{valType:"number",min:0,max:1,editType:x.editType},{valType:"number",min:0,max:1,editType:x.editType}],dflt:[0,1]},e={x:v({},b,{}),y:v({},b,{}),editType:x.editType};return x.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:x.editType},e.column={valType:"integer",min:0,dflt:0,editType:x.editType}),e},se.defaults=function(x,T,b,e){var o=e&&e.x||[0,1],i=e&&e.y||[0,1],l=T.grid;if(l){var r=b("domain.column");void 0!==r&&(r<l.columns?o=l._domains.x[r]:delete x.domain.column);var y=b("domain.row");void 0!==y&&(y<l.rows?i=l._domains.y[y]:delete x.domain.row)}var h=b("domain.x",o),s=b("domain.y",i);h[0]<h[1]||(x.domain.x=o.slice()),s[0]<s[1]||(x.domain.y=i.slice())}},{"../lib/extend":493}],585:[function(_,oe,se){"use strict";oe.exports=function(v){var x=v.editType,T=v.colorEditType;void 0===T&&(T=x);var b={family:{valType:"string",noBlank:!0,strict:!0,editType:x},size:{valType:"number",min:1,editType:x},color:{valType:"color",editType:T},editType:x};return v.autoSize&&(b.size.dflt="auto"),v.autoColor&&(b.color.dflt="auto"),v.arrayOk&&(b.family.arrayOk=!0,b.size.arrayOk=!0,b.color.arrayOk=!0),b}},{}],586:[function(_,oe,se){"use strict";oe.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(_,oe,se){"use strict";se.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},se.axesNames=["lonaxis","lataxis"],se.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},se.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},se.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},se.clipPad=.001,se.precision=.1,se.landColor="#F0DC82",se.waterColor="#3399FF",se.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},se.sphereSVG={type:"Sphere"},se.fillLayers={ocean:1,land:1,lakes:1},se.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},se.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],se.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],se.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-geo"),T=x.geoPath,b=x.geoDistance,e=_("d3-geo-projection"),o=_("../../registry"),i=_("../../lib"),l=i.strTranslate,r=_("../../components/color"),y=_("../../components/drawing"),h=_("../../components/fx"),s=_("../plots"),d=_("../cartesian/axes"),p=_("../cartesian/autorange").getAutoRange,c=_("../../components/dragelement"),g=_("../cartesian/select").prepSelect,m=_("../cartesian/select").clearSelect,u=_("../cartesian/select").selectOnClick,w=_("./zoom"),f=_("./constants"),A=_("../../lib/geo_location_utils"),M=_("../../lib/topojson_utils"),k=_("topojson-client").feature;function E(F){this.id=F.id,this.graphDiv=F.graphDiv,this.container=F.container,this.topojsonURL=F.topojsonURL,this.isStatic=F.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var P=E.prototype;function D(F,R){var L=f.clipPad,I=F[0]+L,B=F[1]-L,V=R[0]+L,Z=R[1]-L;I>0&&B<0&&(B+=360);var Y=(B-I)/4;return{type:"Polygon",coordinates:[[[I,V],[I,Z],[I+Y,Z],[I+2*Y,Z],[I+3*Y,Z],[B,Z],[B,V],[B-Y,V],[B-2*Y,V],[B-3*Y,V],[I,V]]]}}oe.exports=function(F){return new E(F)},P.plot=function(F,R,L){var I=this,B=R[this.id],V=[],Z=!1;for(var Y in f.layerNameToAdjective)if("frame"!==Y&&B["show"+Y]){Z=!0;break}for(var Q=0;Q<F.length;Q++)if(F[0][0].trace.locationmode){Z=!0;break}if(Z){var re=M.getTopojsonName(B);null!==I.topojson&&re===I.topojsonName||(I.topojsonName=re,void 0===PlotlyGeoAssets.topojson[I.topojsonName]&&V.push(I.fetchTopojson()))}V=V.concat(A.fetchTraceGeoData(F)),L.push(new Promise(function($,J){Promise.all(V).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(F,R),$()}).catch(J)}))},P.fetchTopojson=function(){var F=this,R=M.getTopojsonPath(F.topojsonURL,F.topojsonName);return new Promise(function(L,I){v.json(R,function(B,V){if(B)return I(404===B.status?new Error(["plotly.js could not find topojson file at",R,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",R].join(" ")));PlotlyGeoAssets.topojson[F.topojsonName]=V,L()})})},P.update=function(F,R){var L=R[this.id];this.hasChoropleth=!1;for(var I=0;I<F.length;I++){var B=F[I],V=B[0].trace;"choropleth"===V.type&&(this.hasChoropleth=!0),!0===V.visible&&V._length>0&&V._module.calcGeoJSON(B,R)}if(!this.updateProjection(F,R)){this.viewInitial&&this.scope===L.scope||this.saveViewInitial(L),this.scope=L.scope,this.updateBaseLayers(R,L),this.updateDims(R,L),this.updateFx(R,L),s.generalUpdatePerTraceModule(this.graphDiv,this,F,L);var Z=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Z.selectAll(".point"),this.dataPoints.text=Z.selectAll("text"),this.dataPaths.line=Z.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this.render()}},P.updateProjection=function(F,R){var L=this.graphDiv,I=R[this.id],B=R._size,V=I.domain,Z=I.projection,Y=I.lonaxis,Q=I.lataxis,re=Y._ax,$=Q._ax,J=this.projection=function(ve){var Te=ve.projection,Ie=Te.type,Ce=f.projNames[Ie];Ce="geo"+i.titleCase(Ce);for(var Re=(x[Ce]||e[Ce])(),Ue=ve._isSatellite?180*Math.acos(1/Te.distance)/Math.PI:ve._isClipped?f.lonaxisSpan[Ie]/2:null,qe=["center","rotate","parallels","clipExtent"],Xe=function($e){return $e?Re:[]},st=0;st<qe.length;st++){var He=qe[st];"function"!=typeof Re[He]&&(Re[He]=Xe)}return Re.isLonLatOverEdges=function($e){if(null===Re($e))return!0;if(Ue){var et=Re.rotate();return b($e,[-et[0],-et[1]])>Ue*Math.PI/180}return!1},Re.getPath=function(){return T().projection(Re)},Re.getBounds=function($e){return Re.getPath().bounds($e)},Re.precision(f.precision),ve._isSatellite&&Re.tilt(Te.tilt).distance(Te.distance),Ue&&Re.clipAngle(Ue-f.clipPad),Re}(I),ie=[[B.l+B.w*V.x[0],B.t+B.h*(1-V.y[1])],[B.l+B.w*V.x[1],B.t+B.h*(1-V.y[0])]],j=I.center||{},q=Z.rotation||{},W=Y.range||[],ae=Q.range||[];if(I.fitbounds){re._length=ie[1][0]-ie[0][0],$._length=ie[1][1]-ie[0][1],re.range=p(L,re),$.range=p(L,$);var G=(re.range[0]+re.range[1])/2,ee=($.range[0]+$.range[1])/2;if(I._isScoped)j={lon:G,lat:ee};else if(I._isClipped){j={lon:G,lat:ee},q={lon:G,lat:ee,roll:q.roll};var te=Z.type,le=f.lonaxisSpan[te]/2||180,ue=f.lataxisSpan[te]/2||90;W=[G-le,G+le],ae=[ee-ue,ee+ue]}else j={lon:G,lat:ee},q={lon:G,lat:q.lat,roll:q.roll}}J.center([j.lon-q.lon,j.lat-q.lat]).rotate([-q.lon,-q.lat,q.roll]).parallels(Z.parallels);var de=D(W,ae);J.fitExtent(ie,de);var he=this.bounds=J.getBounds(de),be=this.fitScale=J.scale(),me=J.translate();if(I.fitbounds){var _e=J.getBounds(D(re.range,$.range)),Ee=Math.min((he[1][0]-he[0][0])/(_e[1][0]-_e[0][0]),(he[1][1]-he[0][1])/(_e[1][1]-_e[0][1]));isFinite(Ee)?J.scale(Ee*be):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else J.scale(Z.scale*be);var De=this.midPt=[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2];if(J.translate([me[0]+(De[0]-me[0]),me[1]+(De[1]-me[1])]).clipExtent(he),I._isAlbersUsa){var Se=J([j.lon,j.lat]),Fe=J.translate();J.translate([Fe[0]-(Se[0]-Fe[0]),Fe[1]-(Se[1]-Fe[1])])}},P.updateBaseLayers=function(F,R){var L=this,I=L.topojson,B=L.layers,V=L.basePaths;function Z(J){return"lonaxis"===J||"lataxis"===J}function Y(J){return Boolean(f.lineLayers[J])}function Q(J){return Boolean(f.fillLayers[J])}var re=(this.hasChoropleth?f.layersForChoropleth:f.layers).filter(function(J){return Y(J)||Q(J)?R["show"+J]:!Z(J)||R[J].showgrid}),$=L.framework.selectAll(".layer").data(re,String);$.exit().each(function(J){delete B[J],delete V[J],v.select(this).remove()}),$.enter().append("g").attr("class",function(J){return"layer "+J}).each(function(J){var ie=B[J]=v.select(this);"bg"===J?L.bgRect=ie.append("rect").style("pointer-events","all"):Z(J)?V[J]=ie.append("path").style("fill","none"):"backplot"===J?ie.append("g").classed("choroplethlayer",!0):"frontplot"===J?ie.append("g").classed("scatterlayer",!0):Y(J)?V[J]=ie.append("path").style("fill","none").style("stroke-miterlimit",2):Q(J)&&(V[J]=ie.append("path").style("stroke","none"))}),$.order(),$.each(function(J){var ie=V[J],j=f.layerNameToAdjective[J];"frame"===J?ie.datum(f.sphereSVG):Y(J)||Q(J)?ie.datum(k(I,I.objects[J])):Z(J)&&ie.datum(function(q,W,ae){var G,ee,te,le=W[q],ue=f.scopeDefaults[W.scope];"lonaxis"===q?(G=ue.lonaxisRange,ee=ue.lataxisRange,te=function(Fe,ve){return[Fe,ve]}):"lataxis"===q&&(G=ue.lataxisRange,ee=ue.lonaxisRange,te=function(Fe,ve){return[ve,Fe]});var de={type:"linear",range:[G[0],G[1]-1e-6],tick0:le.tick0,dtick:le.dtick};d.setConvert(de,ae);var he=d.calcTicks(de);W.isScoped||"lonaxis"!==q||he.pop();for(var be=he.length,me=new Array(be),_e=0;_e<be;_e++)for(var Ee=he[_e].x,De=me[_e]=[],Se=ee[0];Se<ee[1]+2.5;Se+=2.5)De.push(te(Ee,Se));return{type:"MultiLineString",coordinates:me}}(J,R,F)).call(r.stroke,R[J].gridcolor).call(y.dashLine,"",R[J].gridwidth),Y(J)?ie.call(r.stroke,R[j+"color"]).call(y.dashLine,"",R[j+"width"]):Q(J)&&ie.call(r.fill,R[j+"color"])})},P.updateDims=function(F,R){var L=this.bounds,I=(R.framewidth||0)/2,B=L[0][0]-I,V=L[0][1]-I,Z=L[1][0]-B+I,Y=L[1][1]-V+I;y.setRect(this.clipRect,B,V,Z,Y),this.bgRect.call(y.setRect,B,V,Z,Y).call(r.fill,R.bgcolor),this.xaxis._offset=B,this.xaxis._length=Z,this.yaxis._offset=V,this.yaxis._length=Y},P.updateFx=function(F,R){var L=this,I=L.graphDiv,B=L.bgRect,V=F.dragmode,Z=F.clickmode;if(!L.isStatic){var Y;"select"===V?Y=function($,J){($.range={})[L.id]=[re([J.xmin,J.ymin]),re([J.xmax,J.ymax])]}:"lasso"===V&&(Y=function($,J,ie){($.lassoPoints={})[L.id]=ie.filtered.map(re)});var Q={element:L.bgRect.node(),gd:I,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:Y},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function($){2===$&&m(I)}};"pan"===V?(B.node().onmousedown=null,B.call(w(L,R)),B.on("dblclick.zoom",function(){var $=L.viewInitial,J={};for(var ie in $)J[L.id+"."+ie]=$[ie];o.call("_guiRelayout",I,J),I.emit("plotly_doubleclick",null)}),I._context._scrollZoom.geo||B.on("wheel.zoom",null)):"select"!==V&&"lasso"!==V||(B.on(".zoom",null),Q.prepFn=function($,J,ie){g($,J,ie,Q,V)},c.init(Q)),B.on("mousemove",function(){var $=L.projection.invert(i.getPositionFromD3Event());if(!$)return c.unhover(I,v.event);L.xaxis.p2c=function(){return $[0]},L.yaxis.p2c=function(){return $[1]},h.hover(I,v.event,L.id)}),B.on("mouseout",function(){I._dragging||c.unhover(I,v.event)}),B.on("click",function(){"select"!==V&&"lasso"!==V&&(Z.indexOf("select")>-1&&u(v.event,I,[L.xaxis],[L.yaxis],L.id,Q),Z.indexOf("event")>-1&&h.click(I,v.event))})}function re($){return L.projection.invert([$[0]+L.xaxis._offset,$[1]+L.yaxis._offset])}},P.makeFramework=function(){var F=this,R=F.graphDiv,L=R._fullLayout,I="clip"+L._uid+F.id;F.clipDef=L._clips.append("clipPath").attr("id",I),F.clipRect=F.clipDef.append("rect"),F.framework=v.select(F.container).append("g").attr("class","geo "+F.id).call(y.setClipUrl,I,R),F.project=function(B){var V=F.projection(B);return V?[V[0]-F.xaxis._offset,V[1]-F.yaxis._offset]:[null,null]},F.xaxis={_id:"x",c2p:function(B){return F.project(B)[0]}},F.yaxis={_id:"y",c2p:function(B){return F.project(B)[1]}},F.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},d.setConvert(F.mockAxis,L)},P.saveViewInitial=function(F){var L=F.center||{},I=F.projection,B=I.rotation||{};this.viewInitial={fitbounds:F.fitbounds,"projection.scale":I.scale},i.extendFlat(this.viewInitial,F._isScoped?{"center.lon":L.lon,"center.lat":L.lat}:F._isClipped?{"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:{"center.lon":L.lon,"center.lat":L.lat,"projection.rotation.lon":B.lon})},P.render=function(){var F,R=this.projection,L=R.getPath();function I(V){var Z=R(V.lonlat);return Z?l(Z[0],Z[1]):null}function B(V){return R.isLonLatOverEdges(V.lonlat)?"none":null}for(F in this.basePaths)this.basePaths[F].attr("d",L);for(F in this.dataPaths)this.dataPaths[F].attr("d",function(V){return L(V.geojson)});for(F in this.dataPoints)this.dataPoints[F].attr("display",B).attr("transform",I)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(_,oe,se){"use strict";var v=_("../../plots/get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("./geo"),b="geo",e=x(b),o={};o.geo={valType:"subplotid",dflt:b,editType:"calc"},oe.exports={attr:b,name:b,idRoot:b,idRegex:e,attrRegex:e,attributes:o,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(i){for(var l=i._fullLayout,r=i.calcdata,y=l._subplots.geo,h=0;h<y.length;h++){var s=y[h],d=v(r,b,s),p=l[s]._subplot;p||(p=T({id:s,graphDiv:i,container:l._geolayer.node(),topojsonURL:i._context.topojsonURL,staticPlot:i._context.staticPlot}),l[s]._subplot=p),p.plot(d,l,i._promises)}},updateFx:function(i){for(var l=i._fullLayout,r=l._subplots.geo,y=0;y<r.length;y++){var h=l[r[y]];h._subplot.updateFx(l,h)}},clean:function(i,l,r,y){for(var h=y._subplots.geo||[],s=0;s<h.length;s++){var d=h[s],p=y[d]._subplot;!l[d]&&p&&(p.framework.remove(),p.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(_,oe,se){"use strict";var v=_("../../components/color/attributes"),x=_("../domain").attributes,T=_("./constants"),b=_("../../plot_api/edit_types").overrideAll,e=_("../../lib/sort_object_keys"),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:v.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(oe.exports=b({domain:x({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:v.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:v.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:v.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:v.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:v.background},lonaxis:o,lataxis:o},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../subplot_defaults"),T=_("../get_data").getSubplotData,b=_("./constants"),e=_("./layout_attributes"),o=b.axesNames;function i(l,r,y,h){var s=T(h.fullData,"geo",h.id).map(function(q){return q._expandedIndex}),d=y("resolution"),p=y("scope"),c=b.scopeDefaults[p],g=y("projection.type",c.projType),m=r._isAlbersUsa="albers usa"===g;m&&(p=r.scope="usa");var u=r._isScoped="world"!==p,w=r._isSatellite="satellite"===g,f=r._isConic=-1!==g.indexOf("conic")||"albers"===g,A=r._isClipped=!!b.lonaxisSpan[g];if(!1===l.visible){var M=v.extendDeep({},r._template);M.showcoastlines=!1,M.showcountries=!1,M.showframe=!1,M.showlakes=!1,M.showland=!1,M.showocean=!1,M.showrivers=!1,M.showsubunits=!1,M.lonaxis&&(M.lonaxis.showgrid=!1),M.lataxis&&(M.lataxis.showgrid=!1),r._template=M}for(var k=y("visible"),E=0;E<o.length;E++){var P,D=o[E],F=[30,10][E];if(u)P=c[D+"Range"];else{var R=b[D+"Span"],L=(R[g]||R["*"])/2,I=y("projection.rotation."+D.substr(0,3),c.projRotate[E]);P=[I-L,I+L]}var B=y(D+".range",P);y(D+".tick0"),y(D+".dtick",F),y(D+".showgrid",!!k&&void 0)&&(y(D+".gridcolor"),y(D+".gridwidth")),r[D]._ax={type:"linear",_id:D.slice(0,3),_traceIndices:s,setScale:v.identity,c2l:v.identity,r2l:v.identity,autorange:!0,range:B.slice(),_m:1,_input:{}}}var V=r.lonaxis.range,Z=r.lataxis.range,Y=V[0],Q=V[1];Y>0&&Q<0&&(Q+=360);var re,$,J,ie=(Y+Q)/2;if(!m){var j=u?c.projRotate:[ie,0,0];re=y("projection.rotation.lon",j[0]),y("projection.rotation.lat",j[1]),y("projection.rotation.roll",j[2]),y("showcoastlines",!u&&k)&&(y("coastlinecolor"),y("coastlinewidth")),y("showocean",!!k&&void 0)&&y("oceancolor")}m?($=-96.6,J=38.7):($=u?ie:re,J=(Z[0]+Z[1])/2),y("center.lon",$),y("center.lat",J),w&&(y("projection.tilt"),y("projection.distance")),f&&y("projection.parallels",c.projParallels||[0,60]),y("projection.scale"),y("showland",!!k&&void 0)&&y("landcolor"),y("showlakes",!!k&&void 0)&&y("lakecolor"),y("showrivers",!!k&&void 0)&&(y("rivercolor"),y("riverwidth")),y("showcountries",u&&"usa"!==p&&k)&&(y("countrycolor"),y("countrywidth")),("usa"===p||"north america"===p&&50===d)&&(y("showsubunits",k),y("subunitcolor"),y("subunitwidth")),u||y("showframe",k)&&(y("framecolor"),y("framewidth")),y("bgcolor"),y("fitbounds")&&(delete r.projection.scale,u?(delete r.center.lon,delete r.center.lat):A?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}oe.exports=function(l,r,y){x(l,r,y,{type:"geo",attributes:e,handleDefaults:i,fullData:y,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../registry"),b=Math.PI/180,e=180/Math.PI,o={cursor:"pointer"},i={cursor:"auto"};function l(k,E){return v.behavior.zoom().translate(E.translate()).scale(E.scale())}function r(k,E,P){var D=k.id,F=k.graphDiv,R=F.layout,L=R[D],I=F._fullLayout,B=I[D],V={},Z={};function Y(Q,re){V[D+"."+Q]=x.nestedProperty(L,Q).get(),T.call("_storeDirectGUIEdit",R,I._preGUI,V);var $=x.nestedProperty(B,Q);$.get()!==re&&($.set(re),x.nestedProperty(L,Q).set(re),Z[D+"."+Q]=re)}P(Y),Y("projection.scale",E.scale()/k.fitScale),Y("fitbounds",!1),F.emit("plotly_relayout",Z)}function y(k,E){var P=l(0,E);function D(F){var R=E.invert(k.midPt);F("center.lon",R[0]),F("center.lat",R[1])}return P.on("zoomstart",function(){v.select(this).style(o)}).on("zoom",function(){E.scale(v.event.scale).translate(v.event.translate),k.render();var F=E.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1]})}).on("zoomend",function(){v.select(this).style(i),r(k,E,D)}),P}function h(k,E){var P,D,F,R,L,I,B,V,Z,Y=l(0,E);function Q($){return E.invert($)}function re($){var J=E.rotate(),ie=E.invert(k.midPt);$("projection.rotation.lon",-J[0]),$("center.lon",ie[0]),$("center.lat",ie[1])}return Y.on("zoomstart",function(){v.select(this).style(o),P=v.mouse(this),D=E.rotate(),F=E.translate(),R=D,L=Q(P)}).on("zoom",function(){if(I=v.mouse(this),function(ie){var j=Q(ie);if(!j)return!0;var q=E(j);return Math.abs(q[0]-ie[0])>2||Math.abs(q[1]-ie[1])>2}(P))return Y.scale(E.scale()),void Y.translate(E.translate());E.scale(v.event.scale),E.translate([F[0],v.event.translate[1]]),L?Q(I)&&(V=Q(I),E.rotate(B=[R[0]+(V[0]-L[0]),D[1],D[2]]),R=B):L=Q(P=I),Z=!0,k.render();var $=E.rotate(),J=E.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.center.lon":J[0],"geo.center.lat":J[1],"geo.projection.rotation.lon":-$[0]})}).on("zoomend",function(){v.select(this).style(i),Z&&r(k,E,re)}),Y}function s(k,E){var P,D={r:E.rotate(),k:E.scale()},F=l(0,E),R=function(Q){for(var re=0,$=arguments.length,J=[];++re<$;)J.push(arguments[re]);var ie=v.dispatch.apply(null,J);return ie.of=function(j,q){return function(W){var ae;try{ae=W.sourceEvent=v.event,W.target=Q,v.event=W,ie[W.type].apply(j,q)}finally{v.event=ae}}},ie}(F,"zoomstart","zoom","zoomend"),L=0,I=F.on;function B(Q){L++||Q({type:"zoomstart"})}function V(Q){Q({type:"zoom"})}function Z(Q){--L||Q({type:"zoomend"})}function Y(Q){var re=E.rotate();Q("projection.rotation.lon",-re[0]),Q("projection.rotation.lat",-re[1])}return F.on("zoomstart",function(){v.select(this).style(o);var Q=v.mouse(this),re=E.rotate(),$=re,J=E.translate(),ie=p(re);P=d(E,Q),I.call(F,"zoom",function(){var j=v.mouse(this);if(E.scale(D.k=v.event.scale),P){if(d(E,j)){E.rotate(re).translate(J);var q=d(E,j),W=g(P,q),ae=A(c(ie,W)),G=D.r=m(ae,P,$);isFinite(G[0])&&isFinite(G[1])&&isFinite(G[2])||(G=$),E.rotate(G),$=G}}else P=d(E,Q=j);V(R.of(this,arguments))}),B(R.of(this,arguments))}).on("zoomend",function(){v.select(this).style(i),I.call(F,"zoom",null),Z(R.of(this,arguments)),r(k,E,Y)}).on("zoom.redraw",function(){k.render();var Q=E.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.projection.rotation.lon":-Q[0],"geo.projection.rotation.lat":-Q[1]})}),v.rebind(F,R,"on")}function d(k,E){var D,F,R,L,P=k.invert(E);return P&&isFinite(P[0])&&isFinite(P[1])&&(F=(D=P)[0]*b,R=D[1]*b,[(L=Math.cos(R))*Math.cos(F),L*Math.sin(F),Math.sin(R)])}function p(k){var E=.5*k[0]*b,P=.5*k[1]*b,D=.5*k[2]*b,F=Math.sin(E),R=Math.cos(E),L=Math.sin(P),I=Math.cos(P),B=Math.sin(D),V=Math.cos(D);return[R*I*V+F*L*B,F*I*V-R*L*B,R*L*V+F*I*B,R*I*B-F*L*V]}function c(k,E){var P=k[0],D=k[1],F=k[2],R=k[3],L=E[0],I=E[1],B=E[2],V=E[3];return[P*L-D*I-F*B-R*V,P*I+D*L+F*V-R*B,P*B-D*V+F*L+R*I,P*V+D*B-F*I+R*L]}function g(k,E){if(k&&E){var P=[(L=k)[1]*(I=E)[2]-L[2]*I[1],L[2]*I[0]-L[0]*I[2],L[0]*I[1]-L[1]*I[0]],D=Math.sqrt(M(P,P)),F=.5*Math.acos(Math.max(-1,Math.min(1,M(k,E)))),R=Math.sin(F)/D;return D&&[Math.cos(F),P[2]*R,-P[1]*R,P[0]*R]}var L,I}function m(k,E,P){var D=f(E,2,k[0]);D=f(D,1,k[1]),D=f(D,0,k[2]-P[2]);var F,R,L=E[0],I=E[1],B=E[2],V=D[0],Z=D[1],Y=D[2],Q=Math.atan2(I,L)*e,re=Math.sqrt(L*L+I*I);Math.abs(Z)>re?(R=(Z>0?90:-90)-Q,F=0):(R=Math.asin(Z/re)*e-Q,F=Math.sqrt(re*re-Z*Z));var $=180-R-2*Q,J=(Math.atan2(Y,V)-Math.atan2(B,F))*e,ie=(Math.atan2(Y,V)-Math.atan2(B,-F))*e;return u(P[0],P[1],R,J)<=u(P[0],P[1],$,ie)?[R,J,P[2]]:[$,ie,P[2]]}function u(k,E,P,D){var F=w(P-k),R=w(D-E);return Math.sqrt(F*F+R*R)}function w(k){return(k%360+540)%360-180}function f(k,E,P){var D=P*b,F=k.slice(),R=0===E?1:0,L=2===E?1:2,I=Math.cos(D),B=Math.sin(D);return F[R]=k[R]*I-k[L]*B,F[L]=k[L]*I+k[R]*B,F}function A(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*e,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*e]}function M(k,E){for(var P=0,D=0,F=k.length;D<F;++D)P+=k[D]*E[D];return P}oe.exports=function(k,E){return(E._isScoped?y:E._isClipped?s:h)(k,k.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(_,oe,se){"use strict";var v=_("../registry"),x=_("./cartesian/constants").SUBPLOT_PATTERN;se.getSubplotCalcData=function(T,b,e){var o=v.subplotsRegistry[b];if(!o)return[];for(var i=o.attr,l=[],r=0;r<T.length;r++){var y=T[r];y[0].trace[i]===e&&l.push(y)}return l},se.getModuleCalcData=function(T,b){var e,o=[],i=[];if(!(e="string"==typeof b?v.getModule(b).plot:"function"==typeof b?b:b.plot))return[o,T];for(var l=0;l<T.length;l++){var r=T[l],y=r[0].trace;!0===y.visible&&0!==y._length&&(y._module.plot===e?o.push(r):i.push(r))}return[o,i]},se.getSubplotData=function(T,b,e){if(!v.subplotsRegistry[b])return[];var o,i,l,r=v.subplotsRegistry[b].attr,y=[];if("gl2d"===b){var h=e.match(x);i="x"+h[1],l="y"+h[2]}for(var s=0;s<T.length;s++)o=T[s],"gl2d"===b&&v.traceIs(o,"gl2d")?o[r[0]]===i&&o[r[1]]===l&&y.push(o):o[r]===e&&y.push(o);return y}},{"../registry":638,"./cartesian/constants":561}],594:[function(_,oe,se){"use strict";var v=_("mouse-change"),x=_("mouse-wheel"),T=_("mouse-event-offset"),b=_("../cartesian/constants"),e=_("has-passive-events");function o(i,l){this.element=i,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}oe.exports=function(i){var l=i.mouseContainer,r=i.glplot,y=new o(l,r);function h(){i.xaxis.autorange=!1,i.yaxis.autorange=!1}function s(d,p,c){var g,m,u=i.calcDataBox(),w=r.viewBox,f=y.lastPos[0],A=y.lastPos[1],M=b.MINDRAG*r.pixelRatio,k=b.MINZOOM*r.pixelRatio;function E(I,B,V){var Z=Math.min(B,V),Y=Math.max(B,V);Z!==Y?(u[I]=Z,u[I+2]=Y,y.dataBox=u,i.setRanges(u)):(i.selectBox.selectBox=[0,0,1,1],i.glplot.setDirty())}switch(p*=r.pixelRatio,c=w[3]-w[1]-(c*=r.pixelRatio),i.fullLayout.dragmode){case"zoom":if(d){var P=p/(w[2]-w[0])*(u[2]-u[0])+u[0],D=c/(w[3]-w[1])*(u[3]-u[1])+u[1];y.boxInited||(y.boxStart[0]=P,y.boxStart[1]=D,y.dragStart[0]=p,y.dragStart[1]=c),y.boxEnd[0]=P,y.boxEnd[1]=D,y.boxInited=!0,y.boxEnabled||y.boxStart[0]===y.boxEnd[0]&&y.boxStart[1]===y.boxEnd[1]||(y.boxEnabled=!0);var F=Math.abs(y.dragStart[0]-p)<k,R=Math.abs(y.dragStart[1]-c)<k;if(!function(){for(var I=i.graphDiv._fullLayout._axisConstraintGroups,B=i.xaxis._id,V=i.yaxis._id,Z=0;Z<I.length;Z++)if(-1!==I[Z][B]){if(-1!==I[Z][V])return!0;break}return!1}()||F&&R)F&&(y.boxEnd[0]=y.boxStart[0]),R&&(y.boxEnd[1]=y.boxStart[1]);else{g=y.boxEnd[0]-y.boxStart[0],m=y.boxEnd[1]-y.boxStart[1];var L=(u[3]-u[1])/(u[2]-u[0]);Math.abs(g*L)>Math.abs(m)?(y.boxEnd[1]=y.boxStart[1]+Math.abs(g)*L*(m>=0?1:-1),y.boxEnd[1]<u[1]?(y.boxEnd[1]=u[1],y.boxEnd[0]=y.boxStart[0]+(u[1]-y.boxStart[1])/Math.abs(L)):y.boxEnd[1]>u[3]&&(y.boxEnd[1]=u[3],y.boxEnd[0]=y.boxStart[0]+(u[3]-y.boxStart[1])/Math.abs(L))):(y.boxEnd[0]=y.boxStart[0]+Math.abs(m)/L*(g>=0?1:-1),y.boxEnd[0]<u[0]?(y.boxEnd[0]=u[0],y.boxEnd[1]=y.boxStart[1]+(u[0]-y.boxStart[0])*Math.abs(L)):y.boxEnd[0]>u[2]&&(y.boxEnd[0]=u[2],y.boxEnd[1]=y.boxStart[1]+(u[2]-y.boxStart[0])*Math.abs(L)))}}else y.boxEnabled?(m=y.boxStart[1]!==y.boxEnd[1],(g=y.boxStart[0]!==y.boxEnd[0])||m?(g&&(E(0,y.boxStart[0],y.boxEnd[0]),i.xaxis.autorange=!1),m&&(E(1,y.boxStart[1],y.boxEnd[1]),i.yaxis.autorange=!1),i.relayoutCallback()):i.glplot.setDirty(),y.boxEnabled=!1,y.boxInited=!1):y.boxInited&&(y.boxInited=!1);break;case"pan":y.boxEnabled=!1,y.boxInited=!1,d?(y.panning||(y.dragStart[0]=p,y.dragStart[1]=c),Math.abs(y.dragStart[0]-p)<M&&(p=y.dragStart[0]),Math.abs(y.dragStart[1]-c)<M&&(c=y.dragStart[1]),m=(A-c)*(u[3]-u[1])/(r.viewBox[3]-r.viewBox[1]),u[0]+=g=(f-p)*(u[2]-u[0])/(r.viewBox[2]-r.viewBox[0]),u[2]+=g,u[1]+=m,u[3]+=m,i.setRanges(u),y.panning=!0,y.lastInputTime=Date.now(),h(),i.cameraChanged(),i.handleAnnotations()):y.panning&&(y.panning=!1,i.relayoutCallback())}y.lastPos[0]=p,y.lastPos[1]=c}return y.mouseListener=v(l,s),l.addEventListener("touchstart",function(d){var p=T(d.changedTouches[0],l);s(0,p[0],p[1]),s(1,p[0],p[1]),d.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchmove",function(d){d.preventDefault();var p=T(d.changedTouches[0],l);s(1,p[0],p[1]),d.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchend",function(d){s(0,y.lastPos[0],y.lastPos[1]),d.preventDefault()},!!e&&{passive:!1}),y.wheelListener=x(l,function(d,p){if(!i.scrollZoom)return!1;var c=i.calcDataBox(),g=r.viewBox,m=y.lastPos[0],u=y.lastPos[1],w=Math.exp(5*p/(g[3]-g[1])),f=m/(g[2]-g[0])*(c[2]-c[0])+c[0],A=u/(g[3]-g[1])*(c[3]-c[1])+c[1];return c[0]=(c[0]-f)*w+f,c[2]=(c[2]-f)*w+f,c[1]=(c[1]-A)*w+A,c[3]=(c[3]-A)*w+A,i.setRanges(c),y.lastInputTime=Date.now(),h(),i.cameraChanged(),i.handleAnnotations(),i.relayoutCallback(),!0},!0),y}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(_,oe,se){"use strict";var v=_("../cartesian/axes"),x=_("../../lib/str2rgbarray");function T(o){this.scene=o,this.gl=o.gl,this.pixelRatio=o.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var b=T.prototype,e=["xaxis","yaxis"];b.merge=function(o){var i,l,r,y,h,s,d,p,c,g,m;for(this.titleEnable=!1,this.backgroundColor=x(o.plot_bgcolor),g=0;g<2;++g){var u=(i=e[g]).charAt(0);for(r=(l=o[this.scene[i]._name]).title.text===this.scene.fullLayout._dfltTitle[u]?"":l.title.text,m=0;m<=2;m+=2)this.labelEnable[g+m]=!1,this.labels[g+m]=r,this.labelColor[g+m]=x(l.title.font.color),this.labelFont[g+m]=l.title.font.family,this.labelSize[g+m]=l.title.font.size,this.labelPad[g+m]=this.getLabelPad(i,l),this.tickEnable[g+m]=!1,this.tickColor[g+m]=x((l.tickfont||{}).color),this.tickAngle[g+m]="auto"===l.tickangle?0:Math.PI*-l.tickangle/180,this.tickPad[g+m]=this.getTickPad(l),this.tickMarkLength[g+m]=0,this.tickMarkWidth[g+m]=l.tickwidth||0,this.tickMarkColor[g+m]=x(l.tickcolor),this.borderLineEnable[g+m]=!1,this.borderLineColor[g+m]=x(l.linecolor),this.borderLineWidth[g+m]=l.linewidth||0;d=this.hasSharedAxis(l),h=this.hasAxisInDfltPos(i,l)&&!d,s=this.hasAxisInAltrPos(i,l)&&!d,y=l.mirror||!1,p=d?-1!==String(y).indexOf("all"):!!y,c=d?"allticks"===y:-1!==String(y).indexOf("ticks"),h?this.labelEnable[g]=!0:s&&(this.labelEnable[g+2]=!0),h?this.tickEnable[g]=l.showticklabels:s&&(this.tickEnable[g+2]=l.showticklabels),(h||p)&&(this.borderLineEnable[g]=l.showline),(s||p)&&(this.borderLineEnable[g+2]=l.showline),(h||c)&&(this.tickMarkLength[g]=this.getTickMarkLength(l)),(s||c)&&(this.tickMarkLength[g+2]=this.getTickMarkLength(l)),this.gridLineEnable[g]=l.showgrid,this.gridLineColor[g]=x(l.gridcolor),this.gridLineWidth[g]=l.gridwidth,this.zeroLineEnable[g]=l.zeroline,this.zeroLineColor[g]=x(l.zerolinecolor),this.zeroLineWidth[g]=l.zerolinewidth}},b.hasSharedAxis=function(o){var i=this.scene;return 0!==v.findSubplotsWithAxis(i.fullLayout._subplots.gl2d,o).indexOf(i.id)},b.hasAxisInDfltPos=function(o,i){var l=i.side;return"xaxis"===o?"bottom"===l:"yaxis"===o?"left"===l:void 0},b.hasAxisInAltrPos=function(o,i){var l=i.side;return"xaxis"===o?"top"===l:"yaxis"===o?"right"===l:void 0},b.getLabelPad=function(o,i){var l=i.title.font.size,r=i.showticklabels;return"xaxis"===o?"top"===i.side?l*(1.5+(r?1:0))-10:l*(1.5+(r?.5:0))-10:"yaxis"===o?"right"===i.side?10+l*(1.5+(r?1:.5)):10+l*(1.5+(r?.5:0)):void 0},b.getTickPad=function(o){return"outside"===o.ticks?10+o.ticklen:15},b.getTickMarkLength=function(o){if(!o.ticks)return 0;var i=o.ticklen;return"inside"===o.ticks?-i:i},oe.exports=function(o){return new T(o)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(_,oe,se){"use strict";var v=_("../../plot_api/edit_types").overrideAll,x=_("./scene2d"),T=_("../layout_attributes"),b=_("../../constants/xmlns_namespaces"),e=_("../cartesian/constants"),o=_("../cartesian"),i=_("../../components/fx/layout_attributes"),l=_("../get_data").getSubplotData;se.name="gl2d",se.attr=["xaxis","yaxis"],se.idRoot=["x","y"],se.idRegex=e.idRegex,se.attrRegex=e.attrRegex,se.attributes=_("../cartesian/attributes"),se.supplyLayoutDefaults=function(r,y,h){y._has("cartesian")||o.supplyLayoutDefaults(r,y,h)},se.layoutAttrOverrides=v(o.layoutAttributes,"plot","from-root"),se.baseLayoutAttrOverrides=v({plot_bgcolor:T.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),se.plot=function(r){for(var y=r._fullLayout,h=r._fullData,s=y._subplots.gl2d,d=0;d<s.length;d++){var p=s[d],c=y._plots[p],g=l(h,"gl2d",p),m=c._scene2d;void 0===m&&(m=new x({id:p,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},y),c._scene2d=m),m.plot(g,r.calcdata,y,r.layout)}},se.clean=function(r,y,h,s){for(var d=s._subplots.gl2d||[],p=0;p<d.length;p++){var c=d[p],g=s._plots[c];g._scene2d&&0===l(r,"gl2d",c).length&&(g._scene2d.destroy(),delete s._plots[c])}o.clean.apply(this,arguments)},se.drawFramework=function(r){r._context.staticPlot||o.drawFramework(r)},se.toSVG=function(r){for(var y=r._fullLayout,h=y._subplots.gl2d,s=0;s<h.length;s++){var d=y._plots[h[s]]._scene2d,p=d.toImage("png");y._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":p,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},se.updateFx=function(r){for(var y=r._fullLayout,h=y._subplots.gl2d,s=0;s<h.length;s++)y._plots[h[s]]._scene2d.updateFx(y.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(_,oe,se){"use strict";var v,x,T=_("../../registry"),b=_("../../plots/cartesian/axes"),e=_("../../components/fx"),o=_("../../../stackgl_modules").gl_plot2d,i=_("../../../stackgl_modules").gl_spikes2d,l=_("../../../stackgl_modules").gl_select_box,r=_("webgl-context"),y=_("./convert"),h=_("./camera"),s=_("../../lib/show_no_webgl_msg"),d=_("../cartesian/constraints"),p=d.enforce,c=d.clean,g=_("../cartesian/autorange").doAutoRange,m=_("../../components/dragelement/helpers"),u=m.drawMode,w=m.selectMode,f=["xaxis","yaxis"],A=_("../cartesian/constants").SUBPLOT_PATTERN;function M(E,P){this.container=E.container,this.graphDiv=E.graphDiv,this.pixelRatio=E.plotGlPixelRatio||window.devicePixelRatio,this.id=E.id,this.staticPlot=!!E.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(P),this.makeFramework(),this.stopped||(this.glplotOptions=y(this),this.glplotOptions.merge(P),this.glplot=o(this.glplotOptions),this.camera=h(this),this.traces={},this.spikes=i(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}oe.exports=M;var k=M.prototype;k.makeFramework=function(){if(this.staticPlot){if(!(x||(v=document.createElement("canvas"),x=r({canvas:v,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=v,this.gl=x}else{var E=this.container.querySelector(".gl-canvas-focus"),P=r({canvas:E,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!P)return s(this),void(this.stopped=!0);this.canvas=E,this.gl=P}var D=this.canvas;D.style.width="100%",D.style.height="100%",D.style.position="absolute",D.style.top="0px",D.style.left="0px",D.style["pointer-events"]="none",this.updateSize(D);var F=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none";var R=this.mouseContainer=document.createElement("div");R.style.position="absolute",R.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var L=this.container;L.appendChild(F),L.appendChild(R);var I=this;R.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),R.addEventListener("mouseover",function(){I.isMouseOver=!0})},k.toImage=function(E){E||(E="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(v),this.updateSize(this.canvas);var P=this.glplot.gl,D=P.drawingBufferWidth,F=P.drawingBufferHeight;P.clearColor(1,1,1,0),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(D*F*4);P.readPixels(0,0,D,F,P.RGBA,P.UNSIGNED_BYTE,R);for(var L=0,I=F-1;L<I;++L,--I)for(var B=0;B<D;++B)for(var V=0;V<4;++V){var Z=R[4*(D*L+B)+V];R[4*(D*L+B)+V]=R[4*(D*I+B)+V],R[4*(D*I+B)+V]=Z}var Y=document.createElement("canvas");Y.width=D,Y.height=F;var Q,re=Y.getContext("2d"),$=re.createImageData(D,F);switch($.data.set(R),re.putImageData($,0,0),E){case"jpeg":Q=Y.toDataURL("image/jpeg");break;case"webp":Q=Y.toDataURL("image/webp");break;default:Q=Y.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(v),Q},k.updateSize=function(E){E||(E=this.canvas);var P=this.pixelRatio,D=this.fullLayout,R=D.height,L=0|Math.ceil(P*D.width),I=0|Math.ceil(P*R);return E.width===L&&E.height===I||(E.width=L,E.height=I),E},k.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var E=[b.calcTicks(this.xaxis),b.calcTicks(this.yaxis)],P=0;P<2;++P)for(var D=0;D<E[P].length;++D)E[P][D].text=E[P][D].text+"";return E},k.updateRefs=function(E){this.fullLayout=E;var P=this.id.match(A),F="yaxis"+P[2];this.xaxis=this.fullLayout["xaxis"+P[1]],this.yaxis=this.fullLayout[F]},k.relayoutCallback=function(){var E=this.graphDiv,P=this.xaxis,D=this.yaxis,F=E.layout,R={},L=R[P._name+".range"]=P.range.slice(),I=R[D._name+".range"]=D.range.slice();R[P._name+".autorange"]=P.autorange,R[D._name+".autorange"]=D.autorange,T.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,R);var B=F[P._name];B.range=L,B.autorange=P.autorange;var V=F[D._name];V.range=I,V.autorange=D.autorange,R.lastInputTime=this.camera.lastInputTime,E.emit("plotly_relayout",R)},k.cameraChanged=function(){var E=this.camera;this.glplot.setDataBox(this.calcDataBox());var P=this.computeTickMarks();(function(D,F){for(var R=0;R<2;++R){var L=D[R],I=F[R];if(L.length!==I.length)return!0;for(var B=0;B<L.length;++B)if(L[B].x!==I[B].x)return!0}return!1})(P,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=P,this.glplotOptions.dataBox=E.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},k.handleAnnotations=function(){for(var E=this.graphDiv,P=this.fullLayout.annotations,D=0;D<P.length;D++){var F=P[D];F.xref===this.xaxis._id&&F.yref===this.yaxis._id&&T.getComponentMethod("annotations","drawOne")(E,D)}},k.destroy=function(){if(this.glplot){var E=this.traces;E&&Object.keys(E).map(function(P){E[P].dispose(),delete E[P]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},k.plot=function(E,P,D){var F=this.glplot;this.updateRefs(D),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(E,P),this.updateFx(D.dragmode);var R=D.width,L=D.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(D),I.screenBox=[0,0,R,L];var B={_fullLayout:{_axisConstraintGroups:D._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:D._size}};c(B,this.xaxis),c(B,this.yaxis);var V,Z,Y=D._size,Q=this.xaxis.domain,re=this.yaxis.domain;for(I.viewBox=[Y.l+Q[0]*Y.w,Y.b+re[0]*Y.h,R-Y.r-(1-Q[1])*Y.w,L-Y.t-(1-re[1])*Y.h],this.mouseContainer.style.width=Y.w*(Q[1]-Q[0])+"px",this.mouseContainer.style.height=Y.h*(re[1]-re[0])+"px",this.mouseContainer.height=Y.h*(re[1]-re[0]),this.mouseContainer.style.left=Y.l+Q[0]*Y.w+"px",this.mouseContainer.style.top=Y.t+(1-re[1])*Y.h+"px",Z=0;Z<2;++Z)(V=this[f[Z]])._length=I.viewBox[Z+2]-I.viewBox[Z],g(this.graphDiv,V),V.setScale();p(B),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(D),F.update(I),this.glplot.draw()},k.calcDataBox=function(){var E=this.xaxis,P=this.yaxis,D=E.range,F=P.range,R=E.r2l,L=P.r2l;return[R(D[0]),L(F[0]),R(D[1]),L(F[1])]},k.setRanges=function(E){var P=this.xaxis,D=this.yaxis,F=P.l2r,R=D.l2r;P.range=[F(E[0]),F(E[2])],D.range=[R(E[1]),R(E[3])]},k.updateTraces=function(E,P){var D,F,R,L=Object.keys(this.traces);this.fullData=E;e:for(D=0;D<L.length;D++){var I=L[D],B=this.traces[I];for(F=0;F<E.length;F++)if((R=E[F]).uid===I&&R.type===B.type)continue e;B.dispose(),delete this.traces[I]}for(D=0;D<E.length;D++){var V=P[D],Z=this.traces[(R=E[D]).uid];Z?Z.update(R,V):(Z=R._module.plot(this,R,V),this.traces[R.uid]=Z)}this.glplot.objects.sort(function(Y,Q){return Y._trace.index-Q._trace.index})},k.updateFx=function(E){w(E)||u(E)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===E?"move":"zoom"===E?"crosshair":null},k.emitPointAction=function(E,P){for(var D,F=E.trace.uid,R=E.pointIndex,L=0;L<this.fullData.length;L++)this.fullData[L].uid===F&&(D=this.fullData[L]);var I={x:E.traceCoord[0],y:E.traceCoord[1],curveNumber:D.index,pointNumber:R,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(I,D,R),this.graphDiv.emit(P,{points:[I]})},k.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var E=this.glplot,P=this.camera,D=P.mouseListener,F=1===this.lastButtonState&&0===D.buttons,R=this.fullLayout;this.lastButtonState=D.buttons,this.cameraChanged();var L,I=D.x*E.pixelRatio,B=this.canvas.height-E.pixelRatio*D.y;if(P.boxEnabled&&"zoom"===R.dragmode){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(P.boxStart[0],P.boxEnd[0]),Math.min(P.boxStart[1],P.boxEnd[1]),Math.max(P.boxStart[0],P.boxEnd[0]),Math.max(P.boxStart[1],P.boxEnd[1])],Z=0;Z<2;Z++)P.boxStart[Z]===P.boxEnd[Z]&&(V[Z]=E.dataBox[Z],V[Z+2]=E.dataBox[Z+2]);E.setDirty()}else if(!P.panning&&this.isMouseOver){this.selectBox.enabled=!1;var Y=R._size,$=(L=E.pick(I/E.pixelRatio+Y.l+this.xaxis.domain[0]*Y.w,B/E.pixelRatio-(Y.t+(1-this.yaxis.domain[1])*Y.h)))&&L.object._trace.handlePick(L);if($&&F&&this.emitPointAction($,"plotly_click"),L&&"skip"!==L.object._trace.hoverinfo&&R.hovermode&&$&&(!this.lastPickResult||this.lastPickResult.traceUid!==$.trace.uid||this.lastPickResult.dataCoord[0]!==$.dataCoord[0]||this.lastPickResult.dataCoord[1]!==$.dataCoord[1])){var J=$;this.lastPickResult={traceUid:$.trace?$.trace.uid:null,dataCoord:$.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),J.screenCoord=[((E.viewBox[2]-E.viewBox[0])*(L.dataCoord[0]-E.dataBox[0])/(E.dataBox[2]-E.dataBox[0])+E.viewBox[0])/E.pixelRatio,(this.canvas.height-(E.viewBox[3]-E.viewBox[1])*(L.dataCoord[1]-E.dataBox[1])/(E.dataBox[3]-E.dataBox[1])-E.viewBox[1])/E.pixelRatio],this.emitPointAction($,"plotly_hover");var ie=this.fullData[J.trace.index]||{},j=J.pointIndex,q=e.castHoverinfo(ie,R,j);if(q&&"all"!==q){var W=q.split("+");-1===W.indexOf("x")&&(J.traceCoord[0]=void 0),-1===W.indexOf("y")&&(J.traceCoord[1]=void 0),-1===W.indexOf("z")&&(J.traceCoord[2]=void 0),-1===W.indexOf("text")&&(J.textLabel=void 0),-1===W.indexOf("name")&&(J.name=void 0)}e.loneHover({x:J.screenCoord[0],y:J.screenCoord[1],xLabel:this.hoverFormatter("xaxis",J.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",J.traceCoord[1]),zLabel:J.traceCoord[2],text:J.textLabel,name:J.name,color:e.castHoverOption(ie,j,"bgcolor")||J.color,borderColor:e.castHoverOption(ie,j,"bordercolor"),fontFamily:e.castHoverOption(ie,j,"font.family"),fontSize:e.castHoverOption(ie,j,"font.size"),fontColor:e.castHoverOption(ie,j,"font.color"),nameLength:e.castHoverOption(ie,j,"namelength"),textAlign:e.castHoverOption(ie,j,"align")},{container:this.svgContainer,gd:this.graphDiv})}}L||this.unhover(),E.draw()}},k.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},k.hoverFormatter=function(E,P){if(void 0!==P){var D=this[E];return b.tickText(D,D.c2l(P),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(_,oe,se){"use strict";var v=_("../../plot_api/edit_types").overrideAll,x=_("../../components/fx/layout_attributes"),T=_("./scene"),b=_("../get_data").getSubplotData,e=_("../../lib"),o=_("../../constants/xmlns_namespaces");se.name="gl3d",se.attr="scene",se.idRoot="scene",se.idRegex=se.attrRegex=e.counterRegex("scene"),se.attributes=_("./layout/attributes"),se.layoutAttributes=_("./layout/layout_attributes"),se.baseLayoutAttrOverrides=v({hoverlabel:x.hoverlabel},"plot","nested"),se.supplyLayoutDefaults=_("./layout/defaults"),se.plot=function(i){for(var l=i._fullLayout,r=i._fullData,y=l._subplots.gl3d,h=0;h<y.length;h++){var s=y[h],d=b(r,"gl3d",s),p=l[s],c=p.camera,g=p._scene;g||(g=new T({id:s,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:c},l),p._scene=g),g.viewInitial||(g.viewInitial={up:{x:c.up.x,y:c.up.y,z:c.up.z},eye:{x:c.eye.x,y:c.eye.y,z:c.eye.z},center:{x:c.center.x,y:c.center.y,z:c.center.z}}),g.plot(d,l,i.layout)}},se.clean=function(i,l,r,y){for(var h=y._subplots.gl3d||[],s=0;s<h.length;s++){var d=h[s];!l[d]&&y[d]._scene&&(y[d]._scene.destroy(),y._infolayer&&y._infolayer.selectAll(".annotation-"+d).remove())}},se.toSVG=function(i){for(var l=i._fullLayout,r=l._subplots.gl3d,y=l._size,h=0;h<r.length;h++){var s=l[r[h]],d=s.domain,p=s._scene,c=p.toImage("png");l._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":c,x:y.l+y.w*d.x[0],y:y.t+y.h*(1-d.y[1]),width:y.w*(d.x[1]-d.x[0]),height:y.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),p.destroy()}},se.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var l=i.substr(5);return"1"===l&&(l=""),"scene"+l}},se.updateFx=function(i){for(var l=i._fullLayout,r=l._subplots.gl3d,y=0;y<r.length;y++)l[r[y]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(_,oe,se){"use strict";oe.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(_,oe,se){"use strict";var v=_("../../../components/color"),x=_("../../cartesian/layout_attributes"),T=_("../../../lib/extend").extendFlat,b=_("../../../plot_api/edit_types").overrideAll;oe.exports=b({visible:x.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:v.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:x.color,categoryorder:x.categoryorder,categoryarray:x.categoryarray,title:{text:x.title.text,font:x.title.font},type:T({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:x.autorange,rangemode:x.rangemode,range:T({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,mirror:x.mirror,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,showticklabels:x.showticklabels,tickfont:x.tickfont,tickangle:x.tickangle,tickprefix:x.tickprefix,showtickprefix:x.showtickprefix,ticksuffix:x.ticksuffix,showticksuffix:x.showticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickformat:x.tickformat,tickformatstops:x.tickformatstops,hoverformat:x.hoverformat,showline:x.showline,linecolor:x.linecolor,linewidth:x.linewidth,showgrid:x.showgrid,gridcolor:T({},x.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:x.gridwidth,zeroline:x.zeroline,zerolinecolor:x.zerolinecolor,zerolinewidth:x.zerolinewidth,_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(_,oe,se){"use strict";var v=_("tinycolor2").mix,x=_("../../../lib"),T=_("../../../plot_api/plot_template"),b=_("./axis_attributes"),e=_("../../cartesian/type_defaults"),o=_("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"];oe.exports=function(l,r,y){var h,s;function d(g,m){return x.coerce(h,s,b,g,m)}for(var p=0;p<i.length;p++){var c=i[p];h=l[c]||{},(s=T.newContainer(r,c))._id=c[0]+y.scene,s._name=c,e(h,s,d,y),o(h,s,d,{font:y.font,letter:c[0],data:y.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:y.bgColor,calendar:y.calendar},y.fullLayout),d("gridcolor",v(s.color,y.bgColor,13600/187).toRgbString()),d("title.text",c[0]),s.setScale=x.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",s.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(_,oe,se){"use strict";var v=_("../../../lib/str2rgbarray"),x=_("../../../lib"),T=["xaxis","yaxis","zaxis"];function b(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}b.prototype.merge=function(e,o){for(var i=0;i<3;++i){var l=o[T[i]];l.visible?(this.labels[i]=e._meta?x.templateString(l.title.text,e._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[i]=v(l.title.font.color)),l.title.font.family&&(this.labelFont[i]=l.title.font.family),l.title.font.size&&(this.labelSize[i]=l.title.font.size)),"showline"in l&&(this.lineEnable[i]=l.showline),"linecolor"in l&&(this.lineColor[i]=v(l.linecolor)),"linewidth"in l&&(this.lineWidth[i]=l.linewidth),"showgrid"in l&&(this.gridEnable[i]=l.showgrid),"gridcolor"in l&&(this.gridColor[i]=v(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[i]=l.gridwidth),"log"===l.type?this.zeroEnable[i]=!1:"zeroline"in l&&(this.zeroEnable[i]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[i]=v(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[i]=l.zerolinewidth),this.lineTickEnable[i]=!(!("ticks"in l)||!l.ticks),"ticklen"in l&&(this.lineTickLength[i]=this._defaultLineTickLength[i]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[i]=v(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[i]=l.tickwidth),"tickangle"in l&&(this.tickAngle[i]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[i]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[i]=v(l.tickfont.color)),l.tickfont.family&&(this.tickFont[i]=l.tickfont.family),l.tickfont.size&&(this.tickSize[i]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[i]=!0,this.lineMirror[i]=!0):!0===l.mirror?(this.lineTickMirror[i]=!1,this.lineMirror[i]=!0):(this.lineTickMirror[i]=!1,this.lineMirror[i]=!1):this.lineMirror[i]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[i]=!0,this.backgroundColor[i]=v(l.backgroundcolor)):this.backgroundEnable[i]=!1):(this.tickEnable[i]=!1,this.labelEnable[i]=!1,this.lineEnable[i]=!1,this.lineTickEnable[i]=!1,this.gridEnable[i]=!1,this.zeroEnable[i]=!1,this.backgroundEnable[i]=!1)}},oe.exports=function(e,o){var i=new b;return i.merge(e,o),i}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(_,oe,se){"use strict";var v=_("../../../lib"),x=_("../../../components/color"),T=_("../../../registry"),b=_("../../subplot_defaults"),e=_("./axis_defaults"),o=_("./layout_attributes"),i=_("../../get_data").getSubplotData;function l(r,y,h,s){for(var d=h("bgcolor"),p=x.combine(d,s.paper_bgcolor),c=["up","center","eye"],g=0;g<c.length;g++)h("camera."+c[g]+".x"),h("camera."+c[g]+".y"),h("camera."+c[g]+".z");h("camera.projection.type");var m=!!h("aspectratio.x")&&!!h("aspectratio.y")&&!!h("aspectratio.z"),u=h("aspectmode",m?"manual":"auto");m||(r.aspectratio=y.aspectratio={x:1,y:1,z:1},"manual"===u&&(y.aspectmode="auto"),r.aspectmode=y.aspectmode);var w=i(s.fullData,"gl3d",s.id);e(r,y,{font:s.font,scene:s.id,data:w,bgColor:p,calendar:s.calendar,autotypenumbersDflt:s.autotypenumbersDflt,fullLayout:s.fullLayout}),T.getComponentMethod("annotations3d","handleDefaults")(r,y,s);var f=s.getDfltFromLayout("dragmode");if(!1!==f&&!f)if(f="orbit",r.camera&&r.camera.up){var A=r.camera.up.x,M=r.camera.up.y,k=r.camera.up.z;0!==k&&(A&&M&&k?k/Math.sqrt(A*A+M*M+k*k)>.999&&(f="turntable"):f="turntable")}else f="turntable";h("dragmode",f),h("hovermode",s.getDfltFromLayout("hovermode"))}oe.exports=function(r,y,h){var s=y._basePlotModules.length>1;b(r,y,h,{type:"gl3d",attributes:o,handleDefaults:l,fullLayout:y,font:y.font,fullData:h,getDfltFromLayout:function(d){if(!s)return v.validate(r[d],o[d])?r[d]:void 0},autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,calendar:y.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(_,oe,se){"use strict";var v=_("./axis_attributes"),x=_("../../domain").attributes,T=_("../../../lib/extend").extendFlat,b=_("../../../lib").counterRegex;function e(o,i,l){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}oe.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:T(e(0,0,1),{}),center:T(e(0,0,0),{}),eye:T(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:x({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:v,yaxis:v,zaxis:v,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(_,oe,se){"use strict";var v=_("../../../lib/str2rgbarray"),x=["xaxis","yaxis","zaxis"];function T(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}T.prototype.merge=function(b){for(var e=0;e<3;++e){var o=b[x[e]];o.visible?(this.enabled[e]=o.showspikes,this.colors[e]=v(o.spikecolor),this.drawSides[e]=o.spikesides,this.lineWidth[e]=o.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},oe.exports=function(b){var e=new T;return e.merge(b),e}},{"../../../lib/str2rgbarray":528}],606:[function(_,oe,se){"use strict";oe.exports=function(e){for(var o=e.axesOptions,i=e.glplot.axesPixels,l=e.fullSceneLayout,r=[[],[],[]],y=0;y<3;++y){var h=l[T[y]];if(h._length=(i[y].hi-i[y].lo)*i[y].pixelsPerDataUnit/e.dataScale[y],Math.abs(h._length)===1/0||isNaN(h._length))r[y]=[];else{h._input_range=h.range.slice(),h.range[0]=i[y].lo/e.dataScale[y],h.range[1]=i[y].hi/e.dataScale[y],h._m=1/(e.dataScale[y]*i[y].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var s=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var d=h.nticks||x.constrain(h._length/40,4,9);v.autoTicks(h,Math.abs(h.range[1]-h.range[0])/d)}for(var p=v.calcTicks(h,{msUTC:!0}),c=0;c<p.length;++c)p[c].x=p[c].x*e.dataScale[y],"date"===h.type&&(p[c].text=p[c].text.replace(/\<br\>/g," "));r[y]=p,h.tickmode=s}}for(o.ticks=r,y=0;y<3;++y)for(b[y]=.5*(e.glplot.bounds[0][y]+e.glplot.bounds[1][y]),c=0;c<2;++c)o.bounds[c][y]=e.glplot.bounds[c][y];e.contourLevels=function(g){for(var m=new Array(3),u=0;u<3;++u){for(var w=g[u],f=new Array(w.length),A=0;A<w.length;++A)f[A]=w[A].x;m[u]=f}return m}(r)};var v=_("../../cartesian/axes"),x=_("../../../lib"),T=["xaxis","yaxis","zaxis"],b=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(_,oe,se){"use strict";function v(x,T){var b,e,o=[0,0,0,0];for(b=0;b<4;++b)for(e=0;e<4;++e)o[e]+=x[4*b+e]*T[b];return o}oe.exports=function(x,T){return v(x.projection,v(x.view,v(x.model,[T[0],T[1],T[2],1])))}},{}],608:[function(_,oe,se){"use strict";var v,x,T=_("../../../stackgl_modules").gl_plot3d,b=T.createCamera,e=T.createScene,o=_("webgl-context"),i=_("has-passive-events"),l=_("../../registry"),r=_("../../lib"),y=r.preserveDrawingBuffer(),h=_("../../plots/cartesian/axes"),s=_("../../components/fx"),d=_("../../lib/str2rgbarray"),p=_("../../lib/show_no_webgl_msg"),c=_("./project"),g=_("./layout/convert"),m=_("./layout/spikes"),u=_("./layout/tick_marks");function w(E,P){var D=document.createElement("div"),F=E.container;this.graphDiv=E.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",D.appendChild(R),this.svgContainer=R,D.id=E.id,D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",F.appendChild(D),this.fullLayout=P,this.id=E.id||"scene",this.fullSceneLayout=P[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(P,P[this.id]),this.spikeOptions=m(P[this.id]),this.container=D,this.staticMode=!!E.staticPlot,this.pixelRatio=this.pixelRatio||E.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var f=w.prototype;f.prepareOptions=function(){var E={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:y,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(x||(v=document.createElement("canvas"),x=o({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=x,E.canvas=v}return E};var A=!0;f.tryCreatePlot=function(){var E=this.prepareOptions(),P=!0;try{this.glplot=e(E)}catch(D){if(this.staticMode||!A||y)P=!1;else{r.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{y=E.glOptions.preserveDrawingBuffer=!0,this.glplot=e(E)}catch(F){y=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return A=!1,P},f.initializeGLCamera=function(){var E=this.fullSceneLayout.camera;this.camera=b(this.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:"orthographic"===E.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},f.initializeGLPlot=function(){var E=this;if(E.initializeGLCamera(),!E.tryCreatePlot())return p(E);E.traces={},E.make4thDimension();var P=E.graphDiv,D=P.layout,F=function(){var L={};return E.isCameraChanged(D)&&(L[E.id+".camera"]=E.getCamera()),E.isAspectChanged(D)&&(L[E.id+".aspectratio"]=E.glplot.getAspectratio(),"manual"!==D[E.id].aspectmode&&(E.fullSceneLayout.aspectmode=D[E.id].aspectmode=L[E.id+".aspectmode"]="manual")),L},R=function(L){if(!1!==L.fullSceneLayout.dragmode){var I=F();L.saveLayout(D),L.graphDiv.emit("plotly_relayout",I)}};return E.glplot.canvas&&(E.glplot.canvas.addEventListener("mouseup",function(){R(E)}),E.glplot.canvas.addEventListener("wheel",function(L){if(P._context._scrollZoom.gl3d){if(E.camera._ortho){var I=L.deltaX>L.deltaY?1.1:.9090909090909091,B=E.glplot.getAspectratio();E.glplot.setAspectratio({x:I*B.x,y:I*B.y,z:I*B.z})}R(E)}},!!i&&{passive:!1}),E.glplot.canvas.addEventListener("mousemove",function(){if(!1!==E.fullSceneLayout.dragmode&&0!==E.camera.mouseListener.buttons){var L=F();E.graphDiv.emit("plotly_relayouting",L)}}),E.staticMode||E.glplot.canvas.addEventListener("webglcontextlost",function(L){P&&P.emit&&P.emit("plotly_webglcontextlost",{event:L,layer:E.id})},!1)),E.glplot.oncontextloss=function(){E.recoverContext()},E.glplot.onrender=function(){E.render()},!0},f.render=function(){var E,P=this,D=P.graphDiv,F=P.svgContainer,R=P.container.getBoundingClientRect();D._fullLayout._calcInverseTransform(D);var B=R.width*D._fullLayout._invScaleX,V=R.height*D._fullLayout._invScaleY;F.setAttributeNS(null,"viewBox","0 0 "+B+" "+V),F.setAttributeNS(null,"width",B),F.setAttributeNS(null,"height",V),u(P),P.glplot.axes.update(P.axesOptions);for(var Z=Object.keys(P.traces),Y=null,Q=P.glplot.selection,re=0;re<Z.length;++re)"skip"!==(E=P.traces[Z[re]]).data.hoverinfo&&E.handlePick(Q)&&(Y=E),E.setContourLevels&&E.setContourLevels();function $(he,be,me){var _e=P.fullSceneLayout[he+"axis"];return"log"!==_e.type&&(be=_e.d2l(be)),h.hoverLabelText(_e,be,me)}if(null!==Y){var ie,J=c(P.glplot.cameraParams,Q.dataCoordinate),j=D._fullData[(E=Y.data).index],q=Q.index,W={xLabel:$("x",Q.traceCoordinate[0],E.xhoverformat),yLabel:$("y",Q.traceCoordinate[1],E.yhoverformat),zLabel:$("z",Q.traceCoordinate[2],E.zhoverformat)},ae=s.castHoverinfo(j,P.fullLayout,q),G=(ae||"").split("+"),ee=ae&&"all"===ae;j.hovertemplate||ee||(-1===G.indexOf("x")&&(W.xLabel=void 0),-1===G.indexOf("y")&&(W.yLabel=void 0),-1===G.indexOf("z")&&(W.zLabel=void 0),-1===G.indexOf("text")&&(Q.textLabel=void 0),-1===G.indexOf("name")&&(Y.name=void 0));var te=[];"cone"===E.type||"streamtube"===E.type?(W.uLabel=$("x",Q.traceCoordinate[3],E.uhoverformat),(ee||-1!==G.indexOf("u"))&&te.push("u: "+W.uLabel),W.vLabel=$("y",Q.traceCoordinate[4],E.vhoverformat),(ee||-1!==G.indexOf("v"))&&te.push("v: "+W.vLabel),W.wLabel=$("z",Q.traceCoordinate[5],E.whoverformat),(ee||-1!==G.indexOf("w"))&&te.push("w: "+W.wLabel),W.normLabel=Q.traceCoordinate[6].toPrecision(3),(ee||-1!==G.indexOf("norm"))&&te.push("norm: "+W.normLabel),"streamtube"===E.type&&(W.divergenceLabel=Q.traceCoordinate[7].toPrecision(3),(ee||-1!==G.indexOf("divergence"))&&te.push("divergence: "+W.divergenceLabel)),Q.textLabel&&te.push(Q.textLabel),ie=te.join("<br>")):"isosurface"===E.type||"volume"===E.type?(W.valueLabel=h.hoverLabelText(P._mockAxis,P._mockAxis.d2l(Q.traceCoordinate[3]),E.valuehoverformat),te.push("value: "+W.valueLabel),Q.textLabel&&te.push(Q.textLabel),ie=te.join("<br>")):ie=Q.textLabel;var le={x:Q.traceCoordinate[0],y:Q.traceCoordinate[1],z:Q.traceCoordinate[2],data:j._input,fullData:j,curveNumber:j.index,pointNumber:q};s.appendArrayPointValue(le,j,q),E._module.eventData&&(le=j._module.eventData(le,Q,j,{},q));var ue={points:[le]};if(P.fullSceneLayout.hovermode){var de=[];s.loneHover({trace:j,x:(.5+.5*J[0]/J[3])*B,y:(.5-.5*J[1]/J[3])*V,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:ie,name:Y.name,color:s.castHoverOption(j,q,"bgcolor")||Y.color,borderColor:s.castHoverOption(j,q,"bordercolor"),fontFamily:s.castHoverOption(j,q,"font.family"),fontSize:s.castHoverOption(j,q,"font.size"),fontColor:s.castHoverOption(j,q,"font.color"),nameLength:s.castHoverOption(j,q,"namelength"),textAlign:s.castHoverOption(j,q,"align"),hovertemplate:r.castOption(j,q,"hovertemplate"),hovertemplateLabels:r.extendFlat({},le,W),eventData:[le]},{container:F,gd:D,inOut_bbox:de}),le.bbox=de[0]}D.emit(Q.buttons&&Q.distance<5?"plotly_click":"plotly_hover",ue),this.oldEventData=ue}else s.loneUnhover(F),this.oldEventData&&D.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},f.recoverContext=function(){var E=this;E.glplot.dispose();var P=function(){E.glplot.gl.isContextLost()?requestAnimationFrame(P):E.initializeGLPlot()?E.plot.apply(E,E.plotArgs):r.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(P)};var M=["xaxis","yaxis","zaxis"];function k(E,P,D){for(var F=E.fullSceneLayout,R=0;R<3;R++){var L=M[R],I=L.charAt(0),B=F[L],V=P[I],Z=P[I+"calendar"],Y=P["_"+I+"length"];if(r.isArrayOrTypedArray(V))for(var Q,re=0;re<(Y||V.length);re++)if(r.isArrayOrTypedArray(V[re]))for(var $=0;$<V[re].length;++$)Q=B.d2l(V[re][$],0,Z),!isNaN(Q)&&isFinite(Q)&&(D[0][R]=Math.min(D[0][R],Q),D[1][R]=Math.max(D[1][R],Q));else Q=B.d2l(V[re],0,Z),!isNaN(Q)&&isFinite(Q)&&(D[0][R]=Math.min(D[0][R],Q),D[1][R]=Math.max(D[1][R],Q));else D[0][R]=Math.min(D[0][R],0),D[1][R]=Math.max(D[1][R],Y-1)}}f.plot=function(E,P,D){if(this.plotArgs=[E,P,D],!this.glplot.contextLost){var F,R,L,I,B,V,Z=P[this.id],Y=D[this.id];this.fullLayout=P,this.fullSceneLayout=Z,this.axesOptions.merge(P,Z),this.spikeOptions.merge(Z),this.setViewport(Z),this.updateFx(Z.dragmode,Z.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(d(Z.bgcolor)),this.setConvert(B),E?Array.isArray(E)||(E=[E]):E=[];var Q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(L=0;L<E.length;++L)!0===(F=E[L]).visible&&0!==F._length&&k(this,F,Q);!function(Ie,Ce){for(var Re=Ie.fullSceneLayout,Ue=Re.annotations||[],qe=0;qe<3;qe++)for(var Xe=M[qe],st=Xe.charAt(0),He=Re[Xe],$e=0;$e<Ue.length;$e++){var et=Ue[$e];if(et.visible){var tt=He.r2l(et[st]);!isNaN(tt)&&isFinite(tt)&&(Ce[0][qe]=Math.min(Ce[0][qe],tt),Ce[1][qe]=Math.max(Ce[1][qe],tt))}}}(this,Q);var re=[1,1,1];for(I=0;I<3;++I)re[I]=Q[1][I]===Q[0][I]?1:1/(Q[1][I]-Q[0][I]);for(this.dataScale=re,this.convertAnnotations(this),L=0;L<E.length;++L)!0===(F=E[L]).visible&&0!==F._length&&((R=this.traces[F.uid])?R.data.type===F.type?R.update(F):(R.dispose(),R=F._module.plot(this,F),this.traces[F.uid]=R):(R=F._module.plot(this,F),this.traces[F.uid]=R),R.name=F.name);var $=Object.keys(this.traces);e:for(L=0;L<$.length;++L){for(I=0;I<E.length;++I)if(E[I].uid===$[L]&&!0===E[I].visible&&0!==E[I]._length)continue e;(R=this.traces[$[L]]).dispose(),delete this.traces[$[L]]}this.glplot.objects.sort(function(Ie,Ce){return Ie._trace.data.index-Ce._trace.data.index});var J,ie=[[0,0,0],[0,0,0]],j=[],q={};for(L=0;L<3;++L){if((V=(B=Z[M[L]]).type)in q?(q[V].acc*=re[L],q[V].count+=1):q[V]={acc:re[L],count:1},B.autorange){ie[0][L]=1/0,ie[1][L]=-1/0;var W=this.glplot.objects,ae=this.fullSceneLayout.annotations||[],G=B._name.charAt(0);for(I=0;I<W.length;I++){var ee=W[I],te=ee.bounds,le=ee._trace.data._pad||0;ie[0][L]="ErrorBars"===ee.constructor.name&&B._lowerLogErrorBound?Math.min(ie[0][L],B._lowerLogErrorBound):Math.min(ie[0][L],te[0][L]/re[L]-le),ie[1][L]=Math.max(ie[1][L],te[1][L]/re[L]+le)}for(I=0;I<ae.length;I++){var ue=ae[I];if(ue.visible){var de=B.r2l(ue[G]);ie[0][L]=Math.min(ie[0][L],de),ie[1][L]=Math.max(ie[1][L],de)}}if("rangemode"in B&&"tozero"===B.rangemode&&(ie[0][L]=Math.min(ie[0][L],0),ie[1][L]=Math.max(ie[1][L],0)),ie[0][L]>ie[1][L])ie[0][L]=-1,ie[1][L]=1;else{var he=ie[1][L]-ie[0][L];ie[0][L]-=he/32,ie[1][L]+=he/32}if("reversed"===B.autorange){var be=ie[0][L];ie[0][L]=ie[1][L],ie[1][L]=be}}else{var me=B.range;ie[0][L]=B.r2l(me[0]),ie[1][L]=B.r2l(me[1])}ie[0][L]===ie[1][L]&&(ie[0][L]-=1,ie[1][L]+=1),j[L]=ie[1][L]-ie[0][L],this.glplot.setBounds(L,{min:ie[0][L]*re[L],max:ie[1][L]*re[L]})}var _e=Z.aspectmode;if("cube"===_e)J=[1,1,1];else if("manual"===_e){var Ee=Z.aspectratio;J=[Ee.x,Ee.y,Ee.z]}else{if("auto"!==_e&&"data"!==_e)throw new Error("scene.js aspectRatio was not one of the enumerated types");var De=[1,1,1];for(L=0;L<3;++L){var Se=q[V=(B=Z[M[L]]).type];De[L]=Math.pow(Se.acc,1/Se.count)/re[L]}J="data"===_e||Math.max.apply(null,De)/Math.min.apply(null,De)<=4?De:[1,1,1]}Z.aspectratio.x=Y.aspectratio.x=J[0],Z.aspectratio.y=Y.aspectratio.y=J[1],Z.aspectratio.z=Y.aspectratio.z=J[2],this.glplot.setAspectratio(Z.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=Z.aspectmode);var Fe=Z.domain||null,ve=P._size||null;if(Fe&&ve){var Te=this.container.style;Te.position="absolute",Te.left=ve.l+Fe.x[0]*ve.w+"px",Te.top=ve.t+(1-Fe.y[1])*ve.h+"px",Te.width=ve.w*(Fe.x[1]-Fe.x[0])+"px",Te.height=ve.h*(Fe.y[1]-Fe.y[0])+"px"}this.glplot.redraw()}},f.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},f.getCamera=function(){var E;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(E=this.camera).up[0],y:E.up[1],z:E.up[2]},center:{x:E.center[0],y:E.center[1],z:E.center[2]},eye:{x:E.eye[0],y:E.eye[1],z:E.eye[2]},projection:{type:!0===E._ortho?"orthographic":"perspective"}}},f.setViewport=function(E){var P,D=E.camera;this.camera.lookAt.apply(this,[[(P=D).eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]),this.glplot.setAspectratio(E.aspectratio),"orthographic"===D.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},f.isCameraChanged=function(E){var P=this.getCamera(),D=r.nestedProperty(E,this.id+".camera").get();var B,V,Z,Y,Q,re,R=!1;if(void 0===D)R=!0;else{for(var L=0;L<3;L++)for(var I=0;I<3;I++)if(B=P,Y=I,Q=void 0,re=void 0,re=["x","y","z"],!(V=D)[(Q=["up","center","eye"])[Z=L]]||B[Q[Z]][re[Y]]!==V[Q[Z]][re[Y]]){R=!0;break}(!D.projection||P.projection&&P.projection.type!==D.projection.type)&&(R=!0)}return R},f.isAspectChanged=function(E){var P=this.glplot.getAspectratio(),D=r.nestedProperty(E,this.id+".aspectratio").get();return void 0===D||D.x!==P.x||D.y!==P.y||D.z!==P.z},f.saveLayout=function(E){var P,D,F,R,L,I,B=this.fullLayout,V=this.isCameraChanged(E),Z=this.isAspectChanged(E),Y=V||Z;if(Y){var Q={};V&&(P=this.getCamera(),F=(D=r.nestedProperty(E,this.id+".camera")).get(),Q[this.id+".camera"]=F),Z&&(R=this.glplot.getAspectratio(),I=(L=r.nestedProperty(E,this.id+".aspectratio")).get(),Q[this.id+".aspectratio"]=I),l.call("_storeDirectGUIEdit",E,B._preGUI,Q),V&&(D.set(P),r.nestedProperty(B,this.id+".camera").set(P)),Z&&(L.set(R),r.nestedProperty(B,this.id+".aspectratio").set(R),this.glplot.redraw())}return Y},f.updateFx=function(E,P){var D=this.camera;if(D)if("orbit"===E)D.mode="orbit",D.keyBindingMode="rotate";else if("turntable"===E){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var F=this.graphDiv,R=F._fullLayout,L=this.fullSceneLayout.camera,I=L.up.x,B=L.up.y,V=L.up.z;if(V/Math.sqrt(I*I+B*B+V*V)<.999){var Z=this.id+".camera.up",Y={x:0,y:0,z:1},Q={};Q[Z]=Y;var re=F.layout;l.call("_storeDirectGUIEdit",re,R._preGUI,Q),L.up=Y,r.nestedProperty(re,Z).set(Y)}}else D.keyBindingMode=E;this.fullSceneLayout.hovermode=P},f.toImage=function(E){E||(E="png"),this.staticMode&&this.container.appendChild(v),this.glplot.redraw();var P=this.glplot.gl,D=P.drawingBufferWidth,F=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(D*F*4);P.readPixels(0,0,D,F,P.RGBA,P.UNSIGNED_BYTE,R),function(Z,Y,Q){for(var re=0,$=Q-1;re<$;++re,--$)for(var J=0;J<Y;++J)for(var ie=0;ie<4;++ie){var j=4*(Y*re+J)+ie,q=4*(Y*$+J)+ie,W=Z[j];Z[j]=Z[q],Z[q]=W}}(R,D,F),function(Z,Y,Q){for(var re=0;re<Q;++re)for(var $=0;$<Y;++$){var J=4*(Y*re+$),ie=Z[J+3];if(ie>0)for(var j=255/ie,q=0;q<3;++q)Z[J+q]=Math.min(j*Z[J+q],255)}}(R,D,F);var L=document.createElement("canvas");L.width=D,L.height=F;var I,B=L.getContext("2d"),V=B.createImageData(D,F);switch(V.data.set(R),B.putImageData(V,0,0),E){case"jpeg":I=L.toDataURL("image/jpeg");break;case"webp":I=L.toDataURL("image/webp");break;default:I=L.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(v),I},f.setConvert=function(){for(var E=0;E<3;E++){var P=this.fullSceneLayout[M[E]];h.setConvert(P,this.fullLayout),P.setScale=r.noop}},f.make4thDimension=function(){var E=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(this._mockAxis,E)},oe.exports=w},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b){b=b||v.length;for(var e=new Array(b),o=0;o<b;o++)e[o]=[v[o],x[o],T[o]];return e}},{}],610:[function(_,oe,se){"use strict";var v=_("./font_attributes"),x=_("./animation_attributes"),T=_("../components/color/attributes"),b=_("../components/shapes/draw_newshape/attributes"),e=_("./pad_attributes"),o=_("../lib/extend").extendFlat,i=v({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif',i.size.dflt=12,i.color.dflt=T.defaultLine,oe.exports={font:i,title:{text:{valType:"string",editType:"layoutstyle"},font:v({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:T.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:T.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:T.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:b.newshape,activeshape:b.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},x.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:v({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(_,oe,se){"use strict";var v=_("../../lib/sort_object_keys"),x='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',x].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:x,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},o=v(e);oe.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){var b=x.split(" "),e=b[0],o=b[1],i=v.isArrayOrTypedArray(T)?v.mean(T):T,l=.5+i/100,r=1.5+i/100,y=["",""],h=[0,0];switch(e){case"top":y[0]="top",h[1]=-r;break;case"bottom":y[0]="bottom",h[1]=r}switch(o){case"left":y[1]="right",h[0]=-l;break;case"right":y[1]="left",h[0]=l}return{anchor:y[0]&&y[1]?y.join("-"):y[0]?y[0]:y[1]?y[1]:"center",offset:h}}},{"../../lib":503}],613:[function(_,oe,se){"use strict";var v=_("mapbox-gl/dist/mapbox-gl-unminified"),x=_("../../lib"),T=x.strTranslate,b=x.strScale,e=_("../../plots/get_data").getSubplotCalcData,o=_("../../constants/xmlns_namespaces"),i=_("@plotly/d3"),l=_("../../components/drawing"),r=_("../../lib/svg_text_utils"),y=_("./mapbox"),h=se.constants=_("./constants");function s(d){return"string"==typeof d&&(-1!==h.styleValuesMapbox.indexOf(d)||0===d.indexOf("mapbox://"))}se.name="mapbox",se.attr="subplot",se.idRoot="mapbox",se.idRegex=se.attrRegex=x.counterRegex("mapbox"),se.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},se.layoutAttributes=_("./layout_attributes"),se.supplyLayoutDefaults=_("./layout_defaults"),se.plot=function(d){var p=d._fullLayout,c=d.calcdata,g=p._subplots.mapbox;if(v.version!==h.requiredVersion)throw new Error(h.wrongVersionErrorMsg);var m=function(k,E){var P=k._fullLayout;if(""===k._context.mapboxAccessToken)return"";for(var D=[],F=[],R=!1,L=!1,I=0;I<E.length;I++){var B=P[E[I]],V=B.accesstoken;s(B.style)&&(V?x.pushUnique(D,V):(s(B._input.style)&&(x.error("Uses Mapbox map style, but did not set an access token."),R=!0),L=!0)),V&&x.pushUnique(F,V)}if(L){var Z=R?h.noAccessTokenErrorMsg:h.missingStyleErrorMsg;throw x.error(Z),new Error(Z)}return D.length?(D.length>1&&x.warn(h.multipleTokensErrorMsg),D[0]):(F.length&&x.log(["Listed mapbox access token(s)",F.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(d,g);v.accessToken=m;for(var u=0;u<g.length;u++){var w=g[u],f=e(c,"mapbox",w),A=p[w],M=A._subplot;M||(M=new y(d,w),p[w]._subplot=M),M.viewInitial||(M.viewInitial={center:x.extendFlat({},A.center),zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}),M.plot(f,p,d._promises)}},se.clean=function(d,p,c,g){for(var m=g._subplots.mapbox||[],u=0;u<m.length;u++){var w=m[u];!p[w]&&g[w]._subplot&&g[w]._subplot.destroy()}},se.toSVG=function(d){for(var p=d._fullLayout,c=p._subplots.mapbox,g=p._size,m=0;m<c.length;m++){var u=p[c[m]],w=u.domain,f=u._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":f,x:g.l+g.w*w.x[0],y:g.t+g.h*(1-w.y[1]),width:g.w*(w.x[1]-w.x[0]),height:g.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});var A=i.select(u._subplot.div);if(null!==A.select(".mapboxgl-ctrl-logo").node().offsetParent){var M=p._glimages.append("g");M.attr("transform",T(g.l+g.w*w.x[0]+10,g.t+g.h*(1-w.y[0])-31)),M.append("path").attr("d",h.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",h.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",h.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",h.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=A.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=p._glimages.append("g"),P=E.append("text");P.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var D=l.bBox(P.node()),F=g.w*(w.x[1]-w.x[0]);if(D.width>F/2){var R=k.split("|").join("<br>");P.text(R).attr("data-unformatted",R).call(r.convertToTspans,d),D=l.bBox(P.node())}P.attr("transform",T(-3,8-D.height)),E.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var L=1;D.width+6>F&&(L=F/(D.width+6));var I=[g.l+g.w*w.x[1],g.t+g.h*(1-w.y[0])];E.attr("transform",T(I[0],I[1])+b(L))}},se.updateFx=function(d){for(var p=d._fullLayout,c=p._subplots.mapbox,g=0;g<c.length;g++)p[c[g]]._subplot.updateFx(p)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../lib/svg_text_utils").sanitizeHTML,T=_("./convert_text_opts"),b=_("./constants");function e(r,y){this.subplot=r,this.uid=r.uid+"-"+y,this.index=y,this.idSource="source-"+this.uid,this.idLayer=b.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=e.prototype;function i(r){if(!r.visible)return!1;var y=r.source;if(Array.isArray(y)&&y.length>0){for(var h=0;h<y.length;h++)if("string"!=typeof y[h]||0===y[h].length)return!1;return!0}return v.isPlainObject(y)||"string"==typeof y&&y.length>0}function l(r){var y={},h={};switch(r.type){case"circle":v.extendFlat(h,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case"line":v.extendFlat(h,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case"fill":v.extendFlat(h,{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case"symbol":var s=r.symbol,d=T(s.textposition,s.iconsize);v.extendFlat(y,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":s.placement}),v.extendFlat(h,{"icon-color":r.color,"text-color":s.textfont.color,"text-opacity":r.opacity});break;case"raster":v.extendFlat(h,{"raster-fade-duration":0,"raster-opacity":r.opacity})}return{layout:y,paint:h}}o.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r)),this.visible=i(r)},o.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))},o.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type},o.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});var y=this.findFollowingMapboxLayerId(this.lookupBelow());null!==y&&this.subplot.map.moveLayer(this.idLayer,y)},o.updateSource=function(r){var s,d,p,c,g,y=this.subplot.map;if(y.getSource(this.idSource)&&y.removeSource(this.idSource),this.sourceType=r.sourcetype,this.source=r.source,i(r)){var h=(c=(s=r).source,g={type:p=s.sourcetype},"geojson"===p?d="data":"vector"===p?d="string"==typeof c?"url":"tiles":"raster"===p?(d="tiles",g.tileSize=256):"image"===p&&(d="url",g.coordinates=s.coordinates),g[d]=c,s.sourceattribution&&(g.attribution=x(s.sourceattribution)),g);y.addSource(this.idSource,h)}},o.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var y=this.subplot.getMapLayers(),h=0;h<y.length;h++){var s=y[h].id;if("string"==typeof s&&0===s.indexOf(b.traceLayerPrefix)){r=s;break}}return r},o.updateLayer=function(r){var y=this.subplot,h=l(r),s=this.lookupBelow(),d=this.findFollowingMapboxLayerId(s);this.removeLayer(),i(r)&&y.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:h.layout,paint:h.paint},d),this.layerType=r.type,this.below=s},o.updateStyle=function(r){if(i(r)){var y=l(r);this.subplot.setOptions(this.idLayer,"setLayoutProperty",y.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",y.paint)}},o.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)},o.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer),r.getSource(this.idSource)&&r.removeSource(this.idSource)},oe.exports=function(r,y,h){var s=new e(r,y);return s.update(h),s}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color").defaultLine,T=_("../domain").attributes,b=_("../font_attributes"),e=_("../../traces/scatter/attributes").textposition,o=_("../../plot_api/edit_types").overrideAll,i=_("../../plot_api/plot_template").templatedArray,l=_("./constants"),r=b({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(oe.exports=o({_arrayAttrRegexps:[v.counterRegex("mapbox",".layers",!0)],domain:T({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:x},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:x}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:v.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../subplot_defaults"),T=_("../array_container_defaults"),b=_("./layout_attributes");function e(i,l,r,y){r("accesstoken",y.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),T(i,l,{name:"layers",handleItemDefaults:o}),l._input=i}function o(i,l){function r(p,c){return v.coerce(i,l,b.layers,p,c)}if(r("visible")){var y,h=r("sourcetype"),s="raster"===h||"image"===h;r("source"),r("sourceattribution"),"vector"===h&&r("sourcelayer"),"image"===h&&r("coordinates"),s&&(y="raster");var d=r("type",y);s&&"raster"!==d&&(d=l.type="raster",v.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),"circle"===d&&r("circle.radius"),"line"===d&&(r("line.width"),r("line.dash")),"fill"===d&&r("fill.outlinecolor"),"symbol"===d&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),v.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}oe.exports=function(i,l,r){x(i,l,r,{type:"mapbox",attributes:b,handleDefaults:e,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(_,oe,se){"use strict";var v=_("mapbox-gl/dist/mapbox-gl-unminified"),x=_("../../lib"),T=_("../../lib/geo_location_utils"),b=_("../../registry"),e=_("../cartesian/axes"),o=_("../../components/dragelement"),i=_("../../components/fx"),l=_("../../components/dragelement/helpers"),r=l.rectMode,y=l.drawMode,h=l.selectMode,s=_("../cartesian/select").prepSelect,d=_("../cartesian/select").clearSelect,p=_("../cartesian/select").clearSelectionsCache,c=_("../cartesian/select").selectOnClick,g=_("./constants"),m=_("./layers");function u(E,P){this.id=P,this.gd=E;var D=E._fullLayout,F=E._context;this.container=D._glcontainer.node(),this.isStatic=F.staticPlot,this.uid=D._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(D),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=u.prototype;w.plot=function(E,P,D){var F,R=this;R.map&&P[R.id].accesstoken!==R.accessToken&&(R.map.remove(),R.map=null,R.styleObj=null,R.traceHash={},R.layerList=[]),F=new Promise(R.map?function(I,B){R.updateMap(E,P,I,B)}:function(I,B){R.createMap(E,P,I,B)}),D.push(F)},w.createMap=function(E,P,D,F){var R=this,L=P[R.id],I=R.styleObj=A(L.style);R.accessToken=L.accesstoken;var B=R.map=new v.Map({container:R.div,style:I.style,center:k(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,interactive:!R.isStatic,preserveDrawingBuffer:R.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new v.AttributionControl({compact:!0}));B._canvas.style.left="0px",B._canvas.style.top="0px",R.rejectOnError(F),R.isStatic||R.initFx(E,P);var V=[];V.push(new Promise(function(Z){B.once("load",Z)})),V=V.concat(T.fetchTraceGeoData(E)),Promise.all(V).then(function(){R.fillBelowLookup(E,P),R.updateData(E),R.updateLayout(P),R.resolveOnRender(D)}).catch(F)},w.updateMap=function(E,P,D,F){var R=this,L=R.map,I=P[this.id];R.rejectOnError(F);var B=[],V=A(I.style);JSON.stringify(R.styleObj)!==JSON.stringify(V)&&(R.styleObj=V,L.setStyle(V.style),R.traceHash={},B.push(new Promise(function(Z){L.once("styledata",Z)}))),B=B.concat(T.fetchTraceGeoData(E)),Promise.all(B).then(function(){R.fillBelowLookup(E,P),R.updateData(E),R.updateLayout(P),R.resolveOnRender(D)}).catch(F)},w.fillBelowLookup=function(E,P){var D,F,R=P[this.id].layers,L=this.belowLookup={},I=!1;for(D=0;D<E.length;D++){var B=E[D][0].trace,V=B._module;"string"==typeof B.below?F=B.below:V.getBelow&&(F=V.getBelow(B,this)),""===F&&(I=!0),L["trace-"+B.uid]=F||""}for(D=0;D<R.length;D++){var Z=R[D];L["layout-"+D]=F="string"==typeof Z.below?Z.below:I?"traces":""}var Y,Q,re={};for(Y in L)re[F=L[Y]]?re[F].push(Y):re[F]=[Y];for(F in re){var $=re[F];if($.length>1)for(D=0;D<$.length;D++)0===(Y=$[D]).indexOf("trace-")?(Q=Y.split("trace-")[1],this.traceHash[Q]&&(this.traceHash[Q].below=null)):0===Y.indexOf("layout-")&&(Q=Y.split("layout-")[1],this.layerList[Q]&&(this.layerList[Q].below=null))}};var f={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function A(E){var P={};return x.isPlainObject(E)?(P.id=E.id,P.style=E):"string"==typeof E?(P.id=E,P.style=-1!==g.styleValuesMapbox.indexOf(E)?M(E):g.stylesNonMapbox[E]?g.stylesNonMapbox[E]:E):(P.id=g.styleValueDflt,P.style=M(g.styleValueDflt)),P.transition={duration:0,delay:0},P}function M(E){return g.styleUrlPrefix+E+"-"+g.styleUrlSuffix}function k(E){return[E.lon,E.lat]}w.updateData=function(E){var P,D,F,R,L=this.traceHash,I=E.slice().sort(function(Q,re){return f[Q[0].trace.type]-f[re[0].trace.type]});for(F=0;F<I.length;F++){var B=I[F],V=!1;(P=L[(D=B[0].trace).uid])&&(P.type===D.type?(P.update(B),V=!0):P.dispose()),!V&&D._module&&(L[D.uid]=D._module.plot(this,B))}var Z=Object.keys(L);e:for(F=0;F<Z.length;F++){var Y=Z[F];for(R=0;R<E.length;R++)if(Y===(D=E[R][0].trace).uid)continue e;(P=L[Y]).dispose(),delete L[Y]}},w.updateLayout=function(E){var P=this.map,D=E[this.id];this.dragging||this.wheeling||(P.setCenter(k(D.center)),P.setZoom(D.zoom),P.setBearing(D.bearing),P.setPitch(D.pitch)),this.updateLayers(E),this.updateFramework(E),this.updateFx(E),this.map.resize(),this.gd._context._scrollZoom.mapbox?P.scrollZoom.enable():P.scrollZoom.disable()},w.resolveOnRender=function(E){var P=this.map;P.on("render",function D(){P.loaded()&&(P.off("render",D),setTimeout(E,10))})},w.rejectOnError=function(E){var P=this.map;function D(){E(new Error(g.mapOnErrorMsg))}P.once("error",D),P.once("style.error",D),P.once("source.error",D),P.once("tile.error",D),P.once("layer.error",D)},w.createFramework=function(E){var P=this,D=P.div=document.createElement("div");D.id=P.uid,D.style.position="absolute",P.container.appendChild(D),P.xaxis={_id:"x",c2p:function(F){return P.project(F).x}},P.yaxis={_id:"y",c2p:function(F){return P.project(F).y}},P.updateFramework(E),P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(P.mockAxis,E)},w.initFx=function(E,P){var D=this,F=D.gd,R=D.map;function L(){i.loneUnhover(P._hoverlayer)}function I(){var B=D.getView();F.emit("plotly_relayouting",D.getViewEditsWithDerived(B))}R.on("moveend",function(B){if(D.map){var V=F._fullLayout;if(B.originalEvent||D.wheeling){var Z=V[D.id];b.call("_storeDirectGUIEdit",F.layout,V._preGUI,D.getViewEdits(Z));var Y=D.getView();Z._input.center=Z.center=Y.center,Z._input.zoom=Z.zoom=Y.zoom,Z._input.bearing=Z.bearing=Y.bearing,Z._input.pitch=Z.pitch=Y.pitch,F.emit("plotly_relayout",D.getViewEditsWithDerived(Y))}B.originalEvent&&"mouseup"===B.originalEvent.type?D.dragging=!1:D.wheeling&&(D.wheeling=!1),V._rehover&&V._rehover()}}),R.on("wheel",function(){D.wheeling=!0}),R.on("mousemove",function(B){var V=D.div.getBoundingClientRect(),Z=[B.originalEvent.offsetX,B.originalEvent.offsetY];B.target.getBoundingClientRect=function(){return V},D.xaxis.p2c=function(){return R.unproject(Z).lng},D.yaxis.p2c=function(){return R.unproject(Z).lat},F._fullLayout._rehover=function(){F._fullLayout._hoversubplot===D.id&&F._fullLayout[D.id]&&i.hover(F,B,D.id)},i.hover(F,B,D.id),F._fullLayout._hoversubplot=D.id}),R.on("dragstart",function(){D.dragging=!0,L()}),R.on("zoomstart",L),R.on("mouseout",function(){F._fullLayout._hoversubplot=null}),R.on("drag",I),R.on("zoom",I),R.on("dblclick",function(){var B=F._fullLayout[D.id];b.call("_storeDirectGUIEdit",F.layout,F._fullLayout._preGUI,D.getViewEdits(B));var V=D.viewInitial;R.setCenter(k(V.center)),R.setZoom(V.zoom),R.setBearing(V.bearing),R.setPitch(V.pitch);var Z=D.getView();B._input.center=B.center=Z.center,B._input.zoom=B.zoom=Z.zoom,B._input.bearing=B.bearing=Z.bearing,B._input.pitch=B.pitch=Z.pitch,F.emit("plotly_doubleclick",null),F.emit("plotly_relayout",D.getViewEditsWithDerived(Z))}),D.clearSelect=function(){p(D.dragOptions),d(D.dragOptions.gd)},D.onClickInPanFn=function(B){return function(V){var Z=F._fullLayout.clickmode;Z.indexOf("select")>-1&&c(V.originalEvent,F,[D.xaxis],[D.yaxis],D.id,B),Z.indexOf("event")>-1&&i.click(F,V.originalEvent)}}},w.updateFx=function(E){var P=this,D=P.map,F=P.gd;if(!P.isStatic){var R,L=E.dragmode;R=r(L)?function(V,Z){(V.range={})[P.id]=[B([Z.xmin,Z.ymin]),B([Z.xmax,Z.ymax])]}:function(V,Z,Y){(V.lassoPoints={})[P.id]=Y.filtered.map(B)},P.dragOptions=x.extendDeep(P.dragOptions||{},{dragmode:E.dragmode,element:P.div,gd:F,plotinfo:{id:P.id,domain:E[P.id].domain,xaxis:P.xaxis,yaxis:P.yaxis,fillRangeItems:R},xaxes:[P.xaxis],yaxes:[P.yaxis],subplot:P.id}),D.off("click",P.onClickInPanHandler),h(L)||y(L)?(D.dragPan.disable(),D.on("zoomstart",P.clearSelect),P.dragOptions.prepFn=function(V,Z,Y){s(V,Z,Y,P.dragOptions,L)},o.init(P.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",P.clearSelect),P.div.onmousedown=null,P.onClickInPanHandler=P.onClickInPanFn(P.dragOptions),D.on("click",P.onClickInPanHandler))}function B(V){var Z=P.map.unproject(V);return[Z.lng,Z.lat]}},w.updateFramework=function(E){var P=E[this.id].domain,D=E._size,F=this.div.style;F.width=D.w*(P.x[1]-P.x[0])+"px",F.height=D.h*(P.y[1]-P.y[0])+"px",F.left=D.l+P.x[0]*D.w+"px",F.top=D.t+(1-P.y[1])*D.h+"px",this.xaxis._offset=D.l+P.x[0]*D.w,this.xaxis._length=D.w*(P.x[1]-P.x[0]),this.yaxis._offset=D.t+(1-P.y[1])*D.h,this.yaxis._length=D.h*(P.y[1]-P.y[0])},w.updateLayers=function(E){var P,D=E[this.id].layers,F=this.layerList;if(D.length!==F.length){for(P=0;P<F.length;P++)F[P].dispose();for(F=this.layerList=[],P=0;P<D.length;P++)F.push(m(this,P,D[P]))}else for(P=0;P<D.length;P++)F[P].update(D[P])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(E,P,D){for(var F in D)this.map[P](E,F,D[F])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(E,P){var D=this.map;if("string"==typeof P){if(""===P)return void D.addLayer(E,P);for(var F=this.getMapLayers(),R=0;R<F.length;R++)if(P===F[R].id)return void D.addLayer(E,P);x.warn(["Trying to add layer with *below* value",P,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}D.addLayer(E)},w.project=function(E){return this.map.project(new v.LngLat(E[0],E[1]))},w.getView=function(){var E=this.map,P=E.getCenter(),D={lon:P.lng,lat:P.lat},F=E.getCanvas(),R=parseInt(F.style.width),L=parseInt(F.style.height);return{center:D,zoom:E.getZoom(),bearing:E.getBearing(),pitch:E.getPitch(),_derived:{coordinates:[E.unproject([0,0]).toArray(),E.unproject([R,0]).toArray(),E.unproject([R,L]).toArray(),E.unproject([0,L]).toArray()]}}},w.getViewEdits=function(E){for(var P=this.id,D=["center","zoom","bearing","pitch"],F={},R=0;R<D.length;R++){var L=D[R];F[P+"."+L]=E[L]}return F},w.getViewEditsWithDerived=function(E){var P=this.id,D=this.getViewEdits(E);return D[P+"._derived"]=E._derived,D},oe.exports=u},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(_,oe,se){"use strict";oe.exports=function(v){var x=v.editType;return{t:{valType:"number",dflt:0,editType:x},r:{valType:"number",dflt:0,editType:x},b:{valType:"number",dflt:0,editType:x},l:{valType:"number",dflt:0,editType:x},editType:x}}},{}],619:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-time-format").timeFormatLocale,T=_("d3-format").formatLocale,b=_("fast-isnumeric"),e=_("../registry"),o=_("../plot_api/plot_schema"),i=_("../plot_api/plot_template"),l=_("../lib"),r=_("../components/color"),y=_("../constants/numerical").BADNUM,h=_("./cartesian/axis_ids"),s=_("./cartesian/handle_outline").clearSelect,d=_("./animation_attributes"),p=_("./frame_attributes"),c=_("../plots/get_data").getModuleCalcData,g=l.relinkPrivateKeys,m=l._,u=oe.exports={};l.extendFlat(u,e),u.attributes=_("./attributes"),u.attributes.type.values=u.allTypes,u.fontAttrs=_("./font_attributes"),u.layoutAttributes=_("./layout_attributes"),u.fontWeight="normal";var w=u.transformsRegistry,f=_("./command");u.executeAPICommand=f.executeAPICommand,u.computeAPICommandBindings=f.computeAPICommandBindings,u.manageCommandObserver=f.manageCommandObserver,u.hasSimpleAPICommandBindings=f.hasSimpleAPICommandBindings,u.redrawText=function(Y){return Y=l.getGraphDiv(Y),new Promise(function(Q){setTimeout(function(){Y._fullLayout&&(e.getComponentMethod("annotations","draw")(Y),e.getComponentMethod("legend","draw")(Y),e.getComponentMethod("colorbar","draw")(Y),Q(u.previousPromises(Y)))},300)})},u.resize=function(Y){var Q;Y=l.getGraphDiv(Y);var re=new Promise(function($,J){Y&&!l.isHidden(Y)||J(new Error("Resize must be passed a displayed plot div element.")),Y._redrawTimer&&clearTimeout(Y._redrawTimer),Y._resolveResize&&(Q=Y._resolveResize),Y._resolveResize=$,Y._redrawTimer=setTimeout(function(){if(!Y.layout||Y.layout.width&&Y.layout.height||l.isHidden(Y))$(Y);else{delete Y.layout.width,delete Y.layout.height;var ie=Y.changed;Y.autoplay=!0,e.call("relayout",Y,{autosize:!0}).then(function(){Y.changed=ie,Y._resolveResize===$&&(delete Y._resolveResize,$(Y))})}},100)});return Q&&Q(re),re},u.previousPromises=function(Y){if((Y._promises||[]).length)return Promise.all(Y._promises).then(function(){Y._promises=[]})},u.addLinks=function(Y){if(Y._context.showLink||Y._context.showSources){var Q=Y._fullLayout,re=l.ensureSingle(Q._paper,"text","js-plot-link-container",function(W){W.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var ae=v.select(this);ae.append("tspan").classed("js-link-to-tool",!0),ae.append("tspan").classed("js-link-spacer",!0),ae.append("tspan").classed("js-sourcelinks",!0)})}),$=re.node(),J={y:Q._paper.attr("height")-9};document.body.contains($)&&$.getComputedTextLength()>=Q.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=Q._paper.attr("width")-7),re.attr(J);var ie=re.select(".js-link-to-tool"),j=re.select(".js-link-spacer"),q=re.select(".js-sourcelinks");Y._context.showSources&&Y._context.showSources(Y),Y._context.showLink&&function(W,ae){ae.text("");var G=ae.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(W._context.linkText+" "+String.fromCharCode(187));if(W._context.sendData)G.on("click",function(){u.sendDataToCloud(W)});else{var ee=window.location.pathname.split("/"),te=window.location.search;G.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ee[2].split(".")[0]+"/"+ee[1]+te})}}(Y,ie),j.text(ie.text()&&q.text()?" - ":"")}},u.sendDataToCloud=function(Y){var Q=(window.PLOTLYENV||{}).BASE_URL||Y._context.plotlyServerURL;if(Q){Y.emit("plotly_beforeexport");var re=v.select(Y).append("div").attr("id","hiddenform").style("display","none"),$=re.append("form").attr({action:Q+"/external",method:"post",target:"_blank"});return $.append("input").attr({type:"text",name:"data"}).node().value=u.graphJson(Y,!1,"keepdata"),$.node().submit(),re.remove(),Y.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];function k(Y,Q){var re=Y._context.locale;re||(re="en-US");var $=!1,J={};function ie(ee){for(var te=!0,le=0;le<Q.length;le++){var ue=Q[le];J[ue]||(ee[ue]?J[ue]=ee[ue]:te=!1)}te&&($=!0)}for(var j=0;j<2;j++){for(var q=Y._context.locales,W=0;W<2;W++){var ae=(q[re]||{}).format;if(ae&&(ie(ae),$))break;q=e.localeRegistry}var G=re.split("-")[0];if($||G===re)break;re=G}return $||ie(e.localeRegistry.en.format),J}function E(Y,Q){var re={_fullLayout:Q},$="x"===Y._id.charAt(0),J=Y._mainAxis._anchorAxis,ie="",j="",q="";if(J&&(q=J._mainAxis._id,ie=$?Y._id+q:q+Y._id),!ie||!Q._plots[ie]){ie="";for(var W=Y._counterAxes,ae=0;ae<W.length;ae++){var G=W[ae],ee=$?Y._id+G:G+Y._id;j||(j=ee);var te=h.getFromId(re,G);if(q&&te.overlaying===q){ie=ee;break}}}return ie||j}function P(Y){var Q=Y.transforms;if(Array.isArray(Q)&&Q.length)for(var re=0;re<Q.length;re++){var $=Q[re],J=$._module||w[$.type];if(J&&J.makesData)return!0}return!1}function D(Y,Q,re,$){for(var J=Y.transforms,ie=[Y],j=0;j<J.length;j++){var q=J[j],W=w[q.type];W&&W.transform&&(ie=W.transform(ie,{transform:q,fullTrace:Y,fullData:Q,layout:re,fullLayout:$,transformIndex:j}))}return ie}function F(Y){return"string"==typeof Y&&"px"===Y.substr(Y.length-2)&&parseFloat(Y)}function R(Y){var Q=Y.margin;if(!Y._size){var re=Y._size={l:Math.round(Q.l),r:Math.round(Q.r),t:Math.round(Q.t),b:Math.round(Q.b),p:Math.round(Q.pad)};re.w=Math.round(Y.width)-re.l-re.r,re.h=Math.round(Y.height)-re.t-re.b}Y._pushmargin||(Y._pushmargin={}),Y._pushmarginIds||(Y._pushmarginIds={})}u.supplyDefaults=function(Y,Q){var $e,et,re=Q&&Q.skipUpdateCalc,$=Y._fullLayout||{};if($._skipDefaults)delete $._skipDefaults;else{var J,ie=Y._fullLayout={},j=Y.layout||{},q=Y._fullData||[],W=Y._fullData=[],ae=Y.data||[],G=Y.calcdata||[],ee=Y._context||{};Y._transitionData||u.createTransitionData(Y),ie._dfltTitle={plot:m(Y,"Click to enter Plot title"),x:m(Y,"Click to enter X axis title"),y:m(Y,"Click to enter Y axis title"),colorbar:m(Y,"Click to enter Colorscale title"),annotation:m(Y,"new text")},ie._traceWord=m(Y,"trace");var te=k(Y,A);if(ie._mapboxAccessToken=ee.mapboxAccessToken,$._initialAutoSizeIsDone){var le=$.width,ue=$.height;u.supplyLayoutGlobalDefaults(j,ie,te),j.width||(ie.width=le),j.height||(ie.height=ue),u.sanitizeMargins(ie)}else{u.supplyLayoutGlobalDefaults(j,ie,te);var de=!j.width||!j.height,he=ie.autosize;de&&(he||ee.autosizable)?u.plotAutoSize(Y,j,ie):de&&u.sanitizeMargins(ie),!he&&de&&(j.width=ie.width,j.height=ie.height)}ie._d3locale=(($e=te).decimal=(et=ie.separators).charAt(0),$e.thousands=et.charAt(1),{numberFormat:function(tt){try{tt=T($e).format(l.adjustFormat(tt))}catch(ct){return l.warnBadFormat(tt),l.noFormat}return tt},timeFormat:x($e).utcFormat}),ie._extraFormat=k(Y,M),ie._initialAutoSizeIsDone=!0,ie._dataLength=ae.length,ie._modules=[],ie._visibleModules=[],ie._basePlotModules=[];var me=ie._subplots=function(){var $e,et,tt=e.collectableSubplotTypes,ct={};if(!tt){tt=[];var bt=e.subplotsRegistry;for(var At in bt){var Ut=bt[At].attr;if(Ut&&(tt.push(At),Array.isArray(Ut)))for(et=0;et<Ut.length;et++)l.pushUnique(tt,Ut[et])}}for($e=0;$e<tt.length;$e++)ct[tt[$e]]=[];return ct}(),_e=ie._splomAxes={x:{},y:{}},Ee=ie._splomSubplots={};ie._splomGridDflt={},ie._scatterStackOpts={},ie._firstScatter={},ie._alignmentOpts={},ie._colorAxes={},ie._requestRangeslider={},ie._traceUids=function($e,et){var tt,ct,bt=et.length,At=[];for(tt=0;tt<$e.length;tt++){var Ut=$e[tt]._fullInput;Ut!==ct&&At.push(Ut),ct=Ut}var Ct=At.length,dt=new Array(bt),at={};function Nt(Ge,Qe){dt[Qe]=Ge,at[Ge]=1}function rn(Ge,Qe){if(Ge&&"string"==typeof Ge&&!at[Ge])return Nt(Ge,Qe),!0}for(tt=0;tt<bt;tt++){var en=et[tt].uid;"number"==typeof en&&(en=String(en)),rn(en,tt)||tt<Ct&&rn(At[tt].uid,tt)||Nt(l.randstr(at),tt)}return dt}(q,ae),ie._globalTransforms=(Y._context||{}).globalTransforms,u.supplyDataDefaults(ae,W,j,ie);var De=Object.keys(_e.x),Se=Object.keys(_e.y);if(De.length>1&&Se.length>1){for(e.getComponentMethod("grid","sizeDefaults")(j,ie),J=0;J<De.length;J++)l.pushUnique(me.xaxis,De[J]);for(J=0;J<Se.length;J++)l.pushUnique(me.yaxis,Se[J]);for(var Fe in Ee)l.pushUnique(me.cartesian,Fe)}if(ie._has=u._hasPlotType.bind(ie),q.length===W.length)for(J=0;J<W.length;J++)g(W[J],q[J]);u.supplyLayoutModuleDefaults(j,ie,W,Y._transitionData);var ve=ie._visibleModules,Te=[];for(J=0;J<ve.length;J++){var Ie=ve[J].crossTraceDefaults;Ie&&l.pushUnique(Te,Ie)}for(J=0;J<Te.length;J++)Te[J](W,ie);ie._hasOnlyLargeSploms=1===ie._basePlotModules.length&&"splom"===ie._basePlotModules[0].name&&De.length>15&&Se.length>15&&0===ie.shapes.length&&0===ie.images.length,u.linkSubplots(W,ie,q,$),u.cleanPlot(W,ie,q,$);var Ce=!(!$._has||!$._has("gl2d")),Re=!(!ie._has||!ie._has("gl2d")),Ue=!(!$._has||!$._has("cartesian"))||Ce,qe=!(!ie._has||!ie._has("cartesian"))||Re;Ue&&!qe?$._bgLayer.remove():qe&&!Ue&&(ie._shouldCreateBgLayer=!0),$._zoomlayer&&!Y._dragging&&s({_fullLayout:$}),function($e,et){var tt,ct=[];et.meta&&(tt=et._meta={meta:et.meta,layout:{meta:et.meta}});for(var bt=0;bt<$e.length;bt++){var At=$e[bt];At.meta?ct[At.index]=At._meta={meta:At.meta}:et.meta&&(At._meta={meta:et.meta}),et.meta&&(At._meta.layout={meta:et.meta})}ct.length&&(tt||(tt=et._meta={}),tt.data=ct)}(W,ie),g(ie,$),e.getComponentMethod("colorscale","crossTraceDefaults")(W,ie),ie._preGUI||(ie._preGUI={}),ie._tracePreGUI||(ie._tracePreGUI={});var Xe,st=ie._tracePreGUI,He={};for(Xe in st)He[Xe]="old";for(J=0;J<W.length;J++)He[Xe=W[J]._fullInput.uid]||(st[Xe]={}),He[Xe]="new";for(Xe in He)"old"===He[Xe]&&delete st[Xe];R(ie),e.getComponentMethod("rangeslider","makeData")(ie),re||G.length!==W.length||u.supplyDefaultsUpdateCalc(G,W)}},u.supplyDefaultsUpdateCalc=function(Y,Q){for(var re=0;re<Q.length;re++){var $=Q[re],J=(Y[re]||[])[0];if(J&&J.trace){var ie=J.trace;if(ie._hasCalcTransform){var j,q,W,ae=ie._arrayAttrs;for(j=0;j<ae.length;j++)W=l.nestedProperty(ie,q=ae[j]).get().slice(),l.nestedProperty($,q).set(W)}J.trace=$}}},u.createTransitionData=function(Y){Y._transitionData||(Y._transitionData={}),Y._transitionData._frames||(Y._transitionData._frames=[]),Y._transitionData._frameHash||(Y._transitionData._frameHash={}),Y._transitionData._counter||(Y._transitionData._counter=0),Y._transitionData._interruptCallbacks||(Y._transitionData._interruptCallbacks=[])},u._hasPlotType=function(Y){var Q,re=this._basePlotModules||[];for(Q=0;Q<re.length;Q++)if(re[Q].name===Y)return!0;var $=this._modules||[];for(Q=0;Q<$.length;Q++){var J=$[Q].name;if(J===Y)return!0;var ie=e.modules[J];if(ie&&ie.categories[Y])return!0}return!1},u.cleanPlot=function(Y,Q,re,$){var J,ie,j=$._basePlotModules||[];for(J=0;J<j.length;J++){var q=j[J];q.clean&&q.clean(Y,Q,re,$)}var W=$._has&&$._has("gl"),ae=Q._has&&Q._has("gl");W&&!ae&&void 0!==$._glcontainer&&($._glcontainer.selectAll(".gl-canvas").remove(),$._glcontainer.selectAll(".no-webgl").remove(),$._glcanvas=null);var G=!!$._infolayer;e:for(J=0;J<re.length;J++){var ee=re[J].uid;for(ie=0;ie<Y.length;ie++)if(ee===Y[ie].uid)continue e;G&&$._infolayer.select(".cb"+ee).remove()}},u.linkSubplots=function(Y,Q,re,$){var J,ie,j=$._plots||{},q=Q._plots={},W=Q._subplots,ae={_fullData:Y,_fullLayout:Q},G=W.cartesian.concat(W.gl2d||[]);for(J=0;J<G.length;J++){var ee,te=G[J],le=j[te],ue=h.getFromId(ae,te,"x"),de=h.getFromId(ae,te,"y");for(le?ee=q[te]=le:(ee=q[te]={}).id=te,ue._counterAxes.push(de._id),de._counterAxes.push(ue._id),ue._subplotsWith.push(te),de._subplotsWith.push(te),ee.xaxis=ue,ee.yaxis=de,ee._hasClipOnAxisFalse=!1,ie=0;ie<Y.length;ie++){var he=Y[ie];if(he.xaxis===ee.xaxis._id&&he.yaxis===ee.yaxis._id&&!1===he.cliponaxis){ee._hasClipOnAxisFalse=!0;break}}}var be,me=h.list(ae,null,!0);for(J=0;J<me.length;J++){var _e=null;(be=me[J]).overlaying&&(_e=h.getFromId(ae,be.overlaying))&&_e.overlaying&&(be.overlaying=!1,_e=null),be._mainAxis=_e||be,_e&&(be.domain=_e.domain.slice()),be._anchorAxis="free"===be.anchor?null:h.getFromId(ae,be.anchor)}for(J=0;J<me.length;J++)if((be=me[J])._counterAxes.sort(h.idSort),be._subplotsWith.sort(l.subplotSort),be._mainSubplot=E(be,Q),be._counterAxes.length&&(be.spikemode&&-1!==be.spikemode.indexOf("across")||be.automargin&&be.mirror&&"free"!==be.anchor||e.getComponentMethod("rangeslider","isVisible")(be))){var Ee=1,De=0;for(ie=0;ie<be._counterAxes.length;ie++){var Se=h.getFromId(ae,be._counterAxes[ie]);Ee=Math.min(Ee,Se.domain[0]),De=Math.max(De,Se.domain[1])}Ee<De&&(be._counterDomainMin=Ee,be._counterDomainMax=De)}},u.clearExpandedTraceDefaultColors=function(Y){var Q,re,$;for(re=[],(Q=Y._module._colorAttrs)||(Y._module._colorAttrs=Q=[],o.crawl(Y._module.attributes,function(J,ie,j,q){re[q]=ie,re.length=q+1,"color"===J.valType&&void 0===J.dflt&&Q.push(re.join("."))})),$=0;$<Q.length;$++)l.nestedProperty(Y,"_input."+Q[$]).get()||l.nestedProperty(Y,Q[$]).set(null)},u.supplyDataDefaults=function(Y,Q,re,$){var J,ie,j,q=$._modules,W=$._visibleModules,ae=$._basePlotModules,G=0,ee=0;function te(Fe){Q.push(Fe);var ve=Fe._module;ve&&(l.pushUnique(q,ve),!0===Fe.visible&&l.pushUnique(W,ve),l.pushUnique(ae,Fe._module.basePlotModule),G++,!1!==Fe._input.visible&&ee++)}$._transformModules=[];var le={},ue=[],he=i.traceTemplater((re.template||{}).data||{});for(J=0;J<Y.length;J++){if((ie=he.newTrace(j=Y[J])).uid=$._traceUids[J],u.supplyTraceDefaults(j,ie,ee,$,J),ie.index=J,ie._input=j,ie._expandedIndex=G,ie.transforms&&ie.transforms.length)for(var be=!1!==j.visible&&!1===ie.visible,me=D(ie,Q,re,$),_e=0;_e<me.length;_e++){var Ee=me[_e],De={_template:ie._template,type:ie.type,uid:ie.uid+_e};be&&!1===Ee.visible&&delete Ee.visible,u.supplyTraceDefaults(Ee,De,G,$,J),g(De,Ee),De.index=J,De._input=j,De._fullInput=ie,De._expandedIndex=G,De._expandedInput=Ee,te(De)}else ie._fullInput=ie,ie._expandedInput=ie,te(ie);e.traceIs(ie,"carpetAxis")&&(le[ie.carpet]=ie),e.traceIs(ie,"carpetDependent")&&ue.push(J)}for(J=0;J<ue.length;J++)if((ie=Q[ue[J]]).visible){var Se=le[ie.carpet];ie._carpet=Se,Se&&Se.visible?(ie.xaxis=Se.xaxis,ie.yaxis=Se.yaxis):ie.visible=!1}},u.supplyAnimationDefaults=function(Y){var Q;Y=Y||{};var re={};function $(J,ie){return l.coerce(Y||{},re,d,J,ie)}if($("mode"),$("direction"),$("fromcurrent"),Array.isArray(Y.frame))for(re.frame=[],Q=0;Q<Y.frame.length;Q++)re.frame[Q]=u.supplyAnimationFrameDefaults(Y.frame[Q]||{});else re.frame=u.supplyAnimationFrameDefaults(Y.frame||{});if(Array.isArray(Y.transition))for(re.transition=[],Q=0;Q<Y.transition.length;Q++)re.transition[Q]=u.supplyAnimationTransitionDefaults(Y.transition[Q]||{});else re.transition=u.supplyAnimationTransitionDefaults(Y.transition||{});return re},u.supplyAnimationFrameDefaults=function(Y){var Q={};function re($,J){return l.coerce(Y||{},Q,d.frame,$,J)}return re("duration"),re("redraw"),Q},u.supplyAnimationTransitionDefaults=function(Y){var Q={};function re($,J){return l.coerce(Y||{},Q,d.transition,$,J)}return re("duration"),re("easing"),Q},u.supplyFrameDefaults=function(Y){var Q={};function re($,J){return l.coerce(Y,Q,p,$,J)}return re("group"),re("name"),re("traces"),re("baseframe"),re("data"),re("layout"),Q},u.supplyTraceDefaults=function(Y,Q,re,$,J){var ie,j=$.colorway||r.defaults,q=j[re%j.length];function W(me,_e){return l.coerce(Y,Q,u.attributes,me,_e)}var ae=W("visible");W("type"),W("name",$._traceWord+" "+J),W("uirevision",$.uirevision);var G=u.getModule(Q);if(Q._module=G,G){var ee=G.basePlotModule,te=ee.attr,le=ee.attributes;if(te&&le){var ue=$._subplots,de="";if(ae||"gl2d"!==ee.name){if(Array.isArray(te))for(ie=0;ie<te.length;ie++){var he=te[ie],be=l.coerce(Y,Q,le,he);ue[he]&&l.pushUnique(ue[he],be),de+=be}else de=l.coerce(Y,Q,le,te);ue[ee.name]&&l.pushUnique(ue[ee.name],de)}}}return ae&&(W("customdata"),W("ids"),W("meta"),e.traceIs(Q,"showLegend")?(l.coerce(Y,Q,G.attributes.showlegend?G.attributes:u.attributes,"showlegend"),W("legendgroup"),W("legendgrouptitle.text"),W("legendrank"),Q._dfltShowLegend=!0):Q._dfltShowLegend=!1,G&&G.supplyDefaults(Y,Q,q,$),e.traceIs(Q,"noOpacity")||W("opacity"),e.traceIs(Q,"notLegendIsolatable")&&(Q.visible=!!Q.visible),e.traceIs(Q,"noHover")||(Q.hovertemplate||l.coerceHoverinfo(Y,Q,$),"parcats"!==Q.type&&e.getComponentMethod("fx","supplyDefaults")(Y,Q,q,$)),G&&G.selectPoints&&W("selectedpoints"),u.supplyTransformDefaults(Y,Q,$)),Q},u.hasMakesDataTransform=P,u.supplyTransformDefaults=function(Y,Q,re){if(Q._length||P(Y)){var $=re._globalTransforms||[],J=re._transformModules||[];if(Array.isArray(Y.transforms)||0!==$.length)for(var j=$.concat(Y.transforms||[]),q=Q.transforms=[],W=0;W<j.length;W++){var ae,G=j[W],ee=G.type,te=w[ee],le=!(G._module&&G._module===te),ue=te&&"function"==typeof te.transform;te||l.warn("Unrecognized transform type "+ee+"."),te&&te.supplyDefaults&&(le||ue)?((ae=te.supplyDefaults(G,Q,re,Y)).type=ee,ae._module=te,l.pushUnique(J,te)):ae=l.extendFlat({},G),q.push(ae)}}},u.supplyLayoutGlobalDefaults=function(Y,Q,re){function $(W,ae){return l.coerce(Y,Q,u.layoutAttributes,W,ae)}var J=Y.template;l.isPlainObject(J)&&(Q.template=J,Q._template=J.layout,Q._dataTemplate=J.data),$("autotypenumbers");var ie=l.coerceFont($,"font");l.coerceFont($,"title.font",l.extendFlat({},ie,{size:Math.round(1.4*ie.size)})),$("title.text",Q._dfltTitle.plot),$("title.xref"),$("title.yref"),$("title.x"),$("title.y"),$("title.xanchor"),$("title.yanchor"),$("title.pad.t"),$("title.pad.r"),$("title.pad.b"),$("title.pad.l"),$("uniformtext.mode")&&$("uniformtext.minsize"),$("autosize",!(Y.width&&Y.height)),$("width"),$("height"),$("margin.l"),$("margin.r"),$("margin.t"),$("margin.b"),$("margin.pad"),$("margin.autoexpand"),Y.width&&Y.height&&u.sanitizeMargins(Q),e.getComponentMethod("grid","sizeDefaults")(Y,Q),$("paper_bgcolor"),$("separators",re.decimal+re.thousands),$("hidesources"),$("colorway"),$("datarevision");var q=$("uirevision");$("editrevision",q),$("selectionrevision",q),e.getComponentMethod("modebar","supplyLayoutDefaults")(Y,Q),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Y,Q,$),$("meta"),l.isPlainObject(Y.transition)&&($("transition.duration"),$("transition.easing"),$("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(Y,Q,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Y,Q,$)},u.plotAutoSize=function(Y,Q,re){var $,J,ie=Y._context||{},j=ie.frameMargins,q=l.isPlotDiv(Y);if(q&&Y.emit("plotly_autosize"),ie.fillFrame)$=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var W=q?window.getComputedStyle(Y):{};if($=F(W.width)||F(W.maxWidth)||re.width,J=F(W.height)||F(W.maxHeight)||re.height,b(j)&&j>0){var ae=1-2*j;$=Math.round(ae*$),J=Math.round(ae*J)}}var G=u.layoutAttributes.width.min,ee=u.layoutAttributes.height.min;$<G&&($=G),J<ee&&(J=ee);var te=!Q.width&&Math.abs(re.width-$)>1,le=!Q.height&&Math.abs(re.height-J)>1;(le||te)&&(te&&(re.width=$),le&&(re.height=J)),Y._initialAutoSize||(Y._initialAutoSize={width:$,height:J}),u.sanitizeMargins(re)},u.supplyLayoutModuleDefaults=function(Y,Q,re,$){var J,ie,j,q=e.componentsRegistry,W=Q._basePlotModules,ae=e.subplotsRegistry.cartesian;for(J in q)(j=q[J]).includeBasePlot&&j.includeBasePlot(Y,Q);for(var G in W.length||W.push(ae),Q._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(Y,Q),ae.finalizeSubplots(Y,Q)),Q._subplots)Q._subplots[G].sort(l.subplotSort);for(ie=0;ie<W.length;ie++)(j=W[ie]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,Q,re);var ee=Q._modules;for(ie=0;ie<ee.length;ie++)(j=ee[ie]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,Q,re);var te=Q._transformModules;for(ie=0;ie<te.length;ie++)(j=te[ie]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,Q,re,$);for(J in q)(j=q[J]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,Q,re)},u.purge=function(Y){var Q=Y._fullLayout||{};void 0!==Q._glcontainer&&(Q._glcontainer.selectAll(".gl-canvas").remove(),Q._glcontainer.remove(),Q._glcanvas=null),Q._modeBar&&Q._modeBar.destroy(),Y._transitionData&&(Y._transitionData._interruptCallbacks&&(Y._transitionData._interruptCallbacks.length=0),Y._transitionData._animationRaf&&window.cancelAnimationFrame(Y._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(Y),delete Y.data,delete Y.layout,delete Y._fullData,delete Y._fullLayout,delete Y.calcdata,delete Y.empty,delete Y.fid,delete Y.undoqueue,delete Y.undonum,delete Y.autoplay,delete Y.changed,delete Y._promises,delete Y._redrawTimer,delete Y._hmlumcount,delete Y._hmpixcount,delete Y._transitionData,delete Y._transitioning,delete Y._initialAutoSize,delete Y._transitioningWithDuration,delete Y._dragging,delete Y._dragged,delete Y._dragdata,delete Y._hoverdata,delete Y._snapshotInProgress,delete Y._editing,delete Y._mouseDownTime,delete Y._legendMouseDownTime,Y.removeAllListeners&&Y.removeAllListeners()},u.style=function(Y){var Q,re=Y._fullLayout._visibleModules,$=[];for(Q=0;Q<re.length;Q++){var J=re[Q];J.style&&l.pushUnique($,J.style)}for(Q=0;Q<$.length;Q++)$[Q](Y)},u.sanitizeMargins=function(Y){if(Y&&Y.margin){var Q,re=Y.width,$=Y.height,J=Y.margin,j=$-(J.t+J.b);re-(J.l+J.r)<0&&(Q=(re-1)/(J.l+J.r),J.l=Math.floor(Q*J.l),J.r=Math.floor(Q*J.r)),j<0&&(Q=($-1)/(J.t+J.b),J.t=Math.floor(Q*J.t),J.b=Math.floor(Q*J.b))}},u.clearAutoMarginIds=function(Y){Y._fullLayout._pushmarginIds={}},u.allowAutoMargin=function(Y,Q){Y._fullLayout._pushmarginIds[Q]=1},u.autoMargin=function(Y,Q,re){var $=Y._fullLayout,J=$.width,ie=$.height,j=$.margin,q=l.constrain(J-j.l-j.r,2,64),W=l.constrain(ie-j.t-j.b,2,64),ae=Math.max(0,J-q),G=Math.max(0,ie-W),ee=$._pushmargin,te=$._pushmarginIds;if(!1!==j.autoexpand){if(re){var le=re.pad;if(void 0===le&&(le=Math.min(12,j.l,j.r,j.t,j.b)),ae){var ue=(re.l+re.r)/ae;ue>1&&(re.l/=ue,re.r/=ue)}if(G){var de=(re.t+re.b)/G;de>1&&(re.t/=de,re.b/=de)}ee[Q]={l:{val:void 0!==re.xl?re.xl:re.x,size:re.l+le},r:{val:void 0!==re.xr?re.xr:re.x,size:re.r+le},b:{val:void 0!==re.yb?re.yb:re.y,size:re.b+le},t:{val:void 0!==re.yt?re.yt:re.y,size:re.t+le}},te[Q]=1}else delete ee[Q],delete te[Q];if(!$._replotting)return u.doAutoMargin(Y)}},u.doAutoMargin=function(Y){var Q=Y._fullLayout,re=Q.width,$=Q.height;Q._size||(Q._size={}),R(Q);var J=Q._size,ie=Q.margin,j=l.extendFlat({},J),q=ie.l,W=ie.r,ae=ie.t,G=ie.b,ee=Q._pushmargin,te=Q._pushmarginIds;if(!1!==Q.margin.autoexpand){for(var le in ee)te[le]||delete ee[le];for(var ue in ee.base={l:{val:0,size:q},r:{val:1,size:W},t:{val:1,size:ae},b:{val:0,size:G}},ee){var de=ee[ue].l||{},he=ee[ue].b||{},be=de.val,me=de.size,_e=he.val,Ee=he.size;for(var De in ee){if(b(me)&&ee[De].r){var Se=ee[De].r.val,Fe=ee[De].r.size;if(Se>be){var ve=(me*Se+(Fe-re)*be)/(Se-be),Te=(Fe*(1-be)+(me-re)*(1-Se))/(Se-be);ve+Te>q+W&&(q=ve,W=Te)}}if(b(Ee)&&ee[De].t){var Ie=ee[De].t.val,Ce=ee[De].t.size;if(Ie>_e){var Re=(Ee*Ie+(Ce-$)*_e)/(Ie-_e),Ue=(Ce*(1-_e)+(Ee-$)*(1-Ie))/(Ie-_e);Re+Ue>G+ae&&(G=Re,ae=Ue)}}}}}var bt,qe=l.constrain(re-ie.l-ie.r,2,64),Xe=l.constrain($-ie.t-ie.b,2,64),st=Math.max(0,re-qe),He=Math.max(0,$-Xe);if(st){var $e=(q+W)/st;$e>1&&(q/=$e,W/=$e)}if(He){var et=(G+ae)/He;et>1&&(G/=et,ae/=et)}if(J.l=Math.round(q),J.r=Math.round(W),J.t=Math.round(ae),J.b=Math.round(G),J.p=Math.round(ie.pad),J.w=Math.round(re)-J.l-J.r,J.h=Math.round($)-J.t-J.b,!Q._replotting&&u.didMarginChange(j,J)){"_redrawFromAutoMarginCount"in Q?Q._redrawFromAutoMarginCount++:Q._redrawFromAutoMarginCount=1;var tt=3*(1+Object.keys(te).length);if(Q._redrawFromAutoMarginCount<tt)return e.call("_doPlot",Y);Q._size=j,l.warn("Too many auto-margin redraws.")}bt=h.list(Y,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(At){for(var Ut=0;Ut<bt.length;Ut++){var Ct=bt[Ut][At];Ct&&Ct()}})};var L=["l","r","t","b","p","w","h"];function I(Y,Q,re){var $=!1,ie=l.syncOrAsync([u.previousPromises,function(){if(Y._transitionData)return Y._transitioning=!1,function(j){var q=Promise.resolve();if(!j)return q;for(;j.length;)q=q.then(j.shift());return q}(Y._transitionData._interruptCallbacks)},re.prepareFn,u.rehover,function(){return Y.emit("plotly_transitioning",[]),new Promise(function(j){Y._transitioning=!0,Q.duration>0&&(Y._transitioningWithDuration=!0),Y._transitionData._interruptCallbacks.push(function(){$=!0}),re.redraw&&Y._transitionData._interruptCallbacks.push(function(){return e.call("redraw",Y)}),Y._transitionData._interruptCallbacks.push(function(){Y.emit("plotly_transitioninterrupted",[])});var q=0,W=0;function ae(){return q++,function(){var G;W++,$||W!==q||(G=j,!Y._transitionData||(function(ee){if(ee)for(;ee.length;)ee.shift()}(Y._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(re.redraw)return e.call("redraw",Y)}).then(function(){Y._transitioning=!1,Y._transitioningWithDuration=!1,Y.emit("plotly_transitioned",[])}).then(G)))}}re.runFn(ae),setTimeout(ae())})}],Y);return ie&&ie.then||(ie=Promise.resolve()),ie.then(function(){return Y})}u.didMarginChange=function(Y,Q){for(var re=0;re<L.length;re++){var $=L[re],J=Y[$],ie=Q[$];if(!b(J)||Math.abs(ie-J)>1)return!0}return!1},u.graphJson=function(Y,Q,re,$,J,ie){(J&&Q&&!Y._fullData||J&&!Q&&!Y._fullLayout)&&u.supplyDefaults(Y);var q=J?Y._fullLayout:Y.layout,W=(Y._transitionData||{})._frames;function ae(te,le){if("function"==typeof te)return le?"_function_":null;if(l.isPlainObject(te)){var ue,de={};return Object.keys(te).sort().forEach(function(he){if(-1===["_","["].indexOf(he.charAt(0)))if("function"!=typeof te[he]){if("keepdata"===re){if("src"===he.substr(he.length-3))return}else if("keepstream"===re){if("string"==typeof(ue=te[he+"src"])&&ue.indexOf(":")>0&&!l.isPlainObject(te.stream))return}else if("keepall"!==re&&"string"==typeof(ue=te[he+"src"])&&ue.indexOf(":")>0)return;de[he]=ae(te[he],le)}else le&&(de[he]="_function")}),de}return Array.isArray(te)?te.map(function(he){return ae(he,le)}):l.isTypedArray(te)?l.simpleMap(te,l.identity):l.isJSDate(te)?l.ms2DateTimeLocal(+te):te}var G={data:((J?Y._fullData:Y.data)||[]).map(function(te){var le=ae(te);return Q&&delete le.fit,le})};if(!Q&&(G.layout=ae(q),J)){var ee=q._size;G.layout.computed={margin:{b:ee.b,l:ee.l,r:ee.r,t:ee.t}}}return W&&(G.frames=ae(W)),ie&&(G.config=ae(Y._context,!0)),"object"===$?G:JSON.stringify(G)},u.modifyFrames=function(Y,Q){var re,$,J,ie=Y._transitionData._frames,j=Y._transitionData._frameHash;for(re=0;re<Q.length;re++)switch(($=Q[re]).type){case"replace":var q=(ie[$.index]||{}).name,W=(J=$.value).name;ie[$.index]=j[W]=J,W!==q&&(delete j[q],j[W]=J);break;case"insert":j[(J=$.value).name]=J,ie.splice($.index,0,J);break;case"delete":delete j[(J=ie[$.index]).name],ie.splice($.index,1)}return Promise.resolve()},u.computeFrame=function(Y,Q){var re,$,J,ie,j=Y._transitionData._frameHash;if(!Q)throw new Error("computeFrame must be given a string frame name");var q=j[Q.toString()];if(!q)return!1;for(var W=[q],ae=[q.name];q.baseframe&&(q=j[q.baseframe.toString()])&&-1===ae.indexOf(q.name);)W.push(q),ae.push(q.name);for(var G={};q=W.pop();)if(q.layout&&(G.layout=u.extendLayout(G.layout,q.layout)),q.data){if(G.data||(G.data=[]),!($=q.traces))for($=[],re=0;re<q.data.length;re++)$[re]=re;for(G.traces||(G.traces=[]),re=0;re<q.data.length;re++)null!=(J=$[re])&&(-1===(ie=G.traces.indexOf(J))&&(G.traces[ie=G.data.length]=J),G.data[ie]=u.extendTrace(G.data[ie],q.data[re]))}return G},u.recomputeFrameHash=function(Y){for(var Q=Y._transitionData._frameHash={},re=Y._transitionData._frames,$=0;$<re.length;$++){var J=re[$];J&&J.name&&(Q[J.name]=J)}},u.extendObjectWithContainers=function(Y,Q,re){var $,J,ie,j,q,W,ae,G=l.extendDeepNoArrays({},Q||{}),ee=l.expandObjectPaths(G),te={};if(re&&re.length)for(ie=0;ie<re.length;ie++)void 0===(J=($=l.nestedProperty(ee,re[ie])).get())?l.nestedProperty(te,re[ie]).set(null):($.set(null),l.nestedProperty(te,re[ie]).set(J));if(Y=l.extendDeepNoArrays(Y||{},ee),re&&re.length)for(ie=0;ie<re.length;ie++)if(W=l.nestedProperty(te,re[ie]).get()){for(ae=(q=l.nestedProperty(Y,re[ie])).get(),Array.isArray(ae)||q.set(ae=[]),j=0;j<W.length;j++){var le=W[j];ae[j]=null===le?null:u.extendObjectWithContainers(ae[j],le)}q.set(ae)}return Y},u.dataArrayContainers=["transforms","dimensions"],u.layoutArrayContainers=e.layoutArrayContainers,u.extendTrace=function(Y,Q){return u.extendObjectWithContainers(Y,Q,u.dataArrayContainers)},u.extendLayout=function(Y,Q){return u.extendObjectWithContainers(Y,Q,u.layoutArrayContainers)},u.transition=function(Y,Q,re,$,J,ie){var j={redraw:J.redraw},q={},W=[];return j.prepareFn=function(){for(var ae=Array.isArray(Q)?Q.length:0,G=$.slice(0,ae),ee=0;ee<G.length;ee++){var te=G[ee],le=Y._fullData[te]._module;if(le){if(le.animatable){var ue=le.basePlotModule.name;q[ue]||(q[ue]=[]),q[ue].push(te)}Y.data[G[ee]]=u.extendTrace(Y.data[G[ee]],Q[ee])}}var de=l.expandObjectPaths(l.extendDeepNoArrays({},re)),he=/^[xy]axis[0-9]*$/;for(var be in de)he.test(be)&&delete de[be].range;u.extendLayout(Y.layout,de),delete Y.calcdata,u.supplyDefaults(Y),u.doCalcdata(Y);var me=l.expandObjectPaths(re);if(me){var _e=Y._fullLayout._plots;for(var Ee in _e){var De=_e[Ee],Se=De.xaxis,Fe=De.yaxis,ve=Se.range.slice(),Te=Fe.range.slice(),Ie=null,Ce=null,Re=null,Ue=null;Array.isArray(me[Se._name+".range"])?Ie=me[Se._name+".range"].slice():Array.isArray((me[Se._name]||{}).range)&&(Ie=me[Se._name].range.slice()),Array.isArray(me[Fe._name+".range"])?Ce=me[Fe._name+".range"].slice():Array.isArray((me[Fe._name]||{}).range)&&(Ce=me[Fe._name].range.slice()),ve&&Ie&&(Se.r2l(ve[0])!==Se.r2l(Ie[0])||Se.r2l(ve[1])!==Se.r2l(Ie[1]))&&(Re={xr0:ve,xr1:Ie}),Te&&Ce&&(Fe.r2l(Te[0])!==Fe.r2l(Ce[0])||Fe.r2l(Te[1])!==Fe.r2l(Ce[1]))&&(Ue={yr0:Te,yr1:Ce}),(Re||Ue)&&W.push(l.extendFlat({plotinfo:De},Re,Ue))}}return Promise.resolve()},j.runFn=function(ae){var G,ee,te=Y._fullLayout._basePlotModules,le=W.length;if(re)for(ee=0;ee<te.length;ee++)te[ee].transitionAxes&&te[ee].transitionAxes(Y,W,ie,ae);for(var ue in le?((G=l.extendFlat({},ie)).duration=0,delete q.cartesian):G=ie,q){var de=q[ue];Y._fullData[de[0]]._module.basePlotModule.plot(Y,de,G,ae)}},I(Y,ie,j)},u.transitionFromReact=function(Y,Q,re,$){var J=Y._fullLayout,ie=J.transition,j={},q=[];return j.prepareFn=function(){var W=J._plots;for(var ae in j.redraw=!1,"some"===Q.anim&&(j.redraw=!0),"some"===re.anim&&(j.redraw=!0),W){var G=W[ae],ee=G.xaxis,te=G.yaxis,le=$[ee._name].range.slice(),ue=$[te._name].range.slice(),de=ee.range.slice(),he=te.range.slice();ee.setScale(),te.setScale();var be=null,me=null;ee.r2l(le[0])===ee.r2l(de[0])&&ee.r2l(le[1])===ee.r2l(de[1])||(be={xr0:le,xr1:de}),te.r2l(ue[0])===te.r2l(he[0])&&te.r2l(ue[1])===te.r2l(he[1])||(me={yr0:ue,yr1:he}),(be||me)&&q.push(l.extendFlat({plotinfo:G},be,me))}return Promise.resolve()},j.runFn=function(W){for(var ae,G,ee,te=Y._fullData,le=Y._fullLayout._basePlotModules,ue=[],de=0;de<te.length;de++)ue.push(de);function he(){if(Y._fullLayout)for(var me=0;me<le.length;me++)le[me].transitionAxes&&le[me].transitionAxes(Y,q,ae,W)}function be(){if(Y._fullLayout)for(var me=0;me<le.length;me++)le[me].plot(Y,ee,G,W)}q.length&&Q.anim?"traces first"===ie.ordering?(ae=l.extendFlat({},ie,{duration:0}),ee=ue,G=ie,setTimeout(he,ie.duration),be()):(ae=ie,ee=null,G=l.extendFlat({},ie,{duration:0}),setTimeout(be,ae.duration),he()):q.length?(ae=ie,he()):Q.anim&&(ee=ue,G=ie,be())},I(Y,ie,j)},u.doCalcdata=function(Y,Q){var re,$,J,ie,j=h.list(Y),q=Y._fullData,W=Y._fullLayout,ae=new Array(q.length),G=(Y.calcdata||[]).slice();for(Y.calcdata=ae,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},Y._hmpixcount=0,Y._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},J=0;J<q.length;J++)Array.isArray(Q)&&-1===Q.indexOf(J)&&(ae[J]=G[J]);for(J=0;J<q.length;J++)(re=q[J])._arrayAttrs=o.findArrayAttributes(re),re._extremes={};var ee=W._subplots.polar||[];for(J=0;J<ee.length;J++)j.push(W[ee[J]].radialaxis,W[ee[J]].angularaxis);for(var te in W._colorAxes){var le=W[te];!1!==le.cauto&&(delete le.cmin,delete le.cmax)}var ue=!1;function de(me){if($=(re=q[me])._module,!0===re.visible&&re.transforms){if($&&$.calc){var _e=$.calc(Y,re);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(ie=0;ie<re.transforms.length;ie++){var Ee=re.transforms[ie];($=w[Ee.type])&&$.calcTransform&&(re._hasCalcTransform=!0,ue=!0,$.calcTransform(Y,re,Ee))}}}function he(me,_e){if(!!($=(re=q[me])._module).isContainer===_e){var Ee=[];if(!0===re.visible&&0!==re._length){delete re._indexToPoints;var De=re.transforms||[];for(ie=De.length-1;ie>=0;ie--)if(De[ie].enabled){re._indexToPoints=De[ie]._indexToPoints;break}$&&$.calc&&(Ee=$.calc(Y,re))}Array.isArray(Ee)&&Ee[0]||(Ee=[{x:y,y}]),Ee[0].t||(Ee[0].t={}),Ee[0].trace=re,ae[me]=Ee}}for(V(j,q,W),J=0;J<q.length;J++)he(J,!0);for(J=0;J<q.length;J++)de(J);for(ue&&V(j,q,W),J=0;J<q.length;J++)he(J,!0);for(J=0;J<q.length;J++)he(J,!1);Z(Y);var be=function(me,_e){var Ee,De,Se,Fe,ve,Te=[];function Ie(gt,Be,Ve){var Le=Be._id.charAt(0);if("histogram2dcontour"===gt){var je=Be._counterAxes[0],Ke=h.getFromId(_e,je),ft="x"===Le||"x"===je&&"category"===Ke.type,mt="y"===Le||"y"===je&&"category"===Ke.type;return function(pt,Ot){return 0===pt||0===Ot||ft&&pt===Ve[Ot].length-1||mt&&Ot===Ve.length-1?-1:("y"===Le?Ot:pt)-1}}return function(pt,Ot){return"y"===Le?Ot:pt}}var Ce={min:function(gt){return l.aggNums(Math.min,null,gt)},max:function(gt){return l.aggNums(Math.max,null,gt)},sum:function(gt){return l.aggNums(function(Be,Ve){return Be+Ve},null,gt)},total:function(gt){return l.aggNums(function(Be,Ve){return Be+Ve},null,gt)},mean:function(gt){return l.mean(gt)},median:function(gt){return l.median(gt)}};for(Ee=0;Ee<me.length;Ee++){var Re=me[Ee];if("category"===Re.type){var Ue=Re.categoryorder.match(B);if(Ue){var qe=Ue[1],Xe=Ue[2],st=Re._id.charAt(0),He="x"===st,$e=[];for(De=0;De<Re._categories.length;De++)$e.push([Re._categories[De],[]]);for(De=0;De<Re._traceIndices.length;De++){var et=Re._traceIndices[De],tt=_e._fullData[et];if(!0===tt.visible){var ct=tt.type;e.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var bt="splom"===ct,At="scattergl"===ct,Ut=_e.calcdata[et];for(Se=0;Se<Ut.length;Se++){var Ct,dt,at=Ut[Se];if(bt){var Nt=tt._axesDim[Re._id];if(!He){var rn=tt._diag[Nt][0];rn&&(Re=_e._fullLayout[h.id2name(rn)])}var en=at.trace.dimensions[Nt].values;for(Fe=0;Fe<en.length;Fe++)for(Ct=Re._categoriesMap[en[Fe]],ve=0;ve<at.trace.dimensions.length;ve++)ve!==Nt&&$e[Ct][1].push(at.trace.dimensions[ve].values[Fe])}else if(At){for(Fe=0;Fe<at.t.x.length;Fe++)He?(Ct=at.t.x[Fe],dt=at.t.y[Fe]):(Ct=at.t.y[Fe],dt=at.t.x[Fe]),$e[Ct][1].push(dt);at.t&&at.t._scene&&delete at.t._scene.dirty}else if(at.hasOwnProperty("z")){var Qe=Ie(tt.type,Re,dt=at.z);for(Fe=0;Fe<dt.length;Fe++)for(ve=0;ve<dt[Fe].length;ve++)(Ct=Qe(ve,Fe))+1&&$e[Ct][1].push(dt[Fe][ve])}else for(void 0===(Ct=at.p)&&(Ct=at[st]),void 0===(dt=at.s)&&(dt=at.v),void 0===dt&&(dt=He?at.y:at.x),Array.isArray(dt)||(dt=void 0===dt?[]:[dt]),Fe=0;Fe<dt.length;Fe++)$e[Ct][1].push(dt[Fe])}}}Re._categoriesValue=$e;var Rt=[];for(De=0;De<$e.length;De++)Rt.push([$e[De][0],Ce[qe]($e[De][1])]);Rt.sort(function(gt,Be){return gt[1]-Be[1]}),Re._categoriesAggregatedValue=Rt,Re._initialCategories=Rt.map(function(gt){return gt[0]}),"descending"===Xe&&Re._initialCategories.reverse(),Te=Te.concat(Re.sortByInitialCategories())}}}return Te}(j,Y);if(be.length){for(W._numBoxes=0,W._numViolins=0,J=0;J<be.length;J++)he(be[J],!0);for(J=0;J<be.length;J++)he(be[J],!1);Z(Y)}e.getComponentMethod("fx","calc")(Y),e.getComponentMethod("errorbars","calc")(Y)};var B=/(total|sum|min|max|mean|median) (ascending|descending)/;function V(Y,Q,re){var $={};function J(W){W.clearCalc(),"multicategory"===W.type&&W.setupMultiCategory(Q),$[W._id]=1}l.simpleMap(Y,J);for(var ie=re._axisMatchGroups||[],j=0;j<ie.length;j++)for(var q in ie[j])$[q]||J(re[h.id2name(q)])}function Z(Y){var Q,re,$,J=Y._fullLayout,ie=J._visibleModules,j={};for(re=0;re<ie.length;re++){var q=ie[re],W=q.crossTraceCalc;if(W){var ae=q.basePlotModule.name;j[ae]?l.pushUnique(j[ae],W):j[ae]=[W]}}for($ in j){var G=j[$],ee=J._subplots[$];if(Array.isArray(ee))for(Q=0;Q<ee.length;Q++){var te=ee[Q],le="cartesian"===$?J._plots[te]:J[te];for(re=0;re<G.length;re++)G[re](Y,le,te)}else for(re=0;re<G.length;re++)G[re](Y)}}u.rehover=function(Y){Y._fullLayout._rehover&&Y._fullLayout._rehover()},u.redrag=function(Y){Y._fullLayout._redrag&&Y._fullLayout._redrag()},u.generalUpdatePerTraceModule=function(Y,Q,re,$){var J,ie=Q.traceHash,j={};for(J=0;J<re.length;J++){var q=re[J],W=q[0].trace;W.visible&&(j[W.type]=j[W.type]||[],j[W.type].push(q))}for(var ae in ie)if(!j[ae]){var G=ie[ae][0];G[0].trace.visible=!1,j[ae]=[G]}for(var ee in j){var te=j[ee];te[0][0].trace._module.plot(Y,Q,l.filterVisible(te),$)}Q.traceHash=j},u.plotBasePlot=function(Y,Q,re,$,J){var ie=e.getModule(Y),j=c(Q.calcdata,ie)[0];ie.plot(Q,j,$,J)},u.cleanBasePlot=function(Y,Q,re,$,J){var ie=J._has&&J._has(Y),j=re._has&&re._has(Y);ie&&!j&&J["_"+Y+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(_,oe,se){"use strict";oe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../lib/polygon").tester,T=v.findIndexOfMin,b=v.isAngleInsideSector,e=v.angleDelta,o=v.angleDist;function i(h,s,d,p){var c,g,m=p[0],u=p[1],w=r(Math.sin(s)-Math.sin(h)),f=r(Math.cos(s)-Math.cos(h)),A=Math.tan(d),M=r(1/A),k=w/f,E=u-k*m;return M?w&&f?g=A*(c=E/(A-k)):f?(c=u*M,g=u):(c=m,g=m*A):w&&f?(c=0,g=E):f?(c=0,g=u):c=g=NaN,[c,g]}function l(h,s,d,p){return v.isFullCircle([s,d])?function(c,g){var m,u=g.length,w=new Array(u+1);for(m=0;m<u;m++){var f=g[m];w[m]=[c*Math.cos(f),c*Math.sin(f)]}return w[m]=w[0].slice(),w}(h,p):function(c,g,m,u){var w,f,A=u.length,M=[];function k(V){return[c*Math.cos(V),c*Math.sin(V)]}function E(V,Z,Y){return i(V,Z,Y,k(V))}function P(V){return v.mod(V,A)}function D(V){return b(V,[g,m])}var F=T(u,function(V){return D(V)?o(V,g):1/0}),R=E(u[F],u[P(F-1)],g);for(M.push(R),w=F,f=0;f<A;w++,f++){var L=u[P(w)];if(!D(L))break;M.push(k(L))}var I=T(u,function(V){return D(V)?o(V,m):1/0}),B=E(u[I],u[P(I+1)],m);return M.push(B),M.push([0,0]),M.push(M[0].slice()),M}(h,s,d,p)}function r(h){return Math.abs(h)>1e-10?h:0}function y(h,s,d){s=s||0,d=d||0;for(var p=h.length,c=new Array(p),g=0;g<p;g++){var m=h[g];c[g]=[s+m[0],d-m[1]]}return c}oe.exports={isPtInsidePolygon:function(h,s,d,p,c){if(!b(s,p))return!1;var g,m;d[0]<d[1]?(g=d[0],m=d[1]):(g=d[1],m=d[0]);var u=x(l(g,p[0],p[1],c)),w=x(l(m,p[0],p[1],c)),f=[h*Math.cos(s),h*Math.sin(s)];return w.contains(f)&&!u.contains(f)},findPolygonOffset:function(h,s,d,p){for(var c=1/0,g=1/0,m=l(h,s,d,p),u=0;u<m.length;u++){var w=m[u];c=Math.min(c,w[0]),g=Math.min(g,-w[1])}return[c,g]},findEnclosingVertexAngles:function(h,s){var d=T(s,function(c){var g=e(c,h);return g>0?g:1/0}),p=v.mod(d+1,s.length);return[s[d],s[p]]},findIntersectionXY:i,findXYatLength:function(h,s,d,p){var c=-s*d,g=s*s+1,m=2*(s*c-d),w=Math.sqrt(m*m-4*g*(c*c+d*d-h*h)),f=(-m+w)/(2*g),A=(-m-w)/(2*g);return[[f,s*f+c+p],[A,s*A+c+p]]},clampTiny:r,pathPolygon:function(h,s,d,p,c,g){return"M"+y(l(h,s,d,p),c,g).join("L")},pathPolygonAnnulus:function(h,s,d,p,c,g,m){var u,w;h<s?(u=h,w=s):(u=s,w=h);var f=y(l(u,d,p,c),g,m);return"M"+y(l(w,d,p,c),g,m).reverse().join("L")+"M"+f.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(_,oe,se){"use strict";var v=_("../get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("./polar"),b=_("./constants"),e=b.attr,o=b.name,i=x(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},oe.exports={attr:e,name:o,idRoot:o,idRegex:i,attrRegex:i,attributes:l,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(r){for(var y=r._fullLayout,h=r.calcdata,s=y._subplots[o],d=0;d<s.length;d++){var p=s[d],c=v(h,o,p),g=y[p]._subplot;g||(g=T(r,p),y[p]._subplot=g),g.plot(c,y,r._promises)}},clean:function(r,y,h,s){for(var d=s._subplots[o]||[],p=s._has&&s._has("gl"),c=y._has&&y._has("gl"),g=p&&!c,m=0;m<d.length;m++){var u=d[m],w=s[u]._subplot;if(!y[u]&&w)for(var f in w.framework.remove(),w.layers["radial-axis-title"].remove(),w.clipPaths)w.clipPaths[f].remove();g&&w._scene&&(w._scene.destroy(),w._scene=null)}},toSVG:_("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(_,oe,se){"use strict";var v=_("../../components/color/attributes"),x=_("../cartesian/layout_attributes"),T=_("../domain").attributes,b=_("../../lib").extendFlat,e=_("../../plot_api/edit_types").overrideAll,o=e({color:x.color,showline:b({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:b({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth},"plot","from-root"),i=e({tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,ticklabelstep:x.ticklabelstep,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickfont:x.tickfont,tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,layer:x.layer},"plot","from-root"),l={visible:b({},x.visible,{dflt:!0}),type:b({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:b({},x.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:b({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:x.categoryorder,categoryarray:x.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:b({},x.title.text,{editType:"plot",dflt:""}),font:b({},x.title.font,{editType:"plot"}),editType:"plot"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}};b(l,o,i);var r={visible:b({},x.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:x.autotypenumbers,categoryorder:x.categoryorder,categoryarray:x.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};b(r,o,i),oe.exports={domain:T({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:v.background},radialaxis:l,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../../plot_api/plot_template"),b=_("../subplot_defaults"),e=_("../get_data").getSubplotData,o=_("../cartesian/tick_value_defaults"),i=_("../cartesian/tick_mark_defaults"),l=_("../cartesian/tick_label_defaults"),r=_("../cartesian/prefix_suffix_defaults"),y=_("../cartesian/category_order_defaults"),h=_("../cartesian/line_grid_defaults"),s=_("../cartesian/axis_autotype"),d=_("./layout_attributes"),p=_("./set_convert"),c=_("./constants"),g=c.axisNames;function m(w,f,A,M){var k=A("bgcolor");M.bgColor=x.combine(k,M.paper_bgcolor);var E=A("sector");A("hole");var P,D=e(M.fullData,c.name,M.id),F=M.layoutOut;function R(ae,G){return A(P+"."+ae,G)}for(var L=0;L<g.length;L++){v.isPlainObject(w[P=g[L]])||(w[P]={});var I=w[P],B=T.newContainer(f,P);B._id=B._name=P,B._attr=M.id+"."+P,B._traceIndices=D.map(function(ae){return ae._expandedIndex});var V=c.axisName2dataArray[P],Z=u(I,B,R,D,V,M);y(I,B,R,{axData:D,dataAttr:V});var Y=R("visible");switch(p(B,f,F),R("uirevision",f.uirevision),B._m=1,P){case"radialaxis":var Q=R("autorange",!B.isValidRange(I.range));I.autorange=Q,!Q||"linear"!==Z&&"-"!==Z||R("rangemode"),"reversed"===Q&&(B._m=-1),R("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===Z){v.log("Polar plots do not support date angular axes yet.");for(var re=0;re<D.length;re++)D[re].visible=!1;Z=I.type=B.type="linear"}R("linear"===Z?"thetaunit":"period");var $=R("direction");R("rotation",{counterclockwise:0,clockwise:90}[$])}if(r(I,B,R,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),Y){var J,ie,j,q,W=M.font||{};ie=(J=R("color"))===I.color?J:W.color,j=W.size,q=W.family,o(I,B,R,B.type),l(I,B,R,B.type,{font:{color:ie,size:j,family:q}}),i(I,B,R,{outerTicks:!0}),h(I,B,R,{dfltColor:J,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[P]}),R("layer"),"radialaxis"===P&&(R("side"),R("angle",E[0]),R("title.text"),v.coerceFont(R,"title.font",{color:ie,size:v.bigFont(j),family:q}))}"category"!==Z&&R("hoverformat"),B._input=I}"category"===f.angularaxis.type&&A("gridshape")}function u(w,f,A,M,k,E){var P=A("autotypenumbers",E.autotypenumbersDflt);if("-"===A("type")){for(var D,F=0;F<M.length;F++)if(M[F].visible){D=M[F];break}D&&D[k]&&(f.type=s(D[k],"gregorian",{noMultiCategory:!0,autotypenumbers:P})),"-"===f.type?f.type="linear":w.type=f.type}return f.type}oe.exports=function(w,f,A){b(w,f,A,{type:c.name,attributes:d,handleDefaults:m,font:f.font,autotypenumbersDflt:f.autotypenumbers,paper_bgcolor:f.paper_bgcolor,fullData:A,layoutOut:f})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../lib"),e=b.strRotate,o=b.strTranslate,i=_("../../components/color"),l=_("../../components/drawing"),r=_("../plots"),y=_("../../plots/cartesian/axes"),h=_("../cartesian/set_convert"),s=_("./set_convert"),d=_("../cartesian/autorange").doAutoRange,p=_("../cartesian/dragbox"),c=_("../../components/dragelement"),g=_("../../components/fx"),m=_("../../components/titles"),u=_("../cartesian/select").prepSelect,w=_("../cartesian/select").selectOnClick,f=_("../cartesian/select").clearSelect,A=_("../../lib/setcursor"),M=_("../../lib/clear_gl_canvases"),k=_("../../plot_api/subroutines").redrawReglTraces,E=_("../../constants/alignment").MID_SHIFT,P=_("./constants"),D=_("./helpers"),F=_("../smith/helpers"),R=F.smith,L=F.reactanceArc,I=F.resistanceArc,B=F.smithTransform,V=b._,Z=b.mod,Y=b.deg2rad,Q=b.rad2deg;function re(q,W,ae){this.isSmith=ae||!1,this.id=W,this.gd=q,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var G=q._fullLayout;this.clipIds.forTraces="clip"+G._uid+W+"-for-traces",this.clipPaths.forTraces=G._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=G["_"+(ae?"smith":"polar")+"layer"].append("g").attr("class",W),this.getHole=function(te){return this.isSmith?0:te.hole},this.getSector=function(te){return this.isSmith?[0,360]:te.sector},this.getRadial=function(te){return this.isSmith?te.realaxis:te.radialaxis},this.getAngular=function(te){return this.isSmith?te.imaginaryaxis:te.angularaxis},ae||(this.radialTickLayout=null,this.angularTickLayout=null)}var $=re.prototype;function J(q){var W=q.ticks+String(q.ticklen)+String(q.showticklabels);return"side"in q&&(W+=q.side),W}function ie(q,W){return W[b.findIndexOfMin(W,function(ae){return b.angleDist(q,ae)})]}function j(q,W,ae){return W?(q.attr("display",null),q.attr(ae)):q&&q.attr("display","none"),q}oe.exports=function(q,W,ae){return new re(q,W,ae)},$.plot=function(q,W){for(var ae=W[this.id],G=!1,ee=0;ee<q.length;ee++)if(!1===q[ee][0].trace.cliponaxis){G=!0;break}this._hasClipOnAxisFalse=G,this.updateLayers(W,ae),this.updateLayout(W,ae),r.generalUpdatePerTraceModule(this.gd,this,q,ae),this.updateFx(W,ae),this.isSmith&&(delete ae.realaxis.range,delete ae.imaginaryaxis.range)},$.updateLayers=function(q,W){var ae=this.isSmith,G=this.layers,ee=this.getRadial(W),te=this.getAngular(W),le=P.layerNames,ue=le.indexOf("frontplot"),de=le.slice(0,ue),he="below traces"===te.layer,be="below traces"===ee.layer;he&&de.push("angular-line"),be&&de.push("radial-line"),he&&de.push("angular-axis"),be&&de.push("radial-axis"),de.push("frontplot"),he||de.push("angular-line"),be||de.push("radial-line"),he||de.push("angular-axis"),be||de.push("radial-axis");var me=(ae?"smith":"polar")+"sublayer",_e=this.framework.selectAll("."+me).data(de,String);_e.enter().append("g").attr("class",function(Ee){return me+" "+Ee}).each(function(Ee){var De=G[Ee]=v.select(this);switch(Ee){case"frontplot":ae||De.append("g").classed("barlayer",!0),De.append("g").classed("scatterlayer",!0);break;case"backplot":De.append("g").classed("maplayer",!0);break;case"plotbg":G.bg=De.append("path");break;case"radial-grid":case"angular-grid":De.style("fill","none");break;case"radial-line":De.append("line").style("fill","none");break;case"angular-line":De.append("path").style("fill","none")}}),_e.order()},$.updateLayout=function(q,W){var ae=this.layers,G=q._size,ee=this.getRadial(W),te=this.getAngular(W),le=W.domain.x,ue=W.domain.y;this.xOffset=G.l+G.w*le[0],this.yOffset=G.t+G.h*(1-ue[1]);var de=this.xLength=G.w*(le[1]-le[0]),he=this.yLength=G.h*(ue[1]-ue[0]),be=this.getSector(W);this.sectorInRad=be.map(Y);var me,_e,Ee,De,Se,At,at,Nt,rn,en,Ge,Qe,Rt,gt,Be,Fe=this.sectorBBox=(rn=(At=be)[1]-(Nt=At[0]),Ge=(en=Z(Nt,360))+rn,Qe=Math.cos(Y(en)),Rt=Math.sin(Y(en)),gt=Math.cos(Y(Ge)),Be=Math.sin(Y(Ge)),at=en<=90&&Ge>=90||en>90&&Ge>=450?1:Rt<=0&&Be<=0?0:Math.max(Rt,Be),[en<=180&&Ge>=180||en>180&&Ge>=540?-1:Qe>=0&&gt>=0?0:Math.min(Qe,gt),en<=270&&Ge>=270||en>270&&Ge>=630?-1:Rt>=0&&Be>=0?0:Math.min(Rt,Be),Ge>=360?1:Qe<=0&&gt<=0?0:Math.max(Qe,gt),at]),ve=Fe[2]-Fe[0],Ie=he/de,Ce=Math.abs((Fe[3]-Fe[1])/ve);Ie>Ce?(me=de,Se=(he-(_e=de*Ce))/G.h/2,Ee=[le[0],le[1]],De=[ue[0]+Se,ue[1]-Se]):(_e=he,Se=(de-(me=he/Ce))/G.w/2,Ee=[le[0]+Se,le[1]-Se],De=[ue[0],ue[1]]),this.xLength2=me,this.yLength2=_e,this.xDomain2=Ee,this.yDomain2=De;var Re,Ue=this.xOffset2=G.l+G.w*Ee[0],qe=this.yOffset2=G.t+G.h*(1-De[1]),Xe=this.radius=me/ve,st=this.innerRadius=this.getHole(W)*Xe,He=this.cx=Ue-Xe*Fe[0],$e=this.cy=qe+Xe*Fe[3],et=this.cxx=He-Ue,tt=this.cyy=$e-qe,ct=ee.side;"counterclockwise"===ct?(Re=ct,ct="top"):"clockwise"===ct&&(Re=ct,ct="bottom"),this.radialAxis=this.mockAxis(q,W,ee,{_id:"x",side:ct,_trueSide:Re,domain:[st/G.w,Xe/G.w]}),this.angularAxis=this.mockAxis(q,W,te,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(q,W),this.updateAngularAxis(q,W),this.updateRadialAxis(q,W),this.updateRadialAxisTitle(q,W),this.xaxis=this.mockCartesianAxis(q,W,{_id:"x",domain:Ee}),this.yaxis=this.mockCartesianAxis(q,W,{_id:"y",domain:De});var bt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",bt).attr("transform",o(et,tt)),ae.frontplot.attr("transform",o(Ue,qe)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ae.bg.attr("d",bt).attr("transform",o(He,$e)).call(i.fill,W.bgcolor)},$.mockAxis=function(q,W,ae,G){var ee=b.extendFlat({},ae,G);return s(ee,W,q),ee},$.mockCartesianAxis=function(q,W,ae){var G=this,ee=G.isSmith,te=ae._id,le=b.extendFlat({type:"linear"},ae);h(le,q);var ue={x:[0,2],y:[1,3]};return le.setRange=function(){var de=G.sectorBBox,he=ue[te],be=G.radialAxis._rl,me=(be[1]-be[0])/(1-G.getHole(W));le.range=[de[he[0]]*me,de[he[1]]*me]},le.isPtWithinRange="x"!==te||ee?function(){return!0}:function(de){return G.isPtInside(de)},le.setRange(),le.setScale(),le},$.doAutoRange=function(q,W){var ae=this.gd,G=this.radialAxis,ee=this.getRadial(W);d(ae,G);var te=G.range;ee.range=te.slice(),ee._input.range=te.slice(),G._rl=[G.r2l(te[0],null,"gregorian"),G.r2l(te[1],null,"gregorian")]},$.updateRadialAxis=function(q,W){var ae=this,G=ae.gd,ee=ae.layers,te=ae.radius,le=ae.innerRadius,ue=ae.cx,de=ae.cy,he=ae.getRadial(W),be=Z(ae.getSector(W)[0],360),me=ae.radialAxis,_e=le<te,Ee=ae.isSmith;Ee||(ae.fillViewInitialKey("radialaxis.angle",he.angle),ae.fillViewInitialKey("radialaxis.range",me.range.slice()),me.setGeometry()),"auto"===me.tickangle&&be>90&&be<=270&&(me.tickangle=180);var De=Ee?function(Xe){var st=B(ae,R([Xe.x,0]));return o(st[0]-ue,st[1]-de)}:function(Xe){return o(me.l2p(Xe.x)+le,0)},Se=Ee?function(Xe){return I(ae,Xe.x,-1/0,1/0)}:function(Xe){return ae.pathArc(me.r2p(Xe.x)+le)},Fe=J(he);if(ae.radialTickLayout!==Fe&&(ee["radial-axis"].selectAll(".xtick").remove(),ae.radialTickLayout=Fe),_e){me.setScale();var ve=0,Te=Ee?(me.tickvals||[]).filter(function(Xe){return Xe>=0}).map(function(Xe){return y.tickText(me,Xe,!0,!1)}):y.calcTicks(me),Ie=Ee?Te:y.clipEnds(me,Te),Ce=y.getTickSigns(me)[2];Ee&&(("top"===me.ticks&&"bottom"===me.side||"bottom"===me.ticks&&"top"===me.side)&&(Ce=-Ce),"top"===me.ticks&&"top"===me.side&&(ve=-me.ticklen),"bottom"===me.ticks&&"bottom"===me.side&&(ve=me.ticklen)),y.drawTicks(G,me,{vals:Te,layer:ee["radial-axis"],path:y.makeTickPath(me,0,Ce),transFn:De,crisp:!1}),y.drawGrid(G,me,{vals:Ie,layer:ee["radial-grid"],path:Se,transFn:b.noop,crisp:!1}),y.drawLabels(G,me,{vals:Te,layer:ee["radial-axis"],transFn:De,labelFns:y.makeLabelFns(me,ve)})}var Re=ae.radialAxisAngle=ae.vangles?Q(ie(Y(he.angle),ae.vangles)):he.angle,Ue=o(ue,de),qe=Ue+e(-Re);j(ee["radial-axis"],_e&&(he.showticklabels||he.ticks),{transform:qe}),j(ee["radial-grid"],_e&&he.showgrid,{transform:Ee?"":Ue}),j(ee["radial-line"].select("line"),_e&&he.showline,{x1:Ee?-te:le,y1:0,x2:te,y2:0,transform:qe}).attr("stroke-width",he.linewidth).call(i.stroke,he.linecolor)},$.updateRadialAxisTitle=function(q,W,ae){if(!this.isSmith){var G=this.gd,ee=this.radius,te=this.cx,le=this.cy,ue=this.getRadial(W),de=this.id+"title",he=0;if(ue.title){var be=l.bBox(this.layers["radial-axis"].node()).height,me=ue.title.font.size,_e=ue.side;he="top"===_e?me:"counterclockwise"===_e?-(be+.4*me):be+.8*me}var Ee=void 0!==ae?ae:this.radialAxisAngle,De=Y(Ee),Se=Math.cos(De),Fe=Math.sin(De),ve=te+ee/2*Se+he*Fe,Te=le-ee/2*Fe+he*Se;this.layers["radial-axis-title"]=m.draw(G,de,{propContainer:ue,propName:this.id+".radialaxis.title",placeholder:V(G,"Click to enter radial axis title"),attributes:{x:ve,y:Te,"text-anchor":"middle"},transform:{rotate:-Ee}})}},$.updateAngularAxis=function(q,W){var ae=this,G=ae.gd,ee=ae.layers,te=ae.radius,le=ae.innerRadius,ue=ae.cx,de=ae.cy,he=ae.getAngular(W),be=ae.angularAxis,me=ae.isSmith;me||(ae.fillViewInitialKey("angularaxis.rotation",he.rotation),be.setGeometry(),be.setScale());var _e=me?function(Xe){var st=B(ae,R([0,Xe.x]));return Math.atan2(st[0]-ue,st[1]-de)-Math.PI/2}:function(Xe){return be.t2g(Xe.x)};"linear"===be.type&&"radians"===be.thetaunit&&(be.tick0=Q(be.tick0),be.dtick=Q(be.dtick));var Ee=function(Xe){return o(ue+te*Math.cos(Xe),de-te*Math.sin(Xe))},De=me?function(Xe){var st=B(ae,R([0,Xe.x]));return o(st[0],st[1])}:function(Xe){return Ee(_e(Xe))},Se=me?function(Xe){var st=B(ae,R([0,Xe.x])),He=Math.atan2(st[0]-ue,st[1]-de)-Math.PI/2;return o(st[0],st[1])+e(-Q(He))}:function(Xe){var st=_e(Xe);return Ee(st)+e(-Q(st))},Fe=me?function(Xe){return L(ae,Xe.x,0,1/0)}:function(Xe){var st=_e(Xe),He=Math.cos(st),$e=Math.sin(st);return"M"+[ue+le*He,de-le*$e]+"L"+[ue+te*He,de-te*$e]},ve=y.makeLabelFns(be,0).labelStandoff,Te={xFn:function(Xe){var st=_e(Xe);return Math.cos(st)*ve},yFn:function(Xe){var st=_e(Xe),He=Math.sin(st)>0?.2:1;return-Math.sin(st)*(ve+Xe.fontSize*He)+Math.abs(Math.cos(st))*(Xe.fontSize*E)},anchorFn:function(Xe){var st=_e(Xe),He=Math.cos(st);return Math.abs(He)<.1?"middle":He>0?"start":"end"},heightFn:function(Xe,st,He){var $e=_e(Xe);return-.5*(1+Math.sin($e))*He}},Ie=J(he);ae.angularTickLayout!==Ie&&(ee["angular-axis"].selectAll("."+be._id+"tick").remove(),ae.angularTickLayout=Ie);var Ce,Re=me?[1/0].concat(be.tickvals||[]).map(function(Xe){return y.tickText(be,Xe,!0,!1)}):y.calcTicks(be);if(me&&(Re[0].text="\u221e",Re[0].fontSize*=1.75),"linear"===W.gridshape?(Ce=Re.map(_e),b.angleDelta(Ce[0],Ce[1])<0&&(Ce=Ce.slice().reverse())):Ce=null,ae.vangles=Ce,"category"===be.type&&(Re=Re.filter(function(Xe){return b.isAngleInsideSector(_e(Xe),ae.sectorInRad)})),be.visible){var Ue="inside"===be.ticks?-1:1;y.drawTicks(G,be,{vals:Re,layer:ee["angular-axis"],path:"M"+Ue*((be.linewidth||1)/2)+",0h"+Ue*be.ticklen,transFn:Se,crisp:!1}),y.drawGrid(G,be,{vals:Re,layer:ee["angular-grid"],path:Fe,transFn:b.noop,crisp:!1}),y.drawLabels(G,be,{vals:Re,layer:ee["angular-axis"],repositionOnUpdate:!0,transFn:De,labelFns:Te})}j(ee["angular-line"].select("path"),he.showline,{d:ae.pathSubplot(),transform:o(ue,de)}).attr("stroke-width",he.linewidth).call(i.stroke,he.linecolor)},$.updateFx=function(q,W){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(q),this.updateRadialDrag(q,W,0),this.updateRadialDrag(q,W,1)),this.updateHoverAndMainDrag(q))},$.updateHoverAndMainDrag=function(q){var W,ae,G=this,ee=G.isSmith,te=G.gd,ue=q._zoomlayer,de=P.MINZOOM,he=P.OFFEDGE,be=G.radius,me=G.innerRadius,_e=G.cx,Ee=G.cy,De=G.cxx,Se=G.cyy,Fe=G.sectorInRad,ve=G.vangles,Te=G.radialAxis,Ie=D.clampTiny,Ce=D.findXYatLength,Re=D.findEnclosingVertexAngles,Ue=P.cornerHalfWidth,qe=P.cornerLen/2,Xe=p.makeDragger(G.layers,"path","maindrag","crosshair");v.select(Xe).attr("d",G.pathSubplot()).attr("transform",o(_e,Ee)),Xe.onmousemove=function(ft){g.hover(te,ft,G.id),te._fullLayout._lasthover=Xe,te._fullLayout._hoversubplot=G.id},Xe.onmouseout=function(ft){te._dragging||c.unhover(te,ft)};var st,He,$e,et,tt,ct,bt,At,Ut,Ct={element:Xe,gd:te,subplot:G.id,plotinfo:{id:G.id,xaxis:G.xaxis,yaxis:G.yaxis},xaxes:[G.xaxis],yaxes:[G.yaxis]};function dt(ft,mt){return Math.sqrt(ft*ft+mt*mt)}function at(ft,mt){return dt(ft-De,mt-Se)}function Nt(ft,mt){return Math.atan2(Se-mt,ft-De)}function rn(ft,mt){return[ft*Math.cos(mt),ft*Math.sin(-mt)]}function en(ft,mt){if(0===ft)return G.pathSector(2*Ue);var pt=qe/ft,Ot=mt-pt,Pt=mt+pt,Jt=Math.max(0,Math.min(ft,be)),$t=Jt-Ue,ut=Jt+Ue;return"M"+rn($t,Ot)+"A"+[$t,$t]+" 0,0,0 "+rn($t,Pt)+"L"+rn(ut,Pt)+"A"+[ut,ut]+" 0,0,1 "+rn(ut,Ot)+"Z"}function Ge(ft,mt,pt){if(0===ft)return G.pathSector(2*Ue);var Ot,Pt,Jt=rn(ft,mt),$t=rn(ft,pt),ut=Ie((Jt[0]+$t[0])/2),Dt=Ie((Jt[1]+$t[1])/2);if(ut&&Dt){var Wt=Dt/ut,zt=-1/Wt,Ht=Ce(Ue,Wt,ut,Dt);Ot=Ce(qe,zt,Ht[0][0],Ht[0][1]),Pt=Ce(qe,zt,Ht[1][0],Ht[1][1])}else{var Ne,ot;Dt?(Ne=qe,ot=Ue):(Ne=Ue,ot=qe),Ot=[[ut-Ne,Dt-ot],[ut+Ne,Dt-ot]],Pt=[[ut-Ne,Dt+ot],[ut+Ne,Dt+ot]]}return"M"+Ot.join("L")+"L"+Pt.reverse().join("L")+"Z"}function Qe(ft,mt){return mt=Math.max(Math.min(mt,be),me),ft<he?ft=0:be-ft<he?ft=be:mt<he?mt=0:be-mt<he&&(mt=be),Math.abs(mt-ft)>de?(ft<mt?($e=ft,et=mt):($e=mt,et=ft),!0):($e=null,et=null,!1)}function Rt(ft,mt){mt=mt||"M0,0Z",At.attr("d",ft=ft||tt),Ut.attr("d",mt),p.transitionZoombox(At,Ut,ct,bt),ct=!0;var pt={};je(pt),te.emit("plotly_relayouting",pt)}function gt(ft,mt){var pt,Ot,Pt=st+(ft*=W),Jt=He+(mt*=ae),$t=at(st,He),ut=Math.min(at(Pt,Jt),be),Dt=Nt(st,He);Qe($t,ut)&&(pt=tt+G.pathSector(et),$e&&(pt+=G.pathSector($e)),Ot=en($e,Dt)+en(et,Dt)),Rt(pt,Ot)}function Be(ft,mt,pt,Ot){var Pt=D.findIntersectionXY(pt,Ot,pt,[ft-De,Se-mt]);return dt(Pt[0],Pt[1])}function Ve(ft,mt){var pt,Ot,Pt=st+ft,Jt=He+mt,$t=Nt(st,He),ut=Nt(Pt,Jt),Dt=Re($t,ve),Wt=Re(ut,ve);Qe(Be(st,He,Dt[0],Dt[1]),Math.min(Be(Pt,Jt,Wt[0],Wt[1]),be))&&(pt=tt+G.pathSector(et),$e&&(pt+=G.pathSector($e)),Ot=[Ge($e,Dt[0],Dt[1]),Ge(et,Dt[0],Dt[1])].join(" ")),Rt(pt,Ot)}function Le(){if(p.removeZoombox(te),null!==$e&&null!==et){var ft={};je(ft),p.showDoubleClickNotifier(te),T.call("_guiRelayout",te,ft)}}function je(ft){var mt=Te._rl,pt=(mt[1]-mt[0])/(1-me/be)/be;ft[G.id+".radialaxis.range"]=[mt[0]+($e-me)*pt,mt[0]+(et-me)*pt]}function Ke(ft,mt){var pt=te._fullLayout.clickmode;if(p.removeZoombox(te),2===ft){var Ot={};for(var Pt in G.viewInitial)Ot[G.id+"."+Pt]=G.viewInitial[Pt];te.emit("plotly_doubleclick",null),T.call("_guiRelayout",te,Ot)}pt.indexOf("select")>-1&&1===ft&&w(mt,te,[G.xaxis],[G.yaxis],G.id,Ct),pt.indexOf("event")>-1&&g.click(te,mt,G.id)}Ct.prepFn=function(ft,mt,pt){var Ot=te._fullLayout.dragmode,Pt=Xe.getBoundingClientRect();te._fullLayout._calcInverseTransform(te),W=te._fullLayout._invScaleX,ae=te._fullLayout._invScaleY;var $t=b.apply3DTransform(te._fullLayout._invTransform)(mt-Pt.left,pt-Pt.top);if(st=$t[0],He=$t[1],ve){var ut=D.findPolygonOffset(be,Fe[0],Fe[1],ve);st+=De+ut[0],He+=Se+ut[1]}switch(Ot){case"zoom":Ct.clickFn=Ke,ee||(Ct.moveFn=ve?Ve:gt,Ct.doneFn=Le,$e=null,et=null,tt=G.pathSubplot(),ct=!1,bt=x(te._fullLayout[G.id].bgcolor).getLuminance(),(At=p.makeZoombox(ue,bt,_e,Ee,tt)).attr("fill-rule","evenodd"),Ut=p.makeCorners(ue,_e,Ee),f(te));break;case"select":case"lasso":u(ft,mt,pt,Ct,Ot)}},c.init(Ct)},$.updateRadialDrag=function(q,W,ae){var G=this,ee=G.gd,te=G.layers,le=G.radius,ue=G.innerRadius,de=G.cx,he=G.cy,be=G.radialAxis,me=P.radialDragBoxSize,_e=me/2;if(be.visible){var Ee,De,Se,Fe=Y(G.radialAxisAngle),ve=be._rl,Te=ve[0],Ie=ve[1],Ce=ve[ae],Re=.75*(ve[1]-ve[0])/(1-G.getHole(W))/le;ae?(Ee=de+(le+_e)*Math.cos(Fe),De=he-(le+_e)*Math.sin(Fe),Se="radialdrag"):(Ee=de+(ue-_e)*Math.cos(Fe),De=he-(ue-_e)*Math.sin(Fe),Se="radialdrag-inner");var Ue,qe,Xe,st=p.makeRectDragger(te,Se,"crosshair",-_e,-_e,me,me),He={element:st,gd:ee};j(v.select(st),be.visible&&ue<le,{transform:o(Ee,De)}),He.prepFn=function(){Ue=null,qe=null,Xe=null,He.moveFn=$e,He.doneFn=et,f(ee)},He.clampFn=function(bt,At){return Math.sqrt(bt*bt+At*At)<P.MINDRAG&&(bt=0,At=0),[bt,At]},c.init(He)}function $e(bt,At){if(Ue)Ue(bt,At);else{var Ut=[bt,-At],Ct=[Math.cos(Fe),Math.sin(Fe)],dt=Math.abs(b.dot(Ut,Ct)/Math.sqrt(b.dot(Ut,Ut)));isNaN(dt)||(Ue=dt<.5?tt:ct)}var Nt,at={};Nt=at,null!==qe?Nt[G.id+".radialaxis.angle"]=qe:null!==Xe&&(Nt[G.id+".radialaxis.range["+ae+"]"]=Xe),ee.emit("plotly_relayouting",at)}function et(){null!==qe?T.call("_guiRelayout",ee,G.id+".radialaxis.angle",qe):null!==Xe&&T.call("_guiRelayout",ee,G.id+".radialaxis.range["+ae+"]",Xe)}function tt(bt,At){if(0!==ae){qe=Math.atan2(he-(De+At),Ee+bt-de),G.vangles&&(qe=ie(qe,G.vangles)),qe=Q(qe);var dt=o(de,he)+e(-qe);te["radial-axis"].attr("transform",dt),te["radial-line"].select("line").attr("transform",dt);var at=G.gd._fullLayout;G.updateRadialAxisTitle(at,at[G.id],qe)}}function ct(bt,At){var Ut=b.dot([bt,-At],[Math.cos(Fe),Math.sin(Fe)]);if(Xe=Ce-Re*Ut,Re>0==(ae?Xe>Te:Xe<Ie)){var Ct=ee._fullLayout,dt=Ct[G.id];be.range[ae]=Xe,be._rl[ae]=Xe,G.updateRadialAxis(Ct,dt),G.xaxis.setRange(),G.xaxis.setScale(),G.yaxis.setRange(),G.yaxis.setScale();var at=!1;for(var Nt in G.traceHash){var rn=G.traceHash[Nt],en=b.filterVisible(rn);rn[0][0].trace._module.plot(ee,G,en,dt),T.traceIs(Nt,"gl")&&en.length&&(at=!0)}at&&(M(ee),k(ee))}else Xe=null}},$.updateAngularDrag=function(q){var W=this,ae=W.gd,G=W.layers,ee=W.radius,te=W.angularAxis,le=W.cx,ue=W.cy,de=W.cxx,he=W.cyy,be=P.angularDragBoxSize,me=p.makeDragger(G,"path","angulardrag","move"),_e={element:me,gd:ae};function Ee(He,$e){return Math.atan2(he+be-$e,He-de-be)}v.select(me).attr("d",W.pathAnnulus(ee,ee+be)).attr("transform",o(le,ue)).call(A,"move");var De,Se,Fe,ve,Te,Ie,Ce=G.frontplot.select(".scatterlayer").selectAll(".trace"),Re=Ce.selectAll(".point"),Ue=Ce.selectAll(".textpoint");function qe(He,$e){var et=W.gd._fullLayout,tt=et[W.id],ct=Ee(De+He*q._invScaleX,Se+$e*q._invScaleY),bt=Q(ct-Ie);if(ve=Fe+bt,G.frontplot.attr("transform",o(W.xOffset2,W.yOffset2)+e([-bt,de,he])),W.vangles){Te=W.radialAxisAngle+bt;var At=o(le,ue)+e(-bt),Ut=o(le,ue)+e(-Te);G.bg.attr("transform",At),G["radial-grid"].attr("transform",At),G["radial-axis"].attr("transform",Ut),G["radial-line"].select("line").attr("transform",Ut),W.updateRadialAxisTitle(et,tt,Te)}else W.clipPaths.forTraces.select("path").attr("transform",o(de,he)+e(bt));Re.each(function(){var en=v.select(this),Ge=l.getTranslate(en);en.attr("transform",o(Ge.x,Ge.y)+e([bt]))}),Ue.each(function(){var en=v.select(this),Ge=en.select("text"),Qe=l.getTranslate(en);en.attr("transform",e([bt,Ge.attr("x"),Ge.attr("y")])+o(Qe.x,Qe.y))}),te.rotation=b.modHalf(ve,360),W.updateAngularAxis(et,tt),W._hasClipOnAxisFalse&&!b.isFullCircle(W.sectorInRad)&&Ce.call(l.hideOutsideRangePoints,W);var Ct=!1;for(var dt in W.traceHash)if(T.traceIs(dt,"gl")){var at=W.traceHash[dt],Nt=b.filterVisible(at);at[0][0].trace._module.plot(ae,W,Nt,tt),Nt.length&&(Ct=!0)}Ct&&(M(ae),k(ae));var rn={};Xe(rn),ae.emit("plotly_relayouting",rn)}function Xe(He){He[W.id+".angularaxis.rotation"]=ve,W.vangles&&(He[W.id+".radialaxis.angle"]=Te)}function st(){Ue.select("text").attr("transform",null);var He={};Xe(He),T.call("_guiRelayout",ae,He)}_e.prepFn=function(He,$e,et){Fe=q[W.id].angularaxis.rotation;var ct=me.getBoundingClientRect();De=$e-ct.left,Se=et-ct.top,ae._fullLayout._calcInverseTransform(ae);var bt=b.apply3DTransform(q._invTransform)(De,Se);Ie=Ee(De=bt[0],Se=bt[1]),_e.moveFn=qe,_e.doneFn=st,f(ae)},W.vangles&&!b.isFullCircle(W.sectorInRad)&&(_e.prepFn=b.noop,A(v.select(me),null)),c.init(_e)},$.isPtInside=function(q){if(this.isSmith)return!0;var W=this.sectorInRad,ae=this.vangles,G=this.angularAxis.c2g(q.theta),ee=this.radialAxis,te=ee.c2l(q.r);return(ae?D.isPtInsidePolygon:b.isPtInsideSector)(te,G,ee._rl,W,ae)},$.pathArc=function(q){var W=this.sectorInRad,ae=this.vangles;return(ae?D.pathPolygon:b.pathArc)(q,W[0],W[1],ae)},$.pathSector=function(q){var W=this.sectorInRad,ae=this.vangles;return(ae?D.pathPolygon:b.pathSector)(q,W[0],W[1],ae)},$.pathAnnulus=function(q,W){var ae=this.sectorInRad,G=this.vangles;return(G?D.pathPolygonAnnulus:b.pathAnnulus)(q,W,ae[0],ae[1],G)},$.pathSubplot=function(){var q=this.innerRadius,W=this.radius;return q?this.pathAnnulus(q,W):this.pathSector(W)},$.fillViewInitialKey=function(q,W){q in this.viewInitial||(this.viewInitial[q]=W)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../cartesian/set_convert"),T=v.deg2rad,b=v.rad2deg;oe.exports=function(e,o,i){switch(x(e,i),e._id){case"x":case"radialaxis":y=o._subplot,(l=e).setGeometry=function(){var h=l._rl[0],s=l._rl[1],d=y.innerRadius,p=(y.radius-d)/(s-h),c=d/p,g=h>s?function(m){return m<=0}:function(m){return m>=0};l.c2g=function(m){var u=l.c2l(m)-h;return(g(u)?u:0)+c},l.g2c=function(m){return l.l2c(m+h-c)},l.g2p=function(m){return m*p},l.c2p=function(m){return l.g2p(l.c2g(m))}};break;case"angularaxis":!function(l,r){var y=l.type;if("linear"===y){var h=l.d2c,s=l.c2d;l.d2c=function(d,p){return c=h(d),"degrees"===p?T(c):c;var c},l.c2d=function(d,p){return s((c=d,"degrees"===p?b(c):c));var c}}l.makeCalcdata=function(d,p){var c,g,m=d[p],u=d._length,w=function(E){return l.d2c(E,d.thetaunit)};if(m){if(v.isTypedArray(m)&&"linear"===y){if(u===m.length)return m;if(m.subarray)return m.subarray(0,u)}for(c=new Array(u),g=0;g<u;g++)c[g]=w(m[g])}else{var f=p+"0",A="d"+p,M=f in d?w(d[f]):0,k=d[A]?w(d[A]):(l.period||2*Math.PI)/u;for(c=new Array(u),g=0;g<u;g++)c[g]=M+g*k}return c},l.setGeometry=function(){var d,p,c,g,m=r.sector,u=m.map(T),w={clockwise:-1,counterclockwise:1}[l.direction],f=T(l.rotation),A=function(P){return w*P+f},M=function(P){return(P-f)/w};switch(y){case"linear":p=d=v.identity,g=T,c=b,l.range=v.isFullCircle(u)?[m[0],m[0]+360]:u.map(M).map(b);break;case"category":var k=l._categories.length,E=l.period?Math.max(l.period,k):k;0===E&&(E=1),p=g=function(P){return 2*P*Math.PI/E},d=c=function(P){return P*E/Math.PI/2},l.range=[0,E]}l.c2g=function(P){return A(p(P))},l.g2c=function(P){return d(M(P))},l.t2g=function(P){return A(g(P))},l.g2t=function(P){return c(M(P))}}}(e,o)}var l,y}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(_,oe,se){"use strict";oe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(_,oe,se){"use strict";function v(e){return e<0?-1:e>0?1:0}function x(e){var o=e[0],i=e[1];if(!isFinite(o)||!isFinite(i))return[1,0];var l=(o+1)*(o+1)+i*i;return[(o*o+i*i-1)/l,2*i/l]}function T(e,o){return[o[0]*e.radius+e.cx,-o[1]*e.radius+e.cy]}function b(e,o){return o*e.radius}oe.exports={smith:x,reactanceArc:function(e,o,i,l){var r=T(e,x([i,o])),y=r[0],h=r[1],s=T(e,x([l,o])),d=s[0],p=s[1];if(0===o)return["M"+y+","+h,"L"+d+","+p].join(" ");var c=b(e,1/Math.abs(o));return["M"+y+","+h,"A"+c+","+c+" 0 0,"+(o<0?1:0)+" "+d+","+p].join(" ")},resistanceArc:function(e,o,i,l){var r=b(e,1/(o+1)),y=T(e,x([o,i])),h=y[0],s=y[1],d=T(e,x([o,l])),p=d[0],c=d[1];if(v(i)!==v(l)){var g=T(e,x([o,0]));return["M"+h+","+s,"A"+r+","+r+" 0 0,"+(0<i?0:1)+" "+g[0]+","+g[1],"A"+r+","+r+" 0 0,"+(l<0?0:1)+p+","+c].join(" ")}return["M"+h+","+s,"A"+r+","+r+" 0 0,"+(l<i?0:1)+" "+p+","+c].join(" ")},smithTransform:T}},{}],629:[function(_,oe,se){"use strict";var v=_("../get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("../polar/polar"),b=_("./constants"),e=b.attr,o=b.name,i=x(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},oe.exports={attr:e,name:o,idRoot:o,idRegex:i,attrRegex:i,attributes:l,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(r){for(var y=r._fullLayout,h=r.calcdata,s=y._subplots[o],d=0;d<s.length;d++){var p=s[d],c=v(h,o,p),g=y[p]._subplot;g||(g=T(r,p,!0),y[p]._subplot=g),g.plot(c,y,r._promises)}},clean:function(r,y,h,s){for(var d=s._subplots[o]||[],p=0;p<d.length;p++){var c=d[p],g=s[c]._subplot;if(!y[c]&&g)for(var m in g.framework.remove(),g.clipPaths)g.clipPaths[m].remove()}},toSVG:_("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(_,oe,se){"use strict";var v=_("../../components/color/attributes"),x=_("../cartesian/layout_attributes"),T=_("../domain").attributes,b=_("../../lib").extendFlat,e=_("../../plot_api/edit_types").overrideAll,o=e({color:x.color,showline:b({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:b({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth},"plot","from-root"),i=e({ticklen:x.ticklen,tickwidth:b({},x.tickwidth,{dflt:2}),tickcolor:x.tickcolor,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,tickfont:x.tickfont,tickformat:x.tickformat,hoverformat:x.hoverformat,layer:x.layer},"plot","from-root"),l=b({visible:b({},x.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:b({},x.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},o,i),r=b({visible:b({},x.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:x.ticks,editType:"calc"},o,i);oe.exports={domain:T({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:v.background},realaxis:l,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(_,oe,se){"use strict";var v,x,T,b=_("../../lib"),e=_("../../components/color"),o=_("../../plot_api/plot_template"),i=_("../subplot_defaults"),l=_("../get_data").getSubplotData,r=_("../cartesian/prefix_suffix_defaults"),y=_("../cartesian/tick_label_defaults"),h=_("../cartesian/line_grid_defaults"),s=_("../cartesian/set_convert"),d=_("./layout_attributes"),p=_("./constants"),c=p.axisNames,g=(v=function(u){return u.slice().reverse().map(function(w){return-w}).concat([0]).concat(u)},x=String,T={},function(u){var w=x?x(u):u;if(w in T)return T[w];var f=v(u);return T[w]=f,f});function m(u,w,f,A){var M=f("bgcolor");A.bgColor=e.combine(M,A.paper_bgcolor);var k,E=l(A.fullData,p.name,A.id),P=A.layoutOut;function D($,J){return f(k+"."+$,J)}for(var F=0;F<c.length;F++){b.isPlainObject(u[k=c[F]])||(u[k]={});var R=u[k],L=o.newContainer(w,k);L._id=L._name=k,L._attr=A.id+"."+k,L._traceIndices=E.map(function($){return $._expandedIndex});var I=D("visible");if(L.type="linear",s(L,P),r(R,L,D,L.type),I){var B,V,Z,Y,Q="realaxis"===k;Q&&D("side"),Q?D("tickvals"):D("tickvals",g(w.realaxis.tickvals||d.realaxis.tickvals.dflt));var re=A.font||{};I&&(V=(B=D("color"))===R.color?B:re.color,Z=re.size,Y=re.family),y(R,L,D,L.type,{noTicklabelstep:!0,noAng:!Q,noExp:!0,font:{color:V,size:Z,family:Y}}),b.coerce2(u,w,d,k+".ticklen"),b.coerce2(u,w,d,k+".tickwidth"),b.coerce2(u,w,d,k+".tickcolor",w.color),D("ticks")||(delete w[k].ticklen,delete w[k].tickwidth,delete w[k].tickcolor),h(R,L,D,{dfltColor:B,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[k]}),D("layer")}D("hoverformat"),delete L.type,L._input=R}}oe.exports=function(u,w,f){i(u,w,f,{noUirevision:!0,type:p.name,attributes:d,handleDefaults:m,font:w.font,paper_bgcolor:w.paper_bgcolor,fullData:f,layoutOut:w})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plot_api/plot_template"),T=_("./domain").defaults;oe.exports=function(b,e,o,i){var l,r,h=i.attributes,s=i.handleDefaults,d=i.partition||"x",p=e._subplots[i.type],c=p.length,g=c&&p[0].replace(/\d+$/,"");function m(A,M){return v.coerce(l,r,h,A,M)}for(var u=0;u<c;u++){var w=p[u];l=b[w]?b[w]:b[w]={},r=x.newContainer(e,w,g),i.noUirevision||m("uirevision",e.uirevision);var f={};f[d]=[u/c,(u+1)/c],T(r,e,m,f),i.id=w,s(l,r,m,i)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(_,oe,se){"use strict";function x(T){var b=T.description?" "+T.description:"",e=T.keys||[];if(e.length>0){for(var o=[],i=0;i<e.length;i++)o[i]="`"+e[i]+"`";b+="Finally, the template string has access to ",b=1===e.length?"variable "+o[0]:"variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return b}_("../constants/docs"),se.hovertemplateAttrs=function(T,b){T=T||{},x(b=b||{});var e={valType:"string",dflt:"",editType:T.editType||"none"};return!1!==T.arrayOk&&(e.arrayOk=!0),e},se.texttemplateAttrs=function(T,b){T=T||{},x(b=b||{});var e={valType:"string",dflt:"",editType:T.editType||"calc"};return!1!==T.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(_,oe,se){"use strict";var v=_("./ternary"),x=_("../../plots/get_data").getSubplotCalcData,T=_("../../lib").counterRegex;se.name="ternary";var b=se.attr="subplot";se.idRoot="ternary",se.idRegex=se.attrRegex=T("ternary"),(se.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},se.layoutAttributes=_("./layout_attributes"),se.supplyLayoutDefaults=_("./layout_defaults"),se.plot=function(e){for(var o=e._fullLayout,i=e.calcdata,l=o._subplots.ternary,r=0;r<l.length;r++){var y=l[r],h=x(i,"ternary",y),s=o[y]._subplot;s||(s=new v({id:y,graphDiv:e,container:o._ternarylayer.node()},o),o[y]._subplot=s),s.plot(h,o,e._promises)}},se.clean=function(e,o,i,l){for(var r=l._subplots.ternary||[],y=0;y<r.length;y++){var h=r[y],s=l[h]._subplot;!o[h]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(_,oe,se){"use strict";var v=_("../../components/color/attributes"),x=_("../domain").attributes,T=_("../cartesian/layout_attributes"),b=_("../../plot_api/edit_types").overrideAll,e=_("../../lib/extend").extendFlat,o={title:{text:T.title.text,font:T.title.font},color:T.color,tickmode:T.tickmode,nticks:e({},T.nticks,{dflt:6,min:1}),tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:T.ticks,ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,showtickprefix:T.showtickprefix,tickprefix:T.tickprefix,showticksuffix:T.showticksuffix,ticksuffix:T.ticksuffix,showexponent:T.showexponent,exponentformat:T.exponentformat,minexponent:T.minexponent,separatethousands:T.separatethousands,tickfont:T.tickfont,tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,hoverformat:T.hoverformat,showline:e({},T.showline,{dflt:!0}),linecolor:T.linecolor,linewidth:T.linewidth,showgrid:e({},T.showgrid,{dflt:!0}),gridcolor:T.gridcolor,gridwidth:T.gridwidth,layer:T.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:T._deprecated.title,titlefont:T._deprecated.titlefont}},i=oe.exports=b({domain:x({name:"ternary"}),bgcolor:{valType:"color",dflt:v.background},sum:{valType:"number",dflt:1,min:0},aaxis:o,baxis:o,caxis:o},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("../../plot_api/plot_template"),T=_("../../lib"),b=_("../subplot_defaults"),e=_("../cartesian/tick_label_defaults"),o=_("../cartesian/prefix_suffix_defaults"),i=_("../cartesian/tick_mark_defaults"),l=_("../cartesian/tick_value_defaults"),r=_("../cartesian/line_grid_defaults"),y=_("./layout_attributes"),h=["aaxis","baxis","caxis"];function s(p,c,g,m){var u,w,f,A=g("bgcolor"),M=g("sum");m.bgColor=v.combine(A,m.paper_bgcolor);for(var k=0;k<h.length;k++)w=p[u=h[k]]||{},(f=x.newContainer(c,u))._name=u,d(w,f,m,c);var E=c.aaxis,P=c.baxis,D=c.caxis;E.min+P.min+D.min>=M&&(E.min=0,P.min=0,D.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function d(p,c,g,m){var u=y[c._name];function w(P,D){return T.coerce(p,c,u,P,D)}w("uirevision",m.uirevision),c.type="linear";var f=w("color"),A=f!==u.color.dflt?f:g.font.color,M=c._name.charAt(0).toUpperCase(),k="Component "+M,E=w("title.text",k);c._hovertitle=E===k?E:M,T.coerceFont(w,"title.font",{family:g.font.family,size:T.bigFont(g.font.size),color:A}),w("min"),l(p,c,w,"linear"),o(p,c,w,"linear"),e(p,c,w,"linear"),i(p,c,w,{outerTicks:!0}),w("showticklabels")&&(T.coerceFont(w,"tickfont",{family:g.font.family,size:g.font.size,color:A}),w("tickangle"),w("tickformat")),r(p,c,w,{dfltColor:f,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u}),w("hoverformat"),w("layer")}oe.exports=function(p,c,g){b(p,c,g,{type:"ternary",attributes:y,handleDefaults:s,font:c.font,paper_bgcolor:c.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../lib"),e=b.strTranslate,o=b._,i=_("../../components/color"),l=_("../../components/drawing"),r=_("../cartesian/set_convert"),y=_("../../lib/extend").extendFlat,h=_("../plots"),s=_("../cartesian/axes"),d=_("../../components/dragelement"),p=_("../../components/fx"),c=_("../../components/dragelement/helpers"),g=c.freeMode,m=c.rectMode,u=_("../../components/titles"),w=_("../cartesian/select").prepSelect,f=_("../cartesian/select").selectOnClick,A=_("../cartesian/select").clearSelect,M=_("../cartesian/select").clearSelectionsCache,k=_("../cartesian/constants");function E(Z,Y){this.id=Z.id,this.graphDiv=Z.graphDiv,this.init(Y),this.makeFramework(Y),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}oe.exports=E;var P=E.prototype;P.init=function(Z){this.container=Z._ternarylayer,this.defs=Z._defs,this.layoutId=Z._uid,this.traceHash={},this.layers={}},P.plot=function(Z,Y){var Q=Y[this.id],re=Y._size;this._hasClipOnAxisFalse=!1;for(var $=0;$<Z.length;$++)if(!1===Z[$][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Q),this.adjustLayout(Q,re),h.generalUpdatePerTraceModule(this.graphDiv,this,Z,Q),this.layers.plotbg.select("path").call(i.fill,Q.bgcolor)},P.makeFramework=function(Z){var Y=this.graphDiv,Q=Z[this.id],re=this.clipId="clip"+this.layoutId+this.id,$=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=b.ensureSingleById(Z._clips,"clipPath",re,function(J){J.append("path").attr("d","M0,0Z")}),this.clipDefRelative=b.ensureSingleById(Z._clips,"clipPath",$,function(J){J.append("path").attr("d","M0,0Z")}),this.plotContainer=b.ensureSingle(this.container,"g",this.id),this.updateLayers(Q),l.setClipUrl(this.layers.backplot,re,Y),l.setClipUrl(this.layers.grids,re,Y)},P.updateLayers=function(Z){var Y=this.layers,Q=["draglayer","plotbg","backplot","grids"];"below traces"===Z.aaxis.layer&&Q.push("aaxis","aline"),"below traces"===Z.baxis.layer&&Q.push("baxis","bline"),"below traces"===Z.caxis.layer&&Q.push("caxis","cline"),Q.push("frontplot"),"above traces"===Z.aaxis.layer&&Q.push("aaxis","aline"),"above traces"===Z.baxis.layer&&Q.push("baxis","bline"),"above traces"===Z.caxis.layer&&Q.push("caxis","cline");var re=this.plotContainer.selectAll("g.toplevel").data(Q,String),$=["agrid","bgrid","cgrid"];re.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var ie=v.select(this);Y[J]=ie,"frontplot"===J?ie.append("g").classed("scatterlayer",!0):"backplot"===J?ie.append("g").classed("maplayer",!0):"plotbg"===J?ie.append("path").attr("d","M0,0Z"):"aline"===J||"bline"===J||"cline"===J?ie.append("path"):"grids"===J&&$.forEach(function(j){Y[j]=ie.append("g").classed("grid "+j,!0)})}),re.order()};var D=Math.sqrt(4/3);P.adjustLayout=function(Z,Y){var Q,re,$,J,ie,j,q=this,W=Z.domain,ae=(W.x[0]+W.x[1])/2,G=(W.y[0]+W.y[1])/2,ee=W.x[1]-W.x[0],te=W.y[1]-W.y[0],le=ee*Y.w,ue=te*Y.h,de=Z.sum,he=Z.aaxis.min,be=Z.baxis.min,me=Z.caxis.min;le>D*ue?$=(J=ue)*D:J=($=le)/D,ie=ee*$/le,j=te*J/ue,re=Y.t+Y.h*(1-G)-J/2,q.x0=Q=Y.l+Y.w*ae-$/2,q.y0=re,q.w=$,q.h=J,q.sum=de,q.xaxis={type:"linear",range:[he+2*me-de,de-he-2*be],domain:[ae-ie/2,ae+ie/2],_id:"x"},r(q.xaxis,q.graphDiv._fullLayout),q.xaxis.setScale(),q.xaxis.isPtWithinRange=function(Ue){return Ue.a>=q.aaxis.range[0]&&Ue.a<=q.aaxis.range[1]&&Ue.b>=q.baxis.range[1]&&Ue.b<=q.baxis.range[0]&&Ue.c>=q.caxis.range[1]&&Ue.c<=q.caxis.range[0]},q.yaxis={type:"linear",range:[he,de-be-me],domain:[G-j/2,G+j/2],_id:"y"},r(q.yaxis,q.graphDiv._fullLayout),q.yaxis.setScale(),q.yaxis.isPtWithinRange=function(){return!0};var _e=q.yaxis.domain[0],Ee=q.aaxis=y({},Z.aaxis,{range:[he,de-be-me],side:"left",tickangle:(+Z.aaxis.tickangle||0)-30,domain:[_e,_e+j*D],anchor:"free",position:0,_id:"y",_length:$});r(Ee,q.graphDiv._fullLayout),Ee.setScale();var De=q.baxis=y({},Z.baxis,{range:[de-he-me,be],side:"bottom",domain:q.xaxis.domain,anchor:"free",position:0,_id:"x",_length:$});r(De,q.graphDiv._fullLayout),De.setScale();var Se=q.caxis=y({},Z.caxis,{range:[de-he-be,me],side:"right",tickangle:(+Z.caxis.tickangle||0)+30,domain:[_e,_e+j*D],anchor:"free",position:0,_id:"y",_length:$});r(Se,q.graphDiv._fullLayout),Se.setScale();var Fe="M"+Q+","+(re+J)+"h"+$+"l-"+$/2+",-"+J+"Z";q.clipDef.select("path").attr("d",Fe),q.layers.plotbg.select("path").attr("d",Fe);var ve="M0,"+J+"h"+$+"l-"+$/2+",-"+J+"Z";q.clipDefRelative.select("path").attr("d",ve);var Te=e(Q,re);q.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te),q.clipDefRelative.select("path").attr("transform",null);var Ie=e(Q-De._offset,re+J);q.layers.baxis.attr("transform",Ie),q.layers.bgrid.attr("transform",Ie);var Ce=e(Q+$/2,re)+"rotate(30)"+e(0,-Ee._offset);q.layers.aaxis.attr("transform",Ce),q.layers.agrid.attr("transform",Ce);var Re=e(Q+$/2,re)+"rotate(-30)"+e(0,-Se._offset);q.layers.caxis.attr("transform",Re),q.layers.cgrid.attr("transform",Re),q.drawAxes(!0),q.layers.aline.select("path").attr("d",Ee.showline?"M"+Q+","+(re+J)+"l"+$/2+",-"+J:"M0,0").call(i.stroke,Ee.linecolor||"#000").style("stroke-width",(Ee.linewidth||0)+"px"),q.layers.bline.select("path").attr("d",De.showline?"M"+Q+","+(re+J)+"h"+$:"M0,0").call(i.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),q.layers.cline.select("path").attr("d",Se.showline?"M"+(Q+$/2)+","+re+"l"+$/2+","+J:"M0,0").call(i.stroke,Se.linecolor||"#000").style("stroke-width",(Se.linewidth||0)+"px"),q.graphDiv._context.staticPlot||q.initInteractions(),l.setClipUrl(q.layers.frontplot,q._hasClipOnAxisFalse?null:q.clipId,q.graphDiv)},P.drawAxes=function(Z){var Y=this.graphDiv,Q=this.id.substr(7)+"title",re=this.layers,$=this.aaxis,J=this.baxis,ie=this.caxis;if(this.drawAx($),this.drawAx(J),this.drawAx(ie),Z){var j=Math.max($.showticklabels?$.tickfont.size/2:0,(ie.showticklabels?.75*ie.tickfont.size:0)+("outside"===ie.ticks?.87*ie.ticklen:0)),q=(J.showticklabels?J.tickfont.size:0)+("outside"===J.ticks?J.ticklen:0)+3;re["a-title"]=u.draw(Y,"a"+Q,{propContainer:$,propName:this.id+".aaxis.title",placeholder:o(Y,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-$.title.font.size/3-j,"text-anchor":"middle"}}),re["b-title"]=u.draw(Y,"b"+Q,{propContainer:J,propName:this.id+".baxis.title",placeholder:o(Y,"Click to enter Component B title"),attributes:{x:this.x0-q,y:this.y0+this.h+.83*J.title.font.size+q,"text-anchor":"middle"}}),re["c-title"]=u.draw(Y,"c"+Q,{propContainer:ie,propName:this.id+".caxis.title",placeholder:o(Y,"Click to enter Component C title"),attributes:{x:this.x0+this.w+q,y:this.y0+this.h+.83*ie.title.font.size+q,"text-anchor":"middle"}})}},P.drawAx=function(Z){var Y,Q=this.graphDiv,re=Z._name,$=re.charAt(0),J=Z._id,ie=this.layers[re],j=$+"tickLayout",q=(Y=Z).ticks+String(Y.ticklen)+String(Y.showticklabels);this[j]!==q&&(ie.selectAll("."+J+"tick").remove(),this[j]=q),Z.setScale();var W=s.calcTicks(Z),ae=s.clipEnds(Z,W),G=s.makeTransTickFn(Z),ee=s.getTickSigns(Z)[2],te=b.deg2rad(30),le=ee*(Z.linewidth||1)/2,ue=ee*Z.ticklen,de=this.w,he=this.h,be="b"===$?"M0,"+le+"l"+Math.sin(te)*ue+","+Math.cos(te)*ue:"M"+le+",0l"+Math.cos(te)*ue+","+-Math.sin(te)*ue,me={a:"M0,0l"+he+",-"+de/2,b:"M0,0l-"+de/2+",-"+he,c:"M0,0l-"+he+","+de/2}[$];s.drawTicks(Q,Z,{vals:"inside"===Z.ticks?ae:W,layer:ie,path:be,transFn:G,crisp:!1}),s.drawGrid(Q,Z,{vals:ae,layer:this.layers[$+"grid"],path:me,transFn:G,crisp:!1}),s.drawLabels(Q,Z,{vals:W,layer:ie,transFn:G,labelFns:s.makeLabelFns(Z,0,30)})};var F=k.MINZOOM/2+.87,R="m-0.87,.5h"+F+"v3h-"+(F+5.2)+"l"+(F/2+2.6)+",-"+(.87*F+4.5)+"l2.6,1.5l-"+F/2+","+.87*F+"Z",L="m0.87,.5h-"+F+"v3h"+(F+5.2)+"l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-2.6,1.5l"+F/2+","+.87*F+"Z",I="m0,1l"+F/2+","+.87*F+"l2.6,-1.5l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-"+(F/2+2.6)+","+(.87*F+4.5)+"l2.6,1.5l"+F/2+",-"+.87*F+"Z",B=!0;function V(Z){v.select(Z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}P.clearSelect=function(){M(this.dragOptions),A(this.dragOptions.gd)},P.initInteractions=function(){var Z,Y,Q,re,$,J,ie,j,q,W,ae,G,ee=this,te=ee.layers.plotbg.select("path").node(),le=ee.graphDiv,ue=le._fullLayout._zoomlayer;function de(ve){var Te={};return Te[ee.id+".aaxis.min"]=ve.a,Te[ee.id+".baxis.min"]=ve.b,Te[ee.id+".caxis.min"]=ve.c,Te}function he(ve,Te){var Ie=le._fullLayout.clickmode;V(le),2===ve&&(le.emit("plotly_doubleclick",null),T.call("_guiRelayout",le,de({a:0,b:0,c:0}))),Ie.indexOf("select")>-1&&1===ve&&f(Te,le,[ee.xaxis],[ee.yaxis],ee.id,ee.dragOptions),Ie.indexOf("event")>-1&&p.click(le,Te,ee.id)}function be(ve,Te){return 1-Te/ee.h}function me(ve,Te){return 1-(ve+(ee.h-Te)/Math.sqrt(3))/ee.w}function _e(ve,Te){return(ve-(ee.h-Te)/Math.sqrt(3))/ee.w}function Ee(ve,Te){var Ie=Q+ve*Z,Ce=re+Te*Y,Re=Math.max(0,Math.min(1,be(0,re),be(0,Ce))),Ue=Math.max(0,Math.min(1,me(Q,re),me(Ie,Ce))),qe=Math.max(0,Math.min(1,_e(Q,re),_e(Ie,Ce))),Xe=(Re/2+qe)*ee.w,st=(1-Re/2-Ue)*ee.w,He=(Xe+st)/2,$e=st-Xe,et=(1-Re)*ee.h,tt=et-$e/D;$e<k.MINZOOM?(ie=$,ae.attr("d",q),G.attr("d","M0,0Z")):(ie={a:$.a+Re*J,b:$.b+Ue*J,c:$.c+qe*J},ae.attr("d",q+"M"+Xe+","+et+"H"+st+"L"+He+","+tt+"L"+Xe+","+et+"Z"),G.attr("d","M"+Q+","+re+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Xe+","+et+R+"M"+st+","+et+L+"M"+He+","+tt+I)),W||(ae.transition().style("fill",j>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),G.transition().style("opacity",1).duration(200),W=!0),le.emit("plotly_relayouting",de(ie))}function De(){V(le),ie!==$&&(T.call("_guiRelayout",le,de(ie)),B&&le.data&&le._context.showTips&&(b.notifier(o(le,"Double-click to zoom back out"),"long"),B=!1))}function Se(ve,Te){var Ie=ve/ee.xaxis._m,Ce=Te/ee.yaxis._m,Re=[(ie={a:$.a-Ce,b:$.b+(Ie+Ce)/2,c:$.c-(Ie-Ce)/2}).a,ie.b,ie.c].sort(b.sorterAsc),Ue=Re.indexOf(ie.a),qe=Re.indexOf(ie.b),Xe=Re.indexOf(ie.c);Re[0]<0&&(Re[1]+Re[0]/2<0?(Re[2]+=Re[0]+Re[1],Re[0]=Re[1]=0):(Re[2]+=Re[0]/2,Re[1]+=Re[0]/2,Re[0]=0),Te=($.a-(ie={a:Re[Ue],b:Re[qe],c:Re[Xe]}).a)*ee.yaxis._m,ve=($.c-ie.c-$.b+ie.b)*ee.xaxis._m);var st=e(ee.x0+ve,ee.y0+Te);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",st);var He=e(-ve,-Te);ee.clipDefRelative.select("path").attr("transform",He),ee.aaxis.range=[ie.a,ee.sum-ie.b-ie.c],ee.baxis.range=[ee.sum-ie.a-ie.c,ie.b],ee.caxis.range=[ee.sum-ie.a-ie.b,ie.c],ee.drawAxes(!1),ee._hasClipOnAxisFalse&&ee.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,ee),le.emit("plotly_relayouting",de(ie))}function Fe(){T.call("_guiRelayout",le,de(ie))}this.dragOptions={element:te,gd:le,plotinfo:{id:ee.id,domain:le._fullLayout[ee.id].domain,xaxis:ee.xaxis,yaxis:ee.yaxis},subplot:ee.id,prepFn:function(ve,Te,Ie){ee.dragOptions.xaxes=[ee.xaxis],ee.dragOptions.yaxes=[ee.yaxis],Z=le._fullLayout._invScaleX,Y=le._fullLayout._invScaleY;var Ce=ee.dragOptions.dragmode=le._fullLayout.dragmode;ee.dragOptions.minDrag=g(Ce)?1:void 0,"zoom"===Ce?(ee.dragOptions.moveFn=Ee,ee.dragOptions.clickFn=he,ee.dragOptions.doneFn=De,function(Re,Ue,qe){var Xe=te.getBoundingClientRect();Q=Ue-Xe.left,re=qe-Xe.top,le._fullLayout._calcInverseTransform(le);var He=b.apply3DTransform(le._fullLayout._invTransform)(Q,re);Q=He[0],re=He[1],ie=$={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},J=ee.aaxis.range[1]-$.a,j=x(ee.graphDiv._fullLayout[ee.id].bgcolor).getLuminance(),q="M0,"+ee.h+"L"+ee.w/2+", 0L"+ee.w+","+ee.h+"Z",W=!1,ae=ue.append("path").attr("class","zoombox").attr("transform",e(ee.x0,ee.y0)).style({fill:j>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),G=ue.append("path").attr("class","zoombox-corners").attr("transform",e(ee.x0,ee.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ee.clearSelect(le)}(0,Te,Ie)):"pan"===Ce?(ee.dragOptions.moveFn=Se,ee.dragOptions.clickFn=he,ee.dragOptions.doneFn=Fe,ie=$={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},ee.clearSelect(le)):(m(Ce)||g(Ce))&&w(ve,Te,Ie,ee.dragOptions,Ce)}},te.onmousemove=function(ve){p.hover(le,ve,ee.id),le._fullLayout._lasthover=te,le._fullLayout._hoversubplot=ee.id},te.onmouseout=function(ve){le._dragging||d.unhover(le,ve)},d.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(_,oe,se){"use strict";var v=_("./lib/loggers"),x=_("./lib/noop"),T=_("./lib/push_unique"),b=_("./lib/is_plain_object"),e=_("./lib/dom").addStyleRule,o=_("./lib/extend"),i=_("./plots/attributes"),l=_("./plots/layout_attributes"),r=o.extendFlat,y=o.extendDeepAll;function h(f){var A=f.name,M=f.categories,k=f.meta;if(se.modules[A])v.log("Type "+A+" already registered");else{se.subplotsRegistry[f.basePlotModule.name]||function(B){var V=B.name;if(se.subplotsRegistry[V])v.log("Plot type "+V+" already registered.");else for(var Z in c(B),se.subplotsRegistry[V]=B,se.componentsRegistry)u(Z,B.name)}(f.basePlotModule);for(var E={},P=0;P<M.length;P++)E[M[P]]=!0,se.allCategories[M[P]]=!0;for(var D in se.modules[A]={_module:f,categories:E},k&&Object.keys(k).length&&(se.modules[A].meta=k),se.allTypes.push(A),se.componentsRegistry)g(D,A);f.layoutAttributes&&r(se.traceLayoutAttributes,f.layoutAttributes);var F=f.basePlotModule,R=F.name;if("mapbox"===R){var L=F.constants.styleRules;for(var I in L)e(".js-plotly-plot .plotly .mapboxgl-"+I,L[I])}"geo"!==R&&"mapbox"!==R||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function s(f){if("string"!=typeof f.name)throw new Error("Component module *name* must be a string.");var A=f.name;for(var M in se.componentsRegistry[A]=f,f.layoutAttributes&&(f.layoutAttributes._isLinkedToArray&&T(se.layoutArrayContainers,A),c(f)),se.modules)g(A,M);for(var k in se.subplotsRegistry)u(A,k);for(var E in se.transformsRegistry)m(A,E);f.schema&&f.schema.layout&&y(l,f.schema.layout)}function d(f){if("string"!=typeof f.name)throw new Error("Transform module *name* must be a string.");var A="Transform module "+f.name,M="function"==typeof f.transform,k="function"==typeof f.calcTransform;if(!M&&!k)throw new Error(A+" is missing a *transform* or *calcTransform* method.");for(var E in M&&k&&v.log([A+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),b(f.attributes)||v.log(A+" registered without an *attributes* object."),"function"!=typeof f.supplyDefaults&&v.log(A+" registered without a *supplyDefaults* method."),se.transformsRegistry[f.name]=f,se.componentsRegistry)m(E,f.name)}function p(f){var A=f.name,M=A.split("-")[0],k=f.dictionary,E=f.format,P=k&&Object.keys(k).length,D=E&&Object.keys(E).length,F=se.localeRegistry,R=F[A];if(R||(F[A]=R={}),M!==A){var L=F[M];L||(F[M]=L={}),P&&L.dictionary===R.dictionary&&(L.dictionary=k),D&&L.format===R.format&&(L.format=E)}P&&(R.dictionary=k),D&&(R.format=E)}function c(f){if(f.layoutAttributes){var A=f.layoutAttributes._arrayAttrRegexps;if(A)for(var M=0;M<A.length;M++)T(se.layoutArrayRegexes,A[M])}}function g(f,A){var M=se.componentsRegistry[f].schema;if(M&&M.traces){var k=M.traces[A];k&&y(se.modules[A]._module.attributes,k)}}function m(f,A){var M=se.componentsRegistry[f].schema;if(M&&M.transforms){var k=M.transforms[A];k&&y(se.transformsRegistry[A].attributes,k)}}function u(f,A){var M=se.componentsRegistry[f].schema;if(M&&M.subplots){var k=se.subplotsRegistry[A],E=k.layoutAttributes,P="subplot"===k.attr?k.name:k.attr;Array.isArray(P)&&(P=P[0]);var D=M.subplots[P];E&&D&&y(E,D)}}function w(f){return"object"==typeof f&&(f=f.type),f}se.modules={},se.allCategories={},se.allTypes=[],se.subplotsRegistry={},se.transformsRegistry={},se.componentsRegistry={},se.layoutArrayContainers=[],se.layoutArrayRegexes=[],se.traceLayoutAttributes={},se.localeRegistry={},se.apiMethodRegistry={},se.collectableSubplotTypes=null,se.register=function(f){if(se.collectableSubplotTypes=null,!f)throw new Error("No argument passed to Plotly.register.");f&&!Array.isArray(f)&&(f=[f]);for(var A=0;A<f.length;A++){var M=f[A];if(!M)throw new Error("Invalid module was attempted to be registered!");switch(M.moduleType){case"trace":h(M);break;case"transform":d(M);break;case"component":s(M);break;case"locale":p(M);break;case"apiMethod":se.apiMethodRegistry[M.name]=M.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},se.getModule=function(f){var A=se.modules[w(f)];return!!A&&A._module},se.traceIs=function(f,A){if("various"===(f=w(f)))return!1;var M=se.modules[f];return M||(f&&v.log("Unrecognized trace type "+f+"."),M=se.modules[i.type.dflt]),!!M.categories[A]},se.getTransformIndices=function(f,A){for(var M=[],k=f.transforms||[],E=0;E<k.length;E++)k[E].type===A&&M.push(E);return M},se.hasTransform=function(f,A){for(var M=f.transforms||[],k=0;k<M.length;k++)if(M[k].type===A)return!0;return!1},se.getComponentMethod=function(f,A){var M=se.componentsRegistry[f];return M&&M[A]||x},se.call=function(){var f=arguments[0],A=[].slice.call(arguments,1);return se.apiMethodRegistry[f].apply(null,A)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(_,oe,se){"use strict";var v=_("../registry"),x=_("../lib"),T=x.extendFlat,b=x.extendDeep;function e(o){var i;switch(o){case"themes__thumb":i={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":i={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:i={}}return i}oe.exports=function(o,i){var l,h=o.layout,s=b([],o.data),d=b({},h,e(i.tileClass)),p=o._context||{};if(i.width&&(d.width=i.width),i.height&&(d.height=i.height),"thumbnail"===i.tileClass||"themes__thumb"===i.tileClass){d.annotations=[];var c=Object.keys(d);for(l=0;l<c.length;l++)["xaxis","yaxis","zaxis"].indexOf(c[l].slice(0,5))>-1&&(d[c[l]].title={text:""});for(l=0;l<s.length;l++){var g=s[l];g.showscale=!1,g.marker&&(g.marker.showscale=!1),v.traceIs(g,"pie-like")&&(g.textposition="none")}}if(Array.isArray(i.annotations))for(l=0;l<i.annotations.length;l++)d.annotations.push(i.annotations[l]);var m=Object.keys(d).filter(function(M){return M.match(/^scene\d*$/)});if(m.length){var u={};for("thumbnail"===i.tileClass&&(u={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<m.length;l++){var w=d[m[l]];w.xaxis||(w.xaxis={}),w.yaxis||(w.yaxis={}),w.zaxis||(w.zaxis={}),T(w.xaxis,u),T(w.yaxis,u),T(w.zaxis,u),w._scene=null}}var f=document.createElement("div");i.tileClass&&(f.className=i.tileClass);var A={gd:f,td:f,layout:d,data:s,config:{staticPlot:void 0===i.staticPlot||i.staticPlot,plotGlPixelRatio:void 0===i.plotGlPixelRatio?2:i.plotGlPixelRatio,displaylogo:i.displaylogo||!1,showLink:i.showLink||!1,showTips:i.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return"transparent"!==i.setBackground&&(A.config.setBackground=i.setBackground||"opaque"),A.gd.defaultLayout=e(i.tileClass),A}},{"../lib":503,"../registry":638}],640:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plot_api/to_image"),T=_("./filesaver"),b=_("./helpers");oe.exports=function(e,o){var i;return v.isPlainObject(e)||(i=v.getGraphDiv(e)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(l,r){i&&i._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),v.isIE()&&"svg"!==o.format&&r(new Error(b.MSG_IE_BAD_FORMAT)),i&&(i._snapshotInProgress=!0);var y=x(e,o),h=o.filename||e.fn||"newplot";h+="."+o.format.replace("-","."),y.then(function(s){return i&&(i._snapshotInProgress=!1),T(s,h,o.format)}).then(function(s){l(s)}).catch(function(s){i&&(i._snapshotInProgress=!1),r(s)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("./helpers");oe.exports=function(T,b,e){var o=document.createElement("a"),i="download"in o;return new Promise(function(l,r){var y,h;return v.isIE()?(y=x.createBlob(T,"svg"),window.navigator.msSaveBlob(y,b),y=null,l(b)):i?(y=x.createBlob(T,e),h=x.createObjectURL(y),o.href=h,o.download=b,document.body.appendChild(o),o.click(),document.body.removeChild(o),x.revokeObjectURL(h),y=null,l(b)):v.isSafari()?(x.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(T)),l(b)):void r(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(_,oe,se){"use strict";var v=_("../registry");se.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},se.getRedrawFunc=function(T){return function(){v.getComponentMethod("colorbar","draw")(T)}},se.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},se.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var x=window.URL||window.webkitURL;se.createObjectURL=function(T){return x.createObjectURL(T)},se.revokeObjectURL=function(T){return x.revokeObjectURL(T)},se.createBlob=function(T,b){if("svg"===b)return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if("full-json"===b)return new window.Blob([T],{type:"application/json;charset=utf-8"});var e=function(o){for(var i=o.length,l=new ArrayBuffer(i),r=new Uint8Array(l),y=0;y<i;y++)r[y]=o.charCodeAt(y);return l}(window.atob(T));return new window.Blob([e],{type:"image/"+b})},se.octetStream=function(T){document.location.href="data:application/octet-stream"+T},se.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,se.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(_,oe,se){"use strict";var v=_("./helpers"),x={getDelay:v.getDelay,getRedrawFunc:v.getRedrawFunc,clone:_("./cloneplot"),toSVG:_("./tosvg"),svgToImg:_("./svgtoimg"),toImage:_("./toimage"),downloadImage:_("./download")};oe.exports=x},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("events").EventEmitter,T=_("./helpers");oe.exports=function(b){var e=b.emitter||new x,o=new Promise(function(i,l){var r=window.Image,y=b.svg,h=b.format||"png";if(v.isIE()&&"svg"!==h){var s=new Error(T.MSG_IE_BAD_FORMAT);return l(s),b.promise?o:e.emit("error",s)}var d,p,c=b.canvas,g=b.scale||1,w=g*(b.width||300),f=g*(b.height||150),A=c.getContext("2d"),M=new r;"svg"===h||v.isSafari()?p=T.encodeSVG(y):(d=T.createBlob(y,"svg"),p=T.createObjectURL(d)),c.width=w,c.height=f,M.onload=function(){var k;switch(d=null,T.revokeObjectURL(p),"svg"!==h&&A.drawImage(M,0,0,w,f),h){case"jpeg":k=c.toDataURL("image/jpeg");break;case"png":k=c.toDataURL("image/png");break;case"webp":k=c.toDataURL("image/webp");break;case"svg":k=p;break;default:var E="Image format is not jpeg, png, svg or webp.";if(l(new Error(E)),!b.promise)return e.emit("error",E)}i(k),b.promise||e.emit("success",k)},M.onerror=function(k){if(d=null,T.revokeObjectURL(p),l(k),!b.promise)return e.emit("error",k)},M.src=p});return b.promise?o:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(_,oe,se){"use strict";var v=_("events").EventEmitter,x=_("../registry"),T=_("../lib"),b=_("./helpers"),e=_("./cloneplot"),o=_("./tosvg"),i=_("./svgtoimg");oe.exports=function(l,r){var y=new v,h=e(l,{format:"png"}),s=h.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var d=b.getRedrawFunc(s);return x.call("_doPlot",s,h.data,h.layout,h.config).then(d).then(function(){var p=b.getDelay(s._fullLayout);setTimeout(function(){var c=o(s),g=document.createElement("canvas");g.id=T.randstr(),(y=i({format:r.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:g,emitter:y,svg:c})).clean=function(){s&&document.body.removeChild(s)}},p)}).catch(function(p){y.emit("error",p)}),y}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../lib"),T=_("../components/drawing"),b=_("../components/color"),e=_("../constants/xmlns_namespaces"),o=/"/g,i=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");oe.exports=function(l,r,y){var h,s=l._fullLayout,d=s._paper,p=s._toppaper,c=s.width,g=s.height;d.insert("rect",":first-child").call(T.setRect,0,0,c,g).call(b.fill,s.paper_bgcolor);var m=s._basePlotModules||[];for(h=0;h<m.length;h++){var u=m[h];u.toSVG&&u.toSVG(l)}if(p){var w=p.node().childNodes,f=Array.prototype.slice.call(w);for(h=0;h<f.length;h++){var A=f[h];A.childNodes.length&&d.node().appendChild(A)}}s._draggers&&s._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var k=v.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){k.style({visibility:null,display:null});var E=this.style.fontFamily;E&&-1!==E.indexOf('"')&&k.style("font-family",E.replace(o,"TOBESTRIPPED"))}else k.remove()}),d.selectAll(".gradient_filled,.pattern_filled").each(function(){var k=v.select(this),E=this.style.fill;E&&-1!==E.indexOf("url(")&&k.style("fill",E.replace(o,"TOBESTRIPPED"));var P=this.style.stroke;P&&-1!==P.indexOf("url(")&&k.style("stroke",P.replace(o,"TOBESTRIPPED"))}),"pdf"!==r&&"eps"!==r||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(e.xmlns,"xmlns",e.svg),d.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===r&&y&&(d.attr("width",y*c),d.attr("height",y*g),d.attr("viewBox","0 0 "+c+" "+g));var k,E,P,M=(new window.XMLSerializer).serializeToString(d.node());return k=M,E=v.select("body").append("div").style({display:"none"}).html(""),P=k.replace(/(&[^;]*;)/gi,function(D){return"&lt;"===D?"&#60;":"&rt;"===D?"&#62;":-1!==D.indexOf("<")||-1!==D.indexOf(">")?"":E.html(D).text()}),E.remove(),M=(M=(M=P).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(i,"'"),x.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;v.mergeArray(T.text,x,"tx"),v.mergeArray(T.hovertext,x,"htx");var e=T.marker;if(e){v.mergeArray(e.opacity,x,"mo",!0),v.mergeArray(e.color,x,"mc");var o=e.line;o&&(v.mergeArray(o.color,x,"mlc"),v.mergeArrayCastPositive(o.width,x,"mlw"))}}},{"../../lib":503}],648:[function(_,oe,se){"use strict";var v=_("../scatter/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../components/colorscale/attributes"),o=_("../../plots/font_attributes"),i=_("./constants"),l=_("../../components/drawing/attributes").pattern,r=_("../../lib/extend").extendFlat,y=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),h=r({},v.marker.line.width,{dflt:0}),s=r({width:h,editType:"calc"},e("marker.line")),d=r({line:s,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});oe.exports={x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),text:v.text,texttemplate:b({editType:"plot"},{keys:i.eventDataKeys}),hovertext:v.hovertext,hovertemplate:T({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},y,{}),insidetextfont:r({},y,{}),outsidetextfont:r({},y,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},v.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:v.selected.marker.opacity,color:v.selected.marker.color,editType:"style"},textfont:v.selected.textfont,editType:"style"},unselected:{marker:{opacity:v.unselected.marker.opacity,color:v.unselected.marker.color,editType:"style"},textfont:v.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("../../components/colorscale/helpers").hasColorscale,b=_("../../components/colorscale/calc"),e=_("./arrays_to_calcdata"),o=_("../scatter/calc_selection");oe.exports=function(i,l){var r,y,h,s,d,p,c=v.getFromId(i,l.xaxis||"x"),g=v.getFromId(i,l.yaxis||"y"),m={msUTC:!(!l.base&&0!==l.base)};"h"===l.orientation?(r=c.makeCalcdata(l,"x",m),h=g.makeCalcdata(l,"y"),s=x(l,g,"y",h),d=!!l.yperiodalignment,p="y"):(r=g.makeCalcdata(l,"y",m),h=c.makeCalcdata(l,"x"),s=x(l,c,"x",h),d=!!l.xperiodalignment,p="x"),y=s.vals;for(var u=Math.min(y.length,r.length),w=new Array(u),f=0;f<u;f++)w[f]={p:y[f],s:r[f]},d&&(w[f].orig_p=h[f],w[f][p+"End"]=s.ends[f],w[f][p+"Start"]=s.starts[f]),l.ids&&(w[f].id=String(l.ids[f]));return T(l,"marker")&&b(i,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),T(l,"marker.line")&&b(i,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(w,l),o(w,l),w}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(_,oe,se){"use strict";oe.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib").isArrayOrTypedArray,T=_("../../constants/numerical").BADNUM,b=_("../../registry"),e=_("../../plots/cartesian/axes"),o=_("../../plots/cartesian/constraints").getAxisGroup,i=_("./sieve.js");function l(u,w,f,A,M){if(A.length){var k,E,P,D;switch(function(F,R){var L,I;for(L=0;L<R.length;L++){var B,V=R[L],Z=V[0].trace,Y="funnel"===Z.type?Z._base:Z.base,Q="h"===Z.orientation?Z.xcalendar:Z.ycalendar,re="category"===F.type||"multicategory"===F.type?function(){return null}:F.d2c;if(x(Y)){for(I=0;I<Math.min(Y.length,V.length);I++)B=re(Y[I],0,Q),v(B)?(V[I].b=+B,V[I].hasB=1):V[I].b=0;for(;I<V.length;I++)V[I].b=0}else{B=re(Y,0,Q);var $=v(B);for(B=$?B:0,I=0;I<V.length;I++)V[I].b=B,$&&(V[I].hasB=1)}}}(f,A),M.mode){case"overlay":r(w,f,A,M);break;case"group":for(k=[],E=[],P=0;P<A.length;P++)void 0===(D=A[P])[0].trace.offset?E.push(D):k.push(D);E.length&&(F=u,L=f,V=new i(E,{posAxis:R=w,sepNegVal:!1,overlapNoMerge:!(B=M).norm}),function(Z,Y,Q,re){for(var $=Z._fullLayout,j=Q.minDiff,q=Q.traces,W=q.length,ae=Q.positions.length!==Q.distinctPositions.length,G=j*(1-re.gap),ee=o($,Y._id)+q[0][0].trace.orientation,te=$._alignmentOpts[ee]||{},le=0;le<W;le++){var ue,de,he=q[le],be=he[0].trace,_e=Object.keys((te[be.alignmentgroup]||{}).offsetGroups||{}).length,Ee=(ue=_e?G/_e:ae?G/W:G)*(1-(re.groupgap||0));de=_e?((2*be._offsetIndex+1-_e)*ue-Ee)/2:ae?((2*le+1-W)*ue-Ee)/2:-Ee/2;var De=he[0].t;De.barwidth=Ee,De.poffset=de,De.bargroupwidth=G,De.bardelta=j}Q.binWidth=q[0][0].t.barwidth/100,h(Q),s(Y,Q),d(Y,Q,ae)}(F,R,V,B),function(Z,Y){for(var Q=Z.traces,re=0;re<Q.length;re++){var $=Q[re];if(void 0===$[0].trace.base)for(var J=new i([$],{posAxis:Y,sepNegVal:!0,overlapNoMerge:!0}),ie=0;ie<$.length;ie++){var j=$[ie];if(j.p!==T){var q=J.put(j.p,j.b+j.s);q&&(j.b=q)}}}}(V,R),B.norm?(c(V),g(L,V,B)):p(L,V)),k.length&&r(w,f,k,M);break;case"stack":case"relative":for(k=[],E=[],P=0;P<A.length;P++)void 0===(D=A[P])[0].trace.base?E.push(D):k.push(D);E.length&&function(F,R,L,I,B){var V=new i(I,{posAxis:R,sepNegVal:"relative"===B.mode,overlapNoMerge:!(B.norm||"stack"===B.mode||"relative"===B.mode)});y(R,V,B),function($,J,ie){var j,q,W,ae,G,ee,te=m($),le=J.traces;for(ae=0;ae<le.length;ae++)if("funnel"===(q=(j=le[ae])[0].trace).type)for(G=0;G<j.length;G++)(ee=j[G]).s!==T&&J.put(ee.p,-.5*ee.s);for(ae=0;ae<le.length;ae++){W="funnel"===(q=(j=le[ae])[0].trace).type;var ue=[];for(G=0;G<j.length;G++)if((ee=j[G]).s!==T){var de,he=J.put(ee.p,de=W?ee.s:ee.s+ee.b),be=he+de;ee.b=he,ee[te]=be,ie.norm||(ue.push(be),ee.hasB&&ue.push(he))}ie.norm||(q._extremes[$._id]=e.findExtremes($,ue,{tozero:!0,padded:!0}))}}(L,V,B);for(var Z=0;Z<I.length;Z++)for(var Y=I[Z],Q=0;Q<Y.length;Q++){var re=Y[Q];re.s!==T&&re.b+re.s===V.get(re.p,re.s)&&(re._outmost=!0)}B.norm&&g(L,V,B)}(0,w,f,E,M),k.length&&r(w,f,k,M)}!function(F,R){var L,I,B,V=m(R),Z={},Y=1/0,Q=-1/0;for(L=0;L<F.length;L++)for(B=F[L],I=0;I<B.length;I++){var re=B[I].p;v(re)&&(Y=Math.min(Y,re),Q=Math.max(Q,re))}var $=1e4/(Q-Y),J=Z.round=function(ee){return String(Math.round($*(ee-Y)))};for(L=0;L<F.length;L++){(B=F[L])[0].t.extents=Z;var ie=B[0].t.poffset,j=Array.isArray(ie);for(I=0;I<B.length;I++){var q=B[I],W=q[V]-q.w/2;if(v(W)){var ae=q[V]+q.w/2,G=J(q.p);Z[G]=Z[G]?[Math.min(W,Z[G][0]),Math.max(ae,Z[G][1])]:[W,ae]}q.p0=q.p+(j?ie[I]:ie),q.p1=q.p0+q.w,q.s0=q.b,q.s1=q.s0+q.s}}}(A,w)}var F,R,L,B,V}function r(u,w,f,A){for(var M=0;M<f.length;M++){var E=new i([f[M]],{posAxis:u,sepNegVal:!1,overlapNoMerge:!A.norm});y(u,E,A),A.norm?(c(E),g(w,E,A)):p(w,E)}}function y(u,w,f){for(var A=w.minDiff,M=w.traces,k=A*(1-f.gap),E=k*(1-(f.groupgap||0)),P=-E/2,D=0;D<M.length;D++){var F=M[D][0].t;F.barwidth=E,F.poffset=P,F.bargroupwidth=k,F.bardelta=A}w.binWidth=M[0][0].t.barwidth/100,h(w),s(u,w),d(u,w)}function h(u){var w,f,A=u.traces;for(w=0;w<A.length;w++){var M,k=A[w],E=k[0],P=E.trace,D=E.t,F=P._offset||P.offset,R=D.poffset;if(x(F)){for(M=Array.prototype.slice.call(F,0,k.length),f=0;f<M.length;f++)v(M[f])||(M[f]=R);for(f=M.length;f<k.length;f++)M.push(R);D.poffset=M}else void 0!==F&&(D.poffset=F);var L=P._width||P.width,I=D.barwidth;if(x(L)){var B=Array.prototype.slice.call(L,0,k.length);for(f=0;f<B.length;f++)v(B[f])||(B[f]=I);for(f=B.length;f<k.length;f++)B.push(I);if(D.barwidth=B,void 0===F){for(M=[],f=0;f<k.length;f++)M.push(R+(I-B[f])/2);D.poffset=M}}else void 0!==L&&(D.barwidth=L,void 0===F&&(D.poffset=R+(I-L)/2))}}function s(u,w){for(var f=w.traces,A=m(u),M=0;M<f.length;M++)for(var k=f[M],E=k[0].t,P=E.poffset,D=Array.isArray(P),F=E.barwidth,R=Array.isArray(F),L=0;L<k.length;L++){var I=k[L],B=I.w=R?F[L]:F;I[A]=I.p+(D?P[L]:P)+B/2}}function d(u,w,f){var A=w.traces,M=w.minDiff/2;e.minDtick(u,w.minDiff,w.distinctPositions[0],f);for(var k=0;k<A.length;k++){var E,P,D,F,R=A[k],L=R[0],I=L.trace,B=[];for(F=0;F<R.length;F++)P=(E=R[F]).p-M,B.push(P,D=E.p+M);if(I.width||I.offset){var V=L.t,Z=V.poffset,Y=V.barwidth,Q=Array.isArray(Z),re=Array.isArray(Y);for(F=0;F<R.length;F++)D=(P=(E=R[F]).p+(Q?Z[F]:Z))+(re?Y[F]:Y),B.push(P,D)}I._extremes[u._id]=e.findExtremes(u,B,{padded:!1})}}function p(u,w){for(var f=w.traces,A=m(u),M=0;M<f.length;M++){for(var k=f[M],E=k[0].trace,P=[],D=!1,F=0;F<k.length;F++){var R=k[F],L=R.b,I=L+R.s;R[A]=I,P.push(I),R.hasB&&P.push(L),R.hasB&&R.b||(D=!0)}E._extremes[u._id]=e.findExtremes(u,P,{tozero:D,padded:!0})}}function c(u){for(var w=u.traces,f=0;f<w.length;f++)for(var A=w[f],M=0;M<A.length;M++){var k=A[M];k.s!==T&&u.put(k.p,k.b+k.s)}}function g(u,w,f){var A=w.traces,M=m(u),k="fraction"===f.norm?1:100,E=k/1e9,P=u.l2c(u.c2l(0)),D="stack"===f.mode?k:P;function F(ie){return v(u.c2l(ie))&&(ie<P-E||ie>D+E||!v(P))}for(var R=0;R<A.length;R++){for(var L=A[R],I=L[0].trace,B=[],V=!1,Z=!1,Y=0;Y<L.length;Y++){var Q=L[Y];if(Q.s!==T){var re=Math.abs(k/w.get(Q.p,Q.s));Q.b*=re,Q.s*=re;var $=Q.b,J=$+Q.s;Q[M]=J,B.push(J),Z=Z||F(J),Q.hasB&&(B.push($),Z=Z||F($)),Q.hasB&&Q.b||(V=!0)}}I._extremes[u._id]=e.findExtremes(u,B,{tozero:V,padded:Z})}}function m(u){return u._id.charAt(0)}oe.exports={crossTraceCalc:function(u,w){for(var f=w.xaxis,A=w.yaxis,M=u._fullLayout,k=u._fullData,E=u.calcdata,P=[],D=[],F=0;F<k.length;F++){var R=k[F];if(!0===R.visible&&b.traceIs(R,"bar")&&R.xaxis===f._id&&R.yaxis===A._id&&("h"===R.orientation?P.push(E[F]):D.push(E[F]),R._computePh))for(var L=u.calcdata[F],I=0;I<L.length;I++)"function"==typeof L[I].ph0&&(L[I].ph0=L[I].ph0()),"function"==typeof L[I].ph1&&(L[I].ph1=L[I].ph1())}var B={xCat:"category"===f.type||"multicategory"===f.type,yCat:"category"===A.type||"multicategory"===A.type,mode:M.barmode,norm:M.barnorm,gap:M.bargap,groupgap:M.bargroupgap};l(u,f,A,D,B),l(u,A,f,P,B)},setGroupPositions:l}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../../registry"),b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),o=_("./style_defaults"),i=_("../../plots/cartesian/constraints").getAxisGroup,l=_("./attributes"),r=v.coerceFont;function y(s,d,p,c){var g=d.orientation,u=i(p,d[{v:"x",h:"y"}[g]+"axis"])+g,w=p._alignmentOpts||{},f=c("alignmentgroup"),A=w[u];A||(A=w[u]={});var M=A[f];M?M.traces.push(d):M=A[f]={traces:[d],alignmentIndex:Object.keys(A).length,offsetGroups:{}};var k=c("offsetgroup"),E=M.offsetGroups,P=E[k];k&&(P||(P=E[k]={offsetIndex:Object.keys(E).length}),d._offsetIndex=P.offsetIndex)}function h(s,d,p,c,g,m){var u=!1!==(m=m||{}).moduleHasSelected,w=!1!==m.moduleHasUnselected,f=!1!==m.moduleHasConstrain,A=!1!==m.moduleHasCliponaxis,M=!1!==m.moduleHasTextangle,k=!1!==m.moduleHasInsideanchor,E=!!m.hasPathbar,P=Array.isArray(g)||"auto"===g,D=P||"inside"===g,F=P||"outside"===g;if(D||F){var R=r(c,"textfont",p.font),L=v.extendFlat({},R),I=!(s.textfont&&s.textfont.color);if(I&&delete L.color,r(c,"insidetextfont",L),E){var B=v.extendFlat({},R);I&&delete B.color,r(c,"pathbar.textfont",B)}F&&r(c,"outsidetextfont",R),u&&c("selected.textfont.color"),w&&c("unselected.textfont.color"),f&&c("constraintext"),A&&c("cliponaxis"),M&&c("textangle"),c("texttemplate")}D&&k&&c("insidetextanchor")}oe.exports={supplyDefaults:function(s,d,p,c){function g(f,A){return v.coerce(s,d,l,f,A)}if(b(s,d,c,g)){e(s,d,c,g),g("xhoverformat"),g("yhoverformat"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");h(s,0,c,g,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(s,d,g,p,c);var u=(d.marker.line||{}).color,w=T.getComponentMethod("errorbars","supplyDefaults");w(s,d,u||x.defaultLine,{axis:"y"}),w(s,d,u||x.defaultLine,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(d,g)}else d.visible=!1},crossTraceDefaults:function(s,d){var p;function c(m){return v.coerce(p._input,p,l,m)}if("group"===d.barmode)for(var g=0;g<s.length;g++)"bar"===(p=s[g]).type&&y(0,p,d,c)},handleGroupingDefaults:y,handleText:h}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){return v.x="xVal"in x?x.xVal:x.x,v.y="yVal"in x?x.yVal:x.y,x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),"h"===T.orientation?(v.label=v.y,v.value=v.x):(v.label=v.x,v.value=v.y),v}},{}],654:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../../lib").isArrayOrTypedArray;se.coerceString=function(b,e,o){if("string"==typeof e){if(e||!b.noBlank)return e}else if(("number"==typeof e||!0===e)&&!b.strict)return String(e);return void 0!==o?o:b.dflt},se.coerceNumber=function(b,e,o){if(v(e)){e=+e;var i=b.min,l=b.max;if(!(void 0!==i&&e<i||void 0!==l&&e>l))return e}return void 0!==o?o:b.dflt},se.coerceColor=function(b,e,o){return x(e).isValid()?e:void 0!==o?o:b.dflt},se.coerceEnumerated=function(b,e,o){return b.coerceNumber&&(e=+e),-1!==b.values.indexOf(e)?e:void 0!==o?o:b.dflt},se.getValue=function(b,e){var o;return Array.isArray(b)?e<b.length&&(o=b[e]):o=b,o},se.getLineWidth=function(b,e){return 0<e.mlw?e.mlw:T(b.marker.line.width)?0:b.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(_,oe,se){"use strict";var v=_("../../components/fx"),x=_("../../registry"),T=_("../../components/color"),b=_("../../lib").fillText,e=_("./helpers").getLineWidth,o=_("../../plots/cartesian/axes").hoverLabelText,i=_("../../constants/numerical").BADNUM;function l(y,h,s,d,p){var c,g,m,u,w,f,A,M=y.cd,k=M[0].trace,E=M[0].t,P="closest"===d,D="waterfall"===k.type,F=y.maxHoverDistance,R=y.maxSpikeDistance;"h"===k.orientation?(c=s,g=h,m="y",u="x",w=j,f=J):(c=h,g=s,m="x",u="y",f=j,w=J);var L=k[m+"period"],I=P||L;function B(ue){return Z(ue,-1)}function V(ue){return Z(ue,1)}function Z(ue,de){return ue[m]+de*ue.w/2}function Y(ue){return ue[m+"End"]-ue[m+"Start"]}var Q=P?B:L?function(ue){return ue.p-Y(ue)/2}:function(ue){return Math.min(B(ue),ue.p-E.bardelta/2)},re=P?V:L?function(ue){return ue.p+Y(ue)/2}:function(ue){return Math.max(V(ue),ue.p+E.bardelta/2)};function $(ue,de,he){return p.finiteRange&&(he=0),v.inbox(ue-c,de-c,he+Math.min(1,Math.abs(de-ue)/A)-1)}function J(ue){return $(Q(ue),re(ue),F)}function ie(ue){var de=ue[u];if(D){var he=Math.abs(ue.rawS)||0;g>0?de+=he:g<0&&(de-=he)}return de}function j(ue){var de=g,he=ue.b,be=ie(ue);return v.inbox(he-de,be-de,F+(be-de)/(be-he)-1)}var q=y[m+"a"],W=y[u+"a"];A=Math.abs(q.r2c(q.range[1])-q.r2c(q.range[0]));var ue,de,he,be,ae=v.getDistanceFunction(d,w,f,function(ue){return(w(ue)+f(ue))/2});if(v.getClosest(M,ae,y),!1!==y.index&&M[y.index].p!==i){I||(Q=function(ue){return Math.min(B(ue),ue.p-E.bargroupwidth/2)},re=function(ue){return Math.max(V(ue),ue.p+E.bargroupwidth/2)});var G=M[y.index],ee=k.base?G.b+G.s:G.s;y[u+"0"]=y[u+"1"]=W.c2p(G[u],!0),y[u+"LabelVal"]=ee;var te=E.extents[E.extents.round(G.p)];return y[m+"0"]=q.c2p(P?Q(G):te[0],!0),y[m+"1"]=q.c2p(P?re(G):te[1],!0),y[m+"LabelVal"]=void 0!==G.orig_p?G.orig_p:G.p,y.labelLabel=o(q,y[m+"LabelVal"],k[m+"hoverformat"]),y.valueLabel=o(W,y[u+"LabelVal"],k[u+"hoverformat"]),y.baseLabel=o(W,G.b,k[u+"hoverformat"]),y.spikeDistance=(de=g,he=(ue=G).b,be=ie(ue),(v.inbox(he-de,be-de,R+(be-de)/(be-he)-1)+function(ue){return $(B(ue),V(ue),R)}(G))/2),y[m+"Spike"]=q.c2p(G.p,!0),b(G,k,y),y.hovertemplate=k.hovertemplate,y}}function r(y,h){var s=h.mcc||y.marker.color,d=h.mlcc||y.marker.line.color,p=e(y,h);return T.opacity(s)?s:T.opacity(d)&&p?d:void 0}oe.exports={hoverPoints:function(y,h,s,d,p){var c=l(y,h,s,d,p);if(c){var g=c.cd,m=g[0].trace,u=g[c.index];return c.color=r(m,u),x.getComponentMethod("errorbars","hoverInfo")(u,m,c),[c]}},hoverOnBars:l,getTraceColor:r}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc").crossTraceCalc,colorbar:_("../scatter/marker_colorbar"),arraysToCalcdata:_("./arrays_to_calcdata"),plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"bar",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(_,oe,se){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../plots/cartesian/axes"),T=_("../../lib"),b=_("./layout_attributes");oe.exports=function(e,o,i){function l(m,u){return T.coerce(e,o,b,m,u)}for(var r=!1,y=!1,h=!1,s={},d=l("barmode"),p=0;p<i.length;p++){var c=i[p];if(v.traceIs(c,"bar")&&c.visible){if(r=!0,"group"===d){var g=c.xaxis+c.yaxis;s[g]&&(h=!0),s[g]=!0}c.visible&&"histogram"===c.type&&"category"!==x.getFromId({_fullLayout:o},c["v"===c.orientation?"xaxis":"yaxis"]).type&&(y=!0)}}r?("overlay"!==d&&l("barnorm"),l("bargap",y&&!h?0:.2),l("bargroupgap")):delete o.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../lib/svg_text_utils"),e=_("../../components/color"),o=_("../../components/drawing"),i=_("../../registry"),l=_("../../plots/cartesian/axes").tickText,r=_("./uniform_text"),y=r.recordMinTextSize,h=r.clearMinTextSize,s=_("./style"),d=_("./helpers"),p=_("./constants"),c=_("./attributes"),g=c.text,m=c.textposition,u=_("../../components/fx/helpers").appendArrayPointValue,w=p.TEXTPAD;function f(R){return R.id}function M(R,L){return R<L?1:-1}function k(R,L,I,B){var V;return!L.uniformtext.mode&&E(I)?(B&&(V=B()),R.transition().duration(I.duration).ease(I.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()})):R}function E(R){return R&&R.duration>0}function P(R){return"auto"===R?0:R}function D(R,L){var I=Math.PI/180*L,B=Math.abs(Math.sin(I)),V=Math.abs(Math.cos(I));return{x:R.width*V+R.height*B,y:R.width*B+R.height*V}}function F(R,L,I,B,V,Z){var Y=!!Z.isHorizontal,Q=!!Z.constrained,re=Z.angle||0,$=Z.anchor||"end",J="end"===$,ie="start"===$,j=((Z.leftToRight||0)+1)/2,q=1-j,W=V.width,ae=V.height,G=Math.abs(L-R),ee=Math.abs(B-I),te=G>2*w&&ee>2*w?w:0;G-=2*te,ee-=2*te;var le=P(re);"auto"!==re||W<=G&&ae<=ee||!(W>G||ae>ee)||(W>ee||ae>G)&&W<ae==G<ee||(le+=90);var ue=D(V,le),de=1;Q&&(de=Math.min(1,G/ue.x,ee/ue.y));var he=V.left*q+V.right*j,be=(V.top+V.bottom)/2,me=(R+w)*q+(L-w)*j,_e=(I+B)/2,Ee=0,De=0;if(ie||J){var Se=(Y?ue.x:ue.y)/2,Fe=Y?M(R,L):M(I,B);Y?ie?(me=R+Fe*te,Ee=-Fe*Se):(me=L-Fe*te,Ee=Fe*Se):ie?(_e=I+Fe*te,De=-Fe*Se):(_e=B-Fe*te,De=Fe*Se)}return{textX:he,textY:be,targetX:me,targetY:_e,anchorX:Ee,anchorY:De,scale:de,rotate:le}}oe.exports={plot:function(R,L,I,B,V,Z){var Y=L.xaxis,Q=L.yaxis,re=R._fullLayout;V||(V={mode:re.barmode,norm:re.barmode,gap:re.bargap,groupgap:re.bargroupgap},h("bar",re));var $=T.makeTraceGroups(B,I,"trace bars").each(function(J){var ie=v.select(this),j=J[0].trace,ae="bar"===j.type||"funnel"===j.type,G=0;"waterfall"===j.type&&j.connector.visible&&"between"===j.connector.mode&&(G=j.connector.line.width/2);var ee="h"===j.orientation,te=E(V),le=T.ensureSingle(ie,"g","points"),ue=function A(R){if(R.ids)return f}(j),de=le.selectAll("g.point").data(T.identity,ue);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(be,me){var _e,Ee,He,$e,et,tt,ct,bt,At,Ut,De=v.select(this),Se=($e=Y,et=Q,bt=[],Ut=(tt=ee)?et:$e,(ct=[])[0]=(At=tt?$e:et).c2p((He=be).s0,!0),bt[0]=Ut.c2p(He.p0,!0),ct[1]=At.c2p(He.s1,!0),bt[1]=Ut.c2p(He.p1,!0),tt?[ct,bt]:[bt,ct]),Fe=Se[0][0],ve=Se[0][1],Te=Se[1][0],Ie=Se[1][1],Ce=0==(ee?ve-Fe:Ie-Te);if(Ce&&ae&&d.getLineWidth(j,be)&&(Ce=!1),Ce||(Ce=!(x(Fe)&&x(ve)&&x(Te)&&x(Ie))),be.isBlank=Ce,Ce&&(ee?ve=Fe:Ie=Te),G&&!Ce&&(ee?(Fe-=M(Fe,ve)*G,ve+=M(Fe,ve)*G):(Te-=M(Te,Ie)*G,Ie+=M(Te,Ie)*G)),"waterfall"===j.type){if(!Ce){var Re=j[be.dir].marker;_e=Re.line.width,Ee=Re.color}}else _e=d.getLineWidth(j,be),Ee=be.mc||j.marker.color;function Ue(He){var $e=v.round(_e/2%1,2);return 0===V.gap&&0===V.groupgap?v.round(Math.round(He)-$e,2):He}if(!R._context.staticPlot){var qe=e.opacity(Ee)<1||_e>.01?Ue:function(He,$e,et){return et&&He===$e?He:Math.abs(He-$e)>=2?Ue(He):He>$e?Math.ceil(He):Math.floor(He)};Fe=qe(Fe,ve,ee),ve=qe(ve,Fe,ee),Te=qe(Te,Ie,!ee),Ie=qe(Ie,Te,!ee)}var Xe=k(T.ensureSingle(De,"path"),re,V,Z);if(Xe.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ve-Fe)*(Ie-Te))||Ce&&R._context.staticPlot?"M0,0Z":"M"+Fe+","+Te+"V"+Ie+"H"+ve+"V"+Te+"Z").call(o.setClipUrl,L.layerClipId,R),!re.uniformtext.mode&&te){var st=o.makePointStyleFns(j);o.singlePointStyle(be,Xe,j,st,R)}(function(He,$e,et,tt,ct,bt,At,Ut,Ct,dt,at){var Nt,rn=$e.xaxis,en=$e.yaxis,Ge=He._fullLayout;function Qe(un,an,wn){return T.ensureSingle(un,"text").text(an).attr({class:"bartext bartext-"+Nt,"text-anchor":"middle","data-notex":1}).call(o.font,wn).call(b.convertToTspans,He)}var an,wn,Zn,An,hn,pn,Rt=tt[0].trace,gt="h"===Rt.orientation,Be=(wn=ct,Zn=rn,An=en,hn=(pn=(an=tt)[0].trace).texttemplate?function(xn,En,In,Yn,nr){var sr=En[0].trace,Ar=T.castOption(sr,In,"texttemplate");if(!Ar)return"";var yr,Pr,Wr,lr,Hn="histogram"===sr.type,Sr="waterfall"===sr.type,ti="funnel"===sr.type,Fn="h"===sr.orientation;function br(di){return l(lr,lr.c2l(di),!0).text}Fn?(yr="y",Pr=nr,Wr="x",lr=Yn):(yr="x",Pr=Yn,Wr="y",lr=nr);var xr=En[In],Kn={};Kn.label=xr.p,Kn.labelLabel=Kn[yr+"Label"]=l(Pr,Pr.c2l(xr.p),!0).text;var ci=T.castOption(sr,xr.i,"text");(0===ci||ci)&&(Kn.text=ci),Kn.value=xr.s,Kn.valueLabel=Kn[Wr+"Label"]=br(xr.s);var Or={};u(Or,sr,xr.i),(Hn||void 0===Or.x)&&(Or.x=Fn?Kn.value:Kn.label),(Hn||void 0===Or.y)&&(Or.y=Fn?Kn.label:Kn.value),(Hn||void 0===Or.xLabel)&&(Or.xLabel=Fn?Kn.valueLabel:Kn.labelLabel),(Hn||void 0===Or.yLabel)&&(Or.yLabel=Fn?Kn.labelLabel:Kn.valueLabel),Sr&&(Kn.delta=+xr.rawS||xr.s,Kn.deltaLabel=br(Kn.delta),Kn.final=xr.v,Kn.finalLabel=br(Kn.final),Kn.initial=Kn.final-Kn.delta,Kn.initialLabel=br(Kn.initial)),ti&&(Kn.value=xr.s,Kn.valueLabel=br(Kn.value),Kn.percentInitial=xr.begR,Kn.percentInitialLabel=T.formatPercent(xr.begR),Kn.percentPrevious=xr.difR,Kn.percentPreviousLabel=T.formatPercent(xr.difR),Kn.percentTotal=xr.sumR,Kn.percenTotalLabel=T.formatPercent(xr.sumR));var li=T.castOption(sr,xr.i,"customdata");return li&&(Kn.customdata=li),T.texttemplateString(Ar,Kn,xn._d3locale,Or,Kn,sr._meta||{})}(Ge,an,wn,Zn,An):pn.textinfo?function(xn,En,In,Yn){var nr=xn[0].trace,sr="h"===nr.orientation,Ar="waterfall"===nr.type,yr="funnel"===nr.type;function Pr(li){return l(sr?In:Yn,+li,!0).text}var Wr,Hn=xn[En],Sr=nr.textinfo.split("+"),ti=[],Fn=function(li){return-1!==Sr.indexOf(li)};if(Fn("label")&&ti.push(l(sr?Yn:In,xn[En].p,!0).text),Fn("text")&&(0===(Wr=T.castOption(nr,Hn.i,"text"))||Wr)&&ti.push(Wr),Ar){var xr=+Hn.rawS||Hn.s,Kn=Hn.v,Qr=Kn-xr;Fn("initial")&&ti.push(Pr(Qr)),Fn("delta")&&ti.push(Pr(xr)),Fn("final")&&ti.push(Pr(Kn))}if(yr){Fn("value")&&ti.push(Pr(Hn.s));var ci=0;Fn("percent initial")&&ci++,Fn("percent previous")&&ci++,Fn("percent total")&&ci++;var Or=ci>1;Fn("percent initial")&&(Wr=T.formatPercent(Hn.begR),Or&&(Wr+=" of initial"),ti.push(Wr)),Fn("percent previous")&&(Wr=T.formatPercent(Hn.difR),Or&&(Wr+=" of previous"),ti.push(Wr)),Fn("percent total")&&(Wr=T.formatPercent(Hn.sumR),Or&&(Wr+=" of total"),ti.push(Wr))}return ti.join("<br>")}(an,wn,Zn,An):d.getValue(pn.text,wn),d.coerceString(g,hn));Nt=function(un,an){var wn=d.getValue(un.textposition,an);return d.coerceEnumerated(m,wn)}(Rt,ct);var Le=tt[ct],je=!("stack"===dt.mode||"relative"===dt.mode)||Le._outmost;if(Be&&"none"!==Nt&&(!Le.isBlank&&bt!==At&&Ut!==Ct||"auto"!==Nt&&"inside"!==Nt)){var Ke=Ge.font,ft=s.getBarColor(tt[ct],Rt),mt=s.getInsideTextFont(Rt,ct,Ke,ft),pt=s.getOutsideTextFont(Rt,ct,Ke),Ot=et.datum();gt?"log"===rn.type&&Ot.s0<=0&&(bt=rn.range[0]<rn.range[1]?0:rn._length):"log"===en.type&&Ot.s0<=0&&(Ut=en.range[0]<en.range[1]?en._length:0);var Pt,Jt,$t,ut,Dt,Wt=Math.abs(At-bt)-2*w,zt=Math.abs(Ct-Ut)-2*w;if("outside"===Nt&&(je||Le.hasB||(Nt="inside")),"auto"===Nt&&(je?(Nt="inside",Pt=Qe(et,Be,Dt=T.ensureUniformFontSize(He,mt)),ut=(Jt=o.bBox(Pt.node())).height,($t=Jt.width)>0&&ut>0&&($t<=Wt&&ut<=zt||$t<=zt&&ut<=Wt||(gt?Wt>=$t*(zt/ut):zt>=ut*(Wt/$t)))?Nt="inside":(Nt="outside",Pt.remove(),Pt=null)):Nt="inside"),!Pt){var yt=(Pt=Qe(et,Be,Dt=T.ensureUniformFontSize(He,"outside"===Nt?pt:mt))).attr("transform");if(Pt.attr("transform",""),$t=(Jt=o.bBox(Pt.node())).width,ut=Jt.height,Pt.attr("transform",yt),$t<=0||ut<=0)return void Pt.remove()}var It,ln=Rt.textangle;It="outside"===Nt?function(un,an,wn,Zn,An,hn){var pn,xn=!!hn.isHorizontal,En=!!hn.constrained,In=hn.angle||0,Yn=An.width,nr=An.height,sr=Math.abs(an-un),Ar=Math.abs(Zn-wn);pn=xn?Ar>2*w?w:0:sr>2*w?w:0;var yr=1;En&&(yr=xn?Math.min(1,Ar/nr):Math.min(1,sr/Yn));var Pr=P(In),Wr=D(An,Pr),lr=(xn?Wr.x:Wr.y)/2,Hn=(An.left+An.right)/2,Sr=(An.top+An.bottom)/2,ti=(un+an)/2,Fn=(wn+Zn)/2,br=0,xr=0,Kn=xn?M(an,un):M(wn,Zn);return xn?(ti=an-Kn*pn,br=Kn*lr):(Fn=Zn+Kn*pn,xr=-Kn*lr),{textX:Hn,textY:Sr,targetX:ti,targetY:Fn,anchorX:br,anchorY:xr,scale:yr,rotate:Pr}}(bt,At,Ut,Ct,Jt,{isHorizontal:gt,constrained:"both"===Rt.constraintext||"outside"===Rt.constraintext,angle:ln}):F(bt,At,Ut,Ct,Jt,{isHorizontal:gt,constrained:"both"===Rt.constraintext||"inside"===Rt.constraintext,angle:ln,anchor:Rt.insidetextanchor}),It.fontSize=Dt.size,y("histogram"===Rt.type?"bar":Rt.type,It,Ge),Le.transform=It,k(Pt,Ge,dt,at).attr("transform",T.getTextTransform(It))}else et.select("text").remove()})(R,L,De,J,me,Fe,ve,Te,Ie,V,Z),L.layerClipId&&o.hideOutsideRangePoint(be,De.select("text"),Y,Q,j.xcalendar,j.ycalendar)}),o.setClipUrl(ie,!1===j.cliponaxis?null:L.layerClipId,R)});i.getComponentMethod("errorbars","plot")(R,$,L,V)},toMoveInsideBar:F}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(_,oe,se){"use strict";function v(x,T,b,e,o){var i=T.c2p(e?x.s0:x.p0,!0),l=T.c2p(e?x.s1:x.p1,!0),r=b.c2p(e?x.p0:x.s0,!0),y=b.c2p(e?x.p1:x.s1,!0);return o?[(i+l)/2,(r+y)/2]:e?[l,(r+y)/2]:[(i+l)/2,y]}oe.exports=function(x,T){var b,e=x.cd,o=x.xaxis,i=x.yaxis,l=e[0].trace,r="funnel"===l.type,y="h"===l.orientation,h=[];if(!1===T)for(b=0;b<e.length;b++)e[b].selected=0;else for(b=0;b<e.length;b++){var s=e[b],d="ct"in s?s.ct:v(s,o,i,y,r);T.contains(d,!1,b,x)?(h.push({pointNumber:b,x:o.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0}return h}},{}],661:[function(_,oe,se){"use strict";oe.exports=T;var v=_("../../lib").distinctVals,x=_("../../constants/numerical").BADNUM;function T(b,e){this.traces=b,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var o=1/0,i=[],l=0;l<b.length;l++){for(var r=b[l],y=0;y<r.length;y++){var h=r[y];h.p!==x&&i.push(h.p)}r[0]&&r[0].width1&&(o=Math.min(r[0].width1,o))}this.positions=i;var s=v(i);this.distinctPositions=s.vals,this.minDiff=1===s.vals.length&&o!==1/0?o:Math.min(s.minDiff,o);var d=(e.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}T.prototype.put=function(b,e){var o=this.getLabel(b,e),i=this.bins[o]||0;return this.bins[o]=i+e,i},T.prototype.get=function(b,e){var o=this.getLabel(b,e);return this.bins[o]||0},T.prototype.getLabel=function(b,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?b:Math.round(b/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing"),b=_("../../lib"),e=_("../../registry"),o=_("./uniform_text").resizeText,i=_("./attributes"),l=i.textfont,r=i.insidetextfont,y=i.outsidetextfont,h=_("./helpers");function s(f,A,M){T.pointStyle(f.selectAll("path"),A,M),d(f,A,M)}function d(f,A,M){f.selectAll("text").each(function(k){var E=v.select(this),P=b.ensureUniformFontSize(M,p(E,k,A,M));T.font(E,P)})}function p(f,A,M,k){var E=k._fullLayout.font,P=M.textfont;if(f.classed("bartext-inside")){var D=w(A,M);P=g(M,A.i,E,D)}else f.classed("bartext-outside")&&(P=m(M,A.i,E));return P}function c(f,A,M){return u(l,f.textfont,A,M)}function g(f,A,M,k){var E=c(f,A,M);return(void 0===f._input.textfont||void 0===f._input.textfont.color||Array.isArray(f.textfont.color)&&void 0===f.textfont.color[A])&&(E={color:x.contrast(k),family:E.family,size:E.size}),u(r,f.insidetextfont,A,E)}function m(f,A,M){var k=c(f,A,M);return u(y,f.outsidetextfont,A,k)}function u(f,A,M,k){var E=h.getValue((A=A||{}).family,M),P=h.getValue(A.size,M),D=h.getValue(A.color,M);return{family:h.coerceString(f.family,E,k.family),size:h.coerceNumber(f.size,P,k.size),color:h.coerceColor(f.color,D,k.color)}}function w(f,A){return"waterfall"===A.type?A[f.dir].marker.color:f.mcc||f.mc||A.marker.color}oe.exports={style:function(f){var A=v.select(f).selectAll("g.barlayer").selectAll("g.trace");o(f,A,"bar");var M=A.size(),k=f._fullLayout;A.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){("stack"===k.barmode&&M>1||0===k.bargap&&0===k.bargroupgap&&!E[0].trace.marker.line.width)&&v.select(this).attr("shape-rendering","crispEdges")}),A.selectAll("g.points").each(function(E){s(v.select(this),E[0].trace,f)}),e.getComponentMethod("errorbars","style")(A)},styleTextPoints:d,styleOnSelect:function(f,A,M){var E,P,D,F,R,L,k=A[0].trace;k.selectedpoints?(P=k,D=f,T.selectedPointStyle((E=M).selectAll("path"),P),F=E.selectAll("text"),R=P,L=D,F.each(function(I){var B,V=v.select(this);if(I.selected){B=b.ensureUniformFontSize(L,p(V,I,R,L));var Z=R.selected.textfont&&R.selected.textfont.color;Z&&(B.color=Z),T.font(V,B)}else T.selectedTextStyle(V,R)})):(s(M,k,f),e.getComponentMethod("errorbars","style")(M))},getInsideTextFont:g,getOutsideTextFont:m,getBarColor:w,resizeText:o}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../lib").coercePattern;oe.exports=function(e,o,i,l,r){var y=i("marker.color",l),h=x(e,"marker");h&&T(e,o,r,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",v.defaultLine),x(e,"marker.line")&&T(e,o,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),b(i,"marker.pattern",y,h),i("selected.marker.color"),i("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib");function T(b){return"_"+b+"Text_minsize"}oe.exports={recordMinTextSize:function(b,e,o){if(o.uniformtext.mode){var i=T(b),l=o.uniformtext.minsize,r=e.scale*e.fontSize;e.hide=r<l,o[i]=o[i]||1/0,e.hide||(o[i]=Math.min(o[i],Math.max(r,l)))}},clearMinTextSize:function(b,e){e[T(b)]=void 0},resizeText:function(b,e,o){var i=b._fullLayout,l=i["_"+o+"Text_minsize"];if(l){var r,y="hide"===i.uniformtext.mode;switch(o){case"funnelarea":case"pie":case"sunburst":r="g.slice";break;case"treemap":case"icicle":r="g.slice, g.pathbar";break;default:r="g.points > g.point"}e.selectAll(r).each(function(h){var s=h.transform;s&&(s.scale=y&&s.hide?0:l/s.fontSize,v.select(this).select("text").attr("transform",x.getTextTransform(s)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../lib/extend").extendFlat,T=_("../scatterpolar/attributes"),b=_("../bar/attributes");oe.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:x({},b.base,{}),offset:x({},b.offset,{}),width:x({},b.width,{}),text:x({},b.text,{}),hovertext:x({},b.hovertext,{}),marker:b.marker,hoverinfo:T.hoverinfo,hovertemplate:v(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/helpers").hasColorscale,x=_("../../components/colorscale/calc"),T=_("../bar/arrays_to_calcdata"),b=_("../bar/cross_trace_calc").setGroupPositions,e=_("../scatter/calc_selection"),o=_("../../registry").traceIs,i=_("../../lib").extendFlat;oe.exports={calc:function(l,r){for(var y=l._fullLayout,h=r.subplot,d=y[h].angularaxis,p=y[h].radialaxis.makeCalcdata(r,"r"),c=d.makeCalcdata(r,"theta"),g=r._length,m=new Array(g),u=p,w=c,f=0;f<g;f++)m[f]={p:w[f],s:u[f]};function A(M){var k=r[M];void 0!==k&&(r["_"+M]=Array.isArray(k)?d.makeCalcdata(r,M):d.d2c(k,r.thetaunit))}return"linear"===d.type&&(A("width"),A("offset")),v(r,"marker")&&x(l,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),v(r,"marker.line")&&x(l,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(m,r),e(m,r),m},crossTraceCalc:function(l,r,y){for(var h=l.calcdata,s=[],d=0;d<h.length;d++){var p=h[d],c=p[0].trace;!0===c.visible&&o(c,"bar")&&c.subplot===y&&s.push(p)}var g=i({},r.radialaxis,{_id:"x"});b(l,r.angularaxis,g,s,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatterpolar/defaults").handleRThetaDefaults,T=_("../bar/style_defaults"),b=_("./attributes");oe.exports=function(e,o,i,l){function r(y,h){return v.coerce(e,o,b,y,h)}x(e,o,l,r)?(r("thetaunit"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),T(e,o,r,i,l),v.coerceSelectionMarkerOpacity(o,r)):o.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(_,oe,se){"use strict";var v=_("../../components/fx"),x=_("../../lib"),T=_("../bar/hover").getTraceColor,b=x.fillText,e=_("../scatterpolar/hover").makeHoverPointText,o=_("../../plots/polar/helpers").isPtInsidePolygon;oe.exports=function(i,l,r){var y=i.cd,h=y[0].trace,s=i.subplot,d=s.radialAxis,c=s.vangles,g=c?o:x.isPtInsideSector,m=i.maxHoverDistance,u=s.angularAxis._period||2*Math.PI,w=Math.abs(d.g2p(Math.sqrt(l*l+r*r))),f=Math.atan2(r,l);if(d.range[0]>d.range[1]&&(f+=Math.PI),v.getClosest(y,function(k){return g(w,f,[k.rp0,k.rp1],[k.thetag0,k.thetag1],c)?m+Math.min(1,Math.abs(k.thetag1-k.thetag0)/u)-1+(k.rp1-w)/(k.rp1-k.rp0)-1:1/0},i),!1!==i.index){var A=y[i.index];i.x0=i.x1=A.ct[0],i.y0=i.y1=A.ct[1];var M=x.extendFlat({},A,{r:A.s,theta:A.p});return b(A,h,i),e(M,h,s,i),i.hovertemplate=h.hovertemplate,i.color=T(h,A),i.xLabelVal=i.yLabelVal=void 0,A.s<0&&(i.idealAlign="left"),[i]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"barpolar",basePlotModule:_("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("../scatterpolar/format_labels"),style:_("../bar/style").style,styleOnSelect:_("../bar/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(_,oe,se){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e){var o,i={};function l(h,s){return v.coerce(T[o]||{},b[o],x,h,s)}for(var r=0;r<e.length;r++){var y=e[r];"barpolar"===y.type&&!0===y.visible&&(i[o=y.subplot]||(l("barmode"),l("bargap"),i[o]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../components/drawing"),e=_("../../plots/polar/helpers");oe.exports=function(o,i,l){var c,g,m,r=i.xaxis,y=i.yaxis,h=i.radialAxis,s=i.angularAxis,d=(g=(c=i).cxx,m=c.cyy,c.vangles?function(u,w,f,A){var M,k;T.angleDelta(f,A)>0?(M=f,k=A):(M=A,k=f);var E=[e.findEnclosingVertexAngles(M,c.vangles)[0],(M+k)/2,e.findEnclosingVertexAngles(k,c.vangles)[1]];return e.pathPolygonAnnulus(u,w,M,k,E,g,m)}:function(u,w,f,A){return T.pathAnnulus(u,w,f,A,g,m)}),p=i.layers.frontplot.select("g.barlayer");T.makeTraceGroups(p,l,"trace bars").each(function(){var c=v.select(this),g=T.ensureSingle(c,"g","points").selectAll("g.point").data(T.identity);g.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),g.exit().remove(),g.each(function(m){var u,w=v.select(this),f=m.rp0=h.c2p(m.s0),A=m.rp1=h.c2p(m.s1),M=m.thetag0=s.c2g(m.p0),k=m.thetag1=s.c2g(m.p1);if(x(f)&&x(A)&&x(M)&&x(k)&&f!==A&&M!==k){var E=h.c2g(m.s1),P=(M+k)/2;m.ct=[r.c2p(E*Math.cos(P)),y.c2p(E*Math.sin(P))],u=d(f,A,M,k)}else u="M0,0Z";T.ensureSingle(w,"path").attr("d",u)}),b.setClipUrl(c,i._hasClipOnAxisFalse?i.clipIds.forTraces:null,o)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(_,oe,se){"use strict";var v=_("../scatter/attributes"),x=_("../bar/attributes"),T=_("../../components/color/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../lib/extend").extendFlat,i=v.marker,l=i.line;oe.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:o({},i.size,{arrayOk:!1,editType:"calc"}),color:o({},i.color,{arrayOk:!1,editType:"style"}),line:{color:o({},l.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:o({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:v.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:{marker:v.selected.marker,editType:"style"},unselected:{marker:v.unselected.marker,editType:"style"},text:o({},v.text,{}),hovertext:o({},v.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../plots/cartesian/axes"),T=_("../../plots/cartesian/align_period"),b=_("../../lib"),e=_("../../constants/numerical").BADNUM,o=b._;oe.exports=function(g,m){var u,w,f,A,M,k,E,P=g._fullLayout,D=x.getFromId(g,m.xaxis||"x"),F=x.getFromId(g,m.yaxis||"y"),R=[],L="violin"===m.type?"_numViolins":"_numBoxes";"h"===m.orientation?(f=D,A="x",M=F,k="y",E=!!m.yperiodalignment):(f=F,A="y",M=D,k="x",E=!!m.xperiodalignment);var I,B,V,Z,Y,Q,re=function(et,tt,ct,bt){var At,Ut=tt+"0"in et;if(tt in et||Ut&&"d"+tt in et){var dt=ct.makeCalcdata(et,tt);return[T(et,ct,tt,dt).vals,dt]}At=Ut?et[tt+"0"]:"name"in et&&("category"===ct.type||v(et.name)&&-1!==["linear","log"].indexOf(ct.type)||b.isDateTime(et.name)&&"date"===ct.type)?et.name:bt;for(var at="multicategory"===ct.type?ct.r2c_just_indices(At):ct.d2c(At,0,et[tt+"calendar"]),Nt=et._length,rn=new Array(Nt),en=0;en<Nt;en++)rn[en]=at;return[rn]}(m,k,M,P[L]),$=re[0],J=re[1],ie=b.distinctVals($,M),j=ie.vals,q=ie.minDiff/2,W="all"===(m.boxpoints||m.points)?b.identity:function(et){return et.v<I.lf||et.v>I.uf};if(m._hasPreCompStats){var ae=m[A],G=function(et){return f.d2c((m[et]||[])[u])},ee=1/0,te=-1/0;for(u=0;u<m._length;u++){var le=$[u];if(v(le)){if((I={}).pos=I[k]=le,E&&J&&(I.orig_p=J[u]),I.q1=G("q1"),I.med=G("median"),I.q3=G("q3"),B=[],ae&&b.isArrayOrTypedArray(ae[u]))for(w=0;w<ae[u].length;w++)(Q=f.d2c(ae[u][w]))!==e&&(l(Y={v:Q,i:[u,w]},m,[u,w]),B.push(Y));if(I.pts=B.sort(r),Z=(V=I[A]=B.map(y)).length,I.med!==e&&I.q1!==e&&I.q3!==e&&I.med>=I.q1&&I.q3>=I.med){var ue=G("lowerfence");I.lf=ue!==e&&ue<=I.q1?ue:h(I,V,Z);var de=G("upperfence");I.uf=de!==e&&de>=I.q3?de:s(I,V,Z);var he=G("mean");I.mean=he!==e?he:Z?b.mean(V,Z):(I.q1+I.q3)/2;var be=G("sd");I.sd=he!==e&&be>=0?be:Z?b.stdev(V,Z,I.mean):I.q3-I.q1,I.lo=d(I),I.uo=p(I);var me=G("notchspan");me=me!==e&&me>0?me:c(I,Z),I.ln=I.med-me,I.un=I.med+me;var _e=I.lf,Ee=I.uf;m.boxpoints&&V.length&&(_e=Math.min(_e,V[0]),Ee=Math.max(Ee,V[Z-1])),m.notched&&(_e=Math.min(_e,I.ln),Ee=Math.max(Ee,I.un)),I.min=_e,I.max=Ee}else{var De;b.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+I.q1,"median = "+I.med,"q3 = "+I.q3].join("\n")),I.med=De=I.med!==e?I.med:I.q1!==e?I.q3!==e?(I.q1+I.q3)/2:I.q1:I.q3!==e?I.q3:0,I.q1=I.q3=De,I.lf=I.uf=De,I.mean=I.sd=De,I.ln=I.un=De,I.min=I.max=De}ee=Math.min(ee,I.min),te=Math.max(te,I.max),I.pts2=B.filter(W),R.push(I)}}m._extremes[f._id]=x.findExtremes(f,[ee,te],{padded:!0})}else{var Se=f.makeCalcdata(m,A),Fe=function(et,tt){for(var ct=et.length,bt=new Array(ct+1),At=0;At<ct;At++)bt[At]=et[At]-tt;return bt[ct]=et[ct-1]+tt,bt}(j,q),ve=j.length,Te=function(et){for(var tt=new Array(et),ct=0;ct<et;ct++)tt[ct]=[];return tt}(ve);for(u=0;u<m._length;u++)if(v(Q=Se[u])){var Ie=b.findBin($[u],Fe);Ie>=0&&Ie<ve&&(l(Y={v:Q,i:u},m,u),Te[Ie].push(Y))}var Ce=1/0,Re=-1/0,Ue=m.quartilemethod,qe="exclusive"===Ue,Xe="inclusive"===Ue;for(u=0;u<ve;u++)if(Te[u].length>0){var st,He;(I={}).pos=I[k]=j[u],B=I.pts=Te[u].sort(r),Z=(V=I[A]=B.map(y)).length,I.min=V[0],I.max=V[Z-1],I.mean=b.mean(V,Z),I.sd=b.stdev(V,Z,I.mean),I.med=b.interp(V,.5),Z%2&&(qe||Xe)?(qe?(st=V.slice(0,Z/2),He=V.slice(Z/2+1)):Xe&&(st=V.slice(0,Z/2+1),He=V.slice(Z/2)),I.q1=b.interp(st,.5),I.q3=b.interp(He,.5)):(I.q1=b.interp(V,.25),I.q3=b.interp(V,.75)),I.lf=h(I,V,Z),I.uf=s(I,V,Z),I.lo=d(I),I.uo=p(I);var $e=c(I,Z);I.ln=I.med-$e,I.un=I.med+$e,Ce=Math.min(Ce,I.ln),Re=Math.max(Re,I.un),I.pts2=B.filter(W),R.push(I)}m._extremes[f._id]=x.findExtremes(f,m.notched?Se.concat([Ce,Re]):Se,{padded:!0})}return function(et,tt){if(b.isArrayOrTypedArray(tt.selectedpoints))for(var ct=0;ct<et.length;ct++){for(var bt=et[ct].pts||[],At={},Ut=0;Ut<bt.length;Ut++)At[bt[Ut].i]=Ut;b.tagSelected(bt,tt,At)}}(R,m),R.length>0?(R[0].t={num:P[L],dPos:q,posLetter:k,valLetter:A,labels:{med:o(g,"median:"),min:o(g,"min:"),q1:o(g,"q1:"),q3:o(g,"q3:"),max:o(g,"max:"),mean:o(g,"sd"===m.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:o(g,"lower fence:"),uf:o(g,"upper fence:")}},P[L]++,R):[{t:{empty:!0}}]};var i={text:"tx",hovertext:"htx"};function l(g,m,u){for(var w in i)b.isArrayOrTypedArray(m[w])&&(Array.isArray(u)?b.isArrayOrTypedArray(m[w][u[0]])&&(g[i[w]]=m[w][u[0]][u[1]]):g[i[w]]=m[w][u])}function r(g,m){return g.v-m.v}function y(g){return g.v}function h(g,m,u){return 0===u?g.q1:Math.min(g.q1,m[Math.min(b.findBin(2.5*g.q1-1.5*g.q3,m,!0)+1,u-1)])}function s(g,m,u){return 0===u?g.q3:Math.max(g.q3,m[Math.max(b.findBin(2.5*g.q3-1.5*g.q1,m),0)])}function d(g){return 4*g.q1-3*g.q3}function p(g){return 4*g.q3-3*g.q1}function c(g,m){return 0===m?0:1.57*(g.q3-g.q1)/Math.sqrt(m)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../plots/cartesian/constraints").getAxisGroup,b=["v","h"];function e(o,i,l,r){var y,h,s,d=i.calcdata,p=i._fullLayout,c=r._id,g=c.charAt(0),m=[],u=0;for(y=0;y<l.length;y++)for(s=d[l[y]],h=0;h<s.length;h++)m.push(r.c2l(s[h].pos,!0)),u+=(s[h].pts2||[]).length;if(m.length){var w=x.distinctVals(m);"category"!==r.type&&"multicategory"!==r.type||(w.minDiff=1);var f=w.minDiff/2;v.minDtick(r,w.minDiff,w.vals[0],!0);var A=p["violin"===o?"_numViolins":"_numBoxes"],M="group"===p[o+"mode"]&&A>1,k=1-p[o+"gap"],E=1-p[o+"groupgap"];for(y=0;y<l.length;y++){var P,D,F,R,L,I,B=(s=d[l[y]])[0].trace,V=s[0].t,Z=B.width,Y=B.side;if(Z)P=D=R=Z/2,F=0;else if(P=f,M){var Q=T(p,r._id)+B.orientation,$=Object.keys(((p._alignmentOpts[Q]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length,J=$||A;D=P*k*E/J,F=2*P*((($?B._offsetIndex:V.num)+.5)/J-.5)*k,R=P*k/J}else D=P*k*E,F=0,R=P;V.dPos=P,V.bPos=F,V.bdPos=D,V.wHover=R;var ie,j,q,W,ae,G,ee=F+D,te=Boolean(Z);if("positive"===Y?(L=P*(Z?1:.5),ie=ee,I=ie=F):"negative"===Y?(L=ie=F,I=P*(Z?1:.5),j=ee):(L=I=P,ie=j=ee),(B.boxpoints||B.points)&&u>0){var le=B.pointpos,ue=B.jitter,de=B.marker.size/2,he=0;le+ue>=0&&((he=ee*(le+ue))>L?(te=!0,ae=de,q=he):he>ie&&(ae=de,q=L)),he<=L&&(q=L);var be=0;le-ue<=0&&((be=-ee*(le-ue))>I?(te=!0,G=de,W=be):be>j&&(G=de,W=I)),be<=I&&(W=I)}else q=L,W=I;var me=new Array(s.length);for(h=0;h<s.length;h++)me[h]=s[h].pos;B._extremes[c]=v.findExtremes(r,me,{padded:te,vpadminus:W,vpadplus:q,vpadLinearized:!0,ppadminus:{x:G,y:ae}[g],ppadplus:{x:ae,y:G}[g]})}}}oe.exports={crossTraceCalc:function(o,i){for(var l=o.calcdata,r=i.xaxis,y=i.yaxis,h=0;h<b.length;h++){for(var s=b[h],d="h"===s?y:r,p=[],c=0;c<l.length;c++){var g=l[c],u=g[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||g[0].t.empty||(u.orientation||"v")!==s||u.xaxis!==r._id||u.yaxis!==y._id||p.push(c)}e("box",o,p,d)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry"),T=_("../../components/color"),b=_("../scatter/period_defaults"),e=_("../bar/defaults").handleGroupingDefaults,o=_("../../plots/cartesian/axis_autotype"),i=_("./attributes");function l(y,h,s,d){function p(Y){var Q=0;return Y&&Y.length&&(Q+=1,v.isArrayOrTypedArray(Y[0])&&Y[0].length&&(Q+=1)),Q}function c(Y){return v.validate(y[Y],i[Y])}var g,m=s("y"),u=s("x");if("box"===h.type){var w=s("q1"),f=s("median"),A=s("q3");h._hasPreCompStats=w&&w.length&&f&&f.length&&A&&A.length,g=Math.min(v.minRowLength(w),v.minRowLength(f),v.minRowLength(A))}var M,k,E=p(m),P=p(u),D=E&&v.minRowLength(m),F=P&&v.minRowLength(u),R=d.calendar,L={autotypenumbers:d.autotypenumbers};if(h._hasPreCompStats)switch(String(P)+String(E)){case"00":var I=c("x0")||c("dx");M=!c("y0")&&!c("dy")||I?"v":"h",k=g;break;case"10":M="v",k=Math.min(g,F);break;case"20":M="h",k=Math.min(g,u.length);break;case"01":M="h",k=Math.min(g,D);break;case"02":M="v",k=Math.min(g,m.length);break;case"12":M="v",k=Math.min(g,F,m.length);break;case"21":M="h",k=Math.min(g,u.length,D);break;case"11":k=0;break;case"22":var B,V=!1;for(B=0;B<u.length;B++)if("category"===o(u[B],R,L)){V=!0;break}if(V)M="v",k=Math.min(g,F,m.length);else{for(B=0;B<m.length;B++)if("category"===o(m[B],R,L)){V=!0;break}V?(M="h",k=Math.min(g,u.length,D)):(M="v",k=Math.min(g,F,m.length))}}else E>0?(M="v",k=P>0?Math.min(F,D):Math.min(D)):P>0?(M="h",k=Math.min(F)):k=0;if(k){h._length=k;var Z=s("orientation",M);h._hasPreCompStats?"v"===Z&&0===P?(s("x0",0),s("dx",1)):"h"===Z&&0===E&&(s("y0",0),s("dy",1)):"v"===Z&&0===P?s("x0"):"h"===Z&&0===E&&s("y0"),x.getComponentMethod("calendars","handleTraceDefaults")(y,h,["x","y"],d)}else h.visible=!1}function r(y,h,s,d){var p=d.prefix,c=v.coerce2(y,h,i,"marker.outliercolor"),g=s("marker.line.outliercolor"),m="outliers";h._hasPreCompStats?m="all":(c||g)&&(m="suspectedoutliers");var u=s(p+"points",m);u?(s("jitter","all"===u?.3:0),s("pointpos","all"===u?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.color",h.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===u&&(s("marker.line.outliercolor",h.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete h.marker;var w=s("hoveron");"all"!==w&&-1===w.indexOf("points")||s("hovertemplate"),v.coerceSelectionMarkerOpacity(h,s)}oe.exports={supplyDefaults:function(y,h,s,d){function p(A,M){return v.coerce(y,h,i,A,M)}if(l(y,h,p,d),!1!==h.visible){b(y,h,d,p),p("xhoverformat"),p("yhoverformat");var c=h._hasPreCompStats;c&&(p("lowerfence"),p("upperfence")),p("line.color",(y.marker||{}).color||s),p("line.width"),p("fillcolor",T.addOpacity(h.line.color,.5));var g=!1;if(c){var m=p("mean"),u=p("sd");m&&m.length&&(g=!0,u&&u.length&&(g="sd"))}p("boxmean",g),p("whiskerwidth"),p("width"),p("quartilemethod");var w=!1;if(c){var f=p("notchspan");f&&f.length&&(w=!0)}else v.validate(y.notchwidth,i.notchwidth)&&(w=!0);p("notched",w)&&p("notchwidth"),r(y,h,p,{prefix:"box"})}},crossTraceDefaults:function(y,h){var d;function p(m){return v.coerce(d._input,d,i,m)}for(var c=0;c<y.length;c++){var g=(d=y[c]).type;"box"!==g&&"violin"!==g||"group"===h[g+"mode"]&&e(d._input,d,h,p)}},handleSampleDefaults:l,handlePointsDefaults:r}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(_,oe,se){"use strict";oe.exports=function(v,x){return x.hoverOnBox&&(v.hoverOnBox=x.hoverOnBox),"xVal"in x&&(v.x=x.xVal),"yVal"in x&&(v.y=x.yVal),x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),v}},{}],678:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../components/fx"),b=_("../../components/color"),e=x.fillText;function o(l,r,y,h){var s,d,p,c,g,m,u,w,f,A,M,k,E,P,D=l.cd,F=l.xa,R=l.ya,L=D[0].trace,I=D[0].t,B="violin"===L.type,V=[],Z=I.bdPos,Y=I.wHover,Q=function(he){return p.c2l(he.pos)+I.bPos-p.c2l(m)};B&&"both"!==L.side?("positive"===L.side&&(f=function(he){var be=Q(he);return T.inbox(be,be+Y,A)},k=Z,E=0),"negative"===L.side&&(f=function(he){var be=Q(he);return T.inbox(be-Y,be,A)},k=0,E=Z)):(f=function(he){var be=Q(he);return T.inbox(be-Y,be+Y,A)},k=E=Z),P=B?function(he){return T.inbox(he.span[0]-g,he.span[1]-g,A)}:function(he){return T.inbox(he.min-g,he.max-g,A)},"h"===L.orientation?(g=r,m=y,u=P,w=f,s="y",p=R,d="x",c=F):(g=y,m=r,u=f,w=P,s="x",p=F,d="y",c=R);var re=Math.min(1,Z/Math.abs(p.r2c(p.range[1])-p.r2c(p.range[0])));function $(he){return(u(he)+w(he))/2}A=l.maxHoverDistance-re,M=l.maxSpikeDistance-re;var J=T.getDistanceFunction(h,u,w,$);if(T.getClosest(D,J,l),!1===l.index)return[];var ie=D[l.index],j=L.line.color,q=(L.marker||{}).color;l.color=b.opacity(j)&&L.line.width?j:b.opacity(q)&&L.boxpoints?q:L.fillcolor,l[s+"0"]=p.c2p(ie.pos+I.bPos-E,!0),l[s+"1"]=p.c2p(ie.pos+I.bPos+k,!0),l[s+"LabelVal"]=void 0!==ie.orig_p?ie.orig_p:ie.pos;var W=s+"Spike";l.spikeDistance=$(ie)*M/A,l[W]=p.c2p(ie.pos,!0);var ae={},G=["med","q1","q3","min","max"];(L.boxmean||(L.meanline||{}).visible)&&G.push("mean"),(L.boxpoints||L.points)&&G.push("lf","uf");for(var ee=0;ee<G.length;ee++){var te=G[ee];if(te in ie&&!(ie[te]in ae)){ae[ie[te]]=!0;var le=ie[te],ue=c.c2p(le,!0),de=x.extendFlat({},l);de.attr=te,de[d+"0"]=de[d+"1"]=ue,de[d+"LabelVal"]=le,de[d+"Label"]=(I.labels?I.labels[te]+" ":"")+v.hoverLabelText(c,le,L[d+"hoverformat"]),de.hoverOnBox=!0,"mean"===te&&"sd"in ie&&"sd"===L.boxmean&&(de[d+"err"]=ie.sd),l.name="",l.spikeDistance=void 0,l[W]=void 0,de.hovertemplate=!1,V.push(de)}}return V}function i(l,r,y){for(var h,s,d,p=l.cd,c=l.xa,g=l.ya,m=p[0].trace,u=c.c2p(r),w=g.c2p(y),f=T.quadrature(function(B){var V=Math.max(3,B.mrc||0);return Math.max(Math.abs(c.c2p(B.x)-u)-V,1-3/V)},function(B){var V=Math.max(3,B.mrc||0);return Math.max(Math.abs(g.c2p(B.y)-w)-V,1-3/V)}),A=!1,M=0;M<p.length;M++){s=p[M];for(var k=0;k<(s.pts||[]).length;k++){var E=f(d=s.pts[k]);E<=l.distance&&(l.distance=E,A=[M,k])}}if(!A)return!1;d=(s=p[A[0]]).pts[A[1]];var P=c.c2p(d.x,!0),D=g.c2p(d.y,!0),F=d.mrc||1;h=x.extendFlat({},l,{index:d.i,color:(m.marker||{}).color,name:m.name,x0:P-F,x1:P+F,y0:D-F,y1:D+F,spikeDistance:l.distance,hovertemplate:m.hovertemplate});var R,L=s.orig_p,I=void 0!==L?L:s.pos;return"h"===m.orientation?(R=g,h.xLabelVal=d.x,h.yLabelVal=I):(R=c,h.xLabelVal=I,h.yLabelVal=d.y),h[R._id.charAt(0)+"Spike"]=R.c2p(s.pos,!0),e(d,m,h),h}oe.exports={hoverPoints:function(l,r,y,h){var s,d=l.cd[0].trace.hoveron,p=[];return-1!==d.indexOf("boxes")&&(p=p.concat(o(l,r,y,h))),-1!==d.indexOf("points")&&(s=i(l,r,y)),"closest"===h?s?[s]:p:(s&&p.push(s),p)},hoverOnBoxes:o,hoverOnPoints:i}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults").supplyLayoutDefaults,calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"box",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(_,oe,se){"use strict";oe.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("./layout_attributes");function b(e,o,i,l,r){for(var y=r+"Layout",h=!1,s=0;s<i.length;s++)if(v.traceIs(i[s],y)){h=!0;break}h&&(l(r+"mode"),l(r+"gap"),l(r+"groupgap"))}oe.exports={supplyLayoutDefaults:function(e,o,i){b(0,0,i,function(l,r){return x.coerce(e,o,T,l,r)},"box")},_supply:b}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing");function b(i,l,r,y){var h,s,d="h"===r.orientation,p=l.val,c=l.pos,g=!!c.rangebreaks,m=y.bPos,u=y.wdPos||0,w=y.bPosPxOffset||0,f=r.whiskerwidth||0,A=r.notched||!1,M=A?1-2*r.notchwidth:1;Array.isArray(y.bdPos)?(h=y.bdPos[0],s=y.bdPos[1]):(h=y.bdPos,s=y.bdPos);var k=i.selectAll("path.box").data("violin"!==r.type||r.box.visible?x.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),k.exit().remove(),k.each(function(E){if(E.empty)return"M0,0Z";var P=c.c2l(E.pos+m,!0),D=c.l2p(P-h)+w,F=c.l2p(P+s)+w,R=g?(D+F)/2:c.l2p(P)+w,L=r.whiskerwidth,I=g?D*L+(1-L)*R:c.l2p(P-u)+w,B=g?F*L+(1-L)*R:c.l2p(P+u)+w,V=c.l2p(P-h*M)+w,Z=c.l2p(P+s*M)+w,Y=p.c2p(E.q1,!0),Q=p.c2p(E.q3,!0),re=x.constrain(p.c2p(E.med,!0),Math.min(Y,Q)+1,Math.max(Y,Q)-1),$=void 0===E.lf||!1===r.boxpoints,J=p.c2p($?E.min:E.lf,!0),ie=p.c2p($?E.max:E.uf,!0),j=p.c2p(E.ln,!0),q=p.c2p(E.un,!0);d?v.select(this).attr("d","M"+re+","+V+"V"+Z+"M"+Y+","+D+"V"+F+(A?"H"+j+"L"+re+","+Z+"L"+q+","+F:"")+"H"+Q+"V"+D+(A?"H"+q+"L"+re+","+V+"L"+j+","+D:"")+"ZM"+Y+","+R+"H"+J+"M"+Q+","+R+"H"+ie+(0===f?"":"M"+J+","+I+"V"+B+"M"+ie+","+I+"V"+B)):v.select(this).attr("d","M"+V+","+re+"H"+Z+"M"+D+","+Y+"H"+F+(A?"V"+j+"L"+Z+","+re+"L"+F+","+q:"")+"V"+Q+"H"+D+(A?"V"+q+"L"+V+","+re+"L"+D+","+j:"")+"ZM"+R+","+Y+"V"+J+"M"+R+","+Q+"V"+ie+(0===f?"":"M"+I+","+J+"H"+B+"M"+I+","+ie+"H"+B))})}function e(i,l,r,y){var h=l.x,s=l.y,d=y.bdPos,p=y.bPos,c=r.boxpoints||r.points;x.seedPseudoRandom();var g=i.selectAll("g.points").data(c?function(u){return u.forEach(function(w){w.t=y,w.trace=r}),u}:[]);g.enter().append("g").attr("class","points"),g.exit().remove();var m=g.selectAll("path").data(function(u){var w,f,A=u.pts2,M=Math.max((u.max-u.min)/10,u.q3-u.q1),k=1e-9*M,E=.01*M,P=[],D=0;if(r.jitter){if(0===M)for(D=1,P=new Array(A.length),w=0;w<A.length;w++)P[w]=1;else for(w=0;w<A.length;w++){var F=Math.max(0,w-5),R=A[F].v,L=Math.min(A.length-1,w+5),I=A[L].v;"all"!==c&&(A[w].v<u.lf?I=Math.min(I,u.lf):R=Math.max(R,u.uf));var B=Math.sqrt(E*(L-F)/(I-R+k))||0;B=x.constrain(Math.abs(B),0,1),P.push(B),D=Math.max(B,D)}f=2*r.jitter/(D||1)}for(w=0;w<A.length;w++){var V=A[w],Z=V.v,Y=r.jitter?f*P[w]*(x.pseudoRandom()-.5):0,Q=u.pos+p+d*(r.pointpos+Y);"h"===r.orientation?(V.y=Q,V.x=Z):(V.x=Q,V.y=Z),"suspectedoutliers"===c&&Z<u.uo&&Z>u.lo&&(V.so=!0)}return A});m.enter().append("path").classed("point",!0),m.exit().remove(),m.call(T.translatePoints,h,s)}function o(i,l,r,y){var h,s,d=l.val,p=l.pos,c=!!p.rangebreaks,g=y.bPos,m=y.bPosPxOffset||0,u=r.boxmean||(r.meanline||{}).visible;Array.isArray(y.bdPos)?(h=y.bdPos[0],s=y.bdPos[1]):(h=y.bdPos,s=y.bdPos);var w=i.selectAll("path.mean").data("box"===r.type&&r.boxmean||"violin"===r.type&&r.box.visible&&r.meanline.visible?x.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(f){var A=p.c2l(f.pos+g,!0),M=p.l2p(A-h)+m,k=p.l2p(A+s)+m,E=c?(M+k)/2:p.l2p(A)+m,P=d.c2p(f.mean,!0),D=d.c2p(f.mean-f.sd,!0),F=d.c2p(f.mean+f.sd,!0);"h"===r.orientation?v.select(this).attr("d","M"+P+","+M+"V"+k+("sd"===u?"m0,0L"+D+","+E+"L"+P+","+M+"L"+F+","+E+"Z":"")):v.select(this).attr("d","M"+M+","+P+"H"+k+("sd"===u?"m0,0L"+E+","+D+"L"+M+","+P+"L"+E+","+F+"Z":""))})}oe.exports={plot:function(i,l,r,y){var h=l.xaxis,s=l.yaxis;x.makeTraceGroups(y,r,"trace boxes").each(function(d){var p,c,g=v.select(this),m=d[0],u=m.t,w=m.trace;u.wdPos=u.bdPos*w.whiskerwidth,!0!==w.visible||u.empty?g.remove():("h"===w.orientation?(p=s,c=h):(p=h,c=s),b(g,{pos:p,val:c},w,u),e(g,{x:h,y:s},w,u),o(g,{pos:p,val:c},w,u))})},plotBoxAndWhiskers:b,plotPoints:e,plotBoxMean:o}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(_,oe,se){"use strict";oe.exports=function(v,x){var T,b,e=v.cd,o=v.xaxis,i=v.yaxis,l=[];if(!1===x)for(T=0;T<e.length;T++)for(b=0;b<(e[T].pts||[]).length;b++)e[T].pts[b].selected=0;else for(T=0;T<e.length;T++)for(b=0;b<(e[T].pts||[]).length;b++){var r=e[T].pts[b],y=o.c2p(r.x),h=i.c2p(r.y);x.contains([y,h],null,r.i,v)?(l.push({pointNumber:r.i,x:o.c2d(r.x),y:i.c2d(r.y)}),r.selected=1):r.selected=0}return l}},{}],684:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing");oe.exports={style:function(b,e,o){var i=o||v.select(b).selectAll("g.trace.boxes");i.style("opacity",function(l){return l[0].trace.opacity}),i.each(function(l){var r=v.select(this),y=l[0].trace,h=y.line.width;function s(c,g,m,u){c.style("stroke-width",g+"px").call(x.stroke,m).call(x.fill,u)}var d=r.selectAll("path.box");if("candlestick"===y.type)d.each(function(c){if(!c.empty){var g=v.select(this),m=y[c.dir];s(g,m.line.width,m.line.color,m.fillcolor),g.style("opacity",y.selectedpoints&&!c.selected?.3:1)}});else{s(d,h,y.line.color,y.fillcolor),r.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(x.stroke,y.line.color);var p=r.selectAll("path.point");T.pointStyle(p,y,b)}})},styleOnSelect:function(b,e,o){var i=e[0].trace,l=o.selectAll("path.point");i.selectedpoints?T.selectedPointStyle(l,i):T.pointStyle(l,i,b)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(_,oe,se){"use strict";var v=_("../../lib").extendFlat,x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../ohlc/attributes"),b=_("../box/attributes");function e(o){return{line:{color:v({},b.line.color,{dflt:o}),width:b.line.width,editType:"style"},fillcolor:b.fillcolor,editType:"style"}}oe.exports={xperiod:T.xperiod,xperiod0:T.xperiod0,xperiodalignment:T.xperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),x:T.x,open:T.open,high:T.high,low:T.low,close:T.close,line:{width:v({},b.line.width,{}),editType:"style"},increasing:e(T.increasing.line.color.dflt),decreasing:e(T.decreasing.line.color.dflt),text:T.text,hovertext:T.hovertext,whiskerwidth:v({},b.whiskerwidth,{dflt:0}),hoverlabel:T.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/cartesian/align_period"),b=_("../ohlc/calc").calcCommon;function e(o,i,l,r){return{min:l,q1:Math.min(o,r),med:r,q3:Math.max(o,r),max:i}}oe.exports=function(o,i){var l=o._fullLayout,r=x.getFromId(o,i.xaxis),y=x.getFromId(o,i.yaxis),h=r.makeCalcdata(i,"x"),s=T(i,r,"x",h).vals,d=b(o,i,h,s,y,e);return d.length?(v.extendFlat(d[0].t,{num:l._numBoxes,dPos:v.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,d):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../ohlc/ohlc_defaults"),b=_("../scatter/period_defaults"),e=_("./attributes");function o(i,l,r,y){var h=r(y+".line.color");r(y+".line.width",l.line.width),r(y+".fillcolor",x.addOpacity(h,.5))}oe.exports=function(i,l,r,y){function h(s,d){return v.coerce(i,l,e,s,d)}T(i,l,h,y)?(b(i,l,y,h,{x:!0}),h("xhoverformat"),h("yhoverformat"),h("line.width"),o(0,l,h,"increasing"),o(0,l,h,"decreasing"),h("text"),h("hovertext"),h("whiskerwidth"),y._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"candlestick",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:_("./attributes"),layoutAttributes:_("../box/layout_attributes"),supplyLayoutDefaults:_("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:_("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("../box/plot").plot,layerName:"boxlayer",style:_("../box/style").style,hoverPoints:_("../ohlc/hover").hoverPoints,selectPoints:_("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(_,oe,se){"use strict";var v=_("./axis_defaults"),x=_("../../plot_api/plot_template");oe.exports=function(T,b,e,o,i){var l,r,y,h;o("a")||(o("da"),o("a0")),o("b")||(o("db"),o("b0")),l=T,r=b,y=e,h=i,["aaxis","baxis"].forEach(function(s){var d=s.charAt(0),p=l[s]||{},c=x.newContainer(r,s);v(p,c,{noTicklabelstep:!0,tickfont:"x",id:d+"axis",letter:d,font:r.font,name:s,data:l[d],calendar:r.calendar,dfltColor:h,bgColor:y.paper_bgcolor,autotypenumbersDflt:y.autotypenumbers,fullLayout:y}),c._categories=c._categories||[],l[s]||"-"===p.type||(l[s]={type:p.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(_,oe,se){"use strict";var v=_("../../lib").isArrayOrTypedArray;oe.exports=function(x){return function T(b,e){if(!v(b)||e>=10)return null;for(var o=1/0,i=-1/0,l=b.length,r=0;r<l;r++){var y=b[r];if(v(y)){var h=T(y,e+1);h&&(o=Math.min(h[0],o),i=Math.max(h[1],i))}else o=Math.min(y,o),i=Math.max(y,i)}return[o,i]}(x,0)}},{"../../lib":503}],691:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("./axis_attributes"),T=_("../../components/color/attributes"),b=v({editType:"calc"});b.family.dflt='"Open Sans", verdana, arial, sans-serif',b.size.dflt=12,b.color.dflt=T.defaultLine,oe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:x,baxis:x,font:b,color:{valType:"color",dflt:T.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(_,oe,se){"use strict";var v=_("../../lib").isArrayOrTypedArray;oe.exports=function(x,T,b,e){var o,i,l,r,y,h,s,d,p,c,g,m,u,w=v(b)?"a":"b",f=("a"===w?x.aaxis:x.baxis).smoothing,A="a"===w?x.a2i:x.b2j,M="a"===w?b:e,k="a"===w?e:b,E="a"===w?T.a.length:T.b.length,P="a"===w?T.b.length:T.a.length,D=Math.floor("a"===w?x.b2j(k):x.a2i(k)),F="a"===w?function(ie){return x.evalxy([],ie,D)}:function(ie){return x.evalxy([],D,ie)};f&&(l=Math.max(0,Math.min(P-2,D)),r=D-l,i="a"===w?function(ie,j){return x.dxydi([],ie,l,j,r)}:function(ie,j){return x.dxydj([],l,ie,r,j)});var R=A(M[0]),L=A(M[1]),I=R<L?1:-1,B=1e-8*(L-R),V=I>0?Math.floor:Math.ceil,Z=I>0?Math.ceil:Math.floor,Y=I>0?Math.min:Math.max,Q=I>0?Math.max:Math.min,re=V(R+B),$=Z(L-B),J=[[s=F(R)]];for(o=re;o*I<$*I;o+=I)y=[],g=Q(R,o),u=(m=Y(L,o+I))-g,h=Math.max(0,Math.min(E-2,Math.floor(.5*(g+m)))),d=F(m),f&&(p=i(h,g-h),c=i(h,m-h),y.push([s[0]+p[0]/3*u,s[1]+p[1]/3*u]),y.push([d[0]-c[0]/3*u,d[1]-c[1]/3*u])),y.push(d),J.push(y),s=d;return J}},{"../../lib":503}],693:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("../../components/color/attributes"),T=_("../../plots/cartesian/layout_attributes"),b=_("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=_("../../plot_api/edit_types").overrideAll;oe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:v({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:T.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:v({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:b("tick label")},tickformatstops:e(T.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:x.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:v({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(_,oe,se){"use strict";var v=_("./attributes"),x=_("../../components/color").addOpacity,T=_("../../registry"),b=_("../../lib"),e=_("../../plots/cartesian/tick_value_defaults"),o=_("../../plots/cartesian/tick_label_defaults"),i=_("../../plots/cartesian/prefix_suffix_defaults"),l=_("../../plots/cartesian/category_order_defaults"),r=_("../../plots/cartesian/set_convert"),y=_("../../plots/cartesian/axis_autotype");oe.exports=function(h,s,d){var p=d.letter,c=d.font||{},g=v[p+"axis"];function m(L,I){return b.coerce(h,s,g,L,I)}function u(L,I){return b.coerce2(h,s,g,L,I)}d.name&&(s._name=d.name,s._id=d.name),m("autotypenumbers",d.autotypenumbersDflt);var w=m("type");"-"===w&&(d.data&&function(L,I){if("-"===L.type){var B=L._id.charAt(0);L.type=y(I,L[B+"calendar"],{autotypenumbers:L.autotypenumbers})}}(s,d.data),"-"===s.type?s.type="linear":w=h.type=s.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",p+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===s.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),s._hovertitle=p,"date"===w&&T.getComponentMethod("calendars","handleDefaults")(h,s,"calendar",d.calendar),r(s,d.fullLayout),s.c2p=b.identity;var f=m("color",d.dfltColor),A=f===h.color?f:c.color;m("title.text")&&(b.coerceFont(m,"title.font",{family:c.family,size:b.bigFont(c.size),color:A}),m("title.offset")),m("tickangle"),m("autorange",!s.isValidRange(h.range))&&m("rangemode"),m("range"),s.cleanRange(),m("fixedrange"),e(h,s,m,w),i(h,s,m,w,d),o(h,s,m,w,d),l(h,s,m,{data:d.data,dataAttr:p});var M=u("gridcolor",x(f,.3)),k=u("gridwidth"),E=m("showgrid");E||(delete s.gridcolor,delete s.gridwidth);var P=u("startlinecolor",f),D=u("startlinewidth",k);m("startline",s.showgrid||!!P||!!D)||(delete s.startlinecolor,delete s.startlinewidth);var F=u("endlinecolor",f),R=u("endlinewidth",k);return m("endline",s.showgrid||!!F||!!R)||(delete s.endlinecolor,delete s.endlinewidth),E?(m("minorgridcount"),m("minorgridwidth",k),m("minorgridcolor",x(M,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridWidth),"none"===s.showticklabels&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,m("tickmode"),s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib").isArray1D,T=_("./cheater_basis"),b=_("./array_minmax"),e=_("./calc_gridlines"),o=_("./calc_labels"),i=_("./calc_clippath"),l=_("../heatmap/clean_2d_array"),r=_("./smooth_fill_2d_array"),y=_("../heatmap/convert_column_xyz"),h=_("./set_convert");oe.exports=function(s,d){var p=v.getFromId(s,d.xaxis),c=v.getFromId(s,d.yaxis),g=d.aaxis,m=d.baxis,u=d.x,w=d.y,f=[];u&&x(u)&&f.push("x"),w&&x(w)&&f.push("y"),f.length&&y(d,g,m,"a","b",f);var A=d._a=d._a||d.a,M=d._b=d._b||d.b;u=d._x||d.x,w=d._y||d.y;var k={};d._cheater&&(u=T("index"===g.cheatertype?A.length:A,"index"===m.cheatertype?M.length:M,d.cheaterslope)),d._x=u=l(u),d._y=w=l(w),r(u,A,M),r(w,A,M),h(d),d.setScale();var D=b(u),F=b(w),R=.5*(D[1]-D[0]),L=.5*(D[1]+D[0]),I=.5*(F[1]-F[0]),B=.5*(F[1]+F[0]);return F=[B-1.3*I,B+1.3*I],d._extremes[p._id]=v.findExtremes(p,D=[L-1.3*R,L+1.3*R],{padded:!0}),d._extremes[c._id]=v.findExtremes(c,F,{padded:!0}),e(d,"a","b"),e(d,"b","a"),o(d,g),o(d,m),k.clipsegments=i(d._xctrl,d._yctrl,g,m),k.x=u,k.y=w,k.a=A,k.b=M,[k]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b){var e,o,i,l=[],r=!!T.smoothing,y=!!b.smoothing,h=v[0].length-1,s=v.length-1;for(e=0,o=[],i=[];e<=h;e++)o[e]=v[0][e],i[e]=x[0][e];for(l.push({x:o,y:i,bicubic:r}),e=0,o=[],i=[];e<=s;e++)o[e]=v[e][h],i[e]=x[e][h];for(l.push({x:o,y:i,bicubic:y}),e=h,o=[],i=[];e>=0;e--)o[h-e]=v[s][e],i[h-e]=x[s][e];for(l.push({x:o,y:i,bicubic:r}),e=s,o=[],i=[];e>=0;e--)o[s-e]=v[e][0],i[s-e]=x[e][0];return l.push({x:o,y:i,bicubic:y}),l}},{}],697:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib/extend").extendFlat;oe.exports=function(T,b,e){var o,i,l,r,y,h,s,d,p,c,g,m,u,w,f=T["_"+b],A=T[b+"axis"],M=A._gridlines=[],k=A._minorgridlines=[],E=A._boundarylines=[],P=T["_"+e],D=T[e+"axis"];"array"===A.tickmode&&(A.tickvals=f.slice());var F=T._xctrl,R=T._yctrl,L=F[0].length,I=F.length,B=T._a.length,V=T._b.length;v.prepTicks(A),"array"===A.tickmode&&delete A.tickvals;var Z=A.smoothing?3:1;function Y(re){var $,J,ie,j,q,W,ae,G,ee,te,le,ue,de=[],he=[],be={};if("b"===b)for(J=T.b2j(re),ie=Math.floor(Math.max(0,Math.min(V-2,J))),j=J-ie,be.length=V,be.crossLength=B,be.xy=function(me){return T.evalxy([],me,J)},be.dxy=function(me,_e){return T.dxydi([],me,ie,_e,j)},$=0;$<B;$++)W=Math.min(B-2,$),ae=$-W,G=T.evalxy([],$,J),D.smoothing&&$>0&&(ee=T.dxydi([],$-1,ie,0,j),de.push(q[0]+ee[0]/3),he.push(q[1]+ee[1]/3),te=T.dxydi([],$-1,ie,1,j),de.push(G[0]-te[0]/3),he.push(G[1]-te[1]/3)),de.push(G[0]),he.push(G[1]),q=G;else for($=T.a2i(re),W=Math.floor(Math.max(0,Math.min(B-2,$))),ae=$-W,be.length=B,be.crossLength=V,be.xy=function(me){return T.evalxy([],$,me)},be.dxy=function(me,_e){return T.dxydj([],W,me,ae,_e)},J=0;J<V;J++)ie=Math.min(V-2,J),j=J-ie,G=T.evalxy([],$,J),D.smoothing&&J>0&&(le=T.dxydj([],W,J-1,ae,0),de.push(q[0]+le[0]/3),he.push(q[1]+le[1]/3),ue=T.dxydj([],W,J-1,ae,1),de.push(G[0]-ue[0]/3),he.push(G[1]-ue[1]/3)),de.push(G[0]),he.push(G[1]),q=G;return be.axisLetter=b,be.axis=A,be.crossAxis=D,be.value=re,be.constvar=e,be.index=d,be.x=de,be.y=he,be.smoothing=D.smoothing,be}function Q(re){var $,J,ie,j,q,W=[],ae=[],G={};if(G.length=f.length,G.crossLength=P.length,"b"===b)for(ie=Math.max(0,Math.min(V-2,re)),q=Math.min(1,Math.max(0,re-ie)),G.xy=function(ee){return T.evalxy([],ee,re)},G.dxy=function(ee,te){return T.dxydi([],ee,ie,te,q)},$=0;$<L;$++)W[$]=F[re*Z][$],ae[$]=R[re*Z][$];else for(J=Math.max(0,Math.min(B-2,re)),j=Math.min(1,Math.max(0,re-J)),G.xy=function(ee){return T.evalxy([],re,ee)},G.dxy=function(ee,te){return T.dxydj([],J,ee,j,te)},$=0;$<I;$++)W[$]=F[$][re*Z],ae[$]=R[$][re*Z];return G.axisLetter=b,G.axis=A,G.crossAxis=D,G.value=f[re],G.constvar=e,G.index=re,G.x=W,G.y=ae,G.smoothing=D.smoothing,G}if("array"===A.tickmode){for(r=5e-15,h=(y=[Math.floor((f.length-1-A.arraytick0)/A.arraydtick*(1+r)),Math.ceil(-A.arraytick0/A.arraydtick/(1+r))].sort(function(re,$){return re-$}))[0]-1,s=y[1]+1,d=h;d<s;d++)(i=A.arraytick0+A.arraydtick*d)<0||i>f.length-1||M.push(x(Q(i),{color:A.gridcolor,width:A.gridwidth}));for(d=h;d<s;d++)if(l=A.arraytick0+A.arraydtick*d,g=Math.min(l+A.arraydtick,f.length-1),!(l<0||l>f.length-1||g<0||g>f.length-1))for(m=f[l],u=f[g],o=0;o<A.minorgridcount;o++)(w=g-l)<=0||(c=m+(u-m)*(o+1)/(A.minorgridcount+1)*(A.arraydtick/w))<f[0]||c>f[f.length-1]||k.push(x(Y(c),{color:A.minorgridcolor,width:A.minorgridwidth}));A.startline&&E.push(x(Q(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&E.push(x(Q(f.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(r=5e-15,h=(y=[Math.floor((f[f.length-1]-A.tick0)/A.dtick*(1+r)),Math.ceil((f[0]-A.tick0)/A.dtick/(1+r))].sort(function(re,$){return re-$}))[0],s=y[1],d=h;d<=s;d++)M.push(x(Y(p=A.tick0+A.dtick*d),{color:A.gridcolor,width:A.gridwidth}));for(d=h-1;d<s+1;d++)for(p=A.tick0+A.dtick*d,o=0;o<A.minorgridcount;o++)(c=p+A.dtick*(o+1)/(A.minorgridcount+1))<f[0]||c>f[f.length-1]||k.push(x(Y(c),{color:A.minorgridcolor,width:A.minorgridwidth}));A.startline&&E.push(x(Y(f[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&E.push(x(Y(f[f.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib/extend").extendFlat;oe.exports=function(T,b){var e,o,i,l=b._labels=[],r=b._gridlines;for(e=0;e<r.length;e++)i=r[e],-1!==["start","both"].indexOf(b.showticklabels)&&(o=v.tickText(b,i.value),x(o,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:i.xy(0),dxy:i.dxy(0,0),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),l.push(o)),-1!==["end","both"].indexOf(b.showticklabels)&&(o=v.tickText(b,i.value),x(o,{endAnchor:!1,xy:i.xy(i.crossLength-1),dxy:i.dxy(i.crossLength-2,1),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),l.push(o))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b){var e=v[0]-x[0],o=v[1]-x[1],i=T[0]-x[0],l=T[1]-x[1],r=Math.pow(e*e+o*o,.25),y=Math.pow(i*i+l*l,.25),h=(y*y*e-r*r*i)*b,s=(y*y*o-r*r*l)*b,d=y*(r+y)*3,p=r*(r+y)*3;return[[x[0]+(d&&h/d),x[1]+(d&&s/d)],[x[0]-(p&&h/p),x[1]-(p&&s/p)]]}},{}],700:[function(_,oe,se){"use strict";var v=_("../../lib").isArrayOrTypedArray;oe.exports=function(x,T,b){var e,o,i,l,r,y,h=[],s=v(x)?x.length:x,d=v(T)?T.length:T,p=v(x)?x:null,c=v(T)?T:null;p&&(i=(p.length-1)/(p[p.length-1]-p[0])/(s-1)),c&&(l=(c.length-1)/(c[c.length-1]-c[0])/(d-1));var g=1/0,m=-1/0;for(o=0;o<d;o++)for(h[o]=[],r=c?(c[o]-c[0])*l:o/(d-1),e=0;e<s;e++)y=(p?(p[e]-p[0])*i:e/(s-1))-r*b,g=Math.min(y,g),m=Math.max(y,m),h[o][e]=y;var u=1/(m-g),w=-g*u;for(o=0;o<d;o++)for(e=0;e<s;e++)h[o][e]=u*h[o][e]+w;return h}},{"../../lib":503}],701:[function(_,oe,se){"use strict";var v=_("./catmull_rom"),x=_("../../lib").ensureArray;function T(b,e,o){return[(2*(-.5*o[0]+1.5*e[0])+b[0])/3,(2*(-.5*o[1]+1.5*e[1])+b[1])/3]}oe.exports=function(b,e,o,i,l,r){var y,h,s,d,p,c,g,m,u,w,f=o[0].length,A=o.length,M=l?3*f-2:f,k=r?3*A-2:A;for(b=x(b,k),e=x(e,k),s=0;s<k;s++)b[s]=x(b[s],M),e[s]=x(e[s],M);for(h=0,d=0;h<A;h++,d+=r?3:1)for(p=b[d],c=e[d],g=o[h],m=i[h],y=0,s=0;y<f;y++,s+=l?3:1)p[s]=g[y],c[s]=m[y];if(l)for(h=0,d=0;h<A;h++,d+=r?3:1){for(y=1,s=3;y<f-1;y++,s+=3)u=v([o[h][y-1],i[h][y-1]],[o[h][y],i[h][y]],[o[h][y+1],i[h][y+1]],l),b[d][s-1]=u[0][0],e[d][s-1]=u[0][1],b[d][s+1]=u[1][0],e[d][s+1]=u[1][1];w=T([b[d][0],e[d][0]],[b[d][2],e[d][2]],[b[d][3],e[d][3]]),b[d][1]=w[0],e[d][1]=w[1],w=T([b[d][M-1],e[d][M-1]],[b[d][M-3],e[d][M-3]],[b[d][M-4],e[d][M-4]]),b[d][M-2]=w[0],e[d][M-2]=w[1]}if(r)for(s=0;s<M;s++){for(d=3;d<k-3;d+=3)u=v([b[d-3][s],e[d-3][s]],[b[d][s],e[d][s]],[b[d+3][s],e[d+3][s]],r),b[d-1][s]=u[0][0],e[d-1][s]=u[0][1],b[d+1][s]=u[1][0],e[d+1][s]=u[1][1];w=T([b[0][s],e[0][s]],[b[2][s],e[2][s]],[b[3][s],e[3][s]]),b[1][s]=w[0],e[1][s]=w[1],w=T([b[k-1][s],e[k-1][s]],[b[k-3][s],e[k-3][s]],[b[k-4][s],e[k-4][s]]),b[k-2][s]=w[0],e[k-2][s]=w[1]}if(l&&r)for(d=1;d<k;d+=(d+1)%3==0?2:1){for(s=3;s<M-3;s+=3)u=v([b[d][s-3],e[d][s-3]],[b[d][s],e[d][s]],[b[d][s+3],e[d][s+3]],l),b[d][s-1]=.5*(b[d][s-1]+u[0][0]),e[d][s-1]=.5*(e[d][s-1]+u[0][1]),b[d][s+1]=.5*(b[d][s+1]+u[1][0]),e[d][s+1]=.5*(e[d][s+1]+u[1][1]);w=T([b[d][0],e[d][0]],[b[d][2],e[d][2]],[b[d][3],e[d][3]]),b[d][1]=.5*(b[d][1]+w[0]),e[d][1]=.5*(e[d][1]+w[1]),w=T([b[d][M-1],e[d][M-1]],[b[d][M-3],e[d][M-3]],[b[d][M-4],e[d][M-4]]),b[d][M-2]=.5*(b[d][M-2]+w[0]),e[d][M-2]=.5*(e[d][M-2]+w[1])}return[b,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(_,oe,se){"use strict";oe.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){return x&&T?function(b,e,o,i,l){var r,d,p;b||(b=[]),e*=3,o*=3;var c=i*i,g=1-i,m=g*g,u=g*i*2,w=-3*m,f=3*(m-u),A=3*(u-c),M=3*c,k=l*l,E=k*l,P=1-l,D=P*P,F=D*P;for(p=0;p<v.length;p++)r=w*(d=v[p])[o][e]+f*d[o][e+1]+A*d[o][e+2]+M*d[o][e+3],b[p]=F*r+3*(D*l*(w*d[o+1][e]+f*d[o+1][e+1]+A*d[o+1][e+2]+M*d[o+1][e+3])+P*k*(w*d[o+2][e]+f*d[o+2][e+1]+A*d[o+2][e+2]+M*d[o+2][e+3]))+E*(w*d[o+3][e]+f*d[o+3][e+1]+A*d[o+3][e+2]+M*d[o+3][e+3]);return b}:x?function(b,e,o,i,l){var r,h,s;b||(b=[]),e*=3;var d=i*i,p=1-i,c=p*p,g=p*i*2,m=-3*c,u=3*(c-g),w=3*(g-d),f=3*d,A=1-l;for(h=0;h<v.length;h++)r=m*(s=v[h])[o][e]+u*s[o][e+1]+w*s[o][e+2]+f*s[o][e+3],b[h]=A*r+l*(m*s[o+1][e]+u*s[o+1][e+1]+w*s[o+1][e+2]+f*s[o+1][e+3]);return b}:T?function(b,e,o,i,l){var r,d,p;b||(b=[]),o*=3;var c=l*l,g=c*l,m=1-l,u=m*m,w=u*m;for(d=0;d<v.length;d++)r=(p=v[d])[o][e+1]-p[o][e],b[d]=w*r+3*(u*l*(p[o+1][e+1]-p[o+1][e])+m*c*(p[o+2][e+1]-p[o+2][e]))+g*(p[o+3][e+1]-p[o+3][e]);return b}:function(b,e,o,i,l){var r,h,s;b||(b=[]);var d=1-l;for(h=0;h<v.length;h++)r=(s=v[h])[o][e+1]-s[o][e],b[h]=d*r+l*(s[o+1][e+1]-s[o+1][e]);return b}}},{}],704:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){return x&&T?function(b,e,o,i,l){var r,d,p;b||(b=[]),e*=3,o*=3;var c=i*i,g=c*i,m=1-i,u=m*m,w=u*m,f=l*l,A=1-l,M=A*A,k=A*l*2,E=-3*M,P=3*(M-k),D=3*(k-f),F=3*f;for(p=0;p<v.length;p++)r=E*(d=v[p])[o][e]+P*d[o+1][e]+D*d[o+2][e]+F*d[o+3][e],b[p]=w*r+3*(u*i*(E*d[o][e+1]+P*d[o+1][e+1]+D*d[o+2][e+1]+F*d[o+3][e+1])+m*c*(E*d[o][e+2]+P*d[o+1][e+2]+D*d[o+2][e+2]+F*d[o+3][e+2]))+g*(E*d[o][e+3]+P*d[o+1][e+3]+D*d[o+2][e+3]+F*d[o+3][e+3]);return b}:x?function(b,e,o,i,l){var r,d,p;b||(b=[]),e*=3;var c=l*l,g=c*l,m=1-l,u=m*m,w=u*m;for(d=0;d<v.length;d++)r=(p=v[d])[o+1][e]-p[o][e],b[d]=w*r+3*(u*l*(p[o+1][e+1]-p[o][e+1])+m*c*(p[o+1][e+2]-p[o][e+2]))+g*(p[o+1][e+3]-p[o][e+3]);return b}:T?function(b,e,o,i,l){var r,h,s;b||(b=[]),o*=3;var d=1-i,p=l*l,c=1-l,g=c*c,m=c*l*2,u=-3*g,w=3*(g-m),f=3*(m-p),A=3*p;for(h=0;h<v.length;h++)r=u*(s=v[h])[o][e]+w*s[o+1][e]+f*s[o+2][e]+A*s[o+3][e],b[h]=d*r+i*(u*s[o][e+1]+w*s[o+1][e+1]+f*s[o+2][e+1]+A*s[o+3][e+1]);return b}:function(b,e,o,i,l){var r,h,s;b||(b=[]);var d=1-i;for(h=0;h<v.length;h++)r=(s=v[h])[o+1][e]-s[o][e],b[h]=d*r+i*(s[o+1][e+1]-s[o][e+1]);return b}}},{}],705:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){var o=x-2,i=T-2;return b&&e?function(l,r,y){var h,c,g;l||(l=[]);var m=Math.max(0,Math.min(Math.floor(r),o)),u=Math.max(0,Math.min(Math.floor(y),i)),w=Math.max(0,Math.min(1,r-m)),f=Math.max(0,Math.min(1,y-u));m*=3,u*=3;var A=w*w,M=A*w,k=1-w,E=k*k,P=E*k,D=f*f,F=D*f,R=1-f,L=R*R,I=L*R;for(g=0;g<v.length;g++)h=P*(c=v[g])[u][m]+3*(E*w*c[u][m+1]+k*A*c[u][m+2])+M*c[u][m+3],l[g]=I*h+3*(L*f*(P*c[u+1][m]+3*(E*w*c[u+1][m+1]+k*A*c[u+1][m+2])+M*c[u+1][m+3])+R*D*(P*c[u+2][m]+3*(E*w*c[u+2][m+1]+k*A*c[u+2][m+2])+M*c[u+2][m+3]))+F*(P*c[u+3][m]+3*(E*w*c[u+3][m+1]+k*A*c[u+3][m+2])+M*c[u+3][m+3]);return l}:b?function(l,r,y){l||(l=[]);var h,c,g,m=Math.max(0,Math.min(Math.floor(r),o)),u=Math.max(0,Math.min(Math.floor(y),i)),w=Math.max(0,Math.min(1,r-m)),f=Math.max(0,Math.min(1,y-u));m*=3;var A=w*w,M=A*w,k=1-w,E=k*k,P=E*k,D=1-f;for(c=0;c<v.length;c++)h=D*(g=v[c])[u][m]+f*g[u+1][m],l[c]=P*h+3*(E*w*(D*g[u][m+1]+f*g[u+1][m+1])+k*A*(D*g[u][m+2]+f*g[u+1][m+1]))+M*(D*g[u][m+3]+f*g[u+1][m+1]);return l}:e?function(l,r,y){l||(l=[]);var h,c,g,m=Math.max(0,Math.min(Math.floor(r),o)),u=Math.max(0,Math.min(Math.floor(y),i)),w=Math.max(0,Math.min(1,r-m)),f=Math.max(0,Math.min(1,y-u));u*=3;var A=f*f,M=A*f,k=1-f,E=k*k,P=E*k,D=1-w;for(c=0;c<v.length;c++)h=D*(g=v[c])[u][m]+w*g[u][m+1],l[c]=P*h+3*(E*f*(D*g[u+1][m]+w*g[u+1][m+1])+k*A*(D*g[u+2][m]+w*g[u+2][m+1]))+M*(D*g[u+3][m]+w*g[u+3][m+1]);return l}:function(l,r,y){l||(l=[]);var h,d,p,c=Math.max(0,Math.min(Math.floor(r),o)),g=Math.max(0,Math.min(Math.floor(y),i)),m=Math.max(0,Math.min(1,r-c)),u=Math.max(0,Math.min(1,y-g)),w=1-u,f=1-m;for(d=0;d<v.length;d++)h=f*(p=v[d])[g][c]+m*p[g][c+1],l[d]=w*h+u*(f*p[g+1][c]+m*p[g+1][c+1]);return l}}},{}],706:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./xy_defaults"),T=_("./ab_defaults"),b=_("./attributes"),e=_("../../components/color/attributes");oe.exports=function(o,i,l,r){function y(s,d){return v.coerce(o,i,b,s,d)}i._clipPathId="clip"+i.uid+"carpet";var h=y("color",e.defaultLine);v.coerceFont(y,"font"),y("carpet"),T(o,i,r,y,h),i.a&&i.b?(i.a.length<3&&(i.aaxis.smoothing=0),i.b.length<3&&(i.baxis.smoothing=0),x(o,i,y)||(i.visible=!1),i._cheater&&y("cheaterslope")):i.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),plot:_("./plot"),calc:_("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(_,oe,se){"use strict";oe.exports=function(v,x){for(var T,b=v._fullData.length,e=0;e<b;e++){var o=v._fullData[e];if(o.index!==x.index&&"carpet"===o.type&&(T||(T=o),o.carpet===x.carpet))return o}return T}},{}],709:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){if(0===v.length)return"";var b,e=[],o=T?3:1;for(b=0;b<v.length;b+=o)e.push(v[b]+","+x[b]),T&&b<v.length-o&&(e.push("C"),e.push([v[b+1]+","+x[b+1],v[b+2]+","+x[b+2]+" "].join(" ")));return e.join(T?"":"L")}},{}],710:[function(_,oe,se){"use strict";var v=_("../../lib").isArrayOrTypedArray;oe.exports=function(x,T,b){var e;for(v(x)?x.length>T.length&&(x=x.slice(0,T.length)):x=[],e=0;e<T.length;e++)x[e]=b(T[e]);return x}},{"../../lib":503}],711:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e,o){var i=e[0]*v.dpdx(x),l=e[1]*v.dpdy(T),r=1,y=1;if(o){var h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);y=Math.max(0,(e[0]*o[0]+e[1]*o[1])/h/s)}var p=180*Math.atan2(l,i)/Math.PI;return p<-90?(p+=180,r=-r):p>90&&(p-=180,r=-r),{angle:p,flip:r,p:v.c2p(b,x,T),offsetMultplier:y}}},{}],712:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("./map_1d_array"),b=_("./makepath"),e=_("./orient_text"),o=_("../../lib/svg_text_utils"),i=_("../../lib"),l=i.strRotate,r=i.strTranslate,y=_("../../constants/alignment");function h(g,m,u,w,f,A){var M="const-"+f+"-lines",k=u.selectAll("."+M).data(A);k.enter().append("path").classed(M,!0).style("vector-effect","non-scaling-stroke"),k.each(function(E){var P=E,F=P.y,R=T([],P.x,g.c2p),L=T([],F,m.c2p),I="M"+b(R,L,P.smoothing);v.select(this).attr("d",I).style("stroke-width",P.width).style("stroke",P.color).style("fill","none")}),k.exit().remove()}function s(g,m,u,w,f,A,M,k){var E=A.selectAll("text."+k).data(M);E.enter().append("text").classed(k,!0);var P=0,D={};return E.each(function(F,R){var L;if("auto"===F.axis.tickangle)L=e(w,m,u,F.xy,F.dxy);else{var I=(F.axis.tickangle+180)*Math.PI/180;L=e(w,m,u,F.xy,[Math.cos(I),Math.sin(I)])}R||(D={angle:L.angle,flip:L.flip});var B=(F.endAnchor?-1:1)*L.flip,V=v.select(this).attr({"text-anchor":B>0?"start":"end","data-notex":1}).call(x.font,F.font).text(F.text).call(o.convertToTspans,g),Z=x.bBox(this);V.attr("transform",r(L.p[0],L.p[1])+l(L.angle)+r(F.axis.labelpadding*B,.3*Z.height)),P=Math.max(P,Z.width+F.axis.labelpadding)}),E.exit().remove(),D.maxExtent=P,D}oe.exports=function(g,m,u,w){var f=m.xaxis,A=m.yaxis,M=g._fullLayout._clips;i.makeTraceGroups(w,u,"trace").each(function(k){var E=v.select(this),P=k[0],D=P.trace,F=D.aaxis,R=D.baxis,L=i.ensureSingle(E,"g","minorlayer"),I=i.ensureSingle(E,"g","majorlayer"),B=i.ensureSingle(E,"g","boundarylayer"),V=i.ensureSingle(E,"g","labellayer");E.style("opacity",D.opacity),h(f,A,I,0,"a",F._gridlines),h(f,A,I,0,"b",R._gridlines),h(f,A,L,0,"a",F._minorgridlines),h(f,A,L,0,"b",R._minorgridlines),h(f,A,B,0,"a-boundary",F._boundarylines),h(f,A,B,0,"b-boundary",R._boundarylines);var Q,re,$,ie,j,q,W,ae,G,ee,te,le,ue,de,he,Z=s(g,f,A,D,0,V,F._labels,"a-label"),Y=s(g,f,A,D,0,V,R._labels,"b-label");Q=g,re=V,$=D,ie=f,j=A,q=Z,W=Y,le=i.aggNums(Math.min,null,$.a),ue=i.aggNums(Math.max,null,$.a),de=i.aggNums(Math.min,null,$.b),he=i.aggNums(Math.max,null,$.b),ee=$.ab2xy(ae=.5*(le+ue),G=de,!0),te=$.dxyda_rough(ae,G),void 0===q.angle&&i.extendFlat(q,e($,ie,j,ee,$.dxydb_rough(ae,G))),c(Q,re,$,0,ee,te,$.aaxis,ie,j,q,"a-title"),ee=$.ab2xy(ae=le,G=.5*(de+he),!0),te=$.dxydb_rough(ae,G),void 0===W.angle&&i.extendFlat(W,e($,ie,j,ee,$.dxyda_rough(ae,G))),c(Q,re,$,0,ee,te,$.baxis,ie,j,W,"b-title"),function(Q,re,$,J,ie){var j,q,W,ae,G=$.select("#"+Q._clipPathId);G.size()||(G=$.append("clipPath").classed("carpetclip",!0));var ee=i.ensureSingle(G,"path","carpetboundary"),te=re.clipsegments,le=[];for(ae=0;ae<te.length;ae++)q=T([],(j=te[ae]).x,J.c2p),W=T([],j.y,ie.c2p),le.push(b(q,W,j.bicubic));var ue="M"+le.join("L")+"Z";G.attr("id",Q._clipPathId),ee.attr("d",ue)}(D,P,M,f,A)})};var d=y.LINE_SPACING,p=(1-y.MID_SHIFT)/d+1;function c(g,m,u,w,f,A,M,k,E,P,D){var F=[];M.title.text&&F.push(M.title.text);var R=m.selectAll("text."+D).data(F),L=P.maxExtent;R.enter().append("text").classed(D,!0),R.each(function(){var I=e(u,k,E,f,A);-1===["start","both"].indexOf(M.showticklabels)&&(L=0);var B=M.title.font.size;L+=B+M.title.offset;var V=(P.angle+(P.flip<0?180:0)-I.angle+450)%360,Z=V>90&&V<270,Y=v.select(this);Y.text(M.title.text).call(o.convertToTspans,g),Z&&(L=(-o.lineCount(Y)+p)*d*B-L),Y.attr("transform",r(I.p[0],I.p[1])+l(I.angle)+r(0,L)).attr("text-anchor","middle").call(x.font,M.title.font)}),R.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(_,oe,se){"use strict";var v=_("./constants"),x=_("../../lib/search").findBin,T=_("./compute_control_points"),b=_("./create_spline_evaluator"),e=_("./create_i_derivative_evaluator"),o=_("./create_j_derivative_evaluator");oe.exports=function(i){var l=i._a,r=i._b,y=l.length,h=r.length,s=i.aaxis,d=i.baxis,p=l[0],c=l[y-1],g=r[0],m=r[h-1],u=l[l.length-1]-l[0],w=r[r.length-1]-r[0],f=u*v.RELATIVE_CULL_TOLERANCE,A=w*v.RELATIVE_CULL_TOLERANCE;p-=f,c+=f,g-=A,m+=A,i.isVisible=function(M,k){return M>p&&M<c&&k>g&&k<m},i.isOccluded=function(M,k){return M<p||M>c||k<g||k>m},i.setScale=function(){var E=T(i._xctrl,i._yctrl,i._x,i._y,s.smoothing,d.smoothing);i._xctrl=E[0],i._yctrl=E[1],i.evalxy=b([i._xctrl,i._yctrl],y,h,s.smoothing,d.smoothing),i.dxydi=e([i._xctrl,i._yctrl],s.smoothing,d.smoothing),i.dxydj=o([i._xctrl,i._yctrl],s.smoothing,d.smoothing)},i.i2a=function(M){var k=Math.max(0,Math.floor(M[0]),y-2),E=M[0]-k;return(1-E)*l[k]+E*l[k+1]},i.j2b=function(M){var k=Math.max(0,Math.floor(M[1]),y-2),E=M[1]-k;return(1-E)*r[k]+E*r[k+1]},i.ij2ab=function(M){return[i.i2a(M[0]),i.j2b(M[1])]},i.a2i=function(M){var k=Math.max(0,Math.min(x(M,l),y-2)),E=l[k];return Math.max(0,Math.min(y-1,k+(M-E)/(l[k+1]-E)))},i.b2j=function(M){var k=Math.max(0,Math.min(x(M,r),h-2)),E=r[k];return Math.max(0,Math.min(h-1,k+(M-E)/(r[k+1]-E)))},i.ab2ij=function(M){return[i.a2i(M[0]),i.b2j(M[1])]},i.i2c=function(M,k){return i.evalxy([],M,k)},i.ab2xy=function(M,k,E){if(!E&&(M<l[0]||M>l[y-1]|k<r[0]||k>r[h-1]))return[!1,!1];var P=i.a2i(M),D=i.b2j(k),F=i.evalxy([],P,D);if(E){var R,L,I,B,V=0,Z=0,Y=[];M<l[0]?(R=0,L=0,V=(M-l[0])/(l[1]-l[0])):M>l[y-1]?(R=y-2,L=1,V=(M-l[y-1])/(l[y-1]-l[y-2])):L=P-(R=Math.max(0,Math.min(y-2,Math.floor(P)))),k<r[0]?(I=0,B=0,Z=(k-r[0])/(r[1]-r[0])):k>r[h-1]?(I=h-2,B=1,Z=(k-r[h-1])/(r[h-1]-r[h-2])):B=D-(I=Math.max(0,Math.min(h-2,Math.floor(D)))),V&&(i.dxydi(Y,R,I,L,B),F[0]+=Y[0]*V,F[1]+=Y[1]*V),Z&&(i.dxydj(Y,R,I,L,B),F[0]+=Y[0]*Z,F[1]+=Y[1]*Z)}return F},i.c2p=function(M,k,E){return[k.c2p(M[0]),E.c2p(M[1])]},i.p2x=function(M,k,E){return[k.p2c(M[0]),E.p2c(M[1])]},i.dadi=function(M){var k=Math.max(0,Math.min(l.length-2,M));return l[k+1]-l[k]},i.dbdj=function(M){var k=Math.max(0,Math.min(r.length-2,M));return r[k+1]-r[k]},i.dxyda=function(M,k,E,P){var D=i.dxydi(null,M,k,E,P),F=i.dadi(M,E);return[D[0]/F,D[1]/F]},i.dxydb=function(M,k,E,P){var D=i.dxydj(null,M,k,E,P),F=i.dbdj(k,P);return[D[0]/F,D[1]/F]},i.dxyda_rough=function(M,k,E){var P=u*(E||.1),D=i.ab2xy(M+P,k,!0),F=i.ab2xy(M-P,k,!0);return[.5*(D[0]-F[0])/P,.5*(D[1]-F[1])/P]},i.dxydb_rough=function(M,k,E){var P=w*(E||.1),D=i.ab2xy(M,k+P,!0),F=i.ab2xy(M,k-P,!0);return[.5*(D[0]-F[0])/P,.5*(D[1]-F[1])/P]},i.dpdx=function(M){return M._m},i.dpdy=function(M){return M._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T,b){var e,o,i,l=[],r=[],y=x[0].length,h=x.length;var d,p,c,g,m,u,w,f,A,M,re,$,J,ie,j,E=0;for(e=0;e<y;e++)for(o=0;o<h;o++)void 0===x[o][e]&&(l.push(e),r.push(o),x[o][e]=($=o,J=void 0,ie=void 0,j=void 0,ie=0,j=0,(re=e)>0&&void 0!==(J=x[$][re-1])&&(j++,ie+=J),re<y-1&&void 0!==(J=x[$][re+1])&&(j++,ie+=J),$>0&&void 0!==(J=x[$-1][re])&&(j++,ie+=J),$<h-1&&void 0!==(J=x[$+1][re])&&(j++,ie+=J),ie/Math.max(1,j))),E=Math.max(E,Math.abs(x[o][e]));if(!l.length)return x;var P=0,D=0,F=l.length;do{for(P=0,i=0;i<F;i++){o=r[i];var L,I,B,V,Z,Y=0,Q=0;0===(e=l[i])?(I=T[V=Math.min(y-1,2)],Q+=(L=x[o][1])+(L-x[o][V])*(T[0]-(B=T[1]))/(B-I),Y++):e===y-1&&(I=T[V=Math.max(0,y-3)],Q+=(L=x[o][y-2])+(L-x[o][V])*(T[y-1]-(B=T[y-2]))/(B-I),Y++),(0===e||e===y-1)&&o>0&&o<h-1&&(Q+=((p=b[o]-b[o-1])*x[o+1][e]+(d=b[o+1]-b[o])*x[o-1][e])/(p+d),Y++),0===o?(I=b[Z=Math.min(h-1,2)],Q+=(L=x[1][e])+(L-x[Z][e])*(b[0]-(B=b[1]))/(B-I),Y++):o===h-1&&(I=b[Z=Math.max(0,h-3)],Q+=(L=x[h-2][e])+(L-x[Z][e])*(b[h-1]-(B=b[h-2]))/(B-I),Y++),(0===o||o===h-1)&&e>0&&e<y-1&&(Q+=((p=T[e]-T[e-1])*x[o][e+1]+(d=T[e+1]-T[e])*x[o][e-1])/(p+d),Y++),Y?Q/=Y:(f=(m=b[o+1]-b[o])*(u=b[o]-b[o-1])*(m+u),Q=((w=(c=T[e+1]-T[e])*(g=T[e]-T[e-1])*(c+g))*(u*x[o+1][e]+m*x[o-1][e])+f*(g*x[o][e+1]+c*x[o][e-1]))/(f*(g+c)+w*(u+m))),P+=(M=(A=Q-x[o][e])/E)*M,x[o][e]+=A*(1+(Y?0:.85))}P=Math.sqrt(P)}while(D++<100&&P>1e-5);return v.log("Smoother converged to",P,"after",D,"iterations"),x}},{"../../lib":503}],715:[function(_,oe,se){"use strict";var v=_("../../lib").isArray1D;oe.exports=function(x,T,b){var e=b("x"),o=e&&e.length,i=b("y"),l=i&&i.length;if(!o&&!l)return!1;if(T._cheater=!e,o&&!v(e)||l&&!v(i))T._length=null;else{var r=o?e.length:1/0;l&&(r=Math.min(r,i.length)),T.a&&T.a.length&&(r=Math.min(r,T.a.length)),T.b&&T.b.length&&(r=Math.min(r,T.b.length)),T._length=r}return!0}},{"../../lib":503}],716:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../scattergeo/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../plots/attributes"),e=_("../../components/color/attributes").defaultLine,o=_("../../lib/extend").extendFlat,i=x.marker.line;oe.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:x.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},x.geojson,{}),featureidkey:x.featureidkey,text:o({},x.text,{}),hovertext:o({},x.hovertext,{}),marker:{line:{color:o({},i.color,{dflt:e}),width:o({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:x.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},b.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:v(),showlegend:o({},b.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../../components/colorscale/calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection");function o(i){return i&&"string"==typeof i}oe.exports=function(i,l){var r,y=l._length,h=new Array(y);r=l.geojson?function(g){return o(g)||v(g)}:o;for(var s=0;s<y;s++){var d=h[s]={},p=l.locations[s],c=l.z[s];r(p)&&v(c)?(d.loc=p,d.z=c):(d.loc=null,d.z=x),d.index=s}return b(h,l),T(i,l,{vals:l.z,containerStr:"",cLetter:"z"}),e(h,l),h}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,i){function l(d,p){return v.coerce(b,e,T,d,p)}var r=l("locations"),y=l("z");if(r&&r.length&&v.isArrayOrTypedArray(y)&&y.length){e._length=Math.min(r.length,y.length);var h,s=l("geojson");("string"==typeof s&&""!==s||v.isPlainObject(s))&&(h="geojson-id"),"geojson-id"===l("locationmode",h)&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),x(b,e,i,l,{prefix:"",cLetter:"z"}),v.coerceSelectionMarkerOpacity(e,l)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){v.location=x.location,v.z=x.z;var o=b[e];return o.fIn&&o.fIn.properties&&(v.properties=o.fIn.properties),v.ct=o.ct,v}},{}],720:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("./attributes"),T=_("../../lib").fillText;oe.exports=function(b,e,o){var i,l,r,y,h=b.cd,s=h[0].trace,d=b.subplot,p=[e,o],c=[e+360,o];for(l=0;l<h.length;l++)if(y=!1,(i=h[l])._polygons){for(r=0;r<i._polygons.length;r++)i._polygons[r].contains(p)&&(y=!y),i._polygons[r].contains(c)&&(y=!y);if(y)break}if(y&&i)return b.x0=b.x1=b.xa.c2p(i.ct),b.y0=b.y1=b.ya.c2p(i.ct),b.index=i.index,b.location=i.loc,b.z=i.z,b.zLabel=v.tickText(d.mockAxis,d.mockAxis.c2l(i.z),"hover").text,b.hovertemplate=i.hovertemplate,function(g,m,u){if(!m.hovertemplate){var w=u.hi||m.hoverinfo,f=String(u.loc),A="all"===w?x.hoverinfo.flags:w.split("+"),M=-1!==A.indexOf("name"),k=-1!==A.indexOf("location"),E=-1!==A.indexOf("z"),P=-1!==A.indexOf("text"),D=[];!M&&k?g.nameOverride=f:(M&&(g.nameOverride=m.name),k&&D.push(f)),E&&D.push(g.zLabel),P&&T(u,m,D),g.extraText=D.join("<br>")}}(b,s,i),[b]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("./calc"),calcGeoJSON:_("./plot").calcGeoJSON,plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"choropleth",basePlotModule:_("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../lib/geo_location_utils"),b=_("../../lib/topojson_utils").getTopojsonFeatures,e=_("../../plots/cartesian/autorange").findExtremes,o=_("./style").style;oe.exports={calcGeoJSON:function(i,l){for(var r=i[0].trace,y=l[r.geo],h=y._subplot,s=r.locationmode,d=r._length,p="geojson-id"===s?T.extractTraceFeature(i):b(r,h.topojson),c=[],g=[],m=0;m<d;m++){var u=i[m],w="geojson-id"===s?u.fOut:T.locationToFeature(s,u.loc,p);if(w){u.geojson=w,u.ct=w.properties.ct,u._polygons=T.feature2polygons(w);var f=T.computeBbox(w);c.push(f[0],f[2]),g.push(f[1],f[3])}else u.geojson=null}if("geojson"===y.fitbounds&&"geojson-id"===s){var A=T.computeBbox(T.getTraceGeojson(r));c=[A[0],A[2]],g=[A[1],A[3]]}var M={padded:!0};r._extremes.lon=e(y.lonaxis._ax,c,M),r._extremes.lat=e(y.lataxis._ax,g,M)},plot:function(i,l,r){var y=l.layers.backplot.select(".choroplethlayer");x.makeTraceGroups(y,r,"trace choropleth").each(function(h){var s=v.select(this).selectAll("path.choroplethlocation").data(x.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),o(i,h)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(_,oe,se){"use strict";oe.exports=function(v,x){var T,b,e,o,i,l=v.cd,r=v.xaxis,y=v.yaxis,h=[];if(!1===x)for(T=0;T<l.length;T++)l[T].selected=0;else for(T=0;T<l.length;T++)(e=(b=l[T]).ct)&&(o=r.c2p(e),i=y.c2p(e),x.contains([o,i],null,T,v)?(h.push({pointNumber:T,lon:e[0],lat:e[1]}),b.selected=1):b.selected=0);return h}},{}],724:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing"),b=_("../../components/colorscale");function e(o,i){var l=i[0].trace,r=i[0].node3.selectAll(".choroplethlocation"),y=l.marker||{},h=y.line||{},s=b.makeColorScaleFuncFromTrace(l);r.each(function(d){v.select(this).attr("fill",s(d.z)).call(x.stroke,d.mlc||h.color).call(T.dashLine,"",d.mlw||h.width||0).style("opacity",y.opacity)}),T.selectedPointStyle(r,l,o)}oe.exports={style:function(o,i){i&&e(o,i)},styleOnSelect:function(o,i){var r=i[0].trace;r.selectedpoints?T.selectedPointStyle(i[0].node3.selectAll(".choroplethlocation"),r,o):e(o,i)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(_,oe,se){"use strict";var v=_("../choropleth/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/attributes"),e=_("../../lib/extend").extendFlat;oe.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},v.featureidkey,{}),below:{valType:"string",editType:"plot"},text:v.text,hovertext:v.hovertext,marker:{line:{color:e({},v.marker.line.color,{editType:"plot"}),width:e({},v.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},v.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},v.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},v.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:v.hoverinfo,hovertemplate:T({},{keys:["properties"]}),showlegend:e({},b.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../components/colorscale"),b=_("../../components/drawing"),e=_("../../lib/geojson_utils").makeBlank,o=_("../../lib/geo_location_utils");function i(l){var r,y=l[0].trace,h=y._opts;if(y.selectedpoints){for(var s=b.makeSelectedPointStyleFns(y),d=0;d<l.length;d++){var p=l[d];p.fOut&&(p.fOut.properties.mo2=s.selectedOpacityFn(p))}r={type:"identity",property:"mo2"}}else r=x.isArrayOrTypedArray(y.marker.opacity)?{type:"identity",property:"mo"}:y.marker.opacity;return x.extendFlat(h.fill.paint,{"fill-opacity":r}),x.extendFlat(h.line.paint,{"line-opacity":r}),h}oe.exports={convert:function(l){var r=l[0].trace,y=!0===r.visible&&0!==r._length,h={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},d=r._opts={fill:h,line:s,geojson:e()};if(!y)return d;var p=o.extractTraceFeature(l);if(!p)return d;var c,g,m,u=T.makeColorScaleFuncFromTrace(r),w=r.marker,f=w.line||{};x.isArrayOrTypedArray(w.opacity)&&(c=function(D){var F=D.mo;return v(F)?+x.constrain(F,0,1):0}),x.isArrayOrTypedArray(f.color)&&(g=function(D){return D.mlc}),x.isArrayOrTypedArray(f.width)&&(m=function(D){return D.mlw});for(var A=0;A<l.length;A++){var M=l[A],k=M.fOut;if(k){var E=k.properties;E.fc=u(M.z),c&&(E.mo=c(M)),g&&(E.mlc=g(M)),m&&(E.mlw=m(M)),M.ct=E.ct,M._polygons=o.feature2polygons(k)}}var P=c?{type:"identity",property:"mo"}:w.opacity;return x.extendFlat(h.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":P}),x.extendFlat(s.paint,{"line-color":g?{type:"identity",property:"mlc"}:f.color,"line-width":m?{type:"identity",property:"mlw"}:f.width,"line-opacity":P}),h.layout.visibility="visible",s.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:p},i(l),d},convertOnSelect:i}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,i){function l(s,d){return v.coerce(b,e,T,s,d)}var r=l("locations"),y=l("z"),h=l("geojson");v.isArrayOrTypedArray(r)&&r.length&&v.isArrayOrTypedArray(y)&&y.length&&("string"==typeof h&&""!==h||v.isPlainObject(h))?(l("featureidkey"),e._length=Math.min(r.length,y.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),x(b,e,i,l,{prefix:"",cLetter:"z"}),v.coerceSelectionMarkerOpacity(e,l)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("../choropleth/calc"),plot:_("./plot"),hoverPoints:_("../choropleth/hover"),eventData:_("../choropleth/event_data"),selectPoints:_("../choropleth/select"),styleOnSelect:function(v,x){x&&x[0].trace._glTrace.updateOnSelect(x)},getBelow:function(v,x){for(var T=x.getMapLayers(),b=T.length-2;b>=0;b--){var e=T[b].id;if("string"==typeof e&&0===e.indexOf("water"))for(var o=b+1;o<T.length;o++)if("string"==typeof(e=T[o].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(_,oe,se){"use strict";var v=_("./convert").convert,x=_("./convert").convertOnSelect,T=_("../../plots/mapbox/constants").traceLayerPrefix;function b(o,i){this.type="choroplethmapbox",this.subplot=o,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",T+i+"-fill"],["line",T+i+"-line"]],this.below=null}var e=b.prototype;e.update=function(o){this._update(v(o))},e.updateOnSelect=function(o){this._update(x(o))},e._update=function(o){var i=this.subplot,l=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(o.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(o,r),this.below=r);for(var y=0;y<l.length;y++){var h=l[y],d=h[1],p=o[h[0]];i.setOptions(d,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&i.setOptions(d,"setPaintProperty",p.paint)}},e._addLayers=function(o,i){for(var l=this.subplot,r=this.layerList,y=this.sourceId,h=0;h<r.length;h++){var s=r[h],d=s[0],p=o[d];l.addLayer({type:d,id:s[1],source:y,layout:p.layout,paint:p.paint},i)}},e._removeLayers=function(){for(var o=this.subplot.map,i=this.layerList,l=i.length-1;l>=0;l--)o.removeLayer(i[l][1])},e.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},oe.exports=function(o,i){var l=i[0].trace,r=new b(o,l.uid),y=r.sourceId,h=v(i),s=r.below=o.belowLookup["trace-"+l.uid];return o.map.addSource(y,{type:"geojson",data:h.geojson}),r._addLayers(h,s),i[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["norm"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(i,v("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){i[l]=b[l]}),i.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,oe.exports=i},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/calc");oe.exports=function(x,T){for(var b=T.u,e=T.v,o=T.w,i=Math.min(T.x.length,T.y.length,T.z.length,b.length,e.length,o.length),l=-1/0,r=1/0,y=0;y<i;y++){var h=b[y],s=e[y],d=o[y],p=Math.sqrt(h*h+s*s+d*d);l=Math.max(l,p),r=Math.min(r,p)}T._len=i,T._normMax=l,v(x,T,{vals:[r,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_cone3d,x=_("../../../stackgl_modules").gl_cone3d.createConeMesh,T=_("../../lib").simpleMap,b=_("../../lib/gl_format_color").parseColorScale,e=_("../../components/colorscale").extractOpts,o=_("../../plots/gl3d/zip3");function i(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var l=i.prototype;l.handlePick=function(d){if(d.object===this.mesh){var p=d.index=d.data.index,u=this.data.u[p],w=this.data.v[p],f=this.data.w[p];d.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p],u,w,f,Math.sqrt(u*u+w*w+f*f)];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[p]?d.textLabel=A[p]:A&&(d.textLabel=A),!0}};var r={xaxis:0,yaxis:1,zaxis:2},y={tip:1,tail:0,cm:.25,center:.5},h={tip:1,tail:1,cm:.75,center:.5};function s(d,p){var c=d.fullSceneLayout,g=d.dataScale,m={};function u(M,k){var E=c[k],P=g[r[k]];return T(M,function(D){return E.d2l(D)*P})}m.vectors=o(u(p.u,"xaxis"),u(p.v,"yaxis"),u(p.w,"zaxis"),p._len),m.positions=o(u(p.x,"xaxis"),u(p.y,"yaxis"),u(p.z,"zaxis"),p._len);var w=e(p);m.colormap=b(p),m.vertexIntensityBounds=[w.min/p._normMax,w.max/p._normMax],m.coneOffset=y[p.anchor],m.coneSize="scaled"===p.sizemode?p.sizeref||.5:p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var f=v(m),A=p.lightposition;return f.lightPosition=[A.x,A.y,A.z],f.ambient=p.lighting.ambient,f.diffuse=p.lighting.diffuse,f.specular=p.lighting.specular,f.roughness=p.lighting.roughness,f.fresnel=p.lighting.fresnel,f.opacity=p.opacity,p._pad=h[p.anchor]*f.vectorScale*f.coneScale*p._normMax,f}l.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(d,p){var c=d.glplot.gl,g=s(d,p),m=x(c,g),u=new i(d,p.uid);return u.mesh=m,u.data=p,m._trace=u,d.glplot.add(m),u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,i){function l(c,g){return v.coerce(b,e,T,c,g)}var r=l("u"),y=l("v"),h=l("w"),s=l("x"),d=l("y"),p=l("z");r&&r.length&&y&&y.length&&h&&h.length&&s&&s.length&&d&&d.length&&p&&p.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),x(b,e,i,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"cone",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:_("./calc"),plot:_("./convert"),eventData:function(v,x){return v.norm=x.traceCoordinate[6],v},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(_,oe,se){"use strict";var v=_("../heatmap/attributes"),x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes"),b=T.axisHoverFormat,e=T.descriptionOnlyNumbers,o=_("../../components/colorscale/attributes"),i=_("../../components/drawing/attributes").dash,l=_("../../plots/font_attributes"),r=_("../../lib/extend").extendFlat,y=_("../../constants/filter_ops"),h=y.COMPARISON_OPS2,s=y.INTERVAL_OPS,d=x.line;oe.exports=r({z:v.z,x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,text:v.text,hovertext:v.hovertext,transpose:v.transpose,xtype:v.xtype,ytype:v.ytype,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:v.hovertemplate,texttemplate:r({},v.texttemplate,{}),textfont:r({},v.textfont,{}),hoverongaps:v.hoverongaps,connectgaps:r({},v.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(h).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},d.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},d.smoothing,{}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(_,oe,se){"use strict";var v=_("../../components/colorscale"),x=_("../heatmap/calc"),T=_("./set_contours"),b=_("./end_plus");oe.exports=function(e,o){var i=x(e,o),l=i[0].z;T(o,l);var r,y=o.contours,h=v.extractOpts(o);if("heatmap"===y.coloring&&h.auto&&!1===o.autocontour){var s=y.start,d=b(y),p=y.size||1,c=Math.floor((d-s)/p)+1;isFinite(p)||(p=1,c=1);var g=s-p/2;r=[g,g+c*p]}else r=l;return v.calc(e,o,{vals:r,cLetter:"z"}),i}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(_,oe,se){"use strict";oe.exports=function(v,x){var T,b=v[0],e=b.z;switch(x.type){case"levels":var o=Math.min(e[0][0],e[0][1]);for(T=0;T<v.length;T++){var i=v[T];i.prefixBoundary=!i.edgepaths.length&&(o>i.level||i.starts.length&&o===i.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var l=b.x.length,r=b.y.length,y=-1/0,h=1/0;for(T=0;T<r;T++)h=Math.min(h,e[T][0]),h=Math.min(h,e[T][l-1]),y=Math.max(y,e[T][0]),y=Math.max(y,e[T][l-1]);for(T=1;T<l-1;T++)h=Math.min(h,e[0][T]),h=Math.min(h,e[r-1][T]),y=Math.max(y,e[0][T]),y=Math.max(y,e[r-1][T]);var s,d,p=x.value;switch(x._operation){case">":p>y&&(b.prefixBoundary=!0);break;case"<":(p<h||b.starts.length&&p===h)&&(b.prefixBoundary=!0);break;case"[]":s=Math.min(p[0],p[1]),((d=Math.max(p[0],p[1]))<h||s>y||b.starts.length&&d===h)&&(b.prefixBoundary=!0);break;case"][":s=Math.min(p[0],p[1]),d=Math.max(p[0],p[1]),s<h&&d>y&&(b.prefixBoundary=!0)}}}},{}],738:[function(_,oe,se){"use strict";var v=_("../../components/colorscale"),x=_("./make_color_map"),T=_("./end_plus");oe.exports={min:"zmin",max:"zmax",calc:function(b,e,o){var i=e.contours,l=e.line,r=i.size||1,y=i.coloring,h=x(e,{isColorbar:!0});if("heatmap"===y){var s=v.extractOpts(e);o._fillgradient=s.reversescale?v.flipScale(s.colorscale):s.colorscale,o._zrange=[s.min,s.max]}else"fill"===y&&(o._fillcolor=h);o._line={color:"lines"===y?h:l.color,width:!1!==i.showlines?l.width:0,dash:l.dash},o._levels={start:i.start,end:T(i),size:r}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(_,oe,se){"use strict";oe.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("./label_defaults"),T=_("../../components/color"),b=T.addOpacity,e=T.opacity,o=_("../../constants/filter_ops"),i=o.CONSTRAINT_REDUCTION,l=o.COMPARISON_OPS2;oe.exports=function(r,y,h,s,d,p){var c,g,m,f,A,M,u=y.contours,w=h("contours.operation");u._operation=i[w],f=h,-1===l.indexOf((A=u).operation)?(f("contours.value",[0,1]),Array.isArray(A.value)?A.value.length>2?A.value=A.value.slice(2):0===A.length?A.value=[0,1]:A.length<2?(M=parseFloat(A.value[0]),A.value=[M,M+1]):A.value=[parseFloat(A.value[0]),parseFloat(A.value[1])]:v(A.value)&&(M=parseFloat(A.value),A.value=[M,M+1])):(f("contours.value",0),v(A.value)||(A.value=Array.isArray(A.value)?parseFloat(A.value[0]):0)),"="===w?c=u.showlines=!0:(c=h("contours.showlines"),m=h("fillcolor",b((r.line||{}).color||d,.5))),c&&(g=h("line.color",m&&e(m)?b(y.fillcolor,1):d),h("line.width",2),h("line.dash")),h("line.smoothing"),x(h,s,g,p)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(_,oe,se){"use strict";var v=_("../../constants/filter_ops"),x=_("fast-isnumeric");function T(o,i){var l,r=Array.isArray(i);function y(h){return x(h)?+h:null}return-1!==v.COMPARISON_OPS2.indexOf(o)?l=y(r?i[0]:i):-1!==v.INTERVAL_OPS.indexOf(o)?l=r?[y(i[0]),y(i[1])]:[y(i),y(i)]:-1!==v.SET_OPS.indexOf(o)&&(l=r?i.map(y):[y(i)]),l}function b(o){return function(i){i=T(o,i);var l=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:l,end:r,size:r-l}}}function e(o){return function(i){return{start:i=T(o,i),end:1/0,size:1/0}}}oe.exports={"[]":b("[]"),"][":b("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b){var e=b("contours.start"),o=b("contours.end"),i=!1===e||!1===o,l=T("contours.size");!(i?x.autocontour=!0:T("autocontour",!1))&&l||T("ncontours")}},{}],743:[function(_,oe,se){"use strict";var v=_("../../lib");function x(T){return v.extendFlat({},T,{edgepaths:v.extendDeep([],T.edgepaths),paths:v.extendDeep([],T.paths),starts:v.extendDeep([],T.starts)})}oe.exports=function(T,b){var e,o,i,l=function(h){return h.reverse()},r=function(h){return h};switch(b){case"=":case"<":return T;case">":for(1!==T.length&&v.warn("Contour data invalid for the specified inequality operation."),o=T[0],e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);return T;case"][":var y=l;l=r,r=y;case"[]":for(2!==T.length&&v.warn("Contour data invalid for the specified inequality range operation."),o=x(T[0]),i=x(T[1]),e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);for(;i.edgepaths.length;)o.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)o.paths.push(r(i.paths.shift()));for(;i.starts.length;)o.starts.push(r(i.starts.shift()));return[o]}}},{"../../lib":503}],744:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("../scatter/period_defaults"),b=_("./constraint_defaults"),e=_("./contours_defaults"),o=_("./style_defaults"),i=_("../heatmap/label_defaults"),l=_("./attributes");oe.exports=function(r,y,h,s){function d(c,g){return v.coerce(r,y,l,c,g)}if(x(r,y,d,s)){T(r,y,s,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var p="constraint"===d("contours.type");d("connectgaps",v.isArray1D(y.z)),p?b(r,y,d,s,h):(e(r,y,d,function(c){return v.coerce2(r,y,l,c)}),o(r,y,d,s)),y.contours&&"heatmap"===y.contours.coloring&&i(d,s)}else y.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./constraint_mapping"),T=_("./end_plus");oe.exports=function(b,e,o){for(var i="constraint"===b.type?x[b._operation](b.value):b,l=i.size,r=[],y=T(i),h=o.trace._carpetTrace,s=h?{xaxis:h.aaxis,yaxis:h.baxis,x:o.a,y:o.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:o.x,y:o.y},d=i.start;d<y;d+=l)if(r.push(v.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:o.z,smoothing:o.trace.line.smoothing},s)),r.length>1e3){v.warn("Too many contours, clipping at 1000",b);break}return r}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(_,oe,se){"use strict";oe.exports=function(v){return v.end+v.size/1e6}},{}],747:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./constants");function T(o,i,l,r){return Math.abs(o[0]-i[0])<l&&Math.abs(o[1]-i[1])<r}function b(o,i,l,r,y){var h,ee,le,ue,de,s=i.join(","),d=o.crossings[s],p=(le=i,ue=0,de=0,(ee=d)>20&&l?208===ee||1114===ee?ue=0===le[0]?1:-1:de=0===le[1]?1:-1:-1!==x.BOTTOMSTART.indexOf(ee)?de=1:-1!==x.LEFTSTART.indexOf(ee)?ue=1:-1!==x.TOPSTART.indexOf(ee)?de=-1:ue=-1,[ue,de]),c=[e(o,i,[-p[0],-p[1]])],g=o.z.length,m=o.z[0].length,u=i.slice(),w=p.slice();for(h=0;h<1e4;h++){if(d>20?o.crossings[s]=x.SADDLEREMAINDER[d=x.CHOOSESADDLE[d][(p[0]||p[1])<0?0:1]]:delete o.crossings[s],!(p=x.NEWDELTA[d])){v.log("Found bad marching index:",d,i,o.level);break}if(c.push(e(o,i,p)),i[0]+=p[0],i[1]+=p[1],s=i.join(","),T(c[c.length-1],c[c.length-2],r,y)&&c.pop(),i[0]===u[0]&&i[1]===u[1]&&p[0]===w[0]&&p[1]===w[1]||l&&(p[0]&&(i[0]<0||i[0]>m-2)||p[1]&&(i[1]<0||i[1]>g-2)))break;d=o.crossings[s]}1e4===h&&v.log("Infinite loop in contour?");var A,M,k,E,P,D,F,R,L,I,B,V,Z,Y,Q,re=T(c[0],c[c.length-1],r,y),$=0,J=.2*o.smoothing,ie=[],j=0;for(h=1;h<c.length;h++)void 0,void 0,Y=(V=c[h])[2]-(Z=c[h-1])[2],Q=V[3]-Z[3],$+=F=Math.sqrt(Y*Y+Q*Q),ie.push(F);var q=$/ie.length*J;function W(ee){return c[ee%c.length]}for(h=c.length-2;h>=j;h--)if((A=ie[h])<q){for(k=0,M=h-1;M>=j&&A+ie[M]<q;M--)A+=ie[M];if(re&&h===c.length-2)for(k=0;k<M&&A+ie[k]<q;k++)A+=ie[k];P=h-M+k+1,D=Math.floor((h+M+k+2)/2),E=re||h!==c.length-2?re||-1!==M?P%2?W(D):[(W(D)[0]+W(D+1)[0])/2,(W(D)[1]+W(D+1)[1])/2]:c[0]:c[c.length-1],c.splice(M+1,h-M+1,E),h=M+1,k&&(j=k),re&&(h===c.length-2?c[k]=c[c.length-1]:0===h&&(c[c.length-1]=c[0]))}for(c.splice(0,j),h=0;h<c.length;h++)c[h].length=2;if(!(c.length<2))if(re)c.pop(),o.paths.push(c);else{l||v.log("Unclosed interior contour?",o.level,u.join(","),c.join("L"));var ae=!1;for(R=0;R<o.edgepaths.length;R++)if(I=o.edgepaths[R],!ae&&T(I[0],c[c.length-1],r,y)){c.pop(),ae=!0;var G=!1;for(L=0;L<o.edgepaths.length;L++)if(T((B=o.edgepaths[L])[B.length-1],c[0],r,y)){G=!0,c.shift(),o.edgepaths.splice(R,1),L===R?o.paths.push(c.concat(B)):(L>R&&L--,o.edgepaths[L]=B.concat(c,I));break}G||(o.edgepaths[R]=c.concat(I))}for(R=0;R<o.edgepaths.length&&!ae;R++)T((I=o.edgepaths[R])[I.length-1],c[0],r,y)&&(c.shift(),o.edgepaths[R]=I.concat(c),ae=!0);ae||o.edgepaths.push(c)}}function e(o,i,l){var r=i[0]+Math.max(l[0],0),y=i[1]+Math.max(l[1],0),h=o.z[y][r],s=o.xaxis,d=o.yaxis;if(l[1]){var p=(o.level-h)/(o.z[y][r+1]-h),c=(1!==p?(1-p)*s.c2l(o.x[r]):0)+(0!==p?p*s.c2l(o.x[r+1]):0);return[s.c2p(s.l2c(c),!0),d.c2p(o.y[y],!0),r+p,y]}var g=(o.level-h)/(o.z[y+1][r]-h),m=(1!==g?(1-g)*d.c2l(o.y[y]):0)+(0!==g?g*d.c2l(o.y[y+1]):0);return[s.c2p(o.x[r],!0),d.c2p(d.l2c(m),!0),r,y+g]}oe.exports=function(o,i,l){var r,y,h,s;for(i=i||.01,l=l||.01,y=0;y<o.length;y++){for(h=o[y],s=0;s<h.starts.length;s++)b(h,h.starts[s],"edge",i,l);for(r=0;Object.keys(h.crossings).length&&r<1e4;)r++,b(h,Object.keys(h.crossings)[0].split(",").map(Number),void 0,i,l);1e4===r&&v.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("../heatmap/hover");oe.exports=function(T,b,e,o,i){i||(i={}),i.isContour=!0;var l=x(T,b,e,o,i);return l&&l.forEach(function(r){var y=r.trace;"constraint"===y.contours.type&&(y.fillcolor&&v.opacity(y.fillcolor)?r.color=v.addOpacity(y.fillcolor,1):y.contours.showlines&&v.opacity(y.line.color)&&(r.color=v.addOpacity(y.line.color,1)))}),l}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot").plot,style:_("./style"),colorbar:_("./colorbar"),hoverPoints:_("./hover"),moduleType:"trace",name:"contour",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T,b,e){if(e||(e={}),x("contours.showlabels")){var o=T.font;v.coerceFont(x,"contours.labelfont",{family:o.family,size:o.size,color:b}),x("contours.labelformat")}!1!==e.hasHover&&x("zhoverformat")}},{"../../lib":503}],751:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/colorscale"),T=_("./end_plus");oe.exports=function(b){var e=b.contours,o=e.start,i=T(e),l=e.size||1,r=Math.floor((i-o)/l)+1,y="lines"===e.coloring?0:1,h=x.extractOpts(b);isFinite(l)||(l=1,r=1);var s,d,p=h.reversescale?x.flipScale(h.colorscale):h.colorscale,c=p.length,g=new Array(c),m=new Array(c);if("heatmap"===e.coloring){var u=h.min,w=h.max;for(d=0;d<c;d++)g[d]=(s=p[d])[0]*(w-u)+u,m[d]=s[1];var f=v.extent([u,w,e.start,e.start+l*(r-1)]),A=f[u<w?0:1],M=f[u<w?1:0];A!==u&&(g.splice(0,0,A),m.splice(0,0,m[0])),M!==w&&(g.push(M),m.push(m[m.length-1]))}else for(d=0;d<c;d++)g[d]=((s=p[d])[0]*(r+y-1)-y/2)*l+o,m[d]=s[1];return x.makeColorScaleFunc({domain:g,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(_,oe,se){"use strict";var v=_("./constants");function x(T,b){var e=(b[0][0]>T?0:1)+(b[0][1]>T?0:2)+(b[1][1]>T?0:4)+(b[1][0]>T?0:8);return 5===e||10===e?T>(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}oe.exports=function(T){var b,e,o,i,l,r,y,h,s,d=T[0].z,p=d.length,c=d[0].length,g=2===p||2===c;for(e=0;e<p-1;e++)for(i=[],0===e&&(i=i.concat(v.BOTTOMSTART)),e===p-2&&(i=i.concat(v.TOPSTART)),b=0;b<c-1;b++)for(o=i.slice(),0===b&&(o=o.concat(v.LEFTSTART)),b===c-2&&(o=o.concat(v.RIGHTSTART)),l=b+","+e,r=[[d[e][b],d[e][b+1]],[d[e+1][b],d[e+1][b+1]]],s=0;s<T.length;s++)(y=x((h=T[s]).level,r))&&(h.crossings[l]=y,-1!==o.indexOf(y)&&(h.starts.push([b,e]),g&&-1!==o.indexOf(y,o.indexOf(y)+1)&&h.starts.push([b,e])))}},{"./constants":739}],753:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../components/colorscale"),e=_("../../lib/svg_text_utils"),o=_("../../plots/cartesian/axes"),i=_("../../plots/cartesian/set_convert"),l=_("../heatmap/plot"),r=_("./make_crossings"),y=_("./find_all_paths"),h=_("./empty_pathinfo"),s=_("./convert_to_constraints"),d=_("./close_boundaries"),p=_("./constants"),c=p.LABELOPTIMIZER;function g(w,f){var A,M,k,E,P,D,R="",L=0,I=w.edgepaths.map(function(re,$){return $}),B=!0;function V(re){return Math.abs(re[1]-f[2][1])<.01}function Y(re){return Math.abs(re[0]-f[2][0])<.01}for(;I.length;){for(D=T.smoothopen(w.edgepaths[L],w.smoothing),R+=B?D:D.replace(/^M/,"L"),I.splice(I.indexOf(L),1),A=w.edgepaths[L][w.edgepaths[L].length-1],E=-1,k=0;k<4;k++){if(!A){x.log("Missing end?",L,w);break}for(Math.abs(A[1]-f[0][1])<.01&&!Y(A)?M=f[1]:Math.abs(A[0]-f[0][0])<.01?M=f[0]:V(A)?M=f[3]:Y(A)&&(M=f[2]),P=0;P<w.edgepaths.length;P++){var Q=w.edgepaths[P][0];Math.abs(A[0]-M[0])<.01?Math.abs(A[0]-Q[0])<.01&&(Q[1]-A[1])*(M[1]-Q[1])>=0&&(M=Q,E=P):Math.abs(A[1]-M[1])<.01?Math.abs(A[1]-Q[1])<.01&&(Q[0]-A[0])*(M[0]-Q[0])>=0&&(M=Q,E=P):x.log("endpt to newendpt is not vert. or horz.",A,M,Q)}if(A=M,E>=0)break;R+="L"+M}if(E===w.edgepaths.length){x.log("unclosed perimeter path");break}(B=-1===I.indexOf(L=E))&&(L=I[0],R+="Z")}for(L=0;L<w.paths.length;L++)R+=T.smoothclosed(w.paths[L],w.smoothing);return R}function m(w,f,A,M){var k=f.width/2,E=f.height/2,P=w.x,D=w.y,F=w.theta,R=Math.cos(F)*k,L=Math.sin(F)*k,I=(P>M.center?M.right-P:P-M.left)/(R+Math.abs(Math.sin(F)*E)),B=(D>M.middle?M.bottom-D:D-M.top)/(Math.abs(L)+Math.cos(F)*E);if(I<1||B<1)return 1/0;var V=c.EDGECOST*(1/(I-1)+1/(B-1));V+=c.ANGLECOST*F*F;for(var Z=P-R,Y=D-L,Q=P+R,re=D+L,$=0;$<A.length;$++){var J=A[$],ie=Math.cos(J.theta)*J.width/2,j=Math.sin(J.theta)*J.width/2,q=2*x.segmentDistance(Z,Y,Q,re,J.x-ie,J.y-j,J.x+ie,J.y+j)/(f.height+J.height),W=J.level===f.level,ae=W?c.SAMELEVELDISTANCE:1;if(q<=ae)return 1/0;V+=c.NEIGHBORCOST*(W?c.SAMELEVELFACTOR:1)/(q-ae)}return V}function u(w){var f,A,M=w.trace._emptypoints,k=[],E=w.z.length,P=w.z[0].length,D=[];for(f=0;f<P;f++)D.push(1);for(f=0;f<E;f++)k.push(D.slice());for(f=0;f<M.length;f++)k[(A=M[f])[0]][A[1]]=0;return w.zmask=k,k}se.plot=function(w,f,A,M){var k=f.xaxis,E=f.yaxis;x.makeTraceGroups(M,A,"contour").each(function(P){var D=v.select(this),F=P[0],L=F.x,I=F.y,B=F.trace.contours,V=h(B,f,F),Z=x.ensureSingle(D,"g","heatmapcoloring"),Y=[];"heatmap"===B.coloring&&(Y=[P]),l(w,f,Y,Z),r(V),y(V);var W,ae,G,Q=k.c2p(L[0],!0),re=k.c2p(L[L.length-1],!0),$=E.c2p(I[0],!0),J=E.c2p(I[I.length-1],!0),ie=[[Q,J],[re,J],[re,$],[Q,$]],j=V;"constraint"===B.type&&(j=s(V,B._operation)),W=ie,ae=B,(G=x.ensureSingle(D,"g","contourbg").selectAll("path").data("fill"===ae.coloring?[0]:[])).enter().append("path"),G.exit().remove(),G.attr("d","M"+W.join("L")+"Z").style("stroke","none"),function(q,W,ae,G){var ee="fill"===G.coloring||"constraint"===G.type&&"="!==G._operation,te="M"+ae.join("L")+"Z";ee&&d(W,G);var le=x.ensureSingle(q,"g","contourfill").selectAll("path").data(ee?W:[]);le.enter().append("path"),le.exit().remove(),le.each(function(ue){var de=(ue.prefixBoundary?te:"")+g(ue,ae);de?v.select(this).attr("d",de).style("stroke","none"):v.select(this).remove()})}(D,j,ie,B),function(q,W,ae,G,ee){var te=x.ensureSingle(q,"g","contourlines"),le=!1!==ee.showlines,ue=ee.showlabels,de=le&&ue,he=se.createLines(te,le||ue,W),be=se.createLineClip(te,de,ae,G.trace.uid),me=q.selectAll("g.contourlabels").data(ue?[0]:[]);if(me.exit().remove(),me.enter().append("g").classed("contourlabels",!0),ue){var _e=[],Ee=[];x.clearLocationCache();var De=se.labelFormatter(ae,G),Se=T.tester.append("text").attr("data-notex",1).call(T.font,ee.labelfont),Fe=W[0].xaxis,ve=W[0].yaxis,Te=Fe._length,Ie=ve._length,Ce=Fe.range,Re=ve.range,Ue=x.aggNums(Math.min,null,G.x),qe=x.aggNums(Math.max,null,G.x),Xe=x.aggNums(Math.min,null,G.y),st=x.aggNums(Math.max,null,G.y),He=Math.max(Fe.c2p(Ue,!0),0),$e=Math.min(Fe.c2p(qe,!0),Te),et=Math.max(ve.c2p(st,!0),0),tt=Math.min(ve.c2p(Xe,!0),Ie),ct={};Ce[0]<Ce[1]?(ct.left=He,ct.right=$e):(ct.left=$e,ct.right=He),Re[0]<Re[1]?(ct.top=et,ct.bottom=tt):(ct.top=tt,ct.bottom=et),ct.middle=(ct.top+ct.bottom)/2,ct.center=(ct.left+ct.right)/2,_e.push([[ct.left,ct.top],[ct.right,ct.top],[ct.right,ct.bottom],[ct.left,ct.bottom]]);var bt=Math.sqrt(Te*Te+Ie*Ie),At=p.LABELDISTANCE*bt/Math.max(1,W.length/p.LABELINCREASE);he.each(function(Ut){var Ct=se.calcTextOpts(Ut.level,De,Se,ae);v.select(this).selectAll("path").each(function(){var dt=x.getVisibleSegment(this,ct,Ct.height/2);if(dt&&!(dt.len<(Ct.width+Ct.height)*p.LABELMIN))for(var at=Math.min(Math.ceil(dt.len/At),p.LABELMAX),Nt=0;Nt<at;Nt++){var rn=se.findBestTextLocation(this,dt,Ct,Ee,ct);if(!rn)break;se.addLabelData(rn,Ct,Ee,_e)}})}),Se.remove(),se.drawLabels(me,Ee,ae,be,de?_e:null)}ue&&!le&&he.remove()}(D,V,w,F,B),function(q,W,ae,G,ee){var te=G.trace,ue="clip"+te.uid,de=ae._fullLayout._clips.selectAll("#"+ue).data(te.connectgaps?[]:[0]);if(de.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),de.exit().remove(),!1===te.connectgaps){var he={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.xaxis,yaxis:W.yaxis,x:G.x,y:G.y,z:u(G),smoothing:0};r([he]),y([he]),d([he],{type:"levels"}),x.ensureSingle(de,"path","").attr("d",(he.prefixBoundary?"M"+ee.join("L")+"Z":"")+g(he,ee))}else ue=null;T.setClipUrl(q,ue,ae)}(D,f,w,F,ie)})},se.createLines=function(w,f,A){var M=A[0].smoothing,k=w.selectAll("g.contourlevel").data(f?A:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),f){var E=k.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(D){return T.smoothopen(D,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=k.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(D){return T.smoothclosed(D,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},se.createLineClip=function(w,f,A,M){var k=f?"clipline"+M:null,E=A._fullLayout._clips.selectAll("#"+k).data(f?[0]:[]);return E.exit().remove(),E.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),T.setClipUrl(w,k,A),E},se.labelFormatter=function(w,f){var A=w._fullLayout,M=f.trace,k=M.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)E.tickformat=k.labelformat,i(E,A);else{var P=b.extractOpts(M);if(P&&P.colorbar&&P.colorbar._axis)E=P.colorbar._axis;else{if("constraint"===k.type){var D=k.value;E.range=Array.isArray(D)?[D[0],D[D.length-1]]:[D,D]}else E.range=[k.start,k.end],E.nticks=(k.end-k.start)/k.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),i(E,A),o.prepTicks(E),E._tmin=null,E._tmax=null}}return function(F){return o.tickText(E,F).text}},se.calcTextOpts=function(w,f,A,M){var k=f(w);A.text(k).call(e.convertToTspans,M);var E=A.node(),P=T.bBox(E,!0);return{text:k,width:P.width,height:P.height,fontSize:+E.style["font-size"].replace("px",""),level:w,dy:(P.top+P.bottom)/2}},se.findBestTextLocation=function(w,f,A,M,k){var E,P,D,F,R,L=A.width;f.isClosed?(E=f.min+(P=f.len/c.INITIALSEARCHPOINTS)/2,D=f.max):(E=f.min+(P=(f.len-L)/(c.INITIALSEARCHPOINTS+1))+L/2,D=f.max-(P+L)/2);for(var I=1/0,B=0;B<c.ITERATIONS;B++){for(var V=E;V<D;V+=P){var Z=x.getTextLocation(w,f.total,V,L),Y=m(Z,A,M,k);Y<I&&(I=Y,R=Z,F=V)}if(I>2*c.MAXCOST)break;B&&(P/=2),D=(E=F-P/2)+1.5*P}if(I<=c.MAXCOST)return R},se.addLabelData=function(w,f,A,M){var k=f.fontSize,E=f.width+k/3,P=Math.max(0,f.height-k/3),D=w.x,F=w.y,R=w.theta,L=Math.sin(R),I=Math.cos(R),B=function(Z,Y){return[D+Z*I-Y*L,F+Z*L+Y*I]},V=[B(-E/2,-P/2),B(-E/2,P/2),B(E/2,P/2),B(E/2,-P/2)];A.push({text:f.text,x:D,y:F,dy:f.dy,theta:R,level:f.level,width:E,height:P}),M.push(V)},se.drawLabels=function(w,f,A,M,k){var E=w.selectAll("text").data(f,function(F){return F.text+","+F.x+","+F.y+","+F.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(F){var R=F.x+Math.sin(F.theta)*F.dy,L=F.y-Math.cos(F.theta)*F.dy;v.select(this).text(F.text).attr({x:R,y:L,transform:"rotate("+180*F.theta/Math.PI+" "+R+" "+L+")"}).call(e.convertToTspans,A)}),k){for(var P="",D=0;D<k.length;D++)P+="M"+k[D].join("L")+"Z";x.ensureSingle(M,"path","").attr("d",P)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib");function T(b,e,o){var i={type:"linear",range:[b,e]};return v.autoTicks(i,(e-b)/(o||15)),i}oe.exports=function(b,e){var o=b.contours;if(b.autocontour){var i=b.zmin,l=b.zmax;(b.zauto||void 0===i)&&(i=x.aggNums(Math.min,null,e)),(b.zauto||void 0===l)&&(l=x.aggNums(Math.max,null,e));var r=T(i,l,b.ncontours);o.size=r.dtick,o.start=v.tickFirst(r),r.range.reverse(),o.end=v.tickFirst(r),o.start===i&&(o.start+=o.size),o.end===l&&(o.end-=o.size),o.start>o.end&&(o.start=o.end=(o.start+o.end)/2),b._input.contours||(b._input.contours={}),x.extendFlat(b._input.contours,{start:o.start,end:o.end,size:o.size}),b._input.autocontour=!0}else if("constraint"!==o.type){var y,h=o.start,s=o.end,d=b._input.contours;h>s&&(o.start=d.start=s,s=o.end=d.end=h,h=o.start),!(o.size>0)&&(y=h===s?1:T(h,s,b.ncontours).dtick,d.size=o.size=y)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../heatmap/style"),b=_("./make_color_map");oe.exports=function(e){var o=v.select(e).selectAll("g.contour");o.style("opacity",function(i){return i[0].trace.opacity}),o.each(function(i){var l=v.select(this),r=i[0].trace,y=r.contours,h=r.line,s=y.size||1,d=y.start,p="constraint"===y.type,c=!p&&"lines"===y.coloring,g=!p&&"fill"===y.coloring,m=c||g?b(r):null;l.selectAll("g.contourlevel").each(function(f){v.select(this).selectAll("path").call(x.lineGroupStyle,h.width,c?m(f.level):h.color,h.dash)});var u=y.labelfont;if(l.selectAll("g.contourlabels text").each(function(f){x.font(v.select(this),{family:u.family,size:u.size,color:u.color||(c?m(f.level):h.color)})}),p)l.selectAll("g.contourfill path").style("fill",r.fillcolor);else if(g){var w;l.selectAll("g.contourfill path").style("fill",function(f){return void 0===w&&(w=f.level),m(f.level+.5*s)}),void 0===w&&(w=d),l.selectAll("g.contourbg path").style("fill",m(w-.5*s))}}),T(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/defaults"),x=_("./label_defaults");oe.exports=function(T,b,e,o,i){var l,r=e("contours.coloring"),y="";"fill"===r&&(l=e("contours.showlines")),!1!==l&&("lines"!==r&&(y=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==r&&(!0!==T.showlegend&&(b.showlegend=!1),b._dfltShowLegend=!1,v(T,b,o,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),x(e,o,y,i)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(_,oe,se){"use strict";var v=_("../heatmap/attributes"),x=_("../contour/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../lib/extend").extendFlat,e=x.contours;oe.exports=b({carpet:{valType:"string",editType:"calc"},z:v.z,a:v.x,a0:v.x0,da:v.dx,b:v.y,b0:v.y0,db:v.dy,text:v.text,hovertext:v.hovertext,transpose:v.transpose,atype:v.xtype,btype:v.ytype,fillcolor:x.fillcolor,autocontour:x.autocontour,ncontours:x.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:x.line.color,width:x.line.width,dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},transforms:void 0},T("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/calc"),x=_("../../lib"),T=_("../heatmap/convert_column_xyz"),b=_("../heatmap/clean_2d_array"),e=_("../heatmap/interp2d"),o=_("../heatmap/find_empties"),i=_("../heatmap/make_bound_array"),l=_("./defaults"),r=_("../carpet/lookup_carpetid"),y=_("../contour/set_contours");oe.exports=function(h,s){var d=s._carpetTrace=r(h,s);if(d&&d.visible&&"legendonly"!==d.visible){if(!s.a||!s.b){var p=h.data[d.index],c=h.data[s.index];c.a||(c.a=p.a),c.b||(c.b=p.b),l(c,s,s._defaultColor,h._fullLayout)}var g=function(m,u){var w,f,A,M,k,E,P,D=u._carpetTrace,F=D.aaxis,R=D.baxis;F._minDtick=0,R._minDtick=0,x.isArray1D(u.z)&&T(u,F,R,"a","b",["z"]),w=u._a=u._a||u.a,M=u._b=u._b||u.b,w=w?F.makeCalcdata(u,"_a"):[],M=M?R.makeCalcdata(u,"_b"):[],f=u.a0||0,A=u.da||1,k=u.b0||0,E=u.db||1,P=u._z=b(u._z||u.z,u.transpose),u._emptypoints=o(P),e(P,u._emptypoints);var L=x.maxRowLength(P),Y={a:i(u,"scaled"===u.xtype?"":w,f,A,L,F),b:i(u,"scaled"===u.ytype?"":M,k,E,P.length,R),z:P};return"levels"===u.contours.type&&"none"!==u.contours.coloring&&v(m,u,{vals:P,containerStr:"",cLetter:"z"}),[Y]}(h,s);return y(s,s._z),g}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("./attributes"),b=_("../contour/constraint_defaults"),e=_("../contour/contours_defaults"),o=_("../contour/style_defaults");oe.exports=function(i,l,r,y){function h(s,d){return v.coerce(i,l,T,s,d)}if(h("carpet"),i.a&&i.b){if(!x(i,l,h,y,"a","b"))return void(l.visible=!1);h("text"),"constraint"===h("contours.type")?b(i,l,h,y,r,{hasHover:!1}):(e(i,l,h,function(s){return v.coerce2(i,l,T,s)}),o(i,l,h,y,{hasHover:!1}))}else l._defaultColor=r,l._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../contour/colorbar"),calc:_("./calc"),plot:_("./plot"),style:_("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../carpet/map_1d_array"),T=_("../carpet/makepath"),b=_("../../components/drawing"),e=_("../../lib"),o=_("../contour/make_crossings"),i=_("../contour/find_all_paths"),l=_("../contour/plot"),r=_("../contour/constants"),y=_("../contour/convert_to_constraints"),h=_("../contour/empty_pathinfo"),s=_("../contour/close_boundaries"),d=_("../carpet/lookup_carpetid"),p=_("../carpet/axis_aligned_line");function c(u,w,f){var A=u.getPointAtLength(w),M=u.getPointAtLength(f),k=M.x-A.x,E=M.y-A.y,P=Math.sqrt(k*k+E*E);return[k/P,E/P]}function g(u){var w=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return[u[0]/w,u[1]/w]}function m(u,w){var f=Math.abs(u[0]*w[0]+u[1]*w[1]);return Math.sqrt(1-f*f)/f}oe.exports=function(u,w,f,A){var M=w.xaxis,k=w.yaxis;e.makeTraceGroups(A,f,"contour").each(function(E){var P=v.select(this),D=E[0],F=D.trace,R=F._carpetTrace=d(u,F),L=u.calcdata[R.index][0];if(R.visible&&"legendonly"!==R.visible){var I=D.a,B=D.b,V=F.contours,Z=h(V,w,D),Y="constraint"===V.type,Q=V._operation,re=Y?"="===Q?"lines":"fill":V.coloring,$=[[I[0],B[B.length-1]],[I[I.length-1],B[B.length-1]],[I[I.length-1],B[0]],[I[0],B[0]]];o(Z),i(Z,1e-8*(I[I.length-1]-I[0]),1e-8*(B[B.length-1]-B[0]));var j,q,W,ae,G=Z;"constraint"===V.type&&(G=y(Z,Q)),function(ue,de){var he,be,me,_e,Ee,De,Se,Fe,ve;for(he=0;he<ue.length;he++){for(Ee=(_e=ue[he]).pedgepaths=[],De=_e.ppaths=[],be=0;be<_e.edgepaths.length;be++){for(ve=_e.edgepaths[be],Se=[],me=0;me<ve.length;me++)Se[me]=de(ve[me]);Ee.push(Se)}for(be=0;be<_e.paths.length;be++){for(ve=_e.paths[be],Fe=[],me=0;me<ve.length;me++)Fe[me]=de(ve[me]);De.push(Fe)}}}(Z,le);var ee=[];for(ae=L.clipsegments.length-1;ae>=0;ae--)q=x([],(j=L.clipsegments[ae]).x,M.c2p),W=x([],j.y,k.c2p),q.reverse(),W.reverse(),ee.push(T(q,W,j.bicubic));var te="M"+ee.join("L")+"Z";(function(ue,de,he,be,me,_e){var Ee,De,Se,Fe,ve=e.ensureSingle(ue,"g","contourbg").selectAll("path").data("fill"!==_e||me?[]:[0]);ve.enter().append("path"),ve.exit().remove();var Te=[];for(Fe=0;Fe<de.length;Fe++)De=x([],(Ee=de[Fe]).x,he.c2p),Se=x([],Ee.y,be.c2p),Te.push(T(De,Se,Ee.bicubic));ve.attr("d","M"+Te.join("L")+"Z").style("stroke","none")})(P,L.clipsegments,M,k,Y,re),function(ue,de,he,be,me,_e,Ee,De,Se,Fe,ve){var Te="fill"===Fe;Te&&s(me,ue.contours);var Ie=e.ensureSingle(de,"g","contourfill").selectAll("path").data(Te?me:[]);Ie.enter().append("path"),Ie.exit().remove(),Ie.each(function(Ce){var Re=(Ce.prefixBoundary?ve:"")+function(Ue,qe,Xe,st,He,$e,et,tt){var ct,bt,At,Ut,Ct,dt,at,Nt="",rn=qe.edgepaths.map(function(ft,mt){return mt}),en=!0,Ge=1e-4*Math.abs(Xe[0][0]-Xe[2][0]),Qe=1e-4*Math.abs(Xe[0][1]-Xe[2][1]);function Rt(ft){return Math.abs(ft[1]-Xe[0][1])<Qe}function gt(ft){return Math.abs(ft[1]-Xe[2][1])<Qe}function Be(ft){return Math.abs(ft[0]-Xe[0][0])<Ge}function Ve(ft){return Math.abs(ft[0]-Xe[2][0])<Ge}function Le(ft,mt){var pt,Ot,Pt,Jt,$t="";for(Rt(ft)&&!Ve(ft)||gt(ft)&&!Be(ft)?(Jt=He.aaxis,Pt=p(He,$e,[ft[0],mt[0]],.5*(ft[1]+mt[1]))):(Jt=He.baxis,Pt=p(He,$e,.5*(ft[0]+mt[0]),[ft[1],mt[1]])),pt=1;pt<Pt.length;pt++)for($t+=Jt.smoothing?"C":"L",Ot=0;Ot<Pt[pt].length;Ot++){var ut=Pt[pt][Ot];$t+=[et.c2p(ut[0]),tt.c2p(ut[1])]+" "}return $t}for(ct=0,bt=null;rn.length;){for(bt&&(Nt+=Le(bt,qe.edgepaths[ct][0])),at=b.smoothopen(qe.edgepaths[ct].map(st),qe.smoothing),Nt+=en?at:at.replace(/^M/,"L"),rn.splice(rn.indexOf(ct),1),bt=qe.edgepaths[ct][qe.edgepaths[ct].length-1],Ct=-1,Ut=0;Ut<4;Ut++){if(!bt){e.log("Missing end?",ct,qe);break}for(Rt(bt)&&!Ve(bt)?At=Xe[1]:Be(bt)?At=Xe[0]:gt(bt)?At=Xe[3]:Ve(bt)&&(At=Xe[2]),dt=0;dt<qe.edgepaths.length;dt++){var Ke=qe.edgepaths[dt][0];Math.abs(bt[0]-At[0])<Ge?Math.abs(bt[0]-Ke[0])<Ge&&(Ke[1]-bt[1])*(At[1]-Ke[1])>=0&&(At=Ke,Ct=dt):Math.abs(bt[1]-At[1])<Qe?Math.abs(bt[1]-Ke[1])<Qe&&(Ke[0]-bt[0])*(At[0]-Ke[0])>=0&&(At=Ke,Ct=dt):e.log("endpt to newendpt is not vert. or horz.",bt,At,Ke)}if(Ct>=0)break;Nt+=Le(bt,At),bt=At}if(Ct===qe.edgepaths.length){e.log("unclosed perimeter path");break}(en=-1===rn.indexOf(ct=Ct))&&(ct=rn[0],Nt+=Le(bt,At)+"Z",bt=null)}for(ct=0;ct<qe.paths.length;ct++)Nt+=b.smoothclosed(qe.paths[ct].map(st),qe.smoothing);return Nt}(0,Ce,_e,Ee,De,Se,he,be);Re?v.select(this).attr("d",Re).style("stroke","none"):v.select(this).remove()})}(F,P,M,k,G,$,le,R,L,re,te),function(ue,de,he,be,me,_e,Ee){var De=e.ensureSingle(ue,"g","contourlines"),Se=!1!==me.showlines,Fe=me.showlabels,ve=Se&&Fe,Te=l.createLines(De,Se||Fe,de),Ie=l.createLineClip(De,ve,he,be.trace.uid),Ce=ue.selectAll("g.contourlabels").data(Fe?[0]:[]);if(Ce.exit().remove(),Ce.enter().append("g").classed("contourlabels",!0),Fe){var qe=_e.xaxis._length,Xe=_e.yaxis._length,st=[[[0,0],[qe,0],[qe,Xe],[0,Xe]]],He=[];e.clearLocationCache();var $e=l.labelFormatter(he,be),et=b.tester.append("text").attr("data-notex",1).call(b.font,me.labelfont),tt={left:0,right:qe,center:qe/2,top:0,bottom:Xe,middle:Xe/2},ct=Math.sqrt(qe*qe+Xe*Xe),bt=r.LABELDISTANCE*ct/Math.max(1,de.length/r.LABELINCREASE);Te.each(function(At){var Ut=l.calcTextOpts(At.level,$e,et,he);v.select(this).selectAll("path").each(function(Ct){var dt=e.getVisibleSegment(this,tt,Ut.height/2);if(dt&&(function(en,Ge,Qe,Rt,gt,Be){for(var Ve,Le=0;Le<Qe.pedgepaths.length;Le++)Ge===Qe.pedgepaths[Le]&&(Ve=Qe.edgepaths[Le]);if(Ve){var je=gt.a[0],Ke=gt.a[gt.a.length-1],ft=gt.b[0],mt=gt.b[gt.b.length-1],Ot=c(en,0,1),Pt=c(en,Rt.total,Rt.total-1),Jt=pt(Ve[0],Ot),$t=Rt.total-pt(Ve[Ve.length-1],Pt);Rt.min<Jt&&(Rt.min=Jt),Rt.max>$t&&(Rt.max=$t),Rt.len=Rt.max-Rt.min}function pt(ut,Dt){var Wt,zt=0;return(Math.abs(ut[0]-je)<.1||Math.abs(ut[0]-Ke)<.1)&&(Wt=g(gt.dxydb_rough(ut[0],ut[1],.1)),zt=Math.max(zt,Be*m(Dt,Wt)/2)),(Math.abs(ut[1]-ft)<.1||Math.abs(ut[1]-mt)<.1)&&(Wt=g(gt.dxyda_rough(ut[0],ut[1],.1)),zt=Math.max(zt,Be*m(Dt,Wt)/2)),zt}}(this,Ct,At,dt,Ee,Ut.height),!(dt.len<(Ut.width+Ut.height)*r.LABELMIN)))for(var at=Math.min(Math.ceil(dt.len/bt),r.LABELMAX),Nt=0;Nt<at;Nt++){var rn=l.findBestTextLocation(this,dt,Ut,He,tt);if(!rn)break;l.addLabelData(rn,Ut,He,st)}})}),et.remove(),l.drawLabels(Ce,He,he,Ie,ve?st:null)}Fe&&!Se&&Te.remove()}(P,Z,u,D,V,w,R),b.setClipUrl(P,R._clipPathId,u)}function le(ue){var de=R.ab2xy(ue[0],ue[1],!0);return[M.c2p(de[0]),k.c2p(de[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../plots/attributes"),b=_("../scattermapbox/attributes"),e=_("../../lib/extend").extendFlat;oe.exports=e({lon:b.lon,lat:b.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:b.text,hovertext:b.hovertext,hoverinfo:e({},T.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:x(),showlegend:e({},T.showlegend,{dflt:!1})},v("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib").isArrayOrTypedArray,T=_("../../constants/numerical").BADNUM,b=_("../../components/colorscale/calc"),e=_("../../lib")._;oe.exports=function(o,i){for(var l=i._length,r=new Array(l),y=i.z,h=x(y)&&y.length,s=0;s<l;s++){var d=r[s]={},p=i.lon[s],c=i.lat[s];if(d.lonlat=v(p)&&v(c)?[+p,+c]:[T,T],h){var g=y[s];d.z=v(g)?g:T}}return b(o,i,{vals:h?y:[0,1],containerStr:"",cLetter:"z"}),l&&(r[0].t={labels:{lat:e(o,"lat:")+" ",lon:e(o,"lon:")+" "}}),r}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../components/color"),b=_("../../components/colorscale"),e=_("../../constants/numerical").BADNUM,o=_("../../lib/geojson_utils").makeBlank;oe.exports=function(i){var l=i[0].trace,r=!0===l.visible&&0!==l._length,y=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:o()};if(!r)return y;var h,s=[],d=l.z,p=l.radius,c=x.isArrayOrTypedArray(d)&&d.length,g=x.isArrayOrTypedArray(p);for(h=0;h<i.length;h++){var m=i[h],u=m.lonlat;if(u[0]!==e){var w={};if(c){var f=m.z;w.z=f!==e?f:0}g&&(w.r=v(p[h])&&p[h]>0?+p[h]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:w})}}var A=b.extractOpts(l),M=A.reversescale?b.flipScale(A.colorscale):A.colorscale,k=M[0][1],E=["interpolate",["linear"],["heatmap-density"],0,T.opacity(k)<1?k:T.addOpacity(k,0)];for(h=1;h<M.length;h++)E.push(M[h][0],M[h][1]);return x.extendFlat(y.heatmap.paint,{"heatmap-weight":c?["interpolate",["linear"],["get","z"],A.min,0,A.max,1]:1/(A.max-A.min),"heatmap-color":E,"heatmap-radius":g?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),y.geojson={type:"FeatureCollection",features:s},y.heatmap.layout.visibility="visible",y}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,i){function l(s,d){return v.coerce(b,e,T,s,d)}var r=l("lon")||[],y=l("lat")||[],h=Math.min(r.length,y.length);h?(e._length=h,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),x(b,e,i,l,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(_,oe,se){"use strict";oe.exports=function(v,x){return v.lon=x.lon,v.lat=x.lat,v.z=x.z,v}},{}],767:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../scattermapbox/hover").hoverPoints,T=_("../scattermapbox/hover").getExtraText;oe.exports=function(b,e,o){var i=x(b,e,o);if(i){var l=i[0],r=l.cd,y=r[0].trace,h=r[l.index];if(delete l.color,"z"in h){var s=l.subplot.mockAxis;l.z=h.z,l.zLabel=v.tickText(s,s.c2l(h.z),"hover").text}return l.extraText=T(y,h,r[0].t.labels),[l]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),formatLabels:_("../scattermapbox/format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover"),eventData:_("./event_data"),getBelow:function(v,x){for(var T=x.getMapLayers(),b=0;b<T.length;b++){var e=T[b],o=e.id;if("symbol"===e.type&&"string"==typeof o&&-1===o.indexOf("plotly-"))return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(_,oe,se){"use strict";var v=_("./convert"),x=_("../../plots/mapbox/constants").traceLayerPrefix;function T(e,o){this.type="densitymapbox",this.subplot=e,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",x+o+"-heatmap"]],this.below=null}var b=T.prototype;b.update=function(e){var o=this.subplot,i=this.layerList,l=v(e),r=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(l.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(l,r),this.below=r);for(var y=0;y<i.length;y++){var h=i[y],d=h[1],p=l[h[0]];o.setOptions(d,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&o.setOptions(d,"setPaintProperty",p.paint)}},b._addLayers=function(e,o){for(var i=this.subplot,l=this.layerList,r=this.sourceId,y=0;y<l.length;y++){var h=l[y],s=h[0],d=e[s];i.addLayer({type:s,id:h[1],source:r,layout:d.layout,paint:d.paint},o)}},b._removeLayers=function(){for(var e=this.subplot.map,o=this.layerList,i=o.length-1;i>=0;i--)e.removeLayer(o[i][1])},b.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},oe.exports=function(e,o){var i=o[0].trace,l=new T(e,i.uid),r=l.sourceId,y=v(o),h=l.below=e.belowLookup["trace-"+i.uid];return e.map.addSource(r,{type:"geojson",data:y.geojson}),l._addLayers(y,h),l}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;v.mergeArray(T.text,x,"tx"),v.mergeArray(T.hovertext,x,"htx");var e=T.marker;if(e){v.mergeArray(e.opacity,x,"mo"),v.mergeArray(e.color,x,"mc");var o=e.line;o&&(v.mergeArray(o.color,x,"mlc"),v.mergeArrayCastPositive(o.width,x,"mlw"))}}},{"../../lib":503}],771:[function(_,oe,se){"use strict";var v,x=_("../bar/attributes"),T=_("../scatter/attributes").line,b=_("../../plots/attributes"),e=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=_("../../plots/template_attributes").hovertemplateAttrs,i=_("../../plots/template_attributes").texttemplateAttrs,l=_("./constants"),r=_("../../lib/extend").extendFlat,y=_("../../components/color");oe.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:x.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),hoverinfo:r({},b.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:x.text,textposition:x.textposition,insidetextanchor:r({},x.insidetextanchor,{dflt:"middle"}),textangle:r({},x.textangle,{dflt:0}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:r({},x.orientation,{}),offset:r({},x.offset,{arrayOk:!1}),width:r({},x.width,{arrayOk:!1}),marker:(v=r({},x.marker),delete v.pattern,v),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},T.color,{dflt:y.defaultLine}),width:r({},T.width,{dflt:0,editType:"plot"}),dash:T.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("./arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../../constants/numerical").BADNUM;function o(i){return i===e?0:i}oe.exports=function(i,l){var r,y,h,s,d,p,c,g,m=v.getFromId(i,l.xaxis||"x"),u=v.getFromId(i,l.yaxis||"y");"h"===l.orientation?(r=m.makeCalcdata(l,"x"),h=u.makeCalcdata(l,"y"),s=x(l,u,"y",h),d=!!l.yperiodalignment,p="y"):(r=u.makeCalcdata(l,"y"),h=m.makeCalcdata(l,"x"),s=x(l,m,"x",h),d=!!l.xperiodalignment,p="x"),y=s.vals;var w,f=Math.min(y.length,r.length),A=new Array(f);for(l._base=[],c=0;c<f;c++){r[c]<0&&(r[c]=e);var M=!1;r[c]!==e&&c+1<f&&r[c+1]!==e&&(M=!0),g=A[c]={p:y[c],s:r[c],cNext:M},l._base[c]=-.5*g.s,d&&(A[c].orig_p=h[c],A[c][p+"End"]=s.ends[c],A[c][p+"Start"]=s.starts[c]),l.ids&&(g.id=String(l.ids[c])),0===c&&(A[0].vTotal=0),A[0].vTotal+=o(g.s),g.begR=o(g.s)/o(A[0].s)}for(c=0;c<f;c++)(g=A[c]).s!==e&&(g.sumR=g.s/A[0].vTotal,g.difR=void 0!==w?g.s/w:1,w=g.s);return T(A,l),b(A,l),A}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(_,oe,se){"use strict";oe.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(_,oe,se){"use strict";var v=_("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(x,T){var b,e,o=x._fullLayout,i=x._fullData,l=x.calcdata,r=T.xaxis,y=T.yaxis,h=[],s=[],d=[];for(e=0;e<i.length;e++){var p=i[e];!0===p.visible&&p.xaxis===r._id&&p.yaxis===y._id&&"funnel"===p.type&&(b=l[e],"h"===p.orientation?d.push(b):s.push(b),h.push(b))}var g={mode:o.funnelmode,norm:o.funnelnorm,gap:o.funnelgap,groupgap:o.funnelgroupgap};for(v(x,r,y,s,g),v(x,y,r,d,g),e=0;e<h.length;e++){b=h[e];for(var m=0;m<b.length;m++)m+1<b.length&&(b[m].nextP0=b[m+1].p0,b[m].nextS0=b[m+1].s0,b[m].nextP1=b[m+1].p1,b[m].nextS1=b[m+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../bar/defaults").handleGroupingDefaults,T=_("../bar/defaults").handleText,b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),o=_("./attributes"),i=_("../../components/color");oe.exports={supplyDefaults:function(l,r,y,h){function s(g,m){return v.coerce(l,r,o,g,m)}if(b(l,r,h,s)){e(l,r,h,s),s("xhoverformat"),s("yhoverformat"),s("orientation",r.y&&!r.x?"v":"h"),s("offset"),s("width");var d=s("text");s("hovertext"),s("hovertemplate");var p=s("textposition");T(l,r,h,s,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===r.textposition||r.texttemplate||s("textinfo",Array.isArray(d)?"text+value":"value");var c=s("marker.color",y);s("marker.line.color",i.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",(m=v.isArrayOrTypedArray(g=c)?"#000":g,i.addOpacity(m,.5*i.opacity(m)))),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash")))}else r.visible=!1;var g,m},crossTraceDefaults:function(l,r){var y,h;function s(p){return v.coerce(h._input,h,o,p)}if("group"===r.funnelmode)for(var d=0;d<l.length;d++)y=(h=l[d])._input,x(y,h,r,s)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(_,oe,se){"use strict";oe.exports=function(v,x){return v.x="xVal"in x?x.xVal:x.x,v.y="yVal"in x?x.yVal:x.y,"percentInitial"in x&&(v.percentInitial=x.percentInitial),"percentPrevious"in x&&(v.percentPrevious=x.percentPrevious),"percentTotal"in x&&(v.percentTotal=x.percentTotal),x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),v}},{}],777:[function(_,oe,se){"use strict";var v=_("../../components/color").opacity,x=_("../bar/hover").hoverOnBars,T=_("../../lib").formatPercent;oe.exports=function(b,e,o,i,l){var f,A,M,k,E,r=x(b,e,o,i,l);if(r){var y=r.cd,h=y[0].trace,d=y[r.index];r[("h"===h.orientation?"x":"y")+"LabelVal"]=d.s,r.percentInitial=d.begR,r.percentInitialLabel=T(d.begR,1),r.percentPrevious=d.difR,r.percentPreviousLabel=T(d.difR,1),r.percentTotal=d.sumR,r.percentTotalLabel=T(d.sumR,1);var p=d.hi||h.hoverinfo,c=[];if(p&&"none"!==p&&"skip"!==p){var g="all"===p,m=p.split("+"),u=function(w){return g||-1!==m.indexOf(w)};u("percent initial")&&c.push(r.percentInitialLabel+" of initial"),u("percent previous")&&c.push(r.percentPreviousLabel+" of previous"),u("percent total")&&c.push(r.percentTotalLabel+" of total")}return r.extraText=c.join("<br>"),r.color=(A=h.marker,k=(f=d).mlc||A.line.color,E=f.mlw||A.line.width,v(M=f.mc||A.color)?M:v(k)&&E?k:void 0),[r]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style").style,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(_,oe,se){"use strict";oe.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e){var o=!1;function i(y,h){return v.coerce(T,b,x,y,h)}for(var l=0;l<e.length;l++){var r=e[l];if(r.visible&&"funnel"===r.type){o=!0;break}}o&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../constants/numerical").BADNUM,e=_("../bar/plot"),o=_("../bar/uniform_text").clearMinTextSize;function i(l,r,y,h){var s=[],d=[],p=h?r:y,c=h?y:r;return s[0]=p.c2p(l.s0,!0),d[0]=c.c2p(l.p0,!0),s[1]=p.c2p(l.s1,!0),d[1]=c.c2p(l.p1,!0),s[2]=p.c2p(l.nextS0,!0),d[2]=c.c2p(l.nextP0,!0),s[3]=p.c2p(l.nextS1,!0),d[3]=c.c2p(l.nextP1,!0),h?[s,d]:[d,s]}oe.exports=function(l,r,y,h){var d,p,m,u,s=l._fullLayout;o("funnel",s),d=l,m=(p=r).xaxis,u=p.yaxis,x.makeTraceGroups(h,y,"trace bars").each(function(w){var f=v.select(this),A=w[0].trace,M=x.ensureSingle(f,"g","regions");if(A.connector&&A.connector.visible){var k="h"===A.orientation,E=M.selectAll("g.region").data(x.identity);E.enter().append("g").classed("region",!0),E.exit().remove();var P=E.size();E.each(function(D,F){if(F===P-1||D.cNext){var R=i(D,m,u,k),L=R[0],I=R[1],B="";L[0]!==b&&I[0]!==b&&L[1]!==b&&I[1]!==b&&L[2]!==b&&I[2]!==b&&L[3]!==b&&I[3]!==b&&(B+=k?"M"+L[0]+","+I[1]+"L"+L[2]+","+I[2]+"H"+L[3]+"L"+L[1]+","+I[1]+"Z":"M"+L[1]+","+I[1]+"L"+L[2]+","+I[3]+"V"+I[2]+"L"+L[1]+","+I[0]+"Z"),""===B&&(B="M0,0Z"),x.ensureSingle(v.select(this),"path").attr("d",B).call(T.setClipUrl,p.layerClipId,d)}})}else M.remove()}),function(d,p,c,g){var m=p.xaxis,u=p.yaxis;x.makeTraceGroups(g,c,"trace bars").each(function(w){var f=v.select(this),A=w[0].trace,M=x.ensureSingle(f,"g","lines");if(A.connector&&A.connector.visible&&A.connector.line.width){var k="h"===A.orientation,E=M.selectAll("g.line").data(x.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var P=E.size();E.each(function(D,F){if(F===P-1||D.cNext){var R=i(D,m,u,k),L=R[0],I=R[1],B="";void 0!==L[3]&&void 0!==I[3]&&(k?(B+="M"+L[0]+","+I[1]+"L"+L[2]+","+I[2],B+="M"+L[1]+","+I[1]+"L"+L[3]+","+I[2]):(B+="M"+L[1]+","+I[1]+"L"+L[2]+","+I[3],B+="M"+L[1]+","+I[0]+"L"+L[2]+","+I[2])),""===B&&(B="M0,0Z"),x.ensureSingle(v.select(this),"path").attr("d",B).call(T.setClipUrl,p.layerClipId,d)}})}else M.remove()})}(l,r,y,h),e.plot(l,r,y,h,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../../constants/interactions").DESELECTDIM,e=_("../bar/style"),o=_("../bar/uniform_text").resizeText,i=e.styleTextPoints;oe.exports={style:function(l,r,y){var h=y||v.select(l).selectAll("g.funnellayer").selectAll("g.trace");o(l,h,"funnel"),h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var d=v.select(this),p=s[0].trace;d.selectAll(".point > path").each(function(c){if(!c.isBlank){var g=p.marker;v.select(this).call(T.fill,c.mc||g.color).call(T.stroke,c.mlc||g.line.color).call(x.dashLine,g.line.dash,c.mlw||g.line.width).style("opacity",p.selectedpoints&&!c.selected?b:1)}}),i(d,p,l),d.selectAll(".regions").each(function(){v.select(this).selectAll("path").style("stroke-width",0).call(T.fill,p.connector.fillcolor)}),d.selectAll(".lines").each(function(){var c=p.connector.line;x.lineGroupStyle(v.select(this).selectAll("path"),c.width,c.color,c.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(_,oe,se){"use strict";var v=_("../pie/attributes"),x=_("../../plots/attributes"),T=_("../../plots/domain").attributes,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/template_attributes").texttemplateAttrs,o=_("../../lib/extend").extendFlat;oe.exports={labels:v.labels,label0:v.label0,dlabel:v.dlabel,values:v.values,marker:{colors:v.marker.colors,line:{color:o({},v.marker.line.color,{dflt:null}),width:o({},v.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:v.text,hovertext:v.hovertext,scalegroup:o({},v.scalegroup,{}),textinfo:o({},v.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},x.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","text","percent"]}),textposition:o({},v.textposition,{values:["inside","none"],dflt:"inside"}),textfont:v.textfont,insidetextfont:v.insidetextfont,title:{text:v.title.text,font:v.title.font,position:o({},v.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:T({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(_,oe,se){"use strict";var v=_("../../plots/plots");se.name="funnelarea",se.plot=function(x,T,b,e){v.plotBasePlot(se.name,x,T,b,e)},se.clean=function(x,T,b,e){v.cleanBasePlot(se.name,x,T,b,e)}},{"../../plots/plots":619}],785:[function(_,oe,se){"use strict";var v=_("../pie/calc");oe.exports={calc:function(x,T){return v.calc(x,T)},crossTraceCalc:function(x){v.crossTraceCalc(x,{type:"funnelarea"})}}},{"../pie/calc":903}],786:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../bar/defaults").handleText,e=_("../pie/defaults").handleLabelsAndValues;oe.exports=function(o,i,l,r){function y(w,f){return v.coerce(o,i,x,w,f)}var h=y("labels"),s=y("values"),d=e(h,s),p=d.len;if(i._hasLabels=d.hasLabels,i._hasValues=d.hasValues,!i._hasLabels&&i._hasValues&&(y("label0"),y("dlabel")),p){i._length=p,y("marker.line.width")&&y("marker.line.color",r.paper_bgcolor),y("marker.colors"),y("scalegroup");var c,g=y("text"),m=y("texttemplate");if(m||(c=y("textinfo",Array.isArray(g)?"text+percent":"percent")),y("hovertext"),y("hovertemplate"),m||c&&"none"!==c){var u=y("textposition");b(o,i,r,y,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}T(i,r,y),y("title.text")&&(y("title.position"),v.coerceFont(y,"title.font",r.font)),y("aspectratio"),y("baseratio")}else i.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:_("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style"),styleOne:_("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(_,oe,se){"use strict";var v=_("../pie/layout_attributes").hiddenlabels;oe.exports={hiddenlabels:v,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,i){return v.coerce(T,b,x,o,i)}e("hiddenlabels"),e("funnelareacolorway",b.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../lib"),b=T.strScale,e=T.strTranslate,o=_("../../lib/svg_text_utils"),i=_("../bar/plot").toMoveInsideBar,l=_("../bar/uniform_text"),r=l.recordMinTextSize,y=l.clearMinTextSize,h=_("../pie/helpers"),s=_("../pie/plot"),d=s.attachFxHandlers,p=s.determineInsideTextFont,c=s.layoutAreas,g=s.prerenderTitles,m=s.positionTitleOutside,u=s.formatSliceLabel;function w(f,A){return"l"+(A[0]-f[0])+","+(A[1]-f[1])}oe.exports=function(f,A){var M=f._fullLayout;y("funnelarea",M),g(A,f),c(A,M._size),T.makeTraceGroups(M._funnelarealayer,A,"trace").each(function(k){var E=v.select(this),P=k[0],D=P.trace;(function(F){if(F.length){var R=F[0],L=R.trace,I=L.aspectratio,B=L.baseratio;B>.999&&(B=.999);var V,J,ie,Z=Math.pow(B,2),Y=R.vTotal,Q=Y,re=Y*Z/(1-Z)/Y,j=[];for(j.push($()),J=F.length-1;J>-1;J--)(ie=F[J]).hidden||(re+=ie.v/Q,j.push($()));var W=1/0,ae=-1/0;for(J=0;J<j.length;J++)V=j[J],W=Math.min(W,V[1]),ae=Math.max(ae,V[1]);for(J=0;J<j.length;J++)j[J][1]-=(ae+W)/2;var ee=R.r,te=(ae-W)/2,le=ee/j[j.length-1][0],ue=ee/te*I;for(R.r=ue*te,J=0;J<j.length;J++)j[J][0]*=le,j[J][1]*=ue;var Ee,De,de=[-(V=j[0])[0],V[1]],he=[V[0],V[1]],be=0;for(J=F.length-1;J>-1;J--)if(!(ie=F[J]).hidden){var me=j[be+=1][0],_e=j[be][1];ie.TL=[-me,_e],ie.TR=[me,_e],ie.BL=de,ie.BR=he,ie.pxmid=[.5*((Ee=ie.TR)[0]+(De=ie.BR)[0]),.5*(Ee[1]+De[1])],de=ie.TL,he=ie.TR}}function $(){var Se,Fe={x:Se=Math.sqrt(re),y:-Se};return[Fe.x,Fe.y]}})(k),E.each(function(){var F=v.select(this).selectAll("g.slice").data(k);F.enter().append("g").classed("slice",!0),F.exit().remove(),F.each(function(L,I){if(L.hidden)v.select(this).selectAll("path,g").remove();else{L.pointNumber=L.i,L.curveNumber=D.index;var B=P.cx,V=P.cy,Z=v.select(this),Y=Z.selectAll("path.surface").data([L]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Z.call(d,f,k);var Q="M"+(B+L.TR[0])+","+(V+L.TR[1])+w(L.TR,L.BR)+w(L.BR,L.BL)+w(L.BL,L.TL)+"Z";Y.attr("d",Q),u(f,L,P);var re=h.castOption(D.textposition,L.pts),$=Z.selectAll("g.slicetext").data(L.text&&"none"!==re?[0]:[]);$.enter().append("g").classed("slicetext",!0),$.exit().remove(),$.each(function(){var J=T.ensureSingle(v.select(this),"text","",function(te){te.attr("data-notex",1)}),ie=T.ensureUniformFontSize(f,p(D,L,M.font));J.text(L.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,ie).call(o.convertToTspans,f);var j,q,W,ae=x.bBox(J.node()),G=Math.min(L.BL[1],L.BR[1])+V,ee=Math.max(L.TL[1],L.TR[1])+V;q=Math.max(L.TL[0],L.BL[0])+B,W=Math.min(L.TR[0],L.BR[0])+B,(j=i(q,W,G,ee,ae,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ie.size,r(D.type,j,M),k[I].transform=j,J.attr("transform",T.getTextTransform(j))})}});var R=v.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var L=T.ensureSingle(v.select(this),"text","",function(V){V.attr("data-notex",1)}),I=D.title.text;D._meta&&(I=T.templateString(I,D._meta)),L.text(I).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,D.title.font).call(o.convertToTspans,f);var B=m(P,M._size);L.attr("transform",e(B.x,B.y)+b(Math.min(1,B.scale))+e(B.tx,B.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../pie/style_one"),T=_("../bar/uniform_text").resizeText;oe.exports=function(b){var e=b._fullLayout._funnelarealayer.selectAll(".trace");T(b,e,"funnelarea"),e.each(function(o){var i=o[0].trace,l=v.select(this);l.style({opacity:i.opacity}),l.selectAll("path.surface").each(function(r){v.select(this).call(x,r,i)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(_,oe,se){"use strict";var v=_("../scatter/attributes"),x=_("../../plots/attributes"),T=_("../../plots/font_attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/template_attributes").texttemplateAttrs,i=_("../../components/colorscale/attributes"),l=_("../../lib/extend").extendFlat;oe.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},v.x,{impliedEdits:{xtype:"array"}}),x0:l({},v.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},v.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},v.y,{impliedEdits:{ytype:"array"}}),y0:l({},v.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},v.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},v.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},v.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},v.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},v.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},v.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},v.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:e(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:T({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:l({},x.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../histogram2d/calc"),o=_("../../components/colorscale/calc"),i=_("./convert_column_xyz"),l=_("./clean_2d_array"),r=_("./interp2d"),y=_("./find_empties"),h=_("./make_bound_array"),s=_("../../constants/numerical").BADNUM;function d(p){for(var c=[],g=p.length,m=0;m<g;m++){var u=p[m];u!==s&&c.push(u)}return c}oe.exports=function(p,c){var g,m,u,w,f,A,M,k,E,P,D,F=T.getFromId(p,c.xaxis||"x"),R=T.getFromId(p,c.yaxis||"y"),L=v.traceIs(c,"contour"),I=v.traceIs(c,"histogram"),B=v.traceIs(c,"gl2d"),V=L?"best":c.zsmooth;if(F._minDtick=0,R._minDtick=0,I)w=(D=e(p,c)).orig_x,g=D.x,m=D.x0,u=D.dx,k=D.orig_y,f=D.y,A=D.y0,M=D.dy,E=D.z;else{var Z=c.z;x.isArray1D(Z)?(i(c,F,R,"x","y",["z"]),g=c._x,f=c._y,Z=c._z):(w=c.x?F.makeCalcdata(c,"x"):[],k=c.y?R.makeCalcdata(c,"y"):[],g=b(c,F,"x",w).vals,f=b(c,R,"y",k).vals,c._x=g,c._y=f),m=c.x0,u=c.dx,A=c.y0,M=c.dy,E=l(Z,c,F,R)}function Y(te){V=c._input.zsmooth=c.zsmooth=!1,x.warn('cannot use zsmooth: "fast": '+te)}if((F.rangebreaks||R.rangebreaks)&&(E=function(te,le,ue){for(var de=[],he=-1,be=0;be<ue.length;be++)if(le[be]!==s){de[++he]=[];for(var me=0;me<ue[be].length;me++)te[me]!==s&&de[he].push(ue[be][me])}return de}(g,f,E),I||(g=d(g),f=d(f),c._x=g,c._y=f)),I||!L&&!c.connectgaps||(c._emptypoints=y(E),r(E,c._emptypoints)),"fast"===V)if("log"===F.type||"log"===R.type)Y("log axis found");else if(!I){if(g.length){var Q=(g[g.length-1]-g[0])/(g.length-1),re=Math.abs(Q/100);for(P=0;P<g.length-1;P++)if(Math.abs(g[P+1]-g[P]-Q)>re){Y("x scale is not linear");break}}if(f.length&&"fast"===V){var $=(f[f.length-1]-f[0])/(f.length-1),J=Math.abs($/100);for(P=0;P<f.length-1;P++)if(Math.abs(f[P+1]-f[P]-$)>J){Y("y scale is not linear");break}}}var ie=x.maxRowLength(E),j="scaled"===c.xtype?"":g,q=h(c,j,m,u,ie,F),W="scaled"===c.ytype?"":f,ae=h(c,W,A,M,E.length,R);B||(c._extremes[F._id]=T.findExtremes(F,q),c._extremes[R._id]=T.findExtremes(R,ae));var G={x:q,y:ae,z:E,text:c._text||c.text,hovertext:c._hovertext||c.hovertext};if(c.xperiodalignment&&w&&(G.orig_x=w),c.yperiodalignment&&k&&(G.orig_y=k),j&&j.length===q.length-1&&(G.xCenter=j),W&&W.length===ae.length-1&&(G.yCenter=W),I&&(G.xRanges=D.xRanges,G.yRanges=D.yRanges,G.pts=D.pts),L||o(p,c,{vals:E,cLetter:"z"}),L&&c.contours&&"heatmap"===c.contours.coloring){var ee={type:"contour"===c.type?"heatmap":"histogram2d",xcalendar:c.xcalendar,ycalendar:c.ycalendar};G.xfill=h(ee,j,m,u,ie,F),G.yfill=h(ee,W,A,M,E.length,R)}return[G]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM;oe.exports=function(b,e,o,i){var l,r,y,h,s,d;function p(f){if(v(f))return+f}if(e&&e.transpose){for(l=0,s=0;s<b.length;s++)l=Math.max(l,b[s].length);if(0===l)return!1;y=function(f){return f.length},h=function(f,A,M){return(f[M]||[])[A]}}else l=b.length,y=function(f,A){return f[A].length},h=function(f,A,M){return(f[A]||[])[M]};function g(f){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&f&&"category"===f.type&&e["_"+f._id.charAt(0)].length){var A=f._id.charAt(0),M={},k=e["_"+A+"CategoryMap"]||e[A];for(s=0;s<k.length;s++)M[k[s]]=s;return function(E){var P=M[f._categories[E]];return P+1?P:T}}return x.identity}var m=g(o),u=g(i);i&&"category"===i.type&&(l=i._categories.length);var f,A,M,w=new Array(l);for(s=0;s<l;s++)for(r=o&&"category"===o.type?o._categories.length:y(b,s),w[s]=new Array(r),d=0;d<r;d++)w[s][d]=p((f=b,A=u(s),M=m(d),A===T||M===T?T:h(f,A,M)));return w}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(_,oe,se){"use strict";oe.exports={min:"zmin",max:"zmax"}},{}],796:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/cartesian/align_period");oe.exports=function(b,e,o,i,l,r){var y=b._length,h=e.makeCalcdata(b,i),s=o.makeCalcdata(b,l);h=T(b,e,i,h).vals,s=T(b,o,l,s).vals;var d,p,c,g,m=b.text,u=void 0!==m&&v.isArray1D(m),w=b.hovertext,f=void 0!==w&&v.isArray1D(w),A=v.distinctVals(h),M=A.vals,k=v.distinctVals(s),E=k.vals,P=[],D=E.length,F=M.length;for(d=0;d<r.length;d++)P[d]=v.init2dArray(D,F);u&&(c=v.init2dArray(D,F)),f&&(g=v.init2dArray(D,F));var R=v.init2dArray(D,F);for(d=0;d<y;d++)if(h[d]!==x&&s[d]!==x){var L=v.findBin(h[d]+A.minDiff/2,M),I=v.findBin(s[d]+k.minDiff/2,E);for(p=0;p<r.length;p++)P[p][I][L]=b[r[p]][d],R[I][L]=d;u&&(c[I][L]=m[d]),f&&(g[I][L]=w[d])}for(b["_"+i]=M,b["_"+l]=E,p=0;p<r.length;p++)b["_"+r[p]]=P[p];u&&(b._text=c),f&&(b._hovertext=g),e&&"category"===e.type&&(b["_"+i+"CategoryMap"]=M.map(function(V){return e._categories[V]})),o&&"category"===o.type&&(b["_"+l+"CategoryMap"]=E.map(function(V){return o._categories[V]})),b._after2before=R}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./xyz_defaults"),T=_("./label_defaults"),b=_("../scatter/period_defaults"),e=_("./style_defaults"),o=_("../../components/colorscale/defaults"),i=_("./attributes");oe.exports=function(l,r,y,h){function s(d,p){return v.coerce(l,r,i,d,p)}x(l,r,s,h)?(b(l,r,h,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),T(s,h),e(l,r,s,h),s("hoverongaps"),s("connectgaps",v.isArray1D(r.z)&&!1!==r.zsmooth),o(l,r,h,s,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(_,oe,se){"use strict";var v=_("../../lib").maxRowLength;oe.exports=function(x){var T,b,e,o,i,l,r,y,h=[],s={},d=[],p=x[0],c=[],g=[0,0,0],m=v(x);for(b=0;b<x.length;b++)for(T=c,c=p,p=x[b+1]||[],e=0;e<m;e++)void 0===c[e]&&((l=(void 0!==c[e-1]?1:0)+(void 0!==c[e+1]?1:0)+(void 0!==T[e]?1:0)+(void 0!==p[e]?1:0))?(0===b&&l++,0===e&&l++,b===x.length-1&&l++,e===c.length-1&&l++,l<4&&(s[[b,e]]=[b,e,l]),h.push([b,e,l])):d.push([b,e]));for(;d.length;){for(r={},y=!1,i=d.length-1;i>=0;i--)(l=((s[[(b=(o=d[i])[0])-1,e=o[1]]]||g)[2]+(s[[b+1,e]]||g)[2]+(s[[b,e-1]]||g)[2]+(s[[b,e+1]]||g)[2])/20)&&(r[o]=[b,e,l],d.splice(i,1),y=!0);if(!y)throw"findEmpties iterated with no new neighbors";for(o in r)s[o]=r[o],h.push(r[o])}return h.sort(function(u,w){return w[2]-u[2]})}},{"../../lib":503}],799:[function(_,oe,se){"use strict";var v=_("../../components/fx"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../components/colorscale").extractOpts;oe.exports=function(e,o,i,l,r){r||(r={});var y,h,s,d,p=r.isContour,c=e.cd[0],g=c.trace,m=e.xa,u=e.ya,w=c.x,f=c.y,A=c.z,M=c.xCenter,k=c.yCenter,E=c.zmask,P=g.zhoverformat,D=w,F=f;if(!1!==e.index){try{s=Math.round(e.index[1]),d=Math.round(e.index[0])}catch(j){return void x.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(s<0||s>=A[0].length||d<0||d>A.length)return}else{if(v.inbox(o-w[0],o-w[w.length-1],0)>0||v.inbox(i-f[0],i-f[f.length-1],0)>0)return;if(p){var R;for(D=[2*w[0]-w[1]],R=1;R<w.length;R++)D.push((w[R]+w[R-1])/2);for(D.push([2*w[w.length-1]-w[w.length-2]]),F=[2*f[0]-f[1]],R=1;R<f.length;R++)F.push((f[R]+f[R-1])/2);F.push([2*f[f.length-1]-f[f.length-2]])}s=Math.max(0,Math.min(D.length-2,x.findBin(o,D))),d=Math.max(0,Math.min(F.length-2,x.findBin(i,F)))}var L,I,B=m.c2p(w[s]),V=m.c2p(w[s+1]),Z=u.c2p(f[d]),Y=u.c2p(f[d+1]);p?(V=B,y=(L=c.orig_x||w)[s],Y=Z,h=(I=c.orig_y||f)[d]):(L=c.orig_x||M||w,I=c.orig_y||k||f,y=M?L[s]:(L[s]+L[s+1])/2,h=k?I[d]:(I[d]+I[d+1])/2,m&&"category"===m.type&&(y=w[s]),u&&"category"===u.type&&(h=f[d]),g.zsmooth&&(B=V=m.c2p(y),Z=Y=u.c2p(h)));var Q=A[d][s];if(E&&!E[d][s]&&(Q=void 0),void 0!==Q||g.hoverongaps){var re;Array.isArray(c.hovertext)&&Array.isArray(c.hovertext[d])?re=c.hovertext[d][s]:Array.isArray(c.text)&&Array.isArray(c.text[d])&&(re=c.text[d][s]);var $=b(g),ie=T.tickText({type:"linear",range:[$.min,$.max],hoverformat:P,_separators:m._separators,_numFormat:m._numFormat},Q,"hover").text;return[x.extendFlat(e,{index:g._after2before?g._after2before[d][s]:[d,s],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:B,x1:V,y0:Z,y1:Y,xLabelVal:y,yLabelVal:h,zLabelVal:Q,zLabel:ie,text:re})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:_("./colorbar"),style:_("./style"),hoverPoints:_("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(_,oe,se){"use strict";var v=_("../../lib"),x=[[-1,0],[1,0],[0,-1],[0,1]];function T(e){return.5-.25*Math.min(1,.5*e)}function b(e,o,i){var l,r,y,h,s,d,p,c,g,m,u,w,f,A=0;for(h=0;h<o.length;h++){for(u=e[r=(l=o[h])[0]][y=l[1]],m=0,g=0,s=0;s<4;s++)(p=e[r+(d=x[s])[0]])&&void 0!==(c=p[y+d[1]])&&(0===m?w=f=c:(w=Math.min(w,c),f=Math.max(f,c)),g++,m+=c);if(0===g)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][y]=m/g,void 0===u?g<4&&(A=1):(e[r][y]=(1+i)*e[r][y]-i*u,f>w&&(A=Math.max(A,Math.abs(e[r][y]-u)/(f-w))))}return A}oe.exports=function(e,o){var i,l=1;for(b(e,o),i=0;i<o.length&&!(o[i][2]<4);i++);for(o=o.slice(i),i=0;i<100&&l>.01;i++)l=b(e,o,T(l));return l>.01&&v.log("interp2d didn't converge quickly",l),e}},{"../../lib":503}],802:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){x("texttemplate");var b=v.extendFlat({},T.font,{color:"auto",size:"auto"});v.coerceFont(x,"textfont",b)}},{"../../lib":503}],803:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib").isArrayOrTypedArray;oe.exports=function(T,b,e,o,i,l){var r,y,h,s=[],d=v.traceIs(T,"contour"),p=v.traceIs(T,"histogram"),c=v.traceIs(T,"gl2d");if(x(b)&&b.length>1&&!p&&"category"!==l.type){var g=b.length;if(!(g<=i))return b.slice(0,d?i:i+1);if(d||c)s=b.slice(0,i);else if(1===i)s=[b[0]-.5,b[0]+.5];else{for(s=[1.5*b[0]-.5*b[1]],h=1;h<g;h++)s.push(.5*(b[h-1]+b[h]));s.push(1.5*b[g-1]-.5*b[g-2])}if(g<i){var m=s[s.length-1],u=m-s[s.length-2];for(h=g;h<i;h++)s.push(m+=u)}}else{var w=T[l._id.charAt(0)+"calendar"];for(r=p?l.r2c(e,0,w):x(b)&&1===b.length?b[0]:void 0===e?0:("log"===l.type?l.d2c:l.r2c)(e,0,w),y=o||1,h=d||c?0:-.5;h<i;h++)s.push(r+y*h)}return s}},{"../../lib":503,"../../registry":638}],804:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../components/drawing"),e=_("../../plots/cartesian/axes"),o=_("../../lib"),i=_("../../lib/svg_text_utils"),l=_("../scatter/format_labels"),r=_("../../components/color"),y=_("../../components/colorscale").extractOpts,h=_("../../components/colorscale").makeColorScaleFuncFromTrace,s=_("../../constants/xmlns_namespaces"),d=_("../../constants/alignment").LINE_SPACING;function p(w){return w.selectAll("g.heatmap-label")}function c(w){p(w).remove()}function g(w,f){var A=f.length-2,M=o.constrain(o.findBin(w,f),0,A),k=f[M],P=o.constrain(M+(w-k)/(f[M+1]-k)-.5,0,A),D=Math.round(P),F=Math.abs(P-D);return P&&P!==A&&F?{bin0:D,frac:F,bin1:Math.round(D+F/(P-D))}:{bin0:D,bin1:D,frac:0}}function m(w,f){var A=f.length-1,M=o.constrain(o.findBin(w,f),0,A),k=f[M],E=(w-k)/(f[M+1]-k)||0;return E<=0?{bin0:M,bin1:M,frac:0}:E<.5?{bin0:M,bin1:M+1,frac:E}:{bin0:M+1,bin1:M,frac:1-E}}function u(w,f,A){w[f]=A[0],w[f+1]=A[1],w[f+2]=A[2],w[f+3]=Math.round(255*A[3])}oe.exports=function(w,f,A,M){var k=f.xaxis,E=f.yaxis;o.makeTraceGroups(M,A,"hm").each(function(P){var D,F,R,L,I,B,V,Z,Y=v.select(this),Q=P[0],re=Q.trace,$=re.xgap||0,J=re.ygap||0,ie=Q.z,j=Q.x,q=Q.y,W=Q.xCenter,ae=Q.yCenter,G=T.traceIs(re,"contour"),ee=G?"best":re.zsmooth,te=ie.length,le=o.maxRowLength(ie),ue=!1,de=!1;for(B=0;void 0===D&&B<j.length-1;)D=k.c2p(j[B]),B++;for(B=j.length-1;void 0===F&&B>0;)F=k.c2p(j[B]),B--;for(F<D&&(R=F,F=D,D=R,ue=!0),B=0;void 0===L&&B<q.length-1;)L=E.c2p(q[B]),B++;for(B=q.length-1;void 0===I&&B>0;)I=E.c2p(q[B]),B--;if(I<L&&(R=L,L=I,I=R,de=!0),G&&(W=j,ae=q,j=Q.xfill,q=Q.yfill),"fast"!==ee){var he="best"===ee?0:.5;D=Math.max(-he*k._length,D),F=Math.min((1+he)*k._length,F),L=Math.max(-he*E._length,L),I=Math.min((1+he)*E._length,I)}var be,me,_e=Math.round(F-D),Ee=Math.round(I-L);if(_e<=0||Ee<=0)return Y.selectAll("image").data([]).exit().remove(),void c(Y);"fast"===ee?(be=le,me=te):(be=_e,me=Ee);var De=document.createElement("canvas");De.width=be,De.height=me;var Se,Fe,ve=De.getContext("2d"),Te=h(re,{noNumericCheck:!0,returnArray:!0});"fast"===ee?(Se=ue?function(lr){return le-1-lr}:o.identity,Fe=de?function(lr){return te-1-lr}:o.identity):(Se=function(lr){return o.constrain(Math.round(k.c2p(j[lr])-D),0,_e)},Fe=function(lr){return o.constrain(Math.round(E.c2p(q[lr])-L),0,Ee)});var Ie,Ce,Re,Ue,qe=Fe(0),Xe=[qe,qe],st=ue?0:1,He=de?0:1,$e=0,et=0,tt=0,ct=0;function bt(lr,Hn){if(void 0!==lr){var Sr=Te(lr);return Sr[0]=Math.round(Sr[0]),Sr[1]=Math.round(Sr[1]),Sr[2]=Math.round(Sr[2]),$e+=Hn,et+=Sr[0]*Hn,tt+=Sr[1]*Hn,ct+=Sr[2]*Hn,Sr}return[0,0,0,0]}function At(lr,Hn,Sr,ti){var Fn=lr[Sr.bin0];if(void 0===Fn)return bt(void 0,1);var xr=lr[Sr.bin1],Kn=Hn[Sr.bin0],Qr=Hn[Sr.bin1];return bt(Fn+Sr.frac*(xr-Fn||0)+ti.frac*((Kn-Fn||0)+Sr.frac*(void 0===xr?void 0===Qr?0:void 0===Kn?2*(Qr-Fn):2*(2*Qr-Kn-Fn)/3:void 0===Qr?void 0===Kn?0:2*(2*Fn-xr-Kn)/3:void 0===Kn?2*(2*Qr-xr-Fn)/3:Qr+Fn-xr-Kn)))}if(ee){var Ut,Ct=0;try{Ut=new Uint8Array(_e*Ee*4)}catch(lr){Ut=new Array(_e*Ee*4)}if("best"===ee){var dt,at,Nt,rn=W||j,en=ae||q,Ge=new Array(rn.length),Qe=new Array(en.length),Rt=new Array(_e),gt=W?m:g,Be=ae?m:g;for(B=0;B<rn.length;B++)Ge[B]=Math.round(k.c2p(rn[B])-D);for(B=0;B<en.length;B++)Qe[B]=Math.round(E.c2p(en[B])-L);for(B=0;B<_e;B++)Rt[B]=gt(B,Ge);for(V=0;V<Ee;V++)for(at=ie[(dt=Be(V,Qe)).bin0],Nt=ie[dt.bin1],B=0;B<_e;B++,Ct+=4)u(Ut,Ct,Ue=At(at,Nt,Rt[B],dt))}else for(V=0;V<te;V++)for(Re=ie[V],Xe=Fe(V),B=0;B<_e;B++)Ue=bt(Re[B],1),u(Ut,Ct=4*(Xe*_e+Se(B)),Ue);var Ve=ve.createImageData(_e,Ee);try{Ve.data.set(Ut)}catch(lr){var Le=Ve.data,je=Le.length;for(V=0;V<je;V++)Le[V]=Ut[V]}ve.putImageData(Ve,0,0)}else{var Ke=Math.floor($/2),ft=Math.floor(J/2);for(V=0;V<te;V++)if(Re=ie[V],Xe.reverse(),Xe[He]=Fe(V+1),Xe[0]!==Xe[1]&&void 0!==Xe[0]&&void 0!==Xe[1])for(Ie=[Ce=Se(0),Ce],B=0;B<le;B++)Ie.reverse(),Ie[st]=Se(B+1),Ie[0]!==Ie[1]&&void 0!==Ie[0]&&void 0!==Ie[1]&&(Ue=bt(Re[B],(Ie[1]-Ie[0])*(Xe[1]-Xe[0])),ve.fillStyle="rgba("+Ue.join(",")+")",ve.fillRect(Ie[0]+Ke,Xe[0]+ft,Ie[1]-Ie[0]-$,Xe[1]-Xe[0]-J))}et=Math.round(et/$e),tt=Math.round(tt/$e),ct=Math.round(ct/$e);var mt=x("rgb("+et+","+tt+","+ct+")");w._hmpixcount=(w._hmpixcount||0)+$e,w._hmlumcount=(w._hmlumcount||0)+$e*mt.getLuminance();var pt=Y.selectAll("image").data(P);pt.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),pt.attr({height:Ee,width:_e,x:D,y:L,"xlink:href":De.toDataURL("image/png")}),c(Y);var Ot=re.texttemplate;if(Ot){var Pt=y(re),Jt={type:"linear",range:[Pt.min,Pt.max],_separators:k._separators,_numFormat:k._numFormat},$t="histogram2dcontour"===re.type,ut="contour"===re.type,Dt=ut?te-1:te,Wt=ut?1:0,zt=ut?le-1:le,Ht=[];for(B=ut?1:0;B<Dt;B++){var Ne;if(ut)Ne=Q.y[B];else if($t){if(0===B||B===te-1)continue;Ne=Q.y[B]}else if(Q.yCenter)Ne=Q.yCenter[B];else{if(B+1===te&&void 0===Q.y[B+1])continue;Ne=(Q.y[B]+Q.y[B+1])/2}var ot=Math.round(E.c2p(Ne));if(!(0>ot||ot>E._length))for(V=Wt;V<zt;V++){var yt;if(ut)yt=Q.x[V];else if($t){if(0===V||V===le-1)continue;yt=Q.x[V]}else if(Q.xCenter)yt=Q.xCenter[V];else{if(V+1===le&&void 0===Q.x[V+1])continue;yt=(Q.x[V]+Q.x[V+1])/2}var It=Math.round(k.c2p(yt));if(!(0>It||It>k._length)){var Vt=l({x:yt,y:Ne},re,w._fullLayout);Vt.x=yt,Vt.y=Ne;var ln=Q.z[B][V];void 0===ln?(Vt.z="",Vt.zLabel=""):(Vt.z=ln,Vt.zLabel=e.tickText(Jt,ln,"hover").text);var un=Q.text&&Q.text[B]&&Q.text[B][V];void 0!==un&&!1!==un||(un=""),Vt.text=un;var an=o.texttemplateString(Ot,Vt,w._fullLayout._d3locale,Vt,re._meta||{});if(an){var wn=an.split("<br>"),Zn=wn.length,An=0;for(Z=0;Z<Zn;Z++)An=Math.max(An,wn[Z].length);Ht.push({l:Zn,c:An,t:an,x:It,y:ot,z:ln})}}}}var hn=re.textfont,pn=hn.family,xn=hn.size,En=w._fullLayout.font.size;if(!xn||"auto"===xn){var In=1/0,Yn=1/0,nr=0,sr=0;for(Z=0;Z<Ht.length;Z++){var Ar=Ht[Z];if(nr=Math.max(nr,Ar.l),sr=Math.max(sr,Ar.c),Z<Ht.length-1){var yr=Ht[Z+1],Pr=Math.abs(yr.x-Ar.x),Wr=Math.abs(yr.y-Ar.y);Pr&&(In=Math.min(In,Pr)),Wr&&(Yn=Math.min(Yn,Wr))}}isFinite(In)&&isFinite(Yn)?(In-=$,Yn-=J,In/=sr,Yn/=nr,In/=d/2,Yn/=d,xn=Math.min(Math.floor(In),Math.floor(Yn),En)):xn=En}if(xn<=0||!isFinite(xn))return;p(Y).data(Ht).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(lr){var ti,Hn=v.select(this),Sr=hn.color;Sr&&"auto"!==Sr||(Sr=r.contrast("rgba("+Te(lr.z).join()+")")),Hn.attr("data-notex",1).call(i.positionText,(ti=lr,ti.x),function(ti){return ti.y-xn*(ti.l*d/2-1)}(lr)).call(b.font,pn,xn,Sr).text(lr.t).call(i.convertToTspans,w)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(_,oe,se){"use strict";var v=_("@plotly/d3");oe.exports=function(x){v.select(x).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],806:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){!1===T("zsmooth")&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],807:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../registry");function b(e,o){var i=o(e);return"scaled"===(i?o(e+"type","array"):"scaled")&&(o(e+"0"),o("d"+e)),i}oe.exports=function(e,o,i,l,r,y){var h,s,d=i("z");if(r=r||"x",y=y||"y",void 0===d||!d.length)return 0;if(x.isArray1D(e.z)){h=i(r),s=i(y);var p=x.minRowLength(h),c=x.minRowLength(s);if(0===p||0===c)return 0;o._length=Math.min(p,c,d.length)}else{if(h=b(r,i),s=b(y,i),!function(g){for(var m,u=!0,w=!1,f=!1,A=0;A<g.length;A++){if(!x.isArrayOrTypedArray(m=g[A])){u=!1;break}m.length>0&&(w=!0);for(var M=0;M<m.length;M++)if(v(m[M])){f=!0;break}}return u&&w&&f}(d))return 0;i("transpose"),o._length=null}return"heatmapgl"===e.type||T.getComponentMethod("calendars","handleTraceDefaults")(e,o,[r,y],l),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(_,oe,se){"use strict";for(var v=_("../heatmap/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},i=0;i<e.length;i++){var l=e[i];o[l]=v[l]}o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},T(o,x("",{cLetter:"z",autoColorDflt:!1})),oe.exports=b(o,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_heatmap2d,x=_("../../plots/cartesian/axes"),T=_("../../lib/str2rgbarray");function b(o,i){this.scene=o,this.uid=i,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=v(o.glplot,this.options),this.heatmap._trace=this}var e=b.prototype;e.handlePick=function(o){var i=this.options,l=i.shape,r=o.pointId,y=r%l[0],h=Math.floor(r/l[0]);return{trace:this,dataCoord:o.dataCoord,traceCoord:[i.x[y],i.y[h],i.z[r]],textLabel:this.textLabels[r],name:this.name,pointIndex:[h,y],hoverinfo:this.hoverinfo}},e.update=function(o,i){var l=i[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var r=l.z;this.options.z=[].concat.apply([],r),this.options.shape=[r[0].length,r.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=o.zsmooth;var s=function(m){for(var u=m.colorscale,w=m.zmin,f=m.zmax,A=u.length,M=new Array(A),k=new Array(4*A),E=0;E<A;E++){var P=u[E],D=T(P[1]);M[E]=w+P[0]*(f-w);for(var F=0;F<4;F++)k[4*E+F]=D[F]}return{colorLevels:M,colorValues:k}}(o);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var d,p,c=this.scene.xaxis,g=this.scene.yaxis;!1===o.zsmooth&&(d={ppad:l.x[1]-l.x[0]},p={ppad:l.y[1]-l.y[0]}),o._extremes[c._id]=x.findExtremes(c,l.x,d),o._extremes[g._id]=x.findExtremes(g,l.y,p)},e.dispose=function(){this.heatmap.dispose()},oe.exports=function(o,i,l){var r=new b(o,i.uid);return r.update(i,l),r}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("../../components/colorscale/defaults"),b=_("./attributes");oe.exports=function(e,o,i,l){function r(y,h){return v.coerce(e,o,b,y,h)}x(e,o,r,l)?(r("text"),r("zsmooth"),T(e,o,l,r,{prefix:"",cLetter:"z"})):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(_,oe,se){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("../heatmap/calc"),plot:_("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:_("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(_,oe,se){"use strict";var v=_("../bar/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../plots/font_attributes"),o=_("./bin_attributes"),i=_("./constants"),l=_("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:x("x"),yhoverformat:x("y"),text:l({},v.text,{}),hovertext:l({},v.hovertext,{}),orientation:v.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({},{keys:i.eventDataKeys}),texttemplate:b({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},v.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:v.insidetextanchor,textangle:v.textangle,cliponaxis:v.cliponaxis,constraintext:v.constraintext,marker:v.marker,offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:v.selected,unselected:v.unselected,_deprecated:{bardir:v._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(_,oe,se){"use strict";oe.exports=function(v,x){for(var T=v.length,b=0,e=0;e<T;e++)x[e]?(v[e]/=x[e],b+=v[e]):v[e]=null;return b}},{}],814:[function(_,oe,se){"use strict";oe.exports=function(v,x){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(_,oe,se){"use strict";var v=_("fast-isnumeric");oe.exports={count:function(x,T,b){return b[x]++,1},sum:function(x,T,b,e){var o=e[T];return v(o)?(o=Number(o),b[x]+=o,o):0},avg:function(x,T,b,e,o){var i=e[T];return v(i)&&(i=Number(i),b[x]+=i,o[x]++),0},min:function(x,T,b,e){var o=e[T];if(v(o)){if(o=Number(o),!v(b[x]))return b[x]=o,o;if(b[x]>o){var i=o-b[x];return b[x]=o,i}}return 0},max:function(x,T,b,e){var o=e[T];if(v(o)){if(o=Number(o),!v(b[x]))return b[x]=o,o;if(b[x]<o){var i=o-b[x];return b[x]=o,i}}return 0}}},{"fast-isnumeric":190}],816:[function(_,oe,se){"use strict";var v=_("../../constants/numerical"),x=v.ONEAVGYEAR,T=v.ONEAVGMONTH,b=v.ONEDAY,e=v.ONEHOUR,o=v.ONEMIN,i=v.ONESEC,l=_("../../plots/cartesian/axes").tickIncrement;function r(d,p,c,g){if(d*p<=0)return 1/0;for(var m=Math.abs(p-d),u="date"===c.type,w=y(m,u),f=0;f<10;f++){var A=y(80*w,u);if(w===A||!h(A,d,p,u,c,g))break;w=A}return w}function y(d,p){return p&&d>i?d>b?d>1.1*x?x:d>1.1*T?T:b:d>e?e:d>o?o:i:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function h(d,p,c,g,m,u){if(g&&d>b){var w=s(p,m,u),f=s(c,m,u),A=d===x?0:1;return w[A]!==f[A]}return Math.floor(c/d)-Math.floor(p/d)>.1}function s(d,p,c){var g=p.c2d(d,x,c).split("-");return""===g[0]&&(g.unshift(),g[0]="-"+g[0]),g}oe.exports=function(d,p,c,g,m){var u,w,f=-1.1*p,A=-.1*p,M=d-A,k=c[0],E=c[1],P=Math.min(r(k+A,k+M,g,m),r(E+A,E+M,g,m)),D=Math.min(r(k+f,k+A,g,m),r(E+f,E+A,g,m));if(P>D&&D<Math.abs(E-k)/4e3?(u=P,w=!1):(u=Math.min(P,D),w=!0),"date"===g.type&&u>b){var F=u===x?1:6,R=u===x?"M12":"M1";return function(L,I){var B=g.c2d(L,x,m),V=B.indexOf("-",F);V>0&&(B=B.substr(0,V));var Z=g.d2c(B,0,m);if(Z<L){var Y=l(Z,R,!1,m);(Z+Y)/2<L+d&&(Z=Y)}return I&&w?l(Z,R,!0,m):Z}}return function(L,I){var B=u*Math.round(L/u);return B+u/10<L&&B+.9*u<L+d&&(B+=u),I&&w&&(B-=u),B}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../registry"),b=_("../../plots/cartesian/axes"),e=_("../bar/arrays_to_calcdata"),o=_("./bin_functions"),i=_("./norm_functions"),l=_("./average"),r=_("./bin_label_vals");function y(h,s,d,p,c){var g,m,u,w,f,A,M,k=p+"bins",E=h._fullLayout,D=E._histogramBinOpts[s["_"+p+"bingroup"]],F="overlay"===E.barmode,R=function(me){return d.r2c(me,0,w)},L=function(me){return d.c2r(me,0,w)},I="date"===d.type?function(me){return me||0===me?x.cleanDate(me,null,w):null}:function(me){return v(me)?Number(me):null};function B(me,_e,Ee){_e[me+"Found"]?(_e[me]=I(_e[me]),null===_e[me]&&(_e[me]=Ee[me])):(A[me]=_e[me]=Ee[me],x.nestedProperty(m[0],k+"."+me).set(Ee[me]))}if(s["_"+p+"autoBinFinished"])delete s["_"+p+"autoBinFinished"];else{m=D.traces;var V=[],Z=!0,Y=!1,Q=!1;for(g=0;g<m.length;g++)if((u=m[g]).visible){var re=D.dirs[g];f=u["_"+re+"pos0"]=d.makeCalcdata(u,re),V=x.concat(V,f),delete u["_"+p+"autoBinFinished"],!0===s.visible&&(Z?Z=!1:(delete u._autoBin,u["_"+p+"autoBinFinished"]=1),T.traceIs(u,"2dMap")&&(Y=!0),"histogram2dcontour"===u.type&&(Q=!0))}var $=b.autoBin(V,d,D.nbins,Y,w=m[0][p+"calendar"],D.sizeFound&&D.size),J=m[0]._autoBin={};if(A=J[D.dirs[0]]={},Q&&(D.size||($.start=L(b.tickIncrement(R($.start),$.size,!0,w))),void 0===D.end&&($.end=L(b.tickIncrement(R($.end),$.size,!1,w)))),F&&!T.traceIs(s,"2dMap")&&0===$._dataSpan&&"category"!==d.type&&"multicategory"!==d.type){if(c)return[$,f,!0];$=function(me,_e,Ee,De,Se){var Fe,ve,Te,Ie=me._fullLayout,Ce=function(At,Ut){for(var Ct=Ut.xaxis,dt=Ut.yaxis,at=Ut.orientation,Nt=[],rn=At._fullData,en=0;en<rn.length;en++){var Ge=rn[en];"histogram"===Ge.type&&!0===Ge.visible&&Ge.orientation===at&&Ge.xaxis===Ct&&Ge.yaxis===dt&&Nt.push(Ge)}return Nt}(me,_e),Re=!1,Ue=1/0,qe=[_e];for(Fe=0;Fe<Ce.length;Fe++)if((ve=Ce[Fe])===_e)Re=!0;else if(Re){var Xe=y(me,ve,Ee,De,!0),st=Xe[0],He=Xe[2];ve["_"+De+"autoBinFinished"]=1,ve["_"+De+"pos0"]=Xe[1],He?qe.push(ve):Ue=Math.min(Ue,st.size)}else Te=Ie._histogramBinOpts[ve["_"+De+"bingroup"]],Ue=Math.min(Ue,Te.size||ve[Se].size);var $e=new Array(qe.length);for(Fe=0;Fe<qe.length;Fe++)for(var et=qe[Fe]["_"+De+"pos0"],tt=0;tt<et.length;tt++)if(void 0!==et[tt]){$e[Fe]=et[tt];break}for(isFinite(Ue)||(Ue=x.distinctVals($e).minDiff),Fe=0;Fe<qe.length;Fe++){var ct=(ve=qe[Fe])[De+"calendar"],bt={start:Ee.c2r($e[Fe]-Ue/2,0,ct),end:Ee.c2r($e[Fe]+Ue/2,0,ct),size:Ue};ve._input[Se]=ve[Se]=bt,(Te=Ie._histogramBinOpts[ve["_"+De+"bingroup"]])&&x.extendFlat(Te,bt)}return _e[Se]}(h,s,d,p,k)}(M=u.cumulative||{}).enabled&&"include"!==M.currentbin&&("decreasing"===M.direction?$.start=L(b.tickIncrement(R($.start),$.size,!0,w)):$.end=L(b.tickIncrement(R($.end),$.size,!1,w))),D.size=$.size,D.sizeFound||(A.size=$.size,x.nestedProperty(m[0],k+".size").set($.size)),B("start",D,$),B("end",D,$)}f=s["_"+p+"pos0"],delete s["_"+p+"pos0"];var ie=s._input[k]||{},j=x.extendFlat({},D),q=D.start,W=d.r2l(ie.start),ae=void 0!==W;if((D.startFound||ae)&&W!==d.r2l(q)){var G=ae?W:x.aggNums(Math.min,null,f),ee={type:"category"===d.type||"multicategory"===d.type?"linear":d.type,r2l:d.r2l,dtick:D.size,tick0:q,calendar:w,range:[G,b.tickIncrement(G,D.size,!1,w)].map(d.l2r)},te=b.tickFirst(ee);te>d.r2l(G)&&(te=b.tickIncrement(te,D.size,!0,w)),j.start=d.l2r(te),ae||x.nestedProperty(s,k+".start").set(j.start)}var le=D.end,ue=d.r2l(ie.end),de=void 0!==ue;if((D.endFound||de)&&ue!==d.r2l(le)){var he=de?ue:x.aggNums(Math.max,null,f);j.end=d.l2r(he),de||x.nestedProperty(s,k+".start").set(j.end)}var be="autobin"+p;return!1===s._input[be]&&(s._input[k]=x.extendFlat({},s[k]||{}),delete s._input[be],delete s[be]),[j,f]}oe.exports={calc:function(h,s){var d,p,c,g,m=[],u=[],w="h"===s.orientation,f=b.getFromId(h,w?s.yaxis:s.xaxis),A=w?"y":"x",M={x:"y",y:"x"}[A],k=s[A+"calendar"],E=s.cumulative,P=y(h,s,f,A),D=P[0],F=P[1],R="string"==typeof D.size,L=[],I=R?L:D,B=[],V=[],Z=[],Y=0,Q=s.histnorm,re=s.histfunc,$=-1!==Q.indexOf("density");E.enabled&&$&&(Q=Q.replace(/ ?density$/,""),$=!1);var J,ie="max"===re||"min"===re?null:0,j=o.count,q=i[Q],W=!1,ae=function(ve){return f.r2c(ve,0,k)};for(x.isArrayOrTypedArray(s[M])&&"count"!==re&&(J=s[M],W="avg"===re,j=o[re]),d=ae(D.start),c=ae(D.end)+(d-b.tickIncrement(d,D.size,!1,k))/1e6;d<c&&m.length<1e6&&(p=b.tickIncrement(d,D.size,!1,k),m.push((d+p)/2),u.push(ie),Z.push([]),L.push(d),$&&B.push(1/(p-d)),W&&V.push(0),!(p<=d));)d=p;L.push(d),R||"date"!==f.type||(I={start:ae(I.start),end:ae(I.end),size:I.size}),h._fullLayout._roundFnOpts||(h._fullLayout._roundFnOpts={});var G=s["_"+A+"bingroup"],ee={leftGap:1/0,rightGap:1/0};G&&(h._fullLayout._roundFnOpts[G]||(h._fullLayout._roundFnOpts[G]=ee),ee=h._fullLayout._roundFnOpts[G]);var te,le=u.length,ue=!0,de=ee.leftGap,he=ee.rightGap,be={};for(d=0;d<F.length;d++){var me=F[d];(g=x.findBin(me,I))>=0&&g<le&&(Y+=j(g,d,u,J,V),ue&&Z[g].length&&me!==F[Z[g][0]]&&(ue=!1),Z[g].push(d),be[d]=g,de=Math.min(de,me-L[g]),he=Math.min(he,L[g+1]-me))}ee.leftGap=de,ee.rightGap=he,ue||(te=function(ve,Te){return function(){var Ie=h._fullLayout._roundFnOpts[G];return r(Ie.leftGap,Ie.rightGap,L,f,k)(ve,Te)}}),W&&(Y=l(u,V)),q&&q(u,Y,B),E.enabled&&function(ve,Te,Ie){var Ce,Re,Ue;function qe(st){Ue=ve[st],ve[st]/=2}function Xe(st){ve[st]=Ue+(Re=ve[st])/2,Ue+=Re}if("half"===Ie)if("increasing"===Te)for(qe(0),Ce=1;Ce<ve.length;Ce++)Xe(Ce);else for(qe(ve.length-1),Ce=ve.length-2;Ce>=0;Ce--)Xe(Ce);else if("increasing"===Te){for(Ce=1;Ce<ve.length;Ce++)ve[Ce]+=ve[Ce-1];"exclude"===Ie&&(ve.unshift(0),ve.pop())}else{for(Ce=ve.length-2;Ce>=0;Ce--)ve[Ce]+=ve[Ce+1];"exclude"===Ie&&(ve.push(0),ve.shift())}}(u,E.direction,E.currentbin);var _e=Math.min(m.length,u.length),Ee=[],De=0,Se=_e-1;for(d=0;d<_e;d++)if(u[d]){De=d;break}for(d=_e-1;d>=De;d--)if(u[d]){Se=d;break}for(d=De;d<=Se;d++)if(v(m[d])&&v(u[d])){var Fe={p:m[d],s:u[d],b:0};E.enabled||(Fe.pts=Z[d],ue?Fe.ph0=Fe.ph1=Z[d].length?F[Z[d][0]]:m[d]:(s._computePh=!0,Fe.ph0=te(L[d]),Fe.ph1=te(L[d+1],!0))),Ee.push(Fe)}return 1===Ee.length&&(Ee[0].width1=b.tickIncrement(Ee[0].p,D.size,!1,k)-Ee[0].p),e(Ee,s),x.isArrayOrTypedArray(s.selectedpoints)&&x.tagSelected(Ee,s,be),Ee},calcAllAutoBins:y}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(_,oe,se){"use strict";oe.exports={eventDataKeys:["binNumber"]}},{}],819:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axis_ids"),T=_("../../registry").traceIs,b=_("../bar/defaults").handleGroupingDefaults,e=v.nestedProperty,o=_("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];oe.exports=function(r,y){var h,s,d,p,c,g,m,u=y._histogramBinOpts={},w=[],f={},A=[];function M($,J){return v.coerce(h._input,h,h._module.attributes,$,J)}function k($){return"v"===$.orientation?"x":"y"}function E($,J,ie){var j=$.uid+"__"+ie;J||(J=j);var q=x.getFromTrace({_fullLayout:y},$,ie).type,W=$[ie+"calendar"]||"",ae=u[J],G=!0;ae&&(q===ae.axType&&W===ae.calendar?(G=!1,ae.traces.push($),ae.dirs.push(ie)):(J=j,q!==ae.axType&&v.warn(["Attempted to group the bins of trace",$.index,"set on a","type:"+q,"axis","with bins on","type:"+ae.axType,"axis."].join(" ")),W!==ae.calendar&&v.warn(["Attempted to group the bins of trace",$.index,"set with a",W,"calendar","with bins",ae.calendar?"on a "+ae.calendar+" calendar":"w/o a set calendar"].join(" ")))),G&&(u[J]={traces:[$],dirs:[ie],axType:q,calendar:$[ie+"calendar"]||""}),$["_"+ie+"bingroup"]=J}for(c=0;c<r.length;c++)T(h=r[c],"histogram")&&(w.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,T(h,"2dMap")||b(h._input,h,y,M));var P=y._alignmentOpts||{};for(c=0;c<w.length;c++){if(d="",!T(h=w[c],"2dMap")){if(p=k(h),"group"===y.barmode&&h.alignmentgroup){var F=o(y,h[p+"axis"])+h.orientation;(P[F]||{})[h.alignmentgroup]&&(d=F)}d||"overlay"===y.barmode||(d=o(y,h.xaxis)+o(y,h.yaxis)+k(h))}d?(f[d]||(f[d]=[]),f[d].push(h)):A.push(h)}for(d in f)if(1!==(s=f[d]).length){var R=!1;for(s.length&&(h=s[0],R=M("bingroup")),d=R||d,c=0;c<s.length;c++){var L=(h=s[c])._input.bingroup;L&&L!==d&&v.warn(["Trace",h.index,"must match","within bingroup",d+".","Ignoring its bingroup:",L,"setting."].join(" ")),h.bingroup=d,E(h,d,k(h))}}else A.push(s[0]);for(c=0;c<A.length;c++){h=A[c];var I=M("bingroup");if(T(h,"2dMap"))for(m=0;m<2;m++){var B=M((p=l[m])+"bingroup",I?I+"__"+p:null);E(h,B,p)}else E(h,I,k(h))}for(d in u){var V=u[d];for(s=V.traces,g=0;g<i.length;g++){var Z,Y,Q=i[g],re=Q.name;if("nbins"!==re||!V.sizeFound){for(c=0;c<s.length;c++){if(void 0!==e((h=s[c])._input,Z=Q.aStr[p=V.dirs[c]]).get()){V[re]=M(Z),V[re+"Found"]=!0;break}(Y=(h._autoBin||{})[p]||{})[re]&&e(h,Z).set(Y[re])}if("start"===re||"end"===re)for(;c<s.length;c++)(h=s[c])["_"+p+"bingroup"]&&M(Z,(Y=(h._autoBin||{})[p]||{})[re]);"nbins"!==re||V.sizeFound||V.nbinsFound||(h=s[0],V[re]=M(Z))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../../components/color"),b=_("../bar/defaults").handleText,e=_("../bar/style_defaults"),o=_("./attributes");oe.exports=function(i,l,r,y){function h(A,M){return x.coerce(i,l,o,A,M)}var s=h("x"),d=h("y");h("cumulative.enabled")&&(h("cumulative.direction"),h("cumulative.currentbin")),h("text");var p=h("textposition");b(i,l,y,h,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat");var c=h("orientation",d&&!s?"h":"v"),g="v"===c?"x":"y",m="v"===c?"y":"x",u=s&&d?Math.min(x.minRowLength(s)&&x.minRowLength(d)):x.minRowLength(l[g]||[]);if(u){l._length=u,v.getComponentMethod("calendars","handleTraceDefaults")(i,l,["x","y"],y),l[m]&&h("histfunc"),h("histnorm"),h("autobin"+g),e(i,l,h,r,y),x.coerceSelectionMarkerOpacity(l,h);var w=(l.marker.line||{}).color,f=v.getComponentMethod("errorbars","supplyDefaults");f(i,l,w||T.defaultLine,{axis:"y"}),f(i,l,w||T.defaultLine,{axis:"x",inherit:"y"})}else l.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){if(v.x="xVal"in x?x.xVal:x.x,v.y="yVal"in x?x.yVal:x.y,"zLabelVal"in x&&(v.z=x.zLabelVal),x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),!(T.cumulative||{}).enabled){var o,i=Array.isArray(e)?b[0].pts[e[0]][e[1]]:b[e].pts;if(v.pointNumbers=i,v.binNumber=v.pointNumber,delete v.pointNumber,delete v.pointIndex,T._indexToPoints){o=[];for(var l=0;l<i.length;l++)o=o.concat(T._indexToPoints[i[l]])}else o=i;v.pointIndices=o}return v}},{}],822:[function(_,oe,se){"use strict";var v=_("../bar/hover").hoverPoints,x=_("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(T,b,e,o,i){var l=v(T,b,e,o,i);if(l){var r=(T=l[0]).cd[T.index],y=T.cd[0].trace;if(!y.cumulative.enabled){var h="h"===y.orientation?"y":"x";T[h+"Label"]=x(T[h+"a"],[r.ph0,r.ph1],y[h+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("../bar/layout_attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),supplyLayoutDefaults:_("../bar/layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("../bar/cross_trace_calc").crossTraceCalc,plot:_("../bar/plot").plot,layerName:"barlayer",style:_("../bar/style").style,styleOnSelect:_("../bar/style").styleOnSelect,colorbar:_("../scatter/marker_colorbar"),hoverPoints:_("./hover"),selectPoints:_("../bar/select"),eventData:_("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(_,oe,se){"use strict";oe.exports={percent:function(v,x){for(var T=v.length,b=100/x,e=0;e<T;e++)v[e]*=b},probability:function(v,x){for(var T=v.length,b=0;b<T;b++)v[b]/=x},density:function(v,x,T,b){var e=v.length;b=b||1;for(var o=0;o<e;o++)v[o]*=T[o]*b},"probability density":function(v,x,T,b){var e=v.length;b&&(x/=b);for(var o=0;o<e;o++)v[o]*=T[o]/x}}},{}],825:[function(_,oe,se){"use strict";var v=_("../histogram/attributes"),x=_("../histogram/bin_attributes"),T=_("../heatmap/attributes"),b=_("../../plots/attributes"),e=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=_("../../plots/template_attributes").hovertemplateAttrs,i=_("../../plots/template_attributes").texttemplateAttrs,l=_("../../components/colorscale/attributes"),r=_("../../lib/extend").extendFlat;oe.exports=r({x:v.x,y:v.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:v.histnorm,histfunc:v.histfunc,nbinsx:v.nbinsx,xbins:x("x"),nbinsy:v.nbinsy,ybins:x("y"),autobinx:v.autobinx,autobiny:v.autobiny,bingroup:r({},v.bingroup,{}),xbingroup:r({},v.bingroup,{}),ybingroup:r({},v.bingroup,{}),xgap:T.xgap,ygap:T.ygap,zsmooth:T.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:T.textfont,showlegend:r({},b.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../histogram/bin_functions"),b=_("../histogram/norm_functions"),e=_("../histogram/average"),o=_("../histogram/bin_label_vals"),i=_("../histogram/calc").calcAllAutoBins;function l(h,s,d,p){var c,g=new Array(h);if(p)for(c=0;c<h;c++)g[c]=1/(s[c+1]-s[c]);else{var m=1/d;for(c=0;c<h;c++)g[c]=m}return g}function r(h,s){return{start:h(s.start),end:h(s.end),size:s.size}}function y(h,s,d,p,c,g){var m,u=h.length-1,w=new Array(u),f=o(d,p,h,c,g);for(m=0;m<u;m++){var A=(s||[])[m];w[m]=void 0===A?[f(h[m]),f(h[m+1],!0)]:[A,A]}return w}oe.exports=function(h,s){var d,p,c,g,m=x.getFromId(h,s.xaxis),u=x.getFromId(h,s.yaxis),w=s.xcalendar,f=s.ycalendar,A=function(dt){return m.r2c(dt,0,w)},M=function(dt){return u.r2c(dt,0,f)},k=i(h,s,m,"x"),E=k[0],P=k[1],D=i(h,s,u,"y"),F=D[0],R=D[1],L=s._length;P.length>L&&P.splice(L,P.length-L),R.length>L&&R.splice(L,R.length-L);var I=[],B=[],V=[],Z="string"==typeof E.size,Y="string"==typeof F.size,Q=[],re=[],$=Z?Q:E,J=Y?re:F,ie=0,j=[],q=[],W=s.histnorm,ae=s.histfunc,G=-1!==W.indexOf("density"),ee="max"===ae||"min"===ae?null:0,te=T.count,le=b[W],ue=!1,de=[],he=[],be="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";be&&"count"!==ae&&(ue="avg"===ae,te=T[ae]);var me=E.size,_e=A(E.start),Ee=A(E.end)+(_e-x.tickIncrement(_e,me,!1,w))/1e6;for(d=_e;d<Ee;d=x.tickIncrement(d,me,!1,w))B.push(ee),Q.push(d),ue&&V.push(0);Q.push(d);var Se=B.length,Fe=(d-_e)/Se,ve=m.c2r(_e+Fe/2,0,w),Te=F.size,Ie=M(F.start),Ce=M(F.end)+(Ie-x.tickIncrement(Ie,Te,!1,f))/1e6;for(d=Ie;d<Ce;d=x.tickIncrement(d,Te,!1,f)){I.push(B.slice()),re.push(d);var Re=new Array(Se);for(p=0;p<Se;p++)Re[p]=[];q.push(Re),ue&&j.push(V.slice())}re.push(d);var Ue=I.length,qe=(d-Ie)/Ue,Xe=u.c2r(Ie+qe/2,0,f);G&&(de=l(B.length,$,Fe,Z),he=l(I.length,J,qe,Y)),Z||"date"!==m.type||($=r(A,$)),Y||"date"!==u.type||(J=r(M,J));var st=!0,He=!0,$e=new Array(Se),et=new Array(Ue),tt=1/0,ct=1/0,bt=1/0,At=1/0;for(d=0;d<L;d++){var Ut=P[d],Ct=R[d];c=v.findBin(Ut,$),g=v.findBin(Ct,J),c>=0&&c<Se&&g>=0&&g<Ue&&(ie+=te(c,d,I[g],be,j[g]),q[g][c].push(d),st&&(void 0===$e[c]?$e[c]=Ut:$e[c]!==Ut&&(st=!1)),He&&(void 0===et[g]?et[g]=Ct:et[g]!==Ct&&(He=!1)),tt=Math.min(tt,Ut-Q[c]),ct=Math.min(ct,Q[c+1]-Ut),bt=Math.min(bt,Ct-re[g]),At=Math.min(At,re[g+1]-Ct))}if(ue)for(g=0;g<Ue;g++)ie+=e(I[g],j[g]);if(le)for(g=0;g<Ue;g++)le(I[g],ie,de,he[g]);return{x:P,xRanges:y(Q,st&&$e,tt,ct,m,w),x0:ve,dx:Fe,y:R,yRanges:y(re,He&&et,bt,At,u,f),y0:Xe,dy:qe,z:I,pts:q}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./sample_defaults"),T=_("../heatmap/style_defaults"),b=_("../../components/colorscale/defaults"),e=_("../heatmap/label_defaults"),o=_("./attributes");oe.exports=function(i,l,r,y){function h(s,d){return v.coerce(i,l,o,s,d)}x(i,l,h,y),!1!==l.visible&&(T(i,l,h,y),b(i,l,y,h,{prefix:"",cLetter:"z"}),h("hovertemplate"),e(h,y),h("xhoverformat"),h("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(_,oe,se){"use strict";var v=_("../heatmap/hover"),x=_("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(T,b,e,o,i){var l=v(T,b,e,o,i);if(l){var r=(T=l[0]).index,s=T.cd[0],d=s.trace,p=s.xRanges[r[1]],c=s.yRanges[r[0]];return T.xLabel=x(T.xa,[p[0],p[1]],d.xhoverformat),T.yLabel=x(T.ya,[c[0],c[1]],d.yhoverformat),l}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../histogram/cross_trace_defaults"),calc:_("../heatmap/calc"),plot:_("../heatmap/plot"),layerName:"heatmaplayer",colorbar:_("../heatmap/colorbar"),style:_("../heatmap/style"),hoverPoints:_("./hover"),eventData:_("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib");oe.exports=function(T,b,e,o){var i=e("x"),l=e("y"),r=x.minRowLength(i),y=x.minRowLength(l);r&&y?(b._length=Math.min(r,y),v.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x","y"],o),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):b.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(_,oe,se){"use strict";var v=_("../histogram2d/attributes"),x=_("../contour/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../lib/extend").extendFlat;oe.exports=e({x:v.x,y:v.y,z:v.z,marker:v.marker,histnorm:v.histnorm,histfunc:v.histfunc,nbinsx:v.nbinsx,xbins:v.xbins,nbinsy:v.nbinsy,ybins:v.ybins,autobinx:v.autobinx,autobiny:v.autobiny,bingroup:v.bingroup,xbingroup:v.xbingroup,ybingroup:v.ybingroup,autocontour:x.autocontour,ncontours:x.ncontours,contours:x.contours,line:{color:x.line.color,width:e({},x.line.width,{dflt:.5}),dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:v.hovertemplate,texttemplate:x.texttemplate,textfont:x.textfont},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../histogram2d/sample_defaults"),T=_("../contour/contours_defaults"),b=_("../contour/style_defaults"),e=_("../heatmap/label_defaults"),o=_("./attributes");oe.exports=function(i,l,r,y){function h(s,d){return v.coerce(i,l,o,s,d)}x(i,l,h,y),!1!==l.visible&&(T(i,l,h,function(s){return v.coerce2(i,l,o,s)}),b(i,l,h,y),h("xhoverformat"),h("yhoverformat"),h("hovertemplate"),l.contours&&"heatmap"===l.contours.coloring&&e(h,y))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../histogram/cross_trace_defaults"),calc:_("../contour/calc"),plot:_("../contour/plot").plot,layerName:"contourlayer",style:_("../contour/style"),colorbar:_("../contour/colorbar"),hoverPoints:_("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../components/colorscale/attributes"),b=_("../../plots/domain").attributes,e=_("../pie/attributes"),o=_("../sunburst/attributes"),i=_("../treemap/attributes"),l=_("../treemap/constants"),r=_("../../lib/extend").extendFlat;oe.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:o.marker.colors,line:o.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:i.pathbar,text:e.text,textinfo:o.textinfo,texttemplate:x({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:v({},{keys:l.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:e.sort,root:o.root,domain:b({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(_,oe,se){"use strict";var v=_("../../plots/plots");se.name="icicle",se.plot=function(x,T,b,e){v.plotBasePlot(se.name,x,T,b,e)},se.clean=function(x,T,b,e){v.cleanBasePlot(se.name,x,T,b,e)}},{"../../plots/plots":619}],836:[function(_,oe,se){"use strict";var v=_("../sunburst/calc");se.calc=function(x,T){return v.calc(x,T)},se.crossTraceCalc=function(x){return v._runCrossTraceCalc("icicle",x)}},{"../sunburst/calc":1051}],837:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText,o=_("../bar/constants").TEXTPAD,i=_("../../components/colorscale"),l=i.hasColorscale,r=i.handleDefaults;oe.exports=function(y,h,s,d){function p(A,M){return v.coerce(y,h,x,A,M)}var c=p("labels"),g=p("parents");if(c&&c.length&&g&&g.length){var m=p("values");p(m&&m.length?"branchvalues":"count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var w=p("pathbar.visible");e(y,h,d,p,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor),p("marker.colors");var f=h._hasColorscale=l(y,"marker","colors")||(y.marker||{}).coloraxis;f&&r(y,h,d,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",f?1:.7),h._hovered={marker:{line:{width:2,color:T.contrast(d.paper_bgcolor)}}},w&&(p("pathbar.thickness",h.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),b(h,d,p),h._length=null}else h.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),o=_("./style").styleOne,i=_("../treemap/constants"),l=_("../sunburst/helpers"),r=_("../sunburst/fx"),y=_("../sunburst/plot").formatSliceLabel;oe.exports=function(h,s,d,p,c){var g=c.width,m=c.height,u=c.viewX,w=c.viewY,f=c.pathSlice,A=c.toMoveInsideSlice,M=c.strTransform,k=c.hasTransition,E=c.handleSlicesExit,P=c.makeUpdateSliceInterpolator,D=c.makeUpdateTextInterpolator,F=c.prevEntry,R=h._fullLayout,L=s[0].trace,I=-1!==L.textposition.indexOf("left"),B=-1!==L.textposition.indexOf("right"),V=-1!==L.textposition.indexOf("bottom"),Z=e(d,[g,m],{flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,orientation:L.tiling.orientation,pad:{inner:L.tiling.pad},maxDepth:L._maxDepth}).descendants(),Y=1/0,Q=-1/0;Z.forEach(function(j){var q=j.depth;q>=L._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(Y=Math.min(Y,q),Q=Math.max(Q,q))}),p=p.data(Z,l.getPtId),L._maxVisibleLayers=isFinite(Q)?Q-Y+1:0,p.enter().append("g").classed("slice",!0),E(p,!1,{},[g,m],f),p.order();var re=null;if(k&&F){var $=l.getPtId(F);p.each(function(j){null===re&&l.getPtId(j)===$&&(re={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var J=function(){return re||{x0:0,x1:g,y0:0,y1:m}},ie=p;return k&&(ie=ie.transition().each("end",function(){var j=v.select(this);l.setSliceCursor(j,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ie.each(function(j){j._x0=u(j.x0),j._x1=u(j.x1),j._y0=w(j.y0),j._y1=w(j.y1),j._hoverX=u(j.x1-L.tiling.pad),j._hoverY=w(V?j.y1-L.tiling.pad/2:j.y0+L.tiling.pad/2);var q=v.select(this),W=x.ensureSingle(q,"path","surface",function(te){te.style("pointer-events","all")});k?W.transition().attrTween("d",function(te){var le=P(te,!1,J(),[g,m],{orientation:L.tiling.orientation,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1});return function(ue){return f(le(ue))}}):W.attr("d",f),q.call(r,d,h,s,{styleOne:o,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,h,{isTransitioning:h._transitioning}),W.call(o,j,L,{hovered:!1}),j._text=j.x0===j.x1||j.y0===j.y1?"":y(j,d,L,s,R)||"";var ae=x.ensureSingle(q,"g","slicetext"),G=x.ensureSingle(ae,"text","",function(te){te.attr("data-notex",1)}),ee=x.ensureUniformFontSize(h,l.determineTextFont(L,j,R.font));G.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":I?"start":"middle").call(T.font,ee).call(b.convertToTspans,h),j.textBB=T.bBox(G.node()),j.transform=A(j,{fontSize:ee.size}),j.transform.fontSize=ee.size,k?G.transition().attrTween("transform",function(te){var le=D(te,!1,J(),[g,m]);return function(ue){return M(le(ue))}}):G.attr("transform",M(j))}),re}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"icicle",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(_,oe,se){"use strict";oe.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,i){return v.coerce(T,b,x,o,i)}e("iciclecolorway",b.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(_,oe,se){"use strict";var v=_("d3-hierarchy"),x=_("../treemap/flip_tree");oe.exports=function(T,b,e){var o=e.flipX,i=e.flipY,l="h"===e.orientation,r=e.maxDepth,y=b[0],h=b[1];r&&(y=(T.height+1)*b[0]/Math.min(T.height+1,r),h=(T.height+1)*b[1]/Math.min(T.height+1,r));var s=v.partition().padding(e.pad.inner).size(l?[b[1],y]:[b[0],h])(T);return(l||o||i)&&x(s,b,{swapXY:l,flipX:o,flipY:i}),s}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(_,oe,se){"use strict";var v=_("../treemap/draw"),x=_("./draw_descendants");oe.exports=function(T,b,e,o){return v(T,b,e,o,{type:"icicle",drawDescendants:x})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../bar/uniform_text").resizeText;function e(o,i,l){var r=i.data.data,y=!i.children,h=r.i,s=T.castOption(l,h,"marker.line.color")||x.defaultLine,d=T.castOption(l,h,"marker.line.width")||0;o.style("stroke-width",d).call(x.fill,r.color).call(x.stroke,s).style("opacity",y?l.leaf.opacity:null)}oe.exports={style:function(o){var i=o._fullLayout._iciclelayer.selectAll(".trace");b(o,i,"icicle"),i.each(function(l){var r=v.select(this),y=l[0].trace;r.style("opacity",y.opacity),r.selectAll("path.surface").each(function(h){v.select(this).call(e,h,y)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(_,oe,se){"use strict";for(var v=_("../../plots/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],o=[],i=[],l=0;l<e.length;l++){var r=b[e[l]];o.push("For the `"+e[l]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+e[l]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}oe.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},v.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:x({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./constants"),T=_("fast-isnumeric"),b=_("../../plots/cartesian/axes"),e=_("../../lib").maxRowLength,o=_("./helpers").getImageSize;function i(r,y,h,s){return function(d){return v.constrain((d-r)*y,h,s)}}function l(r,y){return function(h){return v.constrain(h,r,y)}}oe.exports=function(r,y){var h,s;if(y._hasZ)h=y.z.length,s=e(y.z);else if(y._hasSource){var d=o(y.source);h=d.height,s=d.width}var p,c=b.getFromId(r,y.xaxis||"x"),g=b.getFromId(r,y.yaxis||"y"),m=c.d2c(y.x0)-y.dx/2,u=g.d2c(y.y0)-y.dy/2,w=[m,m+s*y.dx],f=[u,u+h*y.dy];if(c&&"log"===c.type)for(p=0;p<s;p++)w.push(m+p*y.dx);if(g&&"log"===g.type)for(p=0;p<h;p++)f.push(u+p*y.dy);return y._extremes[c._id]=b.findExtremes(c,w),y._extremes[g._id]=b.findExtremes(g,f),y._scaler=function(A){var M=x.colormodel[A.colormodel],k=(M.colormodel||A.colormodel).length;A._sArray=[];for(var E=0;E<k;E++)A._sArray.push(M.min[E]!==A.zmin[E]||M.max[E]!==A.zmax[E]?i(A.zmin[E],(M.max[E]-M.min[E])/(A.zmax[E]-A.zmin[E]),M.min[E],M.max[E]):l(M.min[E],M.max[E]));return function(P){for(var D=P.slice(0,k),F=0;F<k;F++){var R=D[F];if(!T(R))return!1;D[F]=A._sArray[F](R)}return D}}(y),[{x0:m,y0:u,z:y.z,w:s,h}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(_,oe,se){"use strict";oe.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(v){return v.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(v){return v.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(v){return v.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(v){var x=v.slice(0,3);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(v){var x=v.slice(0,4);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("./constants"),b=_("../../snapshot/helpers").IMAGE_URL_PREFIX;oe.exports=function(e,o){function i(y,h){return v.coerce(e,o,x,y,h)}i("source"),o.source&&!o.source.match(b)&&delete o.source,o._hasSource=!!o.source;var l,r=i("z");o._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length),o._hasZ||o._hasSource?(i("x0"),i("y0"),i("dx"),i("dy"),o._hasZ?(i("colormodel","rgb"),i("zmin",(l=T.colormodel[o.colormodel]).zminDflt||l.min),i("zmax",l.zmaxDflt||l.max)):o._hasSource&&(o.colormodel="rgba256",o.zmin=(l=T.colormodel[o.colormodel]).zminDflt,o.zmax=l.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),o._length=null):o.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(_,oe,se){"use strict";oe.exports=function(v,x){return"xVal"in x&&(v.x=x.xVal),"yVal"in x&&(v.y=x.yVal),x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),v.color=x.color,v.colormodel=x.trace.colormodel,v.z||(v.z=x.color),v}},{}],850:[function(_,oe,se){"use strict";var v=_("probe-image-size/sync"),x=_("../../snapshot/helpers").IMAGE_URL_PREFIX,T=_("buffer/").Buffer;se.getImageSize=function(b){var e=b.replace(x,""),o=new T(e,"base64");return v(o)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(_,oe,se){"use strict";var v=_("../../components/fx"),x=_("../../lib"),T=_("./constants");oe.exports=function(b,e,o){var i=b.cd[0],l=i.trace,r=b.xa,y=b.ya;if(!(v.inbox(e-i.x0,e-(i.x0+i.w*l.dx),0)>0||v.inbox(o-i.y0,o-(i.y0+i.h*l.dy),0)>0)){var h,s=Math.floor((e-i.x0)/l.dx),d=Math.floor(Math.abs(o-i.y0)/l.dy);if(l._hasZ?h=i.z[d][s]:l._hasSource&&(h=l._canvas.el.getContext("2d").getImageData(s,d,1,1).data),h){var p,c=i.hi||l.hoverinfo;if(c){var g=c.split("+");-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(p=!0)}var m,u=T.colormodel[l.colormodel],w=u.colormodel||l.colormodel,f=w.length,A=l._scaler(h),M=u.suffix,k=[];(l.hovertemplate||p)&&(k.push("["+[A[0]+M[0],A[1]+M[1],A[2]+M[2]].join(", ")),4===f&&k.push(", "+A[3]+M[3]),k.push("]"),k=k.join(""),b.extraText=w.toUpperCase()+": "+k),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[d])?m=l.hovertext[d][s]:Array.isArray(l.text)&&Array.isArray(l.text[d])&&(m=l.text[d][s]);var E=y.c2p(i.y0+(d+.5)*l.dy),P=i.x0+(s+.5)*l.dx,D=i.y0+(d+.5)*l.dy,F="["+h.slice(0,l.colormodel.length).join(", ")+"]";return[x.extendFlat(b,{index:[d,s],x0:r.c2p(i.x0+s*l.dx),x1:r.c2p(i.x0+(s+1)*l.dx),y0:E,y1:E,color:A,xVal:P,xLabelVal:P,yVal:D,yLabelVal:D,zLabelVal:F,text:m,hovertemplateLabels:{zLabel:F,colorLabel:k,"color[0]Label":A[0]+M[0],"color[1]Label":A[1]+M[1],"color[2]Label":A[2]+M[2],"color[3]Label":A[3]+M[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),style:_("./style"),hoverPoints:_("./hover"),eventData:_("./event_data"),moduleType:"trace",name:"image",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=x.strTranslate,b=_("../../constants/xmlns_namespaces"),e=_("./constants"),o=x.isIOS()||x.isSafari()||x.isIE();oe.exports=function(i,l,r,y){var h=l.xaxis,s=l.yaxis,d=!(o||i._context._exportedPlot);x.makeTraceGroups(y,r,"im").each(function(p){var c=v.select(this),g=p[0],m=g.trace,u=("fast"===m.zsmooth||!1===m.zsmooth&&d)&&!m._hasZ&&m._hasSource&&"linear"===h.type&&"linear"===s.type;m._realImage=u;var w,f,A,M,k,E,P=g.z,D=g.x0,F=g.y0,R=g.w,L=g.h,I=m.dx,B=m.dy;for(E=0;void 0===w&&E<R;)w=h.c2p(D+E*I),E++;for(E=R;void 0===f&&E>0;)f=h.c2p(D+E*I),E--;for(E=0;void 0===M&&E<L;)M=s.c2p(F+E*B),E++;for(E=L;void 0===k&&E>0;)k=s.c2p(F+E*B),E--;f<w&&(A=f,f=w,w=A),k<M&&(A=M,M=k,k=A),!u&&(w=Math.max(-.5*h._length,w),f=Math.min(1.5*h._length,f),M=Math.max(-.5*s._length,M),k=Math.min(1.5*s._length,k));var V=Math.round(f-w),Z=Math.round(k-M);if(V<=0||Z<=0)c.selectAll("image").data([]).exit().remove();else{var Y=c.selectAll("image").data([p]);Y.enter().append("svg:image").attr({xmlns:b.svg,preserveAspectRatio:"none"}),Y.exit().remove();var Q=!1===m.zsmooth?e.pixelatedStyle:"";if(u){var re=x.simpleMap(h.range,h.r2l),$=x.simpleMap(s.range,s.r2l),J=re[1]<re[0],ie=$[1]>$[0];if(J||ie){var j=w+V/2,q=M+Z/2;Q+="transform:"+T(j+"px",q+"px")+"scale("+(J?-1:1)+","+(ie?-1:1)+")"+T(-j+"px",-q+"px")+";"}}Y.attr("style",Q);var W=new Promise(function(G){if(m._hasZ)G();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===R&&m._canvas.el.height===L&&m._canvas.source===m.source)G();else{var ee=document.createElement("canvas");ee.width=R,ee.height=L;var te=ee.getContext("2d");m._image=m._image||new Image;var le=m._image;le.onload=function(){te.drawImage(le,0,0),m._canvas={el:ee,source:m.source},G()},le.setAttribute("src",m.source)}}).then(function(){var G;if(m._hasZ)G=ae(function(te,le){return P[le][te]}).toDataURL("image/png");else if(m._hasSource)if(u)G=m.source;else{var ee=m._canvas.el.getContext("2d").getImageData(0,0,R,L).data;G=ae(function(te,le){var ue=4*(le*R+te);return[ee[ue],ee[ue+1],ee[ue+2],ee[ue+3]]}).toDataURL("image/png")}Y.attr({"xlink:href":G,height:Z,width:V,x:w,y:M})});i._promises.push(W)}function ae(G){var ee=document.createElement("canvas");ee.width=V,ee.height=Z;var te,le=ee.getContext("2d"),ue=function(ve){return x.constrain(Math.round(h.c2p(D+ve*I)-w),0,V)},de=function(ve){return x.constrain(Math.round(s.c2p(F+ve*B)-M),0,Z)},he=e.colormodel[m.colormodel],be=he.colormodel||m.colormodel,me=he.fmt;for(E=0;E<g.w;E++){var _e=ue(E),Ee=ue(E+1);if(Ee!==_e&&!isNaN(Ee)&&!isNaN(_e))for(var De=0;De<g.h;De++){var Se=de(De),Fe=de(De+1);Fe===Se||isNaN(Fe)||isNaN(Se)||!G(E,De)||(te=m._scaler(G(E,De)),le.fillStyle=te?be+"("+me(te).join(",")+")":"rgba(0,0,0,0)",le.fillRect(_e,Se,Ee-_e,Fe-Se))}}return ee}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(_,oe,se){"use strict";var v=_("@plotly/d3");oe.exports=function(x){v.select(x).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(_,oe,se){"use strict";var v=_("../../lib/extend").extendFlat,x=_("../../lib/extend").extendDeep,T=_("../../plot_api/edit_types").overrideAll,b=_("../../plots/font_attributes"),e=_("../../components/color/attributes"),o=_("../../plots/domain").attributes,i=_("../../plots/cartesian/layout_attributes"),l=_("../../plot_api/plot_template").templatedArray,r=_("../../constants/delta.js"),y=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,h=b({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=l("step",x({},s,{range:d}));oe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:v({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:y("value")},font:v({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:y("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:v({},h,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:x({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:T({range:d,visible:v({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:v({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:b({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:v({},s.line.color,{}),width:v({},s.line.width,{dflt:1}),editType:"plot"},thickness:v({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(_,oe,se){"use strict";var v=_("../../plots/plots");se.name="indicator",se.plot=function(x,T,b,e){v.plotBasePlot(se.name,x,T,b,e)},se.clean=function(x,T,b,e){v.cleanBasePlot(se.name,x,T,b,e)}},{"../../plots/plots":619}],857:[function(_,oe,se){"use strict";oe.exports={calc:function(v,x){var T=[],b=x.value;"number"!=typeof x._lastValue&&(x._lastValue=x.value);var e=x._lastValue,o=e;return x._hasDelta&&"number"==typeof x.delta.reference&&(o=x.delta.reference),T[0]={y:b,lastY:e,delta:b-o,relativeDelta:(b-o)/o},T}}},{}],858:[function(_,oe,se){"use strict";oe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../../plot_api/plot_template"),e=_("../../plots/array_container_defaults"),o=_("./constants.js"),i=_("../../plots/cartesian/tick_value_defaults"),l=_("../../plots/cartesian/tick_mark_defaults"),r=_("../../plots/cartesian/tick_label_defaults"),y=_("../../plots/cartesian/prefix_suffix_defaults");function h(s,d){function p(c,g){return v.coerce(s,d,x.gauge.steps,c,g)}p("color"),p("line.color"),p("line.width"),p("range"),p("thickness")}oe.exports={supplyDefaults:function(s,d,p,c){function g(R,L){return v.coerce(s,d,x,R,L)}T(d,c,g),g("mode"),d._hasNumber=-1!==d.mode.indexOf("number"),d._hasDelta=-1!==d.mode.indexOf("delta"),d._hasGauge=-1!==d.mode.indexOf("gauge");var m=g("value");d._range=[0,"number"==typeof m?1.5*m:1];var u,w,f,A,M,k,E=new Array(2);function P(R,L){return v.coerce(f,A,x.gauge,R,L)}function D(R,L){return v.coerce(M,k,x.gauge.axis,R,L)}if(d._hasNumber&&(g("number.valueformat"),g("number.font.color",c.font.color),g("number.font.family",c.font.family),g("number.font.size"),void 0===d.number.font.size&&(d.number.font.size=o.defaultNumberFontSize,E[0]=!0),g("number.prefix"),g("number.suffix"),u=d.number.font.size),d._hasDelta&&(g("delta.font.color",c.font.color),g("delta.font.family",c.font.family),g("delta.font.size"),void 0===d.delta.font.size&&(d.delta.font.size=(d._hasNumber?.5:1)*(u||o.defaultNumberFontSize),E[1]=!0),g("delta.reference",d.value),g("delta.relative"),g("delta.valueformat",d.delta.relative?"2%":""),g("delta.increasing.symbol"),g("delta.increasing.color"),g("delta.decreasing.symbol"),g("delta.decreasing.color"),g("delta.position"),w=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||E[0])&&(!d._hasDelta||E[1])||!1,g("title.font.color",c.font.color),g("title.font.family",c.font.family),g("title.font.size",.25*(u||w||o.defaultNumberFontSize)),g("title.text"),d._hasGauge){(f=s.gauge)||(f={}),A=b.newContainer(d,"gauge"),P("shape"),(d._isBullet="bullet"===d.gauge.shape)||g("title.align","center"),(d._isAngular="angular"===d.gauge.shape)||g("align","center"),P("bgcolor",c.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",o.valueThickness*("bullet"===d.gauge.shape?.5:1)),e(f,A,{name:"steps",handleItemDefaults:h}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),M={},f&&(M=f.axis||{}),k=b.newContainer(A,"axis"),D("visible"),d._range=D("range",d._range);var F={outerTicks:!0};i(M,k,D,"linear"),y(M,k,D,"linear",F),r(M,k,D,"linear",F),l(M,k,D,F)}else g("title.align","center"),g("align","center"),d._isAngular=d._isBullet=!1;d._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"indicator",basePlotModule:_("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,calc:_("./calc").calc,plot:_("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-interpolate").interpolate,T=_("d3-interpolate").interpolateNumber,b=_("../../lib"),e=b.strScale,o=b.strTranslate,i=b.rad2deg,l=_("../../constants/alignment").MID_SHIFT,r=_("../../components/drawing"),y=_("./constants"),h=_("../../lib/svg_text_utils"),s=_("../../plots/cartesian/axes"),d=_("../../plots/cartesian/axis_defaults"),p=_("../../plots/cartesian/position_defaults"),c=_("../../plots/cartesian/layout_attributes"),g=_("../../components/color"),m={left:"start",center:"middle",right:"end"},u={left:0,center:.5,right:1},w=/[yzafpn\xb5mkMGTPEZY]/;function f(D){return D&&D.duration>0}function A(D){D.each(function(F){g.stroke(v.select(this),F.line.color)}).each(function(F){g.fill(v.select(this),F.color)}).style("stroke-width",function(F){return F.line.width})}function M(D,F,R){var L=D._fullLayout,I=b.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},F),B={type:"linear",_id:"x"+F._id},V={letter:"x",font:L.font,noHover:!0,noTickson:!0};function Z(Y,Q){return b.coerce(I,B,c,Y,Q)}return d(I,B,Z,V,L),p(I,B,Z,V),B}function k(D,F,R){return[Math.min(F/D.width,R/D.height),D,F+"x"+R]}function E(D,F,R,L){var I=document.createElementNS("http://www.w3.org/2000/svg","text"),B=v.select(I);return B.text(D).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",D).call(h.convertToTspans,L).call(r.font,F),r.bBox(B.node())}function P(D,F,R,L,I,B){var V="_cache"+F;D[V]&&D[V].key===I||(D[V]={key:I,value:R});var Z=b.aggNums(B,null,[D[V].value,L],2);return D[V].value=Z,Z}oe.exports=function(D,F,R,L){var I,B=D._fullLayout;f(R)&&L&&(I=L()),b.makeTraceGroups(B._indicatorlayer,F,"trace").each(function(V){var Z,Y,Q,re,$,J=V[0].trace,ie=v.select(this),j=J._hasGauge,q=J._isAngular,W=J._isBullet,ae=J.domain,G={w:B._size.w*(ae.x[1]-ae.x[0]),h:B._size.h*(ae.y[1]-ae.y[0]),l:B._size.l+B._size.w*ae.x[0],r:B._size.r+B._size.w*(1-ae.x[1]),t:B._size.t+B._size.h*(1-ae.y[1]),b:B._size.b+B._size.h*ae.y[0]},ee=G.l+G.w/2,te=G.t+G.h/2,le=Math.min(G.w/2,G.h),ue=y.innerRadius*le,de=J.align||"center";if(Y=te,j){if(q&&(Z=ee,Y=te+le/2,Q=function(Fe){return ve=Fe,[(Te=.9*ue)/Math.sqrt(ve.width/2*(ve.width/2)+ve.height*ve.height),ve,Te];var ve,Te}),W){var he=y.bulletPadding,be=1-y.bulletNumberDomainSize+he;Z=G.l+(be+(1-be)*u[de])*G.w,Q=function(Fe){return k(Fe,(y.bulletNumberDomainSize-he)*G.w,G.h)}}}else Z=G.l+u[de]*G.w,Q=function(Fe){return k(Fe,G.w,G.h)};(function(Fe,ve,Te,Ie){var Ce,Re,Ue,qe=Te[0].trace,Xe=Ie.numbersX,st=Ie.numbersY,He=qe.align||"center",$e=m[He],et=Ie.transitionOpts,tt=Ie.onComplete,ct=b.ensureSingle(ve,"g","numbers"),bt=[];qe._hasNumber&&bt.push("number"),qe._hasDelta&&(bt.push("delta"),"left"===qe.delta.position&&bt.reverse());var At=ct.selectAll("text").data(bt);function Ut(Qe,Rt,gt,Be){if(!Qe.match("s")||gt>=0==Be>=0||Rt(gt).slice(-1).match(w)||Rt(Be).slice(-1).match(w))return Rt;var Ve=Qe.slice().replace("s","f").replace(/\d+/,function(je){return parseInt(je)-1}),Le=M(Fe,{tickformat:Ve});return function(je){return Math.abs(je)<1?s.tickText(Le,je).text:Rt(je)}}At.enter().append("text"),At.attr("text-anchor",function(){return $e}).attr("class",function(Qe){return Qe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),At.exit().remove();var Ct,dt=qe.mode+qe.align;if(qe._hasDelta&&(Ct=function(){var Qe=M(Fe,{tickformat:qe.delta.valueformat},qe._range);Qe.setScale(),s.prepTicks(Qe);var Rt=function(Ke){return s.tickText(Qe,Ke).text},gt=function(Ke){return qe.delta.relative?Ke.relativeDelta:Ke.delta},Be=function(Ke,ft){return 0===Ke||"number"!=typeof Ke||isNaN(Ke)?"-":(Ke>0?qe.delta.increasing.symbol:qe.delta.decreasing.symbol)+ft(Ke)},Ve=function(Ke){return Ke.delta>=0?qe.delta.increasing.color:qe.delta.decreasing.color};void 0===qe._deltaLastValue&&(qe._deltaLastValue=gt(Te[0]));var Le=ct.select("text.delta");function je(){Le.text(Be(gt(Te[0]),Rt)).call(g.fill,Ve(Te[0])).call(h.convertToTspans,Fe)}return Le.call(r.font,qe.delta.font).call(g.fill,Ve({delta:qe._deltaLastValue})),f(et)?Le.transition().duration(et.duration).ease(et.easing).tween("text",function(){var Ke=v.select(this),ft=gt(Te[0]),mt=qe._deltaLastValue,pt=Ut(qe.delta.valueformat,Rt,mt,ft),Ot=T(mt,ft);return qe._deltaLastValue=ft,function(Pt){Ke.text(Be(Ot(Pt),pt)),Ke.call(g.fill,Ve({delta:Ot(Pt)}))}}).each("end",function(){je(),tt&&tt()}).each("interrupt",function(){je(),tt&&tt()}):je(),Re=E(Be(gt(Te[0]),Rt),qe.delta.font,$e,Fe),Le}(),dt+=qe.delta.position+qe.delta.font.size+qe.delta.font.family+qe.delta.valueformat,dt+=qe.delta.increasing.symbol+qe.delta.decreasing.symbol,Ue=Re),qe._hasNumber&&(function(){var Qe=M(Fe,{tickformat:qe.number.valueformat},qe._range);Qe.setScale(),s.prepTicks(Qe);var Rt=function(je){return s.tickText(Qe,je).text},gt=qe.number.suffix,Be=qe.number.prefix,Ve=ct.select("text.number");function Le(){var je="number"==typeof Te[0].y?Be+Rt(Te[0].y)+gt:"-";Ve.text(je).call(r.font,qe.number.font).call(h.convertToTspans,Fe)}f(et)?Ve.transition().duration(et.duration).ease(et.easing).each("end",function(){Le(),tt&&tt()}).each("interrupt",function(){Le(),tt&&tt()}).attrTween("text",function(){var je=v.select(this),Ke=T(Te[0].lastY,Te[0].y);qe._lastValue=Te[0].y;var ft=Ut(qe.number.valueformat,Rt,Te[0].lastY,Te[0].y);return function(mt){je.text(Be+ft(Ke(mt))+gt)}}):Le(),Ce=E(Be+Rt(Te[0].y)+gt,qe.number.font,$e,Fe)}(),dt+=qe.number.font.size+qe.number.font.family+qe.number.valueformat+qe.number.suffix+qe.number.prefix,Ue=Ce),qe._hasDelta&&qe._hasNumber){var at,Nt,rn=[(Ce.left+Ce.right)/2,(Ce.top+Ce.bottom)/2],en=[(Re.left+Re.right)/2,(Re.top+Re.bottom)/2],Ge=.75*qe.delta.font.size;"left"===qe.delta.position&&(at=P(qe,"deltaPos",0,-1*(Ce.width*u[qe.align]+Re.width*(1-u[qe.align])+Ge),dt,Math.min),Nt=rn[1]-en[1],Ue={width:Ce.width+Re.width+Ge,height:Math.max(Ce.height,Re.height),left:Re.left+at,right:Ce.right,top:Math.min(Ce.top,Re.top+Nt),bottom:Math.max(Ce.bottom,Re.bottom+Nt)}),"right"===qe.delta.position&&(at=P(qe,"deltaPos",0,Ce.width*(1-u[qe.align])+Re.width*u[qe.align]+Ge,dt,Math.max),Nt=rn[1]-en[1],Ue={width:Ce.width+Re.width+Ge,height:Math.max(Ce.height,Re.height),left:Ce.left,right:Re.right+at,top:Math.min(Ce.top,Re.top+Nt),bottom:Math.max(Ce.bottom,Re.bottom+Nt)}),"bottom"===qe.delta.position&&(at=null,Nt=Re.height,Ue={width:Math.max(Ce.width,Re.width),height:Ce.height+Re.height,left:Math.min(Ce.left,Re.left),right:Math.max(Ce.right,Re.right),top:Ce.bottom-Ce.height,bottom:Ce.bottom+Re.height}),"top"===qe.delta.position&&(at=null,Nt=Ce.top,Ue={width:Math.max(Ce.width,Re.width),height:Ce.height+Re.height,left:Math.min(Ce.left,Re.left),right:Math.max(Ce.right,Re.right),top:Ce.bottom-Ce.height-Re.height,bottom:Ce.bottom}),Ct.attr({dx:at,dy:Nt})}(qe._hasNumber||qe._hasDelta)&&ct.attr("transform",function(){var Rt,Qe=Ie.numbersScaler(Ue),gt=P(qe,"numbersScale",1,Qe[0],dt+=Qe[2],Math.min);qe._scaleNumbers||(gt=1),qe._numbersTop=gt*Ue.top+(Rt=qe._isAngular?st-gt*Ue.bottom:st-gt*(Ue.top+Ue.bottom)/2);var Be=Ue[He];"center"===He&&(Be=(Ue.left+Ue.right)/2);var Ve=Xe-gt*Be;return Ve=P(qe,"numbersTranslate",0,Ve,dt,Math.max),o(Ve,Rt)+e(gt)})})(D,ie,V,{numbersX:Z,numbersY:Y,numbersScaler:Q,transitionOpts:R,onComplete:I}),j&&(re={range:J.gauge.axis.range,color:J.gauge.bgcolor,line:{color:J.gauge.bordercolor,width:0},thickness:1},$={range:J.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:J.gauge.bordercolor,width:J.gauge.borderwidth},thickness:1});var me=ie.selectAll("g.angular").data(q?V:[]);me.exit().remove();var _e=ie.selectAll("g.angularaxis").data(q?V:[]);_e.exit().remove(),q&&function(Fe,ve,Te,Ie){var Ce,Re,Ue,qe,Xe=Te[0].trace,st=Ie.size,He=Ie.radius,$e=Ie.innerRadius,et=Ie.gaugeBg,tt=Ie.gaugeOutline,ct=[st.l+st.w/2,st.t+st.h/2+He/2],bt=Ie.gauge,At=Ie.layer,Ut=Ie.transitionOpts,Ct=Ie.onComplete,dt=Math.PI/2;function at($t){var ut=Xe.gauge.axis.range[0],Dt=($t-ut)/(Xe.gauge.axis.range[1]-ut)*Math.PI-dt;return Dt<-dt?-dt:Dt>dt?dt:Dt}function Nt($t){return v.svg.arc().innerRadius(($e+He)/2-$t/2*(He-$e)).outerRadius(($e+He)/2+$t/2*(He-$e)).startAngle(-dt)}function rn($t){$t.attr("d",function(ut){return Nt(ut.thickness).startAngle(at(ut.range[0])).endAngle(at(ut.range[1]))()})}bt.enter().append("g").classed("angular",!0),bt.attr("transform",o(ct[0],ct[1])),At.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),At.selectAll("g.xangularaxistick,path,text").remove(),(Ce=M(Fe,Xe.gauge.axis)).type="linear",Ce.range=Xe.gauge.axis.range,Ce._id="xangularaxis",Ce.ticklabeloverflow="allow",Ce.setScale();var en=function($t){return(Ce.range[0]-$t.x)/(Ce.range[1]-Ce.range[0])*Math.PI+Math.PI},Ge={},Qe=s.makeLabelFns(Ce,0).labelStandoff;Ge.xFn=function($t){var ut=en($t);return Math.cos(ut)*Qe},Ge.yFn=function($t){var ut=en($t),Dt=Math.sin(ut)>0?.2:1;return-Math.sin(ut)*(Qe+$t.fontSize*Dt)+Math.abs(Math.cos(ut))*($t.fontSize*l)},Ge.anchorFn=function($t){var ut=en($t),Dt=Math.cos(ut);return Math.abs(Dt)<.1?"middle":Dt>0?"start":"end"},Ge.heightFn=function($t,ut,Dt){var Wt=en($t);return-.5*(1+Math.sin(Wt))*Dt};var Rt=function($t){return o(ct[0]+He*Math.cos($t),ct[1]-He*Math.sin($t))};Ue=function($t){return Rt(en($t))},Re=s.calcTicks(Ce),qe=s.getTickSigns(Ce)[2],Ce.visible&&(s.drawTicks(Fe,Ce,{vals:Re,layer:At,path:"M"+(qe="inside"===Ce.ticks?-1:1)*((Ce.linewidth||1)/2)+",0h"+qe*Ce.ticklen,transFn:function($t){var ut=en($t);return Rt(ut)+"rotate("+-i(ut)+")"}}),s.drawLabels(Fe,Ce,{vals:Re,layer:At,transFn:Ue,labelFns:Ge}));var Be=[et].concat(Xe.gauge.steps),Ve=bt.selectAll("g.bg-arc").data(Be);Ve.enter().append("g").classed("bg-arc",!0).append("path"),Ve.select("path").call(rn).call(A),Ve.exit().remove();var Le=Nt(Xe.gauge.bar.thickness),je=bt.selectAll("g.value-arc").data([Xe.gauge.bar]);je.enter().append("g").classed("value-arc",!0).append("path");var ft,mt,pt,Ke=je.select("path");f(Ut)?(Ke.transition().duration(Ut.duration).ease(Ut.easing).each("end",function(){Ct&&Ct()}).each("interrupt",function(){Ct&&Ct()}).attrTween("d",(ft=Le,mt=at(Te[0].lastY),pt=at(Te[0].y),function(){var $t=x(mt,pt);return function(ut){return ft.endAngle($t(ut))()}})),Xe._lastValue=Te[0].y):Ke.attr("d","number"==typeof Te[0].y?Le.endAngle(at(Te[0].y)):"M0,0Z"),Ke.call(A),je.exit().remove(),Be=[];var Ot=Xe.gauge.threshold.value;(Ot||0===Ot)&&Be.push({range:[Ot,Ot],color:Xe.gauge.threshold.color,line:{color:Xe.gauge.threshold.line.color,width:Xe.gauge.threshold.line.width},thickness:Xe.gauge.threshold.thickness});var Pt=bt.selectAll("g.threshold-arc").data(Be);Pt.enter().append("g").classed("threshold-arc",!0).append("path"),Pt.select("path").call(rn).call(A),Pt.exit().remove();var Jt=bt.selectAll("g.gauge-outline").data([tt]);Jt.enter().append("g").classed("gauge-outline",!0).append("path"),Jt.select("path").call(rn).call(A),Jt.exit().remove()}(D,0,V,{radius:le,innerRadius:ue,gauge:me,layer:_e,size:G,gaugeBg:re,gaugeOutline:$,transitionOpts:R,onComplete:I});var Ee=ie.selectAll("g.bullet").data(W?V:[]);Ee.exit().remove();var De=ie.selectAll("g.bulletaxis").data(W?V:[]);De.exit().remove(),W&&function(Fe,ve,Te,Ie){var Ce,Re,Ue,qe,Xe,st=Te[0].trace,He=Ie.gauge,$e=Ie.layer,et=Ie.gaugeBg,tt=Ie.gaugeOutline,ct=Ie.size,bt=st.domain,At=Ie.transitionOpts,Ut=Ie.onComplete;He.enter().append("g").classed("bullet",!0),He.attr("transform",o(ct.l,ct.t)),$e.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),$e.selectAll("g.xbulletaxistick,path,text").remove();var Ct=ct.h,dt=st.gauge.bar.thickness*Ct,at=bt.x[0],Nt=bt.x[0]+(bt.x[1]-bt.x[0])*(st._hasNumber||st._hasDelta?1-y.bulletNumberDomainSize:1);function rn(Ve){Ve.attr("width",function(Le){return Math.max(0,Ce.c2p(Le.range[1])-Ce.c2p(Le.range[0]))}).attr("x",function(Le){return Ce.c2p(Le.range[0])}).attr("y",function(Le){return.5*(1-Le.thickness)*Ct}).attr("height",function(Le){return Le.thickness*Ct})}(Ce=M(Fe,st.gauge.axis))._id="xbulletaxis",Ce.domain=[at,Nt],Ce.setScale(),Re=s.calcTicks(Ce),Ue=s.makeTransTickFn(Ce),qe=s.getTickSigns(Ce)[2],Xe=ct.t+ct.h,Ce.visible&&(s.drawTicks(Fe,Ce,{vals:"inside"===Ce.ticks?s.clipEnds(Ce,Re):Re,layer:$e,path:s.makeTickPath(Ce,Xe,qe),transFn:Ue}),s.drawLabels(Fe,Ce,{vals:Re,layer:$e,transFn:Ue,labelFns:s.makeLabelFns(Ce,Xe)}));var en=[et].concat(st.gauge.steps),Ge=He.selectAll("g.bg-bullet").data(en);Ge.enter().append("g").classed("bg-bullet",!0).append("rect"),Ge.select("rect").call(rn).call(A),Ge.exit().remove();var Qe=He.selectAll("g.value-bullet").data([st.gauge.bar]);Qe.enter().append("g").classed("value-bullet",!0).append("rect"),Qe.select("rect").attr("height",dt).attr("y",(Ct-dt)/2).call(A),f(At)?Qe.select("rect").transition().duration(At.duration).ease(At.easing).each("end",function(){Ut&&Ut()}).each("interrupt",function(){Ut&&Ut()}).attr("width",Math.max(0,Ce.c2p(Math.min(st.gauge.axis.range[1],Te[0].y)))):Qe.select("rect").attr("width","number"==typeof Te[0].y?Math.max(0,Ce.c2p(Math.min(st.gauge.axis.range[1],Te[0].y))):0),Qe.exit().remove();var Rt=Te.filter(function(){return st.gauge.threshold.value||0===st.gauge.threshold.value}),gt=He.selectAll("g.threshold-bullet").data(Rt);gt.enter().append("g").classed("threshold-bullet",!0).append("line"),gt.select("line").attr("x1",Ce.c2p(st.gauge.threshold.value)).attr("x2",Ce.c2p(st.gauge.threshold.value)).attr("y1",(1-st.gauge.threshold.thickness)/2*Ct).attr("y2",(1-(1-st.gauge.threshold.thickness)/2)*Ct).call(g.stroke,st.gauge.threshold.line.color).style("stroke-width",st.gauge.threshold.line.width),gt.exit().remove();var Be=He.selectAll("g.gauge-outline").data([tt]);Be.enter().append("g").classed("gauge-outline",!0).append("rect"),Be.select("rect").call(rn).call(A),Be.exit().remove()}(D,0,V,{gauge:Ee,layer:De,size:G,gaugeBg:re,gaugeOutline:$,transitionOpts:R,onComplete:I});var Se=ie.selectAll("text.title").data(V);Se.exit().remove(),Se.enter().append("text").classed("title",!0),Se.attr("text-anchor",function(){return W?m.right:m[J.title.align]}).text(J.title.text).call(r.font,J.title.font).call(h.convertToTspans,D),Se.attr("transform",function(){var Fe,ve=G.l+G.w*u[J.title.align],Te=y.titlePadding,Ie=r.bBox(Se.node());return j?(q&&(Fe=J.gauge.axis.visible?r.bBox(_e.node()).top-Te-Ie.bottom:G.t+G.h/2-le/2-Ie.bottom-Te),W&&(Fe=Y-(Ie.top+Ie.bottom)/2,ve=G.l-y.bulletPadding*G.w)):Fe=J._numbersTop-Te-Ie.bottom,o(ve,Fe)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,i=_("../../plot_api/edit_types").overrideAll,l=oe.exports=i(o({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),valuehoverformat:x("value",1),showlegend:o({},e.showlegend,{dflt:!1})},v("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:b.opacity,lightposition:b.lightposition,lighting:b.lighting,flatshading:b.flatshading,contour:b.contour,hoverinfo:o({},e.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/calc"),x=_("../streamtube/calc").processGrid,T=_("../streamtube/calc").filter;oe.exports=function(b,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=T(e.x,e._len),e._y=T(e.y,e._len),e._z=T(e.z,e._len),e._value=T(e.value,e._len);var o=x(e);e._gridFill=o.fill,e._Xs=o.Xs,e._Ys=o.Ys,e._Zs=o.Zs,e._len=o.len;for(var i=1/0,l=-1/0,r=0;r<e._len;r++){var y=e._value[r];i=Math.min(i,y),l=Math.max(l,y)}e._minValues=i,e._maxValues=l,e._vMin=null==e.isomin?i:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?l:e.isomax,v(b,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_mesh3d,x=_("../../lib/gl_format_color").parseColorScale,T=_("../../lib/str2rgbarray"),b=_("../../components/colorscale").extractOpts,e=_("../../plots/gl3d/zip3"),o=function(h,s){for(var d=s.length-1;d>0;d--){var p=Math.min(s[d],s[d-1]),c=Math.max(s[d],s[d-1]);if(c>p&&p<h&&h<=c)return{id:d,distRatio:(c-h)/(c-p)}}return{id:0,distRatio:0}};function i(h,s,d){this.scene=h,this.uid=d,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var l=i.prototype;l.handlePick=function(h){if(h.object===this.mesh){var s=h.data.index,p=this.data._meshY[s],c=this.data._meshZ[s],g=this.data._Ys.length,m=this.data._Zs.length,u=o(this.data._meshX[s],this.data._Xs).id,w=o(p,this.data._Ys).id,f=o(c,this.data._Zs).id,A=h.index=f+m*w+m*g*u;h.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&void 0!==M[A]?h.textLabel=M[A]:M&&(h.textLabel=M),!0}},l.update=function(h){var s=this.scene,d=s.fullSceneLayout;function p(m,u,w,f){return u.map(function(A){return m.d2l(A,0,f)*w})}this.data=y(h);var c={positions:e(p(d.xaxis,h._meshX,s.dataScale[0],h.xcalendar),p(d.yaxis,h._meshY,s.dataScale[1],h.ycalendar),p(d.zaxis,h._meshZ,s.dataScale[2],h.zcalendar)),cells:e(h._meshI,h._meshJ,h._meshK),lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:T(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading},g=b(h);c.vertexIntensity=h._meshIntensity,c.vertexIntensityBounds=[g.min,g.max],c.colormap=x(h),this.mesh.update(c)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function y(h){h._meshI=[],h._meshJ=[],h._meshK=[];var s,d,p,c,g,m,u,w=h.surface.show,f=h.spaceframe.show,A=h.surface.fill,M=h.spaceframe.fill,k=!1,E=!1,P=0,D=h._Xs,F=h._Ys,R=h._Zs,L=D.length,I=F.length,B=R.length,V=r.indexOf(h._gridFill.replace(/-/g,"").replace(/\+/g,"")),Z=function(He,$e,et){switch(V){case 5:return et+B*$e+B*I*He;case 4:return et+B*He+B*L*$e;case 3:return $e+I*et+I*B*He;case 2:return $e+I*He+I*L*et;case 1:return He+L*et+L*B*$e;default:return He+L*$e+L*I*et}},Y=h._minValues,Q=h._maxValues,re=h._vMin,$=h._vMax;function J(He,$e,et){for(var tt=m.length,ct=d;ct<tt;ct++)if(He===p[ct]&&$e===c[ct]&&et===g[ct])return ct;return-1}function ie(){d=s}function j(){p=[],c=[],g=[],m=[],s=0,ie()}function q(He,$e,et,tt){return p.push(He),c.push($e),g.push(et),m.push(tt),++s-1}function W(He,$e,et){for(var tt=[],ct=0;ct<He.length;ct++)tt[ct]=He[ct]*(1-et)+et*$e[ct];return tt}function ae(He){u=He}function G(He,$e){return"all"===He||null===He||He.indexOf($e)>-1}function ee(He,$e){return null===He?$e:He}function te(He,$e,et){ie();var ct,bt,gt,Be,Ve,Le,je,Ke,ft,mt,pt,Ot,Pt,Jt,$t,At=[$e],Ut=[et];if(u>=1)At=[$e],Ut=[et];else if(u>0){var Ct=(Be=et,mt=W(Ke=function(ut,Dt,Wt){for(var zt=[],Ht=0;Ht<ut.length;Ht++)zt[Ht]=(ut[Ht]+Dt[Ht]+Wt[Ht])/3;return zt}(Ve=(gt=$e)[0],Le=gt[1],je=gt[2]),Ve,ft=Math.sqrt(1-u)),{xyzv:[[Ve,Le,pt=W(Ke,Le,ft)],[pt,mt,Ve],[Le,je,Ot=W(Ke,je,ft)],[Ot,pt,Le],[je,Ve,mt],[mt,Ot,je]],abc:[[Pt=Be[0],Jt=Be[1],-1],[-1,-1,Pt],[Jt,$t=Be[2],-1],[-1,-1,Jt],[$t,Pt,-1],[-1,-1,$t]]});At=Ct.xyzv,Ut=Ct.abc}for(var dt=0;dt<At.length;dt++){$e=At[dt],et=Ut[dt];for(var at=[],Nt=0;Nt<3;Nt++){var rn=$e[Nt][0],en=$e[Nt][1],Ge=$e[Nt][2],Qe=$e[Nt][3],Rt=et[Nt]>-1?et[Nt]:J(rn,en,Ge);at[Nt]=Rt>-1?Rt:q(rn,en,Ge,ee(He,Qe))}ct=at[1],bt=at[2],h._meshI.push(at[0]),h._meshJ.push(ct),h._meshK.push(bt),++P}}function le(He,$e,et,tt){var ct=He[3];ct<et&&(ct=et),ct>tt&&(ct=tt);for(var bt=(He[3]-ct)/(He[3]-$e[3]+1e-9),At=[],Ut=0;Ut<4;Ut++)At[Ut]=(1-bt)*He[Ut]+bt*$e[Ut];return At}function ue(He,$e,et){return He>=$e&&He<=et}function de(He){var $e=.001*($-re);return He>=re-$e&&He<=$+$e}function he(He){for(var $e=[],et=0;et<4;et++){var tt=He[et];$e.push([h._x[tt],h._y[tt],h._z[tt],h._value[tt]])}return $e}function be(He,$e,et,tt,ct,bt){bt||(bt=1),et=[-1,-1,-1];var At=!1,Ut=[ue($e[0][3],tt,ct),ue($e[1][3],tt,ct),ue($e[2][3],tt,ct)];if(!Ut[0]&&!Ut[1]&&!Ut[2])return!1;var Ct=function(at,Nt,rn){return de(Nt[0][3])&&de(Nt[1][3])&&de(Nt[2][3])?(te(at,Nt,rn),!0):bt<3&&be(at,Nt,rn,re,$,++bt)};if(Ut[0]&&Ut[1]&&Ut[2])return Ct(He,$e,et)||At;var dt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(at){if(Ut[at[0]]&&Ut[at[1]]&&!Ut[at[2]]){var Nt=$e[at[0]],rn=$e[at[1]],en=$e[at[2]],Ge=le(en,Nt,tt,ct),Qe=le(en,rn,tt,ct);At=Ct(He,[Qe,Ge,Nt],[-1,-1,et[at[0]]])||At,At=Ct(He,[Nt,rn,Qe],[et[at[0]],et[at[1]],-1])||At,dt=!0}}),dt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(at){if(Ut[at[0]]&&!Ut[at[1]]&&!Ut[at[2]]){var Nt=$e[at[0]],en=$e[at[2]],Ge=le($e[at[1]],Nt,tt,ct),Qe=le(en,Nt,tt,ct);At=Ct(He,[Qe,Ge,Nt],[-1,-1,et[at[0]]])||At,dt=!0}}),At}function me(He,$e,et,tt){var Ct,dt,at,Nt,ct=!1,bt=he($e),At=[ue(bt[0][3],et,tt),ue(bt[1][3],et,tt),ue(bt[2][3],et,tt),ue(bt[3][3],et,tt)];if(!(At[0]||At[1]||At[2]||At[3]))return ct;if(At[0]&&At[1]&&At[2]&&At[3])return E&&(Ct=He,dt=bt,at=$e,(Nt=function(rn,en,Ge){te(Ct,[dt[rn],dt[en],dt[Ge]],[at[rn],at[en],at[Ge]])})(0,1,2),Nt(3,0,1),Nt(2,3,0),ct=void Nt(1,2,3)||ct),ct;var Ut=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ct){if(At[Ct[0]]&&At[Ct[1]]&&At[Ct[2]]&&!At[Ct[3]]){var dt=bt[Ct[0]],at=bt[Ct[1]],Nt=bt[Ct[2]],rn=bt[Ct[3]];if(E)ct=te(He,[dt,at,Nt],[$e[Ct[0]],$e[Ct[1]],$e[Ct[2]]])||ct;else{var en=le(rn,dt,et,tt),Ge=le(rn,at,et,tt),Qe=le(rn,Nt,et,tt);ct=te(null,[en,Ge,Qe],[-1,-1,-1])||ct}Ut=!0}}),Ut||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ct){if(At[Ct[0]]&&At[Ct[1]]&&!At[Ct[2]]&&!At[Ct[3]]){var dt=bt[Ct[0]],at=bt[Ct[1]],Nt=bt[Ct[2]],rn=bt[Ct[3]],en=le(Nt,dt,et,tt),Ge=le(Nt,at,et,tt),Qe=le(rn,at,et,tt),Rt=le(rn,dt,et,tt);E?(ct=te(He,[dt,Rt,en],[$e[Ct[0]],-1,-1])||ct,ct=te(He,[at,Ge,Qe],[$e[Ct[1]],-1,-1])||ct):(null,Be=[en,Ge,Qe,Rt],Ve=[-1,-1,-1,-1],(Le=function(je,Ke,ft){te(null,[Be[je],Be[Ke],Be[ft]],[Ve[je],Ve[Ke],Ve[ft]])})(0,1,2),ct=void Le(2,3,0)||ct),Ut=!0}var Be,Ve,Le}),Ut||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ct){if(At[Ct[0]]&&!At[Ct[1]]&&!At[Ct[2]]&&!At[Ct[3]]){var dt=bt[Ct[0]],Nt=bt[Ct[2]],rn=bt[Ct[3]],en=le(bt[Ct[1]],dt,et,tt),Ge=le(Nt,dt,et,tt),Qe=le(rn,dt,et,tt);E?(ct=te(He,[dt,en,Ge],[$e[Ct[0]],-1,-1])||ct,ct=te(He,[dt,Ge,Qe],[$e[Ct[0]],-1,-1])||ct,ct=te(He,[dt,Qe,en],[$e[Ct[0]],-1,-1])||ct):ct=te(null,[en,Ge,Qe],[-1,-1,-1])||ct,Ut=!0}})),ct}function _e(He,$e,et,tt,ct,bt,At,Ut,Ct,dt,at){var Nt=!1;return k&&(G(He,"A")&&(Nt=me(null,[$e,et,tt,bt],dt,at)||Nt),G(He,"B")&&(Nt=me(null,[et,tt,ct,Ct],dt,at)||Nt),G(He,"C")&&(Nt=me(null,[et,bt,At,Ct],dt,at)||Nt),G(He,"D")&&(Nt=me(null,[tt,bt,Ut,Ct],dt,at)||Nt),G(He,"E")&&(Nt=me(null,[et,tt,bt,Ct],dt,at)||Nt)),E&&(Nt=me(He,[et,tt,bt,Ct],dt,at)||Nt),Nt}function Ee(He,$e,et,tt,ct,bt,At,Ut){return[!0===Ut[0]||be(He,he([$e,et,tt]),[$e,et,tt],bt,At),!0===Ut[1]||be(He,he([tt,ct,$e]),[tt,ct,$e],bt,At)]}function De(He,$e,et,tt,ct,bt,At,Ut,Ct){return Ut?Ee(He,$e,et,ct,tt,bt,At,Ct):Ee(He,et,ct,tt,$e,bt,At,Ct)}function Se(He,$e,et,tt,ct,bt,At){var Ut,Ct,dt,at,Nt=!1,rn=function(){Nt=be(He,[Ut,Ct,dt],[-1,-1,-1],ct,bt)||Nt,Nt=be(He,[dt,at,Ut],[-1,-1,-1],ct,bt)||Nt},en=At[0],Ge=At[1],Qe=At[2];return en&&(Ut=W(he([Z($e,et-0,tt-0)])[0],he([Z($e-1,et-0,tt-0)])[0],en),Ct=W(he([Z($e,et-0,tt-1)])[0],he([Z($e-1,et-0,tt-1)])[0],en),dt=W(he([Z($e,et-1,tt-1)])[0],he([Z($e-1,et-1,tt-1)])[0],en),at=W(he([Z($e,et-1,tt-0)])[0],he([Z($e-1,et-1,tt-0)])[0],en),rn()),Ge&&(Ut=W(he([Z($e-0,et,tt-0)])[0],he([Z($e-0,et-1,tt-0)])[0],Ge),Ct=W(he([Z($e-0,et,tt-1)])[0],he([Z($e-0,et-1,tt-1)])[0],Ge),dt=W(he([Z($e-1,et,tt-1)])[0],he([Z($e-1,et-1,tt-1)])[0],Ge),at=W(he([Z($e-1,et,tt-0)])[0],he([Z($e-1,et-1,tt-0)])[0],Ge),rn()),Qe&&(Ut=W(he([Z($e-0,et-0,tt)])[0],he([Z($e-0,et-0,tt-1)])[0],Qe),Ct=W(he([Z($e-0,et-1,tt)])[0],he([Z($e-0,et-1,tt-1)])[0],Qe),dt=W(he([Z($e-1,et-1,tt)])[0],he([Z($e-1,et-1,tt-1)])[0],Qe),at=W(he([Z($e-1,et-0,tt)])[0],he([Z($e-1,et-0,tt-1)])[0],Qe),rn()),Nt}function Fe(He,$e,et,tt,ct,bt,At,Ut,Ct,dt,at,Nt){var rn=He;return Nt?(k&&"even"===He&&(rn=null),_e(rn,$e,et,tt,ct,bt,At,Ut,Ct,dt,at)):(k&&"odd"===He&&(rn=null),_e(rn,Ct,Ut,At,bt,ct,tt,et,$e,dt,at))}function ve(He,$e,et,tt,ct){for(var bt=[],At=0,Ut=0;Ut<$e.length;Ut++)for(var Ct=$e[Ut],dt=1;dt<B;dt++)for(var at=1;at<I;at++)bt.push(De(He,Z(Ct,at-1,dt-1),Z(Ct,at-1,dt),Z(Ct,at,dt-1),Z(Ct,at,dt),et,tt,(Ct+at+dt)%2,ct&&ct[At]?ct[At]:[])),At++;return bt}function Te(He,$e,et,tt,ct){for(var bt=[],At=0,Ut=0;Ut<$e.length;Ut++)for(var Ct=$e[Ut],dt=1;dt<L;dt++)for(var at=1;at<B;at++)bt.push(De(He,Z(dt-1,Ct,at-1),Z(dt,Ct,at-1),Z(dt-1,Ct,at),Z(dt,Ct,at),et,tt,(dt+Ct+at)%2,ct&&ct[At]?ct[At]:[])),At++;return bt}function Ie(He,$e,et,tt,ct){for(var bt=[],At=0,Ut=0;Ut<$e.length;Ut++)for(var Ct=$e[Ut],dt=1;dt<I;dt++)for(var at=1;at<L;at++)bt.push(De(He,Z(at-1,dt-1,Ct),Z(at-1,dt,Ct),Z(at,dt-1,Ct),Z(at,dt,Ct),et,tt,(at+dt+Ct)%2,ct&&ct[At]?ct[At]:[])),At++;return bt}function Ce(He,$e,et){for(var tt=1;tt<B;tt++)for(var ct=1;ct<I;ct++)for(var bt=1;bt<L;bt++)Fe(He,Z(bt-1,ct-1,tt-1),Z(bt-1,ct-1,tt),Z(bt-1,ct,tt-1),Z(bt-1,ct,tt),Z(bt,ct-1,tt-1),Z(bt,ct-1,tt),Z(bt,ct,tt-1),Z(bt,ct,tt),$e,et,(bt+ct+tt)%2)}function Re(He,$e,et){k=!0,Ce(He,$e,et),k=!1}function Ue(He,$e,et,tt,ct,bt){for(var At=[],Ct=0;Ct<$e.length;Ct++)for(var dt=$e[Ct],at=1;at<B;at++)for(var Nt=1;Nt<I;Nt++)At.push(Se(He,dt,Nt,at,et,tt,ct[Ct]));return At}function qe(He,$e,et,tt,ct,bt){for(var At=[],Ct=0;Ct<$e.length;Ct++)for(var dt=$e[Ct],at=1;at<L;at++)for(var Nt=1;Nt<B;Nt++)At.push(Se(He,at,dt,Nt,et,tt,ct[Ct]));return At}function Xe(He,$e,et,tt,ct,bt){for(var At=[],Ct=0;Ct<$e.length;Ct++)for(var dt=$e[Ct],at=1;at<I;at++)for(var Nt=1;Nt<L;Nt++)At.push(Se(He,Nt,at,dt,et,tt,ct[Ct]));return At}function st(He,$e){for(var et=[],tt=He;tt<$e;tt++)et.push(tt);return et}return function(){if(j(),function(){for(var Ut=0;Ut<L;Ut++)for(var Ct=0;Ct<I;Ct++)for(var dt=0;dt<B;dt++){var at=Z(Ut,Ct,dt);q(h._x[at],h._y[at],h._z[at],h._value[at])}}(),f&&M&&(ae(M),E=!0,Ce(null,re,$),E=!1),w&&A){ae(A);for(var He=h.surface.pattern,$e=h.surface.count,et=0;et<$e;et++){var tt=1===$e?.5:et/($e-1),ct=(1-tt)*re+tt*$,bt=Math.abs(ct-Y)>Math.abs(ct-Q)?[Y,ct]:[ct,Q];Re(He,bt[0],bt[1])}}var At=[[Math.min(re,Q),Math.max(re,Q)],[Math.min(Y,$),Math.max(Y,$)]];["x","y","z"].forEach(function(Ut){for(var Ct=[],dt=0;dt<At.length;dt++){var at=0,Nt=At[dt][0],rn=At[dt][1],en=h.slices[Ut];if(en.show&&en.fill){ae(en.fill);var Ge=[],Qe=[],Rt=[];if(en.locations.length)for(var gt=0;gt<en.locations.length;gt++){var Be=o(en.locations[gt],"x"===Ut?D:"y"===Ut?F:R);0===Be.distRatio?Ge.push(Be.id):Be.id>0&&(Qe.push(Be.id),Rt.push("x"===Ut?[Be.distRatio,0,0]:"y"===Ut?[0,Be.distRatio,0]:[0,0,Be.distRatio]))}else Ge=st(1,"x"===Ut?L-1:"y"===Ut?I-1:B-1);Qe.length>0&&(Ct[at]="x"===Ut?Ue(null,Qe,Nt,rn,Rt):"y"===Ut?qe(null,Qe,Nt,rn,Rt):Xe(null,Qe,Nt,rn,Rt),at++),Ge.length>0&&(Ct[at]="x"===Ut?ve(null,Ge,Nt,rn,Ct[at]):"y"===Ut?Te(null,Ge,Nt,rn,Ct[at]):Ie(null,Ge,Nt,rn,Ct[at]),at++)}var Ve=h.caps[Ut];Ve.show&&Ve.fill&&(ae(Ve.fill),Ct[at]="x"===Ut?ve(null,[0,L-1],Nt,rn,Ct[at]):"y"===Ut?Te(null,[0,I-1],Nt,rn,Ct[at]):Ie(null,[0,B-1],Nt,rn,Ct[at]),at++)}}),0===P&&j(),h._meshX=p,h._meshY=c,h._meshZ=g,h._meshIntensity=m,h._Xs=D,h._Ys=F,h._Zs=R}(),h}oe.exports={findNearestOnAxis:o,generateIsoMeshes:y,createIsosurfaceTrace:function(h,s){var p=v({gl:h.glplot.gl}),c=new i(h,p,s.uid);return p._trace=c,c.update(s),h.glplot.add(p),c}}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry"),T=_("./attributes"),b=_("../../components/colorscale/defaults");function e(o,i,l,r,y){var h=y("isomin"),s=y("isomax");null!=s&&null!=h&&h>s&&(i.isomin=null,i.isomax=null);var d=y("x"),p=y("y"),c=y("z"),g=y("value");d&&d.length&&p&&p.length&&c&&c.length&&g&&g.length?(x.getComponentMethod("calendars","handleTraceDefaults")(o,i,["x","y","z"],r),y("valuehoverformat"),["x","y","z"].forEach(function(m){y(m+"hoverformat");var u="caps."+m;y(u+".show")&&y(u+".fill");var w="slices."+m;y(w+".show")&&(y(w+".fill"),y(w+".locations"))}),y("spaceframe.show")&&y("spaceframe.fill"),y("surface.show")&&(y("surface.count"),y("surface.fill"),y("surface.pattern")),y("contour.show")&&(y("contour.color"),y("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){y(m)}),b(o,i,r,y,{prefix:"",cLetter:"c"}),i._length=null):i.visible=!1}oe.exports={supplyDefaults:function(o,i,l,r){e(o,i,0,r,function(y,h){return v.coerce(o,i,T,y,h)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,calc:_("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../surface/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat;oe.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"}),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},v("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:b.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},b.contours.x.show,{}),color:b.contours.x.color,width:b.contours.x.width,editType:"calc"},lightposition:{x:o({},b.lightposition.x,{dflt:1e5}),y:o({},b.lightposition.y,{dflt:1e5}),z:o({},b.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},b.lighting),hoverinfo:o({},e.hoverinfo,{editType:"calc"}),showlegend:o({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/calc");oe.exports=function(x,T){T.intensity&&v(x,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_mesh3d,x=_("../../../stackgl_modules").delaunay_triangulate,T=_("../../../stackgl_modules").alpha_shape,b=_("../../../stackgl_modules").convex_hull,e=_("../../lib/gl_format_color").parseColorScale,o=_("../../lib/str2rgbarray"),i=_("../../components/colorscale").extractOpts,l=_("../../plots/gl3d/zip3");function r(c,g,m){this.scene=c,this.uid=m,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var y=r.prototype;function h(c){for(var g=[],m=c.length,u=0;u<m;u++)g[u]=o(c[u]);return g}function s(c,g,m,u){for(var w=[],f=g.length,A=0;A<f;A++)w[A]=c.d2l(g[A],0,u)*m;return w}function d(c){for(var g=[],m=c.length,u=0;u<m;u++)g[u]=Math.round(c[u]);return g}function p(c,g){for(var m=c.length,u=0;u<m;u++)if(c[u]<=-.5||c[u]>=g-.5)return!1;return!0}y.handlePick=function(c){if(c.object===this.mesh){var g=c.index=c.data.index;c.traceCoordinate=c.data._cellCenter?c.data.dataCoordinate:[this.data.x[g],this.data.y[g],this.data.z[g]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&void 0!==m[g]?c.textLabel=m[g]:m&&(c.textLabel=m),!0}},y.update=function(c){var g=this.scene,m=g.fullSceneLayout;this.data=c;var u,w=c.x.length,f=l(s(m.xaxis,c.x,g.dataScale[0],c.xcalendar),s(m.yaxis,c.y,g.dataScale[1],c.ycalendar),s(m.zaxis,c.z,g.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!p(c.i,w)||!p(c.j,w)||!p(c.k,w))return;u=l(d(c.i),d(c.j),d(c.k))}else u=0===c.alphahull?b(f):c.alphahull>0?T(c.alphahull,f):function(E,P){for(var D=["x","y","z"].indexOf(E),F=[],R=P.length,L=0;L<R;L++)F[L]=[P[L][(D+1)%3],P[L][(D+2)%3]];return x(F)}(c.delaunayaxis,f);var A={positions:f,cells:u,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:o(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var M=i(c);this.color="#fff";var k=c.intensitymode;A[k+"Intensity"]=c.intensity,A[k+"IntensityBounds"]=[M.min,M.max],A.colormap=e(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],A.vertexColors=h(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],A.cellColors=h(c.facecolor)):(this.color=c.color,A.meshColor=o(c.color));this.mesh.update(A)},y.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(c,g){var u=v({gl:c.glplot.gl}),w=new r(c,u,g.uid);return u._trace=w,w.update(g),c.glplot.add(u),w}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../../components/colorscale/defaults"),b=_("./attributes");oe.exports=function(e,o,i,l){function r(h,s){return x.coerce(e,o,b,h,s)}function y(h){var s=h.map(function(d){var p=r(d);return p&&x.isArrayOrTypedArray(p)?p:null});return s.every(function(d){return d&&d.length===s[0].length})&&s}y(["x","y","z"])?(y(["i","j","k"]),(!o.i||o.j&&o.k)&&(!o.j||o.k&&o.i)&&(!o.k||o.i&&o.j)?(v.getComponentMethod("calendars","handleTraceDefaults")(e,o,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(h){r(h)}),r("contour.show")&&(r("contour.color"),r("contour.width")),"intensity"in e?(r("intensity"),r("intensitymode"),T(e,o,l,r,{prefix:"",cLetter:"c"})):(o.showscale=!1,"facecolor"in e?r("facecolor"):"vertexcolor"in e?r("vertexcolor"):r("color",i)),r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),o._length=null):o.visible=!1):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(_,oe,se){"use strict";var v=_("../../lib").extendFlat,x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../components/drawing/attributes").dash,e=_("../../components/fx/attributes"),o=_("../../constants/delta.js"),i=o.INCREASING.COLOR,l=o.DECREASING.COLOR,r=x.line;function y(h){return{line:{color:v({},r.color,{dflt:h}),width:r.width,dash:b,editType:"style"},editType:"style"}}oe.exports={xperiod:x.xperiod,xperiod0:x.xperiod0,xperiodalignment:x.xperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:v({},r.width,{}),dash:v({},b,{}),editType:"style"},increasing:y(i),decreasing:y(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:v({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(_,oe,se){"use strict";var v=_("../../lib"),x=v._,T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../../constants/numerical").BADNUM;function o(l,r,y,h){return{o:l,h:r,l:y,c:h}}function i(l,r,y,h,s,d){for(var p=s.makeCalcdata(r,"open"),c=s.makeCalcdata(r,"high"),g=s.makeCalcdata(r,"low"),m=s.makeCalcdata(r,"close"),u=Array.isArray(r.text),w=Array.isArray(r.hovertext),f=!0,A=null,M=!!r.xperiodalignment,k=[],E=0;E<h.length;E++){var P=h[E],D=p[E],F=c[E],R=g[E],L=m[E];if(P!==e&&D!==e&&F!==e&&R!==e&&L!==e){L===D?null!==A&&L!==A&&(f=L>A):f=L>D,A=L;var I=d(D,F,R,L);I.pos=P,I.yc=(D+L)/2,I.i=E,I.dir=f?"increasing":"decreasing",I.x=I.pos,I.y=[R,F],M&&(I.orig_p=y[E]),u&&(I.tx=r.text[E]),w&&(I.htx=r.hovertext[E]),k.push(I)}else k.push({pos:P,empty:!0})}return r._extremes[s._id]=T.findExtremes(s,v.concat(g,c),{padded:!0}),k.length&&(k[0].t={labels:{open:x(l,"open:")+" ",high:x(l,"high:")+" ",low:x(l,"low:")+" ",close:x(l,"close:")+" "}}),k}oe.exports={calc:function(l,r){var y=T.getFromId(l,r.xaxis),h=T.getFromId(l,r.yaxis),s=function(m,u,w){var f=w._minDiff;if(!f){var A,M=m._fullData,k=[];for(f=1/0,A=0;A<M.length;A++){var E=M[A];if("ohlc"===E.type&&!0===E.visible&&E.xaxis===u._id){k.push(E);var P=u.makeCalcdata(E,"x");E._origX=P;var D=b(w,u,"x",P).vals;E._xcalc=D;var F=v.distinctVals(D).minDiff;F&&isFinite(F)&&(f=Math.min(f,F))}}for(f===1/0&&(f=1),A=0;A<k.length;A++)k[A]._minDiff=f}return f*w.tickwidth}(l,y,r),d=r._minDiff;r._minDiff=null;var p=r._origX;r._origX=null;var c=r._xcalc;r._xcalc=null;var g=i(l,r,p,c,h,o);return r._extremes[y._id]=T.findExtremes(y,c,{vpad:d/2}),g.length?(v.extendFlat(g[0].t,{wHover:d/2,tickLen:s}),g):[{t:{empty:!0}}]},calcCommon:i}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./ohlc_defaults"),T=_("../scatter/period_defaults"),b=_("./attributes");function e(o,i,l,r){l(r+".line.color"),l(r+".line.width",i.line.width),l(r+".line.dash",i.line.dash)}oe.exports=function(o,i,l,r){function y(h,s){return v.coerce(o,i,b,h,s)}x(o,i,y,r)?(T(o,i,r,y,{x:!0}),y("xhoverformat"),y("yhoverformat"),y("line.width"),y("line.dash"),e(0,i,y,"increasing"),e(0,i,y,"decreasing"),y("text"),y("hovertext"),y("tickwidth"),r._requestRangeslider[i.xaxis]=!0):i.visible=!1}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../components/fx"),b=_("../../components/color"),e=_("../../lib").fillText,o=_("../../constants/delta.js"),i={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function l(h,s,d,p){var c,g,m=h.cd,u=h.xa,w=m[0].trace,f=m[0].t,A=w.type,M="ohlc"===A?"l":"min",k="ohlc"===A?"h":"max",E=f.bPos||0,P=f.bdPos||f.tickLen,D=f.wHover,F=Math.min(1,P/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function R(Q){var re=Q.pos+E-s;return T.inbox(re-D,re+D,c)}function L(Q){var re=Q[M],$=Q[k];return re===$||T.inbox(re-d,$-d,c)}function I(Q){return(R(Q)+L(Q))/2}c=h.maxHoverDistance-F,g=h.maxSpikeDistance-F;var B=T.getDistanceFunction(p,R,L,I);if(T.getClosest(m,B,h),!1===h.index)return null;var V=m[h.index];if(V.empty)return null;var Z=w[V.dir],Y=Z.line.color;return h.color=b.opacity(Y)&&Z.line.width?Y:Z.fillcolor,h.x0=u.c2p(V.pos+E-P,!0),h.x1=u.c2p(V.pos+E+P,!0),h.xLabelVal=void 0!==V.orig_p?V.orig_p:V.pos,h.spikeDistance=I(V)*g/c,h.xSpike=u.c2p(V.pos,!0),h}function r(h,s,d,p){var c=h.cd,g=h.ya,m=c[0].trace,u=c[0].t,w=[],f=l(h,s,d,p);if(!f)return[];var A=c[f.index].hi||m.hoverinfo,M=A.split("+");if("all"!==A&&-1===M.indexOf("y"))return[];for(var k=["high","open","close","low"],E={},P=0;P<k.length;P++){var D,F=k[P],R=m[F][f.index],L=g.c2p(R,!0);R in E?(D=E[R]).yLabel+="<br>"+u.labels[F]+v.hoverLabelText(g,R,m.yhoverformat):((D=x.extendFlat({},f)).y0=D.y1=L,D.yLabelVal=R,D.yLabel=u.labels[F]+v.hoverLabelText(g,R,m.yhoverformat),D.name="",w.push(D),E[R]=D)}return w}function y(h,s,d,p){var c=h.cd,g=h.ya,m=c[0].trace,u=c[0].t,w=l(h,s,d,p);if(!w)return[];var f=c[w.index],A=w.index=f.i,M=f.dir;function k(I){return u.labels[I]+v.hoverLabelText(g,m[I][A],m.yhoverformat)}var E=f.hi||m.hoverinfo,P=E.split("+"),D="all"===E,F=D||-1!==P.indexOf("y"),R=D||-1!==P.indexOf("text"),L=F?[k("open"),k("high"),k("low"),k("close")+"  "+i[M]]:[];return R&&e(f,m,L),w.extraText=L.join("<br>"),w.y0=w.y1=g.c2p(f.yc,!0),[w]}oe.exports={hoverPoints:function(h,s,d,p){return h.cd[0].trace.hoverlabel.split?r(h,s,d,p):y(h,s,d,p)},hoverSplit:r,hoverOnPoints:y}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"ohlc",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc").calc,plot:_("./plot"),style:_("./style"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib");oe.exports=function(T,b,e,o){var i=e("x"),l=e("open"),r=e("high"),y=e("low"),h=e("close");if(e("hoverlabel.split"),v.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x"],o),l&&r&&y&&h){var s=Math.min(l.length,r.length,y.length,h.length);return i&&(s=Math.min(s,x.minRowLength(i))),b._length=s,s}}},{"../../lib":503,"../../registry":638}],878:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib");oe.exports=function(T,b,e,o){var i=b.yaxis,l=b.xaxis,r=!!l.rangebreaks;x.makeTraceGroups(o,e,"trace ohlc").each(function(y){var h=v.select(this),s=y[0],d=s.t;if(!0!==s.trace.visible||d.empty)h.remove();else{var p=d.tickLen,c=h.selectAll("path").data(x.identity);c.enter().append("path"),c.exit().remove(),c.attr("d",function(g){if(g.empty)return"M0,0Z";var m=l.c2p(g.pos-p,!0),u=l.c2p(g.pos+p,!0),w=r?(m+u)/2:l.c2p(g.pos,!0);return"M"+m+","+i.c2p(g.o,!0)+"H"+w+"M"+w+","+i.c2p(g.h,!0)+"V"+i.c2p(g.l,!0)+"M"+u+","+i.c2p(g.c,!0)+"H"+w})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(_,oe,se){"use strict";oe.exports=function(v,x){var T,b=v.cd,e=v.xaxis,o=v.yaxis,i=[],l=b[0].t.bPos||0;if(!1===x)for(T=0;T<b.length;T++)b[T].selected=0;else for(T=0;T<b.length;T++){var r=b[T];x.contains([e.c2p(r.pos+l),o.c2p(r.yc)],null,r.i,v)?(i.push({pointNumber:r.i,x:e.c2d(r.pos),y:o.c2d(r.yc)}),r.selected=1):r.selected=0}return i}},{}],880:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color");oe.exports=function(b,e,o){var i=o||v.select(b).selectAll("g.ohlclayer").selectAll("g.trace");i.style("opacity",function(l){return l[0].trace.opacity}),i.each(function(l){var r=l[0].trace;v.select(this).selectAll("path").each(function(y){if(!y.empty){var h=r[y.dir].line;v.select(this).style("fill","none").call(T.stroke,h.color).call(x.dashLine,h.dash,h.width).style("opacity",r.selectedpoints&&!y.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(_,oe,se){"use strict";var v=_("../../lib/extend").extendFlat,x=_("../../plots/attributes"),T=_("../../plots/font_attributes"),b=_("../../components/colorscale/attributes"),e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/domain").attributes,i=v({editType:"calc"},b("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});oe.exports={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:v({},x.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:T({editType:"calc"}),tickfont:T({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(_,oe,se){"use strict";var v=_("../../plots/get_data").getModuleCalcData,x=_("./plot");se.name="parcats",se.plot=function(T,b,e,o){var i=v(T.calcdata,"parcats");i.length&&x(T,i[0],e,o)},se.clean=function(T,b,e,o){var i=o._has&&o._has("parcats"),l=b._has&&b._has("parcats");i&&!l&&o._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(_,oe,se){"use strict";var v=_("../../lib/gup").wrap,x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/calc"),b=_("../../lib/filter_unique.js"),e=_("../../components/drawing"),o=_("../../lib"),i=_("fast-isnumeric");function l(h,s,d){h.valueInds.push(s),h.count+=d}function r(h,s,d){return{categoryInds:h,color:s,rawColor:d,valueInds:[],count:0}}function y(h,s,d){h.valueInds.push(s),h.count+=d}oe.exports=function(h,s){var d=o.filterVisible(s.dimensions);if(0===d.length)return[];var p,c,g,m=d.map(function(J){var ie;if("trace"===J.categoryorder)ie=null;else if("array"===J.categoryorder)ie=J.categoryarray;else{ie=b(J.values);for(var j=!0,q=0;q<ie.length;q++)if(!i(ie[q])){j=!1;break}ie.sort(j?o.sorterAsc:void 0),"category descending"===J.categoryorder&&(ie=ie.reverse())}return function(W,ae){ae=null==ae?[]:ae.map(function(be){return be});var G={},ee={},te=[];ae.forEach(function(be,me){G[be]=0,ee[be]=me});for(var le=0;le<W.length;le++){var ue,de=W[le];void 0===G[de]?(G[de]=1,ue=ae.push(de)-1,ee[de]=ue):(G[de]++,ue=ee[de]),te.push(ue)}var he=ae.map(function(be){return G[be]});return{uniqueValues:ae,uniqueCounts:he,inds:te}}(J.values,ie)});p=o.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(J){var ie;if(function(j){for(var q=new Array(j.length),W=0;W<j.length;W++){if(j[W]<0||j[W]>=j.length||void 0!==q[j[W]])return!1;q[j[W]]=!0}return!0}(J.map(function(j){return j.displayindex})))for(ie=0;ie<J.length;ie++)J[ie]._displayindex=J[ie].displayindex;else for(ie=0;ie<J.length;ie++)J[ie]._displayindex=ie}(d),d.forEach(function(J,ie){!function(j,q){j._categoryarray=q.uniqueValues,j._ticktext=null==j.ticktext?[]:j.ticktext.slice();for(var W=j._ticktext.length;W<q.uniqueValues.length;W++)j._ticktext.push(q.uniqueValues[W])}(J,m[ie])});var u,w=s.line;w?(x(s,"line")&&T(h,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),u=e.tryColorscale(w)):u=o.identity;var f,A,M,k,E,P=d[0].values.length,D={},F=m.map(function(J){return J.inds});for(g=0,f=0;f<P;f++){var R=[];for(A=0;A<F.length;A++)R.push(F[A][f]);g+=c=p[f%p.length];var L=(M=f,k=void 0,E=void 0,o.isArrayOrTypedArray(w.color)?E=k=w.color[M%w.color.length]:k=w.color,{color:u(k),rawColor:E}),I=R+"-"+L.rawColor;void 0===D[I]&&(D[I]=r(R,L.color,L.rawColor)),y(D[I],f,c)}var B,J,ie,j,q,V=d.map(function(J,ie){return{dimensionInd:ie,containerInd:J._index,displayInd:J._displayindex,dimensionLabel:J.label,count:g,categories:[],dragX:null}});for(f=0;f<P;f++)for(c=p[f%p.length],A=0;A<V.length;A++){var Z=V[A].containerInd,Y=m[A].inds[f],Q=V[A].categories;void 0===Q[Y]&&(Q[Y]={dimensionInd:A,categoryInd:B=Y,categoryValue:s.dimensions[Z]._categoryarray[Y],displayInd:B,categoryLabel:s.dimensions[Z]._ticktext[Y],valueInds:[],count:0,dragY:null}),l(Q[Y],f,c)}return v((ie=D,j=g,q=(J=V).map(function(W){return W.categories.length}).reduce(function(W,ae){return Math.max(W,ae)}),{dimensions:J,paths:ie,trace:void 0,maxCats:q,count:j}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../plots/domain").defaults,e=_("../../plots/array_container_defaults"),o=_("./attributes"),i=_("../parcoords/merge_length");function l(r,y){function h(u,w){return v.coerce(r,y,o.dimensions,u,w)}var s=h("values"),d=h("visible");if(s&&s.length||(d=y.visible=!1),d){h("label"),h("displayindex",y._index);var p,c=r.categoryarray,g=Array.isArray(c)&&c.length>0;g&&(p="array");var m=h("categoryorder",p);"array"===m?(h("categoryarray"),h("ticktext")):(delete r.categoryarray,delete r.ticktext),g||"array"!==m||(y.categoryorder="trace")}}oe.exports=function(r,y,h,s){function d(u,w){return v.coerce(r,y,o,u,w)}var p=e(r,y,{name:"dimensions",handleItemDefaults:l}),c=function(u,w,f,A,M){M("line.shape"),M("line.hovertemplate");var k=M("line.color",A.colorway[0]);if(x(u,"line")&&v.isArrayOrTypedArray(k)){if(k.length)return M("line.colorscale"),T(u,w,A,M,{prefix:"line.",cLetter:"c"}),k.length;w.line.color=f}return 1/0}(r,y,h,s,d);b(y,s,d),Array.isArray(p)&&p.length||(y.visible=!1),i(y,p,"values",c),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var g={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};v.coerceFont(d,"labelfont",g);var m={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};v.coerceFont(d,"tickfont",m)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:_("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-interpolate").interpolateNumber,T=_("../../plot_api/plot_api"),b=_("../../components/fx"),e=_("../../lib"),o=e.strTranslate,i=_("../../components/drawing"),l=_("tinycolor2"),r=_("../../lib/svg_text_utils");function y(j,q,W,ae){var G=j.map(Q.bind(0,q,W)),ee=ae.selectAll("g.parcatslayer").data([null]);ee.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var te=ee.selectAll("g.trace.parcats").data(G,h),le=te.enter().append("g").attr("class","trace parcats");te.attr("transform",function(Se){return o(Se.x,Se.y)}),le.append("g").attr("class","paths");var ue=te.select("g.paths").selectAll("path.path").data(function(Se){return Se.paths},h);ue.attr("fill",function(Se){return Se.model.color});var de=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Se){return Se.model.color}).attr("fill-opacity",0);w(de),ue.attr("d",function(Se){return Se.svgD}),de.empty()||ue.sort(d),ue.exit().remove(),ue.on("mouseover",p).on("mouseout",c).on("click",u),le.append("g").attr("class","dimensions");var he=te.select("g.dimensions").selectAll("g.dimension").data(function(Se){return Se.dimensions},h);he.enter().append("g").attr("class","dimension"),he.attr("transform",function(Se){return o(Se.x,0)}),he.exit().remove();var be=he.selectAll("g.category").data(function(Se){return Se.categories},h),me=be.enter().append("g").attr("class","category");be.attr("transform",function(Se){return o(0,Se.y)}),me.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}),A(me);var _e=be.selectAll("rect.bandrect").data(function(Se){return Se.bands},h);_e.each(function(){e.raiseToTop(this)}),_e.attr("fill",function(Se){return Se.color});var Ee=_e.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Se){return Se.color}).attr("fill-opacity",0);_e.attr("fill",function(Se){return Se.color}).attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}).attr("y",function(Se){return Se.y}).attr("cursor",function(Se){return"fixed"===Se.parcatsViewModel.arrangement?"default":"perpendicular"===Se.parcatsViewModel.arrangement?"ns-resize":"move"}),M(Ee),_e.exit().remove(),me.append("text").attr("class","catlabel").attr("pointer-events","none");var De=q._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Se){return s(Se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(De)).style("fill","rgb(0, 0, 0)").attr("x",function(Se){return s(Se)?Se.width+5:-5}).attr("y",function(Se){return Se.height/2}).text(function(Se){return Se.model.categoryLabel}).each(function(Se){i.font(v.select(this),Se.parcatsViewModel.categorylabelfont),r.convertToTspans(v.select(this),q)}),me.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Se){return"fixed"===Se.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Se){return Se.width/2}).attr("y",-5).text(function(Se,Fe){return 0===Fe?Se.parcatsViewModel.model.dimensions[Se.model.dimensionInd].dimensionLabel:null}).each(function(Se){i.font(v.select(this),Se.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",F).on("mouseout",R),be.exit().remove(),he.call(v.behavior.drag().origin(function(Se){return{x:Se.x,y:0}}).on("dragstart",L).on("drag",I).on("dragend",B)),te.each(function(Se){Se.traceSelection=v.select(this),Se.pathSelection=v.select(this).selectAll("g.paths").selectAll("path.path"),Se.dimensionSelection=v.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),te.exit().remove()}function h(j){return j.key}function s(j){return j.model.dimensionInd===j.parcatsViewModel.dimensions[j.parcatsViewModel.dimensions.length-1].model.dimensionInd}function d(j,q){return j.model.rawColor>q.model.rawColor?1:j.model.rawColor<q.model.rawColor?-1:0}function p(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),f(v.select(this));var q=g(j),W=m(j);if(j.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:v.event,constraints:W}),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")){var ae,G,ee,te=v.mouse(this)[0],le=j.parcatsViewModel.graphDiv,ue=j.parcatsViewModel.trace,de=le._fullLayout,he=de._paperdiv.node().getBoundingClientRect(),be=j.parcatsViewModel.graphDiv.getBoundingClientRect();for(ee=0;ee<j.leftXs.length-1;ee++)if(j.leftXs[ee]+j.dimWidths[ee]-2<=te&&te<=j.leftXs[ee+1]+2){var me=j.parcatsViewModel.dimensions[ee];ae=(me.x+me.width+j.parcatsViewModel.dimensions[ee+1].x)/2,G=(j.topYs[ee]+j.topYs[ee+1]+j.height)/2;break}var Ee=j.parcatsViewModel.x+ae,De=j.parcatsViewModel.y+G,Se=l.mostReadable(j.model.color,["black","white"]),Fe=j.model.count,ve=Fe/j.parcatsViewModel.model.count,Te={countLabel:Fe,probabilityLabel:ve.toFixed(3)},Ie=[];-1!==j.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ie.push(["Count:",Te.countLabel].join(" ")),-1!==j.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ie.push(["P:",Te.probabilityLabel].join(" "));var Ce=Ie.join("<br>"),Re=v.mouse(le)[0];b.loneHover({trace:ue,x:Ee-he.left+be.left,y:De-he.top+be.top,text:Ce,color:j.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Se,idealAlign:Re<Ee?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:Te,eventData:[{data:ue._input,fullData:ue,count:Fe,probability:ve}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:le})}}}function c(j){if(!j.parcatsViewModel.dragDimension&&(w(v.select(this)),b.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),j.parcatsViewModel.pathSelection.sort(d),-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var q=g(j),W=m(j);j.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:v.event,constraints:W})}}function g(j){for(var q=[],W=V(j.parcatsViewModel),ae=0;ae<j.model.valueInds.length;ae++)q.push({curveNumber:W,pointNumber:j.model.valueInds[ae]});return q}function m(j){for(var q={},W=j.parcatsViewModel.model.dimensions,ae=0;ae<W.length;ae++){var G=W[ae];q[G.containerInd]=G.categories[j.model.categoryInds[ae]].categoryValue}return void 0!==j.model.rawColor&&(q.color=j.model.rawColor),q}function u(j){if(-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){var q=g(j),W=m(j);j.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:v.event,constraints:W})}}function w(j){j.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function f(j){j.attr("fill-opacity",.8).attr("stroke",function(q){return l.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function A(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(j){j.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k(j){var W=j.categoryViewModel.model.dimensionInd,ae=j.categoryViewModel.model.categoryInd;return j.parcatsViewModel.pathSelection.filter(function(G){return G.model.categoryInds[W]===ae&&G.model.color===j.color})}function E(j,q,W){var ae=v.select(j).datum(),G=ae.categoryViewModel.model,ee=ae.parcatsViewModel.graphDiv,te=v.select(j.parentNode).selectAll("rect.bandrect"),le=[];te.each(function(de){k(de).each(function(he){Array.prototype.push.apply(le,g(he))})});var ue={};ue[G.dimensionInd]=G.categoryValue,ee.emit(q,{points:le,event:W,constraints:ue})}function P(j,q,W){var ae=v.select(j).datum(),G=ae.categoryViewModel.model,ee=ae.parcatsViewModel.graphDiv,te=k(ae),le=[];te.each(function(de){Array.prototype.push.apply(le,g(de))});var ue={};ue[G.dimensionInd]=G.categoryValue,void 0!==ae.rawColor&&(ue.color=ae.rawColor),ee.emit(q,{points:le,event:W,constraints:ue})}function D(j,q,W){j._fullLayout._calcInverseTransform(j);var ae,G,ee=j._fullLayout._invScaleX,te=j._fullLayout._invScaleY,le=v.select(W.parentNode).select("rect.catrect"),ue=le.node().getBoundingClientRect(),de=le.datum(),he=de.parcatsViewModel,me=he.trace,_e=ue.top+ue.height/2;he.dimensions.length>1&&he.model.dimensions[de.model.dimensionInd].displayInd===he.dimensions.length-1?(ae=ue.left,G="left"):(ae=ue.left+ue.width,G="right");var Ee=de.model.count,De=de.model.categoryLabel,Se=Ee/de.parcatsViewModel.model.count,Fe={countLabel:Ee,categoryLabel:De,probabilityLabel:Se.toFixed(3)},ve=[];-1!==de.parcatsViewModel.hoverinfoItems.indexOf("count")&&ve.push(["Count:",Fe.countLabel].join(" ")),-1!==de.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ve.push(["P("+Fe.categoryLabel+"):",Fe.probabilityLabel].join(" "));var Te=ve.join("<br>");return{trace:me,x:ee*(ae-q.left),y:te*(_e-q.top),text:Te,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:G,hovertemplate:me.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:me._input,fullData:me,count:Ee,category:De,probability:Se}]}}function F(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(v.mouse(this)[1]<-1)return;var q,W=j.parcatsViewModel.graphDiv,ae=W._fullLayout,G=ae._paperdiv.node().getBoundingClientRect(),ee=j.parcatsViewModel.hoveron;"color"===ee?(f(ue=k(le=v.select(this).datum())),ue.each(function(){e.raiseToTop(this)}),v.select(this.parentNode).selectAll("rect.bandrect").filter(function(de){return de.color===le.color}).each(function(){e.raiseToTop(this),v.select(this).attr("stroke","black").attr("stroke-width",1.5)}),P(this,"plotly_hover",v.event)):(function(te){v.select(te.parentNode).selectAll("rect.bandrect").each(function(le){var ue=k(le);f(ue),ue.each(function(){e.raiseToTop(this)})}),v.select(te.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),E(this,"plotly_hover",v.event)),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ee?q=D(W,G,this):"color"===ee?q=function(te,le,ue){te._fullLayout._calcInverseTransform(te);var de,he,be=te._fullLayout._invScaleX,me=te._fullLayout._invScaleY,_e=ue.getBoundingClientRect(),Ee=v.select(ue).datum(),De=Ee.categoryViewModel,Se=De.parcatsViewModel,ve=Se.trace,Te=_e.y+_e.height/2;Se.dimensions.length>1&&Se.model.dimensions[De.model.dimensionInd].displayInd===Se.dimensions.length-1?(de=_e.left,he="left"):(de=_e.left+_e.width,he="right");var Ie=De.model.categoryLabel,Ce=Ee.parcatsViewModel.model.count,Re=0;Ee.categoryViewModel.bands.forEach(function(bt){bt.color===Ee.color&&(Re+=bt.count)});var Ue=De.model.count,qe=0;Se.pathSelection.each(function(bt){bt.model.color===Ee.color&&(qe+=bt.model.count)});var Xe=Re/Ce,st=Re/qe,He=Re/Ue,$e={countLabel:Ce,categoryLabel:Ie,probabilityLabel:Xe.toFixed(3)},et=[];-1!==De.parcatsViewModel.hoverinfoItems.indexOf("count")&&et.push(["Count:",$e.countLabel].join(" ")),-1!==De.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(et.push("P(color \u2229 "+Ie+"): "+$e.probabilityLabel),et.push("P("+Ie+" | color): "+st.toFixed(3)),et.push("P(color | "+Ie+"): "+He.toFixed(3)));var tt=et.join("<br>"),ct=l.mostReadable(Ee.color,["black","white"]);return{trace:ve,x:be*(de-le.left),y:me*(Te-le.top),text:tt,color:Ee.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:he,hovertemplate:ve.hovertemplate,hovertemplateLabels:$e,eventData:[{data:ve._input,fullData:ve,category:Ie,count:Ce,probability:Xe,categorycount:Ue,colorcount:qe,bandcolorcount:Re}]}}(W,G,this):"dimension"===ee&&(q=function(te,le,ue){var de=[];return v.select(ue.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){de.push(D(te,le,this))}),de}(W,G,this)),q&&b.loneHover(q,{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:W}))}var le,ue}function R(j){var q=j.parcatsViewModel;!q.dragDimension&&(w(q.pathSelection),A(q.dimensionSelection.selectAll("g.category")),M(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),b.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(d),-1===q.hoverinfoItems.indexOf("skip"))&&("color"===j.parcatsViewModel.hoveron?P(this,"plotly_unhover",v.event):E(this,"plotly_unhover",v.event))}function L(j){"fixed"!==j.parcatsViewModel.arrangement&&(j.dragDimensionDisplayInd=j.model.displayInd,j.initialDragDimensionDisplayInds=j.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),j.dragHasMoved=!1,j.dragCategoryDisplayInd=null,v.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var W=v.mouse(this)[0],ae=v.mouse(this)[1];-2<=W&&W<=q.width+2&&-2<=ae&&ae<=q.height+2&&(j.dragCategoryDisplayInd=q.model.displayInd,j.initialDragCategoryDisplayInds=j.model.categories.map(function(G){return G.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),v.select(this.parentNode).selectAll("rect.bandrect").each(function(G){G.y<ae&&ae<=G.y+G.height&&(j.potentialClickBand=this)}))}),j.parcatsViewModel.dragDimension=j,b.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I(j){if("fixed"!==j.parcatsViewModel.arrangement&&(j.dragHasMoved=!0,null!==j.dragDimensionDisplayInd)){var q=j.dragDimensionDisplayInd,W=q-1,ae=q+1,G=j.parcatsViewModel.dimensions[q];if(null!==j.dragCategoryDisplayInd){var ee=G.categories[j.dragCategoryDisplayInd];ee.model.dragY+=v.event.dy;var te=ee.model.dragY,le=ee.model.displayInd,ue=G.categories,de=ue[le-1],he=ue[le+1];void 0!==de&&te<de.y+de.height/2&&(ee.model.displayInd=de.model.displayInd,de.model.displayInd=le),void 0!==he&&te+ee.height>he.y+he.height/2&&(ee.model.displayInd=he.model.displayInd,he.model.displayInd=le),j.dragCategoryDisplayInd=ee.model.displayInd}if(null===j.dragCategoryDisplayInd||"freeform"===j.parcatsViewModel.arrangement){G.model.dragX=v.event.x;var be=j.parcatsViewModel.dimensions[W],me=j.parcatsViewModel.dimensions[ae];void 0!==be&&G.model.dragX<be.x+be.width&&(G.model.displayInd=be.model.displayInd,be.model.displayInd=q),void 0!==me&&G.model.dragX+G.width>me.x&&(G.model.displayInd=me.model.displayInd,me.model.displayInd=j.dragDimensionDisplayInd),j.dragDimensionDisplayInd=G.model.displayInd}J(j.parcatsViewModel),$(j.parcatsViewModel),Y(j.parcatsViewModel),Z(j.parcatsViewModel)}}function B(j){if("fixed"!==j.parcatsViewModel.arrangement&&null!==j.dragDimensionDisplayInd){v.select(this).selectAll("text").attr("font-weight","normal");var q={},W=V(j.parcatsViewModel),ae=j.parcatsViewModel.model.dimensions.map(function(he){return he.displayInd}),G=j.initialDragDimensionDisplayInds.some(function(he,be){return he!==ae[be]});G&&ae.forEach(function(he,be){q["dimensions["+j.parcatsViewModel.model.dimensions[be].containerInd+"].displayindex"]=he});var ee=!1;if(null!==j.dragCategoryDisplayInd){var te=j.model.categories.map(function(he){return he.displayInd});if(ee=j.initialDragCategoryDisplayInds.some(function(he,be){return he!==te[be]})){var le=j.model.categories.slice().sort(function(he,be){return he.displayInd-be.displayInd}),ue=le.map(function(he){return he.categoryValue}),de=le.map(function(he){return he.categoryLabel});q["dimensions["+j.model.containerInd+"].categoryarray"]=[ue],q["dimensions["+j.model.containerInd+"].ticktext"]=[de],q["dimensions["+j.model.containerInd+"].categoryorder"]="array"}}-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!j.dragHasMoved&&j.potentialClickBand&&("color"===j.parcatsViewModel.hoveron?P(j.potentialClickBand,"plotly_click",v.event.sourceEvent):E(j.potentialClickBand,"plotly_click",v.event.sourceEvent)),j.model.dragX=null,null!==j.dragCategoryDisplayInd&&(j.parcatsViewModel.dimensions[j.dragDimensionDisplayInd].categories[j.dragCategoryDisplayInd].model.dragY=null,j.dragCategoryDisplayInd=null),j.dragDimensionDisplayInd=null,j.parcatsViewModel.dragDimension=null,j.dragHasMoved=null,j.potentialClickBand=null,J(j.parcatsViewModel),$(j.parcatsViewModel),v.transition().duration(300).ease("cubic-in-out").each(function(){Y(j.parcatsViewModel,!0),Z(j.parcatsViewModel,!0)}).each("end",function(){(G||ee)&&T.restyle(j.parcatsViewModel.graphDiv,q,[W])})}}function V(j){for(var q,W=j.graphDiv._fullData,ae=0;ae<W.length;ae++)if(j.key===W[ae].uid){q=ae;break}return q}function Z(j,q){var W;void 0===q&&(q=!1),j.pathSelection.data(function(ae){return ae.paths},h),(W=j.pathSelection,q?W.transition():W).attr("d",function(ae){return ae.svgD})}function Y(j,q){function W(te){return q?te.transition():te}void 0===q&&(q=!1),j.dimensionSelection.data(function(te){return te.dimensions},h);var ae=j.dimensionSelection.selectAll("g.category").data(function(te){return te.categories},h);W(j.dimensionSelection).attr("transform",function(te){return o(te.x,0)}),W(ae).attr("transform",function(te){return o(0,te.y)}),ae.select(".dimlabel").text(function(te,le){return 0===le?te.parcatsViewModel.model.dimensions[te.model.dimensionInd].dimensionLabel:null}),ae.select(".catlabel").attr("text-anchor",function(te){return s(te)?"start":"end"}).attr("x",function(te){return s(te)?te.width+5:-5}).each(function(te){var le,ue;s(te)?(le=te.width+5,ue="start"):(le=-5,ue="end"),v.select(this).selectAll("tspan").attr("x",le).attr("text-anchor",ue)});var G=ae.selectAll("rect.bandrect").data(function(te){return te.bands},h),ee=G.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(te){return te.color}).attr("fill-opacity",0);G.attr("fill",function(te){return te.color}).attr("width",function(te){return te.width}).attr("height",function(te){return te.height}).attr("y",function(te){return te.y}),M(ee),G.each(function(){e.raiseToTop(this)}),G.exit().remove()}function Q(j,q,W){var ae,G=W[0],ee=q.margin||{l:80,r:80,t:100,b:80},te=G.trace,le=te.domain,ue=q.width,de=q.height,he=Math.floor(ue*(le.x[1]-le.x[0])),be=Math.floor(de*(le.y[1]-le.y[0])),me=le.x[0]*ue+ee.l,_e=q.height-le.y[1]*q.height+ee.t,Ee=te.line.shape;ae="all"===te.hoverinfo?["count","probability"]:(te.hoverinfo||"").split("+");var De={trace:te,key:te.uid,model:G,x:me,y:_e,width:he,height:be,hoveron:te.hoveron,hoverinfoItems:ae,arrangement:te.arrangement,bundlecolors:te.bundlecolors,sortpaths:te.sortpaths,labelfont:te.labelfont,categorylabelfont:te.tickfont,pathShape:Ee,dragDimension:null,margin:ee,paths:[],dimensions:[],graphDiv:j,traceSelection:null,pathSelection:null,dimensionSelection:null};return G.dimensions&&(J(De),$(De)),De}function re(j,q,W,ae,G){var ee,te,le=[],ue=[];for(te=0;te<W.length-1;te++)ee=x(W[te]+j[te],j[te+1]),le.push(ee(G)),ue.push(ee(1-G));var de="M "+j[0]+","+q[0];for(de+="l"+W[0]+",0 ",te=1;te<W.length;te++)de+="C"+le[te-1]+","+q[te-1]+" "+ue[te-1]+","+q[te]+" "+j[te]+","+q[te],de+="l"+W[te]+",0 ";for(de+="l0,"+ae+" ",de+="l -"+W[W.length-1]+",0 ",te=W.length-2;te>=0;te--)de+="C"+ue[te]+","+(q[te+1]+ae)+" "+le[te]+","+(q[te]+ae)+" "+(j[te]+W[te])+","+(q[te]+ae),de+="l-"+W[te]+",0 ";return de+"Z"}function $(j){var q=j.dimensions,W=j.model,ae=q.map(function(et){return et.categories.map(function(tt){return tt.y})}),G=j.model.dimensions.map(function(et){return et.categories.map(function(tt){return tt.displayInd})}),ee=j.model.dimensions.map(function(et){return et.displayInd}),te=j.dimensions.map(function(et){return et.model.dimensionInd}),le=q.map(function(et){return et.x}),ue=q.map(function(et){return et.width}),de=[];for(var he in W.paths)W.paths.hasOwnProperty(he)&&de.push(W.paths[he]);function be(et){var tt=et.categoryInds.map(function(ct,bt){return G[bt][ct]});return te.map(function(ct){return tt[ct]})}de.sort(function(et,tt){var ct=be(et),bt=be(tt);return"backward"===j.sortpaths&&(ct.reverse(),bt.reverse()),ct.push(et.valueInds[0]),bt.push(tt.valueInds[0]),j.bundlecolors&&(ct.unshift(et.rawColor),bt.unshift(tt.rawColor)),ct<bt?-1:ct>bt?1:0});for(var me=new Array(de.length),_e=q[0].model.count,Ee=q[0].categories.map(function(et){return et.height}).reduce(function(et,tt){return et+tt}),De=0;De<de.length;De++){var Se,Fe=de[De];Se=_e>0?Ee*(Fe.count/_e):0;for(var ve,Te=new Array(ae.length),Ie=0;Ie<Fe.categoryInds.length;Ie++){var Re=G[Ie][Fe.categoryInds[Ie]],Ue=ee[Ie];Te[Ue]=ae[Ue][Re],ae[Ue][Re]+=Se;var qe=j.dimensions[Ue].categories[Re],Xe=qe.bands.length,st=qe.bands[Xe-1];if(void 0===st||Fe.rawColor!==st.rawColor){var He=void 0===st?0:st.y+st.height;qe.bands.push({key:He,color:Fe.color,rawColor:Fe.rawColor,height:Se,width:qe.width,count:Fe.count,y:He,categoryViewModel:qe,parcatsViewModel:j})}else{var $e=qe.bands[Xe-1];$e.height+=Se,$e.count+=Fe.count}}ve=re(le,Te,ue,Se,"hspline"===j.pathShape?.5:0),me[De]={key:Fe.valueInds[0],model:Fe,height:Se,leftXs:le,topYs:Te,dimWidths:ue,svgD:ve,parcatsViewModel:j}}j.paths=me}function J(j){var q=j.model.dimensions.map(function(te){return{displayInd:te.displayInd,dimensionInd:te.dimensionInd}});q.sort(function(te,le){return te.displayInd-le.displayInd});var W=[];for(var ae in q)W.push(ie(j,j.model.dimensions[q[ae].dimensionInd]));j.dimensions=W}function ie(j,q){var W,ae=j.model.dimensions.length;W=40+(ae>1?(j.width-80-16)/(ae-1):0)*q.displayInd;var ee,te,le,de,he=[],be=j.model.maxCats,me=q.categories.length,_e=q.count,Ee=j.height-8*(be-1),De=8*(be-me)/2,Se=q.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(Se.sort(function(Fe,ve){return Fe.displayInd-ve.displayInd}),de=0;de<me;de++)le={key:(te=q.categories[Se[de].categoryInd]).valueInds[0],model:te,width:16,height:ee=_e>0?te.count/_e*Ee:0,y:null!==te.dragY?te.dragY:De,bands:[],parcatsViewModel:j},De=De+ee+8,he.push(le);return{key:q.dimensionInd,x:null!==q.dragX?q.dragX:W,y:0,width:16,model:q,categories:he,parcatsViewModel:j,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}oe.exports=function(j,q,W,ae){y(W,j,ae,q)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(_,oe,se){"use strict";var v=_("./parcats");oe.exports=function(x,T,b,e){var o=x._fullLayout,l=o._size;v(x,o._paper,T,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},b,e)}},{"./parcats":886}],888:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/layout_attributes"),T=_("../../plots/font_attributes"),b=_("../../plots/domain").attributes,e=_("../../lib/extend").extendFlat,o=_("../../plot_api/plot_template").templatedArray;oe.exports={domain:b({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:T({editType:"plot"}),tickfont:T({editType:"plot"}),rangefont:T({editType:"plot"}),dimensions:o("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},x.tickvals,{editType:"plot"}),ticktext:e({},x.ticktext,{editType:"plot"}),tickformat:e({},x.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},v("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(_,oe,se){"use strict";var v=_("./constants"),x=_("@plotly/d3"),T=_("../../lib/gup").keyFun,b=_("../../lib/gup").repeat,e=_("../../lib").sorterAsc,o=_("../../lib").strTranslate,i=v.bar.snapRatio;function l(D,F){return D*(1-i)+F*i}var r=v.bar.snapClose;function y(D,F){return D*(1-r)+F*r}function h(D,F,R,L){if(function(ie,j){for(var q=0;q<j.length;q++)if(ie>=j[q][0]&&ie<=j[q][1])return!0;return!1}(R,L))return R;var I=D?-1:1,B=0,V=F.length-1;if(I<0){var Z=B;B=V,V=Z}for(var Y=F[B],Q=Y,re=B;I*re<I*V;re+=I){var $=re+I,J=F[$];if(I*R<I*y(Y,J))return l(Y,Q);if(I*R<I*J||$===V)return l(J,Y);Q=Y,Y=J}}function s(D){D.attr("x",-v.bar.captureWidth/2).attr("width",v.bar.captureWidth)}function d(D){D.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function p(D){if(!D.brush.filterSpecified)return"0,"+D.height;for(var F,R,L,I=c(D.brush.filter.getConsolidated(),D.height),B=[0],V=I.length?I[0][0]:null,Z=0;Z<I.length;Z++)R=(F=I[Z])[1]-F[0],B.push(V),B.push(R),(L=Z+1)<I.length&&(V=I[L][0]-F[1]);return B.push(D.height),B}function c(D,F){return D.map(function(R){return R.map(function(L){return Math.max(0,L*F)}).sort(e)})}function g(){x.select(document.body).style("cursor",null)}function m(D){D.attr("stroke-dasharray",p)}function u(D,F){var R=x.select(D).selectAll(".highlight, .highlight-shadow");m(F?R.transition().duration(v.bar.snapDuration).each("end",F):R)}function w(D,F){var R,L=D.brush,I=NaN,B={};if(L.filterSpecified){var V=D.height,Z=L.filter.getConsolidated(),Y=c(Z,V),Q=NaN,re=NaN,$=NaN;for(R=0;R<=Y.length;R++){var J=Y[R];if(J&&J[0]<=F&&F<=J[1]){Q=R;break}if(re=R?R-1:NaN,J&&J[0]>F){$=R;break}}if(I=Q,isNaN(I)&&(I=isNaN(re)||isNaN($)?isNaN(re)?$:re:F-Y[re][1]<Y[$][0]-F?re:$),!isNaN(I)){var ie=Y[I],j=function(G,ee){var te=v.bar.handleHeight;if(!(ee>G[1]+te||ee<G[0]-te))return ee>=.9*G[1]+.1*G[0]?"n":ee<=.9*G[0]+.1*G[1]?"s":"ns"}(ie,F);j&&(B.interval=Z[I],B.intervalPix=ie,B.region=j)}}if(D.ordinal&&!B.region){var q=D.unitTickvals,W=D.unitToPaddedPx.invert(F);for(R=0;R<q.length;R++){var ae=[.25*q[Math.max(R-1,0)]+.75*q[R],.25*q[Math.min(R+1,q.length-1)]+.75*q[R]];if(W>=ae[0]&&W<=ae[1]){B.clickableOrdinalRange=ae;break}}}return B}function f(D,F){x.event.sourceEvent.stopPropagation();var R=F.height-x.mouse(D)[1]-2*v.verticalPadding,L=F.brush.svgBrush;L.wasDragged=!0,L._dragging=!0,L.newExtent=L.grabbingBar?[R-L.grabPoint,R+L.barLength-L.grabPoint].map(F.unitToPaddedPx.invert):[L.startExtent,F.unitToPaddedPx.invert(R)].sort(e),F.brush.filterSpecified=!0,L.extent=L.stayingIntervals.concat([L.newExtent]),L.brushCallback(F),u(D.parentNode)}function A(D,F){var R=w(F,F.height-x.mouse(D)[1]-2*v.verticalPadding),L="crosshair";R.clickableOrdinalRange?L="pointer":R.region&&(L=R.region+"-resize"),x.select(document.body).style("cursor",L)}function M(D){D.on("mousemove",function(F){x.event.preventDefault(),F.parent.inBrushDrag||A(this,F)}).on("mouseleave",function(F){F.parent.inBrushDrag||g()}).call(x.behavior.drag().on("dragstart",function(F){!function(R,L){x.event.sourceEvent.stopPropagation();var I=L.height-x.mouse(R)[1]-2*v.verticalPadding,B=L.unitToPaddedPx.invert(I),V=L.brush,Z=w(L,I),Y=Z.interval,Q=V.svgBrush;if(Q.wasDragged=!1,Q.grabbingBar="ns"===Z.region,Q.grabbingBar){var re=Y.map(L.unitToPaddedPx);Q.grabPoint=I-re[0]-v.verticalPadding,Q.barLength=re[1]-re[0]}Q.clickableOrdinalRange=Z.clickableOrdinalRange,Q.stayingIntervals=L.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],Y&&(Q.stayingIntervals=Q.stayingIntervals.filter(function($){return $[0]!==Y[0]&&$[1]!==Y[1]})),Q.startExtent=Z.region?Y["s"===Z.region?1:0]:B,L.parent.inBrushDrag=!0,Q.brushStartCallback()}(this,F)}).on("drag",function(F){f(this,F)}).on("dragend",function(F){!function(R,L){var I=L.brush,B=I.filter,V=I.svgBrush;V._dragging||(A(R,L),f(R,L),L.brush.svgBrush.wasDragged=!1),V._dragging=!1,x.event.sourceEvent.stopPropagation();var Z=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,L.parent.inBrushDrag=!1,g(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?I.filterSpecified&&L.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],I.filterSpecified=!0):Z?(V.extent=V.stayingIntervals,0===V.extent.length&&E(I)):E(I),V.brushCallback(L),u(R.parentNode),void V.brushEndCallback(I.filterSpecified?B.getConsolidated():[]);var Y=function(){B.set(B.getConsolidated())};if(L.ordinal){var Q=L.unitTickvals;Q[Q.length-1]<Q[0]&&Q.reverse(),V.newExtent=[h(0,Q,V.newExtent[0],V.stayingIntervals),h(1,Q,V.newExtent[1],V.stayingIntervals)];var re=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(re?[V.newExtent]:[]),V.extent.length||E(I),V.brushCallback(L),re?u(R.parentNode,Y):(Y(),u(R.parentNode))}else Y();V.brushEndCallback(I.filterSpecified?B.getConsolidated():[])}(this,F)}))}function k(D,F){return D[0]-F[0]}function E(D){D.filterSpecified=!1,D.svgBrush.extent=[[-1/0,1/0]]}function P(D){for(var F,R=D.slice(),L=[],I=R.shift();I;){for(F=I.slice();(I=R.shift())&&I[0]<=F[1];)F[1]=Math.max(F[1],I[1]);L.push(F)}return 1===L.length&&L[0][0]>L[0][1]&&(L=[]),L}oe.exports={makeBrush:function(D,F,R,L,I,B){var V,Y,Q,re,Z=(re=[],{set:function($){1===(re=$.map(function(J){return J.slice().sort(e)}).sort(k)).length&&re[0][0]===-1/0&&re[0][1]===1/0&&(re=[[0,-1]]),Y=P(re),Q=re.reduce(function(J,ie){return[Math.min(J[0],ie[0]),Math.max(J[1],ie[1])]},[1/0,-1/0])},get:function(){return re.slice()},getConsolidated:function(){return Y},getBounds:function(){return Q}});return Z.set(R),{filter:Z,filterSpecified:F,svgBrush:{extent:[],brushStartCallback:L,brushCallback:(V=I,function(Y){var $,Q=Y.brush,re=($=Q,$.svgBrush.extent.map(function(J){return J.slice()})).slice();Q.filter.set(re),V()}),brushEndCallback:B}}},ensureAxisBrush:function(D,F){var R=D.selectAll("."+v.cn.axisBrush).data(b,T);R.enter().append("g").classed(v.cn.axisBrush,!0),function(L,I){var B=L.selectAll(".background").data(b);B.enter().append("rect").classed("background",!0).call(s).call(d).style("pointer-events","auto").attr("transform",o(0,v.verticalPadding)),B.call(M).attr("height",function(Y){return Y.height-v.verticalPadding});var V=L.selectAll(".highlight-shadow").data(b);V.enter().append("line").classed("highlight-shadow",!0).attr("x",-v.bar.width/2).attr("stroke-width",v.bar.width+v.bar.strokeWidth).attr("stroke",I).attr("opacity",v.bar.strokeOpacity).attr("stroke-linecap","butt"),V.attr("y1",function(Y){return Y.height}).call(m);var Z=L.selectAll(".highlight").data(b);Z.enter().append("line").classed("highlight",!0).attr("x",-v.bar.width/2).attr("stroke-width",v.bar.width-v.bar.strokeWidth).attr("stroke",v.bar.fillColor).attr("opacity",v.bar.fillOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(Y){return Y.height}).call(m)}(R,F)},cleanRanges:function(D,F){if(Array.isArray(D[0])?(D=D.map(function(L){return L.sort(e)}),D=F.multiselect?P(D.sort(k)):[D[0]]):D=[D.sort(e)],F.tickvals){var R=F.tickvals.slice().sort(e);if(!(D=D.map(function(L){var I=[h(0,R,L[0],[]),h(1,R,L[1],[])];if(I[1]>I[0])return I}).filter(function(L){return L})).length)return}return D.length>1?D:D[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:_("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../plots/get_data").getModuleCalcData,T=_("./plot"),b=_("../../constants/xmlns_namespaces");se.name="parcoords",se.plot=function(e){var o=x(e.calcdata,"parcoords")[0];o.length&&T(e,o)},se.clean=function(e,o,i,l){var r=l._has&&l._has("parcoords"),y=o._has&&o._has("parcoords");r&&!y&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},se.toSVG=function(e){var o=e._fullLayout._glimages,i=v.select(e).selectAll(".svg-container");i.filter(function(l,r){return r===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:b.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){v.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(_,oe,se){"use strict";var v=_("../../lib").isArrayOrTypedArray,x=_("../../components/colorscale"),T=_("../../lib/gup").wrap;oe.exports=function(b,e){var o,i;return x.hasColorscale(e,"line")&&v(e.line.color)?(o=e.line.color,i=x.extractOpts(e.line).colorscale,x.calc(b,e,{vals:o,containerStr:"line",cLetter:"c"})):(o=function(l){for(var r=new Array(l),y=0;y<l;y++)r[y]=.5;return r}(e._length),i=[[0,e.line.color],[1,e.line.color]]),T({lineColor:o,cscale:i})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(_,oe,se){"use strict";oe.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../plots/domain").defaults,e=_("../../plots/array_container_defaults"),o=_("../../plots/cartesian/axes"),i=_("./attributes"),l=_("./axisbrush"),r=_("./constants").maxDimensionCount,y=_("./merge_length");function h(s,d,p,c){function g(A,M){return v.coerce(s,d,i.dimensions,A,M)}var m=g("values"),u=g("visible");if(m&&m.length||(u=d.visible=!1),u){g("label"),g("tickvals"),g("ticktext"),g("tickformat");var w=g("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:w},o.setConvert(d._ax,c.layout),g("multiselect");var f=g("constraintrange");f&&(d.constraintrange=l.cleanRanges(f,d))}}oe.exports=function(s,d,p,c){function g(A,M){return v.coerce(s,d,i,A,M)}var m=s.dimensions;Array.isArray(m)&&m.length>r&&(v.log("parcoords traces support up to "+r+" dimensions at the moment"),m.splice(r));var u=e(s,d,{name:"dimensions",layout:c,handleItemDefaults:h}),w=function(A,M,k,E,P){var D=P("line.color",k);if(x(A,"line")&&v.isArrayOrTypedArray(D)){if(D.length)return P("line.colorscale"),T(A,M,E,P,{prefix:"line.",cLetter:"c"}),D.length;M.line.color=k}return 1/0}(s,d,p,c,g);b(d,c,g),Array.isArray(u)&&u.length||(d.visible=!1),y(d,u,"values",w);var f={family:c.font.family,size:Math.round(c.font.size/1.2),color:c.font.color};v.coerceFont(g,"labelfont",f),v.coerceFont(g,"tickfont",f),v.coerceFont(g,"rangefont",f),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(_,oe,se){"use strict";var v=_("../../lib").isTypedArray;se.convertTypedArray=function(x){return v(x)?Array.prototype.slice.call(x):x},se.isOrdinal=function(x){return!!x.tickvals},se.isVisible=function(x){return x.visible||!("visible"in x)}},{"../../lib":503}],896:[function(_,oe,se){"use strict";var v=_("./base_index");v.plot=_("./plot"),oe.exports=v},{"./base_index":890,"./plot":900}],897:[function(_,oe,se){"use strict";var v=_("glslify"),x=v(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),T=v(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),b=_("./constants").maxDimensionCount,e=_("../../lib"),o=new Uint8Array(4),i=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(u,w,f,A,M){var k=u._gl;k.enable(k.SCISSOR_TEST),k.scissor(w,f,A,M),u.clear({color:[0,0,0,0],depth:1})}function y(u,w,f,A,M,k){var E=k.key;f.drawCompleted||(u.read({x:0,y:0,width:1,height:1,data:o}),f.drawCompleted=!0),function P(D){var F=Math.min(A,M-D*A);0===D&&(window.cancelAnimationFrame(f.currentRafs[E]),delete f.currentRafs[E],r(u,k.scissorX,k.scissorY,k.scissorWidth,k.viewBoxSize[1])),f.clearOnly||(k.count=2*F,k.offset=2*D*A,w(k),D*A+F<M&&(f.currentRafs[E]=window.requestAnimationFrame(function(){P(D+1)})),f.drawCompleted=!1)}(0)}function h(u,w){for(var f=new Array(256),A=0;A<256;A++)f[A]=u(A/255).concat(w);return f}function s(u,w){return(u>>>8*w)%256/255}function d(u,w,f){for(var A=new Array(8*w),M=0,k=0;k<w;k++)for(var E=0;E<2;E++)for(var P=0;P<4;P++){var D=4*u+P,F=f[64*k+D];63===D&&0===E&&(F*=-1),A[M++]=F}return A}function p(u){var w="0"+u;return w.substr(w.length-2)}function c(u){return u<b?"p"+p(u+1)+"_"+p(u+4):"colors"}function g(u,w,f,A,M,k,E,P,D,F,R,L,I,B){for(var V=[[],[]],Z=0;Z<64;Z++)V[0][Z]=Z===M?1:0,V[1][Z]=Z===k?1:0;var Y=u.lines.canvasOverdrag*B,Q=u.domain,re=u.canvasWidth*B,$=u.canvasHeight*B,J=u.pad.l*B,ie=u.pad.b*B,j=u.layoutHeight*B,q=u.layoutWidth*B,W=u.deselectedLines.color;return e.extendFlat({key:R,resolution:[re,$],viewBoxPos:[(E*=B)+Y,P*=B],viewBoxSize:[D*=B,F*=B],i0:M,i1:k,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:L,contextColor:[W[0]/255,W[1]/255,W[2]/255,W[3]<1?W[3]:Math.max(1/255,Math.pow(1/u.lines.color.length,1/3))],scissorX:(A===w?0:E+Y)+(J-Y)+q*Q.x[0],scissorWidth:(A===f?re-E+Y:D+.5)+(A===w?E+Y:0),scissorY:P+ie+j*Q.y[0],scissorHeight:F,viewportX:J-Y+q*Q.x[0],viewportY:ie+j*Q.y[0],viewportWidth:re,viewportHeight:$},I)}function m(u){var w=Math.max(0,Math.floor(2047*u[0]),0),f=Math.min(2047,Math.ceil(2047*u[1]),2047);return[Math.min(w,f),Math.max(w,f)]}oe.exports=function(u,w){var f,M,k,E,P=w.context,D=w.pick,F=w.regl,R=F._gl,L=R.getParameter(R.ALIASED_LINE_WIDTH_RANGE),I=Math.max(L[0],Math.min(L[1],w.viewModel.plotGlPixelRatio)),B={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function($){for(var J={},ie=0;ie<=b;ie+=4)J[c(ie)]=$.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return J}(F),Z=F.texture(l),Y=[];re(w);var Q=F({profile:!1,blend:{enable:P,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!P,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:F.prop("scissorX"),y:F.prop("scissorY"),width:F.prop("scissorWidth"),height:F.prop("scissorHeight")}},viewport:{x:F.prop("viewportX"),y:F.prop("viewportY"),width:F.prop("viewportWidth"),height:F.prop("viewportHeight")},dither:!1,vert:x,frag:T,primitive:"lines",lineWidth:I,attributes:V,uniforms:{resolution:F.prop("resolution"),viewBoxPos:F.prop("viewBoxPos"),viewBoxSize:F.prop("viewBoxSize"),dim0A:F.prop("dim0A"),dim1A:F.prop("dim1A"),dim0B:F.prop("dim0B"),dim1B:F.prop("dim1B"),dim0C:F.prop("dim0C"),dim1C:F.prop("dim1C"),dim0D:F.prop("dim0D"),dim1D:F.prop("dim1D"),loA:F.prop("loA"),hiA:F.prop("hiA"),loB:F.prop("loB"),hiB:F.prop("hiB"),loC:F.prop("loC"),hiC:F.prop("hiC"),loD:F.prop("loD"),hiD:F.prop("hiD"),palette:Z,contextColor:F.prop("contextColor"),maskTexture:F.prop("maskTexture"),drwLayer:F.prop("drwLayer"),maskHeight:F.prop("maskHeight")},offset:F.prop("offset"),count:F.prop("count")});function re($){f=$.model,M=$.viewModel.dimensions.slice(),k=M[0]?M[0].values.length:0;var J=f.lines,ie=D?J.color.map(function(q,W){return W/J.color.length}):J.color,j=function(q,W,ae){for(var ee=new Array(q*(b+4)),te=0,le=0;le<q;le++){for(var ue=0;ue<b;ue++)ee[te++]=ue<W.length?W[ue].paddedUnitValues[le]:.5;ee[te++]=s(le,2),ee[te++]=s(le,1),ee[te++]=s(le,0),ee[te++]=Math.max(1e-6,Math.min(.999999,ae[le]))}return ee}(k,M,ie);(function(q,W,ae){for(var G=0;G<=b;G+=4)q[c(G)](d(G/4,W,ae))})(V,k,j),P||D||(Z=F.texture(e.extendFlat({data:h(f.unitToColor,255)},l)))}return{render:function($,J,ie){var j,q,W,ae=$.length,G=1/0,ee=-1/0;for(j=0;j<ae;j++)$[j].dim0.canvasX<G&&(G=$[j].dim0.canvasX,q=j),$[j].dim1.canvasX>ee&&(ee=$[j].dim1.canvasX,W=j);0===ae&&r(F,0,0,f.canvasWidth,f.canvasHeight);var te=function(Se){var Fe,ve,Te,Ie=[[],[]];for(Te=0;Te<64;Te++){var Ce=!Se&&Te<M.length?M[Te].brush.filter.getBounds():[-1/0,1/0];Ie[0][Te]=Ce[0],Ie[1][Te]=Ce[1]}var Re=new Array(16384);for(Fe=0;Fe<16384;Fe++)Re[Fe]=255;if(!Se)for(Fe=0;Fe<M.length;Fe++){var Ue=Fe%8,qe=(Fe-Ue)/8,Xe=Math.pow(2,Ue),st=M[Fe].brush.filter.get();if(!(st.length<2)){var He=m(st[0])[1];for(ve=1;ve<st.length;ve++){var $e=m(st[ve]);for(Te=He+1;Te<$e[0];Te++)Re[8*Te+qe]&=~Xe;He=Math.max(He,$e[1])}}}var et={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Re};return E?E(et):E=F.texture(et),{maskTexture:E,maskHeight:2048,loA:Ie[0].slice(0,16),loB:Ie[0].slice(16,32),loC:Ie[0].slice(32,48),loD:Ie[0].slice(48,64),hiA:Ie[1].slice(0,16),hiB:Ie[1].slice(16,32),hiC:Ie[1].slice(32,48),hiD:Ie[1].slice(48,64)}}(P);for(j=0;j<ae;j++){var le=$[j],ue=le.dim0.crossfilterDimensionIndex,de=le.dim1.crossfilterDimensionIndex,he=le.canvasX,be=le.canvasY,me=he+le.panelSizeX,_e=le.plotGlPixelRatio;if(J||!Y[ue]||Y[ue][0]!==he||Y[ue][1]!==me){Y[ue]=[he,me];var Ee=g(f,q,W,j,ue,de,he,be,le.panelSizeX,le.panelSizeY,le.dim0.crossfilterDimensionIndex,P?0:D?2:1,te,_e);B.clearOnly=ie,y(F,Q,B,J?f.lines.blockLineCount:k,k,Ee)}}},readPixel:function($,J){return F.read({x:$,y:J,width:1,height:1,data:i}),i},readPixels:function($,J,ie,j){var q=new Uint8Array(4*ie*j);return F.read({x:$,y:J,width:ie,height:j,data:q}),q},destroy:function(){for(var $ in u.style["pointer-events"]="none",Z.destroy(),E&&E.destroy(),V)V[$].destroy()},update:re}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b){var e,o;for(b||(b=1/0),e=0;e<x.length;e++)(o=x[e]).visible&&(b=Math.min(b,o[T].length));for(b===1/0&&(b=0),v._length=b,e=0;e<x.length;e++)(o=x[e]).visible&&(o._length=b);return b}},{}],899:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("color-rgba"),e=_("../../plots/cartesian/axes"),o=x.strRotate,i=x.strTranslate,l=_("../../lib/svg_text_utils"),r=_("../../components/drawing"),y=_("../../components/colorscale"),h=_("../../lib/gup"),s=h.keyFun,d=h.repeat,p=h.unwrap,c=_("./helpers"),g=_("./constants"),m=_("./axisbrush"),u=_("./lines");function w(Y,Q,re){return x.aggNums(Y,null,Q,re)}function f(Y,Q){return M(w(Math.min,Y,Q),w(Math.max,Y,Q))}function A(Y){var Q=Y.range;return Q?M(Q[0],Q[1]):f(Y.values,Y._length)}function M(Y,Q){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(Q)&&isFinite(Q)||(Q=0),Y===Q&&(0===Y?(Y-=1,Q+=1):(Y*=.9,Q*=1.1)),[Y,Q]}function k(Y,Q,re,$,J){var ie,j,q=A(re);return $?v.scale.ordinal().domain($.map((ie=T(re.tickformat),j=J,j?function(W,ae){var G=j[ae];return null==G?ie(W):G}:ie))).range($.map(function(W){return Y-Q+(W-q[0])/(q[1]-q[0])*(2*Q-Y)})):v.scale.linear().domain(q).range([Y-Q,Q])}function E(Y){if(Y.tickvals){var Q=A(Y);return v.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(re){return(re-Q[0])/(Q[1]-Q[0])}))}}function P(Y){var Q=Y.map(function(J){return J[0]}),re=Y.map(function(J){var ie=b(J[1]);return v.rgb("rgb("+ie[0]+","+ie[1]+","+ie[2]+")")}),$="rgb".split("").map(function(J){return v.scale.linear().clamp(!0).domain(Q).range(re.map((ie=J,function(j){return j[ie]})));var ie});return function(J){return $.map(function(ie){return ie(J)})}}function D(Y){return Y.dimensions.some(function(Q){return Q.brush.filterSpecified})}function F(Y,Q,re){var $=p(Q),J=$.trace,ie=c.convertTypedArray($.lineColor),j=J.line,q={color:b(g.deselectedLineColor)},W=y.extractOpts(j),ae=W.reversescale?y.flipScale($.cscale):$.cscale,G=J.domain,ee=J.dimensions,te=Y.width,le=J.labelangle,ue=J.labelside,de=J.labelfont,he=J.tickfont,be=J.rangefont,me=x.extendDeepNoArrays({},j,{color:ie.map(v.scale.linear().domain(A({values:ie,range:[W.min,W.max],_length:J._length}))),blockLineCount:g.blockLineCount,canvasOverdrag:g.overdrag*g.canvasPixelRatio}),_e=Math.floor(te*(G.x[1]-G.x[0])),Ee=Math.floor(Y.height*(G.y[1]-G.y[0])),De=Y.margin||{l:80,r:80,t:100,b:80},Se=_e,Fe=Ee;return{key:re,colCount:ee.filter(c.isVisible).length,dimensions:ee,tickDistance:g.tickDistance,unitToColor:P(ae),lines:me,deselectedLines:q,labelAngle:le,labelSide:ue,labelFont:de,tickFont:he,rangeFont:be,layoutWidth:te,layoutHeight:Y.height,domain:G,translateX:G.x[0]*te,translateY:Y.height-G.y[1]*Y.height,pad:De,canvasWidth:Se*g.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:Fe*g.canvasPixelRatio,width:Se,height:Fe,canvasPixelRatio:g.canvasPixelRatio}}function R(Y,Q,re){var te,le,$=re.width,J=re.height,ie=re.dimensions,j=re.canvasPixelRatio,q=function(te){return $*te/Math.max(1,re.colCount-1)},W=g.verticalPadding/J,ae=(te=J,le=g.verticalPadding,v.scale.linear().range([le,te-le])),G={key:re.key,xScale:q,model:re,inBrushDrag:!1},ee={};return G.dimensions=ie.filter(c.isVisible).map(function(te,le){var Re,Ue,ue=(Re=te,Ue=W,v.scale.linear().domain(A(Re)).range([Ue,1-Ue])),de=ee[te.label];ee[te.label]=(de||0)+1;var he=te.label+(de?"__"+de:""),be=te.constraintrange,me=be&&be.length;me&&!Array.isArray(be[0])&&(be=[be]);var _e=me?be.map(function(Re){return Re.map(ue)}):[[-1/0,1/0]],Ee=te.values;Ee.length>te._length&&(Ee=Ee.slice(0,te._length));var De,Se=te.tickvals;function Fe(Re,Ue){return{val:Re,text:De[Ue]}}function ve(Re,Ue){return Re.val-Ue.val}if(Array.isArray(Se)&&Se.length){De=te.ticktext,Array.isArray(De)&&De.length?De.length>Se.length?De=De.slice(0,Se.length):Se.length>De.length&&(Se=Se.slice(0,De.length)):De=Se.map(T(te.tickformat));for(var Te=1;Te<Se.length;Te++)if(Se[Te]<Se[Te-1]){for(var Ie=Se.map(Fe).sort(ve),Ce=0;Ce<Se.length;Ce++)Se[Ce]=Ie[Ce].val,De[Ce]=Ie[Ce].text;break}}else Se=void 0;return Ee=c.convertTypedArray(Ee),{key:he,label:te.label,tickFormat:te.tickformat,tickvals:Se,ticktext:De,ordinal:c.isOrdinal(te),multiselect:te.multiselect,xIndex:le,crossfilterDimensionIndex:le,visibleIndex:te._index,height:J,values:Ee,paddedUnitValues:Ee.map(ue),unitTickvals:Se&&Se.map(ue),xScale:q,x:q(le),canvasX:q(le)*j,unitToPaddedPx:ae,domainScale:k(J,g.verticalPadding,te,Se,De),ordinalScale:E(te),parent:G,model:re,brush:m.makeBrush(Y,me,_e,function(){Y.linePickActive(!1)},function(){var Re=G;Re.focusLayer&&Re.focusLayer.render(Re.panels,!0);var Ue=D(Re);!Y.contextShown()&&Ue?(Re.contextLayer&&Re.contextLayer.render(Re.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!Ue&&(Re.contextLayer&&Re.contextLayer.render(Re.panels,!0,!0),Y.contextShown(!1))},function(Re){if(G.focusLayer.render(G.panels,!0),G.pickLayer&&G.pickLayer.render(G.panels,!0),Y.linePickActive(!0),Q&&Q.filterChanged){var Ue=ue.invert,qe=Re.map(function(Xe){return Xe.map(Ue).sort(x.sorterAsc)}).sort(function(Xe,st){return Xe[0]-st[0]});Q.filterChanged(G.key,te._index,qe)}})}}),G}function L(Y){Y.classed(g.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function I(Y,Q){var $=Y*Math.PI/180;return{dir:"top"===Q?1:-1,dx:Math.sin($),dy:Math.cos($),degrees:Y}}function B(Y,Q,re){for(var $=Q.panels||(Q.panels=[]),J=Y.data(),ie=0;ie<J.length-1;ie++){var j=$[ie]||($[ie]={}),q=J[ie],W=J[ie+1];j.dim0=q,j.dim1=W,j.canvasX=q.canvasX,j.panelSizeX=W.canvasX-q.canvasX,j.panelSizeY=Q.model.canvasHeight,j.y=0,j.canvasY=0,j.plotGlPixelRatio=re}}function V(Y,Q){return e.tickText(Y._ax,Q,!1).text}function Z(Y,Q){if(Y.ordinal)return"";var re=Y.domainScale.domain();return V(Y.model.dimensions[Y.visibleIndex],re[Q?re.length-1:0])}oe.exports=function(Y,Q,re,$){var J=Y._fullLayout,ie=J._toppaper,j=J._glcontainer,q=Y._context.plotGlPixelRatio,W=Y._fullLayout.paper_bgcolor;!function(Ce){for(var Re=0;Re<Ce.length;Re++)for(var Ue=0;Ue<Ce[Re].length;Ue++)for(var qe=Ce[Re][Ue].trace,Xe=qe.dimensions,st=0;st<Xe.length;st++){var He=Xe[st].values,$e=Xe[st]._ax;$e&&($e.range=$e.range?M($e.range[0],$e.range[1]):f(He,qe._length),$e.dtick||($e.dtick=.01*(Math.abs($e.range[1]-$e.range[0])||1)),$e.tickformat=Xe[st].tickformat,e.calcTicks($e),$e.cleanRange())}}(Q);var ae,G,ee=(ae=!0,G=!1,{linePickActive:function(Ce){return arguments.length?ae=!!Ce:ae},contextShown:function(Ce){return arguments.length?G=!!Ce:G}}),te=Q.filter(function(Ce){return p(Ce).trace.visible}).map(F.bind(0,re)).map(R.bind(0,ee,$));j.each(function(Ce,Re){return x.extendFlat(Ce,te[Re])});var le=j.selectAll(".gl-canvas").each(function(Ce){Ce.viewModel=te[0],Ce.viewModel.plotGlPixelRatio=q,Ce.viewModel.paperColor=W,Ce.model=Ce.viewModel?Ce.viewModel.model:null}),ue=null;le.filter(function(Ce){return Ce.pick}).style("pointer-events","auto").on("mousemove",function(Ce){if(ee.linePickActive()&&Ce.lineLayer&&$&&$.hover){var Re=v.event,Ue=this.width,qe=this.height,Xe=v.mouse(this),st=Xe[0],He=Xe[1];if(st<0||He<0||st>=Ue||He>=qe)return;var $e=Ce.lineLayer.readPixel(st,qe-1-He),et=0!==$e[3],tt=et?$e[2]+256*($e[1]+256*$e[0]):null,ct={x:st,y:He,clientX:Re.clientX,clientY:Re.clientY,dataIndex:Ce.model.key,curveNumber:tt};tt!==ue&&(et?$.hover(ct):$.unhover&&$.unhover(ct),ue=tt)}}),le.style("opacity",function(Ce){return Ce.pick?0:1}),ie.style("background","rgba(255, 255, 255, 0)");var de=ie.selectAll("."+g.cn.parcoords).data(te,s);de.exit().remove(),de.enter().append("g").classed(g.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(Ce){return i(Ce.model.translateX,Ce.model.translateY)});var he=de.selectAll("."+g.cn.parcoordsControlView).data(d,s);he.enter().append("g").classed(g.cn.parcoordsControlView,!0),he.attr("transform",function(Ce){return i(Ce.model.pad.l,Ce.model.pad.t)});var be=he.selectAll("."+g.cn.yAxis).data(function(Ce){return Ce.dimensions},s);be.enter().append("g").classed(g.cn.yAxis,!0),he.each(function(Ce){B(be,Ce,q)}),le.each(function(Ce){Ce.viewModel&&(!Ce.lineLayer||$?Ce.lineLayer=u(this,Ce):Ce.lineLayer.update(Ce),(Ce.key||0===Ce.key)&&(Ce.viewModel[Ce.key]=Ce.lineLayer),Ce.lineLayer.render(Ce.viewModel.panels,!Ce.context||$))}),be.attr("transform",function(Ce){return i(Ce.xScale(Ce.xIndex),0)}),be.call(v.behavior.drag().origin(function(Ce){return Ce}).on("drag",function(Ce){var Re=Ce.parent;ee.linePickActive(!1),Ce.x=Math.max(-g.overdrag,Math.min(Ce.model.width+g.overdrag,v.event.x)),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,be.sort(function(Ue,qe){return Ue.x-qe.x}).each(function(Ue,qe){Ue.xIndex=qe,Ue.x=Ce===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),B(be,Re,q),be.filter(function(Ue){return 0!==Math.abs(Ce.xIndex-Ue.xIndex)}).attr("transform",function(Ue){return i(Ue.xScale(Ue.xIndex),0)}),v.select(this).attr("transform",i(Ce.x,0)),be.each(function(Ue,qe,Xe){Xe===Ce.parent.key&&(Re.dimensions[qe]=Ue)}),Re.contextLayer&&Re.contextLayer.render(Re.panels,!1,!D(Re)),Re.focusLayer.render&&Re.focusLayer.render(Re.panels)}).on("dragend",function(Ce){var Re=Ce.parent;Ce.x=Ce.xScale(Ce.xIndex),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,B(be,Re,q),v.select(this).attr("transform",function(Ue){return i(Ue.x,0)}),Re.contextLayer&&Re.contextLayer.render(Re.panels,!1,!D(Re)),Re.focusLayer&&Re.focusLayer.render(Re.panels),Re.pickLayer&&Re.pickLayer.render(Re.panels,!0),ee.linePickActive(!0),$&&$.axesMoved&&$.axesMoved(Re.key,Re.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),be.exit().remove();var me=be.selectAll("."+g.cn.axisOverlays).data(d,s);me.enter().append("g").classed(g.cn.axisOverlays,!0),me.selectAll("."+g.cn.axis).remove();var _e=me.selectAll("."+g.cn.axis).data(d,s);_e.enter().append("g").classed(g.cn.axis,!0),_e.each(function(Ce){var Re=Ce.model.height/Ce.model.tickDistance,Ue=Ce.domainScale,qe=Ue.domain();v.select(this).call(v.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Re,Ce.tickFormat).tickValues(Ce.ordinal?qe:null).tickFormat(function(Xe){return c.isOrdinal(Ce)?Xe:V(Ce.model.dimensions[Ce.visibleIndex],Xe)}).scale(Ue)),r.font(_e.selectAll("text"),Ce.model.tickFont)}),_e.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),_e.selectAll("text").style("text-shadow",l.makeTextShadow(W)).style("cursor","default");var Ee=me.selectAll("."+g.cn.axisHeading).data(d,s);Ee.enter().append("g").classed(g.cn.axisHeading,!0);var De=Ee.selectAll("."+g.cn.axisTitle).data(d,s);De.enter().append("text").classed(g.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),De.text(function(Ce){return Ce.label}).each(function(Ce){var Re=v.select(this);r.font(Re,Ce.model.labelFont),l.convertToTspans(Re,Y)}).attr("transform",function(Ce){var Re=I(Ce.model.labelAngle,Ce.model.labelSide),Ue=g.axisTitleOffset;return(Re.dir>0?"":i(0,2*Ue+Ce.model.height))+o(Re.degrees)+i(-Ue*Re.dx,-Ue*Re.dy)}).attr("text-anchor",function(Ce){var Re=I(Ce.model.labelAngle,Ce.model.labelSide);return 2*Math.abs(Re.dx)>Math.abs(Re.dy)?Re.dir*Re.dx<0?"start":"end":"middle"});var Se=me.selectAll("."+g.cn.axisExtent).data(d,s);Se.enter().append("g").classed(g.cn.axisExtent,!0);var Fe=Se.selectAll("."+g.cn.axisExtentTop).data(d,s);Fe.enter().append("g").classed(g.cn.axisExtentTop,!0),Fe.attr("transform",i(0,-g.axisExtentOffset));var ve=Fe.selectAll("."+g.cn.axisExtentTopText).data(d,s);ve.enter().append("text").classed(g.cn.axisExtentTopText,!0).call(L),ve.text(function(Ce){return Z(Ce,!0)}).each(function(Ce){r.font(v.select(this),Ce.model.rangeFont)});var Te=Se.selectAll("."+g.cn.axisExtentBottom).data(d,s);Te.enter().append("g").classed(g.cn.axisExtentBottom,!0),Te.attr("transform",function(Ce){return i(0,Ce.model.height+g.axisExtentOffset)});var Ie=Te.selectAll("."+g.cn.axisExtentBottomText).data(d,s);Ie.enter().append("text").classed(g.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(L),Ie.text(function(Ce){return Z(Ce,!1)}).each(function(Ce){r.font(v.select(this),Ce.model.rangeFont)}),m.ensureAxisBrush(me,W)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(_,oe,se){"use strict";var v=_("./parcoords"),x=_("../../lib/prepare_regl"),T=_("./helpers").isVisible,b={};function e(o,i,l){var r=i.indexOf(l),y=o.indexOf(r);return-1===y&&(y+=i.length),y}(oe.exports=function(o,i){var l=o._fullLayout;if(x(o,[],b)){var r={},y={},h={},s={},d=l._size;i.forEach(function(p,c){var g=p[0].trace;h[c]=g.index;var m=s[c]=g._fullInput.index;r[c]=o.data[m].dimensions,y[c]=o.data[m].dimensions.slice()}),v(o,i,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:function(p,c,g){var m=y[p][c],u=g.map(function(E){return E.slice()}),w="dimensions["+c+"].constraintrange",f=l._tracePreGUI[o._fullData[h[p]]._fullInput.uid];void 0===f[w]&&(f[w]=m.constraintrange||null);var M=o._fullData[h[p]].dimensions[c];u.length?(1===u.length&&(u=u[0]),m.constraintrange=u,M.constraintrange=u.slice(),u=[u]):(delete m.constraintrange,delete M.constraintrange,u=null);var k={};k[w]=u,o.emit("plotly_restyle",[k,[s[p]]])},hover:function(p){o.emit("plotly_hover",p)},unhover:function(p){o.emit("plotly_unhover",p)},axesMoved:function(p,c){var m,u,g=(m=c,u=y[p].filter(T),function(w,f){return e(m,u,w)-e(m,u,f)});r[p].sort(g),y[p].filter(function(m){return!T(m)}).sort(function(m){return y[p].indexOf(m)}).forEach(function(m){r[p].splice(r[p].indexOf(m),1),r[p].splice(y[p].indexOf(m),0,m)}),o.emit("plotly_restyle",[{dimensions:[r[p]]},[s[p]]])}})}}).reglPrecompiled=b},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(_,oe,se){"use strict";var v=_("../../plots/attributes"),x=_("../../plots/domain").attributes,T=_("../../plots/font_attributes"),b=_("../../components/color/attributes"),e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/template_attributes").texttemplateAttrs,i=_("../../lib/extend").extendFlat,l=T({editType:"plot",arrayOk:!0,colorEditType:"plot"});oe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},l,{}),outsidetextfont:i({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:x({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(_,oe,se){"use strict";var v=_("../../plots/plots");se.name="pie",se.plot=function(x,T,b,e){v.plotBasePlot(se.name,x,T,b,e)},se.clean=function(x,T,b,e){v.cleanBasePlot(se.name,x,T,b,e)}},{"../../plots/plots":619}],903:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../../components/color"),b={};function e(i){return function(l,r){return!!l&&!!(l=x(l)).isValid()&&(l=T.addOpacity(l,l.getAlpha()),i[r]||(i[r]=l),l)}}function o(i,l){var r,y=JSON.stringify(i),h=l[y];if(!h){for(h=i.slice(),r=0;r<i.length;r++)h.push(x(i[r]).lighten(20).toHexString());for(r=0;r<i.length;r++)h.push(x(i[r]).darken(20).toHexString());l[y]=h}return h}oe.exports={calc:function(i,l){var r,y,h=[],s=i._fullLayout,d=s.hiddenlabels||[],p=l.labels,c=l.marker.colors||[],g=l.values,m=l._length,u=l._hasValues&&m;if(l.dlabel)for(p=new Array(m),r=0;r<m;r++)p[r]=String(l.label0+r*l.dlabel);var w={},f=e(s["_"+l.type+"colormap"]),A=0,M=!1;for(r=0;r<m;r++){var k,E,P;if(u){if(!v(k=g[r]))continue;k=+k}else k=1;void 0!==(E=p[r])&&""!==E||(E=r);var D=w[E=String(E)];void 0===D?(w[E]=h.length,(P=-1!==d.indexOf(E))||(A+=k),h.push({v:k,label:E,color:f(c[r],E),i:r,pts:[r],hidden:P})):(M=!0,(y=h[D]).v+=k,y.pts.push(r),y.hidden||(A+=k),!1===y.color&&c[r]&&(y.color=f(c[r],E)))}return h=h.filter(function(F){return F.v>=0}),("funnelarea"===l.type?M:l.sort)&&h.sort(function(F,R){return R.v-F.v}),h[0]&&(h[0].vTotal=A),h},crossTraceCalc:function(i,l){var r=(l||{}).type;r||(r="pie");var y=i._fullLayout,h=i.calcdata,s=y[r+"colorway"],d=y["_"+r+"colormap"];y["extend"+r+"colors"]&&(s=o(s,b));for(var p=0,c=0;c<h.length;c++){var g=h[c];if(g[0].trace.type===r)for(var m=0;m<g.length;m++){var u=g[m];!1===u.color&&(d[u.label]?u.color=d[u.label]:(d[u.label]=u.color=s[p%s.length],p++))}}},makePullColorFn:e,generateExtendedColors:o}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("./attributes"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText;function o(i,l){var r=Array.isArray(i),y=x.isArrayOrTypedArray(l),h=Math.min(r?i.length:1/0,y?l.length:1/0);if(isFinite(h)||(h=0),h&&y){for(var s,d=0;d<h;d++){var p=l[d];if(v(p)&&p>0){s=!0;break}}s||(h=0)}return{hasLabels:r,hasValues:y,len:h}}oe.exports={handleLabelsAndValues:o,supplyDefaults:function(i,l,r,y){function h(f,A){return x.coerce(i,l,T,f,A)}var s=o(h("labels"),h("values")),d=s.len;if(l._hasLabels=s.hasLabels,l._hasValues=s.hasValues,!l._hasLabels&&l._hasValues&&(h("label0"),h("dlabel")),d){l._length=d,h("marker.line.width")&&h("marker.line.color"),h("marker.colors"),h("scalegroup");var p,c=h("text"),g=h("texttemplate");if(g||(p=h("textinfo",Array.isArray(c)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),g||p&&"none"!==p){var m=h("textposition");e(i,l,y,h,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&h("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&h("insidetextorientation")}b(l,y,h);var u=h("hole");if(h("title.text")){var w=h("title.position",u?"middle center":"top center");u||"middle center"!==w||(l.title.position="top center"),x.coerceFont(h,"title.font",y.font)}h("sort"),h("direction"),h("rotation"),h("pull")}else l.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(_,oe,se){"use strict";var v=_("../../components/fx/helpers").appendArrayMultiPointValues;oe.exports=function(x,T){var b={curveNumber:T.index,pointNumbers:x.pts,data:T._input,fullData:T,label:x.label,color:x.color,value:x.v,percent:x.percent,text:x.text,bbox:x.bbox,v:x.v};return 1===x.pts.length&&(b.pointNumber=b.i=x.pts[0]),v(b,T,x.pts),"funnelarea"===T.type&&(delete b.v,delete b.i),b}},{"../../components/fx/helpers":402}],906:[function(_,oe,se){"use strict";var v=_("../../lib");function x(T){return-1!==T.indexOf("e")?T.replace(/[.]?0+e/,"e"):-1!==T.indexOf(".")?T.replace(/[.]?0+$/,""):T}se.formatPiePercent=function(T,b){var e=x((100*T).toPrecision(3));return v.numSeparate(e,b)+"%"},se.formatPieValue=function(T,b){var e=x(T.toPrecision(10));return v.numSeparate(e,b)},se.getFirstFilled=function(T,b){if(Array.isArray(T))for(var e=0;e<b.length;e++){var o=T[b[e]];if(o||0===o||""===o)return o}},se.castOption=function(T,b){return Array.isArray(T)?se.getFirstFilled(T,b):T||void 0},se.getRotationAngle=function(T){return("auto"===T?0:T)*Math.PI/180}},{"../../lib":503}],907:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,supplyLayoutDefaults:_("./layout_defaults"),layoutAttributes:_("./layout_attributes"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style"),styleOne:_("./style_one"),moduleType:"trace",name:"pie",basePlotModule:_("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(_,oe,se){"use strict";oe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,i){return v.coerce(T,b,x,o,i)}e("hiddenlabels"),e("piecolorway",b.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../../components/fx"),b=_("../../components/color"),e=_("../../components/drawing"),o=_("../../lib"),i=o.strScale,l=o.strTranslate,r=_("../../lib/svg_text_utils"),y=_("../bar/uniform_text"),h=y.recordMinTextSize,s=y.clearMinTextSize,d=_("../bar/constants").TEXTPAD,p=_("./helpers"),c=_("./event_data"),g=_("../../lib").isValidTextValue;function m(Q,re,$){var J=$[0],ie=J.cx,j=J.cy,q=J.trace,W="funnelarea"===q.type;"_hasHoverLabel"in q||(q._hasHoverLabel=!1),"_hasHoverEvent"in q||(q._hasHoverEvent=!1),Q.on("mouseover",function(ae){var G=re._fullLayout,ee=re._fullData[q.index];if(!re._dragging&&!1!==G.hovermode){var te=ee.hoverinfo;if(Array.isArray(te)&&(te=T.castHoverinfo({hoverinfo:[p.castOption(te,ae.pts)],_module:q._module},G,0)),"all"===te&&(te="label+text+value+percent+name"),ee.hovertemplate||"none"!==te&&"skip"!==te&&te){var le=ae.rInscribed||0,ue=ie+ae.pxmid[0]*(1-le),de=j+ae.pxmid[1]*(1-le),he=G.separators,be=[];if(te&&-1!==te.indexOf("label")&&be.push(ae.label),ae.text=p.castOption(ee.hovertext||ee.text,ae.pts),te&&-1!==te.indexOf("text")){var me=ae.text;o.isValidTextValue(me)&&be.push(me)}ae.value=ae.v,ae.valueLabel=p.formatPieValue(ae.v,he),te&&-1!==te.indexOf("value")&&be.push(ae.valueLabel),ae.percent=ae.v/J.vTotal,ae.percentLabel=p.formatPiePercent(ae.percent,he),te&&-1!==te.indexOf("percent")&&be.push(ae.percentLabel);var _e=ee.hoverlabel,Ee=_e.font,De=[];T.loneHover({trace:q,x0:ue-le*J.r,x1:ue+le*J.r,y:de,_x0:W?ie+ae.TL[0]:ue-le*J.r,_x1:W?ie+ae.TR[0]:ue+le*J.r,_y0:W?j+ae.TL[1]:de-le*J.r,_y1:W?j+ae.BL[1]:de+le*J.r,text:be.join("<br>"),name:ee.hovertemplate||-1!==te.indexOf("name")?ee.name:void 0,idealAlign:ae.pxmid[0]<0?"left":"right",color:p.castOption(_e.bgcolor,ae.pts)||ae.color,borderColor:p.castOption(_e.bordercolor,ae.pts),fontFamily:p.castOption(Ee.family,ae.pts),fontSize:p.castOption(Ee.size,ae.pts),fontColor:p.castOption(Ee.color,ae.pts),nameLength:p.castOption(_e.namelength,ae.pts),textAlign:p.castOption(_e.align,ae.pts),hovertemplate:p.castOption(ee.hovertemplate,ae.pts),hovertemplateLabels:ae,eventData:[c(ae,ee)]},{container:G._hoverlayer.node(),outerContainer:G._paper.node(),gd:re,inOut_bbox:De}),ae.bbox=De[0],q._hasHoverLabel=!0}q._hasHoverEvent=!0,re.emit("plotly_hover",{points:[c(ae,ee)],event:v.event})}}),Q.on("mouseout",function(ae){var G=re._fullLayout,ee=re._fullData[q.index],te=v.select(this).datum();q._hasHoverEvent&&(ae.originalEvent=v.event,re.emit("plotly_unhover",{points:[c(te,ee)],event:v.event}),q._hasHoverEvent=!1),q._hasHoverLabel&&(T.loneUnhover(G._hoverlayer.node()),q._hasHoverLabel=!1)}),Q.on("click",function(ae){re._dragging||!1===re._fullLayout.hovermode||(re._hoverdata=[c(ae,re._fullData[q.index])],T.click(re,v.event))})}function u(Q,re,$){var J=p.castOption(Q.insidetextfont.color,re.pts);!J&&Q._input.textfont&&(J=p.castOption(Q._input.textfont.color,re.pts));var ie=p.castOption(Q.insidetextfont.family,re.pts)||p.castOption(Q.textfont.family,re.pts)||$.family,j=p.castOption(Q.insidetextfont.size,re.pts)||p.castOption(Q.textfont.size,re.pts)||$.size;return{color:J||b.contrast(re.color),family:ie,size:j}}function w(Q,re){for(var $,J,ie=0;ie<Q.length;ie++)if((J=($=Q[ie][0]).trace).title.text){var j=J.title.text;J._meta&&(j=o.templateString(j,J._meta));var q=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,J.title.font).call(r.convertToTspans,re),W=e.bBox(q.node(),!0);$.titleBox={width:W.width,height:W.height},q.remove()}}function f(Q,re,$){var J=$.r||re.rpx1,ie=re.rInscribed;if(re.startangle===re.stopangle)return{rCenter:1-ie,scale:0,rotate:0,textPosAngle:0};var j,q=re.ring,W=1===q&&Math.abs(re.startangle-re.stopangle)===2*Math.PI,ae=re.halfangle,G=re.midangle,ee=$.trace.insidetextorientation,te="horizontal"===ee,le="tangential"===ee,ue="radial"===ee,de="auto"===ee,he=[];if(!de){var be,me=function(ve,Te){if(st=(Ue=re).stopangle,(Xe=Ue.startangle)>(qe=ve)&&qe>st||Xe<qe&&qe<st){var Ie=Math.abs(ve-re.startangle),Ce=Math.abs(ve-re.stopangle),Re=Ie<Ce?Ie:Ce;(j="tan"===Te?M(Q,J,q,Re,0):A(Q,J,q,Re,Math.PI/2)).textPosAngle=ve,he.push(j)}var Ue,qe,Xe,st};if(te||le){for(be=4;be>=-4;be-=2)me(Math.PI*be,"tan");for(be=4;be>=-4;be-=2)me(Math.PI*(be+1),"tan")}if(te||ue){for(be=4;be>=-4;be-=2)me(Math.PI*(be+1.5),"rad");for(be=4;be>=-4;be-=2)me(Math.PI*(be+.5),"rad")}}if(W||de||te){var _e=Math.sqrt(Q.width*Q.width+Q.height*Q.height);if((j={scale:ie*J*2/_e,rCenter:1-ie,rotate:0}).textPosAngle=(re.startangle+re.stopangle)/2,j.scale>=1)return j;he.push(j)}(de||ue)&&((j=A(Q,J,q,ae,G)).textPosAngle=(re.startangle+re.stopangle)/2,he.push(j)),(de||le)&&((j=M(Q,J,q,ae,G)).textPosAngle=(re.startangle+re.stopangle)/2,he.push(j));for(var Ee=0,De=0,Se=0;Se<he.length;Se++){var Fe=he[Se].scale;if(De<Fe&&(De=Fe,Ee=Se),!de&&De>=1)break}return he[Ee]}function A(Q,re,$,J,ie){re=Math.max(0,re-2*d);var j=Q.width/Q.height,q=P(j,J,re,$);return{scale:2*q/Q.height,rCenter:k(j,q/re),rotate:E(ie)}}function M(Q,re,$,J,ie){re=Math.max(0,re-2*d);var j=Q.height/Q.width,q=P(j,J,re,$);return{scale:2*q/Q.width,rCenter:k(j,q/re),rotate:E(ie+Math.PI/2)}}function k(Q,re){return Math.cos(re)-Q*re}function E(Q){return(180/Math.PI*Q+720)%180-90}function P(Q,re,$,J){var ie=Q+1/(2*Math.tan(re));return $*Math.min(1/(Math.sqrt(ie*ie+.5)+ie),J/(Math.sqrt(Q*Q+J/2)+Q))}function D(Q,re){return Q.v!==re.vTotal||re.trace.hole?Math.min(1/(1+1/Math.sin(Q.halfangle)),Q.ring/2):1}function F(Q,re){var $=re.pxmid[0],J=re.pxmid[1],ie=Q.width/2,j=Q.height/2;return $<0&&(ie*=-1),J<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:ie+Math.abs(j)*(ie>0?1:-1)/2,y:j/(1+$*$/(J*J)),outside:!0}}function R(Q,re){var $,J,ie,j=Q.trace,q={x:Q.cx,y:Q.cy},W={tx:0,ty:0};W.ty+=j.title.font.size,ie=I(j),-1!==j.title.position.indexOf("top")?(q.y-=(1+ie)*Q.r,W.ty-=Q.titleBox.height):-1!==j.title.position.indexOf("bottom")&&(q.y+=(1+ie)*Q.r);var G,ee=Q.r/(void 0===(G=Q.trace.aspectratio)?1:G),te=re.w*(j.domain.x[1]-j.domain.x[0])/2;return-1!==j.title.position.indexOf("left")?(te+=ee,q.x-=(1+ie)*ee,W.tx+=Q.titleBox.width/2):-1!==j.title.position.indexOf("center")?te*=2:-1!==j.title.position.indexOf("right")&&(te+=ee,q.x+=(1+ie)*ee,W.tx-=Q.titleBox.width/2),$=te/Q.titleBox.width,J=L(Q,re)/Q.titleBox.height,{x:q.x,y:q.y,scale:Math.min($,J),tx:W.tx,ty:W.ty}}function L(Q,re){var $=Q.trace;return Math.min(Q.titleBox.height,re.h*($.domain.y[1]-$.domain.y[0])/2)}function I(Q){var re,$=Q.pull;if(!$)return 0;if(Array.isArray($))for($=0,re=0;re<Q.pull.length;re++)Q.pull[re]>$&&($=Q.pull[re]);return $}function B(Q,re){for(var $=[],J=0;J<Q.length;J++){var ie=Q[J][0],j=ie.trace,q=j.domain,W=re.w*(q.x[1]-q.x[0]),ae=re.h*(q.y[1]-q.y[0]);j.title.text&&"middle center"!==j.title.position&&(ae-=L(ie,re));var ee=ae/2;"funnelarea"!==j.type||j.scalegroup||(ee/=j.aspectratio),ie.r=Math.min(W/2,ee)/(1+I(j)),ie.cx=re.l+re.w*(j.domain.x[1]+j.domain.x[0])/2,ie.cy=re.t+re.h*(1-j.domain.y[0])-ae/2,j.title.text&&-1!==j.title.position.indexOf("bottom")&&(ie.cy-=L(ie,re)),j.scalegroup&&-1===$.indexOf(j.scalegroup)&&$.push(j.scalegroup)}!function(te,le){for(var ue,de,he,be=0;be<le.length;be++){var me=1/0,_e=le[be];for(de=0;de<te.length;de++)if((he=(ue=te[de][0]).trace).scalegroup===_e){var Ee;if("pie"===he.type)Ee=ue.r*ue.r;else if("funnelarea"===he.type){var De,Se;he.aspectratio>1?Se=(De=ue.r)/he.aspectratio:De=(Se=ue.r)*he.aspectratio,Ee=(De*=(1+he.baseratio)/2)*Se}me=Math.min(me,Ee/ue.vTotal)}for(de=0;de<te.length;de++)if((he=(ue=te[de][0]).trace).scalegroup===_e){var Fe=me*ue.vTotal;"funnelarea"===he.type&&(Fe/=(1+he.baseratio)/2,Fe/=he.aspectratio),ue.r=Math.sqrt(Fe)}}}(Q,$)}function V(Q,re){return[Q*Math.sin(re),-Q*Math.cos(re)]}function Z(Q,re,$){var Ee,J=Q._fullLayout,ie=$.trace,j=ie.texttemplate,q=ie.textinfo;if(!j&&q&&"none"!==q){var W,ae=q.split("+"),G=function(Ee){return-1!==ae.indexOf(Ee)},ee=G("label"),te=G("text"),le=G("value"),ue=G("percent"),de=J.separators;if(W=ee?[re.label]:[],te){var he=p.getFirstFilled(ie.text,re.pts);g(he)&&W.push(he)}le&&W.push(p.formatPieValue(re.v,de)),ue&&W.push(p.formatPiePercent(re.v/$.vTotal,de)),re.text=W.join("<br>")}if(j){var be=o.castOption(ie,re.i,"texttemplate");if(be){var me={label:(Ee=re).label,value:Ee.v,valueLabel:p.formatPieValue(Ee.v,J.separators),percent:Ee.v/$.vTotal,percentLabel:p.formatPiePercent(Ee.v/$.vTotal,J.separators),color:Ee.color,text:Ee.text,customdata:o.castOption(ie,Ee.i,"customdata")},_e=p.getFirstFilled(ie.text,re.pts);(g(_e)||""===_e)&&(me.text=_e),re.text=o.texttemplateString(be,me,Q._fullLayout._d3locale,me,ie._meta||{})}else re.text=""}}function Y(Q,re){var $=Q.rotate*Math.PI/180,J=Math.cos($),ie=Math.sin($),j=(re.left+re.right)/2,q=(re.top+re.bottom)/2;Q.textX=j*J-q*ie,Q.textY=j*ie+q*J,Q.noCenter=!0}oe.exports={plot:function(Q,re){var $=Q._fullLayout,J=$._size;s("pie",$),w(re,Q),B(re,J);var ie=o.makeTraceGroups($._pielayer,re,"trace").each(function(j){var q=v.select(this),W=j[0],ae=W.trace;(function(G){var ee,te,le,ue=G[0],de=ue.r,he=ue.trace,be=p.getRotationAngle(he.rotation),me=2*Math.PI/ue.vTotal,_e="px0",Ee="px1";if("counterclockwise"===he.direction){for(ee=0;ee<G.length&&G[ee].hidden;ee++);if(ee===G.length)return;be+=me*G[ee].v,me*=-1,_e="px1",Ee="px0"}for(le=V(de,be),ee=0;ee<G.length;ee++)(te=G[ee]).hidden||(te[_e]=le,te.startangle=be,te.pxmid=V(de,be+=me*te.v/2),te.midangle=be,le=V(de,be+=me*te.v/2),te.stopangle=be,te[Ee]=le,te.largeArc=te.v>ue.vTotal/2?1:0,te.halfangle=Math.PI*Math.min(te.v/ue.vTotal,.5),te.ring=1-he.hole,te.rInscribed=D(te,ue))})(j),q.attr("stroke-linejoin","round"),q.each(function(){var G=v.select(this).selectAll("g.slice").data(j);G.enter().append("g").classed("slice",!0),G.exit().remove();var ee=[[[],[]],[[],[]]],te=!1;G.each(function(Ee,De){if(Ee.hidden)v.select(this).selectAll("path,g").remove();else{Ee.pointNumber=Ee.i,Ee.curveNumber=ae.index,ee[Ee.pxmid[1]<0?0:1][Ee.pxmid[0]<0?0:1].push(Ee);var Se=W.cx,Fe=W.cy,ve=v.select(this),Te=ve.selectAll("path.surface").data([Ee]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ve.call(m,Q,j),ae.pull){var Ie=+p.castOption(ae.pull,Ee.pts)||0;Ie>0&&(Se+=Ie*Ee.pxmid[0],Fe+=Ie*Ee.pxmid[1])}Ee.cxFinal=Se,Ee.cyFinal=Fe;var Ce=ae.hole;if(Ee.v===W.vTotal){var Re="M"+(Se+Ee.px0[0])+","+(Fe+Ee.px0[1])+He(Ee.px0,Ee.pxmid,!0,1)+He(Ee.pxmid,Ee.px0,!0,1)+"Z";Te.attr("d",Ce?"M"+(Se+Ce*Ee.px0[0])+","+(Fe+Ce*Ee.px0[1])+He(Ee.px0,Ee.pxmid,!1,Ce)+He(Ee.pxmid,Ee.px0,!1,Ce)+"Z"+Re:Re)}else{var Ue=He(Ee.px0,Ee.px1,!0,1);if(Ce){var qe=1-Ce;Te.attr("d","M"+(Se+Ce*Ee.px1[0])+","+(Fe+Ce*Ee.px1[1])+He(Ee.px1,Ee.px0,!1,Ce)+"l"+qe*Ee.px0[0]+","+qe*Ee.px0[1]+Ue+"Z")}else Te.attr("d","M"+Se+","+Fe+"l"+Ee.px0[0]+","+Ee.px0[1]+Ue+"Z")}Z(Q,Ee,W);var Xe=p.castOption(ae.textposition,Ee.pts),st=ve.selectAll("g.slicetext").data(Ee.text&&"none"!==Xe?[0]:[]);st.enter().append("g").classed("slicetext",!0),st.exit().remove(),st.each(function(){var dt,at,Nt,$e=o.ensureSingle(v.select(this),"text","",function(dt){dt.attr("data-notex",1)}),et=o.ensureUniformFontSize(Q,"outside"===Xe?(Nt=$.font,{color:p.castOption((dt=ae).outsidetextfont.color,(at=Ee).pts)||p.castOption(dt.textfont.color,at.pts)||Nt.color,family:p.castOption(dt.outsidetextfont.family,at.pts)||p.castOption(dt.textfont.family,at.pts)||Nt.family,size:p.castOption(dt.outsidetextfont.size,at.pts)||p.castOption(dt.textfont.size,at.pts)||Nt.size}):u(ae,Ee,$.font));$e.text(Ee.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,et).call(r.convertToTspans,Q);var tt,ct=e.bBox($e.node());if("outside"===Xe)tt=F(ct,Ee);else if(tt=f(ct,Ee,W),"auto"===Xe&&tt.scale<1){var bt=o.ensureUniformFontSize(Q,ae.outsidetextfont);$e.call(e.font,bt),tt=F(ct=e.bBox($e.node()),Ee)}var At=tt.textPosAngle,Ut=void 0===At?Ee.pxmid:V(W.r,At);if(tt.targetX=Se+Ut[0]*tt.rCenter+(tt.x||0),tt.targetY=Fe+Ut[1]*tt.rCenter+(tt.y||0),Y(tt,ct),tt.outside){var Ct=tt.targetY;Ee.yLabelMin=Ct-ct.height/2,Ee.yLabelMid=Ct,Ee.yLabelMax=Ct+ct.height/2,Ee.labelExtraX=0,Ee.labelExtraY=0,te=!0}tt.fontSize=et.size,h(ae.type,tt,$),j[De].transform=tt,$e.attr("transform",o.getTextTransform(tt))})}function He($e,et,tt,ct){return"a"+ct*W.r+","+ct*W.r+" 0 "+Ee.largeArc+(tt?" 1 ":" 0 ")+ct*(et[0]-$e[0])+","+ct*(et[1]-$e[1])}});var De,le=v.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(le.enter().append("g").classed("titletext",!0),le.exit().remove(),le.each(function(){var Ee,Fe,ve,De=o.ensureSingle(v.select(this),"text","",function(Fe){Fe.attr("data-notex",1)}),Se=ae.title.text;ae._meta&&(Se=o.templateString(Se,ae._meta)),De.text(Se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(r.convertToTspans,Q),Ee="middle center"===ae.title.position?(Fe=W,ve=Math.sqrt(Fe.titleBox.width*Fe.titleBox.width+Fe.titleBox.height*Fe.titleBox.height),{x:Fe.cx,y:Fe.cy,scale:Fe.trace.hole*Fe.r*2/ve,tx:0,ty:-Fe.titleBox.height/2+Fe.trace.title.font.size}):R(W,J),De.attr("transform",l(Ee.x,Ee.y)+i(Math.min(1,Ee.scale))+l(Ee.tx,Ee.ty))}),te&&function(Ee,De){var Se,Fe,ve,Te,Ie,Ce,Re,Ue,qe,Xe,st,He,$e;function et(At,Ut){return At.pxmid[1]-Ut.pxmid[1]}function tt(At,Ut){return Ut.pxmid[1]-At.pxmid[1]}function ct(At,Ut){Ut||(Ut={});var Ct,dt,at,Nt,rn=Ut.labelExtraY+(Fe?Ut.yLabelMax:Ut.yLabelMin),en=Fe?At.yLabelMin:At.yLabelMax,Ge=Fe?At.yLabelMax:At.yLabelMin,Qe=At.cyFinal+Ie(At.px0[1],At.px1[1]),Rt=rn-en;if(Rt*Re>0&&(At.labelExtraY=Rt),Array.isArray(De.pull))for(dt=0;dt<Xe.length;dt++)(at=Xe[dt])===At||(p.castOption(De.pull,At.pts)||0)>=(p.castOption(De.pull,at.pts)||0)||((At.pxmid[1]-at.pxmid[1])*Re>0?(Rt=at.cyFinal+Ie(at.px0[1],at.px1[1])-en-At.labelExtraY)*Re>0&&(At.labelExtraY+=Rt):(Ge+At.labelExtraY-Qe)*Re>0&&(Ct=3*Ce*Math.abs(dt-Xe.indexOf(At)),(Nt=at.cxFinal+Te(at.px0[0],at.px1[0])+Ct-(At.cxFinal+At.pxmid[0])-At.labelExtraX)*Ce>0&&(At.labelExtraX+=Nt)))}for(Fe=0;Fe<2;Fe++)for(ve=Fe?et:tt,Ie=Fe?Math.max:Math.min,Re=Fe?1:-1,Se=0;Se<2;Se++){for(Te=Se?Math.max:Math.min,Ce=Se?1:-1,(Ue=Ee[Fe][Se]).sort(ve),Xe=(qe=Ee[1-Fe][Se]).concat(Ue),He=[],st=0;st<Ue.length;st++)void 0!==Ue[st].yLabelMid&&He.push(Ue[st]);for($e=!1,st=0;Fe&&st<qe.length;st++)if(void 0!==qe[st].yLabelMid){$e=qe[st];break}for(st=0;st<He.length;st++){var bt=st&&He[st-1];$e&&!st&&(bt=$e),ct(He[st],bt)}}}(ee,ae),De=ae,G.each(function(Se){var Fe=v.select(this);if(Se.labelExtraX||Se.labelExtraY){var ve=Fe.select("g.slicetext text");Se.transform.targetX+=Se.labelExtraX,Se.transform.targetY+=Se.labelExtraY,ve.attr("transform",o.getTextTransform(Se.transform));var Te=Se.cxFinal+Se.pxmid[0],Ie="M"+Te+","+(Se.cyFinal+Se.pxmid[1]),Ce=(Se.yLabelMax-Se.yLabelMin)*(Se.pxmid[0]<0?-1:1)/4;if(Se.labelExtraX){var Re=Se.labelExtraX*Se.pxmid[1]/Se.pxmid[0],Ue=Se.yLabelMid+Se.labelExtraY-(Se.cyFinal+Se.pxmid[1]);Math.abs(Re)>Math.abs(Ue)?Ie+="l"+Ue*Se.pxmid[0]/Se.pxmid[1]+","+Ue+"H"+(Te+Se.labelExtraX+Ce):Ie+="l"+Se.labelExtraX+","+Re+"v"+(Ue-Re)+"h"+Ce}else Ie+="V"+(Se.yLabelMid+Se.labelExtraY)+"h"+Ce;o.ensureSingle(Fe,"path","textline").call(b.stroke,De.outsidetextfont.color).attr({"stroke-width":Math.min(2,De.outsidetextfont.size/8),d:Ie,fill:"none"})}else Fe.select("path.textline").remove()}),te&&ae.automargin){var ue=e.bBox(q.node()),de=ae.domain,me=(J.w*(de.x[1]-de.x[0])*.5-W.r)/J.w,_e=(J.h*(de.y[1]-de.y[0])*.5-W.r)/J.h;x.autoMargin(Q,"pie."+ae.uid+".automargin",{xl:de.x[0]-me,xr:de.x[1]+me,yb:de.y[0]-_e,yt:de.y[1]+_e,l:Math.max(W.cx-W.r-ue.left,0),r:Math.max(ue.right-(W.cx+W.r),0),b:Math.max(ue.bottom-(W.cy+W.r),0),t:Math.max(W.cy-W.r-ue.top,0),pad:5})}})});setTimeout(function(){ie.selectAll("tspan").each(function(){var j=v.select(this);j.attr("dy")&&j.attr("dy",j.attr("dy"))})},0)},formatSliceLabel:Z,transformInsideText:f,determineInsideTextFont:u,positionTitleOutside:R,prerenderTitles:w,layoutAreas:B,attachFxHandlers:m,computeTransform:Y}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("./style_one"),T=_("../bar/uniform_text").resizeText;oe.exports=function(b){var e=b._fullLayout._pielayer.selectAll(".trace");T(b,e,"pie"),e.each(function(o){var i=o[0].trace,l=v.select(this);l.style({opacity:i.opacity}),l.selectAll("path.surface").each(function(r){v.select(this).call(x,r,i)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("./helpers").castOption;oe.exports=function(T,b,e){var o=e.marker.line,i=x(o.color,b.pts)||v.defaultLine,l=x(o.width,b.pts)||0;T.style("stroke-width",l).call(v.fill,b.color).call(v.stroke,i)}},{"../../components/color":366,"./helpers":906}],913:[function(_,oe,se){"use strict";var v=_("../scatter/attributes");oe.exports={x:v.x,y:v.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:v.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_pointcloud2d,x=_("../../lib/str2rgbarray"),T=_("../../plots/cartesian/autorange").findExtremes,b=_("../scatter/get_trace_color");function e(i,l){this.scene=i,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=v(i.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=e.prototype;o.handlePick=function(i){var l=this.idToIndex[i.pointId];return{trace:this,dataCoord:i.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},o.update=function(i){this.index=i.index,this.textLabels=i.text,this.name=i.name,this.hoverinfo=i.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(i),this.color=b(i,{})},o.updateFast=function(i){var l,r,y,h,s,d,p=this.xData=this.pickXData=i.x,c=this.yData=this.pickYData=i.y,g=this.pickXYData=i.xy,u=i.indices,w=this.bounds;if(g){if(y=g,l=g.length>>>1,i.xbounds&&i.ybounds)w[0]=i.xbounds[0],w[2]=i.xbounds[1],w[1]=i.ybounds[0],w[3]=i.ybounds[1];else for(d=0;d<l;d++)s=y[2*d+1],(h=y[2*d])<w[0]&&(w[0]=h),h>w[2]&&(w[2]=h),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);if(u)r=u;else for(r=new Int32Array(l),d=0;d<l;d++)r[d]=d}else for(l=p.length,y=new Float32Array(2*l),r=new Int32Array(l),d=0;d<l;d++)h=p[d],s=c[d],r[d]=d,y[2*d]=h,y[2*d+1]=s,h<w[0]&&(w[0]=h),h>w[2]&&(w[2]=h),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=y;var f=x(i.marker.color),A=x(i.marker.border.color),M=i.opacity*i.marker.opacity;f[3]*=M,this.pointcloudOptions.color=f;var k=i.marker.blend;null===k&&(k=p.length<100||c.length<100),this.pointcloudOptions.blend=k,A[3]*=M,this.pointcloudOptions.borderColor=A;var E=i.marker.sizemin,P=Math.max(i.marker.sizemax,i.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=P,this.pointcloudOptions.areaRatio=i.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var D=this.scene.xaxis,F=this.scene.yaxis,R=P/2||.5;i._extremes[D._id]=T(D,[w[0],w[2]],{ppad:R}),i._extremes[F._id]=T(F,[w[1],w[3]],{ppad:R})},o.dispose=function(){this.pointcloud.dispose()},oe.exports=function(i,l){var r=new e(i,l.uid);return r.update(l),r}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes");oe.exports=function(T,b,e){function o(i,l){return v.coerce(T,b,x,i,l)}o("x"),o("y"),o("xbounds"),o("ybounds"),T.xy&&T.xy instanceof Float32Array&&(b.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(b.indices=T.indices),o("text"),o("marker.color",e),o("marker.opacity"),o("marker.blend"),o("marker.sizemin"),o("marker.sizemax"),o("marker.border.color",e),o("marker.border.arearatio"),b._length=null}},{"../../lib":503,"./attributes":913}],916:[function(_,oe,se){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("../scatter3d/calc"),plot:_("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:_("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(_,oe,se){"use strict";var v=_("../../plots/font_attributes"),x=_("../../plots/attributes"),T=_("../../components/color/attributes"),b=_("../../components/fx/attributes"),e=_("../../plots/domain").attributes,o=_("../../plots/template_attributes").hovertemplateAttrs,i=_("../../components/colorscale/attributes"),l=_("../../plot_api/plot_template").templatedArray,r=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,y=_("../../lib/extend").extendFlat,h=_("../../plot_api/edit_types").overrideAll;(oe.exports=h({hoverinfo:y({},x.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:b.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:v({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:b.hoverlabel,hovertemplate:o({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:b.hoverlabel,hovertemplate:o({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:y(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(_,oe,se){"use strict";var v=_("../../plot_api/edit_types").overrideAll,x=_("../../plots/get_data").getModuleCalcData,T=_("./plot"),b=_("../../components/fx/layout_attributes"),e=_("../../lib/setcursor"),o=_("../../components/dragelement"),i=_("../../plots/cartesian/select").prepSelect,l=_("../../lib"),r=_("../../registry");function y(h,s){var d=h._fullData[s],p=h._fullLayout,c=p.dragmode,m=d._bgRect;if("pan"!==c&&"zoom"!==c){e(m,"pan"===p.dragmode?"move":"crosshair");var u={_id:"x",c2p:l.identity,_offset:d._sankey.translateX,_length:d._sankey.width},w={_id:"y",c2p:l.identity,_offset:d._sankey.translateY,_length:d._sankey.height},f={gd:h,element:m.node(),plotinfo:{id:s,xaxis:u,yaxis:w,fillRangeItems:l.noop},subplot:s,xaxes:[u],yaxes:[w],doneFnCompleted:function(A){var M,k=h._fullData[s],E=k.node.groups.slice(),P=[];function D(I){for(var B=k._sankey.graph.nodes,V=0;V<B.length;V++)if(B[V].pointNumber===I)return B[V]}for(var F=0;F<A.length;F++){var R=D(A[F].pointNumber);if(R)if(R.group){for(var L=0;L<R.childrenNodes.length;L++)P.push(R.childrenNodes[L].pointNumber);E[R.pointNumber-k.node._count]=!1}else P.push(R.pointNumber)}M=E.filter(Boolean).concat([P]),r.call("_guiRestyle",h,{"node.groups":[M]},s)},prepFn:function(A,M,k){i(A,M,k,f,c)}};o.init(f)}}se.name="sankey",se.baseLayoutAttrOverrides=v({hoverlabel:b.hoverlabel},"plot","nested"),se.plot=function(h){var s=x(h.calcdata,"sankey")[0];T(h,s),se.updateFx(h)},se.clean=function(h,s,d,p){var c=p._has&&p._has("sankey"),g=s._has&&s._has("sankey");c&&!g&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},se.updateFx=function(h){for(var s=0;s<h._fullData.length;s++)y(h,s)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(_,oe,se){"use strict";var v=_("strongly-connected-components"),x=_("../../lib"),T=_("../../lib/gup").wrap,b=x.isArrayOrTypedArray,e=x.isIndex,o=_("../../components/colorscale");oe.exports=function(l,r){var y=function i(l){var r,y=l.node,h=l.link,s=[],d=b(h.color),p=b(h.customdata),c={},g={},m=h.colorscales.length;for(r=0;r<m;r++){var u=h.colorscales[r],w=o.extractScale(u,{cLetter:"c"}),f=o.makeColorScaleFunc(w);g[u.label]=f}var A=0;for(r=0;r<h.value.length;r++)h.source[r]>A&&(A=h.source[r]),h.target[r]>A&&(A=h.target[r]);var M,k=A+1;l.node._count=k;var E=l.node.groups,P={};for(r=0;r<E.length;r++){var D=E[r];for(M=0;M<D.length;M++){var F=D[M],R=k+r;P.hasOwnProperty(F)?x.warn("Node "+F+" is already part of a group."):P[F]=R}}var L={source:[],target:[]};for(r=0;r<h.value.length;r++){var I=h.value[r],B=h.source[r],V=h.target[r];if(I>0&&e(B,k)&&e(V,k)&&(!P.hasOwnProperty(B)||!P.hasOwnProperty(V)||P[B]!==P[V])){P.hasOwnProperty(V)&&(V=P[V]),P.hasOwnProperty(B)&&(B=P[B]),c[B=+B]=c[V=+V]=!0;var Z="";h.label&&h.label[r]&&(Z=h.label[r]);var Y=null;Z&&g.hasOwnProperty(Z)&&(Y=g[Z]),s.push({pointNumber:r,label:Z,color:d?h.color[r]:h.color,customdata:p?h.customdata[r]:h.customdata,concentrationscale:Y,source:B,target:V,value:+I}),L.source.push(B),L.target.push(V)}}var Q=k+E.length,re=b(y.color),$=b(y.customdata),J=[];for(r=0;r<Q;r++)c[r]&&J.push({group:r>k-1,childrenNodes:[],pointNumber:r,label:y.label[r],color:re?y.color[r]:y.color,customdata:$?y.customdata[r]:y.customdata});var j=!1;return function(q,W,ae){for(var G=x.init2dArray(q,0),ee=0;ee<Math.min(W.length,ae.length);ee++)if(x.isIndex(W[ee],q)&&x.isIndex(ae[ee],q)){if(W[ee]===ae[ee])return!0;G[W[ee]].push(ae[ee])}return v(G).components.some(function(te){return te.length>1})}(Q,L.source,L.target)&&(j=!0),{circular:j,links:s,nodes:J,groups:E,groupLookup:P}}(r);return T({circular:y.circular,_nodes:y.nodes,_links:y.links,_groups:y.groups,_groupLookup:y.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(_,oe,se){"use strict";oe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("tinycolor2"),e=_("../../plots/domain").defaults,o=_("../../components/fx/hoverlabel_defaults"),i=_("../../plot_api/plot_template"),l=_("../../plots/array_container_defaults");function r(y,h){function s(d,p){return v.coerce(y,h,x.link.colorscales,d,p)}s("label"),s("cmin"),s("cmax"),s("colorscale")}oe.exports=function(y,h,s,d){function p(P,D){return v.coerce(y,h,x,P,D)}var c=v.extendDeep(d.hoverlabel,y.hoverlabel),g=y.node,m=i.newContainer(h,"node");function u(P,D){return v.coerce(g,m,x.node,P,D)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",y.hoverinfo),o(g,m,u,c),u("hovertemplate");var w=d.colorway;u("color",m.label.map(function(P,D){return T.addOpacity(w[D%w.length],.8)})),u("customdata");var f=y.link||{},A=i.newContainer(h,"link");function M(P,D){return v.coerce(f,A,x.link,P,D)}M("label"),M("source"),M("target"),M("value"),M("line.color"),M("line.width"),M("hoverinfo",y.hoverinfo),o(f,A,M,c),M("hovertemplate");var k,E=b(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";M("color",v.repeat(E,A.value.length)),M("customdata"),l(f,A,{name:"colorscales",handleItemDefaults:r}),e(h,d,p),p("orientation"),p("valueformat"),p("valuesuffix"),m.x.length&&m.y.length&&(k="freeform"),p("arrangement",k),v.coerceFont(p,"textfont",v.extendFlat({},d.font)),h._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),moduleType:"trace",name:"sankey",basePlotModule:_("./base_plot"),selectPoints:_("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("./render"),e=_("../../components/fx"),o=_("../../components/color"),i=_("./constants").cn,l=x._;function r(f){return""!==f}function y(f,A){return f.filter(function(M){return M.key===A.traceId})}function h(f,A){v.select(f).select("path").style("fill-opacity",A),v.select(f).select("rect").style("fill-opacity",A)}function s(f){v.select(f).select("text.name").style("fill","black")}function d(f){return function(A){return-1!==f.node.sourceLinks.indexOf(A.link)||-1!==f.node.targetLinks.indexOf(A.link)}}function p(f){return function(A){return-1!==A.node.sourceLinks.indexOf(f.link)||-1!==A.node.targetLinks.indexOf(f.link)}}function c(f,A,M){A&&M&&y(M,A).selectAll("."+i.sankeyLink).filter(d(A)).call(m.bind(0,A,M,!1))}function g(f,A,M){A&&M&&y(M,A).selectAll("."+i.sankeyLink).filter(d(A)).call(u.bind(0,A,M,!1))}function m(f,A,M,k){var E=k.datum().link.label;k.style("fill-opacity",function(P){if(!P.link.concentrationscale)return.4}),E&&y(A,f).selectAll("."+i.sankeyLink).filter(function(P){return P.link.label===E}).style("fill-opacity",function(P){if(!P.link.concentrationscale)return.4}),M&&y(A,f).selectAll("."+i.sankeyNode).filter(p(f)).call(c)}function u(f,A,M,k){var E=k.datum().link.label;k.style("fill-opacity",function(P){return P.tinyColorAlpha}),E&&y(A,f).selectAll("."+i.sankeyLink).filter(function(P){return P.link.label===E}).style("fill-opacity",function(P){return P.tinyColorAlpha}),M&&y(A,f).selectAll(i.sankeyNode).filter(p(f)).call(g)}function w(f,A){var k=x.nestedProperty(f.hoverlabel||{},A).get();return!Array.isArray(k)&&k}oe.exports=function(f,A){for(var M=f._fullLayout,k=M._paper,E=M._size,P=0;P<f._fullData.length;P++)if(f._fullData[P].visible&&f._fullData[P].type===i.sankey&&!f._fullData[P]._viewInitial){var D=f._fullData[P].node;f._fullData[P]._viewInitial={node:{groups:D.groups.slice(),x:D.x.slice(),y:D.y.slice()}}}var F=l(f,"source:")+" ",R=l(f,"target:")+" ",L=l(f,"concentration:")+" ",I=l(f,"incoming flow count:")+" ",B=l(f,"outgoing flow count:")+" ";b(f,k,A,{width:E.w,height:E.h,margin:{t:E.t,r:E.r,b:E.b,l:E.l}},{linkEvents:{hover:function(V,Z,Y){!1!==f._fullLayout.hovermode&&(v.select(V).call(m.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,f.emit("plotly_hover",{event:v.event,points:[Z.link]})))},follow:function(V,Z){if(!1!==f._fullLayout.hovermode){var Y=Z.link.trace.link;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){for(var Q=[],re=0,$=0;$<Z.flow.links.length;$++){var J=Z.flow.links[$];if("closest"!==f._fullLayout.hovermode||Z.link.pointNumber===J.pointNumber){Z.link.pointNumber===J.pointNumber&&(re=$),J.fullData=J.trace,Y=Z.link.trace.link;var ie=q(J),j={valueLabel:T(Z.valueFormat)(J.value)+Z.valueSuffix};Q.push({x:ie[0],y:ie[1],name:j.valueLabel,text:[J.label||"",F+J.source.label,R+J.target.label,J.concentrationscale?L+T("%0.2f")(J.flow.labelConcentration):""].filter(r).join("<br>"),color:w(Y,"bgcolor")||o.addOpacity(J.color,1),borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:v.event.x<ie[0]?"right":"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:j,eventData:[J]})}}e.loneHover(Q,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:f,anchorIndex:re}).each(function(){Z.link.concentrationscale||h(this,.65),s(this)})}}function q(W){var ae,G;W.circular?(ae=(W.circularPathData.leftInnerExtent+W.circularPathData.rightInnerExtent)/2,G=W.circularPathData.verticalFullExtent):(ae=(W.source.x1+W.target.x0)/2,G=(W.y0+W.y1)/2);var ee=[ae,G];return"v"===W.trace.orientation&&ee.reverse(),ee[0]+=Z.parent.translateX,ee[1]+=Z.parent.translateY,ee}},unhover:function(V,Z,Y){!1!==f._fullLayout.hovermode&&(v.select(V).call(u.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,f.emit("plotly_unhover",{event:v.event,points:[Z.link]})),e.loneUnhover(M._hoverlayer.node()))},select:function(V,Z){var Y=Z.link;Y.originalEvent=v.event,f._hoverdata=[Y],e.click(f,{target:!0})}},nodeEvents:{hover:function(V,Z,Y){!1!==f._fullLayout.hovermode&&(v.select(V).call(c,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,f.emit("plotly_hover",{event:v.event,points:[Z.node]})))},follow:function(V,Z){if(!1!==f._fullLayout.hovermode){var Y=Z.node.trace.node;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){var Q=v.select(V).select("."+i.nodeRect),re=f._fullLayout._paperdiv.node().getBoundingClientRect(),$=Q.node().getBoundingClientRect(),J=$.left-2-re.left,ie=$.right+2-re.left,j=$.top+$.height/4-re.top,q={valueLabel:T(Z.valueFormat)(Z.node.value)+Z.valueSuffix};Z.node.fullData=Z.node.trace,f._fullLayout._calcInverseTransform(f);var W=f._fullLayout._invScaleX,G=e.loneHover({x0:W*J,x1:W*ie,y:f._fullLayout._invScaleY*j,name:T(Z.valueFormat)(Z.node.value)+Z.valueSuffix,text:[Z.node.label,I+Z.node.targetLinks.length,B+Z.node.sourceLinks.length].filter(r).join("<br>"),color:w(Y,"bgcolor")||Z.tinyColorHue,borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:q,eventData:[Z.node]},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:f});h(G,.85),s(G)}}},unhover:function(V,Z,Y){!1!==f._fullLayout.hovermode&&(v.select(V).call(g,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,f.emit("plotly_unhover",{event:v.event,points:[Z.node]})),e.loneUnhover(M._hoverlayer.node()))},select:function(V,Z,Y){var Q=Z.node;Q.originalEvent=v.event,f._hoverdata=[Q],v.select(V).call(g,Z,Y),e.click(f,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(_,oe,se){"use strict";var v=_("d3-force"),x=_("d3-interpolate").interpolateNumber,T=_("@plotly/d3"),b=_("@plotly/d3-sankey"),e=_("@plotly/d3-sankey-circular"),o=_("./constants"),i=_("tinycolor2"),l=_("../../components/color"),r=_("../../components/drawing"),y=_("../../lib"),h=y.strTranslate,s=y.strRotate,d=_("../../lib/gup"),p=d.keyFun,c=d.repeat,g=d.unwrap,m=_("../../lib/svg_text_utils"),u=_("../../registry"),w=_("../../constants/alignment"),f=w.CAP_SHIFT,A=w.LINE_SPACING;function M($,J,ie){var j,q=g(J),W=q.trace,ae=W.domain,G="h"===W.orientation,ee=W.node.pad,te=W.node.thickness,le=$.width*(ae.x[1]-ae.x[0]),ue=$.height*(ae.y[1]-ae.y[0]),de=q._nodes,he=q._links,be=q.circular;(j=be?e.sankeyCircular().circularLinkGap(0):b.sankey()).iterations(o.sankeyIterations).size(G?[le,ue]:[ue,le]).nodeWidth(te).nodePadding(ee).nodeId(function(Re){return Re.pointNumber}).nodes(de).links(he);var me,_e,Ee,De=j();for(var Se in j.nodePadding()<ee&&y.warn("node.pad was reduced to ",j.nodePadding()," to fit within the figure."),q._groupLookup){var Fe,ve=parseInt(q._groupLookup[Se]);for(me=0;me<De.nodes.length;me++)if(De.nodes[me].pointNumber===ve){Fe=De.nodes[me];break}if(Fe){var Te={pointNumber:parseInt(Se),x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};De.nodes.unshift(Te),Fe.childrenNodes.unshift(Te)}}if(function(){for(me=0;me<De.nodes.length;me++){var Re,Ue,qe=De.nodes[me],Xe={};for(_e=0;_e<qe.targetLinks.length;_e++)Re=(Ue=qe.targetLinks[_e]).source.pointNumber+":"+Ue.target.pointNumber,Xe.hasOwnProperty(Re)||(Xe[Re]=[]),Xe[Re].push(Ue);var st=Object.keys(Xe);for(_e=0;_e<st.length;_e++){var He=Xe[Re=st[_e]],$e=0,et={};for(Ee=0;Ee<He.length;Ee++)et[(Ue=He[Ee]).label]||(et[Ue.label]=0),et[Ue.label]+=Ue.value,$e+=Ue.value;for(Ee=0;Ee<He.length;Ee++)(Ue=He[Ee]).flow={value:$e,labelConcentration:et[Ue.label]/$e,concentration:Ue.value/$e,links:He},Ue.concentrationscale&&(Ue.color=i(Ue.concentrationscale(Ue.flow.labelConcentration)))}var tt=0;for(_e=0;_e<qe.sourceLinks.length;_e++)tt+=qe.sourceLinks[_e].value;for(_e=0;_e<qe.sourceLinks.length;_e++)(Ue=qe.sourceLinks[_e]).concentrationOut=Ue.value/tt;var ct=0;for(_e=0;_e<qe.targetLinks.length;_e++)ct+=qe.targetLinks[_e].value;for(_e=0;_e<qe.targetLinks.length;_e++)(Ue=qe.targetLinks[_e]).concenrationIn=Ue.value/ct}}(),W.node.x.length&&W.node.y.length){for(me=0;me<Math.min(W.node.x.length,W.node.y.length,De.nodes.length);me++)if(W.node.x[me]&&W.node.y[me]){var Ie=[W.node.x[me]*le,W.node.y[me]*ue];De.nodes[me].x0=Ie[0]-te/2,De.nodes[me].x1=Ie[0]+te/2;var Ce=De.nodes[me].y1-De.nodes[me].y0;De.nodes[me].y0=Ie[1]-Ce/2,De.nodes[me].y1=Ie[1]+Ce/2}"snap"===W.arrangement&&function(Re){var Ue,qe,Xe=Re.map(function(tt,ct){return{x0:tt.x0,index:ct}}).sort(function(tt,ct){return tt.x0-ct.x0}),st=[],He=-1,$e=-1/0;for(me=0;me<Xe.length;me++){var et=Re[Xe[me].index];et.x0>$e+te&&(He+=1,Ue=et.x0),$e=et.x0,st[He]||(st[He]=[]),st[He].push(et),et.x0+=qe=Ue-et.x0,et.x1+=qe}return st}(de=De.nodes).forEach(function(Ue){var qe,Xe,st,He=0,$e=Ue.length;for(Ue.sort(function(et,tt){return et.y0-tt.y0}),st=0;st<$e;++st)(qe=Ue[st]).y0>=He||(Xe=He-qe.y0)>1e-6&&(qe.y0+=Xe,qe.y1+=Xe),He=qe.y1+ee}),j.update(De)}return{circular:be,key:ie,trace:W,guid:y.randstr(),horizontal:G,width:le,height:ue,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:ae.x[0]*$.width+$.margin.l,translateY:$.height-ae.y[1]*$.height+$.margin.t,dragParallel:G?ue:le,dragPerpendicular:G?le:ue,arrangement:W.arrangement,sankey:j,graph:De,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k($,J,ie){var j=i(J.color),q=J.source.label+"|"+J.target.label+"__"+ie;return J.trace=$.trace,J.curveNumber=$.trace.index,{circular:$.circular,key:q,traceId:$.key,pointNumber:J.pointNumber,link:J,tinyColorHue:l.tinyRGB(j),tinyColorAlpha:j.getAlpha(),linkPath:E,linkLineColor:$.linkLineColor,linkLineWidth:$.linkLineWidth,valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,parent:$,interactionState:$.interactionState,flow:J.flow}}function E(){return function($){if($.link.circular)return ie=(J=$.link).width/2,j=J.circularPathData,"top"===J.circularLinkType?"M "+j.targetX+" "+(j.targetY+ie)+" L"+j.rightInnerExtent+" "+(j.targetY+ie)+"A"+(j.rightLargeArcRadius+ie)+" "+(j.rightSmallArcRadius+ie)+" 0 0 1 "+(j.rightFullExtent-ie)+" "+(j.targetY-j.rightSmallArcRadius)+"L"+(j.rightFullExtent-ie)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+ie)+" "+(j.rightLargeArcRadius+ie)+" 0 0 1 "+j.rightInnerExtent+" "+(j.verticalFullExtent-ie)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent-ie)+"A"+(j.leftLargeArcRadius+ie)+" "+(j.leftLargeArcRadius+ie)+" 0 0 1 "+(j.leftFullExtent+ie)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+ie)+" "+(j.sourceY-j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+ie)+" "+(j.leftSmallArcRadius+ie)+" 0 0 1 "+j.leftInnerExtent+" "+(j.sourceY+ie)+"L"+j.sourceX+" "+(j.sourceY+ie)+"L"+j.sourceX+" "+(j.sourceY-ie)+"L"+j.leftInnerExtent+" "+(j.sourceY-ie)+"A"+(j.leftLargeArcRadius-ie)+" "+(j.leftSmallArcRadius-ie)+" 0 0 0 "+(j.leftFullExtent-ie)+" "+(j.sourceY-j.leftSmallArcRadius)+"L"+(j.leftFullExtent-ie)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-ie)+" "+(j.leftLargeArcRadius-ie)+" 0 0 0 "+j.leftInnerExtent+" "+(j.verticalFullExtent+ie)+"L"+j.rightInnerExtent+" "+(j.verticalFullExtent+ie)+"A"+(j.rightLargeArcRadius-ie)+" "+(j.rightLargeArcRadius-ie)+" 0 0 0 "+(j.rightFullExtent+ie)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+ie)+" "+(j.targetY-j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-ie)+" "+(j.rightSmallArcRadius-ie)+" 0 0 0 "+j.rightInnerExtent+" "+(j.targetY-ie)+"L"+j.targetX+" "+(j.targetY-ie)+"Z":"M "+j.targetX+" "+(j.targetY-ie)+" L"+j.rightInnerExtent+" "+(j.targetY-ie)+"A"+(j.rightLargeArcRadius+ie)+" "+(j.rightSmallArcRadius+ie)+" 0 0 0 "+(j.rightFullExtent-ie)+" "+(j.targetY+j.rightSmallArcRadius)+"L"+(j.rightFullExtent-ie)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+ie)+" "+(j.rightLargeArcRadius+ie)+" 0 0 0 "+j.rightInnerExtent+" "+(j.verticalFullExtent+ie)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent+ie)+"A"+(j.leftLargeArcRadius+ie)+" "+(j.leftLargeArcRadius+ie)+" 0 0 0 "+(j.leftFullExtent+ie)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+ie)+" "+(j.sourceY+j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+ie)+" "+(j.leftSmallArcRadius+ie)+" 0 0 0 "+j.leftInnerExtent+" "+(j.sourceY-ie)+"L"+j.sourceX+" "+(j.sourceY-ie)+"L"+j.sourceX+" "+(j.sourceY+ie)+"L"+j.leftInnerExtent+" "+(j.sourceY+ie)+"A"+(j.leftLargeArcRadius-ie)+" "+(j.leftSmallArcRadius-ie)+" 0 0 1 "+(j.leftFullExtent-ie)+" "+(j.sourceY+j.leftSmallArcRadius)+"L"+(j.leftFullExtent-ie)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-ie)+" "+(j.leftLargeArcRadius-ie)+" 0 0 1 "+j.leftInnerExtent+" "+(j.verticalFullExtent-ie)+"L"+j.rightInnerExtent+" "+(j.verticalFullExtent-ie)+"A"+(j.rightLargeArcRadius-ie)+" "+(j.rightLargeArcRadius-ie)+" 0 0 1 "+(j.rightFullExtent+ie)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+ie)+" "+(j.targetY+j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-ie)+" "+(j.rightSmallArcRadius-ie)+" 0 0 1 "+j.rightInnerExtent+" "+(j.targetY+ie)+"L"+j.targetX+" "+(j.targetY+ie)+"Z";var J,ie,j,q=$.link.source.x1,W=$.link.target.x0,ae=x(q,W),G=ae(.5),ee=ae(.5),te=$.link.y0-$.link.width/2,le=$.link.y0+$.link.width/2,ue=$.link.y1-$.link.width/2,de=$.link.y1+$.link.width/2;return"M"+q+","+te+"C"+G+","+te+" "+ee+","+ue+" "+W+","+ue+"L"+W+","+de+"C"+ee+","+de+" "+G+","+le+" "+q+","+le+"Z"}}function P($,J){var ie=i(J.color),j=o.nodePadAcross,q=$.nodePad/2;J.dx=J.x1-J.x0,J.dy=J.y1-J.y0;var W=J.dx,ae=Math.max(.5,J.dy),G="node_"+J.pointNumber;return J.group&&(G=y.randstr()),J.trace=$.trace,J.curveNumber=$.trace.index,{index:J.pointNumber,key:G,partOfGroup:J.partOfGroup||!1,group:J.group,traceId:$.key,trace:$.trace,node:J,nodePad:$.nodePad,nodeLineColor:$.nodeLineColor,nodeLineWidth:$.nodeLineWidth,textFont:$.textFont,size:$.horizontal?$.height:$.width,visibleWidth:Math.ceil(W),visibleHeight:ae,zoneX:-j,zoneY:-q,zoneWidth:W+2*j,zoneHeight:ae+2*q,labelY:$.horizontal?J.dy/2+1:J.dx/2+1,left:1===J.originalLayer,sizeAcross:$.width,forceLayouts:$.forceLayouts,horizontal:$.horizontal,darkBackground:ie.getBrightness()<=128,tinyColorHue:l.tinyRGB(ie),tinyColorAlpha:ie.getAlpha(),valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,graph:$.graph,arrangement:$.arrangement,uniqueNodeLabelPathId:[$.guid,$.key,G].join("_"),interactionState:$.interactionState,figure:$}}function D($){$.attr("transform",function(J){return h(J.node.x0.toFixed(3),J.node.y0.toFixed(3))})}function F($){$.call(D)}function R($,J){$.call(F),J.attr("d",E())}function L($){$.attr("width",function(J){return J.node.x1-J.node.x0}).attr("height",function(J){return J.visibleHeight})}function I($){return $.link.width>1||$.linkLineWidth>0}function B($){return h($.translateX,$.translateY)+($.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V($,J,ie){$.on(".basic",null).on("mouseover.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(ie.hover(this,j,J),j.interactionState.hovered=[this,j])}).on("mousemove.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(ie.follow(this,j),j.interactionState.hovered=[this,j])}).on("mouseout.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(ie.unhover(this,j,J),j.interactionState.hovered=!1)}).on("click.basic",function(j){j.interactionState.hovered&&(ie.unhover(this,j,J),j.interactionState.hovered=!1),j.interactionState.dragInProgress||j.partOfGroup||ie.select(this,j,J)})}function Z($,J,ie,j){var q=T.behavior.drag().origin(function(W){return{x:W.node.x0+W.visibleWidth/2,y:W.node.y0+W.visibleHeight/2}}).on("dragstart",function(W){if("fixed"!==W.arrangement&&(y.ensureSingle(j._fullLayout._infolayer,"g","dragcover",function(G){j._fullLayout._dragCover=G}),y.raiseToTop(this),W.interactionState.dragInProgress=W.node,Q(W.node),W.interactionState.hovered&&(ie.nodeEvents.unhover.apply(0,W.interactionState.hovered),W.interactionState.hovered=!1),"snap"===W.arrangement)){var ae=W.traceId+"|"+W.key;W.forceLayouts[ae]?W.forceLayouts[ae].alpha(1):function(G,ee,te,le){!function(de){for(var he=0;he<de.length;he++)de[he].y=(de[he].y0+de[he].y1)/2,de[he].x=(de[he].x0+de[he].x1)/2}(te.graph.nodes);var he,be,me,ue=te.graph.nodes.filter(function(de){return de.originalX===te.node.originalX}).filter(function(de){return!de.partOfGroup});te.forceLayouts[ee]=v.forceSimulation(ue).alphaDecay(0).force("collide",v.forceCollide().radius(function(de){return de.dy/2+te.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",(he=ee,be=ue,me=te,function(){for(var _e=0,Ee=0;Ee<be.length;Ee++){var De=be[Ee];De===me.interactionState.dragInProgress?(De.x=De.lastDraggedX,De.y=De.lastDraggedY):(De.vx=(De.originalX-De.x)/o.forceTicksPerFrame,De.y=Math.min(me.size-De.dy/2,Math.max(De.dy/2,De.y))),_e=Math.max(_e,Math.abs(De.vx),Math.abs(De.vy))}!me.interactionState.dragInProgress&&_e<.1&&me.forceLayouts[he].alpha()>0&&me.forceLayouts[he].alpha(0)})).stop()}(0,ae,W),G=$,ee=J,te=W,le=ae,ue=j,window.requestAnimationFrame(function de(){var he;for(he=0;he<o.forceTicksPerFrame;he++)te.forceLayouts[le].tick();if(function(me){for(var _e=0;_e<me.length;_e++)me[_e].y0=me[_e].y-me[_e].dy/2,me[_e].y1=me[_e].y0+me[_e].dy,me[_e].x0=me[_e].x-me[_e].dx/2,me[_e].x1=me[_e].x0+me[_e].dx}(te.graph.nodes),te.sankey.update(te.graph),R(G.filter(re(te)),ee),te.forceLayouts[le].alpha()>0)window.requestAnimationFrame(de);else{var be=te.node.originalX;te.node.x0=be-te.visibleWidth/2,te.node.x1=be+te.visibleWidth/2,Y(te,ue)}})}var G,ee,te,le,ue}).on("drag",function(W){if("fixed"!==W.arrangement){var ae=T.event.x,G=T.event.y;"snap"===W.arrangement?(W.node.x0=ae-W.visibleWidth/2,W.node.x1=ae+W.visibleWidth/2,W.node.y0=G-W.visibleHeight/2,W.node.y1=G+W.visibleHeight/2):("freeform"===W.arrangement&&(W.node.x0=ae-W.visibleWidth/2,W.node.x1=ae+W.visibleWidth/2),G=Math.max(0,Math.min(W.size-W.visibleHeight/2,G)),W.node.y0=G-W.visibleHeight/2,W.node.y1=G+W.visibleHeight/2),Q(W.node),"snap"!==W.arrangement&&(W.sankey.update(W.graph),R($.filter(re(W)),J))}}).on("dragend",function(W){if("fixed"!==W.arrangement){W.interactionState.dragInProgress=!1;for(var ae=0;ae<W.node.childrenNodes.length;ae++)W.node.childrenNodes[ae].x=W.node.x,W.node.childrenNodes[ae].y=W.node.y;"snap"!==W.arrangement&&Y(W,j)}});$.on(".drag",null).call(q)}function Y($,J){for(var ie=[],j=[],q=0;q<$.graph.nodes.length;q++){var ae=($.graph.nodes[q].y0+$.graph.nodes[q].y1)/2;ie.push(($.graph.nodes[q].x0+$.graph.nodes[q].x1)/2/$.figure.width),j.push(ae/$.figure.height)}u.call("_guiRestyle",J,{"node.x":[ie],"node.y":[j]},$.trace.index).then(function(){J._fullLayout._dragCover&&J._fullLayout._dragCover.remove()})}function Q($){$.lastDraggedX=$.x0+$.dx/2,$.lastDraggedY=$.y0+$.dy/2}function re($){return function(J){return J.node.originalX===$.node.originalX}}oe.exports=function($,J,ie,j,q){var W=!1;y.ensureSingle($._fullLayout._infolayer,"g","first-render",function(){W=!0});var ae=$._fullLayout._dragCover,G=ie.filter(function(me){return g(me).trace.visible}).map(M.bind(null,j)),ee=J.selectAll("."+o.cn.sankey).data(G,p);ee.exit().remove(),ee.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",B),ee.each(function(me,_e){$._fullData[_e]._sankey=me;var Ee="bgsankey-"+me.trace.uid+"-"+_e;y.ensureSingle($._fullLayout._draggers,"rect",Ee),$._fullData[_e]._bgRect=T.select("."+Ee),$._fullData[_e]._bgRect.style("pointer-events","all").attr("width",me.width).attr("height",me.height).attr("x",me.translateX).attr("y",me.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ee.transition().ease(o.ease).duration(o.duration).attr("transform",B);var te=ee.selectAll("."+o.cn.sankeyLinks).data(c,p);te.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var le=te.selectAll("."+o.cn.sankeyLink).data(function(me){return me.graph.links.filter(function(_e){return _e.value}).map(k.bind(null,me))},p);le.enter().append("path").classed(o.cn.sankeyLink,!0).call(V,ee,q.linkEvents),le.style("stroke",function(me){return I(me)?l.tinyRGB(i(me.linkLineColor)):me.tinyColorHue}).style("stroke-opacity",function(me){return I(me)?l.opacity(me.linkLineColor):me.tinyColorAlpha}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}).style("stroke-width",function(me){return I(me)?me.linkLineWidth:1}).attr("d",E()),le.style("opacity",function(){return $._context.staticPlot||W||ae?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),le.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var ue=ee.selectAll("."+o.cn.sankeyNodeSet).data(c,p);ue.enter().append("g").classed(o.cn.sankeyNodeSet,!0),ue.style("cursor",function(me){switch(me.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=ue.selectAll("."+o.cn.sankeyNode).data(function(me){var _e=me.graph.nodes;return function(Ee){var De,Se=[];for(De=0;De<Ee.length;De++)Ee[De].originalX=(Ee[De].x0+Ee[De].x1)/2,Ee[De].originalY=(Ee[De].y0+Ee[De].y1)/2,-1===Se.indexOf(Ee[De].originalX)&&Se.push(Ee[De].originalX);for(Se.sort(function(Fe,ve){return Fe-ve}),De=0;De<Ee.length;De++)Ee[De].originalLayerIndex=Se.indexOf(Ee[De].originalX),Ee[De].originalLayer=Ee[De].originalLayerIndex/(Se.length-1)}(_e),_e.map(P.bind(null,me))},p);de.enter().append("g").classed(o.cn.sankeyNode,!0).call(D).style("opacity",function(me){return!$._context.staticPlot&&!W||me.partOfGroup?0:1}),de.call(V,ee,q.nodeEvents).call(Z,le,q,$),de.transition().ease(o.ease).duration(o.duration).call(D).style("opacity",function(me){return me.partOfGroup?0:1}),de.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var he=de.selectAll("."+o.cn.nodeRect).data(c);he.enter().append("rect").classed(o.cn.nodeRect,!0).call(L),he.style("stroke-width",function(me){return me.nodeLineWidth}).style("stroke",function(me){return l.tinyRGB(i(me.nodeLineColor))}).style("stroke-opacity",function(me){return l.opacity(me.nodeLineColor)}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}),he.transition().ease(o.ease).duration(o.duration).call(L);var be=de.selectAll("."+o.cn.nodeLabel).data(c);be.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(me){return me.node.label}).each(function(me){var _e=T.select(this);r.font(_e,me.textFont),m.convertToTspans(_e,$)}).style("text-shadow",m.makeTextShadow($._fullLayout.paper_bgcolor)).attr("text-anchor",function(me){return me.horizontal&&me.left?"end":"start"}).attr("transform",function(me){var _e=T.select(this),Ee=m.lineCount(_e),Se=me.nodeLineWidth/2+3,Fe=((me.horizontal?me.visibleHeight:me.visibleWidth)-me.textFont.size*((Ee-1)*A-f))/2;me.horizontal&&(me.left?Se=-Se:Se+=me.visibleWidth);var ve=me.horizontal?"":"scale(-1,1)"+s(90);return h(me.horizontal?Se:Fe,me.horizontal?Fe:Se)+ve}),be.transition().ease(o.ease).duration(o.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(_,oe,se){"use strict";oe.exports=function(v,x){for(var T=[],b=v.cd[0].trace,e=b._sankey.graph.nodes,o=0;o<e.length;o++){var i=e[o];if(!i.partOfGroup){var l=[(i.x0+i.x1)/2,(i.y0+i.y1)/2];"v"===b.orientation&&l.reverse(),x&&x.contains(l,!1,o,v)&&T.push({pointNumber:i.pointNumber})}}return T}},{}],926:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;v.mergeArray(T.text,x,"tx"),v.mergeArray(T.texttemplate,x,"txt"),v.mergeArray(T.hovertext,x,"htx"),v.mergeArray(T.customdata,x,"data"),v.mergeArray(T.textposition,x,"tp"),T.textfont&&(v.mergeArrayCastPositive(T.textfont.size,x,"ts"),v.mergeArray(T.textfont.color,x,"tc"),v.mergeArray(T.textfont.family,x,"tf"));var e=T.marker;if(e){v.mergeArrayCastPositive(e.size,x,"ms"),v.mergeArrayCastPositive(e.opacity,x,"mo"),v.mergeArray(e.symbol,x,"mx"),v.mergeArray(e.color,x,"mc");var o=e.line;e.line&&(v.mergeArray(o.color,x,"mlc"),v.mergeArrayCastPositive(o.width,x,"mlw"));var i=e.gradient;i&&"none"!==i.type&&(v.mergeArray(i.type,x,"mgt"),v.mergeArray(i.color,x,"mgc"))}}},{"../../lib":503}],927:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../components/colorscale/attributes"),e=_("../../plots/font_attributes"),o=_("../../components/drawing/attributes").dash,i=_("../../components/drawing/attributes").pattern,l=_("../../components/drawing"),r=_("./constants"),y=_("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:v("x"),yhoverformat:v("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:x({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:T({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:y({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:y({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:y({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},b("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},b("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../../constants/numerical").BADNUM,o=_("./subtypes"),i=_("./colorscale_calc"),l=_("./arrays_to_calcdata"),r=_("./calc_selection");function y(c,g,m,u,w,f,A){var M=g._length,k=c._fullLayout,E=m._id,P=u._id,D=k._firstScatter[d(g)]===g.uid,F=(p(g,k,m,u)||{}).orientation,R=g.fill;m._minDtick=0,u._minDtick=0;var L={padded:!0},I={padded:!0};A&&(L.ppad=I.ppad=A);var B=M<2||w[0]!==w[M-1]||f[0]!==f[M-1];B&&("tozerox"===R||"tonextx"===R&&(D||"h"===F))?L.tozero=!0:(g.error_y||{}).visible||"tonexty"!==R&&"tozeroy"!==R&&(o.hasMarkers(g)||o.hasText(g))||(L.padded=!1,L.ppad=0),B&&("tozeroy"===R||"tonexty"===R&&(D||"v"===F))?I.tozero=!0:"tonextx"!==R&&"tozerox"!==R||(I.padded=!1),E&&(g._extremes[E]=T.findExtremes(m,w,L)),P&&(g._extremes[P]=T.findExtremes(u,f,I))}function h(c,g){if(o.hasMarkers(c)){var m,u=c.marker,w=1.6*(c.marker.sizeref||1);if(m="area"===c.marker.sizemode?function(E){return Math.max(Math.sqrt((E||0)/w),3)}:function(E){return Math.max((E||0)/w,3)},x.isArrayOrTypedArray(u.size)){var f={type:"linear"};T.setConvert(f);for(var A=f.makeCalcdata(c.marker,"size"),M=new Array(g),k=0;k<g;k++)M[k]=m(A[k]);return M}return m(u.size)}}function s(c,g){var m=d(g),u=c._firstScatter;u[m]||(u[m]=g.uid)}function d(c){var g=c.stackgroup;return c.xaxis+c.yaxis+c.type+(g?"-"+g:"")}function p(c,g,m,u){var w=c.stackgroup;if(w){var f=g._scatterStackOpts[m._id+u._id][w],A="v"===f.orientation?u:m;return"linear"===A.type||"log"===A.type?f:void 0}}oe.exports={calc:function(c,g){var m,u,w,f,A,M,k=c._fullLayout,E=T.getFromId(c,g.xaxis||"x"),P=T.getFromId(c,g.yaxis||"y"),D=E.makeCalcdata(g,"x"),F=P.makeCalcdata(g,"y"),R=b(g,E,"x",D),L=b(g,P,"y",F),I=R.vals,B=L.vals,V=g._length,Z=new Array(V),Y=g.ids,Q=p(g,k,E,P),re=!1;s(k,g);var $,J="x",ie="y";Q?(x.pushUnique(Q.traceIndices,g._expandedIndex),(m="v"===Q.orientation)?(ie="s",$="x"):(J="s",$="y"),A="interpolate"===Q.stackgaps):y(c,g,E,P,I,B,h(g,V));var j=!!g.xperiodalignment,q=!!g.yperiodalignment;for(u=0;u<V;u++){var W=Z[u]={},ae=v(I[u]),G=v(B[u]);ae&&G?(W[J]=I[u],W[ie]=B[u],j&&(W.orig_x=D[u],W.xEnd=R.ends[u],W.xStart=R.starts[u]),q&&(W.orig_y=F[u],W.yEnd=L.ends[u],W.yStart=L.starts[u])):Q&&(m?ae:G)?(W[$]=m?I[u]:B[u],W.gap=!0,A?(W.s=e,re=!0):W.s=0):W[J]=W[ie]=e,Y&&(W.id=String(Y[u]))}if(l(Z,g),i(c,g),r(Z,g),Q){for(u=0;u<Z.length;)Z[u][$]===e?Z.splice(u,1):u++;if(x.sort(Z,function(ue,de){return ue[$]-de[$]||ue.i-de.i}),re){for(u=0;u<Z.length-1&&Z[u].gap;)u++;for((M=Z[u].s)||(M=Z[u].s=0),w=0;w<u;w++)Z[w].s=M;for(f=Z.length-1;f>u&&Z[f].gap;)f--;for(M=Z[f].s,w=Z.length-1;w>f;w--)Z[w].s=M;for(;u<f;)if(Z[++u].gap){for(w=u+1;Z[w].gap;)w++;for(var ee=Z[u-1][$],te=Z[u-1].s,le=(Z[w].s-te)/(Z[w][$]-ee);u<w;)Z[u].s=te+(Z[u][$]-ee)*le,u++}}}return Z},calcMarkerSize:h,calcAxisExpansion:y,setFirstScatter:s,getStackOpts:p}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){v.isArrayOrTypedArray(T.selectedpoints)&&v.tagSelected(x,T)}},{"../../lib":503}],930:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/helpers").hasColorscale,x=_("../../components/colorscale/calc"),T=_("./subtypes");oe.exports=function(b,e){T.hasLines(e)&&v(e,"line")&&x(b,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),T.hasMarkers(e)&&(v(e,"marker")&&x(b,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),v(e,"marker.line")&&x(b,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(_,oe,se){"use strict";oe.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(_,oe,se){"use strict";var v=_("./calc");function x(T,b,e,o,i,l,r){i[o]=!0;var s,d,c,g,m,y={i:null,gap:!0,s:0};if(y[r]=e,T.splice(b,0,y),b&&e===T[b-1][r]){var h=T[b-1];y.s=h.s,y.i=h.i,y.gap=h.gap}else l&&(y.s=(c=r,g=(s=T)[(d=b)-1],(m=s[d+1])?g?g.s+(m.s-g.s)*(e-g[c])/(m[c]-g[c]):m.s:g.s));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}oe.exports=function(T,b){var e=b.xaxis,o=b.yaxis,l=T._fullLayout._scatterStackOpts[e._id+o._id];if(l){var r,y,h,s,d,p,c,g,m,u,w,f,A,M,k,E=T.calcdata;for(var P in l){var D=(u=l[P]).traceIndices;if(D.length){for(w="interpolate"===u.stackgaps,f=u.groupnorm,"v"===u.orientation?(A="x",M="y"):(A="y",M="x"),k=new Array(D.length),r=0;r<k.length;r++)k[r]=!1;p=E[D[0]];var F=new Array(p.length);for(r=0;r<p.length;r++)F[r]=p[r][A];for(r=1;r<D.length;r++){for(d=E[D[r]],y=h=0;y<d.length;y++){for(c=d[y][A];c>F[h]&&h<F.length;h++)x(d,y,F[h],r,k,w,A),y++;if(c!==F[h]){for(s=0;s<r;s++)x(E[D[s]],h,c,s,k,w,A);F.splice(h,0,c)}h++}for(;h<F.length;h++)x(d,y,F[h],r,k,w,A),y++}var R=F.length;for(y=0;y<p.length;y++){for(g=p[y][M]=p[y].s,r=1;r<D.length;r++)(d=E[D[r]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=R,d[y][M]=g+=d[y].s;if(f)for(m=("fraction"===f?g:g/100)||1,r=0;r<D.length;r++){var L=E[D[r]][y];L[M]/=m,L.sNorm=L.s/m}}for(r=0;r<D.length;r++){var I=(d=E[D[r]])[0].trace,B=v.calcMarkerSize(I,I._rawLength),V=Array.isArray(B);if(B&&k[r]||V){var Z=B;for(B=new Array(R),y=0;y<R;y++)B[y]=d[y].gap?0:V?Z[d[y].i]:Z}var Y=new Array(R),Q=new Array(R);for(y=0;y<R;y++)Y[y]=d[y].x,Q[y]=d[y].y;v.calcAxisExpansion(T,I,e,o,Y,Q,B),d[0].t.orientation=u.orientation}}}}}},{"./calc":928}],933:[function(_,oe,se){"use strict";oe.exports=function(v){for(var x=0;x<v.length;x++){var T=v[x];if("scatter"===T.type){var b=T.fill;if("none"!==b&&"toself"!==b&&(T.opacity=void 0,"tonexty"===b||"tonextx"===b))for(var e=x-1;e>=0;e--){var o=v[e];if("scatter"===o.type&&o.xaxis===T.xaxis&&o.yaxis===T.yaxis){o.opacity=void 0;break}}}}}},{}],934:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry"),T=_("./attributes"),b=_("./constants"),e=_("./subtypes"),o=_("./xy_defaults"),i=_("./period_defaults"),l=_("./stack_defaults"),r=_("./marker_defaults"),y=_("./line_defaults"),h=_("./line_shape_defaults"),s=_("./text_defaults"),d=_("./fillcolor_defaults"),p=_("../../lib").coercePattern;oe.exports=function(c,g,m,u){function w(F,R){return v.coerce(c,g,T,F,R)}var f=o(c,g,u,w);if(f||(g.visible=!1),g.visible){i(c,g,u,w),w("xhoverformat"),w("yhoverformat");var A=l(c,g,u,w),M=!A&&f<b.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("mode",M),e.hasLines(g)&&(y(c,g,m,u,w),h(c,g,w),w("connectgaps"),w("line.simplify")),e.hasMarkers(g)&&r(c,g,m,u,w,{gradient:!0}),e.hasText(g)&&(w("texttemplate"),s(c,g,u,w));var k=[];(e.hasMarkers(g)||e.hasText(g))&&(w("cliponaxis"),w("marker.maxdisplayed"),k.push("points")),w("fill",A?A.fillDflt:"none"),"none"!==g.fill&&(d(c,g,m,w),e.hasLines(g)||h(c,g,w),p(w,"fillpattern",g.fillcolor,!1));var E=(g.line||{}).color,P=(g.marker||{}).color;"tonext"!==g.fill&&"toself"!==g.fill||k.push("fills"),w("hoveron",k.join("+")||"points"),"fills"!==g.hoveron&&w("hovertemplate");var D=x.getComponentMethod("errorbars","supplyDefaults");D(c,g,E||P||m,{axis:"y"}),D(c,g,E||P||m,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(g,w)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("../../lib").isArrayOrTypedArray;oe.exports=function(T,b,e,o){var i=!1;if(b.marker){var l=b.marker.color,r=(b.marker.line||{}).color;l&&!x(l)?i=l:r&&!x(r)&&(i=r)}o("fillcolor",v.addOpacity((b.line||{}).color||i||e,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o={_fullLayout:b},i=v.getFromTrace(o,T,"x"),l=v.getFromTrace(o,T,"y");return e.xLabel=v.tickText(i,i.c2l(x.x),!0).text,e.yLabel=v.tickText(l,l.c2l(x.y),!0).text,e}},{"../../plots/cartesian/axes":554}],937:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("./subtypes");oe.exports=function(T,b){var e,o;if("lines"===T.mode)return(e=T.line.color)&&v.opacity(e)?e:T.fillcolor;if("none"===T.mode)return T.fill?T.fillcolor:"";var i=b.mcc||(T.marker||{}).color,l=b.mlcc||((T.marker||{}).line||{}).color;return(o=i&&v.opacity(i)?i:l&&v.opacity(l)&&(b.mlw||((T.marker||{}).line||{}).width)?l:"")?v.opacity(o)<.3?v.addOpacity(o,.3):o:(e=(T.line||{}).color)&&v.opacity(e)&&x.hasLines(T)&&T.line.width?e:T.fillcolor}},{"../../components/color":366,"./subtypes":952}],938:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/fx"),T=_("../../registry"),b=_("./get_trace_color"),e=_("../../components/color"),o=v.fillText;oe.exports=function(i,l,r,y){var h=i.cd,s=h[0].trace,d=i.xa,p=i.ya,c=d.c2p(l),g=p.c2p(r),m=[c,g],u=s.hoveron||"",w=-1!==s.mode.indexOf("markers")?3:.5,f=!!s.xperiodalignment,A=!!s.yperiodalignment;if(-1!==u.indexOf("points")){var M=function(he){var be=Math.max(w,he.mrc||0),me=d.c2p(he.x)-c,_e=p.c2p(he.y)-g;return Math.max(Math.sqrt(me*me+_e*_e)-be,1-w/be)},k=x.getDistanceFunction(y,function(he){if(f){var be=d.c2p(he.xStart),me=d.c2p(he.xEnd);return c>=Math.min(be,me)&&c<=Math.max(be,me)?0:1/0}var _e=Math.max(3,he.mrc||0),Ee=1-1/_e,De=Math.abs(d.c2p(he.x)-c);return De<_e?Ee*De/_e:De-_e+Ee},function(he){if(A){var be=p.c2p(he.yStart),me=p.c2p(he.yEnd);return g>=Math.min(be,me)&&g<=Math.max(be,me)?0:1/0}var _e=Math.max(3,he.mrc||0),Ee=1-1/_e,De=Math.abs(p.c2p(he.y)-g);return De<_e?Ee*De/_e:De-_e+Ee},M);if(x.getClosest(h,k,i),!1!==i.index){var E=h[i.index],P=d.c2p(E.x,!0),D=p.c2p(E.y,!0),F=E.mrc||1;i.index=E.i;var R=h[0].t.orientation,L=R&&(E.sNorm||E.s),I="h"===R?L:void 0!==E.orig_x?E.orig_x:E.x,B="v"===R?L:void 0!==E.orig_y?E.orig_y:E.y;return v.extendFlat(i,{color:b(s,E),x0:P-F,x1:P+F,xLabelVal:I,y0:D-F,y1:D+F,yLabelVal:B,spikeDistance:M(E),hovertemplate:s.hovertemplate}),o(E,s,i),T.getComponentMethod("errorbars","hoverInfo")(E,s,i),[i]}}if(-1!==u.indexOf("fills")&&s._polygons){var V,Z,Y,Q,re,$,ie,j,q=s._polygons,W=[],ae=!1,G=1/0,ee=-1/0,te=1/0,le=-1/0;for(V=0;V<q.length;V++)(Y=q[V]).contains(m)&&(ae=!ae,W.push(Y),te=Math.min(te,Y.ymin),le=Math.max(le,Y.ymax));if(ae){var ue=((te=Math.max(te,0))+(le=Math.min(le,p._length)))/2;for(V=0;V<W.length;V++)for(Q=W[V].pts,Z=1;Z<Q.length;Z++)(ie=Q[Z-1][1])>ue!=(j=Q[Z][1])>=ue&&($=Q[Z-1][0],j-ie&&(re=$+(Q[Z][0]-$)*(ue-ie)/(j-ie),G=Math.min(G,re),ee=Math.max(ee,re)));G=Math.max(G,0),ee=Math.min(ee,d._length);var de=e.defaultLine;return e.opacity(s.fillcolor)?de=s.fillcolor:e.opacity((s.line||{}).color)&&(de=s.line.color),v.extendFlat(i,{distance:i.maxHoverDistance,x0:G,x1:ee,y0:ue,y1:ue,color:de,hovertemplate:!1}),delete i.index,i.text=s.text&&!Array.isArray(s.text)?String(s.text):s.name,[i]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(_,oe,se){"use strict";var v=_("./subtypes");oe.exports={hasLines:v.hasLines,hasMarkers:v.hasMarkers,hasText:v.hasText,isBubble:v.isBubble,attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./cross_trace_calc"),arraysToCalcdata:_("./arrays_to_calcdata"),plot:_("./plot"),colorbar:_("./marker_colorbar"),formatLabels:_("./format_labels"),style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(_,oe,se){"use strict";var v=_("../../lib").isArrayOrTypedArray,x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults");oe.exports=function(b,e,o,i,l,r){var y=(b.marker||{}).color;l("line.color",o),x(b,"line")?T(b,e,i,l,{prefix:"line.",cLetter:"c"}):l("line.color",!v(y)&&y||o),l("line.width"),(r||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(_,oe,se){"use strict";var v=_("../../constants/numerical"),x=v.BADNUM,T=v.LOG_CLIP,b=T+.5,e=T-.5,o=_("../../lib"),i=o.segmentsIntersect,l=o.constrain,r=_("./constants");oe.exports=function(y,h){var s,d,p,c,g,m,u,w,f,A,M,k,E,P,D,F,R,L,I=h.xaxis,B=h.yaxis,V="log"===I.type,Z="log"===B.type,Y=I._length,Q=B._length,re=h.connectGaps,$=h.baseTolerance,J=h.shape,ie="linear"===J,j=h.fill&&"none"!==h.fill,q=[],W=r.minTolerance,ae=y.length,G=new Array(ae),ee=0;function te(tt){var ct=y[tt];if(!ct)return!1;var bt=h.linearized?I.l2p(ct.x):I.c2p(ct.x),At=h.linearized?B.l2p(ct.y):B.c2p(ct.y);if(bt===x){if(V&&(bt=I.c2p(ct.x,!0)),bt===x)return!1;Z&&At===x&&(bt*=Math.abs(I._m*Q*(I._m>0?b:e)/(B._m*Y*(B._m>0?b:e)))),bt*=1e3}if(At===x){if(Z&&(At=B.c2p(ct.y,!0)),At===x)return!1;At*=1e3}return[bt,At]}function le(tt,ct,bt,At){var Ut=bt-tt,Ct=At-ct,dt=.5-tt,at=.5-ct,Nt=Ut*Ut+Ct*Ct,rn=Ut*dt+Ct*at;if(rn>0&&rn<Nt){var en=dt*Ct-at*Ut;if(en*en<Nt)return!0}}function ue(tt,ct){var bt=tt[0]/Y,At=tt[1]/Q,Ut=Math.max(0,-bt,bt-1,-At,At-1);return Ut&&void 0!==R&&le(bt,At,R,L)&&(Ut=0),Ut&&ct&&le(bt,At,ct[0]/Y,ct[1]/Q)&&(Ut=0),(1+r.toleranceGrowth*Ut)*$}function de(tt,ct){var bt=tt[0]-ct[0],At=tt[1]-ct[1];return Math.sqrt(bt*bt+At*At)}var he,be,me,_e,Ee,De,Se,Fe=r.maxScreensAway,ve=-Y*Fe,Te=Y*(1+Fe),Ie=-Q*Fe,Ce=Q*(1+Fe),Re=[[ve,Ie,Te,Ie],[Te,Ie,Te,Ce],[Te,Ce,ve,Ce],[ve,Ce,ve,Ie]];function Ue(tt){if(tt[0]<ve||tt[0]>Te||tt[1]<Ie||tt[1]>Ce)return[l(tt[0],ve,Te),l(tt[1],Ie,Ce)]}function qe(tt,ct){return tt[0]===ct[0]&&(tt[0]===ve||tt[0]===Te)||tt[1]===ct[1]&&(tt[1]===Ie||tt[1]===Ce)||void 0}function Xe(tt,ct,bt){return function(At,Ut){var Ct=Ue(At),dt=Ue(Ut),at=[];if(Ct&&dt&&qe(Ct,dt))return at;Ct&&at.push(Ct),dt&&at.push(dt);var Nt=2*o.constrain((At[tt]+Ut[tt])/2,ct,bt)-((Ct||At)[tt]+(dt||Ut)[tt]);return Nt&&((Ct&&dt?Nt>0==Ct[tt]>dt[tt]?Ct:dt:Ct||dt)[tt]+=Nt),at}}function st(tt){var ct=tt[0],bt=tt[1],At=ct===G[ee-1][0],Ut=bt===G[ee-1][1];if(!At||!Ut)if(ee>1){var Ct=ct===G[ee-2][0],dt=bt===G[ee-2][1];At&&(ct===ve||ct===Te)&&Ct?dt?ee--:G[ee-1]=tt:Ut&&(bt===Ie||bt===Ce)&&dt?Ct?ee--:G[ee-1]=tt:G[ee++]=tt}else G[ee++]=tt}function He(tt){G[ee-1][0]!==tt[0]&&G[ee-1][1]!==tt[1]&&st([me,_e]),st(tt),Ee=null,me=_e=0}function $e(tt){if(R=tt[0]/Y,L=tt[1]/Q,be=tt[1]<Ie?Ie:tt[1]>Ce?Ce:0,(he=tt[0]<ve?ve:tt[0]>Te?Te:0)||be){if(ee)if(Ee){var ct=Se(Ee,tt);ct.length>1&&(He(ct[0]),G[ee++]=ct[1])}else De=Se(G[ee-1],tt)[0],G[ee++]=De;else G[ee++]=[he||tt[0],be||tt[1]];var bt=G[ee-1];he&&be&&(bt[0]!==he||bt[1]!==be)?(Ee&&(me!==he&&_e!==be?st(me&&_e?(Ct=(Ut=tt)[0]-(At=Ee)[0],dt=(Ut[1]-At[1])/Ct,(At[1]*Ut[0]-Ut[1]*At[0])/Ct>0?[dt>0?ve:Te,Ce]:[dt>0?Te:ve,Ie]):[me||he,_e||be]):me&&_e&&st([me,_e])),st([he,be])):me-he&&_e-be&&st([he||me,be||_e]),Ee=tt,me=he,_e=be}else Ee&&He(Se(Ee,tt)[0]),G[ee++]=tt;var At,Ut,Ct,dt}for("linear"===J||"spline"===J?Se=function(tt,ct){for(var bt=[],At=0,Ut=0;Ut<4;Ut++){var Ct=Re[Ut],dt=i(tt[0],tt[1],ct[0],ct[1],Ct[0],Ct[1],Ct[2],Ct[3]);dt&&(!At||Math.abs(dt.x-bt[0][0])>1||Math.abs(dt.y-bt[0][1])>1)&&(dt=[dt.x,dt.y],At&&de(dt,tt)<de(bt[0],tt)?bt.unshift(dt):bt.push(dt),At++)}return bt}:"hv"===J||"vh"===J?Se=function(tt,ct){var bt=[],At=Ue(tt),Ut=Ue(ct);return At&&Ut&&qe(At,Ut)||(At&&bt.push(At),Ut&&bt.push(Ut)),bt}:"hvh"===J?Se=Xe(0,ve,Te):"vhv"===J&&(Se=Xe(1,Ie,Ce)),s=0;s<ae;s++)if(d=te(s)){for(ee=0,Ee=null,$e(d),s++;s<ae;s++){if(!(c=te(s))){if(re)continue;break}if(ie&&h.simplify){var et=te(s+1);if(A=de(c,d),j&&(0===ee||ee===ae-1)||!(A<ue(c,et)*W)){for(w=[(c[0]-d[0])/A,(c[1]-d[1])/A],g=d,M=A,k=P=D=0,u=!1,p=c,s++;s<y.length;s++){if(m=et,et=te(s+1),!m){if(re)continue;break}if(F=(f=[m[0]-d[0],m[1]-d[1]])[0]*w[1]-f[1]*w[0],P=Math.min(P,F),(D=Math.max(D,F))-P>ue(m,et))break;p=m,(E=f[0]*w[0]+f[1]*w[1])>M?(M=E,c=m,u=!1):E<k&&(k=E,g=m,u=!0)}if(u?($e(c),p!==g&&$e(g)):(g!==d&&$e(g),p!==c&&$e(c)),$e(p),s>=y.length||!m)break;$e(m),d=m}}else $e(c)}Ee&&st([me||Ee[0],_e||Ee[1]]),q.push(G.slice(0,ee))}return q}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(_,oe,se){"use strict";oe.exports=function(v,x,T){"spline"===T("line.shape")&&T("line.smoothing")}},{}],943:[function(_,oe,se){"use strict";var v={tonextx:1,tonexty:1,tonext:1};oe.exports=function(x,T,b){var e,o,i,l,r,y={},h=!1,s=-1,d=0,p=-1;for(o=0;o<b.length;o++)(i=(e=b[o][0].trace).stackgroup||"")?i in y?r=y[i]:(r=y[i]=d,d++):e.fill in v&&p>=0?r=p:(r=p=d,d++),r<s&&(h=!0),e._groupIndex=s=r;var c=b.slice();h&&c.sort(function(m,u){var w=m[0].trace,f=u[0].trace;return w._groupIndex-f._groupIndex||w.index-f.index});var g={};for(o=0;o<c.length;o++)i=(e=c[o][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in v&&(e._prevtrace=(l=g[i])||null,l&&(l._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),g[i]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return c}},{}],944:[function(_,oe,se){"use strict";var v=_("fast-isnumeric");oe.exports=function(x,T){T||(T=2);var b=x.marker,e=b.sizeref||1,o=b.sizemin||0,i="area"===b.sizemode?function(l){return Math.sqrt(l/e)}:function(l){return l/e};return function(l){var r=i(l/T);return v(r)&&r>0?Math.max(r,o):0}}},{"fast-isnumeric":190}],945:[function(_,oe,se){"use strict";oe.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("./subtypes");oe.exports=function(e,o,i,l,r,y){var h=b.isBubble(e),s=(e.line||{}).color;y=y||{},s&&(i=s),r("marker.symbol"),r("marker.opacity",h?.7:1),r("marker.size"),r("marker.color",i),x(e,"marker")&&T(e,o,l,r,{prefix:"marker.",cLetter:"c"}),y.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),y.noLine||(r("marker.line.color",s&&!Array.isArray(s)&&o.marker.color!==s?s:h?v.background:v.defaultLine),x(e,"marker.line")&&T(e,o,l,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",h?1:0)),h&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),y.gradient&&"none"!==r("marker.gradient.type")&&r("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(_,oe,se){"use strict";var v=_("../../lib").dateTick0,x=_("../../constants/numerical").ONEWEEK;function T(b,e){return v(e,b%x==0?1:0)}oe.exports=function(b,e,o,i,l){if(l||(l={x:!0,y:!0}),l.x){var r=i("xperiod");r&&(i("xperiod0",T(r,e.xcalendar)),i("xperiodalignment"))}if(l.y){var y=i("yperiod");y&&(i("yperiod0",T(y,e.ycalendar)),i("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=T.ensureSingle,e=T.identity,o=_("../../components/drawing"),i=_("./subtypes"),l=_("./line_points"),r=_("./link_traces"),y=_("../../lib/polygon").tester;function h(s,d,p,c,g,m,u){var w;!function(Te,Ie,Ce,Re,Ue){var qe=Ce.xaxis,Xe=Ce.yaxis,st=v.extent(T.simpleMap(qe.range,qe.r2c)),He=v.extent(T.simpleMap(Xe.range,Xe.r2c)),$e=Re[0].trace;if(i.hasMarkers($e)){var et=$e.marker.maxdisplayed;if(0!==et){var tt=Re.filter(function(Ut){return Ut.x>=st[0]&&Ut.x<=st[1]&&Ut.y>=He[0]&&Ut.y<=He[1]}),ct=Math.ceil(tt.length/et),bt=0;Ue.forEach(function(Ut,Ct){var dt=Ut[0].trace;i.hasMarkers(dt)&&dt.marker.maxdisplayed>0&&Ct<Ie&&bt++});var At=Math.round(bt*ct/3+Math.floor(bt/3)*ct/7.1);Re.forEach(function(Ut){delete Ut.vis}),tt.forEach(function(Ut,Ct){0===Math.round((Ct+At)%ct)&&(Ut.vis=!0)})}}}(0,d,p,c,g);var f=!!u&&u.duration>0;function A(Te){return f?Te.transition():Te}var M=p.xaxis,k=p.yaxis,E=c[0].trace,P=E.line,D=v.select(m),F=b(D,"g","errorbars"),R=b(D,"g","lines"),L=b(D,"g","points"),I=b(D,"g","text");if(x.getComponentMethod("errorbars","plot")(s,F,p,u),!0===E.visible){var B,V;A(D).style("opacity",E.opacity);var Z=E.fill.charAt(E.fill.length-1);"x"!==Z&&"y"!==Z&&(Z=""),c[0][p.isRangePlot?"nodeRangePlot3":"node3"]=D;var Y,Q,re="",$=[],J=E._prevtrace;J&&(re=J._prevRevpath||"",V=J._nextFill,$=J._polygons);var ie,j,q,W,ae,G,ee,te="",le="",ue=[],de=T.noop;if(B=E._ownFill,i.hasLines(E)||"none"!==E.fill){for(V&&V.datum(c),-1!==["hv","vh","hvh","vhv"].indexOf(P.shape)?(ie=o.steps(P.shape),j=o.steps(P.shape.split("").reverse().join(""))):ie=j="spline"===P.shape?function(Te){var Ie=Te[Te.length-1];return Te.length>1&&Te[0][0]===Ie[0]&&Te[0][1]===Ie[1]?o.smoothclosed(Te.slice(1),P.smoothing):o.smoothopen(Te,P.smoothing)}:function(Te){return"M"+Te.join("L")},q=function(Te){return j(Te.reverse())},ue=l(c,{xaxis:M,yaxis:k,connectGaps:E.connectgaps,baseTolerance:Math.max(P.width||1,3)/4,shape:P.shape,simplify:P.simplify,fill:E.fill}),ee=E._polygons=new Array(ue.length),w=0;w<ue.length;w++)E._polygons[w]=y(ue[w]);ue.length&&(W=ue[0][0],G=(ae=ue[ue.length-1])[ae.length-1]),de=function(Te){return function(Ie){if(Y=ie(Ie),Q=q(Ie),te?Z?(te+="L"+Y.substr(1),le=Q+"L"+le.substr(1)):(te+="Z"+Y,le=Q+"Z"+le):(te=Y,le=Q),i.hasLines(E)&&Ie.length>1){var Ce=v.select(this);if(Ce.datum(c),Te)A(Ce.style("opacity",0).attr("d",Y).call(o.lineGroupStyle)).style("opacity",1);else{var Re=A(Ce);Re.attr("d",Y),o.singleLineStyle(c,Re)}}}}}var he=R.selectAll(".js-line").data(ue);A(he.exit()).style("opacity",0).remove(),he.each(de(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(de(!0)),o.setClipUrl(he,p.layerClipId,s),ue.length?(B?(B.datum(c),W&&G&&(Z?("y"===Z?W[1]=G[1]=k.c2p(0,!0):"x"===Z&&(W[0]=G[0]=M.c2p(0,!0)),A(B).attr("d","M"+G+"L"+W+"L"+te.substr(1)).call(o.singleFillStyle,s)):A(B).attr("d",te+"Z").call(o.singleFillStyle,s))):V&&("tonext"===E.fill.substr(0,6)&&te&&re?("tonext"===E.fill?A(V).attr("d",te+"Z"+re+"Z").call(o.singleFillStyle,s):A(V).attr("d",te+"L"+re.substr(1)+"Z").call(o.singleFillStyle,s),E._polygons=E._polygons.concat($)):(me(V),E._polygons=null)),E._prevRevpath=le,E._prevPolygons=ee):(B?me(B):V&&me(V),E._polygons=E._prevRevpath=E._prevPolygons=null),L.datum(c),I.datum(c),function(Te,Ie,Ce){var Re,Ue=Ce[0].trace,qe=i.hasMarkers(Ue),Xe=i.hasText(Ue),st=function Fe(Te){if(Te.ids)return Se}(Ue),He=ve,$e=ve;if(qe||Xe){var et=e,tt=Ue.stackgroup,ct=tt&&"infer zero"===s._fullLayout._scatterStackOpts[M._id+k._id][tt].stackgaps;Ue.marker.maxdisplayed||Ue._needsCull?et=ct?Ee:_e:tt&&!ct&&(et=De),qe&&(He=et),Xe&&($e=et)}var bt,At=(Re=Te.selectAll("path.point").data(He,st)).enter().append("path").classed("point",!0);f&&At.call(o.pointStyle,Ue,s).call(o.translatePoints,M,k).style("opacity",0).transition().style("opacity",1),Re.order(),qe&&(bt=o.makePointStyleFns(Ue)),Re.each(function(Ut){var Ct=v.select(this),dt=A(Ct);o.translatePoint(Ut,dt,M,k)?(o.singlePointStyle(Ut,dt,Ue,bt,s),p.layerClipId&&o.hideOutsideRangePoint(Ut,dt,M,k,Ue.xcalendar,Ue.ycalendar),Ue.customdata&&Ct.classed("plotly-customdata",null!=Ut.data)):dt.remove()}),f?Re.exit().transition().style("opacity",0).remove():Re.exit().remove(),(Re=Ie.selectAll("g").data($e,st)).enter().append("g").classed("textpoint",!0).append("text"),Re.order(),Re.each(function(Ut){var Ct=v.select(this),dt=A(Ct.select("text"));o.translatePoint(Ut,dt,M,k)?p.layerClipId&&o.hideOutsideRangePoint(Ut,Ct,M,k,Ue.xcalendar,Ue.ycalendar):Ct.remove()}),Re.selectAll("text").call(o.textPointStyle,Ue,s).each(function(Ut){var Ct=M.c2p(Ut.x),dt=k.c2p(Ut.y);v.select(this).selectAll("tspan.line").each(function(){A(v.select(this)).attr({x:Ct,y:dt})})}),Re.exit().remove()}(L,I,c);var be=!1===E.cliponaxis?null:p.layerClipId;o.setClipUrl(L,be,s),o.setClipUrl(I,be,s)}function me(Te){A(Te).attr("d","M0,0Z")}function _e(Te){return Te.filter(function(Ie){return!Ie.gap&&Ie.vis})}function Ee(Te){return Te.filter(function(Ie){return Ie.vis})}function De(Te){return Te.filter(function(Ie){return!Ie.gap})}function Se(Te){return Te.id}function ve(){return!1}}oe.exports=function(s,d,p,c,g,m){var u,w,k,P,f=!g,A=!!g&&g.duration>0,M=r(s,d,p);(u=c.selectAll("g.trace").data(M,function(k){return k[0].trace.uid})).enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),u.order(),k=s,P=d,u.each(function(D){var F=b(v.select(this),"g","fills");o.setClipUrl(F,P.layerClipId,k);var R=D[0].trace,L=[];R._ownfill&&L.push("_ownFill"),R._nexttrace&&L.push("_nextFill");var I=F.selectAll("g").data(L,e);I.enter().append("g"),I.exit().each(function(B){R[B]=null}).remove(),I.order().each(function(B){R[B]=b(v.select(this),"path","js-fill")})}),A?(m&&(w=m()),v.transition().duration(g.duration).ease(g.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){c.selectAll("g.trace").each(function(k,E){h(s,E,d,k,M,this,g)})})):u.each(function(k,E){h(s,E,d,k,M,this,g)}),f&&u.exit().remove(),c.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(_,oe,se){"use strict";var v=_("./subtypes");oe.exports=function(x,T){var b,e,o,i,l=x.cd,r=x.xaxis,y=x.yaxis,h=[],s=l[0].trace;if(!v.hasMarkers(s)&&!v.hasText(s))return[];if(!1===T)for(b=0;b<l.length;b++)l[b].selected=0;else for(b=0;b<l.length;b++)o=r.c2p((e=l[b]).x),i=y.c2p(e.y),null!==e.i&&T.contains([o,i],!1,b,x)?(h.push({pointNumber:e.i,x:r.c2d(e.x),y:y.c2d(e.y)}),e.selected=1):e.selected=0;return h}},{"./subtypes":952}],950:[function(_,oe,se){"use strict";var v=["orientation","groupnorm","stackgaps"];oe.exports=function(x,T,b,e){var o=b._scatterStackOpts,i=e("stackgroup");if(i){var l=T.xaxis+T.yaxis,r=o[l];r||(r=o[l]={});var y=r[i],h=!1;y?y.traces.push(T):(y=r[i]={traceIndices:[],traces:[T]},h=!0);for(var s={orientation:T.x&&!T.y?"h":"v"},d=0;d<v.length;d++){var p=v[d],c=p+"Found";if(!y[c]){var g=void 0!==x[p],m="orientation"===p;if((g||h)&&(y[p]=e(p,s[p]),m&&(y.fillDflt="h"===y[p]?"tonextx":"tonexty"),g&&(y[c]=!0,!h&&(delete y.traces[0][p],m))))for(var u=0;u<y.traces.length-1;u++){var w=y.traces[u];w._input.fill!==w.fill&&(w.fill=y.fillDflt)}}}return y}}},{}],951:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../registry");function b(o,i,l){x.pointStyle(o.selectAll("path.point"),i,l)}function e(o,i,l){x.textPointStyle(o.selectAll("text"),i,l)}oe.exports={style:function(o){var i=v.select(o).selectAll("g.trace.scatter");i.style("opacity",function(l){return l[0].trace.opacity}),i.selectAll("g.points").each(function(l){b(v.select(this),l.trace||l[0].trace,o)}),i.selectAll("g.text").each(function(l){e(v.select(this),l.trace||l[0].trace,o)}),i.selectAll("g.trace path.js-line").call(x.lineGroupStyle),i.selectAll("g.trace path.js-fill").call(x.fillGroupStyle,o),T.getComponentMethod("errorbars","style")(i)},stylePoints:b,styleText:e,styleOnSelect:function(o,i,l){var r=i[0].trace;r.selectedpoints?(x.selectedPointStyle(l.selectAll("path.point"),r),x.selectedTextStyle(l.selectAll("text"),r)):(b(l,r,o),e(l,r,o))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports={hasLines:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("lines")},hasMarkers:function(x){return x.visible&&(x.mode&&-1!==x.mode.indexOf("markers")||"splom"===x.type)},hasText:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("text")},isBubble:function(x){return v.isPlainObject(x.marker)&&v.isArrayOrTypedArray(x.marker.size)}}},{"../../lib":503}],953:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T,b,e,o){o=o||{},e("textposition"),v.coerceFont(e,"textfont",b.font),o.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry");oe.exports=function(T,b,e,o){var i,l=o("x"),r=o("y");if(x.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x","y"],e),l){var y=v.minRowLength(l);r?i=Math.min(y,v.minRowLength(r)):(i=y,o("y0"),o("dy"))}else{if(!r)return 0;i=v.minRowLength(r),o("x0"),o("dx")}return b._length=i,i}},{"../../lib":503,"../../registry":638}],955:[function(_,oe,se){"use strict";var v=_("../scatter/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/template_attributes").texttemplateAttrs,o=_("../../plots/attributes"),i=_("../../constants/gl3d_dashes"),l=_("../../constants/gl3d_markers"),r=_("../../lib/extend").extendFlat,y=_("../../plot_api/edit_types").overrideAll,h=_("../../lib/sort_object_keys"),d=v.marker,p=d.line,c=r({width:v.line.width,dash:{valType:"enumerated",values:h(i),dflt:"solid"}},x("line")),g=oe.exports=y({x:v.x,y:v.y,z:{valType:"data_array"},text:r({},v.text,{}),texttemplate:e({},{}),hovertext:r({},v.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:r({},v.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:v.connectgaps,line:c,marker:r({symbol:{valType:"enumerated",values:h(l),dflt:"circle",arrayOk:!0},size:r({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:r({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:r({width:r({},p.width,{arrayOk:!1})},x("marker.line"))},x("marker")),textposition:r({},v.textposition,{dflt:"top center"}),textfont:{color:v.textfont.color,size:v.textfont.size,family:r({},v.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:r({},o.hoverinfo)},"calc","nested");g.x.editType=g.y.editType=g.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(_,oe,se){"use strict";var v=_("../scatter/arrays_to_calcdata"),x=_("../scatter/colorscale_calc");oe.exports=function(T,b){var e=[{x:!1,y:!1,trace:b,t:{}}];return v(e,b),x(T,b),e}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(_,oe,se){"use strict";var v=_("../../registry");function x(T,b,e,o){if(!b||!b.visible)return null;for(var i=v.getComponentMethod("errorbars","makeComputeError")(b),l=new Array(T.length),r=0;r<T.length;r++){var y=i(+T[r],r);if("log"===o.type){var h=o.c2l(T[r]),s=T[r]-y[0],d=T[r]+y[1];if(l[r]=[(o.c2l(s,!0)-h)*e,(o.c2l(d,!0)-h)*e],s>0){var p=o.c2l(s);o._lowerLogErrorBound||(o._lowerLogErrorBound=p),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,p)}}else l[r]=[-y[0]*e,y[1]*e]}return l}oe.exports=function(T,b,e){var o=[x(T.x,T.error_x,b[0],e.xaxis),x(T.y,T.error_y,b[1],e.yaxis),x(T.z,T.error_z,b[2],e.zaxis)],i=function(d){for(var p=0;p<d.length;p++)if(d[p])return d[p].length;return 0}(o);if(0===i)return null;for(var l=new Array(i),r=0;r<i;r++){for(var y=[[0,0,0],[0,0,0]],h=0;h<3;h++)if(o[h])for(var s=0;s<2;s++)y[s][h]=o[h][r][s];l[r]=y}return l}},{"../../registry":638}],958:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_line3d,x=_("../../../stackgl_modules").gl_scatter3d,T=_("../../../stackgl_modules").gl_error3d,b=_("../../../stackgl_modules").gl_mesh3d,e=_("../../../stackgl_modules").delaunay_triangulate,o=_("../../lib"),i=_("../../lib/str2rgbarray"),l=_("../../lib/gl_format_color").formatColor,r=_("../scatter/make_bubble_size_func"),y=_("../../constants/gl3d_dashes"),h=_("../../constants/gl3d_markers"),s=_("../../plots/cartesian/axes"),d=_("../../components/fx/helpers").appendArrayPointValue,p=_("./calc_errors");function c(P,D){this.scene=P,this.uid=D,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var g=c.prototype;function m(P){return null==P?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function u(P){return null==P?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function w(P,D){return D(4*P)}function f(P){return h[P]}function A(P,D,F,R,L){var I=null;if(o.isArrayOrTypedArray(P)){I=[];for(var B=0;B<D;B++)I[B]=void 0===P[B]?R:F(P[B],L)}else I=F(P,o.identity);return I}function k(P){if(o.isArrayOrTypedArray(P)){var D=P[0];return o.isArrayOrTypedArray(D)&&(P=D),"rgb("+P.slice(0,3).map(function(F){return Math.round(255*F)})+")"}return null}function E(P){return o.isArrayOrTypedArray(P)?4===P.length&&"number"==typeof P[0]?k(P):P.map(k):null}g.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var D=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[D]||0===this.textLabels[D])&&(P.textLabel=this.textLabels[D]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[D],this.data.y[D],this.data.z[D]],!0}},g.update=function(P){var D,F,R,L,I=this.scene.glplot.gl,B=y.solid;this.data=P;var V=function M(P,D){var F,R,L,I,B,V,Z=[],Y=P.fullSceneLayout,Q=P.dataScale,re=Y.xaxis,$=Y.yaxis,J=Y.zaxis,ie=D.marker,j=D.line,q=D.x||[],W=D.y||[],ae=D.z||[],G=q.length,ee=D.xcalendar,te=D.ycalendar,le=D.zcalendar;for(B=0;B<G;B++)F=re.d2l(q[B],0,ee)*Q[0],R=$.d2l(W[B],0,te)*Q[1],L=J.d2l(ae[B],0,le)*Q[2],Z[B]=[F,R,L];if(Array.isArray(D.text))V=D.text;else if(void 0!==D.text)for(V=new Array(G),B=0;B<G;B++)V[B]=D.text;function ue(Re,Ue){var qe=Y[Re];return s.tickText(qe,qe.d2l(Ue),!0).text}var de=D.texttemplate;if(de){var he=P.fullLayout._d3locale,be=Array.isArray(de),me=be?Math.min(de.length,G):G,_e=be?function(Re){return de[Re]}:function(){return de};for(V=new Array(me),B=0;B<me;B++){var Ee={x:q[B],y:W[B],z:ae[B]},De={xLabel:ue("xaxis",q[B]),yLabel:ue("yaxis",W[B]),zLabel:ue("zaxis",ae[B])},Se={};d(Se,D,B);var Fe=D._meta||{};V[B]=o.texttemplateString(_e(B),De,he,Se,Ee,Fe)}}if(I={position:Z,mode:D.mode,text:V},"line"in D&&(I.lineColor=l(j,1,G),I.lineWidth=j.width,I.lineDashes=j.dash),"marker"in D){var ve=r(D);I.scatterColor=l(ie,1,G),I.scatterSize=A(ie.size,G,w,20,ve),I.scatterMarker=A(ie.symbol,G,f,"\u25cf"),I.scatterLineWidth=ie.line.width,I.scatterLineColor=l(ie.line,1,G),I.scatterAngle=0}"textposition"in D&&(I.textOffset=function(Re){var Ue=[0,0];if(Array.isArray(Re))for(var qe=0;qe<Re.length;qe++)Ue[qe]=[0,0],Re[qe]&&(Ue[qe][0]=m(Re[qe]),Ue[qe][1]=u(Re[qe]));else Ue[0]=m(Re),Ue[1]=u(Re);return Ue}(D.textposition),I.textColor=l(D.textfont,1,G),I.textSize=A(D.textfont.size,G,o.identity,12),I.textFont=D.textfont.family,I.textAngle=0);var Te=["x","y","z"];for(I.project=[!1,!1,!1],I.projectScale=[1,1,1],I.projectOpacity=[1,1,1],B=0;B<3;++B){var Ie=D.projection[Te[B]];(I.project[B]=Ie.show)&&(I.projectOpacity[B]=Ie.opacity,I.projectScale[B]=Ie.scale)}I.errorBounds=p(D,Q,Y);var Ce=function(Re){for(var Ue=[0,0,0],qe=[[0,0,0],[0,0,0],[0,0,0]],Xe=[1,1,1],st=0;st<3;st++){var He=Re[st];He&&!1!==He.copy_zstyle&&!1!==Re[2].visible&&(He=Re[2]),He&&He.visible&&(Ue[st]=He.width/2,qe[st]=i(He.color),Xe[st]=He.thickness)}return{capSize:Ue,color:qe,lineWidth:Xe}}([D.error_x,D.error_y,D.error_z]);return I.errorColor=Ce.color,I.errorLineWidth=Ce.lineWidth,I.errorCapSize=Ce.capSize,I.delaunayAxis=D.surfaceaxis,I.delaunayColor=i(D.surfacecolor),I}(this.scene,P);"mode"in V&&(this.mode=V.mode),"lineDashes"in V&&V.lineDashes in y&&(B=y[V.lineDashes]),this.color=E(V.scatterColor)||E(V.lineColor),this.dataPoints=V.position,D={gl:this.scene.glplot.gl,position:V.position,color:V.lineColor,lineWidth:V.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:P.opacity,connectGaps:P.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(D):(this.linePlot=v(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Z=P.opacity;if(P.marker&&P.marker.opacity&&(Z*=P.marker.opacity),F={gl:this.scene.glplot.gl,position:V.position,color:V.scatterColor,size:V.scatterSize,glyph:V.scatterMarker,opacity:Z,orthographic:!0,lineWidth:V.scatterLineWidth,lineColor:V.scatterLineColor,project:V.project,projectScale:V.projectScale,projectOpacity:V.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(F):(this.scatterPlot=x(F),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:V.position,glyph:V.text,color:V.textColor,size:V.textSize,angle:V.textAngle,alignment:V.textOffset,font:V.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=x(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:V.position,color:V.errorColor,error:V.errorBounds,lineWidth:V.errorLineWidth,capSize:V.errorCapSize,opacity:P.opacity},this.errorBars?V.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):V.errorBounds&&(this.errorBars=T(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),V.delaunayAxis>=0){var Y=function(Q,re,$){var J,ie=($+1)%3,j=($+2)%3,q=[],W=[];for(J=0;J<Q.length;++J){var ae=Q[J];!isNaN(ae[ie])&&isFinite(ae[ie])&&!isNaN(ae[j])&&isFinite(ae[j])&&(q.push([ae[ie],ae[j]]),W.push(J))}var G=e(q);for(J=0;J<G.length;++J)for(var ee=G[J],te=0;te<ee.length;++te)ee[te]=W[ee[te]];return{positions:Q,cells:G,meshColor:re}}(V.position,V.delaunayColor,V.delaunayAxis);Y.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(Y):(Y.gl=I,this.delaunayMesh=b(Y),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},g.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},oe.exports=function(P,D){var F=new c(P,D.uid);return F.update(D),F}},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/text_defaults"),i=_("./attributes");oe.exports=function(l,r,y,h){function s(w,f){return x.coerce(l,r,i,w,f)}if(w=l,f=r,M=h,k=0,E=(A=s)("x"),P=A("y"),D=A("z"),v.getComponentMethod("calendars","handleTraceDefaults")(w,f,["x","y","z"],M),E&&P&&D&&(k=Math.min(E.length,P.length,D.length),f._length=f._xlength=f._ylength=f._zlength=k),k){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),T.hasLines(r)&&(s("connectgaps"),e(l,r,y,h,s)),T.hasMarkers(r)&&b(l,r,y,h,s,{noSelect:!0}),T.hasText(r)&&(s("texttemplate"),o(l,r,h,s,{noSelect:!0}));var d=(r.line||{}).color,p=(r.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",d||p);for(var c=["x","y","z"],g=0;g<3;++g){var m="projection."+c[g];s(m+".show")&&(s(m+".opacity"),s(m+".scale"))}var u=v.getComponentMethod("errorbars","supplyDefaults");u(l,r,d||p||y,{axis:"z"}),u(l,r,d||p||y,{axis:"y",inherit:"z"}),u(l,r,d||p||y,{axis:"x",inherit:"z"})}else r.visible=!1;var w,f,A,M,k,E,P,D}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(_,oe,se){"use strict";oe.exports={plot:_("./convert"),attributes:_("./attributes"),markerSymbols:_("../../constants/gl3d_markers"),supplyDefaults:_("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:_("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(_,oe,se){"use strict";var v=_("../scatter/attributes"),x=_("../../plots/attributes"),T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../components/colorscale/attributes"),o=_("../../lib/extend").extendFlat,i=v.marker,l=v.line,r=i.line;oe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},v.mode,{dflt:"markers"}),text:o({},v.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},v.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:v.connectgaps,fill:o({},v.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:v.fillcolor,marker:o({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:o({width:r.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:v.textfont,textposition:v.textposition,selected:v.selected,unselected:v.unselected,hoverinfo:o({},x.hoverinfo,{flags:["a","b","text","name"]}),hoveron:v.hoveron,hovertemplate:T()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../scatter/colorscale_calc"),T=_("../scatter/arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../scatter/calc").calcMarkerSize,o=_("../carpet/lookup_carpetid");oe.exports=function(i,l){var r=l._carpetTrace=o(i,l);if(r&&r.visible&&"legendonly"!==r.visible){var y;l.xaxis=r.xaxis,l.yaxis=r.yaxis;var h,s,d=l._length,p=new Array(d),c=!1;for(y=0;y<d;y++)if(s=l.b[y],v(h=l.a[y])&&v(s)){var g=r.ab2xy(+h,+s,!0),m=r.isVisible(+h,+s);m||(c=!0),p[y]={x:g[0],y:g[1],a:h,b:s,vis:m}}else p[y]={x:!1,y:!1};return l._needsCull=c,p[0].carpet=r,p[0].trace=l,e(l,d),x(i,l),T(p,l),b(p,l),p}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/constants"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/line_shape_defaults"),i=_("../scatter/text_defaults"),l=_("../scatter/fillcolor_defaults"),r=_("./attributes");oe.exports=function(y,h,s,d){function p(w,f){return v.coerce(y,h,r,w,f)}p("carpet"),h.xaxis="x",h.yaxis="y";var c=p("a"),g=p("b"),m=Math.min(c.length,g.length);if(m){h._length=m,p("text"),p("texttemplate"),p("hovertext"),p("mode",m<x.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(h)&&(e(y,h,s,d,p),o(y,h,p),p("connectgaps")),T.hasMarkers(h)&&b(y,h,s,d,p,{gradient:!0}),T.hasText(h)&&i(y,h,d,p);var u=[];(T.hasMarkers(h)||T.hasText(h))&&(p("marker.maxdisplayed"),u.push("points")),p("fill"),"none"!==h.fill&&(l(y,h,s,p),T.hasLines(h)||o(y,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||u.push("fills"),"fills"!==p("hoveron",u.join("+")||"points")&&p("hovertemplate"),v.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){var o=b[e];return v.a=o.a,v.b=o.b,v.y=o.y,v}},{}],965:[function(_,oe,se){"use strict";oe.exports=function(v,x){var T={},b=x._carpet,e=b.ab2ij([v.a,v.b]),o=Math.floor(e[0]),i=e[0]-o,l=Math.floor(e[1]),y=b.evalxy([],o,l,i,e[1]-l);return T.yLabel=y[1].toFixed(3),T}},{}],966:[function(_,oe,se){"use strict";var v=_("../scatter/hover"),x=_("../../lib").fillText;oe.exports=function(T,b,e,o){var i=v(T,b,e,o);if(i&&!1!==i[0].index){var l=i[0];if(void 0===l.index){var y=T.xa._length,h=y*(1-l.y0/T.ya._length)/2,s=y-h;return l.x0=Math.max(Math.min(l.x0,s),h),l.x1=Math.max(Math.min(l.x1,s),h),i}var d=l.cd[l.index];l.a=d.a,l.b=d.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var p=l.trace,c=p._carpet,g=p._module.formatLabels(d,p);l.yLabel=g.yLabel,delete l.text;var m=[];if(!p.hovertemplate){var u=(d.hi||p.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["a","b","text"]),-1!==u.indexOf("a")&&w(c.aaxis,d.a),-1!==u.indexOf("b")&&w(c.baxis,d.b),m.push("y: "+l.yLabel),-1!==u.indexOf("text")&&x(d,p,m),l.extraText=m.join("<br>")}return i}function w(f,A){var M;M=f.labelprefix&&f.labelprefix.length>0?f.labelprefix.replace(/ = $/,""):f._hovertitle,m.push(M+": "+A.toFixed(3)+f.labelsuffix)}}},{"../../lib":503,"../scatter/hover":938}],967:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../scatter/select"),eventData:_("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:_("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(_,oe,se){"use strict";var v=_("../scatter/plot"),x=_("../../plots/cartesian/axes"),T=_("../../components/drawing");oe.exports=function(b,e,o,i){var l,y,h=o[0][0].carpet,s={xaxis:x.getFromId(b,h.xaxis||"x"),yaxis:x.getFromId(b,h.yaxis||"y"),plot:e.plot};for(v(b,s,o,i),l=0;l<o.length;l++)y=i.selectAll("g.trace"+o[l][0].trace.uid+" .js-line"),T.setClipUrl(y,o[l][0].carpet._clipPathId,b)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scatter/attributes"),b=_("../../plots/attributes"),e=_("../../components/colorscale/attributes"),o=_("../../components/drawing/attributes").dash,i=_("../../lib/extend").extendFlat,l=_("../../plot_api/edit_types").overrideAll,r=T.marker,y=T.line,h=r.line;oe.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},T.mode,{dflt:"markers"}),text:i({},T.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:y.color,width:y.width,dash:o},connectgaps:T.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:h.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:T.fillcolor,selected:T.selected,unselected:T.unselected,hoverinfo:i({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:v()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/colorscale_calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection"),o=_("../../lib")._;function i(l){return l&&"string"==typeof l}oe.exports=function(l,r){var y,h=Array.isArray(r.locations),s=h?r.locations.length:r._length,d=new Array(s);y=r.geojson?function(w){return i(w)||v(w)}:i;for(var p=0;p<s;p++){var c=d[p]={};if(h){var g=r.locations[p];c.loc=y(g)?g:null}else{var m=r.lon[p],u=r.lat[p];c.lonlat=v(m)&&v(u)?[+m,+u]:[x,x]}}return b(d,r),T(l,r),e(d,r),s&&(d[0].t={labels:{lat:o(l,"lat:")+" ",lon:o(l,"lon:")+" "}}),d}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/text_defaults"),o=_("../scatter/fillcolor_defaults"),i=_("./attributes");oe.exports=function(l,r,y,h){function s(w,f){return v.coerce(l,r,i,w,f)}var d,p=s("locations");if(p&&p.length){var c,g=s("geojson");("string"==typeof g&&""!==g||v.isPlainObject(g))&&(c="geojson-id"),"geojson-id"===s("locationmode",c)&&s("featureidkey"),d=p.length}else{var m=s("lon")||[],u=s("lat")||[];d=Math.min(m.length,u.length)}d?(r._length=d,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),x.hasLines(r)&&(b(l,r,y,h,s),s("connectgaps")),x.hasMarkers(r)&&T(l,r,y,h,s,{gradient:!0}),x.hasText(r)&&(s("texttemplate"),e(l,r,h,s)),s("fill"),"none"!==r.fill&&o(l,r,y,s),v.coerceSelectionMarkerOpacity(r,s)):r.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){v.lon=x.lon,v.lat=x.lat,v.location=x.loc?x.loc:null;var o=b[e];return o.fIn&&o.fIn.properties&&(v.properties=o.fIn.properties),v}},{}],973:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.geo]._subplot.mockAxis,i=x.lonlat;return e.lonLabel=v.tickText(o,o.c2l(i[0]),!0).text,e.latLabel=v.tickText(o,o.c2l(i[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],974:[function(_,oe,se){"use strict";var v=_("../../components/fx"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/get_trace_color"),b=_("../../lib").fillText,e=_("./attributes");oe.exports=function(o,i,l){var r=o.cd,y=r[0].trace,h=o.xa,s=o.ya,d=o.subplot,p=d.projection.isLonLatOverEdges,c=d.project;if(v.getClosest(r,function(M){var k=M.lonlat;if(k[0]===x||p(k))return 1/0;var E=c(k),P=c([i,l]),D=Math.abs(E[0]-P[0]),F=Math.abs(E[1]-P[1]),R=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(D*D+F*F)-R,1-3/R)},o),!1!==o.index){var g=r[o.index],m=g.lonlat,u=[h.c2p(m),s.c2p(m)],w=g.mrc||1;o.x0=u[0]-w,o.x1=u[0]+w,o.y0=u[1]-w,o.y1=u[1]+w,o.loc=g.loc,o.lon=m[0],o.lat=m[1];var f={};f[y.geo]={_subplot:d};var A=y._module.formatLabels(g,y,f);return o.lonLabel=A.lonLabel,o.latLabel=A.latLabel,o.color=T(y,g),o.extraText=function(M,k,E,P){if(!M.hovertemplate){var D=k.hi||M.hoverinfo,F="all"===D?e.hoverinfo.flags:D.split("+"),R=-1!==F.indexOf("location")&&Array.isArray(M.locations),L=-1!==F.indexOf("lon"),I=-1!==F.indexOf("lat"),B=-1!==F.indexOf("text"),V=[];return R?V.push(k.loc):L&&I?V.push("("+Z(E.latLabel)+", "+Z(E.lonLabel)+")"):L?V.push(P.lon+Z(E.lonLabel)):I&&V.push(P.lat+Z(E.latLabel)),B&&b(k,M,V),V.join("<br>")}function Z(Y){return Y+"\xb0"}}(y,g,o,r[0].t.labels),o.hovertemplate=y.hovertemplate,[o]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),calcGeoJSON:_("./plot").calcGeoJSON,plot:_("./plot").plot,style:_("./style"),styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:_("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../lib/topojson_utils").getTopojsonFeatures,b=_("../../lib/geojson_utils"),e=_("../../lib/geo_location_utils"),o=_("../../plots/cartesian/autorange").findExtremes,i=_("../../constants/numerical").BADNUM,l=_("../scatter/calc").calcMarkerSize,r=_("../scatter/subtypes"),y=_("./style");oe.exports={calcGeoJSON:function(h,s){var d,p,c=h[0].trace,g=s[c.geo],m=g._subplot,u=c._length;if(Array.isArray(c.locations)){var w=c.locationmode,f="geojson-id"===w?e.extractTraceFeature(h):T(c,m.topojson);for(d=0;d<u;d++){p=h[d];var A="geojson-id"===w?p.fOut:e.locationToFeature(w,p.loc,f);p.lonlat=A?A.properties.ct:[i,i]}}var M,k,E={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===c.locationmode){var P=e.computeBbox(e.getTraceGeojson(c));M=[P[0],P[2]],k=[P[1],P[3]]}else{for(M=new Array(u),k=new Array(u),d=0;d<u;d++)M[d]=(p=h[d]).lonlat[0],k[d]=p.lonlat[1];E.ppad=l(c,u)}c._extremes.lon=o(g.lonaxis._ax,M,E),c._extremes.lat=o(g.lataxis._ax,k,E)},plot:function(h,s,d){var p=s.layers.frontplot.select(".scatterlayer"),c=x.makeTraceGroups(p,d,"trace scattergeo");function g(m,u){m.lonlat[0]===i&&v.select(u).remove()}c.selectAll("*").remove(),c.each(function(m){var u=v.select(this),w=m[0].trace;if(r.hasLines(w)||"none"!==w.fill){var f=b.calcTraceToLineCoords(m),A="none"!==w.fill?b.makePolygon(f):b.makeLine(f);u.selectAll("path.js-line").data([{geojson:A,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(w)&&u.selectAll("path.point").data(x.identity).enter().append("path").classed("point",!0).each(function(M){g(M,this)}),r.hasText(w)&&u.selectAll("g").data(x.identity).enter().append("g").append("text").each(function(M){g(M,this)}),y(h,m)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(_,oe,se){"use strict";var v=_("../scatter/subtypes"),x=_("../../constants/numerical").BADNUM;oe.exports=function(T,b){var e,o,i,l,r,y=T.cd,h=T.xaxis,s=T.yaxis,d=[],p=y[0].trace;if(!v.hasMarkers(p)&&!v.hasText(p))return[];if(!1===b)for(r=0;r<y.length;r++)y[r].selected=0;else for(r=0;r<y.length;r++)(o=(e=y[r]).lonlat)[0]!==x&&(i=h.c2p(o),l=s.c2p(o),b.contains([i,l],null,r,T)?(d.push({pointNumber:r,lon:o[0],lat:o[1]}),e.selected=1):e.selected=0);return d}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../scatter/style"),e=b.stylePoints,o=b.styleText;oe.exports=function(i,l){var r,y,h,s;l&&(r=i,h=(y=l)[0].trace,(s=y[0].node3).style("opacity",y[0].trace.opacity),e(s,h,r),o(s,h,r),s.selectAll("path.js-line").style("fill","none").each(function(d){var p=v.select(this),c=d.trace,g=c.line||{};p.call(T.stroke,g.color).call(x.dashLine,g.dash||"",g.width||0),"none"!==c.fill&&p.call(T.fill,c.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(_,oe,se){"use strict";var v=_("../../plots/attributes"),x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../components/colorscale/attributes"),e=_("../../lib/sort_object_keys"),o=_("../../lib/extend").extendFlat,i=_("../../plot_api/edit_types").overrideAll,l=_("./constants").DASHES,r=x.line,y=x.marker,h=y.line,s=oe.exports=i({x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:x.text,hovertext:x.hovertext,textposition:x.textposition,textfont:x.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(l),dflt:"solid"}},marker:o({},b("marker"),{symbol:y.symbol,size:y.size,sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,opacity:y.opacity,colorbar:y.colorbar,line:o({},b("marker.line"),{width:h.width})}),connectgaps:x.connectgaps,fill:o({},x.fill,{dflt:"none"}),fillcolor:x.fillcolor,selected:{marker:x.selected.marker,textfont:x.selected.textfont},unselected:{marker:x.unselected.marker,textfont:x.unselected.textfont},opacity:v.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=x.hovertemplate,s.texttemplate=x.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(_,oe,se){"use strict";var v=_("./hover");oe.exports={moduleType:"trace",name:"scattergl",basePlotModule:_("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../scatter/cross_trace_defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),hoverPoints:v.hoverPoints,selectPoints:_("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(_,oe,se){"use strict";var v=_("@plotly/point-cluster"),x=_("../../lib"),T=_("../../plots/cartesian/axis_ids"),b=_("../../plots/cartesian/autorange").findExtremes,e=_("../../plots/cartesian/align_period"),o=_("../scatter/calc"),i=o.calcMarkerSize,l=o.calcAxisExpansion,r=o.setFirstScatter,y=_("../scatter/colorscale_calc"),h=_("./convert"),s=_("./scene_update"),d=_("../../constants/numerical").BADNUM,p=_("./constants").TOO_MANY_POINTS;function c(g,m,u){var w=g._extremes[m._id],f=b(m,u._bnds,{padded:!0});w.min=w.min.concat(f.min),w.max=w.max.concat(f.max)}oe.exports=function(g,m){var u,w=g._fullLayout,f=T.getFromId(g,m.xaxis),A=T.getFromId(g,m.yaxis),M=w._plots[m.xaxis+m.yaxis],k=m._length,E=k>=p,P=2*k,D={},F=f.makeCalcdata(m,"x"),R=A.makeCalcdata(m,"y"),L=e(m,f,"x",F),I=e(m,A,"y",R),B=L.vals,V=I.vals;m._x=B,m._y=V,m.xperiodalignment&&(m._origX=F,m._xStarts=L.starts,m._xEnds=L.ends),m.yperiodalignment&&(m._origY=R,m._yStarts=I.starts,m._yEnds=I.ends);var Z=new Array(P),Y=new Array(k);for(u=0;u<k;u++)Z[2*u]=B[u]===d?NaN:B[u],Z[2*u+1]=V[u]===d?NaN:V[u],Y[u]=u;if("log"===f.type)for(u=0;u<P;u+=2)Z[u]=f.c2l(Z[u]);if("log"===A.type)for(u=1;u<P;u+=2)Z[u]=A.c2l(Z[u]);E&&"log"!==f.type&&"log"!==A.type?D.tree=v(Z):D.ids=Y,y(g,m);var Q,re=function(J,ie,j,q,W,ae){var G=h.style(J,j);if(G.marker&&(G.marker.positions=q),G.line&&q.length>1&&x.extendFlat(G.line,h.linePositions(J,j,q)),G.errorX||G.errorY){var ee=h.errorBarPositions(J,j,q,W,ae);G.errorX&&x.extendFlat(G.errorX,ee.x),G.errorY&&x.extendFlat(G.errorY,ee.y)}return G.text&&(x.extendFlat(G.text,{positions:q},h.textPosition(J,j,G.text,G.marker)),x.extendFlat(G.textSel,{positions:q},h.textPosition(J,j,G.text,G.markerSel)),x.extendFlat(G.textUnsel,{positions:q},h.textPosition(J,j,G.text,G.markerUnsel))),G}(g,0,m,Z,B,V),$=s(g,M);return r(w,m),E?re.marker&&(Q=re.marker.sizeAvg||Math.max(re.marker.size,3)):Q=i(m,k),l(g,m,f,A,B,V,Q),re.errorX&&c(m,f,re.errorX),re.errorY&&c(m,A,re.errorY),re.fill&&!$.fill2d&&($.fill2d=!0),re.marker&&!$.scatter2d&&($.scatter2d=!0),re.line&&!$.line2d&&($.line2d=!0),!re.errorX&&!re.errorY||$.error2d||($.error2d=!0),re.text&&!$.glText&&($.glText=!0),re.marker&&(re.marker.snap=k),$.lineOptions.push(re.line),$.errorXOptions.push(re.errorX),$.errorYOptions.push(re.errorY),$.fillOptions.push(re.fill),$.markerOptions.push(re.marker),$.markerSelectedOptions.push(re.markerSel),$.markerUnselectedOptions.push(re.markerUnsel),$.textOptions.push(re.text),$.textSelectedOptions.push(re.textSel),$.textUnselectedOptions.push(re.textUnsel),$.selectBatch.push([]),$.unselectBatch.push([]),D._scene=$,D.index=$.count,D.x=B,D.y=V,D.positions=Z,$.count++,[{x:!1,y:!1,t:D,trace:m}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(_,oe,se){"use strict";oe.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("svg-path-sdf"),T=_("color-normalize"),b=_("../../registry"),e=_("../../lib"),o=_("../../components/drawing"),i=_("../../plots/cartesian/axis_ids"),l=_("../../lib/gl_format_color").formatColor,r=_("../scatter/subtypes"),y=_("../scatter/make_bubble_size_func"),h=_("./helpers"),s=_("./constants"),d=_("../../constants/interactions").DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=_("../../components/fx/helpers").appendArrayPointValue;function g(F,R){var L,I=F._fullLayout,B=R._length,V=R.textfont,Z=R.textposition,Y=Array.isArray(Z)?Z:[Z],Q=V.color,re=V.size,$=V.family,J={},ie=F._context.plotGlPixelRatio,j=R.texttemplate;if(j){J.text=[];var q=I._d3locale,W=Array.isArray(j),ae=W?Math.min(j.length,B):B,G=W?function(be){return j[be]}:function(){return j};for(L=0;L<ae;L++){var ee={i:L},te=R._module.formatLabels(ee,R,I),le={};c(le,R,L);var ue=R._meta||{};J.text.push(e.texttemplateString(G(L),te,q,le,ee,ue))}}else J.text=Array.isArray(R.text)&&R.text.length<B?R.text.slice():R.text;if(Array.isArray(J.text))for(L=J.text.length;L<B;L++)J.text[L]="";for(J.opacity=R.opacity,J.font={},J.align=[],J.baseline=[],L=0;L<Y.length;L++){var de=Y[L].split(/\s+/);switch(de[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(de[1])}switch(de[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(de[0])}}if(Array.isArray(Q))for(J.color=new Array(B),L=0;L<B;L++)J.color[L]=Q[L];else J.color=Q;if(e.isArrayOrTypedArray(re)||Array.isArray($))for(J.font=new Array(B),L=0;L<B;L++){var he=J.font[L]={};he.size=(e.isTypedArray(re)?re[L]:Array.isArray(re)?v(re[L])?re[L]:0:re)*ie,he.family=Array.isArray($)?$[L]:$}else J.font={size:re*ie,family:$};return J}function m(F){var R,L,I=F._length,B=F.marker,V={},Z=e.isArrayOrTypedArray(B.symbol),Y=e.isArrayOrTypedArray(B.color),Q=e.isArrayOrTypedArray(B.line.color),re=e.isArrayOrTypedArray(B.opacity),$=e.isArrayOrTypedArray(B.size),J=e.isArrayOrTypedArray(B.line.width);if(Z||(L=h.isOpenSymbol(B.symbol)),Z||Y||Q||re){V.colors=new Array(I),V.borderColors=new Array(I);var ie=l(B,B.opacity,I),j=l(B.line,B.opacity,I);if(!Array.isArray(j[0])){var q=j;for(j=Array(I),R=0;R<I;R++)j[R]=q}if(!Array.isArray(ie[0])){var W=ie;for(ie=Array(I),R=0;R<I;R++)ie[R]=W}for(V.colors=ie,V.borderColors=j,R=0;R<I;R++)Z&&(L=h.isOpenSymbol(B.symbol[R])),L&&(j[R]=ie[R].slice(),ie[R]=ie[R].slice(),ie[R][3]=0);V.opacity=F.opacity}else L?(V.color=T(B.color,"uint8"),V.color[3]=0,V.borderColor=T(B.color,"uint8")):(V.color=T(B.color,"uint8"),V.borderColor=T(B.line.color,"uint8")),V.opacity=F.opacity*B.opacity;if(Z)for(V.markers=new Array(I),R=0;R<I;R++)V.markers[R]=D(B.symbol[R]);else V.marker=D(B.symbol);var G,ee=y(F,1);if($||J){var te,le=V.sizes=new Array(I),ue=V.borderSizes=new Array(I),de=0;if($){for(R=0;R<I;R++)le[R]=ee(B.size[R]),de+=le[R];te=de/I}else for(G=ee(B.size),R=0;R<I;R++)le[R]=G;if(J)for(R=0;R<I;R++)ue[R]=B.line.width[R];else for(G=B.line.width,R=0;R<I;R++)ue[R]=G;V.sizeAvg=te}else V.size=ee(B&&B.size||10),V.borderSizes=ee(B.line.width);return V}function u(F,R){var I={};return R&&(R.marker&&R.marker.symbol?I=m(e.extendFlat({},F.marker,R.marker)):R.marker&&(R.marker.size&&(I.size=R.marker.size),R.marker.color&&(I.colors=R.marker.color),void 0!==R.marker.opacity&&(I.opacity=R.marker.opacity))),I}function w(F,R,L){var I={};if(!L)return I;if(L.textfont){var B={opacity:1,text:R.text,texttemplate:R.texttemplate,textposition:R.textposition,textfont:e.extendFlat({},R.textfont)};L.textfont&&e.extendFlat(B.textfont,L.textfont),I=g(F,B)}return I}function f(F,R,L){var I={capSize:2*R.width*L,lineWidth:R.thickness*L,color:R.color};return R.copy_ystyle&&(I=F.error_y),I}var A=s.SYMBOL_SDF_SIZE,M=s.SYMBOL_SIZE,k=s.SYMBOL_STROKE,E={},P=o.symbolFuncs[0](.05*M);function D(F){if("circle"===F)return null;var R,L,I=o.symbolNumber(F),B=o.symbolFuncs[I%100],V=!!o.symbolNoDot[I%100],Z=!!o.symbolNoFill[I%100],Y=h.isDotSymbol(F);return E[F]?E[F]:(R=Y&&!V?B(1.1*M)+P:B(M),L=x(R,{w:A,h:A,viewBox:[-M,-M,M,M],stroke:Z?k:-k}),E[F]=L,L||null)}oe.exports={style:function(F,R){var L,I={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=F._context.plotGlPixelRatio;if(!0!==R.visible)return I;if(r.hasText(R)&&(I.text=g(F,R),I.textSel=w(F,R,R.selected),I.textUnsel=w(F,R,R.unselected)),r.hasMarkers(R)&&(I.marker=m(R),I.markerSel=u(R,R.selected),I.markerUnsel=u(R,R.unselected),!R.unselected&&e.isArrayOrTypedArray(R.marker.opacity))){var V=R.marker.opacity;for(I.markerUnsel.opacity=new Array(V.length),L=0;L<V.length;L++)I.markerUnsel.opacity[L]=d*V[L]}if(r.hasLines(R)){I.line={overlay:!0,thickness:R.line.width*B,color:R.line.color,opacity:R.opacity};var Z=(s.DASHES[R.line.dash]||[1]).slice();for(L=0;L<Z.length;++L)Z[L]*=R.line.width*B;I.line.dashes=Z}return R.error_x&&R.error_x.visible&&(I.errorX=f(R,R.error_x,B)),R.error_y&&R.error_y.visible&&(I.errorY=f(R,R.error_y,B)),R.fill&&"none"!==R.fill&&(I.fill={closed:!0,fill:R.fillcolor,thickness:0}),I},markerStyle:m,markerSelection:u,linePositions:function(F,R,L){var I,B,V=L.length,Z=V/2;if(r.hasLines(R)&&Z)if("hv"===R.line.shape){for(I=[],B=0;B<Z-1;B++)isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN,NaN,NaN):(I.push(L[2*B],L[2*B+1]),isNaN(L[2*B+2])||isNaN(L[2*B+3])?I.push(NaN,NaN):I.push(L[2*B+2],L[2*B+1]));I.push(L[V-2],L[V-1])}else if("hvh"===R.line.shape){for(I=[],B=0;B<Z-1;B++)if(isNaN(L[2*B])||isNaN(L[2*B+1])||isNaN(L[2*B+2])||isNaN(L[2*B+3]))isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN):I.push(L[2*B],L[2*B+1]),I.push(NaN,NaN);else{var Y=(L[2*B]+L[2*B+2])/2;I.push(L[2*B],L[2*B+1],Y,L[2*B+1],Y,L[2*B+3])}I.push(L[V-2],L[V-1])}else if("vhv"===R.line.shape){for(I=[],B=0;B<Z-1;B++)if(isNaN(L[2*B])||isNaN(L[2*B+1])||isNaN(L[2*B+2])||isNaN(L[2*B+3]))isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN):I.push(L[2*B],L[2*B+1]),I.push(NaN,NaN);else{var Q=(L[2*B+1]+L[2*B+3])/2;I.push(L[2*B],L[2*B+1],L[2*B],Q,L[2*B+2],Q)}I.push(L[V-2],L[V-1])}else if("vh"===R.line.shape){for(I=[],B=0;B<Z-1;B++)isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN,NaN,NaN):(I.push(L[2*B],L[2*B+1]),isNaN(L[2*B+2])||isNaN(L[2*B+3])?I.push(NaN,NaN):I.push(L[2*B],L[2*B+3]));I.push(L[V-2],L[V-1])}else I=L;var re=!1;for(B=0;B<I.length;B++)if(isNaN(I[B])){re=!0;break}var $=re||I.length>s.TOO_MANY_POINTS||r.hasMarkers(R)?"rect":"round";if(re&&R.connectgaps){var J=I[0],ie=I[1];for(B=0;B<I.length;B+=2)isNaN(I[B])||isNaN(I[B+1])?(I[B]=J,I[B+1]=ie):(J=I[B],ie=I[B+1])}return{join:$,positions:I}},errorBarPositions:function(F,R,L,I,B){var V=b.getComponentMethod("errorbars","makeComputeError"),Z=i.getFromId(F,R.xaxis),Y=i.getFromId(F,R.yaxis),Q=L.length/2,re={};function $(J,ie){var j=ie._id.charAt(0),q=R["error_"+j];if(q&&q.visible&&("linear"===ie.type||"log"===ie.type)){for(var W=V(q),ae={x:0,y:1}[j],G={x:[0,1,2,3],y:[2,3,0,1]}[j],ee=new Float64Array(4*Q),te=1/0,le=-1/0,ue=0,de=0;ue<Q;ue++,de+=4){var he=J[ue];if(v(he)){var be=L[2*ue+ae],me=W(he,ue),_e=me[0],Ee=me[1];if(v(_e)&&v(Ee)){var Se=he+Ee;ee[de+G[0]]=be-ie.c2l(he-_e),ee[de+G[1]]=ie.c2l(Se)-be,ee[de+G[2]]=0,ee[de+G[3]]=0,te=Math.min(te,he-_e),le=Math.max(le,he+Ee)}}}re[j]={positions:L,errors:ee,_bnds:[te,le]}}}return $(I,Z),$(B,Y),re},textPosition:function(F,R,L,I){var B,V=R._length,Z={};if(r.hasMarkers(R)){var Y=L.font,Q=L.align,re=L.baseline;for(Z.offset=new Array(V),B=0;B<V;B++){var $=I.sizes?I.sizes[B]:I.size,J=Array.isArray(Y)?Y[B].size:Y.size,ie=Array.isArray(Q)?Q.length>1?Q[B]:Q[0]:Q,j=Array.isArray(re)?re.length>1?re[B]:re[0]:re,W=p[j],ae=$?$/.8+1:0;Z.offset[B]=[p[ie]*ae/J,(-W*ae-.5*W)/J]}}return Z}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../registry"),T=_("./helpers"),b=_("./attributes"),e=_("../scatter/constants"),o=_("../scatter/subtypes"),i=_("../scatter/xy_defaults"),l=_("../scatter/period_defaults"),r=_("../scatter/marker_defaults"),y=_("../scatter/line_defaults"),h=_("../scatter/fillcolor_defaults"),s=_("../scatter/text_defaults");oe.exports=function(d,p,c,g){function m(P,D){return v.coerce(d,p,b,P,D)}var u=!!d.marker&&T.isOpenSymbol(d.marker.symbol),w=o.isBubble(d),f=i(d,p,g,m);if(f){l(d,p,g,m),m("xhoverformat"),m("yhoverformat");var A=f<e.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",A),o.hasLines(p)&&(m("connectgaps"),y(d,p,c,g,m),m("line.shape")),o.hasMarkers(p)&&(r(d,p,c,g,m),m("marker.line.width",u||w?1:0)),o.hasText(p)&&(m("texttemplate"),s(d,p,g,m));var M=(p.line||{}).color,k=(p.marker||{}).color;m("fill"),"none"!==p.fill&&h(d,p,c,m);var E=x.getComponentMethod("errorbars","supplyDefaults");E(d,p,M||k||c,{axis:"y"}),E(d,p,M||k||c,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(p,m)}else p.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../../constants/interactions").DESELECTDIM;oe.exports={styleTextSelection:function(b){var e,o,i=b[0],l=i.trace,r=i.t,y=r._scene,h=r.index,s=y.selectBatch[h],d=y.unselectBatch[h],p=y.textOptions[h],c=y.textSelectedOptions[h]||{},g=y.textUnselectedOptions[h]||{},m=v.extendFlat({},p);if(s.length||d.length){var u=c.color,w=g.color,f=p.color,A=Array.isArray(f);for(m.color=new Array(l._length),e=0;e<s.length;e++)m.color[o=s[e]]=u||(A?f[o]:f);for(e=0;e<d.length;e++){o=d[e];var M=A?f[o]:f;m.color[o]=w||(u?M:x.addOpacity(M,T))}}y.glText[h].update(m)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(_,oe,se){"use strict";var v=_("../scatter/format_labels");oe.exports=function(x,T,b){var e=x.i;return"x"in x||(x.x=T._x[e]),"y"in x||(x.y=T._y[e]),v(x,T,b)}},{"../scatter/format_labels":936}],987:[function(_,oe,se){"use strict";var v=_("./constants");se.isOpenSymbol=function(x){return"string"==typeof x?v.OPEN_RE.test(x):x%200>100},se.isDotSymbol=function(x){return"string"==typeof x?v.DOT_RE.test(x):x>200}},{"./constants":982}],988:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../scatter/get_trace_color");function b(e,o,i,l){var r=e.xa,y=e.ya,h=e.distance,s=e.dxy,d=e.index,p={pointNumber:d,x:o[d],y:i[d]};p.tx=Array.isArray(l.text)?l.text[d]:l.text,p.htx=Array.isArray(l.hovertext)?l.hovertext[d]:l.hovertext,p.data=Array.isArray(l.customdata)?l.customdata[d]:l.customdata,p.tp=Array.isArray(l.textposition)?l.textposition[d]:l.textposition;var c=l.textfont;c&&(p.ts=x.isArrayOrTypedArray(c.size)?c.size[d]:c.size,p.tc=Array.isArray(c.color)?c.color[d]:c.color,p.tf=Array.isArray(c.family)?c.family[d]:c.family);var g=l.marker;g&&(p.ms=x.isArrayOrTypedArray(g.size)?g.size[d]:g.size,p.mo=x.isArrayOrTypedArray(g.opacity)?g.opacity[d]:g.opacity,p.mx=x.isArrayOrTypedArray(g.symbol)?g.symbol[d]:g.symbol,p.mc=x.isArrayOrTypedArray(g.color)?g.color[d]:g.color);var m=g&&g.line;m&&(p.mlc=Array.isArray(m.color)?m.color[d]:m.color,p.mlw=x.isArrayOrTypedArray(m.width)?m.width[d]:m.width);var u=g&&g.gradient;u&&"none"!==u.type&&(p.mgt=Array.isArray(u.type)?u.type[d]:u.type,p.mgc=Array.isArray(u.color)?u.color[d]:u.color);var w=r.c2p(p.x,!0),f=y.c2p(p.y,!0),A=p.mrc||1,M=l.hoverlabel;M&&(p.hbg=Array.isArray(M.bgcolor)?M.bgcolor[d]:M.bgcolor,p.hbc=Array.isArray(M.bordercolor)?M.bordercolor[d]:M.bordercolor,p.hts=x.isArrayOrTypedArray(M.font.size)?M.font.size[d]:M.font.size,p.htc=Array.isArray(M.font.color)?M.font.color[d]:M.font.color,p.htf=Array.isArray(M.font.family)?M.font.family[d]:M.font.family,p.hnl=x.isArrayOrTypedArray(M.namelength)?M.namelength[d]:M.namelength);var k=l.hoverinfo;k&&(p.hi=Array.isArray(k)?k[d]:k);var E=l.hovertemplate;E&&(p.ht=Array.isArray(E)?E[d]:E);var P={};P[e.index]=p;var D=l._origX,F=l._origY,R=x.extendFlat({},e,{color:T(l,p),x0:w-A,x1:w+A,xLabelVal:D?D[d]:p.x,y0:f-A,y1:f+A,yLabelVal:F?F[d]:p.y,cd:P,distance:h,spikeDistance:s,hovertemplate:p.ht});return p.htx?R.text=p.htx:p.tx?R.text=p.tx:l.text&&(R.text=l.text),x.fillText(p,l,R),v.getComponentMethod("errorbars","hoverInfo")(p,l,R),R}oe.exports={hoverPoints:function(e,o,i,l){var r,y,h,s,d,p,c,g,m,u,w=e.cd,f=w[0].t,A=w[0].trace,M=e.xa,k=e.ya,E=f.x,P=f.y,D=M.c2p(o),F=k.c2p(i),R=e.distance;if(f.tree){var L=M.p2c(D-R),I=M.p2c(D+R),B=k.p2c(F-R),V=k.p2c(F+R);r="x"===l?f.tree.range(Math.min(L,I),Math.min(k._rl[0],k._rl[1]),Math.max(L,I),Math.max(k._rl[0],k._rl[1])):f.tree.range(Math.min(L,I),Math.min(B,V),Math.max(L,I),Math.max(B,V))}else r=f.ids;var Z=R;if("x"===l){var Y=!!A.xperiodalignment,Q=!!A.yperiodalignment;for(p=0;p<r.length;p++){if(s=E[y=r[p]],c=Math.abs(M.c2p(s)-D),Y){var re=M.c2p(A._xStarts[y]),$=M.c2p(A._xEnds[y]);c=D>=Math.min(re,$)&&D<=Math.max(re,$)?0:1/0}if(c<Z){if(Z=c,g=k.c2p(d=P[y])-F,Q){var J=k.c2p(A._yStarts[y]),ie=k.c2p(A._yEnds[y]);g=F>=Math.min(J,ie)&&F<=Math.max(J,ie)?0:1/0}u=Math.sqrt(c*c+g*g),h=r[p]}}}else for(p=r.length-1;p>-1;p--)s=E[y=r[p]],d=P[y],c=M.c2p(s)-D,g=k.c2p(d)-F,(m=Math.sqrt(c*c+g*g))<Z&&(Z=u=m,h=y);return e.index=h,e.distance=Z,e.dxy=u,void 0===h?[e]:[b(e,E,P,A)]},calcHover:b}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(_,oe,se){arguments[4][896][0].apply(se,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(_,oe,se){"use strict";var v=_("regl-scatter2d"),x=_("regl-line2d"),T=_("regl-error2d"),b=_("gl-text"),e=_("../../lib"),o=_("../../components/dragelement/helpers").selectMode,i=_("../../lib/prepare_regl"),l=_("../scatter/subtypes"),r=_("../scatter/link_traces"),y=_("./edit_style").styleTextSelection,h={};function s(d,p,c,g){var m=d._size,E=m.w*g,P=m.h*g;return[m.l*g+p.domain[0]*E,m.b*g+c.domain[0]*P,d.width*g-m.r*g-(1-p.domain[1])*E,d.height*g-m.t*g-(1-c.domain[1])*P]}(oe.exports=function(d,p,c){if(c.length){var g,m,u=d._fullLayout,w=p._scene,f=p.xaxis,A=p.yaxis;if(w)if(i(d,["ANGLE_instanced_arrays","OES_element_index_uint"],h)){var M=w.count,k=u._glcanvas.data()[0].regl;if(r(d,p,c),w.dirty){if(!0===w.error2d&&(w.error2d=T(k)),!0===w.line2d&&(w.line2d=x(k)),!0===w.scatter2d&&(w.scatter2d=v(k)),!0===w.fill2d&&(w.fill2d=x(k)),!0===w.glText)for(w.glText=new Array(M),g=0;g<M;g++)w.glText[g]=new b(k);if(w.glText){if(M>w.glText.length){var E=M-w.glText.length;for(g=0;g<E;g++)w.glText.push(new b(k))}else M<w.glText.length&&w.glText.splice(M,w.glText.length-M).forEach(function(ee){ee.destroy()});for(g=0;g<M;g++)w.glText[g].update(w.textOptions[g])}if(w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(ee){if(ee&&ee.positions){for(var te=ee.positions,le=0;le<te.length&&(isNaN(te[le])||isNaN(te[le+1]));)le+=2;for(var ue=te.length-2;ue>le&&(isNaN(te[ue])||isNaN(te[ue+1]));)ue-=2;ee.positions=te.slice(le,ue+2)}return ee}),w.line2d.update(w.lineOptions)),w.error2d){var D=(w.errorXOptions||[]).concat(w.errorYOptions||[]);w.error2d.update(D)}w.scatter2d&&w.scatter2d.update(w.markerOptions),w.fillOrder=e.repeat(null,M),w.fill2d&&(w.fillOptions=w.fillOptions.map(function(ee,te){var le=c[te];if(ee&&le&&le[0]&&le[0].trace){var ue,de,he=le[0],be=he.trace,me=he.t,_e=w.lineOptions[te],Ee=[];be._ownfill&&Ee.push(te),be._nexttrace&&Ee.push(te+1),Ee.length&&(w.fillOrder[te]=Ee);var De,Se,Fe=[],ve=_e&&_e.positions||me.positions;if("tozeroy"===be.fill){for(De=0;De<ve.length&&isNaN(ve[De+1]);)De+=2;for(Se=ve.length-2;Se>De&&isNaN(ve[Se+1]);)Se-=2;0!==ve[De+1]&&(Fe=[ve[De],0]),Fe=Fe.concat(ve.slice(De,Se+2)),0!==ve[Se+1]&&(Fe=Fe.concat([ve[Se],0]))}else if("tozerox"===be.fill){for(De=0;De<ve.length&&isNaN(ve[De]);)De+=2;for(Se=ve.length-2;Se>De&&isNaN(ve[Se]);)Se-=2;0!==ve[De]&&(Fe=[0,ve[De+1]]),Fe=Fe.concat(ve.slice(De,Se+2)),0!==ve[Se]&&(Fe=Fe.concat([0,ve[Se+1]]))}else if("toself"===be.fill||"tonext"===be.fill){for(Fe=[],ue=0,ee.splitNull=!0,de=0;de<ve.length;de+=2)(isNaN(ve[de])||isNaN(ve[de+1]))&&((Fe=Fe.concat(ve.slice(ue,de))).push(ve[ue],ve[ue+1]),Fe.push(null,null),ue=de+2);Fe=Fe.concat(ve.slice(ue)),ue&&Fe.push(ve[ue],ve[ue+1])}else{var Te=be._nexttrace;if(Te){var Ie=w.lineOptions[te+1];if(Ie){var Ce=Ie.positions;if("tonexty"===be.fill){for(Fe=ve.slice(),te=Math.floor(Ce.length/2);te--;){var Re=Ce[2*te],Ue=Ce[2*te+1];isNaN(Re)||isNaN(Ue)||Fe.push(Re,Ue)}ee.fill=Te.fillcolor}}}}if(be._prevtrace&&"tonext"===be._prevtrace.fill){var qe=w.lineOptions[te-1].positions,Xe=Fe.length/2,st=[ue=Xe];for(de=0;de<qe.length;de+=2)(isNaN(qe[de])||isNaN(qe[de+1]))&&(st.push(de/2+Xe+1),ue=de+2);Fe=Fe.concat(qe),ee.hole=st}return ee.fillmode=be.fill,ee.opacity=be.opacity,ee.positions=Fe,ee}}),w.fill2d.update(w.fillOptions))}var R=o(u.dragmode),L=u.clickmode.indexOf("select")>-1;for(g=0;g<M;g++){var I=c[g][0],B=I.trace,V=I.t,Z=V.index,Y=B._length,Q=V.x,re=V.y;if(B.selectedpoints||R||L){if(R||(R=!0),B.selectedpoints){var $=w.selectBatch[Z]=e.selIndices2selPoints(B),J={};for(m=0;m<$.length;m++)J[$[m]]=1;var ie=[];for(m=0;m<Y;m++)J[m]||ie.push(m);w.unselectBatch[Z]=ie}var j=V.xpx=new Array(Y),q=V.ypx=new Array(Y);for(m=0;m<Y;m++)j[m]=f.c2p(Q[m]),q[m]=A.c2p(re[m])}else V.xpx=V.ypx=null}if(R){if(w.select2d||(w.select2d=v(u._glcanvas.data()[1].regl)),w.scatter2d){var W=new Array(M);for(g=0;g<M;g++)W[g]=w.selectBatch[g].length||w.unselectBatch[g].length?w.markerUnselectedOptions[g]:{};w.scatter2d.update(W)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions)),w.glText&&c.forEach(function(ee){l.hasText(((ee||[])[0]||{}).trace||{})&&y(ee)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var ae={viewport:s(u,f,A,d._context.plotGlPixelRatio),range:[(f._rl||f.range)[0],(A._rl||A.range)[0],(f._rl||f.range)[1],(A._rl||A.range)[1]]},G=e.repeat(ae,w.count);w.fill2d&&w.fill2d.update(G),w.line2d&&w.line2d.update(G),w.error2d&&w.error2d.update(G.concat(G)),w.scatter2d&&w.scatter2d.update(G),w.select2d&&w.select2d.update(G),w.glText&&w.glText.forEach(function(ee){ee.update(ae)})}else w.init()}}).reglPrecompiled=h},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){var b=T._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},o={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||((b=T._scene={}).init=function(){v.extendFlat(b,o,e)},b.init(),b.update=function(i){var l=v.repeat(i,b.count);if(b.fill2d&&b.fill2d.update(l),b.scatter2d&&b.scatter2d.update(l),b.line2d&&b.line2d.update(l),b.error2d&&b.error2d.update(l.concat(l)),b.select2d&&b.select2d.update(l),b.glText)for(var r=0;r<b.count;r++)b.glText[r].update(i)},b.draw=function(){for(var i=b.count,l=b.fill2d,r=b.error2d,y=b.line2d,h=b.scatter2d,s=b.glText,d=b.select2d,p=b.selectBatch,c=b.unselectBatch,g=0;g<i;g++){if(l&&b.fillOrder[g]&&l.draw(b.fillOrder[g]),y&&b.lineOptions[g]&&y.draw(g),r&&(b.errorXOptions[g]&&r.draw(g),b.errorYOptions[g]&&r.draw(g+i)),h&&b.markerOptions[g])if(c[g].length){var m=v.repeat([],b.count);m[g]=c[g],h.draw(m)}else p[g].length||h.draw(g);s[g]&&b.textOptions[g]&&s[g].render()}d&&d.draw(p),b.dirty=!1},b.destroy=function(){b.fill2d&&b.fill2d.destroy&&b.fill2d.destroy(),b.scatter2d&&b.scatter2d.destroy&&b.scatter2d.destroy(),b.error2d&&b.error2d.destroy&&b.error2d.destroy(),b.line2d&&b.line2d.destroy&&b.line2d.destroy(),b.select2d&&b.select2d.destroy&&b.select2d.destroy(),b.glText&&b.glText.forEach(function(i){i.destroy&&i.destroy()}),b.lineOptions=null,b.fillOptions=null,b.markerOptions=null,b.markerSelectedOptions=null,b.markerUnselectedOptions=null,b.errorXOptions=null,b.errorYOptions=null,b.textOptions=null,b.textSelectedOptions=null,b.textUnselectedOptions=null,b.selectBatch=null,b.unselectBatch=null,T._scene=null}),b.dirty||v.extendFlat(b,e),b}},{"../../lib":503}],992:[function(_,oe,se){"use strict";var v=_("../scatter/subtypes"),x=_("./edit_style").styleTextSelection;oe.exports=function(T,b){var e=T.cd,o=T.xaxis,i=T.yaxis,l=[],r=e[0].trace,y=e[0].t,h=r._length,s=y.x,d=y.y,p=y._scene,c=y.index;if(!p)return l;var g=v.hasText(r),m=v.hasMarkers(r);if(!0!==r.visible||!m&&!g)return l;var w=[],f=[];if(!1!==b&&!b.degenerate)for(var A=0;A<h;A++)b.contains([y.xpx[A],y.ypx[A]],!1,A,T)?(w.push(A),l.push({pointNumber:A,x:o.c2d(s[A]),y:i.c2d(d[A])})):f.push(A);if(m){var M=p.scatter2d;if(w.length||f.length){if(!p.selectBatch[c].length&&!p.unselectBatch[c].length){var k=new Array(p.count);k[c]=p.markerUnselectedOptions[c],M.update.apply(M,k)}}else{var E=new Array(p.count);E[c]=p.markerOptions[c],M.update.apply(M,E)}}return p.selectBatch[c]=w,p.unselectBatch[c]=f,g&&x(e),l}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scattergeo/attributes"),b=_("../scatter/attributes"),e=_("../../plots/mapbox/layout_attributes"),o=_("../../plots/attributes"),i=_("../../components/colorscale/attributes"),l=_("../../lib/extend").extendFlat,r=_("../../plot_api/edit_types").overrideAll,y=T.line,h=T.marker;oe.exports=r({lon:T.lon,lat:T.lat,mode:l({},b.mode,{dflt:"markers"}),text:l({},b.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},b.hovertext,{}),line:{color:y.color,width:y.width},connectgaps:b.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:h.opacity,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode},i("marker")),fill:T.fill,fillcolor:b.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:l({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:v()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM,b=_("../../lib/geojson_utils"),e=_("../../components/colorscale"),o=_("../../components/drawing"),i=_("../scatter/make_bubble_size_func"),l=_("../scatter/subtypes"),r=_("../../plots/mapbox/convert_text_opts"),y=_("../../components/fx/helpers").appendArrayPointValue,h=_("../../lib/svg_text_utils").NEWLINES,s=_("../../lib/svg_text_utils").BR_TAG_ALL;function d(){return{geojson:b.makeBlank(),layout:{visibility:"none"},paint:{}}}function p(m,u){return x.isArrayOrTypedArray(m)?u?function(w){return v(m[w])?+m[w]:0}:function(w){return m[w]}:m?function(){return m}:c}function c(){return""}function g(m){return m[0]===T}oe.exports=function(m,u){var w,f=u[0].trace,A=!0===f.visible&&0!==f._length,M="none"!==f.fill,k=l.hasLines(f),E=l.hasMarkers(f),P=l.hasText(f),D=E&&"circle"===f.marker.symbol,F=E&&"circle"!==f.marker.symbol,R=d(),L=d(),I=d(),B=d(),V={fill:R,line:L,circle:I,symbol:B};if(!A)return V;if((M||k)&&(w=b.calcTraceToLineCoords(u)),M&&(R.geojson=b.makePolygon(w),R.layout.visibility="visible",x.extendFlat(R.paint,{"fill-color":f.fillcolor})),k&&(L.geojson=b.makeLine(w),L.layout.visibility="visible",x.extendFlat(L.paint,{"line-width":f.line.width,"line-color":f.line.color,"line-opacity":f.opacity})),D){var Z=function(re){var $,J,ie,j,q=re[0].trace,W=q.marker,ae=q.selectedpoints,G=x.isArrayOrTypedArray(W.color),ee=x.isArrayOrTypedArray(W.size),te=x.isArrayOrTypedArray(W.opacity);function le(De){return q.opacity*De}G&&(J=e.hasColorscale(q,"marker")?e.makeColorScaleFuncFromTrace(W):x.identity),ee&&(ie=i(q)),te&&(j=function(De){return le(v(De)?+x.constrain(De,0,1):0)});var ue,Ee,de=[];for($=0;$<re.length;$++){var he=re[$],be=he.lonlat;if(!g(be)){var me={};J&&(me.mcc=he.mcc=J(he.mc)),ie&&(me.mrc=he.mrc=ie(he.ms)),j&&(me.mo=j(he.mo)),ae&&(me.selected=he.selected||0),de.push({type:"Feature",geometry:{type:"Point",coordinates:be},properties:me})}}if(ae)for(ue=o.makeSelectedPointStyleFns(q),$=0;$<de.length;$++){var _e=de[$].properties;ue.selectedOpacityFn&&(_e.mo=le(ue.selectedOpacityFn(_e))),ue.selectedColorFn&&(_e.mcc=ue.selectedColorFn(_e)),ue.selectedSizeFn&&(_e.mrc=ue.selectedSizeFn(_e))}return{geojson:{type:"FeatureCollection",features:de},mcc:G||ue&&ue.selectedColorFn?{type:"identity",property:"mcc"}:W.color,mrc:ee||ue&&ue.selectedSizeFn?{type:"identity",property:"mrc"}:(Ee=W.size,Ee/2),mo:te||ue&&ue.selectedOpacityFn?{type:"identity",property:"mo"}:le(W.opacity)}}(u);I.geojson=Z.geojson,I.layout.visibility="visible",x.extendFlat(I.paint,{"circle-color":Z.mcc,"circle-radius":Z.mrc,"circle-opacity":Z.mo})}if((F||P)&&(B.geojson=function(re,$){for(var J=$._fullLayout,ie=re[0].trace,j=ie.marker||{},q=j.symbol,W=j.angle,ae="circle"!==q?p(q):c,G="auto"!==W?p(W,!0):c,ee=l.hasText(ie)?p(ie.text):c,te=[],le=0;le<re.length;le++){var ue=re[le];if(!g(ue.lonlat)){var de,he=ie.texttemplate;if(he){var be=Array.isArray(he)?he[le]||"":he,me=ie._module.formatLabels(ue,ie,J),_e={};y(_e,ie,ue.i),de=x.texttemplateString(be,me,J._d3locale,_e,ue,ie._meta||{})}else de=ee(le);de&&(de=de.replace(h,"").replace(s,"\n")),te.push({type:"Feature",geometry:{type:"Point",coordinates:ue.lonlat},properties:{symbol:ae(le),angle:G(le),text:de}})}}return{type:"FeatureCollection",features:te}}(u,m),x.extendFlat(B.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(x.extendFlat(B.layout,{"icon-size":f.marker.size/10}),"angle"in f.marker&&"auto"!==f.marker.angle&&x.extendFlat(B.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),B.layout["icon-allow-overlap"]=f.marker.allowoverlap,x.extendFlat(B.paint,{"icon-opacity":f.opacity*f.marker.opacity,"icon-color":f.marker.color})),P)){var Q=r(f.textposition,(f.marker||{}).size);x.extendFlat(B.layout,{"text-size":f.textfont.size,"text-anchor":Q.anchor,"text-offset":Q.offset}),x.extendFlat(B.paint,{"text-color":f.textfont.color,"text-opacity":f.opacity})}return V}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/text_defaults"),o=_("../scatter/fillcolor_defaults"),i=_("./attributes");oe.exports=function(l,r,y,h){function s(p,c){return v.coerce(l,r,i,p,c)}if(c=r,m=(g=s)("lon")||[],u=g("lat")||[],w=Math.min(m.length,u.length),c._length=w,w){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),x.hasLines(r)&&(b(l,r,y,h,s,{noDash:!0}),s("connectgaps")),x.hasMarkers(r)){T(l,r,y,h,s,{noLine:!0}),s("marker.allowoverlap"),s("marker.angle");var d=r.marker;"circle"!==d.symbol&&(v.isArrayOrTypedArray(d.size)&&(d.size=d.size[0]),v.isArrayOrTypedArray(d.color)&&(d.color=d.color[0]))}x.hasText(r)&&e(l,r,h,s,{noSelect:!0}),s("fill"),"none"!==r.fill&&o(l,r,y,s),v.coerceSelectionMarkerOpacity(r,s)}else r.visible=!1;var c,g,m,u,w}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(_,oe,se){"use strict";oe.exports=function(v,x){return v.lon=x.lon,v.lat=x.lat,v}},{}],997:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.subplot]._subplot.mockAxis,i=x.lonlat;return e.lonLabel=v.tickText(o,o.c2l(i[0]),!0).text,e.latLabel=v.tickText(o,o.c2l(i[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],998:[function(_,oe,se){"use strict";var v=_("../../components/fx"),x=_("../../lib"),T=_("../scatter/get_trace_color"),b=x.fillText,e=_("../../constants/numerical").BADNUM;function o(i,l,r){if(!i.hovertemplate){var y=(l.hi||i.hoverinfo).split("+"),h=-1!==y.indexOf("all"),s=-1!==y.indexOf("lon"),d=-1!==y.indexOf("lat"),p=l.lonlat,c=[];return h||s&&d?c.push("("+g(p[1])+", "+g(p[0])+")"):s?c.push(r.lon+g(p[0])):d&&c.push(r.lat+g(p[1])),(h||-1!==y.indexOf("text"))&&b(l,i,c),c.join("<br>")}function g(m){return m+"\xb0"}}oe.exports={hoverPoints:function(i,l,r){var y=i.cd,h=y[0].trace,s=i.xa,d=i.ya,p=i.subplot,c=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),g=l-c;if(v.getClosest(y,function(P){var D=P.lonlat;if(D[0]===e)return 1/0;var F=x.modHalf(D[0],360),R=D[1],L=p.project([F,R]),I=L.x-s.c2p([g,R]),B=L.y-d.c2p([F,r]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(I*I+B*B)-V,1-3/V)},i),!1!==i.index){var m=y[i.index],u=m.lonlat,w=[x.modHalf(u[0],360)+c,u[1]],f=s.c2p(w),A=d.c2p(w),M=m.mrc||1;i.x0=f-M,i.x1=f+M,i.y0=A-M,i.y1=A+M;var k={};k[h.subplot]={_subplot:p};var E=h._module.formatLabels(m,h,k);return i.lonLabel=E.lonLabel,i.latLabel=E.latLabel,i.color=T(h,m),i.extraText=o(h,m,y[0].t.labels),i.hovertemplate=h.hovertemplate,[i]}},getExtraText:o}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("../scattergeo/calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),styleOnSelect:function(v,x){x&&x[0].trace._glTrace.update(x)},moduleType:"trace",name:"scattermapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(_,oe,se){"use strict";var v=_("./convert"),x=_("../../plots/mapbox/constants").traceLayerPrefix,T=["fill","line","circle","symbol"];function b(o,i){this.type="scattermapbox",this.subplot=o,this.uid=i,this.sourceIds={fill:"source-"+i+"-fill",line:"source-"+i+"-line",circle:"source-"+i+"-circle",symbol:"source-"+i+"-symbol"},this.layerIds={fill:x+i+"-fill",line:x+i+"-line",circle:x+i+"-circle",symbol:x+i+"-symbol"},this.below=null}var e=b.prototype;e.addSource=function(o,i){this.subplot.map.addSource(this.sourceIds[o],{type:"geojson",data:i.geojson})},e.setSourceData=function(o,i){this.subplot.map.getSource(this.sourceIds[o]).setData(i.geojson)},e.addLayer=function(o,i,l){this.subplot.addLayer({type:o,id:this.layerIds[o],source:this.sourceIds[o],layout:i.layout,paint:i.paint},l)},e.update=function(o){var i,l,r,y=this.subplot,h=y.map,s=v(y.gd,o),d=y.belowLookup["trace-"+this.uid];if(d!==this.below){for(i=T.length-1;i>=0;i--)h.removeLayer(this.layerIds[l=T[i]]);for(i=0;i<T.length;i++)r=s[l=T[i]],this.addLayer(l,r,d);this.below=d}for(i=0;i<T.length;i++)r=s[l=T[i]],y.setOptions(this.layerIds[l],"setLayoutProperty",r.layout),"visible"===r.layout.visibility&&(this.setSourceData(l,r),y.setOptions(this.layerIds[l],"setPaintProperty",r.paint));o[0].trace._glTrace=this},e.dispose=function(){for(var o=this.subplot.map,i=T.length-1;i>=0;i--){var l=T[i];o.removeLayer(this.layerIds[l]),o.removeSource(this.sourceIds[l])}},oe.exports=function(o,i){for(var l=i[0].trace,r=new b(o,l.uid),y=v(o.gd,i),h=r.below=o.belowLookup["trace-"+l.uid],s=0;s<T.length;s++){var d=T[s],p=y[d];r.addSource(d,p),r.addLayer(d,p,h)}return i[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("../../constants/numerical").BADNUM;oe.exports=function(b,e){var o,i=b.cd,l=b.xaxis,r=b.yaxis,y=[];if(!x.hasMarkers(i[0].trace))return[];if(!1===e)for(o=0;o<i.length;o++)i[o].selected=0;else for(o=0;o<i.length;o++){var s=i[o],d=s.lonlat;if(d[0]!==T){var p=[v.modHalf(d[0],360),d[1]],c=[l.c2p(p),r.c2p(p)];e.contains(c,null,o,b)?(y.push({pointNumber:o,lon:d[0],lat:d[1]}),s.selected=1):s.selected=0}}return y}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("../scatter/attributes"),e=_("../../plots/attributes"),o=b.line;oe.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:x({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:T({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:T({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:T({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:v(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/cartesian/axes"),b=_("../scatter/colorscale_calc"),e=_("../scatter/arrays_to_calcdata"),o=_("../scatter/calc_selection"),i=_("../scatter/calc").calcMarkerSize;oe.exports=function(l,r){for(var y=l._fullLayout,h=r.subplot,s=y[h].radialaxis,d=y[h].angularaxis,p=s.makeCalcdata(r,"r"),c=d.makeCalcdata(r,"theta"),g=r._length,m=new Array(g),u=0;u<g;u++){var w=p[u],f=c[u],A=m[u]={};v(w)&&v(f)?(A.r=w,A.theta=f):A.r=x}var M=i(r,g);return r._extremes.x=T.findExtremes(s,p,{ppad:M}),b(l,r),e(m,r),o(m,r),m}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/line_shape_defaults"),o=_("../scatter/text_defaults"),i=_("../scatter/fillcolor_defaults"),l=_("../scatter/constants").PTS_LINESONLY,r=_("./attributes");function y(h,s,d,p){var c,g=p("r"),m=p("theta");if(g)m?c=Math.min(g.length,m.length):(c=g.length,p("theta0"),p("dtheta"));else{if(!m)return 0;c=s.theta.length,p("r0"),p("dr")}return s._length=c,c}oe.exports={handleRThetaDefaults:y,supplyDefaults:function(h,s,d,p){function c(u,w){return v.coerce(h,s,r,u,w)}var g=y(0,s,0,c);if(g){c("thetaunit"),c("mode",g<l?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),x.hasLines(s)&&(b(h,s,d,p,c),e(h,s,c),c("connectgaps")),x.hasMarkers(s)&&T(h,s,d,p,c,{gradient:!0}),x.hasText(s)&&(c("texttemplate"),o(h,s,p,c));var m=[];(x.hasMarkers(s)||x.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),m.push("points")),c("fill"),"none"!==s.fill&&(i(h,s,d,c),x.hasLines(s)||e(h,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||m.push("fills"),c("hoveron",m.join("+")||"points"),v.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes");oe.exports=function(T,b,e){var o,i,l={},r=e[b.subplot]._subplot;r?(o=r.radialAxis,i=r.angularAxis):(o=(r=e[b.subplot]).radialaxis,i=r.angularaxis);var y=o.c2l(T.r);l.rLabel=x.tickText(o,y,!0).text;var h="degrees"===i.thetaunit?v.rad2deg(T.theta):T.theta;return l.thetaLabel=x.tickText(i,h,!0).text,l}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(_,oe,se){"use strict";var v=_("../scatter/hover");function x(T,b,e,o){var i=e.radialAxis,l=e.angularAxis;i._hovertitle="r",l._hovertitle="\u03b8";var r={};r[b.subplot]={_subplot:e};var y=b._module.formatLabels(T,b,r);o.rLabel=y.rLabel,o.thetaLabel=y.thetaLabel;var s=[];function d(c,g){s.push(c._hovertitle+": "+g)}if(!b.hovertemplate){var p=(T.hi||b.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["r","theta","text"]),-1!==p.indexOf("r")&&d(i,o.rLabel),-1!==p.indexOf("theta")&&d(l,o.thetaLabel),-1!==p.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}oe.exports={hoverPoints:function(T,b,e,o){var i=v(T,b,e,o);if(i&&!1!==i[0].index){var l=i[0];if(void 0===l.index)return i;var r=T.subplot,y=l.cd[l.index],h=l.trace;if(r.isPtInside(y))return l.xLabelVal=void 0,l.yLabelVal=void 0,x(y,h,r,l),l.hovertemplate=h.hovertemplate,i}},makeHoverPointText:x}},{"../scatter/hover":938}],1007:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:_("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(_,oe,se){"use strict";var v=_("../scatter/plot"),x=_("../../constants/numerical").BADNUM;oe.exports=function(T,b,e){for(var o=b.layers.frontplot.select("g.scatterlayer"),i={xaxis:b.xaxis,yaxis:b.yaxis,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},l=b.radialAxis,r=b.angularAxis,y=0;y<e.length;y++)for(var h=e[y],s=0;s<h.length;s++){var d=h[s],p=d.r;if(p===x)d.x=d.y=x;else{var c=l.c2g(p),g=r.c2g(d.theta);d.x=c*Math.cos(g),d.y=c*Math.sin(g)}}v(T,i,e,o)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(_,oe,se){"use strict";var v=_("../scatterpolar/attributes"),x=_("../scattergl/attributes"),T=_("../../plots/template_attributes").texttemplateAttrs;oe.exports={mode:v.mode,r:v.r,theta:v.theta,r0:v.r0,dr:v.dr,theta0:v.theta0,dtheta:v.dtheta,thetaunit:v.thetaunit,text:v.text,texttemplate:T({editType:"plot"},{keys:["r","theta","text"]}),hovertext:v.hovertext,hovertemplate:v.hovertemplate,line:x.line,connectgaps:x.connectgaps,marker:x.marker,fill:x.fill,fillcolor:x.fillcolor,textposition:x.textposition,textfont:x.textfont,hoverinfo:v.hoverinfo,selected:v.selected,unselected:v.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:_("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(_,oe,se){"use strict";var v=_("../scatter/colorscale_calc"),x=_("../scatter/calc").calcMarkerSize,T=_("../scattergl/convert"),b=_("../../plots/cartesian/axes"),e=_("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(o,i){var l=o._fullLayout,r=i.subplot,y=l[r].radialaxis,h=l[r].angularaxis,s=i._r=y.makeCalcdata(i,"r"),d=i._theta=h.makeCalcdata(i,"theta"),p=i._length,c={};p<s.length&&(s=s.slice(0,p)),p<d.length&&(d=d.slice(0,p)),c.r=s,c.theta=d,v(o,i);var g,m=c.opts=T.style(o,i);return p<e?g=x(i,p):m.marker&&(g=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),i._extremes.x=b.findExtremes(y,s,{ppad:g}),[{x:!1,y:!1,t:c,trace:i}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatterpolar/defaults").handleRThetaDefaults,b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/text_defaults"),i=_("../scatter/fillcolor_defaults"),l=_("../scatter/constants").PTS_LINESONLY,r=_("./attributes");oe.exports=function(y,h,s,d){function p(g,m){return v.coerce(y,h,r,g,m)}var c=T(y,h,d,p);c?(p("thetaunit"),p("mode",c<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),x.hasLines(h)&&(e(y,h,s,d,p),p("connectgaps")),x.hasMarkers(h)&&b(y,h,s,d,p),x.hasText(h)&&(p("texttemplate"),o(y,h,d,p)),p("fill"),"none"!==h.fill&&i(y,h,s,p),v.coerceSelectionMarkerOpacity(h,p)):h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(_,oe,se){"use strict";var v=_("../scatterpolar/format_labels");oe.exports=function(x,T,b){var e=x.i;return"r"in x||(x.r=T._r[e]),"theta"in x||(x.theta=T._theta[e]),v(x,T,b)}},{"../scatterpolar/format_labels":1005}],1014:[function(_,oe,se){"use strict";var v=_("../scattergl/hover"),x=_("../scatterpolar/hover").makeHoverPointText;oe.exports={hoverPoints:function(T,b,e,o){var i=T.cd[0].t,l=i.r,r=i.theta,y=v.hoverPoints(T,b,e,o);if(y&&!1!==y[0].index){var h=y[0];if(void 0===h.index)return y;var s=T.subplot,d=h.cd[h.index],p=h.trace;if(d.r=l[h.index],d.theta=r[h.index],s.isPtInside(d))return h.xLabelVal=void 0,h.yLabelVal=void 0,x(d,p,s,h),y}}}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(_,oe,se){arguments[4][896][0].apply(se,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(_,oe,se){"use strict";var v=_("@plotly/point-cluster"),x=_("fast-isnumeric"),T=_("../scattergl/plot"),b=_("../scattergl/scene_update"),e=_("../scattergl/convert"),o=_("../../lib"),i=_("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(l,r,y){if(y.length){var h=r.radialAxis,s=r.angularAxis,d=b(l,r);return y.forEach(function(p){if(p&&p[0]&&p[0].trace){var c,g=p[0],m=g.trace,u=g.t,w=m._length,f=u.r,A=u.theta,M=u.opts,k=f.slice(),E=A.slice();for(c=0;c<f.length;c++)r.isPtInside({r:f[c],theta:A[c]})||(k[c]=NaN,E[c]=NaN);var P=new Array(2*w),D=Array(w),F=Array(w);for(c=0;c<w;c++){var R,L,I=k[c];if(x(I)){var B=h.c2g(I),V=s.c2g(E[c],m.thetaunit);R=B*Math.cos(V),L=B*Math.sin(V)}else R=L=NaN;D[c]=P[2*c]=R,F[c]=P[2*c+1]=L}u.tree=v(P),M.marker&&w>=i&&(M.marker.cluster=u.tree),M.marker&&(M.markerSel.positions=M.markerUnsel.positions=M.marker.positions=P),M.line&&P.length>1&&o.extendFlat(M.line,e.linePositions(l,m,P)),M.text&&(o.extendFlat(M.text,{positions:P},e.textPosition(l,m,M.text,M.marker)),o.extendFlat(M.textSel,{positions:P},e.textPosition(l,m,M.text,M.markerSel)),o.extendFlat(M.textUnsel,{positions:P},e.textPosition(l,m,M.text,M.markerUnsel))),M.fill&&!d.fill2d&&(d.fill2d=!0),M.marker&&!d.scatter2d&&(d.scatter2d=!0),M.line&&!d.line2d&&(d.line2d=!0),M.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(M.line),d.fillOptions.push(M.fill),d.markerOptions.push(M.marker),d.markerSelectedOptions.push(M.markerSel),d.markerUnselectedOptions.push(M.markerUnsel),d.textOptions.push(M.text),d.textSelectedOptions.push(M.textSel),d.textUnselectedOptions.push(M.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),u.x=D,u.y=F,u.rawx=D,u.rawy=F,u.r=f,u.theta=A,u.positions=P,u._scene=d,u.index=d.count,d.count++}}),T(l,r,y)}},oe.exports.reglPrecompiled={}},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("../scatter/attributes"),e=_("../../plots/attributes"),o=b.line;oe.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:x({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:T({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:T({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:T({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:v(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/colorscale_calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection"),o=_("../scatter/calc").calcMarkerSize;oe.exports=function(i,l){for(var r=i._fullLayout,y=l.subplot,s=r[y].imaginaryaxis,d=r[y].realaxis.makeCalcdata(l,"real"),p=s.makeCalcdata(l,"imag"),c=l._length,g=new Array(c),m=0;m<c;m++){var u=d[m],w=p[m],f=g[m]={};v(u)&&v(w)?(f.real=u,f.imag=w):f.real=x}return o(l,c),T(i,l),b(g,l),e(g,l),g}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/line_shape_defaults"),o=_("../scatter/text_defaults"),i=_("../scatter/fillcolor_defaults"),l=_("../scatter/constants").PTS_LINESONLY,r=_("./attributes");oe.exports=function(y,h,s,d){function p(m,u){return v.coerce(y,h,r,m,u)}var u,f,A,M,k,c=(u=h,M=(f=p)("real"),k=f("imag"),M&&k&&(A=Math.min(M.length,k.length)),u._length=A,A);if(c){p("mode",c<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),x.hasLines(h)&&(b(y,h,s,d,p),e(y,h,p),p("connectgaps")),x.hasMarkers(h)&&T(y,h,s,d,p,{gradient:!0}),x.hasText(h)&&(p("texttemplate"),o(y,h,d,p));var g=[];(x.hasMarkers(h)||x.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),"none"!==h.fill&&(i(y,h,s,p),x.hasLines(h)||e(y,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||g.push("fills"),p("hoveron",g.join("+")||"points"),v.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.subplot]._subplot;return e.realLabel=v.tickText(o.radialAxis,x.real,!0).text,e.imagLabel=v.tickText(o.angularAxis,x.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1021:[function(_,oe,se){"use strict";var v=_("../scatter/hover");function x(T,b,e,o){var i=e.radialAxis,l=e.angularAxis;i._hovertitle="real",l._hovertitle="imag";var r={};r[b.subplot]={_subplot:e};var y=b._module.formatLabels(T,b,r);o.realLabel=y.realLabel,o.imagLabel=y.imagLabel;var s=[];function d(c,g){s.push(c._hovertitle+": "+g)}if(!b.hovertemplate){var p=(T.hi||b.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["real","imag","text"]),-1!==p.indexOf("real")&&d(i,o.realLabel),-1!==p.indexOf("imag")&&d(l,o.imagLabel),-1!==p.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}oe.exports={hoverPoints:function(T,b,e,o){var i=v(T,b,e,o);if(i&&!1!==i[0].index){var l=i[0];if(void 0===l.index)return i;var r=T.subplot,y=l.cd[l.index],h=l.trace;if(r.isPtInside(y))return l.xLabelVal=void 0,l.yLabelVal=void 0,x(y,h,r,l),l.hovertemplate=h.hovertemplate,i}},makeHoverPointText:x}},{"../scatter/hover":938}],1022:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:_("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(_,oe,se){"use strict";var v=_("../scatter/plot"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/smith/helpers").smith;oe.exports=function(b,e,o){for(var i=e.layers.frontplot.select("g.scatterlayer"),l={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},r=0;r<o.length;r++)for(var y=o[r],h=0;h<y.length;h++){var s=y[h],d=s.real;if(d===x)s.x=s.y=x;else{var p=T([d,s.imag]);s.x=p[0],s.y=p[1]}}v(b,l,o,i)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scatter/attributes"),b=_("../../plots/attributes"),e=_("../../components/colorscale/attributes"),o=_("../../components/drawing/attributes").dash,i=_("../../lib/extend").extendFlat,l=T.marker,r=T.line,y=l.line;oe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},T.mode,{dflt:"markers"}),text:i({},T.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},T.hovertext,{}),line:{color:r.color,width:r.width,dash:o,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:i({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:i({symbol:l.symbol,opacity:l.opacity,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:i({width:y.width,editType:"calc"},e("marker.line")),gradient:l.gradient,editType:"calc"},e("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:i({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:v()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(_,oe,se){"use strict";var v=_("fast-isnumeric"),x=_("../scatter/colorscale_calc"),T=_("../scatter/arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../scatter/calc").calcMarkerSize,o=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};oe.exports=function(l,r){var y,h,s,d,p,c,g=l._fullLayout[r.subplot].sum,m=r.sum||g,u={a:r.a,b:r.b,c:r.c};for(y=0;y<o.length;y++)if(!u[s=o[y]]){for(p=u[i[s][0]],c=u[i[s][1]],d=new Array(p.length),h=0;h<p.length;h++)d[h]=m-p[h]-c[h];u[s]=d}var w,f,A,M,P=r._length,D=new Array(P);for(y=0;y<P;y++)f=u.b[y],A=u.c[y],v(w=u.a[y])&&v(f)&&v(A)?(1!=(M=g/((w=+w)+(f=+f)+(A=+A)))&&(w*=M,f*=M,A*=M),D[y]={x:A-f,y:w,a:w,b:f,c:A}):D[y]={x:!1,y:!1};return e(r,P),x(l,r),T(D,r),b(D,r),D}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/constants"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/line_shape_defaults"),i=_("../scatter/text_defaults"),l=_("../scatter/fillcolor_defaults"),r=_("./attributes");oe.exports=function(y,h,s,d){function p(f,A){return v.coerce(y,h,r,f,A)}var c,g=p("a"),m=p("b"),u=p("c");if(g?(c=g.length,m?(c=Math.min(c,m.length),u&&(c=Math.min(c,u.length))):c=u?Math.min(c,u.length):0):m&&u&&(c=Math.min(m.length,u.length)),c){h._length=c,p("sum"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),p("mode",c<x.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(h)&&(e(y,h,s,d,p),o(y,h,p),p("connectgaps")),T.hasMarkers(h)&&b(y,h,s,d,p,{gradient:!0}),T.hasText(h)&&(p("texttemplate"),i(y,h,d,p));var w=[];(T.hasMarkers(h)||T.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),w.push("points")),p("fill"),"none"!==h.fill&&(l(y,h,s,p),T.hasLines(h)||o(y,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||w.push("fills"),p("hoveron",w.join("+")||"points"),v.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(_,oe,se){"use strict";oe.exports=function(v,x,T,b,e){if(x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),b[e]){var o=b[e];v.a=o.a,v.b=o.b,v.c=o.c}else v.a=x.a,v.b=x.b,v.c=x.c;return v}},{}],1028:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.subplot]._subplot;return e.aLabel=v.tickText(o.aaxis,x.a,!0).text,e.bLabel=v.tickText(o.baxis,x.b,!0).text,e.cLabel=v.tickText(o.caxis,x.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1029:[function(_,oe,se){"use strict";var v=_("../scatter/hover");oe.exports=function(x,T,b,e){var o=v(x,T,b,e);if(o&&!1!==o[0].index){var i=o[0];if(void 0===i.index){var r=x.xa._length,y=r*(1-i.y0/x.ya._length)/2,h=r-y;return i.x0=Math.max(Math.min(i.x0,h),y),i.x1=Math.max(Math.min(i.x1,h),y),o}var s=i.cd[i.index],d=i.trace,p=i.subplot;i.a=s.a,i.b=s.b,i.c=s.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var c={};c[d.subplot]={_subplot:p};var g=d._module.formatLabels(s,d,c);i.aLabel=g.aLabel,i.bLabel=g.bLabel,i.cLabel=g.cLabel;var u=[];if(!d.hovertemplate){var w=(s.hi||d.hoverinfo).split("+");-1!==w.indexOf("all")&&(w=["a","b","c"]),-1!==w.indexOf("a")&&f(p.aaxis,i.aLabel),-1!==w.indexOf("b")&&f(p.baxis,i.bLabel),-1!==w.indexOf("c")&&f(p.caxis,i.cLabel)}return i.extraText=u.join("<br>"),i.hovertemplate=d.hovertemplate,o}function f(A,M){u.push(A._hovertitle+": "+M)}}},{"../scatter/hover":938}],1030:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../scatter/select"),eventData:_("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:_("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(_,oe,se){"use strict";var v=_("../scatter/plot");oe.exports=function(x,T,b){var e=T.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var o={xaxis:T.xaxis,yaxis:T.yaxis,plot:e,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},i=T.layers.frontplot.select("g.scatterlayer");v(x,o,b,i)}},{"../scatter/plot":948}],1032:[function(_,oe,se){"use strict";var v=_("../scatter/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../scattergl/attributes"),o=_("../../plots/cartesian/constants").idRegex,i=_("../../plot_api/plot_template").templatedArray,l=_("../../lib/extend").extendFlat,r=v.marker,y=r.line,h=l(x("marker.line",{editTypeOverride:"calc"}),{width:l({},y.width,{editType:"calc"}),editType:"calc"}),s=l(x("marker"),{symbol:r.symbol,size:l({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:h,editType:"calc"});function d(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[p],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",oe.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},e.text,{}),hovertext:l({},e.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),marker:s,xaxes:d("x"),yaxes:d("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../components/grid");oe.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("./select"),editStyle:_("./edit_style"),meta:{}},v.register(x)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(_,oe,se){"use strict";var v=_("regl-line2d"),x=_("../../registry"),T=_("../../lib/prepare_regl"),b=_("../../plots/get_data").getModuleCalcData,e=_("../../plots/cartesian"),o=_("../../plots/cartesian/axis_ids").getFromId,i=_("../../plots/cartesian/axes").shouldShowZeroLine,l={};function r(h,s,d){for(var c=s._visibleDims,g=d.viewOpts.ranges=new Array(d.matrixOptions.data.length),m=0;m<c.length;m++){var u=c[m],w=g[m]=new Array(4),f=o(h,s._diag[u][0]);f&&(w[0]=f.r2l(f.range[0]),w[2]=f.r2l(f.range[1]));var A=o(h,s._diag[u][1]);A&&(w[1]=A.r2l(A.range[0]),w[3]=A.r2l(A.range[1]))}d.selectBatch.length||d.unselectBatch.length?d.matrix.update({ranges:g},{ranges:g}):d.matrix.update({ranges:g})}function y(h){var s=h._fullLayout,d=s._glcanvas.data()[0].regl,p=s._splomGrid;p||(p=s._splomGrid=v(d)),p.update(function(c){var g,m=c._context.plotGlPixelRatio,u=c._fullLayout,w=u._size,f=[0,0,u.width*m,u.height*m],A={};function M($,J,ie,j,q,W){ie*=m,j*=m,q*=m,W*=m;var ae=J[$+"color"],G=J[$+"width"],ee=String(ae+G);ee in A?A[ee].data.push(NaN,NaN,ie,j,q,W):A[ee]={data:[ie,j,q,W],join:"rect",thickness:G*m,color:ae,viewport:f,range:f,overlay:!1}}for(g in u._splomSubplots){var k,E,P=u._plots[g],D=P.xaxis,F=P.yaxis,R=D._gridVals,L=F._gridVals,I=D._offset,B=D._length,V=F._length,Z=w.b+F.domain[0]*w.h,Y=-F._m,Q=-Y*F.r2l(F.range[0],F.calendar);if(D.showgrid)for(g=0;g<R.length;g++)k=I+D.l2p(R[g].x),M("grid",D,k,Z,k,Z+V);if(F.showgrid)for(g=0;g<L.length;g++)M("grid",F,I,E=Z+Q+Y*L[g].x,I+B,E);i(c,D,F)&&(k=I+D.l2p(0),M("zeroline",D,k,Z,k,Z+V)),i(c,F,D)&&M("zeroline",F,I,E=Z+Q+0,I+B,E)}var re=[];for(g in A)re.push(A[g]);return re}(h))}oe.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(h){var s=h._fullLayout,d=x.getModule("splom"),p=b(h.calcdata,d)[0];T(h,["ANGLE_instanced_arrays","OES_element_index_uint"],l)&&(s._hasOnlyLargeSploms&&y(h),d.plot(h,{},p))},drag:function(h){var s=h.calcdata,d=h._fullLayout;d._hasOnlyLargeSploms&&y(h);for(var p=0;p<s.length;p++){var c=s[p][0].trace,g=d._splomScenes[c.uid];"splom"===c.type&&g&&g.matrix&&r(h,c,g)}},updateGrid:y,clean:function(h,s,d,p){var c,g={};if(p._splomScenes){for(c=0;c<h.length;c++){var m=h[c];"splom"===m.type&&(g[m.uid]=1)}for(c=0;c<d.length;c++){var u=d[c];if(!g[u.uid]){var w=p._splomScenes[u.uid];w&&w.destroy&&w.destroy(),p._splomScenes[u.uid]=null,delete p._splomScenes[u.uid]}}}0===Object.keys(p._splomScenes||{}).length&&delete p._splomScenes,p._splomGrid&&!s._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),e.clean(h,s,d,p)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:l}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axis_ids"),T=_("../scatter/calc").calcMarkerSize,b=_("../scatter/calc").calcAxisExpansion,e=_("../scatter/colorscale_calc"),o=_("../scattergl/convert").markerSelection,i=_("../scattergl/convert").markerStyle,l=_("./scene_update"),r=_("../../constants/numerical").BADNUM,y=_("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(h,s){var d,p,c,g,m,u,w=s.dimensions,f=s._length,A={},M=A.cdata=[],k=A.data=[],E=s._visibleDims=[];function P(F,R){for(var L=F.makeCalcdata({v:R.values,vcalendar:s.calendar},"v"),I=0;I<L.length;I++)L[I]=L[I]===r?NaN:L[I];M.push(L),k.push("log"===F.type?v.simpleMap(L,F.c2l):L)}for(d=0;d<w.length;d++)if((c=w[d]).visible){if(g=x.getFromId(h,s._diag[d][0]),m=x.getFromId(h,s._diag[d][1]),g&&m&&g.type!==m.type){v.log("Skipping splom dimension "+d+" with conflicting axis types");continue}g?(P(g,c),m&&"category"===m.type&&(m._categories=g._categories.slice())):P(m,c),E.push(d)}for(e(h,s),v.extendFlat(A,i(s)),u=M.length*f>y?A.sizeAvg||Math.max(A.size,3):T(s,f),p=0;p<E.length;p++)c=w[d=E[p]],g=x.getFromId(h,s._diag[d][0])||{},m=x.getFromId(h,s._diag[d][1])||{},b(h,s,g,m,M[p],M[p],u);var D=l(h,s);return D.matrix||(D.matrix=!0),D.matrixOptions=A,D.selectedOptions=o(s,s.selected),D.unselectedOptions=o(s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("../scatter/subtypes"),e=_("../scatter/marker_defaults"),o=_("../parcoords/merge_length"),i=_("../scattergl/helpers").isOpenSymbol;function l(r,y){function h(d,p){return v.coerce(r,y,T.dimensions,d,p)}h("label");var s=h("values");s&&s.length?h("visible"):y.visible=!1,h("axis.type"),h("axis.matches")}oe.exports=function(r,y,h,s){function d(f,A){return v.coerce(r,y,T,f,A)}var p=x(r,y,{name:"dimensions",handleItemDefaults:l}),c=d("diagonal.visible"),g=d("showupperhalf"),m=d("showlowerhalf");if(o(y,p,"values")&&(c||g||m)){d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(r,y,h,s,d);var u=i(y.marker.symbol),w=b.isBubble(y);d("marker.line.width",u||w?1:0),function(f,A,M,k){var E,P,D=A.dimensions,F=D.length,R=A.showupperhalf,L=A.showlowerhalf,I=A.diagonal.visible,B=new Array(F),V=new Array(F);for(E=0;E<F;E++){var Z=E?E+1:"";B[E]="x"+Z,V[E]="y"+Z}var Y=k("xaxes",B),Q=k("yaxes",V),re=A._diag=new Array(F);A._xaxes={},A._yaxes={};var $=[],J=[];function ie(ue,de,he,be){if(ue){var me=ue.charAt(0),_e=M._splomAxes[me];if(A["_"+me+"axes"][ue]=1,be.push(ue),!(ue in _e)){var Ee=_e[ue]={};he&&(Ee.label=he.label||"",he.visible&&he.axis&&(he.axis.type&&(Ee.type=he.axis.type),he.axis.matches&&(Ee.matches=de)))}}}var j=!I&&!L,q=!I&&!R;for(A._axesDim={},E=0;E<F;E++){var W=D[E],ae=0===E,G=E===F-1,ee=ae&&j||G&&q?void 0:Y[E],te=ae&&q||G&&j?void 0:Q[E];ie(ee,te,W,$),ie(te,ee,W,J),re[E]=[ee,te],A._axesDim[ee]=E,A._axesDim[te]=E}for(E=0;E<$.length;E++)for(P=0;P<J.length;P++){var le=$[E]+J[P];E>P&&R||E<P&&L?M._splomSubplots[le]=1:E!==P||!I&&L&&R||(M._splomSubplots[le]=1)}(!L||!I&&R&&L)&&(M._splomGridDflt.xside="bottom",M._splomGridDflt.yside="left")}(0,y,s,d),v.coerceSelectionMarkerOpacity(y,d)}else y.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/colorscale_calc"),T=_("../scattergl/convert").markerStyle;oe.exports=function(b,e){var o=e.trace,i=b._fullLayout._splomScenes[o.uid];if(i){x(b,o),v.extendFlat(i.matrixOptions,T(o));var l=v.extendFlat({},i.matrixOptions,i.viewOpts);i.matrix.update(l,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(_,oe,se){"use strict";se.getDimIndex=function(v,x){for(var T=x._id,b={x:0,y:1}[T.charAt(0)],e=v._visibleDims,o=0;o<e.length;o++)if(v._diag[e[o]][b]===T)return o;return!1}},{}],1039:[function(_,oe,se){"use strict";var v=_("./helpers"),x=_("../scattergl/hover").calcHover;oe.exports={hoverPoints:function(T,b,e){var o=T.cd[0].trace,i=T.scene.matrixOptions.cdata,l=T.xa,r=T.ya,y=l.c2p(b),h=r.c2p(e),s=T.distance,d=v.getDimIndex(o,l),p=v.getDimIndex(o,r);if(!1===d||!1===p)return[T];for(var c,g,m=i[d],u=i[p],w=s,f=0;f<m.length;f++){var M=u[f],k=l.c2p(m[f])-y,E=r.c2p(M)-h,P=Math.sqrt(k*k+E*E);P<w&&(w=g=P,c=f)}return T.index=c,T.distance=w,T.dxy=g,void 0===c?[T]:[x(T,m,u,o)]}}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(_,oe,se){"use strict";var v=_("./base_index");v.basePlotModule=_("./base_plot"),oe.exports=v},{"./base_index":1033,"./base_plot":1034}],1041:[function(_,oe,se){"use strict";var v=_("regl-splom"),x=_("../../lib"),T=_("../../plots/cartesian/axis_ids"),b=_("../../components/dragelement/helpers").selectMode;function e(o,i){var l,r,y,h,s,d=o._fullLayout,p=d._size,c=i.trace,g=i.t,m=d._splomScenes[c.uid],u=m.matrixOptions,w=u.cdata,f=d._glcanvas.data()[0].regl,A=d.dragmode;if(0!==w.length){u.lower=c.showupperhalf,u.upper=c.showlowerhalf,u.diagonal=c.diagonal.visible;var M=c._visibleDims,k=w.length,E=m.viewOpts={};for(E.ranges=new Array(k),E.domains=new Array(k),s=0;s<M.length;s++){y=M[s];var P=E.ranges[s]=new Array(4),D=E.domains[s]=new Array(4);(l=T.getFromId(o,c._diag[y][0]))&&(P[0]=l._rl[0],P[2]=l._rl[1],D[0]=l.domain[0],D[2]=l.domain[1]),(r=T.getFromId(o,c._diag[y][1]))&&(P[1]=r._rl[0],P[3]=r._rl[1],D[1]=r.domain[0],D[3]=r.domain[1])}var F=o._context.plotGlPixelRatio,R=p.l*F,L=p.b*F;E.viewport=[R,L,p.w*F+R,p.h*F+L],!0===m.matrix&&(m.matrix=v(f));var V=d.clickmode.indexOf("select")>-1,Z=!0;if(b(A)||c.selectedpoints||V){var Y=c._length;if(c.selectedpoints){m.selectBatch=c.selectedpoints;var Q=c.selectedpoints,re={};for(y=0;y<Q.length;y++)re[Q[y]]=!0;var $=[];for(y=0;y<Y;y++)re[y]||$.push(y);m.unselectBatch=$}var J=g.xpx=new Array(k),ie=g.ypx=new Array(k);for(s=0;s<M.length;s++){if(l=T.getFromId(o,c._diag[y=M[s]][0]))for(J[s]=new Array(Y),h=0;h<Y;h++)J[s][h]=l.c2p(w[s][h]);if(r=T.getFromId(o,c._diag[y][1]))for(ie[s]=new Array(Y),h=0;h<Y;h++)ie[s][h]=r.c2p(w[s][h])}if(m.selectBatch.length||m.unselectBatch.length){var j=x.extendFlat({},u,m.unselectedOptions,E),q=x.extendFlat({},u,m.selectedOptions,E);m.matrix.update(j,q),Z=!1}}else g.xpx=g.ypx=null;if(Z){var W=x.extendFlat({},u,E);m.matrix.update(W,null)}}}oe.exports=function(o,i,l){if(l.length)for(var r=0;r<l.length;r++)e(o,l[r][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(_,oe,se){"use strict";var v=_("../../lib");oe.exports=function(x,T){var b=x._fullLayout,e=T.uid,o=b._splomScenes;o||(o=b._splomScenes={});var i={dirty:!0,selectBatch:[],unselectBatch:[]},l=o[T.uid];return l||((l=o[e]=v.extendFlat({},i,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||v.extendFlat(l,i),l}},{"../../lib":503}],1043:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../scatter/subtypes"),T=_("./helpers");oe.exports=function(b,e){var o=b.cd,i=o[0].trace,l=o[0].t,r=b.scene,y=r.matrixOptions.cdata,h=b.xaxis,s=b.yaxis,d=[];if(!r)return d;var p=!x.hasMarkers(i)&&!x.hasText(i);if(!0!==i.visible||p)return d;var c=T.getDimIndex(i,h),g=T.getDimIndex(i,s);if(!1===c||!1===g)return d;var m=l.xpx[c],u=l.ypx[g],w=y[c],f=y[g],A=[],M=[];if(!1!==e&&!e.degenerate)for(var k=0;k<w.length;k++)e.contains([m[k],u[k]],null,k,b)?(A.push(k),d.push({pointNumber:k,x:w[k],y:f[k]})):M.push(k);var E=r.matrixOptions;return A.length||M.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,v.extendFlat({},E,r.selectedOptions,r.viewOpts)):r.matrix.update(E,null),r.selectBatch=A,r.unselectBatch=M,d}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(i,v("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){i[l]=b[l]}),i.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,oe.exports=i},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/calc");function T(o){var i,l,r,y,h,s,d,p,c,g,m,u,w=o._x,f=o._y,A=o._z,M=o._len,k=-1/0,E=1/0,P=-1/0,D=1/0,F=-1/0,R=1/0,L="";for(M&&(d=w[0],c=f[0],m=A[0]),M>1&&(p=w[M-1],g=f[M-1],u=A[M-1]),i=0;i<M;i++)k=Math.max(k,w[i]),E=Math.min(E,w[i]),P=Math.max(P,f[i]),D=Math.min(D,f[i]),F=Math.max(F,A[i]),R=Math.min(R,A[i]),y||w[i]===d||(y=!0,L+="x"),h||f[i]===c||(h=!0,L+="y"),s||A[i]===m||(s=!0,L+="z");y||(L+="x"),h||(L+="y"),s||(L+="z");var I=b(o._x),B=b(o._y),V=b(o._z);L=(L=(L=L.replace("x",(d>p?"-":"+")+"x")).replace("y",(c>g?"-":"+")+"y")).replace("z",(m>u?"-":"+")+"z");var Z=function(){M=0,I=[],B=[],V=[]};(!M||M<I.length*B.length*V.length)&&Z();var Y=function(me){return"x"===me?w:"y"===me?f:A},Q=function(me){return"x"===me?I:"y"===me?B:V},re=function(me){return me[M-1]<me[0]?-1:1},$=Y(L[1]),J=Y(L[3]),ie=Y(L[5]),j=Q(L[1]).length,q=Q(L[3]).length,W=Q(L[5]).length,ae=!1,G=function(me,_e,Ee){return j*(q*me+_e)+Ee},ee=re(Y(L[1])),te=re(Y(L[3])),le=re(Y(L[5]));for(i=0;i<W-1;i++){for(l=0;l<q-1;l++){for(r=0;r<j-1;r++){var ue=G(i,l,r),de=G(i,l,r+1),he=G(i,l+1,r),be=G(i+1,l,r);if($[ue]*ee<$[de]*ee&&J[ue]*te<J[he]*te&&ie[ue]*le<ie[be]*le||(ae=!0),ae)break}if(ae)break}if(ae)break}return ae&&(v.warn("Encountered arbitrary coordinates! Unable to input data grid."),Z()),{xMin:E,yMin:D,zMin:R,xMax:k,yMax:P,zMax:F,Xs:I,Ys:B,Zs:V,len:M,fill:L}}function b(o){return v.distinctVals(o).vals}function e(o,i){if(void 0===i&&(i=o.length),v.isTypedArray(o))return o.subarray(0,i);for(var l=[],r=0;r<i;r++)l[r]=+o[r];return l}oe.exports={calc:function(o,i){i._len=Math.min(i.u.length,i.v.length,i.w.length,i.x.length,i.y.length,i.z.length),i._u=e(i.u,i._len),i._v=e(i.v,i._len),i._w=e(i.w,i._len),i._x=e(i.x,i._len),i._y=e(i.y,i._len),i._z=e(i.z,i._len);var l=T(i);i._gridFill=l.fill,i._Xs=l.Xs,i._Ys=l.Ys,i._Zs=l.Zs,i._len=l.len;var r,y,h,s=0;i.starts&&(r=e(i.starts.x||[]),y=e(i.starts.y||[]),h=e(i.starts.z||[]),s=Math.min(r.length,y.length,h.length)),i._startsX=r||[],i._startsY=y||[],i._startsZ=h||[];var d,p=0,c=1/0;for(d=0;d<i._len;d++){var g=i._u[d],m=i._v[d],u=i._w[d],w=Math.sqrt(g*g+m*m+u*u);p=Math.max(p,w),c=Math.min(c,w)}for(x(o,i,{vals:[c,p],containerStr:"",cLetter:"c"}),d=0;d<s;d++){var f=r[d];l.xMax=Math.max(l.xMax,f),l.xMin=Math.min(l.xMin,f);var A=y[d];l.yMax=Math.max(l.yMax,A),l.yMin=Math.min(l.yMin,A);var M=h[d];l.zMax=Math.max(l.zMax,M),l.zMin=Math.min(l.zMin,M)}i._slen=s,i._normMax=p,i._xbnds=[l.xMin,l.xMax],i._ybnds=[l.yMin,l.yMax],i._zbnds=[l.zMin,l.zMax]},filter:e,processGrid:T}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_streamtube3d,x=v.createTubeMesh,T=_("../../lib"),b=_("../../lib/gl_format_color").parseColorScale,e=_("../../components/colorscale").extractOpts,o=_("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function l(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var r=l.prototype;function y(d){var p=d.length;return p>2?d.slice(1,p-1):2===p?[(d[0]+d[1])/2]:d}function h(d){var p=d.length;return 1===p?[.5,.5]:[d[1]-d[0],d[p-1]-d[p-2]]}function s(d,p){var c=d.fullSceneLayout,g=d.dataScale,m=p._len,u={};function w(j,q){var W=c[q],ae=g[i[q]];return T.simpleMap(j,function(G){return W.d2l(G)*ae})}if(u.vectors=o(w(p._u,"xaxis"),w(p._v,"yaxis"),w(p._w,"zaxis"),m),!m)return{positions:[],cells:[]};var f=w(p._Xs,"xaxis"),A=w(p._Ys,"yaxis"),M=w(p._Zs,"zaxis");if(u.meshgrid=[f,A,M],u.gridFill=p._gridFill,p._slen)u.startingPositions=o(w(p._startsX,"xaxis"),w(p._startsY,"yaxis"),w(p._startsZ,"zaxis"));else{for(var k=A[0],E=y(f),P=y(M),D=new Array(E.length*P.length),F=0,R=0;R<E.length;R++)for(var L=0;L<P.length;L++)D[F++]=[E[R],k,P[L]];u.startingPositions=D}u.colormap=b(p),u.tubeSize=p.sizeref,u.maxLength=p.maxdisplayed;var I=w(p._xbnds,"xaxis"),B=w(p._ybnds,"yaxis"),V=w(p._zbnds,"zaxis"),Z=h(f),Y=h(A),Q=h(M),$=v(u,[[I[0]-Z[0],B[0]-Y[0],V[0]-Q[0]],[I[1]+Z[1],B[1]+Y[1],V[1]+Q[1]]]),J=e(p);$.vertexIntensityBounds=[J.min/p._normMax,J.max/p._normMax];var ie=p.lightposition;return $.lightPosition=[ie.x,ie.y,ie.z],$.ambient=p.lighting.ambient,$.diffuse=p.lighting.diffuse,$.specular=p.lighting.specular,$.roughness=p.lighting.roughness,$.fresnel=p.lighting.fresnel,$.opacity=p.opacity,p._pad=$.tubeScale*p.sizeref*2,$}r.handlePick=function(d){var p=this.scene.fullSceneLayout,c=this.scene.dataScale;function g(w,f){var M=c[i[f]];return p[f].l2c(w)/M}if(d.object===this.mesh){var m=d.data.position,u=d.data.velocity;return d.traceCoordinate=[g(m[0],"xaxis"),g(m[1],"yaxis"),g(m[2],"zaxis"),g(u[0],"xaxis"),g(u[1],"yaxis"),g(u[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}},r.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(d,p){var c=d.glplot.gl,g=s(d,p),m=x(c,g),u=new l(d,p.uid);return u.mesh=m,u.data=p,m._trace=u,d.glplot.add(m),u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,i){function l(c,g){return v.coerce(b,e,T,c,g)}var r=l("u"),y=l("v"),h=l("w"),s=l("x"),d=l("y"),p=l("z");r&&r.length&&y&&y.length&&h&&h.length&&s&&s.length&&d&&d.length&&p&&p.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),x(b,e,i,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"streamtube",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:_("./calc").calc,plot:_("./convert"),eventData:function(v,x){return v.tubex=v.x,v.tubey=v.y,v.tubez=v.z,v.tubeu=x.traceCoordinate[3],v.tubev=x.traceCoordinate[4],v.tubew=x.traceCoordinate[5],v.norm=x.traceCoordinate[6],v.divergence=x.traceCoordinate[7],delete v.x,delete v.y,delete v.z,v},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(_,oe,se){"use strict";var v=_("../../plots/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../plots/template_attributes").texttemplateAttrs,b=_("../../components/colorscale/attributes"),e=_("../../plots/domain").attributes,o=_("../pie/attributes"),i=_("./constants"),l=_("../../lib/extend").extendFlat;oe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},o.marker.line.color,{dflt:null}),width:l({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:T({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:l({},v.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:x({},{keys:i.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:l({},o.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(_,oe,se){"use strict";var v=_("../../plots/plots");se.name="sunburst",se.plot=function(x,T,b,e){v.plotBasePlot(se.name,x,T,b,e)},se.clean=function(x,T,b,e){v.cleanBasePlot(se.name,x,T,b,e)}},{"../../plots/plots":619}],1051:[function(_,oe,se){"use strict";var v=_("d3-hierarchy"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../components/colorscale").makeColorScaleFuncFromTrace,e=_("../pie/calc").makePullColorFn,o=_("../pie/calc").generateExtendedColors,i=_("../../components/colorscale").calc,l=_("../../constants/numerical").ALMOST_EQUAL,r={},y={},h={};se.calc=function(s,d){var p,c,g,m,u,w,f=s._fullLayout,A=d.ids,M=T.isArrayOrTypedArray(A),k=d.labels,E=d.parents,P=d.values,D=T.isArrayOrTypedArray(P),F=[],R={},L={},I=function(te){return te||"number"==typeof te},B=function(te){return!D||x(P[te])&&P[te]>=0};M?(p=Math.min(A.length,E.length),c=function(te){return I(A[te])&&B(te)},g=function(te){return String(A[te])}):(p=Math.min(k.length,E.length),c=function(te){return I(k[te])&&B(te)},g=function(te){return String(k[te])}),D&&(p=Math.min(p,P.length));for(var V=0;V<p;V++)if(c(V)){var Z=g(V),Y=I(E[V])?String(E[V]):"",Q={i:V,id:Z,pid:Y,label:I(k[V])?String(k[V]):""};D&&(Q.v=+P[V]),F.push(Q),u=Z,R[m=Y]?R[m].push(u):R[m]=[u],L[u]=1}if(R[""]){if(R[""].length>1){for(var re=T.randstr(),$=0;$<F.length;$++)""===F[$].pid&&(F[$].pid=re);F.unshift({hasMultipleRoots:!0,id:re,pid:"",label:""})}}else{var J,ie=[];for(J in R)L[J]||ie.push(J);if(1!==ie.length)return T.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",ie.join(", ")].join(" "));F.unshift({hasImpliedRoot:!0,id:J=ie[0],pid:"",label:J})}try{w=v.stratify().id(function(te){return te.id}).parentId(function(te){return te.pid})(F)}catch(te){return T.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",te.message].join(" "))}var j=v.hierarchy(w),q=!1;if(D)switch(d.branchvalues){case"remainder":j.sum(function(te){return te.data.v});break;case"total":j.each(function(te){var le=te.data.data,ue=le.v;if(te.children){var de=te.children.reduce(function(he,be){return he+be.data.data.v},0);if((le.hasImpliedRoot||le.hasMultipleRoots)&&(ue=de),ue<de*l)return q=!0,T.warn(["Total value for node",te.data.data.id,"of",d.name,"is smaller than the sum of its children.","\nparent value =",ue,"\nchildren sum =",de].join(" "))}te.value=ue})}else!function te(le,ue,de){var he=0,be=le.children;if(be){for(var me=be.length,_e=0;_e<me;_e++)he+=te(be[_e],ue,de);de.branches&&he++}else de.leaves&&he++;return le.value=le.data.data.value=he,ue._values||(ue._values=[]),ue._values[le.data.data.i]=he,he}(j,d,{branches:-1!==d.count.indexOf("branches"),leaves:-1!==d.count.indexOf("leaves")});if(!q){var W,ae;d.sort&&j.sort(function(te,le){return le.value-te.value});var G=d.marker.colors||[];return d._hasColorscale?(!!G.length||(G=D?d.values:d._values),i(s,d,{vals:G,containerStr:"marker",cLetter:"c"}),ae=b(d.marker)):W=e(f["_"+d.type+"colormap"]),j.each(function(te){var le=te.data.data;le.color=d._hasColorscale?ae(G[le.i]):W(G[le.i],le.id)}),F[0].hierarchy=j,F}},se._runCrossTraceCalc=function(s,d){var p=d._fullLayout,c=d.calcdata,g=p[s+"colorway"],m=p["_"+s+"colormap"];p["extend"+s+"colors"]&&(g=o(g,"icicle"===s?h:"treemap"===s?y:r));var u,w=0;function f(k){var E=k.data.data,P=E.id;!1===E.color&&(m[P]?E.color=m[P]:k.parent?k.parent.parent?E.color=k.parent.data.data.color:(m[P]=E.color=g[w%g.length],w++):E.color=u)}for(var A=0;A<c.length;A++){var M=c[A][0];M.trace.type===s&&M.hierarchy&&(u=M.trace.root.color,M.hierarchy.each(f))}},se.crossTraceCalc=function(s){return se._runCrossTraceCalc("sunburst",s)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(_,oe,se){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../bar/defaults").handleText,e=_("../../components/colorscale"),o=e.hasColorscale,i=e.handleDefaults;oe.exports=function(l,r,y,h){function s(u,w){return v.coerce(l,r,x,u,w)}var d=s("labels"),p=s("parents");if(d&&d.length&&p&&p.length){var c=s("values");s(c&&c.length?"branchvalues":"count"),s("level"),s("maxdepth"),s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor),s("marker.colors");var g=r._hasColorscale=o(l,"marker","colors")||(l.marker||{}).coloraxis;g&&i(l,r,h,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",g?1:.7);var m=s("text");s("texttemplate"),r.texttemplate||s("textinfo",Array.isArray(m)?"text+label":"label"),s("hovertext"),s("hovertemplate"),b(l,r,h,s,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("insidetextorientation"),s("sort"),s("rotation"),s("root.color"),T(r,h,s),r._length=null}else r.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../registry"),T=_("../../components/fx/helpers").appendArrayPointValue,b=_("../../components/fx"),e=_("../../lib"),o=_("../../lib/events"),i=_("./helpers"),l=_("../pie/helpers").formatPieValue;function r(y,h,s){for(var d=y.data.data,p={curveNumber:h.index,pointNumber:d.i,data:h._input,fullData:h},c=0;c<s.length;c++){var g=s[c];g in y&&(p[g]=y[g])}return"parentString"in y&&!i.isHierarchyRoot(y)&&(p.parent=y.parentString),T(p,h,d.i),p}oe.exports=function(y,h,s,d,p){var c=d[0],g=c.trace,m=c.hierarchy,u="sunburst"===g.type,w="treemap"===g.type||"icicle"===g.type;"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1),y.on("mouseover",function(f){var A=s._fullLayout;if(!s._dragging&&!1!==A.hovermode){var M,k=s._fullData[g.index],E=f.data.data,P=E.i,D=i.isHierarchyRoot(f),F=i.getParent(m,f),R=i.getValue(f),L=function(ee){return e.castOption(k,P,ee)},I=L("hovertemplate"),B=b.castHoverinfo(k,A,P),V=A.separators;if(I||B&&"none"!==B&&"skip"!==B){var Z,Y;u&&(Z=c.cx+f.pxmid[0]*(1-f.rInscribed),Y=c.cy+f.pxmid[1]*(1-f.rInscribed)),w&&(Z=f._hoverX,Y=f._hoverY);var Q,re={},$=[],J=[],ie=function(ee){return-1!==$.indexOf(ee)};B&&($="all"===B?k._module.attributes.hoverinfo.flags:B.split("+")),re.label=E.label,ie("label")&&re.label&&J.push(re.label),E.hasOwnProperty("v")&&(re.value=E.v,re.valueLabel=l(re.value,V),ie("value")&&J.push(re.valueLabel)),re.currentPath=f.currentPath=i.getPath(f.data),ie("current path")&&!D&&J.push(re.currentPath);var j=[],q=function(){-1===j.indexOf(Q)&&(J.push(Q),j.push(Q))};re.percentParent=f.percentParent=R/i.getValue(F),re.parent=f.parentString=i.getPtLabel(F),ie("percent parent")&&(Q=i.formatPercent(re.percentParent,V)+" of "+re.parent,q()),re.percentEntry=f.percentEntry=R/i.getValue(h),re.entry=f.entry=i.getPtLabel(h),!ie("percent entry")||D||f.onPathbar||(Q=i.formatPercent(re.percentEntry,V)+" of "+re.entry,q()),re.percentRoot=f.percentRoot=R/i.getValue(m),re.root=f.root=i.getPtLabel(m),ie("percent root")&&!D&&(Q=i.formatPercent(re.percentRoot,V)+" of "+re.root,q()),re.text=L("hovertext")||L("text"),ie("text")&&e.isValidTextValue(Q=re.text)&&J.push(Q),M=[r(f,k,p.eventDataKeys)];var W={trace:k,y:Y,_x0:f._x0,_x1:f._x1,_y0:f._y0,_y1:f._y1,text:J.join("<br>"),name:I||ie("name")?k.name:void 0,color:L("hoverlabel.bgcolor")||E.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:I,hovertemplateLabels:re,eventData:M};u&&(W.x0=Z-f.rInscribed*f.rpx1,W.x1=Z+f.rInscribed*f.rpx1,W.idealAlign=f.pxmid[0]<0?"left":"right"),w&&(W.x=Z,W.idealAlign=Z<0?"left":"right");var ae=[];b.loneHover(W,{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:s,inOut_bbox:ae}),M[0].bbox=ae[0],g._hasHoverLabel=!0}if(w){var G=y.select("path.surface");p.styleOne(G,f,k,{hovered:!0})}g._hasHoverEvent=!0,s.emit("plotly_hover",{points:M||[r(f,k,p.eventDataKeys)],event:v.event})}}),y.on("mouseout",function(f){var A=s._fullLayout,M=s._fullData[g.index],k=v.select(this).datum();if(g._hasHoverEvent&&(f.originalEvent=v.event,s.emit("plotly_unhover",{points:[r(k,M,p.eventDataKeys)],event:v.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(b.loneUnhover(A._hoverlayer.node()),g._hasHoverLabel=!1),w){var E=y.select("path.surface");p.styleOne(E,k,M,{hovered:!1})}}),y.on("click",function(f){var A=s._fullLayout,M=s._fullData[g.index],k=u&&(i.isHierarchyRoot(f)||i.isLeaf(f)),E=i.getPtId(f),P=i.isEntry(f)?i.findEntryWithChild(m,E):i.findEntryWithLevel(m,E),D=i.getPtId(P),F={points:[r(f,M,p.eventDataKeys)],event:v.event};k||(F.nextLevel=D);var R=o.triggerHandler(s,"plotly_"+g.type+"click",F);if(!1!==R&&A.hovermode&&(s._hoverdata=[r(f,M,p.eventDataKeys)],b.click(s,v.event)),!k&&!1!==R&&!s._dragging&&!s._transitioning){x.call("_storeDirectGUIEdit",M,A._tracePreGUI[M.uid],{level:M.level});var L={data:[{level:D}],traces:[g.index]},I={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0};b.loneUnhover(A._hoverlayer.node()),x.call("animate",s,L,I)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../../lib/setcursor"),b=_("../pie/helpers");function e(o){return o.data.data.pid}se.findEntryWithLevel=function(o,i){var l;return i&&o.eachAfter(function(r){if(se.getPtId(r)===i)return l=r.copy()}),l||o},se.findEntryWithChild=function(o,i){var l;return o.eachAfter(function(r){for(var y=r.children||[],h=0;h<y.length;h++)if(se.getPtId(y[h])===i)return l=r.copy()}),l||o},se.isEntry=function(o){return!o.parent},se.isLeaf=function(o){return!o.children},se.getPtId=function(o){return o.data.data.id},se.getPtLabel=function(o){return o.data.data.label},se.getValue=function(o){return o.value},se.isHierarchyRoot=function(o){return""===e(o)},se.setSliceCursor=function(o,i,l){var r=l.isTransitioning;if(!r){var y=o.datum();r=l.hideOnRoot&&se.isHierarchyRoot(y)||l.hideOnLeaves&&se.isLeaf(y)}T(o,r?null:"pointer")},se.getInsideTextFontKey=function(o,i,l,r,y){var s=l.data.data.i;return v.castOption(i,s,((y||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+o)||v.castOption(i,s,"textfont."+o)||r.size},se.getOutsideTextFontKey=function(o,i,l,r){var y=l.data.data.i;return v.castOption(i,y,"outsidetextfont."+o)||v.castOption(i,y,"textfont."+o)||r.size},se.isOutsideText=function(o,i){return!o._hasColorscale&&se.isHierarchyRoot(i)},se.determineTextFont=function(o,i,l,r){return se.isOutsideText(o,i)?{color:se.getOutsideTextFontKey("color",y=o,h=i,s=l),family:se.getOutsideTextFontKey("family",y,h,s),size:se.getOutsideTextFontKey("size",y,h,s)}:function(y,h,s,d){var c=h.data.data,g=c.i,m=v.castOption(y,g,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!m&&y._input.textfont&&(m=v.castOption(y._input,g,"textfont.color")),{color:m||x.contrast(c.color),family:se.getInsideTextFontKey("family",y,h,s,d),size:se.getInsideTextFontKey("size",y,h,s,d)}}(o,i,l,r);var y,h,s},se.hasTransition=function(o){return!!(o&&o.duration>0)},se.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},se.isHeader=function(o,i){return!(se.isLeaf(o)||o.depth===i._maxDepth-1)},se.getParent=function(o,i){return se.findEntryWithLevel(o,e(i))},se.listPath=function(o,i){var l=o.parent;if(!l)return[];var r=i?[l.data[i]]:[l];return se.listPath(l,i).concat(r)},se.getPath=function(o){return se.listPath(o,"label").join("/")+"/"},se.formatValue=b.formatPieValue,se.formatPercent=function(o,i){var l=v.formatPercent(o,0);return"0%"===l&&(l=b.formatPiePercent(o,i)),l}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"sunburst",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(_,oe,se){"use strict";oe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,i){return v.coerce(T,b,x,o,i)}e("sunburstcolorway",b.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-hierarchy"),T=_("d3-interpolate").interpolate,b=_("../../components/drawing"),e=_("../../lib"),o=_("../../lib/svg_text_utils"),i=_("../bar/uniform_text"),l=i.recordMinTextSize,r=i.clearMinTextSize,y=_("../pie/plot"),h=_("../pie/helpers").getRotationAngle,s=y.computeTransform,d=y.transformInsideText,p=_("./style").styleOne,c=_("../bar/style").resizeText,g=_("./fx"),m=_("./constants"),u=_("./helpers");function w(A,M,k,E){var P=A._fullLayout,D=!P.uniformtext.mode&&u.hasTransition(E),F=v.select(k).selectAll("g.slice"),R=M[0],L=R.trace,B=u.findEntryWithLevel(R.hierarchy,L.level),V=u.getMaxDepth(L),Z=P._size,Y=L.domain,re=Z.h*(Y.y[1]-Y.y[0]),$=.5*Math.min(Z.w*(Y.x[1]-Y.x[0]),re),J=R.cx=Z.l+Z.w*(Y.x[1]+Y.x[0])/2,ie=R.cy=Z.t+Z.h*(1-Y.y[0])-re/2;if(!B)return F.remove();var j=null,q={};D&&F.each(function(Fe){q[u.getPtId(Fe)]={rpx0:Fe.rpx0,rpx1:Fe.rpx1,x0:Fe.x0,x1:Fe.x1,transform:Fe.transform},!j&&u.isEntry(Fe)&&(j=Fe)});var Fe,W=(Fe=B,x.partition().size([2*Math.PI,Fe.height+1])(Fe)).descendants(),ae=B.height+1,G=0,ee=V;R.hasMultipleRoots&&u.isHierarchyRoot(B)&&(W=W.slice(1),ae-=1,G=1,ee+=1),W=W.filter(function(Fe){return Fe.y1<=ee});var te=h(L.rotation);te&&W.forEach(function(Fe){Fe.x0+=te,Fe.x1+=te});var le=Math.min(ae,V),ue=function(Fe){return(Fe-G)/le*$},de=function(Fe,ve){return[Fe*Math.cos(ve),-Fe*Math.sin(ve)]},he=function(Fe){return e.pathAnnulus(Fe.rpx0,Fe.rpx1,Fe.x0,Fe.x1,J,ie)},be=function(Fe){return J+f(Fe)[0]*(Fe.transform.rCenter||0)+(Fe.transform.x||0)},me=function(Fe){return ie+f(Fe)[1]*(Fe.transform.rCenter||0)+(Fe.transform.y||0)};(F=F.data(W,u.getPtId)).enter().append("g").classed("slice",!0),D?F.exit().transition().each(function(){var Fe=v.select(this);Fe.select("path.surface").transition().attrTween("d",function(ve){var Te=function(Ie){var Ce,Re=u.getPtId(Ie),Ue=q[Re],qe=q[u.getPtId(B)];if(qe){var Xe=(Ie.x1>qe.x1?2*Math.PI:0)+te;Ce=Ie.rpx1<qe.rpx1?{x0:Ie.x0,x1:Ie.x1,rpx0:0,rpx1:0}:{x0:Xe,x1:Xe,rpx0:Ie.rpx0,rpx1:Ie.rpx1}}else{var st,He=u.getPtId(Ie.parent);F.each(function(bt){if(u.getPtId(bt)===He)return st=bt});var $e,et=st.children;et.forEach(function(bt,At){if(u.getPtId(bt)===Re)return $e=At});var tt=et.length,ct=T(st.x0,st.x1);Ce={rpx0:$,rpx1:$,x0:ct($e/tt),x1:ct(($e+1)/tt)}}return T(Ue,Ce)}(ve);return function(Ie){return he(Te(Ie))}}),Fe.select("g.slicetext").attr("opacity",0)}).remove():F.exit().remove(),F.order();var _e=null;if(D&&j){var Ee=u.getPtId(j);F.each(function(Fe){null===_e&&u.getPtId(Fe)===Ee&&(_e=Fe.x1)})}var De=F;function Se(Fe){var ve=Fe.parent,Te=q[u.getPtId(ve)],Ie={};if(Te){var Ce=ve.children,Re=Ce.indexOf(Fe),Ue=Ce.length,qe=T(Te.x0,Te.x1);Ie.x0=qe(Re/Ue),Ie.x1=qe(Re/Ue)}else Ie.x0=Ie.x1=0;return Ie}D&&(De=De.transition().each("end",function(){var Fe=v.select(this);u.setSliceCursor(Fe,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),De.each(function(Fe){var Xe,ve=v.select(this),Te=e.ensureSingle(ve,"path","surface",function(Xe){Xe.style("pointer-events","all")});Fe.rpx0=ue(Fe.y0),Fe.rpx1=ue(Fe.y1),Fe.xmid=(Fe.x0+Fe.x1)/2,Fe.pxmid=de(Fe.rpx1,Fe.xmid),Fe.midangle=-(Fe.xmid-Math.PI/2),Fe.startangle=-(Fe.x0-Math.PI/2),Fe.stopangle=-(Fe.x1-Math.PI/2),Fe.halfangle=.5*Math.min(e.angleDelta(Fe.x0,Fe.x1)||Math.PI,Math.PI),Fe.ring=1-Fe.rpx0/Fe.rpx1,Fe.rInscribed=0===(Xe=Fe).rpx0&&e.isFullCircle([Xe.x0,Xe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Xe.halfangle)),Xe.ring/2)),D?Te.transition().attrTween("d",function(Xe){var st=function(He){var $e,et=q[u.getPtId(He)],tt={x0:He.x0,x1:He.x1,rpx0:He.rpx0,rpx1:He.rpx1};if(et)$e=et;else if(j)if(He.parent)if(_e){var ct=(He.x1>_e?2*Math.PI:0)+te;$e={x0:ct,x1:ct}}else e.extendFlat($e={rpx0:$,rpx1:$},Se(He));else $e={rpx0:0,rpx1:0};else $e={x0:te,x1:te};return T($e,tt)}(Xe);return function(He){return he(st(He))}}):Te.attr("d",he),ve.call(g,B,A,M,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:A._transitioning}),Te.call(p,Fe,L);var Ie=e.ensureSingle(ve,"g","slicetext"),Ce=e.ensureSingle(Ie,"text","",function(Xe){Xe.attr("data-notex",1)}),Re=e.ensureUniformFontSize(A,u.determineTextFont(L,Fe,P.font));Ce.text(se.formatSliceLabel(Fe,B,L,M,P)).classed("slicetext",!0).attr("text-anchor","middle").call(b.font,Re).call(o.convertToTspans,A);var Ue=b.bBox(Ce.node());Fe.transform=d(Ue,Fe,R),Fe.transform.targetX=be(Fe),Fe.transform.targetY=me(Fe);var qe=function(Xe,st){var He=Xe.transform;return s(He,st),He.fontSize=Re.size,l(L.type,He,P),e.getTextTransform(He)};D?Ce.transition().attrTween("transform",function(Xe){var st=function(He){var $e,et=q[u.getPtId(He)],tt=He.transform;if(et)$e=et;else if($e={rpx1:He.rpx1,transform:{textPosAngle:tt.textPosAngle,scale:0,rotate:tt.rotate,rCenter:tt.rCenter,x:tt.x,y:tt.y}},j)if(He.parent)if(_e){var ct=He.x1>_e?2*Math.PI:0;$e.x0=$e.x1=ct}else e.extendFlat($e,Se(He));else $e.x0=$e.x1=te;else $e.x0=$e.x1=te;var bt=T($e.transform.textPosAngle,He.transform.textPosAngle),At=T($e.rpx1,He.rpx1),Ut=T($e.x0,He.x0),Ct=T($e.x1,He.x1),dt=T($e.transform.scale,tt.scale),at=T($e.transform.rotate,tt.rotate),Nt=0===tt.rCenter?3:0===$e.transform.rCenter?1/3:1,rn=T($e.transform.rCenter,tt.rCenter);return function(en){var Ge=At(en),Qe=Ut(en),Rt=Ct(en),gt=rn(Math.pow(en,Nt)),Be={pxmid:de(Ge,(Qe+Rt)/2),rpx1:Ge,transform:{textPosAngle:bt(en),rCenter:gt,x:tt.x,y:tt.y}};return l(L.type,tt,P),{transform:{targetX:be(Be),targetY:me(Be),scale:dt(en),rotate:at(en),rCenter:gt}}}}(Xe);return function(He){return qe(st(He),Ue)}}):Ce.attr("transform",qe(Fe,Ue))})}function f(A){return k=A.transform.textPosAngle,[(M=A.rpx1)*Math.sin(k),-M*Math.cos(k)];var M,k}se.plot=function(A,M,k,E){var P,D,F=A._fullLayout,R=F._sunburstlayer,L=!k,I=!F.uniformtext.mode&&u.hasTransition(k);r("sunburst",F),(P=R.selectAll("g.trace.sunburst").data(M,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),P.order(),I?(E&&(D=E()),v.transition().duration(k.duration).ease(k.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()}).each(function(){R.selectAll("g.trace").each(function(B){w(A,B,this,k)})})):(P.each(function(B){w(A,B,this,k)}),F.uniformtext.mode&&c(A,F._sunburstlayer.selectAll(".trace"),"sunburst")),L&&P.exit().remove()},se.formatSliceLabel=function(A,M,k,E,P){var D=k.texttemplate,F=k.textinfo;if(!(D||F&&"none"!==F))return"";var R=P.separators,I=A.data.data,B=E[0].hierarchy,V=u.isHierarchyRoot(A),Z=u.getParent(B,A),Y=u.getValue(A);if(!D){var Q,re=F.split("+"),$=function(te){return-1!==re.indexOf(te)},J=[];if($("label")&&I.label&&J.push(I.label),I.hasOwnProperty("v")&&$("value")&&J.push(u.formatValue(I.v,R)),!V){$("current path")&&J.push(u.getPath(A.data));var ie=0;$("percent parent")&&ie++,$("percent entry")&&ie++,$("percent root")&&ie++;var j=ie>1;if(ie){var q,W=function(te){Q=u.formatPercent(q,R),j&&(Q+=" of "+te),J.push(Q)};$("percent parent")&&!V&&(q=Y/u.getValue(Z),W("parent")),$("percent entry")&&(q=Y/u.getValue(M),W("entry")),$("percent root")&&(q=Y/u.getValue(B),W("root"))}}return $("text")&&(Q=e.castOption(k,I.i,"text"),e.isValidTextValue(Q)&&J.push(Q)),J.join("<br>")}var ae=e.castOption(k,I.i,"texttemplate");if(!ae)return"";var G={};I.label&&(G.label=I.label),I.hasOwnProperty("v")&&(G.value=I.v,G.valueLabel=u.formatValue(I.v,R)),G.currentPath=u.getPath(A.data),V||(G.percentParent=Y/u.getValue(Z),G.percentParentLabel=u.formatPercent(G.percentParent,R),G.parent=u.getPtLabel(Z)),G.percentEntry=Y/u.getValue(M),G.percentEntryLabel=u.formatPercent(G.percentEntry,R),G.entry=u.getPtLabel(M),G.percentRoot=Y/u.getValue(B),G.percentRootLabel=u.formatPercent(G.percentRoot,R),G.root=u.getPtLabel(B),I.hasOwnProperty("color")&&(G.color=I.color);var ee=e.castOption(k,I.i,"text");return(e.isValidTextValue(ee)||""===ee)&&(G.text=ee),G.customdata=e.castOption(k,I.i,"customdata"),e.texttemplateString(ae,G,P._d3locale,G,k._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../bar/uniform_text").resizeText;function e(o,i,l){var r=i.data.data,y=!i.children,h=r.i,s=T.castOption(l,h,"marker.line.color")||x.defaultLine,d=T.castOption(l,h,"marker.line.width")||0;o.style("stroke-width",d).call(x.fill,r.color).call(x.stroke,s).style("opacity",y?l.leaf.opacity:null)}oe.exports={style:function(o){var i=o._fullLayout._sunburstlayer.selectAll(".trace");b(o,i,"sunburst"),i.each(function(l){var r=v.select(this),y=l[0].trace;r.style("opacity",y.opacity),r.selectAll("path.surface").each(function(h){v.select(this).call(e,h,y)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(_,oe,se){"use strict";var v=_("../../components/color"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,i=_("../../plot_api/edit_types").overrideAll;function l(y){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:v.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:v.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var r=oe.exports=i(o({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},x("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:o({},x.zauto,{}),zmin:o({},x.zmin,{}),zmax:o({},x.zmax,{})},hoverinfo:o({},e.hoverinfo),showlegend:o({},e.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/calc");oe.exports=function(x,T){v(x,T,T.surfacecolor?{vals:T.surfacecolor,containerStr:"",cLetter:"c"}:{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_surface3d,x=_("../../../stackgl_modules").ndarray,T=_("../../../stackgl_modules").ndarray_linear_interpolate.d2,b=_("../heatmap/interp2d"),e=_("../heatmap/find_empties"),o=_("../../lib").isArrayOrTypedArray,i=_("../../lib/gl_format_color").parseColorScale,l=_("../../lib/str2rgbarray"),r=_("../../components/colorscale").extractOpts;function y(k,E,P){this.scene=k,this.uid=P,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var h=y.prototype;h.getXat=function(k,E,P,D){var F=o(this.data.x)?o(this.data.x[0])?this.data.x[E][k]:this.data.x[k]:k;return void 0===P?F:D.d2l(F,0,P)},h.getYat=function(k,E,P,D){var F=o(this.data.y)?o(this.data.y[0])?this.data.y[E][k]:this.data.y[E]:E;return void 0===P?F:D.d2l(F,0,P)},h.getZat=function(k,E,P,D){var F=this.data.z[E][k];return null===F&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[E][k]),void 0===P?F:D.d2l(F,0,P)},h.handlePick=function(k){if(k.object===this.surface){var P=(k.data.index[1]-1)/this.dataScaleY-1,D=Math.max(Math.min(Math.round((k.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),F=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);k.index=[D,F],k.traceCoordinate=[this.getXat(D,F),this.getYat(D,F),this.getZat(D,F)],k.dataCoordinate=[this.getXat(D,F,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(D,F,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(D,F,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var R=0;R<3;R++)null!=k.dataCoordinate[R]&&(k.dataCoordinate[R]*=this.scene.dataScale[R]);var I=this.data.hovertext||this.data.text;return k.textLabel=Array.isArray(I)&&I[F]&&void 0!==I[F][D]?I[F][D]:I||"",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(k,E){if(k<E)return 0;for(var P=0;0===Math.floor(k%E);)k/=E,P++;return P}function p(k){for(var E=[],P=0;P<s.length;P++)E.push(d(k,s[P]));return E}function c(k){for(var E=p(k),P=k,D=0;D<s.length;D++)if(E[D]>0){P=s[D];break}return P}function g(k,E){if(!(k<1||E<1)){for(var P=p(k),D=p(E),F=1,R=0;R<s.length;R++)F*=Math.pow(s[R],Math.max(P[R],D[R]));return F}}h.calcXnums=function(k){var E,P=[];for(E=1;E<k;E++){var D=this.getXat(E-1,0),F=this.getXat(E,0);P[E-1]=F!==D&&null!=D&&null!=F?Math.abs(F-D):0}var R=0;for(E=1;E<k;E++)R+=P[E-1];for(E=1;E<k;E++)P[E-1]=0===P[E-1]?1:Math.round(R/P[E-1]);return P},h.calcYnums=function(k){var E,P=[];for(E=1;E<k;E++){var D=this.getYat(0,E-1),F=this.getYat(0,E);P[E-1]=F!==D&&null!=D&&null!=F?Math.abs(F-D):0}var R=0;for(E=1;E<k;E++)R+=P[E-1];for(E=1;E<k;E++)P[E-1]=0===P[E-1]?1:Math.round(R/P[E-1]);return P};var m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=m[9],w=m[13];function f(k,E,P){var D=P[8]+P[2]*E[0]+P[5]*E[1];return k[0]=(P[6]+P[0]*E[0]+P[3]*E[1])/D,k[1]=(P[7]+P[1]*E[0]+P[4]*E[1])/D,k}function A(k,E,P){return function(D,F,R,L){for(var I=[0,0],B=D.shape[0],V=D.shape[1],Z=0;Z<B;Z++)for(var Y=0;Y<V;Y++)R(I,[Z,Y],L),D.set(Z,Y,T(F,I[0],I[1]))}(k,E,f,P),k}function M(k,E){for(var P=!1,D=0;D<k.length;D++)if(E===k[D]){P=!0;break}!1===P&&k.push(E)}h.estimateScale=function(k,E){for(var P=1+function(F){if(0!==F.length){for(var R=1,L=0;L<F.length;L++)R=g(R,F[L]);return R}}(0===E?this.calcXnums(k):this.calcYnums(k));P<u;)P*=2;for(;P>w;)P--,P/=c(P),++P<u&&(P=w);var D=Math.round(P/k);return D>1?D:1},h.refineCoords=function(k){for(var E=this.dataScaleX,P=this.dataScaleY,D=k[0].shape[0],F=k[0].shape[1],R=0|Math.floor(k[0].shape[0]*E+1),L=0|Math.floor(k[0].shape[1]*P+1),I=1+D+1,B=1+F+1,V=x(new Float32Array(I*B),[I,B]),Z=[1/E,0,0,0,1/P,0,0,0,1],Y=0;Y<k.length;++Y){this.surface.padField(V,k[Y]);var Q=x(new Float32Array(R*L),[R,L]);A(Q,V,Z),k[Y]=Q}},h.setContourLevels=function(){var k,E,D=[[],[],[]],F=[!1,!1,!1],R=!1;for(k=0;k<3;++k)if(this.showContour[k]&&(R=!0,this.contourSize[k]>0&&null!==this.contourStart[k]&&null!==this.contourEnd[k]&&this.contourEnd[k]>this.contourStart[k]))for(F[k]=!0,E=this.contourStart[k];E<this.contourEnd[k];E+=this.contourSize[k])M(D[k],E*this.scene.dataScale[k]);if(R){var L=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(L[k]=F[k]?D[k]:this.scene.contourLevels[k]);this.surface.update({levels:L})}},h.update=function(k){var E,P,D,F,R=this.scene,L=R.fullSceneLayout,I=this.surface,B=i(k),V=R.dataScale,Z=k.z[0].length,Y=k._ylength,Q=R.contourLevels;this.data=k;var re=[];for(E=0;E<3;E++)for(re[E]=[],P=0;P<Z;P++)re[E][P]=[];for(P=0;P<Z;P++)for(D=0;D<Y;D++)re[0][P][D]=this.getXat(P,D,k.xcalendar,L.xaxis),re[1][P][D]=this.getYat(P,D,k.ycalendar,L.yaxis),re[2][P][D]=this.getZat(P,D,k.zcalendar,L.zaxis);if(k.connectgaps)for(k._emptypoints=e(re[2]),b(re[2],k._emptypoints),k._interpolatedZ=[],P=0;P<Z;P++)for(k._interpolatedZ[P]=[],D=0;D<Y;D++)k._interpolatedZ[P][D]=re[2][P][D];for(E=0;E<3;E++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)null==(F=re[E][P][D])?re[E][P][D]=NaN:F=re[E][P][D]*=V[E];for(E=0;E<3;E++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)null!=(F=re[E][P][D])&&(this.minValues[E]>F&&(this.minValues[E]=F),this.maxValues[E]<F&&(this.maxValues[E]=F));for(E=0;E<3;E++)this.objectOffset[E]=.5*(this.minValues[E]+this.maxValues[E]);for(E=0;E<3;E++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)null!=(F=re[E][P][D])&&(re[E][P][D]-=this.objectOffset[E]);var $=[x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y])];for(E=0;E<3;E++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)$[E].set(P,D,re[E][P][D]);re=[];var J={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},ie=r(k);if(J.intensityBounds=[ie.min,ie.max],k.surfacecolor){var j=x(new Float32Array(Z*Y),[Z,Y]);for(P=0;P<Z;P++)for(D=0;D<Y;D++)j.set(P,D,k.surfacecolor[D][P]);$.push(j)}else J.intensityBounds[0]*=V[2],J.intensityBounds[1]*=V[2];(w<$[0].shape[0]||w<$[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale($[0].shape[0],0),this.dataScaleY=this.estimateScale($[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords($)),k.surfacecolor&&(J.intensity=$.pop());var G,ee,te,q=[!0,!0,!0],W=["x","y","z"];for(E=0;E<3;++E){var ae=k.contours[W[E]];q[E]=ae.highlight,J.showContour[E]=ae.show||ae.highlight,J.showContour[E]&&(J.contourProject[E]=[ae.project.x,ae.project.y,ae.project.z],ae.show?(this.showContour[E]=!0,J.levels[E]=Q[E],I.highlightColor[E]=J.contourColor[E]=l(ae.color),I.highlightTint[E]=J.contourTint[E]=ae.usecolormap?0:1,J.contourWidth[E]=ae.width,this.contourStart[E]=ae.start,this.contourEnd[E]=ae.end,this.contourSize[E]=ae.size):(this.showContour[E]=!1,this.contourStart[E]=null,this.contourEnd[E]=null,this.contourSize[E]=0),ae.highlight&&(J.dynamicColor[E]=l(ae.highlightcolor),J.dynamicWidth[E]=ae.highlightwidth))}(ee=(G=B)[0].rgb)[0]===(te=G[G.length-1].rgb)[0]&&ee[1]===te[1]&&ee[2]===te[2]&&ee[3]===te[3]&&(J.vertexColor=!0),J.objectOffset=this.objectOffset,J.coords=$,I.update(J),I.visible=k.visible,I.enableDynamic=q,I.enableHighlight=q,I.snapToData=!0,"lighting"in k&&(I.ambientLight=k.lighting.ambient,I.diffuseLight=k.lighting.diffuse,I.specularLight=k.lighting.specular,I.roughness=k.lighting.roughness,I.fresnel=k.lighting.fresnel),"lightposition"in k&&(I.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},h.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},oe.exports=function(k,E){var D=v({gl:k.glplot.gl}),F=new y(k,D,E.uid);return D._trace=F,F.update(E),k.glplot.add(D),F}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(_,oe,se){"use strict";var v=_("../../registry"),x=_("../../lib"),T=_("../../components/colorscale/defaults"),b=_("./attributes");function e(i,l,r,y){var h=y("opacityscale");"max"===h?l.opacityscale=[[0,.1],[1,1]]:"min"===h?l.opacityscale=[[0,1],[1,.1]]:"extremes"===h?l.opacityscale=function(s,d){for(var p=[],c=0;c<32;c++){var g=c/31,m=.1+.9*(1-Math.pow(Math.sin(1*g*Math.PI),2));p.push([g,Math.max(0,Math.min(1,m))])}return p}():function(s){var d=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||0!=+s[0][0]||1!=+s[s.length-1][0])return!1;for(var p=0;p<s.length;p++){var c=s[p];if(2!==c.length||+c[0]<d)return!1;d=+c[0]}return!0}(h)||(l.opacityscale=void 0)}function o(i,l,r){l in i&&!(r in i)&&(i[r]=i[l])}oe.exports={supplyDefaults:function(i,l,r,y){var h,s;function d(M,k){return x.coerce(i,l,b,M,k)}var p=d("x"),c=d("y"),g=d("z");if(!g||!g.length||p&&p.length<1||c&&c.length<1)l.visible=!1;else{l._xlength=Array.isArray(p)&&x.isArrayOrTypedArray(p[0])?g.length:g[0].length,l._ylength=g.length,v.getComponentMethod("calendars","handleTraceDefaults")(i,l,["x","y","z"],y),d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(M){d(M)});var m=d("surfacecolor"),u=["x","y","z"];for(h=0;h<3;++h){var w="contours."+u[h],f=d(w+".show"),A=d(w+".highlight");if(f||A)for(s=0;s<3;++s)d(w+".project."+u[s]);f&&(d(w+".color"),d(w+".width"),d(w+".usecolormap")),A&&(d(w+".highlightcolor"),d(w+".highlightwidth")),d(w+".start"),d(w+".end"),d(w+".size")}m||(o(i,"zmin","cmin"),o(i,"zmax","cmax"),o(i,"zauto","cauto")),T(i,l,y,d,{prefix:"",cLetter:"c"}),e(0,l,0,d),l._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:_("./calc"),plot:_("./convert"),moduleType:"trace",name:"surface",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(_,oe,se){"use strict";var v=_("../../components/annotations/attributes"),x=_("../../lib/extend").extendFlat,T=_("../../plot_api/edit_types").overrideAll,b=_("../../plots/font_attributes"),e=_("../../plots/domain").attributes,o=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(oe.exports=T({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:x({},v.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},b({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:x({},v.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},b({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(_,oe,se){"use strict";var v=_("../../plots/get_data").getModuleCalcData,x=_("./plot");se.name="table",se.plot=function(T){var b=v(T.calcdata,"table")[0];b.length&&x(T,b)},se.clean=function(T,b,e,o){var i=o._has&&o._has("table"),l=b._has&&b._has("table");i&&!l&&o._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(_,oe,se){"use strict";var v=_("../../lib/gup").wrap;oe.exports=function(){return v({})}},{"../../lib/gup":500}],1069:[function(_,oe,se){"use strict";oe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(_,oe,se){"use strict";var v=_("./constants"),x=_("../../lib/extend").extendFlat,T=_("fast-isnumeric");function b(h){if(Array.isArray(h)){for(var s=0,d=0;d<h.length;d++)s=Math.max(s,b(h[d]));return s}return h}function e(h,s){return h+s}function o(h){var s,d=h.slice(),p=1/0,c=0;for(s=0;s<d.length;s++)Array.isArray(d[s])||(d[s]=[d[s]]),p=Math.min(p,d[s].length),c=Math.max(c,d[s].length);if(p!==c)for(s=0;s<d.length;s++){var g=c-d[s].length;g&&(d[s]=d[s].concat(i(g)))}return d}function i(h){for(var s=new Array(h),d=0;d<h;d++)s[d]="";return s}function l(h){return h.calcdata.columns.reduce(function(s,d){return d.xIndex<h.xIndex?s+d.columnWidth:s},0)}function r(h,s){return Object.keys(h).map(function(d){return x({},h[d],{auxiliaryBlocks:s})})}function y(h,s){for(var d,p={},c=0,g=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},u=0,w=0,f=0;f<h.length;f++)m.rows.push({rowIndex:f,rowHeight:d=h[f]}),((g+=d)>=s||f===h.length-1)&&(p[c]=m,m.key=w++,m.firstRowIndex=u,m.lastRowIndex=f,m={firstRowIndex:null,lastRowIndex:null,rows:[]},c+=g,u=f+1,g=0);return p}oe.exports=function(h,s){var d=o(s.cells.values),p=function(V){return V.slice(s.header.values.length,V.length)},c=o(s.header.values);c.length&&!c[0].length&&(c[0]=[""],c=o(c));var g=c.concat(p(d).map(function(){return i((c[0]||[""]).length)})),m=s.domain,u=Math.floor(h._fullLayout._size.w*(m.x[1]-m.x[0])),w=Math.floor(h._fullLayout._size.h*(m.y[1]-m.y[0])),f=s.header.values.length?g[0].map(function(){return s.header.height}):[v.emptyHeaderHeight],A=d.length?d[0].map(function(){return s.cells.height}):[],M=f.reduce(e,0),k=y(A,w-M+v.uplift),E=r(y(f,M),[]),P=r(k,E),D={},F=s._fullInput.columnorder.concat(p(d.map(function(V,Z){return Z}))),R=g.map(function(V,Z){var Y=Array.isArray(s.columnwidth)?s.columnwidth[Math.min(Z,s.columnwidth.length-1)]:s.columnwidth;return T(Y)?Number(Y):1}),L=R.reduce(e,0);R=R.map(function(V){return V/L*u});var I=Math.max(b(s.header.line.width),b(s.cells.line.width)),B={key:s.uid+h._context.staticPlot,translateX:m.x[0]*h._fullLayout._size.w,translateY:h._fullLayout._size.h*(1-m.y[1]),size:h._fullLayout._size,width:u,maxLineWidth:I,height:w,columnOrder:F,groupHeight:w,rowBlocks:P,headerRowBlocks:E,scrollY:0,cells:x({},s.cells,{values:d}),headerCells:x({},s.header,{values:g}),gdColumns:g.map(function(V){return V[0]}),gdColumnsOriginalOrder:g.map(function(V){return V[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(V,Z){return D[V]=(D[V]||0)+1,{key:V+"__"+D[V],label:V,specIndex:Z,xIndex:F[Z],xScale:l,x:void 0,calcdata:void 0,columnWidth:R[Z]}})};return B.columns.forEach(function(V){V.calcdata=B,V.x=l(V)}),B}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(_,oe,se){"use strict";var v=_("../../lib/extend").extendFlat;se.splitToPanels=function(x){var T=[0,0],b=v({},x,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:x.calcdata.headerCells.values[x.specIndex],rowBlocks:x.calcdata.headerRowBlocks,calcdata:v({},x.calcdata,{cells:x.calcdata.headerCells})});return[v({},x,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),v({},x,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),b]},se.splitToCells=function(x){var b,e,o,T=[o=(e=(b=x).rowBlocks[b.page])?e.rows[0].rowIndex:0,e?o+e.rows.length:0];return(x.values||[]).slice(T[0],T[1]).map(function(b,e){return{keyWithinBlock:e+("string"==typeof b&&b.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:T[0]+e,column:x,calcdata:x.calcdata,page:x.page,rowBlocks:x.rowBlocks,value:b}})}},{"../../lib/extend":493}],1072:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults;oe.exports=function(b,e,o,i){function l(r,y){return v.coerce(b,e,x,r,y)}T(e,i,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),v.coerceFont(l,"header.font",v.extendFlat({},i.font)),function(r,y){for(var s=r.header.values.length,d=(r.columnorder||[]).slice(0,s),p=d.slice().sort(function(m,u){return m-u}),c=d.map(function(m){return p.indexOf(m)}),g=c.length;g<s;g++)c.push(g);y("columnorder",c)}(e,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),v.coerceFont(l,"cells.font",v.extendFlat({},i.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),moduleType:"trace",name:"table",basePlotModule:_("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(_,oe,se){"use strict";var v=_("./constants"),x=_("@plotly/d3"),T=_("../../lib").numberFormat,b=_("../../lib/gup"),e=_("../../components/drawing"),o=_("../../lib/svg_text_utils"),i=_("../../lib").raiseToTop,l=_("../../lib").strTranslate,r=_("../../lib").cancelTransition,y=_("./data_preparation_helper"),h=_("./data_split_helpers"),s=_("../../components/color");function d($){return Math.ceil($.calcdata.maxLineWidth/2)}function p($,J){return"clip"+$._fullLayout._uid+"_scrollAreaBottomClip_"+J.key}function c($,J){return"clip"+$._fullLayout._uid+"_columnBoundaryClippath_"+J.calcdata.key+"_"+J.specIndex}function g($){return[].concat.apply([],$.map(function(J){return J})).map(function(J){return J.__data__})}function m($,J,ie){var j=$.selectAll("."+v.cn.scrollbarKit).data(b.repeat,b.keyFun);j.enter().append("g").classed(v.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),j.each(function(ee){var ue,te=ee.scrollbarState;te.totalHeight=Z(ue=ee.rowBlocks,ue.length-1)+(ue.length?Y(ue[ue.length-1],1/0):1),te.scrollableAreaHeight=ee.groupHeight-P(ee),te.currentlyVisibleHeight=Math.min(te.totalHeight,te.scrollableAreaHeight),te.ratio=te.currentlyVisibleHeight/te.totalHeight,te.barLength=Math.max(te.ratio*te.currentlyVisibleHeight,v.goldenRatio*v.scrollbarWidth),te.barWiggleRoom=te.currentlyVisibleHeight-te.barLength,te.wiggleRoom=Math.max(0,te.totalHeight-te.scrollableAreaHeight),te.topY=0===te.barWiggleRoom?0:ee.scrollY/te.wiggleRoom*te.barWiggleRoom,te.bottomY=te.topY+te.barLength,te.dragMultiplier=te.wiggleRoom/te.barWiggleRoom}).attr("transform",function(ee){return l(ee.width+v.scrollbarWidth/2+v.scrollbarOffset,P(ee))});var q=j.selectAll("."+v.cn.scrollbar).data(b.repeat,b.keyFun);q.enter().append("g").classed(v.cn.scrollbar,!0);var W=q.selectAll("."+v.cn.scrollbarSlider).data(b.repeat,b.keyFun);W.enter().append("g").classed(v.cn.scrollbarSlider,!0),W.attr("transform",function(ee){return l(0,ee.scrollbarState.topY||0)});var ae=W.selectAll("."+v.cn.scrollbarGlyph).data(b.repeat,b.keyFun);ae.enter().append("line").classed(v.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",v.scrollbarWidth).attr("stroke-linecap","round").attr("y1",v.scrollbarWidth/2),ae.attr("y2",function(ee){return ee.scrollbarState.barLength-v.scrollbarWidth/2}).attr("stroke-opacity",function(ee){return ee.columnDragInProgress||!ee.scrollbarState.barWiggleRoom||ie?0:.4}),ae.transition().delay(0).duration(0),ae.transition().delay(v.scrollbarHideDelay).duration(v.scrollbarHideDuration).attr("stroke-opacity",0);var G=q.selectAll("."+v.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);G.enter().append("line").classed(v.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",v.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ee){var te=x.event.y,le=this.getBoundingClientRect(),ue=ee.scrollbarState,de=te-le.top,he=x.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=de&&de<=ue.bottomY||F(J,$,null,he(de-ue.barLength/2))(ee)}).call(x.behavior.drag().origin(function(ee){return x.event.stopPropagation(),ee.scrollbarState.scrollbarScrollInProgress=!0,ee}).on("drag",F(J,$)).on("dragend",function(){})),G.attr("y2",function(ee){return ee.scrollbarState.scrollableAreaHeight}),J._context.staticPlot&&(ae.remove(),G.remove())}function u($,J,ie,j){var G,q=function(ae){var G=ae.selectAll("."+v.cn.columnCell).data(h.splitToCells,function(ee){return ee.keyWithinBlock});return G.enter().append("g").classed(v.cn.columnCell,!0),G.exit().remove(),G}(((G=ie.selectAll("."+v.cn.columnCells).data(b.repeat,b.keyFun)).enter().append("g").classed(v.cn.columnCells,!0),G.exit().remove(),G));q.each(function(G,ee){var te=G.calcdata.cells.font,le=G.column.specIndex,ue={size:A(te.size,le,ee),color:A(te.color,le,ee),family:A(te.family,le,ee)};G.rowNumber=G.key,G.align=A(G.calcdata.cells.align,le,ee),G.cellBorderWidth=A(G.calcdata.cells.line.width,le,ee),G.font=ue}),function(ae){ae.attr("width",function(G){return G.column.columnWidth}).attr("stroke-width",function(G){return G.cellBorderWidth}).each(function(G){var ee=x.select(this);s.stroke(ee,A(G.calcdata.cells.line.color,G.column.specIndex,G.rowNumber)),s.fill(ee,A(G.calcdata.cells.fill.color,G.column.specIndex,G.rowNumber))})}(function(ae){var G=ae.selectAll("."+v.cn.cellRect).data(b.repeat,function(ee){return ee.keyWithinBlock});return G.enter().append("rect").classed(v.cn.cellRect,!0),G}(q));var W=function(ae){var G=ae.selectAll("."+v.cn.cellText).data(b.repeat,function(ee){return ee.keyWithinBlock});return G.enter().append("text").classed(v.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){x.event.stopPropagation()}),G}(function(ae){var G=ae.selectAll("."+v.cn.cellTextHolder).data(b.repeat,function(ee){return ee.keyWithinBlock});return G.enter().append("g").classed(v.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),G}(q));(function(ae){ae.each(function(G){e.font(x.select(this),G.font)})})(W),w(W,J,j,$),V(q)}function w($,J,ie,j){$.text(function(q){var W=q.column.specIndex,ae=q.rowNumber,G=q.value,ee="string"==typeof G,te=ee&&G.match(/<br>/i),le=!ee||te;q.mayHaveMarkup=ee&&G.match(/[<&>]/);var ue,de="string"==typeof(ue=G)&&ue.match(v.latexCheck);q.latex=de;var he,be,me=de?"":A(q.calcdata.cells.prefix,W,ae)||"",_e=de?"":A(q.calcdata.cells.suffix,W,ae)||"",Ee=de?null:A(q.calcdata.cells.format,W,ae)||null,De=me+(Ee?T(Ee)(q.value):q.value)+_e;if(q.wrappingNeeded=!q.wrapped&&!le&&!de&&(he=f(De)),q.cellHeightMayIncrease=te||de||q.mayHaveMarkup||(void 0===he?f(De):he),q.needsConvertToTspans=q.mayHaveMarkup||q.wrappingNeeded||q.latex,q.wrappingNeeded){var Se=(" "===v.wrapSplitCharacter?De.replace(/<a href=/gi,"<a_href="):De).split(v.wrapSplitCharacter),Fe=" "===v.wrapSplitCharacter?Se.map(function(ve){return ve.replace(/<a_href=/gi,"<a href=")}):Se;q.fragments=Fe.map(function(ve){return{text:ve,width:null}}),q.fragments.push({fragment:v.wrapSpacer,width:null}),be=Fe.join(v.lineBreaker)+v.lineBreaker+v.wrapSpacer}else delete q.fragments,be=De;return be}).attr("dy",function(q){return q.needsConvertToTspans?0:"0.75em"}).each(function(q){var W=x.select(this);q.needsConvertToTspans?o.convertToTspans(W,j,(q.wrappingNeeded?L:I)(ie,this,J,j,q)):x.select(this.parentNode).attr("transform",function(G){return l(B(G),v.cellPad)}).attr("text-anchor",function(G){return{left:"start",center:"middle",right:"end"}[G.align]})})}function f($){return-1!==$.indexOf(v.wrapSplitCharacter)}function A($,J,ie){if(Array.isArray($)){var j=$[Math.min(J,$.length-1)];return Array.isArray(j)?j[Math.min(ie,j.length-1)]:j}return $}function M($,J,ie){$.transition().ease(v.releaseTransitionEase).duration(v.releaseTransitionDuration).attr("transform",l(J.x,ie))}function k($){return"cells"===$.type}function E($){return"header"===$.type}function P($){return($.rowBlocks.length?$.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(J,ie){return J+Y(ie,1/0)},0)}function D($,J,ie){var j=g(J)[0];if(void 0!==j){var q=j.rowBlocks,W=j.calcdata,ae=Z(q,q.length),G=j.calcdata.groupHeight-P(j),ee=W.scrollY=Math.max(0,Math.min(ae-G,W.scrollY)),te=function(le,ue,de){for(var he=[],be=0,me=0;me<le.length;me++){for(var _e=le[me],Ee=_e.rows,De=0,Se=0;Se<Ee.length;Se++)De+=Ee[Se].rowHeight;_e.allRowsHeight=De,ue<be+De&&ue+de>be&&he.push(me),be+=De}return he}(q,ee,G);1===te.length&&(te[0]===q.length-1?te.unshift(te[0]-1):te.push(te[0]+1)),te[0]%2&&te.reverse(),J.each(function(le,ue){le.page=te[ue],le.scrollY=ee}),J.attr("transform",function(le){var ue=Z(le.rowBlocks,le.page)-le.scrollY;return l(0,ue)}),$&&(R($,ie,J,te,j.prevPages,j,0),R($,ie,J,te,j.prevPages,j,1),m(ie,$))}}function F($,J,ie,j){return function(q){var W=q.calcdata?q.calcdata:q,ae=J.filter(function(le){return W.key===le.key}),ee=W.scrollY;W.scrollY=void 0===j?W.scrollY+(ie||W.scrollbarState.dragMultiplier)*x.event.dy:j;var te=ae.selectAll("."+v.cn.yColumn).selectAll("."+v.cn.columnBlock).filter(k);return D($,te,ae),W.scrollY===ee}}function R($,J,ie,j,q,W,ae){j[ae]!==q[ae]&&(clearTimeout(W.currentRepaint[ae]),W.currentRepaint[ae]=setTimeout(function(){var G=ie.filter(function(ee,te){return te===ae&&j[te]!==q[te]});u($,J,G,ie),q[ae]=j[ae]}))}function L($,J,ie,j){return function(){var q=x.select(J.parentNode);q.each(function(W){var ae=W.fragments;q.selectAll("tspan.line").each(function(be,me){ae[me].width=this.getComputedTextLength()});var G,ee,te=ae[ae.length-1].width,le=ae.slice(0,-1),ue=[],de=0,he=W.column.columnWidth-2*v.cellPad;for(W.value="";le.length;)de+(ee=(G=le.shift()).width+te)>he&&(W.value+=ue.join(v.wrapSpacer)+v.lineBreaker,ue=[],de=0),ue.push(G.text),de+=ee;de&&(W.value+=ue.join(v.wrapSpacer)),W.wrapped=!0}),q.selectAll("tspan.line").remove(),w(q.select("."+v.cn.cellText),ie,$,j),x.select(J.parentNode.parentNode).call(V)}}function I($,J,ie,j,q){return function(){if(!q.settledY){var W=x.select(J.parentNode),ae=re(q),G=q.key-ae.firstRowIndex,ee=ae.rows[G].rowHeight,te=q.cellHeightMayIncrease?J.parentNode.getBoundingClientRect().height+2*v.cellPad:ee,le=Math.max(te,ee);le-ae.rows[G].rowHeight&&(ae.rows[G].rowHeight=le,$.selectAll("."+v.cn.columnCell).call(V),D(null,$.filter(k),0),m(ie,j,!0)),W.attr("transform",function(){var ue=this.parentNode.getBoundingClientRect(),de=x.select(this.parentNode).select("."+v.cn.cellRect).node().getBoundingClientRect(),he=this.transform.baseVal.consolidate(),be=de.top-ue.top+(he?he.matrix.f:v.cellPad);return l(B(q,x.select(this.parentNode).select("."+v.cn.cellTextHolder).node().getBoundingClientRect().width),be)}),q.settledY=!0}}}function B($,J){switch($.align){case"left":default:return v.cellPad;case"right":return $.column.columnWidth-(J||0)-v.cellPad;case"center":return($.column.columnWidth-(J||0))/2}}function V($){$.attr("transform",function(J){var ie=J.rowBlocks[0].auxiliaryBlocks.reduce(function(q,W){return q+Y(W,1/0)},0),j=Y(re(J),J.key);return l(0,j+ie)}).selectAll("."+v.cn.cellRect).attr("height",function(J){return(ie=re(J),j=J.key,ie.rows[j-ie.firstRowIndex]).rowHeight;var ie,j})}function Z($,J){for(var ie=0,j=J-1;j>=0;j--)ie+=Q($[j]);return ie}function Y($,J){for(var ie=0,j=0;j<$.rows.length&&$.rows[j].rowIndex<J;j++)ie+=$.rows[j].rowHeight;return ie}function Q($){var J=$.allRowsHeight;if(void 0!==J)return J;for(var ie=0,j=0;j<$.rows.length;j++)ie+=$.rows[j].rowHeight;return $.allRowsHeight=ie,ie}function re($){return $.rowBlocks[$.page]}oe.exports=function($,J){var ie=!$._context.staticPlot,j=$._fullLayout._paper.selectAll("."+v.cn.table).data(J.map(function(_e){var Ee=b.unwrap(_e).trace;return y($,Ee)}),b.keyFun);j.exit().remove(),j.enter().append("g").classed(v.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),j.attr("width",function(_e){return _e.width+_e.size.l+_e.size.r}).attr("height",function(_e){return _e.height+_e.size.t+_e.size.b}).attr("transform",function(_e){return l(_e.translateX,_e.translateY)});var q=j.selectAll("."+v.cn.tableControlView).data(b.repeat,b.keyFun),W=q.enter().append("g").classed(v.cn.tableControlView,!0).style("box-sizing","content-box");if(ie){var ae="onwheel"in document?"wheel":"mousewheel";W.on("mousemove",function(_e){q.filter(function(Ee){return _e===Ee}).call(m,$)}).on(ae,function(_e){_e.scrollbarState.wheeling||(_e.scrollbarState.wheeling=!0,F($,q,null,_e.scrollY+x.event.deltaY)(_e)||(x.event.stopPropagation(),x.event.preventDefault()),_e.scrollbarState.wheeling=!1)}).call(m,$,!0)}q.attr("transform",function(_e){return l(_e.size.l,_e.size.t)});var G=q.selectAll("."+v.cn.scrollBackground).data(b.repeat,b.keyFun);G.enter().append("rect").classed(v.cn.scrollBackground,!0).attr("fill","none"),G.attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),q.each(function(_e){e.setClipUrl(x.select(this),p($,_e),$)});var ee=q.selectAll("."+v.cn.yColumn).data(function(_e){return _e.columns},b.keyFun);ee.enter().append("g").classed(v.cn.yColumn,!0),ee.exit().remove(),ee.attr("transform",function(_e){return l(_e.x,0)}),ie&&ee.call(x.behavior.drag().origin(function(_e){return M(x.select(this),_e,-v.uplift),i(this),_e.calcdata.columnDragInProgress=!0,m(q.filter(function(Ee){return _e.calcdata.key===Ee.key}),$),_e}).on("drag",function(_e){var Ee=x.select(this),De=function(Se){return(_e===Se?x.event.x:Se.x)+Se.columnWidth/2};_e.x=Math.max(-v.overdrag,Math.min(_e.calcdata.width+v.overdrag-_e.columnWidth,x.event.x)),g(ee).filter(function(Se){return Se.calcdata.key===_e.calcdata.key}).sort(function(Se,Fe){return De(Se)-De(Fe)}).forEach(function(Se,Fe){Se.xIndex=Fe,Se.x=_e===Se?Se.x:Se.xScale(Se)}),ee.filter(function(Se){return _e!==Se}).transition().ease(v.transitionEase).duration(v.transitionDuration).attr("transform",function(Se){return l(Se.x,0)}),Ee.call(r).attr("transform",l(_e.x,-v.uplift))}).on("dragend",function(_e){var Se,Fe,ve,Te,Ee=x.select(this),De=_e.calcdata;_e.x=_e.xScale(_e),_e.calcdata.columnDragInProgress=!1,M(Ee,_e,0),Se=$,Fe=De,ve=De.columns.map(function(Se){return Se.xIndex}),Te=Fe.gdColumnsOriginalOrder,Fe.gdColumns.sort(function(Ie,Ce){return ve[Te.indexOf(Ie)]-ve[Te.indexOf(Ce)]}),Fe.columnorder=ve,Se.emit("plotly_restyle")})),ee.each(function(_e){e.setClipUrl(x.select(this),c($,_e),$)});var te=ee.selectAll("."+v.cn.columnBlock).data(h.splitToPanels,b.keyFun);te.enter().append("g").classed(v.cn.columnBlock,!0).attr("id",function(_e){return _e.key}),te.style("cursor",function(_e){return _e.dragHandle?"ew-resize":_e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var le=te.filter(E),ue=te.filter(k);ie&&ue.call(x.behavior.drag().origin(function(_e){return x.event.stopPropagation(),_e}).on("drag",F($,q,-1)).on("dragend",function(){})),u($,q,le,te),u($,q,ue,te);var de=q.selectAll("."+v.cn.scrollAreaClip).data(b.repeat,b.keyFun);de.enter().append("clipPath").classed(v.cn.scrollAreaClip,!0).attr("id",function(_e){return p($,_e)});var he=de.selectAll("."+v.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);he.enter().append("rect").classed(v.cn.scrollAreaClipRect,!0).attr("x",-v.overdrag).attr("y",-v.uplift).attr("fill","none"),he.attr("width",function(_e){return _e.width+2*v.overdrag}).attr("height",function(_e){return _e.height+v.uplift}),ee.selectAll("."+v.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(v.cn.columnBoundary,!0);var be=ee.selectAll("."+v.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);be.enter().append("clipPath").classed(v.cn.columnBoundaryClippath,!0),be.attr("id",function(_e){return c($,_e)});var me=be.selectAll("."+v.cn.columnBoundaryRect).data(b.repeat,b.keyFun);me.enter().append("rect").classed(v.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(_e){return _e.columnWidth+2*d(_e)}).attr("height",function(_e){return _e.calcdata.height+2*d(_e)+v.uplift}).attr("x",function(_e){return-d(_e)}).attr("y",function(_e){return-d(_e)}),D(null,ue,q)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(_,oe,se){"use strict";var v=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../components/colorscale/attributes"),b=_("../../plots/domain").attributes,e=_("../pie/attributes"),o=_("../sunburst/attributes"),i=_("./constants"),l=_("../../lib/extend").extendFlat;oe.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:o.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:o.textinfo,texttemplate:x({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:v({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:l({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:o.root,domain:b({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(_,oe,se){"use strict";var v=_("../../plots/plots");se.name="treemap",se.plot=function(x,T,b,e){v.plotBasePlot(se.name,x,T,b,e)},se.clean=function(x,T,b,e){v.cleanBasePlot(se.name,x,T,b,e)}},{"../../plots/plots":619}],1077:[function(_,oe,se){"use strict";var v=_("../sunburst/calc");se.calc=function(x,T){return v.calc(x,T)},se.crossTraceCalc=function(x){return v._runCrossTraceCalc("treemap",x)}},{"../sunburst/calc":1051}],1078:[function(_,oe,se){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText,o=_("../bar/constants").TEXTPAD,i=_("../../components/colorscale"),l=i.hasColorscale,r=i.handleDefaults;oe.exports=function(y,h,s,d){function p(k,E){return v.coerce(y,h,x,k,E)}var c=p("labels"),g=p("parents");if(c&&c.length&&g&&g.length){var m=p("values");p(m&&m.length?"branchvalues":"count"),p("level"),p("maxdepth"),"squarify"===p("tiling.packing")&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var w=p("pathbar.visible");e(y,h,d,p,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var f=-1!==h.textposition.indexOf("bottom");p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor);var A=p("marker.colors");(h._hasColorscale=l(y,"marker","colors")||(y.marker||{}).coloraxis)?r(y,h,d,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(A||[]).length);var M=2*h.textfont.size;p("marker.pad.t",f?M/4:M),p("marker.pad.l",M/4),p("marker.pad.r",M/4),p("marker.pad.b",f?M:M/4),h._hovered={marker:{line:{width:2,color:T.contrast(d.paper_bgcolor)}}},w&&(p("pathbar.thickness",h.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),b(h,d,p),h._length=null}else h.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../sunburst/helpers"),T=_("../bar/uniform_text").clearMinTextSize,b=_("../bar/style").resizeText,e=_("./plot_one");oe.exports=function(o,i,l,r,y){var h,s,d=y.type,p=y.drawDescendants,c=o._fullLayout,g=c["_"+d+"layer"],m=!l;T(d,c),(h=g.selectAll("g.trace."+d).data(i,function(u){return u[0].trace.uid})).enter().append("g").classed("trace",!0).classed(d,!0),h.order(),!c.uniformtext.mode&&x.hasTransition(l)?(r&&(s=r()),v.transition().duration(l.duration).ease(l.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){g.selectAll("g.trace").each(function(u){e(o,u,this,l,p)})})):(h.each(function(u){e(o,u,this,l,p)}),c.uniformtext.mode&&b(o,g.selectAll(".trace"),d)),m&&h.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),o=_("./style").styleOne,i=_("./constants"),l=_("../sunburst/helpers"),r=_("../sunburst/fx");oe.exports=function(y,h,s,d,p){var c=p.barDifY,g=p.width,m=p.height,u=p.viewX,w=p.viewY,f=p.pathSlice,A=p.toMoveInsideSlice,M=p.strTransform,k=p.hasTransition,E=p.handleSlicesExit,P=p.makeUpdateSliceInterpolator,D=p.makeUpdateTextInterpolator,F={},R=y._fullLayout,L=h[0],I=L.trace,B=L.hierarchy,V=g/I._entryDepth,Z=l.listPath(s.data,"id"),Y=e(B.copy(),[g,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(re){var $=Z.indexOf(re.data.id);return-1!==$&&(re.x0=V*$,re.x1=V*($+1),re.y0=c,re.y1=c+m,re.onPathbar=!0,!0)})).reverse(),(d=d.data(Y,l.getPtId)).enter().append("g").classed("pathbar",!0),E(d,!0,F,[g,m],f),d.order();var Q=d;k&&(Q=Q.transition().each("end",function(){var re=v.select(this);l.setSliceCursor(re,y,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(re){re._x0=u(re.x0),re._x1=u(re.x1),re._y0=w(re.y0),re._y1=w(re.y1),re._hoverX=u(re.x1-Math.min(g,m)/2),re._hoverY=w(re.y1-m/2);var $=v.select(this),J=x.ensureSingle($,"path","surface",function(W){W.style("pointer-events","all")});k?J.transition().attrTween("d",function(W){var ae=P(W,!0,F,[g,m]);return function(G){return f(ae(G))}}):J.attr("d",f),$.call(r,s,y,h,{styleOne:o,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,y,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:y._transitioning}),J.call(o,re,I,{hovered:!1}),re._text=(l.getPtLabel(re)||"").split("<br>").join(" ")||"";var ie=x.ensureSingle($,"g","slicetext"),j=x.ensureSingle(ie,"text","",function(W){W.attr("data-notex",1)}),q=x.ensureUniformFontSize(y,l.determineTextFont(I,re,R.font,{onPathbar:!0}));j.text(re._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(T.font,q).call(b.convertToTspans,y),re.textBB=T.bBox(j.node()),re.transform=A(re,{fontSize:q.size,onPathbar:!0}),re.transform.fontSize=q.size,k?j.transition().attrTween("transform",function(W){var ae=D(W,!0,F,[g,m]);return function(G){return M(ae(G))}}):j.attr("transform",M(re))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),o=_("./style").styleOne,i=_("./constants"),l=_("../sunburst/helpers"),r=_("../sunburst/fx"),y=_("../sunburst/plot").formatSliceLabel;oe.exports=function(h,s,d,p,c){var g=c.width,m=c.height,u=c.viewX,w=c.viewY,f=c.pathSlice,A=c.toMoveInsideSlice,M=c.strTransform,k=c.hasTransition,E=c.handleSlicesExit,P=c.makeUpdateSliceInterpolator,D=c.makeUpdateTextInterpolator,F=c.prevEntry,R=h._fullLayout,L=s[0].trace,I=-1!==L.textposition.indexOf("left"),B=-1!==L.textposition.indexOf("right"),V=-1!==L.textposition.indexOf("bottom"),Z=!V&&!L.marker.pad.t||V&&!L.marker.pad.b,Y=e(d,[g,m],{packing:L.tiling.packing,squarifyratio:L.tiling.squarifyratio,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,pad:{inner:L.tiling.pad,top:L.marker.pad.t,left:L.marker.pad.l,right:L.marker.pad.r,bottom:L.marker.pad.b}}).descendants(),Q=1/0,re=-1/0;Y.forEach(function(q){var W=q.depth;W>=L._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(Q=Math.min(Q,W),re=Math.max(re,W))}),p=p.data(Y,l.getPtId),L._maxVisibleLayers=isFinite(re)?re-Q+1:0,p.enter().append("g").classed("slice",!0),E(p,!1,{},[g,m],f),p.order();var $=null;if(k&&F){var J=l.getPtId(F);p.each(function(q){null===$&&l.getPtId(q)===J&&($={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var ie=function(){return $||{x0:0,x1:g,y0:0,y1:m}},j=p;return k&&(j=j.transition().each("end",function(){var q=v.select(this);l.setSliceCursor(q,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(q){var W=l.isHeader(q,L);q._x0=u(q.x0),q._x1=u(q.x1),q._y0=w(q.y0),q._y1=w(q.y1),q._hoverX=u(q.x1-L.marker.pad.r),q._hoverY=w(V?q.y1-L.marker.pad.b/2:q.y0+L.marker.pad.t/2);var ae=v.select(this),G=x.ensureSingle(ae,"path","surface",function(ue){ue.style("pointer-events","all")});k?G.transition().attrTween("d",function(ue){var de=P(ue,!1,ie(),[g,m]);return function(he){return f(de(he))}}):G.attr("d",f),ae.call(r,d,h,s,{styleOne:o,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,h,{isTransitioning:h._transitioning}),G.call(o,q,L,{hovered:!1}),q._text=q.x0===q.x1||q.y0===q.y1?"":W?Z?"":l.getPtLabel(q)||"":y(q,d,L,s,R)||"";var ee=x.ensureSingle(ae,"g","slicetext"),te=x.ensureSingle(ee,"text","",function(ue){ue.attr("data-notex",1)}),le=x.ensureUniformFontSize(h,l.determineTextFont(L,q,R.font));te.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":I||W?"start":"middle").call(T.font,le).call(b.convertToTspans,h),q.textBB=T.bBox(te.node()),q.transform=A(q,{fontSize:le.size,isHeader:W}),q.transform.fontSize=le.size,k?te.transition().attrTween("transform",function(ue){var de=D(ue,!1,ie(),[g,m]);return function(he){return M(de(he))}}):te.attr("transform",M(q))}),$}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(_,oe,se){"use strict";oe.exports=function v(x,T,b){var e;b.swapXY&&(e=x.x0,x.x0=x.y0,x.y0=e,e=x.x1,x.x1=x.y1,x.y1=e),b.flipX&&(e=x.x0,x.x0=T[0]-x.x1,x.x1=T[0]-e),b.flipY&&(e=x.y0,x.y0=T[1]-x.y1,x.y1=T[1]-e);var o=x.children;if(o)for(var i=0;i<o.length;i++)v(o[i],T,b)}},{}],1084:[function(_,oe,se){"use strict";oe.exports={moduleType:"trace",name:"treemap",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(_,oe,se){"use strict";oe.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,i){return v.coerce(T,b,x,o,i)}e("treemapcolorway",b.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(_,oe,se){"use strict";var v=_("d3-hierarchy"),x=_("./flip_tree");oe.exports=function(T,b,e){var o,i=e.flipX,l=e.flipY,r="dice-slice"===e.packing,y=e.pad[l?"bottom":"top"],h=e.pad[i?"right":"left"],s=e.pad[i?"left":"right"],d=e.pad[l?"top":"bottom"];r&&(o=h,h=y,y=o,o=s,s=d,d=o);var p=v.treemap().tile(function(c,g){switch(c){case"squarify":return v.treemapSquarify.ratio(g);case"binary":return v.treemapBinary;case"dice":return v.treemapDice;case"slice":return v.treemapSlice;default:return v.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(h).paddingRight(s).paddingTop(y).paddingBottom(d).size(r?[b[1],b[0]]:b)(T);return(r||i||l)&&x(p,b,{swapXY:r,flipX:i,flipY:l}),p}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(_,oe,se){"use strict";var v=_("./draw"),x=_("./draw_descendants");oe.exports=function(T,b,e,o){return v(T,b,e,o,{type:"treemap",drawDescendants:x})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("d3-interpolate").interpolate,T=_("../sunburst/helpers"),b=_("../../lib"),e=_("../bar/constants").TEXTPAD,o=_("../bar/plot").toMoveInsideBar,i=_("../bar/uniform_text").recordMinTextSize,l=_("./constants"),r=_("./draw_ancestors");function y(h){return T.isHierarchyRoot(h)?"":T.getPtId(h)}oe.exports=function(h,s,d,p,c){var g=h._fullLayout,m=s[0],u=m.trace,w="icicle"===u.type,f=m.hierarchy,A=T.findEntryWithLevel(f,u.level),M=v.select(d),k=M.selectAll("g.pathbar"),E=M.selectAll("g.slice");if(!A)return k.remove(),void E.remove();var P=T.isHierarchyRoot(A),D=!g.uniformtext.mode&&T.hasTransition(p),F=T.getMaxDepth(u),R=g._size,L=u.domain,I=R.w*(L.x[1]-L.x[0]),B=R.h*(L.y[1]-L.y[0]),V=I,Z=u.pathbar.thickness,Y=u.marker.line.width+l.gapWithPathbar,Q=u.pathbar.visible?u.pathbar.side.indexOf("bottom")>-1?B+Y:-(Z+Y):0,re={x0:V,x1:V,y0:Q,y1:Q+Z},$=function(Re,Ue,qe){var Xe=u.tiling.pad,st=function(tt){return tt-Xe<=Ue.x0},He=function(tt){return tt+Xe>=Ue.x1},$e=function(tt){return tt-Xe<=Ue.y0},et=function(tt){return tt+Xe>=Ue.y1};return Re.x0===Ue.x0&&Re.x1===Ue.x1&&Re.y0===Ue.y0&&Re.y1===Ue.y1?{x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1}:{x0:st(Re.x0-Xe)?0:He(Re.x0-Xe)?qe[0]:Re.x0,x1:st(Re.x1+Xe)?0:He(Re.x1+Xe)?qe[0]:Re.x1,y0:$e(Re.y0-Xe)?0:et(Re.y0-Xe)?qe[1]:Re.y0,y1:$e(Re.y1+Xe)?0:et(Re.y1+Xe)?qe[1]:Re.y1}},J=null,ie={},j={},q=null,W=function(Re,Ue){return Ue?ie[y(Re)]:j[y(Re)]};m.hasMultipleRoots&&P&&F++,u._maxDepth=F,u._backgroundColor=g.paper_bgcolor,u._entryDepth=A.data.depth,u._atRootLevel=P;var G=-I/2+R.l+R.w*(L.x[1]+L.x[0])/2,ee=-B/2+R.t+R.h*(1-(L.y[1]+L.y[0])/2),te=function(Re){return G+Re},le=function(Re){return ee+Re},ue=le(0),de=te(0),he=function(Re){return de+Re},be=function(Re){return ue+Re};function me(Re,Ue){return Re+","+Ue}var _e=he(0),Ee=function(Re){Re.x=Math.max(_e,Re.x)},De=u.pathbar.edgeshape,Se=function(Re,Ue){var qe=Re.x0,Xe=Re.x1,st=Re.y0,He=Re.y1,$e=Re.textBB,et=function(Nt){return-1!==u.textposition.indexOf(Nt)},tt=et("bottom"),ct=et("top")||Ue.isHeader&&!tt?"start":tt?"end":"middle",bt=et("right"),At=et("left")||Ue.onPathbar?-1:bt?1:0,Ut=u[w?"tiling":"marker"].pad;if(Ue.isHeader){if((qe+=(w?Ut:Ut.l)-e)>=(Xe-=(w?Ut:Ut.r)-e)){var Ct=(qe+Xe)/2;qe=Ct,Xe=Ct}var dt;tt?st<(dt=He-(w?Ut:Ut.b))&&dt<He&&(st=dt):st<(dt=st+(w?Ut:Ut.t))&&dt<He&&(He=dt)}var at=o(qe,Xe,st,He,$e,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:At});return at.fontSize=Ue.fontSize,at.targetX=te(at.targetX),at.targetY=le(at.targetY),isNaN(at.targetX)||isNaN(at.targetY)?{}:(qe!==Xe&&st!==He&&i(u.type,at,g),{scale:at.scale,rotate:at.rotate,textX:at.textX,textY:at.textY,anchorX:at.anchorX,anchorY:at.anchorY,targetX:at.targetX,targetY:at.targetY})},Fe=function(Re,Ue){for(var qe,Xe=0,st=Re;!qe&&Xe<F;)Xe++,(st=st.parent)?qe=W(st,Ue):Xe=F;return qe||{}},ve=function(Re,Ue,qe,Xe,st){var He,$e=W(Re,Ue);if($e)He=$e;else if(Ue)He=re;else if(J)if(Re.parent){var et=q||qe;et&&!Ue?He=$(Re,et,Xe):b.extendFlat(He={},Fe(Re,Ue))}else He=b.extendFlat({},Re),w&&("h"===st.orientation?st.flipX?He.x0=Re.x1:He.x1=0:st.flipY?He.y0=Re.y1:He.y1=0);else He={};return x(He,{x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1})},Te=function(Re,Ue,qe,Xe){var st=W(Re,Ue),He={},$e=function(Re,Ue,qe,Xe){return Ue?ie[y(f)]||re:Re.data.depth-A.data.depth<F?$(Re,j[u.level]||qe,Xe):{}}(Re,Ue,qe,Xe);b.extendFlat(He,{transform:Se({x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,textBB:Re.textBB,_text:Re._text},{isHeader:T.isHeader(Re,u)})}),st?He=st:Re.parent&&b.extendFlat(He,Fe(Re,Ue));var et=Re.transform;return Re.x0!==Re.x1&&Re.y0!==Re.y1&&i(u.type,et,g),x(He,{transform:{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY}})},Ie=function(Re,Ue,qe,Xe,st){var He=Xe[0],$e=Xe[1];D?Re.exit().transition().each(function(){var et=v.select(this);et.select("path.surface").transition().attrTween("d",function(tt){var ct=function(bt,At,Ut,Ct){var dt,at=W(bt,At);if(At)dt=re;else{var Nt=W(A,At);dt=Nt?$(bt,Nt,Ct):{}}return x(at,dt)}(tt,Ue,0,[He,$e]);return function(bt){return st(ct(bt))}}),et.select("g.slicetext").attr("opacity",0)}).remove():Re.exit().remove()},Ce=function(Re){var Ue=Re.transform;return Re.x0!==Re.x1&&Re.y0!==Re.y1&&i(u.type,Ue,g),b.getTextTransform({textX:Ue.textX,textY:Ue.textY,anchorX:Ue.anchorX,anchorY:Ue.anchorY,targetX:Ue.targetX,targetY:Ue.targetY,scale:Ue.scale,rotate:Ue.rotate})};D&&(k.each(function(Re){ie[y(Re)]={x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1},Re.transform&&(ie[y(Re)].transform={textX:Re.transform.textX,textY:Re.transform.textY,anchorX:Re.transform.anchorX,anchorY:Re.transform.anchorY,targetX:Re.transform.targetX,targetY:Re.transform.targetY,scale:Re.transform.scale,rotate:Re.transform.rotate})}),E.each(function(Re){j[y(Re)]={x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1},Re.transform&&(j[y(Re)].transform={textX:Re.transform.textX,textY:Re.transform.textY,anchorX:Re.transform.anchorX,anchorY:Re.transform.anchorY,targetX:Re.transform.targetX,targetY:Re.transform.targetY,scale:Re.transform.scale,rotate:Re.transform.rotate}),!J&&T.isEntry(Re)&&(J=Re)})),q=c(h,s,A,E,{width:I,height:B,viewX:te,viewY:le,pathSlice:function(Re){var Ue=te(Re.x0),qe=te(Re.x1),Xe=le(Re.y0),st=le(Re.y1);return qe-Ue&&st-Xe?"M"+me(Ue,Xe+0)+"L"+me(qe-0,Xe)+"L"+me(qe,st-0)+"L"+me(Ue+0,st)+"Z":""},toMoveInsideSlice:Se,prevEntry:J,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Ie,hasTransition:D,strTransform:Ce}),u.pathbar.visible?r(h,s,A,k,{barDifY:Q,width:V,height:Z,viewX:he,viewY:be,pathSlice:function(Re){var Ue=he(Math.max(Math.min(Re.x0,Re.x0),0)),qe=he(Math.min(Math.max(Re.x1,Re.x1),V)),Xe=be(Re.y0),st=be(Re.y1),He=Z/2,$e={},et={};$e.x=Ue,et.x=qe,$e.y=et.y=(Xe+st)/2;var tt={x:Ue,y:Xe},ct={x:qe,y:Xe},bt={x:qe,y:st},At={x:Ue,y:st};return">"===De?(tt.x-=He,ct.x-=He,bt.x-=He,At.x-=He):"/"===De?(bt.x-=He,At.x-=He,$e.x-=He/2,et.x-=He/2):"\\"===De?(tt.x-=He,ct.x-=He,$e.x-=He/2,et.x-=He/2):"<"===De&&($e.x-=He,et.x-=He),Ee(tt),Ee(At),Ee($e),Ee(ct),Ee(bt),Ee(et),"M"+me(tt.x,tt.y)+"L"+me(ct.x,ct.y)+"L"+me(et.x,et.y)+"L"+me(bt.x,bt.y)+"L"+me(At.x,At.y)+"L"+me($e.x,$e.y)+"Z"},toMoveInsideSlice:Se,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Ie,hasTransition:D,strTransform:Ce}):k.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../sunburst/helpers"),e=_("../bar/uniform_text").resizeText;function o(i,l,r,y){var h,s,d=(y||{}).hovered,p=l.data.data,c=p.i,g=p.color,m=b.isHierarchyRoot(l),u=1;if(d)h=r._hovered.marker.line.color,s=r._hovered.marker.line.width;else if(m&&g===r.root.color)u=100,h="rgba(0,0,0,0)",s=0;else if(h=T.castOption(r,c,"marker.line.color")||x.defaultLine,s=T.castOption(r,c,"marker.line.width")||0,!r._hasColorscale&&!l.onPathbar){var w=r.marker.depthfade;if(w){var f,A=x.combine(x.addOpacity(r._backgroundColor,.75),g);if(!0===w){var M=b.getMaxDepth(r);f=isFinite(M)?b.isLeaf(l)?0:r._maxVisibleLayers-(l.data.depth-r._entryDepth):l.data.height+1}else f=l.data.depth-r._entryDepth,r._atRootLevel||f++;if(f>0)for(var k=0;k<f;k++)g=x.combine(x.addOpacity(A,.5*k/f),g)}}i.style("stroke-width",s).call(x.fill,g).call(x.stroke,h).style("opacity",u)}oe.exports={style:function(i){var l=i._fullLayout._treemaplayer.selectAll(".trace");e(i,l,"treemap"),l.each(function(r){var y=v.select(this),h=r[0].trace;y.style("opacity",h.opacity),y.selectAll("path.surface").each(function(s){v.select(this).call(o,s,h,{hovered:!1})})})},styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(_,oe,se){"use strict";var v=_("../box/attributes"),x=_("../../lib/extend").extendFlat,T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat;oe.exports={y:v.y,x:v.x,x0:v.x0,y0:v.y0,xhoverformat:T("x"),yhoverformat:T("y"),name:x({},v.name,{}),orientation:x({},v.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:v.fillcolor,points:x({},v.boxpoints,{}),jitter:x({},v.jitter,{}),pointpos:x({},v.pointpos,{}),width:x({},v.width,{}),marker:v.marker,text:v.text,hovertext:v.hovertext,hovertemplate:v.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:v.selected,unselected:v.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../box/calc"),b=_("./helpers"),e=_("../../constants/numerical").BADNUM;function o(l,r,y){var h=r.max-r.min;if(!h)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,h/1e4);var p,s=y.length,d=v.stdev(y,s-1,r.mean);return Math.max((p=s,1.059*Math.min(d,(r.q3-r.q1)/1.349)*Math.pow(p,-.2)),h/100)}function i(l,r,y,h){var s,d=l.spanmode,p=l.span||[],g=[r.min-2*h,r.max+2*h];function m(w){var f=p[w],A="multicategory"===y.type?y.r2c(f):y.d2c(f,0,l[r.valLetter+"calendar"]);return A===e?g[w]:A}var u={type:"linear",range:s="soft"===d?g:"hard"===d?[r.min,r.max]:[m(0),m(1)]};return x.setConvert(u),u.cleanRange(),s}oe.exports=function(l,r){var y=T(l,r);if(y[0].t.empty)return y;for(var h=l._fullLayout,s=x.getFromId(l,r["h"===r.orientation?"xaxis":"yaxis"]),d=1/0,p=-1/0,c=0,g=0,m=0;m<y.length;m++){var u=y[m],w=u.pts.map(b.extractVal),f=u.bandwidth=o(r,u,w),A=u.span=i(r,u,s,f);if(u.min===u.max&&0===f)A=u.span=[u.min,u.max],u.density=[{v:1,t:A[0]}],u.bandwidth=f,c=Math.max(c,1);else{var M=A[1]-A[0],k=Math.ceil(M/(f/3)),E=M/k;if(!isFinite(E)||!isFinite(k))return v.error("Something went wrong with computing the violin span"),y[0].t.empty=!0,y;var P=b.makeKDE(u,r,w);u.density=new Array(k);for(var D=0,F=A[0];F<A[1]+E/2;D++,F+=E){var R=P(F);u.density[D]={v:R,t:F},c=Math.max(c,R)}}g=Math.max(g,w.length),d=Math.min(d,A[0]),p=Math.max(p,A[1])}var L=x.findExtremes(s,[d,p],{padded:!0});if(r._extremes[s._id]=L,r.width)y[0].t.maxKDE=c;else{var I=h._violinScaleGroupStats,B=r.scalegroup,V=I[B];V?(V.maxKDE=Math.max(V.maxKDE,c),V.maxCount=Math.max(V.maxCount,g)):I[B]={maxKDE:c,maxCount:g}}return y[0].t.labels.kde=v._(l,"kde:"),y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(_,oe,se){"use strict";var v=_("../box/cross_trace_calc").setPositionOffset,x=["v","h"];oe.exports=function(T,b){for(var e=T.calcdata,o=b.xaxis,i=b.yaxis,l=0;l<x.length;l++){for(var r=x[l],y="h"===r?i:o,h=[],s=0;s<e.length;s++){var d=e[s],c=d[0].trace;!0!==c.visible||"violin"!==c.type||d[0].t.empty||c.orientation!==r||c.xaxis!==o._id||c.yaxis!==i._id||h.push(s)}v("violin",T,h,y)}}},{"../box/cross_trace_calc":675}],1094:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../components/color"),T=_("../box/defaults"),b=_("./attributes");oe.exports=function(e,o,i,l){function r(M,k){return v.coerce(e,o,b,M,k)}function y(M,k){return v.coerce2(e,o,b,M,k)}if(T.handleSampleDefaults(e,o,r,l),!1!==o.visible){r("bandwidth"),r("side"),r("width")||(r("scalegroup",o.name),r("scalemode"));var h,s=r("span");Array.isArray(s)&&(h="manual"),r("spanmode",h);var d=r("line.color",(e.marker||{}).color||i),p=r("line.width"),c=r("fillcolor",x.addOpacity(o.line.color,.5));T.handlePointsDefaults(e,o,r,{prefix:""});var g=y("box.width"),m=y("box.fillcolor",c),u=y("box.line.color",d),w=y("box.line.width",p);r("box.visible",Boolean(g||m||u||w))||(o.box={visible:!1});var f=y("meanline.color",d),A=y("meanline.width",p);r("meanline.visible",Boolean(f||A))||(o.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(_,oe,se){"use strict";var v=_("../../lib"),x=function(T){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*T*T)};se.makeKDE=function(T,b,e){var o=e.length,i=x,l=T.bandwidth,r=1/(o*l);return function(y){for(var h=0,s=0;s<o;s++)h+=i((y-e[s])/l);return r*h}},se.getPositionOnKdePath=function(T,b,e){var o,i;"h"===b.orientation?(o="y",i="x"):(o="x",i="y");var l=v.findPointOnPath(T.path,e,i,{pathLength:T.pathLength}),r=T.posCenterPx,y=l[o];return[y,"both"===b.side?2*r-y:r]},se.getKdeValue=function(T,b,e){var o=T.pts.map(se.extractVal);return se.makeKDE(T,b,o)(e)/T.posDensityScale},se.extractVal=function(T){return T.v}},{"../../lib":503}],1096:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../box/hover"),b=_("./helpers");oe.exports=function(e,o,i,l,r){r||(r={});var y,h,s=r.hoverLayer,d=e.cd,p=d[0].trace,c=p.hoveron,g=-1!==c.indexOf("violins"),m=-1!==c.indexOf("kde"),u=[];if(g||m){var w=T.hoverOnBoxes(e,o,i,l);if(m&&w.length>0){var f,A,M,k,E,P=e.xa,D=e.ya;"h"===p.orientation?(E=o,f="y",M=D,A="x",k=P):(E=i,f="x",M=P,A="y",k=D);var F=d[e.index];if(E>=F.span[0]&&E<=F.span[1]){var R=v.extendFlat({},e),L=k.c2p(E,!0),I=b.getKdeValue(F,p,E),B=b.getPositionOnKdePath(F,p,L),V=M._offset,Z=M._length;R[f+"0"]=B[0],R[f+"1"]=B[1],R[A+"0"]=R[A+"1"]=L,R[A+"Label"]=A+": "+x.hoverLabelText(k,E,p[A+"hoverformat"])+", "+d[0].t.labels.kde+" "+I.toFixed(3),R.spikeDistance=w[0].spikeDistance;var Y=f+"Spike";R[Y]=w[0][Y],w[0].spikeDistance=void 0,w[0][Y]=void 0,R.hovertemplate=!1,u.push(R),(h={stroke:e.color})[f+"1"]=v.constrain(V+B[0],V,V+Z),h[f+"2"]=v.constrain(V+B[1],V,V+Z),h[A+"1"]=h[A+"2"]=k._offset+L}}g&&(u=u.concat(w))}-1!==c.indexOf("points")&&(y=T.hoverOnPoints(e,o,i));var Q=s.selectAll(".violinline-"+p.uid).data(h?[0]:[]);return Q.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),Q.exit().remove(),Q.attr(h),"closest"===l?y?[y]:u:(y&&u.push(y),u)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style"),styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../box/select"),moduleType:"trace",name:"violin",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(_,oe,se){"use strict";var v=_("../box/layout_attributes"),x=_("../../lib").extendFlat;oe.exports={violinmode:x({},v.boxmode,{}),violingap:x({},v.boxgap,{}),violingroupgap:x({},v.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes"),T=_("../box/layout_defaults");oe.exports=function(b,e,o){T._supply(b,e,o,function(i,l){return v.coerce(b,e,x,i,l)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../box/plot"),e=_("../scatter/line_points"),o=_("./helpers");oe.exports=function(i,l,r,y){var h=i._fullLayout,s=l.xaxis,d=l.yaxis;function p(c){var g=e(c,{xaxis:s,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return T.smoothopen(g[0],1)}x.makeTraceGroups(y,r,"trace violins").each(function(c){var g=v.select(this),m=c[0],u=m.t,w=m.trace;if(!0!==w.visible||u.empty)g.remove();else{var f=u.bPos,A=u.bdPos,M=l[u.valLetter+"axis"],k=l[u.posLetter+"axis"],E="both"===w.side,P=E||"positive"===w.side,D=E||"negative"===w.side,F=g.selectAll("path.violin").data(x.identity);F.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),F.exit().remove(),F.each(function(Q){var re,$,J,ie,j,q,W,ae,G=v.select(this),ee=Q.density,te=ee.length,le=k.c2l(Q.pos+f,!0),ue=k.l2p(le);if(w.width)re=u.maxKDE/A;else{var de=h._violinScaleGroupStats[w.scalegroup];re="count"===w.scalemode?de.maxKDE/A*(de.maxCount/Q.pts.length):de.maxKDE/A}if(P){for(W=new Array(te),j=0;j<te;j++)(ae=W[j]={})[u.posLetter]=le+ee[j].v/re,ae[u.valLetter]=M.c2l(ee[j].t,!0);$=p(W)}if(D){for(W=new Array(te),q=0,j=te-1;q<te;q++,j--)(ae=W[q]={})[u.posLetter]=le-ee[j].v/re,ae[u.valLetter]=M.c2l(ee[j].t,!0);J=p(W)}if(E)ie=$+"L"+J.substr(1)+"Z";else{var he=[ue,M.c2p(ee[0].t)],be=[ue,M.c2p(ee[te-1].t)];"h"===w.orientation&&(he.reverse(),be.reverse()),ie=P?"M"+he+"L"+$.substr(1)+"L"+be:"M"+be+"L"+J.substr(1)+"L"+he}G.attr("d",ie),Q.posCenterPx=ue,Q.posDensityScale=re*A,Q.path=G.node(),Q.pathLength=Q.path.getTotalLength()/(E?2:1)});var R,L,I,B=w.box,V=B.width,Z=(B.line||{}).width;E?(R=A*V,L=0):P?(R=[0,A*V/2],L=Z*{x:1,y:-1}[u.posLetter]):(R=[A*V/2,0],L=Z*{x:-1,y:1}[u.posLetter]),b.plotBoxAndWhiskers(g,{pos:k,val:M},w,{bPos:f,bdPos:R,bPosPxOffset:L}),b.plotBoxMean(g,{pos:k,val:M},w,{bPos:f,bdPos:R,bPosPxOffset:L}),!w.box.visible&&w.meanline.visible&&(I=x.identity);var Y=g.selectAll("path.meanline").data(I||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),Y.exit().remove(),Y.each(function(Q){var re=M.c2p(Q.mean,!0),$=o.getPositionOnKdePath(Q,w,re);v.select(this).attr("d","h"===w.orientation?"M"+re+","+$[0]+"V"+$[1]:"M"+$[0]+","+re+"H"+$[1])}),b.plotPoints(g,{x:s,y:d},w,u)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/color"),T=_("../scatter/style").stylePoints;oe.exports=function(b){var e=v.select(b).selectAll("g.trace.violins");e.style("opacity",function(o){return o[0].trace.opacity}),e.each(function(o){var i=o[0].trace,l=v.select(this),r=i.box||{},y=r.line||{},h=i.meanline||{},s=h.width;l.selectAll("path.violin").style("stroke-width",i.line.width+"px").call(x.stroke,i.line.color).call(x.fill,i.fillcolor),l.selectAll("path.box").style("stroke-width",y.width+"px").call(x.stroke,y.color).call(x.fill,r.fillcolor);var d={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};l.selectAll("path.mean").style(d).call(x.stroke,h.color),l.selectAll("path.meanline").style(d).call(x.stroke,h.color),T(l,i,b)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(_,oe,se){"use strict";var v=_("../../components/colorscale/attributes"),x=_("../isosurface/attributes"),T=_("../surface/attributes"),b=_("../../plots/attributes"),e=_("../../lib/extend").extendFlat,o=_("../../plot_api/edit_types").overrideAll,i=oe.exports=o(e({x:x.x,y:x.y,z:x.z,value:x.value,isomin:x.isomin,isomax:x.isomax,surface:x.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:x.slices,caps:x.caps,text:x.text,hovertext:x.hovertext,xhoverformat:x.xhoverformat,yhoverformat:x.yhoverformat,zhoverformat:x.zhoverformat,valuehoverformat:x.valuehoverformat,hovertemplate:x.hovertemplate},v("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:x.colorbar,opacity:x.opacity,opacityscale:T.opacityscale,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:e({},b.hoverinfo),showlegend:e({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(_,oe,se){"use strict";var v=_("../../../stackgl_modules").gl_mesh3d,x=_("../../lib/gl_format_color").parseColorScale,T=_("../../lib/str2rgbarray"),b=_("../../components/colorscale").extractOpts,e=_("../../plots/gl3d/zip3"),o=_("../isosurface/convert").findNearestOnAxis,i=_("../isosurface/convert").generateIsoMeshes;function l(y,h,s){this.scene=y,this.uid=s,this.mesh=h,this.name="",this.data=null,this.showContour=!1}var r=l.prototype;r.handlePick=function(y){if(y.object===this.mesh){var h=y.data.index,d=this.data._meshY[h],p=this.data._meshZ[h],c=this.data._Ys.length,g=this.data._Zs.length,m=o(this.data._meshX[h],this.data._Xs).id,u=o(d,this.data._Ys).id,w=o(p,this.data._Zs).id,f=y.index=w+g*u+g*c*m;y.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[f]?y.textLabel=A[f]:A&&(y.textLabel=A),!0}},r.update=function(y){var h=this.scene,s=h.fullSceneLayout;function d(g,m,u,w){return m.map(function(f){return g.d2l(f,0,w)*u})}this.data=i(y);var p={positions:e(d(s.xaxis,y._meshX,h.dataScale[0],y.xcalendar),d(s.yaxis,y._meshY,h.dataScale[1],y.ycalendar),d(s.zaxis,y._meshZ,h.dataScale[2],y.zcalendar)),cells:e(y._meshI,y._meshJ,y._meshK),lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,opacityscale:y.opacityscale,contourEnable:y.contour.show,contourColor:T(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading},c=b(y);p.vertexIntensity=y._meshIntensity,p.vertexIntensityBounds=[c.min,c.max],p.colormap=x(y),this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(y,h){var d=v({gl:y.glplot.gl}),p=new l(y,d,h.uid);return d._trace=p,p.update(h),y.glplot.add(d),p}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./attributes"),T=_("../isosurface/defaults").supplyIsoDefaults,b=_("../surface/defaults").opacityscaleDefaults;oe.exports=function(e,o,i,l){function r(y,h){return v.coerce(e,o,x,y,h)}T(e,o,i,l,r),b(e,o,l,r)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert"),moduleType:"trace",name:"volume",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(_,oe,se){"use strict";var v=_("../bar/attributes"),x=_("../scatter/attributes").line,T=_("../../plots/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/template_attributes").texttemplateAttrs,i=_("./constants"),l=_("../../lib/extend").extendFlat,r=_("../../components/color");function y(h){return{marker:{color:l({},v.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},v.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},v.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}oe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:v.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:l({},T.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:v.text,textposition:v.textposition,insidetextanchor:v.insidetextanchor,textangle:v.textangle,textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:v.outsidetextfont,constraintext:v.constraintext,cliponaxis:v.cliponaxis,orientation:v.orientation,offset:v.offset,width:v.width,increasing:y(),decreasing:y(),totals:y(),connector:{line:{color:l({},x.color,{dflt:r.defaultLine}),width:l({},x.width,{editType:"plot"}),dash:x.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("../../lib").mergeArray,b=_("../scatter/calc_selection"),e=_("../../constants/numerical").BADNUM;function o(l){return"a"===l||"absolute"===l}function i(l){return"t"===l||"total"===l}oe.exports=function(l,r){var y,h,s,d,p,c,g=v.getFromId(l,r.xaxis||"x"),m=v.getFromId(l,r.yaxis||"y");"h"===r.orientation?(y=g.makeCalcdata(r,"x"),s=m.makeCalcdata(r,"y"),d=x(r,m,"y",s),p=!!r.yperiodalignment,c="y"):(y=m.makeCalcdata(r,"y"),s=g.makeCalcdata(r,"x"),d=x(r,g,"x",s),p=!!r.xperiodalignment,c="x"),h=d.vals;for(var u,w=Math.min(h.length,y.length),f=new Array(w),A=0,M=!1,k=0;k<w;k++){var E=y[k]||0,P=!1;(y[k]!==e||i(r.measure[k])||o(r.measure[k]))&&k+1<w&&(y[k+1]!==e||i(r.measure[k+1])||o(r.measure[k+1]))&&(P=!0);var D=f[k]={i:k,p:h[k],s:E,rawS:E,cNext:P};o(r.measure[k])?(A=D.s,D.isSum=!0,D.dir="totals",D.s=A):i(r.measure[k])?(D.isSum=!0,D.dir="totals",D.s=A):(D.isSum=!1,D.dir=D.rawS<0?"decreasing":"increasing",D.s=A+(u=D.s),A+=u),"totals"===D.dir&&(M=!0),p&&(f[k].orig_p=s[k],f[k][c+"End"]=d.ends[k],f[k][c+"Start"]=d.starts[k]),r.ids&&(D.id=String(r.ids[k])),D.v=(r.base||0)+A}return f.length&&(f[0].hasTotals=M),T(r.text,f,"tx"),T(r.hovertext,f,"htx"),b(f,r),f}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(_,oe,se){"use strict";oe.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(_,oe,se){"use strict";var v=_("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(x,T){var b,e,o=x._fullLayout,i=x._fullData,l=x.calcdata,r=T.xaxis,y=T.yaxis,h=[],s=[],d=[];for(e=0;e<i.length;e++){var p=i[e];!0===p.visible&&p.xaxis===r._id&&p.yaxis===y._id&&"waterfall"===p.type&&(b=l[e],"h"===p.orientation?d.push(b):s.push(b),h.push(b))}var c={mode:o.waterfallmode,norm:o.waterfallnorm,gap:o.waterfallgap,groupgap:o.waterfallgroupgap};for(v(x,r,y,s,c),v(x,y,r,d,c),e=0;e<h.length;e++){b=h[e];for(var g=0;g<b.length;g++){var m=b[g];!1===m.isSum&&(m.s0+=0===g?0:b[g-1].s),g+1<b.length&&(b[g].nextP0=b[g+1].p0,b[g].nextS0=b[g+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("../bar/defaults").handleGroupingDefaults,T=_("../bar/defaults").handleText,b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),o=_("./attributes"),i=_("../../components/color"),l=_("../../constants/delta.js"),r=l.INCREASING.COLOR,y=l.DECREASING.COLOR;function h(s,d,p){s(d+".marker.color",p),s(d+".marker.line.color",i.defaultLine),s(d+".marker.line.width")}oe.exports={supplyDefaults:function(s,d,p,c){function g(u,w){return v.coerce(s,d,o,u,w)}if(b(s,d,c,g)){e(s,d,c,g),g("xhoverformat"),g("yhoverformat"),g("measure"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");T(s,d,c,g,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==d.textposition&&(g("texttemplate"),d.texttemplate||g("textinfo")),h(g,"increasing",r),h(g,"decreasing",y),h(g,"totals","#4499FF"),g("connector.visible")&&(g("connector.mode"),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else d.visible=!1},crossTraceDefaults:function(s,d){var p,c;function g(u){return v.coerce(c._input,c,o,u)}if("group"===d.waterfallmode)for(var m=0;m<s.length;m++)p=(c=s[m])._input,x(p,c,d,g)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(_,oe,se){"use strict";oe.exports=function(v,x){return v.x="xVal"in x?x.xVal:x.x,v.y="yVal"in x?x.yVal:x.y,"initial"in x&&(v.initial=x.initial),"delta"in x&&(v.delta=x.delta),"final"in x&&(v.final=x.final),x.xa&&(v.xaxis=x.xa),x.ya&&(v.yaxis=x.ya),v}},{}],1112:[function(_,oe,se){"use strict";var v=_("../../plots/cartesian/axes").hoverLabelText,x=_("../../components/color").opacity,T=_("../bar/hover").hoverOnBars,b=_("../../constants/delta.js"),e=b.INCREASING.SYMBOL,o=b.DECREASING.SYMBOL;oe.exports=function(i,l,r,y,h){var L,I,B,V,s=T(i,l,r,y,h);if(s){var d=s.cd,p=d[0].trace,c="h"===p.orientation,g=c?"x":"y",m=c?i.xa:i.ya,u=d[s.index],w=u.isSum?u.b+u.s:u.rawS;if(!u.isSum){s.initial=u.b+u.s-w,s.delta=w,s.final=s.initial+s.delta;var f=D(Math.abs(s.delta));s.deltaLabel=w<0?"("+f+")":f,s.finalLabel=D(s.final),s.initialLabel=D(s.initial)}var A=u.hi||p.hoverinfo,M=[];if(A&&"none"!==A&&"skip"!==A){var k="all"===A,E=A.split("+"),P=function(F){return k||-1!==E.indexOf(F)};u.isSum||(!P("final")||P(c?"x":"y")||M.push(s.finalLabel),P("delta")&&M.push(w<0?s.deltaLabel+" "+o:s.deltaLabel+" "+e),P("initial")&&M.push("Initial: "+s.initialLabel))}return M.length&&(s.extraText=M.join("<br>")),s.color=(B=(L=p[u.dir].marker).line.color,V=L.line.width,x(I=L.color)?I:x(B)&&V?B:void 0),[s]}function D(F){return v(m,F,p[g+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(_,oe,se){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style").style,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(_,oe,se){"use strict";oe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(_,oe,se){"use strict";var v=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e){var o=!1;function i(y,h){return v.coerce(T,b,x,y,h)}for(var l=0;l<e.length;l++){var r=e[l];if(r.visible&&"waterfall"===r.type){o=!0;break}}o&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../constants/numerical").BADNUM,e=_("../bar/plot"),o=_("../bar/uniform_text").clearMinTextSize;oe.exports=function(i,l,r,y){var s,d,g,m,h=i._fullLayout;o("waterfall",h),e.plot(i,l,r,y,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),s=i,g=(d=l).xaxis,m=d.yaxis,x.makeTraceGroups(y,r,"trace bars").each(function(u){var w=v.select(this),f=u[0].trace,A=x.ensureSingle(w,"g","lines");if(f.connector&&f.connector.visible){var M="h"===f.orientation,k=f.connector.mode,E=A.selectAll("g.line").data(x.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var P=E.size();E.each(function(D,F){if(F===P-1||D.cNext){var R=(Z=g,Y=m,$=[],ie=(Q=M)?Y:Z,(re=[])[0]=(J=Q?Z:Y).c2p((V=D).s0,!0),$[0]=ie.c2p(V.p0,!0),re[1]=J.c2p(V.s1,!0),$[1]=ie.c2p(V.p1,!0),re[2]=J.c2p(V.nextS0,!0),$[2]=ie.c2p(V.nextP0,!0),Q?[re,$]:[$,re]),L=R[0],I=R[1],B="";L[0]!==b&&I[0]!==b&&L[1]!==b&&I[1]!==b&&("spanning"===k&&!D.isSum&&F>0&&(B+=M?"M"+L[0]+","+I[1]+"V"+I[0]:"M"+L[1]+","+I[0]+"H"+L[0]),"between"!==k&&(D.isSum||F<P-1)&&(B+=M?"M"+L[1]+","+I[0]+"V"+I[1]:"M"+L[0]+","+I[1]+"H"+L[1]),L[2]!==b&&I[2]!==b&&(B+=M?"M"+L[1]+","+I[1]+"V"+I[2]:"M"+L[1]+","+I[1]+"H"+L[2])),""===B&&(B="M0,0Z"),x.ensureSingle(v.select(this),"path").attr("d",B).call(T.setClipUrl,d.layerClipId,s)}var V,Z,Y,Q,re,$,J,ie})}else A.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(_,oe,se){"use strict";var v=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../../constants/interactions").DESELECTDIM,e=_("../bar/style"),o=_("../bar/uniform_text").resizeText,i=e.styleTextPoints;oe.exports={style:function(l,r,y){var h=y||v.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");o(l,h,"waterfall"),h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var d=v.select(this),p=s[0].trace;d.selectAll(".point > path").each(function(c){if(!c.isBlank){var g=p[c.dir].marker;v.select(this).call(T.fill,g.color).call(T.stroke,g.line.color).call(x.dashLine,g.line.dash,g.line.width).style("opacity",p.selectedpoints&&!c.selected?b:1)}}),i(d,p,l),d.selectAll(".lines").each(function(){var c=p.connector.line;x.lineGroupStyle(v.select(this).selectAll("path"),c.width,c.color,c.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(_,oe,se){"use strict";var v=_("../plots/cartesian/axes"),x=_("../lib"),T=_("../plot_api/plot_schema"),b=_("./helpers").pointsAccessorFunction,e=_("../constants/numerical").BADNUM;se.moduleType="transform",se.name="aggregate";var o=se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=o.aggregations;function l(s,d,p,c){if(c.enabled){for(var g=c.target,m=x.nestedProperty(d,g),u=m.get(),w=function(M,k){var P=k.d2c,D=k.c2d;switch(M.func){case"count":return r;case"first":return y;case"last":return h;case"sum":return function(F,R){for(var L=0,I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&(L+=B)}return D(L)};case"avg":return function(F,R){for(var L=0,I=0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(L+=V,I++)}return I?D(L/I):e};case"min":return function(F,R){for(var L=1/0,I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&(L=Math.min(L,B))}return L===1/0?e:D(L)};case"max":return function(F,R){for(var L=-1/0,I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&(L=Math.max(L,B))}return L===-1/0?e:D(L)};case"range":return function(F,R){for(var L=1/0,I=-1/0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(L=Math.min(L,V),I=Math.max(I,V))}return I===-1/0||L===1/0?e:D(I-L)};case"change":return function(F,R){var L=P(F[R[0]]),I=P(F[R[R.length-1]]);return L===e||I===e?e:D(I-L)};case"median":return function(F,R){for(var L=[],I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&L.push(B)}if(!L.length)return e;L.sort(x.sorterAsc);var V=(L.length-1)/2;return D((L[Math.floor(V)]+L[Math.ceil(V)])/2)};case"mode":return function(F,R){for(var L={},I=0,B=e,V=0;V<R.length;V++){var Z=P(F[R[V]]);if(Z!==e){var Y=L[Z]=(L[Z]||0)+1;Y>I&&(I=Y,B=Z)}}return I?D(B):e};case"rms":return function(F,R){for(var L=0,I=0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(L+=V*V,I++)}return I?D(Math.sqrt(L/I)):e};case"stddev":return function(F,R){var L,I=0,B=0,V=1,Z=e;for(L=0;L<R.length&&Z===e;L++)Z=P(F[R[L]]);if(Z===e)return e;for(;L<R.length;L++){var Y=P(F[R[L]]);if(Y!==e){var Q=Y-Z;I+=Q,B+=Q*Q,V++}}var re="sample"===M.funcmode?V-1:V;return re?Math.sqrt((B-I*I/V)/re):0}}}(c,v.getDataConversions(s,d,g,u)),f=new Array(p.length),A=0;A<p.length;A++)f[A]=w(u,p[A]);m.set(f),"count"===c.func&&x.pushUnique(d._arrayAttrs,g)}}function r(s,d){return d.length}function y(s,d){return s[d[0]]}function h(s,d){return s[d[d.length-1]]}se.supplyDefaults=function(s,d){var p,c={};function g(D,F){return x.coerce(s,c,o,D,F)}if(!g("enabled"))return c;var m=T.findArrayAttributes(d),u={};for(p=0;p<m.length;p++)u[m[p]]=1;var w=g("groups");if(!Array.isArray(w)){if(!u[w])return c.enabled=!1,c;u[w]=0}var f,A=s.aggregations||[],M=c.aggregations=new Array(A.length);function k(D,F){return x.coerce(A[p],f,i,D,F)}for(p=0;p<A.length;p++){f={_index:p};var E=k("target"),P=k("func");k("enabled")&&E&&(u[E]||"count"===P&&void 0===u[E])?("stddev"===P&&k("funcmode"),u[E]=0,M[p]=f):M[p]={enabled:!1,_index:p}}for(p=0;p<m.length;p++)u[m[p]]&&M.push({target:m[p],func:i.func.dflt,enabled:!0,_index:-1});return c},se.calcTransform=function(s,d,p){if(p.enabled){var c=p.groups,g=x.getTargetArray(d,{target:c});if(g){var m,u,w,A={},M={},k=[],E=b(d.transforms,p),P=g.length;for(d._length&&(P=Math.min(P,d._length)),m=0;m<P;m++)void 0===(w=A[u=g[m]])?(A[u]=k.length,k.push([m]),M[A[u]]=E(m)):(k[w].push(m),M[A[u]]=(M[A[u]]||[]).concat(E(m)));p._indexToPoints=M;var D=p.aggregations;for(m=0;m<D.length;m++)l(s,d,k,D[m]);"string"==typeof c&&l(s,d,k,{target:c,func:"first",enabled:!0}),d._length=k.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../registry"),T=_("../plots/cartesian/axes"),b=_("./helpers").pointsAccessorFunction,e=_("../constants/filter_ops"),o=e.COMPARISON_OPS,i=e.INTERVAL_OPS,l=e.SET_OPS;se.moduleType="transform",se.name="filter",se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(o).concat(i).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},se.supplyDefaults=function(r){var y={};function h(p,c){return v.coerce(r,y,se.attributes,p,c)}if(h("enabled")){var s=h("target");if(v.isArrayOrTypedArray(s)&&0===s.length)return y.enabled=!1,y;h("preservegaps"),h("operation"),h("value");var d=x.getComponentMethod("calendars","handleDefaults");d(r,y,"valuecalendar",null),d(r,y,"targetcalendar",null)}return y},se.calcTransform=function(r,y,h){if(h.enabled){var s=v.getTargetArray(y,h);if(s){var d=h.target,p=s.length;y._length&&(p=Math.min(p,y._length));var c=h.targetcalendar,g=y._arrayAttrs,m=h.preservegaps;if("string"==typeof d){var u=v.nestedProperty(y,d+"calendar").get();u&&(c=u)}var w,f,A=function(R,L,I){var B=R.operation,V=R.value,Z=Array.isArray(V);function Y(J){return-1!==J.indexOf(B)}var Q,re=function(J){return L(J,0,R.valuecalendar)},$=function(J){return L(J,0,I)};switch(Y(o)?Q=re(Z?V[0]:V):Y(i)?Q=Z?[re(V[0]),re(V[1])]:[re(V),re(V)]:Y(l)&&(Q=Z?V.map(re):[re(V)]),B){case"=":return function(J){return $(J)===Q};case"!=":return function(J){return $(J)!==Q};case"<":return function(J){return $(J)<Q};case"<=":return function(J){return $(J)<=Q};case">":return function(J){return $(J)>Q};case">=":return function(J){return $(J)>=Q};case"[]":return function(J){var ie=$(J);return ie>=Q[0]&&ie<=Q[1]};case"()":return function(J){var ie=$(J);return ie>Q[0]&&ie<Q[1]};case"[)":return function(J){var ie=$(J);return ie>=Q[0]&&ie<Q[1]};case"(]":return function(J){var ie=$(J);return ie>Q[0]&&ie<=Q[1]};case"][":return function(J){var ie=$(J);return ie<=Q[0]||ie>=Q[1]};case")(":return function(J){var ie=$(J);return ie<Q[0]||ie>Q[1]};case"](":return function(J){var ie=$(J);return ie<=Q[0]||ie>Q[1]};case")[":return function(J){var ie=$(J);return ie<Q[0]||ie>=Q[1]};case"{}":return function(J){return-1!==Q.indexOf($(J))};case"}{":return function(J){return-1===Q.indexOf($(J))}}}(h,T.getDataToCoordFunc(r,y,d,s),c),M={},k={},E=0;m?(w=function(R){M[R.astr]=v.extendDeep([],R.get()),R.set(new Array(p))},f=function(R,L){var I=M[R.astr][L];R.get()[L]=I}):(w=function(R){M[R.astr]=v.extendDeep([],R.get()),R.set([])},f=function(R,L){var I=M[R.astr][L];R.get().push(I)}),F(w);for(var P=b(y.transforms,h),D=0;D<p;D++)A(s[D])?(F(f,D),k[E++]=P(D)):m&&E++;h._indexToPoints=k,y._length=E}}function F(R,L){for(var I=0;I<g.length;I++)R(v.nestedProperty(y,g[I]),L)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plot_api/plot_schema"),T=_("../plots/plots"),b=_("./helpers").pointsAccessorFunction;function e(o,i){var l,r,y,h,s,d,p,c,g,m,u=i.transform,w=i.transformIndex,f=o.transforms[w].groups,A=b(o.transforms,u);if(!v.isArrayOrTypedArray(f)||0===f.length)return[o];var M=v.filterUnique(f),k=new Array(M.length),E=f.length,P=x.findArrayAttributes(o),D=u.styles||[],F={};for(l=0;l<D.length;l++)F[D[l].target]=D[l].value;u.styles&&(m=v.keyedContainer(u,"styles","target","value.name"));var R={},L={};for(l=0;l<M.length;l++){R[d=M[l]]=l,L[d]=0,(p=k[l]=v.extendDeepNoArrays({},o))._group=d,p.transforms[w]._indexToPoints={};var I=null;for(m&&(I=m.get(d)),p.name=I||""===I?I:v.templateString(u.nameformat,{trace:o.name,group:d}),c=p.transforms,p.transforms=[],r=0;r<c.length;r++)p.transforms[r]=v.extendDeepNoArrays({},c[r]);for(r=0;r<P.length;r++)v.nestedProperty(p,P[r]).set([])}for(y=0;y<P.length;y++){for(h=P[y],r=0,g=[];r<M.length;r++)g[r]=v.nestedProperty(k[r],h).get();for(s=v.nestedProperty(o,h).get(),r=0;r<E;r++)g[R[f[r]]].push(s[r])}for(r=0;r<E;r++)(p=k[R[f[r]]]).transforms[w]._indexToPoints[L[f[r]]]=A(r),L[f[r]]++;for(l=0;l<M.length;l++)d=M[l],T.clearExpandedTraceDefaultColors(p=k[l]),p=v.extendDeepNoArrays(p,F[d]||{});return k}se.moduleType="transform",se.name="groupby",se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},se.supplyDefaults=function(o,i,l){var r,y={};function h(g,m){return v.coerce(o,y,se.attributes,g,m)}if(!h("enabled"))return y;h("groups"),h("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var s=o.styles,d=y.styles=[];if(s)for(r=0;r<s.length;r++){var p=d[r]={};v.coerce(s[r],d[r],se.attributes.styles,"target");var c=v.coerce(s[r],d[r],se.attributes.styles,"value");v.isPlainObject(c)?p.value=v.extendDeep({},c):c&&delete p.value}return y},se.transform=function(o,i){var l,r,y,h=[];for(r=0;r<o.length;r++)for(l=e(o[r],i),y=0;y<l.length;y++)h.push(l[y]);return h}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(_,oe,se){"use strict";se.pointsAccessorFunction=function(v,x){for(var T,b,e=0;e<v.length&&(T=v[e])!==x;e++)T._indexToPoints&&!1!==T.enabled&&(b=T._indexToPoints);return b?function(o){return b[o]}:function(o){return[o]}}},{}],1122:[function(_,oe,se){"use strict";var v=_("../lib"),x=_("../plots/cartesian/axes"),T=_("./helpers").pointsAccessorFunction,b=_("../constants/numerical").BADNUM;se.moduleType="transform",se.name="sort",se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},se.supplyDefaults=function(e){var o={};function i(l,r){return v.coerce(e,o,se.attributes,l,r)}return i("enabled")&&(i("target"),i("order")),o},se.calcTransform=function(e,o,i){if(i.enabled){var l=v.getTargetArray(o,i);if(l){var r=i.target,y=l.length;o._length&&(y=Math.min(y,o._length));var h,s,d=o._arrayAttrs,p=function(f,A,M,k){var E,P=new Array(k),D=new Array(k);for(E=0;E<k;E++)P[E]={v:A[E],i:E};for(P.sort(function(F,R){switch(F.order){case"ascending":return function(L,I){var B=R(L.v),V=R(I.v);return B===b?1:V===b?-1:B-V};case"descending":return function(L,I){var B=R(L.v),V=R(I.v);return B===b?1:V===b?-1:V-B}}}(f,M)),E=0;E<k;E++)D[E]=P[E].i;return D}(i,l,x.getDataToCoordFunc(e,o,r,l),y),c=T(o.transforms,i),g={};for(h=0;h<d.length;h++){var m=v.nestedProperty(o,d[h]),u=m.get(),w=new Array(y);for(s=0;s<y;s++)w[s]=u[p[s]];m.set(w)}for(s=0;s<y;s++)g[s]=c(p[s]);i._indexToPoints=g,o._length=y}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(_,oe,se){"use strict";se.version="2.11.1"},{}],1124:[function(_,oe,se){(function(v){(function(){!function(x){"object"==typeof se&&void 0!==oe?oe.exports=x():("undefined"!=typeof window?window:void 0!==v?v:"undefined"!=typeof self?self:this).stackgl=x()}(function(){return function x(T,b,e){function o(r,y){if(!b[r]){if(!T[r]){var h="function"==typeof _&&_;if(!y&&h)return h(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var d=b[r]={exports:{}};T[r][0].call(d.exports,function(p){return o(T[r][1][p]||p)},d,d.exports,x,T,b,e)}return b[r].exports}for(var i="function"==typeof _&&_,l=0;l<e.length;l++)o(e[l]);return o}({1:[function(x,T,b){"use strict";b.byteLength=function(d){var p=h(d),g=p[1];return 3*(p[0]+g)/4-g},b.toByteArray=function(d){var p,c,E,g=h(d),m=g[0],u=g[1],w=new i(3*(m+(E=u))/4-E),f=0,A=u>0?m-4:m;for(c=0;c<A;c+=4)p=o[d.charCodeAt(c)]<<18|o[d.charCodeAt(c+1)]<<12|o[d.charCodeAt(c+2)]<<6|o[d.charCodeAt(c+3)],w[f++]=p>>16&255,w[f++]=p>>8&255,w[f++]=255&p;return 2===u&&(p=o[d.charCodeAt(c)]<<2|o[d.charCodeAt(c+1)]>>4,w[f++]=255&p),1===u&&(p=o[d.charCodeAt(c)]<<10|o[d.charCodeAt(c+1)]<<4|o[d.charCodeAt(c+2)]>>2,w[f++]=p>>8&255,w[f++]=255&p),w},b.fromByteArray=function(d){for(var p,c=d.length,g=c%3,m=[],u=0,w=c-g;u<w;u+=16383)m.push(s(d,u,u+16383>w?w:u+16383));return 1===g?m.push(e[(p=d[c-1])>>2]+e[p<<4&63]+"=="):2===g&&m.push(e[(p=(d[c-2]<<8)+d[c-1])>>10]+e[p>>4&63]+e[p<<2&63]+"="),m.join("")};for(var e=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,y=l.length;r<y;++r)e[r]=l[r],o[l.charCodeAt(r)]=r;function h(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=d.indexOf("=");return-1===c&&(c=p),[c,c===p?0:4-c%4]}function s(d,p,c){for(var m,u=[],w=p;w<c;w+=3)u.push(e[(m=(d[w]<<16&16711680)+(d[w+1]<<8&65280)+(255&d[w+2]))>>18&63]+e[m>>12&63]+e[m>>6&63]+e[63&m]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(x,T,b){},{}],3:[function(x,T,b){(function(e){(function(){"use strict";var o=x("base64-js"),i=x("ieee754");function l(G){if(G>2147483647)throw new RangeError('The value "'+G+'" is invalid for option "size"');var ee=new Uint8Array(G);return ee.__proto__=r.prototype,ee}function r(G,ee,te){if("number"==typeof G){if("string"==typeof ee)throw new TypeError('The "string" argument must be of type string. Received type number');return s(G)}return y(G,ee,te)}function y(G,ee,te){if("string"==typeof G)return function(de,he){if("string"==typeof he&&""!==he||(he="utf8"),!r.isEncoding(he))throw new TypeError("Unknown encoding: "+he);var be=0|c(de,he),me=l(be),_e=me.write(de,he);return _e!==be&&(me=me.slice(0,_e)),me}(G,ee);if(ArrayBuffer.isView(G))return d(G);if(null==G)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(W(G,ArrayBuffer)||G&&W(G.buffer,ArrayBuffer))return function(de,he,be){if(he<0||de.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<he+(be||0))throw new RangeError('"length" is outside of buffer bounds');var me;return(me=void 0===he&&void 0===be?new Uint8Array(de):void 0===be?new Uint8Array(de,he):new Uint8Array(de,he,be)).__proto__=r.prototype,me}(G,ee,te);if("number"==typeof G)throw new TypeError('The "value" argument must not be of type number. Received type number');var le=G.valueOf&&G.valueOf();if(null!=le&&le!==G)return r.from(le,ee,te);var ue=function(de){if(r.isBuffer(de)){var he=0|p(de.length),be=l(he);return 0===be.length||de.copy(be,0,0,he),be}return void 0!==de.length?"number"!=typeof de.length||ae(de.length)?l(0):d(de):"Buffer"===de.type&&Array.isArray(de.data)?d(de.data):void 0}(G);if(ue)return ue;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof G[Symbol.toPrimitive])return r.from(G[Symbol.toPrimitive]("string"),ee,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function h(G){if("number"!=typeof G)throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function s(G){return h(G),l(G<0?0:0|p(G))}function d(G){for(var ee=G.length<0?0:0|p(G.length),te=l(ee),le=0;le<ee;le+=1)te[le]=255&G[le];return te}function p(G){if(G>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|G}function c(G,ee){if(r.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||W(G,ArrayBuffer))return G.byteLength;if("string"!=typeof G)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var te=G.length,le=arguments.length>2&&!0===arguments[2];if(!le&&0===te)return 0;for(var ue=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return ie(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*te;case"hex":return te>>>1;case"base64":return j(G).length;default:if(ue)return le?-1:ie(G).length;ee=(""+ee).toLowerCase(),ue=!0}}function g(G,ee,te){var le=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===te||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(ee>>>=0))return"";for(G||(G="utf8");;)switch(G){case"hex":return I(this,ee,te);case"utf8":case"utf-8":return F(this,ee,te);case"ascii":return R(this,ee,te);case"latin1":case"binary":return L(this,ee,te);case"base64":return D(this,ee,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ee,te);default:if(le)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),le=!0}}function m(G,ee,te){var le=G[ee];G[ee]=G[te],G[te]=le}function u(G,ee,te,le,ue){if(0===G.length)return-1;if("string"==typeof te?(le=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),ae(te=+te)&&(te=ue?0:G.length-1),te<0&&(te=G.length+te),te>=G.length){if(ue)return-1;te=G.length-1}else if(te<0){if(!ue)return-1;te=0}if("string"==typeof ee&&(ee=r.from(ee,le)),r.isBuffer(ee))return 0===ee.length?-1:w(G,ee,te,le,ue);if("number"==typeof ee)return ee&=255,"function"==typeof Uint8Array.prototype.indexOf?ue?Uint8Array.prototype.indexOf.call(G,ee,te):Uint8Array.prototype.lastIndexOf.call(G,ee,te):w(G,[ee],te,le,ue);throw new TypeError("val must be string, number or Buffer")}function w(G,ee,te,le,ue){var de,he=1,be=G.length,me=ee.length;if(void 0!==le&&("ucs2"===(le=String(le).toLowerCase())||"ucs-2"===le||"utf16le"===le||"utf-16le"===le)){if(G.length<2||ee.length<2)return-1;he=2,be/=2,me/=2,te/=2}function _e(Fe,ve){return 1===he?Fe[ve]:Fe.readUInt16BE(ve*he)}if(ue){var Ee=-1;for(de=te;de<be;de++)if(_e(G,de)===_e(ee,-1===Ee?0:de-Ee)){if(-1===Ee&&(Ee=de),de-Ee+1===me)return Ee*he}else-1!==Ee&&(de-=de-Ee),Ee=-1}else for(te+me>be&&(te=be-me),de=te;de>=0;de--){for(var De=!0,Se=0;Se<me;Se++)if(_e(G,de+Se)!==_e(ee,Se)){De=!1;break}if(De)return de}return-1}function f(G,ee,te,le){te=Number(te)||0;var ue=G.length-te;le?(le=Number(le))>ue&&(le=ue):le=ue;var de=ee.length;le>de/2&&(le=de/2);for(var he=0;he<le;++he){var be=parseInt(ee.substr(2*he,2),16);if(ae(be))return he;G[te+he]=be}return he}function A(G,ee,te,le){return q(ie(ee,G.length-te),G,te,le)}function M(G,ee,te,le){return q(function(ue){for(var de=[],he=0;he<ue.length;++he)de.push(255&ue.charCodeAt(he));return de}(ee),G,te,le)}function k(G,ee,te,le){return M(G,ee,te,le)}function E(G,ee,te,le){return q(j(ee),G,te,le)}function P(G,ee,te,le){return q(function(ue,de){for(var he,be,_e=[],Ee=0;Ee<ue.length&&!((de-=2)<0);++Ee)be=(he=ue.charCodeAt(Ee))>>8,_e.push(he%256),_e.push(be);return _e}(ee,G.length-te),G,te,le)}function D(G,ee,te){return o.fromByteArray(0===ee&&te===G.length?G:G.slice(ee,te))}function F(G,ee,te){te=Math.min(G.length,te);for(var le=[],ue=ee;ue<te;){var de,he,be,me,_e=G[ue],Ee=null,De=_e>239?4:_e>223?3:_e>191?2:1;if(ue+De<=te)switch(De){case 1:_e<128&&(Ee=_e);break;case 2:128==(192&(de=G[ue+1]))&&(me=(31&_e)<<6|63&de)>127&&(Ee=me);break;case 3:he=G[ue+2],128==(192&(de=G[ue+1]))&&128==(192&he)&&(me=(15&_e)<<12|(63&de)<<6|63&he)>2047&&(me<55296||me>57343)&&(Ee=me);break;case 4:he=G[ue+2],be=G[ue+3],128==(192&(de=G[ue+1]))&&128==(192&he)&&128==(192&be)&&(me=(15&_e)<<18|(63&de)<<12|(63&he)<<6|63&be)>65535&&me<1114112&&(Ee=me)}null===Ee?(Ee=65533,De=1):Ee>65535&&(le.push((Ee-=65536)>>>10&1023|55296),Ee=56320|1023&Ee),le.push(Ee),ue+=De}return function(Se){var Fe=Se.length;if(Fe<=4096)return String.fromCharCode.apply(String,Se);for(var ve="",Te=0;Te<Fe;)ve+=String.fromCharCode.apply(String,Se.slice(Te,Te+=4096));return ve}(le)}function R(G,ee,te){var le="";te=Math.min(G.length,te);for(var ue=ee;ue<te;++ue)le+=String.fromCharCode(127&G[ue]);return le}function L(G,ee,te){var le="";te=Math.min(G.length,te);for(var ue=ee;ue<te;++ue)le+=String.fromCharCode(G[ue]);return le}function I(G,ee,te){var le=G.length;(!ee||ee<0)&&(ee=0),(!te||te<0||te>le)&&(te=le);for(var ue="",de=ee;de<te;++de)ue+=J(G[de]);return ue}function B(G,ee,te){for(var le=G.slice(ee,te),ue="",de=0;de<le.length;de+=2)ue+=String.fromCharCode(le[de]+256*le[de+1]);return ue}function V(G,ee,te){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+ee>te)throw new RangeError("Trying to access beyond buffer length")}function Z(G,ee,te,le,ue,de){if(!r.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>ue||ee<de)throw new RangeError('"value" argument is out of bounds');if(te+le>G.length)throw new RangeError("Index out of range")}function Y(G,ee,te,le,ue,de){if(te+le>G.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function Q(G,ee,te,le,ue){return ee=+ee,te>>>=0,ue||Y(G,0,te,4),i.write(G,ee,te,le,23,4),te+4}function re(G,ee,te,le,ue){return ee=+ee,te>>>=0,ue||Y(G,0,te,8),i.write(G,ee,te,le,52,8),te+8}b.Buffer=r,b.SlowBuffer=function(G){return+G!=G&&(G=0),r.alloc(+G)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=2147483647,(r.TYPED_ARRAY_SUPPORT=function(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===G.foo()}catch(ee){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(G,ee,te){return y(G,ee,te)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(G,ee,te){return ue=ee,de=te,h(le=G),le<=0?l(le):void 0!==ue?"string"==typeof de?l(le).fill(ue,de):l(le).fill(ue):l(le);var le,ue,de},r.allocUnsafe=function(G){return s(G)},r.allocUnsafeSlow=function(G){return s(G)},r.isBuffer=function(G){return null!=G&&!0===G._isBuffer&&G!==r.prototype},r.compare=function(G,ee){if(W(G,Uint8Array)&&(G=r.from(G,G.offset,G.byteLength)),W(ee,Uint8Array)&&(ee=r.from(ee,ee.offset,ee.byteLength)),!r.isBuffer(G)||!r.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===ee)return 0;for(var te=G.length,le=ee.length,ue=0,de=Math.min(te,le);ue<de;++ue)if(G[ue]!==ee[ue]){te=G[ue],le=ee[ue];break}return te<le?-1:le<te?1:0},r.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(G,ee){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(0===G.length)return r.alloc(0);var te;if(void 0===ee)for(ee=0,te=0;te<G.length;++te)ee+=G[te].length;var le=r.allocUnsafe(ee),ue=0;for(te=0;te<G.length;++te){var de=G[te];if(W(de,Uint8Array)&&(de=r.from(de)),!r.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(le,ue),ue+=de.length}return le},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var G=this.length;if(G%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ee=0;ee<G;ee+=2)m(this,ee,ee+1);return this},r.prototype.swap32=function(){var G=this.length;if(G%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ee=0;ee<G;ee+=4)m(this,ee,ee+3),m(this,ee+1,ee+2);return this},r.prototype.swap64=function(){var G=this.length;if(G%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ee=0;ee<G;ee+=8)m(this,ee,ee+7),m(this,ee+1,ee+6),m(this,ee+2,ee+5),m(this,ee+3,ee+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var G=this.length;return 0===G?"":0===arguments.length?F(this,0,G):g.apply(this,arguments)},r.prototype.equals=function(G){if(!r.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G||0===r.compare(this,G)},r.prototype.inspect=function(){var G="",ee=b.INSPECT_MAX_BYTES;return G=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(G+=" ... "),"<Buffer "+G+">"},r.prototype.compare=function(G,ee,te,le,ue){if(W(G,Uint8Array)&&(G=r.from(G,G.offset,G.byteLength)),!r.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(void 0===ee&&(ee=0),void 0===te&&(te=G?G.length:0),void 0===le&&(le=0),void 0===ue&&(ue=this.length),ee<0||te>G.length||le<0||ue>this.length)throw new RangeError("out of range index");if(le>=ue&&ee>=te)return 0;if(le>=ue)return-1;if(ee>=te)return 1;if(this===G)return 0;for(var de=(ue>>>=0)-(le>>>=0),he=(te>>>=0)-(ee>>>=0),be=Math.min(de,he),me=this.slice(le,ue),_e=G.slice(ee,te),Ee=0;Ee<be;++Ee)if(me[Ee]!==_e[Ee]){de=me[Ee],he=_e[Ee];break}return de<he?-1:he<de?1:0},r.prototype.includes=function(G,ee,te){return-1!==this.indexOf(G,ee,te)},r.prototype.indexOf=function(G,ee,te){return u(this,G,ee,te,!0)},r.prototype.lastIndexOf=function(G,ee,te){return u(this,G,ee,te,!1)},r.prototype.write=function(G,ee,te,le){if(void 0===ee)le="utf8",te=this.length,ee=0;else if(void 0===te&&"string"==typeof ee)le=ee,te=this.length,ee=0;else{if(!isFinite(ee))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ee>>>=0,isFinite(te)?(te>>>=0,void 0===le&&(le="utf8")):(le=te,te=void 0)}var ue=this.length-ee;if((void 0===te||te>ue)&&(te=ue),G.length>0&&(te<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");for(var de=!1;;)switch(le){case"hex":return f(this,G,ee,te);case"utf8":case"utf-8":return A(this,G,ee,te);case"ascii":return M(this,G,ee,te);case"latin1":case"binary":return k(this,G,ee,te);case"base64":return E(this,G,ee,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,G,ee,te);default:if(de)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),de=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(G,ee){var te=this.length;(G=~~G)<0?(G+=te)<0&&(G=0):G>te&&(G=te),(ee=void 0===ee?te:~~ee)<0?(ee+=te)<0&&(ee=0):ee>te&&(ee=te),ee<G&&(ee=G);var le=this.subarray(G,ee);return le.__proto__=r.prototype,le},r.prototype.readUIntLE=function(G,ee,te){G>>>=0,ee>>>=0,te||V(G,ee,this.length);for(var le=this[G],ue=1,de=0;++de<ee&&(ue*=256);)le+=this[G+de]*ue;return le},r.prototype.readUIntBE=function(G,ee,te){G>>>=0,ee>>>=0,te||V(G,ee,this.length);for(var le=this[G+--ee],ue=1;ee>0&&(ue*=256);)le+=this[G+--ee]*ue;return le},r.prototype.readUInt8=function(G,ee){return G>>>=0,ee||V(G,1,this.length),this[G]},r.prototype.readUInt16LE=function(G,ee){return G>>>=0,ee||V(G,2,this.length),this[G]|this[G+1]<<8},r.prototype.readUInt16BE=function(G,ee){return G>>>=0,ee||V(G,2,this.length),this[G]<<8|this[G+1]},r.prototype.readUInt32LE=function(G,ee){return G>>>=0,ee||V(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+16777216*this[G+3]},r.prototype.readUInt32BE=function(G,ee){return G>>>=0,ee||V(G,4,this.length),16777216*this[G]+(this[G+1]<<16|this[G+2]<<8|this[G+3])},r.prototype.readIntLE=function(G,ee,te){G>>>=0,ee>>>=0,te||V(G,ee,this.length);for(var le=this[G],ue=1,de=0;++de<ee&&(ue*=256);)le+=this[G+de]*ue;return le>=(ue*=128)&&(le-=Math.pow(2,8*ee)),le},r.prototype.readIntBE=function(G,ee,te){G>>>=0,ee>>>=0,te||V(G,ee,this.length);for(var le=ee,ue=1,de=this[G+--le];le>0&&(ue*=256);)de+=this[G+--le]*ue;return de>=(ue*=128)&&(de-=Math.pow(2,8*ee)),de},r.prototype.readInt8=function(G,ee){return G>>>=0,ee||V(G,1,this.length),128&this[G]?-1*(255-this[G]+1):this[G]},r.prototype.readInt16LE=function(G,ee){G>>>=0,ee||V(G,2,this.length);var te=this[G]|this[G+1]<<8;return 32768&te?4294901760|te:te},r.prototype.readInt16BE=function(G,ee){G>>>=0,ee||V(G,2,this.length);var te=this[G+1]|this[G]<<8;return 32768&te?4294901760|te:te},r.prototype.readInt32LE=function(G,ee){return G>>>=0,ee||V(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},r.prototype.readInt32BE=function(G,ee){return G>>>=0,ee||V(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},r.prototype.readFloatLE=function(G,ee){return G>>>=0,ee||V(G,4,this.length),i.read(this,G,!0,23,4)},r.prototype.readFloatBE=function(G,ee){return G>>>=0,ee||V(G,4,this.length),i.read(this,G,!1,23,4)},r.prototype.readDoubleLE=function(G,ee){return G>>>=0,ee||V(G,8,this.length),i.read(this,G,!0,52,8)},r.prototype.readDoubleBE=function(G,ee){return G>>>=0,ee||V(G,8,this.length),i.read(this,G,!1,52,8)},r.prototype.writeUIntLE=function(G,ee,te,le){G=+G,ee>>>=0,te>>>=0,le||Z(this,G,ee,te,Math.pow(2,8*te)-1,0);var ue=1,de=0;for(this[ee]=255&G;++de<te&&(ue*=256);)this[ee+de]=G/ue&255;return ee+te},r.prototype.writeUIntBE=function(G,ee,te,le){G=+G,ee>>>=0,te>>>=0,le||Z(this,G,ee,te,Math.pow(2,8*te)-1,0);var ue=te-1,de=1;for(this[ee+ue]=255&G;--ue>=0&&(de*=256);)this[ee+ue]=G/de&255;return ee+te},r.prototype.writeUInt8=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,1,255,0),this[ee]=255&G,ee+1},r.prototype.writeUInt16LE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,2,65535,0),this[ee]=255&G,this[ee+1]=G>>>8,ee+2},r.prototype.writeUInt16BE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,2,65535,0),this[ee]=G>>>8,this[ee+1]=255&G,ee+2},r.prototype.writeUInt32LE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,4,4294967295,0),this[ee+3]=G>>>24,this[ee+2]=G>>>16,this[ee+1]=G>>>8,this[ee]=255&G,ee+4},r.prototype.writeUInt32BE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,4,4294967295,0),this[ee]=G>>>24,this[ee+1]=G>>>16,this[ee+2]=G>>>8,this[ee+3]=255&G,ee+4},r.prototype.writeIntLE=function(G,ee,te,le){if(G=+G,ee>>>=0,!le){var ue=Math.pow(2,8*te-1);Z(this,G,ee,te,ue-1,-ue)}var de=0,he=1,be=0;for(this[ee]=255&G;++de<te&&(he*=256);)G<0&&0===be&&0!==this[ee+de-1]&&(be=1),this[ee+de]=(G/he>>0)-be&255;return ee+te},r.prototype.writeIntBE=function(G,ee,te,le){if(G=+G,ee>>>=0,!le){var ue=Math.pow(2,8*te-1);Z(this,G,ee,te,ue-1,-ue)}var de=te-1,he=1,be=0;for(this[ee+de]=255&G;--de>=0&&(he*=256);)G<0&&0===be&&0!==this[ee+de+1]&&(be=1),this[ee+de]=(G/he>>0)-be&255;return ee+te},r.prototype.writeInt8=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,1,127,-128),G<0&&(G=255+G+1),this[ee]=255&G,ee+1},r.prototype.writeInt16LE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,2,32767,-32768),this[ee]=255&G,this[ee+1]=G>>>8,ee+2},r.prototype.writeInt16BE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,2,32767,-32768),this[ee]=G>>>8,this[ee+1]=255&G,ee+2},r.prototype.writeInt32LE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,4,2147483647,-2147483648),this[ee]=255&G,this[ee+1]=G>>>8,this[ee+2]=G>>>16,this[ee+3]=G>>>24,ee+4},r.prototype.writeInt32BE=function(G,ee,te){return G=+G,ee>>>=0,te||Z(this,G,ee,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[ee]=G>>>24,this[ee+1]=G>>>16,this[ee+2]=G>>>8,this[ee+3]=255&G,ee+4},r.prototype.writeFloatLE=function(G,ee,te){return Q(this,G,ee,!0,te)},r.prototype.writeFloatBE=function(G,ee,te){return Q(this,G,ee,!1,te)},r.prototype.writeDoubleLE=function(G,ee,te){return re(this,G,ee,!0,te)},r.prototype.writeDoubleBE=function(G,ee,te){return re(this,G,ee,!1,te)},r.prototype.copy=function(G,ee,te,le){if(!r.isBuffer(G))throw new TypeError("argument should be a Buffer");if(te||(te=0),le||0===le||(le=this.length),ee>=G.length&&(ee=G.length),ee||(ee=0),le>0&&le<te&&(le=te),le===te||0===G.length||0===this.length)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(te<0||te>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),G.length-ee<le-te&&(le=G.length-ee+te);var ue=le-te;if(this===G&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(ee,te,le);else if(this===G&&te<ee&&ee<le)for(var de=ue-1;de>=0;--de)G[de+ee]=this[de+te];else Uint8Array.prototype.set.call(G,this.subarray(te,le),ee);return ue},r.prototype.fill=function(G,ee,te,le){if("string"==typeof G){if("string"==typeof ee?(le=ee,ee=0,te=this.length):"string"==typeof te&&(le=te,te=this.length),void 0!==le&&"string"!=typeof le)throw new TypeError("encoding must be a string");if("string"==typeof le&&!r.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(1===G.length){var ue=G.charCodeAt(0);("utf8"===le&&ue<128||"latin1"===le)&&(G=ue)}}else"number"==typeof G&&(G&=255);if(ee<0||this.length<ee||this.length<te)throw new RangeError("Out of range index");if(te<=ee)return this;var de;if(ee>>>=0,te=void 0===te?this.length:te>>>0,G||(G=0),"number"==typeof G)for(de=ee;de<te;++de)this[de]=G;else{var he=r.isBuffer(G)?G:r.from(G,le),be=he.length;if(0===be)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(de=0;de<te-ee;++de)this[de+ee]=he[de%be]}return this};var $=/[^+/0-9A-Za-z-_]/g;function J(G){return G<16?"0"+G.toString(16):G.toString(16)}function ie(G,ee){var te;ee=ee||1/0;for(var le=G.length,ue=null,de=[],he=0;he<le;++he){if((te=G.charCodeAt(he))>55295&&te<57344){if(!ue){if(te>56319){(ee-=3)>-1&&de.push(239,191,189);continue}if(he+1===le){(ee-=3)>-1&&de.push(239,191,189);continue}ue=te;continue}if(te<56320){(ee-=3)>-1&&de.push(239,191,189),ue=te;continue}te=65536+(ue-55296<<10|te-56320)}else ue&&(ee-=3)>-1&&de.push(239,191,189);if(ue=null,te<128){if((ee-=1)<0)break;de.push(te)}else if(te<2048){if((ee-=2)<0)break;de.push(te>>6|192,63&te|128)}else if(te<65536){if((ee-=3)<0)break;de.push(te>>12|224,te>>6&63|128,63&te|128)}else{if(!(te<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;de.push(te>>18|240,te>>12&63|128,te>>6&63|128,63&te|128)}}return de}function j(G){return o.toByteArray(function(ee){if((ee=(ee=ee.split("=")[0]).trim().replace($,"")).length<2)return"";for(;ee.length%4!=0;)ee+="=";return ee}(G))}function q(G,ee,te,le){for(var ue=0;ue<le&&!(ue+te>=ee.length||ue>=G.length);++ue)ee[ue+te]=G[ue];return ue}function W(G,ee){return G instanceof ee||null!=G&&null!=G.constructor&&null!=G.constructor.name&&G.constructor.name===ee.name}function ae(G){return G!=G}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(x,T,b){b.read=function(e,o,i,l,r){var y,h,s=8*r-l-1,d=(1<<s)-1,p=d>>1,c=-7,g=i?r-1:0,m=i?-1:1,u=e[o+g];for(g+=m,y=u&(1<<-c)-1,u>>=-c,c+=s;c>0;y=256*y+e[o+g],g+=m,c-=8);for(h=y&(1<<-c)-1,y>>=-c,c+=l;c>0;h=256*h+e[o+g],g+=m,c-=8);if(0===y)y=1-p;else{if(y===d)return h?NaN:1/0*(u?-1:1);h+=Math.pow(2,l),y-=p}return(u?-1:1)*h*Math.pow(2,y-l)},b.write=function(e,o,i,l,r,y){var h,s,d,p=8*y-r-1,c=(1<<p)-1,g=c>>1,m=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,u=l?0:y-1,w=l?1:-1,f=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,h=c):(h=Math.floor(Math.log(o)/Math.LN2),o*(d=Math.pow(2,-h))<1&&(h--,d*=2),(o+=h+g>=1?m/d:m*Math.pow(2,1-g))*d>=2&&(h++,d/=2),h+g>=c?(s=0,h=c):h+g>=1?(s=(o*d-1)*Math.pow(2,r),h+=g):(s=o*Math.pow(2,g-1)*Math.pow(2,r),h=0));r>=8;e[i+u]=255&s,u+=w,s/=256,r-=8);for(h=h<<r|s,p+=r;p>0;e[i+u]=255&h,u+=w,h/=256,p-=8);e[i+u-w]|=128*f}},{}],5:[function(x,T,b){var e,o,i=T.exports={};function l(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function y(w){if(e===setTimeout)return setTimeout(w,0);if((e===l||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch(f){try{return e.call(null,w,0)}catch(A){return e.call(this,w,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:l}catch(w){e=l}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(w){o=r}}();var h,s=[],d=!1,p=-1;function c(){d&&h&&(d=!1,h.length?s=h.concat(s):p=-1,s.length&&g())}function g(){if(!d){var w=y(c);d=!0;for(var f=s.length;f;){for(h=s,s=[];++p<f;)h&&h[p].run();p=-1,f=s.length}h=null,d=!1,function(A){if(o===clearTimeout)return clearTimeout(A);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(A);try{o(A)}catch(M){try{return o.call(null,A)}catch(k){return o.call(this,A)}}}(w)}}function m(w,f){this.fun=w,this.array=f}function u(){}i.nextTick=function(w){var f=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)f[A-1]=arguments[A];s.push(new m(w,f)),1!==s.length||d||y(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=u,i.addListener=u,i.once=u,i.off=u,i.removeListener=u,i.removeAllListeners=u,i.emit=u,i.prependListener=u,i.prependOnceListener=u,i.listeners=function(w){return[]},i.binding=function(w){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(w){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(x,T,b){T.exports={alpha_shape:x("alpha-shape"),convex_hull:x("convex-hull"),delaunay_triangulate:x("delaunay-triangulate"),gl_cone3d:x("gl-cone3d"),gl_error3d:x("gl-error3d"),gl_heatmap2d:x("gl-heatmap2d"),gl_line3d:x("gl-line3d"),gl_mesh3d:x("gl-mesh3d"),gl_plot2d:x("gl-plot2d"),gl_plot3d:x("gl-plot3d"),gl_pointcloud2d:x("gl-pointcloud2d"),gl_scatter3d:x("gl-scatter3d"),gl_select_box:x("gl-select-box"),gl_spikes2d:x("gl-spikes2d"),gl_streamtube3d:x("gl-streamtube3d"),gl_surface3d:x("gl-surface3d"),ndarray:x("ndarray"),ndarray_linear_interpolate:x("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(x,T,b){"use strict";T.exports=function(y){var h=(y=y||{}).eye||[0,0,1],s=y.center||[0,0,0],d=y.up||[0,1,0],p=y.distanceLimits||[0,1/0],c=y.mode||"turntable",g=e(),m=o(),u=i();return g.setDistanceLimits(p[0],p[1]),g.lookAt(0,h,s,d),m.setDistanceLimits(p[0],p[1]),m.lookAt(0,h,s,d),u.setDistanceLimits(p[0],p[1]),u.lookAt(0,h,s,d),new l({turntable:g,orbit:m,matrix:u},c)};var e=x("turntable-camera-controller"),o=x("orbit-camera-controller"),i=x("matrix-camera-controller");function l(y,h){this._controllerNames=Object.keys(y),this._controllerList=this._controllerNames.map(function(s){return y[s]}),this._mode=h,this._active=y[h],this._active||(this._mode="turntable",this._active=y.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=l.prototype;r.flush=function(y){for(var h=this._controllerList,s=0;s<h.length;++s)h[s].flush(y)},r.idle=function(y){for(var h=this._controllerList,s=0;s<h.length;++s)h[s].idle(y)},r.lookAt=function(y,h,s,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].lookAt(y,h,s,d)},r.rotate=function(y,h,s,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].rotate(y,h,s,d)},r.pan=function(y,h,s,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].pan(y,h,s,d)},r.translate=function(y,h,s,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].translate(y,h,s,d)},r.setMatrix=function(y,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setMatrix(y,h)},r.setDistanceLimits=function(y,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setDistanceLimits(y,h)},r.setDistance=function(y,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setDistance(y,h)},r.recalcMatrix=function(y){this._active.recalcMatrix(y)},r.getDistance=function(y){return this._active.getDistance(y)},r.getDistanceLimits=function(y){return this._active.getDistanceLimits(y)},r.lastT=function(){return this._active.lastT()},r.setMode=function(y){if(y!==this._mode){var h=this._controllerNames.indexOf(y);if(!(h<0)){var s=this._active,d=this._controllerList[h],p=Math.max(s.lastT(),d.lastT());s.recalcMatrix(p),d.setMatrix(p,s.computedMatrix),this._active=d,this._mode=y,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(x,T,b){"use strict";var e="undefined"==typeof WeakMap?x("weak-map"):WeakMap,o=x("gl-buffer"),i=x("gl-vao"),l=new e;T.exports=function(r){var y=l.get(r),h=y&&(y._triangleBuffer.handle||y._triangleBuffer.buffer);if(!h||!r.isBuffer(h)){var s=o(r,new Float32Array([-1,-1,-1,4,4,-1]));(y=i(r,[{buffer:s,type:r.FLOAT,size:2}]))._triangleBuffer=s,l.set(r,y)}y.bind(),r.drawArrays(r.TRIANGLES,0,3),y.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(x,T,b){var e=x("pad-left");T.exports=function(o,i,l){i="number"==typeof i?i:1,l=l||": ";var r=o.split(/\r?\n/),y=String(r.length+i-1).length;return r.map(function(h,s){var d=s+i,p=String(d).length;return e(d,y-p)+l+h}).join("\n")}},{"pad-left":264}],10:[function(x,T,b){"use strict";T.exports=function(i){var l=i.length;if(0===l)return[];if(1===l)return[0];for(var r=i[0].length,y=[i[0]],h=[0],s=1;s<l;++s)if(y.push(i[s]),o(y,r)){if(h.push(s),h.length===r+1)return h}else y.pop();return h};var e=x("robust-orientation");function o(i,l){for(var r=new Array(l+1),y=0;y<i.length;++y)r[y]=i[y];for(y=0;y<=i.length;++y){for(var h=i.length;h<=l;++h){for(var s=new Array(l),d=0;d<l;++d)s[d]=Math.pow(h+1-y,d);r[h]=s}if(e.apply(void 0,r))return!0}return!1}},{"robust-orientation":284}],11:[function(x,T,b){"use strict";T.exports=function(i,l){return e(l).filter(function(r){for(var y=new Array(r.length),h=0;h<r.length;++h)y[h]=l[r[h]];return o(y)*i<1})};var e=x("delaunay-triangulate"),o=x("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(x,T,b){T.exports=function(i,l){return o(e(i,l))};var e=x("alpha-complex"),o=x("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(x,T,b){T.exports=function(e){return atob(e)}},{}],14:[function(x,T,b){"use strict";T.exports=function(i,l){for(var r=l.length,y=new Array(r+1),h=0;h<r;++h){for(var s=new Array(r+1),d=0;d<=r;++d)s[d]=i[d][h];y[h]=s}for(y[r]=new Array(r+1),h=0;h<=r;++h)y[r][h]=1;var p=new Array(r+1);for(h=0;h<r;++h)p[h]=l[h];p[r]=1;var c=e(y,p),g=o(c[r+1]);0===g&&(g=1);var m=new Array(r+1);for(h=0;h<=r;++h)m[h]=o(c[h])/g;return m};var e=x("robust-linear-solve");function o(i){for(var l=0,r=0;r<i.length;++r)l+=i[r];return l}},{"robust-linear-solve":283}],15:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,i){return e(o[0].mul(i[1]).add(i[0].mul(o[1])),o[1].mul(i[1]))}},{"./lib/rationalize":25}],16:[function(x,T,b){"use strict";T.exports=function(e,o){return e[0].mul(o[1]).cmp(o[0].mul(e[1]))}},{}],17:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,i){return e(o[0].mul(i[1]),o[1].mul(i[0]))}},{"./lib/rationalize":25}],18:[function(x,T,b){"use strict";var e=x("./is-rat"),o=x("./lib/is-bn"),i=x("./lib/num-to-bn"),l=x("./lib/str-to-bn"),r=x("./lib/rationalize"),y=x("./div");T.exports=function h(s,d){if(e(s))return d?y(s,h(d)):[s[0].clone(),s[1].clone()];var p,c,g=0;if(o(s))p=s.clone();else if("string"==typeof s)p=l(s);else{if(0===s)return[i(0),i(1)];if(s===Math.floor(s))p=i(s);else{for(;s!==Math.floor(s);)s*=Math.pow(2,256),g-=256;p=i(s)}}if(e(d))p.mul(d[1]),c=d[0].clone();else if(o(d))c=d.clone();else if("string"==typeof d)c=l(d);else if(d)if(d===Math.floor(d))c=i(d);else{for(;d!==Math.floor(d);)d*=Math.pow(2,256),g+=256;c=i(d)}else c=i(1);return g>0?p=p.ushln(g):g<0&&(c=c.ushln(-g)),r(p,c)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(x,T,b){"use strict";var e=x("./lib/is-bn");T.exports=function(o){return Array.isArray(o)&&2===o.length&&e(o[0])&&e(o[1])}},{"./lib/is-bn":23}],20:[function(x,T,b){"use strict";var e=x("bn.js");T.exports=function(o){return o.cmp(new e(0))}},{"bn.js":33}],21:[function(x,T,b){"use strict";var e=x("./bn-sign");T.exports=function(o){var i=o.length,l=o.words,r=0;if(1===i)r=l[0];else if(2===i)r=l[0]+67108864*l[1];else for(var y=0;y<i;y++)r+=l[y]*Math.pow(67108864,y);return e(o)*r}},{"./bn-sign":20}],22:[function(x,T,b){"use strict";var e=x("double-bits"),o=x("bit-twiddle").countTrailingZeros;T.exports=function(i){var l=o(e.lo(i));if(l<32)return l;var r=o(e.hi(i));return r>20?52:r+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(x,T,b){"use strict";x("bn.js"),T.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(x,T,b){"use strict";var e=x("bn.js"),o=x("double-bits");T.exports=function(i){var l=o.exponent(i);return l<52?new e(i):new e(i*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(x,T,b){"use strict";var e=x("./num-to-bn"),o=x("./bn-sign");T.exports=function(i,l){var r=o(i),y=o(l);if(0===r)return[e(0),e(1)];if(0===y)return[e(0),e(0)];y<0&&(i=i.neg(),l=l.neg());var h=i.gcd(l);return h.cmpn(1)?[i.div(h),l.div(h)]:[i,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(x,T,b){"use strict";var e=x("bn.js");T.exports=function(o){return new e(o)}},{"bn.js":33}],27:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,i){return e(o[0].mul(i[0]),o[1].mul(i[1]))}},{"./lib/rationalize":25}],28:[function(x,T,b){"use strict";var e=x("./lib/bn-sign");T.exports=function(o){return e(o[0])*e(o[1])}},{"./lib/bn-sign":20}],29:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,i){return e(o[0].mul(i[1]).sub(o[1].mul(i[0])),o[1].mul(i[1]))}},{"./lib/rationalize":25}],30:[function(x,T,b){"use strict";var e=x("./lib/bn-to-num"),o=x("./lib/ctz");T.exports=function(i){var l=i[0],r=i[1];if(0===l.cmpn(0))return 0;var y=l.abs().divmod(r.abs()),s=e(y.div),d=y.mod,p=l.negative!==r.negative?-1:1;if(0===d.cmpn(0))return p*s;if(s){var c=o(s)+4,g=e(d.ushln(c).divRound(r));return p*(s+g*Math.pow(2,-c))}var m=r.bitLength()-d.bitLength()+53;return g=e(d.ushln(m).divRound(r)),m<1023?p*g*Math.pow(2,-m):p*(g*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(x,T,b){"use strict";function e(h,s,d,p,c){for(var g=c+1;p<=c;){var m=p+c>>>1,u=h[m];(void 0!==d?d(u,s):u-s)>=0?(g=m,c=m-1):p=m+1}return g}function o(h,s,d,p,c){for(var g=c+1;p<=c;){var m=p+c>>>1,u=h[m];(void 0!==d?d(u,s):u-s)>0?(g=m,c=m-1):p=m+1}return g}function i(h,s,d,p,c){for(var g=p-1;p<=c;){var m=p+c>>>1,u=h[m];(void 0!==d?d(u,s):u-s)<0?(g=m,p=m+1):c=m-1}return g}function l(h,s,d,p,c){for(var g=p-1;p<=c;){var m=p+c>>>1,u=h[m];(void 0!==d?d(u,s):u-s)<=0?(g=m,p=m+1):c=m-1}return g}function r(h,s,d,p,c){for(;p<=c;){var g=p+c>>>1,m=h[g],u=void 0!==d?d(m,s):m-s;if(0===u)return g;u<=0?p=g+1:c=g-1}return-1}function y(h,s,d,p,c,g){return"function"==typeof d?g(h,s,d,void 0===p?0:0|p,void 0===c?h.length-1:0|c):g(h,s,void 0,void 0===d?0:0|d,void 0===p?h.length-1:0|p)}T.exports={ge:function(h,s,d,p,c){return y(h,s,d,p,c,e)},gt:function(h,s,d,p,c){return y(h,s,d,p,c,o)},lt:function(h,s,d,p,c){return y(h,s,d,p,c,i)},le:function(h,s,d,p,c){return y(h,s,d,p,c,l)},eq:function(h,s,d,p,c){return y(h,s,d,p,c,r)}}},{}],32:[function(x,T,b){"use strict";function e(i){var l=32;return(i&=-i)&&l--,65535&i&&(l-=16),16711935&i&&(l-=8),252645135&i&&(l-=4),858993459&i&&(l-=2),1431655765&i&&(l-=1),l}b.INT_BITS=32,b.INT_MAX=2147483647,b.INT_MIN=-1<<31,b.sign=function(i){return(i>0)-(i<0)},b.abs=function(i){var l=i>>31;return(i^l)-l},b.min=function(i,l){return l^(i^l)&-(i<l)},b.max=function(i,l){return i^(i^l)&-(i<l)},b.isPow2=function(i){return!(i&i-1||!i)},b.log2=function(i){var l,r;return l=(i>65535)<<4,l|=r=((i>>>=l)>255)<<3,l|=r=((i>>>=r)>15)<<2,(l|=r=((i>>>=r)>3)<<1)|(i>>>=r)>>1},b.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},b.popCount=function(i){return 16843009*((i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135)>>>24},b.countTrailingZeros=e,b.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,1+((i|=i>>>8)|i>>>16)},b.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},b.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var o=new Array(256);(function(i){for(var l=0;l<256;++l){var r=l,y=l,h=7;for(r>>>=1;r;r>>>=1)y<<=1,y|=1&r,--h;i[l]=y<<h&255}})(o),b.reverse=function(i){return o[255&i]<<24|o[i>>>8&255]<<16|o[i>>>16&255]<<8|o[i>>>24&255]},b.interleave2=function(i,l){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},b.deinterleave2=function(i,l){return(i=65535&((i=16711935&((i=252645135&((i=858993459&((i=i>>>l&1431655765)|i>>>1))|i>>>2))|i>>>4))|i>>>16))<<16>>16},b.interleave3=function(i,l,r){return i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2),(i|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},b.deinterleave3=function(i,l){return(i=1023&((i=4278190335&((i=251719695&((i=3272356035&((i=i>>>l&1227133513)|i>>>2))|i>>>4))|i>>>8))|i>>>16))<<22>>22},b.nextCombination=function(i){var l=i|i-1;return l+1|(~l&-~l)-1>>>e(i)+1}},{}],33:[function(x,T,b){!function(e,o){"use strict";function i(L,I){if(!L)throw new Error(I||"Assertion failed")}function l(L,I){L.super_=I;var B=function(){};B.prototype=I.prototype,L.prototype=new B,L.prototype.constructor=L}function r(L,I,B){if(r.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,null!==L&&("le"!==I&&"be"!==I||(B=I,I=10),this._init(L||0,I||10,B||"be"))}var y;"object"==typeof e?e.exports=r:o.BN=r,r.BN=r,r.wordSize=26;try{y="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:x("buffer").Buffer}catch(L){}function h(L,I){var B=L.charCodeAt(I);return B>=65&&B<=70?B-55:B>=97&&B<=102?B-87:B-48&15}function s(L,I,B){var V=h(L,B);return B-1>=I&&(V|=h(L,B-1)<<4),V}function d(L,I,B,V){for(var Z=0,Y=Math.min(L.length,B),Q=I;Q<Y;Q++){var re=L.charCodeAt(Q)-48;Z*=V,Z+=re>=49?re-49+10:re>=17?re-17+10:re}return Z}r.isBN=function(L){return L instanceof r||null!==L&&"object"==typeof L&&L.constructor.wordSize===r.wordSize&&Array.isArray(L.words)},r.max=function(L,I){return L.cmp(I)>0?L:I},r.min=function(L,I){return L.cmp(I)<0?L:I},r.prototype._init=function(L,I,B){if("number"==typeof L)return this._initNumber(L,I,B);if("object"==typeof L)return this._initArray(L,I,B);"hex"===I&&(I=16),i(I===(0|I)&&I>=2&&I<=36);var V=0;"-"===(L=L.toString().replace(/\s+/g,""))[0]&&(V++,this.negative=1),V<L.length&&(16===I?this._parseHex(L,V,B):(this._parseBase(L,I,V),"le"===B&&this._initArray(this.toArray(),I,B)))},r.prototype._initNumber=function(L,I,B){L<0&&(this.negative=1,L=-L),L<67108864?(this.words=[67108863&L],this.length=1):L<4503599627370496?(this.words=[67108863&L,L/67108864&67108863],this.length=2):(i(L<9007199254740992),this.words=[67108863&L,L/67108864&67108863,1],this.length=3),"le"===B&&this._initArray(this.toArray(),I,B)},r.prototype._initArray=function(L,I,B){if(i("number"==typeof L.length),L.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(L.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y,Q=0;if("be"===B)for(V=L.length-1,Z=0;V>=0;V-=3)this.words[Z]|=(Y=L[V]|L[V-1]<<8|L[V-2]<<16)<<Q&67108863,this.words[Z+1]=Y>>>26-Q&67108863,(Q+=24)>=26&&(Q-=26,Z++);else if("le"===B)for(V=0,Z=0;V<L.length;V+=3)this.words[Z]|=(Y=L[V]|L[V+1]<<8|L[V+2]<<16)<<Q&67108863,this.words[Z+1]=Y>>>26-Q&67108863,(Q+=24)>=26&&(Q-=26,Z++);return this.strip()},r.prototype._parseHex=function(L,I,B){this.length=Math.ceil((L.length-I)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y=0,Q=0;if("be"===B)for(V=L.length-1;V>=I;V-=2)Z=s(L,I,V)<<Y,this.words[Q]|=67108863&Z,Y>=18?(Y-=18,this.words[Q+=1]|=Z>>>26):Y+=8;else for(V=(L.length-I)%2==0?I+1:I;V<L.length;V+=2)Z=s(L,I,V)<<Y,this.words[Q]|=67108863&Z,Y>=18?(Y-=18,this.words[Q+=1]|=Z>>>26):Y+=8;this.strip()},r.prototype._parseBase=function(L,I,B){this.words=[0],this.length=1;for(var V=0,Z=1;Z<=67108863;Z*=I)V++;V--,Z=Z/I|0;for(var Y=L.length-B,Q=Y%V,re=Math.min(Y,Y-Q)+B,$=0,J=B;J<re;J+=V)$=d(L,J,J+V,I),this.imuln(Z),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($);if(0!==Q){var ie=1;for($=d(L,J,L.length,I),J=0;J<Q;J++)ie*=I;this.imuln(ie),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($)}this.strip()},r.prototype.copy=function(L){L.words=new Array(this.length);for(var I=0;I<this.length;I++)L.words[I]=this.words[I];L.length=this.length,L.negative=this.negative,L.red=this.red},r.prototype.clone=function(){var L=new r(null);return this.copy(L),L},r.prototype._expand=function(L){for(;this.length<L;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(L,I,B){B.negative=I.negative^L.negative;var V=L.length+I.length|0;B.length=V,V=V-1|0;var Z=0|L.words[0],Y=0|I.words[0],Q=Z*Y,$=Q/67108864|0;B.words[0]=67108863&Q;for(var J=1;J<V;J++){for(var ie=$>>>26,j=67108863&$,q=Math.min(J,I.length-1),W=Math.max(0,J-L.length+1);W<=q;W++)ie+=(Q=(Z=0|L.words[J-W|0])*(Y=0|I.words[W])+j)/67108864|0,j=67108863&Q;B.words[J]=0|j,$=0|ie}return 0!==$?B.words[J]=0|$:B.length--,B.strip()}r.prototype.toString=function(L,I){var B;if(I=0|I||1,16===(L=L||10)||"hex"===L){B="";for(var V=0,Z=0,Y=0;Y<this.length;Y++){var Q=this.words[Y],re=(16777215&(Q<<V|Z)).toString(16);B=0!=(Z=Q>>>24-V&16777215)||Y!==this.length-1?p[6-re.length]+re+B:re+B,(V+=2)>=26&&(V-=26,Y--)}for(0!==Z&&(B=Z.toString(16)+B);B.length%I!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}if(L===(0|L)&&L>=2&&L<=36){var $=c[L],J=g[L];B="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var j=ie.modn(J).toString(L);B=(ie=ie.idivn(J)).isZero()?j+B:p[$-j.length]+j+B}for(this.isZero()&&(B="0"+B);B.length%I!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var L=this.words[0];return 2===this.length?L+=67108864*this.words[1]:3===this.length&&1===this.words[2]?L+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-L:L},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(L,I){return i(void 0!==y),this.toArrayLike(y,L,I)},r.prototype.toArray=function(L,I){return this.toArrayLike(Array,L,I)},r.prototype.toArrayLike=function(L,I,B){var V=this.byteLength(),Z=B||Math.max(1,V);i(V<=Z,"byte array longer than desired length"),i(Z>0,"Requested array length <= 0"),this.strip();var Y,Q,re="le"===I,$=new L(Z),J=this.clone();if(re){for(Q=0;!J.isZero();Q++)Y=J.andln(255),J.iushrn(8),$[Q]=Y;for(;Q<Z;Q++)$[Q]=0}else{for(Q=0;Q<Z-V;Q++)$[Q]=0;for(Q=0;!J.isZero();Q++)Y=J.andln(255),J.iushrn(8),$[Z-Q-1]=Y}return $},r.prototype._countBits=Math.clz32?function(L){return 32-Math.clz32(L)}:function(L){var I=L,B=0;return I>=4096&&(B+=13,I>>>=13),I>=64&&(B+=7,I>>>=7),I>=8&&(B+=4,I>>>=4),I>=2&&(B+=2,I>>>=2),B+I},r.prototype._zeroBits=function(L){if(0===L)return 26;var I=L,B=0;return 0==(8191&I)&&(B+=13,I>>>=13),0==(127&I)&&(B+=7,I>>>=7),0==(15&I)&&(B+=4,I>>>=4),0==(3&I)&&(B+=2,I>>>=2),0==(1&I)&&B++,B},r.prototype.bitLength=function(){var I=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+I},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var L=0,I=0;I<this.length;I++){var B=this._zeroBits(this.words[I]);if(L+=B,26!==B)break}return L},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(L){return 0!==this.negative?this.abs().inotn(L).iaddn(1):this.clone()},r.prototype.fromTwos=function(L){return this.testn(L-1)?this.notn(L).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(L){for(;this.length<L.length;)this.words[this.length++]=0;for(var I=0;I<L.length;I++)this.words[I]=this.words[I]|L.words[I];return this.strip()},r.prototype.ior=function(L){return i(0==(this.negative|L.negative)),this.iuor(L)},r.prototype.or=function(L){return this.length>L.length?this.clone().ior(L):L.clone().ior(this)},r.prototype.uor=function(L){return this.length>L.length?this.clone().iuor(L):L.clone().iuor(this)},r.prototype.iuand=function(L){var I;I=this.length>L.length?L:this;for(var B=0;B<I.length;B++)this.words[B]=this.words[B]&L.words[B];return this.length=I.length,this.strip()},r.prototype.iand=function(L){return i(0==(this.negative|L.negative)),this.iuand(L)},r.prototype.and=function(L){return this.length>L.length?this.clone().iand(L):L.clone().iand(this)},r.prototype.uand=function(L){return this.length>L.length?this.clone().iuand(L):L.clone().iuand(this)},r.prototype.iuxor=function(L){var I,B;this.length>L.length?(I=this,B=L):(I=L,B=this);for(var V=0;V<B.length;V++)this.words[V]=I.words[V]^B.words[V];if(this!==I)for(;V<I.length;V++)this.words[V]=I.words[V];return this.length=I.length,this.strip()},r.prototype.ixor=function(L){return i(0==(this.negative|L.negative)),this.iuxor(L)},r.prototype.xor=function(L){return this.length>L.length?this.clone().ixor(L):L.clone().ixor(this)},r.prototype.uxor=function(L){return this.length>L.length?this.clone().iuxor(L):L.clone().iuxor(this)},r.prototype.inotn=function(L){i("number"==typeof L&&L>=0);var I=0|Math.ceil(L/26),B=L%26;this._expand(I),B>0&&I--;for(var V=0;V<I;V++)this.words[V]=67108863&~this.words[V];return B>0&&(this.words[V]=~this.words[V]&67108863>>26-B),this.strip()},r.prototype.notn=function(L){return this.clone().inotn(L)},r.prototype.setn=function(L,I){i("number"==typeof L&&L>=0);var B=L/26|0,V=L%26;return this._expand(B+1),this.words[B]=I?this.words[B]|1<<V:this.words[B]&~(1<<V),this.strip()},r.prototype.iadd=function(L){var I,B,V;if(0!==this.negative&&0===L.negative)return this.negative=0,I=this.isub(L),this.negative^=1,this._normSign();if(0===this.negative&&0!==L.negative)return L.negative=0,I=this.isub(L),L.negative=1,I._normSign();this.length>L.length?(B=this,V=L):(B=L,V=this);for(var Z=0,Y=0;Y<V.length;Y++)this.words[Y]=67108863&(I=(0|B.words[Y])+(0|V.words[Y])+Z),Z=I>>>26;for(;0!==Z&&Y<B.length;Y++)this.words[Y]=67108863&(I=(0|B.words[Y])+Z),Z=I>>>26;if(this.length=B.length,0!==Z)this.words[this.length]=Z,this.length++;else if(B!==this)for(;Y<B.length;Y++)this.words[Y]=B.words[Y];return this},r.prototype.add=function(L){var I;return 0!==L.negative&&0===this.negative?(L.negative=0,I=this.sub(L),L.negative^=1,I):0===L.negative&&0!==this.negative?(this.negative=0,I=L.sub(this),this.negative=1,I):this.length>L.length?this.clone().iadd(L):L.clone().iadd(this)},r.prototype.isub=function(L){if(0!==L.negative){L.negative=0;var I=this.iadd(L);return L.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(L),this.negative=1,this._normSign();var B,V,Z=this.cmp(L);if(0===Z)return this.negative=0,this.length=1,this.words[0]=0,this;Z>0?(B=this,V=L):(B=L,V=this);for(var Y=0,Q=0;Q<V.length;Q++)Y=(I=(0|B.words[Q])-(0|V.words[Q])+Y)>>26,this.words[Q]=67108863&I;for(;0!==Y&&Q<B.length;Q++)Y=(I=(0|B.words[Q])+Y)>>26,this.words[Q]=67108863&I;if(0===Y&&Q<B.length&&B!==this)for(;Q<B.length;Q++)this.words[Q]=B.words[Q];return this.length=Math.max(this.length,Q),B!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(L){return this.clone().isub(L)};var u=function(L,I,B){var V,Z,Y,Q=L.words,re=I.words,$=B.words,J=0,ie=0|Q[0],j=8191&ie,q=ie>>>13,W=0|Q[1],ae=8191&W,G=W>>>13,ee=0|Q[2],te=8191&ee,le=ee>>>13,ue=0|Q[3],de=8191&ue,he=ue>>>13,be=0|Q[4],me=8191&be,_e=be>>>13,Ee=0|Q[5],De=8191&Ee,Se=Ee>>>13,Fe=0|Q[6],ve=8191&Fe,Te=Fe>>>13,Ie=0|Q[7],Ce=8191&Ie,Re=Ie>>>13,Ue=0|Q[8],qe=8191&Ue,Xe=Ue>>>13,st=0|Q[9],He=8191&st,$e=st>>>13,et=0|re[0],tt=8191&et,ct=et>>>13,bt=0|re[1],At=8191&bt,Ut=bt>>>13,Ct=0|re[2],dt=8191&Ct,at=Ct>>>13,Nt=0|re[3],rn=8191&Nt,en=Nt>>>13,Ge=0|re[4],Qe=8191&Ge,Rt=Ge>>>13,gt=0|re[5],Be=8191&gt,Ve=gt>>>13,Le=0|re[6],je=8191&Le,Ke=Le>>>13,ft=0|re[7],mt=8191&ft,pt=ft>>>13,Ot=0|re[8],Pt=8191&Ot,Jt=Ot>>>13,$t=0|re[9],ut=8191&$t,Dt=$t>>>13;B.negative=L.negative^I.negative,B.length=19;var Wt=(J+(V=Math.imul(j,tt))|0)+((8191&(Z=(Z=Math.imul(j,ct))+Math.imul(q,tt)|0))<<13)|0;J=((Y=Math.imul(q,ct))+(Z>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,V=Math.imul(ae,tt),Z=(Z=Math.imul(ae,ct))+Math.imul(G,tt)|0,Y=Math.imul(G,ct);var zt=(J+(V=V+Math.imul(j,At)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Ut)|0)+Math.imul(q,At)|0))<<13)|0;J=((Y=Y+Math.imul(q,Ut)|0)+(Z>>>13)|0)+(zt>>>26)|0,zt&=67108863,V=Math.imul(te,tt),Z=(Z=Math.imul(te,ct))+Math.imul(le,tt)|0,Y=Math.imul(le,ct),V=V+Math.imul(ae,At)|0,Z=(Z=Z+Math.imul(ae,Ut)|0)+Math.imul(G,At)|0,Y=Y+Math.imul(G,Ut)|0;var Ht=(J+(V=V+Math.imul(j,dt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,at)|0)+Math.imul(q,dt)|0))<<13)|0;J=((Y=Y+Math.imul(q,at)|0)+(Z>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,V=Math.imul(de,tt),Z=(Z=Math.imul(de,ct))+Math.imul(he,tt)|0,Y=Math.imul(he,ct),V=V+Math.imul(te,At)|0,Z=(Z=Z+Math.imul(te,Ut)|0)+Math.imul(le,At)|0,Y=Y+Math.imul(le,Ut)|0,V=V+Math.imul(ae,dt)|0,Z=(Z=Z+Math.imul(ae,at)|0)+Math.imul(G,dt)|0,Y=Y+Math.imul(G,at)|0;var Ne=(J+(V=V+Math.imul(j,rn)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,en)|0)+Math.imul(q,rn)|0))<<13)|0;J=((Y=Y+Math.imul(q,en)|0)+(Z>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,V=Math.imul(me,tt),Z=(Z=Math.imul(me,ct))+Math.imul(_e,tt)|0,Y=Math.imul(_e,ct),V=V+Math.imul(de,At)|0,Z=(Z=Z+Math.imul(de,Ut)|0)+Math.imul(he,At)|0,Y=Y+Math.imul(he,Ut)|0,V=V+Math.imul(te,dt)|0,Z=(Z=Z+Math.imul(te,at)|0)+Math.imul(le,dt)|0,Y=Y+Math.imul(le,at)|0,V=V+Math.imul(ae,rn)|0,Z=(Z=Z+Math.imul(ae,en)|0)+Math.imul(G,rn)|0,Y=Y+Math.imul(G,en)|0;var ot=(J+(V=V+Math.imul(j,Qe)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Rt)|0)+Math.imul(q,Qe)|0))<<13)|0;J=((Y=Y+Math.imul(q,Rt)|0)+(Z>>>13)|0)+(ot>>>26)|0,ot&=67108863,V=Math.imul(De,tt),Z=(Z=Math.imul(De,ct))+Math.imul(Se,tt)|0,Y=Math.imul(Se,ct),V=V+Math.imul(me,At)|0,Z=(Z=Z+Math.imul(me,Ut)|0)+Math.imul(_e,At)|0,Y=Y+Math.imul(_e,Ut)|0,V=V+Math.imul(de,dt)|0,Z=(Z=Z+Math.imul(de,at)|0)+Math.imul(he,dt)|0,Y=Y+Math.imul(he,at)|0,V=V+Math.imul(te,rn)|0,Z=(Z=Z+Math.imul(te,en)|0)+Math.imul(le,rn)|0,Y=Y+Math.imul(le,en)|0,V=V+Math.imul(ae,Qe)|0,Z=(Z=Z+Math.imul(ae,Rt)|0)+Math.imul(G,Qe)|0,Y=Y+Math.imul(G,Rt)|0;var yt=(J+(V=V+Math.imul(j,Be)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Ve)|0)+Math.imul(q,Be)|0))<<13)|0;J=((Y=Y+Math.imul(q,Ve)|0)+(Z>>>13)|0)+(yt>>>26)|0,yt&=67108863,V=Math.imul(ve,tt),Z=(Z=Math.imul(ve,ct))+Math.imul(Te,tt)|0,Y=Math.imul(Te,ct),V=V+Math.imul(De,At)|0,Z=(Z=Z+Math.imul(De,Ut)|0)+Math.imul(Se,At)|0,Y=Y+Math.imul(Se,Ut)|0,V=V+Math.imul(me,dt)|0,Z=(Z=Z+Math.imul(me,at)|0)+Math.imul(_e,dt)|0,Y=Y+Math.imul(_e,at)|0,V=V+Math.imul(de,rn)|0,Z=(Z=Z+Math.imul(de,en)|0)+Math.imul(he,rn)|0,Y=Y+Math.imul(he,en)|0,V=V+Math.imul(te,Qe)|0,Z=(Z=Z+Math.imul(te,Rt)|0)+Math.imul(le,Qe)|0,Y=Y+Math.imul(le,Rt)|0,V=V+Math.imul(ae,Be)|0,Z=(Z=Z+Math.imul(ae,Ve)|0)+Math.imul(G,Be)|0,Y=Y+Math.imul(G,Ve)|0;var It=(J+(V=V+Math.imul(j,je)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Ke)|0)+Math.imul(q,je)|0))<<13)|0;J=((Y=Y+Math.imul(q,Ke)|0)+(Z>>>13)|0)+(It>>>26)|0,It&=67108863,V=Math.imul(Ce,tt),Z=(Z=Math.imul(Ce,ct))+Math.imul(Re,tt)|0,Y=Math.imul(Re,ct),V=V+Math.imul(ve,At)|0,Z=(Z=Z+Math.imul(ve,Ut)|0)+Math.imul(Te,At)|0,Y=Y+Math.imul(Te,Ut)|0,V=V+Math.imul(De,dt)|0,Z=(Z=Z+Math.imul(De,at)|0)+Math.imul(Se,dt)|0,Y=Y+Math.imul(Se,at)|0,V=V+Math.imul(me,rn)|0,Z=(Z=Z+Math.imul(me,en)|0)+Math.imul(_e,rn)|0,Y=Y+Math.imul(_e,en)|0,V=V+Math.imul(de,Qe)|0,Z=(Z=Z+Math.imul(de,Rt)|0)+Math.imul(he,Qe)|0,Y=Y+Math.imul(he,Rt)|0,V=V+Math.imul(te,Be)|0,Z=(Z=Z+Math.imul(te,Ve)|0)+Math.imul(le,Be)|0,Y=Y+Math.imul(le,Ve)|0,V=V+Math.imul(ae,je)|0,Z=(Z=Z+Math.imul(ae,Ke)|0)+Math.imul(G,je)|0,Y=Y+Math.imul(G,Ke)|0;var Vt=(J+(V=V+Math.imul(j,mt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,pt)|0)+Math.imul(q,mt)|0))<<13)|0;J=((Y=Y+Math.imul(q,pt)|0)+(Z>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,V=Math.imul(qe,tt),Z=(Z=Math.imul(qe,ct))+Math.imul(Xe,tt)|0,Y=Math.imul(Xe,ct),V=V+Math.imul(Ce,At)|0,Z=(Z=Z+Math.imul(Ce,Ut)|0)+Math.imul(Re,At)|0,Y=Y+Math.imul(Re,Ut)|0,V=V+Math.imul(ve,dt)|0,Z=(Z=Z+Math.imul(ve,at)|0)+Math.imul(Te,dt)|0,Y=Y+Math.imul(Te,at)|0,V=V+Math.imul(De,rn)|0,Z=(Z=Z+Math.imul(De,en)|0)+Math.imul(Se,rn)|0,Y=Y+Math.imul(Se,en)|0,V=V+Math.imul(me,Qe)|0,Z=(Z=Z+Math.imul(me,Rt)|0)+Math.imul(_e,Qe)|0,Y=Y+Math.imul(_e,Rt)|0,V=V+Math.imul(de,Be)|0,Z=(Z=Z+Math.imul(de,Ve)|0)+Math.imul(he,Be)|0,Y=Y+Math.imul(he,Ve)|0,V=V+Math.imul(te,je)|0,Z=(Z=Z+Math.imul(te,Ke)|0)+Math.imul(le,je)|0,Y=Y+Math.imul(le,Ke)|0,V=V+Math.imul(ae,mt)|0,Z=(Z=Z+Math.imul(ae,pt)|0)+Math.imul(G,mt)|0,Y=Y+Math.imul(G,pt)|0;var ln=(J+(V=V+Math.imul(j,Pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Jt)|0)+Math.imul(q,Pt)|0))<<13)|0;J=((Y=Y+Math.imul(q,Jt)|0)+(Z>>>13)|0)+(ln>>>26)|0,ln&=67108863,V=Math.imul(He,tt),Z=(Z=Math.imul(He,ct))+Math.imul($e,tt)|0,Y=Math.imul($e,ct),V=V+Math.imul(qe,At)|0,Z=(Z=Z+Math.imul(qe,Ut)|0)+Math.imul(Xe,At)|0,Y=Y+Math.imul(Xe,Ut)|0,V=V+Math.imul(Ce,dt)|0,Z=(Z=Z+Math.imul(Ce,at)|0)+Math.imul(Re,dt)|0,Y=Y+Math.imul(Re,at)|0,V=V+Math.imul(ve,rn)|0,Z=(Z=Z+Math.imul(ve,en)|0)+Math.imul(Te,rn)|0,Y=Y+Math.imul(Te,en)|0,V=V+Math.imul(De,Qe)|0,Z=(Z=Z+Math.imul(De,Rt)|0)+Math.imul(Se,Qe)|0,Y=Y+Math.imul(Se,Rt)|0,V=V+Math.imul(me,Be)|0,Z=(Z=Z+Math.imul(me,Ve)|0)+Math.imul(_e,Be)|0,Y=Y+Math.imul(_e,Ve)|0,V=V+Math.imul(de,je)|0,Z=(Z=Z+Math.imul(de,Ke)|0)+Math.imul(he,je)|0,Y=Y+Math.imul(he,Ke)|0,V=V+Math.imul(te,mt)|0,Z=(Z=Z+Math.imul(te,pt)|0)+Math.imul(le,mt)|0,Y=Y+Math.imul(le,pt)|0,V=V+Math.imul(ae,Pt)|0,Z=(Z=Z+Math.imul(ae,Jt)|0)+Math.imul(G,Pt)|0,Y=Y+Math.imul(G,Jt)|0;var un=(J+(V=V+Math.imul(j,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Dt)|0)+Math.imul(q,ut)|0))<<13)|0;J=((Y=Y+Math.imul(q,Dt)|0)+(Z>>>13)|0)+(un>>>26)|0,un&=67108863,V=Math.imul(He,At),Z=(Z=Math.imul(He,Ut))+Math.imul($e,At)|0,Y=Math.imul($e,Ut),V=V+Math.imul(qe,dt)|0,Z=(Z=Z+Math.imul(qe,at)|0)+Math.imul(Xe,dt)|0,Y=Y+Math.imul(Xe,at)|0,V=V+Math.imul(Ce,rn)|0,Z=(Z=Z+Math.imul(Ce,en)|0)+Math.imul(Re,rn)|0,Y=Y+Math.imul(Re,en)|0,V=V+Math.imul(ve,Qe)|0,Z=(Z=Z+Math.imul(ve,Rt)|0)+Math.imul(Te,Qe)|0,Y=Y+Math.imul(Te,Rt)|0,V=V+Math.imul(De,Be)|0,Z=(Z=Z+Math.imul(De,Ve)|0)+Math.imul(Se,Be)|0,Y=Y+Math.imul(Se,Ve)|0,V=V+Math.imul(me,je)|0,Z=(Z=Z+Math.imul(me,Ke)|0)+Math.imul(_e,je)|0,Y=Y+Math.imul(_e,Ke)|0,V=V+Math.imul(de,mt)|0,Z=(Z=Z+Math.imul(de,pt)|0)+Math.imul(he,mt)|0,Y=Y+Math.imul(he,pt)|0,V=V+Math.imul(te,Pt)|0,Z=(Z=Z+Math.imul(te,Jt)|0)+Math.imul(le,Pt)|0,Y=Y+Math.imul(le,Jt)|0;var an=(J+(V=V+Math.imul(ae,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ae,Dt)|0)+Math.imul(G,ut)|0))<<13)|0;J=((Y=Y+Math.imul(G,Dt)|0)+(Z>>>13)|0)+(an>>>26)|0,an&=67108863,V=Math.imul(He,dt),Z=(Z=Math.imul(He,at))+Math.imul($e,dt)|0,Y=Math.imul($e,at),V=V+Math.imul(qe,rn)|0,Z=(Z=Z+Math.imul(qe,en)|0)+Math.imul(Xe,rn)|0,Y=Y+Math.imul(Xe,en)|0,V=V+Math.imul(Ce,Qe)|0,Z=(Z=Z+Math.imul(Ce,Rt)|0)+Math.imul(Re,Qe)|0,Y=Y+Math.imul(Re,Rt)|0,V=V+Math.imul(ve,Be)|0,Z=(Z=Z+Math.imul(ve,Ve)|0)+Math.imul(Te,Be)|0,Y=Y+Math.imul(Te,Ve)|0,V=V+Math.imul(De,je)|0,Z=(Z=Z+Math.imul(De,Ke)|0)+Math.imul(Se,je)|0,Y=Y+Math.imul(Se,Ke)|0,V=V+Math.imul(me,mt)|0,Z=(Z=Z+Math.imul(me,pt)|0)+Math.imul(_e,mt)|0,Y=Y+Math.imul(_e,pt)|0,V=V+Math.imul(de,Pt)|0,Z=(Z=Z+Math.imul(de,Jt)|0)+Math.imul(he,Pt)|0,Y=Y+Math.imul(he,Jt)|0;var wn=(J+(V=V+Math.imul(te,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(te,Dt)|0)+Math.imul(le,ut)|0))<<13)|0;J=((Y=Y+Math.imul(le,Dt)|0)+(Z>>>13)|0)+(wn>>>26)|0,wn&=67108863,V=Math.imul(He,rn),Z=(Z=Math.imul(He,en))+Math.imul($e,rn)|0,Y=Math.imul($e,en),V=V+Math.imul(qe,Qe)|0,Z=(Z=Z+Math.imul(qe,Rt)|0)+Math.imul(Xe,Qe)|0,Y=Y+Math.imul(Xe,Rt)|0,V=V+Math.imul(Ce,Be)|0,Z=(Z=Z+Math.imul(Ce,Ve)|0)+Math.imul(Re,Be)|0,Y=Y+Math.imul(Re,Ve)|0,V=V+Math.imul(ve,je)|0,Z=(Z=Z+Math.imul(ve,Ke)|0)+Math.imul(Te,je)|0,Y=Y+Math.imul(Te,Ke)|0,V=V+Math.imul(De,mt)|0,Z=(Z=Z+Math.imul(De,pt)|0)+Math.imul(Se,mt)|0,Y=Y+Math.imul(Se,pt)|0,V=V+Math.imul(me,Pt)|0,Z=(Z=Z+Math.imul(me,Jt)|0)+Math.imul(_e,Pt)|0,Y=Y+Math.imul(_e,Jt)|0;var Zn=(J+(V=V+Math.imul(de,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(de,Dt)|0)+Math.imul(he,ut)|0))<<13)|0;J=((Y=Y+Math.imul(he,Dt)|0)+(Z>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,V=Math.imul(He,Qe),Z=(Z=Math.imul(He,Rt))+Math.imul($e,Qe)|0,Y=Math.imul($e,Rt),V=V+Math.imul(qe,Be)|0,Z=(Z=Z+Math.imul(qe,Ve)|0)+Math.imul(Xe,Be)|0,Y=Y+Math.imul(Xe,Ve)|0,V=V+Math.imul(Ce,je)|0,Z=(Z=Z+Math.imul(Ce,Ke)|0)+Math.imul(Re,je)|0,Y=Y+Math.imul(Re,Ke)|0,V=V+Math.imul(ve,mt)|0,Z=(Z=Z+Math.imul(ve,pt)|0)+Math.imul(Te,mt)|0,Y=Y+Math.imul(Te,pt)|0,V=V+Math.imul(De,Pt)|0,Z=(Z=Z+Math.imul(De,Jt)|0)+Math.imul(Se,Pt)|0,Y=Y+Math.imul(Se,Jt)|0;var An=(J+(V=V+Math.imul(me,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(me,Dt)|0)+Math.imul(_e,ut)|0))<<13)|0;J=((Y=Y+Math.imul(_e,Dt)|0)+(Z>>>13)|0)+(An>>>26)|0,An&=67108863,V=Math.imul(He,Be),Z=(Z=Math.imul(He,Ve))+Math.imul($e,Be)|0,Y=Math.imul($e,Ve),V=V+Math.imul(qe,je)|0,Z=(Z=Z+Math.imul(qe,Ke)|0)+Math.imul(Xe,je)|0,Y=Y+Math.imul(Xe,Ke)|0,V=V+Math.imul(Ce,mt)|0,Z=(Z=Z+Math.imul(Ce,pt)|0)+Math.imul(Re,mt)|0,Y=Y+Math.imul(Re,pt)|0,V=V+Math.imul(ve,Pt)|0,Z=(Z=Z+Math.imul(ve,Jt)|0)+Math.imul(Te,Pt)|0,Y=Y+Math.imul(Te,Jt)|0;var hn=(J+(V=V+Math.imul(De,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(De,Dt)|0)+Math.imul(Se,ut)|0))<<13)|0;J=((Y=Y+Math.imul(Se,Dt)|0)+(Z>>>13)|0)+(hn>>>26)|0,hn&=67108863,V=Math.imul(He,je),Z=(Z=Math.imul(He,Ke))+Math.imul($e,je)|0,Y=Math.imul($e,Ke),V=V+Math.imul(qe,mt)|0,Z=(Z=Z+Math.imul(qe,pt)|0)+Math.imul(Xe,mt)|0,Y=Y+Math.imul(Xe,pt)|0,V=V+Math.imul(Ce,Pt)|0,Z=(Z=Z+Math.imul(Ce,Jt)|0)+Math.imul(Re,Pt)|0,Y=Y+Math.imul(Re,Jt)|0;var pn=(J+(V=V+Math.imul(ve,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ve,Dt)|0)+Math.imul(Te,ut)|0))<<13)|0;J=((Y=Y+Math.imul(Te,Dt)|0)+(Z>>>13)|0)+(pn>>>26)|0,pn&=67108863,V=Math.imul(He,mt),Z=(Z=Math.imul(He,pt))+Math.imul($e,mt)|0,Y=Math.imul($e,pt),V=V+Math.imul(qe,Pt)|0,Z=(Z=Z+Math.imul(qe,Jt)|0)+Math.imul(Xe,Pt)|0,Y=Y+Math.imul(Xe,Jt)|0;var xn=(J+(V=V+Math.imul(Ce,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(Ce,Dt)|0)+Math.imul(Re,ut)|0))<<13)|0;J=((Y=Y+Math.imul(Re,Dt)|0)+(Z>>>13)|0)+(xn>>>26)|0,xn&=67108863,V=Math.imul(He,Pt),Z=(Z=Math.imul(He,Jt))+Math.imul($e,Pt)|0,Y=Math.imul($e,Jt);var En=(J+(V=V+Math.imul(qe,ut)|0)|0)+((8191&(Z=(Z=Z+Math.imul(qe,Dt)|0)+Math.imul(Xe,ut)|0))<<13)|0;J=((Y=Y+Math.imul(Xe,Dt)|0)+(Z>>>13)|0)+(En>>>26)|0,En&=67108863;var In=(J+(V=Math.imul(He,ut))|0)+((8191&(Z=(Z=Math.imul(He,Dt))+Math.imul($e,ut)|0))<<13)|0;return J=((Y=Math.imul($e,Dt))+(Z>>>13)|0)+(In>>>26)|0,In&=67108863,$[0]=Wt,$[1]=zt,$[2]=Ht,$[3]=Ne,$[4]=ot,$[5]=yt,$[6]=It,$[7]=Vt,$[8]=ln,$[9]=un,$[10]=an,$[11]=wn,$[12]=Zn,$[13]=An,$[14]=hn,$[15]=pn,$[16]=xn,$[17]=En,$[18]=In,0!==J&&($[19]=J,B.length++),B};function w(L,I,B){return(new f).mulp(L,I,B)}function f(L,I){this.x=L,this.y=I}Math.imul||(u=m),r.prototype.mulTo=function(L,I){var B=this.length+L.length;return 10===this.length&&10===L.length?u(this,L,I):B<63?m(this,L,I):B<1024?function(V,Z,Y){Y.negative=Z.negative^V.negative,Y.length=V.length+Z.length;for(var Q=0,re=0,$=0;$<Y.length-1;$++){var J=re;re=0;for(var ie=67108863&Q,j=Math.min($,Z.length-1),q=Math.max(0,$-V.length+1);q<=j;q++){var ae=(0|V.words[$-q])*(0|Z.words[q]),G=67108863&ae;ie=67108863&(G=G+ie|0),re+=(J=(J=J+(ae/67108864|0)|0)+(G>>>26)|0)>>>26,J&=67108863}Y.words[$]=ie,Q=J,J=re}return 0!==Q?Y.words[$]=Q:Y.length--,Y.strip()}(this,L,I):w(this,L,I)},f.prototype.makeRBT=function(L){for(var I=new Array(L),B=r.prototype._countBits(L)-1,V=0;V<L;V++)I[V]=this.revBin(V,B,L);return I},f.prototype.revBin=function(L,I,B){if(0===L||L===B-1)return L;for(var V=0,Z=0;Z<I;Z++)V|=(1&L)<<I-Z-1,L>>=1;return V},f.prototype.permute=function(L,I,B,V,Z,Y){for(var Q=0;Q<Y;Q++)V[Q]=I[L[Q]],Z[Q]=B[L[Q]]},f.prototype.transform=function(L,I,B,V,Z,Y){this.permute(Y,L,I,B,V,Z);for(var Q=1;Q<Z;Q<<=1)for(var re=Q<<1,$=Math.cos(2*Math.PI/re),J=Math.sin(2*Math.PI/re),ie=0;ie<Z;ie+=re)for(var j=$,q=J,W=0;W<Q;W++){var ae=B[ie+W],G=V[ie+W],ee=B[ie+W+Q],te=V[ie+W+Q],le=j*ee-q*te;te=j*te+q*ee,B[ie+W]=ae+(ee=le),V[ie+W]=G+te,B[ie+W+Q]=ae-ee,V[ie+W+Q]=G-te,W!==re&&(le=$*j-J*q,q=$*q+J*j,j=le)}},f.prototype.guessLen13b=function(L,I){var B=1|Math.max(I,L),V=1&B,Z=0;for(B=B/2|0;B;B>>>=1)Z++;return 1<<Z+1+V},f.prototype.conjugate=function(L,I,B){if(!(B<=1))for(var V=0;V<B/2;V++){var Z=L[V];L[V]=L[B-V-1],L[B-V-1]=Z,Z=I[V],I[V]=-I[B-V-1],I[B-V-1]=-Z}},f.prototype.normalize13b=function(L,I){for(var B=0,V=0;V<I/2;V++){var Z=8192*Math.round(L[2*V+1]/I)+Math.round(L[2*V]/I)+B;L[V]=67108863&Z,B=Z<67108864?0:Z/67108864|0}return L},f.prototype.convert13b=function(L,I,B,V){for(var Z=0,Y=0;Y<I;Y++)B[2*Y]=8191&(Z+=0|L[Y]),B[2*Y+1]=8191&(Z>>>=13),Z>>>=13;for(Y=2*I;Y<V;++Y)B[Y]=0;i(0===Z),i(0==(-8192&Z))},f.prototype.stub=function(L){for(var I=new Array(L),B=0;B<L;B++)I[B]=0;return I},f.prototype.mulp=function(L,I,B){var V=2*this.guessLen13b(L.length,I.length),Z=this.makeRBT(V),Y=this.stub(V),Q=new Array(V),re=new Array(V),$=new Array(V),J=new Array(V),ie=new Array(V),j=new Array(V),q=B.words;q.length=V,this.convert13b(L.words,L.length,Q,V),this.convert13b(I.words,I.length,J,V),this.transform(Q,Y,re,$,V,Z),this.transform(J,Y,ie,j,V,Z);for(var W=0;W<V;W++){var ae=re[W]*ie[W]-$[W]*j[W];$[W]=re[W]*j[W]+$[W]*ie[W],re[W]=ae}return this.conjugate(re,$,V),this.transform(re,$,q,Y,V,Z),this.conjugate(q,Y,V),this.normalize13b(q,V),B.negative=L.negative^I.negative,B.length=L.length+I.length,B.strip()},r.prototype.mul=function(L){var I=new r(null);return I.words=new Array(this.length+L.length),this.mulTo(L,I)},r.prototype.mulf=function(L){var I=new r(null);return I.words=new Array(this.length+L.length),w(this,L,I)},r.prototype.imul=function(L){return this.clone().mulTo(L,this)},r.prototype.imuln=function(L){i("number"==typeof L),i(L<67108864);for(var I=0,B=0;B<this.length;B++){var V=(0|this.words[B])*L,Z=(67108863&V)+(67108863&I);I>>=26,I+=V/67108864|0,I+=Z>>>26,this.words[B]=67108863&Z}return 0!==I&&(this.words[B]=I,this.length++),this},r.prototype.muln=function(L){return this.clone().imuln(L)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(L){var I=function(Y){for(var Q=new Array(Y.bitLength()),re=0;re<Q.length;re++){var J=re%26;Q[re]=(Y.words[re/26|0]&1<<J)>>>J}return Q}(L);if(0===I.length)return new r(1);for(var B=this,V=0;V<I.length&&0===I[V];V++,B=B.sqr());if(++V<I.length)for(var Z=B.sqr();V<I.length;V++,Z=Z.sqr())0!==I[V]&&(B=B.mul(Z));return B},r.prototype.iushln=function(L){i("number"==typeof L&&L>=0);var I,B=L%26,V=(L-B)/26,Z=67108863>>>26-B<<26-B;if(0!==B){var Y=0;for(I=0;I<this.length;I++){var Q=this.words[I]&Z;this.words[I]=(0|this.words[I])-Q<<B|Y,Y=Q>>>26-B}Y&&(this.words[I]=Y,this.length++)}if(0!==V){for(I=this.length-1;I>=0;I--)this.words[I+V]=this.words[I];for(I=0;I<V;I++)this.words[I]=0;this.length+=V}return this.strip()},r.prototype.ishln=function(L){return i(0===this.negative),this.iushln(L)},r.prototype.iushrn=function(L,I,B){var V;i("number"==typeof L&&L>=0),V=I?(I-I%26)/26:0;var Z=L%26,Y=Math.min((L-Z)/26,this.length),Q=67108863^67108863>>>Z<<Z,re=B;if(V-=Y,V=Math.max(0,V),re){for(var $=0;$<Y;$++)re.words[$]=this.words[$];re.length=Y}if(0!==Y)if(this.length>Y)for(this.length-=Y,$=0;$<this.length;$++)this.words[$]=this.words[$+Y];else this.words[0]=0,this.length=1;var J=0;for($=this.length-1;$>=0&&(0!==J||$>=V);$--){var ie=0|this.words[$];this.words[$]=J<<26-Z|ie>>>Z,J=ie&Q}return re&&0!==J&&(re.words[re.length++]=J),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(L,I,B){return i(0===this.negative),this.iushrn(L,I,B)},r.prototype.shln=function(L){return this.clone().ishln(L)},r.prototype.ushln=function(L){return this.clone().iushln(L)},r.prototype.shrn=function(L){return this.clone().ishrn(L)},r.prototype.ushrn=function(L){return this.clone().iushrn(L)},r.prototype.testn=function(L){i("number"==typeof L&&L>=0);var I=L%26,B=(L-I)/26;return!(this.length<=B||!(this.words[B]&1<<I))},r.prototype.imaskn=function(L){i("number"==typeof L&&L>=0);var I=L%26,B=(L-I)/26;return i(0===this.negative,"imaskn works only with positive numbers"),this.length<=B?this:(0!==I&&B++,this.length=Math.min(B,this.length),0!==I&&(this.words[this.length-1]&=67108863^67108863>>>I<<I),this.strip())},r.prototype.maskn=function(L){return this.clone().imaskn(L)},r.prototype.iaddn=function(L){return i("number"==typeof L),i(L<67108864),L<0?this.isubn(-L):0!==this.negative?1===this.length&&(0|this.words[0])<L?(this.words[0]=L-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(L),this.negative=1,this):this._iaddn(L)},r.prototype._iaddn=function(L){this.words[0]+=L;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},r.prototype.isubn=function(L){if(i("number"==typeof L),i(L<67108864),L<0)return this.iaddn(-L);if(0!==this.negative)return this.negative=0,this.iaddn(L),this.negative=1,this;if(this.words[0]-=L,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},r.prototype.addn=function(L){return this.clone().iaddn(L)},r.prototype.subn=function(L){return this.clone().isubn(L)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(L,I,B){var V,Z;this._expand(L.length+B);var Q=0;for(V=0;V<L.length;V++){Z=(0|this.words[V+B])+Q;var re=(0|L.words[V])*I;Q=((Z-=67108863&re)>>26)-(re/67108864|0),this.words[V+B]=67108863&Z}for(;V<this.length-B;V++)Q=(Z=(0|this.words[V+B])+Q)>>26,this.words[V+B]=67108863&Z;if(0===Q)return this.strip();for(i(-1===Q),Q=0,V=0;V<this.length;V++)Q=(Z=-(0|this.words[V])+Q)>>26,this.words[V]=67108863&Z;return this.negative=1,this.strip()},r.prototype._wordDiv=function(L,I){var B,V=this.clone(),Z=L,Y=0|Z.words[Z.length-1];0!=(B=26-this._countBits(Y))&&(Z=Z.ushln(B),V.iushln(B),Y=0|Z.words[Z.length-1]);var Q,re=V.length-Z.length;if("mod"!==I){(Q=new r(null)).length=re+1,Q.words=new Array(Q.length);for(var $=0;$<Q.length;$++)Q.words[$]=0}var J=V.clone()._ishlnsubmul(Z,1,re);0===J.negative&&(V=J,Q&&(Q.words[re]=1));for(var ie=re-1;ie>=0;ie--){var j=67108864*(0|V.words[Z.length+ie])+(0|V.words[Z.length+ie-1]);for(j=Math.min(j/Y|0,67108863),V._ishlnsubmul(Z,j,ie);0!==V.negative;)j--,V.negative=0,V._ishlnsubmul(Z,1,ie),V.isZero()||(V.negative^=1);Q&&(Q.words[ie]=j)}return Q&&Q.strip(),V.strip(),"div"!==I&&0!==B&&V.iushrn(B),{div:Q||null,mod:V}},r.prototype.divmod=function(L,I,B){return i(!L.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===L.negative?(Y=this.neg().divmod(L,I),"mod"!==I&&(V=Y.div.neg()),"div"!==I&&(Z=Y.mod.neg(),B&&0!==Z.negative&&Z.iadd(L)),{div:V,mod:Z}):0===this.negative&&0!==L.negative?(Y=this.divmod(L.neg(),I),"mod"!==I&&(V=Y.div.neg()),{div:V,mod:Y.mod}):0!=(this.negative&L.negative)?(Y=this.neg().divmod(L.neg(),I),"div"!==I&&(Z=Y.mod.neg(),B&&0!==Z.negative&&Z.isub(L)),{div:Y.div,mod:Z}):L.length>this.length||this.cmp(L)<0?{div:new r(0),mod:this}:1===L.length?"div"===I?{div:this.divn(L.words[0]),mod:null}:"mod"===I?{div:null,mod:new r(this.modn(L.words[0]))}:{div:this.divn(L.words[0]),mod:new r(this.modn(L.words[0]))}:this._wordDiv(L,I);var V,Z,Y},r.prototype.div=function(L){return this.divmod(L,"div",!1).div},r.prototype.mod=function(L){return this.divmod(L,"mod",!1).mod},r.prototype.umod=function(L){return this.divmod(L,"mod",!0).mod},r.prototype.divRound=function(L){var I=this.divmod(L);if(I.mod.isZero())return I.div;var B=0!==I.div.negative?I.mod.isub(L):I.mod,V=L.ushrn(1),Z=L.andln(1),Y=B.cmp(V);return Y<0||1===Z&&0===Y?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},r.prototype.modn=function(L){i(L<=67108863);for(var I=(1<<26)%L,B=0,V=this.length-1;V>=0;V--)B=(I*B+(0|this.words[V]))%L;return B},r.prototype.idivn=function(L){i(L<=67108863);for(var I=0,B=this.length-1;B>=0;B--){var V=(0|this.words[B])+67108864*I;this.words[B]=V/L|0,I=V%L}return this.strip()},r.prototype.divn=function(L){return this.clone().idivn(L)},r.prototype.egcd=function(L){i(0===L.negative),i(!L.isZero());var I=this,B=L.clone();I=0!==I.negative?I.umod(L):I.clone();for(var V=new r(1),Z=new r(0),Y=new r(0),Q=new r(1),re=0;I.isEven()&&B.isEven();)I.iushrn(1),B.iushrn(1),++re;for(var $=B.clone(),J=I.clone();!I.isZero();){for(var ie=0,j=1;0==(I.words[0]&j)&&ie<26;++ie,j<<=1);if(ie>0)for(I.iushrn(ie);ie-- >0;)(V.isOdd()||Z.isOdd())&&(V.iadd($),Z.isub(J)),V.iushrn(1),Z.iushrn(1);for(var q=0,W=1;0==(B.words[0]&W)&&q<26;++q,W<<=1);if(q>0)for(B.iushrn(q);q-- >0;)(Y.isOdd()||Q.isOdd())&&(Y.iadd($),Q.isub(J)),Y.iushrn(1),Q.iushrn(1);I.cmp(B)>=0?(I.isub(B),V.isub(Y),Z.isub(Q)):(B.isub(I),Y.isub(V),Q.isub(Z))}return{a:Y,b:Q,gcd:B.iushln(re)}},r.prototype._invmp=function(L){i(0===L.negative),i(!L.isZero());var I=this,B=L.clone();I=0!==I.negative?I.umod(L):I.clone();for(var V,Z=new r(1),Y=new r(0),Q=B.clone();I.cmpn(1)>0&&B.cmpn(1)>0;){for(var re=0,$=1;0==(I.words[0]&$)&&re<26;++re,$<<=1);if(re>0)for(I.iushrn(re);re-- >0;)Z.isOdd()&&Z.iadd(Q),Z.iushrn(1);for(var J=0,ie=1;0==(B.words[0]&ie)&&J<26;++J,ie<<=1);if(J>0)for(B.iushrn(J);J-- >0;)Y.isOdd()&&Y.iadd(Q),Y.iushrn(1);I.cmp(B)>=0?(I.isub(B),Z.isub(Y)):(B.isub(I),Y.isub(Z))}return(V=0===I.cmpn(1)?Z:Y).cmpn(0)<0&&V.iadd(L),V},r.prototype.gcd=function(L){if(this.isZero())return L.abs();if(L.isZero())return this.abs();var I=this.clone(),B=L.clone();I.negative=0,B.negative=0;for(var V=0;I.isEven()&&B.isEven();V++)I.iushrn(1),B.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;B.isEven();)B.iushrn(1);var Z=I.cmp(B);if(Z<0){var Y=I;I=B,B=Y}else if(0===Z||0===B.cmpn(1))break;I.isub(B)}return B.iushln(V)},r.prototype.invm=function(L){return this.egcd(L).a.umod(L)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(L){return this.words[0]&L},r.prototype.bincn=function(L){i("number"==typeof L);var I=L%26,B=(L-I)/26,V=1<<I;if(this.length<=B)return this._expand(B+1),this.words[B]|=V,this;for(var Z=V,Y=B;0!==Z&&Y<this.length;Y++){var Q=0|this.words[Y];Z=(Q+=Z)>>>26,this.words[Y]=Q&=67108863}return 0!==Z&&(this.words[Y]=Z,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(L){var I,B=L<0;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;if(this.strip(),this.length>1)I=1;else{B&&(L=-L),i(L<=67108863,"Number is too big");var V=0|this.words[0];I=V===L?0:V<L?-1:1}return 0!==this.negative?0|-I:I},r.prototype.cmp=function(L){if(0!==this.negative&&0===L.negative)return-1;if(0===this.negative&&0!==L.negative)return 1;var I=this.ucmp(L);return 0!==this.negative?0|-I:I},r.prototype.ucmp=function(L){if(this.length>L.length)return 1;if(this.length<L.length)return-1;for(var I=0,B=this.length-1;B>=0;B--){var V=0|this.words[B],Z=0|L.words[B];if(V!==Z){V<Z?I=-1:V>Z&&(I=1);break}}return I},r.prototype.gtn=function(L){return 1===this.cmpn(L)},r.prototype.gt=function(L){return 1===this.cmp(L)},r.prototype.gten=function(L){return this.cmpn(L)>=0},r.prototype.gte=function(L){return this.cmp(L)>=0},r.prototype.ltn=function(L){return-1===this.cmpn(L)},r.prototype.lt=function(L){return-1===this.cmp(L)},r.prototype.lten=function(L){return this.cmpn(L)<=0},r.prototype.lte=function(L){return this.cmp(L)<=0},r.prototype.eqn=function(L){return 0===this.cmpn(L)},r.prototype.eq=function(L){return 0===this.cmp(L)},r.red=function(L){return new F(L)},r.prototype.toRed=function(L){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),L.convertTo(this)._forceRed(L)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(L){return this.red=L,this},r.prototype.forceRed=function(L){return i(!this.red,"Already a number in reduction context"),this._forceRed(L)},r.prototype.redAdd=function(L){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,L)},r.prototype.redIAdd=function(L){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,L)},r.prototype.redSub=function(L){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,L)},r.prototype.redISub=function(L){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,L)},r.prototype.redShl=function(L){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,L)},r.prototype.redMul=function(L){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.mul(this,L)},r.prototype.redIMul=function(L){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.imul(this,L)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(L){return i(this.red&&!L.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,L)};var A={k256:null,p224:null,p192:null,p25519:null};function M(L,I){this.name=L,this.p=new r(I,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(L){if("string"==typeof L){var I=r._prime(L);this.m=I.p,this.prime=I}else i(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}function R(L){F.call(this,L),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var L=new r(null);return L.words=new Array(Math.ceil(this.n/13)),L},M.prototype.ireduce=function(L){var I,B=L;do{this.split(B,this.tmp),I=(B=(B=this.imulK(B)).iadd(this.tmp)).bitLength()}while(I>this.n);var V=I<this.n?-1:B.ucmp(this.p);return 0===V?(B.words[0]=0,B.length=1):V>0?B.isub(this.p):void 0!==B.strip?B.strip():B._strip(),B},M.prototype.split=function(L,I){L.iushrn(this.n,0,I)},M.prototype.imulK=function(L){return L.imul(this.k)},l(k,M),k.prototype.split=function(L,I){for(var B=Math.min(L.length,9),V=0;V<B;V++)I.words[V]=L.words[V];if(I.length=B,L.length<=9)return L.words[0]=0,void(L.length=1);var Z=L.words[9];for(I.words[I.length++]=4194303&Z,V=10;V<L.length;V++){var Y=0|L.words[V];L.words[V-10]=(4194303&Y)<<4|Z>>>22,Z=Y}L.words[V-10]=Z>>>=22,L.length-=0===Z&&L.length>10?10:9},k.prototype.imulK=function(L){L.words[L.length]=0,L.words[L.length+1]=0,L.length+=2;for(var I=0,B=0;B<L.length;B++){var V=0|L.words[B];L.words[B]=67108863&(I+=977*V),I=64*V+(I/67108864|0)}return 0===L.words[L.length-1]&&(L.length--,0===L.words[L.length-1]&&L.length--),L},l(E,M),l(P,M),l(D,M),D.prototype.imulK=function(L){for(var I=0,B=0;B<L.length;B++){var V=19*(0|L.words[B])+I,Z=67108863&V;V>>>=26,L.words[B]=Z,I=V}return 0!==I&&(L.words[L.length++]=I),L},r._prime=function(L){if(A[L])return A[L];var I;if("k256"===L)I=new k;else if("p224"===L)I=new E;else if("p192"===L)I=new P;else{if("p25519"!==L)throw new Error("Unknown prime "+L);I=new D}return A[L]=I,I},F.prototype._verify1=function(L){i(0===L.negative,"red works only with positives"),i(L.red,"red works only with red numbers")},F.prototype._verify2=function(L,I){i(0==(L.negative|I.negative),"red works only with positives"),i(L.red&&L.red===I.red,"red works only with red numbers")},F.prototype.imod=function(L){return this.prime?this.prime.ireduce(L)._forceRed(this):L.umod(this.m)._forceRed(this)},F.prototype.neg=function(L){return L.isZero()?L.clone():this.m.sub(L)._forceRed(this)},F.prototype.add=function(L,I){this._verify2(L,I);var B=L.add(I);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},F.prototype.iadd=function(L,I){this._verify2(L,I);var B=L.iadd(I);return B.cmp(this.m)>=0&&B.isub(this.m),B},F.prototype.sub=function(L,I){this._verify2(L,I);var B=L.sub(I);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},F.prototype.isub=function(L,I){this._verify2(L,I);var B=L.isub(I);return B.cmpn(0)<0&&B.iadd(this.m),B},F.prototype.shl=function(L,I){return this._verify1(L),this.imod(L.ushln(I))},F.prototype.imul=function(L,I){return this._verify2(L,I),this.imod(L.imul(I))},F.prototype.mul=function(L,I){return this._verify2(L,I),this.imod(L.mul(I))},F.prototype.isqr=function(L){return this.imul(L,L.clone())},F.prototype.sqr=function(L){return this.mul(L,L)},F.prototype.sqrt=function(L){if(L.isZero())return L.clone();var I=this.m.andln(3);if(i(I%2==1),3===I){var B=this.m.add(new r(1)).iushrn(2);return this.pow(L,B)}for(var V=this.m.subn(1),Z=0;!V.isZero()&&0===V.andln(1);)Z++,V.iushrn(1);i(!V.isZero());var Y=new r(1).toRed(this),Q=Y.redNeg(),re=this.m.subn(1).iushrn(1),$=this.m.bitLength();for($=new r(2*$*$).toRed(this);0!==this.pow($,re).cmp(Q);)$.redIAdd(Q);for(var J=this.pow($,V),ie=this.pow(L,V.addn(1).iushrn(1)),j=this.pow(L,V),q=Z;0!==j.cmp(Y);){for(var W=j,ae=0;0!==W.cmp(Y);ae++)W=W.redSqr();i(ae<q);var G=this.pow(J,new r(1).iushln(q-ae-1));ie=ie.redMul(G),J=G.redSqr(),j=j.redMul(J),q=ae}return ie},F.prototype.invm=function(L){var I=L._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},F.prototype.pow=function(L,I){if(I.isZero())return new r(1).toRed(this);if(0===I.cmpn(1))return L.clone();var B=new Array(16);B[0]=new r(1).toRed(this),B[1]=L;for(var V=2;V<B.length;V++)B[V]=this.mul(B[V-1],L);var Z=B[0],Y=0,Q=0,re=I.bitLength()%26;for(0===re&&(re=26),V=I.length-1;V>=0;V--){for(var $=I.words[V],J=re-1;J>=0;J--){var ie=$>>J&1;Z!==B[0]&&(Z=this.sqr(Z)),0!==ie||0!==Y?(Y<<=1,Y|=ie,(4==++Q||0===V&&0===J)&&(Z=this.mul(Z,B[Y]),Q=0,Y=0)):Q=0}re=26}return Z},F.prototype.convertTo=function(L){var I=L.umod(this.m);return I===L?I.clone():I},F.prototype.convertFrom=function(L){var I=L.clone();return I.red=null,I},r.mont=function(L){return new R(L)},l(R,F),R.prototype.convertTo=function(L){return this.imod(L.ushln(this.shift))},R.prototype.convertFrom=function(L){var I=this.imod(L.mul(this.rinv));return I.red=null,I},R.prototype.imul=function(L,I){if(L.isZero()||I.isZero())return L.words[0]=0,L.length=1,L;var B=L.imul(I),V=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=B.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},R.prototype.mul=function(L,I){if(L.isZero()||I.isZero())return new r(0)._forceRed(this);var B=L.mul(I),V=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=B.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},R.prototype.invm=function(L){return this.imod(L._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===T||T,this)},{buffer:2}],34:[function(x,T,b){"use strict";T.exports=function(e){var o,i,l,r=e.length,y=0;for(o=0;o<r;++o)y+=e[o].length;var h=new Array(y),s=0;for(o=0;o<r;++o){var d=e[o],p=d.length;for(i=0;i<p;++i){var c=h[s++]=new Array(p-1),g=0;for(l=0;l<p;++l)l!==i&&(c[g++]=d[l]);if(1&i){var m=c[1];c[1]=c[0],c[0]=m}}}return h}},{}],35:[function(x,T,b){"use strict";T.exports=function(c,g,m){switch(arguments.length){case 1:return d(c);case 2:return"function"==typeof g?h(c,c,g,!0):p(c,g);case 3:return h(c,g,m,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,o=x("typedarray-pool"),i=x("./lib/sweep"),l=x("./lib/intersect");function r(c,g){for(var m=0;m<c;++m)if(!(g[m]<=g[m+c]))return!0;return!1}function y(c,g,m,u){for(var w=0,f=0,A=0,M=c.length;A<M;++A){var k=c[A];if(!r(g,k)){for(var E=0;E<2*g;++E)m[w++]=k[E];u[f++]=A}}return f}function h(c,g,m,u){var w=c.length,f=g.length;if(!(w<=0||f<=0)){var A=c[0].length>>>1;if(!(A<=0)){var M,k=o.mallocDouble(2*A*w),E=o.mallocInt32(w);if((w=y(c,A,k,E))>0){if(1===A&&u)i.init(w),M=i.sweepComplete(A,m,0,w,k,E,0,w,k,E);else{var P=o.mallocDouble(2*A*f),D=o.mallocInt32(f);(f=y(g,A,P,D))>0&&(i.init(w+f),M=1===A?i.sweepBipartite(A,m,0,w,k,E,0,f,P,D):l(A,m,u,w,k,E,f,P,D),o.free(P),o.free(D))}o.free(k),o.free(E)}return M}}}function s(c,g){e.push([c,g])}function d(c){return e=[],h(c,c,s,!0),e}function p(c,g){return e=[],h(c,g,s,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(x,T,b){"use strict";function e(o){return o?function(i,l,r,y,h,s,d,p,c,g,m){return h-y>c-p?function(u,w,f,A,M,k,E,P,D,F,R){for(var L=2*u,I=A,B=L*A;I<M;++I,B+=L){var V=k[w+B],Z=k[w+B+u],Y=E[I];e:for(var Q=P,re=L*P;Q<D;++Q,re+=L){var ie=R[Q];if(!(F[w+re+u]<V||Z<F[w+re])){for(var j=w+1;j<u;++j)if(k[j+u+B]<F[j+re]||F[j+u+re]<k[j+B])continue e;var ee=f(Y,ie);if(void 0!==ee)return ee}}}}(i,l,r,y,h,s,d,p,c,g,m):function(u,w,f,A,M,k,E,P,D,F,R){for(var L=2*u,I=P,B=L*P;I<D;++I,B+=L){var V=F[w+B],Z=F[w+B+u],Y=R[I];e:for(var Q=A,re=L*A;Q<M;++Q,re+=L){var ie=E[Q];if(!(Z<k[w+re]||k[w+re+u]<V)){for(var j=w+1;j<u;++j)if(k[j+u+re]<F[j+B]||F[j+u+B]<k[j+re])continue e;var ee=f(ie,Y);if(void 0!==ee)return ee}}}}(i,l,r,y,h,s,d,p,c,g,m)}:function(i,l,r,y,h,s,d,p,c,g,m,u){return s-h>g-c?y?function(w,f,A,M,k,E,P,D,F,R,L){for(var I=2*w,B=M,V=I*M;B<k;++B,V+=I){var Z=E[f+V],Y=E[f+V+w],Q=P[B];e:for(var re=D,$=I*D;re<F;++re,$+=I){var J=R[f+$],ie=L[re];if(!(J<=Z||Y<J)){for(var j=f+1;j<w;++j)if(E[j+w+V]<R[j+$]||R[j+w+$]<E[j+V])continue e;var ee=A(ie,Q);if(void 0!==ee)return ee}}}}(i,l,r,h,s,d,p,c,g,m,u):function(w,f,A,M,k,E,P,D,F,R,L){for(var I=2*w,B=M,V=I*M;B<k;++B,V+=I){var Z=E[f+V],Y=E[f+V+w],Q=P[B];e:for(var re=D,$=I*D;re<F;++re,$+=I){var J=R[f+$],ie=L[re];if(!(J<Z||Y<J)){for(var j=f+1;j<w;++j)if(E[j+w+V]<R[j+$]||R[j+w+$]<E[j+V])continue e;var ee=A(Q,ie);if(void 0!==ee)return ee}}}}(i,l,r,h,s,d,p,c,g,m,u):y?function(w,f,A,M,k,E,P,D,F,R,L){for(var I=2*w,B=D,V=I*D;B<F;++B,V+=I){var Z=R[f+V],Y=L[B];e:for(var Q=M,re=I*M;Q<k;++Q,re+=I){var ie=P[Q];if(!(Z<=E[f+re]||E[f+re+w]<Z)){for(var j=f+1;j<w;++j)if(E[j+w+re]<R[j+V]||R[j+w+V]<E[j+re])continue e;var ee=A(Y,ie);if(void 0!==ee)return ee}}}}(i,l,r,h,s,d,p,c,g,m,u):function(w,f,A,M,k,E,P,D,F,R,L){for(var I=2*w,B=D,V=I*D;B<F;++B,V+=I){var Z=R[f+V],Y=L[B];e:for(var Q=M,re=I*M;Q<k;++Q,re+=I){var ie=P[Q];if(!(Z<E[f+re]||E[f+re+w]<Z)){for(var j=f+1;j<w;++j)if(E[j+w+re]<R[j+V]||R[j+w+V]<E[j+re])continue e;var ee=A(ie,Y);if(void 0!==ee)return ee}}}}(i,l,r,h,s,d,p,c,g,m,u)}}b.partial=e(!1),b.full=e(!0)},{}],37:[function(x,T,b){"use strict";T.exports=function(E,P,D,F,R,L,I,B,V){!function(Ie,Ce){var Re=8*o.log2(Ce+1)*(Ie+1)|0,Ue=o.nextPow2(6*Re);w.length<Ue&&(e.free(w),w=e.mallocInt32(Ue));var qe=o.nextPow2(2*Re);f.length<qe&&(e.free(f),f=e.mallocDouble(qe))}(E,F+I);var Z,Y=0,Q=2*E;for(A(Y++,0,0,F,0,I,D?16:0,-1/0,1/0),D||A(Y++,0,0,I,0,F,1,-1/0,1/0);Y>0;){var re=6*(Y-=1),$=w[re],J=w[re+1],ie=w[re+2],j=w[re+3],q=w[re+4],W=w[re+5],ae=2*Y,G=f[ae],ee=f[ae+1],te=1&W,le=!!(16&W),ue=R,de=L,he=B,be=V;if(te&&(ue=B,de=V,he=R,be=L),!(2&W&&(ie=c(E,$,J,ie,ue,de,ee),J>=ie)||4&W&&(J=g(E,$,J,ie,ue,de,G))>=ie)){var me=ie-J,_e=q-j;if(le){if(E*me*(me+_e)<1<<22){if(void 0!==(Z=y.scanComplete(E,$,P,J,ie,ue,de,j,q,he,be)))return Z;continue}}else{if(E*Math.min(me,_e)<128){if(void 0!==(Z=l(E,$,P,te,J,ie,ue,de,j,q,he,be)))return Z;continue}if(E*me*_e<1<<22){if(void 0!==(Z=y.scanBipartite(E,$,P,te,J,ie,ue,de,j,q,he,be)))return Z;continue}}var Ee=d(E,$,J,ie,ue,de,G,ee);if(J<Ee)if(E*(Ee-J)<128){if(void 0!==(Z=r(E,$+1,P,J,Ee,ue,de,j,q,he,be)))return Z}else if($===E-2){if(void 0!==(Z=te?y.sweepBipartite(E,P,j,q,he,be,J,Ee,ue,de):y.sweepBipartite(E,P,J,Ee,ue,de,j,q,he,be)))return Z}else A(Y++,$+1,J,Ee,j,q,te,-1/0,1/0),A(Y++,$+1,j,q,J,Ee,1^te,-1/0,1/0);if(Ee<ie){var De=h(E,$,j,q,he,be),Se=he[Q*De+$],Fe=p(E,$,De,q,he,be,Se);if(Fe<q&&A(Y++,$,Ee,ie,Fe,q,(4|te)+(le?16:0),Se,ee),j<De&&A(Y++,$,Ee,ie,j,De,(2|te)+(le?16:0),G,Se),De+1===Fe){if(void 0!==(Z=le?k(E,$,P,Ee,ie,ue,de,De,he,be[De]):M(E,$,P,te,Ee,ie,ue,de,De,he,be[De])))return Z}else if(De<Fe){var ve;if(le){if(Ee<(ve=m(E,$,Ee,ie,ue,de,Se))){var Te=p(E,$,Ee,ve,ue,de,Se);if($===E-2){if(Ee<Te&&void 0!==(Z=y.sweepComplete(E,P,Ee,Te,ue,de,De,Fe,he,be))||Te<ve&&void 0!==(Z=y.sweepBipartite(E,P,Te,ve,ue,de,De,Fe,he,be)))return Z}else Ee<Te&&A(Y++,$+1,Ee,Te,De,Fe,16,-1/0,1/0),Te<ve&&(A(Y++,$+1,Te,ve,De,Fe,0,-1/0,1/0),A(Y++,$+1,De,Fe,Te,ve,1,-1/0,1/0))}}else Ee<(ve=te?u(E,$,Ee,ie,ue,de,Se):m(E,$,Ee,ie,ue,de,Se))&&($===E-2?Z=te?y.sweepBipartite(E,P,De,Fe,he,be,Ee,ve,ue,de):y.sweepBipartite(E,P,Ee,ve,ue,de,De,Fe,he,be):(A(Y++,$+1,Ee,ve,De,Fe,te,-1/0,1/0),A(Y++,$+1,De,Fe,Ee,ve,1^te,-1/0,1/0)))}}}}};var e=x("typedarray-pool"),o=x("bit-twiddle"),i=x("./brute"),l=i.partial,r=i.full,y=x("./sweep"),h=x("./median"),s=x("./partition"),d=s("!(lo>=p0)&&!(p1>=hi)"),p=s("lo===p0"),c=s("lo<p0"),g=s("hi<=p0"),m=s("lo<=p0&&p0<=hi"),u=s("lo<p0&&p0<=hi"),w=e.mallocInt32(1024),f=e.mallocDouble(1024);function A(E,P,D,F,R,L,I,B,V){var Z=6*E;w[Z]=P,w[Z+1]=D,w[Z+2]=F,w[Z+3]=R,w[Z+4]=L,w[Z+5]=I;var Y=2*E;f[Y]=B,f[Y+1]=V}function M(E,P,D,F,R,L,I,B,V,Z,Y){var Q=2*E,re=V*Q,$=Z[re+P];e:for(var J=R,ie=R*Q;J<L;++J,ie+=Q){var j=I[ie+P],q=I[ie+P+E];if(!($<j||q<$||F&&$===j)){for(var W,ae=B[J],G=P+1;G<E;++G)if(j=I[ie+G],(q=I[ie+G+E])<Z[re+G]||Z[re+G+E]<j)continue e;if(void 0!==(W=F?D(Y,ae):D(ae,Y)))return W}}}function k(E,P,D,F,R,L,I,B,V,Z){var Y=2*E,Q=B*Y,re=V[Q+P];e:for(var $=F,J=F*Y;$<R;++$,J+=Y){var ie=I[$];if(ie!==Z){var j=L[J+P],q=L[J+P+E];if(!(re<j||q<re)){for(var W=P+1;W<E;++W)if(j=L[J+W],(q=L[J+W+E])<V[Q+W]||V[Q+W+E]<j)continue e;var ee=D(ie,Z);if(void 0!==ee)return ee}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(x,T,b){"use strict";T.exports=function(i,l,r,y,h,s){if(y<=r+1)return r;for(var d=r,p=y,c=y+r>>>1,g=2*i,m=c,u=h[g*c+l];d<p;){if(p-d<8){o(i,l,d,p,h,s),u=h[g*c+l];break}var w=p-d,f=Math.random()*w+d|0,A=h[g*f+l],M=Math.random()*w+d|0,k=h[g*M+l],E=Math.random()*w+d|0,P=h[g*E+l];A<=k?P>=k?(m=M,u=k):A>=P?(m=f,u=A):(m=E,u=P):k>=P?(m=M,u=k):P>=A?(m=f,u=A):(m=E,u=P);for(var D=g*(p-1),F=g*m,R=0;R<g;++R,++D,++F){var L=h[D];h[D]=h[F],h[F]=L}var I=s[p-1];for(s[p-1]=s[m],s[m]=I,D=g*(p-1),F=g*(m=e(i,l,d,p-1,h,s,u)),R=0;R<g;++R,++D,++F)L=h[D],h[D]=h[F],h[F]=L;if(I=s[p-1],s[p-1]=s[m],s[m]=I,c<m){for(p=m-1;d<p&&h[g*(p-1)+l]===u;)p-=1;p+=1}else{if(!(m<c))break;for(d=m+1;d<p&&h[g*d+l]===u;)d+=1}}return e(i,l,r,c,h,s,h[g*c+l])};var e=x("./partition")("lo<p0");function o(i,l,r,y,h,s){for(var d=2*i,p=d*(r+1)+l,c=r+1;c<y;++c,p+=d)for(var g=h[p],m=c,u=d*(c-1);m>r&&h[u+l]>g;--m,u-=d){for(var w=u,f=u+d,A=0;A<d;++A,++w,++f){var M=h[w];h[w]=h[f],h[f]=M}var k=s[m];s[m]=s[m-1],s[m-1]=k}}},{"./partition":39}],39:[function(x,T,b){"use strict";T.exports=function(o){return e[o]};var e={"lo===p0":function(o,i,l,r,y,h,s){for(var d=2*o,p=d*l,c=p,g=l,m=i,u=l;r>u;++u,p+=d)if(y[p+m]===s)if(g===u)g+=1,c+=d;else{for(var w=0;d>w;++w){var f=y[p+w];y[p+w]=y[c],y[c++]=f}var A=h[u];h[u]=h[g],h[g++]=A}return g},"lo<p0":function(o,i,l,r,y,h,s){for(var d=2*o,p=d*l,c=p,g=l,m=i,u=l;r>u;++u,p+=d)if(y[p+m]<s)if(g===u)g+=1,c+=d;else{for(var w=0;d>w;++w){var f=y[p+w];y[p+w]=y[c],y[c++]=f}var A=h[u];h[u]=h[g],h[g++]=A}return g},"lo<=p0":function(o,i,l,r,y,h,s){for(var d=2*o,p=d*l,c=p,g=l,m=o+i,u=l;r>u;++u,p+=d)if(y[p+m]<=s)if(g===u)g+=1,c+=d;else{for(var w=0;d>w;++w){var f=y[p+w];y[p+w]=y[c],y[c++]=f}var A=h[u];h[u]=h[g],h[g++]=A}return g},"hi<=p0":function(o,i,l,r,y,h,s){for(var d=2*o,p=d*l,c=p,g=l,m=o+i,u=l;r>u;++u,p+=d)if(y[p+m]<=s)if(g===u)g+=1,c+=d;else{for(var w=0;d>w;++w){var f=y[p+w];y[p+w]=y[c],y[c++]=f}var A=h[u];h[u]=h[g],h[g++]=A}return g},"lo<p0&&p0<=hi":function(o,i,l,r,y,h,s){for(var d=2*o,p=d*l,c=p,g=l,m=i,u=o+i,w=l;r>w;++w,p+=d)if(y[p+m]<s&&s<=y[p+u])if(g===w)g+=1,c+=d;else{for(var M=0;d>M;++M){var k=y[p+M];y[p+M]=y[c],y[c++]=k}var E=h[w];h[w]=h[g],h[g++]=E}return g},"lo<=p0&&p0<=hi":function(o,i,l,r,y,h,s){for(var d=2*o,p=d*l,c=p,g=l,m=i,u=o+i,w=l;r>w;++w,p+=d)if(y[p+m]<=s&&s<=y[p+u])if(g===w)g+=1,c+=d;else{for(var M=0;d>M;++M){var k=y[p+M];y[p+M]=y[c],y[c++]=k}var E=h[w];h[w]=h[g],h[g++]=E}return g},"!(lo>=p0)&&!(p1>=hi)":function(o,i,l,r,y,h,s,d){for(var p=2*o,c=p*l,g=c,m=l,u=i,w=o+i,f=l;r>f;++f,c+=p)if(!(y[c+u]>=s||d>=y[c+w]))if(m===f)m+=1,g+=p;else{for(var k=0;p>k;++k){var E=y[c+k];y[c+k]=y[g],y[g++]=E}var P=h[f];h[f]=h[m],h[m++]=P}return m}}},{}],40:[function(x,T,b){"use strict";function e(s,d,p){for(var c=2*(s+1),g=s+1;g<=d;++g){for(var m=p[c++],u=p[c++],w=g,f=c-2;w-- >s;){var A=p[f-2],M=p[f-1];if(A<m||A===m&&M<u)break;p[f]=A,p[f+1]=M,f-=2}p[f]=m,p[f+1]=u}}function o(s,d,p){var c=p[s*=2],g=p[s+1];p[s]=p[d*=2],p[s+1]=p[d+1],p[d]=c,p[d+1]=g}function i(s,d,p){p[s*=2]=p[d*=2],p[s+1]=p[d+1]}function l(s,d,p,c){p*=2;var g=c[s*=2],m=c[s+1];c[s]=c[d*=2],c[s+1]=c[d+1],c[d]=c[p],c[d+1]=c[p+1],c[p]=g,c[p+1]=m}function r(s,d,p,c,g){g[s*=2]=g[d*=2],g[d]=p,g[s+1]=g[d+1],g[d+1]=c}function y(s,d,p){var c=p[s*=2],g=p[d*=2];return!(c<g)&&(c!==g||p[s+1]>p[d+1])}function h(s,d,p,c){var g=c[s*=2];return g<d||g===d&&c[s+1]<p}T.exports=function(s,d){d<=128?e(0,d-1,s):function p(c,g,m){var u=(g-c+1)/6|0,w=c+u,f=g-u,A=c+g>>1,M=A-u,k=A+u,E=w,P=M,D=A,F=k,R=f,L=c+1,I=g-1,B=0;y(E,P,m)&&(B=E,E=P,P=B),y(F,R,m)&&(B=F,F=R,R=B),y(E,D,m)&&(B=E,E=D,D=B),y(P,D,m)&&(B=P,P=D,D=B),y(E,F,m)&&(B=E,E=F,F=B),y(D,F,m)&&(B=D,D=F,F=B),y(P,R,m)&&(B=P,P=R,R=B),y(P,D,m)&&(B=P,P=D,D=B),y(F,R,m)&&(B=F,F=R,R=B);for(var V=m[2*P],Z=m[2*P+1],Y=m[2*F],Q=m[2*F+1],re=2*E,$=2*D,J=2*R,ie=2*w,j=2*A,q=2*f,W=0;W<2;++W){var G=m[$+W],ee=m[J+W];m[ie+W]=m[re+W],m[j+W]=G,m[q+W]=ee}i(M,c,m),i(k,g,m);for(var te=L;te<=I;++te)if(h(te,V,Z,m))te!==L&&o(te,L,m),++L;else if(!h(te,Y,Q,m))for(;;){if(h(I,Y,Q,m)){h(I,V,Z,m)?(l(te,L,I,m),++L,--I):(o(te,I,m),--I);break}if(--I<te)break}r(c,L-1,V,Z,m),r(g,I+1,Y,Q,m),L-2-c<=32?e(c,L-2,m):p(c,L-2,m),g-(I+2)<=32?e(I+2,g,m):p(I+2,g,m),I-L<=32?e(L,I,m):p(L,I,m)}(0,d-1,s)}},{}],41:[function(x,T,b){"use strict";T.exports={init:function(m){var u=o.nextPow2(m);l.length<u&&(e.free(l),l=e.mallocInt32(u)),r.length<u&&(e.free(r),r=e.mallocInt32(u)),y.length<u&&(e.free(y),y=e.mallocInt32(u)),h.length<u&&(e.free(h),h=e.mallocInt32(u)),s.length<u&&(e.free(s),s=e.mallocInt32(u)),d.length<u&&(e.free(d),d=e.mallocInt32(u));var w=8*u;p.length<w&&(e.free(p),p=e.mallocDouble(w))},sweepBipartite:function(m,u,w,f,A,M,k,E,P,D){for(var F=0,R=2*m,L=m-1,I=R-1,B=w;B<f;++B){var V=M[B],Z=R*B;p[F++]=A[Z+L],p[F++]=-(V+1),p[F++]=A[Z+I],p[F++]=V}for(B=k;B<E;++B){V=D[B]+(1<<28);var Y=R*B;p[F++]=P[Y+L],p[F++]=-V,p[F++]=P[Y+I],p[F++]=V}var Q=F>>>1;i(p,Q);var re=0,$=0;for(B=0;B<Q;++B){var J=0|p[2*B+1];if(J>=1<<28)c(y,h,$--,J=J-(1<<28)|0);else if(J>=0)c(l,r,re--,J);else if(J<=-(1<<28)){J=-J-(1<<28)|0;for(var ie=0;ie<re;++ie)if(void 0!==(j=u(l[ie],J)))return j;g(y,h,$++,J)}else{for(J=-J-1|0,ie=0;ie<$;++ie){var j;if(void 0!==(j=u(J,y[ie])))return j}g(l,r,re++,J)}}},sweepComplete:function(m,u,w,f,A,M,k,E,P,D){for(var F=0,R=2*m,L=m-1,I=R-1,B=w;B<f;++B){var V=M[B]+1<<1,Z=R*B;p[F++]=A[Z+L],p[F++]=-V,p[F++]=A[Z+I],p[F++]=V}for(B=k;B<E;++B){V=D[B]+1<<1;var Y=R*B;p[F++]=P[Y+L],p[F++]=1|-V,p[F++]=P[Y+I],p[F++]=1|V}var Q=F>>>1;i(p,Q);var re=0,$=0,J=0;for(B=0;B<Q;++B){var ie=0|p[2*B+1],j=1&ie;if(B<Q-1&&ie>>1==p[2*B+3]>>1&&(j=2,B+=1),ie<0){for(var q=-(ie>>1)-1,W=0;W<J;++W)if(void 0!==(ae=u(s[W],q)))return ae;if(0!==j)for(W=0;W<re;++W)if(void 0!==(ae=u(l[W],q)))return ae;if(1!==j)for(W=0;W<$;++W){var ae;if(void 0!==(ae=u(y[W],q)))return ae}0===j?g(l,r,re++,q):1===j?g(y,h,$++,q):2===j&&g(s,d,J++,q)}else q=(ie>>1)-1,0===j?c(l,r,re--,q):1===j?c(y,h,$--,q):2===j&&c(s,d,J--,q)}},scanBipartite:function(m,u,w,f,A,M,k,E,P,D,F,R){var L=0,I=2*m,B=u,V=u+m,Z=1,Y=1;f?Y=1<<28:Z=1<<28;for(var Q=A;Q<M;++Q){var re=Q+Z,$=I*Q;p[L++]=k[$+B],p[L++]=-re,p[L++]=k[$+V],p[L++]=re}for(Q=P;Q<D;++Q)re=Q+Y,p[L++]=F[I*Q+B],p[L++]=-re;var ie=L>>>1;i(p,ie);var j=0;for(Q=0;Q<ie;++Q){var q=0|p[2*Q+1];if(q<0){var W=!1;if((re=-q)>=1<<28?(W=!f,re-=1<<28):(W=!!f,re-=1),W)g(l,r,j++,re);else{var ae=R[re],G=I*re,ee=F[G+u+1],te=F[G+u+1+m];e:for(var le=0;le<j;++le){var ue=l[le],de=I*ue;if(!(te<k[de+u+1]||k[de+u+1+m]<ee)){for(var he=u+2;he<m;++he)if(F[G+he+m]<k[de+he]||k[de+he+m]<F[G+he])continue e;var be,me=E[ue];if(void 0!==(be=f?w(ae,me):w(me,ae)))return be}}}}else c(l,r,j--,q-Z)}},scanComplete:function(m,u,w,f,A,M,k,E,P,D,F){for(var R=0,L=2*m,I=u,B=u+m,V=f;V<A;++V){var Z=V+268435456,Y=L*V;p[R++]=M[Y+I],p[R++]=-Z,p[R++]=M[Y+B],p[R++]=Z}for(V=E;V<P;++V)Z=V+1,p[R++]=D[L*V+I],p[R++]=-Z;var re=R>>>1;i(p,re);var $=0;for(V=0;V<re;++V){var J=0|p[2*V+1];if(J<0)if((Z=-J)>=1<<28)l[$++]=Z-(1<<28);else{var ie=F[Z-=1],j=L*Z,q=D[j+u+1],W=D[j+u+1+m];e:for(var ae=0;ae<$;++ae){var G=l[ae],ee=k[G];if(ee===ie)break;var te=L*G;if(!(W<M[te+u+1]||M[te+u+1+m]<q)){for(var le=u+2;le<m;++le)if(D[j+le+m]<M[te+le]||M[te+le+m]<D[j+le])continue e;var ue=w(ee,ie);if(void 0!==ue)return ue}}}else{for(Z=J-(1<<28),ae=$-1;ae>=0;--ae)if(l[ae]===Z){for(le=ae+1;le<$;++le)l[le-1]=l[le];break}--$}}}};var e=x("typedarray-pool"),o=x("bit-twiddle"),i=x("./sort"),l=e.mallocInt32(1024),r=e.mallocInt32(1024),y=e.mallocInt32(1024),h=e.mallocInt32(1024),s=e.mallocInt32(1024),d=e.mallocInt32(1024),p=e.mallocDouble(8192);function c(m,u,w,f){var A=u[f],M=m[w-1];m[A]=M,u[M]=A}function g(m,u,w,f){m[w]=f,u[f]=w}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(x,T,b){"use strict";var e=x("./lib/monotone"),o=x("./lib/triangulation"),i=x("./lib/delaunay"),l=x("./lib/filter");function r(s){return[Math.min(s[0],s[1]),Math.max(s[0],s[1])]}function y(s,d){return s[0]-d[0]||s[1]-d[1]}function h(s,d,p){return d in s?s[d]:p}T.exports=function(s,d,p){Array.isArray(d)?(p=p||{},d=d||[]):(p=d||{},d=[]);var c=!!h(p,"delaunay",!0),g=!!h(p,"interior",!0),m=!!h(p,"exterior",!0),u=!!h(p,"infinity",!1);if(!g&&!m||0===s.length)return[];var w=e(s,d);if(c||g!==m||u){for(var f=o(s.length,d.map(r).sort(y)),A=0;A<w.length;++A){var M=w[A];f.addTriangle(M[0],M[1],M[2])}return c&&i(s,f),m?g?u?l(f,0,u):f.cells():l(f,1,u):l(f,-1)}return w}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(x,T,b){"use strict";var e=x("robust-in-sphere")[4];function o(i,l,r,y,h,s){var d=l.opposite(y,h);if(!(d<0)){if(h<y){var p=y;y=h,h=p,p=s,s=d,d=p}l.isConstraint(y,h)||e(i[y],i[h],i[s],i[d])<0&&r.push(y,h)}}x("binary-search-bounds"),T.exports=function(i,l){for(var r=[],y=i.length,h=l.stars,s=0;s<y;++s)for(var d=h[s],p=1;p<d.length;p+=2)if(!((u=d[p])<s||l.isConstraint(s,u))){for(var c=d[p-1],g=-1,m=1;m<d.length;m+=2)if(d[m-1]===u){g=d[m];break}g<0||e(i[s],i[u],i[c],i[g])<0&&r.push(s,u)}for(;r.length>0;){for(var u=r.pop(),w=(c=-1,g=-1,d=h[s=r.pop()],1);w<d.length;w+=2){var f=d[w-1],A=d[w];f===u?g=A:A===u&&(c=f)}c<0||g<0||e(i[s],i[u],i[c],i[g])>=0||(l.flip(s,u),o(i,l,r,c,s,g),o(i,l,r,s,g,c),o(i,l,r,g,u,c),o(i,l,r,u,c,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(x,T,b){"use strict";var e,o=x("binary-search-bounds");function i(r,y,h,s,d,p,c){this.cells=r,this.neighbor=y,this.flags=s,this.constraint=h,this.active=d,this.next=p,this.boundary=c}function l(r,y){return r[0]-y[0]||r[1]-y[1]||r[2]-y[2]}T.exports=function(r,y,h){var s=function(P,D){for(var F=P.cells(),R=F.length,L=0;L<R;++L){var I=(j=F[L])[0],B=j[1],V=j[2];B<V?B<I&&(j[0]=B,j[1]=V,j[2]=I):V<I&&(j[0]=V,j[1]=I,j[2]=B)}F.sort(l);var Z=new Array(R);for(L=0;L<Z.length;++L)Z[L]=0;var Y=[],Q=[],re=new Array(3*R),$=new Array(3*R),J=null;D&&(J=[]);var ie=new i(F,re,$,Z,Y,Q,J);for(L=0;L<R;++L)for(var j=F[L],q=0;q<3;++q){var W=re[3*L+q]=ie.locate(B=j[(q+1)%3],I=j[q],P.opposite(B,I)),ae=$[3*L+q]=P.isConstraint(I,B);W<0&&(ae?Q.push(L):(Y.push(L),Z[L]=1),D&&J.push([B,I,-1]))}return ie}(r,h);if(0===y)return h?s.cells.concat(s.boundary):s.cells;for(var d=1,p=s.active,c=s.next,g=s.flags,m=s.cells,u=s.constraint,w=s.neighbor;p.length>0||c.length>0;){for(;p.length>0;){var f=p.pop();if(g[f]!==-d){g[f]=d;for(var A=0;A<3;++A){var M=w[3*f+A];M>=0&&0===g[M]&&(u[3*f+A]?c.push(M):(p.push(M),g[M]=d))}}}var k=c;c=p,p=k,c.length=0,d=-d}var E=function(P,D,F){for(var R=0,L=0;L<P.length;++L)D[L]===F&&(P[R++]=P[L]);return P.length=R,P}(m,g,y);return h?E.concat(s.boundary):E},i.prototype.locate=(e=[0,0,0],function(r,y,h){var s=r,d=y,p=h;return y<h?y<r&&(s=y,d=h,p=r):h<r&&(s=h,d=r,p=y),s<0?-1:(e[0]=s,e[1]=d,e[2]=p,o.eq(this.cells,e,l))})},{"binary-search-bounds":31}],45:[function(x,T,b){"use strict";var e=x("binary-search-bounds"),o=x("robust-orientation")[3];function i(c,g,m,u,w){this.a=c,this.b=g,this.idx=m,this.lowerIds=u,this.upperIds=w}function l(c,g,m,u){this.a=c,this.b=g,this.type=m,this.idx=u}function r(c,g){var m=c.a[0]-g.a[0]||c.a[1]-g.a[1]||c.type-g.type;return m||(0!==c.type&&(m=o(c.a,c.b,g.b))?m:c.idx-g.idx)}function y(c,g){return o(c.a,c.b,g)}function h(c,g,m,u,w){for(var f=e.lt(g,u,y),A=e.gt(g,u,y),M=f;M<A;++M){for(var k=g[M],E=k.lowerIds,P=E.length;P>1&&o(m[E[P-2]],m[E[P-1]],u)>0;)c.push([E[P-1],E[P-2],w]),P-=1;E.length=P,E.push(w);var D=k.upperIds;for(P=D.length;P>1&&o(m[D[P-2]],m[D[P-1]],u)<0;)c.push([D[P-2],D[P-1],w]),P-=1;D.length=P,D.push(w)}}function s(c,g){var m;return(m=c.a[0]<g.a[0]?o(c.a,c.b,g.a):o(g.b,g.a,c.a))?m:(m=g.b[0]<c.b[0]?o(c.a,c.b,g.b):o(g.b,g.a,c.b))||c.idx-g.idx}function d(c,g,m){var u=e.le(c,m,s),w=c[u],f=w.upperIds,A=f[f.length-1];w.upperIds=[A],c.splice(u+1,0,new i(m.a,m.b,m.idx,[A],f))}function p(c,g,m){var u=m.a;m.a=m.b,m.b=u;var w=e.eq(c,m,s);c[w-1].upperIds=c[w].upperIds,c.splice(w,1)}T.exports=function(c,g){for(var m=c.length,u=g.length,w=[],f=0;f<m;++f)w.push(new l(c[f],null,0,f));for(f=0;f<u;++f){var A=g[f],M=c[A[0]],k=c[A[1]];M[0]<k[0]?w.push(new l(M,k,2,f),new l(k,M,1,f)):M[0]>k[0]&&w.push(new l(k,M,2,f),new l(M,k,1,f))}w.sort(r);for(var E=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),P=[new i([E,1],[E,0],-1,[],[],[],[])],D=[],F=(f=0,w.length);f<F;++f){var R=w[f],L=R.type;0===L?h(D,P,c,R.a,R.idx):2===L?d(P,0,R):p(P,0,R)}return D}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(x,T,b){"use strict";var e=x("binary-search-bounds");function o(r,y){this.stars=r,this.edges=y}T.exports=function(r,y){for(var h=new Array(r),s=0;s<r;++s)h[s]=[];return new o(h,y)};var i=o.prototype;function l(r,y,h){for(var s=1,d=r.length;s<d;s+=2)if(r[s-1]===y&&r[s]===h)return r[s-1]=r[d-2],r[s]=r[d-1],void(r.length=d-2)}i.isConstraint=function(){var r=[0,0];function y(h,s){return h[0]-s[0]||h[1]-s[1]}return function(h,s){return r[0]=Math.min(h,s),r[1]=Math.max(h,s),e.eq(this.edges,r,y)>=0}}(),i.removeTriangle=function(r,y,h){var s=this.stars;l(s[r],y,h),l(s[y],h,r),l(s[h],r,y)},i.addTriangle=function(r,y,h){var s=this.stars;s[r].push(y,h),s[y].push(h,r),s[h].push(r,y)},i.opposite=function(r,y){for(var h=this.stars[y],s=1,d=h.length;s<d;s+=2)if(h[s]===r)return h[s-1];return-1},i.flip=function(r,y){var h=this.opposite(r,y),s=this.opposite(y,r);this.removeTriangle(r,y,h),this.removeTriangle(y,r,s),this.addTriangle(r,s,h),this.addTriangle(y,h,s)},i.edges=function(){for(var r=this.stars,y=[],h=0,s=r.length;h<s;++h)for(var d=r[h],p=0,c=d.length;p<c;p+=2)y.push([d[p],d[p+1]]);return y},i.cells=function(){for(var r=this.stars,y=[],h=0,s=r.length;h<s;++h)for(var d=r[h],p=0,c=d.length;p<c;p+=2){var g=d[p],m=d[p+1];h<Math.min(g,m)&&y.push([h,g,m])}return y}},{"binary-search-bounds":31}],47:[function(x,T,b){"use strict";T.exports=function(e){for(var o=1,i=1;i<e.length;++i)for(var l=0;l<i;++l)if(e[i]<e[l])o=-o;else if(e[l]===e[i])return 0;return o}},{}],48:[function(x,T,b){"use strict";var e=x("dup"),o=x("robust-linear-solve");function i(y,h){for(var s=0,d=y.length,p=0;p<d;++p)s+=y[p]*h[p];return s}function l(y){var h=y.length;if(0===h)return[];var s=e([y.length+1,y.length+1],1),d=e([y.length+1],1);s[h][h]=0;for(var p=0;p<h;++p){for(var c=0;c<=p;++c)s[c][p]=s[p][c]=2*i(y[p],y[c]);d[p]=i(y[p],y[p])}var g=o(s,d),m=0,u=g[h+1];for(p=0;p<u.length;++p)m+=u[p];var w=new Array(h);for(p=0;p<h;++p){u=g[p];var f=0;for(c=0;c<u.length;++c)f+=u[c];w[p]=f/m}return w}function r(y){if(0===y.length)return[];for(var h=y[0].length,s=e([h]),d=l(y),p=0;p<y.length;++p)for(var c=0;c<h;++c)s[c]+=y[p][c]*d[p];return s}r.barycenetric=l,T.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(x,T,b){T.exports=function(o){for(var i=e(o),l=0,r=0;r<o.length;++r)for(var y=o[r],h=0;h<i.length;++h)l+=Math.pow(y[h]-i[h],2);return Math.sqrt(l/o.length)};var e=x("circumcenter")},{circumcenter:48}],50:[function(x,T,b){"use strict";T.exports=function(A,M,k){var E,L,B,V;if(k){E=M;for(var P=new Array(M.length),D=0;D<M.length;++D){var F=M[D];P[D]=[F[0],F[1],k[D]]}M=P}for(var R=(B=!!k,void 0,w(M,V=g(L=A,[],c(L)),B),!!V);f(A,M,!!k);)R=!0;if(k&&R)for(E.length=0,k.length=0,D=0;D<M.length;++D)E.push([(F=M[D])[0],F[1]]),k.push(F[2]);return R};var e=x("union-find"),o=x("box-intersect"),i=x("robust-segment-intersect"),l=x("big-rat"),r=x("big-rat/cmp"),y=x("big-rat/to-float"),h=x("rat-vec"),s=x("nextafter"),d=x("./lib/rat-seg-intersect");function p(A){var M=y(A);return[s(M,-1/0),s(M,1/0)]}function c(A){for(var M=new Array(A.length),k=0;k<A.length;++k){var E=A[k];M[k]=[s(E[0],-1/0),s(E[1],-1/0),s(E[0],1/0),s(E[1],1/0)]}return M}function g(A,M,k){for(var E=M.length,P=new e(E),D=[],F=0;F<M.length;++F){var R=M[F],L=p(R[0]),I=p(R[1]);D.push([s(L[0],-1/0),s(I[0],-1/0),s(L[1],1/0),s(I[1],1/0)])}o(D,function(Q,re){P.link(Q,re)});var B=!0,V=new Array(E);for(F=0;F<E;++F)(Y=P.find(F))!==F&&(B=!1,A[Y]=[Math.min(A[F][0],A[Y][0]),Math.min(A[F][1],A[Y][1])]);if(B)return null;var Z=0;for(F=0;F<E;++F){var Y;(Y=P.find(F))===F?(V[F]=Z,A[Z++]=A[F]):V[F]=-1}for(A.length=Z,F=0;F<E;++F)V[F]<0&&(V[F]=V[P.find(F)]);return V}function m(A,M){return A[0]-M[0]||A[1]-M[1]}function u(A,M){return A[0]-M[0]||A[1]-M[1]||(A[2]<M[2]?-1:A[2]>M[2]?1:0)}function w(A,M,k){if(0!==A.length){if(M)for(var E=0;E<A.length;++E){var P=M[(F=A[E])[0]],D=M[F[1]];F[0]=Math.min(P,D),F[1]=Math.max(P,D)}else for(E=0;E<A.length;++E){var F;P=(F=A[E])[0],D=F[1],F[0]=Math.min(P,D),F[1]=Math.max(P,D)}A.sort(k?u:m);var R=1;for(E=1;E<A.length;++E){var L=A[E-1],I=A[E];(I[0]!==L[0]||I[1]!==L[1]||k&&I[2]!==L[2])&&(A[R++]=I)}A.length=R}}function f(A,M,k){var L,I,V,E=function(L,I){for(var B=new Array(I.length),V=0;V<I.length;++V){var Z=I[V],Y=L[Z[0]],Q=L[Z[1]];B[V]=[s(Math.min(Y[0],Q[0]),-1/0),s(Math.min(Y[1],Q[1]),-1/0),s(Math.max(Y[0],Q[0]),1/0),s(Math.max(Y[1],Q[1]),1/0)]}return B}(A,M),P=(L=A,I=M,V=[],o(E,function(Z,Y){var Q=I[Z],re=I[Y];Q[0]!==re[0]&&Q[0]!==re[1]&&Q[1]!==re[0]&&Q[1]!==re[1]&&i(L[Q[0]],L[Q[1]],L[re[0]],L[re[1]])&&V.push([Z,Y])}),V),F=function(L,I,B,V){var Z=[];return o(B,V,function(Y,Q){var re=I[Y];if(re[0]!==Q&&re[1]!==Q){var $=L[Q];i(L[re[0]],L[re[1]],$,$)&&Z.push([Y,Q])}}),Z}(A,M,E,c(A)),R=g(A,function(L,I,B,V,Z){var Y,Q,re=L.map(function(_e){return[l(_e[0]),l(_e[1])]});for(Y=0;Y<B.length;++Y){var $=B[Y],J=$[1],ie=I[Q=$[0]],j=I[J],q=d(h(L[ie[0]]),h(L[ie[1]]),h(L[j[0]]),h(L[j[1]]));if(q){var W=L.length;L.push([y(q[0]),y(q[1])]),re.push(q),V.push([Q,W],[J,W])}}for(V.sort(function(_e,Ee){if(_e[0]!==Ee[0])return _e[0]-Ee[0];var De=re[_e[1]],Se=re[Ee[1]];return r(De[0],Se[0])||r(De[1],Se[1])}),Y=V.length-1;Y>=0;--Y){var ae=I[Q=(be=V[Y])[0]],G=ae[0],ee=ae[1],te=L[G],le=L[ee];if((te[0]-le[0]||te[1]-le[1])<0){var ue=G;G=ee,ee=ue}ae[0]=G;var de,he=ae[1]=be[1];for(Z&&(de=ae[2]);Y>0&&V[Y-1][0]===Q;){var be,me=(be=V[--Y])[1];I.push(Z?[he,me,de]:[he,me]),he=me}I.push(Z?[he,ee,de]:[he,ee])}return re}(A,M,P,F,k));return w(M,R,k),!!R||P.length>0||F.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(x,T,b){"use strict";T.exports=function(d,p,c,g){var m=r(p,d),u=r(g,c),w=s(m,u);if(0===l(w))return null;var A=s(u,r(d,c)),M=o(A,w),k=h(m,M);return y(d,k)};var e=x("big-rat/mul"),o=x("big-rat/div"),i=x("big-rat/sub"),l=x("big-rat/sign"),r=x("rat-vec/sub"),y=x("rat-vec/add"),h=x("rat-vec/muls");function s(d,p){return i(e(d[0],p[1]),e(d[1],p[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(x,T,b){T.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(x,T,b){"use strict";var e=x("./colorScale"),o=x("lerp");function i(y){return[y[0]/255,y[1]/255,y[2]/255,y[3]]}function l(y){for(var h,s="#",d=0;d<3;++d)s+=("00"+(h=(h=y[d]).toString(16))).substr(h.length);return s}function r(y){return"rgba("+y.join(",")+")"}T.exports=function(y){var h,s,d,p,c,g,m,u,w,f;if(y||(y={}),u=(y.nshades||72)-1,m=y.format||"hex",(g=y.colormap)||(g="jet"),"string"==typeof g){if(g=g.toLowerCase(),!e[g])throw Error(g+" not a supported colorscale");c=e[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);c=g.slice()}if(c.length>u+1)throw new Error(g+" map requires nshades to be at least size "+c.length);w=Array.isArray(y.alpha)?2!==y.alpha.length?[1,1]:y.alpha.slice():"number"==typeof y.alpha?[y.alpha,y.alpha]:[1,1],h=c.map(function(P){return Math.round(P.index*u)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var A=c.map(function(P,D){var F=c[D].index,R=c[D].rgb.slice();return 4===R.length&&R[3]>=0&&R[3]<=1||(R[3]=w[0]+(w[1]-w[0])*F),R}),M=[];for(f=0;f<h.length-1;++f){p=h[f+1]-h[f],s=A[f],d=A[f+1];for(var k=0;k<p;k++){var E=k/p;M.push([Math.round(o(s[0],d[0],E)),Math.round(o(s[1],d[1],E)),Math.round(o(s[2],d[2],E)),o(s[3],d[3],E)])}}return M.push(c[c.length-1].rgb.concat(w[1])),"hex"===m?M=M.map(l):"rgbaString"===m?M=M.map(r):"float"===m&&(M=M.map(i)),M}},{"./colorScale":52,lerp:240}],54:[function(x,T,b){"use strict";T.exports=function(h,s,d,p){var c=e(s,d,p);if(0===c){var g=o(e(h,s,d)),m=o(e(h,s,p));if(g===m){if(0===g){var u=y(h,s,d);return u===y(h,s,p)?0:u?1:-1}return 0}return 0===m?g>0||y(h,s,p)?-1:1:0===g?m>0||y(h,s,d)?1:-1:o(m-g)}var f=e(h,s,d);return f>0?c>0&&e(h,s,p)>0?1:-1:f<0?c>0||e(h,s,p)>0?1:-1:e(h,s,p)>0||y(h,s,d)?1:-1};var e=x("robust-orientation"),o=x("signum"),i=x("two-sum"),l=x("robust-product"),r=x("robust-sum");function y(h,s,d){var p=i(h[0],-s[0]),c=i(h[1],-s[1]),g=i(d[0],-s[0]),m=i(d[1],-s[1]),u=r(l(p,g),l(c,m));return u[u.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(x,T,b){"use strict";T.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(x,T,b){T.exports=function(i,l){var r=i.length,y=i.length-l.length;if(y)return y;switch(r){case 0:return 0;case 1:return i[0]-l[0];case 2:return i[0]+i[1]-l[0]-l[1]||e(i[0],i[1])-e(l[0],l[1]);case 3:var h=i[0]+i[1],s=l[0]+l[1];if(y=h+i[2]-(s+l[2]))return y;var d=e(i[0],i[1]),p=e(l[0],l[1]);return e(d,i[2])-e(p,l[2])||e(d+i[2],h)-e(p+l[2],s);case 4:var c=i[0],g=i[1],m=i[2],u=i[3],w=l[0],f=l[1],A=l[2],M=l[3];return c+g+m+u-(w+f+A+M)||e(c,g,m,u)-e(w,f,A,M,w)||e(c+g,c+m,c+u,g+m,g+u,m+u)-e(w+f,w+A,w+M,f+A,f+M,A+M)||e(c+g+m,c+g+u,c+m+u,g+m+u)-e(w+f+A,w+f+M,w+A+M,f+A+M);default:for(var k=i.slice().sort(o),E=l.slice().sort(o),P=0;P<r;++P)if(y=k[P]-E[P])return y;return 0}};var e=Math.min;function o(i,l){return i-l}},{}],57:[function(x,T,b){"use strict";var e=x("compare-cell"),o=x("cell-orientation");T.exports=function(i,l){return e(i,l)||o(i)-o(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(x,T,b){"use strict";var e=x("./lib/ch1d"),o=x("./lib/ch2d"),i=x("./lib/chnd");T.exports=function(l){var r=l.length;if(0===r)return[];if(1===r)return[[0]];var y=l[0].length;return 0===y?[]:1===y?e(l):2===y?o(l):i(l,y)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(x,T,b){"use strict";T.exports=function(e){for(var o=0,i=0,l=1;l<e.length;++l)e[l][0]<e[o][0]&&(o=l),e[l][0]>e[i][0]&&(i=l);return o<i?[[o],[i]]:o>i?[[i],[o]]:[[o]]}},{}],60:[function(x,T,b){"use strict";T.exports=function(o){var i=e(o),l=i.length;if(l<=2)return[];for(var r=new Array(l),y=i[l-1],h=0;h<l;++h){var s=i[h];r[h]=[y,s],y=s}return r};var e=x("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(x,T,b){"use strict";T.exports=function(i,l){try{return e(i,!0)}catch(h){var r=o(i);if(r.length<=l)return[];var y=function(s,d){for(var p=s.length,c=new Array(p),g=0;g<d.length;++g)c[g]=s[d[g]];var m=d.length;for(g=0;g<p;++g)d.indexOf(g)<0&&(c[m++]=s[g]);return c}(i,r);return function(s,d){for(var p=s.length,c=d.length,g=0;g<p;++g)for(var m=s[g],u=0;u<m.length;++u){var w=m[u];if(w<c)m[u]=d[w];else{w-=c;for(var f=0;f<c;++f)w>=d[f]&&(w+=1);m[u]=w}}return s}(e(y,!0),r)}};var e=x("incremental-convex-hull"),o=x("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(x,T,b){"use strict";T.exports=function(e,o,i,l,r,y){var h=r-1,s=r*r,d=h*h,p=(1+2*r)*d,c=r*d,g=s*(3-2*r),m=s*h;if(e.length){y||(y=new Array(e.length));for(var u=e.length-1;u>=0;--u)y[u]=p*e[u]+c*o[u]+g*i[u]+m*l[u];return y}return p*e+c*o+g*i+m*l},T.exports.derivative=function(e,o,i,l,r,y){var h=6*r*r-6*r,s=3*r*r-4*r+1,d=-6*r*r+6*r,p=3*r*r-2*r;if(e.length){y||(y=new Array(e.length));for(var c=e.length-1;c>=0;--c)y[c]=h*e[c]+s*o[c]+d*i[c]+p*l[c];return y}return h*e+s*o+d*i[c]+p*l}},{}],63:[function(x,T,b){"use strict";var e=x("incremental-convex-hull"),o=x("uniq");function i(r,y){this.point=r,this.index=y}function l(r,y){for(var h=r.point,s=y.point,d=h.length,p=0;p<d;++p){var c=s[p]-h[p];if(c)return c}return 0}T.exports=function(r,y){var h=r.length;if(0===h)return[];var s=r[0].length;if(s<1)return[];if(1===s)return function(F,R,L){if(1===F)return L?[[-1,0]]:[];var I=R.map(function(Q,re){return[Q[0],re]});I.sort(function(Q,re){return Q[0]-re[0]});for(var B=new Array(F-1),V=1;V<F;++V)B[V-1]=[I[V-1][1],I[V][1]];return L&&B.push([-1,B[0][1]],[B[F-1][1],-1]),B}(h,r,y);for(var d=new Array(h),p=1,c=0;c<h;++c){for(var g=r[c],m=new Array(s+1),u=0,w=0;w<s;++w){var f=g[w];m[w]=f,u+=f*f}m[s]=u,d[c]=new i(m,c),p=Math.max(u,p)}o(d,l),h=d.length;var A=new Array(h+s+1),M=new Array(h+s+1),k=(s+1)*(s+1)*p,E=new Array(s+1);for(c=0;c<=s;++c)E[c]=0;for(E[s]=k,A[0]=E.slice(),M[0]=-1,c=0;c<=s;++c)(m=E.slice())[c]=1,A[c+1]=m,M[c+1]=-1;for(c=0;c<h;++c){var P=d[c];A[c+s+1]=P.point,M[c+s+1]=P.index}var D=e(A,!1);if(D=D.filter(y?function(F){for(var R=0,L=0;L<=s;++L){var I=M[F[L]];if(I<0&&++R>=2)return!1;F[L]=I}return!0}:function(F){for(var R=0;R<=s;++R){var L=M[F[R]];if(L<0)return!1;F[R]=L}return!0}),1&s)for(c=0;c<D.length;++c)m=(P=D[c])[0],P[0]=P[1],P[1]=m;return D}},{"incremental-convex-hull":233,uniq:310}],64:[function(x,T,b){(function(e){(function(){var o=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),l=new Uint32Array(i.buffer);i[0]=1,o=!0,1072693248===l[1]?(T.exports=function(y){return i[0]=y,[l[0],l[1]]},T.exports.pack=function(y,h){return l[0]=y,l[1]=h,i[0]},T.exports.lo=function(y){return i[0]=y,l[0]},T.exports.hi=function(y){return i[0]=y,l[1]}):1072693248===l[0]?(T.exports=function(y){return i[0]=y,[l[1],l[0]]},T.exports.pack=function(y,h){return l[1]=y,l[0]=h,i[0]},T.exports.lo=function(y){return i[0]=y,l[1]},T.exports.hi=function(y){return i[0]=y,l[0]}):o=!1}if(!o){var r=new e(8);T.exports=function(y){return r.writeDoubleLE(y,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},T.exports.pack=function(y,h){return r.writeUInt32LE(y,0,!0),r.writeUInt32LE(h,4,!0),r.readDoubleLE(0,!0)},T.exports.lo=function(y){return r.writeDoubleLE(y,0,!0),r.readUInt32LE(0,!0)},T.exports.hi=function(y){return r.writeDoubleLE(y,0,!0),r.readUInt32LE(4,!0)}}T.exports.sign=function(y){return T.exports.hi(y)>>>31},T.exports.exponent=function(y){return(T.exports.hi(y)<<1>>>21)-1023},T.exports.fraction=function(y){var h=T.exports.lo(y),s=T.exports.hi(y),d=1048575&s;return 2146435072&s&&(d+=1<<20),[h,d]},T.exports.denormalized=function(y){return!(2146435072&T.exports.hi(y))}}).call(this)}).call(this,x("buffer").Buffer)},{buffer:3}],65:[function(x,T,b){"use strict";T.exports=function(e,o){switch(void 0===o&&(o=0),typeof e){case"number":if(e>0)return function(i,l){var r,y;for(r=new Array(i),y=0;y<i;++y)r[y]=l;return r}(0|e,o);break;case"object":if("number"==typeof e.length)return function i(l,r,y){var h=0|l[y];if(h<=0)return[];var s,d=new Array(h);if(y===l.length-1)for(s=0;s<h;++s)d[s]=r;else for(s=0;s<h;++s)d[s]=i(l,r,y+1);return d}(e,o,0)}return[]}},{}],66:[function(x,T,b){"use strict";T.exports=function(o,i){var l=o.length;if("number"!=typeof i){i=0;for(var r=0;r<l;++r){var y=o[r];i=Math.max(i,y[0],y[1])}i=1+(0|i)}i|=0;var h=new Array(i);for(r=0;r<i;++r)h[r]=[];for(r=0;r<l;++r)h[(y=o[r])[0]].push(y[1]),h[y[1]].push(y[0]);for(var s=0;s<i;++s)e(h[s],function(d,p){return d-p});return h};var e=x("uniq")},{uniq:310}],67:[function(x,T,b){"use strict";T.exports=function(e,o,i){var l=o||0,r=i||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[r*e[12]-e[8],r*e[13]-e[9],r*e[14]-e[10],r*e[15]-e[11]]]}},{}],68:[function(x,T,b){"use strict";T.exports=function(h,s,d){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof h?new l(p=y(h),p,0):new l(h,y(h.length),0);case 2:if("number"==typeof s){var p=y(h.length);return new l(h,p,+s)}d=0;case 3:if(h.length!==s.length)throw new Error("state and velocity lengths must match");return new l(h,s,d)}};var e=x("cubic-hermite"),o=x("binary-search-bounds");function i(h,s,d){return Math.min(s,Math.max(h,d))}function l(h,s,d){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=h.slice().reverse(),this._velocity=s.slice().reverse(),this._time=[d],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var r=l.prototype;function y(h){for(var s=new Array(h),d=0;d<h;++d)s[d]=0;return s}r.flush=function(h){var s=o.gt(this._time,h)-1;s<=0||(this._time.splice(0,s),this._state.splice(0,s*this.dimension),this._velocity.splice(0,s*this.dimension))},r.curve=function(h){var s=this._time,d=s.length,p=o.le(s,h),c=this._scratch[0],g=this._state,m=this._velocity,u=this.dimension,w=this.bounds;if(p<0)for(var f=u-1,A=0;A<u;++A,--f)c[A]=g[f];else if(p>=d-1){f=g.length-1;var M=h-s[d-1];for(A=0;A<u;++A,--f)c[A]=g[f]+M*m[f]}else{f=u*(p+1)-1;var k=s[p],E=s[p+1]-k||1,P=this._scratch[1],D=this._scratch[2],F=this._scratch[3],R=this._scratch[4],L=!0;for(A=0;A<u;++A,--f)P[A]=g[f],F[A]=m[f]*E,D[A]=g[f+u],R[A]=m[f+u]*E,L=L&&P[A]===D[A]&&F[A]===R[A]&&0===F[A];if(L)for(A=0;A<u;++A)c[A]=P[A];else e(P,F,D,R,(h-k)/E,c)}var I=w[0],B=w[1];for(A=0;A<u;++A)c[A]=i(I[A],B[A],c[A]);return c},r.dcurve=function(h){var s=this._time,d=s.length,p=o.le(s,h),c=this._scratch[0],g=this._state,m=this._velocity,u=this.dimension;if(p>=d-1)for(var w=g.length-1,f=0;f<u;++f,--w)c[f]=m[w];else{w=u*(p+1)-1;var A=s[p],M=s[p+1]-A||1,k=this._scratch[1],E=this._scratch[2],P=this._scratch[3],D=this._scratch[4],F=!0;for(f=0;f<u;++f,--w)k[f]=g[w],P[f]=m[w]*M,E[f]=g[w+u],D[f]=m[w+u]*M,F=F&&k[f]===E[f]&&P[f]===D[f]&&0===P[f];if(F)for(f=0;f<u;++f)c[f]=0;else for(e.derivative(k,P,E,D,(h-A)/M,c),f=0;f<u;++f)c[f]/=M}return c},r.lastT=function(){var h=this._time;return h[h.length-1]},r.stable=function(){for(var h=this._velocity,s=h.length,d=this.dimension-1;d>=0;--d)if(h[--s])return!1;return!0},r.jump=function(h){var s=this.lastT(),d=this.dimension;if(!(h<s||arguments.length!==d+1)){var p=this._state,c=this._velocity,g=p.length-this.dimension,m=this.bounds,u=m[0],w=m[1];this._time.push(s,h);for(var f=0;f<2;++f)for(var A=0;A<d;++A)p.push(p[g++]),c.push(0);for(this._time.push(h),A=d;A>0;--A)p.push(i(u[A-1],w[A-1],arguments[A])),c.push(0)}},r.push=function(h){var s=this.lastT(),d=this.dimension;if(!(h<s||arguments.length!==d+1)){var p=this._state,c=this._velocity,g=p.length-this.dimension,m=h-s,u=this.bounds,w=u[0],f=u[1],A=m>1e-6?1/m:0;this._time.push(h);for(var M=d;M>0;--M){var k=i(w[M-1],f[M-1],arguments[M]);p.push(k),c.push((k-p[g++])*A)}}},r.set=function(h){var s=this.dimension;if(!(h<this.lastT()||arguments.length!==s+1)){var d=this._state,p=this._velocity,c=this.bounds,g=c[0],m=c[1];this._time.push(h);for(var u=s;u>0;--u)d.push(i(g[u-1],m[u-1],arguments[u])),p.push(0)}},r.move=function(h){var s=this.lastT(),d=this.dimension;if(!(h<=s||arguments.length!==d+1)){var p=this._state,c=this._velocity,g=p.length-this.dimension,m=this.bounds,u=m[0],w=m[1],f=h-s,A=f>1e-6?1/f:0;this._time.push(h);for(var M=d;M>0;--M){var k=arguments[M];p.push(i(u[M-1],w[M-1],p[g++]+k)),c.push(k*A)}}},r.idle=function(h){var s=this.lastT();if(!(h<s)){var d=this.dimension,p=this._state,c=this._velocity,g=p.length-d,m=this.bounds,u=m[0],w=m[1],f=h-s;this._time.push(h);for(var A=d-1;A>=0;--A)p.push(i(u[A],w[A],p[g]+f*c[g])),c.push(0),g+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(x,T,b){"use strict";function e(u,w,f,A,M,k){this._color=u,this.key=w,this.value=f,this.left=A,this.right=M,this._count=k}function o(u){return new e(u._color,u.key,u.value,u.left,u.right,u._count)}function i(u,w){return new e(u,w.key,w.value,w.left,w.right,w._count)}function l(u){u._count=1+(u.left?u.left._count:0)+(u.right?u.right._count:0)}function r(u,w){this._compare=u,this.root=w}T.exports=function(u){return new r(u||m,null)};var y=r.prototype;function h(u,w){var f;return w.left&&(f=h(u,w.left))?f:(f=u(w.key,w.value))||(w.right?h(u,w.right):void 0)}function s(u,w,f,A){var M;return w(u,A.key)<=0&&(A.left&&(M=s(u,w,f,A.left))||(M=f(A.key,A.value)))?M:A.right?s(u,w,f,A.right):void 0}function d(u,w,f,A,M){var k,E=f(u,M.key),P=f(w,M.key);return E<=0&&(M.left&&(k=d(u,w,f,A,M.left))||P>0&&(k=A(M.key,M.value)))?k:P>0&&M.right?d(u,w,f,A,M.right):void 0}function p(u,w){this.tree=u,this._stack=w}Object.defineProperty(y,"keys",{get:function(){var u=[];return this.forEach(function(w,f){u.push(w)}),u}}),Object.defineProperty(y,"values",{get:function(){var u=[];return this.forEach(function(w,f){u.push(f)}),u}}),Object.defineProperty(y,"length",{get:function(){return this.root?this.root._count:0}}),y.insert=function(u,w){for(var f=this._compare,A=this.root,M=[],k=[];A;){var E=f(u,A.key);M.push(A),k.push(E),A=E<=0?A.left:A.right}M.push(new e(0,u,w,null,null,1));for(var P=M.length-2;P>=0;--P)A=M[P],M[P]=k[P]<=0?new e(A._color,A.key,A.value,M[P+1],A.right,A._count+1):new e(A._color,A.key,A.value,A.left,M[P+1],A._count+1);for(P=M.length-1;P>1;--P){var D=M[P-1];if(A=M[P],1===D._color||1===A._color)break;var F=M[P-2];if(F.left===D)if(D.left===A){if(!(R=F.right)||0!==R._color){F._color=0,F.left=D.right,D._color=1,D.right=F,M[P-2]=D,M[P-1]=A,l(F),l(D),P>=3&&((L=M[P-3]).left===F?L.left=D:L.right=D);break}D._color=1,F.right=i(1,R),F._color=0,P-=1}else{if(!(R=F.right)||0!==R._color){D.right=A.left,F._color=0,F.left=A.right,A._color=1,A.left=D,A.right=F,M[P-2]=A,M[P-1]=D,l(F),l(D),l(A),P>=3&&((L=M[P-3]).left===F?L.left=A:L.right=A);break}D._color=1,F.right=i(1,R),F._color=0,P-=1}else if(D.right===A){if(!(R=F.left)||0!==R._color){F._color=0,F.right=D.left,D._color=1,D.left=F,M[P-2]=D,M[P-1]=A,l(F),l(D),P>=3&&((L=M[P-3]).right===F?L.right=D:L.left=D);break}D._color=1,F.left=i(1,R),F._color=0,P-=1}else{var R;if(!(R=F.left)||0!==R._color){var L;D.left=A.right,F._color=0,F.right=A.left,A._color=1,A.right=D,A.left=F,M[P-2]=A,M[P-1]=D,l(F),l(D),l(A),P>=3&&((L=M[P-3]).right===F?L.right=A:L.left=A);break}D._color=1,F.left=i(1,R),F._color=0,P-=1}}return M[0]._color=1,new r(f,M[0])},y.forEach=function(u,w,f){if(this.root)switch(arguments.length){case 1:return h(u,this.root);case 2:return s(w,this._compare,u,this.root);case 3:return this._compare(w,f)>=0?void 0:d(w,f,this._compare,u,this.root)}},Object.defineProperty(y,"begin",{get:function(){for(var u=[],w=this.root;w;)u.push(w),w=w.left;return new p(this,u)}}),Object.defineProperty(y,"end",{get:function(){for(var u=[],w=this.root;w;)u.push(w),w=w.right;return new p(this,u)}}),y.at=function(u){if(u<0)return new p(this,[]);for(var w=this.root,f=[];;){if(f.push(w),w.left){if(u<w.left._count){w=w.left;continue}u-=w.left._count}if(!u)return new p(this,f);if(u-=1,!w.right||u>=w.right._count)break;w=w.right}return new p(this,[])},y.ge=function(u){for(var w=this._compare,f=this.root,A=[],M=0;f;){var k=w(u,f.key);A.push(f),k<=0&&(M=A.length),f=k<=0?f.left:f.right}return A.length=M,new p(this,A)},y.gt=function(u){for(var w=this._compare,f=this.root,A=[],M=0;f;){var k=w(u,f.key);A.push(f),k<0&&(M=A.length),f=k<0?f.left:f.right}return A.length=M,new p(this,A)},y.lt=function(u){for(var w=this._compare,f=this.root,A=[],M=0;f;){var k=w(u,f.key);A.push(f),k>0&&(M=A.length),f=k<=0?f.left:f.right}return A.length=M,new p(this,A)},y.le=function(u){for(var w=this._compare,f=this.root,A=[],M=0;f;){var k=w(u,f.key);A.push(f),k>=0&&(M=A.length),f=k<0?f.left:f.right}return A.length=M,new p(this,A)},y.find=function(u){for(var w=this._compare,f=this.root,A=[];f;){var M=w(u,f.key);if(A.push(f),0===M)return new p(this,A);f=M<=0?f.left:f.right}return new p(this,[])},y.remove=function(u){var w=this.find(u);return w?w.remove():this},y.get=function(u){for(var w=this._compare,f=this.root;f;){var A=w(u,f.key);if(0===A)return f.value;f=A<=0?f.left:f.right}};var c=p.prototype;function g(u,w){u.key=w.key,u.value=w.value,u.left=w.left,u.right=w.right,u._color=w._color,u._count=w._count}function m(u,w){return u<w?-1:u>w?1:0}Object.defineProperty(c,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(c,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),c.clone=function(){return new p(this.tree,this._stack.slice())},c.remove=function(){var u=this._stack;if(0===u.length)return this.tree;var w=new Array(u.length),f=u[u.length-1];w[w.length-1]=new e(f._color,f.key,f.value,f.left,f.right,f._count);for(var A=u.length-2;A>=0;--A)w[A]=(f=u[A]).left===u[A+1]?new e(f._color,f.key,f.value,w[A+1],f.right,f._count):new e(f._color,f.key,f.value,f.left,w[A+1],f._count);if((f=w[w.length-1]).left&&f.right){var M=w.length;for(f=f.left;f.right;)w.push(f),f=f.right;var k=w[M-1];for(w.push(new e(f._color,k.key,k.value,f.left,f.right,f._count)),w[M-1].key=f.key,w[M-1].value=f.value,A=w.length-2;A>=M;--A)w[A]=new e((f=w[A])._color,f.key,f.value,f.left,w[A+1],f._count);w[M-1].left=w[M]}if(0===(f=w[w.length-1])._color){var E=w[w.length-2];for(E.left===f?E.left=null:E.right===f&&(E.right=null),w.pop(),A=0;A<w.length;++A)w[A]._count--;return new r(this.tree._compare,w[0])}if(f.left||f.right){for(f.left?g(f,f.left):f.right&&g(f,f.right),f._color=1,A=0;A<w.length-1;++A)w[A]._count--;return new r(this.tree._compare,w[0])}if(1===w.length)return new r(this.tree._compare,null);for(A=0;A<w.length;++A)w[A]._count--;var P=w[w.length-2];return function(D){for(var F,R,L,I,B=D.length-1;B>=0;--B){if(F=D[B],0===B)return void(F._color=1);if((R=D[B-1]).left===F){if((L=R.right).right&&0===L.right._color)return I=(L=R.right=o(L)).right=o(L.right),R.right=L.left,L.left=R,L.right=I,L._color=R._color,F._color=1,R._color=1,I._color=1,l(R),l(L),B>1&&((V=D[B-2]).left===R?V.left=L:V.right=L),void(D[B-1]=L);if(L.left&&0===L.left._color)return I=(L=R.right=o(L)).left=o(L.left),R.right=I.left,L.left=I.right,I.left=R,I.right=L,I._color=R._color,R._color=1,L._color=1,F._color=1,l(R),l(L),l(I),B>1&&((V=D[B-2]).left===R?V.left=I:V.right=I),void(D[B-1]=I);if(1===L._color){if(0===R._color)return R._color=1,void(R.right=i(0,L));R.right=i(0,L);continue}L=o(L),R.right=L.left,L.left=R,L._color=R._color,R._color=0,l(R),l(L),B>1&&((V=D[B-2]).left===R?V.left=L:V.right=L),D[B-1]=L,D[B]=R,B+1<D.length?D[B+1]=F:D.push(F),B+=2}else{if((L=R.left).left&&0===L.left._color)return I=(L=R.left=o(L)).left=o(L.left),R.left=L.right,L.right=R,L.left=I,L._color=R._color,F._color=1,R._color=1,I._color=1,l(R),l(L),B>1&&((V=D[B-2]).right===R?V.right=L:V.left=L),void(D[B-1]=L);if(L.right&&0===L.right._color)return I=(L=R.left=o(L)).right=o(L.right),R.left=I.right,L.right=I.left,I.right=R,I.left=L,I._color=R._color,R._color=1,L._color=1,F._color=1,l(R),l(L),l(I),B>1&&((V=D[B-2]).right===R?V.right=I:V.left=I),void(D[B-1]=I);if(1===L._color){if(0===R._color)return R._color=1,void(R.left=i(0,L));R.left=i(0,L);continue}var V;L=o(L),R.left=L.right,L.right=R,L._color=R._color,R._color=0,l(R),l(L),B>1&&((V=D[B-2]).right===R?V.right=L:V.left=L),D[B-1]=L,D[B]=R,B+1<D.length?D[B+1]=F:D.push(F),B+=2}}}(w),P.left===f?P.left=null:P.right=null,new r(this.tree._compare,w[0])},Object.defineProperty(c,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(c,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(c,"index",{get:function(){var u=0,w=this._stack;if(0===w.length){var f=this.tree.root;return f?f._count:0}w[w.length-1].left&&(u=w[w.length-1].left._count);for(var A=w.length-2;A>=0;--A)w[A+1]===w[A].right&&(++u,w[A].left&&(u+=w[A].left._count));return u},enumerable:!0}),c.next=function(){var u=this._stack;if(0!==u.length){var w=u[u.length-1];if(w.right)for(w=w.right;w;)u.push(w),w=w.left;else for(u.pop();u.length>0&&u[u.length-1].right===w;)w=u[u.length-1],u.pop()}},Object.defineProperty(c,"hasNext",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].right)return!0;for(var w=u.length-1;w>0;--w)if(u[w-1].left===u[w])return!0;return!1}}),c.update=function(u){var w=this._stack;if(0===w.length)throw new Error("Can't update empty node!");var f=new Array(w.length),A=w[w.length-1];f[f.length-1]=new e(A._color,A.key,u,A.left,A.right,A._count);for(var M=w.length-2;M>=0;--M)f[M]=(A=w[M]).left===w[M+1]?new e(A._color,A.key,A.value,f[M+1],A.right,A._count):new e(A._color,A.key,A.value,A.left,f[M+1],A._count);return new r(this.tree._compare,f[0])},c.prev=function(){var u=this._stack;if(0!==u.length){var w=u[u.length-1];if(w.left)for(w=w.left;w;)u.push(w),w=w.right;else for(u.pop();u.length>0&&u[u.length-1].left===w;)w=u[u.length-1],u.pop()}},Object.defineProperty(c,"hasPrev",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].left)return!0;for(var w=u.length-1;w>0;--w)if(u[w-1].right===u[w])return!0;return!1}})},{}],70:[function(x,T,b){"use strict";T.exports=function(M,k){var E=new s(M);return E.update(k),E};var e=x("./lib/text.js"),o=x("./lib/lines.js"),i=x("./lib/background.js"),l=x("./lib/cube.js"),r=x("./lib/ticks.js"),y=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(M,k){return M[0]=k[0],M[1]=k[1],M[2]=k[2],M}function s(M){this.gl=M,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(M)}var d=s.prototype;function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(M){function k(Q,re,$){if($ in M){var J,ie=M[$],j=this[$];this[$]=J=(Q?Array.isArray(ie)&&Array.isArray(ie[0]):Array.isArray(ie))?[re(ie[0]),re(ie[1]),re(ie[2])]:[re(ie),re(ie),re(ie)];for(var q=0;q<3;++q)if(J[q]!==j[q])return!0}return!1}M=M||{};var E,P=k.bind(this,!1,Number),D=k.bind(this,!1,Boolean),F=k.bind(this,!1,String),R=k.bind(this,!0,function(Q){if(Array.isArray(Q)){if(3===Q.length)return[+Q[0],+Q[1],+Q[2],1];if(4===Q.length)return[+Q[0],+Q[1],+Q[2],+Q[3]]}return[0,0,0,1]}),L=!1,I=!1;if("bounds"in M)for(var B=M.bounds,V=0;V<2;++V)for(var Z=0;Z<3;++Z)B[V][Z]!==this.bounds[V][Z]&&(I=!0),this.bounds[V][Z]=B[V][Z];if("ticks"in M)for(E=M.ticks,L=!0,this.autoTicks=!1,V=0;V<3;++V)this.tickSpacing[V]=0;else P("tickSpacing")&&(this.autoTicks=!0,I=!0);if(this._firstInit&&("ticks"in M||"tickSpacing"in M||(this.autoTicks=!0),I=!0,L=!0,this._firstInit=!1),I&&this.autoTicks&&(E=r.create(this.bounds,this.tickSpacing),L=!0),L){for(V=0;V<3;++V)E[V].sort(function(Q,re){return Q.x-re.x});r.equal(E,this.ticks)?L=!1:this.ticks=E}D("tickEnable"),F("tickFont")&&(L=!0),P("tickSize"),P("tickAngle"),P("tickPad"),R("tickColor");var Y=F("labels");F("labelFont")&&(Y=!0),D("labelEnable"),P("labelSize"),P("labelPad"),R("labelColor"),D("lineEnable"),D("lineMirror"),P("lineWidth"),R("lineColor"),D("lineTickEnable"),D("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),R("lineTickColor"),D("gridEnable"),P("gridWidth"),R("gridColor"),D("zeroEnable"),R("zeroLineColor"),P("zeroLineWidth"),D("backgroundEnable"),R("backgroundColor"),this._text?this._text&&(Y||L)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&L&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};var c=[new p,new p,new p];function g(M,k,E,P,D){for(var F=M.primalOffset,R=M.primalMinor,L=M.mirrorOffset,I=M.mirrorMinor,B=P[k],V=0;V<3;++V)if(k!==V){var Z=F,Y=L,Q=R,re=I;B&1<<V&&(Z=L,Y=F,Q=I,re=R),Z[V]=E[0][V],Y[V]=E[1][V],D[V]>0?(Q[V]=-1,re[V]=0):(Q[V]=0,re[V]=1)}}var m=[0,0,0],u={model:y,view:y,projection:y,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(M){};var w=[0,0,0],f=[0,0,0],A=[0,0,0];d.draw=function(M){for(var k=this.gl,E=(M=M||u).model||y,P=M.view||y,D=M.projection||y,F=this.bounds,R=M._ortho||!1,L=l(E,P,D,F,R),I=L.cubeEdges,B=L.axis,re=(R?2:1)*this.pixelRatio*(D[3]*P[12]+D[7]*P[13]+D[11]*P[14]+D[15]*P[15])/k.drawingBufferHeight,$=0;$<3;++$)this.lastCubeProps.cubeEdges[$]=I[$],this.lastCubeProps.axis[$]=B[$];var J=c;for($=0;$<3;++$)g(c[$],$,this.bounds,I,B);k=this.gl;var ie,de,he,Fe,ve,Te,Ie,Ce,Re,Ue,qe,Xe,j=m;for($=0;$<3;++$)j[$]=this.backgroundEnable[$]?B[$]:0;for(this._background.draw(E,P,D,F,j,this.backgroundColor),this._lines.bind(E,P,D,this),$=0;$<3;++$){var q=[0,0,0];q[$]=B[$]>0?F[1][$]:F[0][$];for(var W=0;W<2;++W){var ae=($+1+W)%3,G=($+1+(1^W))%3;this.gridEnable[ae]&&this._lines.drawGrid(ae,G,this.bounds,q,this.gridColor[ae],this.gridWidth[ae]*this.pixelRatio)}for(W=0;W<2;++W)ae=($+1+W)%3,this.zeroEnable[G=($+1+(1^W))%3]&&Math.min(F[0][G],F[1][G])<=0&&Math.max(F[0][G],F[1][G])>=0&&this._lines.drawZero(ae,G,this.bounds,q,this.zeroLineColor[G],this.zeroLineWidth[G]*this.pixelRatio)}for($=0;$<3;++$){this.lineEnable[$]&&this._lines.drawAxisLine($,this.bounds,J[$].primalOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio),this.lineMirror[$]&&this._lines.drawAxisLine($,this.bounds,J[$].mirrorOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio);var ee=h(w,J[$].primalMinor),te=h(f,J[$].mirrorMinor),le=this.lineTickLength;for(W=0;W<3;++W){var ue=re/E[5*W];ee[W]*=le[W]*ue,te[W]*=le[W]*ue}this.lineTickEnable[$]&&this._lines.drawAxisTicks($,J[$].primalOffset,ee,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio),this.lineTickMirror[$]&&this._lines.drawAxisTicks($,J[$].mirrorOffset,te,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio)}function be(Fe){(he=[0,0,0])[Fe]=1}for(this._lines.unbind(),this._text.bind(E,P,D,this.pixelRatio),$=0;$<3;++$){var _e=J[$].primalMinor,Ee=J[$].mirrorMinor,De=h(A,J[$].primalOffset);for(W=0;W<3;++W)this.lineTickEnable[$]&&(De[W]+=re*_e[W]*Math.max(this.lineTickLength[W],0)/E[5*W]);var Se=[0,0,0];if(Se[$]=1,this.tickEnable[$]){for(-3600===this.tickAngle[$]?(this.tickAngle[$]=0,this.tickAlign[$]="auto"):this.tickAlign[$]=-1,ie[0]="auto"===(ie=[this.tickAlign[$],.5,de=1])[0]?0:parseInt(""+ie[0]),he=[0,0,0],Ie=void 0,Ce=void 0,Re=void 0,Ue=void 0,qe=void 0,Xe=void 0,Ue=(ve=_e)[Ce=((Fe=$)+2)%3],qe=(Te=Ee)[Ie=(Fe+1)%3],Xe=Te[Ce],(Re=ve[Ie])>0&&Xe>0||Re>0&&Xe<0||Re<0&&Xe>0||Re<0&&Xe<0?be(Ie):(Ue>0&&qe>0||Ue>0&&qe<0||Ue<0&&qe>0||Ue<0&&qe<0)&&be(Ce),W=0;W<3;++W)De[W]+=re*_e[W]*this.tickPad[W]/E[5*W];this._text.drawTicks($,this.tickSize[$],this.tickAngle[$],De,this.tickColor[$],Se,he,ie)}if(this.labelEnable[$]){for(de=0,he=[0,0,0],this.labels[$].length>4&&(be($),de=1),ie[0]="auto"===(ie=[this.labelAlign[$],.5,de])[0]?0:parseInt(""+ie[0]),W=0;W<3;++W)De[W]+=re*_e[W]*this.labelPad[W]/E[5*W];De[$]+=.5*(F[0][$]+F[1][$]),this._text.drawLabel($,this.labelSize[$],this.labelAngle[$],De,this.labelColor[$],[0,0,0],he,ie)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(x,T,b){"use strict";T.exports=function(y){for(var h=[],s=[],d=0,p=0;p<3;++p)for(var c=(p+1)%3,g=(p+2)%3,m=[0,0,0],u=[0,0,0],w=-1;w<=1;w+=2){s.push(d,d+2,d+1,d+1,d+2,d+3),m[p]=w,u[p]=w;for(var f=-1;f<=1;f+=2){m[c]=f;for(var A=-1;A<=1;A+=2)m[g]=A,h.push(m[0],m[1],m[2],u[0],u[1],u[2]),d+=1}var M=c;c=g,g=M}var k=e(y,new Float32Array(h)),E=e(y,new Uint16Array(s),y.ELEMENT_ARRAY_BUFFER),P=o(y,[{buffer:k,type:y.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:y.FLOAT,size:3,offset:12,stride:24}],E),D=i(y);return D.attributes.position.location=0,D.attributes.normal.location=1,new l(y,k,P,D)};var e=x("gl-buffer"),o=x("gl-vao"),i=x("./shaders").bg;function l(y,h,s,d){this.gl=y,this.buffer=h,this.vao=s,this.shader=d}var r=l.prototype;r.draw=function(y,h,s,d,p,c){for(var g=!1,m=0;m<3;++m)g=g||p[m];if(g){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:y,view:h,projection:s,bounds:d,enable:p,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(x,T,b){"use strict";T.exports=function(f,A,M,k,E){o(r,A,f),o(r,M,r);for(var P=0,D=0;D<2;++D){s[2]=k[D][2];for(var F=0;F<2;++F){s[1]=k[F][1];for(var R=0;R<2;++R)s[0]=k[R][0],p(y[P],s,r),P+=1}}var L=-1;for(D=0;D<8;++D){for(var I=y[D][3],B=0;B<3;++B)h[D][B]=y[D][B]/I;E&&(h[D][2]*=-1),I<0&&(L<0||h[D][2]<h[L][2])&&(L=D)}if(L<0){L=0;for(var V=0;V<3;++V){for(var Z=(V+2)%3,Y=(V+1)%3,Q=-1,re=-1,$=0;$<2;++$){var J=(j=$<<V)+($<<Z)+(1-$<<Y),ie=j+(1-$<<Z)+($<<Y);l(h[j],h[J],h[ie],d)<0||($?Q=1:re=1)}if(Q<0||re<0)re>Q&&(L|=1<<V);else{for($=0;$<2;++$){J=(j=$<<V)+($<<Z)+(1-$<<Y);var j,q=g([y[j],y[J],y[ie=j+(1-$<<Z)+($<<Y)],y[j+(1<<Z)+(1<<Y)]]);$?Q=q:re=q}re>Q&&(L|=1<<V)}}}var W=7^L,ae=-1;for(D=0;D<8;++D)D!==L&&D!==W&&(ae<0||h[ae][1]>h[D][1])&&(ae=D);var G=-1;for(D=0;D<3;++D)(te=ae^1<<D)!==L&&te!==W&&(G<0&&(G=te),(Y=h[te])[0]<h[G][0]&&(G=te));var ee=-1;for(D=0;D<3;++D){var te;(te=ae^1<<D)!==L&&te!==W&&te!==G&&(ee<0&&(ee=te),(Y=h[te])[0]>h[ee][0]&&(ee=te))}var le=m;le[0]=le[1]=le[2]=0,le[e.log2(G^ae)]=ae&G,le[e.log2(ae^ee)]=ae&ee;var ue=7^ee;ue===L||ue===W?le[e.log2(ee^(ue=7^G))]=ue&ee:le[e.log2(G^ue)]=ue&G;var de=u,he=L;for(V=0;V<3;++V)de[V]=he&1<<V?-1:1;return w};var e=x("bit-twiddle"),o=x("gl-mat4/multiply"),i=x("split-polygon"),l=x("robust-orientation"),r=new Array(16),y=new Array(8),h=new Array(8),s=new Array(3),d=[0,0,0];function p(f,A,M){for(var k=0;k<4;++k){f[k]=M[12+k];for(var E=0;E<3;++E)f[k]+=A[E]*M[4*E+k]}}!function(){for(var f=0;f<8;++f)y[f]=[1,1,1,1],h[f]=[1,1,1]}();var c=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(f){for(var A=0;A<c.length;++A)if((f=i.positive(f,c[A])).length<3)return 0;var M=f[0],k=M[0]/M[3],E=M[1]/M[3],P=0;for(A=1;A+1<f.length;++A){var D=f[A],F=f[A+1];P+=Math.abs((D[0]/D[3]-k)*(F[1]/F[3]-E)-(D[1]/D[3]-E)*(F[0]/F[3]-k))}return P}var m=[1,1,1],u=[0,0,0],w={cubeEdges:m,axis:u}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(x,T,b){"use strict";T.exports=function(m,u,w){var f=[],A=[0,0,0],M=[0,0,0],k=[0,0,0],E=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var D=f.length/3|0,F=0;F<w[P].length;++F){var R=+w[P][F].x;f.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1)}var L=f.length/3|0;A[P]=D,M[P]=L-D,D=f.length/3|0;for(var I=0;I<w[P].length;++I)f.push(R=+w[P][I].x,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1);L=f.length/3|0,k[P]=D,E[P]=L-D}var B=e(m,new Float32Array(f)),V=o(m,[{buffer:B,type:m.FLOAT,size:3,stride:0,offset:0}]),Z=i(m);return Z.attributes.position.location=0,new c(m,B,V,Z,M,A,E,k)};var e=x("gl-buffer"),o=x("gl-vao"),i=x("./shaders").line,l=[0,0,0],r=[0,0,0],y=[0,0,0],h=[0,0,0],s=[1,1];function d(m){return m[0]=m[1]=m[2]=0,m}function p(m,u){return m[0]=u[0],m[1]=u[1],m[2]=u[2],m}function c(m,u,w,f,A,M,k,E){this.gl=m,this.vertBuffer=u,this.vao=w,this.shader=f,this.tickCount=A,this.tickOffset=M,this.gridCount=k,this.gridOffset=E}var g=c.prototype;g.bind=function(m,u,w){this.shader.bind(),this.shader.uniforms.model=m,this.shader.uniforms.view=u,this.shader.uniforms.projection=w,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=s,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(m,u,w,f,A){var M=d(r);this.shader.uniforms.majorAxis=r,M[m]=u[1][m]-u[0][m],this.shader.uniforms.minorAxis=M;var k,E=p(h,w);E[m]+=u[0][m],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=f,(k=d(y))[(m+2)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6),(k=d(y))[(m+1)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(m,u,w,f,A){if(this.tickCount[m]){var M=d(l);M[m]=1,this.shader.uniforms.majorAxis=M,this.shader.uniforms.offset=u,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=A;var k=d(y);k[m]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m])}},g.drawGrid=function(m,u,w,f,A,M){if(this.gridCount[m]){var k=d(r);k[u]=w[1][u]-w[0][u],this.shader.uniforms.minorAxis=k;var E=p(h,f);E[u]+=w[0][u],this.shader.uniforms.offset=E;var P=d(l);P[m]=1,this.shader.uniforms.majorAxis=P;var D=d(y);D[m]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,this.gridCount[m],this.gridOffset[m])}},g.drawZero=function(m,u,w,f,A,M){var k=d(r);this.shader.uniforms.majorAxis=k,k[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=k;var E=p(h,f);E[m]+=w[0][m],this.shader.uniforms.offset=E;var P=d(y);P[u]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(x,T,b){"use strict";var e=x("glslify"),o=x("gl-shader"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);b.line=function(d){return o(d,i,l,null,[{name:"position",type:"vec3"}])};var r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),y=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);b.text=function(d){return o(d,r,y,null,[{name:"position",type:"vec3"}])};var h=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);b.bg=function(d){return o(d,h,s,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(x,T,b){(function(e){(function(){"use strict";T.exports=function(c,g,m,u,w,f){var A=o(c),M=i(c,[{buffer:A,size:3}]),k=r(c);k.attributes.position.location=0;var E=new s(c,k,A,M);return E.update(g,m,u,w,f),E};var o=x("gl-buffer"),i=x("gl-vao"),l=x("vectorize-text"),r=x("./shaders").text,y=window||e.global||{},h=y.__TEXT_CACHE||{};function s(c,g,m,u){this.gl=c,this.shader=g,this.buffer=m,this.vao=u,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}y.__TEXT_CACHE={};var d=s.prototype,p=[0,0];d.bind=function(c,g,m,u){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=c,w.view=g,w.projection=m,w.pixelScale=u,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},d.unbind=function(){this.vao.unbind()},d.update=function(c,g,m,u,w){var f=[];function A(L,I,B,V,Z,Y){var Q=h[B];Q||(Q=h[B]={});var re=Q[I];re||(re=Q[I]=function(ee,te){try{return l(ee,te)}catch(le){return console.warn('error vectorizing text:"'+ee+'" error:',le),{cells:[],positions:[]}}}(I,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:Z,styletags:Y}));for(var $=(V||12)/12,J=re.positions,ie=re.cells,j=0,q=ie.length;j<q;++j)for(var W=ie[j],ae=2;ae>=0;--ae){var G=J[W[ae]];f.push($*G[0],-$*G[1],L)}}for(var M=[0,0,0],k=[0,0,0],E=[0,0,0],P=[0,0,0],D={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){E[F]=f.length/3|0,A(.5*(c[0][F]+c[1][F]),g[F],m[F],12,1.25,D),P[F]=(f.length/3|0)-E[F],M[F]=f.length/3|0;for(var R=0;R<u[F].length;++R)u[F][R].text&&A(u[F][R].x,u[F][R].text,u[F][R].font||w,u[F][R].fontSize||12,1.25,D);k[F]=(f.length/3|0)-M[F]}this.buffer.update(f),this.tickOffset=M,this.tickCount=k,this.labelOffset=E,this.labelCount=P},d.drawTicks=function(c,g,m,u,w,f,A,M){this.tickCount[c]&&(this.shader.uniforms.axis=f,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.tickCount[c],this.tickOffset[c]))},d.drawLabel=function(c,g,m,u,w,f,A,M){this.labelCount[c]&&(this.shader.uniforms.axis=f,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.labelCount[c],this.labelOffset[c]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,x("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(x,T,b){"use strict";function e(o,i){var l=o+"",r=l.indexOf("."),y=0;r>=0&&(y=l.length-r-1);var h=Math.pow(10,y),s=Math.round(o*i*h),d=s+"";if(d.indexOf("e")>=0)return d;var p=s/h,c=s%h;s<0?(p=0|-Math.ceil(p),c=0|-c):(p=0|Math.floor(p),c|=0);var g=""+p;if(s<0&&(g="-"+g),y){for(var m=""+c;m.length<y;)m="0"+m;return g+"."+m}return g}b.create=function(o,i){for(var l=[],r=0;r<3;++r){for(var y=[],h=0;h*i[r]<=o[1][r];++h)y.push({x:h*i[r],text:e(i[r],h)});for(h=-1;h*i[r]>=o[0][r];--h)y.push({x:h*i[r],text:e(i[r],h)});l.push(y)}return l},b.equal=function(o,i){for(var l=0;l<3;++l){if(o[l].length!==i[l].length)return!1;for(var r=0;r<o[l].length;++r){var y=o[l][r],h=i[l][r];if(y.x!==h.x||y.text!==h.text||y.font!==h.font||y.fontColor!==h.fontColor||y.fontSize!==h.fontSize||y.dx!==h.dx||y.dy!==h.dy)return!1}}return!0}},{}],77:[function(x,T,b){"use strict";T.exports=function(w,f,A,M,k){var E=f.model||h,P=f.view||h,D=f.projection||h,F=f._ortho||!1,R=w.bounds,L=(k=k||i(E,P,D,R,F)).axis;l(s,P,E),l(s,D,s);for(var I=m,B=0;B<3;++B)I[B].lo=1/0,I[B].hi=-1/0,I[B].pixelsPerDataUnit=1/0;var V=e(r(s,s));r(s,s);for(var Z=0;Z<3;++Z){var Y=(Z+1)%3,Q=(Z+2)%3,re=u;e:for(B=0;B<2;++B){var $=[];if(L[Z]<0!=!!B){re[Z]=R[B][Z];for(var J=0;J<2;++J){re[Y]=R[J^B][Y];for(var ie=0;ie<2;++ie)re[Q]=R[ie^J^B][Q],$.push(re.slice())}var j=F?5:4;for(J=j;J===j;++J){if(0===$.length)continue e;$=o.positive($,V[J])}for(J=0;J<$.length;++J){var q=g(u,s,Q=$[J],A,M);for(ie=0;ie<3;++ie)I[ie].lo=Math.min(I[ie].lo,Q[ie]),I[ie].hi=Math.max(I[ie].hi,Q[ie]),ie!==Z&&(I[ie].pixelsPerDataUnit=Math.min(I[ie].pixelsPerDataUnit,Math.abs(q[ie])))}}}}return I};var e=x("extract-frustum-planes"),o=x("split-polygon"),i=x("./lib/cube.js"),l=x("gl-mat4/multiply"),r=x("gl-mat4/transpose"),y=x("gl-vec4/transformMat4"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function d(w,f,A){this.lo=w,this.hi=f,this.pixelsPerDataUnit=A}var p=[0,0,0,1],c=[0,0,0,1];function g(w,f,A,M,k){for(var E=0;E<3;++E){for(var P=p,D=c,F=0;F<3;++F)D[F]=P[F]=A[F];D[3]=P[3]=1,D[E]+=1,y(D,D,f),D[3]<0&&(w[E]=1/0),P[E]-=1,y(P,P,f),P[3]<0&&(w[E]=1/0);var R=(P[0]/P[3]-D[0]/D[3])*M,L=(P[1]/P[3]-D[1]/D[3])*k;w[E]=.25*Math.sqrt(R*R+L*L)}return w}var m=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],u=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(x,T,b){"use strict";var e=x("typedarray-pool"),o=x("ndarray-ops"),i=x("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(d,p,c,g,m){this.gl=d,this.type=p,this.handle=c,this.length=g,this.usage=m}var y=r.prototype;function h(d,p,c,g,m,u){var w=m.length*m.BYTES_PER_ELEMENT;if(u<0)return d.bufferData(p,m,g),w;if(w+u>c)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(p,u,m),c}y.bind=function(){this.gl.bindBuffer(this.type,this.handle)},y.unbind=function(){this.gl.bindBuffer(this.type,null)},y.dispose=function(){this.gl.deleteBuffer(this.handle)},y.update=function(d,p){if("number"!=typeof p&&(p=-1),this.bind(),"object"==typeof d&&void 0!==d.shape){var c=d.dtype;if(l.indexOf(c)<0&&(c="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16"),c===d.dtype&&function(w,f){for(var A=1,M=f.length-1;M>=0;--M){if(f[M]!==A)return!1;A*=w[M]}return!0}(d.shape,d.stride))this.length=h(this.gl,this.type,this.length,this.usage,0===d.offset&&d.data.length===d.shape[0]?d.data:d.data.subarray(d.offset,d.shape[0]),p);else{var g=e.malloc(d.size,c),m=i(g,d.shape);o.assign(m,d),this.length=h(this.gl,this.type,this.length,this.usage,p<0?g:g.subarray(0,d.size),p),e.free(g)}}else if(Array.isArray(d)){var u;u=function s(d,p){for(var c=e.malloc(d.length,p),g=d.length,m=0;m<g;++m)c[m]=d[m];return c}(d,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=h(this.gl,this.type,this.length,this.usage,p<0?u:u.subarray(0,d.length),p),e.free(u)}else if("object"==typeof d&&"number"==typeof d.length)this.length=h(this.gl,this.type,this.length,this.usage,d,p);else{if("number"!=typeof d&&void 0!==d)throw new Error("gl-buffer: Invalid data type");if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(d|=0)<=0&&(d=1),this.gl.bufferData(this.type,0|d,this.usage),this.length=d}},T.exports=function(d,p,c,g){if(g=g||d.DYNAMIC_DRAW,(c=c||d.ARRAY_BUFFER)!==d.ARRAY_BUFFER&&c!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==d.DYNAMIC_DRAW&&g!==d.STATIC_DRAW&&g!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=d.createBuffer(),u=new r(d,c,m,0,g);return u.update(p),u}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(x,T,b){"use strict";var e=x("gl-vec3");T.exports=function(i,l){var r=i.positions,y=i.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(0===i.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),h;for(var s=0,d=1/0,p=-1/0,c=1/0,g=-1/0,m=1/0,u=-1/0,w=null,f=null,A=[],M=1/0,k=!1,E=0;E<r.length;E++){var P=r[E];d=Math.min(P[0],d),p=Math.max(P[0],p),c=Math.min(P[1],c),g=Math.max(P[1],g),m=Math.min(P[2],m),u=Math.max(P[2],u);var D=y[E];if(e.length(D)>s&&(s=e.length(D)),E){var F=2*e.distance(w,P)/(e.length(f)+e.length(D));F?(M=Math.min(M,F),k=!1):k=!0}k||(w=P,f=D),A.push(D)}var L=[p,g,u];l&&(l[0]=[d,c,m],l[1]=L),0===s&&(s=1);var I=1/s;isFinite(M)||(M=1),h.vectorScale=M;var B=i.coneSize||.5;i.absoluteConeSize&&(B=i.absoluteConeSize*I),h.coneScale=B,E=0;for(var V=0;E<r.length;E++)for(var Z=(P=r[E])[0],Y=P[1],Q=P[2],re=A[E],$=e.length(re)*I,J=0;J<8;J++){h.positions.push([Z,Y,Q,V++]),h.positions.push([Z,Y,Q,V++]),h.positions.push([Z,Y,Q,V++]),h.positions.push([Z,Y,Q,V++]),h.positions.push([Z,Y,Q,V++]),h.positions.push([Z,Y,Q,V++]),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vertexIntensity.push($,$,$),h.vertexIntensity.push($,$,$);var ie=h.positions.length;h.cells.push([ie-6,ie-5,ie-4],[ie-3,ie-2,ie-1])}return h};var o=x("./lib/shaders");T.exports.createMesh=x("./create_mesh"),T.exports.createConeMesh=function(i,l){return T.exports.createMesh(i,l,{shaders:o,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),i=x("gl-vao"),l=x("gl-texture2d"),r=x("gl-mat4/multiply"),y=x("gl-mat4/invert"),h=x("ndarray"),s=x("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(u,w,f,A,M,k,E,P,D,F,R){this.gl=u,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=f,this.pickShader=A,this.trianglePositions=M,this.triangleVectors=k,this.triangleColors=P,this.triangleUVs=D,this.triangleIds=E,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=R,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}var c=p.prototype;function g(u,w){var f=e(u,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return f.attributes.position.location=0,f.attributes.color.location=2,f.attributes.uv.location=3,f.attributes.vector.location=4,f}function m(u,w){var f=e(u,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return f.attributes.position.location=0,f.attributes.id.location=1,f.attributes.vector.location=4,f}c.isOpaque=function(){return this.opacity>=1},c.isTransparent=function(){return this.opacity<1},c.pickSlots=1,c.setPickBase=function(u){this.pickId=u},c.update=function(u){u=u||{};var w=this.gl;this.dirty=!0,"lightPosition"in u&&(this.lightPosition=u.lightPosition),"opacity"in u&&(this.opacity=u.opacity),"ambient"in u&&(this.ambientLight=u.ambient),"diffuse"in u&&(this.diffuseLight=u.diffuse),"specular"in u&&(this.specularLight=u.specular),"roughness"in u&&(this.roughness=u.roughness),"fresnel"in u&&(this.fresnel=u.fresnel),void 0!==u.tubeScale&&(this.tubeScale=u.tubeScale),void 0!==u.vectorScale&&(this.vectorScale=u.vectorScale),void 0!==u.coneScale&&(this.coneScale=u.coneScale),void 0!==u.coneOffset&&(this.coneOffset=u.coneOffset),u.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ae){for(var G=s({colormap:ae,nshades:256,format:"rgba"}),ee=new Uint8Array(1024),te=0;te<256;++te){for(var le=G[te],ue=0;ue<3;++ue)ee[4*te+ue]=le[ue];ee[4*te+3]=255*le[3]}return h(ee,[256,256,4],[4,0,1])}(u.colormap)),this.texture.generateMipmap());var f=u.cells,A=u.positions,M=u.vectors;if(A&&f&&M){var k=[],E=[],P=[],D=[],F=[];this.cells=f,this.positions=A,this.vectors=M;var R=u.meshColor||[1,1,1,1],L=u.vertexIntensity,I=1/0,B=-1/0;if(L)if(u.vertexIntensityBounds)I=+u.vertexIntensityBounds[0],B=+u.vertexIntensityBounds[1];else for(var V=0;V<L.length;++V){var Z=L[V];I=Math.min(I,Z),B=Math.max(B,Z)}else for(V=0;V<A.length;++V)Z=A[V][2],I=Math.min(I,Z),B=Math.max(B,Z);for(this.intensity=L||function(ae){for(var G=ae.length,ee=new Array(G),te=0;te<G;++te)ee[te]=ae[te][2];return ee}(A),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=0;V<A.length;++V)for(var Y=A[V],Q=0;Q<3;++Q)!isNaN(Y[Q])&&isFinite(Y[Q])&&(this.bounds[0][Q]=Math.min(this.bounds[0][Q],Y[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],Y[Q]));var re=0;e:for(V=0;V<f.length;++V){var $=f[V];if(3===$.length){for(Q=0;Q<3;++Q){Y=A[ie=$[Q]];for(var J=0;J<3;++J)if(isNaN(Y[J])||!isFinite(Y[J]))continue e}for(Q=0;Q<3;++Q){var ie;Y=A[ie=$[2-Q]],k.push(Y[0],Y[1],Y[2],Y[3]);var j=M[ie];E.push(j[0],j[1],j[2],j[3]||0);var q;P.push(R[0],R[1],R[2],3===R.length?1:R[3]),D.push((q=L?[(L[ie]-I)/(B-I),0]:[(Y[2]-I)/(B-I),0])[0],q[1]),F.push(V)}re+=1}}this.triangleCount=re,this.trianglePositions.update(k),this.triangleVectors.update(E),this.triangleColors.update(P),this.triangleUVs.update(D),this.triangleIds.update(new Uint32Array(F))}},c.drawTransparent=c.draw=function(u){for(var w=this.gl,f=(u=u||{}).model||d,A=u.view||d,M=u.projection||d,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)k[0][E]=Math.max(k[0][E],this.clipBounds[0][E]),k[1][E]=Math.min(k[1][E],this.clipBounds[1][E]);var P={model:f,view:A,projection:M,inverseModel:d.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};P.inverseModel=y(P.inverseModel,P.model),w.disable(w.CULL_FACE),this.texture.bind(0);var D=new Array(16);for(r(D,P.view,P.model),r(D,P.projection,D),y(D,D),E=0;E<3;++E)P.eyePosition[E]=D[12+E]/D[15];var F=D[15];for(E=0;E<3;++E)F+=this.lightPosition[E]*D[4*E+3];for(E=0;E<3;++E){for(var R=D[12+E],L=0;L<3;++L)R+=D[4*L+E]*this.lightPosition[L];P.lightPosition[E]=R/F}if(this.triangleCount>0){var I=this.triShader;I.bind(),I.uniforms=P,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},c.drawPick=function(u){for(var w=this.gl,f=(u=u||{}).model||d,A=u.view||d,M=u.projection||d,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)k[0][E]=Math.max(k[0][E],this.clipBounds[0][E]),k[1][E]=Math.min(k[1][E],this.clipBounds[1][E]);this._model=[].slice.call(f),this._view=[].slice.call(A),this._projection=[].slice.call(M),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var P={model:f,view:A,projection:M,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},D=this.pickShader;D.bind(),D.uniforms=P,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},c.pick=function(u){if(!u||u.id!==this.pickId)return null;var w=u.value[0]+256*u.value[1]+65536*u.value[2],f=this.cells[w],A=this.positions[f[1]].slice(0,3),M={position:A,dataCoordinate:A,index:Math.floor(f[1]/48)};return"cone"===this.traceType?M.index=Math.floor(f[1]/48):"streamtube"===this.traceType&&(M.intensity=this.intensity[f[1]],M.velocity=this.vectors[f[1]].slice(0,3),M.divergence=this.vectors[f[1]][3],M.index=w),M},c.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},T.exports=function(u,w,f){var A=f.shaders;1===arguments.length&&(u=(w=u).gl);var M=g(u,A),k=m(u,A),E=l(u,h(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=u.LINEAR_MIPMAP_LINEAR,E.magFilter=u.LINEAR;var P=o(u),D=o(u),F=o(u),R=o(u),L=o(u),B=new p(u,E,M,k,P,D,L,F,R,i(u,[{buffer:P,type:u.FLOAT,size:4},{buffer:L,type:u.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:u.FLOAT,size:4},{buffer:R,type:u.FLOAT,size:2},{buffer:D,type:u.FLOAT,size:4}]),f.traceType||"cone");return B.update(w),B}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(x,T,b){var e=x("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),i=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);b.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},b.pickShader={vertex:l,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(x,T,b){T.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(x,T,b){var e=x("./1.0/numbers");T.exports=function(o){return e[o]}},{"./1.0/numbers":82}],84:[function(x,T,b){"use strict";T.exports=function(p){var c=p.gl,g=e(c),m=o(c,[{buffer:g,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:c.FLOAT,size:3,offset:28,stride:40}]),u=i(c);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var w=new r(c,g,m,u);return w.update(p),w};var e=x("gl-buffer"),o=x("gl-vao"),i=x("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(p,c,g,m){this.gl=p,this.shader=m,this.buffer=c,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var y=r.prototype;function h(p,c){for(var g=0;g<3;++g)p[0][g]=Math.min(p[0][g],c[g]),p[1][g]=Math.max(p[1][g],c[g])}y.isOpaque=function(){return!this.hasAlpha},y.isTransparent=function(){return this.hasAlpha},y.drawTransparent=y.draw=function(p){var c=this.gl,g=this.shader.uniforms;this.shader.bind();var m=g.view=p.view||l,u=g.projection=p.projection||l;g.model=p.model||l,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var k=(p._ortho?2:1)*this.pixelRatio*(u[3]*m[12]+u[7]*m[13]+u[11]*m[14]+u[15]*m[15])/c.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)c.lineWidth(this.lineWidth[E]*this.pixelRatio),g.capSize=this.capSize[E]*k,this.lineCount[E]&&c.drawArrays(c.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};var s=function(){for(var p=new Array(3),c=0;c<3;++c){for(var g=[],m=1;m<=2;++m)for(var u=-1;u<=1;u+=2){var w=[0,0,0];w[(m+c)%3]=u,g.push(w)}p[c]=g}return p}();function d(p,c,g,m){for(var u=s[m],w=0;w<u.length;++w){var f=u[w];p.push(c[0],c[1],c[2],g[0],g[1],g[2],g[3],f[0],f[1],f[2])}return u.length}y.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var c=p.color||[[0,0,0],[0,0,0],[0,0,0]],g=p.position,m=p.error;if(Array.isArray(c[0])||(c=[c,c,c]),g&&m){var u=[],w=g.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var A=0;A<3;++A){this.lineOffset[A]=f;e:for(var M=0;M<w;++M){for(var k=g[M],E=0;E<3;++E)if(isNaN(k[E])||!isFinite(k[E]))continue e;var F,P=m[M],D=c[A];Array.isArray(D[0])&&(D=c[M]),3===D.length?D=[D[0],D[1],D[2],1]:4===D.length&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][A])||isNaN(P[1][A])||(P[0][A]<0&&((F=k.slice())[A]+=P[0][A],u.push(k[0],k[1],k[2],D[0],D[1],D[2],D[3],0,0,0,F[0],F[1],F[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,F),f+=2+d(u,F,D,A)),P[1][A]>0&&((F=k.slice())[A]+=P[1][A],u.push(k[0],k[1],k[2],D[0],D[1],D[2],D[3],0,0,0,F[0],F[1],F[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,F),f+=2+d(u,F,D,A)))}this.lineCount[A]=f-this.lineOffset[A]}this.buffer.update(u)}},y.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(x,T,b){"use strict";var e=x("glslify"),o=x("gl-shader"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);T.exports=function(r){return o(r,i,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(x,T,b){"use strict";var e=x("gl-texture2d");T.exports=function(w,f,A,M){o||(o=w.FRAMEBUFFER_UNSUPPORTED,i=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=w.getExtension("WEBGL_draw_buffers");if(!y&&k&&function(I,B){var V=I.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);y=new Array(V+1);for(var Z=0;Z<=V;++Z){for(var Y=new Array(V),Q=0;Q<Z;++Q)Y[Q]=I.COLOR_ATTACHMENT0+Q;for(Q=Z;Q<V;++Q)Y[Q]=I.NONE;y[Z]=Y}}(w,k),Array.isArray(f)&&(M=A,A=0|f[1],f=0|f[0]),"number"!=typeof f)throw new Error("gl-fbo: Missing shape parameter");var E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||A<0||A>E)throw new Error("gl-fbo: Parameters are too large for FBO");var P=1;if("color"in(M=M||{})){if((P=Math.max(0|M.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(P>1){if(!k)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(P>w.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+P+" draw buffers")}}var D=w.UNSIGNED_BYTE,F=w.getExtension("OES_texture_float");if(M.float&&P>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");D=w.FLOAT}else M.preferFloat&&P>0&&F&&(D=w.FLOAT);var R=!0;"depth"in M&&(R=!!M.depth);var L=!1;return"stencil"in M&&(L=!!M.stencil),new g(w,f,A,D,P,R,L,k)};var o,i,l,r,y=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function s(w,f){w.bindFramebuffer(w.FRAMEBUFFER,f[0]),w.bindRenderbuffer(w.RENDERBUFFER,f[1]),w.bindTexture(w.TEXTURE_2D,f[2])}function d(w){switch(w){case o:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(w,f,A,M,k,E){if(!M)return null;var P=e(w,f,A,k,M);return P.magFilter=w.NEAREST,P.minFilter=w.NEAREST,P.mipSamples=1,P.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,E,w.TEXTURE_2D,P.handle,0),P}function c(w,f,A,M,k){var E=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,E),w.renderbufferStorage(w.RENDERBUFFER,M,f,A),w.framebufferRenderbuffer(w.FRAMEBUFFER,k,w.RENDERBUFFER,E),E}function g(w,f,A,M,k,E,P,D){this.gl=w,this._shape=[0|f,0|A],this._destroyed=!1,this._ext=D,this.color=new Array(k);for(var F=0;F<k;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=E,this._useStencil=P;var R=this,L=[0|f,0|A];Object.defineProperties(L,{0:{get:function(){return R._shape[0]},set:function(I){return R.width=I}},1:{get:function(){return R._shape[1]},set:function(I){return R.height=I}}}),this._shapeVector=L,function(I){var B=h(I.gl),V=I.gl,Z=I.handle=V.createFramebuffer(),Y=I._shape[0],Q=I._shape[1],re=I.color.length,$=I._ext,J=I._useStencil,ie=I._useDepth,j=I._colorType;V.bindFramebuffer(V.FRAMEBUFFER,Z);for(var q=0;q<re;++q)I.color[q]=p(V,Y,Q,j,V.RGBA,V.COLOR_ATTACHMENT0+q);0===re?(I._color_rb=c(V,Y,Q,V.RGBA4,V.COLOR_ATTACHMENT0),$&&$.drawBuffersWEBGL(y[0])):re>1&&$.drawBuffersWEBGL(y[re]);var W=V.getExtension("WEBGL_depth_texture");W?J?I.depth=p(V,Y,Q,W.UNSIGNED_INT_24_8_WEBGL,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):ie&&(I.depth=p(V,Y,Q,V.UNSIGNED_SHORT,V.DEPTH_COMPONENT,V.DEPTH_ATTACHMENT)):ie&&J?I._depth_rb=c(V,Y,Q,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):ie?I._depth_rb=c(V,Y,Q,V.DEPTH_COMPONENT16,V.DEPTH_ATTACHMENT):J&&(I._depth_rb=c(V,Y,Q,V.STENCIL_INDEX,V.STENCIL_ATTACHMENT));var ae=V.checkFramebufferStatus(V.FRAMEBUFFER);if(ae!==V.FRAMEBUFFER_COMPLETE){for(I._destroyed=!0,V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteFramebuffer(I.handle),I.handle=null,I.depth&&(I.depth.dispose(),I.depth=null),I._depth_rb&&(V.deleteRenderbuffer(I._depth_rb),I._depth_rb=null),q=0;q<I.color.length;++q)I.color[q].dispose(),I.color[q]=null;I._color_rb&&(V.deleteRenderbuffer(I._color_rb),I._color_rb=null),s(V,B),d(ae)}s(V,B)}(this)}var m=g.prototype;function u(w,f,A){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==f||w._shape[1]!==A){var M=w.gl,k=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(f<0||f>k||A<0||A>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=f,w._shape[1]=A;for(var E=h(M),P=0;P<w.color.length;++P)w.color[P].shape=w._shape;w._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,w._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,w._shape[0],w._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,w.handle);var D=M.checkFramebufferStatus(M.FRAMEBUFFER);D!==M.FRAMEBUFFER_COMPLETE&&(w.dispose(),s(M,E),d(D)),s(M,E)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|w[0],A=0|w[1];return u(this,f,A),[f,A]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return u(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return u(this,this._shape[0],w|=0),w},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(x,T,b){var e=x("sprintf-js").sprintf,o=x("gl-constants/lookup"),i=x("glsl-shader-name"),l=x("add-line-numbers");T.exports=function(r,y,h){"use strict";var s=i(y)||"of unknown name (see npm glsl-shader-name)",d="unknown type";void 0!==h&&(d=h===o.FRAGMENT_SHADER?"fragment":"vertex");for(var p=e("Error compiling %s shader %s:\n",d,s),c=e("%s%s",p,r),g=r.split("\n"),m={},u=0;u<g.length;u++){var w=g[u];if(""!==w&&"\0"!==w){var f=parseInt(w.split(":")[2]);if(isNaN(f))throw new Error(e("Could not parse error: %s",w));m[f]=w}}var A=l(y).split("\n");for(u=0;u<A.length;u++)if((m[u+3]||m[u+2]||m[u+1])&&(p+=A[u]+"\n",m[u+1])){var k=m[u+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),p+=e("^^^ %s\n\n",k)}return{long:p.trim(),short:c.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(x,T,b){"use strict";T.exports=function(c,g){var m=c.gl,E=new h(c,l(m,y.vertex,y.fragment),l(m,y.pickVertex,y.pickFragment),r(m),r(m),r(m),r(m));return E.update(g),c.addObject(E),E};var e=x("binary-search-bounds"),o=x("iota-array"),i=x("typedarray-pool"),l=x("gl-shader"),r=x("gl-buffer"),y=x("./lib/shaders");function h(c,g,m,u,w,f,A){this.plot=c,this.shader=g,this.pickShader=m,this.positionBuffer=u,this.weightBuffer=w,this.colorBuffer=f,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s,c,g,d=h.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=(s=[1,0,0,0,1,0,0,0,1],function(){var c=this.plot,g=this.shader,m=this.bounds,u=this.numVertices;if(!(u<=0)){var w=c.gl,f=c.dataBox,M=m[3]-m[1],k=f[2]-f[0],E=f[3]-f[1];s[0]=2*(m[2]-m[0])/k,s[4]=2*M/E,s[6]=2*(m[0]-f[0])/k-1,s[7]=2*(m[1]-f[1])/E-1,g.bind();var P=g.uniforms;P.viewTransform=s,P.shape=this.shape;var D=g.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,u)}}),d.drawPick=(c=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(m){var u=this.plot,w=this.pickShader,f=this.bounds,A=this.numVertices;if(!(A<=0)){var M=u.gl,k=u.dataBox,P=f[3]-f[1],D=k[2]-k[0],F=k[3]-k[1];c[0]=2*(f[2]-f[0])/D,c[4]=2*P/F,c[6]=2*(f[0]-k[0])/D-1,c[7]=2*(f[1]-k[1])/F-1;for(var R=0;R<4;++R)g[R]=m>>8*R&255;this.pickOffset=m,w.bind();var L=w.uniforms;L.viewTransform=c,L.pickOffset=g,L.shape=this.shape;var I=w.attributes;return this.positionBuffer.bind(),I.position.pointer(),this.weightBuffer.bind(),I.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),I.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,A),m+this.shape[0]*this.shape[1]}}),d.pick=function(c,g,m){var u=this.pickOffset;if(m<u||m>=u+this.shape[0]*this.shape[1])return null;var f=m-u;return{object:this,pointId:f,dataCoord:[this.xData[f%this.shape[0]],this.yData[f/this.shape[0]|0]]}},d.update=function(c){var g=(c=c||{}).shape||[0,0],m=c.x||o(g[0]),u=c.y||o(g[1]),w=c.z||new Float32Array(g[0]*g[1]),f=!1!==c.zsmooth;this.xData=m,this.yData=u;var A,M,k,E,P=c.colorLevels||[0],D=c.colorValues||[0,0,0,1],F=P.length,R=this.bounds;f?(A=R[0]=m[0],M=R[1]=u[0],k=R[2]=m[m.length-1],E=R[3]=u[u.length-1]):(A=R[0]=m[0]+(m[1]-m[0])/2,M=R[1]=u[0]+(u[1]-u[0])/2,k=R[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,E=R[3]=u[u.length-1]+(u[u.length-1]-u[u.length-2])/2);var L=1/(k-A),I=1/(E-M),B=g[0],V=g[1];this.shape=[B,V];var Z=(f?(B-1)*(V-1):B*V)*(p.length>>>1);this.numVertices=Z;for(var Y=i.mallocUint8(4*Z),Q=i.mallocFloat32(2*Z),re=i.mallocUint8(2*Z),$=i.mallocUint32(Z),J=0,ie=f?B-1:B,j=f?V-1:V,q=0;q<j;++q){var W,ae;f?(W=I*(u[q]-M),ae=I*(u[q+1]-M)):(W=q<V-1?I*(u[q]-(u[q+1]-u[q])/2-M):I*(u[q]-(u[q]-u[q-1])/2-M),ae=q<V-1?I*(u[q]+(u[q+1]-u[q])/2-M):I*(u[q]+(u[q]-u[q-1])/2-M));for(var G=0;G<ie;++G){var ee,te;f?(ee=L*(m[G]-A),te=L*(m[G+1]-A)):(ee=G<B-1?L*(m[G]-(m[G+1]-m[G])/2-A):L*(m[G]-(m[G]-m[G-1])/2-A),te=G<B-1?L*(m[G]+(m[G+1]-m[G])/2-A):L*(m[G]+(m[G]-m[G-1])/2-A));for(var le=0;le<p.length;le+=2){var ue,de,he,be,me=p[le],_e=p[le+1],Ee=w[f?(q+_e)*B+(G+me):q*B+G],De=e.le(P,Ee);if(De<0)ue=D[0],de=D[1],he=D[2],be=D[3];else if(De===F-1)ue=D[4*F-4],de=D[4*F-3],he=D[4*F-2],be=D[4*F-1];else{var Se=(Ee-P[De])/(P[De+1]-P[De]),Fe=1-Se,ve=4*De,Te=4*(De+1);ue=Fe*D[ve]+Se*D[Te],de=Fe*D[ve+1]+Se*D[Te+1],he=Fe*D[ve+2]+Se*D[Te+2],be=Fe*D[ve+3]+Se*D[Te+3]}Y[4*J]=255*ue,Y[4*J+1]=255*de,Y[4*J+2]=255*he,Y[4*J+3]=255*be,Q[2*J]=.5*ee+.5*te,Q[2*J+1]=.5*W+.5*ae,re[2*J]=me,re[2*J+1]=_e,$[J]=q*B+G,J+=1}}}this.positionBuffer.update(Q),this.weightBuffer.update(re),this.colorBuffer.update(Y),this.idBuffer.update($),i.free(Q),i.free(Y),i.free(re),i.free($)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(x,T,b){"use strict";var e=x("glslify");T.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(x,T,b){var e=x("glslify"),o=x("gl-shader"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),y=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];b.createShader=function(h){return o(h,i,l,null,y)},b.createPickShader=function(h){return o(h,i,r,null,y)}},{"gl-shader":132,glslify:231}],91:[function(x,T,b){"use strict";T.exports=function(A){var M=A.gl||A.scene&&A.scene.gl,k=d(M);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;var E=p(M);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;for(var P=e(M),D=o(M,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),F=h(new Array(1024),[256,1,4]),R=0;R<1024;++R)F.data[R]=255;var L=i(M,F);L.wrap=M.REPEAT;var I=new w(M,k,E,P,D,L);return I.update(A),I};var e=x("gl-buffer"),o=x("gl-vao"),i=x("gl-texture2d"),l=new Uint8Array(4),r=new Float32Array(l.buffer),y=x("binary-search-bounds"),h=x("ndarray"),s=x("./lib/shaders"),d=s.createShader,p=s.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(A,M){for(var k=0,E=0;E<3;++E){var P=A[E]-M[E];k+=P*P}return Math.sqrt(k)}function m(A){for(var M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)M[0][k]=Math.max(A[0][k],M[0][k]),M[1][k]=Math.min(A[1][k],M[1][k]);return M}function u(A,M,k,E){this.arcLength=A,this.position=M,this.index=k,this.dataCoordinate=E}function w(A,M,k,E,P,D){this.gl=A,this.shader=M,this.pickShader=k,this.buffer=E,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=D,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=w.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(A){this.pickId=A},f.drawTransparent=f.draw=function(A){if(this.vertexCount){var M=this.gl,k=this.shader,E=this.vao;k.bind(),k.uniforms={model:A.model||c,view:A.view||c,projection:A.projection||c,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},f.drawPick=function(A){if(this.vertexCount){var M=this.gl,k=this.pickShader,E=this.vao;k.bind(),k.uniforms={model:A.model||c,view:A.view||c,projection:A.projection||c,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},f.update=function(A){var M,k;this.dirty=!0;var E=!!A.connectGaps;"dashScale"in A&&(this.dashScale=A.dashScale),this.hasAlpha=!1,"opacity"in A&&(this.opacity=+A.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],D=[],F=[],R=0,L=0,I=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=A.position||A.positions;if(B){var V=A.color||A.colors||[0,0,0,1],Z=A.lineWidth||1,Y=!1;e:for(M=1;M<B.length;++M){var Q,re,$,J=B[M-1],ie=B[M];for(D.push(R),F.push(J.slice()),k=0;k<3;++k){if(isNaN(J[k])||isNaN(ie[k])||!isFinite(J[k])||!isFinite(ie[k])){if(!E&&P.length>0){for(var j=0;j<24;++j)P.push(P[P.length-12]);L+=2,Y=!0}continue e}I[0][k]=Math.min(I[0][k],J[k],ie[k]),I[1][k]=Math.max(I[1][k],J[k],ie[k])}Array.isArray(V[0])?(Q=V.length>M-1?V[M-1]:V.length>0?V[V.length-1]:[0,0,0,1],re=V.length>M?V[M]:V.length>0?V[V.length-1]:[0,0,0,1]):Q=re=V,3===Q.length&&(Q=[Q[0],Q[1],Q[2],1]),3===re.length&&(re=[re[0],re[1],re[2],1]),!this.hasAlpha&&Q[3]<1&&(this.hasAlpha=!0),$=Array.isArray(Z)?Z.length>M-1?Z[M-1]:Z.length>0?Z[Z.length-1]:[0,0,0,1]:Z;var q=R;if(R+=g(J,ie),Y){for(k=0;k<2;++k)P.push(J[0],J[1],J[2],ie[0],ie[1],ie[2],q,$,Q[0],Q[1],Q[2],Q[3]);L+=2,Y=!1}P.push(J[0],J[1],J[2],ie[0],ie[1],ie[2],q,$,Q[0],Q[1],Q[2],Q[3],J[0],J[1],J[2],ie[0],ie[1],ie[2],q,-$,Q[0],Q[1],Q[2],Q[3],ie[0],ie[1],ie[2],J[0],J[1],J[2],R,-$,re[0],re[1],re[2],re[3],ie[0],ie[1],ie[2],J[0],J[1],J[2],R,$,re[0],re[1],re[2],re[3]),L+=4}}if(this.buffer.update(P),D.push(R),F.push(B[B.length-1].slice()),this.bounds=I,this.vertexCount=L,this.points=F,this.arcLength=D,"dashes"in A){var W=A.dashes.slice();for(W.unshift(0),M=1;M<W.length;++M)W[M]=W[M-1]+W[M];var ae=h(new Array(1024),[256,1,4]);for(M=0;M<256;++M){for(k=0;k<4;++k)ae.set(M,0,k,0);1&y.le(W,W[W.length-1]*M/255)?ae.set(M,0,0,0):ae.set(M,0,0,255)}this.texture.setPixels(ae)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(A){if(!A||A.id!==this.pickId)return null;var B,V,Z,M=(B=A.value[0],V=A.value[1],Z=A.value[2],l[0]=0,l[1]=Z,l[2]=V,l[3]=B,r[0]),k=y.le(this.arcLength,M);if(k<0)return null;if(k===this.arcLength.length-1)return new u(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),k);for(var E=this.points[k],P=this.points[Math.min(k+1,this.points.length-1)],D=(M-this.arcLength[k])/(this.arcLength[k+1]-this.arcLength[k]),F=1-D,R=[0,0,0],L=0;L<3;++L)R[L]=F*E[L]+D*P[L];var I=Math.min(D<.5?k:k+1,this.points.length-1);return new u(M,R,I,this.points[I])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(x,T,b){T.exports=function(e){var o=new Float32Array(16);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o}},{}],93:[function(x,T,b){T.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(x,T,b){T.exports=function(e){var o=e[0],i=e[1],l=e[2],r=e[3],y=e[4],h=e[5],s=e[6],d=e[7],p=e[8],c=e[9],g=e[10],m=e[11],u=e[12],w=e[13],f=e[14],A=e[15];return(o*h-i*y)*(g*A-m*f)-(o*s-l*y)*(c*A-m*w)+(o*d-r*y)*(c*f-g*w)+(i*s-l*h)*(p*A-m*u)-(i*d-r*h)*(p*f-g*u)+(l*d-r*s)*(p*w-c*u)}},{}],95:[function(x,T,b){T.exports=function(e,o){var i=o[0],l=o[1],r=o[2],y=o[3],h=i+i,s=l+l,d=r+r,p=i*h,c=l*h,g=l*s,m=r*h,u=r*s,w=r*d,f=y*h,A=y*s,M=y*d;return e[0]=1-g-w,e[1]=c+M,e[2]=m-A,e[3]=0,e[4]=c-M,e[5]=1-p-w,e[6]=u+f,e[7]=0,e[8]=m+A,e[9]=u-f,e[10]=1-p-g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=o[3],s=l+l,d=r+r,p=y+y,c=l*s,g=l*d,m=l*p,u=r*d,w=r*p,f=y*p,A=h*s,M=h*d,k=h*p;return e[0]=1-(u+f),e[1]=g+k,e[2]=m-M,e[3]=0,e[4]=g-k,e[5]=1-(c+f),e[6]=w+A,e[7]=0,e[8]=m+M,e[9]=w-A,e[10]=1-(c+u),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}},{}],97:[function(x,T,b){T.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(x,T,b){T.exports=function(e,o){var i=o[0],l=o[1],r=o[2],y=o[3],h=o[4],s=o[5],d=o[6],p=o[7],c=o[8],g=o[9],m=o[10],u=o[11],w=o[12],f=o[13],A=o[14],M=o[15],k=i*s-l*h,E=i*d-r*h,P=i*p-y*h,D=l*d-r*s,F=l*p-y*s,R=r*p-y*d,L=c*f-g*w,I=c*A-m*w,B=c*M-u*w,V=g*A-m*f,Z=g*M-u*f,Y=m*M-u*A,Q=k*Y-E*Z+P*V+D*B-F*I+R*L;return Q?(e[0]=(s*Y-d*Z+p*V)*(Q=1/Q),e[1]=(r*Z-l*Y-y*V)*Q,e[2]=(f*R-A*F+M*D)*Q,e[3]=(m*F-g*R-u*D)*Q,e[4]=(d*B-h*Y-p*I)*Q,e[5]=(i*Y-r*B+y*I)*Q,e[6]=(A*P-w*R-M*E)*Q,e[7]=(c*R-m*P+u*E)*Q,e[8]=(h*Z-s*B+p*L)*Q,e[9]=(l*B-i*Z-y*L)*Q,e[10]=(w*F-f*P+M*k)*Q,e[11]=(g*P-c*F-u*k)*Q,e[12]=(s*I-h*V-d*L)*Q,e[13]=(i*V-l*I+r*L)*Q,e[14]=(f*E-w*D-A*k)*Q,e[15]=(c*D-g*E+m*k)*Q,e):null}},{}],99:[function(x,T,b){var e=x("./identity");T.exports=function(o,i,l,r){var y,h,s,d,p,c,g,m,u,w,f=i[0],A=i[1],M=i[2],k=r[0],E=r[1],P=r[2],D=l[0],F=l[1],R=l[2];return Math.abs(f-D)<1e-6&&Math.abs(A-F)<1e-6&&Math.abs(M-R)<1e-6?e(o):(g=f-D,m=A-F,u=M-R,y=E*(u*=w=1/Math.sqrt(g*g+m*m+u*u))-P*(m*=w),h=P*(g*=w)-k*u,s=k*m-E*g,(w=Math.sqrt(y*y+h*h+s*s))?(y*=w=1/w,h*=w,s*=w):(y=0,h=0,s=0),d=m*s-u*h,p=u*y-g*s,c=g*h-m*y,(w=Math.sqrt(d*d+p*p+c*c))?(d*=w=1/w,p*=w,c*=w):(d=0,p=0,c=0),o[0]=y,o[1]=d,o[2]=g,o[3]=0,o[4]=h,o[5]=p,o[6]=m,o[7]=0,o[8]=s,o[9]=c,o[10]=u,o[11]=0,o[12]=-(y*f+h*A+s*M),o[13]=-(d*f+p*A+c*M),o[14]=-(g*f+m*A+u*M),o[15]=1,o)}},{"./identity":97}],100:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=o[3],s=o[4],d=o[5],p=o[6],c=o[7],g=o[8],m=o[9],u=o[10],w=o[11],f=o[12],A=o[13],M=o[14],k=o[15],E=i[0],P=i[1],D=i[2],F=i[3];return e[0]=E*l+P*s+D*g+F*f,e[1]=E*r+P*d+D*m+F*A,e[2]=E*y+P*p+D*u+F*M,e[3]=E*h+P*c+D*w+F*k,e[4]=(E=i[4])*l+(P=i[5])*s+(D=i[6])*g+(F=i[7])*f,e[5]=E*r+P*d+D*m+F*A,e[6]=E*y+P*p+D*u+F*M,e[7]=E*h+P*c+D*w+F*k,e[8]=(E=i[8])*l+(P=i[9])*s+(D=i[10])*g+(F=i[11])*f,e[9]=E*r+P*d+D*m+F*A,e[10]=E*y+P*p+D*u+F*M,e[11]=E*h+P*c+D*w+F*k,e[12]=(E=i[12])*l+(P=i[13])*s+(D=i[14])*g+(F=i[15])*f,e[13]=E*r+P*d+D*m+F*A,e[14]=E*y+P*p+D*u+F*M,e[15]=E*h+P*c+D*w+F*k,e}},{}],101:[function(x,T,b){T.exports=function(e,o,i,l,r,y,h){var s=1/(o-i),d=1/(l-r),p=1/(y-h);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(o+i)*s,e[13]=(r+l)*d,e[14]=(h+y)*p,e[15]=1,e}},{}],102:[function(x,T,b){T.exports=function(e,o,i,l,r){var y=1/Math.tan(o/2),h=1/(l-r);return e[0]=y/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+l)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*l*h,e[15]=0,e}},{}],103:[function(x,T,b){T.exports=function(e,o,i,l){var r,y,h,s,d,p,c,g,m,u,w,f,A,M,k,E,P,D,F,R,L,I,B,V,Z=l[0],Y=l[1],Q=l[2],re=Math.sqrt(Z*Z+Y*Y+Q*Q);return Math.abs(re)<1e-6?null:(Z*=re=1/re,Y*=re,Q*=re,r=Math.sin(i),y=Math.cos(i),d=o[1],p=o[2],c=o[3],m=o[5],u=o[6],w=o[7],A=o[9],M=o[10],k=o[11],F=Z*Y*(h=1-y)-Q*r,R=Y*Y*h+y,L=Q*Y*h+Z*r,I=Z*Q*h+Y*r,B=Y*Q*h-Z*r,V=Q*Q*h+y,e[0]=(s=o[0])*(E=Z*Z*h+y)+(g=o[4])*(P=Y*Z*h+Q*r)+(f=o[8])*(D=Q*Z*h-Y*r),e[1]=d*E+m*P+A*D,e[2]=p*E+u*P+M*D,e[3]=c*E+w*P+k*D,e[4]=s*F+g*R+f*L,e[5]=d*F+m*R+A*L,e[6]=p*F+u*R+M*L,e[7]=c*F+w*R+k*L,e[8]=s*I+g*B+f*V,e[9]=d*I+m*B+A*V,e[10]=p*I+u*B+M*V,e[11]=c*I+w*B+k*V,o!==e&&(e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e)}},{}],104:[function(x,T,b){T.exports=function(e,o,i){var l=Math.sin(i),r=Math.cos(i),y=o[4],h=o[5],s=o[6],d=o[7],p=o[8],c=o[9],g=o[10],m=o[11];return o!==e&&(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[4]=y*r+p*l,e[5]=h*r+c*l,e[6]=s*r+g*l,e[7]=d*r+m*l,e[8]=p*r-y*l,e[9]=c*r-h*l,e[10]=g*r-s*l,e[11]=m*r-d*l,e}},{}],105:[function(x,T,b){T.exports=function(e,o,i){var l=Math.sin(i),r=Math.cos(i),y=o[0],h=o[1],s=o[2],d=o[3],p=o[8],c=o[9],g=o[10],m=o[11];return o!==e&&(e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=y*r-p*l,e[1]=h*r-c*l,e[2]=s*r-g*l,e[3]=d*r-m*l,e[8]=y*l+p*r,e[9]=h*l+c*r,e[10]=s*l+g*r,e[11]=d*l+m*r,e}},{}],106:[function(x,T,b){T.exports=function(e,o,i){var l=Math.sin(i),r=Math.cos(i),y=o[0],h=o[1],s=o[2],d=o[3],p=o[4],c=o[5],g=o[6],m=o[7];return o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=y*r+p*l,e[1]=h*r+c*l,e[2]=s*r+g*l,e[3]=d*r+m*l,e[4]=p*r-y*l,e[5]=c*r-h*l,e[6]=g*r-s*l,e[7]=m*r-d*l,e}},{}],107:[function(x,T,b){T.exports=function(e,o,i){var l=i[0],r=i[1],y=i[2];return e[0]=o[0]*l,e[1]=o[1]*l,e[2]=o[2]*l,e[3]=o[3]*l,e[4]=o[4]*r,e[5]=o[5]*r,e[6]=o[6]*r,e[7]=o[7]*r,e[8]=o[8]*y,e[9]=o[9]*y,e[10]=o[10]*y,e[11]=o[11]*y,e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}},{}],108:[function(x,T,b){T.exports=function(e,o,i){var l,r,y,h,s,d,p,c,g,m,u,w,f=i[0],A=i[1],M=i[2];return o===e?(e[12]=o[0]*f+o[4]*A+o[8]*M+o[12],e[13]=o[1]*f+o[5]*A+o[9]*M+o[13],e[14]=o[2]*f+o[6]*A+o[10]*M+o[14],e[15]=o[3]*f+o[7]*A+o[11]*M+o[15]):(r=o[1],y=o[2],h=o[3],s=o[4],d=o[5],p=o[6],c=o[7],g=o[8],m=o[9],u=o[10],w=o[11],e[0]=l=o[0],e[1]=r,e[2]=y,e[3]=h,e[4]=s,e[5]=d,e[6]=p,e[7]=c,e[8]=g,e[9]=m,e[10]=u,e[11]=w,e[12]=l*f+s*A+g*M+o[12],e[13]=r*f+d*A+m*M+o[13],e[14]=y*f+p*A+u*M+o[14],e[15]=h*f+c*A+w*M+o[15]),e}},{}],109:[function(x,T,b){T.exports=function(e,o){if(e===o){var i=o[1],l=o[2],r=o[3],y=o[6],h=o[7],s=o[11];e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=i,e[6]=o[9],e[7]=o[13],e[8]=l,e[9]=y,e[11]=o[14],e[12]=r,e[13]=h,e[14]=s}else e[0]=o[0],e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=o[1],e[5]=o[5],e[6]=o[9],e[7]=o[13],e[8]=o[2],e[9]=o[6],e[10]=o[10],e[11]=o[14],e[12]=o[3],e[13]=o[7],e[14]=o[11],e[15]=o[15];return e}},{}],110:[function(x,T,b){"use strict";var e=x("barycentric"),o=x("polytope-closest-point/lib/closest_point_2d.js");function i(y,h){for(var s=[0,0,0,0],d=0;d<4;++d)for(var p=0;p<4;++p)s[p]+=y[4*d+p]*h[d];return s}function l(y,h,s,d,p){for(var c=i(d,i(s,i(h,[y[0],y[1],y[2],1]))),g=0;g<3;++g)c[g]/=c[3];return[.5*p[0]*(1+c[0]),.5*p[1]*(1-c[1])]}function r(y,h){for(var s=[0,0,0],d=0;d<y.length;++d)for(var p=y[d],c=h[d],g=0;g<3;++g)s[g]+=c*p[g];return s}T.exports=function(y,h,s,d,p,c){if(1===y.length)return[0,y[0].slice()];for(var g=new Array(y.length),m=0;m<y.length;++m)g[m]=l(y[m],s,d,p,c);var u=0,w=1/0;for(m=0;m<g.length;++m){for(var f=0,A=0;A<2;++A)f+=Math.pow(g[m][A]-h[A],2);f<w&&(w=f,u=m)}var M=function(E,P){if(2===E.length){for(var D=0,F=0,R=0;R<2;++R)D+=Math.pow(P[R]-E[0][R],2),F+=Math.pow(P[R]-E[1][R],2);return(D=Math.sqrt(D))+(F=Math.sqrt(F))<1e-6?[1,0]:[F/(D+F),D/(F+D)]}if(3===E.length){var L=[0,0];return o(E[0],E[1],E[2],P,L),e(E,L)}return[]}(g,h),k=0;for(m=0;m<3;++m){if(M[m]<-.001||M[m]>1.0001)return null;k+=M[m]}return Math.abs(k-1)>.001?null:[u,r(y,M),M]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(x,T,b){var e=x("glslify"),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),i=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),y=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),g=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);b.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},b.wireShader={vertex:l,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},b.pointShader={vertex:y,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},b.pickShader={vertex:s,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},b.pointPickShader={vertex:p,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},b.contourShader={vertex:c,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),i=x("gl-vao"),l=x("gl-texture2d"),r=x("normals"),y=x("gl-mat4/multiply"),h=x("gl-mat4/invert"),s=x("ndarray"),d=x("colormap"),p=x("simplicial-complex-contour"),c=x("typedarray-pool"),g=x("./lib/shaders"),m=x("./lib/closest-point"),u=g.meshShader,w=g.wireShader,f=g.pointShader,A=g.pickShader,M=g.pointPickShader,k=g.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(Y,Q,re,$,J,ie,j,q,W,ae,G,ee,te,le,ue,de,he,be,me,_e,Ee,De,Se,Fe,ve,Te,Ie){this.gl=Y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Q,this.dirty=!0,this.triShader=re,this.lineShader=$,this.pointShader=J,this.pickShader=ie,this.pointPickShader=j,this.contourShader=q,this.trianglePositions=W,this.triangleColors=G,this.triangleNormals=te,this.triangleUVs=ee,this.triangleIds=ae,this.triangleVAO=le,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ue,this.edgeColors=he,this.edgeUVs=be,this.edgeIds=de,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=_e,this.pointColors=De,this.pointUVs=Se,this.pointSizes=Fe,this.pointIds=Ee,this.pointVAO=ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=E,this._view=E,this._projection=E,this._resolution=[1,1]}var D=P.prototype;function F(Y,Q){if(!Q||!Q.length)return 1;for(var re=0;re<Q.length;++re){if(Q.length<2)return 1;if(Q[re][0]===Y)return Q[re][1];if(Q[re][0]>Y&&re>0){var $=(Q[re][0]-Y)/(Q[re][0]-Q[re-1][0]);return Q[re][1]*(1-$)+$*Q[re-1][1]}}return 1}function R(Y){var Q=e(Y,u.vertex,u.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q.attributes.normal.location=4,Q}function L(Y){var Q=e(Y,w.vertex,w.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q}function I(Y){var Q=e(Y,f.vertex,f.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q.attributes.pointSize.location=4,Q}function B(Y){var Q=e(Y,A.vertex,A.fragment);return Q.attributes.position.location=0,Q.attributes.id.location=1,Q}function V(Y){var Q=e(Y,M.vertex,M.fragment);return Q.attributes.position.location=0,Q.attributes.id.location=1,Q.attributes.pointSize.location=4,Q}function Z(Y){var Q=e(Y,k.vertex,k.fragment);return Q.attributes.position.location=0,Q}D.isOpaque=function(){return!this.hasAlpha},D.isTransparent=function(){return this.hasAlpha},D.pickSlots=1,D.setPickBase=function(Y){this.pickId=Y},D.highlight=function(Y){if(Y&&this.contourEnable){for(var Q=p(this.cells,this.intensity,Y.intensity),re=Q.cells,$=Q.vertexIds,J=Q.vertexWeights,ie=re.length,j=c.mallocFloat32(6*ie),q=0,W=0;W<ie;++W)for(var ae=re[W],G=0;G<2;++G){var ee=ae[0];2===ae.length&&(ee=ae[G]);for(var ue=J[ee],de=1-ue,he=this.positions[$[ee][0]],be=this.positions[$[ee][1]],me=0;me<3;++me)j[q++]=ue*he[me]+de*be[me]}this.contourCount=q/3|0,this.contourPositions.update(j.subarray(0,q)),c.free(j)}else this.contourCount=0},D.update=function(Y){Y=Y||{};var Q=this.gl;this.dirty=!0,"contourEnable"in Y&&(this.contourEnable=Y.contourEnable),"contourColor"in Y&&(this.contourColor=Y.contourColor),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"lightPosition"in Y&&(this.lightPosition=Y.lightPosition),this.hasAlpha=!1,"opacity"in Y&&(this.opacity=Y.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale,this.hasAlpha=!0),"ambient"in Y&&(this.ambientLight=Y.ambient),"diffuse"in Y&&(this.diffuseLight=Y.diffuse),"specular"in Y&&(this.specularLight=Y.specular),"roughness"in Y&&(this.roughness=Y.roughness),"fresnel"in Y&&(this.fresnel=Y.fresnel),Y.texture?(this.texture.dispose(),this.texture=l(Q,Y.texture)):Y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Q.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Q.LINEAR,this.texture.setPixels(function(en,Ge){for(var Qe=d({colormap:en,nshades:256,format:"rgba"}),Rt=new Uint8Array(1024),gt=0;gt<256;++gt){for(var Be=Qe[gt],Ve=0;Ve<3;++Ve)Rt[4*gt+Ve]=Be[Ve];Rt[4*gt+3]=Ge?255*F(gt/255,Ge):255*Be[3]}return s(Rt,[256,256,4],[4,0,1])}(Y.colormap,this.opacityscale)),this.texture.generateMipmap());var re=Y.cells,$=Y.positions;if($&&re){var J=[],ie=[],j=[],q=[],W=[],ae=[],G=[],ee=[],te=[],le=[],ue=[],de=[],he=[],be=[];this.cells=re,this.positions=$;var me=Y.vertexNormals,_e=Y.cellNormals,Ee=void 0===Y.vertexNormalsEpsilon?1e-6:Y.vertexNormalsEpsilon;Y.useFacetNormals&&!_e&&(_e=r.faceNormals(re,$,void 0===Y.faceNormalsEpsilon?1e-6:Y.faceNormalsEpsilon)),_e||me||(me=r.vertexNormals(re,$,Ee));var Se=Y.vertexColors,Fe=Y.cellColors,ve=Y.meshColor||[1,1,1,1],Te=Y.vertexUVs,Ie=Y.vertexIntensity,Ce=Y.cellUVs,Re=Y.cellIntensity,Ue=1/0,qe=-1/0;if(!Te&&!Ce)if(Ie)if(Y.vertexIntensityBounds)Ue=+Y.vertexIntensityBounds[0],qe=+Y.vertexIntensityBounds[1];else for(var Xe=0;Xe<Ie.length;++Xe){var st=Ie[Xe];Ue=Math.min(Ue,st),qe=Math.max(qe,st)}else if(Re)if(Y.cellIntensityBounds)Ue=+Y.cellIntensityBounds[0],qe=+Y.cellIntensityBounds[1];else for(Xe=0;Xe<Re.length;++Xe)st=Re[Xe],Ue=Math.min(Ue,st),qe=Math.max(qe,st);else for(Xe=0;Xe<$.length;++Xe)st=$[Xe][2],Ue=Math.min(Ue,st),qe=Math.max(qe,st);this.intensity=Ie||Re||function(en){for(var Ge=en.length,Qe=new Array(Ge),Rt=0;Rt<Ge;++Rt)Qe[Rt]=en[Rt][2];return Qe}($),this.pickVertex=!(Re||Fe);var He=Y.pointSizes,$e=Y.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Xe=0;Xe<$.length;++Xe)for(var et=$[Xe],tt=0;tt<3;++tt)!isNaN(et[tt])&&isFinite(et[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],et[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],et[tt]));var ct=0,bt=0,At=0;e:for(Xe=0;Xe<re.length;++Xe){var Ut=re[Xe];switch(Ut.length){case 1:for(et=$[dt=Ut[0]],tt=0;tt<3;++tt)if(isNaN(et[tt])||!isFinite(et[tt]))continue e;le.push(et[0],et[1],et[2]),at=Se?Se[dt]:Fe?Fe[Xe]:ve,this.opacityscale&&Ie?ie.push(at[0],at[1],at[2],this.opacity*F((Ie[dt]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?ue.push(at[0],at[1],at[2],this.opacity):(ue.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),de.push((Nt=Te?Te[dt]:Ie?[(Ie[dt]-Ue)/(qe-Ue),0]:Ce?Ce[Xe]:Re?[(Re[Xe]-Ue)/(qe-Ue),0]:[(et[2]-Ue)/(qe-Ue),0])[0],Nt[1]),he.push(He?He[dt]:$e),be.push(Xe),At+=1;break;case 2:for(tt=0;tt<2;++tt){et=$[dt=Ut[tt]];for(var Ct=0;Ct<3;++Ct)if(isNaN(et[Ct])||!isFinite(et[Ct]))continue e}for(tt=0;tt<2;++tt)et=$[dt=Ut[tt]],ae.push(et[0],et[1],et[2]),at=Se?Se[dt]:Fe?Fe[Xe]:ve,this.opacityscale&&Ie?ie.push(at[0],at[1],at[2],this.opacity*F((Ie[dt]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?G.push(at[0],at[1],at[2],this.opacity):(G.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),ee.push((Nt=Te?Te[dt]:Ie?[(Ie[dt]-Ue)/(qe-Ue),0]:Ce?Ce[Xe]:Re?[(Re[Xe]-Ue)/(qe-Ue),0]:[(et[2]-Ue)/(qe-Ue),0])[0],Nt[1]),te.push(Xe);bt+=1;break;case 3:for(tt=0;tt<3;++tt)for(et=$[dt=Ut[tt]],Ct=0;Ct<3;++Ct)if(isNaN(et[Ct])||!isFinite(et[Ct]))continue e;for(tt=0;tt<3;++tt){var dt,at,Nt,rn;et=$[dt=Ut[2-tt]],J.push(et[0],et[1],et[2]),(at=Se?Se[dt]:Fe?Fe[Xe]:ve)?this.opacityscale&&Ie?ie.push(at[0],at[1],at[2],this.opacity*F((Ie[dt]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?ie.push(at[0],at[1],at[2],this.opacity):(ie.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)):ie.push(.5,.5,.5,1),q.push((Nt=Te?Te[dt]:Ie?[(Ie[dt]-Ue)/(qe-Ue),0]:Ce?Ce[Xe]:Re?[(Re[Xe]-Ue)/(qe-Ue),0]:[(et[2]-Ue)/(qe-Ue),0])[0],Nt[1]),j.push((rn=me?me[dt]:_e[Xe])[0],rn[1],rn[2]),W.push(Xe)}ct+=1}}this.pointCount=At,this.edgeCount=bt,this.triangleCount=ct,this.pointPositions.update(le),this.pointColors.update(ue),this.pointUVs.update(de),this.pointSizes.update(he),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(ae),this.edgeColors.update(G),this.edgeUVs.update(ee),this.edgeIds.update(new Uint32Array(te)),this.trianglePositions.update(J),this.triangleColors.update(ie),this.triangleUVs.update(q),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(W))}},D.drawTransparent=D.draw=function(Y){for(var Q=this.gl,re=(Y=Y||{}).model||E,$=Y.view||E,J=Y.projection||E,ie=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)ie[0][j]=Math.max(ie[0][j],this.clipBounds[0][j]),ie[1][j]=Math.min(ie[1][j],this.clipBounds[1][j]);var q={model:re,view:$,projection:J,inverseModel:E.slice(),clipBounds:ie,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};q.inverseModel=h(q.inverseModel,q.model),Q.disable(Q.CULL_FACE),this.texture.bind(0);var W=new Array(16);for(y(W,q.view,q.model),y(W,q.projection,W),h(W,W),j=0;j<3;++j)q.eyePosition[j]=W[12+j]/W[15];var ae,G=W[15];for(j=0;j<3;++j)G+=this.lightPosition[j]*W[4*j+3];for(j=0;j<3;++j){for(var ee=W[12+j],te=0;te<3;++te)ee+=W[4*te+j]*this.lightPosition[te];q.lightPosition[j]=ee/G}this.triangleCount>0&&((ae=this.triShader).bind(),ae.uniforms=q,this.triangleVAO.bind(),Q.drawArrays(Q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ae=this.lineShader).bind(),ae.uniforms=q,this.edgeVAO.bind(),Q.lineWidth(this.lineWidth*this.pixelRatio),Q.drawArrays(Q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointShader).bind(),ae.uniforms=q,this.pointVAO.bind(),Q.drawArrays(Q.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ae=this.contourShader).bind(),ae.uniforms=q,this.contourVAO.bind(),Q.drawArrays(Q.LINES,0,this.contourCount),this.contourVAO.unbind())},D.drawPick=function(Y){for(var Q=this.gl,re=(Y=Y||{}).model||E,$=Y.view||E,J=Y.projection||E,ie=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)ie[0][j]=Math.max(ie[0][j],this.clipBounds[0][j]),ie[1][j]=Math.min(ie[1][j],this.clipBounds[1][j]);this._model=[].slice.call(re),this._view=[].slice.call($),this._projection=[].slice.call(J),this._resolution=[Q.drawingBufferWidth,Q.drawingBufferHeight];var q,W={model:re,view:$,projection:J,clipBounds:ie,pickId:this.pickId/255};(q=this.pickShader).bind(),q.uniforms=W,this.triangleCount>0&&(this.triangleVAO.bind(),Q.drawArrays(Q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Q.lineWidth(this.lineWidth*this.pixelRatio),Q.drawArrays(Q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((q=this.pointPickShader).bind(),q.uniforms=W,this.pointVAO.bind(),Q.drawArrays(Q.POINTS,0,this.pointCount),this.pointVAO.unbind())},D.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;for(var Q=Y.value[0]+256*Y.value[1]+65536*Y.value[2],re=this.cells[Q],$=this.positions,J=new Array(re.length),ie=0;ie<re.length;++ie)J[ie]=$[re[ie]];var j=Y.coord[0],q=Y.coord[1];if(!this.pickVertex){var W=this.positions[re[0]],ae=this.positions[re[1]],G=this.positions[re[2]];return{_cellCenter:!0,position:[j,q],index:Q,cell:re,cellId:Q,intensity:this.intensity[Q],dataCoordinate:[(W[0]+ae[0]+G[0])/3,(W[1]+ae[1]+G[1])/3,(W[2]+ae[2]+G[2])/3]}}var te=m(J,[j*this.pixelRatio,this._resolution[1]-q*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!te)return null;var le=te[2],ue=0;for(ie=0;ie<re.length;++ie)ue+=le[ie]*this.intensity[re[ie]];return{position:te[1],index:re[te[0]],cell:re,cellId:Q,intensity:ue,dataCoordinate:this.positions[re[te[0]]]}},D.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},T.exports=function(Y,Q){if(1===arguments.length&&(Y=(Q=Y).gl),!(Y.getExtension("OES_standard_derivatives")||Y.getExtension("MOZ_OES_standard_derivatives")||Y.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var $=R(Y),J=L(Y),ie=I(Y),j=B(Y),q=V(Y),W=Z(Y),ae=l(Y,s(new Uint8Array([255,255,255,255]),[1,1,4]));ae.generateMipmap(),ae.minFilter=Y.LINEAR_MIPMAP_LINEAR,ae.magFilter=Y.LINEAR;var G=o(Y),ee=o(Y),te=o(Y),le=o(Y),ue=o(Y),de=i(Y,[{buffer:G,type:Y.FLOAT,size:3},{buffer:ue,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ee,type:Y.FLOAT,size:4},{buffer:te,type:Y.FLOAT,size:2},{buffer:le,type:Y.FLOAT,size:3}]),he=o(Y),be=o(Y),me=o(Y),_e=o(Y),Ee=i(Y,[{buffer:he,type:Y.FLOAT,size:3},{buffer:_e,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:Y.FLOAT,size:4},{buffer:me,type:Y.FLOAT,size:2}]),De=o(Y),Se=o(Y),Fe=o(Y),ve=o(Y),Te=o(Y),Ie=i(Y,[{buffer:De,type:Y.FLOAT,size:3},{buffer:Te,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Se,type:Y.FLOAT,size:4},{buffer:Fe,type:Y.FLOAT,size:2},{buffer:ve,type:Y.FLOAT,size:1}]),Ce=o(Y),Ue=new P(Y,ae,$,J,ie,j,q,W,G,ue,ee,te,le,de,he,_e,be,me,Ee,De,Te,Se,Fe,ve,Ie,Ce,i(Y,[{buffer:Ce,type:Y.FLOAT,size:3}]));return Ue.update(Q),Ue}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(x,T,b){"use strict";T.exports=function(s){var d=s.gl;return new l(s,e(d,[0,0,0,1,1,0,1,1]),o(d,i.boxVert,i.lineFrag))};var e=x("gl-buffer"),o=x("gl-shader"),i=x("./shaders");function l(s,d,p){this.plot=s,this.vbo=d,this.shader=p}var r,y,h=l.prototype;h.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},h.drawBox=(r=[0,0],y=[0,0],function(s,d,p,c,g){var u=this.shader,w=this.plot.gl;r[0]=s,r[1]=d,y[0]=p,y[1]=c,u.uniforms.lo=r,u.uniforms.hi=y,u.uniforms.color=g,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(x,T,b){"use strict";T.exports=function(m){var u=m.gl;return new r(m,e(u),o(u,l.gridVert,l.gridFrag),o(u,l.tickVert,l.gridFrag))};var e=x("gl-buffer"),o=x("gl-shader"),i=x("binary-search-bounds"),l=x("./shaders");function r(m,u,w,f){this.plot=m,this.vbo=u,this.shader=w,this.tickShader=f,this.ticks=[[],[]]}function y(m,u){return m-u}var h,s,d,p,c,m,u,w,f,A,M,g=r.prototype;g.draw=(h=[0,0],s=[0,0],d=[0,0],function(){for(var m=this.plot,u=this.vbo,w=this.shader,f=this.ticks,A=m.gl,M=m._tickBounds,k=m.dataBox,E=m.viewBox,P=m.gridLineWidth,D=m.gridLineColor,F=m.gridLineEnable,R=m.pixelRatio,L=0;L<2;++L){var I=M[L],V=.5*(k[L+2]+k[L]),Z=k[L+2]-k[L];s[L]=2*(M[L+2]-I)/Z,h[L]=2*(I-V)/Z}w.bind(),u.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=s;var Y=0;for(L=0;L<2;++L){d[0]=d[1]=0,d[L]=1,w.uniforms.dataAxis=d,w.uniforms.lineWidth=P[L]/(E[L+2]-E[L])*R,w.uniforms.color=D[L];var Q=6*f[L].length;F[L]&&Q&&A.drawArrays(A.TRIANGLES,Y,Q),Y+=Q}}),g.drawTickMarks=(m=[0,0],u=[0,0],w=[1,0],f=[0,1],A=[0,0],M=[0,0],function(){for(var k=this.plot,E=this.vbo,P=this.tickShader,D=this.ticks,F=k.gl,R=k._tickBounds,L=k.dataBox,I=k.viewBox,B=k.pixelRatio,V=k.screenBox,Z=V[2]-V[0],Y=V[3]-V[1],Q=I[2]-I[0],re=I[3]-I[1],$=0;$<2;++$){var J=R[$],j=.5*(L[$+2]+L[$]),q=L[$+2]-L[$];u[$]=2*(R[$+2]-J)/q,m[$]=2*(J-j)/q}u[0]*=Q/Z,m[0]*=Q/Z,u[1]*=re/Y,m[1]*=re/Y,P.bind(),E.bind(),P.attributes.dataCoord.pointer();var W=P.uniforms;W.dataShift=m,W.dataScale=u;var ae=k.tickMarkLength,G=k.tickMarkWidth,ee=k.tickMarkColor,te=6*D[0].length,le=Math.min(i.ge(D[0],(L[0]-R[0])/(R[2]-R[0]),y),D[0].length),ue=Math.min(i.gt(D[0],(L[2]-R[0])/(R[2]-R[0]),y),D[0].length),de=0+6*le,he=6*Math.max(0,ue-le),be=Math.min(i.ge(D[1],(L[1]-R[1])/(R[3]-R[1]),y),D[1].length),me=Math.min(i.gt(D[1],(L[3]-R[1])/(R[3]-R[1]),y),D[1].length),_e=te+6*be,Ee=6*Math.max(0,me-be);A[0]=2*(I[0]-ae[1])/Z-1,A[1]=(I[3]+I[1])/Y-1,M[0]=ae[1]*B/Z,M[1]=G[1]*B/Y,Ee&&(W.color=ee[1],W.tickScale=M,W.dataAxis=f,W.screenOffset=A,F.drawArrays(F.TRIANGLES,_e,Ee)),A[0]=(I[2]+I[0])/Z-1,A[1]=2*(I[1]-ae[0])/Y-1,M[0]=G[0]*B/Z,M[1]=ae[0]*B/Y,he&&(W.color=ee[0],W.tickScale=M,W.dataAxis=w,W.screenOffset=A,F.drawArrays(F.TRIANGLES,de,he)),A[0]=2*(I[2]+ae[3])/Z-1,A[1]=(I[3]+I[1])/Y-1,M[0]=ae[3]*B/Z,M[1]=G[3]*B/Y,Ee&&(W.color=ee[3],W.tickScale=M,W.dataAxis=f,W.screenOffset=A,F.drawArrays(F.TRIANGLES,_e,Ee)),A[0]=(I[2]+I[0])/Z-1,A[1]=2*(I[3]+ae[2])/Y-1,M[0]=G[2]*B/Z,M[1]=ae[2]*B/Y,he&&(W.color=ee[2],W.tickScale=M,W.dataAxis=w,W.screenOffset=A,F.drawArrays(F.TRIANGLES,de,he))}),g.update=(p=[1,1,-1,-1,1,-1],c=[1,-1,1,1,-1,-1],function(m){for(var u=m.ticks,w=m.bounds,f=new Float32Array(18*(u[0].length+u[1].length)),A=0,M=[[],[]],k=0;k<2;++k)for(var E=M[k],P=u[k],D=w[k],F=w[k+2],R=0;R<P.length;++R){var L=(P[R].x-D)/(F-D);E.push(L);for(var I=0;I<6;++I)f[A++]=L,f[A++]=p[I],f[A++]=c[I]}this.ticks=M,this.vbo.update(f)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(x,T,b){"use strict";T.exports=function(s){var d=s.gl;return new l(s,e(d,[-1,-1,-1,1,1,-1,1,1]),o(d,i.lineVert,i.lineFrag))};var e=x("gl-buffer"),o=x("gl-shader"),i=x("./shaders");function l(s,d,p){this.plot=s,this.vbo=d,this.shader=p}var r,y,h=l.prototype;h.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},h.drawLine=(r=[0,0],y=[0,0],function(s,d,p,c,g,m){var u=this.plot,w=this.shader,f=u.gl;r[0]=s,r[1]=d,y[0]=p,y[1]=c,w.uniforms.start=r,w.uniforms.end=y,w.uniforms.width=g*u.pixelRatio,w.uniforms.color=m,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(x,T,b){"use strict";var e=x("glslify"),o=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);T.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:o,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:o,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:o,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(x,T,b){"use strict";T.exports=function(u){var w=u.gl;return new y(u,e(w),o(w,r.textVert,r.textFrag))};var e=x("gl-buffer"),o=x("gl-shader"),i=x("text-cache"),l=x("binary-search-bounds"),r=x("./shaders");function y(u,w,f){this.plot=u,this.vbo=w,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,s,d,p,c,g,u,w,m=y.prototype;m.drawTicks=(h=[0,0],s=[0,0],d=[0,0],function(u){var w=this.plot,f=this.shader,A=this.tickX[u],M=this.tickOffset[u],k=w.gl,E=w.viewBox,P=w.dataBox,D=w.screenBox,F=w.pixelRatio,R=w.tickEnable,L=w.tickPad,I=w.tickColor,B=w.tickAngle,V=w.labelEnable,Z=w.labelPad,Y=w.labelColor,Q=w.labelAngle,re=this.labelOffset[u],$=this.labelCount[u],J=l.lt(A,P[u]),ie=l.le(A,P[u+2]);h[0]=h[1]=0,h[u]=1,s[u]=(E[2+u]+E[u])/(D[2+u]-D[u])-1;var j=2/D[2+(1^u)]-D[1^u];s[1^u]=j*E[1^u]-1,R[u]&&(s[1^u]-=j*F*L[u],J<ie&&M[ie]>M[J]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=s,f.uniforms.color=I[u],f.uniforms.angle=B[u],k.drawArrays(k.TRIANGLES,M[J],M[ie]-M[J]))),V[u]&&$&&(s[1^u]-=j*F*Z[u],f.uniforms.dataAxis=d,f.uniforms.screenOffset=s,f.uniforms.color=Y[u],f.uniforms.angle=Q[u],k.drawArrays(k.TRIANGLES,re,$)),s[1^u]=j*E[2+(1^u)]-1,R[u+2]&&(s[1^u]+=j*F*L[u+2],J<ie&&M[ie]>M[J]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=s,f.uniforms.color=I[u+2],f.uniforms.angle=B[u+2],k.drawArrays(k.TRIANGLES,M[J],M[ie]-M[J]))),V[u+2]&&$&&(s[1^u]+=j*F*Z[u+2],f.uniforms.dataAxis=d,f.uniforms.screenOffset=s,f.uniforms.color=Y[u+2],f.uniforms.angle=Q[u+2],k.drawArrays(k.TRIANGLES,re,$))}),m.drawTitle=(u=[0,0],w=[0,0],function(){var f=this.plot,A=this.shader,M=f.gl,k=f.screenBox,E=f.titleCenter,P=f.titleAngle,D=f.titleColor,F=f.pixelRatio;if(this.titleCount){for(var R=0;R<2;++R)w[R]=2*(E[R]*F-k[R])/(k[2+R]-k[R])-1;A.bind(),A.uniforms.dataAxis=u,A.uniforms.screenOffset=w,A.uniforms.angle=P,A.uniforms.color=D,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}),m.bind=(p=[0,0],c=[0,0],g=[0,0],function(){var u=this.plot,w=this.shader,f=u._tickBounds,A=u.dataBox,M=u.screenBox,k=u.viewBox;w.bind();for(var E=0;E<2;++E){var P=f[E],F=.5*(A[E+2]+A[E]),R=A[E+2]-A[E],I=k[E+2]-k[E],V=M[E+2]-M[E];c[E]=2*(f[E+2]-P)/R*I/V,p[E]=2*(P-F)/R*I/V}g[1]=2*u.pixelRatio/(M[3]-M[1]),g[0]=g[1]*(M[3]-M[1])/(M[2]-M[0]),w.uniforms.dataScale=c,w.uniforms.dataShift=p,w.uniforms.textScale=g,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),m.update=function(u){var w,f,A,M,k,E=[],P=u.ticks,D=u.bounds;for(k=0;k<2;++k){var F=[Math.floor(E.length/3)],R=[-1/0],L=P[k];for(w=0;w<L.length;++w){var I=L[w],B=I.x,Z=I.font||"sans-serif";M=I.fontSize||12;for(var Y=1/(D[k+2]-D[k]),Q=D[k],re=I.text.split("\n"),$=0;$<re.length;$++)for(A=i(Z,re[$]).data,f=0;f<A.length;f+=2)E.push(A[f]*M,-A[f+1]*M-$*M*1.2,(B-Q)*Y);F.push(Math.floor(E.length/3)),R.push(B)}this.tickOffset[k]=F,this.tickX[k]=R}for(k=0;k<2;++k){for(this.labelOffset[k]=Math.floor(E.length/3),A=i(u.labelFont[k],u.labels[k],{textAlign:"center"}).data,M=u.labelSize[k],w=0;w<A.length;w+=2)E.push(A[w]*M,-A[w+1]*M,0);this.labelCount[k]=Math.floor(E.length/3)-this.labelOffset[k]}for(this.titleOffset=Math.floor(E.length/3),A=i(u.titleFont,u.title).data,M=u.titleSize,w=0;w<A.length;w+=2)E.push(A[w]*M,-A[w+1]*M,0);this.titleCount=Math.floor(E.length/3)-this.titleOffset,this.vbo.update(E)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(x,T,b){"use strict";T.exports=function(p){var c=p.gl,m=new y(c,e(c,[c.drawingBufferWidth,c.drawingBufferHeight]));return m.grid=o(m),m.text=i(m),m.line=l(m),m.box=r(m),m.update(p),m};var e=x("gl-select-static"),o=x("./lib/grid"),i=x("./lib/text"),l=x("./lib/line"),r=x("./lib/box");function y(p,c){this.gl=p,this.pickBuffer=c,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=y.prototype;function s(p){for(var c=p.slice(),g=0;g<c.length;++g)c[g]=c[g].slice();return c}function d(p,c){return p.x-c.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var p=this.gl,c=this.screenBox,g=this.viewBox,m=this.dataBox,u=this.pixelRatio,w=this.grid,f=this.line,A=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var k=this.borderColor;p.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),p.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.backgroundColor;p.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),p.clear(p.COLOR_BUFFER_BIT),w.draw();var P=this.zeroLineEnable,D=this.zeroLineColor,F=this.zeroLineWidth;if(P[0]||P[1]){f.bind();for(var R=0;R<2;++R)if(P[R]&&m[R]<=0&&m[R+2]>=0){var L=c[R]-m[R]*(c[R+2]-c[R])/(m[R+2]-m[R]);0===R?f.drawLine(L,c[1],L,c[3],F[R],D[R]):f.drawLine(c[0],L,c[2],L,F[R],D[R])}}for(R=0;R<M.length;++R)M[R].draw();p.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]),p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),this.grid.drawTickMarks(),f.bind();var I=this.borderLineEnable,B=this.borderLineWidth,V=this.borderLineColor;for(I[1]&&f.drawLine(g[0],g[1]-.5*B[1]*u,g[0],g[3]+.5*B[3]*u,B[1],V[1]),I[0]&&f.drawLine(g[0]-.5*B[0]*u,g[1],g[2]+.5*B[2]*u,g[1],B[0],V[0]),I[3]&&f.drawLine(g[2],g[1]-.5*B[1]*u,g[2],g[3]+.5*B[3]*u,B[3],V[3]),I[2]&&f.drawLine(g[0]-.5*B[0]*u,g[3],g[2]+.5*B[2]*u,g[3],B[2],V[2]),A.bind(),R=0;R<2;++R)A.drawTicks(R);this.titleEnable&&A.drawTitle();var Z=this.overlays;for(R=0;R<Z.length;++R)Z[R].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}},h.drawPick=function(){if(!this.static){var p=this.pickBuffer;this._pickTimeout=null,p.begin();for(var c=1,g=this.objects,m=0;m<g.length;++m)c=g[m].drawPick(c);p.end()}},h.pick=function(p,c){if(!this.static){var g=this.pixelRatio,m=this.pickPixelRatio,u=this.viewBox,w=0|Math.round((p-u[0]/g)*m),f=0|Math.round((c-u[1]/g)*m),A=this.pickBuffer.query(w,f,this.pickRadius);if(!A)return null;for(var M=A.id+(A.value[0]<<8)+(A.value[1]<<16)+(A.value[2]<<24),k=this.objects,E=0;E<k.length;++E){var P=k[E].pick(w,f,M);if(P)return P}return null}},h.setScreenBox=function(p){var c=this.screenBox,g=this.pixelRatio;c[0]=0|Math.round(p[0]*g),c[1]=0|Math.round(p[1]*g),c[2]=0|Math.round(p[2]*g),c[3]=0|Math.round(p[3]*g),this.setDirty()},h.setDataBox=function(p){var c=this.dataBox;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3])&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],this.setDirty())},h.setViewBox=function(p){var c=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(p[0]*c),g[1]=0|Math.round(p[1]*c),g[2]=0|Math.round(p[2]*c),g[3]=0|Math.round(p[3]*c);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((p[2]-p[0])*m),0|Math.round((p[3]-p[1])*m)],this.setDirty()},h.update=function(p){var c=this.gl;this.pixelRatio=(p=p||{}).pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(p.screenBox||[0,0,c.drawingBufferWidth/g,c.drawingBufferHeight/g]),this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var m=this.viewBox,u=(m[2]-m[0])/(m[3]-m[1]);this.setDataBox(p.dataBox||[-10,-10/u,10,10/u]),this.borderColor=!1!==p.borderColor&&(p.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=s(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=s(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=s(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(m[0]+m[2])/g,(m[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=s(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=s(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=s(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=p.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var A=0;A<2;++A){var M=w[A].slice(0);0!==M.length&&(M.sort(d),f[A]=Math.min(f[A],M[0].x),f[A+2]=Math.max(f[A+2],M[M.length-1].x))}this.grid.update({bounds:f,ticks:w}),this.text.update({bounds:f,ticks:w,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();for(this.objects.length=0,p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},h.removeObject=function(p){for(var c=this.objects,g=0;g<c.length;++g)if(c[g]===p){c.splice(g,1),this.setDirty();break}},h.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},h.removeOverlay=function(p){for(var c=this.overlays,g=0;g<c.length;++g)if(c[g]===p){c.splice(g,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(x,T,b){"use strict";T.exports=function(h,s){h=h||document.body;var d=[.01,1/0];"distanceLimits"in(s=s||{})&&(d[0]=s.distanceLimits[0],d[1]=s.distanceLimits[1]),"zoomMin"in s&&(d[0]=s.zoomMin),"zoomMax"in s&&(d[1]=s.zoomMax);var p=o({center:s.center||[0,0,0],up:s.up||[0,1,0],eye:s.eye||[0,0,10],mode:s.mode||"orbit",distanceLimits:d}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,m=h.clientWidth,u=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:p,element:h,delay:s.delay||16,rotateSpeed:s.rotateSpeed||1,zoomSpeed:s.zoomSpeed||1,translateSpeed:s.translateSpeed||1,flipX:!!s.flipX,flipY:!!s.flipY,modes:p.modes,_ortho:s._ortho||s.projection&&"orthographic"===s.projection.type||!1,tick:function(){var f=e(),A=this.delay,M=f-2*A;p.idle(f-A),p.recalcMatrix(M),p.flush(f-(100+2*A));for(var k=!0,E=p.computedMatrix,P=0;P<16;++P)k=k&&c[P]===E[P],c[P]=E[P];var D=h.clientWidth===m&&h.clientHeight===u;return m=h.clientWidth,u=h.clientHeight,k?!D:(g=Math.exp(p.computedRadius[0]),!0)},lookAt:function(f,A,M){p.lookAt(p.lastT(),f,A,M)},rotate:function(f,A,M){p.rotate(p.lastT(),f,A,M)},pan:function(f,A,M){p.pan(p.lastT(),f,A,M)},translate:function(f,A,M){p.translate(p.lastT(),f,A,M)}};return Object.defineProperties(w,{matrix:{get:function(){return p.computedMatrix},set:function(f){return p.setMatrix(p.lastT(),f),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(f){var A=p.computedUp.slice(),M=p.computedEye.slice(),k=p.computedCenter.slice();if(p.setMode(f),"turntable"===f){var E=e();p._active.lookAt(E,M,k,A),p._active.lookAt(E+500,M,k,[0,0,1]),p._active.flush(E)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(f){return p.lookAt(p.lastT(),null,f),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(f){return p.lookAt(p.lastT(),f),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(f){return p.lookAt(p.lastT(),null,null,f),p.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(f){return p.setDistance(p.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(f){return p.setDistanceLimits(f),f},enumerable:!0}}),h.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function f(A,M,k,E){var P=w.keyBindingMode;if(!1!==P){var D="rotate"===P,F="pan"===P,R="zoom"===P,L=!!E.control,I=!!E.alt,B=!!E.shift,V=!!(1&A),Z=!!(2&A),Y=!!(4&A),Q=1/h.clientHeight,re=Q*(M-w._lastX),$=Q*(k-w._lastY),J=w.flipX?1:-1,ie=w.flipY?1:-1,j=Math.PI*w.rotateSpeed,q=e();if(-1!==w._lastX&&-1!==w._lastY&&((D&&V&&!L&&!I&&!B||V&&!L&&!I&&B)&&p.rotate(q,J*j*re,-ie*j*$,0),(F&&V&&!L&&!I&&!B||Z||V&&L&&!I&&!B)&&p.pan(q,-w.translateSpeed*re*g,w.translateSpeed*$*g,0),R&&V&&!L&&!I&&!B||Y||V&&!L&&I&&!B)){var W=-w.zoomSpeed*$/window.innerHeight*(q-p.lastT())*100;p.pan(q,0,0,g*(Math.exp(W)-1))}return w._lastX=M,w._lastY=k,w._lastMods=E,!0}}w.mouseListener=i(h,f),h.addEventListener("touchstart",function(A){var M=r(A.changedTouches[0],h);f(0,M[0],M[1],w._lastMods),f(1,M[0],M[1],w._lastMods)},!!y&&{passive:!0}),h.addEventListener("touchmove",function(A){var M=r(A.changedTouches[0],h);f(1,M[0],M[1],w._lastMods),A.preventDefault()},!!y&&{passive:!1}),h.addEventListener("touchend",function(A){f(0,w._lastX,w._lastY,w._lastMods)},!!y&&{passive:!0}),w.wheelListener=l(h,function(A,M){if(!1!==w.keyBindingMode&&w.enableWheel){var k=w.flipX?1:-1,E=w.flipY?1:-1,P=e();if(Math.abs(A)>Math.abs(M))p.rotate(P,0,0,-A*k*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var D=-w.zoomSpeed*E*M/window.innerHeight*(P-p.lastT())/20;p.pan(P,0,0,g*(Math.exp(D)-1))}}},!0)},w.enableMouseListeners(),w};var e=x("right-now"),o=x("3d-view"),i=x("mouse-change"),l=x("mouse-wheel"),r=x("mouse-event-offset"),y=x("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(x,T,b){var e=x("glslify"),o=x("gl-shader"),i=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);T.exports=function(r){return o(r,i,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(x,T,b){"use strict";var e=x("./camera.js"),o=x("gl-axes3d"),i=x("gl-axes3d/properties"),l=x("gl-spikes3d"),r=x("gl-select-static"),y=x("gl-fbo"),h=x("a-big-triangle"),s=x("mouse-change"),d=x("gl-mat4/perspective"),p=x("gl-mat4/ortho"),c=x("./lib/shader"),g=x("is-mobile")({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function u(f){var A=Math.round(Math.log(Math.abs(f))/Math.log(10));if(A<0){var M=Math.round(Math.pow(10,-A));return Math.ceil(f*M)/M}return A>0?(M=Math.round(Math.pow(10,A)),Math.ceil(f/M)*M):Math.ceil(f)}function w(f){return"boolean"!=typeof f||f}T.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var A=f.canvas;A||(A=document.createElement("canvas"),f.container?f.container.appendChild(A):document.body.appendChild(A));var M=f.gl;if(M||(f.glOptions&&(g=!!f.glOptions.preserveDrawingBuffer),M=function(me,_e){var Ee=null;try{(Ee=me.getContext("webgl",_e))||(Ee=me.getContext("experimental-webgl",_e))}catch(De){return null}return Ee}(A,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!M)throw new Error("webgl not supported");var k=f.bounds||[[-10,-10,-10],[10,10,10]],E=new m,P=y(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!g}),D=c(M),F=f.cameraObject&&!0===f.cameraObject._ortho||f.camera.projection&&"orthographic"===f.camera.projection.type||!1,R={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:F},L=f.axes||{},I=o(M,L);I.enable=!L.disable;var V=l(M,f.spikes||{}),Z=[],Y=[],Q=[],re=[],$=!0,J=!0,q={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},W=(J=!0,[M.drawingBufferWidth,M.drawingBufferHeight]),ae=f.cameraObject||e(A,R),G={gl:M,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:A,selection:E,camera:ae,axes:I,axesPixels:null,spikes:V,bounds:k,objects:Z,shape:W,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:w(f.autoResize),autoBounds:w(f.autoBounds),autoScale:!!f.autoScale,autoCenter:w(f.autoCenter),clipToBounds:w(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:q,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(me){this.aspect[0]=me.x,this.aspect[1]=me.y,this.aspect[2]=me.z,J=!0},setBounds:function(me,_e){this.bounds[0][me]=_e.min,this.bounds[1][me]=_e.max},setClearColor:function(me){this.clearColor=me},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ee=[M.drawingBufferWidth/G.pixelRatio|0,M.drawingBufferHeight/G.pixelRatio|0];function te(){if(!G._stopped&&G.autoResize){var me=A.parentNode,_e=1,Ee=1;me&&me!==document.body?(_e=me.clientWidth,Ee=me.clientHeight):(_e=window.innerWidth,Ee=window.innerHeight);var De=0|Math.ceil(_e*G.pixelRatio),Se=0|Math.ceil(Ee*G.pixelRatio);if(De!==A.width||Se!==A.height){A.width=De,A.height=Se;var Fe=A.style;Fe.position=Fe.position||"absolute",Fe.left="0px",Fe.top="0px",Fe.width=_e+"px",Fe.height=Ee+"px",$=!0}}}function le(){for(var me=Z.length,_e=re.length,Ee=0;Ee<_e;++Ee)Q[Ee]=0;e:for(Ee=0;Ee<me;++Ee){var De=Z[Ee],Se=De.pickSlots;if(Se){for(var Fe=0;Fe<_e;++Fe)if(Q[Fe]+Se<255){Y[Ee]=Fe,De.setPickBase(Q[Fe]+1),Q[Fe]+=Se;continue e}var ve=r(M,W);Y[Ee]=_e,re.push(ve),Q.push(Se),De.setPickBase(1),_e+=1}else Y[Ee]=-1}for(;_e>0&&0===Q[_e-1];)Q.pop(),re.pop().dispose()}function ue(){if(G.contextLost)return!0;M.isContextLost()&&(G.contextLost=!0,G.mouseListener.enabled=!1,G.selection.object=null,G.oncontextloss&&G.oncontextloss())}G.autoResize&&te(),window.addEventListener("resize",te),G.update=function(me){G._stopped||(me=me||{},$=!0,J=!0)},G.add=function(me){G._stopped||(me.axes=I,Z.push(me),Y.push(-1),$=!0,J=!0,le())},G.remove=function(me){if(!G._stopped){var _e=Z.indexOf(me);_e<0||(Z.splice(_e,1),Y.pop(),$=!0,J=!0,le())}},G.dispose=function(){if(!G._stopped&&(G._stopped=!0,window.removeEventListener("resize",te),A.removeEventListener("webglcontextlost",ue),G.mouseListener.enabled=!1,!G.contextLost)){I.dispose(),V.dispose();for(var me=0;me<Z.length;++me)Z[me].dispose();for(P.dispose(),me=0;me<re.length;++me)re[me].dispose();D.dispose(),M=null,I=null,V=null,Z=[]}},G._mouseRotating=!1,G._prevButtons=0,G.enableMouseListeners=function(){G.mouseListener=s(A,function(me,_e,Ee){if(!G._stopped){var De=re.length,Se=Z.length,Fe=E.object;E.distance=1/0,E.mouse[0]=_e,E.mouse[1]=Ee,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var ve=!1;if(me&&G._prevButtons)G._mouseRotating=!0;else{G._mouseRotating&&(J=!0),G._mouseRotating=!1;for(var Te=0;Te<De;++Te){var Ie=re[Te].query(_e,ee[1]-Ee-1,G.pickRadius);if(Ie){if(Ie.distance>E.distance)continue;for(var Ce=0;Ce<Se;++Ce){var Re=Z[Ce];if(Y[Ce]===Te){var Ue=Re.pick(Ie);Ue&&(E.buttons=me,E.screen=Ie.coord,E.distance=Ie.distance,E.object=Re,E.index=Ue.distance,E.dataPosition=Ue.position,E.dataCoordinate=Ue.dataCoordinate,E.data=Ue,ve=!0)}}}}}Fe&&Fe!==E.object&&(Fe.highlight&&Fe.highlight(null),$=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),$=!0),(ve=ve||E.object!==Fe)&&G.onselect&&G.onselect(E),1&me&&!(1&G._prevButtons)&&G.onclick&&G.onclick(E),G._prevButtons=me}})},A.addEventListener("webglcontextlost",ue);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],he=[de[0].slice(),de[1].slice()];function be(){if(!ue()){te();var me=G.camera.tick();q.view=G.camera.matrix,$=$||me,J=J||me,I.pixelRatio=G.pixelRatio,V.pixelRatio=G.pixelRatio;var _e=Z.length,Ee=de[0],De=de[1];Ee[0]=Ee[1]=Ee[2]=1/0,De[0]=De[1]=De[2]=-1/0;for(var Se=0;Se<_e;++Se){($e=Z[Se]).pixelRatio=G.pixelRatio,$e.axes=G.axes,$=$||!!$e.dirty,J=J||!!$e.dirty;var Fe=$e.bounds;if(Fe)for(var ve=Fe[0],Te=Fe[1],Ie=0;Ie<3;++Ie)Ee[Ie]=Math.min(Ee[Ie],ve[Ie]),De[Ie]=Math.max(De[Ie],Te[Ie])}var Ce=G.bounds;if(G.autoBounds)for(Ie=0;Ie<3;++Ie){if(De[Ie]<Ee[Ie])Ee[Ie]=-1,De[Ie]=1;else{Ee[Ie]===De[Ie]&&(Ee[Ie]-=1,De[Ie]+=1);var Re=.05*(De[Ie]-Ee[Ie]);Ee[Ie]=Ee[Ie]-Re,De[Ie]=De[Ie]+Re}Ce[0][Ie]=Ee[Ie],Ce[1][Ie]=De[Ie]}var Ue=!1;for(Ie=0;Ie<3;++Ie)Ue=Ue||he[0][Ie]!==Ce[0][Ie]||he[1][Ie]!==Ce[1][Ie],he[0][Ie]=Ce[0][Ie],he[1][Ie]=Ce[1][Ie];if(J=J||Ue,$=$||Ue){if(Ue){var qe=[0,0,0];for(Se=0;Se<3;++Se)qe[Se]=u((Ce[1][Se]-Ce[0][Se])/10);I.update(I.autoTicks?{bounds:Ce,tickSpacing:qe}:{bounds:Ce})}var Xe=M.drawingBufferWidth,st=M.drawingBufferHeight;for(W[0]=Xe,W[1]=st,ee[0]=0|Math.max(Xe/G.pixelRatio,1),ee[1]=0|Math.max(st/G.pixelRatio,1),function(et,tt){var ct=et.bounds,bt=et.cameraParams,At=bt.projection,Ut=bt.model,at=et.zNear,Nt=et.zFar,rn=et.fovy,en=et.gl.drawingBufferWidth/et.gl.drawingBufferHeight;tt?(p(At,-en,en,-1,1,at,Nt),bt._ortho=!0):(d(At,rn,en,at,Nt),bt._ortho=!1);for(var Ge=0;Ge<16;++Ge)Ut[Ge]=0;Ut[15]=1;var Qe=0;for(Ge=0;Ge<3;++Ge)Qe=Math.max(Qe,ct[1][Ge]-ct[0][Ge]);for(Ge=0;Ge<3;++Ge)Ut[5*Ge]=et.autoScale?et.aspect[Ge]/(ct[1][Ge]-ct[0][Ge]):1/Qe,et.autoCenter&&(Ut[12+Ge]=.5*-Ut[5*Ge]*(ct[0][Ge]+ct[1][Ge]))}(G,F),Se=0;Se<_e;++Se)($e=Z[Se]).axesBounds=Ce,G.clipToBounds&&($e.clipBounds=Ce);E.object&&(V.position=G.snapToData?E.dataCoordinate:E.dataPosition,V.bounds=Ce),J&&(J=!1,function(){if(!ue()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var et=Z.length,tt=re.length,ct=0;ct<tt;++ct){var bt=re[ct];bt.shape=ee,bt.begin();for(var At=0;At<et;++At)if(Y[At]===ct){var Ut=Z[At];Ut.drawPick&&(Ut.pixelRatio=1,Ut.drawPick(q))}bt.end()}}}()),G.axesPixels=i(G.axes,q,Xe,st),G.onrender&&G.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,Xe,st),G.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var He=!1;for(I.enable&&(He=He||I.isTransparent(),I.draw(q)),V.axes=I,E.object&&V.draw(q),M.disable(M.CULL_FACE),Se=0;Se<_e;++Se)($e=Z[Se]).axes=I,$e.pixelRatio=G.pixelRatio,$e.isOpaque&&$e.isOpaque()&&$e.draw(q),$e.isTransparent&&$e.isTransparent()&&(He=!0);if(He){for(P.shape=W,P.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),I.enable&&I.isTransparent()&&I.drawTransparent(q),Se=0;Se<_e;++Se)($e=Z[Se]).isOpaque&&$e.isOpaque()&&$e.draw(q);for(M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),I.isTransparent()&&I.drawTransparent(q),Se=0;Se<_e;++Se){var $e;($e=Z[Se]).isTransparent&&$e.isTransparent()&&$e.drawTransparent(q)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),D.bind(),P.color[0].bind(0),D.uniforms.accumBuffer=0,h(M),M.disable(M.BLEND)}for($=!1,Se=0;Se<_e;++Se)Z[Se].dirty=!1}}}return G.enableMouseListeners(),function me(){G._stopped||G.contextLost||(be(),requestAnimationFrame(me))}(),G.redraw=function(){G._stopped||($=!0,be())},G},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(x,T,b){var e=x("glslify");b.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),b.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),b.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),b.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),i=x("typedarray-pool"),l=x("./lib/shader");function r(d,p,c,g,m){this.plot=d,this.offsetBuffer=p,this.pickBuffer=c,this.shader=g,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}T.exports=function(d,p){var c=d.gl,f=new r(d,o(c),o(c),e(c,l.pointVertex,l.pointFragment),e(c,l.pickVertex,l.pickFragment));return f.update(p),d.addObject(f),f};var y,h,s=r.prototype;s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},s.update=function(d){var p;function c(M,k){return M in d?d[M]:k}d=d||{},this.sizeMin=c("sizeMin",.5),this.sizeMax=c("sizeMax",20),this.color=c("color",[1,0,0,1]).slice(),this.areaRatio=c("areaRatio",1),this.borderColor=c("borderColor",[0,0,0,1]).slice(),this.blend=c("blend",!1);var g=d.positions.length>>>1,m=d.positions instanceof Float32Array,u=d.idToIndex instanceof Int32Array&&d.idToIndex.length>=g,w=d.positions,f=m?w:i.mallocFloat32(w.length),A=u?d.idToIndex:i.mallocInt32(g);if(m||f.set(w),!u)for(f.set(w),p=0;p<g;p++)A[p]=p;this.points=w,this.offsetBuffer.update(f),this.pickBuffer.update(A),m||i.free(f),u||i.free(A),this.pointCount=g,this.pickOffset=0},s.unifiedDraw=(y=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(d){var p=void 0!==d,c=p?this.pickShader:this.shader,g=this.plot.gl,m=this.plot.dataBox;if(0===this.pointCount)return d;var u=m[2]-m[0],w=m[3]-m[1],f=function(E,P){var D,F=0,R=E.length>>>1;for(D=0;D<R;D++){var L=E[2*D],I=E[2*D+1];L>=P[0]&&L<=P[2]&&I>=P[1]&&I<=P[3]&&F++}return F}(this.points,m),A=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));y[0]=2/u,y[4]=2/w,y[6]=-2*m[0]/u-1,y[7]=-2*m[1]/w-1,this.offsetBuffer.bind(),c.bind(),c.attributes.position.pointer(),c.uniforms.matrix=y,c.uniforms.color=this.color,c.uniforms.borderColor=this.borderColor,c.uniforms.pointCloud=A<5,c.uniforms.pointSize=A,c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(h[0]=255&d,h[1]=d>>8&255,h[2]=d>>16&255,h[3]=d>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(g.UNSIGNED_BYTE),c.uniforms.pickOffset=h,this.pickOffset=d);var M=g.getParameter(g.BLEND),k=g.getParameter(g.DITHER);return M&&!this.blend&&g.disable(g.BLEND),k&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),M&&!this.blend&&g.enable(g.BLEND),k&&g.enable(g.DITHER),d+this.pointCount}),s.draw=s.unifiedDraw,s.drawPick=s.unifiedDraw,s.pick=function(d,p,c){var g=this.pickOffset;if(c<g||c>=g+this.pointCount)return null;var u=c-g,w=this.points;return{object:this,pointId:u,dataCoord:[w[2*u],w[2*u+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(x,T,b){T.exports=function(e,o,i,l){var r,y,h,s,d,p=o[0],c=o[1],g=o[2],m=o[3],u=i[0],w=i[1],f=i[2],A=i[3];return(y=p*u+c*w+g*f+m*A)<0&&(y=-y,u=-u,w=-w,f=-f,A=-A),1-y>1e-6?(r=Math.acos(y),h=Math.sin(r),s=Math.sin((1-l)*r)/h,d=Math.sin(l*r)/h):(s=1-l,d=l),e[0]=s*p+d*u,e[1]=s*c+d*w,e[2]=s*g+d*f,e[3]=s*m+d*A,e}},{}],125:[function(x,T,b){"use strict";T.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(x,T,b){"use strict";var e=x("vectorize-text");T.exports=function(i,l,r){var y=o[l];if(y||(y=o[l]={}),i in y)return y[i];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=e(i,h);h.triangles=!1;var d,p,c=e(i,h);if(r&&1!==r){for(d=0;d<s.positions.length;++d)for(p=0;p<s.positions[d].length;++p)s.positions[d][p]/=r;for(d=0;d<c.positions.length;++d)for(p=0;p<c.positions[d].length;++p)c.positions[d][p]/=r}var g=[[1/0,1/0],[-1/0,-1/0]],m=c.positions.length;for(d=0;d<m;++d){var u=c.positions[d];for(p=0;p<2;++p)g[0][p]=Math.min(g[0][p],u[p]),g[1][p]=Math.max(g[1][p],u[p])}return y[i]=[s,c,g]};var o={}},{"vectorize-text":311}],127:[function(x,T,b){var e=x("gl-shader"),o=x("glslify"),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),y=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:i,fragment:y,attributes:s},p={vertex:l,fragment:y,attributes:s},c={vertex:r,fragment:y,attributes:s},g={vertex:i,fragment:h,attributes:s},m={vertex:l,fragment:h,attributes:s},u={vertex:r,fragment:h,attributes:s};function w(f,A){var M=e(f,A),k=M.attributes;return k.position.location=0,k.color.location=1,k.glyph.location=2,k.id.location=3,M}b.createPerspective=function(f){return w(f,d)},b.createOrtho=function(f){return w(f,p)},b.createProject=function(f){return w(f,c)},b.createPickPerspective=function(f){return w(f,g)},b.createPickOrtho=function(f){return w(f,m)},b.createPickProject=function(f){return w(f,u)}},{"gl-shader":132,glslify:231}],128:[function(x,T,b){"use strict";var e=x("is-string-blank"),o=x("gl-buffer"),i=x("gl-vao"),l=x("typedarray-pool"),r=x("gl-mat4/multiply"),y=x("./lib/shaders"),h=x("./lib/glyphs"),s=x("./lib/get-simple-string"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(Q,re){var $=Q[0],J=Q[1],ie=Q[2],j=Q[3];return Q[0]=re[0]*$+re[4]*J+re[8]*ie+re[12]*j,Q[1]=re[1]*$+re[5]*J+re[9]*ie+re[13]*j,Q[2]=re[2]*$+re[6]*J+re[10]*ie+re[14]*j,Q[3]=re[3]*$+re[7]*J+re[11]*ie+re[15]*j,Q}function c(Q,re,$,J){return p(J,J),p(J,J),p(J,J)}function g(Q,re){this.index=Q,this.dataCoordinate=this.position=re}function m(Q){return!0===Q||Q>1?1:Q}function u(Q,re,$,J,ie,j,q,W,ae,G,ee,te){this.gl=Q,this.pixelRatio=1,this.shader=re,this.orthoShader=$,this.projectShader=J,this.pointBuffer=ie,this.colorBuffer=j,this.glyphBuffer=q,this.idBuffer=W,this.vao=ae,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=G,this.pickOrthoShader=ee,this.pickProjectShader=te,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}T.exports=function(Q){var re=Q.gl,$=y.createPerspective(re),J=y.createOrtho(re),ie=y.createProject(re),j=y.createPickPerspective(re),q=y.createPickOrtho(re),W=y.createPickProject(re),ae=o(re),G=o(re),ee=o(re),te=o(re),ue=new u(re,$,J,ie,ae,G,ee,te,i(re,[{buffer:ae,size:3,type:re.FLOAT},{buffer:G,size:4,type:re.FLOAT},{buffer:ee,size:2,type:re.FLOAT},{buffer:te,size:4,type:re.UNSIGNED_BYTE,normalized:!0}]),j,q,W);return ue.update(Q),ue};var w=u.prototype;w.pickSlots=1,w.setPickBase=function(Q){this.pickId=Q},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],A=[0,0,0],M=[0,0,0],k=[0,0,0,1],E=[0,0,0,1],P=d.slice(),D=[0,0,0],F=[[0,0,0],[0,0,0]];function R(Q){return Q[0]=Q[1]=Q[2]=0,Q}function L(Q,re){return Q[0]=re[0],Q[1]=re[1],Q[2]=re[2],Q[3]=1,Q}function I(Q,re,$,J){return Q[0]=re[0],Q[1]=re[1],Q[2]=re[2],Q[$]=J,Q}var V=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function Z(Q,re,$,J,ie,j,q){var W=$.gl;if((j===$.projectHasAlpha||q)&&function B(Q,re,$,J){var ie,j=re.axesProject,q=re.gl,W=Q.uniforms,ae=$.model||d,G=$.view||d,ee=$.projection||d,te=re.axesBounds,le=function(Ce){for(var Re=F,Ue=0;Ue<2;++Ue)for(var qe=0;qe<3;++qe)Re[Ue][qe]=Math.max(Math.min(Ce[Ue][qe],1e8),-1e8);return Re}(re.clipBounds);ie=re.axes&&re.axes.lastCubeProps?re.axes.lastCubeProps.axis:[1,1,1],f[0]=2/q.drawingBufferWidth,f[1]=2/q.drawingBufferHeight,Q.bind(),W.view=G,W.projection=ee,W.screenSize=f,W.highlightId=re.highlightId,W.highlightScale=re.highlightScale,W.clipBounds=le,W.pickGroup=re.pickId/255,W.pixelRatio=J;for(var ue=0;ue<3;++ue)if(j[ue]){W.scale=re.projectScale[ue],W.opacity=re.projectOpacity[ue];for(var de=P,he=0;he<16;++he)de[he]=0;for(he=0;he<4;++he)de[5*he]=1;de[5*ue]=0,de[12+ue]=ie[ue]<0?te[0][ue]:te[1][ue],r(de,ae,de),W.model=de;var be=(ue+1)%3,me=(ue+2)%3,_e=R(A),Ee=R(M);_e[be]=1,Ee[me]=1;var De=c(0,0,0,L(k,_e)),Se=c(0,0,0,L(E,Ee));if(Math.abs(De[1])>Math.abs(Se[1])){var Fe=De;De=Se,Se=Fe,Fe=_e,_e=Ee,Ee=Fe;var ve=be;be=me,me=ve}De[0]<0&&(_e[be]=-1),Se[1]>0&&(Ee[me]=-1);var Te=0,Ie=0;for(he=0;he<4;++he)Te+=Math.pow(ae[4*be+he],2),Ie+=Math.pow(ae[4*me+he],2);_e[be]/=Math.sqrt(Te),Ee[me]/=Math.sqrt(Ie),W.axes[0]=_e,W.axes[1]=Ee,W.fragClipBounds[0]=I(D,le[0],ue,-1e8),W.fragClipBounds[1]=I(D,le[1],ue,1e8),re.vao.bind(),re.vao.draw(q.TRIANGLES,re.vertexCount),re.lineWidth>0&&(q.lineWidth(re.lineWidth*J),re.vao.draw(q.LINES,re.lineVertexCount,re.vertexCount)),re.vao.unbind()}}(re,$,J,ie),j===$.hasAlpha||q){Q.bind();var ae=Q.uniforms;ae.model=J.model||d,ae.view=J.view||d,ae.projection=J.projection||d,f[0]=2/W.drawingBufferWidth,f[1]=2/W.drawingBufferHeight,ae.screenSize=f,ae.highlightId=$.highlightId,ae.highlightScale=$.highlightScale,ae.fragClipBounds=V,ae.clipBounds=$.axes.bounds,ae.opacity=$.opacity,ae.pickGroup=$.pickId/255,ae.pixelRatio=ie,$.vao.bind(),$.vao.draw(W.TRIANGLES,$.vertexCount),$.lineWidth>0&&(W.lineWidth($.lineWidth*ie),$.vao.draw(W.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function Y(Q,re,$,J){var ie;ie=Array.isArray(Q)?re<Q.length?Q[re]:void 0:Q,ie=s(ie);var j=!0;e(ie)&&(ie="\u25bc",j=!1);var q=h(ie,$,J);return{mesh:q[0],lines:q[1],bounds:q[2],visible:j}}w.draw=function(Q){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!1,!1)},w.drawTransparent=function(Q){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!0,!1)},w.drawPick=function(Q){Z(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Q,1,!0,!0)},w.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var re=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(re>=this.pointCount||re<0)return null;var $=this.points[re],J=this._selectResult;J.index=re;for(var ie=0;ie<3;++ie)J.position[ie]=J.dataCoordinate[ie]=$[ie];return J},w.highlight=function(Q){if(Q){var re=Q.index;this.highlightId=[(255&re)/255,(re>>8&255)/255,(re>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(Q){if("perspective"in(Q=Q||{})&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(Array.isArray(Q.project))this.axesProject=Q.project;else{var re=!!Q.project;this.axesProject=[re,re,re]}if("projectScale"in Q)if(Array.isArray(Q.projectScale))this.projectScale=Q.projectScale.slice();else{var $=+Q.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in Q){this.projectOpacity=Array.isArray(Q.projectOpacity)?Q.projectOpacity.slice():[$=+Q.projectOpacity,$,$];for(var J=0;J<3;++J)this.projectOpacity[J]=m(this.projectOpacity[J]),this.projectOpacity[J]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=m(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ie,j,q=Q.position,W=Q.font||"normal",ae=Q.alignment||[0,0];if(2===ae.length)ie=ae[0],j=ae[1];else for(ie=[],j=[],J=0;J<ae.length;++J)ie[J]=ae[J][0],j[J]=ae[J][1];var G=[1/0,1/0,1/0],ee=[-1/0,-1/0,-1/0],te=Q.glyph,le=Q.color,ue=Q.size,de=Q.angle,he=Q.lineColor,be=-1,me=0,_e=0,Ee=0;if(q.length){Ee=q.length;e:for(J=0;J<Ee;++J){for(var De=q[J],Se=0;Se<3;++Se)if(isNaN(De[Se])||!isFinite(De[Se]))continue e;var Fe=(ct=Y(te,J,W,this.pixelRatio)).mesh,ve=ct.lines,Te=ct.bounds;me+=3*Fe.cells.length,_e+=2*ve.edges.length}}var Ie=me+_e,Ce=l.mallocFloat(3*Ie),Re=l.mallocFloat(4*Ie),Ue=l.mallocFloat(2*Ie),qe=l.mallocUint32(Ie);if(Ie>0){var Xe=0,st=me,He=[0,0,0,1],$e=[0,0,0,1],et=Array.isArray(le)&&Array.isArray(le[0]),tt=Array.isArray(he)&&Array.isArray(he[0]);e:for(J=0;J<Ee;++J){for(be+=1,De=q[J],Se=0;Se<3;++Se){if(isNaN(De[Se])||!isFinite(De[Se]))continue e;ee[Se]=Math.max(ee[Se],De[Se]),G[Se]=Math.min(G[Se],De[Se])}Fe=(ct=Y(te,J,W,this.pixelRatio)).mesh,ve=ct.lines,Te=ct.bounds;var ct,bt=ct.visible;if(bt)if(Array.isArray(le)){if(3===(At=et?J<le.length?le[J]:[0,0,0,0]:le).length){for(Se=0;Se<3;++Se)He[Se]=At[Se];He[3]=1}else if(4===At.length){for(Se=0;Se<4;++Se)He[Se]=At[Se];!this.hasAlpha&&At[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];if(bt)if(Array.isArray(he)){var At;if(3===(At=tt?J<he.length?he[J]:[0,0,0,0]:he).length){for(Se=0;Se<3;++Se)$e[Se]=At[Se];$e[Se]=1}else if(4===At.length){for(Se=0;Se<4;++Se)$e[Se]=At[Se];!this.hasAlpha&&At[3]<1&&(this.hasAlpha=!0)}}else $e[0]=$e[1]=$e[2]=0,$e[3]=1;else $e=[1,1,1,0];var Ut=.5;bt?Array.isArray(ue)?Ut=J<ue.length?+ue[J]:12:ue?Ut=+ue:this.useOrtho&&(Ut=12):Ut=0;var Ct=0;Array.isArray(de)?Ct=J<de.length?+de[J]:0:de&&(Ct=+de);var dt=Math.cos(Ct),at=Math.sin(Ct);for(De=q[J],Se=0;Se<3;++Se)ee[Se]=Math.max(ee[Se],De[Se]),G[Se]=Math.min(G[Se],De[Se]);var Nt=ie,rn=j;Nt=0,Array.isArray(ie)?Nt=J<ie.length?ie[J]:0:ie&&(Nt=ie),rn=0,Array.isArray(j)?rn=J<j.length?j[J]:0:j&&(rn=j);var en=[Nt*=Nt>0?1-Te[0][0]:Nt<0?1+Te[1][0]:1,rn*=rn>0?1-Te[0][1]:rn<0?1+Te[1][1]:1],Ge=Fe.cells||[],Qe=Fe.positions||[];for(Se=0;Se<Ge.length;++Se)for(var Rt=Ge[Se],gt=0;gt<3;++gt){for(var Be=0;Be<3;++Be)Ce[3*Xe+Be]=De[Be];for(Be=0;Be<4;++Be)Re[4*Xe+Be]=He[Be];qe[Xe]=be;var Ve=Qe[Rt[gt]];Ue[2*Xe]=Ut*(dt*Ve[0]-at*Ve[1]+en[0]),Ue[2*Xe+1]=Ut*(at*Ve[0]+dt*Ve[1]+en[1]),Xe+=1}for(Ge=ve.edges,Qe=ve.positions,Se=0;Se<Ge.length;++Se)for(Rt=Ge[Se],gt=0;gt<2;++gt){for(Be=0;Be<3;++Be)Ce[3*st+Be]=De[Be];for(Be=0;Be<4;++Be)Re[4*st+Be]=$e[Be];qe[st]=be,Ue[2*st]=Ut*(dt*(Ve=Qe[Rt[gt]])[0]-at*Ve[1]+en[0]),Ue[2*st+1]=Ut*(at*Ve[0]+dt*Ve[1]+en[1]),st+=1}}}this.bounds=[G,ee],this.points=q,this.pointCount=q.length,this.vertexCount=me,this.lineVertexCount=_e,this.pointBuffer.update(Ce),this.colorBuffer.update(Re),this.glyphBuffer.update(Ue),this.idBuffer.update(qe),l.free(Ce),l.free(Re),l.free(Ue),l.free(qe)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(x,T,b){"use strict";var e=x("glslify");b.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),b.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),i=x("./lib/shaders");function l(y,h,s){this.plot=y,this.boxBuffer=h,this.boxShader=s,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}T.exports=function(y,h){var s=y.gl,c=new l(y,o(s,[0,0,0,1,1,0,1,1]),e(s,i.boxVertex,i.boxFragment));return c.update(h),y.addOverlay(c),c};var r=l.prototype;r.draw=function(){if(this.enabled){var y=this.plot,h=this.selectBox,s=this.borderWidth,d=this.innerColor,p=this.outerColor,c=this.borderColor,g=y.box,m=y.screenBox,u=y.dataBox,w=y.viewBox,f=y.pixelRatio,A=(h[0]-u[0])*(w[2]-w[0])/(u[2]-u[0])+w[0],M=(h[1]-u[1])*(w[3]-w[1])/(u[3]-u[1])+w[1],k=(h[2]-u[0])*(w[2]-w[0])/(u[2]-u[0])+w[0],E=(h[3]-u[1])*(w[3]-w[1])/(u[3]-u[1])+w[1];if(A=Math.max(A,w[0]),M=Math.max(M,w[1]),k=Math.min(k,w[2]),E=Math.min(E,w[3]),!(k<A||E<M)){g.bind();var P=m[2]-m[0],D=m[3]-m[1];if(this.outerFill&&(g.drawBox(0,0,P,M,p),g.drawBox(0,M,A,E,p),g.drawBox(0,E,P,D,p),g.drawBox(k,M,P,E,p)),this.innerFill&&g.drawBox(A,M,k,E,d),s>0){var F=s*f;g.drawBox(A-F,M-F,k+F,M+F,c),g.drawBox(A-F,E-F,k+F,E+F,c),g.drawBox(A-F,M-F,A+F,E+F,c),g.drawBox(k-F,M-F,k+F,E+F,c)}}}},r.update=function(y){this.innerFill=!!(y=y||{}).innerFill,this.outerFill=!!y.outerFill,this.innerColor=(y.innerColor||[0,0,0,.5]).slice(),this.outerColor=(y.outerColor||[0,0,0,.5]).slice(),this.borderColor=(y.borderColor||[0,0,0,1]).slice(),this.borderWidth=y.borderWidth||0,this.selectBox=(y.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(x,T,b){"use strict";T.exports=function(s,d){var p=d[0],c=d[1];return new y(s,e(s,p,c,{}),o.mallocUint8(p*c*4))};var e=x("gl-fbo"),o=x("typedarray-pool"),i=x("ndarray"),l=x("bit-twiddle").nextPow2;function r(s,d,p,c,g){this.coord=[s,d],this.id=p,this.value=c,this.distance=g}function y(s,d,p){this.gl=s,this.fbo=d,this.buffer=p,this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(d.bind(),s.readPixels(0,0,d.shape[0],d.shape[1],s.RGBA,s.UNSIGNED_BYTE,c.buffer),c._readTimeout=null)}}var h=y.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(s){if(this.gl){this.fbo.shape=s;var d=this.fbo.shape[0],p=this.fbo.shape[1];if(p*d*4>this.buffer.length){o.free(this.buffer);for(var c=this.buffer=o.mallocUint8(l(p*d*4)),g=0;g<p*d*4;++g)c[g]=255}return s}}}),h.begin=function(){var s=this.gl;s&&(this.fbo.bind(),s.clearColor(1,1,1,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT))},h.end=function(){var s=this.gl;s&&(s.bindFramebuffer(s.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(s,d,p){if(!this.gl)return null;var c=this.fbo.shape.slice();s|=0,d|=0,"number"!=typeof p&&(p=1);var g=0|Math.min(Math.max(s-p,0),c[0]),m=0|Math.min(Math.max(s+p,0),c[0]),u=0|Math.min(Math.max(d-p,0),c[1]),w=0|Math.min(Math.max(d+p,0),c[1]);if(m<=g||w<=u)return null;var f=[m-g,w-u],A=i(this.buffer,[f[0],f[1],4],[4,4*c[0],1],4*(g+c[0]*u)),M=function(P,D,F){for(var R=1e8,L=-1,I=-1,B=P.shape[0],V=P.shape[1],Z=0;Z<B;Z++)for(var Y=0;Y<V;Y++){var Q=P.get(Z,Y,0),re=P.get(Z,Y,1),$=P.get(Z,Y,2),J=P.get(Z,Y,3);if(Q<255||re<255||$<255||J<255){var ie=D-Z,j=F-Y,q=ie*ie+j*j;q<R&&(R=q,L=Z,I=Y)}}return[L,I,R]}(A.hi(f[0],f[1],1),p,p),k=M[0],E=M[1];return k<0||Math.pow(this.radius,2)<M[2]?null:new r(k+g|0,E+u|0,A.get(k,E,0),[A.get(k,E,1),A.get(k,E,2),A.get(k,E,3)],Math.sqrt(M[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(x,T,b){"use strict";var e=x("./lib/create-uniforms"),o=x("./lib/create-attributes"),i=x("./lib/reflect"),l=x("./lib/shader-cache"),r=x("./lib/runtime-reflect"),y=x("./lib/GLError");function h(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var s=h.prototype;function d(p,c){return p.name<c.name?-1:1}s.bind=function(){var p;this.program||this._relink();var c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(c>g)for(p=g;p<c;p++)this.gl.enableVertexAttribArray(p);else if(g>c)for(p=c;p<g;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=c,this.gl.useProgram(this.program)},s.dispose=function(){for(var p=this.gl.lastAttribCount,c=0;c<p;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},s.update=function(p,c,g,m){if(!c||1===arguments.length){var u=p;p=u.vertex,c=u.fragment,g=u.uniforms,m=u.attributes}var w=this,f=w.gl,A=w._vref;w._vref=l.shader(f,f.VERTEX_SHADER,p),A&&A.dispose(),w.vertShader=w._vref.shader;var M=this._fref;if(w._fref=l.shader(f,f.FRAGMENT_SHADER,c),M&&M.dispose(),w.fragShader=w._fref.shader,!g||!m){var k=f.createProgram();if(f.attachShader(k,w.fragShader),f.attachShader(k,w.vertShader),f.linkProgram(k),!f.getProgramParameter(k,f.LINK_STATUS)){var E=f.getProgramInfoLog(k);throw new y(E,"Error linking program:"+E)}g=g||r.uniforms(f,k),m=m||r.attributes(f,k),f.deleteProgram(k)}(m=m.slice()).sort(d);var P,D=[],F=[],R=[];for(P=0;P<m.length;++P){var L=m[P];if(L.type.indexOf("mat")>=0){for(var I=0|L.type.charAt(L.type.length-1),B=new Array(I),V=0;V<I;++V)B[V]=R.length,F.push(L.name+"["+V+"]"),"number"==typeof L.location?R.push(L.location+V):Array.isArray(L.location)&&L.location.length===I&&"number"==typeof L.location[V]?R.push(0|L.location[V]):R.push(-1);D.push({name:L.name,type:L.type,locations:B})}else D.push({name:L.name,type:L.type,locations:[R.length]}),F.push(L.name),R.push("number"==typeof L.location?0|L.location:-1)}var Z=0;for(P=0;P<R.length;++P)if(R[P]<0){for(;R.indexOf(Z)>=0;)Z+=1;R[P]=Z}var Y=new Array(g.length);function Q(){w.program=l.program(f,w._vref,w._fref,F,R);for(var re=0;re<g.length;++re)Y[re]=f.getUniformLocation(w.program,g[re].name)}Q(),w._relink=Q,w.types={uniforms:i(g),attributes:i(m)},w.attributes=o(f,w,D,R),Object.defineProperty(w,"uniforms",e(f,w,g,Y))},T.exports=function(p,c,g,m,u){var w=new h(p);return w.update(c,g,m,u),w}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(x,T,b){function e(o,i,l){this.shortMessage=i||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(i||o||"")+(l?"\n"+l:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,T.exports=e},{}],134:[function(x,T,b){"use strict";T.exports=function(h,s,d,p){for(var c={},g=0,m=d.length;g<m;++g){var u=d[g],w=u.name,f=u.type,A=u.locations;switch(f){case"bool":case"int":case"float":r(h,s,A[0],p,1,c,w);break;default:if(f.indexOf("vec")>=0){if((M=f.charCodeAt(f.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+w+": "+f);r(h,s,A[0],p,M,c,w)}else{if(!(f.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+w+": "+f);var M;if((M=f.charCodeAt(f.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+w+": "+f);y(h,s,A,p,M,c,w)}}}return c};var e=x("./GLError");function o(h,s,d,p,c,g){this._gl=h,this._wrapper=s,this._index=d,this._locations=p,this._dimension=c,this._constFunc=g}var i=o.prototype;i.pointer=function(h,s,d,p){var c=this._gl,g=this._locations[this._index];c.vertexAttribPointer(g,this._dimension,h||c.FLOAT,!!s,d||0,p||0),c.enableVertexAttribArray(g)},i.set=function(h,s,d,p){return this._constFunc(this._locations[this._index],h,s,d,p)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var l=[function(h,s,d){return void 0===d.length?h.vertexAttrib1f(s,d):h.vertexAttrib1fv(s,d)},function(h,s,d,p){return void 0===d.length?h.vertexAttrib2f(s,d,p):h.vertexAttrib2fv(s,d)},function(h,s,d,p,c){return void 0===d.length?h.vertexAttrib3f(s,d,p,c):h.vertexAttrib3fv(s,d)},function(h,s,d,p,c,g){return void 0===d.length?h.vertexAttrib4f(s,d,p,c,g):h.vertexAttrib4fv(s,d)}];function r(h,s,d,p,c,g,m){var u=l[c],w=new o(h,s,d,p,c,u);Object.defineProperty(g,m,{set:function(f){return h.disableVertexAttribArray(p[d]),u(h,p[d],f),f},get:function(){return w},enumerable:!0})}function y(h,s,d,p,c,g,m){for(var u=new Array(c),w=new Array(c),f=0;f<c;++f)r(h,s,d[f],p,c,u,f),w[f]=u[f];Object.defineProperty(u,"location",{set:function(k){if(Array.isArray(k))for(var E=0;E<c;++E)w[E].location=k[E];else for(E=0;E<c;++E)w[E].location=k+E;return k},get:function(){for(var k=new Array(c),E=0;E<c;++E)k[E]=p[d[E]];return k},enumerable:!0}),u.pointer=function(k,E,P,D){k=k||h.FLOAT,E=!!E,P=P||c*c,D=D||0;for(var F=0;F<c;++F){var R=p[d[F]];h.vertexAttribPointer(R,c,k,E,P,D+F*c),h.enableVertexAttribArray(R)}};var A=new Array(c),M=h["vertexAttrib"+c+"fv"];Object.defineProperty(g,m,{set:function(k){for(var E=0;E<c;++E){var P=p[d[E]];if(h.disableVertexAttribArray(P),Array.isArray(k[0]))M.call(h,P,k[E]);else{for(var D=0;D<c;++D)A[D]=k[c*E+D];M.call(h,P,A)}}return k},get:function(){return u},enumerable:!0})}},{"./GLError":133}],135:[function(x,T,b){"use strict";var e=x("./reflect"),o=x("./GLError");function i(r){return function(){return r}}function l(r,y){for(var h=new Array(r),s=0;s<r;++s)h[s]=y;return h}T.exports=function(r,y,h,s){function d(m){return function(u){for(var w=function V(Z,Y){if("object"!=typeof Y)return[[Z,Y]];var Q=[];for(var re in Y){var $=Y[re],J=Z;parseInt(re)+""===re?J+="["+re+"]":J+="."+re,"object"==typeof $?Q.push.apply(Q,V(J,$)):Q.push([J,$])}return Q}("",m),f=0;f<w.length;++f){var A=w[f],M=A[0],k=A[1];if(s[k]){var E=u;if("string"==typeof M&&(0===M.indexOf(".")||0===M.indexOf("["))){var P=M;if(0===M.indexOf(".")&&(P=M.slice(1)),P.indexOf("]")===P.length-1){var D=P.indexOf("["),F=P.slice(0,D),R=P.slice(D+1,P.length-1);E=F?u[F][R]:u[R]}else E=u[P]}var L,I=h[k].type;switch(I){case"bool":case"int":case"sampler2D":case"samplerCube":r.uniform1i(s[k],E);break;case"float":r.uniform1f(s[k],E);break;default:var B=I.indexOf("vec");if(!(0<=B&&B<=1&&I.length===4+B)){if(0===I.indexOf("mat")&&4===I.length){if((L=I.charCodeAt(I.length-1)-48)<2||L>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+I);r["uniformMatrix"+L+"fv"](s[k],!1,E);break}throw new o("","Unknown uniform data type for "+name+": "+I)}if((L=I.charCodeAt(I.length-1)-48)<2||L>4)throw new o("","Invalid data type");switch(I.charAt(0)){case"b":case"i":r["uniform"+L+"iv"](s[k],E);break;case"v":r["uniform"+L+"fv"](s[k],E);break;default:throw new o("","Unrecognized data type for vector "+name+": "+I)}}}}}}function p(m,u,w){if("object"==typeof w){var f=c(w);Object.defineProperty(m,u,{get:i(f),set:d(w),enumerable:!0,configurable:!1})}else s[w]?Object.defineProperty(m,u,{get:(A=w,function(M,k,E){return M.getUniform(k.program,E[A])}),set:d(w),enumerable:!0,configurable:!1}):m[u]=function(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var k=M.indexOf("vec");if(0<=k&&k<=1&&M.length===4+k){if((E=M.charCodeAt(M.length-1)-48)<2||E>4)throw new o("","Invalid data type");return"b"===M.charAt(0)?l(E,!1):l(E,0)}if(0===M.indexOf("mat")&&4===M.length){var E;if((E=M.charCodeAt(M.length-1)-48)<2||E>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+M);return l(E*E,0)}throw new o("","Unknown uniform data type for "+name+": "+M)}}(h[w].type);var A}function c(m){var u;if(Array.isArray(m)){u=new Array(m.length);for(var w=0;w<m.length;++w)p(u,w,m[w])}else for(var f in u={},m)p(u,f,m[f]);return u}var g=e(h,!0);return{get:i(c(g)),set:d(g),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(x,T,b){"use strict";T.exports=function(e,o){for(var i={},l=0;l<e.length;++l)for(var r=e[l].name.split("."),y=i,h=0;h<r.length;++h){var s=r[h].split("[");if(s.length>1){s[0]in y||(y[s[0]]=[]),y=y[s[0]];for(var d=1;d<s.length;++d){var p=parseInt(s[d]);d<s.length-1||h<r.length-1?(p in y||(y[p]=d<s.length-1?[]:{}),y=y[p]):y[p]=o?l:e[l].type}}else h<r.length-1?(s[0]in y||(y[s[0]]={}),y=y[s[0]]):y[s[0]]=o?l:e[l].type}return i}},{}],137:[function(x,T,b){"use strict";b.uniforms=function(l,r){for(var y=l.getProgramParameter(r,l.ACTIVE_UNIFORMS),h=[],s=0;s<y;++s){var d=l.getActiveUniform(r,s);if(d){var p=i(l,d.type);if(d.size>1)for(var c=0;c<d.size;++c)h.push({name:d.name.replace("[0]","["+c+"]"),type:p});else h.push({name:d.name,type:p})}}return h},b.attributes=function(l,r){for(var y=l.getProgramParameter(r,l.ACTIVE_ATTRIBUTES),h=[],s=0;s<y;++s){var d=l.getActiveAttrib(r,s);d&&h.push({name:d.name,type:i(l,d.type)})}return h};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function i(l,r){if(!o){var y=Object.keys(e);o={};for(var h=0;h<y.length;++h){var s=y[h];o[l[s]]=e[s]}}return o[r]}},{}],138:[function(x,T,b){"use strict";b.shader=function(d,p,c){return s(d).getShaderReference(p,c)},b.program=function(d,p,c,g,m){return s(d).getProgram(p,c,g,m)};var e=x("./GLError"),o=x("gl-format-compiler-error"),i=new("undefined"==typeof WeakMap?x("weakmap-shim"):WeakMap),l=0;function r(d,p,c,g,m,u,w){this.id=d,this.src=p,this.type=c,this.shader=g,this.count=u,this.programs=[],this.cache=w}function y(d){this.gl=d,this.shaders=[{},{}],this.programs={}}r.prototype.dispose=function(){if(0==--this.count){for(var d=this.cache,p=d.gl,c=this.programs,g=0,m=c.length;g<m;++g){var u=d.programs[c[g]];u&&(delete d.programs[g],p.deleteProgram(u))}p.deleteShader(this.shader),delete d.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};var h=y.prototype;function s(d){var p=i.get(d);return p||(p=new y(d),i.set(d,p)),p}h.getShaderReference=function(d,p){var c=this.gl,g=this.shaders[d===c.FRAGMENT_SHADER|0],m=g[p];if(m&&c.isShader(m.shader))m.count+=1;else{var u=function(w,f,A){var M=w.createShader(f);if(w.shaderSource(M,A),w.compileShader(M),!w.getShaderParameter(M,w.COMPILE_STATUS)){var k=w.getShaderInfoLog(M);try{var E=o(k,A,f)}catch(P){throw console.warn("Failed to format compiler error: "+P),new e(k,"Error compiling shader:\n"+k)}throw new e(k,E.short,E.long)}return M}(c,d,p);m=g[p]=new r(l++,p,d,u,[],1,this)}return m},h.getProgram=function(d,p,c,g){var m=[d.id,p.id,c.join(":"),g.join(":")].join("@"),u=this.programs[m];return u&&this.gl.isProgram(u)||(this.programs[m]=u=function(w,f,A,M,k){var E=w.createProgram();w.attachShader(E,f),w.attachShader(E,A);for(var P=0;P<M.length;++P)w.bindAttribLocation(E,k[P],M[P]);if(w.linkProgram(E),!w.getProgramParameter(E,w.LINK_STATUS)){var D=w.getProgramInfoLog(E);throw new e(D,"Error linking program: "+D)}return E}(this.gl,d.shader,p.shader,c,g),d.programs.push(m),p.programs.push(m)),u}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(x,T,b){"use strict";function e(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}T.exports=function(i,l){var r=new e(i);return r.update(l),i.addOverlay(r),r};var o=e.prototype;o.update=function(i){this.enable=((i=i||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var i=this.enable,l=this.width,r=this.color,y=this.center,h=this.plot,s=h.line,d=h.dataBox,p=h.viewBox;if(s.bind(),d[0]<=y[0]&&y[0]<=d[2]&&d[1]<=y[1]&&y[1]<=d[3]){var c=p[0]+(y[0]-d[0])/(d[2]-d[0])*(p[2]-p[0]),g=p[1]+(y[1]-d[1])/(d[3]-d[1])*(p[3]-p[1]);i[0]&&s.drawLine(c,g,p[0],g,l[0],r[0]),i[1]&&s.drawLine(c,g,c,p[1],l[1],r[1]),i[2]&&s.drawLine(c,g,p[2],g,l[2],r[2]),i[3]&&s.drawLine(c,g,c,p[3],l[3],r[3])}},o.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(x,T,b){"use strict";var e=x("glslify"),o=x("gl-shader"),i=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);T.exports=function(r){return o(r,i,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(x,T,b){"use strict";var e=x("gl-buffer"),o=x("gl-vao"),i=x("./shaders/index");T.exports=function(p,c){var g=[];function m(M,k,E,P,D,F){var R=[M,k,E,0,0,0,1];R[P+3]=1,R[P]=D,g.push.apply(g,R),R[6]=-1,g.push.apply(g,R),R[P]=F,g.push.apply(g,R),g.push.apply(g,R),R[6]=1,g.push.apply(g,R),R[P]=D,g.push.apply(g,R)}m(0,0,0,0,0,1),m(0,0,0,1,0,1),m(0,0,0,2,0,1),m(1,0,0,1,-1,1),m(1,0,0,2,-1,1),m(0,1,0,0,-1,1),m(0,1,0,2,-1,1),m(0,0,1,0,-1,1),m(0,0,1,1,-1,1);var u=e(p,g),w=o(p,[{type:p.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:u,size:1,offset:24,stride:28}]),f=i(p);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var A=new r(p,u,w,f);return A.update(c),A};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(p,c,g,m){this.gl=p,this.buffer=c,this.vao=g,this.shader=m,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var y=r.prototype,h=[0,0,0],s=[0,0,0],d=[0,0];y.isTransparent=function(){return!1},y.drawTransparent=function(p){},y.draw=function(p){var c=this.gl,g=this.vao,m=this.shader;g.bind(),m.bind();var u,w=p.model||l,f=p.view||l,A=p.projection||l;this.axes&&(u=this.axes.lastCubeProps.axis);for(var M=h,k=s,E=0;E<3;++E)u&&u[E]<0?(M[E]=this.bounds[0][E],k[E]=this.bounds[1][E]):(M[E]=this.bounds[1][E],k[E]=this.bounds[0][E]);for(d[0]=c.drawingBufferWidth,d[1]=c.drawingBufferHeight,m.uniforms.model=w,m.uniforms.view=f,m.uniforms.projection=A,m.uniforms.coordinates=[this.position,M,k],m.uniforms.colors=this.colors,m.uniforms.screenShape=d,E=0;E<3;++E)m.uniforms.lineWidth=this.lineWidth[E]*this.pixelRatio,this.enabled[E]&&(g.draw(c.TRIANGLES,6,6*E),this.drawSides[E]&&g.draw(c.TRIANGLES,12,18+12*E));g.unbind()},y.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},y.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(x,T,b){var e=x("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),i=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);b.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},b.pickShader={vertex:l,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(x,T,b){"use strict";var e=x("gl-vec3"),o=x("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(p,c){var g,m=p.length;for(g=0;g<m;g++){var u=p[g];if(u===c)return g;if(u>c)return g-1}return g},y=function(p,c,g){return p<c?c:p>g?g:p},h=function(p){var c=1/0;p.sort(function(w,f){return w-f});for(var g=p.length,m=1;m<g;m++){var u=Math.abs(p[m]-p[m-1]);u<c&&(c=u)}return c};T.exports=function(p,c){var g=p.startingPositions,m=p.maxLength||1e3,u=p.tubeSize||1,w=p.absoluteTubeSize,f=p.gridFill||"+x+y+z",A={};-1!==f.indexOf("-x")&&(A.reversedX=!0),-1!==f.indexOf("-y")&&(A.reversedY=!0),-1!==f.indexOf("-z")&&(A.reversedZ=!0),A.filled=i.indexOf(f.replace(/-/g,"").replace(/\+/g,""));var he,be,me,_e,M=p.getVelocity||function(he){return function(be,me,_e){var Ee=me.vectors,De=me.meshgrid,Se=be[0],Fe=be[1],ve=be[2],Te=De[0].length,Ie=De[1].length,Ce=De[2].length,Re=r(De[0],Se),Ue=r(De[1],Fe),qe=r(De[2],ve),Xe=Re+1,st=Ue+1,He=qe+1;if(Re=y(Re,0,Te-1),Xe=y(Xe,0,Te-1),Ue=y(Ue,0,Ie-1),st=y(st,0,Ie-1),qe=y(qe,0,Ce-1),He=y(He,0,Ce-1),Re<0||Ue<0||qe<0||Xe>Te-1||st>Ie-1||He>Ce-1)return e.create();var $e,et,tt,ct,bt,At,Ut=De[0][Re],dt=De[1][Ue],Nt=De[2][qe],rn=(Se-Ut)/(De[0][Xe]-Ut),en=(Fe-dt)/(De[1][st]-dt),Ge=(ve-Nt)/(De[2][He]-Nt);switch(isFinite(rn)||(rn=.5),isFinite(en)||(en=.5),isFinite(Ge)||(Ge=.5),_e.reversedX&&(Re=Te-1-Re,Xe=Te-1-Xe),_e.reversedY&&(Ue=Ie-1-Ue,st=Ie-1-st),_e.reversedZ&&(qe=Ce-1-qe,He=Ce-1-He),_e.filled){case 5:bt=qe,At=He,tt=Ue*Ce,ct=st*Ce,$e=Re*Ce*Ie,et=Xe*Ce*Ie;break;case 4:bt=qe,At=He,$e=Re*Ce,et=Xe*Ce,tt=Ue*Ce*Te,ct=st*Ce*Te;break;case 3:tt=Ue,ct=st,bt=qe*Ie,At=He*Ie,$e=Re*Ie*Ce,et=Xe*Ie*Ce;break;case 2:tt=Ue,ct=st,$e=Re*Ie,et=Xe*Ie,bt=qe*Ie*Te,At=He*Ie*Te;break;case 1:$e=Re,et=Xe,bt=qe*Te,At=He*Te,tt=Ue*Te*Ce,ct=st*Te*Ce;break;default:$e=Re,et=Xe,tt=Ue*Te,ct=st*Te,bt=qe*Te*Ie,At=He*Te*Ie}var Qe=Ee[$e+tt+bt],Rt=Ee[$e+tt+At],gt=Ee[$e+ct+bt],Be=Ee[$e+ct+At],Ve=Ee[et+tt+bt],Le=Ee[et+tt+At],je=Ee[et+ct+bt],Ke=Ee[et+ct+At],ft=e.create(),mt=e.create(),pt=e.create(),Ot=e.create();e.lerp(ft,Qe,Ve,rn),e.lerp(mt,Rt,Le,rn),e.lerp(pt,gt,je,rn),e.lerp(Ot,Be,Ke,rn);var Pt=e.create(),Jt=e.create();e.lerp(Pt,ft,pt,en),e.lerp(Jt,mt,Ot,en);var $t=e.create();return e.lerp($t,Pt,Jt,Ge),$t}(he,p,A)},k=p.getDivergence||function(he,be){var me=e.create(),_e=1e-4;e.add(me,he,[_e,0,0]);var Ee=M(me);e.subtract(Ee,Ee,be),e.scale(Ee,Ee,1/_e),e.add(me,he,[0,_e,0]);var De=M(me);e.subtract(De,De,be),e.scale(De,De,1/_e),e.add(me,he,[0,0,_e]);var Se=M(me);return e.subtract(Se,Se,be),e.scale(Se,Se,1/_e),e.add(me,Ee,De),e.add(me,me,Se),me},E=[],P=c[0][0],D=c[0][1],F=c[0][2],R=c[1][0],L=c[1][1],I=c[1][2],V=10*e.distance(c[0],c[1])/m,Z=V*V,Y=1,Q=0,re=g.length;re>1&&(Y=function(he){for(var be=[],me=[],_e=[],Ee={},De={},Se={},Fe=he.length,ve=0;ve<Fe;ve++){var Te=he[ve],Ie=Te[0],Ce=Te[1],Re=Te[2];Ee[Ie]||(be.push(Ie),Ee[Ie]=!0),De[Ce]||(me.push(Ce),De[Ce]=!0),Se[Re]||(_e.push(Re),Se[Re]=!0)}var Ue=h(be),qe=h(me),Xe=h(_e),st=Math.min(Ue,qe,Xe);return isFinite(st)?st:1}(g));for(var $=0;$<re;$++){var J=e.create();e.copy(J,g[$]);var ie=[J],j=[],q=M(J),W=J;j.push(q);var ae=[],G=k(J,q),ee=e.length(G);isFinite(ee)&&ee>Q&&(Q=ee),ae.push(ee),E.push({points:ie,velocities:j,divergences:ae});for(var te=0;te<100*m&&ie.length<m&&(be=void 0,me=void 0,_e=void 0,me=(he=J)[1],_e=he[2],!((be=he[0])<P||be>R||me<D||me>L||_e<F||_e>I));){te++;var le=e.clone(q),ue=e.squaredLength(le);if(0===ue)break;ue>Z&&e.scale(le,le,V/Math.sqrt(ue)),e.add(le,le,J),q=M(le),e.squaredDistance(W,le)-Z>-1e-4*Z&&(ie.push(le),W=le,j.push(q),G=k(le,q),ee=e.length(G),isFinite(ee)&&ee>Q&&(Q=ee),ae.push(ee)),J=le}}var de=function(p,c,g,m){for(var u=0,w=0;w<p.length;w++)for(var f=p[w].velocities,A=0;A<f.length;A++)u=Math.max(u,e.length(f[A]));var M=p.map(function(V){return function(Z,Y,Q,re){for(var $=Z.points,J=Z.velocities,ie=Z.divergences,j=[],q=[],W=[],ae=[],G=[],ee=[],te=0,le=0,ue=o.create(),de=o.create(),he=0;he<$.length;he++){var be=$[he],me=J[he],_e=ie[he];0===Y&&(_e=.05*Q),le=e.length(me)/re,ue=o.create(),e.copy(ue,me),ue[3]=_e;for(var Ee=0;Ee<8;Ee++)G[Ee]=[be[0],be[1],be[2],Ee];if(ae.length>0)for(Ee=0;Ee<8;Ee++){var De=(Ee+1)%8;j.push(ae[Ee],G[Ee],G[De],G[De],ae[De],ae[Ee]),W.push(de,ue,ue,ue,de,de),ee.push(te,le,le,le,te,te);var Se=j.length;q.push([Se-6,Se-5,Se-4],[Se-3,Se-2,Se-1])}var Fe=ae;ae=G,G=Fe;var ve=de;de=ue,ue=ve;var Te=te;te=le,le=Te}return{positions:j,cells:q,vectors:W,vertexIntensity:ee}}(V,g,m,u)}),k=[],E=[],P=[],D=[];for(w=0;w<M.length;w++){var F=M[w],R=k.length;for(k=k.concat(F.positions),P=P.concat(F.vectors),D=D.concat(F.vertexIntensity),A=0;A<F.cells.length;A++){var L=F.cells[A],I=[];E.push(I);for(var B=0;B<L.length;B++)I.push(L[B]+R)}}return{positions:k,cells:E,vectors:P,vertexIntensity:D,colormap:c}}(E,p.colormap,Q,Y);return w?de.tubeScale=w:(0===Q&&(Q=1),de.tubeScale=.5*u*Y/Q),de};var s=x("./lib/shaders"),d=x("gl-cone3d").createMesh;T.exports.createTubeMesh=function(p,c){return d(p,c,{shaders:s,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(x,T,b){var e=x("gl-shader"),o=x("glslify"),i=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),r=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),y=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);b.createShader=function(h){var s=e(h,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},b.createPickShader=function(h){var s=e(h,i,y,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},b.createContourShader=function(h){var s=e(h,r,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s},b.createPickContourShader=function(h){var s=e(h,r,y,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s}},{"gl-shader":132,glslify:231}],145:[function(x,T,b){"use strict";T.exports=function(q){var W=q.gl,ae=f(W),G=M(W),ee=A(W),te=k(W),le=o(W),ue=i(W,[{buffer:le,size:4,stride:40,offset:0},{buffer:le,size:3,stride:40,offset:16},{buffer:le,size:3,stride:40,offset:28}]),de=o(W),he=i(W,[{buffer:de,size:4,stride:20,offset:0},{buffer:de,size:1,stride:20,offset:16}]),be=o(W),me=i(W,[{buffer:be,size:2,type:W.FLOAT}]),_e=l(W,1,256,W.RGBA,W.UNSIGNED_BYTE);_e.minFilter=W.LINEAR,_e.magFilter=W.LINEAR;var Ee=new R(W,[0,0],[[0,0,0],[0,0,0]],ae,G,le,ue,_e,ee,te,de,he,be,me,[0,0,0]),De={levels:[[],[],[]]};for(var Se in q)De[Se]=q[Se];return De.colormap=De.colormap||"jet",Ee.update(De),Ee};var e=x("bit-twiddle"),o=x("gl-buffer"),i=x("gl-vao"),l=x("gl-texture2d"),r=x("typedarray-pool"),y=x("colormap"),h=x("ndarray-ops"),s=x("ndarray-pack"),d=x("ndarray"),p=x("surface-nets"),c=x("gl-mat4/multiply"),g=x("gl-mat4/invert"),m=x("binary-search-bounds"),u=x("ndarray-gradient"),w=x("./lib/shaders"),f=w.createShader,A=w.createContourShader,M=w.createPickShader,k=w.createPickContourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function F(q,W,ae,G,ee){this.position=q,this.index=W,this.uv=ae,this.level=G,this.dataCoordinate=ee}function R(q,W,ae,G,ee,te,le,ue,de,he,be,me,_e,Ee,De){this.gl=q,this.shape=W,this.bounds=ae,this.objectOffset=De,this.intensityBounds=[],this._shader=G,this._pickShader=ee,this._coordinateBuffer=te,this._vao=le,this._colorMap=ue,this._contourShader=de,this._contourPickShader=he,this._contourBuffer=be,this._contourVAO=me,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new F([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=_e,this._dynamicVAO=Ee,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(r.mallocFloat(1024),[0,0]),d(r.mallocFloat(1024),[0,0]),d(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var q=0;q<3;++q){var W=D[q],ae=(q+2)%3;W[(q+1)%3+0]=1,W[ae+3]=1,W[q+6]=1}}();var L=R.prototype;L.genColormap=function(q,W){var ae=!1,G=s([y({colormap:q,nshades:256,format:"rgba"}).map(function(ee,te){var le=W?function(ue,de){if(!de||!de.length)return 1;for(var he=0;he<de.length;++he){if(de.length<2)return 1;if(de[he][0]===ue)return de[he][1];if(de[he][0]>ue&&he>0){var be=(de[he][0]-ue)/(de[he][0]-de[he-1][0]);return de[he][1]*(1-be)+be*de[he-1][1]}}return 1}(te/255,W):ee[3];return le<1&&(ae=!0),[ee[0],ee[1],ee[2],255*le]})]);return h.divseq(G,255),this.hasAlphaScale=ae,G},L.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},L.isOpaque=function(){return!this.isTransparent()},L.pickSlots=1,L.setPickBase=function(q){this.pickId=q};var I=[0,0,0],B={showSurface:!1,showContour:!1,projections:[E.slice(),E.slice(),E.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(q,W){var ae,G,ee,te=W.axes&&W.axes.lastCubeProps.axis||I,le=W.showSurface,ue=W.showContour;for(ae=0;ae<3;++ae)for(le=le||W.surfaceProject[ae],G=0;G<3;++G)ue=ue||W.contourProject[ae][G];for(ae=0;ae<3;++ae){var de=B.projections[ae];for(G=0;G<16;++G)de[G]=0;for(G=0;G<4;++G)de[5*G]=1;de[5*ae]=0,de[12+ae]=W.axesBounds[+(te[ae]>0)][ae],c(de,q.model,de);var he=B.clipBounds[ae];for(ee=0;ee<2;++ee)for(G=0;G<3;++G)he[ee][G]=q.clipBounds[ee][G];he[0][ae]=-1e8,he[1][ae]=1e8}return B.showSurface=le,B.showContour=ue,B}var Z={model:E,view:E,projection:E,inverseModel:E.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=E.slice(),Q=[1,0,0,0,1,0,0,0,1];function re(q,W){q=q||{};var ae=this.gl;ae.disable(ae.CULL_FACE),this._colorMap.bind(0);var G=Z;G.model=q.model||E,G.view=q.view||E,G.projection=q.projection||E,G.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],G.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],G.objectOffset=this.objectOffset,G.contourColor=this.contourColor[0],G.inverseModel=g(G.inverseModel,G.model);for(var ee=0;ee<2;++ee)for(var te=G.clipBounds[ee],le=0;le<3;++le)te[le]=Math.min(Math.max(this.clipBounds[ee][le],-1e8),1e8);G.kambient=this.ambientLight,G.kdiffuse=this.diffuseLight,G.kspecular=this.specularLight,G.roughness=this.roughness,G.fresnel=this.fresnel,G.opacity=this.opacity,G.height=0,G.permutation=Q,G.vertexColor=this.vertexColor;var ue=Y;for(c(ue,G.view,G.model),c(ue,G.projection,ue),g(ue,ue),ee=0;ee<3;++ee)G.eyePosition[ee]=ue[12+ee]/ue[15];var de=ue[15];for(ee=0;ee<3;++ee)de+=this.lightPosition[ee]*ue[4*ee+3];for(ee=0;ee<3;++ee){var he=ue[12+ee];for(le=0;le<3;++le)he+=ue[4*le+ee]*this.lightPosition[le];G.lightPosition[ee]=he/de}var be=V(G,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=G,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ae.TRIANGLES,this._vertexCount),ee=0;ee<3;++ee)this.surfaceProject[ee]&&this.vertexCount&&(this._shader.uniforms.model=be.projections[ee],this._shader.uniforms.clipBounds=be.clipBounds[ee],this._vao.draw(ae.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var me=this._contourShader;G.kambient=1,G.kdiffuse=0,G.kspecular=0,G.opacity=1,me.bind(),me.uniforms=G;var _e=this._contourVAO;for(_e.bind(),ee=0;ee<3;++ee)for(me.uniforms.permutation=D[ee],ae.lineWidth(this.contourWidth[ee]*this.pixelRatio),le=0;le<this.contourLevels[ee].length;++le)le===this.highlightLevel[ee]?(me.uniforms.contourColor=this.highlightColor[ee],me.uniforms.contourTint=this.highlightTint[ee]):0!==le&&le-1!==this.highlightLevel[ee]||(me.uniforms.contourColor=this.contourColor[ee],me.uniforms.contourTint=this.contourTint[ee]),this._contourCounts[ee][le]&&(me.uniforms.height=this.contourLevels[ee][le],_e.draw(ae.LINES,this._contourCounts[ee][le],this._contourOffsets[ee][le]));for(ee=0;ee<3;++ee)for(me.uniforms.model=be.projections[ee],me.uniforms.clipBounds=be.clipBounds[ee],le=0;le<3;++le)if(this.contourProject[ee][le]){me.uniforms.permutation=D[le],ae.lineWidth(this.contourWidth[le]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[le].length;++Ee)Ee===this.highlightLevel[le]?(me.uniforms.contourColor=this.highlightColor[le],me.uniforms.contourTint=this.highlightTint[le]):0!==Ee&&Ee-1!==this.highlightLevel[le]||(me.uniforms.contourColor=this.contourColor[le],me.uniforms.contourTint=this.contourTint[le]),this._contourCounts[le][Ee]&&(me.uniforms.height=this.contourLevels[le][Ee],_e.draw(ae.LINES,this._contourCounts[le][Ee],this._contourOffsets[le][Ee]))}for(_e.unbind(),(_e=this._dynamicVAO).bind(),ee=0;ee<3;++ee)if(0!==this._dynamicCounts[ee])for(me.uniforms.model=G.model,me.uniforms.clipBounds=G.clipBounds,me.uniforms.permutation=D[ee],ae.lineWidth(this.dynamicWidth[ee]*this.pixelRatio),me.uniforms.contourColor=this.dynamicColor[ee],me.uniforms.contourTint=this.dynamicTint[ee],me.uniforms.height=this.dynamicLevel[ee],_e.draw(ae.LINES,this._dynamicCounts[ee],this._dynamicOffsets[ee]),le=0;le<3;++le)this.contourProject[le][ee]&&(me.uniforms.model=be.projections[le],me.uniforms.clipBounds=be.clipBounds[le],_e.draw(ae.LINES,this._dynamicCounts[ee],this._dynamicOffsets[ee]));_e.unbind()}}L.draw=function(q){return re.call(this,q,!1)},L.drawTransparent=function(q){return re.call(this,q,!0)};var $={model:E,view:E,projection:E,inverseModel:E,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function J(q,W){return Array.isArray(q)?[W(q[0]),W(q[1]),W(q[2])]:[W(q),W(q),W(q)]}function ie(q){return Array.isArray(q)?3===q.length?[q[0],q[1],q[2],1]:[q[0],q[1],q[2],q[3]]:[0,0,0,1]}function j(q){if(Array.isArray(q)){if(Array.isArray(q))return[ie(q[0]),ie(q[1]),ie(q[2])];var W=ie(q);return[W.slice(),W.slice(),W.slice()]}}L.drawPick=function(q){q=q||{};var W=this.gl;W.disable(W.CULL_FACE);var ae=$;ae.model=q.model||E,ae.view=q.view||E,ae.projection=q.projection||E,ae.shape=this._field[2].shape,ae.pickId=this.pickId/255,ae.lowerBound=this.bounds[0],ae.upperBound=this.bounds[1],ae.objectOffset=this.objectOffset,ae.permutation=Q;for(var G=0;G<2;++G)for(var ee=ae.clipBounds[G],te=0;te<3;++te)ee[te]=Math.min(Math.max(this.clipBounds[G][te],-1e8),1e8);var le=V(ae,this);if(le.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ae,this._vao.bind(),this._vao.draw(W.TRIANGLES,this._vertexCount),G=0;G<3;++G)this.surfaceProject[G]&&(this._pickShader.uniforms.model=le.projections[G],this._pickShader.uniforms.clipBounds=le.clipBounds[G],this._vao.draw(W.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ue=this._contourPickShader;ue.bind(),ue.uniforms=ae;var de=this._contourVAO;for(de.bind(),te=0;te<3;++te)for(W.lineWidth(this.contourWidth[te]*this.pixelRatio),ue.uniforms.permutation=D[te],G=0;G<this.contourLevels[te].length;++G)this._contourCounts[te][G]&&(ue.uniforms.height=this.contourLevels[te][G],de.draw(W.LINES,this._contourCounts[te][G],this._contourOffsets[te][G]));for(G=0;G<3;++G)for(ue.uniforms.model=le.projections[G],ue.uniforms.clipBounds=le.clipBounds[G],te=0;te<3;++te)if(this.contourProject[G][te]){ue.uniforms.permutation=D[te],W.lineWidth(this.contourWidth[te]*this.pixelRatio);for(var he=0;he<this.contourLevels[te].length;++he)this._contourCounts[te][he]&&(ue.uniforms.height=this.contourLevels[te][he],de.draw(W.LINES,this._contourCounts[te][he],this._contourOffsets[te][he]))}de.unbind()}},L.pick=function(q){if(!q||q.id!==this.pickId)return null;var W=this._field[2].shape,ae=this._pickResult,G=W[0]*(q.value[0]+(q.value[2]>>4)/16)/255,ee=Math.floor(G),te=G-ee,le=W[1]*(q.value[1]+(15&q.value[2])/16)/255,ue=Math.floor(le),de=le-ue;ee+=1,ue+=1;var he=ae.position;he[0]=he[1]=he[2]=0;for(var be=0;be<2;++be)for(var me=be?te:1-te,_e=0;_e<2;++_e)for(var Ee=ee+be,De=ue+_e,Se=me*(_e?de:1-de),Fe=0;Fe<3;++Fe)he[Fe]+=this._field[Fe].get(Ee,De)*Se;for(var ve=this._pickResult.level,Te=0;Te<3;++Te)if(ve[Te]=m.le(this.contourLevels[Te],he[Te]),ve[Te]<0)this.contourLevels[Te].length>0&&(ve[Te]=0);else if(ve[Te]<this.contourLevels[Te].length-1){var Ce=this.contourLevels[Te][ve[Te]+1];Math.abs(this.contourLevels[Te][ve[Te]]-he[Te])>Math.abs(Ce-he[Te])&&(ve[Te]+=1)}for(ae.index[0]=te<.5?ee:ee+1,ae.index[1]=de<.5?ue:ue+1,ae.uv[0]=G/W[0],ae.uv[1]=le/W[1],Fe=0;Fe<3;++Fe)ae.dataCoordinate[Fe]=this._field[Fe].get(ae.index[0],ae.index[1]);return ae},L.padField=function(q,W){var ae=W.shape.slice(),G=q.shape.slice();h.assign(q.lo(1,1).hi(ae[0],ae[1]),W),h.assign(q.lo(1).hi(ae[0],1),W.hi(ae[0],1)),h.assign(q.lo(1,G[1]-1).hi(ae[0],1),W.lo(0,ae[1]-1).hi(ae[0],1)),h.assign(q.lo(0,1).hi(1,ae[1]),W.hi(1)),h.assign(q.lo(G[0]-1,1).hi(1,ae[1]),W.lo(ae[0]-1)),q.set(0,0,W.get(0,0)),q.set(0,G[1]-1,W.get(0,ae[1]-1)),q.set(G[0]-1,0,W.get(ae[0]-1,0)),q.set(G[0]-1,G[1]-1,W.get(ae[0]-1,ae[1]-1))},L.update=function(q){this.objectOffset=(q=q||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in q&&(this.contourWidth=J(q.contourWidth,Number)),"showContour"in q&&(this.showContour=J(q.showContour,Boolean)),"showSurface"in q&&(this.showSurface=!!q.showSurface),"contourTint"in q&&(this.contourTint=J(q.contourTint,Boolean)),"contourColor"in q&&(this.contourColor=j(q.contourColor)),"contourProject"in q&&(this.contourProject=J(q.contourProject,function(un){return J(un,Boolean)})),"surfaceProject"in q&&(this.surfaceProject=q.surfaceProject),"dynamicColor"in q&&(this.dynamicColor=j(q.dynamicColor)),"dynamicTint"in q&&(this.dynamicTint=J(q.dynamicTint,Number)),"dynamicWidth"in q&&(this.dynamicWidth=J(q.dynamicWidth,Number)),"opacity"in q&&(this.opacity=q.opacity),"opacityscale"in q&&(this.opacityscale=q.opacityscale),"colorBounds"in q&&(this.colorBounds=q.colorBounds),"vertexColor"in q&&(this.vertexColor=q.vertexColor?1:0),"colormap"in q&&this._colorMap.setPixels(this.genColormap(q.colormap,this.opacityscale));var W=q.field||q.coords&&q.coords[2]||null,ae=!1;if(W||(W=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in q||"coords"in q){var G=(W.shape[0]+2)*(W.shape[1]+2);G>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(G))),this._field[2]=d(this._field[2].data,[W.shape[0]+2,W.shape[1]+2]),this.padField(this._field[2],W),this.shape=W.shape.slice();for(var ee=this.shape,te=0;te<2;++te)this._field[2].size>this._field[te].data.length&&(r.freeFloat(this._field[te].data),this._field[te].data=r.mallocFloat(this._field[2].size)),this._field[te]=d(this._field[te].data,[ee[0]+2,ee[1]+2]);if(q.coords){var le=q.coords;if(!Array.isArray(le)||3!==le.length)throw new Error("gl-surface: invalid coordinates for x/y");for(te=0;te<2;++te){var ue=le[te];for(_e=0;_e<2;++_e)if(ue.shape[_e]!==ee[_e])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[te],ue)}}else if(q.ticks){var de=q.ticks;if(!Array.isArray(de)||2!==de.length)throw new Error("gl-surface: invalid ticks");for(te=0;te<2;++te){var he=de[te];if((Array.isArray(he)||he.length)&&(he=d(he)),he.shape[0]!==ee[te])throw new Error("gl-surface: invalid tick length");var be=d(he.data,ee);be.stride[te]=he.stride[0],be.stride[1^te]=0,this.padField(this._field[te],be)}}else{for(te=0;te<2;++te){var me=[0,0];me[te]=1,this._field[te]=d(this._field[te].data,[ee[0]+2,ee[1]+2],me,0)}this._field[0].set(0,0,0);for(var _e=0;_e<ee[0];++_e)this._field[0].set(_e+1,0,_e);for(this._field[0].set(ee[0]+1,0,ee[0]-1),this._field[1].set(0,0,0),_e=0;_e<ee[1];++_e)this._field[1].set(0,_e+1,_e);this._field[1].set(0,ee[1]+1,ee[1]-1)}var Ee=this._field,De=d(r.mallocFloat(3*Ee[2].size*2),[3,ee[0]+2,ee[1]+2,2]);for(te=0;te<3;++te)u(De.pick(te),Ee[te],"mirror");var Se=d(r.mallocFloat(3*Ee[2].size),[ee[0]+2,ee[1]+2,3]);for(te=0;te<ee[0]+2;++te)for(_e=0;_e<ee[1]+2;++_e){var Fe=De.get(0,te,_e,0),ve=De.get(0,te,_e,1),Te=De.get(1,te,_e,0),Ie=De.get(1,te,_e,1),Ce=De.get(2,te,_e,0),Re=De.get(2,te,_e,1),Ue=Te*Re-Ie*Ce,qe=Ce*ve-Re*Fe,Xe=Fe*Ie-ve*Te,st=Math.sqrt(Ue*Ue+qe*qe+Xe*Xe);st<1e-8?(st=Math.max(Math.abs(Ue),Math.abs(qe),Math.abs(Xe)))<1e-8?(Xe=1,qe=Ue=0,st=1):st=1/st:st=1/Math.sqrt(st),Se.set(te,_e,0,Ue*st),Se.set(te,_e,1,qe*st),Se.set(te,_e,2,Xe*st)}r.free(De.data);var He=[1/0,1/0,1/0],$e=[-1/0,-1/0,-1/0],et=1/0,tt=-1/0,bt=r.mallocFloat(e.nextPow2((ee[0]-1)*(ee[1]-1)*6*10)),At=0,Ut=0;for(te=0;te<ee[0]-1;++te)e:for(_e=0;_e<ee[1]-1;++_e){for(var Ct=0;Ct<2;++Ct)for(var dt=0;dt<2;++dt)for(var at=0;at<3;++at){var Nt=this._field[at].get(1+te+Ct,1+_e+dt);if(isNaN(Nt)||!isFinite(Nt))continue e}for(at=0;at<6;++at){var rn=te+P[at][0],en=_e+P[at][1],Ge=this._field[0].get(rn+1,en+1),Qe=this._field[1].get(rn+1,en+1);Nt=this._field[2].get(rn+1,en+1),Ue=Se.get(rn+1,en+1,0),qe=Se.get(rn+1,en+1,1),Xe=Se.get(rn+1,en+1,2),q.intensity&&(Rt=q.intensity.get(rn,en));var Rt=q.intensity?q.intensity.get(rn,en):Nt+this.objectOffset[2];bt[At++]=rn,bt[At++]=en,bt[At++]=Ge,bt[At++]=Qe,bt[At++]=Nt,bt[At++]=0,bt[At++]=Rt,bt[At++]=Ue,bt[At++]=qe,bt[At++]=Xe,He[0]=Math.min(He[0],Ge+this.objectOffset[0]),He[1]=Math.min(He[1],Qe+this.objectOffset[1]),He[2]=Math.min(He[2],Nt+this.objectOffset[2]),et=Math.min(et,Rt),$e[0]=Math.max($e[0],Ge+this.objectOffset[0]),$e[1]=Math.max($e[1],Qe+this.objectOffset[1]),$e[2]=Math.max($e[2],Nt+this.objectOffset[2]),tt=Math.max(tt,Rt),Ut+=1}}for(q.intensityBounds&&(et=+q.intensityBounds[0],tt=+q.intensityBounds[1]),te=6;te<At;te+=10)bt[te]=(bt[te]-et)/(tt-et);this._vertexCount=Ut,this._coordinateBuffer.update(bt.subarray(0,At)),r.freeFloat(bt),r.free(Se.data),this.bounds=[He,$e],this.intensity=q.intensity||this._field[2],this.intensityBounds[0]===et&&this.intensityBounds[1]===tt||(ae=!0),this.intensityBounds=[et,tt]}if("levels"in q){var gt=q.levels;for(gt=Array.isArray(gt[0])?gt.slice():[[],[],gt],te=0;te<3;++te)gt[te]=gt[te].slice(),gt[te].sort(function(un,an){return un-an});for(te=0;te<3;++te)for(_e=0;_e<gt[te].length;++_e)gt[te][_e]-=this.objectOffset[te];e:for(te=0;te<3;++te){if(gt[te].length!==this.contourLevels[te].length){ae=!0;break}for(_e=0;_e<gt[te].length;++_e)if(gt[te][_e]!==this.contourLevels[te][_e]){ae=!0;break e}}this.contourLevels=gt}if(ae){Ee=this._field,ee=this.shape;for(var Be=[],Ve=0;Ve<3;++Ve){var Le=this.contourLevels[Ve],je=[],Ke=[],ft=[0,0,0];for(te=0;te<Le.length;++te){var mt=p(this._field[Ve],Le[te]);je.push(Be.length/5|0),Ut=0;e:for(_e=0;_e<mt.cells.length;++_e){var pt=mt.cells[_e];for(at=0;at<2;++at){var Ot=mt.positions[pt[at]],Pt=Ot[0],Jt=0|Math.floor(Pt),$t=Pt-Jt,ut=Ot[1],Dt=0|Math.floor(ut),Wt=ut-Dt,zt=!1;t:for(var Ht=0;Ht<3;++Ht){ft[Ht]=0;var Ne=(Ve+Ht+1)%3;for(Ct=0;Ct<2;++Ct){var ot=Ct?$t:1-$t;for(rn=0|Math.min(Math.max(Jt+Ct,0),ee[0]),dt=0;dt<2;++dt){var yt=dt?Wt:1-Wt;if(en=0|Math.min(Math.max(Dt+dt,0),ee[1]),Nt=Ht<2?this._field[Ne].get(rn,en):(this.intensity.get(rn,en)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Nt)||isNaN(Nt)){zt=!0;break t}ft[Ht]+=ot*yt*Nt}}}if(zt){if(at>0){for(var Vt=0;Vt<5;++Vt)Be.pop();Ut-=1}continue e}Be.push(ft[0],ft[1],Ot[0],Ot[1],ft[2]),Ut+=1}}Ke.push(Ut)}this._contourOffsets[Ve]=je,this._contourCounts[Ve]=Ke}var ln=r.mallocFloat(Be.length);for(te=0;te<Be.length;++te)ln[te]=Be[te];this._contourBuffer.update(ln),r.freeFloat(ln)}},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var q=0;q<3;++q)r.freeFloat(this._field[q].data)},L.highlight=function(q){var W,ae;if(!q)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(W=0;W<3;++W)this.highlightLevel[W]=this.enableHighlight[W]?q.level[W]:-1;for(ae=this.snapToData?q.dataCoordinate:q.position,W=0;W<3;++W)ae[W]-=this.objectOffset[W];if(this.enableDynamic[0]&&ae[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ae[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ae[2]!==this.dynamicLevel[2]){for(var G=0,ee=this.shape,te=r.mallocFloat(12*ee[0]*ee[1]),le=0;le<3;++le)if(this.enableDynamic[le]){this.dynamicLevel[le]=ae[le];var be=this._field[(le+1)%3],me=this._field[(le+2)%3],_e=p(this._field[le],ae[le]),Ee=_e.cells,De=_e.positions;for(this._dynamicOffsets[le]=G,W=0;W<Ee.length;++W)for(var Se=Ee[W],Fe=0;Fe<2;++Fe){var ve=De[Se[Fe]],Te=+ve[0],Ie=0|Te,Ce=0|Math.min(Ie+1,ee[0]),Re=Te-Ie,Ue=1-Re,qe=+ve[1],Xe=0|qe,st=0|Math.min(Xe+1,ee[1]),He=qe-Xe,$e=1-He,et=Ue*$e,tt=Ue*He,ct=Re*$e,bt=Re*He,At=et*be.get(Ie,Xe)+tt*be.get(Ie,st)+ct*be.get(Ce,Xe)+bt*be.get(Ce,st),Ut=et*me.get(Ie,Xe)+tt*me.get(Ie,st)+ct*me.get(Ce,Xe)+bt*me.get(Ce,st);if(isNaN(At)||isNaN(Ut)){Fe&&(G-=1);break}te[2*G+0]=At,te[2*G+1]=Ut,G+=1}this._dynamicCounts[le]=G-this._dynamicOffsets[le]}else this.dynamicLevel[le]=NaN,this._dynamicCounts[le]=0;this._dynamicBuffer.update(te.subarray(0,2*G)),r.freeFloat(te)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(x,T,b){"use strict";var e=x("ndarray"),o=x("ndarray-ops"),i=x("typedarray-pool");T.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||h(M),"number"==typeof arguments[1])return w(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var k=arguments[1],E=s(k)?k:k.raw;if(E)return f(M,E,0|k.width,0|k.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(k.shape&&k.data&&k.stride)return A(M,k)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,r=null,y=null;function h(M){l=[M.LINEAR,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_NEAREST],r=[M.NEAREST,M.LINEAR,M.NEAREST_MIPMAP_NEAREST,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_LINEAR],y=[M.REPEAT,M.CLAMP_TO_EDGE,M.MIRRORED_REPEAT]}function s(M){return"undefined"!=typeof HTMLCanvasElement&&M instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&M instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&M instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&M instanceof ImageData}var d=function(M,k){o.muls(M,k,255)};function p(M,k,E){var P=M.gl,D=P.getParameter(P.MAX_TEXTURE_SIZE);if(k<0||k>D||E<0||E>D)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[k,E],M.bind(),P.texImage2D(P.TEXTURE_2D,0,M.format,k,E,0,M.format,M.type,null),M._mipLevels=[0],M}function c(M,k,E,P,D,F){this.gl=M,this.handle=k,this.format=D,this.type=F,this._shape=[E,P],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var R=this,L=[this._wrapS,this._wrapT];Object.defineProperties(L,[{get:function(){return R._wrapS},set:function(B){return R.wrapS=B}},{get:function(){return R._wrapT},set:function(B){return R.wrapT=B}}]),this._wrapVector=L;var I=[this._shape[0],this._shape[1]];Object.defineProperties(I,[{get:function(){return R._shape[0]},set:function(B){return R.width=B}},{get:function(){return R._shape[1]},set:function(B){return R.height=B}}]),this._shapeVector=I}var g=c.prototype;function m(M,k){return 3===M.length?1===k[2]&&k[1]===M[0]*M[2]&&k[0]===M[2]:1===k[0]&&k[1]===M[0]}function u(M){var k=M.createTexture();return M.bindTexture(M.TEXTURE_2D,k),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),k}function w(M,k,E,P,D){var F=M.getParameter(M.MAX_TEXTURE_SIZE);if(k<0||k>F||E<0||E>F)throw new Error("gl-texture2d: Invalid texture shape");if(D===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var R=u(M);return M.texImage2D(M.TEXTURE_2D,0,P,k,E,0,P,D,null),new c(M,R,k,E,P,D)}function f(M,k,E,P,D,F){var R=u(M);return M.texImage2D(M.TEXTURE_2D,0,D,D,F,k),new c(M,R,E,P,D,F)}function A(M,k){var E=k.dtype,P=k.shape.slice(),D=M.getParameter(M.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>D||P[1]<0||P[1]>D)throw new Error("gl-texture2d: Invalid texture size");var F=m(P,k.stride.slice()),R=0;"float32"===E?R=M.FLOAT:"float64"===E?(R=M.FLOAT,F=!1,E="float32"):"uint8"===E?R=M.UNSIGNED_BYTE:(R=M.UNSIGNED_BYTE,F=!1,E="uint8");var L,I,B=0;if(2===P.length)B=M.LUMINANCE,k=e(k.data,P=[P[0],P[1],1],[k.stride[0],k.stride[1],1],k.offset);else{if(3!==P.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===P[2])B=M.ALPHA;else if(2===P[2])B=M.LUMINANCE_ALPHA;else if(3===P[2])B=M.RGB;else{if(4!==P[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");B=M.RGBA}}R!==M.FLOAT||M.getExtension("OES_texture_float")||(R=M.UNSIGNED_BYTE,F=!1);var V=k.size;if(F)L=0===k.offset&&k.data.length===V?k.data:k.data.subarray(k.offset,k.offset+V);else{var Z=[P[2],P[2]*P[0],1];I=i.malloc(V,E);var Y=e(I,P,Z,0);"float32"!==E&&"float64"!==E||R!==M.UNSIGNED_BYTE?o.assign(Y,k):d(Y,k),L=I.subarray(0,V)}var Q=u(M);return M.texImage2D(M.TEXTURE_2D,0,B,P[0],P[1],0,B,R,L),F||i.free(I),new c(M,Q,P[0],P[1],B,R)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var k=this.gl;if(this.type===k.FLOAT&&l.indexOf(M)>=0&&(k.getExtension("OES_texture_float_linear")||(M=k.NEAREST)),r.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var k=this.gl;if(this.type===k.FLOAT&&l.indexOf(M)>=0&&(k.getExtension("OES_texture_float_linear")||(M=k.NEAREST)),r.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var k=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),k!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),y.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),y.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),2!==M.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var k=0;k<2;++k)if(y.indexOf(M[k])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(2!==M.length)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return p(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return p(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return p(this,this._shape[0],M|=0),M}}}),g.bind=function(M){var k=this.gl;return void 0!==M&&k.activeTexture(k.TEXTURE0+(0|M)),k.bindTexture(k.TEXTURE_2D,this.handle),void 0!==M?0|M:k.getParameter(k.ACTIVE_TEXTURE)-k.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),k=0;M>0;++k,M>>>=1)this._mipLevels.indexOf(k)<0&&this._mipLevels.push(k)},g.setPixels=function(M,k,E,P){var D=this.gl;this.bind(),Array.isArray(k)?(P=E,E=0|k[1],k=0|k[0]):(k=k||0,E=E||0),P=P||0;var F=s(M)?M:M.raw;if(F)this._mipLevels.indexOf(P)<0?(D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,this.type,F),this._mipLevels.push(P)):D.texSubImage2D(D.TEXTURE_2D,P,k,E,this.format,this.type,F);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||k+M.shape[1]>this._shape[1]>>>P||E+M.shape[0]>this._shape[0]>>>P||k<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(R,L,I,B,V,Z,Y,Q){var re=Q.dtype,$=Q.shape.slice();if($.length<2||$.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var J=0,ie=0,j=m($,Q.stride.slice());if("float32"===re?J=R.FLOAT:"float64"===re?(J=R.FLOAT,j=!1,re="float32"):"uint8"===re?J=R.UNSIGNED_BYTE:(J=R.UNSIGNED_BYTE,j=!1,re="uint8"),2===$.length)ie=R.LUMINANCE,Q=e(Q.data,$=[$[0],$[1],1],[Q.stride[0],Q.stride[1],1],Q.offset);else{if(3!==$.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===$[2])ie=R.ALPHA;else if(2===$[2])ie=R.LUMINANCE_ALPHA;else if(3===$[2])ie=R.RGB;else{if(4!==$[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");ie=R.RGBA}}if(ie!==R.LUMINANCE&&ie!==R.ALPHA||V!==R.LUMINANCE&&V!==R.ALPHA||(ie=V),ie!==V)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var q=Q.size,W=Y.indexOf(B)<0;if(W&&Y.push(B),J===Z&&j)0===Q.offset&&Q.data.length===q?W?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,Q.data):R.texSubImage2D(R.TEXTURE_2D,B,L,I,$[0],$[1],V,Z,Q.data):W?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,Q.data.subarray(Q.offset,Q.offset+q)):R.texSubImage2D(R.TEXTURE_2D,B,L,I,$[0],$[1],V,Z,Q.data.subarray(Q.offset,Q.offset+q));else{var ae;ae=Z===R.FLOAT?i.mallocFloat32(q):i.mallocUint8(q);var G=e(ae,$,[$[2],$[2]*$[0],1]);J===R.FLOAT&&Z===R.UNSIGNED_BYTE?d(G,Q):o.assign(G,Q),W?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,ae.subarray(0,q)):R.texSubImage2D(R.TEXTURE_2D,B,L,I,$[0],$[1],V,Z,ae.subarray(0,q)),Z===R.FLOAT?i.freeFloat32(ae):i.freeUint8(ae)}}(D,k,E,P,this.format,this.type,this._mipLevels,M)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(x,T,b){"use strict";T.exports=function(e,o,i){o?o.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(i){if(i.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var y=i[r];if(y.buffer){var s=y.size||4,d=y.type||e.FLOAT,p=!!y.normalized,c=y.stride||0,g=y.offset||0;y.buffer.bind(),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,s,d,p,c,g)}else{if("number"==typeof y)e.vertexAttrib1f(r,y);else if(1===y.length)e.vertexAttrib1f(r,y[0]);else if(2===y.length)e.vertexAttrib2f(r,y[0],y[1]);else if(3===y.length)e.vertexAttrib3f(r,y[0],y[1],y[2]);else{if(4!==y.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(r,y[0],y[1],y[2],y[3])}e.disableVertexAttribArray(r)}}for(;r<l;++r)e.disableVertexAttribArray(r)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),r=0;r<l;++r)e.disableVertexAttribArray(r)}},{}],148:[function(x,T,b){"use strict";var e=x("./do-bind.js");function o(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}o.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},o.prototype.update=function(i,l,r){this._elements=l,this._attributes=i,this._elementsType=r||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(i,l,r){r=r||0;var y=this.gl;this._elements?y.drawElements(i,l,this._elementsType,r):y.drawArrays(i,r,l)},T.exports=function(i){return new o(i)}},{"./do-bind.js":147}],149:[function(x,T,b){"use strict";var e=x("./do-bind.js");function o(l,r,y,h,s,d){this.location=l,this.dimension=r,this.a=y,this.b=h,this.c=s,this.d=d}function i(l,r,y){this.gl=l,this._ext=r,this.handle=y,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}o.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(l,r,y){if(this.bind(),e(this.gl,r,l),this.unbind(),this._attribs.length=0,l)for(var h=0;h<l.length;++h){var s=l[h];"number"==typeof s?this._attribs.push(new o(h,1,s)):Array.isArray(s)&&this._attribs.push(new o(h,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!r,this._elementsType=y||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(l,r,y){y=y||0;var h=this.gl;this._useElements?h.drawElements(l,r,this._elementsType,y):h.drawArrays(l,y,r)},T.exports=function(l,r){return new i(l,r,r.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(x,T,b){"use strict";var e=x("./lib/vao-native.js"),o=x("./lib/vao-emulated.js");function i(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}T.exports=function(l,r,y,h){var s,d=l.createVertexArray?new i(l):l.getExtension("OES_vertex_array_object");return(s=d?e(l,d):o(l)).update(r,y,h),s}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}},{}],152:[function(x,T,b){T.exports=function(l,r){var y=e(l[0],l[1],l[2]),h=e(r[0],r[1],r[2]);o(y,y),o(h,h);var s=i(y,h);return s>1?0:Math.acos(s)};var e=x("./fromValues"),o=x("./normalize"),i=x("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(x,T,b){T.exports=function(e,o){return e[0]=Math.ceil(o[0]),e[1]=Math.ceil(o[1]),e[2]=Math.ceil(o[2]),e}},{}],154:[function(x,T,b){T.exports=function(e){var o=new Float32Array(3);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o}},{}],155:[function(x,T,b){T.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e}},{}],156:[function(x,T,b){T.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=i[0],s=i[1],d=i[2];return e[0]=r*d-y*s,e[1]=y*h-l*d,e[2]=l*s-r*h,e}},{}],158:[function(x,T,b){T.exports=x("./distance")},{"./distance":159}],159:[function(x,T,b){T.exports=function(e,o){var i=o[0]-e[0],l=o[1]-e[1],r=o[2]-e[2];return Math.sqrt(i*i+l*l+r*r)}},{}],160:[function(x,T,b){T.exports=x("./divide")},{"./divide":161}],161:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]/i[0],e[1]=o[1]/i[1],e[2]=o[2]/i[2],e}},{}],162:[function(x,T,b){T.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]}},{}],163:[function(x,T,b){T.exports=1e-6},{}],164:[function(x,T,b){T.exports=function(o,i){var l=o[0],r=o[1],y=o[2],h=i[0],s=i[1],d=i[2];return Math.abs(l-h)<=e*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(r-s)<=e*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(y-d)<=e*Math.max(1,Math.abs(y),Math.abs(d))};var e=x("./epsilon")},{"./epsilon":163}],165:[function(x,T,b){T.exports=function(e,o){return e[0]===o[0]&&e[1]===o[1]&&e[2]===o[2]}},{}],166:[function(x,T,b){T.exports=function(e,o){return e[0]=Math.floor(o[0]),e[1]=Math.floor(o[1]),e[2]=Math.floor(o[2]),e}},{}],167:[function(x,T,b){T.exports=function(o,i,l,r,y,h){var s,d;for(i||(i=3),l||(l=0),d=r?Math.min(r*i+l,o.length):o.length,s=l;s<d;s+=i)e[0]=o[s],e[1]=o[s+1],e[2]=o[s+2],y(e,e,h),o[s]=e[0],o[s+1]=e[1],o[s+2]=e[2];return o};var e=x("./create")()},{"./create":156}],168:[function(x,T,b){T.exports=function(e,o,i){var l=new Float32Array(3);return l[0]=e,l[1]=o,l[2]=i,l}},{}],169:[function(x,T,b){T.exports={EPSILON:x("./epsilon"),create:x("./create"),clone:x("./clone"),angle:x("./angle"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),equals:x("./equals"),exactEquals:x("./exactEquals"),add:x("./add"),subtract:x("./subtract"),sub:x("./sub"),multiply:x("./multiply"),mul:x("./mul"),divide:x("./divide"),div:x("./div"),min:x("./min"),max:x("./max"),floor:x("./floor"),ceil:x("./ceil"),round:x("./round"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),dist:x("./dist"),squaredDistance:x("./squaredDistance"),sqrDist:x("./sqrDist"),length:x("./length"),len:x("./len"),squaredLength:x("./squaredLength"),sqrLen:x("./sqrLen"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),cross:x("./cross"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformMat3:x("./transformMat3"),transformQuat:x("./transformQuat"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),forEach:x("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(x,T,b){T.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e}},{}],171:[function(x,T,b){T.exports=x("./length")},{"./length":172}],172:[function(x,T,b){T.exports=function(e){var o=e[0],i=e[1],l=e[2];return Math.sqrt(o*o+i*i+l*l)}},{}],173:[function(x,T,b){T.exports=function(e,o,i,l){var r=o[0],y=o[1],h=o[2];return e[0]=r+l*(i[0]-r),e[1]=y+l*(i[1]-y),e[2]=h+l*(i[2]-h),e}},{}],174:[function(x,T,b){T.exports=function(e,o,i){return e[0]=Math.max(o[0],i[0]),e[1]=Math.max(o[1],i[1]),e[2]=Math.max(o[2],i[2]),e}},{}],175:[function(x,T,b){T.exports=function(e,o,i){return e[0]=Math.min(o[0],i[0]),e[1]=Math.min(o[1],i[1]),e[2]=Math.min(o[2],i[2]),e}},{}],176:[function(x,T,b){T.exports=x("./multiply")},{"./multiply":177}],177:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]*i[0],e[1]=o[1]*i[1],e[2]=o[2]*i[2],e}},{}],178:[function(x,T,b){T.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e}},{}],179:[function(x,T,b){T.exports=function(e,o){var i=o[0],l=o[1],r=o[2],y=i*i+l*l+r*r;return y>0&&(y=1/Math.sqrt(y),e[0]=o[0]*y,e[1]=o[1]*y,e[2]=o[2]*y),e}},{}],180:[function(x,T,b){T.exports=function(e,o){o=o||1;var i=2*Math.random()*Math.PI,l=2*Math.random()-1,r=Math.sqrt(1-l*l)*o;return e[0]=Math.cos(i)*r,e[1]=Math.sin(i)*r,e[2]=l*o,e}},{}],181:[function(x,T,b){T.exports=function(e,o,i,l){var r=i[1],y=i[2],h=o[1]-r,s=o[2]-y,d=Math.sin(l),p=Math.cos(l);return e[0]=o[0],e[1]=r+h*p-s*d,e[2]=y+h*d+s*p,e}},{}],182:[function(x,T,b){T.exports=function(e,o,i,l){var r=i[0],y=i[2],h=o[0]-r,s=o[2]-y,d=Math.sin(l),p=Math.cos(l);return e[0]=r+s*d+h*p,e[1]=o[1],e[2]=y+s*p-h*d,e}},{}],183:[function(x,T,b){T.exports=function(e,o,i,l){var r=i[0],y=i[1],h=o[0]-r,s=o[1]-y,d=Math.sin(l),p=Math.cos(l);return e[0]=r+h*p-s*d,e[1]=y+h*d+s*p,e[2]=o[2],e}},{}],184:[function(x,T,b){T.exports=function(e,o){return e[0]=Math.round(o[0]),e[1]=Math.round(o[1]),e[2]=Math.round(o[2]),e}},{}],185:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]*i,e[1]=o[1]*i,e[2]=o[2]*i,e}},{}],186:[function(x,T,b){T.exports=function(e,o,i,l){return e[0]=o[0]+i[0]*l,e[1]=o[1]+i[1]*l,e[2]=o[2]+i[2]*l,e}},{}],187:[function(x,T,b){T.exports=function(e,o,i,l){return e[0]=o,e[1]=i,e[2]=l,e}},{}],188:[function(x,T,b){T.exports=x("./squaredDistance")},{"./squaredDistance":190}],189:[function(x,T,b){T.exports=x("./squaredLength")},{"./squaredLength":191}],190:[function(x,T,b){T.exports=function(e,o){var i=o[0]-e[0],l=o[1]-e[1],r=o[2]-e[2];return i*i+l*l+r*r}},{}],191:[function(x,T,b){T.exports=function(e){var o=e[0],i=e[1],l=e[2];return o*o+i*i+l*l}},{}],192:[function(x,T,b){T.exports=x("./subtract")},{"./subtract":193}],193:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]-i[0],e[1]=o[1]-i[1],e[2]=o[2]-i[2],e}},{}],194:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2];return e[0]=l*i[0]+r*i[3]+y*i[6],e[1]=l*i[1]+r*i[4]+y*i[7],e[2]=l*i[2]+r*i[5]+y*i[8],e}},{}],195:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=i[3]*l+i[7]*r+i[11]*y+i[15];return e[0]=(i[0]*l+i[4]*r+i[8]*y+i[12])/(h=h||1),e[1]=(i[1]*l+i[5]*r+i[9]*y+i[13])/h,e[2]=(i[2]*l+i[6]*r+i[10]*y+i[14])/h,e}},{}],196:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=i[0],s=i[1],d=i[2],p=i[3],c=p*l+s*y-d*r,g=p*r+d*l-h*y,m=p*y+h*r-s*l,u=-h*l-s*r-d*y;return e[0]=c*p+u*-h+g*-d-m*-s,e[1]=g*p+u*-s+m*-h-c*-d,e[2]=m*p+u*-d+c*-s-g*-h,e}},{}],197:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e[3]=o[3]+i[3],e}},{}],198:[function(x,T,b){T.exports=function(e){var o=new Float32Array(4);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o}},{}],199:[function(x,T,b){T.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e}},{}],200:[function(x,T,b){T.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(x,T,b){T.exports=function(e,o){var i=o[0]-e[0],l=o[1]-e[1],r=o[2]-e[2],y=o[3]-e[3];return Math.sqrt(i*i+l*l+r*r+y*y)}},{}],202:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]/i[0],e[1]=o[1]/i[1],e[2]=o[2]/i[2],e[3]=o[3]/i[3],e}},{}],203:[function(x,T,b){T.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]+e[3]*o[3]}},{}],204:[function(x,T,b){T.exports=function(e,o,i,l){var r=new Float32Array(4);return r[0]=e,r[1]=o,r[2]=i,r[3]=l,r}},{}],205:[function(x,T,b){T.exports={create:x("./create"),clone:x("./clone"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),add:x("./add"),subtract:x("./subtract"),multiply:x("./multiply"),divide:x("./divide"),min:x("./min"),max:x("./max"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),squaredDistance:x("./squaredDistance"),length:x("./length"),squaredLength:x("./squaredLength"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformQuat:x("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(x,T,b){T.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e[3]=1/o[3],e}},{}],207:[function(x,T,b){T.exports=function(e){var o=e[0],i=e[1],l=e[2],r=e[3];return Math.sqrt(o*o+i*i+l*l+r*r)}},{}],208:[function(x,T,b){T.exports=function(e,o,i,l){var r=o[0],y=o[1],h=o[2],s=o[3];return e[0]=r+l*(i[0]-r),e[1]=y+l*(i[1]-y),e[2]=h+l*(i[2]-h),e[3]=s+l*(i[3]-s),e}},{}],209:[function(x,T,b){T.exports=function(e,o,i){return e[0]=Math.max(o[0],i[0]),e[1]=Math.max(o[1],i[1]),e[2]=Math.max(o[2],i[2]),e[3]=Math.max(o[3],i[3]),e}},{}],210:[function(x,T,b){T.exports=function(e,o,i){return e[0]=Math.min(o[0],i[0]),e[1]=Math.min(o[1],i[1]),e[2]=Math.min(o[2],i[2]),e[3]=Math.min(o[3],i[3]),e}},{}],211:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]*i[0],e[1]=o[1]*i[1],e[2]=o[2]*i[2],e[3]=o[3]*i[3],e}},{}],212:[function(x,T,b){T.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e[3]=-o[3],e}},{}],213:[function(x,T,b){T.exports=function(e,o){var i=o[0],l=o[1],r=o[2],y=o[3],h=i*i+l*l+r*r+y*y;return h>0&&(h=1/Math.sqrt(h),e[0]=i*h,e[1]=l*h,e[2]=r*h,e[3]=y*h),e}},{}],214:[function(x,T,b){var e=x("./normalize"),o=x("./scale");T.exports=function(i,l){return l=l||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),e(i,i),o(i,i,l),i}},{"./normalize":213,"./scale":215}],215:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]*i,e[1]=o[1]*i,e[2]=o[2]*i,e[3]=o[3]*i,e}},{}],216:[function(x,T,b){T.exports=function(e,o,i,l){return e[0]=o[0]+i[0]*l,e[1]=o[1]+i[1]*l,e[2]=o[2]+i[2]*l,e[3]=o[3]+i[3]*l,e}},{}],217:[function(x,T,b){T.exports=function(e,o,i,l,r){return e[0]=o,e[1]=i,e[2]=l,e[3]=r,e}},{}],218:[function(x,T,b){T.exports=function(e,o){var i=o[0]-e[0],l=o[1]-e[1],r=o[2]-e[2],y=o[3]-e[3];return i*i+l*l+r*r+y*y}},{}],219:[function(x,T,b){T.exports=function(e){var o=e[0],i=e[1],l=e[2],r=e[3];return o*o+i*i+l*l+r*r}},{}],220:[function(x,T,b){T.exports=function(e,o,i){return e[0]=o[0]-i[0],e[1]=o[1]-i[1],e[2]=o[2]-i[2],e[3]=o[3]-i[3],e}},{}],221:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=o[3];return e[0]=i[0]*l+i[4]*r+i[8]*y+i[12]*h,e[1]=i[1]*l+i[5]*r+i[9]*y+i[13]*h,e[2]=i[2]*l+i[6]*r+i[10]*y+i[14]*h,e[3]=i[3]*l+i[7]*r+i[11]*y+i[15]*h,e}},{}],222:[function(x,T,b){T.exports=function(e,o,i){var l=o[0],r=o[1],y=o[2],h=i[0],s=i[1],d=i[2],p=i[3],c=p*l+s*y-d*r,g=p*r+d*l-h*y,m=p*y+h*r-s*l,u=-h*l-s*r-d*y;return e[0]=c*p+u*-h+g*-d-m*-s,e[1]=g*p+u*-s+m*-h-c*-d,e[2]=m*p+u*-d+c*-s-g*-h,e[3]=o[3],e}},{}],223:[function(x,T,b){var e=x("glsl-tokenizer"),o=x("atob-lite");T.exports=function(i){for(var l=Array.isArray(i)?i:e(i),r=0;r<l.length;r++){var y=l[r];if("preprocessor"===y.type){var h=y.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var d=h[2];return(h[1]?o(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(x,T,b){T.exports=function(h){var s,d,p,c=0,g=0,m=999,u=[],w=[],f=1,A=0,M=0,k=!1,E=!1,P="",D=i,F=e;"300 es"===(h=h||{}).version&&(D=r,F=l);var R={},L={};for(c=0;c<D.length;c++)R[D[c]]=!0;for(c=0;c<F.length;c++)L[F[c]]=!0;return function(q){return w=[],null!==q?function(W){var ae;for(c=0,W.toString&&(W=W.toString()),P+=W.replace(/\r\n/g,"\n"),p=P.length;s=P[c],c<p;){switch(ae=c,m){case 0:c="/"===s&&"*"===d?(u.push(s),I(u.join("")),m=999,c+1):(u.push(s),d=s,c+1);break;case 1:case 2:c="\r"!==s&&"\n"!==s||"\\"===d?(u.push(s),d=s,c+1):(I(u.join("")),m=999,c);break;case 3:c=Q();break;case 4:c="."===s||/[eE]/.test(s)?(u.push(s),m=5,d=s,c+1):"x"===s&&1===u.length&&"0"===u[0]?(m=11,u.push(s),d=s,c+1):/[^\d]/.test(s)?(I(u.join("")),m=999,c):(u.push(s),d=s,c+1);break;case 11:c=/[^a-fA-F0-9]/.test(s)?(I(u.join("")),m=999,c):(u.push(s),d=s,c+1);break;case 5:"f"===s&&(u.push(s),d=s,c+=1),c=/[eE]/.test(s)?(u.push(s),d=s,c+1):("-"!==s&&"+"!==s||!/[eE]/.test(d))&&/[^\d]/.test(s)?(I(u.join("")),m=999,c):(u.push(s),d=s,c+1);break;case 9999:c=j();break;case 9:c=/[^\s]/g.test(s)?(I(u.join("")),m=999,c):(u.push(s),d=s,c+1);break;case 999:u=u.length?[]:u,c="/"===d&&"*"===s?(M=g+c-1,m=0,d=s,c+1):"/"===d&&"/"===s?(M=g+c-1,m=1,d=s,c+1):"#"===s?(m=2,M=g+c,c):/\s/.test(s)?(m=9,M=g+c,c):(k=/\d/.test(s),E=/[^\w_]/.test(s),M=g+c,m=k?4:E?3:9999,c)}ae!==c&&("\n"===P[ae]?(A=0,++f):++A)}return g+=c,P=P.slice(c),w}(q):(u.length&&I(u.join("")),m=10,I("(eof)"),w)};function I(q){q.length&&w.push({type:y[m],data:q,position:M,line:f,column:A})}function Q(){if("."===d&&/\d/.test(s))return m=5,c;if("/"===d&&"*"===s)return m=0,c;if("/"===d&&"/"===s)return m=1,c;if("."===s&&u.length){for(;re(u););return m=5,c}if(";"===s||")"===s||"("===s){if(u.length)for(;re(u););return I(s),m=999,c+1}var q=2===u.length&&"="!==s;if(/[\w_\d\s]/.test(s)||q){for(;re(u););return m=999,c}return u.push(s),d=s,c+1}function re(q){for(var W,ae,G=0;;){if(W=o.indexOf(q.slice(0,q.length+G).join("")),ae=o[W],-1===W){if(G--+q.length>0)continue;ae=q.slice(0,1).join("")}return I(ae),M+=ae.length,(u=u.slice(ae.length)).length}}function j(){if(/[^\d\w_]/.test(s)){var q=u.join("");return m=L[q]?8:R[q]?7:6,I(u.join("")),m=999,c}return u.push(s),d=s,c+1}};var e=x("./lib/literals"),o=x("./lib/operators"),i=x("./lib/builtins"),l=x("./lib/literals-300es"),r=x("./lib/builtins-300es"),y=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(x,T,b){var e=x("./builtins");e=e.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),T.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(x,T,b){T.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(x,T,b){var e=x("./literals");T.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(x,T,b){T.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(x,T,b){T.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(x,T,b){var e=x("./index");T.exports=function(o,i){var l=e(i),r=[];return(r=r.concat(l(o))).concat(l(null))}},{"./index":224}],231:[function(x,T,b){T.exports=function(e){"string"==typeof e&&(e=[e]);for(var o=[].slice.call(arguments,1),i=[],l=0;l<e.length-1;l++)i.push(e[l],o[l]||"");return i.push(e[l]),i.join("")}},{}],232:[function(x,T,b){"use strict";var e=x("is-browser");T.exports=e&&function(){var o=!1;try{var i=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(l){o=!1}return o}()},{"is-browser":236}],233:[function(x,T,b){"use strict";T.exports=function(d,p){var c=d.length;if(0===c)throw new Error("Must have at least d+1 points");var g=d[0].length;if(c<=g)throw new Error("Must input at least d+1 points");var m=d.slice(0,g+1),u=e.apply(void 0,m);if(0===u)throw new Error("Input not in general position");for(var w=new Array(g+1),f=0;f<=g;++f)w[f]=f;u<0&&(w[0]=1,w[1]=0);var A=new i(w,new Array(g+1),!1),M=A.adjacent,k=new Array(g+2);for(f=0;f<=g;++f){for(var E=w.slice(),P=0;P<=g;++P)P===f&&(E[P]=-1);var D=E[0];E[0]=E[1],E[1]=D;var F=new i(E,new Array(g+1),!0);M[f]=F,k[f]=F}for(k[g+1]=A,f=0;f<=g;++f){E=M[f].vertices;var R=M[f].adjacent;for(P=0;P<=g;++P){var L=E[P];if(L<0)R[P]=A;else for(var I=0;I<=g;++I)M[I].vertices.indexOf(L)<0&&(R[P]=M[I])}}var B=new h(g,m,k),V=!!p;for(f=g+1;f<c;++f)B.insert(d[f],V);return B.boundary()};var e=x("robust-orientation"),o=x("simplicial-complex").compareCells;function i(d,p,c){this.vertices=d,this.adjacent=p,this.boundary=c,this.lastVisited=-1}function l(d,p,c){this.vertices=d,this.cell=p,this.index=c}function r(d,p){return o(d.vertices,p.vertices)}i.prototype.flip=function(){var d=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=d;var p=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=p};var y=[];function h(d,p,c){this.dimension=d,this.vertices=p,this.simplices=c,this.interior=c.filter(function(w){return!w.boundary}),this.tuple=new Array(d+1);for(var g=0;g<=d;++g)this.tuple[g]=this.vertices[g];var m,w,u=y[d];u||(u=y[d]=((m=e[d+1])||(m=e),w=m,function(){return w.apply(this,this.tuple)})),this.orient=u}var s=h.prototype;s.handleBoundaryDegeneracy=function(d,p){var c=this.dimension,g=this.vertices.length-1,m=this.tuple,u=this.vertices,w=[d];for(d.lastVisited=-g;w.length>0;)for(var f=(d=w.pop()).adjacent,A=0;A<=c;++A){var M=f[A];if(M.boundary&&!(M.lastVisited<=-g)){for(var k=M.vertices,E=0;E<=c;++E){var P=k[E];m[E]=P<0?p:u[P]}var D=this.orient();if(D>0)return M;M.lastVisited=-g,0===D&&w.push(M)}}return null},s.walk=function(d,p){var c=this.vertices.length-1,g=this.dimension,m=this.vertices,u=this.tuple,w=p?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[w];e:for(;!f.boundary;){for(var A=f.vertices,M=f.adjacent,k=0;k<=g;++k)u[k]=m[A[k]];for(f.lastVisited=c,k=0;k<=g;++k){var E=M[k];if(!(E.lastVisited>=c)){var P=u[k];u[k]=d;var D=this.orient();if(u[k]=P,D<0){f=E;continue e}E.lastVisited=E.boundary?-c:c}}return}return f},s.addPeaks=function(d,p){var c=this.vertices.length-1,g=this.dimension,m=this.vertices,u=this.tuple,w=this.interior,f=this.simplices,A=[p];p.lastVisited=c,p.vertices[p.vertices.indexOf(-1)]=c,p.boundary=!1,w.push(p);for(var M=[];A.length>0;){var k=(p=A.pop()).vertices,E=p.adjacent,P=k.indexOf(c);if(!(P<0))for(var D=0;D<=g;++D)if(D!==P){var F=E[D];if(F.boundary&&!(F.lastVisited>=c)){var R=F.vertices;if(F.lastVisited!==-c){for(var L=0,I=0;I<=g;++I)R[I]<0?(L=I,u[I]=d):u[I]=m[R[I]];if(this.orient()>0){R[L]=c,F.boundary=!1,w.push(F),A.push(F),F.lastVisited=c;continue}F.lastVisited=-c}var B=F.adjacent,V=k.slice(),Z=E.slice(),Y=new i(V,Z,!0);f.push(Y);var Q=B.indexOf(p);if(!(Q<0))for(B[Q]=Y,Z[P]=F,V[D]=-1,Z[D]=p,E[D]=Y,Y.flip(),I=0;I<=g;++I){var re=V[I];if(!(re<0||re===c)){for(var $=new Array(g-1),J=0,ie=0;ie<=g;++ie){var j=V[ie];j<0||ie===I||($[J++]=j)}M.push(new l($,Y,I))}}}}}for(M.sort(r),D=0;D+1<M.length;D+=2){var q=M[D],W=M[D+1];q.index<0||W.index<0||(q.cell.adjacent[q.index]=W.cell,W.cell.adjacent[W.index]=q.cell)}},s.insert=function(d,p){var c=this.vertices;c.push(d);var g=this.walk(d,p);if(g){for(var m=this.dimension,u=this.tuple,w=0;w<=m;++w){var f=g.vertices[w];u[w]=f<0?d:c[f]}var A=this.orient(u);A<0||(0!==A||(g=this.handleBoundaryDegeneracy(g,d)))&&this.addPeaks(d,g)}},s.boundary=function(){for(var d=this.dimension,p=[],c=this.simplices,g=c.length,m=0;m<g;++m){var u=c[m];if(u.boundary){for(var w=new Array(d),f=u.vertices,A=0,M=0,k=0;k<=d;++k)f[k]>=0?w[A++]=f[k]:M=1&k;if(M===(1&d)){var E=w[0];w[0]=w[1],w[1]=E}p.push(w)}}return p}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(x,T,b){"use strict";var e=x("binary-search-bounds");function o(A,M,k,E,P){this.mid=A,this.left=M,this.right=k,this.leftPoints=E,this.rightPoints=P,this.count=(M?M.count:0)+(k?k.count:0)+E.length}T.exports=function(A){return new w(A&&0!==A.length?u(A):null)};var i=o.prototype;function l(A,M){A.mid=M.mid,A.left=M.left,A.right=M.right,A.leftPoints=M.leftPoints,A.rightPoints=M.rightPoints,A.count=M.count}function r(A,M){var k=u(M);A.mid=k.mid,A.left=k.left,A.right=k.right,A.leftPoints=k.leftPoints,A.rightPoints=k.rightPoints,A.count=k.count}function y(A,M){var k=A.intervals([]);k.push(M),r(A,k)}function h(A,M){var k=A.intervals([]),E=k.indexOf(M);return E<0?0:(k.splice(E,1),r(A,k),1)}function s(A,M,k){for(var E=0;E<A.length&&A[E][0]<=M;++E){var P=k(A[E]);if(P)return P}}function d(A,M,k){for(var E=A.length-1;E>=0&&A[E][1]>=M;--E){var P=k(A[E]);if(P)return P}}function p(A,M){for(var k=0;k<A.length;++k){var E=M(A[k]);if(E)return E}}function c(A,M){return A-M}function g(A,M){return A[0]-M[0]||A[1]-M[1]}function m(A,M){return A[1]-M[1]||A[0]-M[0]}function u(A){if(0===A.length)return null;for(var M=[],k=0;k<A.length;++k)M.push(A[k][0],A[k][1]);M.sort(c);var E=M[M.length>>1],P=[],D=[],F=[];for(k=0;k<A.length;++k){var R=A[k];R[1]<E?P.push(R):E<R[0]?D.push(R):F.push(R)}var L=F,I=F.slice();return L.sort(g),I.sort(m),new o(E,u(P),u(D),L,I)}function w(A){this.root=A}i.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},i.insert=function(A){var M=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?y(this,A):this.left.insert(A):this.left=u([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?y(this,A):this.right.insert(A):this.right=u([A]);else{var k=e.ge(this.leftPoints,A,g),E=e.ge(this.rightPoints,A,m);this.leftPoints.splice(k,0,A),this.rightPoints.splice(E,0,A)}},i.remove=function(A){var M=this.count-this.leftPoints;if(A[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(M-1)?h(this,A):2===(D=this.left.remove(A))?(this.left=null,this.count-=1,1):(1===D&&(this.count-=1),D):0;if(A[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(M-1)?h(this,A):2===(D=this.right.remove(A))?(this.right=null,this.count-=1,1):(1===D&&(this.count-=1),D):0;if(1===this.count)return this.leftPoints[0]===A?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===A){if(this.left&&this.right){for(var k=this,E=this.left;E.right;)k=E,E=E.right;if(k===this)E.right=this.right;else{var P=this.left,D=this.right;k.count-=E.count,k.right=E.left,E.left=P,E.right=D}l(this,E),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else l(this,this.left?this.left:this.right);return 1}for(P=e.ge(this.leftPoints,A,g);P<this.leftPoints.length&&this.leftPoints[P][0]===A[0];++P)if(this.leftPoints[P]===A)for(this.count-=1,this.leftPoints.splice(P,1),D=e.ge(this.rightPoints,A,m);D<this.rightPoints.length&&this.rightPoints[D][1]===A[1];++D)if(this.rightPoints[D]===A)return this.rightPoints.splice(D,1),1;return 0},i.queryPoint=function(A,M){return A<this.mid?this.left&&(k=this.left.queryPoint(A,M))?k:s(this.leftPoints,A,M):A>this.mid?this.right&&(k=this.right.queryPoint(A,M))?k:d(this.rightPoints,A,M):p(this.leftPoints,M);var k},i.queryInterval=function(A,M,k){var E;return A<this.mid&&this.left&&(E=this.left.queryInterval(A,M,k))||M>this.mid&&this.right&&(E=this.right.queryInterval(A,M,k))?E:M<this.mid?s(this.leftPoints,M,k):A>this.mid?d(this.rightPoints,A,k):p(this.leftPoints,k)};var f=w.prototype;f.insert=function(A){this.root?this.root.insert(A):this.root=new o(A[0],null,null,[A],[A])},f.remove=function(A){if(this.root){var M=this.root.remove(A);return 2===M&&(this.root=null),0!==M}return!1},f.queryPoint=function(A,M){if(this.root)return this.root.queryPoint(A,M)},f.queryInterval=function(A,M,k){if(A<=M&&this.root)return this.root.queryInterval(A,M,k)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(x,T,b){"use strict";T.exports=function(e){for(var o=new Array(e),i=0;i<e;++i)o[i]=i;return o}},{}],236:[function(x,T,b){T.exports=!0},{}],237:[function(x,T,b){function e(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)}T.exports=function(o){return null!=o&&(e(o)||"function"==typeof(i=o).readFloatLE&&"function"==typeof i.slice&&e(i.slice(0,0))||!!o._isBuffer);var i}},{}],238:[function(x,T,b){"use strict";T.exports=i,T.exports.isMobile=i,T.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(l){l||(l={});var r=l.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var y=l.tablet?o.test(r):e.test(r);return!y&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(y=!0),y}},{}],239:[function(x,T,b){"use strict";T.exports=function(e){for(var o,i=e.length,l=0;l<i;l++)if(((o=e.charCodeAt(l))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},{}],240:[function(x,T,b){T.exports=function(e,o,i){return e*(1-i)+o*i}},{}],241:[function(x,T,b){var e=x("./normalize"),o=x("gl-mat4/create"),i=x("gl-mat4/clone"),l=x("gl-mat4/determinant"),r=x("gl-mat4/invert"),y=x("gl-mat4/transpose"),h={length:x("gl-vec3/length"),normalize:x("gl-vec3/normalize"),dot:x("gl-vec3/dot"),cross:x("gl-vec3/cross")},s=o(),d=o(),p=[0,0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function m(u,w,f,A,M){u[0]=w[0]*A+f[0]*M,u[1]=w[1]*A+f[1]*M,u[2]=w[2]*A+f[2]*M}T.exports=function(u,w,f,A,M,k){if(w||(w=[0,0,0]),f||(f=[0,0,0]),A||(A=[0,0,0]),M||(M=[0,0,0,1]),k||(k=[0,0,0,1]),!e(s,u)||(i(d,s),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(l(d)<1e-8)))return!1;var E,P,D,F,R,L,I,ie,j,B=s[3],V=s[7],Z=s[11],Y=s[12],Q=s[13],re=s[14],$=s[15];if(0!==B||0!==V||0!==Z){if(p[0]=B,p[1]=V,p[2]=Z,p[3]=$,!r(d,d))return!1;y(d,d),F=(P=p)[0],(E=M)[0]=(D=d)[0]*F+D[4]*(R=P[1])+D[8]*(L=P[2])+D[12]*(I=P[3]),E[1]=D[1]*F+D[5]*R+D[9]*L+D[13]*I,E[2]=D[2]*F+D[6]*R+D[10]*L+D[14]*I,E[3]=D[3]*F+D[7]*R+D[11]*L+D[15]*I}else M[0]=M[1]=M[2]=0,M[3]=1;if(w[0]=Y,w[1]=Q,w[2]=re,(ie=c)[0][0]=(j=s)[0],ie[0][1]=j[1],ie[0][2]=j[2],ie[1][0]=j[4],ie[1][1]=j[5],ie[1][2]=j[6],ie[2][0]=j[8],ie[2][1]=j[9],ie[2][2]=j[10],f[0]=h.length(c[0]),h.normalize(c[0],c[0]),A[0]=h.dot(c[0],c[1]),m(c[1],c[1],c[0],1,-A[0]),f[1]=h.length(c[1]),h.normalize(c[1],c[1]),A[0]/=f[1],A[1]=h.dot(c[0],c[2]),m(c[2],c[2],c[0],1,-A[1]),A[2]=h.dot(c[1],c[2]),m(c[2],c[2],c[1],1,-A[2]),f[2]=h.length(c[2]),h.normalize(c[2],c[2]),A[1]/=f[2],A[2]/=f[2],h.cross(g,c[1],c[2]),h.dot(c[0],g)<0)for(var J=0;J<3;J++)f[J]*=-1,c[J][0]*=-1,c[J][1]*=-1,c[J][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+c[0][0]-c[1][1]-c[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-c[0][0]+c[1][1]-c[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-c[0][0]-c[1][1]+c[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+c[0][0]+c[1][1]+c[2][2],0)),c[2][1]>c[1][2]&&(k[0]=-k[0]),c[0][2]>c[2][0]&&(k[1]=-k[1]),c[1][0]>c[0][1]&&(k[2]=-k[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(x,T,b){T.exports=function(e,o){var i=o[15];if(0===i)return!1;for(var l=1/i,r=0;r<16;r++)e[r]=o[r]*l;return!0}},{}],243:[function(x,T,b){var e=x("gl-vec3/lerp"),o=x("mat4-recompose"),i=x("mat4-decompose"),l=x("gl-mat4/determinant"),r=x("quat-slerp"),y=d(),h=d(),s=d();function d(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(c){return[c||0,c||0,c||0]}T.exports=function(c,g,m,u){if(0===l(g)||0===l(m))return!1;var w=i(g,y.translate,y.scale,y.skew,y.perspective,y.quaternion),f=i(m,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!f||(e(s.translate,y.translate,h.translate,u),e(s.skew,y.skew,h.skew,u),e(s.scale,y.scale,h.scale,u),e(s.perspective,y.perspective,h.perspective,u),r(s.quaternion,y.quaternion,h.quaternion,u),o(c,s.translate,s.scale,s.skew,s.perspective,s.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(x,T,b){var e={identity:x("gl-mat4/identity"),translate:x("gl-mat4/translate"),multiply:x("gl-mat4/multiply"),create:x("gl-mat4/create"),scale:x("gl-mat4/scale"),fromRotationTranslation:x("gl-mat4/fromRotationTranslation")},o=(e.create(),e.create());T.exports=function(i,l,r,y,h,s){return e.identity(i),e.fromRotationTranslation(i,s,l),i[3]=h[0],i[7]=h[1],i[11]=h[2],i[15]=h[3],e.identity(o),0!==y[2]&&(o[9]=y[2],e.multiply(i,i,o)),0!==y[1]&&(o[9]=0,o[8]=y[1],e.multiply(i,i,o)),0!==y[0]&&(o[8]=0,o[4]=y[0],e.multiply(i,i,o)),e.scale(i,i,r),i}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(x,T,b){"use strict";var e=x("binary-search-bounds"),o=x("mat4-interpolate"),i=x("gl-mat4/invert"),l=x("gl-mat4/rotateX"),r=x("gl-mat4/rotateY"),y=x("gl-mat4/rotateZ"),h=x("gl-mat4/lookAt"),s=x("gl-mat4/translate"),d=(x("gl-mat4/scale"),x("gl-vec3/normalize")),p=[0,0,0];function c(u){this._components=u.slice(),this._time=[0],this.prevMatrix=u.slice(),this.nextMatrix=u.slice(),this.computedMatrix=u.slice(),this.computedInverse=u.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}T.exports=function(u){return new c((u=u||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=c.prototype;g.recalcMatrix=function(u){var w=this._time,f=e.le(w,u),A=this.computedMatrix;if(!(f<0)){var M=this._components;if(f===w.length-1)for(var k=16*f,E=0;E<16;++E)A[E]=M[k++];else{var P=w[f+1]-w[f],D=(k=16*f,this.prevMatrix),F=!0;for(E=0;E<16;++E)D[E]=M[k++];var R=this.nextMatrix;for(E=0;E<16;++E)R[E]=M[k++],F=F&&D[E]===R[E];if(P<1e-6||F)for(E=0;E<16;++E)A[E]=D[E];else o(A,D,R,(u-w[f])/P)}var L=this.computedUp;L[0]=A[1],L[1]=A[5],L[2]=A[9],d(L,L);var I=this.computedInverse;i(I,A);var B=this.computedEye,V=I[15];B[0]=I[12]/V,B[1]=I[13]/V,B[2]=I[14]/V;var Z=this.computedCenter,Y=Math.exp(this.computedRadius[0]);for(E=0;E<3;++E)Z[E]=B[E]-A[2+4*E]*Y}},g.idle=function(u){if(!(u<this.lastT())){for(var w=this._components,f=w.length-16,A=0;A<16;++A)w.push(w[f++]);this._time.push(u)}},g.flush=function(u){var w=e.gt(this._time,u)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(u,w,f,A){this.recalcMatrix(u),this.setMatrix(u,h(this.computedMatrix,w=w||this.computedEye,f=f||p,A=A||this.computedUp));for(var M=0,k=0;k<3;++k)M+=Math.pow(f[k]-w[k],2);M=Math.log(Math.sqrt(M)),this.computedRadius[0]=M},g.rotate=function(u,w,f,A){this.recalcMatrix(u);var M=this.computedInverse;w&&r(M,M,w),f&&l(M,M,f),A&&y(M,M,A),this.setMatrix(u,i(this.computedMatrix,M))};var m=[0,0,0];g.pan=function(u,w,f,A){m[0]=-(w||0),m[1]=-(f||0),m[2]=-(A||0),this.recalcMatrix(u);var M=this.computedInverse;s(M,M,m),this.setMatrix(u,i(M,M))},g.translate=function(u,w,f,A){m[0]=w||0,m[1]=f||0,m[2]=A||0,this.recalcMatrix(u);var M=this.computedMatrix;s(M,M,m),this.setMatrix(u,M)},g.setMatrix=function(u,w){if(!(u<this.lastT())){this._time.push(u);for(var f=0;f<16;++f)this._components.push(w[f])}},g.setDistance=function(u,w){this.computedRadius[0]=w},g.setDistanceLimits=function(u,w){var f=this._limits;f[0]=u,f[1]=w},g.getDistanceLimits=function(u){var w=this._limits;return u?(u[0]=w[0],u[1]=w[1],u):w}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(x,T,b){"use strict";T.exports=function(o){var i=o.length;if(i<3){for(var l=new Array(i),r=0;r<i;++r)l[r]=r;return 2===i&&o[0][0]===o[1][0]&&o[0][1]===o[1][1]?[0]:l}var y=new Array(i);for(r=0;r<i;++r)y[r]=r;y.sort(function(w,f){return o[w][0]-o[f][0]||o[w][1]-o[f][1]});var h=[y[0],y[1]],s=[y[0],y[1]];for(r=2;r<i;++r){for(var d=y[r],p=o[d],c=h.length;c>1&&e(o[h[c-2]],o[h[c-1]],p)<=0;)c-=1,h.pop();for(h.push(d),c=s.length;c>1&&e(o[s[c-2]],o[s[c-1]],p)>=0;)c-=1,s.pop();s.push(d)}l=new Array(s.length+h.length-2);for(var g=0,m=(r=0,h.length);r<m;++r)l[g++]=h[r];for(var u=s.length-2;u>0;--u)l[g++]=s[u];return l};var e=x("robust-orientation")[3]},{"robust-orientation":284}],247:[function(x,T,b){"use strict";T.exports=function(o,i){i||(i=o,o=window);var l=0,r=0,y=0,h={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function d(k){var E=!1;return"altKey"in k&&(E=E||k.altKey!==h.alt,h.alt=!!k.altKey),"shiftKey"in k&&(E=E||k.shiftKey!==h.shift,h.shift=!!k.shiftKey),"ctrlKey"in k&&(E=E||k.ctrlKey!==h.control,h.control=!!k.ctrlKey),"metaKey"in k&&(E=E||k.metaKey!==h.meta,h.meta=!!k.metaKey),E}function p(k,E){var P=e.x(E),D=e.y(E);"buttons"in E&&(k=0|E.buttons),(k!==l||P!==r||D!==y||d(E))&&(l=0|k,r=P||0,y=D||0,i&&i(l,r,y,h))}function c(k){p(0,k)}function g(){(l||r||y||h.shift||h.alt||h.meta||h.control)&&(r=y=0,l=0,h.shift=h.alt=h.control=h.meta=!1,i&&i(0,0,0,h))}function m(k){d(k)&&i&&i(l,r,y,h)}function u(k){0===e.buttons(k)?p(0,k):p(l,k)}function w(k){p(l|e.buttons(k),k)}function f(k){p(l&~e.buttons(k),k)}function A(){s||(s=!0,o.addEventListener("mousemove",u),o.addEventListener("mousedown",w),o.addEventListener("mouseup",f),o.addEventListener("mouseleave",c),o.addEventListener("mouseenter",c),o.addEventListener("mouseout",c),o.addEventListener("mouseover",c),o.addEventListener("blur",g),o.addEventListener("keyup",m),o.addEventListener("keydown",m),o.addEventListener("keypress",m),o!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}A();var M={element:o};return Object.defineProperties(M,{enabled:{get:function(){return s},set:function(k){k?A():!s||(s=!1,o.removeEventListener("mousemove",u),o.removeEventListener("mousedown",w),o.removeEventListener("mouseup",f),o.removeEventListener("mouseleave",c),o.removeEventListener("mouseenter",c),o.removeEventListener("mouseout",c),o.removeEventListener("mouseover",c),o.removeEventListener("blur",g),o.removeEventListener("keyup",m),o.removeEventListener("keydown",m),o.removeEventListener("keypress",m),o!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return y},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),M};var e=x("mouse-event")},{"mouse-event":249}],248:[function(x,T,b){var e={left:0,top:0};T.exports=function(o,i,l){i=i||o.currentTarget||o.srcElement,Array.isArray(l)||(l=[0,0]);var s,r=o.clientX||0,y=o.clientY||0,h=(s=i)===window||s===document||s===document.body?e:s.getBoundingClientRect();return l[0]=r-h.left,l[1]=y-h.top,l}},{}],249:[function(x,T,b){"use strict";function e(o){return o.target||o.srcElement||window}b.buttons=function(o){if("object"==typeof o){if("buttons"in o)return o.buttons;if("which"in o){if(2===(i=o.which))return 4;if(3===i)return 2;if(i>0)return 1<<i-1}else if("button"in o){var i;if(1===(i=o.button))return 4;if(2===i)return 2;if(i>=0)return 1<<i}}return 0},b.element=e,b.x=function(o){if("object"==typeof o){if("offsetX"in o)return o.offsetX;var i=e(o).getBoundingClientRect();return o.clientX-i.left}return 0},b.y=function(o){if("object"==typeof o){if("offsetY"in o)return o.offsetY;var i=e(o).getBoundingClientRect();return o.clientY-i.top}return 0}},{}],250:[function(x,T,b){"use strict";var e=x("to-px");T.exports=function(o,i,l){"function"==typeof o&&(l=!!i,i=o,o=window);var r=e("ex",o),y=function(h){l&&h.preventDefault();var s=h.deltaX||0,d=h.deltaY||0,p=h.deltaZ||0,c=1;switch(h.deltaMode){case 1:c=r;break;case 2:c=window.innerHeight}if(d*=c,p*=c,(s*=c)||d||p)return i(s,d,p,h)};return o.addEventListener("wheel",y),y}},{"to-px":304}],251:[function(x,T,b){"use strict";var e=x("typedarray-pool");T.exports=function(i){function l(c){throw new Error("ndarray-extract-contour: "+c)}"object"!=typeof i&&l("Must specify arguments");var r=i.order;Array.isArray(r)||l("Must specify order");var c,g,m,A,y=i.arrayArguments||1;y<1&&l("Must have at least one array argument"),(i.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),"function"!=typeof i.vertex&&l("Must specify vertex creation function"),"function"!=typeof i.cell&&l("Must specify cell creation function"),"function"!=typeof i.phase&&l("Must specify phase function");for(var s=i.getters||[],d=new Array(y),p=0;p<y;++p)d[p]=s.indexOf(p)>=0;return c=i.vertex,g=i.cell,m=i.phase,A=[d,r].join(","),(0,o[A])(c,g,m,e.mallocUint32,e.freeUint32)};var o={"false,0,1":function(i,l,r,y,h){return function(s,d,p,c){var g,m=0|s.shape[0],u=0|s.shape[1],w=s.data,A=0|s.stride[0],M=0|s.stride[1],k=0|s.offset,E=0|-A,P=0,D=0|-M,F=0,R=-A-M|0,L=0,I=0|A,B=M-A*m|0,V=0,Z=0,Y=0,Q=2*m|0,re=y(Q),$=y(Q),J=0,ie=0,j=-1,q=-1,W=0,ae=0|-m,G=0|m,ee=0,te=-m-1|0,le=m-1|0,ue=0,de=0,he=0;for(V=0;V<m;++V)re[J++]=r(w[k],d,p,c),k+=I;if(k+=B,u>0){if(Z=1,re[J++]=r(w[k],d,p,c),k+=I,m>0)for(V=1,ie=re[J]=r(g=w[k],d,p,c),ee=re[J+ae],ue=re[J+te],ie===(W=re[J+j])&&ie===ee&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,W,ee,ue,d,p,c),de=$[J]=Y++),J+=1,k+=I,V=2;V<m;++V)ie=re[J]=r(g=w[k],d,p,c),ee=re[J+ae],ue=re[J+te],ie===(W=re[J+j])&&ie===ee&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,W,ee,ue,d,p,c),de=$[J]=Y++,ue!==W&&l($[J+j],de,L,P,ue,W,d,p,c)),J+=1,k+=I;for(k+=B,J=0,he=j,j=q,q=he,he=ae,ae=G,G=he,he=te,te=le,le=he,Z=2;Z<u;++Z){if(re[J++]=r(w[k],d,p,c),k+=I,m>0)for(V=1,ie=re[J]=r(g=w[k],d,p,c),ee=re[J+ae],ue=re[J+te],ie===(W=re[J+j])&&ie===ee&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,W,ee,ue,d,p,c),de=$[J]=Y++,ue!==ee&&l($[J+ae],de,F,L,ee,ue,d,p,c)),J+=1,k+=I,V=2;V<m;++V)ie=re[J]=r(g=w[k],d,p,c),ee=re[J+ae],ue=re[J+te],ie===(W=re[J+j])&&ie===ee&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,W,ee,ue,d,p,c),de=$[J]=Y++,ue!==ee&&l($[J+ae],de,F,L,ee,ue,d,p,c),ue!==W&&l($[J+j],de,L,P,ue,W,d,p,c)),J+=1,k+=I;1&Z&&(J=0),he=j,j=q,q=he,he=ae,ae=G,G=he,he=te,te=le,le=he,k+=B}}h($),h(re)}},"false,1,0":function(i,l,r,y,h){return function(s,d,p,c){var g,m=0|s.shape[0],u=0|s.shape[1],w=s.data,A=0|s.stride[0],M=0|s.stride[1],k=0|s.offset,E=0|-A,P=0,D=0|-M,F=0,R=-A-M|0,L=0,I=0|M,B=A-M*u|0,V=0,Z=0,Y=0,Q=2*u|0,re=y(Q),$=y(Q),J=0,ie=0,j=-1,q=-1,W=0,ae=0|-u,G=0|u,ee=0,te=-u-1|0,le=u-1|0,ue=0,de=0,he=0;for(Z=0;Z<u;++Z)re[J++]=r(w[k],d,p,c),k+=I;if(k+=B,m>0){if(V=1,re[J++]=r(w[k],d,p,c),k+=I,u>0)for(Z=1,ie=re[J]=r(g=w[k],d,p,c),W=re[J+j],ue=re[J+te],ie===(ee=re[J+ae])&&ie===W&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,ee,W,ue,d,p,c),de=$[J]=Y++),J+=1,k+=I,Z=2;Z<u;++Z)ie=re[J]=r(g=w[k],d,p,c),W=re[J+j],ue=re[J+te],ie===(ee=re[J+ae])&&ie===W&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,ee,W,ue,d,p,c),de=$[J]=Y++,ue!==W&&l($[J+j],de,F,L,W,ue,d,p,c)),J+=1,k+=I;for(k+=B,J=0,he=ae,ae=G,G=he,he=j,j=q,q=he,he=te,te=le,le=he,V=2;V<m;++V){if(re[J++]=r(w[k],d,p,c),k+=I,u>0)for(Z=1,ie=re[J]=r(g=w[k],d,p,c),W=re[J+j],ue=re[J+te],ie===(ee=re[J+ae])&&ie===W&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,ee,W,ue,d,p,c),de=$[J]=Y++,ue!==ee&&l($[J+ae],de,L,P,ue,ee,d,p,c)),J+=1,k+=I,Z=2;Z<u;++Z)ie=re[J]=r(g=w[k],d,p,c),W=re[J+j],ue=re[J+te],ie===(ee=re[J+ae])&&ie===W&&ie===ue||(i(V,Z,g,P=w[k+E],F=w[k+D],L=w[k+R],ie,ee,W,ue,d,p,c),de=$[J]=Y++,ue!==W&&l($[J+j],de,F,L,W,ue,d,p,c),ue!==ee&&l($[J+ae],de,L,P,ue,ee,d,p,c)),J+=1,k+=I;1&V&&(J=0),he=ae,ae=G,G=he,he=j,j=q,q=he,he=te,te=le,le=he,k+=B}}h($),h(re)}}}},{"typedarray-pool":308}],252:[function(x,T,b){"use strict";var e=x("dup"),o={zero:function(m,u,w,f){var A=m[0];f|=0;var M=0,k=w[0];for(M=0;M<A;++M)u[f]=0,f+=k},fdTemplate1:function(m,u,w,f,A,M,k){var E=m[0],P=w[0],D=-1*P,F=P;f|=0,k|=0;var R=0,L=P,I=M[0];for(R=0;R<E;++R)A[k]=.5*(u[f+D]-u[f+F]),f+=L,k+=I},fdTemplate2:function(m,u,w,f,A,M,k,E,P,D){var F=m[0],R=m[1],L=w[0],I=w[1],V=M[1],Y=P[1],Q=-1*L,re=L,$=-1*I,J=I;f|=0,k|=0,D|=0;var ie=0,j=0,q=I,W=L-R*I,ae=V,G=M[0]-R*V,ee=Y,te=P[0]-R*Y;for(j=0;j<F;++j){for(ie=0;ie<R;++ie)A[k]=.5*(u[f+Q]-u[f+re]),E[D]=.5*(u[f+$]-u[f+J]),f+=q,k+=ae,D+=ee;f+=W,k+=G,D+=te}}},i={cdiff:function(m){var u={};return function(w,f,A){var M=w.dtype,k=w.order,E=f.dtype,P=f.order,D=A.dtype,F=A.order,R=[M,k.join(),E,P.join(),D,F.join()].join(),L=u[R];return L||(u[R]=L=m([M,k,E,P,D,F])),L(w.shape.slice(0),w.data,w.stride,0|w.offset,f.data,f.stride,0|f.offset,A.data,A.stride,0|A.offset)}},zero:function(m){var u={};return function(w){var f=w.dtype,A=w.order,M=[f,A.join()].join(),k=u[M];return k||(u[M]=k=m([f,A])),k(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(m){var u={};return function(w,f){var A=w.dtype,M=w.order,k=f.dtype,E=f.order,P=[A,M.join(),k,E.join()].join(),D=u[P];return D||(u[P]=D=m([A,M,k,E])),D(w.shape.slice(0),w.data,w.stride,0|w.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(m){var u={};return function(w,f,A){var M=w.dtype,k=w.order,E=f.dtype,P=f.order,D=A.dtype,F=A.order,R=[M,k.join(),E,P.join(),D,F.join()].join(),L=u[R];return L||(u[R]=L=m([M,k,E,P,D,F])),L(w.shape.slice(0),w.data,w.stride,0|w.offset,f.data,f.stride,0|f.offset,A.data,A.stride,0|A.offset)}}};function l(m){return(0,i[m.funcName])(r.bind(void 0,m))}function r(m){return o[m.funcName]}function y(m){return l({funcName:m.funcName})}var h={},s={},d=y({funcName:"cdiff"}),p=y({funcName:"zero"});function c(m){return m in h?h[m]:h[m]=y({funcName:"fdTemplate"+m})}function g(m,u,w,f){return function(A,M){var k=M.shape.slice();return k[0]>2&&k[1]>2&&f(M.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),A.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),A.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(w(M.pick(0,-1).lo(1).hi(k[1]-2),A.pick(0,-1,1).lo(1).hi(k[1]-2)),u(A.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(w(M.pick(k[0]-1,-1).lo(1).hi(k[1]-2),A.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),u(A.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(w(M.pick(-1,0).lo(1).hi(k[0]-2),A.pick(-1,0,0).lo(1).hi(k[0]-2)),u(A.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(w(M.pick(-1,k[1]-1).lo(1).hi(k[0]-2),A.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),u(A.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),A.set(0,0,0,0),A.set(0,0,1,0),A.set(k[0]-1,0,0,0),A.set(k[0]-1,0,1,0),A.set(0,k[1]-1,0,0),A.set(0,k[1]-1,1,0),A.set(k[0]-1,k[1]-1,0,0),A.set(k[0]-1,k[1]-1,1,0),A}}T.exports=function(m,u,w){return Array.isArray(w)||(w=e(u.dimension,"string"==typeof w?w:"clamp")),0===u.size?m:0===u.dimension?(m.set(0),m):function(f){var A=f.join();if(P=s[A])return P;for(var M=f.length,k=[d,p],E=1;E<=M;++E)k.push(c(E));var P=g.apply(void 0,k);return s[A]=P,P}(w)(m,u)}},{dup:65}],253:[function(x,T,b){"use strict";function e(r,y){var h=Math.floor(y),s=y-h,p=0<=h+1&&h+1<r.shape[0];return(1-s)*(0<=h&&h<r.shape[0]?+r.get(h):0)+s*(p?+r.get(h+1):0)}function o(r,y,h){var s=Math.floor(y),d=y-s,p=0<=s&&s<r.shape[0],c=0<=s+1&&s+1<r.shape[0],g=Math.floor(h),m=h-g,u=0<=g&&g<r.shape[1],w=0<=g+1&&g+1<r.shape[1],f=p&&u?r.get(s,g):0,A=p&&w?r.get(s,g+1):0;return(1-m)*((1-d)*f+d*(c&&u?r.get(s+1,g):0))+m*((1-d)*A+d*(c&&w?r.get(s+1,g+1):0))}function i(r,y,h,s){var d=Math.floor(y),p=y-d,c=0<=d&&d<r.shape[0],g=0<=d+1&&d+1<r.shape[0],m=Math.floor(h),u=h-m,w=0<=m&&m<r.shape[1],f=0<=m+1&&m+1<r.shape[1],A=Math.floor(s),M=s-A,k=0<=A&&A<r.shape[2],E=0<=A+1&&A+1<r.shape[2],P=c&&w&&k?r.get(d,m,A):0,D=c&&f&&k?r.get(d,m+1,A):0,F=g&&w&&k?r.get(d+1,m,A):0,R=g&&f&&k?r.get(d+1,m+1,A):0,L=c&&w&&E?r.get(d,m,A+1):0,I=c&&f&&E?r.get(d,m+1,A+1):0;return(1-M)*((1-u)*((1-p)*P+p*F)+u*((1-p)*D+p*R))+M*((1-u)*((1-p)*L+p*(g&&w&&E?r.get(d+1,m,A+1):0))+u*((1-p)*I+p*(g&&f&&E?r.get(d+1,m+1,A+1):0)))}function l(r){var y,h,s=0|r.shape.length,d=new Array(s),p=new Array(s),c=new Array(s),g=new Array(s);for(y=0;y<s;++y)h=+arguments[y+1],d[y]=Math.floor(h),p[y]=h-d[y],c[y]=0<=d[y]&&d[y]<r.shape[y],g[y]=0<=d[y]+1&&d[y]+1<r.shape[y];var m,u,w,f=0;e:for(y=0;y<1<<s;++y){for(u=1,w=r.offset,m=0;m<s;++m)if(y&1<<m){if(!g[m])continue e;u*=p[m],w+=r.stride[m]*(d[m]+1)}else{if(!c[m])continue e;u*=1-p[m],w+=r.stride[m]*d[m]}f+=u*r.data[w]}return f}T.exports=function(r,y,h,s){switch(r.shape.length){case 0:return 0;case 1:return e(r,y);case 2:return o(r,y,h);case 3:return i(r,y,h,s);default:return l.apply(void 0,arguments)}},T.exports.d1=e,T.exports.d2=o,T.exports.d3=i},{}],254:[function(x,T,b){"use strict";var e={"float64,2,1,0":function(){return function(y,h,s,d,p){var c=y[0],g=y[1],m=y[2],w=s[1],f=s[2];d|=0;var A=0,M=0,k=0,E=f,P=w-m*f,D=s[0]-g*w;for(k=0;k<c;++k){for(M=0;M<g;++M){for(A=0;A<m;++A)h[d]/=p,d+=E;d+=P}d+=D}}},"uint8,2,0,1,float64,2,1,0":function(){return function(y,h,s,d,p,c,g,m){for(var u=y[0],w=y[1],f=y[2],A=s[0],M=s[1],k=s[2],E=c[0],P=c[1],D=c[2],F=d|=0,R=g|=0,L=0|y[0];L>0;){L<64?(u=L,L=0):(u=64,L-=64);for(var I=0|y[1];I>0;){I<64?(w=I,I=0):(w=64,I-=64),d=F+L*A+I*M,g=R+L*E+I*P;var B=0,V=0,Z=0,Y=k,Q=A-f*k,re=M-u*A,$=D,J=E-f*D,ie=P-u*E;for(Z=0;Z<w;++Z){for(V=0;V<u;++V){for(B=0;B<f;++B)h[d]=p[g]*m,d+=Y,g+=$;d+=Q,g+=J}d+=re,g+=ie}}}}},"float32,1,0,float32,1,0":function(){return function(y,h,s,d,p,c,g){var m=y[0],u=y[1],f=s[1],M=c[1];d|=0,g|=0;var k=0,E=0,P=f,D=s[0]-u*f,F=M,R=c[0]-u*M;for(E=0;E<m;++E){for(k=0;k<u;++k)h[d]=p[g],d+=P,g+=F;d+=D,g+=R}}},"float32,1,0,float32,0,1":function(){return function(y,h,s,d,p,c,g){for(var m=y[0],u=y[1],w=s[0],f=s[1],A=c[0],M=c[1],k=d|=0,E=g|=0,P=0|y[1];P>0;){P<64?(u=P,P=0):(u=64,P-=64);for(var D=0|y[0];D>0;){D<64?(m=D,D=0):(m=64,D-=64),d=k+P*f+D*w,g=E+P*M+D*A;var F=0,R=0,L=f,I=w-u*f,B=M,V=A-u*M;for(R=0;R<m;++R){for(F=0;F<u;++F)h[d]=p[g],d+=L,g+=B;d+=I,g+=V}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(y,h,s,d,p,c,g){for(var m=y[0],u=y[1],w=y[2],f=s[0],A=s[1],M=s[2],k=c[0],E=c[1],P=c[2],D=d|=0,F=g|=0,R=0|y[2];R>0;){R<64?(w=R,R=0):(w=64,R-=64);for(var L=0|y[0];L>0;){L<64?(m=L,L=0):(m=64,L-=64);for(var I=0|y[1];I>0;){I<64?(u=I,I=0):(u=64,I-=64),d=D+R*M+L*f+I*A,g=F+R*P+L*k+I*E;var B=0,V=0,Z=0,Y=M,Q=f-w*M,re=A-m*f,$=P,J=k-w*P,ie=E-m*k;for(Z=0;Z<u;++Z){for(V=0;V<m;++V){for(B=0;B<w;++B)h[d]=p[g],d+=Y,g+=$;d+=Q,g+=J}d+=re,g+=ie}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(y,h,s,d,p,c,g){var m=y[0],u=y[1],w=y[2],f=s[0],M=s[2],k=c[0],P=c[2];d|=0,g|=0;var D=0,F=0,R=0,L=M,I=f-w*M,B=s[1]-m*f,V=P,Z=k-w*P,Y=c[1]-m*k;for(R=0;R<u;++R){for(F=0;F<m;++F){for(D=0;D<w;++D)h[d]=p[g],d+=L,g+=V;d+=I,g+=Z}d+=B,g+=Y}}}},o=function(y,h){var s=h.join(",");return(0,e[s])()},i={mul:function(y){var h={};return function(s,d,p){var c=s.dtype,g=s.order,m=d.dtype,u=d.order,w=p.dtype,f=p.order,A=[c,g.join(),m,u.join(),w,f.join()].join(),M=h[A];return M||(h[A]=M=y([c,g,m,u,w,f])),M(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p.data,p.stride,0|p.offset)}},muls:function(y){var h={};return function(s,d,p){var c=s.dtype,g=s.order,m=d.dtype,u=d.order,w=[c,g.join(),m,u.join()].join(),f=h[w];return f||(h[w]=f=y([c,g,m,u])),f(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p)}},mulseq:function(y){var h={};return function(s,d){var p=s.dtype,c=s.order,g=[p,c.join()].join(),m=h[g];return m||(h[g]=m=y([p,c])),m(s.shape.slice(0),s.data,s.stride,0|s.offset,d)}},div:function(y){var h={};return function(s,d,p){var c=s.dtype,g=s.order,m=d.dtype,u=d.order,w=p.dtype,f=p.order,A=[c,g.join(),m,u.join(),w,f.join()].join(),M=h[A];return M||(h[A]=M=y([c,g,m,u,w,f])),M(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p.data,p.stride,0|p.offset)}},divs:function(y){var h={};return function(s,d,p){var c=s.dtype,g=s.order,m=d.dtype,u=d.order,w=[c,g.join(),m,u.join()].join(),f=h[w];return f||(h[w]=f=y([c,g,m,u])),f(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p)}},divseq:function(y){var h={};return function(s,d){var p=s.dtype,c=s.order,g=[p,c.join()].join(),m=h[g];return m||(h[g]=m=y([p,c])),m(s.shape.slice(0),s.data,s.stride,0|s.offset,d)}},assign:function(y){var h={};return function(s,d){var p=s.dtype,c=s.order,g=d.dtype,m=d.order,u=[p,c.join(),g,m.join()].join(),w=h[u];return w||(h[u]=w=y([p,c,g,m])),w(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset)}}};function l(y){return(0,i[(h={funcName:y.funcName}).funcName])(o.bind(void 0,h));var h}var r={mul:"*",div:"/"};(function(){for(var y in r)b[y]=l({funcName:y}),b[y+"s"]=l({funcName:y+"s"}),b[y+"seq"]=l({funcName:y+"seq"})})(),b.assign=l({funcName:"assign"})},{}],255:[function(x,T,b){"use strict";var e=x("ndarray"),o=x("./doConvert.js");T.exports=function(i,l){for(var r=[],y=i,h=1;Array.isArray(y);)r.push(y.length),h*=y.length,y=y[0];return 0===r.length?e():(l||(l=e(new Float64Array(h),r)),o(l,i),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(x,T,b){"use strict";var i,l;T.exports=(i=function(){return function(i,l,r,y,h){var s=i[0],d=i[1],p=i[2],g=r[1],m=r[2],u=[0,0,0];y|=0;var w=0,f=0,A=0,M=m,k=g-p*m,E=r[0]-d*g;for(A=0;A<s;++A){for(f=0;f<d;++f){for(w=0;w<p;++w){var P,D=h;for(P=0;P<u.length-1;++P)D=D[u[P]];l[y]=D[u[u.length-1]],y+=M,++u[2]}y+=k,u[2]-=p,++u[1]}y+=E,u[1]-=d,++u[0]}}}.bind(void 0,{funcName:"convert"}),l={},function(r,y){var h=r.dtype,s=r.order,d=[h,s.join()].join(),p=l[d];return p||(l[d]=p=i([h,s])),p(r.shape.slice(0),r.data,r.stride,0|r.offset,y)})},{}],257:[function(x,T,b){"use strict";var e=x("typedarray-pool");function o(y){return"uint32"===y?[e.mallocUint32,e.freeUint32]:null}var i={"uint32,1,0":function(y,h){return function(s,d,p,c,g,m,u,w,f,A,M){var k,E,P,D,F,R,L,I,B=s*g+c,V=y(w);for(k=s+1;k<=d;++k){for(E=k,P=B+=g,F=0,R=B,D=0;D<w;++D)V[F++]=p[R],R+=f;e:for(;E-- >s;){F=0,R=P-g;t:for(D=0;D<w;++D){if((L=p[R])<(I=V[F]))break e;if(L>I)break t;R+=A,F+=M}for(F=P,R=P-g,D=0;D<w;++D)p[F]=p[R],F+=f,R+=f;P-=g}for(F=P,R=0,D=0;D<w;++D)p[F]=V[R++],F+=f}h(V)}}},l={"uint32,1,0":function(y,h,s){return function d(p,c,g,m,u,w,f,A,M,k,E){var P,D,R,L,I,B,V,Z,Y,Q,re,$,J,ie,j,q,W,ae,G,ee,te,le,ue,de,he=(c-p+1)/6|0,be=p+he,me=c-he,_e=p+c>>1,Ee=_e-he,De=_e+he,Se=be,Fe=Ee,ve=_e,Te=De,Ie=me,Ce=p+1,Re=c-1,Ue=!0,qe=0,Xe=0,st=0,He=A,$e=h(He),et=h(He);Q=u*Se,re=u*Fe,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Se,Se=Fe,Fe=D;break e}if(st<0)break e;de+=k}Q=u*Te,re=u*Ie,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Te,Te=Ie,Ie=D;break e}if(st<0)break e;de+=k}Q=u*Se,re=u*ve,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Se,Se=ve,ve=D;break e}if(st<0)break e;de+=k}Q=u*Fe,re=u*ve,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Fe,Fe=ve,ve=D;break e}if(st<0)break e;de+=k}Q=u*Se,re=u*Te,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Se,Se=Te,Te=D;break e}if(st<0)break e;de+=k}Q=u*ve,re=u*Te,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=ve,ve=Te,Te=D;break e}if(st<0)break e;de+=k}Q=u*Fe,re=u*Ie,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Fe,Fe=Ie,Ie=D;break e}if(st<0)break e;de+=k}Q=u*Fe,re=u*ve,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Fe,Fe=ve,ve=D;break e}if(st<0)break e;de+=k}Q=u*Te,re=u*Ie,de=m;e:for(Y=0;Y<A;++Y){if((st=g[B=Q+de]-g[V=re+de])>0){D=Te,Te=Ie,Ie=D;break e}if(st<0)break e;de+=k}for(Q=u*Se,re=u*Fe,$=u*ve,J=u*Te,ie=u*Ie,j=u*be,q=u*_e,W=u*me,ue=0,de=m,Y=0;Y<A;++Y)B=Q+de,Z=$+de,ae=J+de,G=ie+de,ee=j+de,te=q+de,le=W+de,$e[ue]=g[V=re+de],et[ue]=g[ae],Ue=Ue&&$e[ue]===et[ue],R=g[Z],L=g[G],g[ee]=g[B],g[te]=R,g[le]=L,++ue,de+=M;for(Q=u*Ee,re=u*p,de=m,Y=0;Y<A;++Y)g[B=Q+de]=g[V=re+de],de+=M;for(Q=u*De,re=u*c,de=m,Y=0;Y<A;++Y)g[B=Q+de]=g[V=re+de],de+=M;if(Ue)for(I=Ce;I<=Re;++I){for(B=m+I*u,ue=0,Y=0;Y<A&&0==(st=g[B]-$e[ue]);++Y)ue+=E,B+=k;if(0!==st)if(st<0){if(I!==Ce)for(Q=u*I,re=u*Ce,de=m,Y=0;Y<A;++Y)P=g[B=Q+de],g[B]=g[V=re+de],g[V]=P,de+=M;++Ce}else for(;;){for(B=m+Re*u,ue=0,Y=0;Y<A&&0==(st=g[B]-$e[ue]);++Y)ue+=E,B+=k;if(!(st>0)){if(st<0){for(Q=u*I,re=u*Ce,$=u*Re,de=m,Y=0;Y<A;++Y)Z=$+de,P=g[B=Q+de],g[B]=g[V=re+de],g[V]=g[Z],g[Z]=P,de+=M;++Ce,--Re;break}for(Q=u*I,re=u*Re,de=m,Y=0;Y<A;++Y)P=g[B=Q+de],g[B]=g[V=re+de],g[V]=P,de+=M;--Re;break}Re--}}else for(I=Ce;I<=Re;++I){for(B=m+I*u,ue=0,Y=0;Y<A&&0==(qe=g[B]-$e[ue]);++Y)ue+=E,B+=k;if(qe<0){if(I!==Ce)for(Q=u*I,re=u*Ce,de=m,Y=0;Y<A;++Y)P=g[B=Q+de],g[B]=g[V=re+de],g[V]=P,de+=M;++Ce}else{for(B=m+I*u,ue=0,Y=0;Y<A&&0==(Xe=g[B]-et[ue]);++Y)ue+=E,B+=k;if(Xe>0)for(;;){for(B=m+Re*u,ue=0,Y=0;Y<A&&0==(st=g[B]-et[ue]);++Y)ue+=E,B+=k;if(!(st>0)){for(B=m+Re*u,ue=0,Y=0;Y<A&&0==(st=g[B]-$e[ue]);++Y)ue+=E,B+=k;if(st<0){for(Q=u*I,re=u*Ce,$=u*Re,de=m,Y=0;Y<A;++Y)Z=$+de,P=g[B=Q+de],g[B]=g[V=re+de],g[V]=g[Z],g[Z]=P,de+=M;++Ce,--Re}else{for(Q=u*I,re=u*Re,de=m,Y=0;Y<A;++Y)P=g[B=Q+de],g[B]=g[V=re+de],g[V]=P,de+=M;--Re}break}if(--Re<I)break}}}for(Q=u*p,re=u*(Ce-1),ue=0,de=m,Y=0;Y<A;++Y)g[B=Q+de]=g[V=re+de],g[V]=$e[ue],++ue,de+=M;for(Q=u*c,re=u*(Re+1),ue=0,de=m,Y=0;Y<A;++Y)g[B=Q+de]=g[V=re+de],g[V]=et[ue],++ue,de+=M;if(Ce-2-p<=32?y(p,Ce-2,g,m,u,w,f,A,M,k,E):d(p,Ce-2,g,m,u,w,f,A,M,k,E),c-(Re+2)<=32?y(Re+2,c,g,m,u,w,f,A,M,k,E):d(Re+2,c,g,m,u,w,f,A,M,k,E),Ue)return s($e),void s(et);if(Ce<be&&Re>me){e:for(;;){for(B=m+Ce*u,ue=0,de=m,Y=0;Y<A;++Y){if(g[B]!==$e[ue])break e;++ue,B+=M}++Ce}e:for(;;){for(B=m+Re*u,ue=0,de=m,Y=0;Y<A;++Y){if(g[B]!==et[ue])break e;++ue,B+=M}--Re}for(I=Ce;I<=Re;++I){for(B=m+I*u,ue=0,Y=0;Y<A&&0==(qe=g[B]-$e[ue]);++Y)ue+=E,B+=k;if(0===qe){if(I!==Ce)for(Q=u*I,re=u*Ce,de=m,Y=0;Y<A;++Y)P=g[B=Q+de],g[B]=g[V=re+de],g[V]=P,de+=M;++Ce}else{for(B=m+I*u,ue=0,Y=0;Y<A&&0==(Xe=g[B]-et[ue]);++Y)ue+=E,B+=k;if(0===Xe)for(;;){for(B=m+Re*u,ue=0,Y=0;Y<A&&0==(st=g[B]-et[ue]);++Y)ue+=E,B+=k;if(0!==st){for(B=m+Re*u,ue=0,Y=0;Y<A&&0==(st=g[B]-$e[ue]);++Y)ue+=E,B+=k;if(st<0){for(Q=u*I,re=u*Ce,$=u*Re,de=m,Y=0;Y<A;++Y)Z=$+de,P=g[B=Q+de],g[B]=g[V=re+de],g[V]=g[Z],g[Z]=P,de+=M;++Ce,--Re}else{for(Q=u*I,re=u*Re,de=m,Y=0;Y<A;++Y)P=g[B=Q+de],g[B]=g[V=re+de],g[V]=P,de+=M;--Re}break}if(--Re<I)break}}}}s($e),s(et),Re-Ce<=32?y(Ce,Re,g,m,u,w,f,A,M,k,E):d(Ce,Re,g,m,u,w,f,A,M,k,E)}}},r={"uint32,1,0":function(y,h){return function(s){var d=s.data,p=0|s.offset,c=s.shape,g=s.stride,m=0|g[0],u=0|c[0],w=0|g[1],f=0|c[1],A=w,M=w;u<=32?y(0,u-1,d,p,m,w,u,f,A,M,1):h(0,u-1,d,p,m,w,u,f,A,M,1)}}};T.exports=function(y,h){var g,m,u,w,f,s=[h,y].join(","),d=r[s],p=(g=y,u=o(m=h),w=[m,g].join(","),f=i[w],u?f(u[0],u[1]):f()),c=function(g,m,u){var w=o(m),f=[m,g].join(","),A=l[f];return g.length>1&&w?A(u,w[0],w[1]):A(u)}(y,h,p);return d(p,c)}},{"typedarray-pool":308}],258:[function(x,T,b){"use strict";var e=x("./lib/compile_sort.js"),o={};T.exports=function(i){var l=i.order,r=i.dtype,y=[l,r].join(":"),h=o[y];return h||(o[y]=h=e(l,r)),h(i),i}},{"./lib/compile_sort.js":257}],259:[function(x,T,b){var e=x("is-buffer"),o="undefined"!=typeof Float64Array;function i(s,d){return s[0]-d[0]}function l(){var s,d=this.stride,p=new Array(d.length);for(s=0;s<p.length;++s)p[s]=[Math.abs(d[s]),s];p.sort(i);var c=new Array(p.length);for(s=0;s<c.length;++s)c[s]=p[s][1];return c}var r={T:function(s){function d(c){this.data=c}var p=d.prototype;return p.dtype=s,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new d(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(c){return new d(c)}},0:function(s,d){function p(g,m){this.data=g,this.offset=m}var c=p.prototype;return c.dtype=s,c.index=function(){return this.offset},c.dimension=0,c.size=1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new p(this.data,this.offset)},c.pick=function(){return d(this.data)},c.valueOf=c.get=function(){return"generic"===s?this.data.get(this.offset):this.data[this.offset]},c.set=function(g){return"generic"===s?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,m,u,w){return new p(g,w)}},1:function(s,d,p){function c(m,u,w,f){this.data=m,this.shape=[u],this.stride=[w],this.offset=0|f}var g=c.prototype;return g.dtype=s,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(m,u){return"generic"===s?this.data.set(this.offset+this.stride[0]*m,u):this.data[this.offset+this.stride[0]*m]=u},g.get=function(m){return"generic"===s?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},g.index=function(m){return this.offset+this.stride[0]*m},g.hi=function(m){return new c(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,this.stride[0],this.offset)},g.lo=function(m){var u=this.offset,w=0,f=this.shape[0],A=this.stride[0];return"number"==typeof m&&m>=0&&(u+=A*(w=0|m),f-=w),new c(this.data,f,A,u)},g.step=function(m){var u=this.shape[0],w=this.stride[0],f=this.offset,A=0,M=Math.ceil;return"number"==typeof m&&((A=0|m)<0?(f+=w*(u-1),u=M(-u/A)):u=M(u/A),w*=A),new c(this.data,u,w,f)},g.transpose=function(m){return new c(this.data,this.shape[m=void 0===m?0:0|m],this.stride[m],this.offset)},g.pick=function(m){var u=[],w=[],f=this.offset;return"number"==typeof m&&m>=0?f=f+this.stride[0]*m|0:(u.push(this.shape[0]),w.push(this.stride[0])),(0,d[u.length+1])(this.data,u,w,f)},function(m,u,w,f){return new c(m,u[0],w[0],f)}},2:function(s,d,p){function c(m,u,w,f,A,M){this.data=m,this.shape=[u,w],this.stride=[f,A],this.offset=0|M}var g=c.prototype;return g.dtype=s,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(m,u,w){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u,w):this.data[this.offset+this.stride[0]*m+this.stride[1]*u]=w},g.get=function(m,u){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u):this.data[this.offset+this.stride[0]*m+this.stride[1]*u]},g.index=function(m,u){return this.offset+this.stride[0]*m+this.stride[1]*u},g.hi=function(m,u){return new c(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,this.stride[0],this.stride[1],this.offset)},g.lo=function(m,u){var w=this.offset,f=0,A=this.shape[0],M=this.shape[1],k=this.stride[0],E=this.stride[1];return"number"==typeof m&&m>=0&&(w+=k*(f=0|m),A-=f),"number"==typeof u&&u>=0&&(w+=E*(f=0|u),M-=f),new c(this.data,A,M,k,E,w)},g.step=function(m,u){var w=this.shape[0],f=this.shape[1],A=this.stride[0],M=this.stride[1],k=this.offset,E=0,P=Math.ceil;return"number"==typeof m&&((E=0|m)<0?(k+=A*(w-1),w=P(-w/E)):w=P(w/E),A*=E),"number"==typeof u&&((E=0|u)<0?(k+=M*(f-1),f=P(-f/E)):f=P(f/E),M*=E),new c(this.data,w,f,A,M,k)},g.transpose=function(m,u){var w=this.shape,f=this.stride;return new c(this.data,w[m=void 0===m?0:0|m],w[u=void 0===u?1:0|u],f[m],f[u],this.offset)},g.pick=function(m,u){var w=[],f=[],A=this.offset;return"number"==typeof m&&m>=0?A=A+this.stride[0]*m|0:(w.push(this.shape[0]),f.push(this.stride[0])),"number"==typeof u&&u>=0?A=A+this.stride[1]*u|0:(w.push(this.shape[1]),f.push(this.stride[1])),(0,d[w.length+1])(this.data,w,f,A)},function(m,u,w,f){return new c(m,u[0],u[1],w[0],w[1],f)}},3:function(s,d,p){function c(m,u,w,f,A,M,k,E){this.data=m,this.shape=[u,w,f],this.stride=[A,M,k],this.offset=0|E}var g=c.prototype;return g.dtype=s,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var m=Math.abs(this.stride[0]),u=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return m>u?u>w?[2,1,0]:m>w?[1,2,0]:[1,0,2]:m>w?[2,0,1]:w>u?[0,1,2]:[0,2,1]}}),g.set=function(m,u,w,f){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w,f):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w]=f},g.get=function(m,u,w){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w]},g.index=function(m,u,w){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w},g.hi=function(m,u,w){return new c(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(m,u,w){var f=this.offset,A=0,M=this.shape[0],k=this.shape[1],E=this.shape[2],P=this.stride[0],D=this.stride[1],F=this.stride[2];return"number"==typeof m&&m>=0&&(f+=P*(A=0|m),M-=A),"number"==typeof u&&u>=0&&(f+=D*(A=0|u),k-=A),"number"==typeof w&&w>=0&&(f+=F*(A=0|w),E-=A),new c(this.data,M,k,E,P,D,F,f)},g.step=function(m,u,w){var f=this.shape[0],A=this.shape[1],M=this.shape[2],k=this.stride[0],E=this.stride[1],P=this.stride[2],D=this.offset,F=0,R=Math.ceil;return"number"==typeof m&&((F=0|m)<0?(D+=k*(f-1),f=R(-f/F)):f=R(f/F),k*=F),"number"==typeof u&&((F=0|u)<0?(D+=E*(A-1),A=R(-A/F)):A=R(A/F),E*=F),"number"==typeof w&&((F=0|w)<0?(D+=P*(M-1),M=R(-M/F)):M=R(M/F),P*=F),new c(this.data,f,A,M,k,E,P,D)},g.transpose=function(m,u,w){var f=this.shape,A=this.stride;return new c(this.data,f[m=void 0===m?0:0|m],f[u=void 0===u?1:0|u],f[w=void 0===w?2:0|w],A[m],A[u],A[w],this.offset)},g.pick=function(m,u,w){var f=[],A=[],M=this.offset;return"number"==typeof m&&m>=0?M=M+this.stride[0]*m|0:(f.push(this.shape[0]),A.push(this.stride[0])),"number"==typeof u&&u>=0?M=M+this.stride[1]*u|0:(f.push(this.shape[1]),A.push(this.stride[1])),"number"==typeof w&&w>=0?M=M+this.stride[2]*w|0:(f.push(this.shape[2]),A.push(this.stride[2])),(0,d[f.length+1])(this.data,f,A,M)},function(m,u,w,f){return new c(m,u[0],u[1],u[2],w[0],w[1],w[2],f)}},4:function(s,d,p){function c(m,u,w,f,A,M,k,E,P,D){this.data=m,this.shape=[u,w,f,A],this.stride=[M,k,E,P],this.offset=0|D}var g=c.prototype;return g.dtype=s,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(m,u,w,f,A){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f,A):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f]=A},g.get=function(m,u,w,f){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f]},g.index=function(m,u,w,f){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f},g.hi=function(m,u,w,f){return new c(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof f||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(m,u,w,f){var A=this.offset,M=0,k=this.shape[0],E=this.shape[1],P=this.shape[2],D=this.shape[3],F=this.stride[0],R=this.stride[1],L=this.stride[2],I=this.stride[3];return"number"==typeof m&&m>=0&&(A+=F*(M=0|m),k-=M),"number"==typeof u&&u>=0&&(A+=R*(M=0|u),E-=M),"number"==typeof w&&w>=0&&(A+=L*(M=0|w),P-=M),"number"==typeof f&&f>=0&&(A+=I*(M=0|f),D-=M),new c(this.data,k,E,P,D,F,R,L,I,A)},g.step=function(m,u,w,f){var A=this.shape[0],M=this.shape[1],k=this.shape[2],E=this.shape[3],P=this.stride[0],D=this.stride[1],F=this.stride[2],R=this.stride[3],L=this.offset,I=0,B=Math.ceil;return"number"==typeof m&&((I=0|m)<0?(L+=P*(A-1),A=B(-A/I)):A=B(A/I),P*=I),"number"==typeof u&&((I=0|u)<0?(L+=D*(M-1),M=B(-M/I)):M=B(M/I),D*=I),"number"==typeof w&&((I=0|w)<0?(L+=F*(k-1),k=B(-k/I)):k=B(k/I),F*=I),"number"==typeof f&&((I=0|f)<0?(L+=R*(E-1),E=B(-E/I)):E=B(E/I),R*=I),new c(this.data,A,M,k,E,P,D,F,R,L)},g.transpose=function(m,u,w,f){var A=this.shape,M=this.stride;return new c(this.data,A[m=void 0===m?0:0|m],A[u=void 0===u?1:0|u],A[w=void 0===w?2:0|w],A[f=void 0===f?3:0|f],M[m],M[u],M[w],M[f],this.offset)},g.pick=function(m,u,w,f){var A=[],M=[],k=this.offset;return"number"==typeof m&&m>=0?k=k+this.stride[0]*m|0:(A.push(this.shape[0]),M.push(this.stride[0])),"number"==typeof u&&u>=0?k=k+this.stride[1]*u|0:(A.push(this.shape[1]),M.push(this.stride[1])),"number"==typeof w&&w>=0?k=k+this.stride[2]*w|0:(A.push(this.shape[2]),M.push(this.stride[2])),"number"==typeof f&&f>=0?k=k+this.stride[3]*f|0:(A.push(this.shape[3]),M.push(this.stride[3])),(0,d[A.length+1])(this.data,A,M,k)},function(m,u,w,f){return new c(m,u[0],u[1],u[2],u[3],w[0],w[1],w[2],w[3],f)}},5:function(s,d,p){function c(m,u,w,f,A,M,k,E,P,D,F,R){this.data=m,this.shape=[u,w,f,A,M],this.stride=[k,E,P,D,F],this.offset=0|R}var g=c.prototype;return g.dtype=s,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(m,u,w,f,A,M){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f+this.stride[4]*A,M):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f+this.stride[4]*A]=M},g.get=function(m,u,w,f,A){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f+this.stride[4]*A):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f+this.stride[4]*A]},g.index=function(m,u,w,f,A){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*f+this.stride[4]*A},g.hi=function(m,u,w,f,A){return new c(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof f||f<0?this.shape[3]:0|f,"number"!=typeof A||A<0?this.shape[4]:0|A,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(m,u,w,f,A){var M=this.offset,k=0,E=this.shape[0],P=this.shape[1],D=this.shape[2],F=this.shape[3],R=this.shape[4],L=this.stride[0],I=this.stride[1],B=this.stride[2],V=this.stride[3],Z=this.stride[4];return"number"==typeof m&&m>=0&&(M+=L*(k=0|m),E-=k),"number"==typeof u&&u>=0&&(M+=I*(k=0|u),P-=k),"number"==typeof w&&w>=0&&(M+=B*(k=0|w),D-=k),"number"==typeof f&&f>=0&&(M+=V*(k=0|f),F-=k),"number"==typeof A&&A>=0&&(M+=Z*(k=0|A),R-=k),new c(this.data,E,P,D,F,R,L,I,B,V,Z,M)},g.step=function(m,u,w,f,A){var M=this.shape[0],k=this.shape[1],E=this.shape[2],P=this.shape[3],D=this.shape[4],F=this.stride[0],R=this.stride[1],L=this.stride[2],I=this.stride[3],B=this.stride[4],V=this.offset,Z=0,Y=Math.ceil;return"number"==typeof m&&((Z=0|m)<0?(V+=F*(M-1),M=Y(-M/Z)):M=Y(M/Z),F*=Z),"number"==typeof u&&((Z=0|u)<0?(V+=R*(k-1),k=Y(-k/Z)):k=Y(k/Z),R*=Z),"number"==typeof w&&((Z=0|w)<0?(V+=L*(E-1),E=Y(-E/Z)):E=Y(E/Z),L*=Z),"number"==typeof f&&((Z=0|f)<0?(V+=I*(P-1),P=Y(-P/Z)):P=Y(P/Z),I*=Z),"number"==typeof A&&((Z=0|A)<0?(V+=B*(D-1),D=Y(-D/Z)):D=Y(D/Z),B*=Z),new c(this.data,M,k,E,P,D,F,R,L,I,B,V)},g.transpose=function(m,u,w,f,A){var M=this.shape,k=this.stride;return new c(this.data,M[m=void 0===m?0:0|m],M[u=void 0===u?1:0|u],M[w=void 0===w?2:0|w],M[f=void 0===f?3:0|f],M[A=void 0===A?4:0|A],k[m],k[u],k[w],k[f],k[A],this.offset)},g.pick=function(m,u,w,f,A){var M=[],k=[],E=this.offset;return"number"==typeof m&&m>=0?E=E+this.stride[0]*m|0:(M.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof u&&u>=0?E=E+this.stride[1]*u|0:(M.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof w&&w>=0?E=E+this.stride[2]*w|0:(M.push(this.shape[2]),k.push(this.stride[2])),"number"==typeof f&&f>=0?E=E+this.stride[3]*f|0:(M.push(this.shape[3]),k.push(this.stride[3])),"number"==typeof A&&A>=0?E=E+this.stride[4]*A|0:(M.push(this.shape[4]),k.push(this.stride[4])),(0,d[M.length+1])(this.data,M,k,E)},function(m,u,w,f){return new c(m,u[0],u[1],u[2],u[3],u[4],w[0],w[1],w[2],w[3],w[4],f)}}};function y(s,d){var p=-1===d?"T":String(d),c=r[p];return-1===d?c(s):0===d?c(s,h[s][0]):c(s,h[s],l)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};T.exports=function(s,d,p,c){if(void 0===s)return(0,h.array[0])([]);"number"==typeof s&&(s=[s]),void 0===d&&(d=[s.length]);var g=d.length;if(void 0===p){p=new Array(g);for(var m=g-1,u=1;m>=0;--m)p[m]=u,u*=d[m]}if(void 0===c)for(c=0,m=0;m<g;++m)p[m]<0&&(c-=(d[m]-1)*p[m]);for(var w=function(A){if(e(A))return"buffer";if(o)switch(Object.prototype.toString.call(A)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(A)?"array":"generic"}(s),f=h[w];f.length<=g+1;)f.push(y(w,f.length-1));return(0,f[g+1])(s,d,p,c)}},{"is-buffer":237}],260:[function(x,T,b){"use strict";var e=x("double-bits"),o=Math.pow(2,-1074);T.exports=function(i,l){if(isNaN(i)||isNaN(l))return NaN;if(i===l)return i;if(0===i)return l<0?-o:o;var r=e.hi(i),y=e.lo(i);return l>i==i>0?y===-1>>>0?(r+=1,y=0):y+=1:0===y?(y=-1>>>0,r-=1):y-=1,e.pack(y,r)}},{"double-bits":64}],261:[function(x,T,b){b.vertexNormals=function(e,o,i){for(var l=o.length,r=new Array(l),y=void 0===i?1e-6:i,h=0;h<l;++h)r[h]=[0,0,0];for(h=0;h<e.length;++h)for(var s=e[h],p=s[s.length-1],c=s[0],g=0;g<s.length;++g){for(var m=o[p],u=o[p=c],w=o[c=s[(g+1)%s.length]],f=new Array(3),A=0,M=new Array(3),k=0,E=0;E<3;++E)f[E]=m[E]-u[E],A+=f[E]*f[E],M[E]=w[E]-u[E],k+=M[E]*M[E];if(A*k>y){var P=r[p],D=1/Math.sqrt(A*k);for(E=0;E<3;++E){var F=(E+1)%3,R=(E+2)%3;P[E]+=D*(M[F]*f[R]-M[R]*f[F])}}}for(h=0;h<l;++h){P=r[h];var L=0;for(E=0;E<3;++E)L+=P[E]*P[E];if(L>y)for(D=1/Math.sqrt(L),E=0;E<3;++E)P[E]*=D;else for(E=0;E<3;++E)P[E]=0}return r},b.faceNormals=function(e,o,i){for(var l=e.length,r=new Array(l),y=void 0===i?1e-6:i,h=0;h<l;++h){for(var s=e[h],d=new Array(3),p=0;p<3;++p)d[p]=o[s[p]];var c=new Array(3),g=new Array(3);for(p=0;p<3;++p)c[p]=d[1][p]-d[0][p],g[p]=d[2][p]-d[0][p];var m=new Array(3),u=0;for(p=0;p<3;++p){var w=(p+1)%3,f=(p+2)%3;m[p]=c[w]*g[f]-c[f]*g[w],u+=m[p]*m[p]}for(u=u>y?1/Math.sqrt(u):0,p=0;p<3;++p)m[p]*=u;r[h]=m}return r}},{}],262:[function(x,T,b){"use strict";T.exports=function(e,o,i,l,r,y,h,s,d,p){var c=o+y+p;if(g>0){var g=Math.sqrt(c+1);e[0]=.5*(h-d)/g,e[1]=.5*(s-l)/g,e[2]=.5*(i-y)/g,e[3]=.5*g}else{var m=Math.max(o,y,p);g=Math.sqrt(2*m-c+1),o>=m?(e[0]=.5*g,e[1]=.5*(r+i)/g,e[2]=.5*(s+l)/g,e[3]=.5*(h-d)/g):y>=m?(e[0]=.5*(i+r)/g,e[1]=.5*g,e[2]=.5*(d+h)/g,e[3]=.5*(s-l)/g):(e[0]=.5*(l+s)/g,e[1]=.5*(h+d)/g,e[2]=.5*g,e[3]=.5*(i-r)/g)}return e}},{}],263:[function(x,T,b){"use strict";T.exports=function(c){var g=(c=c||{}).center||[0,0,0],m=c.rotation||[0,0,0,1],u=c.radius||1;g=[].slice.call(g,0,3),s(m=[].slice.call(m,0,4),m);var w=new d(m,g,Math.log(u));return w.setDistanceLimits(c.zoomMin,c.zoomMax),("eye"in c||"up"in c)&&w.lookAt(0,c.eye,c.center,c.up),w};var e=x("filtered-vector"),o=x("gl-mat4/lookAt"),i=x("gl-mat4/fromQuat"),l=x("gl-mat4/invert"),r=x("./lib/quatFromFrame");function y(c,g,m){return Math.sqrt(Math.pow(c,2)+Math.pow(g,2)+Math.pow(m,2))}function h(c,g,m,u){return Math.sqrt(Math.pow(c,2)+Math.pow(g,2)+Math.pow(m,2)+Math.pow(u,2))}function s(c,g){var m=g[0],u=g[1],w=g[2],f=g[3],A=h(m,u,w,f);A>1e-6?(c[0]=m/A,c[1]=u/A,c[2]=w/A,c[3]=f/A):(c[0]=c[1]=c[2]=0,c[3]=1)}function d(c,g,m){this.radius=e([m]),this.center=e(g),this.rotation=e(c),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=d.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(c){this.radius.curve(c),this.center.curve(c),this.rotation.curve(c);var g=this.computedRotation;s(g,g);var m=this.computedMatrix;i(m,g);var u=this.computedCenter,w=this.computedEye,f=this.computedUp,A=Math.exp(this.computedRadius[0]);w[0]=u[0]+A*m[2],w[1]=u[1]+A*m[6],w[2]=u[2]+A*m[10],f[0]=m[1],f[1]=m[5],f[2]=m[9];for(var M=0;M<3;++M){for(var k=0,E=0;E<3;++E)k+=m[M+4*E]*w[E];m[12+M]=-k}},p.getMatrix=function(c,g){this.recalcMatrix(c);var m=this.computedMatrix;if(g){for(var u=0;u<16;++u)g[u]=m[u];return g}return m},p.idle=function(c){this.center.idle(c),this.radius.idle(c),this.rotation.idle(c)},p.flush=function(c){this.center.flush(c),this.radius.flush(c),this.rotation.flush(c)},p.pan=function(c,g,m,u){g=g||0,m=m||0,u=u||0,this.recalcMatrix(c);var w=this.computedMatrix,f=w[1],A=w[5],M=w[9],k=y(f,A,M),E=w[0],P=w[4],D=w[8],F=E*(f/=k)+P*(A/=k)+D*(M/=k),R=y(E-=f*F,P-=A*F,D-=M*F),L=w[2],I=w[6],B=w[10],V=L*f+I*A+B*M,Z=L*(E/=R)+I*(P/=R)+B*(D/=R),Y=y(L-=V*f+Z*E,I-=V*A+Z*P,B-=V*M+Z*D);L/=Y,I/=Y,B/=Y,this.center.move(c,E*g+f*m,P*g+A*m,D*g+M*m);var J=Math.exp(this.computedRadius[0]);J=Math.max(1e-4,J+u),this.radius.set(c,Math.log(J))},p.rotate=function(c,g,m,u){this.recalcMatrix(c);var w=this.computedMatrix,D=w[2],F=w[6],R=w[10],L=(g=g||0)*w[0]+(m=m||0)*w[1],I=g*w[4]+m*w[5],B=g*w[8]+m*w[9],V=-(F*B-R*I),Z=-(R*L-D*B),Y=-(D*I-F*L),Q=Math.sqrt(Math.max(0,1-Math.pow(V,2)-Math.pow(Z,2)-Math.pow(Y,2))),re=h(V,Z,Y,Q);re>1e-6?(V/=re,Z/=re,Y/=re,Q/=re):(V=Z=Y=0,Q=1);var $=this.computedRotation,J=$[0],ie=$[1],j=$[2],q=$[3],W=J*Q+q*V+ie*Y-j*Z,ae=ie*Q+q*Z+j*V-J*Y,G=j*Q+q*Y+J*Z-ie*V,ee=q*Q-J*V-ie*Z-j*Y;if(u){V=D,Z=F,Y=R;var te=Math.sin(u)/y(V,Z,Y);V*=te,Z*=te,Y*=te,ee=ee*(Q=Math.cos(g))-(W=W*Q+ee*V+ae*Y-G*Z)*V-(ae=ae*Q+ee*Z+G*V-W*Y)*Z-(G=G*Q+ee*Y+W*Z-ae*V)*Y}var le=h(W,ae,G,ee);le>1e-6?(W/=le,ae/=le,G/=le,ee/=le):(W=ae=G=0,ee=1),this.rotation.set(c,W,ae,G,ee)},p.lookAt=function(c,g,m,u){this.recalcMatrix(c);var w=this.computedMatrix;o(w,g=g||this.computedEye,m=m||this.computedCenter,u=u||this.computedUp);var f=this.computedRotation;r(f,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),s(f,f),this.rotation.set(c,f[0],f[1],f[2],f[3]);for(var A=0,M=0;M<3;++M)A+=Math.pow(m[M]-g[M],2);this.radius.set(c,.5*Math.log(Math.max(A,1e-6))),this.center.set(c,m[0],m[1],m[2])},p.translate=function(c,g,m,u){this.center.move(c,g||0,m||0,u||0)},p.setMatrix=function(c,g){var m=this.computedRotation;r(m,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),s(m,m),this.rotation.set(c,m[0],m[1],m[2],m[3]);var u=this.computedMatrix;l(u,g);var w=u[15];if(Math.abs(w)>1e-6){var f=u[12]/w,A=u[13]/w,M=u[14]/w;this.recalcMatrix(c);var k=Math.exp(this.computedRadius[0]);this.center.set(c,f-u[2]*k,A-u[6]*k,M-u[10]*k),this.radius.idle(c)}else this.center.idle(c),this.radius.idle(c)},p.setDistance=function(c,g){g>0&&this.radius.set(c,Math.log(g))},p.setDistanceLimits=function(c,g){c=c>0?Math.log(c):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=g},p.getDistanceLimits=function(c){var g=this.radius.bounds;return c?(c[0]=Math.exp(g[0][0]),c[1]=Math.exp(g[1][0]),c):[Math.exp(g[0][0]),Math.exp(g[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(c){var g=this.lastT(),m=c.center;m&&this.center.set(g,m[0],m[1],m[2]);var u=c.rotation;u&&this.rotation.set(g,u[0],u[1],u[2],u[3]);var w=c.distance;w&&w>0&&this.radius.set(g,Math.log(w)),this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(x,T,b){"use strict";var e=x("repeat-string");T.exports=function(o,i,l){return e(l=void 0!==l?l+"":" ",i)+o}},{"repeat-string":277}],265:[function(x,T,b){T.exports=function(e,o){o||(o=[0,""]),e=String(e);var i=parseFloat(e,10);return o[0]=i,o[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},{}],266:[function(x,T,b){"use strict";T.exports=function(o,i){for(var l=0|i.length,r=o.length,y=[new Array(l),new Array(l)],h=0;h<l;++h)y[0][h]=[],y[1][h]=[];for(h=0;h<r;++h){var s=o[h];y[0][s[0]].push(s),y[1][s[1]].push(s)}var M,d=[];for(h=0;h<l;++h)y[0][h].length+y[1][h].length===0&&d.push([h]);function p(A,M){var k=y[M][A[M]];k.splice(k.indexOf(A),1)}function c(A,M,k){for(var E,P,D,F=0;F<2;++F)if(y[F][M].length>0){E=y[F][M][0],D=F;break}P=E[1^D];for(var R=0;R<2;++R)for(var L=y[R][M],I=0;I<L.length;++I){var B=L[I],V=B[1^R];e(i[A],i[M],i[P],i[V])>0&&(E=B,P=V,D=R)}return k||E&&p(E,D),P}function g(A,M){var k=y[M][A][0],E=[A];p(k,M);for(var P=k[1^M];;){for(;P!==A;)E.push(P),P=c(E[E.length-2],P,!1);if(y[0][A].length+y[1][A].length===0)break;var D=E[E.length-1],F=A,R=E[1],L=c(D,F,!0);if(e(i[D],i[F],i[R],i[L])<0)break;E.push(A),P=c(D,F)}return E}for(h=0;h<l;++h)for(var u=0;u<2;++u){for(var w=[];y[u][h].length>0;){var f=g(h,u);(M=f)[1]===M[M.length-1]?w.push.apply(w,f):(w.length>0&&d.push(w),w=f)}w.length>0&&d.push(w)}return d};var e=x("compare-angle")},{"compare-angle":54}],267:[function(x,T,b){"use strict";T.exports=function(o,i){for(var l=e(o,i.length),r=new Array(i.length),y=new Array(i.length),h=[],s=0;s<i.length;++s){var d=l[s].length;y[s]=d,r[s]=!0,d<=1&&h.push(s)}for(;h.length>0;){var p=h.pop();r[p]=!1;var c=l[p];for(s=0;s<c.length;++s){var g=c[s];0==--y[g]&&h.push(g)}}var m=new Array(i.length),u=[];for(s=0;s<i.length;++s)r[s]?(m[s]=p=u.length,u.push(i[s])):m[s]=-1;var w=[];for(s=0;s<o.length;++s){var f=o[s];r[f[0]]&&r[f[1]]&&w.push([m[f[0]],m[f[1]]])}return[w,u]};var e=x("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(x,T,b){"use strict";T.exports=function(d,p){for(var c=h(d,p),g=(p=c[1]).length,m=e(d=c[0],p.length),u=0;u<g;++u)if(m[u].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=o(d,p),f=(w=w.filter(function(he){for(var be=he.length,me=[0],_e=0;_e<be;++_e){var Ee=p[he[_e]],De=p[he[(_e+1)%be]],Se=l(-Ee[0],Ee[1]),Fe=l(-Ee[0],De[1]),ve=l(De[0],Ee[1]),Te=l(De[0],De[1]);me=r(me,r(r(Se,Fe),r(ve,Te)))}return me[me.length-1]>0})).length,A=new Array(f),M=new Array(f);for(u=0;u<f;++u){A[u]=u;var k=new Array(f),E=w[u].map(function(he){return p[he]}),P=i([E]),D=0;e:for(var F=0;F<f;++F)if(k[F]=0,u!==F){for(var R=(ue=w[F]).length,L=0;L<R;++L){var I=P(p[ue[L]]);if(0!==I){I<0&&(k[F]=1,D+=1);continue e}}k[F]=1,D+=1}M[u]=[D,u,k]}for(M.sort(function(he,be){return be[0]-he[0]}),u=0;u<f;++u){var B=(k=M[u])[1],V=k[2];for(F=0;F<f;++F)V[F]&&(A[F]=B)}var Z=function(he){for(var be=new Array(he),me=0;me<he;++me)be[me]=[];return be}(f);for(u=0;u<f;++u)Z[u].push(A[u]),Z[A[u]].push(u);var Y={},Q=s(g,!1);for(u=0;u<f;++u)for(R=(ue=w[u]).length,F=0;F<R;++F){var re=ue[F],$=ue[(F+1)%R],J=Math.min(re,$)+":"+Math.max(re,$);if(J in Y){var ie=Y[J];Z[ie].push(u),Z[u].push(ie),Q[re]=Q[$]=!0}else Y[J]=u}function j(he){for(var be=he.length,me=0;me<be;++me)if(!Q[he[me]])return!1;return!0}var q=[],W=s(f,-1);for(u=0;u<f;++u)A[u]!==u||j(w[u])?W[u]=-1:(q.push(u),W[u]=0);for(c=[];q.length>0;){var ae=q.pop(),G=Z[ae];y(G,function(he,be){return he-be});var ee,te=G.length,le=W[ae];if(0===le){var ue=w[ae];ee=[ue]}for(u=0;u<te;++u){var de=G[u];W[de]>=0||(W[de]=1^le,q.push(de),0===le&&(j(ue=w[de])||(ue.reverse(),ee.push(ue))))}0===le&&c.push(ee)}return c};var e=x("edges-to-adjacency-list"),o=x("planar-dual"),i=x("point-in-big-polygon"),l=x("two-product"),r=x("robust-sum"),y=x("uniq"),h=x("./lib/trim-leaves");function s(d,p){for(var c=new Array(d),g=0;g<d;++g)c[g]=p;return c}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(x,T,b){T.exports=function(s){for(var d=s.length,p=[],c=[],g=0;g<d;++g)for(var m=s[g],u=m.length,w=u-1,f=0;f<u;w=f++){var A=m[w],M=m[f];A[0]===M[0]?c.push([A,M]):p.push([A,M])}if(0===p.length)return 0===c.length?h:(k=y(c),function(D){return k(D[0],D[1])?0:1});var k,D,F,E=o(p),P=(D=E.slabs,F=E.coordinates,function(R){var L=l.le(F,R[0]);if(L<0)return 1;var I=D[L];if(!I){if(!(L>0&&F[L]===R[0]))return 1;I=D[L-1]}for(var B=1;I;){var V=I.key,Z=e(R,V[0],V[1]);if(V[0][0]<V[1][0])if(Z<0)I=I.left;else{if(!(Z>0))return 0;B=-1,I=I.right}else if(Z>0)I=I.left;else{if(!(Z<0))return 0;B=1,I=I.right}}return B});return 0===c.length?P:function(D,F){return function(R){return D(R[0],R[1])?0:F(R)}}(y(c),P)};var e=x("robust-orientation")[3],o=x("slab-decomposition"),i=x("interval-tree-1d"),l=x("binary-search-bounds");function r(){return!0}function y(s){for(var d={},p=0;p<s.length;++p){var c=s[p],g=c[0][0],m=c[0][1],u=c[1][1],w=[Math.min(m,u),Math.max(m,u)];g in d?d[g].push(w):d[g]=[w]}var k,f={},A=Object.keys(d);for(p=0;p<A.length;++p)f[A[p]]=i(d[A[p]]);return k=f,function(E,P){var D=k[E];return!!D&&!!D.queryPoint(P,r)}}function h(s){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(x,T,b){"use strict";var e=new Float64Array(4),o=new Float64Array(4),i=new Float64Array(4);T.exports=function(l,r,y,h,s){e.length<h.length&&(e=new Float64Array(h.length),o=new Float64Array(h.length),i=new Float64Array(h.length));for(var d=0;d<h.length;++d)e[d]=l[d]-h[d],o[d]=r[d]-l[d],i[d]=y[d]-l[d];var p=0,c=0,g=0,m=0,u=0,w=0;for(d=0;d<h.length;++d){var f=o[d],A=i[d],M=e[d];p+=f*f,c+=f*A,g+=A*A,m+=M*f,u+=M*A,w+=M*M}var k,E,P,D,F,R=Math.abs(p*g-c*c),L=c*u-g*m,I=c*m-p*u;if(L+I<=R)if(L<0)I<0&&m<0?(I=0,-m>=p?(L=1,k=p+2*m+w):k=m*(L=-m/p)+w):(L=0,u>=0?(I=0,k=w):-u>=g?(I=1,k=g+2*u+w):k=u*(I=-u/g)+w);else if(I<0)I=0,m>=0?(L=0,k=w):-m>=p?(L=1,k=p+2*m+w):k=m*(L=-m/p)+w;else{var B=1/R;k=(L*=B)*(p*L+c*(I*=B)+2*m)+I*(c*L+g*I+2*u)+w}else L<0?(P=g+u)>(E=c+m)?(D=P-E)>=(F=p-2*c+g)?(L=1,I=0,k=p+2*m+w):k=(L=D/F)*(p*L+c*(I=1-L)+2*m)+I*(c*L+g*I+2*u)+w:(L=0,P<=0?(I=1,k=g+2*u+w):u>=0?(I=0,k=w):k=u*(I=-u/g)+w):I<0?(P=p+m)>(E=c+u)?(D=P-E)>=(F=p-2*c+g)?(I=1,L=0,k=g+2*u+w):k=(L=1-(I=D/F))*(p*L+c*I+2*m)+I*(c*L+g*I+2*u)+w:(I=0,P<=0?(L=1,k=p+2*m+w):m>=0?(L=0,k=w):k=m*(L=-m/p)+w):(D=g+u-c-m)<=0?(L=0,I=1,k=g+2*u+w):D>=(F=p-2*c+g)?(L=1,I=0,k=p+2*m+w):k=(L=D/F)*(p*L+c*(I=1-L)+2*m)+I*(c*L+g*I+2*u)+w;var V=1-L-I;for(d=0;d<h.length;++d)s[d]=V*l[d]+L*r[d]+I*y[d];return k<0?0:k}},{}],271:[function(x,T,b){T.exports=x("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(x,T,b){"use strict";var e=x("big-rat/add");T.exports=function(o,i){for(var l=o.length,r=new Array(l),y=0;y<l;++y)r[y]=e(o[y],i[y]);return r}},{"big-rat/add":15}],273:[function(x,T,b){"use strict";T.exports=function(o){for(var i=new Array(o.length),l=0;l<o.length;++l)i[l]=e(o[l]);return i};var e=x("big-rat")},{"big-rat":18}],274:[function(x,T,b){"use strict";var e=x("big-rat"),o=x("big-rat/mul");T.exports=function(i,l){for(var r=e(l),y=i.length,h=new Array(y),s=0;s<y;++s)h[s]=o(i[s],r);return h}},{"big-rat":18,"big-rat/mul":27}],275:[function(x,T,b){"use strict";var e=x("big-rat/sub");T.exports=function(o,i){for(var l=o.length,r=new Array(l),y=0;y<l;++y)r[y]=e(o[y],i[y]);return r}},{"big-rat/sub":29}],276:[function(x,T,b){"use strict";var e=x("compare-cell"),o=x("compare-oriented-cell"),i=x("cell-orientation");T.exports=function(l){l.sort(o);for(var r=l.length,y=0,h=0;h<r;++h){var s=l[h],d=i(s);if(0!==d){if(y>0){var p=l[y-1];if(0===e(s,p)&&i(p)!==d){y-=1;continue}}l[y++]=s}}return l.length=y,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(x,T,b){"use strict";var e,o="";T.exports=function(i,l){if("string"!=typeof i)throw new TypeError("expected a string");if(1===l)return i;if(2===l)return i+i;var r=i.length*l;if(e!==i||void 0===e)e=i,o="";else if(o.length>=r)return o.substr(0,r);for(;r>o.length&&l>1;)1&l&&(o+=i),l>>=1,i+=i;return o=(o+=i).substr(0,r)}},{}],278:[function(x,T,b){(function(e){(function(){T.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==v?v:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(x,T,b){"use strict";T.exports=function(e){for(var o=e.length,i=e[e.length-1],l=o,r=o-2;r>=0;--r){var y=i,h=e[r];(d=h-((i=y+h)-y))&&(e[--l]=i,i=d)}var s=0;for(r=l;r<o;++r){var d;(d=(h=i)-((i=(y=e[r])+h)-y))&&(e[s++]=d)}return e[s++]=i,e.length=s,e}},{}],280:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum"),i=x("robust-scale"),l=x("robust-compress");function r(g,m,u,w){return function(f){return w(g(u(f[0][0],f[1][1]),u(-f[0][1],f[1][0])))}}function y(g,m,u,w){return function(f){return w(g(m(g(u(f[1][1],f[2][2]),u(-f[1][2],f[2][1])),f[0][0]),g(m(g(u(f[1][0],f[2][2]),u(-f[1][2],f[2][0])),-f[0][1]),m(g(u(f[1][0],f[2][1]),u(-f[1][1],f[2][0])),f[0][2]))))}}function h(g,m,u,w){return function(f){return w(g(g(m(g(m(g(u(f[2][2],f[3][3]),u(-f[2][3],f[3][2])),f[1][1]),g(m(g(u(f[2][1],f[3][3]),u(-f[2][3],f[3][1])),-f[1][2]),m(g(u(f[2][1],f[3][2]),u(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),m(g(m(g(u(f[2][2],f[3][3]),u(-f[2][3],f[3][2])),f[1][0]),g(m(g(u(f[2][0],f[3][3]),u(-f[2][3],f[3][0])),-f[1][2]),m(g(u(f[2][0],f[3][2]),u(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),g(m(g(m(g(u(f[2][1],f[3][3]),u(-f[2][3],f[3][1])),f[1][0]),g(m(g(u(f[2][0],f[3][3]),u(-f[2][3],f[3][0])),-f[1][1]),m(g(u(f[2][0],f[3][1]),u(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),m(g(m(g(u(f[2][1],f[3][2]),u(-f[2][2],f[3][1])),f[1][0]),g(m(g(u(f[2][0],f[3][2]),u(-f[2][2],f[3][0])),-f[1][1]),m(g(u(f[2][0],f[3][1]),u(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function s(g,m,u,w){return function(f){return w(g(g(m(g(g(m(g(m(g(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][2]),g(m(g(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),-f[2][3]),m(g(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),m(g(m(g(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][1]),g(m(g(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][3]),m(g(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),g(m(g(m(g(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][1]),g(m(g(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][2]),m(g(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),m(g(m(g(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][1]),g(m(g(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),-f[2][2]),m(g(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),m(g(g(m(g(m(g(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][2]),g(m(g(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),-f[2][3]),m(g(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),m(g(m(g(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][0]),g(m(g(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][3]),m(g(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),g(m(g(m(g(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][0]),g(m(g(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][2]),m(g(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),m(g(m(g(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][0]),g(m(g(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][2]),m(g(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),g(m(g(g(m(g(m(g(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][1]),g(m(g(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][3]),m(g(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),m(g(m(g(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][0]),g(m(g(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][3]),m(g(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),g(m(g(m(g(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),f[2][0]),g(m(g(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][1]),m(g(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),m(g(m(g(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][0]),g(m(g(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][1]),m(g(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),g(m(g(g(m(g(m(g(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][1]),g(m(g(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][2]),m(g(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),m(g(m(g(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][0]),g(m(g(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][2]),m(g(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),g(m(g(m(g(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),f[2][0]),g(m(g(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][1]),m(g(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),m(g(m(g(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][0]),g(m(g(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),-f[2][1]),m(g(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),m(g(g(m(g(m(g(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][1]),g(m(g(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),-f[2][2]),m(g(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),m(g(m(g(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][0]),g(m(g(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][2]),m(g(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),g(m(g(m(g(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][0]),g(m(g(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][1]),m(g(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),m(g(m(g(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][0]),g(m(g(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),-f[2][1]),m(g(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function d(g){return(2===g?r:3===g?y:4===g?h:5===g?s:void 0)(o,i,e,l)}var p=[function(){return[0]},function(g){return[g[0][0]]}];function c(g,m,u,w,f,A,M,k){return function(E){switch(E.length){case 0:return g(E);case 1:return m(E);case 2:return u(E);case 3:return w(E);case 4:return f(E);case 5:return A(E)}var P=M[E.length];return P||(P=M[E.length]=k(E.length)),P(E)}}!function(){for(;p.length<6;)p.push(d(p.length));T.exports=c.apply(void 0,p.concat([p,d]));for(var g=0;g<p.length;++g)T.exports[g]=p[g]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum");T.exports=function(i,l){for(var r=e(i[0],l[0]),y=1;y<i.length;++y)r=o(r,e(i[y],l[y]));return r}},{"robust-sum":289,"two-product":306}],282:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum"),i=x("robust-subtract"),l=x("robust-scale");function r(m){return(3===m?y:4===m?h:5===m?s:d)(o,i,e,l)}function y(m,u,w,f){return function(A,M,k){var E=w(A[0],A[0]),P=f(E,M[0]),D=f(E,k[0]),F=w(M[0],M[0]),R=f(F,A[0]),L=f(F,k[0]),I=w(k[0],k[0]),B=f(I,A[0]),V=f(I,M[0]),Z=m(u(V,L),u(R,P)),Y=u(B,D),Q=u(Z,Y);return Q[Q.length-1]}}function h(m,u,w,f){return function(A,M,k,E){var P=m(w(A[0],A[0]),w(A[1],A[1])),D=f(P,M[0]),F=f(P,k[0]),R=f(P,E[0]),L=m(w(M[0],M[0]),w(M[1],M[1])),I=f(L,A[0]),B=f(L,k[0]),V=f(L,E[0]),Z=m(w(k[0],k[0]),w(k[1],k[1])),Y=f(Z,A[0]),Q=f(Z,M[0]),re=f(Z,E[0]),$=m(w(E[0],E[0]),w(E[1],E[1])),J=f($,A[0]),ie=f($,M[0]),j=f($,k[0]),q=m(m(f(u(j,re),M[1]),m(f(u(ie,V),-k[1]),f(u(Q,B),E[1]))),m(f(u(ie,V),A[1]),m(f(u(J,R),-M[1]),f(u(I,D),E[1])))),W=m(m(f(u(j,re),A[1]),m(f(u(J,R),-k[1]),f(u(Y,F),E[1]))),m(f(u(Q,B),A[1]),m(f(u(Y,F),-M[1]),f(u(I,D),k[1])))),ae=u(q,W);return ae[ae.length-1]}}function s(m,u,w,f){return function(A,M,k,E,P){var D=m(w(A[0],A[0]),m(w(A[1],A[1]),w(A[2],A[2]))),F=f(D,M[0]),R=f(D,k[0]),L=f(D,E[0]),I=f(D,P[0]),B=m(w(M[0],M[0]),m(w(M[1],M[1]),w(M[2],M[2]))),V=f(B,A[0]),Z=f(B,k[0]),Y=f(B,E[0]),Q=f(B,P[0]),re=m(w(k[0],k[0]),m(w(k[1],k[1]),w(k[2],k[2]))),$=f(re,A[0]),J=f(re,M[0]),ie=f(re,E[0]),j=f(re,P[0]),q=m(w(E[0],E[0]),m(w(E[1],E[1]),w(E[2],E[2]))),W=f(q,A[0]),ae=f(q,M[0]),G=f(q,k[0]),ee=f(q,P[0]),te=m(w(P[0],P[0]),m(w(P[1],P[1]),w(P[2],P[2]))),le=f(te,A[0]),ue=f(te,M[0]),de=f(te,k[0]),he=f(te,E[0]),be=m(m(m(f(m(f(u(he,ee),k[1]),m(f(u(de,j),-E[1]),f(u(G,ie),P[1]))),M[2]),m(f(m(f(u(he,ee),M[1]),m(f(u(ue,Q),-E[1]),f(u(ae,Y),P[1]))),-k[2]),f(m(f(u(de,j),M[1]),m(f(u(ue,Q),-k[1]),f(u(J,Z),P[1]))),E[2]))),m(f(m(f(u(G,ie),M[1]),m(f(u(ae,Y),-k[1]),f(u(J,Z),E[1]))),-P[2]),m(f(m(f(u(he,ee),M[1]),m(f(u(ue,Q),-E[1]),f(u(ae,Y),P[1]))),A[2]),f(m(f(u(he,ee),A[1]),m(f(u(le,I),-E[1]),f(u(W,L),P[1]))),-M[2])))),m(m(f(m(f(u(ue,Q),A[1]),m(f(u(le,I),-M[1]),f(u(V,F),P[1]))),E[2]),m(f(m(f(u(ae,Y),A[1]),m(f(u(W,L),-M[1]),f(u(V,F),E[1]))),-P[2]),f(m(f(u(G,ie),M[1]),m(f(u(ae,Y),-k[1]),f(u(J,Z),E[1]))),A[2]))),m(f(m(f(u(G,ie),A[1]),m(f(u(W,L),-k[1]),f(u($,R),E[1]))),-M[2]),m(f(m(f(u(ae,Y),A[1]),m(f(u(W,L),-M[1]),f(u(V,F),E[1]))),k[2]),f(m(f(u(J,Z),A[1]),m(f(u($,R),-M[1]),f(u(V,F),k[1]))),-E[2]))))),me=m(m(m(f(m(f(u(he,ee),k[1]),m(f(u(de,j),-E[1]),f(u(G,ie),P[1]))),A[2]),f(m(f(u(he,ee),A[1]),m(f(u(le,I),-E[1]),f(u(W,L),P[1]))),-k[2])),m(f(m(f(u(de,j),A[1]),m(f(u(le,I),-k[1]),f(u($,R),P[1]))),E[2]),f(m(f(u(G,ie),A[1]),m(f(u(W,L),-k[1]),f(u($,R),E[1]))),-P[2]))),m(m(f(m(f(u(de,j),M[1]),m(f(u(ue,Q),-k[1]),f(u(J,Z),P[1]))),A[2]),f(m(f(u(de,j),A[1]),m(f(u(le,I),-k[1]),f(u($,R),P[1]))),-M[2])),m(f(m(f(u(ue,Q),A[1]),m(f(u(le,I),-M[1]),f(u(V,F),P[1]))),k[2]),f(m(f(u(J,Z),A[1]),m(f(u($,R),-M[1]),f(u(V,F),k[1]))),-P[2])))),_e=u(be,me);return _e[_e.length-1]}}function d(m,u,w,f){return function(A,M,k,E,P,D){var F=m(m(w(A[0],A[0]),w(A[1],A[1])),m(w(A[2],A[2]),w(A[3],A[3]))),R=f(F,M[0]),L=f(F,k[0]),I=f(F,E[0]),B=f(F,P[0]),V=f(F,D[0]),Z=m(m(w(M[0],M[0]),w(M[1],M[1])),m(w(M[2],M[2]),w(M[3],M[3]))),Y=f(Z,A[0]),Q=f(Z,k[0]),re=f(Z,E[0]),$=f(Z,P[0]),J=f(Z,D[0]),ie=m(m(w(k[0],k[0]),w(k[1],k[1])),m(w(k[2],k[2]),w(k[3],k[3]))),j=f(ie,A[0]),q=f(ie,M[0]),W=f(ie,E[0]),ae=f(ie,P[0]),G=f(ie,D[0]),ee=m(m(w(E[0],E[0]),w(E[1],E[1])),m(w(E[2],E[2]),w(E[3],E[3]))),te=f(ee,A[0]),le=f(ee,M[0]),ue=f(ee,k[0]),de=f(ee,P[0]),he=f(ee,D[0]),be=m(m(w(P[0],P[0]),w(P[1],P[1])),m(w(P[2],P[2]),w(P[3],P[3]))),me=f(be,A[0]),_e=f(be,M[0]),Ee=f(be,k[0]),De=f(be,E[0]),Se=f(be,D[0]),Fe=m(m(w(D[0],D[0]),w(D[1],D[1])),m(w(D[2],D[2]),w(D[3],D[3]))),ve=f(Fe,A[0]),Te=f(Fe,M[0]),Ie=f(Fe,k[0]),Ce=f(Fe,E[0]),Re=f(Fe,P[0]),Ue=m(m(m(f(m(m(f(m(f(u(Re,Se),E[1]),m(f(u(Ce,he),-P[1]),f(u(De,de),D[1]))),k[2]),f(m(f(u(Re,Se),k[1]),m(f(u(Ie,G),-P[1]),f(u(Ee,ae),D[1]))),-E[2])),m(f(m(f(u(Ce,he),k[1]),m(f(u(Ie,G),-E[1]),f(u(ue,W),D[1]))),P[2]),f(m(f(u(De,de),k[1]),m(f(u(Ee,ae),-E[1]),f(u(ue,W),P[1]))),-D[2]))),M[3]),m(f(m(m(f(m(f(u(Re,Se),E[1]),m(f(u(Ce,he),-P[1]),f(u(De,de),D[1]))),M[2]),f(m(f(u(Re,Se),M[1]),m(f(u(Te,J),-P[1]),f(u(_e,$),D[1]))),-E[2])),m(f(m(f(u(Ce,he),M[1]),m(f(u(Te,J),-E[1]),f(u(le,re),D[1]))),P[2]),f(m(f(u(De,de),M[1]),m(f(u(_e,$),-E[1]),f(u(le,re),P[1]))),-D[2]))),-k[3]),f(m(m(f(m(f(u(Re,Se),k[1]),m(f(u(Ie,G),-P[1]),f(u(Ee,ae),D[1]))),M[2]),f(m(f(u(Re,Se),M[1]),m(f(u(Te,J),-P[1]),f(u(_e,$),D[1]))),-k[2])),m(f(m(f(u(Ie,G),M[1]),m(f(u(Te,J),-k[1]),f(u(q,Q),D[1]))),P[2]),f(m(f(u(Ee,ae),M[1]),m(f(u(_e,$),-k[1]),f(u(q,Q),P[1]))),-D[2]))),E[3]))),m(m(f(m(m(f(m(f(u(Ce,he),k[1]),m(f(u(Ie,G),-E[1]),f(u(ue,W),D[1]))),M[2]),f(m(f(u(Ce,he),M[1]),m(f(u(Te,J),-E[1]),f(u(le,re),D[1]))),-k[2])),m(f(m(f(u(Ie,G),M[1]),m(f(u(Te,J),-k[1]),f(u(q,Q),D[1]))),E[2]),f(m(f(u(ue,W),M[1]),m(f(u(le,re),-k[1]),f(u(q,Q),E[1]))),-D[2]))),-P[3]),f(m(m(f(m(f(u(De,de),k[1]),m(f(u(Ee,ae),-E[1]),f(u(ue,W),P[1]))),M[2]),f(m(f(u(De,de),M[1]),m(f(u(_e,$),-E[1]),f(u(le,re),P[1]))),-k[2])),m(f(m(f(u(Ee,ae),M[1]),m(f(u(_e,$),-k[1]),f(u(q,Q),P[1]))),E[2]),f(m(f(u(ue,W),M[1]),m(f(u(le,re),-k[1]),f(u(q,Q),E[1]))),-P[2]))),D[3])),m(f(m(m(f(m(f(u(Re,Se),E[1]),m(f(u(Ce,he),-P[1]),f(u(De,de),D[1]))),M[2]),f(m(f(u(Re,Se),M[1]),m(f(u(Te,J),-P[1]),f(u(_e,$),D[1]))),-E[2])),m(f(m(f(u(Ce,he),M[1]),m(f(u(Te,J),-E[1]),f(u(le,re),D[1]))),P[2]),f(m(f(u(De,de),M[1]),m(f(u(_e,$),-E[1]),f(u(le,re),P[1]))),-D[2]))),A[3]),f(m(m(f(m(f(u(Re,Se),E[1]),m(f(u(Ce,he),-P[1]),f(u(De,de),D[1]))),A[2]),f(m(f(u(Re,Se),A[1]),m(f(u(ve,V),-P[1]),f(u(me,B),D[1]))),-E[2])),m(f(m(f(u(Ce,he),A[1]),m(f(u(ve,V),-E[1]),f(u(te,I),D[1]))),P[2]),f(m(f(u(De,de),A[1]),m(f(u(me,B),-E[1]),f(u(te,I),P[1]))),-D[2]))),-M[3])))),m(m(m(f(m(m(f(m(f(u(Re,Se),M[1]),m(f(u(Te,J),-P[1]),f(u(_e,$),D[1]))),A[2]),f(m(f(u(Re,Se),A[1]),m(f(u(ve,V),-P[1]),f(u(me,B),D[1]))),-M[2])),m(f(m(f(u(Te,J),A[1]),m(f(u(ve,V),-M[1]),f(u(Y,R),D[1]))),P[2]),f(m(f(u(_e,$),A[1]),m(f(u(me,B),-M[1]),f(u(Y,R),P[1]))),-D[2]))),E[3]),f(m(m(f(m(f(u(Ce,he),M[1]),m(f(u(Te,J),-E[1]),f(u(le,re),D[1]))),A[2]),f(m(f(u(Ce,he),A[1]),m(f(u(ve,V),-E[1]),f(u(te,I),D[1]))),-M[2])),m(f(m(f(u(Te,J),A[1]),m(f(u(ve,V),-M[1]),f(u(Y,R),D[1]))),E[2]),f(m(f(u(le,re),A[1]),m(f(u(te,I),-M[1]),f(u(Y,R),E[1]))),-D[2]))),-P[3])),m(f(m(m(f(m(f(u(De,de),M[1]),m(f(u(_e,$),-E[1]),f(u(le,re),P[1]))),A[2]),f(m(f(u(De,de),A[1]),m(f(u(me,B),-E[1]),f(u(te,I),P[1]))),-M[2])),m(f(m(f(u(_e,$),A[1]),m(f(u(me,B),-M[1]),f(u(Y,R),P[1]))),E[2]),f(m(f(u(le,re),A[1]),m(f(u(te,I),-M[1]),f(u(Y,R),E[1]))),-P[2]))),D[3]),f(m(m(f(m(f(u(Ce,he),k[1]),m(f(u(Ie,G),-E[1]),f(u(ue,W),D[1]))),M[2]),f(m(f(u(Ce,he),M[1]),m(f(u(Te,J),-E[1]),f(u(le,re),D[1]))),-k[2])),m(f(m(f(u(Ie,G),M[1]),m(f(u(Te,J),-k[1]),f(u(q,Q),D[1]))),E[2]),f(m(f(u(ue,W),M[1]),m(f(u(le,re),-k[1]),f(u(q,Q),E[1]))),-D[2]))),A[3]))),m(m(f(m(m(f(m(f(u(Ce,he),k[1]),m(f(u(Ie,G),-E[1]),f(u(ue,W),D[1]))),A[2]),f(m(f(u(Ce,he),A[1]),m(f(u(ve,V),-E[1]),f(u(te,I),D[1]))),-k[2])),m(f(m(f(u(Ie,G),A[1]),m(f(u(ve,V),-k[1]),f(u(j,L),D[1]))),E[2]),f(m(f(u(ue,W),A[1]),m(f(u(te,I),-k[1]),f(u(j,L),E[1]))),-D[2]))),-M[3]),f(m(m(f(m(f(u(Ce,he),M[1]),m(f(u(Te,J),-E[1]),f(u(le,re),D[1]))),A[2]),f(m(f(u(Ce,he),A[1]),m(f(u(ve,V),-E[1]),f(u(te,I),D[1]))),-M[2])),m(f(m(f(u(Te,J),A[1]),m(f(u(ve,V),-M[1]),f(u(Y,R),D[1]))),E[2]),f(m(f(u(le,re),A[1]),m(f(u(te,I),-M[1]),f(u(Y,R),E[1]))),-D[2]))),k[3])),m(f(m(m(f(m(f(u(Ie,G),M[1]),m(f(u(Te,J),-k[1]),f(u(q,Q),D[1]))),A[2]),f(m(f(u(Ie,G),A[1]),m(f(u(ve,V),-k[1]),f(u(j,L),D[1]))),-M[2])),m(f(m(f(u(Te,J),A[1]),m(f(u(ve,V),-M[1]),f(u(Y,R),D[1]))),k[2]),f(m(f(u(q,Q),A[1]),m(f(u(j,L),-M[1]),f(u(Y,R),k[1]))),-D[2]))),-E[3]),f(m(m(f(m(f(u(ue,W),M[1]),m(f(u(le,re),-k[1]),f(u(q,Q),E[1]))),A[2]),f(m(f(u(ue,W),A[1]),m(f(u(te,I),-k[1]),f(u(j,L),E[1]))),-M[2])),m(f(m(f(u(le,re),A[1]),m(f(u(te,I),-M[1]),f(u(Y,R),E[1]))),k[2]),f(m(f(u(q,Q),A[1]),m(f(u(j,L),-M[1]),f(u(Y,R),k[1]))),-E[2]))),D[3]))))),qe=m(m(m(f(m(m(f(m(f(u(Re,Se),E[1]),m(f(u(Ce,he),-P[1]),f(u(De,de),D[1]))),k[2]),f(m(f(u(Re,Se),k[1]),m(f(u(Ie,G),-P[1]),f(u(Ee,ae),D[1]))),-E[2])),m(f(m(f(u(Ce,he),k[1]),m(f(u(Ie,G),-E[1]),f(u(ue,W),D[1]))),P[2]),f(m(f(u(De,de),k[1]),m(f(u(Ee,ae),-E[1]),f(u(ue,W),P[1]))),-D[2]))),A[3]),m(f(m(m(f(m(f(u(Re,Se),E[1]),m(f(u(Ce,he),-P[1]),f(u(De,de),D[1]))),A[2]),f(m(f(u(Re,Se),A[1]),m(f(u(ve,V),-P[1]),f(u(me,B),D[1]))),-E[2])),m(f(m(f(u(Ce,he),A[1]),m(f(u(ve,V),-E[1]),f(u(te,I),D[1]))),P[2]),f(m(f(u(De,de),A[1]),m(f(u(me,B),-E[1]),f(u(te,I),P[1]))),-D[2]))),-k[3]),f(m(m(f(m(f(u(Re,Se),k[1]),m(f(u(Ie,G),-P[1]),f(u(Ee,ae),D[1]))),A[2]),f(m(f(u(Re,Se),A[1]),m(f(u(ve,V),-P[1]),f(u(me,B),D[1]))),-k[2])),m(f(m(f(u(Ie,G),A[1]),m(f(u(ve,V),-k[1]),f(u(j,L),D[1]))),P[2]),f(m(f(u(Ee,ae),A[1]),m(f(u(me,B),-k[1]),f(u(j,L),P[1]))),-D[2]))),E[3]))),m(m(f(m(m(f(m(f(u(Ce,he),k[1]),m(f(u(Ie,G),-E[1]),f(u(ue,W),D[1]))),A[2]),f(m(f(u(Ce,he),A[1]),m(f(u(ve,V),-E[1]),f(u(te,I),D[1]))),-k[2])),m(f(m(f(u(Ie,G),A[1]),m(f(u(ve,V),-k[1]),f(u(j,L),D[1]))),E[2]),f(m(f(u(ue,W),A[1]),m(f(u(te,I),-k[1]),f(u(j,L),E[1]))),-D[2]))),-P[3]),f(m(m(f(m(f(u(De,de),k[1]),m(f(u(Ee,ae),-E[1]),f(u(ue,W),P[1]))),A[2]),f(m(f(u(De,de),A[1]),m(f(u(me,B),-E[1]),f(u(te,I),P[1]))),-k[2])),m(f(m(f(u(Ee,ae),A[1]),m(f(u(me,B),-k[1]),f(u(j,L),P[1]))),E[2]),f(m(f(u(ue,W),A[1]),m(f(u(te,I),-k[1]),f(u(j,L),E[1]))),-P[2]))),D[3])),m(f(m(m(f(m(f(u(Re,Se),k[1]),m(f(u(Ie,G),-P[1]),f(u(Ee,ae),D[1]))),M[2]),f(m(f(u(Re,Se),M[1]),m(f(u(Te,J),-P[1]),f(u(_e,$),D[1]))),-k[2])),m(f(m(f(u(Ie,G),M[1]),m(f(u(Te,J),-k[1]),f(u(q,Q),D[1]))),P[2]),f(m(f(u(Ee,ae),M[1]),m(f(u(_e,$),-k[1]),f(u(q,Q),P[1]))),-D[2]))),A[3]),f(m(m(f(m(f(u(Re,Se),k[1]),m(f(u(Ie,G),-P[1]),f(u(Ee,ae),D[1]))),A[2]),f(m(f(u(Re,Se),A[1]),m(f(u(ve,V),-P[1]),f(u(me,B),D[1]))),-k[2])),m(f(m(f(u(Ie,G),A[1]),m(f(u(ve,V),-k[1]),f(u(j,L),D[1]))),P[2]),f(m(f(u(Ee,ae),A[1]),m(f(u(me,B),-k[1]),f(u(j,L),P[1]))),-D[2]))),-M[3])))),m(m(m(f(m(m(f(m(f(u(Re,Se),M[1]),m(f(u(Te,J),-P[1]),f(u(_e,$),D[1]))),A[2]),f(m(f(u(Re,Se),A[1]),m(f(u(ve,V),-P[1]),f(u(me,B),D[1]))),-M[2])),m(f(m(f(u(Te,J),A[1]),m(f(u(ve,V),-M[1]),f(u(Y,R),D[1]))),P[2]),f(m(f(u(_e,$),A[1]),m(f(u(me,B),-M[1]),f(u(Y,R),P[1]))),-D[2]))),k[3]),f(m(m(f(m(f(u(Ie,G),M[1]),m(f(u(Te,J),-k[1]),f(u(q,Q),D[1]))),A[2]),f(m(f(u(Ie,G),A[1]),m(f(u(ve,V),-k[1]),f(u(j,L),D[1]))),-M[2])),m(f(m(f(u(Te,J),A[1]),m(f(u(ve,V),-M[1]),f(u(Y,R),D[1]))),k[2]),f(m(f(u(q,Q),A[1]),m(f(u(j,L),-M[1]),f(u(Y,R),k[1]))),-D[2]))),-P[3])),m(f(m(m(f(m(f(u(Ee,ae),M[1]),m(f(u(_e,$),-k[1]),f(u(q,Q),P[1]))),A[2]),f(m(f(u(Ee,ae),A[1]),m(f(u(me,B),-k[1]),f(u(j,L),P[1]))),-M[2])),m(f(m(f(u(_e,$),A[1]),m(f(u(me,B),-M[1]),f(u(Y,R),P[1]))),k[2]),f(m(f(u(q,Q),A[1]),m(f(u(j,L),-M[1]),f(u(Y,R),k[1]))),-P[2]))),D[3]),f(m(m(f(m(f(u(De,de),k[1]),m(f(u(Ee,ae),-E[1]),f(u(ue,W),P[1]))),M[2]),f(m(f(u(De,de),M[1]),m(f(u(_e,$),-E[1]),f(u(le,re),P[1]))),-k[2])),m(f(m(f(u(Ee,ae),M[1]),m(f(u(_e,$),-k[1]),f(u(q,Q),P[1]))),E[2]),f(m(f(u(ue,W),M[1]),m(f(u(le,re),-k[1]),f(u(q,Q),E[1]))),-P[2]))),A[3]))),m(m(f(m(m(f(m(f(u(De,de),k[1]),m(f(u(Ee,ae),-E[1]),f(u(ue,W),P[1]))),A[2]),f(m(f(u(De,de),A[1]),m(f(u(me,B),-E[1]),f(u(te,I),P[1]))),-k[2])),m(f(m(f(u(Ee,ae),A[1]),m(f(u(me,B),-k[1]),f(u(j,L),P[1]))),E[2]),f(m(f(u(ue,W),A[1]),m(f(u(te,I),-k[1]),f(u(j,L),E[1]))),-P[2]))),-M[3]),f(m(m(f(m(f(u(De,de),M[1]),m(f(u(_e,$),-E[1]),f(u(le,re),P[1]))),A[2]),f(m(f(u(De,de),A[1]),m(f(u(me,B),-E[1]),f(u(te,I),P[1]))),-M[2])),m(f(m(f(u(_e,$),A[1]),m(f(u(me,B),-M[1]),f(u(Y,R),P[1]))),E[2]),f(m(f(u(le,re),A[1]),m(f(u(te,I),-M[1]),f(u(Y,R),E[1]))),-P[2]))),k[3])),m(f(m(m(f(m(f(u(Ee,ae),M[1]),m(f(u(_e,$),-k[1]),f(u(q,Q),P[1]))),A[2]),f(m(f(u(Ee,ae),A[1]),m(f(u(me,B),-k[1]),f(u(j,L),P[1]))),-M[2])),m(f(m(f(u(_e,$),A[1]),m(f(u(me,B),-M[1]),f(u(Y,R),P[1]))),k[2]),f(m(f(u(q,Q),A[1]),m(f(u(j,L),-M[1]),f(u(Y,R),k[1]))),-P[2]))),-E[3]),f(m(m(f(m(f(u(ue,W),M[1]),m(f(u(le,re),-k[1]),f(u(q,Q),E[1]))),A[2]),f(m(f(u(ue,W),A[1]),m(f(u(te,I),-k[1]),f(u(j,L),E[1]))),-M[2])),m(f(m(f(u(le,re),A[1]),m(f(u(te,I),-M[1]),f(u(Y,R),E[1]))),k[2]),f(m(f(u(q,Q),A[1]),m(f(u(j,L),-M[1]),f(u(Y,R),k[1]))),-E[2]))),P[3]))))),Xe=u(Ue,qe);return Xe[Xe.length-1]}}var p=[function(){return 0},function(){return 0},function(){return 0}];function c(m){var u=p[m.length];return u||(u=p[m.length]=r(m.length)),u.apply(void 0,m)}function g(m,u,w,f,A,M,k,E){return function(P,D,F,R,L,I){switch(arguments.length){case 0:case 1:return 0;case 2:return f(P,D);case 3:return A(P,D,F);case 4:return M(P,D,F,R);case 5:return k(P,D,F,R,L);case 6:return E(P,D,F,R,L,I)}for(var B=new Array(arguments.length),V=0;V<arguments.length;++V)B[V]=arguments[V];return m(B)}}!function(){for(;p.length<=6;)p.push(r(p.length));T.exports=g.apply(void 0,[c].concat(p));for(var m=0;m<=6;++m)T.exports[m]=p[m]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(x,T,b){"use strict";var e=x("robust-determinant");function o(p){return(2===p?i:3===p?l:4===p?r:5===p?y:h)(p<6?e[p]:e)}function i(p){return function(c,g){return[p([[+g[0],+c[0][1]],[+g[1],+c[1][1]]]),p([[+c[0][0],+g[0]],[+c[1][0],+g[1]]]),p(c)]}}function l(p){return function(c,g){return[p([[+g[0],+c[0][1],+c[0][2]],[+g[1],+c[1][1],+c[1][2]],[+g[2],+c[2][1],+c[2][2]]]),p([[+c[0][0],+g[0],+c[0][2]],[+c[1][0],+g[1],+c[1][2]],[+c[2][0],+g[2],+c[2][2]]]),p([[+c[0][0],+c[0][1],+g[0]],[+c[1][0],+c[1][1],+g[1]],[+c[2][0],+c[2][1],+g[2]]]),p(c)]}}function r(p){return function(c,g){return[p([[+g[0],+c[0][1],+c[0][2],+c[0][3]],[+g[1],+c[1][1],+c[1][2],+c[1][3]],[+g[2],+c[2][1],+c[2][2],+c[2][3]],[+g[3],+c[3][1],+c[3][2],+c[3][3]]]),p([[+c[0][0],+g[0],+c[0][2],+c[0][3]],[+c[1][0],+g[1],+c[1][2],+c[1][3]],[+c[2][0],+g[2],+c[2][2],+c[2][3]],[+c[3][0],+g[3],+c[3][2],+c[3][3]]]),p([[+c[0][0],+c[0][1],+g[0],+c[0][3]],[+c[1][0],+c[1][1],+g[1],+c[1][3]],[+c[2][0],+c[2][1],+g[2],+c[2][3]],[+c[3][0],+c[3][1],+g[3],+c[3][3]]]),p([[+c[0][0],+c[0][1],+c[0][2],+g[0]],[+c[1][0],+c[1][1],+c[1][2],+g[1]],[+c[2][0],+c[2][1],+c[2][2],+g[2]],[+c[3][0],+c[3][1],+c[3][2],+g[3]]]),p(c)]}}function y(p){return function(c,g){return[p([[+g[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4]],[+g[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4]],[+g[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4]],[+g[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4]],[+g[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4]]]),p([[+c[0][0],+g[0],+c[0][2],+c[0][3],+c[0][4]],[+c[1][0],+g[1],+c[1][2],+c[1][3],+c[1][4]],[+c[2][0],+g[2],+c[2][2],+c[2][3],+c[2][4]],[+c[3][0],+g[3],+c[3][2],+c[3][3],+c[3][4]],[+c[4][0],+g[4],+c[4][2],+c[4][3],+c[4][4]]]),p([[+c[0][0],+c[0][1],+g[0],+c[0][3],+c[0][4]],[+c[1][0],+c[1][1],+g[1],+c[1][3],+c[1][4]],[+c[2][0],+c[2][1],+g[2],+c[2][3],+c[2][4]],[+c[3][0],+c[3][1],+g[3],+c[3][3],+c[3][4]],[+c[4][0],+c[4][1],+g[4],+c[4][3],+c[4][4]]]),p([[+c[0][0],+c[0][1],+c[0][2],+g[0],+c[0][4]],[+c[1][0],+c[1][1],+c[1][2],+g[1],+c[1][4]],[+c[2][0],+c[2][1],+c[2][2],+g[2],+c[2][4]],[+c[3][0],+c[3][1],+c[3][2],+g[3],+c[3][4]],[+c[4][0],+c[4][1],+c[4][2],+g[4],+c[4][4]]]),p([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+g[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+g[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+g[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+g[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+g[4]]]),p(c)]}}function h(p){return function(c,g){return[p([[+g[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+g[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+g[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+g[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+g[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+g[5],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),p([[+c[0][0],+g[0],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+g[1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+g[2],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+g[3],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+g[4],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+g[5],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),p([[+c[0][0],+c[0][1],+g[0],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+g[1],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+g[2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+g[3],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+g[4],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+g[5],+c[5][3],+c[5][4],+c[5][5]]]),p([[+c[0][0],+c[0][1],+c[0][2],+g[0],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+g[1],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+g[2],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+g[3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+g[4],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+g[5],+c[5][4],+c[5][5]]]),p([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+g[0],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+g[1],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+g[2],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+g[3],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+g[4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+g[5],+c[5][5]]]),p([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+g[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+g[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+g[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+g[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+g[4]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+g[5]]]),p(c)]}}var s=[function(){return[[0]]},function(p,c){return[[c[0]],[p[0][0]]]}];function d(p,c,g,m,u,w,f,A){return function(M,k){switch(M.length){case 0:return p(M,k);case 1:return c(M,k);case 2:return g(M,k);case 3:return m(M,k);case 4:return u(M,k);case 5:return w(M,k)}var E=f[M.length];return E||(E=f[M.length]=A(M.length)),E(M,k)}}!function(){for(;s.length<6;)s.push(o(s.length));T.exports=d.apply(void 0,s.concat([s,o]));for(var p=0;p<6;++p)T.exports[p]=s[p]}()},{"robust-determinant":280}],284:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum"),i=x("robust-scale"),l=x("robust-subtract");function r(u,w,f,A){return function(M,k,E){var P=u(u(w(k[1],E[0]),w(-E[1],k[0])),u(w(M[1],k[0]),w(-k[1],M[0]))),D=u(w(M[1],E[0]),w(-E[1],M[0])),F=A(P,D);return F[F.length-1]}}function y(u,w,f,A){return function(M,k,E,P){var D=u(u(f(u(w(E[1],P[0]),w(-P[1],E[0])),k[2]),u(f(u(w(k[1],P[0]),w(-P[1],k[0])),-E[2]),f(u(w(k[1],E[0]),w(-E[1],k[0])),P[2]))),u(f(u(w(k[1],P[0]),w(-P[1],k[0])),M[2]),u(f(u(w(M[1],P[0]),w(-P[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),P[2])))),F=u(u(f(u(w(E[1],P[0]),w(-P[1],E[0])),M[2]),u(f(u(w(M[1],P[0]),w(-P[1],M[0])),-E[2]),f(u(w(M[1],E[0]),w(-E[1],M[0])),P[2]))),u(f(u(w(k[1],E[0]),w(-E[1],k[0])),M[2]),u(f(u(w(M[1],E[0]),w(-E[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),E[2])))),R=A(D,F);return R[R.length-1]}}function h(u,w,f,A){return function(M,k,E,P,D){var F=u(u(u(f(u(f(u(w(P[1],D[0]),w(-D[1],P[0])),E[2]),u(f(u(w(E[1],D[0]),w(-D[1],E[0])),-P[2]),f(u(w(E[1],P[0]),w(-P[1],E[0])),D[2]))),k[3]),u(f(u(f(u(w(P[1],D[0]),w(-D[1],P[0])),k[2]),u(f(u(w(k[1],D[0]),w(-D[1],k[0])),-P[2]),f(u(w(k[1],P[0]),w(-P[1],k[0])),D[2]))),-E[3]),f(u(f(u(w(E[1],D[0]),w(-D[1],E[0])),k[2]),u(f(u(w(k[1],D[0]),w(-D[1],k[0])),-E[2]),f(u(w(k[1],E[0]),w(-E[1],k[0])),D[2]))),P[3]))),u(f(u(f(u(w(E[1],P[0]),w(-P[1],E[0])),k[2]),u(f(u(w(k[1],P[0]),w(-P[1],k[0])),-E[2]),f(u(w(k[1],E[0]),w(-E[1],k[0])),P[2]))),-D[3]),u(f(u(f(u(w(P[1],D[0]),w(-D[1],P[0])),k[2]),u(f(u(w(k[1],D[0]),w(-D[1],k[0])),-P[2]),f(u(w(k[1],P[0]),w(-P[1],k[0])),D[2]))),M[3]),f(u(f(u(w(P[1],D[0]),w(-D[1],P[0])),M[2]),u(f(u(w(M[1],D[0]),w(-D[1],M[0])),-P[2]),f(u(w(M[1],P[0]),w(-P[1],M[0])),D[2]))),-k[3])))),u(u(f(u(f(u(w(k[1],D[0]),w(-D[1],k[0])),M[2]),u(f(u(w(M[1],D[0]),w(-D[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),D[2]))),P[3]),u(f(u(f(u(w(k[1],P[0]),w(-P[1],k[0])),M[2]),u(f(u(w(M[1],P[0]),w(-P[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),P[2]))),-D[3]),f(u(f(u(w(E[1],P[0]),w(-P[1],E[0])),k[2]),u(f(u(w(k[1],P[0]),w(-P[1],k[0])),-E[2]),f(u(w(k[1],E[0]),w(-E[1],k[0])),P[2]))),M[3]))),u(f(u(f(u(w(E[1],P[0]),w(-P[1],E[0])),M[2]),u(f(u(w(M[1],P[0]),w(-P[1],M[0])),-E[2]),f(u(w(M[1],E[0]),w(-E[1],M[0])),P[2]))),-k[3]),u(f(u(f(u(w(k[1],P[0]),w(-P[1],k[0])),M[2]),u(f(u(w(M[1],P[0]),w(-P[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),P[2]))),E[3]),f(u(f(u(w(k[1],E[0]),w(-E[1],k[0])),M[2]),u(f(u(w(M[1],E[0]),w(-E[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),E[2]))),-P[3]))))),R=u(u(u(f(u(f(u(w(P[1],D[0]),w(-D[1],P[0])),E[2]),u(f(u(w(E[1],D[0]),w(-D[1],E[0])),-P[2]),f(u(w(E[1],P[0]),w(-P[1],E[0])),D[2]))),M[3]),f(u(f(u(w(P[1],D[0]),w(-D[1],P[0])),M[2]),u(f(u(w(M[1],D[0]),w(-D[1],M[0])),-P[2]),f(u(w(M[1],P[0]),w(-P[1],M[0])),D[2]))),-E[3])),u(f(u(f(u(w(E[1],D[0]),w(-D[1],E[0])),M[2]),u(f(u(w(M[1],D[0]),w(-D[1],M[0])),-E[2]),f(u(w(M[1],E[0]),w(-E[1],M[0])),D[2]))),P[3]),f(u(f(u(w(E[1],P[0]),w(-P[1],E[0])),M[2]),u(f(u(w(M[1],P[0]),w(-P[1],M[0])),-E[2]),f(u(w(M[1],E[0]),w(-E[1],M[0])),P[2]))),-D[3]))),u(u(f(u(f(u(w(E[1],D[0]),w(-D[1],E[0])),k[2]),u(f(u(w(k[1],D[0]),w(-D[1],k[0])),-E[2]),f(u(w(k[1],E[0]),w(-E[1],k[0])),D[2]))),M[3]),f(u(f(u(w(E[1],D[0]),w(-D[1],E[0])),M[2]),u(f(u(w(M[1],D[0]),w(-D[1],M[0])),-E[2]),f(u(w(M[1],E[0]),w(-E[1],M[0])),D[2]))),-k[3])),u(f(u(f(u(w(k[1],D[0]),w(-D[1],k[0])),M[2]),u(f(u(w(M[1],D[0]),w(-D[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),D[2]))),E[3]),f(u(f(u(w(k[1],E[0]),w(-E[1],k[0])),M[2]),u(f(u(w(M[1],E[0]),w(-E[1],M[0])),-k[2]),f(u(w(M[1],k[0]),w(-k[1],M[0])),E[2]))),-D[3])))),L=A(F,R);return L[L.length-1]}}function s(u){return(3===u?r:4===u?y:h)(o,e,i,l)}var d=s(3),p=s(4),c=[function(){return 0},function(){return 0},function(u,w){return w[0]-u[0]},function(u,w,f){var A,M=(u[1]-f[1])*(w[0]-f[0]),k=(u[0]-f[0])*(w[1]-f[1]),E=M-k;if(M>0){if(k<=0)return E;A=M+k}else{if(!(M<0)||k>=0)return E;A=-(M+k)}var P=33306690738754716e-32*A;return E>=P||E<=-P?E:d(u,w,f)},function(u,w,f,A){var M=u[0]-A[0],k=w[0]-A[0],E=f[0]-A[0],P=u[1]-A[1],D=w[1]-A[1],F=f[1]-A[1],R=u[2]-A[2],L=w[2]-A[2],I=f[2]-A[2],B=k*F,V=E*D,Z=E*P,Y=M*F,Q=M*D,re=k*P,$=R*(B-V)+L*(Z-Y)+I*(Q-re),J=7771561172376103e-31*((Math.abs(B)+Math.abs(V))*Math.abs(R)+(Math.abs(Z)+Math.abs(Y))*Math.abs(L)+(Math.abs(Q)+Math.abs(re))*Math.abs(I));return $>J||-$>J?$:p(u,w,f,A)}];function g(u){var w=c[u.length];return w||(w=c[u.length]=s(u.length)),w.apply(void 0,u)}function m(u,w,f,A,M,k,E){return function(P,D,F,R,L){switch(arguments.length){case 0:case 1:return 0;case 2:return A(P,D);case 3:return M(P,D,F);case 4:return k(P,D,F,R);case 5:return E(P,D,F,R,L)}for(var I=new Array(arguments.length),B=0;B<arguments.length;++B)I[B]=arguments[B];return u(I)}}!function(){for(;c.length<=5;)c.push(s(c.length));T.exports=m.apply(void 0,[g].concat(c));for(var u=0;u<=5;++u)T.exports[u]=c[u]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(x,T,b){"use strict";var e=x("robust-sum"),o=x("robust-scale");T.exports=function(i,l){if(1===i.length)return o(l,i[0]);if(1===l.length)return o(i,l[0]);if(0===i.length||0===l.length)return[0];var r=[0];if(i.length<l.length)for(var y=0;y<i.length;++y)r=e(r,o(l,i[y]));else for(y=0;y<l.length;++y)r=e(r,o(i,l[y]));return r}},{"robust-scale":286,"robust-sum":289}],286:[function(x,T,b){"use strict";var e=x("two-product"),o=x("two-sum");T.exports=function(i,l){var r=i.length;if(1===r){var y=e(i[0],l);return y[0]?y:[y[1]]}var h=new Array(2*r),s=[.1,.1],d=[.1,.1],p=0;e(i[0],l,s),s[0]&&(h[p++]=s[0]);for(var c=1;c<r;++c){e(i[c],l,d),o(s[1],d[0],s),s[0]&&(h[p++]=s[0]);var m=d[1],u=s[1],w=m+u,f=u-(w-m);s[1]=w,f&&(h[p++]=f)}return s[1]&&(h[p++]=s[1]),0===p&&(h[p++]=0),h.length=p,h}},{"two-product":306,"two-sum":307}],287:[function(x,T,b){"use strict";T.exports=function(o,i,l,r){var y=e(o,l,r),h=e(i,l,r);if(y>0&&h>0||y<0&&h<0)return!1;var s=e(l,o,i),d=e(r,o,i);return!(s>0&&d>0||s<0&&d<0)&&(0!==y||0!==h||0!==s||0!==d||function(p,c,g,m){for(var u=0;u<2;++u){var w=p[u],f=c[u],A=Math.min(w,f),M=Math.max(w,f),k=g[u],E=m[u],P=Math.min(k,E);if(Math.max(k,E)<A||M<P)return!1}return!0}(o,i,l,r))};var e=x("robust-orientation")[3]},{"robust-orientation":284}],288:[function(x,T,b){"use strict";T.exports=function(e,o){var F,R,L,I,B,i=0|e.length,l=0|o.length;if(1===i&&1===l)return(B=(F=e[0])-((L=F+(R=-o[0]))-(I=L-F))+(R-I))?[B,L]:[L];var r,y,h=new Array(i+l),s=0,d=0,p=0,c=Math.abs,g=e[d],m=c(g),u=-o[p],w=c(u);m<w?(y=g,(d+=1)<i&&(m=c(g=e[d]))):(y=u,(p+=1)<l&&(w=c(u=-o[p]))),d<i&&m<w||p>=l?(r=g,(d+=1)<i&&(m=c(g=e[d]))):(r=u,(p+=1)<l&&(w=c(u=-o[p])));for(var f,A,M=r+y,k=M-r,E=y-k,P=E,D=M;d<i&&p<l;)m<w?(r=g,(d+=1)<i&&(m=c(g=e[d]))):(r=u,(p+=1)<l&&(w=c(u=-o[p]))),(E=(y=P)-(k=(M=r+y)-r))&&(h[s++]=E),P=D-((f=D+M)-(A=f-D))+(M-A),D=f;for(;d<i;)(E=(y=P)-(k=(M=(r=g)+y)-r))&&(h[s++]=E),P=D-((f=D+M)-(A=f-D))+(M-A),D=f,(d+=1)<i&&(g=e[d]);for(;p<l;)(E=(y=P)-(k=(M=(r=u)+y)-r))&&(h[s++]=E),P=D-((f=D+M)-(A=f-D))+(M-A),D=f,(p+=1)<l&&(u=-o[p]);return P&&(h[s++]=P),D&&(h[s++]=D),s||(h[s++]=0),h.length=s,h}},{}],289:[function(x,T,b){"use strict";T.exports=function(e,o){var F,R,L,I,B,i=0|e.length,l=0|o.length;if(1===i&&1===l)return(B=(F=e[0])-((L=F+(R=o[0]))-(I=L-F))+(R-I))?[B,L]:[L];var r,y,h=new Array(i+l),s=0,d=0,p=0,c=Math.abs,g=e[d],m=c(g),u=o[p],w=c(u);m<w?(y=g,(d+=1)<i&&(m=c(g=e[d]))):(y=u,(p+=1)<l&&(w=c(u=o[p]))),d<i&&m<w||p>=l?(r=g,(d+=1)<i&&(m=c(g=e[d]))):(r=u,(p+=1)<l&&(w=c(u=o[p])));for(var f,A,M=r+y,k=M-r,E=y-k,P=E,D=M;d<i&&p<l;)m<w?(r=g,(d+=1)<i&&(m=c(g=e[d]))):(r=u,(p+=1)<l&&(w=c(u=o[p]))),(E=(y=P)-(k=(M=r+y)-r))&&(h[s++]=E),P=D-((f=D+M)-(A=f-D))+(M-A),D=f;for(;d<i;)(E=(y=P)-(k=(M=(r=g)+y)-r))&&(h[s++]=E),P=D-((f=D+M)-(A=f-D))+(M-A),D=f,(d+=1)<i&&(g=e[d]);for(;p<l;)(E=(y=P)-(k=(M=(r=u)+y)-r))&&(h[s++]=E),P=D-((f=D+M)-(A=f-D))+(M-A),D=f,(p+=1)<l&&(u=o[p]);return P&&(h[s++]=P),D&&(h[s++]=D),s||(h[s++]=0),h.length=s,h}},{}],290:[function(x,T,b){"use strict";T.exports=function(i){return o(e(i))};var e=x("boundary-cells"),o=x("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(x,T,b){"use strict";T.exports=function(r,y,h,s){if(h=h||0,void 0===s&&(s=function(f){for(var A=f.length,M=0,k=0;k<A;++k)M=0|Math.max(M,f[k].length);return M-1}(r)),0===r.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var d=function(f,A){for(var M=f.length,k=o.mallocUint8(M),E=0;E<M;++E)k[E]=f[E]<A|0;return k}(y,+h),p=function(f,A){for(var M=f.length,E=o.mallocUint32(2*(A*(A+1)/2*M|0)),P=0,D=0;D<M;++D)for(var F=f[D],R=(A=F.length,0);R<A;++R)for(var L=0;L<R;++L){var I=F[L],B=F[R];E[P++]=0|Math.min(I,B),E[P++]=0|Math.max(I,B)}i(e(E,[P/2|0,2]));var V=2;for(D=2;D<P;D+=2)E[D-2]===E[D]&&E[D-1]===E[D+1]||(E[V++]=E[D],E[V++]=E[D+1]);return e(E,[V/2|0,2])}(r,s),c=function(f,A,M,k){for(var E=f.data,P=f.shape[0],D=o.mallocDouble(P),F=0,R=0;R<P;++R){var L=E[2*R],I=E[2*R+1];if(M[L]!==M[I]){var B=A[L],V=A[I];E[2*F]=L,E[2*F+1]=I,D[F++]=(V-k)/(V-B)}}return f.shape[0]=F,e(D,[F])}(p,y,d,+h),g=function(f,A){var M=o.mallocInt32(2*A),k=f.shape[0],E=f.data;M[0]=0;for(var P=0,D=0;D<k;++D){var F=E[2*D];if(F!==P){for(M[2*P+1]=D;++P<F;)M[2*P]=D,M[2*P+1]=D;M[2*P]=D}}for(M[2*P+1]=k;++P<A;)M[2*P]=M[2*P+1]=k;return M}(p,0|y.length),m=l(s)(r,p.data,g,d),u=function(f){for(var A=0|f.shape[0],M=f.data,k=new Array(A),E=0;E<A;++E)k[E]=[M[2*E],M[2*E+1]];return k}(p),w=[].slice.call(c.data,0,c.shape[0]);return o.free(d),o.free(p.data),o.free(c.data),o.free(g),{cells:m,vertexIds:u,vertexWeights:w}};var e=x("ndarray"),o=x("typedarray-pool"),i=x("ndarray-sort"),l=x("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(x,T,b){"use strict";T.exports=function(o){return e[o]()};var e=[function(){return function(o,i,l,r){for(var y=o.length,h=0;h<y;++h);return[]}},function(){function o(i,l,r,y){for(var h=0|Math.min(r,y),s=0|Math.max(r,y),d=i[2*h],p=i[2*h+1];d<p;){var c=d+p>>1,g=l[2*c+1];if(g===s)return c;s<g?p=c:d=c+1}return d}return function(i,l,r,y){for(var h=i.length,s=[],d=0;d<h;++d){var p=i[d];if(2===p.length){var c=(y[p[0]]<<0)+(y[p[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:break;case 1:s.push([o(r,l,p[0],p[1])]);break;case 2:s.push([o(r,l,p[1],p[0])])}}}return s}},function(){function o(i,l,r,y){for(var h=0|Math.min(r,y),s=0|Math.max(r,y),d=i[2*h],p=i[2*h+1];d<p;){var c=d+p>>1,g=l[2*c+1];if(g===s)return c;s<g?p=c:d=c+1}return d}return function(i,l,r,y){for(var h=i.length,s=[],d=0;d<h;++d){var p=i[d],c=p.length;if(3===c){if(0==(g=(y[p[0]]<<0)+(y[p[1]]<<1)+(y[p[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([o(r,l,p[0],p[2]),o(r,l,p[0],p[1])]);break;case 2:s.push([o(r,l,p[1],p[0]),o(r,l,p[1],p[2])]);break;case 3:s.push([o(r,l,p[0],p[2]),o(r,l,p[1],p[2])]);break;case 4:s.push([o(r,l,p[2],p[1]),o(r,l,p[2],p[0])]);break;case 5:s.push([o(r,l,p[2],p[1]),o(r,l,p[0],p[1])]);break;case 6:s.push([o(r,l,p[1],p[0]),o(r,l,p[2],p[0])])}}else if(2===c){var g;if(0==(g=(y[p[0]]<<0)+(y[p[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([o(r,l,p[0],p[1])]);break;case 2:s.push([o(r,l,p[1],p[0])])}}}return s}},function(){function o(i,l,r,y){for(var h=0|Math.min(r,y),s=0|Math.max(r,y),d=i[2*h],p=i[2*h+1];d<p;){var c=d+p>>1,g=l[2*c+1];if(g===s)return c;s<g?p=c:d=c+1}return d}return function(i,l,r,y){for(var h=i.length,s=[],d=0;d<h;++d){var p=i[d],c=p.length;if(4===c){if(0==(g=(y[p[0]]<<0)+(y[p[1]]<<1)+(y[p[2]]<<2)+(y[p[3]]<<3))||15===g)continue;switch(g){case 0:break;case 1:s.push([o(r,l,p[0],p[1]),o(r,l,p[0],p[2]),o(r,l,p[0],p[3])]);break;case 2:s.push([o(r,l,p[1],p[2]),o(r,l,p[1],p[0]),o(r,l,p[1],p[3])]);break;case 3:s.push([o(r,l,p[1],p[2]),o(r,l,p[0],p[2]),o(r,l,p[0],p[3])],[o(r,l,p[1],p[3]),o(r,l,p[1],p[2]),o(r,l,p[0],p[3])]);break;case 4:s.push([o(r,l,p[2],p[0]),o(r,l,p[2],p[1]),o(r,l,p[2],p[3])]);break;case 5:s.push([o(r,l,p[0],p[1]),o(r,l,p[2],p[1]),o(r,l,p[0],p[3])],[o(r,l,p[2],p[1]),o(r,l,p[2],p[3]),o(r,l,p[0],p[3])]);break;case 6:s.push([o(r,l,p[2],p[0]),o(r,l,p[1],p[0]),o(r,l,p[1],p[3])],[o(r,l,p[2],p[3]),o(r,l,p[2],p[0]),o(r,l,p[1],p[3])]);break;case 7:s.push([o(r,l,p[0],p[3]),o(r,l,p[1],p[3]),o(r,l,p[2],p[3])]);break;case 8:s.push([o(r,l,p[3],p[1]),o(r,l,p[3],p[0]),o(r,l,p[3],p[2])]);break;case 9:s.push([o(r,l,p[3],p[1]),o(r,l,p[0],p[1]),o(r,l,p[0],p[2])],[o(r,l,p[3],p[2]),o(r,l,p[3],p[1]),o(r,l,p[0],p[2])]);break;case 10:s.push([o(r,l,p[1],p[0]),o(r,l,p[3],p[0]),o(r,l,p[1],p[2])],[o(r,l,p[3],p[0]),o(r,l,p[3],p[2]),o(r,l,p[1],p[2])]);break;case 11:s.push([o(r,l,p[1],p[2]),o(r,l,p[0],p[2]),o(r,l,p[3],p[2])]);break;case 12:s.push([o(r,l,p[3],p[0]),o(r,l,p[2],p[0]),o(r,l,p[2],p[1])],[o(r,l,p[3],p[1]),o(r,l,p[3],p[0]),o(r,l,p[2],p[1])]);break;case 13:s.push([o(r,l,p[0],p[1]),o(r,l,p[2],p[1]),o(r,l,p[3],p[1])]);break;case 14:s.push([o(r,l,p[2],p[0]),o(r,l,p[1],p[0]),o(r,l,p[3],p[0])])}}else if(3===c){if(0==(g=(y[p[0]]<<0)+(y[p[1]]<<1)+(y[p[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([o(r,l,p[0],p[2]),o(r,l,p[0],p[1])]);break;case 2:s.push([o(r,l,p[1],p[0]),o(r,l,p[1],p[2])]);break;case 3:s.push([o(r,l,p[0],p[2]),o(r,l,p[1],p[2])]);break;case 4:s.push([o(r,l,p[2],p[1]),o(r,l,p[2],p[0])]);break;case 5:s.push([o(r,l,p[2],p[1]),o(r,l,p[0],p[1])]);break;case 6:s.push([o(r,l,p[1],p[0]),o(r,l,p[2],p[0])])}}else if(2===c){var g;if(0==(g=(y[p[0]]<<0)+(y[p[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([o(r,l,p[0],p[1])]);break;case 2:s.push([o(r,l,p[1],p[0])])}}}return s}}]},{}],293:[function(x,T,b){"use strict";var e=x("bit-twiddle"),o=x("union-find");function i(p,c){var g=p.length,m=p.length-c.length,u=Math.min;if(m)return m;switch(g){case 0:return 0;case 1:return p[0]-c[0];case 2:return(A=p[0]+p[1]-c[0]-c[1])||u(p[0],p[1])-u(c[0],c[1]);case 3:var w=p[0]+p[1],f=c[0]+c[1];if(A=w+p[2]-(f+c[2]))return A;var A,M=u(p[0],p[1]),k=u(c[0],c[1]);return(A=u(M,p[2])-u(k,c[2]))||u(M+p[2],w)-u(k+c[2],f);default:var E=p.slice(0);E.sort();var P=c.slice(0);P.sort();for(var D=0;D<g;++D)if(m=E[D]-P[D])return m;return 0}}function l(p,c){return i(p[0],c[0])}function r(p,c){if(c){for(var g=p.length,m=new Array(g),u=0;u<g;++u)m[u]=[p[u],c[u]];for(m.sort(l),u=0;u<g;++u)p[u]=m[u][0],c[u]=m[u][1];return p}return p.sort(i),p}function y(p){if(0===p.length)return[];for(var c=1,g=p.length,m=1;m<g;++m){var u=p[m];if(i(u,p[m-1])){if(m===c){c++;continue}p[c++]=u}}return p.length=c,p}function h(p,c){for(var g=0,m=p.length-1,u=-1;g<=m;){var w=g+m>>1,f=i(p[w],c);f<=0?(0===f&&(u=w),g=w+1):f>0&&(m=w-1)}return u}function s(p,c){for(var g=new Array(p.length),m=0,u=g.length;m<u;++m)g[m]=[];for(var w=[],f=(m=0,c.length);m<f;++m)for(var A=c[m],M=A.length,k=1,E=1<<M;k<E;++k){w.length=e.popCount(k);for(var P=0,D=0;D<M;++D)k&1<<D&&(w[P++]=A[D]);var F=h(p,w);if(!(F<0))for(;g[F++].push(m),!(F>=p.length||0!==i(p[F],w)););}return g}function d(p,c){if(c<0)return[];for(var g=[],m=(1<<c+1)-1,u=0;u<p.length;++u)for(var w=p[u],f=m;f<1<<w.length;f=e.nextCombination(f)){for(var A=new Array(c+1),M=0,k=0;k<w.length;++k)f&1<<k&&(A[M++]=w[k]);g.push(A)}return r(g)}b.dimension=function(p){for(var c=0,g=Math.max,m=0,u=p.length;m<u;++m)c=g(c,p[m].length);return c-1},b.countVertices=function(p){for(var c=-1,g=Math.max,m=0,u=p.length;m<u;++m)for(var w=p[m],f=0,A=w.length;f<A;++f)c=g(c,w[f]);return c+1},b.cloneCells=function(p){for(var c=new Array(p.length),g=0,m=p.length;g<m;++g)c[g]=p[g].slice(0);return c},b.compareCells=i,b.normalize=r,b.unique=y,b.findCell=h,b.incidence=s,b.dual=function(p,c){if(!c)return s(y(d(p,0)),p);for(var g=new Array(c),m=0;m<c;++m)g[m]=[];m=0;for(var u=p.length;m<u;++m)for(var w=p[m],f=0,A=w.length;f<A;++f)g[w[f]].push(m);return g},b.explode=function(p){for(var c=[],g=0,m=p.length;g<m;++g)for(var u=p[g],w=0|u.length,f=1,A=1<<w;f<A;++f){for(var M=[],k=0;k<w;++k)f>>>k&1&&M.push(u[k]);c.push(M)}return r(c)},b.skeleton=d,b.boundary=function(p){for(var c=[],g=0,m=p.length;g<m;++g)for(var u=p[g],w=0,f=u.length;w<f;++w){for(var A=new Array(u.length-1),M=0,k=0;M<f;++M)M!==w&&(A[k++]=u[M]);c.push(A)}return r(c)},b.connectedComponents=function(p,c){return c?function(g,m){for(var u=new o(m),w=0;w<g.length;++w)for(var f=g[w],A=0;A<f.length;++A)for(var M=A+1;M<f.length;++M)u.link(f[A],f[M]);var k=[],E=u.ranks;for(w=0;w<E.length;++w)E[w]=-1;for(w=0;w<g.length;++w){var P=u.find(g[w][0]);E[P]<0?(E[P]=k.length,k.push([g[w].slice(0)])):k[E[P]].push(g[w].slice(0))}return k}(p,c):function(g){for(var m=y(r(d(g,0))),u=new o(m.length),w=0;w<g.length;++w)for(var f=g[w],A=0;A<f.length;++A)for(var M=h(m,[f[A]]),k=A+1;k<f.length;++k)u.link(M,h(m,[f[k]]));var E=[],P=u.ranks;for(w=0;w<P.length;++w)P[w]=-1;for(w=0;w<g.length;++w){var D=u.find(h(m,[g[w][0]]));P[D]<0?(P[D]=E.length,E.push([g[w].slice(0)])):E[P[D]].push(g[w].slice(0))}return E}(p)}},{"bit-twiddle":32,"union-find":309}],294:[function(x,T,b){arguments[4][32][0].apply(b,arguments)},{dup:32}],295:[function(x,T,b){arguments[4][293][0].apply(b,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(x,T,b){"use strict";function e(o){this.roots=new Array(o),this.ranks=new Array(o);for(var i=0;i<o;++i)this.roots[i]=i,this.ranks[i]=0}T.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.prototype.find=function(o){for(var i=this.roots;i[o]!==o;){var l=i[o];i[o]=i[l],o=l}return o},e.prototype.link=function(o,i){var l=this.find(o),r=this.find(i);if(l!==r){var y=this.ranks,h=this.roots,s=y[l],d=y[r];s<d?h[l]=r:d<s?h[r]=l:(h[r]=l,++y[l])}}},{}],297:[function(x,T,b){"use strict";T.exports=function(i,l,r){for(var y=l.length,h=i.length,s=new Array(y),d=new Array(y),p=new Array(y),c=new Array(y),g=0;g<y;++g)s[g]=d[g]=-1,p[g]=1/0,c[g]=!1;for(g=0;g<h;++g){var m=i[g];if(2!==m.length)throw new Error("Input must be a graph");var u=m[1],w=m[0];d[w]=-1!==d[w]?-2:u,s[u]=-1!==s[u]?-2:w}function f(re){if(c[re])return 1/0;var J,ie,W=s[re],ae=d[re];return W<0||ae<0?1/0:(J=l[W],ie=l[ae],Math.abs(e(l[re],J,ie))/Math.sqrt(Math.pow(J[0]-ie[0],2)+Math.pow(J[1]-ie[1],2)))}function A(re,$){var J=L[re],ie=L[$];L[re]=ie,L[$]=J,I[J]=$,I[ie]=re}function M(re){return p[L[re]]}function k(re){return 1&re?re-1>>1:(re>>1)-1}function E(re){for(var $=M(re);;){var J=$,ie=2*re+1,j=2*(re+1),q=re;if(ie<B){var W=M(ie);W<J&&(q=ie,J=W)}if(j<B&&M(j)<J&&(q=j),q===re)return re;A(re,q),re=q}}function P(re){for(var $=M(re);re>0;){var J=k(re);if(!(J>=0&&$<M(J)))return re;A(re,J),re=J}}function D(){if(B>0){var re=L[0];return A(0,B-1),B-=1,E(0),re}return-1}function F(re,$){var J=L[re];return p[J]===$?re:(p[J]=-1/0,P(re),D(),p[J]=$,P((B+=1)-1))}function R(re){if(!c[re]){c[re]=!0;var $=s[re],J=d[re];s[J]>=0&&(s[J]=$),d[$]>=0&&(d[$]=J),I[$]>=0&&F(I[$],f($)),I[J]>=0&&F(I[J],f(J))}}var L=[],I=new Array(y);for(g=0;g<y;++g)(p[g]=f(g))<1/0?(I[g]=L.length,L.push(g)):I[g]=-1;var B=L.length;for(g=B>>1;g>=0;--g)E(g);for(;;){var V=D();if(V<0||p[V]>r)break;R(V)}var Z=[];for(g=0;g<y;++g)c[g]||(I[g]=Z.length,Z.push(l[g].slice()));function Y(re,$){if(re[$]<0)return $;var J=$,ie=$;do{var j=re[ie];if(!c[ie]||j<0||j===ie||(j=re[ie=j],!c[ie]||j<0||j===ie))break;ie=j,J=re[J]}while(J!==ie);for(var q=$;q!==ie;q=re[q])re[q]=ie;return ie}var Q=[];return i.forEach(function(re){var $=Y(s,re[0]),J=Y(d,re[1]);if($>=0&&J>=0&&$!==J){var ie=I[$],j=I[J];ie!==j&&Q.push([ie,j])}}),o.unique(o.normalize(Q)),{positions:Z,edges:Q}};var e=x("robust-orientation"),o=x("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(x,T,b){"use strict";T.exports=function(i,l){var r,y,h,s;if(l[0][0]<l[1][0])r=l[0],y=l[1];else{if(!(l[0][0]>l[1][0]))return o(l,i);r=l[1],y=l[0]}if(i[0][0]<i[1][0])h=i[0],s=i[1];else{if(!(i[0][0]>i[1][0]))return-o(i,l);h=i[1],s=i[0]}var d=e(r,y,s),p=e(r,y,h);if(d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;if(d=e(s,h,y),p=e(s,h,r),d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;return y[0]-s[0]};var e=x("robust-orientation");function o(i,l){var r,y,h,s;if(l[0][0]<l[1][0])r=l[0],y=l[1];else{if(!(l[0][0]>l[1][0])){var d=Math.min(i[0][1],i[1][1]),p=Math.max(i[0][1],i[1][1]),c=Math.min(l[0][1],l[1][1]),g=Math.max(l[0][1],l[1][1]);return p<c?p-c:d>g?d-g:p-g}r=l[1],y=l[0]}i[0][1]<i[1][1]?(h=i[0],s=i[1]):(h=i[1],s=i[0]);var m=e(y,r,h);return m||(m=e(y,r,s))||s-y}},{"robust-orientation":284}],299:[function(x,T,b){"use strict";T.exports=function(p){for(var c=p.length,g=2*c,m=new Array(g),u=0;u<c;++u){var w=p[u],f=w[0][0]<w[1][0];m[2*u]=new d(w[0][0],w,f,u),m[2*u+1]=new d(w[1][0],w,!f,u)}m.sort(function(R,L){var I=R.x-L.x;return I||(I=R.create-L.create)||Math.min(R.segment[0][1],R.segment[1][1])-Math.min(L.segment[0][1],L.segment[1][1])});var A=o(l),M=[],k=[],E=[];for(u=0;u<g;){for(var P=m[u].x,D=[];u<g;){var F=m[u];if(F.x!==P)break;u+=1,F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(D.push(new s(F.segment[0][1],F.index,!0,!0)),D.push(new s(F.segment[1][1],F.index,!1,!1))):(D.push(new s(F.segment[1][1],F.index,!0,!1)),D.push(new s(F.segment[0][1],F.index,!1,!0)))):A=F.create?A.insert(F.segment,F.index):A.remove(F.segment)}M.push(A.root),k.push(P),E.push(D)}return new r(M,k,E)};var e=x("binary-search-bounds"),o=x("functional-red-black-tree"),i=x("robust-orientation"),l=x("./lib/order-segments");function r(p,c,g){this.slabs=p,this.coordinates=c,this.horizontal=g}function y(p,c){return p.y-c}function h(p,c){for(var g=null;p;){var m,u,w=p.key;w[0][0]<w[1][0]?(m=w[0],u=w[1]):(m=w[1],u=w[0]);var f=i(m,u,c);if(f<0)p=p.left;else if(f>0)if(c[0]!==w[1][0])g=p,p=p.right;else{if(A=h(p.right,c))return A;p=p.left}else{if(c[0]!==w[1][0])return p;var A;if(A=h(p.right,c))return A;p=p.left}}return g}function s(p,c,g,m){this.y=p,this.index=c,this.start=g,this.closed=m}function d(p,c,g,m){this.x=p,this.segment=c,this.create=g,this.index=m}r.prototype.castUp=function(p){var c=e.le(this.coordinates,p[0]);if(c<0)return-1;var g=h(this.slabs[c],p),m=-1;if(g&&(m=g.value),this.coordinates[c]===p[0]){var u=null;if(g&&(u=g.key),c>0){var w=h(this.slabs[c-1],p);w&&(u?l(w.key,u)>0&&(u=w.key,m=w.value):(m=w.value,u=w.key))}var f=this.horizontal[c];if(f.length>0){var A=e.ge(f,p[1],y);if(A<f.length){var M=f[A];if(p[1]===M.y){if(M.closed)return M.index;for(;A<f.length-1&&f[A+1].y===p[1];)if((M=f[A+=1]).closed)return M.index;if(M.y===p[1]&&!M.start){if((A+=1)>=f.length)return m;M=f[A]}}if(M.start)if(u){var k=i(u[0],u[1],[p[0],M.y]);u[0][0]>u[1][0]&&(k=-k),k>0&&(m=M.index)}else m=M.index;else M.y!==p[1]&&(m=M.index)}}}return m}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(x,T,b){"use strict";var e=x("robust-dot-product"),o=x("robust-sum");function i(r,y){var h=o(e(r,y),[y[y.length-1]]);return h[h.length-1]}function l(r,y,h,s){var d=-y/(s-y);d<0?d=0:d>1&&(d=1);for(var p=1-d,c=r.length,g=new Array(c),m=0;m<c;++m)g[m]=d*r[m]+p*h[m];return g}T.exports=function(r,y){for(var h=[],s=[],d=i(r[r.length-1],y),p=r[r.length-1],c=r[0],g=0;g<r.length;++g,p=c){var m=i(c=r[g],y);if(d<0&&m>0||d>0&&m<0){var u=l(p,m,c,d);h.push(u),s.push(u.slice())}m<0?s.push(c.slice()):m>0?h.push(c.slice()):(h.push(c.slice()),s.push(c.slice())),d=m}return{positive:h,negative:s}},T.exports.positive=function(r,y){for(var h=[],s=i(r[r.length-1],y),d=r[r.length-1],p=r[0],c=0;c<r.length;++c,d=p){var g=i(p=r[c],y);(s<0&&g>0||s>0&&g<0)&&h.push(l(d,g,p,s)),g>=0&&h.push(p.slice()),s=g}return h},T.exports.negative=function(r,y){for(var h=[],s=i(r[r.length-1],y),d=r[r.length-1],p=r[0],c=0;c<r.length;++c,d=p){var g=i(p=r[c],y);(s<0&&g>0||s>0&&g<0)&&h.push(l(d,g,p,s)),g<=0&&h.push(p.slice()),s=g}return h}},{"robust-dot-product":281,"robust-sum":289}],301:[function(x,T,b){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(h){return l(y(h),arguments)}function i(h,s){return o.apply(null,[h].concat(s||[]))}function l(h,s){var d,p,c,g,m,u,w,f,A,M=1,k=h.length,E="";for(p=0;p<k;p++)if("string"==typeof h[p])E+=h[p];else if("object"==typeof h[p]){if((g=h[p]).keys)for(d=s[M],c=0;c<g.keys.length;c++){if(null==d)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[c],g.keys[c-1]));d=d[g.keys[c]]}else d=g.param_no?s[g.param_no]:s[M++];if(e.not_type.test(g.type)&&e.not_primitive.test(g.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(g.type)&&"number"!=typeof d&&isNaN(d))throw new TypeError(o("[sprintf] expecting number but found %T",d));switch(e.number.test(g.type)&&(f=d>=0),g.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,g.width?parseInt(g.width):0);break;case"e":d=g.precision?parseFloat(d).toExponential(g.precision):parseFloat(d).toExponential();break;case"f":d=g.precision?parseFloat(d).toFixed(g.precision):parseFloat(d);break;case"g":d=g.precision?String(Number(d.toPrecision(g.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=g.precision?d.substring(0,g.precision):d;break;case"t":d=String(!!d),d=g.precision?d.substring(0,g.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=g.precision?d.substring(0,g.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=g.precision?d.substring(0,g.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}e.json.test(g.type)?E+=d:(!e.number.test(g.type)||f&&!g.sign?A="":(A=f?"+":"-",d=d.toString().replace(e.sign,"")),u=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",w=g.width-(A+d).length,m=g.width&&w>0?u.repeat(w):"",E+=g.align?A+d+m:"0"===u?A+m+d:m+A+d)}return E}var r=Object.create(null);function y(h){if(r[h])return r[h];for(var s,d=h,p=[],c=0;d;){if(null!==(s=e.text.exec(d)))p.push(s[0]);else if(null!==(s=e.modulo.exec(d)))p.push("%");else{if(null===(s=e.placeholder.exec(d)))throw new SyntaxError("[sprintf] unexpected placeholder");if(s[2]){c|=1;var g=[],m=s[2],u=[];if(null===(u=e.key.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(u[1]);""!==(m=m.substring(u[0].length));)if(null!==(u=e.key_access.exec(m)))g.push(u[1]);else{if(null===(u=e.index_access.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(u[1])}s[2]=g}else c|=2;if(3===c)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:s[0],param_no:s[1],keys:s[2],sign:s[3],pad_char:s[4],align:s[5],width:s[6],precision:s[7],type:s[8]})}d=d.substring(s[0].length)}return r[h]=p}void 0!==b&&(b.sprintf=o,b.vsprintf=i),"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i)}()},{}],302:[function(x,T,b){"use strict";T.exports=function(r,y){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(d,p){for(var c=o(d,p),g=c.length,m=new Array(g),u=new Array(g),w=0;w<g;++w)m[w]=[c[w]],u[w]=[w];return{positions:m,cells:u}}(r,y);var h=r.order.join()+"-"+r.dtype,s=l[h];return y=+y||0,s||(s=l[h]=function(d,p){var g=i[d.length+"d"];if(g)return g(e,d,p)}(r.order,r.dtype)),s(r,y)};var e=x("ndarray-extract-contour"),o=x("zero-crossings"),i={"2d":function(r,y,h){var s=r({order:y,scalarArguments:3,getters:"generic"===h?[0]:void 0,phase:function(d,p,c,g){return d>g|0},vertex:function(d,p,c,g,m,u,w,f,A,M,k,E,P){var D=(w<<0)+(f<<1)+(A<<2)+(M<<3)|0;if(0!==D&&15!==D)switch(D){case 0:case 15:k.push([d-.5,p-.5]);break;case 1:k.push([d-.25-.25*(g+c-2*P)/(c-g),p-.25-.25*(m+c-2*P)/(c-m)]);break;case 2:k.push([d-.75-.25*(-g-c+2*P)/(g-c),p-.25-.25*(u+g-2*P)/(g-u)]);break;case 3:k.push([d-.5,p-.5-.5*(m+c+u+g-4*P)/(c-m+g-u)]);break;case 4:k.push([d-.25-.25*(u+m-2*P)/(m-u),p-.75-.25*(-m-c+2*P)/(m-c)]);break;case 5:k.push([d-.5-.5*(g+c+u+m-4*P)/(c-g+m-u),p-.5]);break;case 6:k.push([d-.5-.25*(-g-c+u+m)/(g-c+m-u),p-.5-.25*(-m-c+u+g)/(m-c+g-u)]);break;case 7:k.push([d-.75-.25*(u+m-2*P)/(m-u),p-.75-.25*(u+g-2*P)/(g-u)]);break;case 8:k.push([d-.75-.25*(-u-m+2*P)/(u-m),p-.75-.25*(-u-g+2*P)/(u-g)]);break;case 9:k.push([d-.5-.25*(g+c+-u-m)/(c-g+u-m),p-.5-.25*(m+c+-u-g)/(c-m+u-g)]);break;case 10:k.push([d-.5-.5*(-g-c-u-m+4*P)/(g-c+u-m),p-.5]);break;case 11:k.push([d-.25-.25*(-u-m+2*P)/(u-m),p-.75-.25*(m+c-2*P)/(c-m)]);break;case 12:k.push([d-.5,p-.5-.5*(-m-c-u-g+4*P)/(m-c+u-g)]);break;case 13:k.push([d-.75-.25*(g+c-2*P)/(c-g),p-.25-.25*(-u-g+2*P)/(u-g)]);break;case 14:k.push([d-.25-.25*(-g-c+2*P)/(g-c),p-.25-.25*(-m-c+2*P)/(m-c)])}},cell:function(d,p,c,g,m,u,w,f,A){f.push(m?[d,p]:[p,d])}});return function(d,p){var c=[],g=[];return s(d,c,g,p),{positions:c,cells:g}}}},l={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(x,T,b){(function(e){(function(){"use strict";T.exports=function r(y,h,s){s=s||{};var d=l[y];d||(d=l[y]={" ":{data:new Float32Array(0),shape:.2}});var p=d[h];if(!p)if(h.length<=1||!/\d/.test(h))p=d[h]=function(P){for(var D=P.cells,F=P.positions,R=new Float32Array(6*D.length),L=0,I=0,B=0;B<D.length;++B)for(var V=D[B],Z=0;Z<3;++Z){var Y=F[V[Z]];R[L++]=Y[0],R[L++]=Y[1]+1.4,I=Math.max(Y[0],I)}return{data:R,shape:I}}(o(h,{triangles:!0,font:y,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var c=h.split(/(\d|\s)/),g=new Array(c.length),m=0,u=0,w=0;w<c.length;++w)g[w]=r(y,c[w]),m+=g[w].data.length,u+=g[w].shape,w>0&&(u+=.02);var f=new Float32Array(m),A=0,M=-.5*u;for(w=0;w<g.length;++w){for(var k=g[w].data,E=0;E<k.length;E+=2)f[A++]=k[E]+M,f[A++]=k[E+1];M+=g[w].shape+.02}p=d[h]={data:f,shape:u}}return p};var o=x("vectorize-text"),i=window||e.global||{},l=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}}).call(this)}).call(this,x("_process"))},{_process:5,"vectorize-text":311}],304:[function(x,T,b){"use strict";var e=x("parse-unit");function o(l,r){var y=e(getComputedStyle(l).getPropertyValue(r));return y[0]*i(y[1],l)}function i(l,r){switch(r=r||document.body,l=(l||"px").trim().toLowerCase(),r!==window&&r!==document||(r=document.body),l){case"%":return r.clientHeight/100;case"ch":case"ex":return function(y,h){var s=document.createElement("div");s.style["font-size"]="128"+y,h.appendChild(s);var d=o(s,"font-size")/128;return h.removeChild(s),d}(l,r);case"em":return o(r,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}T.exports=i},{"parse-unit":265}],305:[function(x,T,b){"use strict";T.exports=function(m){var u=(m=m||{}).center||[0,0,0],w=m.up||[0,1,0],f=m.right||d(w),A=m.radius||1,M=m.theta||0,k=m.phi||0;if(u=[].slice.call(u,0,3),w=[].slice.call(w,0,3),r(w,w),f=[].slice.call(f,0,3),r(f,f),"eye"in m){var E=m.eye,P=[E[0]-u[0],E[1]-u[1],E[2]-u[2]];l(f,P,w),h(f[0],f[1],f[2])<1e-6?f=d(w):r(f,f),A=h(P[0],P[1],P[2]);var D=y(w,P)/A,F=y(f,P)/A;k=Math.acos(D),M=Math.acos(F)}return A=Math.log(A),new p(m.zoomMin,m.zoomMax,u,w,f,A,M,k)};var e=x("filtered-vector"),o=x("gl-mat4/invert"),i=x("gl-mat4/rotate"),l=x("gl-vec3/cross"),r=x("gl-vec3/normalize"),y=x("gl-vec3/dot");function h(m,u,w){return Math.sqrt(Math.pow(m,2)+Math.pow(u,2)+Math.pow(w,2))}function s(m){return Math.min(1,Math.max(-1,m))}function d(m){var u=Math.abs(m[0]),w=Math.abs(m[1]),f=Math.abs(m[2]),A=[0,0,0];u>Math.max(w,f)?A[2]=1:w>Math.max(u,f)?A[0]=1:A[1]=1;for(var M=0,k=0,E=0;E<3;++E)M+=m[E]*m[E],k+=A[E]*m[E];for(E=0;E<3;++E)A[E]-=k/M*m[E];return r(A,A),A}function p(m,u,w,f,A,M,k,E){this.center=e(w),this.up=e(f),this.right=e(A),this.radius=e([M]),this.angle=e([k,E]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(m,u),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var c=p.prototype;c.setDistanceLimits=function(m,u){m=m>0?Math.log(m):-1/0,u=u>0?Math.log(u):1/0,u=Math.max(u,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=u},c.getDistanceLimits=function(m){var u=this.radius.bounds[0];return m?(m[0]=Math.exp(u[0][0]),m[1]=Math.exp(u[1][0]),m):[Math.exp(u[0][0]),Math.exp(u[1][0])]},c.recalcMatrix=function(m){this.center.curve(m),this.up.curve(m),this.right.curve(m),this.radius.curve(m),this.angle.curve(m);for(var u=this.computedUp,w=this.computedRight,f=0,A=0,M=0;M<3;++M)A+=u[M]*w[M],f+=u[M]*u[M];var k=Math.sqrt(f),E=0;for(M=0;M<3;++M)w[M]-=u[M]*A/f,E+=w[M]*w[M],u[M]/=k;var P=Math.sqrt(E);for(M=0;M<3;++M)w[M]/=P;var D=this.computedToward;l(D,u,w),r(D,D);var F=Math.exp(this.computedRadius[0]),R=this.computedAngle[0],L=this.computedAngle[1],I=Math.cos(R),B=Math.sin(R),V=Math.cos(L),Z=Math.sin(L),Y=this.computedCenter,Q=I*V,re=B*V,$=Z,J=-I*Z,ie=-B*Z,j=V,q=this.computedEye,W=this.computedMatrix;for(M=0;M<3;++M){var ae=Q*w[M]+re*D[M]+$*u[M];W[4*M+1]=J*w[M]+ie*D[M]+j*u[M],W[4*M+2]=ae,W[4*M+3]=0}var G=W[1],ee=W[5],te=W[9],le=W[2],ue=W[6],de=W[10],he=ee*de-te*ue,be=te*le-G*de,me=G*ue-ee*le,_e=h(he,be,me);for(be/=_e,me/=_e,W[0]=he/=_e,W[4]=be,W[8]=me,M=0;M<3;++M)q[M]=Y[M]+W[2+4*M]*F;for(M=0;M<3;++M){E=0;for(var Ee=0;Ee<3;++Ee)E+=W[M+4*Ee]*q[Ee];W[12+M]=-E}W[15]=1},c.getMatrix=function(m,u){this.recalcMatrix(m);var w=this.computedMatrix;if(u){for(var f=0;f<16;++f)u[f]=w[f];return u}return w};var g=[0,0,0];c.rotate=function(m,u,w,f){if(this.angle.move(m,u,w),f){this.recalcMatrix(m);var A=this.computedMatrix;g[0]=A[2],g[1]=A[6],g[2]=A[10];for(var M=this.computedUp,k=this.computedRight,E=this.computedToward,P=0;P<3;++P)A[4*P]=M[P],A[4*P+1]=k[P],A[4*P+2]=E[P];for(i(A,A,f,g),P=0;P<3;++P)M[P]=A[4*P],k[P]=A[4*P+1];this.up.set(m,M[0],M[1],M[2]),this.right.set(m,k[0],k[1],k[2])}},c.pan=function(m,u,w,f){u=u||0,w=w||0,f=f||0,this.recalcMatrix(m);var A=this.computedMatrix,M=(Math.exp(this.computedRadius[0]),A[1]),k=A[5],E=A[9],P=h(M,k,E),D=A[0],F=A[4],R=A[8],L=D*(M/=P)+F*(k/=P)+R*(E/=P),I=h(D-=M*L,F-=k*L,R-=E*L),B=(D/=I)*u+M*w,V=(F/=I)*u+k*w,Z=(R/=I)*u+E*w;this.center.move(m,B,V,Z);var Y=Math.exp(this.computedRadius[0]);Y=Math.max(1e-4,Y+f),this.radius.set(m,Math.log(Y))},c.translate=function(m,u,w,f){this.center.move(m,u||0,w||0,f||0)},c.setMatrix=function(m,u,w,f){var A=1;"number"==typeof w&&(A=0|w),(A<0||A>3)&&(A=1);var M=(A+2)%3;u||(this.recalcMatrix(m),u=this.computedMatrix);var k=u[A],E=u[A+4],P=u[A+8];if(f){var D=Math.abs(k),F=Math.abs(E),R=Math.abs(P),L=Math.max(D,F,R);D===L?(k=k<0?-1:1,E=P=0):R===L?(P=P<0?-1:1,k=E=0):(E=E<0?-1:1,k=P=0)}else{var I=h(k,E,P);k/=I,E/=I,P/=I}var B,V,Z=u[M],Y=u[M+4],Q=u[M+8],re=Z*k+Y*E+Q*P,$=h(Z-=k*re,Y-=E*re,Q-=P*re),J=E*(Q/=$)-P*(Y/=$),ie=P*(Z/=$)-k*Q,j=k*Y-E*Z,q=h(J,ie,j);if(J/=q,ie/=q,j/=q,this.center.jump(m,ve,Te,Ie),this.radius.idle(m),this.up.jump(m,k,E,P),this.right.jump(m,Z,Y,Q),2===A){var W=u[1],ae=u[5],G=u[9];B=he<0?-Math.PI/2:Math.PI/2,V=Math.atan2(W*J+ae*ie+G*j,W*Z+ae*Y+G*Q)}else{var le=u[2],ue=u[6],de=u[10],he=le*k+ue*E+de*P,be=le*Z+ue*Y+de*Q,me=le*J+ue*ie+de*j;B=Math.asin(s(he)),V=Math.atan2(me,be)}this.angle.jump(m,V,B),this.recalcMatrix(m);var _e=u[2],Ee=u[6],De=u[10],Se=this.computedMatrix;o(Se,u);var Fe=Se[15],ve=Se[12]/Fe,Te=Se[13]/Fe,Ie=Se[14]/Fe,Ce=Math.exp(this.computedRadius[0]);this.center.jump(m,ve-_e*Ce,Te-Ee*Ce,Ie-De*Ce)},c.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},c.idle=function(m){this.center.idle(m),this.up.idle(m),this.right.idle(m),this.radius.idle(m),this.angle.idle(m)},c.flush=function(m){this.center.flush(m),this.up.flush(m),this.right.flush(m),this.radius.flush(m),this.angle.flush(m)},c.setDistance=function(m,u){u>0&&this.radius.set(m,Math.log(u))},c.lookAt=function(m,u,w,f){this.recalcMatrix(m),u=u||this.computedEye,w=w||this.computedCenter;var A=(f=f||this.computedUp)[0],M=f[1],k=f[2],E=h(A,M,k);if(!(E<1e-6)){A/=E,M/=E,k/=E;var P=u[0]-w[0],D=u[1]-w[1],F=u[2]-w[2],R=h(P,D,F);if(!(R<1e-6)){P/=R,D/=R,F/=R;var L=this.computedRight,I=L[0],B=L[1],V=L[2],Z=A*I+M*B+k*V,Y=h(I-=Z*A,B-=Z*M,V-=Z*k);if(!(Y<.01&&(Y=h(I=M*F-k*D,B=k*P-A*F,V=A*D-M*P))<1e-6)){I/=Y,B/=Y,V/=Y,this.up.set(m,A,M,k),this.right.set(m,I,B,V),this.center.set(m,w[0],w[1],w[2]),this.radius.set(m,Math.log(R));var Q=M*V-k*B,re=k*I-A*V,$=A*B-M*I,J=h(Q,re,$),j=I*P+B*D+V*F,q=(Q/=J)*P+(re/=J)*D+($/=J)*F,W=Math.asin(s(A*P+M*D+k*F)),ae=Math.atan2(q,j),G=this.angle._state,ee=G[G.length-1],te=G[G.length-2];ee%=2*Math.PI;var le=Math.abs(ee+2*Math.PI-ae),ue=Math.abs(ee-ae),de=Math.abs(ee-2*Math.PI-ae);le<ue&&(ee+=2*Math.PI),de<ue&&(ee-=2*Math.PI),this.angle.jump(this.angle.lastT(),ee,te),this.angle.set(m,ae,W)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(x,T,b){"use strict";T.exports=function(o,i,l){var r=o*i,y=e*o,h=y-(y-o),s=o-h,d=e*i,p=d-(d-i),c=i-p,g=s*c-(r-h*p-s*p-h*c);return l?(l[0]=g,l[1]=r,l):[g,r]};var e=+(Math.pow(2,27)+1)},{}],307:[function(x,T,b){"use strict";T.exports=function(e,o,i){var l=e+o,r=l-e,y=o-r,h=e-(l-r);return i?(i[0]=h+y,i[1]=l,i):[h+y,l]}},{}],308:[function(x,T,b){(function(e){(function(){"use strict";var o=x("bit-twiddle"),i=x("dup"),l=x("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r="undefined"!=typeof Uint8ClampedArray,y="undefined"!=typeof BigUint64Array,h="undefined"!=typeof BigInt64Array,s=e.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=i([32,0])),s.BIGUINT64||(s.BIGUINT64=i([32,0])),s.BIGINT64||(s.BIGINT64=i([32,0])),s.BUFFER||(s.BUFFER=i([32,0]));var d=s.DATA,p=s.BUFFER;function c(I){if(I){var V=o.log2(I.length||I.byteLength);d[V].push(I)}}function g(I){I=o.nextPow2(I);var B=o.log2(I),V=d[B];return V.length>0?V.pop():new ArrayBuffer(I)}function m(I){return new Uint8Array(g(I),0,I)}function u(I){return new Uint16Array(g(2*I),0,I)}function w(I){return new Uint32Array(g(4*I),0,I)}function f(I){return new Int8Array(g(I),0,I)}function A(I){return new Int16Array(g(2*I),0,I)}function M(I){return new Int32Array(g(4*I),0,I)}function k(I){return new Float32Array(g(4*I),0,I)}function E(I){return new Float64Array(g(8*I),0,I)}function P(I){return r?new Uint8ClampedArray(g(I),0,I):m(I)}function D(I){return y?new BigUint64Array(g(8*I),0,I):null}function F(I){return h?new BigInt64Array(g(8*I),0,I):null}function R(I){return new DataView(g(I),0,I)}function L(I){I=o.nextPow2(I);var B=o.log2(I),V=p[B];return V.length>0?V.pop():new l(I)}b.free=function(I){if(l.isBuffer(I))p[o.log2(I.length)].push(I);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(I)&&(I=I.buffer),!I)return;var V=0|o.log2(I.length||I.byteLength);d[V].push(I)}},b.freeUint8=b.freeUint16=b.freeUint32=b.freeBigUint64=b.freeInt8=b.freeInt16=b.freeInt32=b.freeBigInt64=b.freeFloat32=b.freeFloat=b.freeFloat64=b.freeDouble=b.freeUint8Clamped=b.freeDataView=function(I){c(I.buffer)},b.freeArrayBuffer=c,b.freeBuffer=function(I){p[o.log2(I.length)].push(I)},b.malloc=function(I,B){if(void 0===B||"arraybuffer"===B)return g(I);switch(B){case"uint8":return m(I);case"uint16":return u(I);case"uint32":return w(I);case"int8":return f(I);case"int16":return A(I);case"int32":return M(I);case"float":case"float32":return k(I);case"double":case"float64":return E(I);case"uint8_clamped":return P(I);case"bigint64":return F(I);case"biguint64":return D(I);case"buffer":return L(I);case"data":case"dataview":return R(I);default:return null}return null},b.mallocArrayBuffer=g,b.mallocUint8=m,b.mallocUint16=u,b.mallocUint32=w,b.mallocInt8=f,b.mallocInt16=A,b.mallocInt32=M,b.mallocFloat32=b.mallocFloat=k,b.mallocFloat64=b.mallocDouble=E,b.mallocUint8Clamped=P,b.mallocBigUint64=D,b.mallocBigInt64=F,b.mallocDataView=R,b.mallocBuffer=L,b.clearCache=function(){for(var I=0;I<32;++I)s.UINT8[I].length=0,s.UINT16[I].length=0,s.UINT32[I].length=0,s.INT8[I].length=0,s.INT16[I].length=0,s.INT32[I].length=0,s.FLOAT[I].length=0,s.DOUBLE[I].length=0,s.BIGUINT64[I].length=0,s.BIGINT64[I].length=0,s.UINT8C[I].length=0,d[I].length=0,p[I].length=0}}).call(this)}).call(this,void 0!==v?v:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(x,T,b){"use strict";function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var l=0;l<i;++l)this.roots[l]=l,this.ranks[l]=0}T.exports=e;var o=e.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},o.find=function(i){for(var l=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[l]!==i;){var y=r[l];r[l]=i,l=y}return i},o.link=function(i,l){var r=this.find(i),y=this.find(l);if(r!==y){var h=this.ranks,s=this.roots,d=h[r],p=h[y];d<p?s[r]=y:p<d?s[y]=r:(s[y]=r,++h[r])}}},{}],310:[function(x,T,b){"use strict";T.exports=function(e,o,i){return 0===e.length?e:o?(i||e.sort(o),function(l,r){for(var y=1,h=l.length,s=l[0],d=l[0],p=1;p<h;++p)if(d=s,r(s=l[p],d)){if(p===y){y++;continue}l[y++]=s}return l.length=y,l}(e,o)):(i||e.sort(),function(l){for(var r=1,y=l.length,h=l[0],s=l[0],d=1;d<y;++d,s=h)if(s=h,(h=l[d])!==s){if(d===r){r++;continue}l[r++]=h}return l.length=r,l}(e))}},{}],311:[function(x,T,b){"use strict";T.exports=function(l,r){return"object"==typeof r&&null!==r||(r={}),e(l,r.canvas||o,r.context||i,r)};var e=x("./lib/vtext"),o=null,i=null;"undefined"!=typeof document&&((o=document.createElement("canvas")).width=8192,o.height=1024,i=o.getContext("2d"))},{"./lib/vtext":312}],312:[function(x,T,b){T.exports=function(c,g,m,u){var w=64,f=1.25,A={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(w=u.size),u.lineSpacing&&u.lineSpacing>0&&(f=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(A.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(A.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(A.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(A.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(A.superscripts=!!u.styletags.superscripts)),m.font=[u.fontStyle,u.fontVariant,u.fontWeight,w+"px",u.font].filter(function(M){return M}).join(" "),m.textAlign="start",m.textBaseline="alphabetic",m.direction="ltr",p(function(M,k,E,P,D,F){E=(E=E.replace(/\n/g,"")).replace(/\<br\>/g,!0===F.breaklines?"\n":" ");var R="",L=[];for(Z=0;Z<E.length;++Z)L[Z]=R;!0===F.bolds&&(L=h("b","b|",E,L)),!0===F.italics&&(L=h("i","i|",E,L)),!0===F.superscripts&&(L=h("sup","+1",E,L)),!0===F.subscripts&&(L=h("sub","-1",E,L));var I=[],B="";for(Z=0;Z<E.length;++Z)null!==L[Z]&&(B+=E[Z],I.push(L[Z]));var V,Z,Y,Q,re,$=B.split("\n"),J=$.length,ie=Math.round(D*P),j=P,q=2*P,W=0,ae=J*ie+q;M.height<ae&&(M.height=ae),k.fillStyle="#000",k.fillRect(0,0,M.width,M.height),k.fillStyle="#fff";var G=0,ee="";function te(){if(""!==ee){var Ee=k.measureText(ee).width;k.fillText(ee,j+Y,q+Q),Y+=Ee}}function le(){return Math.round(re)+"px "}function ue(Ee,De){var Se=""+k.font;if(!0===F.subscripts){var Fe=Ee.indexOf("-"),ve=De.indexOf("-"),Te=Fe>-1?parseInt(Ee[1+Fe]):0,Ie=ve>-1?parseInt(De[1+ve]):0;Te!==Ie&&(Se=Se.replace(le(),"?px "),re*=Math.pow(.75,Ie-Te),Se=Se.replace("?px ",le())),Q+=.25*ie*(Ie-Te)}if(!0===F.superscripts){var Ce=Ee.indexOf("+"),Re=De.indexOf("+"),Ue=Ce>-1?parseInt(Ee[1+Ce]):0,qe=Re>-1?parseInt(De[1+Re]):0;Ue!==qe&&(Se=Se.replace(le(),"?px "),re*=Math.pow(.75,qe-Ue),Se=Se.replace("?px ",le())),Q-=.25*ie*(qe-Ue)}if(!0===F.bolds){var Xe=Ee.indexOf("b|")>-1,st=De.indexOf("b|")>-1;!Xe&&st&&(Se=He?Se.replace("italic ","italic bold "):"bold "+Se),Xe&&!st&&(Se=Se.replace("bold ",""))}if(!0===F.italics){var He=Ee.indexOf("i|")>-1,$e=De.indexOf("i|")>-1;!He&&$e&&(Se="italic "+Se),He&&!$e&&(Se=Se.replace("italic ",""))}k.font=Se}for(V=0;V<J;++V){var de=$[V]+"\n";for(Y=0,Q=V*ie,re=P,ee="",Z=0;Z<de.length;++Z){var he=Z+G<I.length?I[Z+G]:I[I.length-1];R===he?ee+=de[Z]:(te(),ee=de[Z],void 0!==he&&(ue(R,he),R=he))}te(),G+=de.length;var be=0|Math.round(Y+2*j);W<be&&(W=be)}var me=W,_e=q+ie*J;return o(k.getImageData(0,0,me,_e).data,[_e,me,4]).pick(-1,-1,0).transpose(1,0)}(g,m,c,w,f,A),u,w)},T.exports.processPixels=p;var e=x("surface-nets"),o=x("ndarray"),i=x("simplify-planar-graph"),l=x("clean-pslg"),r=x("cdt2d"),y=x("planar-graph-to-polyline");function h(c,g,m,u){for(var w="<"+c+">",f="</"+c+">",A=w.length,M=f.length,k="+"===g[0]||"-"===g[0],E=0,P=-M;E>-1&&-1!==(E=m.indexOf(w,E))&&-1!==(P=m.indexOf(f,E+A))&&!(P<=E);){for(var D=E;D<P+M;++D)if(D<E+A||D>=P)u[D]=null,m=m.substr(0,D)+" "+m.substr(D+1);else if(null!==u[D]){var F=u[D].indexOf(g[0]);-1===F?u[D]+=g:k&&(u[D]=u[D].substr(0,F+1)+(1+parseInt(u[D][F+1]))+u[D].substr(F+2))}var R=E+A,L=m.substr(R,P-R).indexOf(w);E=-1!==L?L:P+M}return u}function d(c,g,m,u){var w=function s(c,g){var m=e(c,128);return g?i(m.cells,m.positions,.25):{edges:m.cells,positions:m.positions}}(c,u),f=function(V,Z,Y){for(var Q=Z.textAlign||"start",re=Z.textBaseline||"alphabetic",$=[1<<30,1<<30],J=[0,0],ie=V.length,j=0;j<ie;++j)for(var q=V[j],W=0;W<2;++W)$[W]=0|Math.min($[W],q[W]),J[W]=0|Math.max(J[W],q[W]);var ae=0;switch(Q){case"center":ae=-.5*($[0]+J[0]);break;case"right":case"end":ae=-J[0];break;case"left":case"start":ae=-$[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Q+"'")}var G=0;switch(re){case"hanging":case"top":G=-$[1];break;case"middle":G=-.5*($[1]+J[1]);break;case"alphabetic":case"ideographic":G=-3*Y;break;case"bottom":G=-J[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+re+"'")}var ee=1/Y;return"lineHeight"in Z?ee*=+Z.lineHeight:"width"in Z?ee=Z.width/(J[0]-$[0]):"height"in Z&&(ee=Z.height/(J[1]-$[1])),V.map(function(te){return[ee*(te[0]+ae),ee*(te[1]+G)]})}(w.positions,g,m),A=w.edges,M="ccw"===g.orientation;if(l(f,A),g.polygons||g.polygon||g.polyline){for(var k=y(A,f),E=new Array(k.length),P=0;P<k.length;++P){for(var D=k[P],F=new Array(D.length),R=0;R<D.length;++R){for(var L=D[R],I=new Array(L.length),B=0;B<L.length;++B)I[B]=f[L[B]].slice();M&&I.reverse(),F[R]=I}E[P]=F}return E}return g.triangles||g.triangulate||g.triangle?{cells:r(f,A,{delaunay:!1,exterior:!1,interior:!0}),positions:f}:{edges:A,positions:f}}function p(c,g,m){try{return d(c,g,m,!0)}catch(u){}try{return d(c,g,m,!1)}catch(u){}return g.polygons||g.polyline||g.polygon?[]:g.triangles||g.triangulate||g.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(x,T,b){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=w);var e=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var i=new o,l=Object.freeze({});if(i.set(l,1),1===i.get(l))return void(T.exports=WeakMap);e=!0}}var r=Object.getOwnPropertyNames,y=Object.defineProperty,h=Object.isExtensible,s="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var d=new ArrayBuffer(25),p=new Uint8Array(d);crypto.getRandomValues(p),s="weakmap:rand:"+Array.prototype.map.call(p,function(E){return(E%36).toString(36)}).join("")+"___"}if(y(Object,"getOwnPropertyNames",{value:function(E){return r(E).filter(f)}}),"getPropertyNames"in Object){var c=Object.getPropertyNames;y(Object,"getPropertyNames",{value:function(E){return c(E).filter(f)}})}!function(){var E=Object.freeze;y(Object,"freeze",{value:function(F){return A(F),E(F)}});var P=Object.seal;y(Object,"seal",{value:function(F){return A(F),P(F)}});var D=Object.preventExtensions;y(Object,"preventExtensions",{value:function(F){return A(F),D(F)}})}();var g=!1,m=0,u=function(){this instanceof u||k();var E=[],P=[],D=m++;return Object.create(u.prototype,{get___:{value:M(function(F,R){var L,I=A(F);return I?D in I?I[D]:R:(L=E.indexOf(F))>=0?P[L]:R})},has___:{value:M(function(F){var R=A(F);return R?D in R:E.indexOf(F)>=0})},set___:{value:M(function(F,R){var L,I=A(F);return I?I[D]=R:(L=E.indexOf(F))>=0?P[L]=R:(P[L=E.length]=R,E[L]=F),this})},delete___:{value:M(function(F){var R,L,I=A(F);return I?D in I&&delete I[D]:!((R=E.indexOf(F))<0||(L=E.length-1,E[R]=void 0,P[R]=P[L],E[R]=E[L],E.length=L,P.length=L,0))})}})};u.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function E(){this instanceof u||k();var P,D=new o,F=void 0,R=!1;return P=e?function(L,I){return D.set(L,I),D.has(L)||(F||(F=new u),F.set(L,I)),this}:function(L,I){if(R)try{D.set(L,I)}catch(B){F||(F=new u),F.set___(L,I)}else D.set(L,I);return this},Object.create(u.prototype,{get___:{value:M(function(L,I){return F?D.has(L)?D.get(L):F.get___(L,I):D.get(L,I)})},has___:{value:M(function(L){return D.has(L)||!!F&&F.has___(L)})},set___:{value:M(P)},delete___:{value:M(function(L){var I=!!D.delete(L);return F&&F.delete___(L)||I})},permitHostObjects___:{value:M(function(L){if(L!==w)throw new Error("bogus call to permitHostObjects___");R=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),E.prototype=u.prototype,T.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),T.exports=u)}function w(E){E.permitHostObjects___&&E.permitHostObjects___(w)}function f(E){return!("weakmap:"==E.substr(0,8)&&"___"===E.substr(E.length-3))}function A(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[s];if(P&&P.key===E)return P;if(h(E)){P={key:E};try{return y(E,s,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(D){return}}}function M(E){return E.prototype=null,Object.freeze(E)}function k(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(x,T,b){var e=x("./hidden-store.js");T.exports=function(){var o={};return function(i){if(("object"!=typeof i||null===i)&&"function"!=typeof i)throw new Error("Weakmap-shim: Key must be object");var l=i.valueOf(o);return l&&l.identity===o?l:e(i,o)}}},{"./hidden-store.js":315}],315:[function(x,T,b){T.exports=function(e,o){var i={identity:o},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(r){return r!==o?l.apply(this,arguments):i},writable:!0}),i}},{}],316:[function(x,T,b){var e=x("./create-store.js");T.exports=function(){var o=e();return{get:function(i,l){var r=o(i);return r.hasOwnProperty("value")?r.value:l},set:function(i,l){return o(i).value=l,this},has:function(i){return"value"in o(i)},delete:function(i){return delete o(i).value}}}},{"./create-store.js":314}],317:[function(x,T,b){"use strict";var i,l;T.exports=(i=function(){return function(i,l,r,y,h,s){var d=i[0],p=r[0],c=[0],g=p;y|=0;var m=0,u=p;for(m=0;m<d;++m){var w=l[y]-s,f=l[y+g]-s;w>=0!=f>=0&&h.push(c[0]+.5+.5*(w+f)/(w-f)),y+=u,++c[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),l={},function(r,y,h){var s=r.dtype,d=r.order,p=[s,d.join()].join(),c=l[p];return c||(l[p]=c=i([s,d])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,y,h)})},{}],318:[function(x,T,b){"use strict";T.exports=function(o,i){var l=[];return i=+i||0,e(o.hi(o.shape[0]-1),l,i),l};var e=x("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)}},Tp=>{Tp(Tp.s=957)}]);